
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://kougazhang.github.io/cdn-docs/api/small_program/">
      
      
        <link rel="prev" href="../purge/">
      
      
        <link rel="next" href="../../mobile-stats/">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.5.2, mkdocs-material-9.3.1">
    
    
      
        <title>微信小程序 - CDN Documents v0.0.1</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.046329b4.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#1" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="CDN Documents v0.0.1" class="md-header__button md-logo" aria-label="CDN Documents v0.0.1" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            CDN Documents v0.0.1
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              微信小程序
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/kougazhang/cdn-docs/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="CDN Documents v0.0.1" class="md-nav__button md-logo" aria-label="CDN Documents v0.0.1" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    CDN Documents v0.0.1
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/kougazhang/cdn-docs/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    文档首页
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Developer
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Developer
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../nginx/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Nginx
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../openresty/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Openresty
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    CDN
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            CDN
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../cdn/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    内容总览
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../cdn/product/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    产品介绍
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../cdn/guide/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    快速入门
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../cdn/buy/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    购买指南
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../cdn/service/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    服务管理
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../cdn/config/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    功能配置
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../cdn/edgerules/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    边缘规则
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../cdn/analysis/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    统计分析
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../cdn/refresh/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    刷新预热
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../cdn/log/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    日志管理
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../cdn/ssl/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    证书服务
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../cdn/tools/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    辅助工具
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../cdn/faq/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    常见问题
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    直播
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            直播
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../live/Introduction/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    产品简介
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../live/guide/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    快速入门
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../live/primary/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    基础配置
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../live/advanced/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    增值服务
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../live/mobile-sdk/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    移动端 sdk
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    点播&短视频
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            点播&短视频
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../video/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    短视频简介
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../video/short_video_demo/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    短视频 DEMO
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" checked>
        
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    云存储
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            云存储
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    产品简介
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../quick_start/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    快速入门
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../developer_guide/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    开发者指南
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../authorization/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    认证鉴权
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../rest_api/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    REST API
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../form_api/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    FORM API
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../developer_tools/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    开发者工具
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../sdk/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    SDK 使用文档
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../fusion_storage/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    融合云存储
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../multipart_upload/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    分块上传（已弃用）
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../errno/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    API 错误码表
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../purge/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    缓存刷新
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    微信小程序
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    微信小程序
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#1" class="md-nav__link">
    1.前言
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2" class="md-nav__link">
    2.准备工作
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3" class="md-nav__link">
    3.域名及证书申请
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4" class="md-nav__link">
    4.搭建开发环境
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#5" class="md-nav__link">
    5.又拍云小程序上传方案
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#6-cdn" class="md-nav__link">
    6.开通 CDN 服务
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#7" class="md-nav__link">
    7.其他服务
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../mobile-stats/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    移动流量
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../sms/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    短信服务
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" >
        
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    云处理
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            云处理
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../cloud/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    产品简介
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../cloud/authorization/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    认证鉴权
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../cloud/image/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    图片处理
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../cloud/av/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    异步音视频处理
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../cloud/sync_video/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    同步视频处理
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../cloud/sync_audio/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    同步音频处理
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../cloud/unzip/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    压缩解压缩
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../cloud/spider/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    文件拉取
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../cloud/uconvert/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    文档转换
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../cloud/async_image/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    异步图片拼接
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../cloud/av_pretreatment/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    音视频处理（已弃用）
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8" >
        
          <label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    人工智能
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8">
            <span class="md-nav__icon md-icon"></span>
            人工智能
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../ai/audit/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    内容识别(有存储)
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../ai/audit_nostorage/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    内容识别(无存储)
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../ai/api_console/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    内容处理
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../ai/authorization/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    认证鉴权
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../ai/face_detect/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    人脸识别
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9" >
        
          <label class="md-nav__link" for="__nav_9" id="__nav_9_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    SDK&工具
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_9">
            <span class="md-nav__icon md-icon"></span>
            SDK&工具
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../download/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    SDK&工具
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_10" >
        
          <label class="md-nav__link" for="__nav_10" id="__nav_10_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    常见问题
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_10_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_10">
            <span class="md-nav__icon md-icon"></span>
            常见问题
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../faq/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    常见问题
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#1" class="md-nav__link">
    1.前言
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2" class="md-nav__link">
    2.准备工作
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3" class="md-nav__link">
    3.域名及证书申请
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4" class="md-nav__link">
    4.搭建开发环境
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#5" class="md-nav__link">
    5.又拍云小程序上传方案
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#6-cdn" class="md-nav__link">
    6.开通 CDN 服务
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#7" class="md-nav__link">
    7.其他服务
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


  <h1>微信小程序</h1>

<h2 id="1">1.前言<a class="headerlink" href="#1" title="Permanent link">&para;</a></h2>
<p>微信小程序是一种全新的连接用户与服务的方式，它可以在微信内被便捷地获取和传播，拥有类似 App 的使用体验。微信小程序的出现，开启了新的跨平台移动应用方式，又拍云推出了<a href="https://github.com/upyun/wechat-sdk">微信小程序 SDK</a>，帮助开发者减轻后端部署、运维、证书配置等繁琐工作，提升小程序性能的同时，减少开发成本。</p>
<p>为了方便微信小程序开发者便捷使用又拍云的云服务，本文案将会结合又拍云对象存储、SSL 证书、CDN 加速、图片处理、音视频处理等服务，快速构建具备云端能力的专属小程序。</p>
<h2 id="2">2.准备工作<a class="headerlink" href="#2" title="Permanent link">&para;</a></h2>
<p><strong>2.1 注册微信小程序</strong></p>
<p>开发小程序的第一步，您需要注册一个微信小程序的账号，通过此账号您可以管理您的小程序，微信小程序账号注册地址请移步<a href="https://mp.weixin.qq.com/">微信公众平台</a>，详细使用指南请参见微信小程序<a href="https://mp.weixin.qq.com/debug/wxadoc/dev/index.html">简易教程</a>文档。</p>
<p><strong>2.2 又拍云账户实名认证</strong></p>
<p>为了顺利使用又拍云的云服务，您需要在又拍云注册一个账号，并进行账户的实名认证。打开<a href="https://console.upyun.com/register/">注册界面</a>或者在又拍云官网页面右上角点击「注册」按钮。更多了解，请参考云服务<a href="http://docs.upyun.com/cdn/guide/">快速入门</a>指南。</p>
<p><strong>2.3 购买云服务器和云数据库</strong></p>
<p>为了更好的运行服务端代码，您还需要购买业务服务器和云数据库，具体配置根据您的业务需求而定。又拍云暂未提供该服务，这里推荐又拍云战略合作伙伴的云端网络的<a href="https://www.verycloud.cn/cloud/hostinfo">云主机服务</a>，或者自行采购并进行托管。</p>
<h2 id="3">3.域名及证书申请<a class="headerlink" href="#3" title="Permanent link">&para;</a></h2>
<p><strong>3.1 域名申请及备案</strong></p>
<p>搭建企业级的微信小程序，需要注册自有域名并进行备案。如果您已经注册企业域名并且已备案，请忽略本步骤。</p>
<p><strong>3.2 SSL 证书申请</strong></p>
<p>又拍云提供了 Symantec、GeoTrust、TrustAsia、Let’s Encrypt 的各类 DV/OV/EV SSL 证书的申购服务，其中 TrustAsia、Let’s Encrypt DV SSL 单域名证书可免费申请。立即购买请点击<a href="https://console.upyun.com/toolbox/createCertificate/"> SSL 证书购买</a>，详细操作步骤可参见<a href="https://docs.upyun.com/cdn/ssl/#_18">快速入门</a>。如下图为 SSL 证书申购界面：</p>
<p><img src="http://upyun-assets.b0.upaiyun.com/docs/ssl/certificate/buy1.png" height="400" width="750" /></p>
<p><strong>3.3 SSL 证书部署</strong></p>
<p>SSL 证书部署分为两个部分，您需要在服务端和 CDN 平台同时进行 SSL 证书的部署。</p>
<p><strong>1）在服务端进行 SSL 证书的部署</strong></p>
<p>微信小程序必须使用 HTTPS 进行加密通信，所以您需要在源站进行 SSL 证书的部署和配置。</p>
<p>这里以 Nginx 为例，打开 Nginx 根目录，输入命令：</p>
<pre><code>vim nginx.conf
</code></pre>
<p>具体配置信息参见如下样例：</p>
<pre><code>server {

listen 443;  #SSL 访问端口号为 443
server_name  www.example.com  #您的域名
...
ssl on;  #开启 SSL 功能 
ssl_certificate     /xxx/xxx/www.example.com.pem;  #证书文件 
ssl_certificate_key /xxx/xxx/www.example.com.key;
#私钥文件
ssl_protocols TLSv1 TLSv1.1 TLSv1.2; #支持的 TLS 协议 
ssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:ECDHE:ECDH:AES:HIGH:!NULL:!aNULL:!MD5:!ADH:!RC4;  #配置加密套件,推荐配置。

location / {
        root   html;  #站点目录
        index  index.html index.htm;
    }
...
}
</code></pre>
<p>配置完成后，然后通过如下命令来判断配置文件语法是否正确</p>
<pre><code>sudo nginx -t -c /etc/nginx/nginx.conf
</code></pre>
<p>确保配置无误的话，建议重新启动 Nginx。</p>
<p><strong>2）在又拍云 CDN 平台进行 SSL 证书的部署</strong></p>
<p>在 CDN 平台进行 SSL 证书的部署请进入 <a href="https://console.upyun.com/toolbox/ssl/">SSL 证书管理</a>，可一键开启 HTTPS 加速。更多了解请参见<a href="http://docs.upyun.com/cdn/config/#51-https"> HTTPS 配置</a>文档。</p>
<p><strong>3.4 通信域名配置</strong></p>
<p>前往<a href="https://mp.weixin.qq.com">微信公众平台</a>，依次进入：【设置】-》【开发设置】-》【服务器域名】-》【修改】，使用二级域名完成通信域名设置。配置截图如下图：</p>
<p><img src="http://upyun-assets.b0.upaiyun.com/docs/solution/weixin_domain.png" height="400" width="750" /></p>
<ul>
<li>
<p>request 合法域名：请求的合法域名</p>
</li>
<li>
<p>socket 合法域名：socket 通讯的合法域名</p>
</li>
<li>
<p>uploadFile 合法域名：资源上传的合法域名</p>
</li>
<li>
<p>downloadFile 合法域名：资源下载的合法域名</p>
</li>
</ul>
<p>请根据需求合理配置。关于 <code>uploadFile</code> 合法域名配置请参见 <code>5.4</code> 基础配置。</p>
<h2 id="4">4.搭建开发环境<a class="headerlink" href="#4" title="Permanent link">&para;</a></h2>
<p><strong>4.1 下载小程序开发者工具</strong></p>
<p>下载并安装最新版本的<a href="https://mp.weixin.qq.com/debug/wxadoc/dev/devtools/download.html">小程序开发者工具</a>，使用小程序绑定的微信号扫码登录开发者工具。</p>
<p><strong>4.2 简单操作</strong></p>
<ul>
<li>微信扫二维码登陆</li>
</ul>
<p><img alt="MacDown Screenshot" src="http://upyun-assets.b0.upaiyun.com/docs/solution/weixin_login.png" /></p>
<ul>
<li>创建项目</li>
</ul>
<p><img alt="MacDown Screenshot" src="http://upyun-assets.b0.upaiyun.com/docs/solution/weixin_create.png" /></p>
<p>选择<strong>【小程序项目】</strong>即可添加项目。</p>
<p>详细操作步骤请移步小程序开发者工具<a href="https://mp.weixin.qq.com/debug/wxadoc/dev/devtools/devtools.html">操作指南</a>。</p>
<h2 id="5">5.又拍云小程序上传方案<a class="headerlink" href="#5" title="Permanent link">&para;</a></h2>
<p>微信小程序要求安装包大小不超过 2MB，而图片、音频、短视频等多媒体文件往往占据了 App 大部分空间，可以把这些文件上传至云端存储，程序包进行多媒体文件读取，让小程序轻松 “跳脱” 2MB 的容量限制。又拍云存储拥有上传加速，下载加速，不限量存储等功能，满足您文件的无限存储和快速读取。</p>
<p>另外，通过又拍云<a href="https://github.com/upyun/wechat-sdk">微信小程序 SDK</a>，可轻松将文件上传到又拍云<a href="https://www.upyun.com/products/file-storage">对象存储服务</a>。</p>
<p><strong>5.1 下载微信小程序 SDK</strong></p>
<p>点击<a href="https://github.com/upyun/wechat-sdk">又拍云微信小程序 SDK</a>进行下载。</p>
<p><strong>5.2 准备工作</strong></p>
<p>1) 创建云存储服务，详细操作参见<a href="http://docs.upyun.com/cdn/service/#_6">域名接入(又拍存储源)</a>，如截图所示：</p>
<p><img src="https://upyun-assets.b0.upaiyun.com/docs/cdn/service/upyun_storage_basic_info.png" height="400" width="750" /></p>
<p>从截图可以得知，服务名称为（也即 bucket）<code>video-upyun-com</code>。</p>
<p>2) 为存储服务 <code>video-upyun-com</code> 授权一个操作员，详细操作参加文档<a href="http://docs.upyun.com/api/quick_start/#_4">操作员使用</a>，配置参加截图所示：</p>
<p><img src="http://upyun-assets.b0.upaiyun.com/docs/solution/weixin_opertator.png" height="400" width="750" /></p>
<p>从截图可以看出，操作员名（也即 Operator ）为 <code>wxj2017</code>，与此同时请记住操作员密码。</p>
<p><strong>5.3 上传和部署代码</strong></p>
<p>该步骤，首先需要下载小程序 <a href="https://github.com/upyun/wechat-sdk/tree/master/demo">SDK+Demo</a>，获取小程序 Demo 及源码。接下来的操作步骤为：</p>
<p>1）打开第四步安装的微信开发者工具，点击【小程序项目】模块，进入如下界面：</p>
<p><img src="http://upyun-assets.b0.upaiyun.com/docs/solution/weixin_create2.png" height="350" width="600" /></p>
<p>2) 点击上图左下角的【添加】按钮，进入如下界面，输入小程序 AppID，项目目录选择上一步下载下来的代码目录：</p>
<p><img alt="MacDown Screenshot" src="http://upyun-assets.b0.upaiyun.com/docs/solution/weixin_create3.png" /></p>
<p>注意：AppID 可以从微信公众号里面获取，如截图所示：</p>
<p><img src="http://upyun-assets.b0.upaiyun.com/docs/solution/weixin_appid.png" height="350" width="700" /></p>
<p>3）点击【确定】创建小程序项目，进入微信开发者工具界面：</p>
<p><img src="http://upyun-assets.b0.upaiyun.com/docs/solution/weixin_tools.png" height="350" width="700" /></p>
<p><strong>5.4 基础配置</strong></p>
<p>1）字段替换</p>
<p>您需要进入 <code>/pages/index/index.js</code> 文件，将相关字段进行修改和替换，参见如下截图：</p>
<p><img src="http://upyun-assets.b0.upaiyun.com/docs/solution/weixin_upload2.png" height="350" width="700" /></p>
<pre><code>
const upyun = new Upyun({
  bucket: 'sdkimg',
  operator: 'tester',
  getSignatureUrl: 'http://localhost:8080'
})
</code></pre>
<p>需要替换的字段为：</p>
<ul>
<li>bucket:服务名称</li>
<li>operator：操作员</li>
<li>getSignatureUrl：计算 signature 的服务器接口地址</li>
</ul>
<pre><code>
upyun.upload({
          localPath: imageSrc,
          remotePath: '/wxapp/demo',
          success: function (res) {
            console.log('uploadImage success, res is:', res)

            wx.showToast({
              title: '上传成功',
              icon: 'success',
              duration: 1000
            })

            self.setData({
              imageSrc
            })
          },

</code></pre>
<p>需要替换的字段为：</p>
<ul>
<li>remotePath：在又拍云存储的文件路径。</li>
</ul>
<p>2）上传域名配置</p>
<p>登录微信小程序账户并配置 <code>uploadFile</code> 合法域名为 <code>https://v0.api.upyun.com</code>，配置如截图所示：</p>
<p><img src="http://upyun-assets.b0.upaiyun.com/docs/solution/weixin_uploadFile.png" height="350" width="700" /></p>
<p><strong>5.5 认证鉴权</strong></p>
<p>云存储服务的认证鉴权详细参见文档<a href="http://docs.upyun.com/api/authorization/#http-body">认证鉴权</a>。关于认证鉴权部分，可通过如下三个部分来分开介绍：</p>
<p><strong>1）微信小程序客户端上传 <code>data</code> 参数</strong></p>
<p>可以直接参考微信小程序 <code>/utils/upyun-wxapp-sdk.js</code> 中的代码。下面为部分代码示例：</p>
<pre><code>
function Upyun (options) {
  this.bucket = options.bucket
  this.operator = options.operator
  this.getSignatureUrl = options.getSignatureUrl
}

Upyun.prototype.upload = function (options) {
  var self = this
  if (!options.remotePath) {
    options.remotePath = options.localPath.split('//')[1]
  }
  var date = (new Date()).toGMTString()
  var opts = {
    'save-key': options.remotePath,
    bucket: self.bucket,
    expiration: Math.round(new Date().getTime() / 1000) + 3600,
    date: date
  }
  var policy = Base64.encode(JSON.stringify(opts))
  var data = [ 'POST', '/' + self.bucket, date, policy ].join('&amp;')
  self.getSignature(data, function (err, signature) {
    if (err) {
      options.fail &amp;&amp; options.fail(err)
      options.complete &amp;&amp; options.complete(err)
      return
    }
    wx.uploadFile({
      url: `https://v0.api.upyun.com/${self.bucket}`,
      filePath: options.localPath,
      name: 'file',
      formData: {
        authorization: `UPYUN ${self.operator}:${signature}`,
        policy: policy
      },
      success: options.success,
      fail: options.fail,
      complete: options.complete
    })
  })
}

</code></pre>
<p>从代码中可以得知，需要获取的字段包括：</p>
<ul>
<li>bucket：服务名称</li>
<li>save-key：文件保存路径，也即 <code>remotePath</code></li>
<li>expiration：请求的过期时间，UNIX UTC 时间戳，单位秒</li>
<li>date：请求日期时间，GMT 格式字符串</li>
<li>Method：这里为 <code>POST</code></li>
<li>URI：请求路径，本例为 <code>/</code></li>
</ul>
<p>最终客户端生成 <code>data</code> 参数传递给服务端签名接口（ 也即 <code>getSignatureUrl</code> 地址 ），签名服务器生成 <code>signature</code> 并返回给客户端。</p>
<p><strong>2）签名服务端生成 <code>signature</code></strong></p>
<p>为了考虑安全性，操作员密码不宜直接暴露，<code>signature</code> 直接由签名服务端生成，微信小程序需要携带 <code>data</code> 参数，具体参见上个步骤的代码。</p>
<p>接口地址字段为 <code>getSignatureUrl</code>，在 <code>5.4</code> 基础配置中已经有介绍，该接口接受 <code>GET</code> 请求，并接受一个参数 <code>data</code>，计算并返回带有 <code>signature</code> 字段的响应。</p>
<p><code>signature</code> 的计算公式是：</p>
<pre><code>
Base64 (HMAC-SHA1 (&lt;md5_password&gt;, &lt;data&gt;)

</code></pre>
<p>其中，md5_password 是操作员密码的 <code>MD5</code> 值，操作员密码请妥善保管，不宜暴露。</p>
<p><strong>3）客户端向又拍云 API 服务端进行认证鉴权</strong></p>
<p>根据上面两个步骤，最终生成签名信息，详见代码：</p>
<pre><code>wx.uploadFile({
      url: `https://v0.api.upyun.com/${self.bucket}`,
      filePath: options.localPath,
      name: 'file',
      formData: {
        authorization: `UPYUN ${self.operator}:${signature}`,
        policy: policy
      },
      success: options.success,
      fail: options.fail,
      complete: options.complete
    })

</code></pre>
<p><strong>5.6 上传代码</strong></p>
<p>以上操作步骤进行完之后，您可以上传微信小程序代码至微信小程序服务端。进入微信开发者工具，点击【上传】按钮，填写版本号及项目备注。</p>
<p><img src="http://upyun-assets.b0.upaiyun.com/docs/solution/weixin_upload3.png" height="350" width="700" /></p>
<p>进入微信公众平台，依次进入：【开发管理】-》【开发版本】-》选择体验版本。</p>
<p><img src="http://upyun-assets.b0.upaiyun.com/docs/solution/weixin_upload5.png" height="350" width="700" /></p>
<p>设置页面路径及参数，具体配置为：pages/index/index，提交之后，进入如下页面。</p>
<p><img src="http://upyun-assets.b0.upaiyun.com/docs/solution/weixin_upload6.png" height="350" width="700" /></p>
<p>扫描二维码，可以进入微信小程序体验版。</p>
<h2 id="6-cdn">6.开通 CDN 服务<a class="headerlink" href="#6-cdn" title="Permanent link">&para;</a></h2>
<p>为了提升微信小程序的访问体验，访问域名可以进行 CDN 加速。可以在 5.2 中创建的存储服务下直接绑定加速域名。</p>
<p><strong>6.1 绑定加速域名</strong></p>
<p>结合前面步骤申请的访问域名以及微信公众平台设置的通信域名，您可以将访问域名在又拍云 CDN 平台进行配置。进入第五步已开通的服务，直接进入功能配置模块进行加速域名的绑定，详情参见<a href="http://docs.upyun.com/cdn/config/#12">加速域名</a>。</p>
<p><strong>6.2 一键开启 HTTPS 加速</strong></p>
<p>进入【功能配置】模块，找到 HTTPS 配置，可以一键开启 HTTPS 加速。更多操作步骤参见<a href="http://docs.upyun.com/cdn/config/#51-https">HTTPS 配置</a>。</p>
<p><strong>6.3 将域名切换到 CDN</strong></p>
<p>具体操作请参见 <a href="http://10.0.6.71:8001/cdn/guide/#cname">CNAME 配置</a>。</p>
<h2 id="7">7.其他服务<a class="headerlink" href="#7" title="Permanent link">&para;</a></h2>
<p><strong>7.1 图片处理</strong></p>
<p>结合图片处理的使用方式来合理使用，请参见如下链接。</p>
<ul>
<li><a href="http://docs.upyun.com/cloud/image/#url">URL 作图</a></li>
<li><a href="http://docs.upyun.com/cloud/image/#_4">缩略图版本</a></li>
<li><a href="http://docs.upyun.com/cloud/image/#_5">上传预处理（同步）</a></li>
<li><a href="http://docs.upyun.com/cloud/image/#_6">上传预处理（异步）</a></li>
</ul>
<p><strong>7.2 音视频处理</strong></p>
<p>音视频处理的场景包括异步音视频处理和同步音视频处理，详细参见文档：</p>
<ul>
<li><a href="http://docs.upyun.com/cloud/av/">异步音视频处理</a></li>
<li><a href="http://docs.upyun.com/cloud/sync_video/">同步视频处理</a></li>
<li><a href="http://docs.upyun.com/cloud/sync_audio/">同步音频处理</a></li>
</ul>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2017, 又拍云
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../..", "features": [], "search": "../../assets/javascripts/workers/search.dfff1995.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.dff1b7c8.min.js"></script>
      
    
  </body>
</html>