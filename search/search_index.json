{"config":{"indexing":"full","lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"\u641c\u7d22\u6587\u6863 CDN CDN Documents \u4ea7\u54c1\u7b80\u4ecb \u5feb\u901f\u5165\u95e8 \u670d\u52a1\u7ba1\u7406 \u67e5\u770b\u66f4\u591a \u76f4\u64ad Live Documents \u4ea7\u54c1\u7b80\u4ecb \u5feb\u901f\u5165\u95e8 \u57fa\u7840\u914d\u7f6e \u67e5\u770b\u66f4\u591a \u70b9\u64ad&\u77ed\u89c6\u9891 Video&Short Video \u77ed\u89c6\u9891\u7b80\u4ecb \u77ed\u89c6\u9891 DEMO \u67e5\u770b\u66f4\u591a \u4e91\u5b58\u50a8 API Reference \u4ea7\u54c1\u7b80\u4ecb REST API FORM API \u67e5\u770b\u66f4\u591a \u4e91\u5904\u7406 Cloud Processing \u4ea7\u54c1\u7b80\u4ecb \u56fe\u7247\u5904\u7406 \u5f02\u6b65\u97f3\u89c6\u9891\u5904\u7406 \u67e5\u770b\u66f4\u591a \u4eba\u5de5\u667a\u80fd Artificial Intelligence \u5185\u5bb9\u8bc6\u522b(\u6709\u5b58\u50a8) \u5185\u5bb9\u8bc6\u522b(\u65e0\u5b58\u50a8) \u4eba\u8138\u8bc6\u522b \u67e5\u770b\u66f4\u591a SDK&\u5de5\u5177 Download \u5b58\u50a8&\u5904\u7406 SDK \u76f4\u64ad SDK \u77ed\u89c6\u9891 SDK \u67e5\u770b\u66f4\u591a","title":"\u6587\u6863\u9996\u9875"},{"location":"ai/api_console/","text":"\u5feb\u901f\u5165\u95e8 \u00b6 \u5185\u5bb9\u8bc6\u522b\u5904\u7406\u63a5\u53e3\u662f\u7528\u6237\u8c03\u6574\u5185\u5bb9(\u56fe\u7247\uff0c\u89c6\u9891)\u7684\u8bc6\u522b\u5206\u7c7b\uff0c\u63d0\u4ea4\u7ed9\u53c8\u62cd\u4e91\u5904\u7406(\u786e\u8ba4\u5c4f\u853d\uff0c\u5f7b\u5e95\u5220\u9664\uff0c\u53d6\u6d88\u5c4f\u853d)\u5185\u5bb9\uff0c\u5185\u5bb9\u5fc5\u987b\u662f\u4fdd\u5b58\u5728\u53c8\u62cd\u4e91\u5b58\u50a8\u3002\u8bf7\u786e\u4fdd\u60a8\u5df2\u7ecf\u6ce8\u518c\u53c8\u62cd\u4e91\u8d26\u53f7\u5e76\u5b8c\u6210\u5b9e\u540d\u9a8c\u8bc1\uff0c\u8bf7\u786e\u4fdd\u60a8\u5df2\u7ecf \u5f00\u901a\u5185\u5bb9\u8bc6\u522b\u670d\u52a1 \u3002 \u5185\u5bb9\u5904\u7406 \u00b6 \u63d0\u4ea4\u4efb\u52a1\u5230\u53c8\u62cd\u4e91\u8fdb\u884c\u5185\u5bb9\u76f8\u5173\u5904\u7406\uff0c\u5305\u62ec\u786e\u8ba4\u5c4f\u853d\uff0c\u5f7b\u5e95\u5220\u9664\uff0c\u53d6\u6d88\u5c4f\u853d\u3002 \u8bf7\u6c42 \u00b6 \u8bf7\u6c42\u8bed\u6cd5 POST /console/identify?act=<action> HTTP/1.1 Host: banma.api.upyun.com Date: GMT Date Authorization: UPYUN <ClientKey>:<Signature> Content-Type: application/json {\"service\":\"<\u670d\u52a1\u540d>\", \"tasks\":[{\"kind\":<\u6587\u4ef6\u7c7b\u578b>, \"path\":\"<\u6587\u4ef6\u8def\u5f84>\"}]} ** \u7b7e\u540d\u8ba4\u8bc1 ** Authorization \u8be6\u89c1 \u7b7e\u540d\u8ba4\u8bc1 \u3002 \u8bf7\u6c42\u53c2\u6570 \u53c2\u6570 \u7c7b\u578b \u5fc5\u9009 \u8bf4\u660e action string \u662f \u8bf7\u6c42\u7684\u5904\u7406\u4efb\u52a1\uff0c shield \u8868\u793a\u786e\u8ba4\u5c4f\u853d\uff0c cancel_shield \u8868\u793a\u53d6\u6d88\u5c4f\u853d\uff0c delete \u8868\u793a\u5f7b\u5e95\u5220\u9664 service string \u662f \u7528\u6237\u670d\u52a1\u540d tasks list \u662f \u4e00\u7ec4\u4efb\u52a1\u5217\u8868\uff0c\u8be6\u89c1 tasks \u53c2\u6570\u8bf4\u660e kind integer \u662f \u5185\u5bb9\u7684\u7c7b\u578b\uff0c 1 \u8868\u793a\u56fe\u7247\uff0c 2 \u8868\u793a\u89c6\u9891 path string \u662f \u5185\u5bb9\u7684\u8def\u5f84 ** tasks \u53c2\u6570\u8bf4\u660e ** \u6309 JSON \u683c\u5f0f\u7ec4\u88c5\u4efb\u52a1\uff0c\u4e00\u6b21\u8bf7\u6c42 tasks \u6700\u591a\u53ef\u4ee5\u63d0\u4ea4 10 \u4e2a\u4efb\u52a1\u3002 [ { \"kind\": 1, // \u63d0\u4ea4\u7684\u6587\u4ef6\u7c7b\u578b\uff0c1 \u8868\u793a\u56fe\u7247 2 \u8868\u793a\u89c6\u9891 \"path\": \"/upyun.jpg\" // \u63d0\u4ea4\u7684\u6587\u4ef6\u8def\u5f84 }, \u2026 ] \u54cd\u5e94 \u00b6 \u54cd\u5e94\u53c2\u6570\u662f JSON \u5b57\u7b26\u4e32\uff0c\u53c2\u6570\u540d\u53ca\u8bf4\u660e\u5982\u4e0b\uff1a \u53c2\u6570 \u7c7b\u578b \u8bf4\u660e status_code integer \u5904\u7406\u7ed3\u679c\u72b6\u6001\u7801\uff0c 200 \u8868\u793a\u6210\u529f\u5904\u7406 error string \u9519\u8bef\u4fe1\u606f\uff0c\u7a7a\u5b57\u7b26\u4e32\u8868\u793a\u65e0\u9519\u8bef\u4fe1\u606f \u4e3e\u4f8b \u00b6 \u8bf7\u6c42\u793a\u4f8b POST /console/identify?act=shield HTTP/1.1 Host: banma.api.upyun.com Date: Thu, 12 Oct 2017 07:32:34 GMT Content-Type: application/json Authorization: UPYUN 2GO7K6NCPInWZqvJewohbDH5jmtaBY0x:mW7gtK0PRvhR0Mzn/x6RSAbh3cg= Content-Length: 61 {\"service\":\"upyun\", \"tasks\":[{\"kind\":1, \"path\":\"/upyun.jpg\"}]} \u54cd\u5e94\u793a\u4f8b HTTP/1.1 200 OK Server: marco/1.8 Content-Type: application/json Content-Length: 31 Date: Thu, 12 Oct 2017 07:32:29 GMT {\"status_code\":200,\"error\":\"\"} \u83b7\u53d6\u5185\u5bb9\u5c4f\u853d\u4fe1\u606f \u00b6 \u83b7\u53d6\u6307\u5b9a\u5185\u5bb9\u662f\u5426\u88ab\u5c4f\u853d\u53ca\u5c4f\u853d\u5bc6\u94a5 \u8bf7\u6c42 \u00b6 \u8bf7\u6c42\u8bed\u6cd5 GET /console/shield_info?service=<service_name>&path=<path> HTTP/1.1 Host: banma.api.upyun.com Date: GMT Date Authorization: UPYUN <ClientKey>:<Signature> ** \u7b7e\u540d\u8ba4\u8bc1 ** Authorization \u8be6\u89c1 \u7b7e\u540d\u8ba4\u8bc1 \u3002 \u8bf7\u6c42\u53c2\u6570 \u53c2\u6570 \u7c7b\u578b \u5fc5\u9009 \u8bf4\u660e service string \u662f \u7528\u6237\u670d\u52a1\u540d path string \u662f \u5185\u5bb9\u8def\u5f84 \u54cd\u5e94 \u00b6 \u54cd\u5e94\u53c2\u6570\u662f JSON \u5b57\u7b26\u4e32\uff0c\u53c2\u6570\u540d\u53ca\u8bf4\u660e\u5982\u4e0b\uff1a \u53c2\u6570 \u7c7b\u578b \u8bf4\u660e status_code integer \u5904\u7406\u7ed3\u679c\u72b6\u6001\u7801\uff0c 200 \u8868\u793a\u6210\u529f\u5904\u7406 error string \u9519\u8bef\u4fe1\u606f\uff0c\u7a7a\u5b57\u7b26\u4e32\u8868\u793a\u65e0\u9519\u8bef\u4fe1\u606f shielded boolean \u6587\u4ef6\u662f\u5426\u88ab\u5c4f\u853d secret string \u5c4f\u853d\u6587\u4ef6\u7684 secret \u5185\u5bb9\uff0c\u6ca1\u6709\u5c4f\u853d\u8fd4\u56de\u7a7a\u5b57\u7b26\u4e32 \u4e3e\u4f8b \u00b6 \u8bf7\u6c42\u793a\u4f8b GET /console/shield_info?service=upyun&path=/upyun.jpg HTTP/1.1 Host: banma.api.upyun.com Date: Thu, 12 Oct 2017 07:32:34 GMT Authorization: UPYUN 2GO7K6NCPInWZqvJewohbDH5jmtaBY0x:mW7gtK0PRvhR0Mzn/x6RSAbh3cg= \u54cd\u5e94\u793a\u4f8b HTTP/1.1 200 OK Server: marco/1.8 Content-Type: application/json Content-Length: 57 Date: Thu, 12 Oct 2017 07:32:29 GMT {\"status_code\":200,\"error\":\"\",\"shielded\":false,secret:\"\"} \u793a\u4f8b\u4ee3\u7801 \u00b6 \u4f7f\u7528\u65f6\uff0c client_key \u548c client_secret \u66ff\u6362\u4e3a\u5185\u5bb9\u8bc6\u522b\u63a7\u5236\u53f0\u4e0a\u7684\u5bc6\u94a5 \u8bf7\u6c42\u4fe1\u606f\u6839\u636e\u8bf7\u6c42\u53c2\u6570\u8981\u6c42\u586b\u5199 # python # -*- coding: UTF-8 -*- import base64 import datetime import hashlib import hmac import requests def b64(s): return base64.b64encode(s.encode()).decode() # \u65f6\u95f4\u683c\u5f0f\u5316 def httpdate_rfc1123(dt=None): dt = dt or datetime.datetime.utcnow() return datetime.datetime.utcnow().strftime('%a, %d %b %Y %H:%M:%S GMT') # \u7b7e\u540d def sign(client_key, client_secret, method, uri, date): signarr = [method, uri, date] signstr = '&'.join(signarr) signstr = base64.b64encode( hmac.new(client_secret.encode(), signstr.encode(), digestmod=hashlib.sha1).digest() ).decode() return 'UPYUN %s:%s' % (client_key, signstr) # \u5bc6\u94a5 client_key = 'GO7K6NCPInWZqvJewohbDH5jmt' client_secret = 'KQrAn5OjgG3HVlkJo78DbyiuL' # \u5185\u5bb9\u5c4f\u853d def shield(): headers = {} headers['Date'] = httpdate_rfc1123() headers['Authorization'] = sign(client_key, client_secret, 'POST', '/console/identify?act=shield', headers['Date']) data = { \"service\":\"upyun\", \"tasks\": [{ 'kind':1, 'path': '/test.jpg', }]} resp = requests.post('http://banma.api.upyun.com/console/identify?act=shield', headers=headers, json=data) print(resp.status_code, resp.text) # \u5185\u5bb9\u53d6\u6d88\u5c4f\u853d def cancel_shield(): headers = {} headers['Date'] = httpdate_rfc1123() headers['Authorization'] = sign(client_key, client_secret, 'POST', '/console/identify?act=cancel_shield', headers['Date']) data = { \"service\":\"upyun\", \"tasks\": [{ 'kind':1, 'path': '/test.jpg', }]} resp = requests.post('http://banma.api.upyun.com/console/identify?act=cancel_shield', headers=headers, json=data) print(resp.status_code, resp.text) # \u5185\u5bb9\u5220\u9664 def delete(): headers = {} headers['Date'] = httpdate_rfc1123() headers['Authorization'] = sign(client_key, client_secret, 'POST', '/console/identify?act=delete', headers['Date']) data = { \"service\":\"upyun\", \"tasks\": [{ 'kind':1, 'path': '/test.jpg', }]} resp = requests.post('http://banma.api.upyun.com/console/identify?act=delete', headers=headers, json=data) print(resp.status_code, resp.text) # \u83b7\u53d6\u5185\u5bb9\u5c4f\u853d\u4fe1\u606f def get_info(): headers = {} headers['Date'] = httpdate_rfc1123() headers['Authorization'] = sign(client_key, client_secret, 'GET', '/console/shield_info?service=upyun&path=/test.jpg', headers['Date']) resp = requests.get('http://banma.api.upyun.com/console/shield_info?service=upyun&path=/test.jpg', headers=headers) print(resp.status_code, resp.text) def main(): shield() cancel_shield() delete() get_info() if __name__ == '__main__': main()","title":"\u5185\u5bb9\u5904\u7406"},{"location":"ai/api_console/#_1","text":"\u5185\u5bb9\u8bc6\u522b\u5904\u7406\u63a5\u53e3\u662f\u7528\u6237\u8c03\u6574\u5185\u5bb9(\u56fe\u7247\uff0c\u89c6\u9891)\u7684\u8bc6\u522b\u5206\u7c7b\uff0c\u63d0\u4ea4\u7ed9\u53c8\u62cd\u4e91\u5904\u7406(\u786e\u8ba4\u5c4f\u853d\uff0c\u5f7b\u5e95\u5220\u9664\uff0c\u53d6\u6d88\u5c4f\u853d)\u5185\u5bb9\uff0c\u5185\u5bb9\u5fc5\u987b\u662f\u4fdd\u5b58\u5728\u53c8\u62cd\u4e91\u5b58\u50a8\u3002\u8bf7\u786e\u4fdd\u60a8\u5df2\u7ecf\u6ce8\u518c\u53c8\u62cd\u4e91\u8d26\u53f7\u5e76\u5b8c\u6210\u5b9e\u540d\u9a8c\u8bc1\uff0c\u8bf7\u786e\u4fdd\u60a8\u5df2\u7ecf \u5f00\u901a\u5185\u5bb9\u8bc6\u522b\u670d\u52a1 \u3002","title":"\u5feb\u901f\u5165\u95e8"},{"location":"ai/api_console/#_2","text":"\u63d0\u4ea4\u4efb\u52a1\u5230\u53c8\u62cd\u4e91\u8fdb\u884c\u5185\u5bb9\u76f8\u5173\u5904\u7406\uff0c\u5305\u62ec\u786e\u8ba4\u5c4f\u853d\uff0c\u5f7b\u5e95\u5220\u9664\uff0c\u53d6\u6d88\u5c4f\u853d\u3002","title":"\u5185\u5bb9\u5904\u7406"},{"location":"ai/api_console/#_3","text":"\u8bf7\u6c42\u8bed\u6cd5 POST /console/identify?act=<action> HTTP/1.1 Host: banma.api.upyun.com Date: GMT Date Authorization: UPYUN <ClientKey>:<Signature> Content-Type: application/json {\"service\":\"<\u670d\u52a1\u540d>\", \"tasks\":[{\"kind\":<\u6587\u4ef6\u7c7b\u578b>, \"path\":\"<\u6587\u4ef6\u8def\u5f84>\"}]} ** \u7b7e\u540d\u8ba4\u8bc1 ** Authorization \u8be6\u89c1 \u7b7e\u540d\u8ba4\u8bc1 \u3002 \u8bf7\u6c42\u53c2\u6570 \u53c2\u6570 \u7c7b\u578b \u5fc5\u9009 \u8bf4\u660e action string \u662f \u8bf7\u6c42\u7684\u5904\u7406\u4efb\u52a1\uff0c shield \u8868\u793a\u786e\u8ba4\u5c4f\u853d\uff0c cancel_shield \u8868\u793a\u53d6\u6d88\u5c4f\u853d\uff0c delete \u8868\u793a\u5f7b\u5e95\u5220\u9664 service string \u662f \u7528\u6237\u670d\u52a1\u540d tasks list \u662f \u4e00\u7ec4\u4efb\u52a1\u5217\u8868\uff0c\u8be6\u89c1 tasks \u53c2\u6570\u8bf4\u660e kind integer \u662f \u5185\u5bb9\u7684\u7c7b\u578b\uff0c 1 \u8868\u793a\u56fe\u7247\uff0c 2 \u8868\u793a\u89c6\u9891 path string \u662f \u5185\u5bb9\u7684\u8def\u5f84 ** tasks \u53c2\u6570\u8bf4\u660e ** \u6309 JSON \u683c\u5f0f\u7ec4\u88c5\u4efb\u52a1\uff0c\u4e00\u6b21\u8bf7\u6c42 tasks \u6700\u591a\u53ef\u4ee5\u63d0\u4ea4 10 \u4e2a\u4efb\u52a1\u3002 [ { \"kind\": 1, // \u63d0\u4ea4\u7684\u6587\u4ef6\u7c7b\u578b\uff0c1 \u8868\u793a\u56fe\u7247 2 \u8868\u793a\u89c6\u9891 \"path\": \"/upyun.jpg\" // \u63d0\u4ea4\u7684\u6587\u4ef6\u8def\u5f84 }, \u2026 ]","title":"\u8bf7\u6c42"},{"location":"ai/api_console/#_4","text":"\u54cd\u5e94\u53c2\u6570\u662f JSON \u5b57\u7b26\u4e32\uff0c\u53c2\u6570\u540d\u53ca\u8bf4\u660e\u5982\u4e0b\uff1a \u53c2\u6570 \u7c7b\u578b \u8bf4\u660e status_code integer \u5904\u7406\u7ed3\u679c\u72b6\u6001\u7801\uff0c 200 \u8868\u793a\u6210\u529f\u5904\u7406 error string \u9519\u8bef\u4fe1\u606f\uff0c\u7a7a\u5b57\u7b26\u4e32\u8868\u793a\u65e0\u9519\u8bef\u4fe1\u606f","title":"\u54cd\u5e94"},{"location":"ai/api_console/#_5","text":"\u8bf7\u6c42\u793a\u4f8b POST /console/identify?act=shield HTTP/1.1 Host: banma.api.upyun.com Date: Thu, 12 Oct 2017 07:32:34 GMT Content-Type: application/json Authorization: UPYUN 2GO7K6NCPInWZqvJewohbDH5jmtaBY0x:mW7gtK0PRvhR0Mzn/x6RSAbh3cg= Content-Length: 61 {\"service\":\"upyun\", \"tasks\":[{\"kind\":1, \"path\":\"/upyun.jpg\"}]} \u54cd\u5e94\u793a\u4f8b HTTP/1.1 200 OK Server: marco/1.8 Content-Type: application/json Content-Length: 31 Date: Thu, 12 Oct 2017 07:32:29 GMT {\"status_code\":200,\"error\":\"\"}","title":"\u4e3e\u4f8b"},{"location":"ai/api_console/#_6","text":"\u83b7\u53d6\u6307\u5b9a\u5185\u5bb9\u662f\u5426\u88ab\u5c4f\u853d\u53ca\u5c4f\u853d\u5bc6\u94a5","title":"\u83b7\u53d6\u5185\u5bb9\u5c4f\u853d\u4fe1\u606f"},{"location":"ai/api_console/#_7","text":"\u8bf7\u6c42\u8bed\u6cd5 GET /console/shield_info?service=<service_name>&path=<path> HTTP/1.1 Host: banma.api.upyun.com Date: GMT Date Authorization: UPYUN <ClientKey>:<Signature> ** \u7b7e\u540d\u8ba4\u8bc1 ** Authorization \u8be6\u89c1 \u7b7e\u540d\u8ba4\u8bc1 \u3002 \u8bf7\u6c42\u53c2\u6570 \u53c2\u6570 \u7c7b\u578b \u5fc5\u9009 \u8bf4\u660e service string \u662f \u7528\u6237\u670d\u52a1\u540d path string \u662f \u5185\u5bb9\u8def\u5f84","title":"\u8bf7\u6c42"},{"location":"ai/api_console/#_8","text":"\u54cd\u5e94\u53c2\u6570\u662f JSON \u5b57\u7b26\u4e32\uff0c\u53c2\u6570\u540d\u53ca\u8bf4\u660e\u5982\u4e0b\uff1a \u53c2\u6570 \u7c7b\u578b \u8bf4\u660e status_code integer \u5904\u7406\u7ed3\u679c\u72b6\u6001\u7801\uff0c 200 \u8868\u793a\u6210\u529f\u5904\u7406 error string \u9519\u8bef\u4fe1\u606f\uff0c\u7a7a\u5b57\u7b26\u4e32\u8868\u793a\u65e0\u9519\u8bef\u4fe1\u606f shielded boolean \u6587\u4ef6\u662f\u5426\u88ab\u5c4f\u853d secret string \u5c4f\u853d\u6587\u4ef6\u7684 secret \u5185\u5bb9\uff0c\u6ca1\u6709\u5c4f\u853d\u8fd4\u56de\u7a7a\u5b57\u7b26\u4e32","title":"\u54cd\u5e94"},{"location":"ai/api_console/#_9","text":"\u8bf7\u6c42\u793a\u4f8b GET /console/shield_info?service=upyun&path=/upyun.jpg HTTP/1.1 Host: banma.api.upyun.com Date: Thu, 12 Oct 2017 07:32:34 GMT Authorization: UPYUN 2GO7K6NCPInWZqvJewohbDH5jmtaBY0x:mW7gtK0PRvhR0Mzn/x6RSAbh3cg= \u54cd\u5e94\u793a\u4f8b HTTP/1.1 200 OK Server: marco/1.8 Content-Type: application/json Content-Length: 57 Date: Thu, 12 Oct 2017 07:32:29 GMT {\"status_code\":200,\"error\":\"\",\"shielded\":false,secret:\"\"}","title":"\u4e3e\u4f8b"},{"location":"ai/api_console/#_10","text":"\u4f7f\u7528\u65f6\uff0c client_key \u548c client_secret \u66ff\u6362\u4e3a\u5185\u5bb9\u8bc6\u522b\u63a7\u5236\u53f0\u4e0a\u7684\u5bc6\u94a5 \u8bf7\u6c42\u4fe1\u606f\u6839\u636e\u8bf7\u6c42\u53c2\u6570\u8981\u6c42\u586b\u5199 # python # -*- coding: UTF-8 -*- import base64 import datetime import hashlib import hmac import requests def b64(s): return base64.b64encode(s.encode()).decode() # \u65f6\u95f4\u683c\u5f0f\u5316 def httpdate_rfc1123(dt=None): dt = dt or datetime.datetime.utcnow() return datetime.datetime.utcnow().strftime('%a, %d %b %Y %H:%M:%S GMT') # \u7b7e\u540d def sign(client_key, client_secret, method, uri, date): signarr = [method, uri, date] signstr = '&'.join(signarr) signstr = base64.b64encode( hmac.new(client_secret.encode(), signstr.encode(), digestmod=hashlib.sha1).digest() ).decode() return 'UPYUN %s:%s' % (client_key, signstr) # \u5bc6\u94a5 client_key = 'GO7K6NCPInWZqvJewohbDH5jmt' client_secret = 'KQrAn5OjgG3HVlkJo78DbyiuL' # \u5185\u5bb9\u5c4f\u853d def shield(): headers = {} headers['Date'] = httpdate_rfc1123() headers['Authorization'] = sign(client_key, client_secret, 'POST', '/console/identify?act=shield', headers['Date']) data = { \"service\":\"upyun\", \"tasks\": [{ 'kind':1, 'path': '/test.jpg', }]} resp = requests.post('http://banma.api.upyun.com/console/identify?act=shield', headers=headers, json=data) print(resp.status_code, resp.text) # \u5185\u5bb9\u53d6\u6d88\u5c4f\u853d def cancel_shield(): headers = {} headers['Date'] = httpdate_rfc1123() headers['Authorization'] = sign(client_key, client_secret, 'POST', '/console/identify?act=cancel_shield', headers['Date']) data = { \"service\":\"upyun\", \"tasks\": [{ 'kind':1, 'path': '/test.jpg', }]} resp = requests.post('http://banma.api.upyun.com/console/identify?act=cancel_shield', headers=headers, json=data) print(resp.status_code, resp.text) # \u5185\u5bb9\u5220\u9664 def delete(): headers = {} headers['Date'] = httpdate_rfc1123() headers['Authorization'] = sign(client_key, client_secret, 'POST', '/console/identify?act=delete', headers['Date']) data = { \"service\":\"upyun\", \"tasks\": [{ 'kind':1, 'path': '/test.jpg', }]} resp = requests.post('http://banma.api.upyun.com/console/identify?act=delete', headers=headers, json=data) print(resp.status_code, resp.text) # \u83b7\u53d6\u5185\u5bb9\u5c4f\u853d\u4fe1\u606f def get_info(): headers = {} headers['Date'] = httpdate_rfc1123() headers['Authorization'] = sign(client_key, client_secret, 'GET', '/console/shield_info?service=upyun&path=/test.jpg', headers['Date']) resp = requests.get('http://banma.api.upyun.com/console/shield_info?service=upyun&path=/test.jpg', headers=headers) print(resp.status_code, resp.text) def main(): shield() cancel_shield() delete() get_info() if __name__ == '__main__': main()","title":"\u793a\u4f8b\u4ee3\u7801"},{"location":"ai/audit/","text":"\u5feb\u901f\u5165\u95e8 \u00b6 \u5185\u5bb9\u8bc6\u522b(\u6709\u5b58\u50a8)\u57fa\u4e8e\u4e91\u5b58\u50a8\u670d\u52a1\uff0c\u975e\u7ed3\u6784\u5316\u6570\u636e\u4f1a\u653e\u5728\u4e91\u5b58\u50a8\uff0c\u6216\u76f4\u63a5\u4ece\u4e91\u5b58\u50a8\u4e0a\u8bfb\u53d6\u6570\u636e\uff0c\u60a8\u5728\u4f7f\u7528\u5b83\u4e4b\u524d\uff0c\u8bf7\u786e\u4fdd\u60a8\u5df2\u7ecf\u6ce8\u518c\u53c8\u62cd\u4e91\u8d26\u53f7\u5e76\u5b8c\u6210\u5b9e\u540d\u9a8c\u8bc1\uff0c\u8bf7\u786e\u4fdd\u60a8\u5df2\u7ecf\u521b\u5efa \u4e91\u5b58\u50a8\u670d\u52a1 \u548c\u5f00\u901a\u5185\u5bb9\u8bc6\u522b\u670d\u52a1\u3002 \u6536\u8d39\u65b9\u9762\uff0c\u6536\u8d39\uff0c\u652f\u6301\u514d\u8d39\u8bd5\u7528\uff0c\u8be6\u60c5\u656c\u8bf7 \u8054\u7cfb\u5546\u52a1 \u3002 \u5f00\u53d1\u8005\u6307\u5357 \u00b6 \u56fe\u7247 \u00b6 \u4e0a\u4f20\u9884\u5904\u7406 \u00b6 \u5728\u4e0a\u4f20\u56fe\u7247\u65f6\uff0c\u63d0\u4f9b\u9884\u5904\u7406\u53c2\u6570\u3002\u5f85\u56fe\u7247\u4e0a\u4f20\u5b8c\u6210\u540e\uff0c\u81ea\u52a8\u8fdb\u884c\u5f02\u6b65\u5904\u7406\uff0c\u5904\u7406\u5b8c\u6210\u540e\uff0c\u56de\u8c03\u901a\u77e5\u7528\u6237\u5904\u7406\u7ed3\u679c\u3002 \u652f\u6301\u7684 API\uff1a FORM API \u3002 \u53c2\u6570\u540d\u662f apps \uff0c\u53c2\u6570\u503c\u662f JSON \u5b57\u7b26\u4e32\u3002\u4e00\u4e2a apps \u6700\u591a\u53ea\u5141\u8bb8\u5305\u542b\u4e00\u4e2a\u4efb\u52a1\u3002 ** apps \u53c2\u6570\u7ed3\u6784 ** apps = [ { \"name\": \"imgaudit\", // \u5f02\u6b65\u4efb\u52a1\u540d\u79f0\uff0cimgaudit \u8868\u793a\u56fe\u7247\u8bc6\u522b \"notify_url\": \"<notify_url>\" // \u56de\u8c03\u5730\u5740\uff0c\u4e0d\u586b\u65f6\u4f7f\u7528\u4e0a\u4f20\u53c2\u6570\u4e2d\u7684 notify_url } ] ** \u56de\u8c03\u901a\u77e5 ** \u4efb\u52a1\u5904\u7406\u5b8c\u6210\u540e\uff0c\u5411 notify_url \u5730\u5740\u53d1\u9001\u56de\u8c03\u901a\u77e5\u3002\u8be6\u89c1\u300c \u56de\u8c03\u901a\u77e5 \u300d\u3002 \u4e91\u5b58\u50a8\u4e2d\u7684\u56fe\u7247\u5904\u7406 \u00b6 ** \u8bf7\u6c42\u65b9\u6cd5 ** \u5bf9\u5df2\u7ecf\u5b58\u5728\u4e91\u5b58\u50a8\u4e2d\u7684\u56fe\u7247\uff0c\u4ee5 POST \u65b9\u6cd5\u5411 http://p0.api.upyun.com/pretreatment/ \u63d0\u4ea4\u5904\u7406\u4efb\u52a1\uff0c\u54cd\u5e94\u4e2d\u8fd4\u56de\u4efb\u52a1 task_id \u3002\u4efb\u52a1\u4ee5\u5f02\u6b65\u7684\u65b9\u5f0f\u5904\u7406\uff0c\u5904\u7406\u5b8c\u6210\u540e\uff0c\u56de\u8c03\u901a\u77e5\u7528\u6237\u5904\u7406\u7ed3\u679c\u3002 curl -X POST \\ http://p0.api.upyun.com/pretreatment/ \\ -H \"Authorization: UPYUN <Operator>:<Signature>\" \\ -H \"Date: <Wed, 29 Oct 2014 02:26:58 GMT>\" \\ -H \"Content-MD5: <Content-MD5>\" \\ -d \"service=<service>\" \\ -d \"notify_url=<notify_url>\" \\ -d \"app_name=<app_name>\" \\ -d \"tasks=<base64 \u7f16\u7801\u540e\u7684\u4efb\u52a1\u5b57\u7b26\u4e32>\" ** \u8ba4\u8bc1\u9274\u6743 ** Authorization \u8be6\u89c1 \u7b7e\u540d\u8ba4\u8bc1 \u3002 ** \u8bf7\u6c42\u53c2\u6570 ** \u53c2\u6570 \u7c7b\u578b \u5fc5\u9009 \u8bf4\u660e service string \u662f \u56fe\u7247\u6240\u5728\u7684\u670d\u52a1\u540d notify_url string \u662f \u56de\u8c03\u901a\u77e5\u5730\u5740\uff0c\u8be6\u89c1 \u56de\u8c03\u901a\u77e5 tasks string \u662f \u4efb\u52a1\u4fe1\u606f\uff0c\u8be6\u89c1 tasks \u53c2\u6570\u8bf4\u660e app_name string \u662f \u5904\u7406\u529f\u80fd\uff0c imgaudit \u8868\u793a\u56fe\u7247\u8bc6\u522b ** tasks \u53c2\u6570\u8bf4\u660e ** 1. \u6309 JSON \u683c\u5f0f\u7ec4\u88c5\u4efb\u52a1\uff0c\u4e00\u6b21\u8bf7\u6c42 tasks \u6700\u591a\u53ef\u4ee5\u63d0\u4ea4 10 \u4e2a\u4efb\u52a1\u3002 [ { \"source\": \"/upyun.jpg\", // \u9700\u8981\u5ba1\u6838\u7684\u56fe\u7247 }, \u2026 ] 2. \u628a JSON \u5b57\u7b26\u4e32 Base64 \u7f16\u7801\uff0c\u5f97\u5230 tasks \u3002 ** \u54cd\u5e94\u4fe1\u606f ** \u4efb\u52a1\u63d0\u4ea4\u6210\u529f\uff1a\u8fd4\u56de 200 \uff0c\u54cd\u5e94\u4f53\u662f\u4e00\u7ec4\u6309\u4efb\u52a1\u63d0\u4ea4\u5148\u540e\u987a\u5e8f\u6392\u5e8f\u7684 task_id \u3002\u4f8b\u5982\uff1a [ \"35f0148d414a688a275bf915ba7cebb2\", \"98adbaa52b2f63d6d7f327a0ff223348\", \"c3103189fa906a5354d29bd807e8dc51\", \u2026 ] \u4efb\u52a1\u63d0\u4ea4\u5931\u8d25\uff1a\u8fd4\u56de\u76f8\u5e94\u7684\u51fa\u9519\u4fe1\u606f\uff0c\u5177\u4f53\u8bf7\u53c2\u9605\u300c \u72b6\u6001\u7801\u8868 \u300d\u3002 ** \u56de\u8c03\u901a\u77e5 ** \u4efb\u52a1\u5904\u7406\u5b8c\u6210\u540e\uff0c\u5411 notify_url \u5730\u5740\u53d1\u9001\u56de\u8c03\u901a\u77e5\u3002\u8be6\u89c1\u300c \u56de\u8c03\u901a\u77e5 \u300d\u3002 \u56de\u8c03\u901a\u77e5 \u00b6 \u4efb\u52a1\u5904\u7406\u5b8c\u6210\u540e\uff0c\u5411 notify_url \u53d1\u9001 HTTP POST \u8bf7\u6c42\uff0c\u8bf7\u6c42\u4f53\u662f\u56de\u8c03\u4fe1\u606f\u3002 curl -X POST \\ <notify_url> \\ -H \"Authorization: UPYUN <Operator>:<Signature>\" \\ -H \"Date: <Wed, 29 Oct 2014 02:26:58 GMT>\" \\ -H \"Content-MD5: <Content-MD5>\" \\ -d \"service=<service>\" \\ # \u5176\u4ed6\u53c2\u6570... ** \u56de\u8c03\u4fe1\u606f ** \u56de\u8c03\u4fe1\u606f\u4e3a JSON \u5b57\u7b26\u4e32\uff0c\u53c2\u6570\u540d\u53ca\u8bf4\u660e\u5982\u4e0b\uff1a \u53c2\u6570 \u7c7b\u578b \u8bf4\u660e service string \u56fe\u7247\u6240\u5728\u7684\u670d\u52a1\u540d status_code integer \u5904\u7406\u7ed3\u679c\u72b6\u6001\u7801\uff0c 200 \u8868\u793a\u6210\u529f\u5904\u7406\uff0c\u8be6\u89c1 \u72b6\u6001\u7801\u8868 source string \u56fe\u7247\u8def\u5f84 result json \u8bc6\u522b\u7ed3\u679c\u96c6\uff0c\u5305\u542b porn porn json \u9274\u9ec4\u7ed3\u679c\uff0c\u5305\u542b label \u3001 rate \u3001 review label integer \u56fe\u7247\u88ab\u5224\u5b9a\u7684\u5206\u7c7b\uff0c\u53ef\u80fd\u503c 0 \u3001 1 \u3001 2 \uff0c 0 \u8868\u793a\u6b63\u5e38\uff0c 1 \u8868\u793a\u8272\u60c5\uff0c 2 \u8868\u793a\u6027\u611f rate float \u56fe\u7247\u88ab\u5224\u5b9a\u4e3a\u67d0\u4e2a\u5206\u7c7b\u7684\u6982\u7387\uff0c\u4ecb\u4e8e [0-1] \u4e4b\u95f4 review boolean \u662f\u5426\u9700\u8981\u4eba\u5de5\u590d\u5ba1\uff0c true \u8868\u793a\u9700\u8981\uff0c false \u8868\u793a\u4e0d\u9700\u8981 task_id string \u4efb\u52a1\u5bf9\u5e94\u7684 task_id error string \u9519\u8bef\u4fe1\u606f\uff0c\u7a7a\u5b57\u7b26\u4e32\u8868\u793a\u65e0\u9519\u8bef\u4fe1\u606f ** \u56de\u8c03\u7b7e\u540d ** Authorization \u8be6\u89c1 \u7b7e\u540d\u8ba4\u8bc1 \u3002 ** \u4e3e\u4f8b ** { \"service\": \"upyun-temp\", \"status_code\": 200, \"source\": \"upyun.jpg\", \"result\": { \"porn\": { \"label\": 0, \"rate\": 0.9833183288574219, \"review\": false } }, \"task_id\": \"7b01610c7fa700b56cd7c80be5e08d5c\", \"error\": \"\" } \u89c6\u9891\u70b9\u64ad \u00b6 \u4e0a\u4f20\u9884\u5904\u7406 \u00b6 \u5728\u4e0a\u4f20\u89c6\u9891\u70b9\u64ad\u65f6\uff0c\u63d0\u4f9b\u9884\u5904\u7406\u53c2\u6570\u3002\u5f85\u89c6\u9891\u4e0a\u4f20\u5b8c\u6210\u540e\uff0c\u81ea\u52a8\u8fdb\u884c\u5f02\u6b65\u5904\u7406\uff0c\u5904\u7406\u5b8c\u6210\u540e\uff0c\u56de\u8c03\u901a\u77e5\u7528\u6237\u5904\u7406\u7ed3\u679c\u3002 \u652f\u6301\u7684 API\uff1a FORM API \u3002 \u53c2\u6570\u540d\u662f apps \uff0c\u53c2\u6570\u503c\u662f JSON \u5b57\u7b26\u4e32\u3002\u4e00\u4e2a apps \u6700\u591a\u53ea\u5141\u8bb8\u5305\u542b\u4e00\u4e2a\u4efb\u52a1\u3002 ** apps \u53c2\u6570\u7ed3\u6784 ** apps = [ { \"name\": \"videoaudit\", // \u5f02\u6b65\u4efb\u52a1\u540d\u79f0\uff0cvideoaudit \u8868\u793a\u70b9\u64ad\u8bc6\u522b \"notify_url\": \"<notify_url>\" // \u56de\u8c03\u5730\u5740\uff0c\u4e0d\u586b\u65f6\u4f7f\u7528\u4e0a\u4f20\u53c2\u6570\u4e2d\u7684 notify_url \"interval\": 10, // \u622a\u56fe\u95f4\u9694\u5468\u671f\uff0c\u975e\u5fc5\u586b \"save_as\": \"/foo_{index}.jpg\", // \u622a\u56fe\u4fdd\u5b58\u8def\u5f84\uff0c\u975e\u5fc5\u586b \"resize\": \"640x480\", // \u622a\u56fe\u4fdd\u5b58\u5c3a\u5bf8\uff0c\u975e\u5fc5\u586b } ] interval \u3001 save_as \u3001 resize \u53c2\u6570\u89e3\u91ca\u8bf4\u660e\uff0c\u89c1 tasks \u53c2\u6570\u8bf4\u660e \u3002 ** \u56de\u8c03\u901a\u77e5 ** \u4efb\u52a1\u5904\u7406\u5b8c\u6210\u540e\uff0c\u5411 notify_url \u5730\u5740\u53d1\u9001\u56de\u8c03\u901a\u77e5\u3002\u8be6\u89c1\u300c \u56de\u8c03\u901a\u77e5 \u300d\u3002 \u4e91\u5b58\u50a8\u4e2d\u7684\u89c6\u9891\u70b9\u64ad\u5904\u7406 \u00b6 ** \u8bf7\u6c42\u65b9\u6cd5 ** \u5bf9\u5df2\u7ecf\u5b58\u5728\u4e91\u5b58\u50a8\u4e2d\u7684\u89c6\u9891\u70b9\u64ad\uff0c\u4ee5 POST \u65b9\u6cd5\u5411 http://p0.api.upyun.com/pretreatment/ \u63d0\u4ea4\u5904\u7406\u4efb\u52a1\uff0c\u54cd\u5e94\u4e2d\u8fd4\u56de\u4efb\u52a1 task_id \u3002\u4efb\u52a1\u4ee5\u5f02\u6b65\u7684\u65b9\u5f0f\u5904\u7406\uff0c\u5904\u7406\u5b8c\u6210\u540e\uff0c\u56de\u8c03\u901a\u77e5\u7528\u6237\u5904\u7406\u7ed3\u679c\u3002 curl -X POST \\ http://p0.api.upyun.com/pretreatment/ \\ -H \"Authorization: UPYUN <Operator>:<Signature>\" \\ -H \"Date: <Wed, 29 Oct 2014 02:26:58 GMT>\" \\ -H \"Content-MD5: <Content-MD5>\" \\ -d \"service=<service>\" \\ -d \"notify_url=<notify_url>\" \\ -d \"app_name=<app_name>\" \\ -d \"tasks=<base64 \u7f16\u7801\u540e\u7684\u4efb\u52a1\u5b57\u7b26\u4e32>\" ** \u8ba4\u8bc1\u9274\u6743 ** Authorization \u8be6\u89c1 \u7b7e\u540d\u8ba4\u8bc1 \u3002 ** \u8bf7\u6c42\u53c2\u6570 ** \u53c2\u6570 \u7c7b\u578b \u5fc5\u9009 \u8bf4\u660e service string \u662f \u89c6\u9891\u70b9\u64ad\u6240\u5728\u7684\u670d\u52a1\u540d notify_url string \u662f \u56de\u8c03\u901a\u77e5\u5730\u5740\uff0c\u8be6\u89c1 \u56de\u8c03\u901a\u77e5 tasks string \u662f \u4efb\u52a1\u4fe1\u606f\uff0c\u8be6\u89c1 tasks \u53c2\u6570\u8bf4\u660e app_name string \u662f \u5904\u7406\u529f\u80fd\uff0c videoaudit \u8868\u793a\u70b9\u64ad\u8bc6\u522b ** tasks \u53c2\u6570\u8bf4\u660e ** \u53c2\u6570 \u7c7b\u578b \u5fc5\u9009 \u8bf4\u660e source string \u662f \u89c6\u9891\u70b9\u64ad\u7684\u8def\u5f84 interval integer \u5426 \u622a\u56fe\u95f4\u9694\u65f6\u95f4\uff0c\u9ed8\u8ba4 10 \uff0c\u5355\u4f4d\u79d2 save_as string \u5426 \u622a\u56fe\u4fdd\u5b58\u8def\u5f84\uff0c\u9ed8\u8ba4\u4e0d\u4fdd\u5b58\u622a\u56fe \u652f\u6301 \u52a8\u6001\u53c2\u6570 \u548c {index} (\u5fc5\u586b)\uff0c\u540e\u7f00\u4f5c\u4e3a\u622a\u56fe\u683c\u5f0f\uff0c\u652f\u6301 jpg \u548c png resize string \u5426 \u622a\u56fe\u4fdd\u5b58\u5c3a\u5bf8\uff0c\u9ed8\u8ba4\u539f\u56fe\u5927\u5c0f\uff0c\u683c\u5f0f\u5bbdx\u9ad8\uff0c\u5982 640x480 1. \u6309 JSON \u683c\u5f0f\u7ec4\u88c5\u4efb\u52a1\uff0c\u4e00\u6b21\u8bf7\u6c42 tasks \u6700\u591a\u53ef\u4ee5\u63d0\u4ea4 10 \u4e2a\u4efb\u52a1\u3002 [ { \"source\": \"/upyun.mp4\", \"save_as\": \"/foo_{index}.jpg\", // {index} \u8868\u793a\u7b2c\u51e0\u5f20\u622a\u56fe\uff0c\u7b2c\u4e00\u5f20\u662f /foo_1.jpg\uff0c\u7b2c\u4e8c\u5f20\u662f /foo_2.jpg }, \u2026 ] 2. \u628a JSON \u5b57\u7b26\u4e32 Base64 \u7f16\u7801\uff0c\u5f97\u5230 tasks \u3002 ** \u54cd\u5e94\u4fe1\u606f ** \u4efb\u52a1\u63d0\u4ea4\u6210\u529f\uff1a\u8fd4\u56de 200 \uff0c\u54cd\u5e94\u4f53\u662f\u4e00\u7ec4\u6309\u4efb\u52a1\u63d0\u4ea4\u5148\u540e\u987a\u5e8f\u6392\u5e8f\u7684 task_id \u3002\u4f8b\u5982\uff1a [ \"35f0148d414a688a275bf915ba7cebb2\", \u2026 ] \u4efb\u52a1\u63d0\u4ea4\u5931\u8d25\uff1a\u8fd4\u56de\u76f8\u5e94\u7684\u51fa\u9519\u4fe1\u606f\uff0c\u5177\u4f53\u8bf7\u53c2\u9605\u300c \u72b6\u6001\u7801\u8868 \u300d\u3002 ** \u56de\u8c03\u901a\u77e5 ** \u4efb\u52a1\u5904\u7406\u5b8c\u6210\u540e\uff0c\u5411 notify_url \u5730\u5740\u53d1\u9001\u56de\u8c03\u901a\u77e5\u3002\u8be6\u89c1\u300c \u56de\u8c03\u901a\u77e5 \u300d\u3002 \u56de\u8c03\u901a\u77e5 \u00b6 \u4efb\u52a1\u5904\u7406\u5b8c\u6210\u540e\uff0c\u5411 notify_url \u53d1\u9001 HTTP POST \u8bf7\u6c42\uff0c\u8bf7\u6c42\u4f53\u662f\u56de\u8c03\u4fe1\u606f\u3002 curl -X POST \\ <notify_url> \\ -H \"Authorization: UPYUN <Operator>:<Signature>\" \\ -H \"Date: <Wed, 29 Oct 2014 02:26:58 GMT>\" \\ -H \"Content-MD5: <Content-MD5>\" \\ -d \"service=<service>\" \\ # \u5176\u4ed6\u53c2\u6570... ** \u56de\u8c03\u4fe1\u606f ** \u56de\u8c03\u4fe1\u606f\u4e3a JSON \u5b57\u7b26\u4e32\uff0c\u53c2\u6570\u540d\u53ca\u8bf4\u660e\u5982\u4e0b\uff1a \u53c2\u6570 \u7c7b\u578b \u8bf4\u660e task_id string \u4efb\u52a1\u5bf9\u5e94\u7684 task_id status_code integer \u5904\u7406\u7ed3\u679c\u72b6\u6001\u7801\uff0c 200 \u8868\u793a\u6210\u529f\u5904\u7406\uff0c\u8be6\u89c1 \u72b6\u6001\u7801\u8868 service string \u89c6\u9891\u70b9\u64ad\u6240\u5728\u7684\u670d\u52a1\u540d source string \u622a\u56fe\u4fdd\u5b58\u8def\u5f84\uff0c\u5982\u679c\u8bf7\u6c42\u53c2\u6570\u4e2d\u672a\u8bbe\u7f6e save_as \uff0c\u4e0d\u5b58\u5728 error string \u9519\u8bef\u4fe1\u606f\uff0c\u7a7a\u5b57\u7b26\u4e32\u8868\u793a\u65e0\u9519\u8bef\u4fe1\u606f result json \u8bc6\u522b\u7ed3\u679c\u96c6\uff0c\u5305\u542b porn result.porn json \u9274\u9ec4\u7ed3\u679c\uff0c\u5305\u542b label \u3001 rate \u3001 review result.porn.label integer \u56fe\u7247\u88ab\u5224\u5b9a\u7684\u5206\u7c7b\uff0c\u53ef\u80fd\u503c 0 \u3001 1 \u3001 2 \uff0c 0 \u8868\u793a\u6b63\u5e38\uff0c 1 \u8868\u793a\u8272\u60c5\uff0c 2 \u8868\u793a\u6027\u611f result.porn.rate float \u56fe\u7247\u88ab\u5224\u5b9a\u4e3a\u67d0\u4e2a\u5206\u7c7b\u7684\u6982\u7387\uff0c\u4ecb\u4e8e [0-1] \u4e4b\u95f4 result.porn.review boolean \u662f\u5426\u9700\u8981\u4eba\u5de5\u590d\u5ba1\uff0c true \u8868\u793a\u9700\u8981\uff0c false \u8868\u793a\u4e0d\u9700\u8981 filelist json \u622a\u56fe\u96c6, \u4e3a\u6bcf\u4e2a\u65f6\u95f4\u70b9\u7684\u622a\u56fe\u5ba1\u6838\u7ed3\u679c filelist.result json \u8bc6\u522b\u7ed3\u679c\u96c6\uff0c\u5305\u542b porn filelist.result.shot_time string \u622a\u56fe\u65f6\u95f4\u70b9 filelist.result.porn json \u9274\u9ec4\u7ed3\u679c\uff0c\u5305\u542b label \u3001 rate \u3001 review filelist.result.porn.label integer \u56fe\u7247\u88ab\u5224\u5b9a\u7684\u5206\u7c7b\uff0c\u53ef\u80fd\u503c 0 \u3001 1 \u3001 2 \uff0c 0 \u8868\u793a\u6b63\u5e38\uff0c 1 \u8868\u793a\u8272\u60c5\uff0c 2 \u8868\u793a\u6027\u611f filelist.result.porn.rate float \u56fe\u7247\u88ab\u5224\u5b9a\u4e3a\u67d0\u4e2a\u5206\u7c7b\u7684\u6982\u7387\uff0c\u4ecb\u4e8e [0-1] \u4e4b\u95f4 filelist.result.porn.review boolean \u662f\u5426\u9700\u8981\u4eba\u5de5\u590d\u5ba1\uff0c true \u8868\u793a\u9700\u8981\uff0c false \u8868\u793a\u4e0d\u9700\u8981 ** \u56de\u8c03\u7b7e\u540d ** Authorization \u8be6\u89c1 \u7b7e\u540d\u8ba4\u8bc1 \u3002 ** \u4e3e\u4f8b ** { \"service\": \"upyun-temp\", \"status_code\": 200, \"source\": \"upyun.mp4\", \"result\": { \"porn\": { \"label\": 0, \"rate\": 0.9833183288574219, \"review\": false } }, \"filelist\": [ { \"result\": { \"porn\": { \"label\": 0, \"rate\": 0.9833183288574219, \"review\": false } }, \"shot_time\": 0, \"save_as\": \"foo_1.jpg\" } ], \"task_id\": \"7b01610c7fa700b56cd7c80be5e08d5c\", \"error\": \"\" } \u89c6\u9891\u76f4\u64ad \u00b6 \u521b\u5efa\u4efb\u52a1 \u00b6 \u4ee5 POST \u65b9\u6cd5\u5411 http://p1.api.upyun.com/<service>/liveaudit/create \u63d0\u4ea4\u4efb\u52a1\uff0c\u670d\u52a1\u6536\u5230\u8bf7\u6c42\u540e\u521b\u5efa\u5b9a\u65f6\u4efb\u52a1\uff0c\u83b7\u53d6\u6d41\u6700\u8fd1\u5173\u952e\u5e27\uff0c\u8bc6\u522b\u5e76\u8fd4\u56de\u7ed3\u679c\u3002\u7279\u522b\u5730\uff0c <service> \u9700\u66ff\u6362\u4e3a\u5177\u4f53\u7684\u670d\u52a1\u540d\u3002 curl -X POST \\ http://p1.api.upyun.com/<service>/liveaudit/create \\ -H \"Authorization: UPYUN <Operator>:<Signature>\" \\ -H \"Date: <Wed, 29 Oct 2014 02:26:58 GMT>\" \\ -H \"Content-MD5: <Content-MD5>\" \\ -d '{\"service\": \"<service>\", \"source\": \"<source>\", \"save_as\": \"<save_as>\", \"notify_url\": \"<notify_url>\"}' ** \u8ba4\u8bc1\u9274\u6743 ** Authorization \u8be6\u89c1 \u7b7e\u540d\u8ba4\u8bc1 \u3002 ** \u8bf7\u6c42\u53c2\u6570 ** \u53c2\u6570 \u7c7b\u578b \u5fc5\u9009 \u8bf4\u660e service string \u662f \u56fe\u7247\u5b58\u50a8\u7684\u670d\u52a1\u540d source string \u662f RTMP \u6d41\u5730\u5740\uff0c\u5fc5\u987b\u4ee5 rtmp:// \u5f00\u5934 save_as string \u662f \u622a\u56fe\u4fdd\u5b58\u5730\u5740\uff0c\u652f\u6301 \u52a8\u6001\u53c2\u6570 \uff0c\u540e\u7f00\u4f5c\u4e3a\u622a\u56fe\u683c\u5f0f\uff0c\u652f\u6301 jpg \u548c png notify_url string \u662f \u56de\u8c03\u901a\u77e5\u5730\u5740\uff0c\u8be6\u89c1 \u56de\u8c03\u901a\u77e5 interval string \u5426 \u622a\u56fe\u95f4\u9694\u65f6\u95f4\uff0c\u9ed8\u8ba4 10 \uff0c\u5355\u4f4d\u79d2 resize string \u5426 \u622a\u56fe\u4fdd\u5b58\u5c3a\u5bf8\uff0c\u9ed8\u8ba4\u539f\u56fe\u5927\u5c0f\uff0c\u683c\u5f0f\u5bbdx\u9ad8\uff0c\u5982 640x480 ** \u54cd\u5e94\u4fe1\u606f ** \u4efb\u52a1\u63d0\u4ea4\u6210\u529f\uff1a\u8fd4\u56de 200 \uff0c\u54cd\u5e94\u4f53\u662f\u6d41\u6700\u8fd1\u5173\u952e\u5e27\u7684\u8bc6\u522b\u7ed3\u679c\u3002\u4f8b\u5982\uff1a { \"service\": \"upyun-temp\", \"status_code\": 200, \"source\": \"upyun.jpg\", \"result\": { \"porn\": { \"label\": 0, \"rate\": 0.9833183288574219, \"review\": false } }, \"task_id\": \"7b01610c7fa700b56cd7c80be5e08d5c\" \"error\": \"\" } \u4efb\u52a1\u63d0\u4ea4\u5931\u8d25\uff1a\u8fd4\u56de\u76f8\u5e94\u7684\u51fa\u9519\u4fe1\u606f\uff0c\u5177\u4f53\u8bf7\u53c2\u9605\u300c \u72b6\u6001\u7801\u8868 \u300d\u3002 ** \u5468\u671f\u6027\u5904\u7406 ** \u4e4b\u540e\uff0c\u7cfb\u7edf\u4f1a\u5468\u671f\u53bb\u83b7\u53d6\u6d41\uff0c\u5e76\u63d0\u53d6\u6700\u8fd1\u5173\u952e\u5e27\u8fdb\u884c\u8bc6\u522b\uff0c\u8bc6\u522b\u7ed3\u679c\u5411 notify_url \u53d1\u9001 HTTP POST \u8bf7\u6c42\uff0c\u8bf7\u6c42\u4f53\u662f\u56de\u8c03\u4fe1\u606f\u3002 curl -X POST \\ <notify_url> \\ -H \"Authorization: UPYUN <Operator>:<Signature>\" \\ -H \"Date: <Wed, 29 Oct 2014 02:26:58 GMT>\" \\ -H \"Content-MD5: <Content-MD5>\" \\ -d \"service=<service>\" \\ # \u5176\u4ed6\u53c2\u6570... ** \u56de\u8c03\u4fe1\u606f ** \u56de\u8c03\u4fe1\u606f\u4e3a JSON \u5b57\u7b26\u4e32\uff0c\u53c2\u6570\u540d\u53ca\u8bf4\u660e\u5982\u4e0b\uff1a \u53c2\u6570 \u7c7b\u578b \u8bf4\u660e service string \u56fe\u7247\u5b58\u50a8\u7684\u670d\u52a1\u540d status_code integer \u5904\u7406\u7ed3\u679c\u72b6\u6001\u7801\uff0c 200 \u8868\u793a\u6210\u529f\u5904\u7406\uff0c\u8be6\u89c1 \u72b6\u6001\u7801\u8868 source string \u56fe\u7247\u8def\u5f84 result json \u8bc6\u522b\u7ed3\u679c\u96c6\uff0c\u5305\u542b porn porn json \u9274\u9ec4\u7ed3\u679c\uff0c\u5305\u542b label \u3001 rate \u3001 review label integer \u56fe\u7247\u88ab\u5224\u5b9a\u7684\u5206\u7c7b\uff0c\u53ef\u80fd\u503c 0 \u3001 1 \u3001 2 \uff0c 0 \u8868\u793a\u6b63\u5e38\uff0c 1 \u8868\u793a\u8272\u60c5\uff0c 2 \u8868\u793a\u6027\u611f rate float \u56fe\u7247\u88ab\u5224\u5b9a\u4e3a\u67d0\u4e2a\u5206\u7c7b\u7684\u6982\u7387\uff0c\u4ecb\u4e8e [0-1] \u4e4b\u95f4 review boolean \u662f\u5426\u9700\u8981\u4eba\u5de5\u590d\u5ba1\uff0c true \u8868\u793a\u9700\u8981\uff0c false \u8868\u793a\u4e0d\u9700\u8981 task_id string \u4efb\u52a1\u5bf9\u5e94\u7684 task_id error string \u9519\u8bef\u4fe1\u606f\uff0c\u7a7a\u5b57\u7b26\u4e32\u8868\u793a\u65e0\u9519\u8bef\u4fe1\u606f ** \u56de\u8c03\u7b7e\u540d ** Authorization \u8be6\u89c1 \u7b7e\u540d\u8ba4\u8bc1 \u3002 ** \u4e3e\u4f8b ** { \"service\": \"upyun-temp\", \"status_code\": 200, \"source\": \"upyun.jpg\", \"result\": { \"porn\": { \"label\": 0, \"rate\": 0.9833183288574219, \"review\": false } }, \"task_id\": \"7b01610c7fa700b56cd7c80be5e08d5c\" \"error\": \"\" } \u53d6\u6d88\u4efb\u52a1 \u00b6 \u4ee5 POST \u65b9\u6cd5\u5411 http://p1.api.upyun.com/<service>/liveaudit/cancel \u63d0\u4ea4\u4efb\u52a1\u3002\u7279\u522b\u5730\uff0c <service> \u9700\u66ff\u6362\u4e3a\u5177\u4f53\u7684\u670d\u52a1\u540d\u3002 curl -X POST \\ http://p1.api.upyun.com/<service>/liveaudit/cancel \\ -H \"Authorization: UPYUN <Operator>:<Signature>\" \\ -H \"Date: <Wed, 29 Oct 2014 02:26:58 GMT>\" \\ -H \"Content-MD5: <Content-MD5>\" \\ -d '{\"service\": <service>, \"task_id\": <task_id>}' ** \u8ba4\u8bc1\u9274\u6743 ** Authorization \u8be6\u89c1 \u7b7e\u540d\u8ba4\u8bc1 \u3002 ** \u8bf7\u6c42\u53c2\u6570 ** \u53c2\u6570 \u7c7b\u578b \u5fc5\u9009 \u8bf4\u660e service string \u662f \u56fe\u7247\u5b58\u50a8\u7684\u670d\u52a1\u540d task_id string \u662f \u4efb\u52a1 ID, \u4efb\u52a1\u521b\u5efa\u65f6\u7cfb\u7edf\u8fd4\u56de\u7684\u4efb\u52a1 ID ** \u54cd\u5e94\u4fe1\u606f ** \u4efb\u52a1\u63d0\u4ea4\u6210\u529f\uff1a\u8fd4\u56de 200 \u3002\u4f8b\u5982\uff1a {\"status\": 200} \u4efb\u52a1\u63d0\u4ea4\u5931\u8d25\uff1a\u8fd4\u56de\u76f8\u5e94\u7684\u51fa\u9519\u4fe1\u606f\uff0c\u5177\u4f53\u8bf7\u53c2\u9605\u300c \u72b6\u6001\u7801\u8868 \u300d\u3002 ** \u6ce8 ** \u5982\u679c\u7cfb\u7edf\u5bf9\u6d41\u64cd\u4f5c\u5931\u8d25\u6b21\u6570\u8fc7\u591a\uff0c\u5982\u6d41\u5df2\u7ecf\u505c\u6b62, \u4f1a\u81ea\u52a8\u89e6\u53d1\u53d6\u6d88\u64cd\u4f5c\u3002 \u72b6\u6001\u7801\u8868 \u00b6 \u72b6\u6001\u7801 \u8bf4\u660e 200 \u5904\u7406\u6210\u529f 400 \u7f3a\u5931\u5fc5\u586b\u53c2\u6570\uff0cErrMissingRequiredArgument 400 \u53c2\u6570\u7c7b\u578b\u9519\u8bef\uff0cErrType 400 interval \u53c2\u6570\u9519\u8bef\uff0cErrInterval 403 \u4efb\u52a1\u5df2\u5b58\u5728\uff0cErrRepeat 404 \u6587\u4ef6\u4e0d\u5b58\u5728/\u76f4\u64ad\u6d41\u4e0d\u5b58\u5728/\u4efb\u52a1\u4e0d\u5b58\u5728 405 \u8bf7\u6c42\u65b9\u6cd5\u4e0d\u5141\u8bb8 413 \u6587\u4ef6\u5927\u5c0f\u8d85\u8fc7 10M 415 \u6587\u4ef6\u4e0d\u662f\u56fe\u7247 5xx \u670d\u52a1\u7aef\u9519\u8bef\u3002\u5982\u9047\u6b64\u7c7b\u9519\u8bef\uff0c\u8bf7\u53cd\u9988\u7ed9 \u552e\u540e \u6216\u60a8\u7684\u5546\u52a1\u7ecf\u7406 \u51c6\u786e\u7387 \u00b6 \u4ece\u67d0\u4e1a\u52a1\u7cfb\u7edf\u968f\u673a\u62bd\u53d6 24 \u4e07\u5f20\u56fe\u7247\uff0c\u5148\u8fdb\u884c\u673a\u5668\u5ba1\u6838\uff0c\u518d\u5bf9\u7ed3\u679c\u8fdb\u884c\u4eba\u5de5\u590d\u67e5\u4e24\u904d\uff0c\u6700\u7ec8\u786e\u5b9a\u51c6\u786e\u7387\u662f 99.68%\u3002\u5373 99.68% \u7684\u673a\u5668\u5224\u65ad\u662f\u51c6\u786e\u7684\uff0c\u7c7b\u4f3c\u4e8e\u4eba\u5de5\u5ba1\u6838\u7684\u51c6\u786e\u7387\uff0c\u53ef\u4ee5\u4ee3\u66ff\u4eba\u5de5\u8fdb\u884c\u5ba1\u6838\u3002 \u8272\u60c5\u8bc6\u522b \u00b6 \u8bc6\u522b\u8272\u60c5\u3001\u6027\u611f\u3001\u6b63\u5e38\u5185\u5bb9\u3002\u5bf9\u4e8e\u4e0d\u786e\u5b9a\u5185\u5bb9\uff0c\u4f7f\u7528 review\uff1atrue \u8868\u793a\u3002 \u56fe\u7247 \u00b6 \u5982\u679c\u662f\u65b0\u589e\u56fe\u7247\uff0c\u53ef\u4ee5\u4f7f\u7528 \u4e0a\u4f20\u9884\u5904\u7406 \u63a5\u53e3\uff0c\u628a\u56fe\u7247\u4e0a\u4f20\u81f3\u53c8\u62cd\u4e91\u5b58\u50a8\u7684\u540c\u65f6\uff0c\u8fdb\u884c\u9274\u9ec4\u3002 \u5982\u679c\u56fe\u7247\u5df2\u7ecf\u5b58\u5728\u53c8\u62cd\u4e91\u5b58\u50a8\uff0c\u53ef\u4ee5\u4f7f\u7528 \u76f4\u63a5\u5904\u7406 \u63a5\u53e3\uff0c\u8fdb\u884c\u9274\u9ec4\u3002 \u89c6\u9891\u70b9\u64ad \u00b6 \u5982\u679c\u662f\u65b0\u589e\u89c6\u9891\uff0c\u53ef\u4ee5\u4f7f\u7528 \u4e0a\u4f20\u9884\u5904\u7406 \u63a5\u53e3\uff0c\u628a\u89c6\u9891\u4e0a\u4f20\u81f3\u53c8\u62cd\u4e91\u5b58\u50a8\u7684\u540c\u65f6\uff0c\u8fdb\u884c\u9274\u9ec4\u3002 \u5982\u679c\u89c6\u9891\u5df2\u7ecf\u5b58\u5728\u53c8\u62cd\u4e91\u5b58\u50a8 \uff0c\u53ef\u4ee5\u4f7f\u7528 \u76f4\u63a5\u5904\u7406 \u63a5\u53e3\uff0c\u8fdb\u884c\u9274\u9ec4\u3002 \u7cfb\u7edf\u6309\u95f4\u9694\uff08 interval \uff09\u5bf9\u70b9\u64ad\u8fdb\u884c\u622a\u56fe\uff08\u5173\u952e\u5e27\u63d0\u53d6\uff09\uff0c\u7136\u540e\u5bf9\u622a\u56fe\u8fdb\u884c\u9274\u9ec4\u3002\u9ed8\u8ba4\u95f4\u9694\u662f 6s\u3002\u5982\u679c\u89c6\u9891\u662f\u9ad8\u654f\u5185\u5bb9\uff0c\u95f4\u9694\u53ef\u4ee5\u8bbe\u7f6e\u7684\u66f4\u5c0f\u3002 \u9274\u9ec4\u7ed3\u679c\u4e2d\u6709\u622a\u56fe\u65f6\u95f4\u70b9\u4fe1\u606f\uff0c\u5b83\u53ef\u4ee5\u5e2e\u52a9\u5b9a\u4f4d\u8fdd\u89c4\u5185\u5bb9\u7684\u4f4d\u7f6e\uff0c\u548c\u67e5\u770b\u8bc6\u522b\u5185\u5bb9\u7684\u4f4d\u7f6e\u3002 \u89c6\u9891\u76f4\u64ad \u00b6 \u6839\u636e\u76f4\u64ad\u7684\u7279\u6027\uff0c\u4e3a\u89c6\u9891\u76f4\u64ad\u8bbe\u8ba1\u4e86\u4e13\u95e8\u7684\u63a5\u53e3\uff0c\u5305\u62ec \u521b\u5efa\u4efb\u52a1 \u63a5\u53e3\u548c \u53d6\u6d88\u4efb\u52a1 \u63a5\u53e3\u3002 \u7cfb\u7edf\u6309\u95f4\u9694\uff08 interval \uff09\u5bf9\u76f4\u64ad\u6d41\u8fdb\u884c\u622a\u56fe\uff08\u5173\u952e\u5e27\u63d0\u53d6\uff09\uff0c\u7136\u540e\u5bf9\u622a\u56fe\u8fdb\u884c\u9274\u9ec4\u3002\u9ed8\u8ba4\u95f4\u9694\u662f 6s\u3002\u5982\u679c\u6d41\u662f\u9ad8\u654f\u5185\u5bb9\uff0c\u95f4\u9694\u53ef\u4ee5\u8bbe\u7f6e\u7684\u66f4\u5c0f\u3002 \u6ca1\u6709\u4efb\u52a1\u67e5\u8be2\u63a5\u53e3\uff0c\u9700\u8981\u5ba2\u6237\u7aef\u8bb0\u5f55\u76f4\u64ad\u6d41\u4e0e\u4efb\u52a1\uff08 task_id \uff09\u7684\u5173\u7cfb\u3002 \u5982\u6709\u7591\u95ee\u8bf7 \u8054\u7cfb\u6211\u4eec","title":"\u5185\u5bb9\u8bc6\u522b(\u6709\u5b58\u50a8)"},{"location":"ai/audit/#_1","text":"\u5185\u5bb9\u8bc6\u522b(\u6709\u5b58\u50a8)\u57fa\u4e8e\u4e91\u5b58\u50a8\u670d\u52a1\uff0c\u975e\u7ed3\u6784\u5316\u6570\u636e\u4f1a\u653e\u5728\u4e91\u5b58\u50a8\uff0c\u6216\u76f4\u63a5\u4ece\u4e91\u5b58\u50a8\u4e0a\u8bfb\u53d6\u6570\u636e\uff0c\u60a8\u5728\u4f7f\u7528\u5b83\u4e4b\u524d\uff0c\u8bf7\u786e\u4fdd\u60a8\u5df2\u7ecf\u6ce8\u518c\u53c8\u62cd\u4e91\u8d26\u53f7\u5e76\u5b8c\u6210\u5b9e\u540d\u9a8c\u8bc1\uff0c\u8bf7\u786e\u4fdd\u60a8\u5df2\u7ecf\u521b\u5efa \u4e91\u5b58\u50a8\u670d\u52a1 \u548c\u5f00\u901a\u5185\u5bb9\u8bc6\u522b\u670d\u52a1\u3002 \u6536\u8d39\u65b9\u9762\uff0c\u6536\u8d39\uff0c\u652f\u6301\u514d\u8d39\u8bd5\u7528\uff0c\u8be6\u60c5\u656c\u8bf7 \u8054\u7cfb\u5546\u52a1 \u3002","title":"\u5feb\u901f\u5165\u95e8"},{"location":"ai/audit/#_2","text":"","title":"\u5f00\u53d1\u8005\u6307\u5357"},{"location":"ai/audit/#_3","text":"","title":"\u56fe\u7247"},{"location":"ai/audit/#_4","text":"\u5728\u4e0a\u4f20\u56fe\u7247\u65f6\uff0c\u63d0\u4f9b\u9884\u5904\u7406\u53c2\u6570\u3002\u5f85\u56fe\u7247\u4e0a\u4f20\u5b8c\u6210\u540e\uff0c\u81ea\u52a8\u8fdb\u884c\u5f02\u6b65\u5904\u7406\uff0c\u5904\u7406\u5b8c\u6210\u540e\uff0c\u56de\u8c03\u901a\u77e5\u7528\u6237\u5904\u7406\u7ed3\u679c\u3002 \u652f\u6301\u7684 API\uff1a FORM API \u3002 \u53c2\u6570\u540d\u662f apps \uff0c\u53c2\u6570\u503c\u662f JSON \u5b57\u7b26\u4e32\u3002\u4e00\u4e2a apps \u6700\u591a\u53ea\u5141\u8bb8\u5305\u542b\u4e00\u4e2a\u4efb\u52a1\u3002 ** apps \u53c2\u6570\u7ed3\u6784 ** apps = [ { \"name\": \"imgaudit\", // \u5f02\u6b65\u4efb\u52a1\u540d\u79f0\uff0cimgaudit \u8868\u793a\u56fe\u7247\u8bc6\u522b \"notify_url\": \"<notify_url>\" // \u56de\u8c03\u5730\u5740\uff0c\u4e0d\u586b\u65f6\u4f7f\u7528\u4e0a\u4f20\u53c2\u6570\u4e2d\u7684 notify_url } ] ** \u56de\u8c03\u901a\u77e5 ** \u4efb\u52a1\u5904\u7406\u5b8c\u6210\u540e\uff0c\u5411 notify_url \u5730\u5740\u53d1\u9001\u56de\u8c03\u901a\u77e5\u3002\u8be6\u89c1\u300c \u56de\u8c03\u901a\u77e5 \u300d\u3002","title":"\u4e0a\u4f20\u9884\u5904\u7406"},{"location":"ai/audit/#_5","text":"** \u8bf7\u6c42\u65b9\u6cd5 ** \u5bf9\u5df2\u7ecf\u5b58\u5728\u4e91\u5b58\u50a8\u4e2d\u7684\u56fe\u7247\uff0c\u4ee5 POST \u65b9\u6cd5\u5411 http://p0.api.upyun.com/pretreatment/ \u63d0\u4ea4\u5904\u7406\u4efb\u52a1\uff0c\u54cd\u5e94\u4e2d\u8fd4\u56de\u4efb\u52a1 task_id \u3002\u4efb\u52a1\u4ee5\u5f02\u6b65\u7684\u65b9\u5f0f\u5904\u7406\uff0c\u5904\u7406\u5b8c\u6210\u540e\uff0c\u56de\u8c03\u901a\u77e5\u7528\u6237\u5904\u7406\u7ed3\u679c\u3002 curl -X POST \\ http://p0.api.upyun.com/pretreatment/ \\ -H \"Authorization: UPYUN <Operator>:<Signature>\" \\ -H \"Date: <Wed, 29 Oct 2014 02:26:58 GMT>\" \\ -H \"Content-MD5: <Content-MD5>\" \\ -d \"service=<service>\" \\ -d \"notify_url=<notify_url>\" \\ -d \"app_name=<app_name>\" \\ -d \"tasks=<base64 \u7f16\u7801\u540e\u7684\u4efb\u52a1\u5b57\u7b26\u4e32>\" ** \u8ba4\u8bc1\u9274\u6743 ** Authorization \u8be6\u89c1 \u7b7e\u540d\u8ba4\u8bc1 \u3002 ** \u8bf7\u6c42\u53c2\u6570 ** \u53c2\u6570 \u7c7b\u578b \u5fc5\u9009 \u8bf4\u660e service string \u662f \u56fe\u7247\u6240\u5728\u7684\u670d\u52a1\u540d notify_url string \u662f \u56de\u8c03\u901a\u77e5\u5730\u5740\uff0c\u8be6\u89c1 \u56de\u8c03\u901a\u77e5 tasks string \u662f \u4efb\u52a1\u4fe1\u606f\uff0c\u8be6\u89c1 tasks \u53c2\u6570\u8bf4\u660e app_name string \u662f \u5904\u7406\u529f\u80fd\uff0c imgaudit \u8868\u793a\u56fe\u7247\u8bc6\u522b ** tasks \u53c2\u6570\u8bf4\u660e ** 1. \u6309 JSON \u683c\u5f0f\u7ec4\u88c5\u4efb\u52a1\uff0c\u4e00\u6b21\u8bf7\u6c42 tasks \u6700\u591a\u53ef\u4ee5\u63d0\u4ea4 10 \u4e2a\u4efb\u52a1\u3002 [ { \"source\": \"/upyun.jpg\", // \u9700\u8981\u5ba1\u6838\u7684\u56fe\u7247 }, \u2026 ] 2. \u628a JSON \u5b57\u7b26\u4e32 Base64 \u7f16\u7801\uff0c\u5f97\u5230 tasks \u3002 ** \u54cd\u5e94\u4fe1\u606f ** \u4efb\u52a1\u63d0\u4ea4\u6210\u529f\uff1a\u8fd4\u56de 200 \uff0c\u54cd\u5e94\u4f53\u662f\u4e00\u7ec4\u6309\u4efb\u52a1\u63d0\u4ea4\u5148\u540e\u987a\u5e8f\u6392\u5e8f\u7684 task_id \u3002\u4f8b\u5982\uff1a [ \"35f0148d414a688a275bf915ba7cebb2\", \"98adbaa52b2f63d6d7f327a0ff223348\", \"c3103189fa906a5354d29bd807e8dc51\", \u2026 ] \u4efb\u52a1\u63d0\u4ea4\u5931\u8d25\uff1a\u8fd4\u56de\u76f8\u5e94\u7684\u51fa\u9519\u4fe1\u606f\uff0c\u5177\u4f53\u8bf7\u53c2\u9605\u300c \u72b6\u6001\u7801\u8868 \u300d\u3002 ** \u56de\u8c03\u901a\u77e5 ** \u4efb\u52a1\u5904\u7406\u5b8c\u6210\u540e\uff0c\u5411 notify_url \u5730\u5740\u53d1\u9001\u56de\u8c03\u901a\u77e5\u3002\u8be6\u89c1\u300c \u56de\u8c03\u901a\u77e5 \u300d\u3002","title":"\u4e91\u5b58\u50a8\u4e2d\u7684\u56fe\u7247\u5904\u7406"},{"location":"ai/audit/#_6","text":"\u4efb\u52a1\u5904\u7406\u5b8c\u6210\u540e\uff0c\u5411 notify_url \u53d1\u9001 HTTP POST \u8bf7\u6c42\uff0c\u8bf7\u6c42\u4f53\u662f\u56de\u8c03\u4fe1\u606f\u3002 curl -X POST \\ <notify_url> \\ -H \"Authorization: UPYUN <Operator>:<Signature>\" \\ -H \"Date: <Wed, 29 Oct 2014 02:26:58 GMT>\" \\ -H \"Content-MD5: <Content-MD5>\" \\ -d \"service=<service>\" \\ # \u5176\u4ed6\u53c2\u6570... ** \u56de\u8c03\u4fe1\u606f ** \u56de\u8c03\u4fe1\u606f\u4e3a JSON \u5b57\u7b26\u4e32\uff0c\u53c2\u6570\u540d\u53ca\u8bf4\u660e\u5982\u4e0b\uff1a \u53c2\u6570 \u7c7b\u578b \u8bf4\u660e service string \u56fe\u7247\u6240\u5728\u7684\u670d\u52a1\u540d status_code integer \u5904\u7406\u7ed3\u679c\u72b6\u6001\u7801\uff0c 200 \u8868\u793a\u6210\u529f\u5904\u7406\uff0c\u8be6\u89c1 \u72b6\u6001\u7801\u8868 source string \u56fe\u7247\u8def\u5f84 result json \u8bc6\u522b\u7ed3\u679c\u96c6\uff0c\u5305\u542b porn porn json \u9274\u9ec4\u7ed3\u679c\uff0c\u5305\u542b label \u3001 rate \u3001 review label integer \u56fe\u7247\u88ab\u5224\u5b9a\u7684\u5206\u7c7b\uff0c\u53ef\u80fd\u503c 0 \u3001 1 \u3001 2 \uff0c 0 \u8868\u793a\u6b63\u5e38\uff0c 1 \u8868\u793a\u8272\u60c5\uff0c 2 \u8868\u793a\u6027\u611f rate float \u56fe\u7247\u88ab\u5224\u5b9a\u4e3a\u67d0\u4e2a\u5206\u7c7b\u7684\u6982\u7387\uff0c\u4ecb\u4e8e [0-1] \u4e4b\u95f4 review boolean \u662f\u5426\u9700\u8981\u4eba\u5de5\u590d\u5ba1\uff0c true \u8868\u793a\u9700\u8981\uff0c false \u8868\u793a\u4e0d\u9700\u8981 task_id string \u4efb\u52a1\u5bf9\u5e94\u7684 task_id error string \u9519\u8bef\u4fe1\u606f\uff0c\u7a7a\u5b57\u7b26\u4e32\u8868\u793a\u65e0\u9519\u8bef\u4fe1\u606f ** \u56de\u8c03\u7b7e\u540d ** Authorization \u8be6\u89c1 \u7b7e\u540d\u8ba4\u8bc1 \u3002 ** \u4e3e\u4f8b ** { \"service\": \"upyun-temp\", \"status_code\": 200, \"source\": \"upyun.jpg\", \"result\": { \"porn\": { \"label\": 0, \"rate\": 0.9833183288574219, \"review\": false } }, \"task_id\": \"7b01610c7fa700b56cd7c80be5e08d5c\", \"error\": \"\" }","title":"\u56de\u8c03\u901a\u77e5"},{"location":"ai/audit/#_7","text":"","title":"\u89c6\u9891\u70b9\u64ad"},{"location":"ai/audit/#_8","text":"\u5728\u4e0a\u4f20\u89c6\u9891\u70b9\u64ad\u65f6\uff0c\u63d0\u4f9b\u9884\u5904\u7406\u53c2\u6570\u3002\u5f85\u89c6\u9891\u4e0a\u4f20\u5b8c\u6210\u540e\uff0c\u81ea\u52a8\u8fdb\u884c\u5f02\u6b65\u5904\u7406\uff0c\u5904\u7406\u5b8c\u6210\u540e\uff0c\u56de\u8c03\u901a\u77e5\u7528\u6237\u5904\u7406\u7ed3\u679c\u3002 \u652f\u6301\u7684 API\uff1a FORM API \u3002 \u53c2\u6570\u540d\u662f apps \uff0c\u53c2\u6570\u503c\u662f JSON \u5b57\u7b26\u4e32\u3002\u4e00\u4e2a apps \u6700\u591a\u53ea\u5141\u8bb8\u5305\u542b\u4e00\u4e2a\u4efb\u52a1\u3002 ** apps \u53c2\u6570\u7ed3\u6784 ** apps = [ { \"name\": \"videoaudit\", // \u5f02\u6b65\u4efb\u52a1\u540d\u79f0\uff0cvideoaudit \u8868\u793a\u70b9\u64ad\u8bc6\u522b \"notify_url\": \"<notify_url>\" // \u56de\u8c03\u5730\u5740\uff0c\u4e0d\u586b\u65f6\u4f7f\u7528\u4e0a\u4f20\u53c2\u6570\u4e2d\u7684 notify_url \"interval\": 10, // \u622a\u56fe\u95f4\u9694\u5468\u671f\uff0c\u975e\u5fc5\u586b \"save_as\": \"/foo_{index}.jpg\", // \u622a\u56fe\u4fdd\u5b58\u8def\u5f84\uff0c\u975e\u5fc5\u586b \"resize\": \"640x480\", // \u622a\u56fe\u4fdd\u5b58\u5c3a\u5bf8\uff0c\u975e\u5fc5\u586b } ] interval \u3001 save_as \u3001 resize \u53c2\u6570\u89e3\u91ca\u8bf4\u660e\uff0c\u89c1 tasks \u53c2\u6570\u8bf4\u660e \u3002 ** \u56de\u8c03\u901a\u77e5 ** \u4efb\u52a1\u5904\u7406\u5b8c\u6210\u540e\uff0c\u5411 notify_url \u5730\u5740\u53d1\u9001\u56de\u8c03\u901a\u77e5\u3002\u8be6\u89c1\u300c \u56de\u8c03\u901a\u77e5 \u300d\u3002","title":"\u4e0a\u4f20\u9884\u5904\u7406"},{"location":"ai/audit/#_9","text":"** \u8bf7\u6c42\u65b9\u6cd5 ** \u5bf9\u5df2\u7ecf\u5b58\u5728\u4e91\u5b58\u50a8\u4e2d\u7684\u89c6\u9891\u70b9\u64ad\uff0c\u4ee5 POST \u65b9\u6cd5\u5411 http://p0.api.upyun.com/pretreatment/ \u63d0\u4ea4\u5904\u7406\u4efb\u52a1\uff0c\u54cd\u5e94\u4e2d\u8fd4\u56de\u4efb\u52a1 task_id \u3002\u4efb\u52a1\u4ee5\u5f02\u6b65\u7684\u65b9\u5f0f\u5904\u7406\uff0c\u5904\u7406\u5b8c\u6210\u540e\uff0c\u56de\u8c03\u901a\u77e5\u7528\u6237\u5904\u7406\u7ed3\u679c\u3002 curl -X POST \\ http://p0.api.upyun.com/pretreatment/ \\ -H \"Authorization: UPYUN <Operator>:<Signature>\" \\ -H \"Date: <Wed, 29 Oct 2014 02:26:58 GMT>\" \\ -H \"Content-MD5: <Content-MD5>\" \\ -d \"service=<service>\" \\ -d \"notify_url=<notify_url>\" \\ -d \"app_name=<app_name>\" \\ -d \"tasks=<base64 \u7f16\u7801\u540e\u7684\u4efb\u52a1\u5b57\u7b26\u4e32>\" ** \u8ba4\u8bc1\u9274\u6743 ** Authorization \u8be6\u89c1 \u7b7e\u540d\u8ba4\u8bc1 \u3002 ** \u8bf7\u6c42\u53c2\u6570 ** \u53c2\u6570 \u7c7b\u578b \u5fc5\u9009 \u8bf4\u660e service string \u662f \u89c6\u9891\u70b9\u64ad\u6240\u5728\u7684\u670d\u52a1\u540d notify_url string \u662f \u56de\u8c03\u901a\u77e5\u5730\u5740\uff0c\u8be6\u89c1 \u56de\u8c03\u901a\u77e5 tasks string \u662f \u4efb\u52a1\u4fe1\u606f\uff0c\u8be6\u89c1 tasks \u53c2\u6570\u8bf4\u660e app_name string \u662f \u5904\u7406\u529f\u80fd\uff0c videoaudit \u8868\u793a\u70b9\u64ad\u8bc6\u522b ** tasks \u53c2\u6570\u8bf4\u660e ** \u53c2\u6570 \u7c7b\u578b \u5fc5\u9009 \u8bf4\u660e source string \u662f \u89c6\u9891\u70b9\u64ad\u7684\u8def\u5f84 interval integer \u5426 \u622a\u56fe\u95f4\u9694\u65f6\u95f4\uff0c\u9ed8\u8ba4 10 \uff0c\u5355\u4f4d\u79d2 save_as string \u5426 \u622a\u56fe\u4fdd\u5b58\u8def\u5f84\uff0c\u9ed8\u8ba4\u4e0d\u4fdd\u5b58\u622a\u56fe \u652f\u6301 \u52a8\u6001\u53c2\u6570 \u548c {index} (\u5fc5\u586b)\uff0c\u540e\u7f00\u4f5c\u4e3a\u622a\u56fe\u683c\u5f0f\uff0c\u652f\u6301 jpg \u548c png resize string \u5426 \u622a\u56fe\u4fdd\u5b58\u5c3a\u5bf8\uff0c\u9ed8\u8ba4\u539f\u56fe\u5927\u5c0f\uff0c\u683c\u5f0f\u5bbdx\u9ad8\uff0c\u5982 640x480 1. \u6309 JSON \u683c\u5f0f\u7ec4\u88c5\u4efb\u52a1\uff0c\u4e00\u6b21\u8bf7\u6c42 tasks \u6700\u591a\u53ef\u4ee5\u63d0\u4ea4 10 \u4e2a\u4efb\u52a1\u3002 [ { \"source\": \"/upyun.mp4\", \"save_as\": \"/foo_{index}.jpg\", // {index} \u8868\u793a\u7b2c\u51e0\u5f20\u622a\u56fe\uff0c\u7b2c\u4e00\u5f20\u662f /foo_1.jpg\uff0c\u7b2c\u4e8c\u5f20\u662f /foo_2.jpg }, \u2026 ] 2. \u628a JSON \u5b57\u7b26\u4e32 Base64 \u7f16\u7801\uff0c\u5f97\u5230 tasks \u3002 ** \u54cd\u5e94\u4fe1\u606f ** \u4efb\u52a1\u63d0\u4ea4\u6210\u529f\uff1a\u8fd4\u56de 200 \uff0c\u54cd\u5e94\u4f53\u662f\u4e00\u7ec4\u6309\u4efb\u52a1\u63d0\u4ea4\u5148\u540e\u987a\u5e8f\u6392\u5e8f\u7684 task_id \u3002\u4f8b\u5982\uff1a [ \"35f0148d414a688a275bf915ba7cebb2\", \u2026 ] \u4efb\u52a1\u63d0\u4ea4\u5931\u8d25\uff1a\u8fd4\u56de\u76f8\u5e94\u7684\u51fa\u9519\u4fe1\u606f\uff0c\u5177\u4f53\u8bf7\u53c2\u9605\u300c \u72b6\u6001\u7801\u8868 \u300d\u3002 ** \u56de\u8c03\u901a\u77e5 ** \u4efb\u52a1\u5904\u7406\u5b8c\u6210\u540e\uff0c\u5411 notify_url \u5730\u5740\u53d1\u9001\u56de\u8c03\u901a\u77e5\u3002\u8be6\u89c1\u300c \u56de\u8c03\u901a\u77e5 \u300d\u3002","title":"\u4e91\u5b58\u50a8\u4e2d\u7684\u89c6\u9891\u70b9\u64ad\u5904\u7406"},{"location":"ai/audit/#_10","text":"\u4efb\u52a1\u5904\u7406\u5b8c\u6210\u540e\uff0c\u5411 notify_url \u53d1\u9001 HTTP POST \u8bf7\u6c42\uff0c\u8bf7\u6c42\u4f53\u662f\u56de\u8c03\u4fe1\u606f\u3002 curl -X POST \\ <notify_url> \\ -H \"Authorization: UPYUN <Operator>:<Signature>\" \\ -H \"Date: <Wed, 29 Oct 2014 02:26:58 GMT>\" \\ -H \"Content-MD5: <Content-MD5>\" \\ -d \"service=<service>\" \\ # \u5176\u4ed6\u53c2\u6570... ** \u56de\u8c03\u4fe1\u606f ** \u56de\u8c03\u4fe1\u606f\u4e3a JSON \u5b57\u7b26\u4e32\uff0c\u53c2\u6570\u540d\u53ca\u8bf4\u660e\u5982\u4e0b\uff1a \u53c2\u6570 \u7c7b\u578b \u8bf4\u660e task_id string \u4efb\u52a1\u5bf9\u5e94\u7684 task_id status_code integer \u5904\u7406\u7ed3\u679c\u72b6\u6001\u7801\uff0c 200 \u8868\u793a\u6210\u529f\u5904\u7406\uff0c\u8be6\u89c1 \u72b6\u6001\u7801\u8868 service string \u89c6\u9891\u70b9\u64ad\u6240\u5728\u7684\u670d\u52a1\u540d source string \u622a\u56fe\u4fdd\u5b58\u8def\u5f84\uff0c\u5982\u679c\u8bf7\u6c42\u53c2\u6570\u4e2d\u672a\u8bbe\u7f6e save_as \uff0c\u4e0d\u5b58\u5728 error string \u9519\u8bef\u4fe1\u606f\uff0c\u7a7a\u5b57\u7b26\u4e32\u8868\u793a\u65e0\u9519\u8bef\u4fe1\u606f result json \u8bc6\u522b\u7ed3\u679c\u96c6\uff0c\u5305\u542b porn result.porn json \u9274\u9ec4\u7ed3\u679c\uff0c\u5305\u542b label \u3001 rate \u3001 review result.porn.label integer \u56fe\u7247\u88ab\u5224\u5b9a\u7684\u5206\u7c7b\uff0c\u53ef\u80fd\u503c 0 \u3001 1 \u3001 2 \uff0c 0 \u8868\u793a\u6b63\u5e38\uff0c 1 \u8868\u793a\u8272\u60c5\uff0c 2 \u8868\u793a\u6027\u611f result.porn.rate float \u56fe\u7247\u88ab\u5224\u5b9a\u4e3a\u67d0\u4e2a\u5206\u7c7b\u7684\u6982\u7387\uff0c\u4ecb\u4e8e [0-1] \u4e4b\u95f4 result.porn.review boolean \u662f\u5426\u9700\u8981\u4eba\u5de5\u590d\u5ba1\uff0c true \u8868\u793a\u9700\u8981\uff0c false \u8868\u793a\u4e0d\u9700\u8981 filelist json \u622a\u56fe\u96c6, \u4e3a\u6bcf\u4e2a\u65f6\u95f4\u70b9\u7684\u622a\u56fe\u5ba1\u6838\u7ed3\u679c filelist.result json \u8bc6\u522b\u7ed3\u679c\u96c6\uff0c\u5305\u542b porn filelist.result.shot_time string \u622a\u56fe\u65f6\u95f4\u70b9 filelist.result.porn json \u9274\u9ec4\u7ed3\u679c\uff0c\u5305\u542b label \u3001 rate \u3001 review filelist.result.porn.label integer \u56fe\u7247\u88ab\u5224\u5b9a\u7684\u5206\u7c7b\uff0c\u53ef\u80fd\u503c 0 \u3001 1 \u3001 2 \uff0c 0 \u8868\u793a\u6b63\u5e38\uff0c 1 \u8868\u793a\u8272\u60c5\uff0c 2 \u8868\u793a\u6027\u611f filelist.result.porn.rate float \u56fe\u7247\u88ab\u5224\u5b9a\u4e3a\u67d0\u4e2a\u5206\u7c7b\u7684\u6982\u7387\uff0c\u4ecb\u4e8e [0-1] \u4e4b\u95f4 filelist.result.porn.review boolean \u662f\u5426\u9700\u8981\u4eba\u5de5\u590d\u5ba1\uff0c true \u8868\u793a\u9700\u8981\uff0c false \u8868\u793a\u4e0d\u9700\u8981 ** \u56de\u8c03\u7b7e\u540d ** Authorization \u8be6\u89c1 \u7b7e\u540d\u8ba4\u8bc1 \u3002 ** \u4e3e\u4f8b ** { \"service\": \"upyun-temp\", \"status_code\": 200, \"source\": \"upyun.mp4\", \"result\": { \"porn\": { \"label\": 0, \"rate\": 0.9833183288574219, \"review\": false } }, \"filelist\": [ { \"result\": { \"porn\": { \"label\": 0, \"rate\": 0.9833183288574219, \"review\": false } }, \"shot_time\": 0, \"save_as\": \"foo_1.jpg\" } ], \"task_id\": \"7b01610c7fa700b56cd7c80be5e08d5c\", \"error\": \"\" }","title":"\u56de\u8c03\u901a\u77e5"},{"location":"ai/audit/#_11","text":"","title":"\u89c6\u9891\u76f4\u64ad"},{"location":"ai/audit/#_12","text":"\u4ee5 POST \u65b9\u6cd5\u5411 http://p1.api.upyun.com/<service>/liveaudit/create \u63d0\u4ea4\u4efb\u52a1\uff0c\u670d\u52a1\u6536\u5230\u8bf7\u6c42\u540e\u521b\u5efa\u5b9a\u65f6\u4efb\u52a1\uff0c\u83b7\u53d6\u6d41\u6700\u8fd1\u5173\u952e\u5e27\uff0c\u8bc6\u522b\u5e76\u8fd4\u56de\u7ed3\u679c\u3002\u7279\u522b\u5730\uff0c <service> \u9700\u66ff\u6362\u4e3a\u5177\u4f53\u7684\u670d\u52a1\u540d\u3002 curl -X POST \\ http://p1.api.upyun.com/<service>/liveaudit/create \\ -H \"Authorization: UPYUN <Operator>:<Signature>\" \\ -H \"Date: <Wed, 29 Oct 2014 02:26:58 GMT>\" \\ -H \"Content-MD5: <Content-MD5>\" \\ -d '{\"service\": \"<service>\", \"source\": \"<source>\", \"save_as\": \"<save_as>\", \"notify_url\": \"<notify_url>\"}' ** \u8ba4\u8bc1\u9274\u6743 ** Authorization \u8be6\u89c1 \u7b7e\u540d\u8ba4\u8bc1 \u3002 ** \u8bf7\u6c42\u53c2\u6570 ** \u53c2\u6570 \u7c7b\u578b \u5fc5\u9009 \u8bf4\u660e service string \u662f \u56fe\u7247\u5b58\u50a8\u7684\u670d\u52a1\u540d source string \u662f RTMP \u6d41\u5730\u5740\uff0c\u5fc5\u987b\u4ee5 rtmp:// \u5f00\u5934 save_as string \u662f \u622a\u56fe\u4fdd\u5b58\u5730\u5740\uff0c\u652f\u6301 \u52a8\u6001\u53c2\u6570 \uff0c\u540e\u7f00\u4f5c\u4e3a\u622a\u56fe\u683c\u5f0f\uff0c\u652f\u6301 jpg \u548c png notify_url string \u662f \u56de\u8c03\u901a\u77e5\u5730\u5740\uff0c\u8be6\u89c1 \u56de\u8c03\u901a\u77e5 interval string \u5426 \u622a\u56fe\u95f4\u9694\u65f6\u95f4\uff0c\u9ed8\u8ba4 10 \uff0c\u5355\u4f4d\u79d2 resize string \u5426 \u622a\u56fe\u4fdd\u5b58\u5c3a\u5bf8\uff0c\u9ed8\u8ba4\u539f\u56fe\u5927\u5c0f\uff0c\u683c\u5f0f\u5bbdx\u9ad8\uff0c\u5982 640x480 ** \u54cd\u5e94\u4fe1\u606f ** \u4efb\u52a1\u63d0\u4ea4\u6210\u529f\uff1a\u8fd4\u56de 200 \uff0c\u54cd\u5e94\u4f53\u662f\u6d41\u6700\u8fd1\u5173\u952e\u5e27\u7684\u8bc6\u522b\u7ed3\u679c\u3002\u4f8b\u5982\uff1a { \"service\": \"upyun-temp\", \"status_code\": 200, \"source\": \"upyun.jpg\", \"result\": { \"porn\": { \"label\": 0, \"rate\": 0.9833183288574219, \"review\": false } }, \"task_id\": \"7b01610c7fa700b56cd7c80be5e08d5c\" \"error\": \"\" } \u4efb\u52a1\u63d0\u4ea4\u5931\u8d25\uff1a\u8fd4\u56de\u76f8\u5e94\u7684\u51fa\u9519\u4fe1\u606f\uff0c\u5177\u4f53\u8bf7\u53c2\u9605\u300c \u72b6\u6001\u7801\u8868 \u300d\u3002 ** \u5468\u671f\u6027\u5904\u7406 ** \u4e4b\u540e\uff0c\u7cfb\u7edf\u4f1a\u5468\u671f\u53bb\u83b7\u53d6\u6d41\uff0c\u5e76\u63d0\u53d6\u6700\u8fd1\u5173\u952e\u5e27\u8fdb\u884c\u8bc6\u522b\uff0c\u8bc6\u522b\u7ed3\u679c\u5411 notify_url \u53d1\u9001 HTTP POST \u8bf7\u6c42\uff0c\u8bf7\u6c42\u4f53\u662f\u56de\u8c03\u4fe1\u606f\u3002 curl -X POST \\ <notify_url> \\ -H \"Authorization: UPYUN <Operator>:<Signature>\" \\ -H \"Date: <Wed, 29 Oct 2014 02:26:58 GMT>\" \\ -H \"Content-MD5: <Content-MD5>\" \\ -d \"service=<service>\" \\ # \u5176\u4ed6\u53c2\u6570... ** \u56de\u8c03\u4fe1\u606f ** \u56de\u8c03\u4fe1\u606f\u4e3a JSON \u5b57\u7b26\u4e32\uff0c\u53c2\u6570\u540d\u53ca\u8bf4\u660e\u5982\u4e0b\uff1a \u53c2\u6570 \u7c7b\u578b \u8bf4\u660e service string \u56fe\u7247\u5b58\u50a8\u7684\u670d\u52a1\u540d status_code integer \u5904\u7406\u7ed3\u679c\u72b6\u6001\u7801\uff0c 200 \u8868\u793a\u6210\u529f\u5904\u7406\uff0c\u8be6\u89c1 \u72b6\u6001\u7801\u8868 source string \u56fe\u7247\u8def\u5f84 result json \u8bc6\u522b\u7ed3\u679c\u96c6\uff0c\u5305\u542b porn porn json \u9274\u9ec4\u7ed3\u679c\uff0c\u5305\u542b label \u3001 rate \u3001 review label integer \u56fe\u7247\u88ab\u5224\u5b9a\u7684\u5206\u7c7b\uff0c\u53ef\u80fd\u503c 0 \u3001 1 \u3001 2 \uff0c 0 \u8868\u793a\u6b63\u5e38\uff0c 1 \u8868\u793a\u8272\u60c5\uff0c 2 \u8868\u793a\u6027\u611f rate float \u56fe\u7247\u88ab\u5224\u5b9a\u4e3a\u67d0\u4e2a\u5206\u7c7b\u7684\u6982\u7387\uff0c\u4ecb\u4e8e [0-1] \u4e4b\u95f4 review boolean \u662f\u5426\u9700\u8981\u4eba\u5de5\u590d\u5ba1\uff0c true \u8868\u793a\u9700\u8981\uff0c false \u8868\u793a\u4e0d\u9700\u8981 task_id string \u4efb\u52a1\u5bf9\u5e94\u7684 task_id error string \u9519\u8bef\u4fe1\u606f\uff0c\u7a7a\u5b57\u7b26\u4e32\u8868\u793a\u65e0\u9519\u8bef\u4fe1\u606f ** \u56de\u8c03\u7b7e\u540d ** Authorization \u8be6\u89c1 \u7b7e\u540d\u8ba4\u8bc1 \u3002 ** \u4e3e\u4f8b ** { \"service\": \"upyun-temp\", \"status_code\": 200, \"source\": \"upyun.jpg\", \"result\": { \"porn\": { \"label\": 0, \"rate\": 0.9833183288574219, \"review\": false } }, \"task_id\": \"7b01610c7fa700b56cd7c80be5e08d5c\" \"error\": \"\" }","title":"\u521b\u5efa\u4efb\u52a1"},{"location":"ai/audit/#_13","text":"\u4ee5 POST \u65b9\u6cd5\u5411 http://p1.api.upyun.com/<service>/liveaudit/cancel \u63d0\u4ea4\u4efb\u52a1\u3002\u7279\u522b\u5730\uff0c <service> \u9700\u66ff\u6362\u4e3a\u5177\u4f53\u7684\u670d\u52a1\u540d\u3002 curl -X POST \\ http://p1.api.upyun.com/<service>/liveaudit/cancel \\ -H \"Authorization: UPYUN <Operator>:<Signature>\" \\ -H \"Date: <Wed, 29 Oct 2014 02:26:58 GMT>\" \\ -H \"Content-MD5: <Content-MD5>\" \\ -d '{\"service\": <service>, \"task_id\": <task_id>}' ** \u8ba4\u8bc1\u9274\u6743 ** Authorization \u8be6\u89c1 \u7b7e\u540d\u8ba4\u8bc1 \u3002 ** \u8bf7\u6c42\u53c2\u6570 ** \u53c2\u6570 \u7c7b\u578b \u5fc5\u9009 \u8bf4\u660e service string \u662f \u56fe\u7247\u5b58\u50a8\u7684\u670d\u52a1\u540d task_id string \u662f \u4efb\u52a1 ID, \u4efb\u52a1\u521b\u5efa\u65f6\u7cfb\u7edf\u8fd4\u56de\u7684\u4efb\u52a1 ID ** \u54cd\u5e94\u4fe1\u606f ** \u4efb\u52a1\u63d0\u4ea4\u6210\u529f\uff1a\u8fd4\u56de 200 \u3002\u4f8b\u5982\uff1a {\"status\": 200} \u4efb\u52a1\u63d0\u4ea4\u5931\u8d25\uff1a\u8fd4\u56de\u76f8\u5e94\u7684\u51fa\u9519\u4fe1\u606f\uff0c\u5177\u4f53\u8bf7\u53c2\u9605\u300c \u72b6\u6001\u7801\u8868 \u300d\u3002 ** \u6ce8 ** \u5982\u679c\u7cfb\u7edf\u5bf9\u6d41\u64cd\u4f5c\u5931\u8d25\u6b21\u6570\u8fc7\u591a\uff0c\u5982\u6d41\u5df2\u7ecf\u505c\u6b62, \u4f1a\u81ea\u52a8\u89e6\u53d1\u53d6\u6d88\u64cd\u4f5c\u3002","title":"\u53d6\u6d88\u4efb\u52a1"},{"location":"ai/audit/#_14","text":"\u72b6\u6001\u7801 \u8bf4\u660e 200 \u5904\u7406\u6210\u529f 400 \u7f3a\u5931\u5fc5\u586b\u53c2\u6570\uff0cErrMissingRequiredArgument 400 \u53c2\u6570\u7c7b\u578b\u9519\u8bef\uff0cErrType 400 interval \u53c2\u6570\u9519\u8bef\uff0cErrInterval 403 \u4efb\u52a1\u5df2\u5b58\u5728\uff0cErrRepeat 404 \u6587\u4ef6\u4e0d\u5b58\u5728/\u76f4\u64ad\u6d41\u4e0d\u5b58\u5728/\u4efb\u52a1\u4e0d\u5b58\u5728 405 \u8bf7\u6c42\u65b9\u6cd5\u4e0d\u5141\u8bb8 413 \u6587\u4ef6\u5927\u5c0f\u8d85\u8fc7 10M 415 \u6587\u4ef6\u4e0d\u662f\u56fe\u7247 5xx \u670d\u52a1\u7aef\u9519\u8bef\u3002\u5982\u9047\u6b64\u7c7b\u9519\u8bef\uff0c\u8bf7\u53cd\u9988\u7ed9 \u552e\u540e \u6216\u60a8\u7684\u5546\u52a1\u7ecf\u7406","title":"\u72b6\u6001\u7801\u8868"},{"location":"ai/audit/#_15","text":"\u4ece\u67d0\u4e1a\u52a1\u7cfb\u7edf\u968f\u673a\u62bd\u53d6 24 \u4e07\u5f20\u56fe\u7247\uff0c\u5148\u8fdb\u884c\u673a\u5668\u5ba1\u6838\uff0c\u518d\u5bf9\u7ed3\u679c\u8fdb\u884c\u4eba\u5de5\u590d\u67e5\u4e24\u904d\uff0c\u6700\u7ec8\u786e\u5b9a\u51c6\u786e\u7387\u662f 99.68%\u3002\u5373 99.68% \u7684\u673a\u5668\u5224\u65ad\u662f\u51c6\u786e\u7684\uff0c\u7c7b\u4f3c\u4e8e\u4eba\u5de5\u5ba1\u6838\u7684\u51c6\u786e\u7387\uff0c\u53ef\u4ee5\u4ee3\u66ff\u4eba\u5de5\u8fdb\u884c\u5ba1\u6838\u3002","title":"\u51c6\u786e\u7387"},{"location":"ai/audit/#_16","text":"\u8bc6\u522b\u8272\u60c5\u3001\u6027\u611f\u3001\u6b63\u5e38\u5185\u5bb9\u3002\u5bf9\u4e8e\u4e0d\u786e\u5b9a\u5185\u5bb9\uff0c\u4f7f\u7528 review\uff1atrue \u8868\u793a\u3002","title":"\u8272\u60c5\u8bc6\u522b"},{"location":"ai/audit/#_17","text":"\u5982\u679c\u662f\u65b0\u589e\u56fe\u7247\uff0c\u53ef\u4ee5\u4f7f\u7528 \u4e0a\u4f20\u9884\u5904\u7406 \u63a5\u53e3\uff0c\u628a\u56fe\u7247\u4e0a\u4f20\u81f3\u53c8\u62cd\u4e91\u5b58\u50a8\u7684\u540c\u65f6\uff0c\u8fdb\u884c\u9274\u9ec4\u3002 \u5982\u679c\u56fe\u7247\u5df2\u7ecf\u5b58\u5728\u53c8\u62cd\u4e91\u5b58\u50a8\uff0c\u53ef\u4ee5\u4f7f\u7528 \u76f4\u63a5\u5904\u7406 \u63a5\u53e3\uff0c\u8fdb\u884c\u9274\u9ec4\u3002","title":"\u56fe\u7247"},{"location":"ai/audit/#_18","text":"\u5982\u679c\u662f\u65b0\u589e\u89c6\u9891\uff0c\u53ef\u4ee5\u4f7f\u7528 \u4e0a\u4f20\u9884\u5904\u7406 \u63a5\u53e3\uff0c\u628a\u89c6\u9891\u4e0a\u4f20\u81f3\u53c8\u62cd\u4e91\u5b58\u50a8\u7684\u540c\u65f6\uff0c\u8fdb\u884c\u9274\u9ec4\u3002 \u5982\u679c\u89c6\u9891\u5df2\u7ecf\u5b58\u5728\u53c8\u62cd\u4e91\u5b58\u50a8 \uff0c\u53ef\u4ee5\u4f7f\u7528 \u76f4\u63a5\u5904\u7406 \u63a5\u53e3\uff0c\u8fdb\u884c\u9274\u9ec4\u3002 \u7cfb\u7edf\u6309\u95f4\u9694\uff08 interval \uff09\u5bf9\u70b9\u64ad\u8fdb\u884c\u622a\u56fe\uff08\u5173\u952e\u5e27\u63d0\u53d6\uff09\uff0c\u7136\u540e\u5bf9\u622a\u56fe\u8fdb\u884c\u9274\u9ec4\u3002\u9ed8\u8ba4\u95f4\u9694\u662f 6s\u3002\u5982\u679c\u89c6\u9891\u662f\u9ad8\u654f\u5185\u5bb9\uff0c\u95f4\u9694\u53ef\u4ee5\u8bbe\u7f6e\u7684\u66f4\u5c0f\u3002 \u9274\u9ec4\u7ed3\u679c\u4e2d\u6709\u622a\u56fe\u65f6\u95f4\u70b9\u4fe1\u606f\uff0c\u5b83\u53ef\u4ee5\u5e2e\u52a9\u5b9a\u4f4d\u8fdd\u89c4\u5185\u5bb9\u7684\u4f4d\u7f6e\uff0c\u548c\u67e5\u770b\u8bc6\u522b\u5185\u5bb9\u7684\u4f4d\u7f6e\u3002","title":"\u89c6\u9891\u70b9\u64ad"},{"location":"ai/audit/#_19","text":"\u6839\u636e\u76f4\u64ad\u7684\u7279\u6027\uff0c\u4e3a\u89c6\u9891\u76f4\u64ad\u8bbe\u8ba1\u4e86\u4e13\u95e8\u7684\u63a5\u53e3\uff0c\u5305\u62ec \u521b\u5efa\u4efb\u52a1 \u63a5\u53e3\u548c \u53d6\u6d88\u4efb\u52a1 \u63a5\u53e3\u3002 \u7cfb\u7edf\u6309\u95f4\u9694\uff08 interval \uff09\u5bf9\u76f4\u64ad\u6d41\u8fdb\u884c\u622a\u56fe\uff08\u5173\u952e\u5e27\u63d0\u53d6\uff09\uff0c\u7136\u540e\u5bf9\u622a\u56fe\u8fdb\u884c\u9274\u9ec4\u3002\u9ed8\u8ba4\u95f4\u9694\u662f 6s\u3002\u5982\u679c\u6d41\u662f\u9ad8\u654f\u5185\u5bb9\uff0c\u95f4\u9694\u53ef\u4ee5\u8bbe\u7f6e\u7684\u66f4\u5c0f\u3002 \u6ca1\u6709\u4efb\u52a1\u67e5\u8be2\u63a5\u53e3\uff0c\u9700\u8981\u5ba2\u6237\u7aef\u8bb0\u5f55\u76f4\u64ad\u6d41\u4e0e\u4efb\u52a1\uff08 task_id \uff09\u7684\u5173\u7cfb\u3002 \u5982\u6709\u7591\u95ee\u8bf7 \u8054\u7cfb\u6211\u4eec","title":"\u89c6\u9891\u76f4\u64ad"},{"location":"ai/audit_nostorage/","text":"\u5feb\u901f\u5165\u95e8 \u00b6 \u5185\u5bb9\u8bc6\u522b(\u65e0\u5b58\u50a8)\u662f\u76f4\u63a5\u628a\u5185\u5bb9\u63d0\u4ea4\u7ed9\u5e73\u53f0\uff0c\u63d0\u4ea4\u65b9\u5f0f\u53ef\u4ee5\u662f\u5185\u5bb9\u672c\u8eab\u6216 URL\uff0c\u5e73\u53f0\u5904\u7406\u5b8c\u6210\u540e\u8fd4\u56de\u7ed3\u679c\uff0c\u4e0d\u4fdd\u7559\u6570\u636e\u3002\u60a8\u5728\u4f7f\u7528\u5b83\u4e4b\u524d\uff0c\u8bf7\u786e\u4fdd\u60a8\u5df2\u7ecf\u6ce8\u518c\u53c8\u62cd\u4e91\u8d26\u53f7\u5e76\u5b8c\u6210\u5b9e\u540d\u9a8c\u8bc1\uff0c\u8bf7\u786e\u4fdd\u60a8\u5df2\u7ecf \u5f00\u901a\u5185\u5bb9\u8bc6\u522b\u670d\u52a1 \u3002 \u670d\u52a1\u9700\u8981\u6536\u8d39\uff0c\u53ef\u4ee5\u514d\u8d39\u8bd5\u7528\uff0c\u8be6\u60c5\u656c\u8bf7 \u8054\u7cfb\u5546\u52a1 \u3002 \u56fe\u7247\u8bc6\u522b(\u56fe\u7247\u5185\u5bb9) \u00b6 \u4e0a\u4f20\u56fe\u7247\u5185\u5bb9\uff0c\u8fdb\u884c\u8bc6\u522b\u3002 act=porn \u8868\u793a\u8272\u60c5\u8bc6\u522b\uff0c act=political \u8868\u793a\u6d89\u653f\u8bc6\u522b\u3002 \u8bf7\u6c42 \u00b6 \u8bf7\u6c42\u8bed\u6cd5 POST /image/bin/check?act=<act> HTTP/1.1 Host: banma.api.upyun.com Date: GMT Date Authorization: UPYUN <ClientKey>:<Signature> Content-Type: <\u56fe\u7247\u5185\u5bb9\u7c7b\u578b\uff0c\u5fc5\u586b> [Image Content...] ** \u7b7e\u540d\u8ba4\u8bc1 ** Authorization \u8be6\u89c1 \u7b7e\u540d\u8ba4\u8bc1 \u3002 \u54cd\u5e94 \u00b6 \u54cd\u5e94\u53c2\u6570\u662f JSON \u5b57\u7b26\u4e32\uff0c\u53c2\u6570\u540d\u53ca\u8bf4\u660e\u5982\u4e0b\uff1a \u53c2\u6570 \u7c7b\u578b \u8bf4\u660e status_code integer \u5904\u7406\u7ed3\u679c\u72b6\u6001\u7801\uff0c 200 \u8868\u793a\u6210\u529f\u5904\u7406 error string \u9519\u8bef\u4fe1\u606f\uff0c\u7a7a\u5b57\u7b26\u4e32\u8868\u793a\u65e0\u9519\u8bef\u4fe1\u606f porn json \u8272\u60c5\u8bc6\u522b\u7ed3\u679c porn.scores list \u5404\u4e2a\u5206\u7c7b\u53ca\u6982\u7387, \u4ece\u5de6\u81f3\u53f3\u4f9d\u6b21\u662f \u6b63\u5e38\u6982\u7387 \u3001 \u8272\u60c5\u6982\u7387 \u3001 \u6027\u611f\u6982\u7387 porn.label integer \u63a8\u8350\u5206\u7c7b\uff0c\u53ef\u80fd\u503c 0 \u3001 1 \u3001 2 \uff0c 0 \u8868\u793a\u6b63\u5e38\uff0c 1 \u8868\u793a\u8272\u60c5\uff0c 2 \u8868\u793a\u6027\u611f porn.rate float \u63a8\u8350\u5206\u7c7b\u7684\u6982\u7387 porn.review bool \u662f\u5426\u9700\u8981\u4eba\u5de5\u5ba1\u6838 political json \u6d89\u653f\u8bc6\u522b\u7ed3\u679c political.label integer \u5206\u7c7b, \u53ef\u80fd\u503c 100 , 101 , 100 \u8868\u793a\u6b63\u5e38, 101 \u8868\u793a\u6d89\u653f political.name string \u56fe\u7247\u4e2d\u51fa\u73b0\u7684\u653f\u6cbb\u4eba\u7269\u59d3\u540d political.similarity float \u76f8\u4f3c\u5ea6 \u4e3e\u4f8b \u00b6 \u8bf7\u6c42\u793a\u4f8b POST /image/bin/check?act=porn HTTP/1.1 Host: banma.api.upyun.com Date: Thu, 12 Oct 2017 07:32:34 GMT Content-Type: image/jpeg Authorization: UPYUN 2GO7K6NCPInWZqvJewohbDH5jmtaBY0x:mW7gtK0PRvhR0Mzn/x6RSAbh3cg= Content-Length: 447330 [Image Content...] \u54cd\u5e94\u793a\u4f8b HTTP/1.1 200 OK Server: marco/1.8 Content-Type: application/json Content-Length: 163 Date: Thu, 12 Oct 2017 07:32:29 GMT {\"status_code\":200,\"error\":\"\",\"porn\":{\"scores\":[0.999045193195343,0.00015256137703545392,0.0008022452238947153],\"rate\":0.999045193195343,\"label\":0,\"review\":false}} \u56fe\u7247\u8bc6\u522b(\u56fe\u7247 URL) \u00b6 \u63d0\u4ea4\u56fe\u7247 URL\uff0c\u8fdb\u884c\u8bc6\u522b\u3002 act=porn \u8868\u793a\u8272\u60c5\u8bc6\u522b\uff0c act=political \u8868\u793a\u6d89\u653f\u8bc6\u522b\u3002 \u8bf7\u6c42 \u00b6 \u8bf7\u6c42\u8bed\u6cd5 POST /image/url/check?act=<act> HTTP/1.1 Host: banma.api.upyun.com Date: GMT Date Authorization: UPYUN <ClientKey>:<Signature> Content-Type: application/json {\"url\": \"<\u56fe\u7247\u7684\u7edd\u5bf9\u8def\u5f84>\"} ** \u7b7e\u540d\u8ba4\u8bc1 ** Authorization \u8be6\u89c1 \u7b7e\u540d\u8ba4\u8bc1 \u3002 \u8bf7\u6c42\u53c2\u6570 \u53c2\u6570 \u7c7b\u578b \u5fc5\u9009 \u8bf4\u660e url string \u662f \u56fe\u7247\u7684 URL \u54cd\u5e94 \u00b6 \u54cd\u5e94\u53c2\u6570\u662f JSON \u5b57\u7b26\u4e32\uff0c\u53c2\u6570\u540d\u53ca\u8bf4\u660e\u5982\u4e0b\uff1a \u53c2\u6570 \u7c7b\u578b \u8bf4\u660e status_code integer \u5904\u7406\u7ed3\u679c\u72b6\u6001\u7801\uff0c 200 \u8868\u793a\u6210\u529f\u5904\u7406 error string \u9519\u8bef\u4fe1\u606f\uff0c\u7a7a\u5b57\u7b26\u4e32\u8868\u793a\u65e0\u9519\u8bef\u4fe1\u606f porn json \u8272\u60c5\u8bc6\u522b\u7ed3\u679c porn.scores list \u5404\u4e2a\u5206\u7c7b\u53ca\u6982\u7387, \u4ece\u5de6\u81f3\u53f3\u4f9d\u6b21\u662f \u6b63\u5e38\u6982\u7387 \u3001 \u8272\u60c5\u6982\u7387 \u3001 \u6027\u611f\u6982\u7387 porn.label integer \u63a8\u8350\u5206\u7c7b\uff0c\u53ef\u80fd\u503c 0 \u3001 1 \u3001 2 \uff0c 0 \u8868\u793a\u6b63\u5e38\uff0c 1 \u8868\u793a\u8272\u60c5\uff0c 2 \u8868\u793a\u6027\u611f porn.rate float \u63a8\u8350\u5206\u7c7b\u7684\u6982\u7387 porn.review bool \u662f\u5426\u9700\u8981\u4eba\u5de5\u5ba1\u6838 political json \u6d89\u653f\u8bc6\u522b\u7ed3\u679c political.label integer \u5206\u7c7b, \u53ef\u80fd\u503c 100 , 101 , 100 \u8868\u793a\u6b63\u5e38, 101 \u8868\u793a\u6d89\u653f political.name string \u56fe\u7247\u4e2d\u51fa\u73b0\u7684\u653f\u6cbb\u4eba\u7269\u59d3\u540d political.similarity float \u76f8\u4f3c\u5ea6 \u4e3e\u4f8b \u00b6 \u8bf7\u6c42\u793a\u4f8b POST /image/url/check?act=porn HTTP/1.1 Host: banma.api.upyun.com Date: Thu, 12 Oct 2017 06:57:50 GMT Authorization: UPYUN 2GO7K6NCPInWZqvJewohbDH5jmtaBY0x:CKhrW8SSU0ctnmavfnRs1s1NFBY= Content-Length: 50 Content-Type: application/json {\"url\": \"http://uprocess.b0.upaiyun.com/demo.jpg\"} \u54cd\u5e94\u793a\u4f8b HTTP/1.1 200 OK Server: marco/1.8 Content-Type: application/json Content-Length: 164 Date: Thu, 12 Oct 2017 06:57:45 GMT {\"status_code\":200,\"error\":\"\",\"porn\":{\"scores\":[0.9996986389160156,0.0001312318054260686,0.0001701978617347777],\"rate\":0.9996986389160156,\"label\":0,\"review\":false}} \u70b9\u64ad\u8bc6\u522b(\u70b9\u64ad URL) \u00b6 \u63d0\u4ea4\u89c6\u9891\u70b9\u64ad URL\uff0c\u8fdb\u884c\u8bc6\u522b\u3002\u8bc6\u522b\u662f\u5f02\u6b65\u8fdb\u884c\u7684\uff0c\u6536\u5230\u8bf7\u6c42\u540e\uff0c\u4f1a\u5148\u8fd4\u56de\u4efb\u52a1\u7684 ID\uff0c\u5f85\u7ed3\u679c\u51fa\u6765\u540e\uff0c\u56de\u8c03\u8fd4\u56de\u8bc6\u522b\u7ed3\u679c\u3002 act=porn \u8868\u793a\u8272\u60c5\u8bc6\u522b\u3002 \u8bf7\u6c42 \u00b6 \u8bf7\u6c42\u8bed\u6cd5 POST /video/check?act=porn HTTP/1.1 Host: banma.api.upyun.com Date: GMT Date Authorization: UPYUN <ClientKey>:<Signature> Content-Type: application/json {\"url\": \"<\u89c6\u9891\u70b9\u64ad\u7684\u7edd\u5bf9\u8def\u5f84>\", \"notify_url\": \"<\u56de\u8c03\u5730\u5740>\"} ** \u7b7e\u540d\u8ba4\u8bc1 ** Authorization \u8be6\u89c1 \u7b7e\u540d\u8ba4\u8bc1 \u3002 \u8bf7\u6c42\u53c2\u6570 \u53c2\u6570 \u7c7b\u578b \u5fc5\u9009 \u8bf4\u660e url string \u662f \u70b9\u64ad\u7684 URL notify_url string \u662f \u56de\u8c03\u5730\u5740, \u8bc6\u522b\u7ed3\u679c\u5c06\u4ee5 POST \u8bf7\u6c42\u53d1\u5f80\u8be5\u5730\u5740 interval integer \u5426 \u622a\u56fe\u95f4\u9694, \u9ed8\u8ba4\u6bcf 10s \u4ece\u70b9\u64ad\u4e2d\u53d6\u4e00\u5e27 \u54cd\u5e94 \u00b6 \u54cd\u5e94\u53c2\u6570\u662f JSON \u5b57\u7b26\u4e32\uff0c\u53c2\u6570\u540d\u53ca\u8bf4\u660e\u5982\u4e0b\uff1a \u53c2\u6570 \u7c7b\u578b \u8bf4\u660e task_id string \u4efb\u52a1 ID \u56de\u8c03 \u00b6 \u4efb\u52a1\u5904\u7406\u5b8c\u6210\u540e\uff0c\u5411 notify_url \u53d1\u9001 HTTP POST \u8bf7\u6c42\uff0c\u8bf7\u6c42\u4f53\u662f\u56de\u8c03\u4fe1\u606f\u3002 curl -X POST \\ <notify_url> \\ -H \"Authorization: UPYUN <Operator>:<Signature>\" \\ -H \"Date: <Wed, 29 Oct 2014 02:26:58 GMT>\" \\ -H \"Content-MD5: <Content-MD5>\" \\ -d \"service=<service>\" \\ # \u5176\u4ed6\u53c2\u6570... ** \u56de\u8c03\u53c2\u6570 ** \u56de\u8c03\u53c2\u6570\u4e3a JSON \u5b57\u7b26\u4e32\uff0c\u53c2\u6570\u540d\u53ca\u8bf4\u660e\u5982\u4e0b\uff1a \u53c2\u6570 \u7c7b\u578b \u8bf4\u660e task_id string \u4efb\u52a1\u5bf9\u5e94\u7684 task_id status_code integer \u5904\u7406\u7ed3\u679c\u72b6\u6001\u7801\uff0c 200 \u8868\u793a\u6210\u529f\u5904\u7406\uff0c\u8be6\u89c1 \u72b6\u6001\u7801\u8868 service string \u89c6\u9891\u70b9\u64ad\u6240\u5728\u7684\u670d\u52a1\u540d source string \u622a\u56fe\u4fdd\u5b58\u8def\u5f84\uff0c\u5982\u679c\u8bf7\u6c42\u53c2\u6570\u4e2d\u672a\u8bbe\u7f6e save_as \uff0c\u4e0d\u5b58\u5728 error string \u9519\u8bef\u4fe1\u606f\uff0c\u7a7a\u5b57\u7b26\u4e32\u8868\u793a\u65e0\u9519\u8bef\u4fe1\u606f result json \u8bc6\u522b\u7ed3\u679c\u96c6\uff0c\u5305\u542b porn result.porn json \u9274\u9ec4\u7ed3\u679c\uff0c\u5305\u542b label \u3001 rate \u3001 review result.porn.label integer \u56fe\u7247\u88ab\u5224\u5b9a\u7684\u5206\u7c7b\uff0c\u53ef\u80fd\u503c 0 \u3001 1 \u3001 2 \uff0c 0 \u8868\u793a\u6b63\u5e38\uff0c 1 \u8868\u793a\u8272\u60c5\uff0c 2 \u8868\u793a\u6027\u611f result.porn.rate float \u56fe\u7247\u88ab\u5224\u5b9a\u4e3a\u67d0\u4e2a\u5206\u7c7b\u7684\u6982\u7387\uff0c\u4ecb\u4e8e [0-1] \u4e4b\u95f4 result.porn.review boolean \u662f\u5426\u9700\u8981\u4eba\u5de5\u590d\u5ba1\uff0c true \u8868\u793a\u9700\u8981\uff0c false \u8868\u793a\u4e0d\u9700\u8981 filelist json \u622a\u56fe\u96c6, \u4e3a\u6bcf\u4e2a\u65f6\u95f4\u70b9\u7684\u622a\u56fe\u5ba1\u6838\u7ed3\u679c filelist.result json \u8bc6\u522b\u7ed3\u679c\u96c6\uff0c\u5305\u542b porn filelist.result.shot_time string \u622a\u56fe\u65f6\u95f4\u70b9 filelist.result.porn json \u9274\u9ec4\u7ed3\u679c\uff0c\u5305\u542b label \u3001 rate \u3001 review filelist.result.porn.label integer \u56fe\u7247\u88ab\u5224\u5b9a\u7684\u5206\u7c7b\uff0c\u53ef\u80fd\u503c 0 \u3001 1 \u3001 2 \uff0c 0 \u8868\u793a\u6b63\u5e38\uff0c 1 \u8868\u793a\u8272\u60c5\uff0c 2 \u8868\u793a\u6027\u611f filelist.result.porn.rate float \u56fe\u7247\u88ab\u5224\u5b9a\u4e3a\u67d0\u4e2a\u5206\u7c7b\u7684\u6982\u7387\uff0c\u4ecb\u4e8e [0-1] \u4e4b\u95f4 filelist.result.porn.review boolean \u662f\u5426\u9700\u8981\u4eba\u5de5\u590d\u5ba1\uff0c true \u8868\u793a\u9700\u8981\uff0c false \u8868\u793a\u4e0d\u9700\u8981 \u4e3e\u4f8b \u00b6 \u8bf7\u6c42\u793a\u4f8b POST /video/check HTTP/1.1 Host: banma.api.upyun.com Date: Thu, 12 Oct 2017 06:57:51 GMT Authorization: UPYUN 2GO7K6NCPInWZqvJewohbDH5jmtaBY0x:qXT2W1ROzdO3WXVM2nlLguc370k= Content-Length: 109 Content-Type: application/json {\"url\": \"http://uprocess.b0.upaiyun.com/demo/short_video/UPYUN.mp4\", \"notify_url\": \"http://httpbin.org/post\"} \u54cd\u5e94\u793a\u4f8b HTTP/1.1 200 OK Server: marco/1.8 Content-Type: application/json Content-Length: 65 Date: Thu, 12 Oct 2017 06:57:45 GMT {\"status_code\":200,\"task_id\":\"AIYgOOTk2OMav3iS64zPSS1Js0FzkT95\"} \u56de\u8c03\u793a\u4f8b POST <notify_url> HTTP/1.1 Content-Type: application/json Date: Thu, 12 Oct 2017 04:06:43 GMT Content-Md5: d2acd6c01e1de9afa203b585f614c0cf Content-Length: 1775 Authorization: UPYUN 2GO7K6NCPInWZqvJewohbDH5jmtaBY0x:P8qmASfkbtM/6CMo1WlqW59W9+g= {\"error\":\"\",\"filelist\":[{\"result\":{\"porn\":{\"label\":0,\"rate\":0.9995450377464294,\"review\":false}},\"shot_time\":0},{\"result\":{\"porn\":{\"label\":0,\"rate\":0.9990586638450623,\"review\":false}},\"shot_time\":10},{\"result\":{\"porn\":{\"label\":0,\"rate\":0.9997151494026184,\"review\":false}},\"shot_time\":20},{\"result\":{\"porn\":{\"label\":0,\"rate\":0.9990173578262329,\"review\":false}},\"shot_time\":30},{\"result\":{\"porn\":{\"label\":0,\"rate\":0.9789921641349792,\"review\":false}},\"shot_time\":40},{\"result\":{\"porn\":{\"label\":0,\"rate\":0.9992973804473877,\"review\":false}},\"shot_time\":50},{\"result\":{\"porn\":{\"label\":0,\"rate\":0.9562959671020508,\"review\":false}},\"shot_time\":60},{\"result\":{\"porn\":{\"label\":0,\"rate\":0.9989614486694336,\"review\":false}},\"shot_time\":70}],\"result\":{\"porn\":{\"label\":0,\"rate\":0.9931503997908698,\"review\":false}},\"service\":\"\",\"source\":\"\",\"status_code\":200,\"task_id\":\"rDt7IaxKeQMGWVvX8YZ5MbwJtT0WuQbh\"} \u6587\u672c\u8bc6\u522b \u00b6 \u63d0\u4ea4\u6587\u672c\u5185\u5bb9\uff0c\u8fdb\u884c\u8bc6\u522b\u3002\u8bc6\u522b\u5305\u62ec\u8272\u60c5\u3001\u5e7f\u544a\u3001\u66b4\u6050\u7b49\uff0c act=spam \u8868\u793a\u8fdd\u89c4\u8bc6\u522b\u3002 \u8bf7\u6c42 \u00b6 \u8bf7\u6c42\u8bed\u6cd5 POST /text/check?act=spam HTTP/1.1 Host: banma.api.upyun.com Date: GMT Date Authorization: UPYUN <ClientKey>:<Signature> Content-Type: application/json {\"text\": \"<\u6587\u672c\u5185\u5bb9>\"} ** \u7b7e\u540d\u8ba4\u8bc1 ** Authorization \u8be6\u89c1 \u7b7e\u540d\u8ba4\u8bc1 \u3002 \u8bf7\u6c42\u53c2\u6570 \u53c2\u6570 \u7c7b\u578b \u5fc5\u9009 \u8bf4\u660e text string \u662f \u6587\u672c\u5185\u5bb9\uff0cJSON \u5b57\u7b26\u4e32\uff0c\u6700\u5927\u5141\u8bb8 64k \u54cd\u5e94 \u00b6 \u54cd\u5e94\u53c2\u6570\u662f JSON \u5b57\u7b26\u4e32\uff0c\u53c2\u6570\u540d\u53ca\u8bf4\u660e\u5982\u4e0b\uff1a \u53c2\u6570 \u7c7b\u578b \u8bf4\u660e status_code integer \u5904\u7406\u7ed3\u679c\u72b6\u6001\u7801\uff0c 200 \u8868\u793a\u6210\u529f\u5904\u7406 error string \u9519\u8bef\u4fe1\u606f\uff0c\u7a7a\u5b57\u7b26\u4e32\u8868\u793a\u65e0\u9519\u8bef\u4fe1\u606f spam json \u6587\u672c\u8bc6\u522b\u7ed3\u679c spam.task_id string \u4efb\u52a1 ID spam.scores list \u5404\u4e2a\u5206\u7c7b\u53ca\u6982\u7387, \u4ece\u5de6\u81f3\u53f3\u4f9d\u6b21\u662f \u6b63\u5e38\u6982\u7387 \u3001 \u8fdd\u89c4\u6982\u7387 spam.label integer \u63a8\u8350\u5206\u7c7b\uff0c\u53ef\u80fd\u503c 0 \u3001 1 \u3001 2 \uff0c 0 \u8868\u793a\u6b63\u5e38\uff0c 1 \u8868\u793a\u8fdd\u89c4\uff0c 2 \u8868\u793a\u7591\u4f3c spam.rate float \u63a8\u8350\u5206\u7c7b\u7684\u6982\u7387 spam.review bool \u662f\u5426\u9700\u8981\u4eba\u5de5\u5ba1\u6838\uff0c true \u8868\u793a\u9700\u8981\uff0c false \u8868\u793a\u4e0d\u9700\u8981 \u4e3e\u4f8b \u00b6 \u8bf7\u6c42\u793a\u4f8b POST /text/check HTTP/1.1 Host: banma.api.upyun.com Date: Tue, 19 Sep 2017 07:47:49 GMT Authorization: UPYUN x2biJtrSOGhuYj4vzPg70nfZeLEIdmlH:Q+sPbbukYstHJprpSLsS+lnOrro= Content-Length: 30 Content-Type: application/json {\"text\": \"\u8fd9\u662f\u6b63\u5e38\u6587\u672c\"} \u54cd\u5e94\u793a\u4f8b HTTP/1.1 200 OK Server: marco/1.8 Content-Type: application/json Content-Length: 190 Date: Tue, 19 Sep 2017 07:47:50 GMT {\"status_code\": 200, error: \"\", \"spam\":{\"task_id\":\"6583350f\",\"scores\":[0.9713295698165894,0.028670458123087883],\"rate\":0.028670458123087883,\"label\":1,\"review\":false}} \u72b6\u6001\u7801\u8bf4\u660e \u00b6 \u53c2\u6570 \u7c7b\u578b 200 \u5904\u7406\u6210\u529f 400 \u8bf7\u6c42\u53c2\u6570\u9519\u8bef 401 \u8bf7\u6c42\u8ba4\u8bc1\u5931\u8d25 5xx \u670d\u52a1\u7aef\u9519\u8bef\uff0c\u8bf7\u53cd\u9988\u7ed9 \u552e\u540e \u6216\u60a8\u7684\u5546\u52a1\u7ecf\u7406 Python \u6f14\u793a \u00b6 import base64 import datetime import hashlib import hmac import requests def b64(s): return base64.b64encode(s.encode()).decode() # \u65f6\u95f4\u683c\u5f0f\u5316 def httpdate_rfc1123(dt=None): dt = dt or datetime.datetime.utcnow() return datetime.datetime.utcnow().strftime('%a, %d %b %Y %H:%M:%S GMT') # \u7b7e\u540d def sign(client_key, client_secret, method, uri, date): signarr = [method, uri, date] signstr = '&'.join(signarr) signstr = base64.b64encode( hmac.new(client_secret.encode(), signstr.encode(), digestmod=hashlib.sha1).digest() ).decode() return 'UPYUN %s:%s' % (client_key, signstr) # \u5bc6\u94a5 client_key = '2GO7K6NCPInWZqvJewohbDH5jmt' client_secret = 'BKQrAn5OjgG3HVlkJo78DbyiuL' # \u56fe\u7247 URL \u8fdb\u884c\u8272\u60c5\u8bc6\u522b def image_check(): headers = {} headers['Date'] = httpdate_rfc1123() headers['Authorization'] = sign(client_key, client_secret, 'POST', '/image/url/check', headers['Date']) data = { 'url': 'http://uprocess.b0.upaiyun.com/demo.jpg' } resp = requests.post('http://banma.api.upyun.com/image/url/check', headers=headers, json=data) print(resp.status_code, resp.text) # \u89c6\u9891\u70b9\u64ad URL \u8fdb\u884c\u8272\u60c5\u8bc6\u522b def video_check(): headers = {} headers['Date'] = httpdate_rfc1123() headers['Authorization'] = sign(client_key, client_secret, 'POST', '/video/check', headers['Date']) data = { 'url': 'http://uprocess.b0.upaiyun.com/demo/short_video/UPYUN.mp4', 'notify_url': 'http://httpbin.org/post' } resp = requests.post('http://banma.api.upyun.com/video/check', headers=headers, json=data) print(resp.status_code, resp.text) # \u6587\u672c\u8bc6\u522b def text_check(): # \u6587\u672c\u5ba1\u6838 headers = {} headers['Date'] = httpdate_rfc1123() headers['Authorization'] = sign(client_key, client_secret, 'POST', '/text/check', headers['Date']) data = { 'text': '\u8fd9\u91cc\u653e\u6587\u672c\u5185\u5bb9' } resp = requests.post('http://banma.api.upyun.com/text/check', headers=headers, json=data) print(resp.status_code, resp.text) # \u8c03\u7528 def main(): image_check() video_check() text_check() if __name__ == '__main__': main()","title":"\u5185\u5bb9\u8bc6\u522b(\u65e0\u5b58\u50a8)"},{"location":"ai/audit_nostorage/#_1","text":"\u5185\u5bb9\u8bc6\u522b(\u65e0\u5b58\u50a8)\u662f\u76f4\u63a5\u628a\u5185\u5bb9\u63d0\u4ea4\u7ed9\u5e73\u53f0\uff0c\u63d0\u4ea4\u65b9\u5f0f\u53ef\u4ee5\u662f\u5185\u5bb9\u672c\u8eab\u6216 URL\uff0c\u5e73\u53f0\u5904\u7406\u5b8c\u6210\u540e\u8fd4\u56de\u7ed3\u679c\uff0c\u4e0d\u4fdd\u7559\u6570\u636e\u3002\u60a8\u5728\u4f7f\u7528\u5b83\u4e4b\u524d\uff0c\u8bf7\u786e\u4fdd\u60a8\u5df2\u7ecf\u6ce8\u518c\u53c8\u62cd\u4e91\u8d26\u53f7\u5e76\u5b8c\u6210\u5b9e\u540d\u9a8c\u8bc1\uff0c\u8bf7\u786e\u4fdd\u60a8\u5df2\u7ecf \u5f00\u901a\u5185\u5bb9\u8bc6\u522b\u670d\u52a1 \u3002 \u670d\u52a1\u9700\u8981\u6536\u8d39\uff0c\u53ef\u4ee5\u514d\u8d39\u8bd5\u7528\uff0c\u8be6\u60c5\u656c\u8bf7 \u8054\u7cfb\u5546\u52a1 \u3002","title":"\u5feb\u901f\u5165\u95e8"},{"location":"ai/audit_nostorage/#_2","text":"\u4e0a\u4f20\u56fe\u7247\u5185\u5bb9\uff0c\u8fdb\u884c\u8bc6\u522b\u3002 act=porn \u8868\u793a\u8272\u60c5\u8bc6\u522b\uff0c act=political \u8868\u793a\u6d89\u653f\u8bc6\u522b\u3002","title":"\u56fe\u7247\u8bc6\u522b(\u56fe\u7247\u5185\u5bb9)"},{"location":"ai/audit_nostorage/#_3","text":"\u8bf7\u6c42\u8bed\u6cd5 POST /image/bin/check?act=<act> HTTP/1.1 Host: banma.api.upyun.com Date: GMT Date Authorization: UPYUN <ClientKey>:<Signature> Content-Type: <\u56fe\u7247\u5185\u5bb9\u7c7b\u578b\uff0c\u5fc5\u586b> [Image Content...] ** \u7b7e\u540d\u8ba4\u8bc1 ** Authorization \u8be6\u89c1 \u7b7e\u540d\u8ba4\u8bc1 \u3002","title":"\u8bf7\u6c42"},{"location":"ai/audit_nostorage/#_4","text":"\u54cd\u5e94\u53c2\u6570\u662f JSON \u5b57\u7b26\u4e32\uff0c\u53c2\u6570\u540d\u53ca\u8bf4\u660e\u5982\u4e0b\uff1a \u53c2\u6570 \u7c7b\u578b \u8bf4\u660e status_code integer \u5904\u7406\u7ed3\u679c\u72b6\u6001\u7801\uff0c 200 \u8868\u793a\u6210\u529f\u5904\u7406 error string \u9519\u8bef\u4fe1\u606f\uff0c\u7a7a\u5b57\u7b26\u4e32\u8868\u793a\u65e0\u9519\u8bef\u4fe1\u606f porn json \u8272\u60c5\u8bc6\u522b\u7ed3\u679c porn.scores list \u5404\u4e2a\u5206\u7c7b\u53ca\u6982\u7387, \u4ece\u5de6\u81f3\u53f3\u4f9d\u6b21\u662f \u6b63\u5e38\u6982\u7387 \u3001 \u8272\u60c5\u6982\u7387 \u3001 \u6027\u611f\u6982\u7387 porn.label integer \u63a8\u8350\u5206\u7c7b\uff0c\u53ef\u80fd\u503c 0 \u3001 1 \u3001 2 \uff0c 0 \u8868\u793a\u6b63\u5e38\uff0c 1 \u8868\u793a\u8272\u60c5\uff0c 2 \u8868\u793a\u6027\u611f porn.rate float \u63a8\u8350\u5206\u7c7b\u7684\u6982\u7387 porn.review bool \u662f\u5426\u9700\u8981\u4eba\u5de5\u5ba1\u6838 political json \u6d89\u653f\u8bc6\u522b\u7ed3\u679c political.label integer \u5206\u7c7b, \u53ef\u80fd\u503c 100 , 101 , 100 \u8868\u793a\u6b63\u5e38, 101 \u8868\u793a\u6d89\u653f political.name string \u56fe\u7247\u4e2d\u51fa\u73b0\u7684\u653f\u6cbb\u4eba\u7269\u59d3\u540d political.similarity float \u76f8\u4f3c\u5ea6","title":"\u54cd\u5e94"},{"location":"ai/audit_nostorage/#_5","text":"\u8bf7\u6c42\u793a\u4f8b POST /image/bin/check?act=porn HTTP/1.1 Host: banma.api.upyun.com Date: Thu, 12 Oct 2017 07:32:34 GMT Content-Type: image/jpeg Authorization: UPYUN 2GO7K6NCPInWZqvJewohbDH5jmtaBY0x:mW7gtK0PRvhR0Mzn/x6RSAbh3cg= Content-Length: 447330 [Image Content...] \u54cd\u5e94\u793a\u4f8b HTTP/1.1 200 OK Server: marco/1.8 Content-Type: application/json Content-Length: 163 Date: Thu, 12 Oct 2017 07:32:29 GMT {\"status_code\":200,\"error\":\"\",\"porn\":{\"scores\":[0.999045193195343,0.00015256137703545392,0.0008022452238947153],\"rate\":0.999045193195343,\"label\":0,\"review\":false}}","title":"\u4e3e\u4f8b"},{"location":"ai/audit_nostorage/#url","text":"\u63d0\u4ea4\u56fe\u7247 URL\uff0c\u8fdb\u884c\u8bc6\u522b\u3002 act=porn \u8868\u793a\u8272\u60c5\u8bc6\u522b\uff0c act=political \u8868\u793a\u6d89\u653f\u8bc6\u522b\u3002","title":"\u56fe\u7247\u8bc6\u522b(\u56fe\u7247 URL)"},{"location":"ai/audit_nostorage/#_6","text":"\u8bf7\u6c42\u8bed\u6cd5 POST /image/url/check?act=<act> HTTP/1.1 Host: banma.api.upyun.com Date: GMT Date Authorization: UPYUN <ClientKey>:<Signature> Content-Type: application/json {\"url\": \"<\u56fe\u7247\u7684\u7edd\u5bf9\u8def\u5f84>\"} ** \u7b7e\u540d\u8ba4\u8bc1 ** Authorization \u8be6\u89c1 \u7b7e\u540d\u8ba4\u8bc1 \u3002 \u8bf7\u6c42\u53c2\u6570 \u53c2\u6570 \u7c7b\u578b \u5fc5\u9009 \u8bf4\u660e url string \u662f \u56fe\u7247\u7684 URL","title":"\u8bf7\u6c42"},{"location":"ai/audit_nostorage/#_7","text":"\u54cd\u5e94\u53c2\u6570\u662f JSON \u5b57\u7b26\u4e32\uff0c\u53c2\u6570\u540d\u53ca\u8bf4\u660e\u5982\u4e0b\uff1a \u53c2\u6570 \u7c7b\u578b \u8bf4\u660e status_code integer \u5904\u7406\u7ed3\u679c\u72b6\u6001\u7801\uff0c 200 \u8868\u793a\u6210\u529f\u5904\u7406 error string \u9519\u8bef\u4fe1\u606f\uff0c\u7a7a\u5b57\u7b26\u4e32\u8868\u793a\u65e0\u9519\u8bef\u4fe1\u606f porn json \u8272\u60c5\u8bc6\u522b\u7ed3\u679c porn.scores list \u5404\u4e2a\u5206\u7c7b\u53ca\u6982\u7387, \u4ece\u5de6\u81f3\u53f3\u4f9d\u6b21\u662f \u6b63\u5e38\u6982\u7387 \u3001 \u8272\u60c5\u6982\u7387 \u3001 \u6027\u611f\u6982\u7387 porn.label integer \u63a8\u8350\u5206\u7c7b\uff0c\u53ef\u80fd\u503c 0 \u3001 1 \u3001 2 \uff0c 0 \u8868\u793a\u6b63\u5e38\uff0c 1 \u8868\u793a\u8272\u60c5\uff0c 2 \u8868\u793a\u6027\u611f porn.rate float \u63a8\u8350\u5206\u7c7b\u7684\u6982\u7387 porn.review bool \u662f\u5426\u9700\u8981\u4eba\u5de5\u5ba1\u6838 political json \u6d89\u653f\u8bc6\u522b\u7ed3\u679c political.label integer \u5206\u7c7b, \u53ef\u80fd\u503c 100 , 101 , 100 \u8868\u793a\u6b63\u5e38, 101 \u8868\u793a\u6d89\u653f political.name string \u56fe\u7247\u4e2d\u51fa\u73b0\u7684\u653f\u6cbb\u4eba\u7269\u59d3\u540d political.similarity float \u76f8\u4f3c\u5ea6","title":"\u54cd\u5e94"},{"location":"ai/audit_nostorage/#_8","text":"\u8bf7\u6c42\u793a\u4f8b POST /image/url/check?act=porn HTTP/1.1 Host: banma.api.upyun.com Date: Thu, 12 Oct 2017 06:57:50 GMT Authorization: UPYUN 2GO7K6NCPInWZqvJewohbDH5jmtaBY0x:CKhrW8SSU0ctnmavfnRs1s1NFBY= Content-Length: 50 Content-Type: application/json {\"url\": \"http://uprocess.b0.upaiyun.com/demo.jpg\"} \u54cd\u5e94\u793a\u4f8b HTTP/1.1 200 OK Server: marco/1.8 Content-Type: application/json Content-Length: 164 Date: Thu, 12 Oct 2017 06:57:45 GMT {\"status_code\":200,\"error\":\"\",\"porn\":{\"scores\":[0.9996986389160156,0.0001312318054260686,0.0001701978617347777],\"rate\":0.9996986389160156,\"label\":0,\"review\":false}}","title":"\u4e3e\u4f8b"},{"location":"ai/audit_nostorage/#url_1","text":"\u63d0\u4ea4\u89c6\u9891\u70b9\u64ad URL\uff0c\u8fdb\u884c\u8bc6\u522b\u3002\u8bc6\u522b\u662f\u5f02\u6b65\u8fdb\u884c\u7684\uff0c\u6536\u5230\u8bf7\u6c42\u540e\uff0c\u4f1a\u5148\u8fd4\u56de\u4efb\u52a1\u7684 ID\uff0c\u5f85\u7ed3\u679c\u51fa\u6765\u540e\uff0c\u56de\u8c03\u8fd4\u56de\u8bc6\u522b\u7ed3\u679c\u3002 act=porn \u8868\u793a\u8272\u60c5\u8bc6\u522b\u3002","title":"\u70b9\u64ad\u8bc6\u522b(\u70b9\u64ad URL)"},{"location":"ai/audit_nostorage/#_9","text":"\u8bf7\u6c42\u8bed\u6cd5 POST /video/check?act=porn HTTP/1.1 Host: banma.api.upyun.com Date: GMT Date Authorization: UPYUN <ClientKey>:<Signature> Content-Type: application/json {\"url\": \"<\u89c6\u9891\u70b9\u64ad\u7684\u7edd\u5bf9\u8def\u5f84>\", \"notify_url\": \"<\u56de\u8c03\u5730\u5740>\"} ** \u7b7e\u540d\u8ba4\u8bc1 ** Authorization \u8be6\u89c1 \u7b7e\u540d\u8ba4\u8bc1 \u3002 \u8bf7\u6c42\u53c2\u6570 \u53c2\u6570 \u7c7b\u578b \u5fc5\u9009 \u8bf4\u660e url string \u662f \u70b9\u64ad\u7684 URL notify_url string \u662f \u56de\u8c03\u5730\u5740, \u8bc6\u522b\u7ed3\u679c\u5c06\u4ee5 POST \u8bf7\u6c42\u53d1\u5f80\u8be5\u5730\u5740 interval integer \u5426 \u622a\u56fe\u95f4\u9694, \u9ed8\u8ba4\u6bcf 10s \u4ece\u70b9\u64ad\u4e2d\u53d6\u4e00\u5e27","title":"\u8bf7\u6c42"},{"location":"ai/audit_nostorage/#_10","text":"\u54cd\u5e94\u53c2\u6570\u662f JSON \u5b57\u7b26\u4e32\uff0c\u53c2\u6570\u540d\u53ca\u8bf4\u660e\u5982\u4e0b\uff1a \u53c2\u6570 \u7c7b\u578b \u8bf4\u660e task_id string \u4efb\u52a1 ID","title":"\u54cd\u5e94"},{"location":"ai/audit_nostorage/#_11","text":"\u4efb\u52a1\u5904\u7406\u5b8c\u6210\u540e\uff0c\u5411 notify_url \u53d1\u9001 HTTP POST \u8bf7\u6c42\uff0c\u8bf7\u6c42\u4f53\u662f\u56de\u8c03\u4fe1\u606f\u3002 curl -X POST \\ <notify_url> \\ -H \"Authorization: UPYUN <Operator>:<Signature>\" \\ -H \"Date: <Wed, 29 Oct 2014 02:26:58 GMT>\" \\ -H \"Content-MD5: <Content-MD5>\" \\ -d \"service=<service>\" \\ # \u5176\u4ed6\u53c2\u6570... ** \u56de\u8c03\u53c2\u6570 ** \u56de\u8c03\u53c2\u6570\u4e3a JSON \u5b57\u7b26\u4e32\uff0c\u53c2\u6570\u540d\u53ca\u8bf4\u660e\u5982\u4e0b\uff1a \u53c2\u6570 \u7c7b\u578b \u8bf4\u660e task_id string \u4efb\u52a1\u5bf9\u5e94\u7684 task_id status_code integer \u5904\u7406\u7ed3\u679c\u72b6\u6001\u7801\uff0c 200 \u8868\u793a\u6210\u529f\u5904\u7406\uff0c\u8be6\u89c1 \u72b6\u6001\u7801\u8868 service string \u89c6\u9891\u70b9\u64ad\u6240\u5728\u7684\u670d\u52a1\u540d source string \u622a\u56fe\u4fdd\u5b58\u8def\u5f84\uff0c\u5982\u679c\u8bf7\u6c42\u53c2\u6570\u4e2d\u672a\u8bbe\u7f6e save_as \uff0c\u4e0d\u5b58\u5728 error string \u9519\u8bef\u4fe1\u606f\uff0c\u7a7a\u5b57\u7b26\u4e32\u8868\u793a\u65e0\u9519\u8bef\u4fe1\u606f result json \u8bc6\u522b\u7ed3\u679c\u96c6\uff0c\u5305\u542b porn result.porn json \u9274\u9ec4\u7ed3\u679c\uff0c\u5305\u542b label \u3001 rate \u3001 review result.porn.label integer \u56fe\u7247\u88ab\u5224\u5b9a\u7684\u5206\u7c7b\uff0c\u53ef\u80fd\u503c 0 \u3001 1 \u3001 2 \uff0c 0 \u8868\u793a\u6b63\u5e38\uff0c 1 \u8868\u793a\u8272\u60c5\uff0c 2 \u8868\u793a\u6027\u611f result.porn.rate float \u56fe\u7247\u88ab\u5224\u5b9a\u4e3a\u67d0\u4e2a\u5206\u7c7b\u7684\u6982\u7387\uff0c\u4ecb\u4e8e [0-1] \u4e4b\u95f4 result.porn.review boolean \u662f\u5426\u9700\u8981\u4eba\u5de5\u590d\u5ba1\uff0c true \u8868\u793a\u9700\u8981\uff0c false \u8868\u793a\u4e0d\u9700\u8981 filelist json \u622a\u56fe\u96c6, \u4e3a\u6bcf\u4e2a\u65f6\u95f4\u70b9\u7684\u622a\u56fe\u5ba1\u6838\u7ed3\u679c filelist.result json \u8bc6\u522b\u7ed3\u679c\u96c6\uff0c\u5305\u542b porn filelist.result.shot_time string \u622a\u56fe\u65f6\u95f4\u70b9 filelist.result.porn json \u9274\u9ec4\u7ed3\u679c\uff0c\u5305\u542b label \u3001 rate \u3001 review filelist.result.porn.label integer \u56fe\u7247\u88ab\u5224\u5b9a\u7684\u5206\u7c7b\uff0c\u53ef\u80fd\u503c 0 \u3001 1 \u3001 2 \uff0c 0 \u8868\u793a\u6b63\u5e38\uff0c 1 \u8868\u793a\u8272\u60c5\uff0c 2 \u8868\u793a\u6027\u611f filelist.result.porn.rate float \u56fe\u7247\u88ab\u5224\u5b9a\u4e3a\u67d0\u4e2a\u5206\u7c7b\u7684\u6982\u7387\uff0c\u4ecb\u4e8e [0-1] \u4e4b\u95f4 filelist.result.porn.review boolean \u662f\u5426\u9700\u8981\u4eba\u5de5\u590d\u5ba1\uff0c true \u8868\u793a\u9700\u8981\uff0c false \u8868\u793a\u4e0d\u9700\u8981","title":"\u56de\u8c03"},{"location":"ai/audit_nostorage/#_12","text":"\u8bf7\u6c42\u793a\u4f8b POST /video/check HTTP/1.1 Host: banma.api.upyun.com Date: Thu, 12 Oct 2017 06:57:51 GMT Authorization: UPYUN 2GO7K6NCPInWZqvJewohbDH5jmtaBY0x:qXT2W1ROzdO3WXVM2nlLguc370k= Content-Length: 109 Content-Type: application/json {\"url\": \"http://uprocess.b0.upaiyun.com/demo/short_video/UPYUN.mp4\", \"notify_url\": \"http://httpbin.org/post\"} \u54cd\u5e94\u793a\u4f8b HTTP/1.1 200 OK Server: marco/1.8 Content-Type: application/json Content-Length: 65 Date: Thu, 12 Oct 2017 06:57:45 GMT {\"status_code\":200,\"task_id\":\"AIYgOOTk2OMav3iS64zPSS1Js0FzkT95\"} \u56de\u8c03\u793a\u4f8b POST <notify_url> HTTP/1.1 Content-Type: application/json Date: Thu, 12 Oct 2017 04:06:43 GMT Content-Md5: d2acd6c01e1de9afa203b585f614c0cf Content-Length: 1775 Authorization: UPYUN 2GO7K6NCPInWZqvJewohbDH5jmtaBY0x:P8qmASfkbtM/6CMo1WlqW59W9+g= {\"error\":\"\",\"filelist\":[{\"result\":{\"porn\":{\"label\":0,\"rate\":0.9995450377464294,\"review\":false}},\"shot_time\":0},{\"result\":{\"porn\":{\"label\":0,\"rate\":0.9990586638450623,\"review\":false}},\"shot_time\":10},{\"result\":{\"porn\":{\"label\":0,\"rate\":0.9997151494026184,\"review\":false}},\"shot_time\":20},{\"result\":{\"porn\":{\"label\":0,\"rate\":0.9990173578262329,\"review\":false}},\"shot_time\":30},{\"result\":{\"porn\":{\"label\":0,\"rate\":0.9789921641349792,\"review\":false}},\"shot_time\":40},{\"result\":{\"porn\":{\"label\":0,\"rate\":0.9992973804473877,\"review\":false}},\"shot_time\":50},{\"result\":{\"porn\":{\"label\":0,\"rate\":0.9562959671020508,\"review\":false}},\"shot_time\":60},{\"result\":{\"porn\":{\"label\":0,\"rate\":0.9989614486694336,\"review\":false}},\"shot_time\":70}],\"result\":{\"porn\":{\"label\":0,\"rate\":0.9931503997908698,\"review\":false}},\"service\":\"\",\"source\":\"\",\"status_code\":200,\"task_id\":\"rDt7IaxKeQMGWVvX8YZ5MbwJtT0WuQbh\"}","title":"\u4e3e\u4f8b"},{"location":"ai/audit_nostorage/#_13","text":"\u63d0\u4ea4\u6587\u672c\u5185\u5bb9\uff0c\u8fdb\u884c\u8bc6\u522b\u3002\u8bc6\u522b\u5305\u62ec\u8272\u60c5\u3001\u5e7f\u544a\u3001\u66b4\u6050\u7b49\uff0c act=spam \u8868\u793a\u8fdd\u89c4\u8bc6\u522b\u3002","title":"\u6587\u672c\u8bc6\u522b"},{"location":"ai/audit_nostorage/#_14","text":"\u8bf7\u6c42\u8bed\u6cd5 POST /text/check?act=spam HTTP/1.1 Host: banma.api.upyun.com Date: GMT Date Authorization: UPYUN <ClientKey>:<Signature> Content-Type: application/json {\"text\": \"<\u6587\u672c\u5185\u5bb9>\"} ** \u7b7e\u540d\u8ba4\u8bc1 ** Authorization \u8be6\u89c1 \u7b7e\u540d\u8ba4\u8bc1 \u3002 \u8bf7\u6c42\u53c2\u6570 \u53c2\u6570 \u7c7b\u578b \u5fc5\u9009 \u8bf4\u660e text string \u662f \u6587\u672c\u5185\u5bb9\uff0cJSON \u5b57\u7b26\u4e32\uff0c\u6700\u5927\u5141\u8bb8 64k","title":"\u8bf7\u6c42"},{"location":"ai/audit_nostorage/#_15","text":"\u54cd\u5e94\u53c2\u6570\u662f JSON \u5b57\u7b26\u4e32\uff0c\u53c2\u6570\u540d\u53ca\u8bf4\u660e\u5982\u4e0b\uff1a \u53c2\u6570 \u7c7b\u578b \u8bf4\u660e status_code integer \u5904\u7406\u7ed3\u679c\u72b6\u6001\u7801\uff0c 200 \u8868\u793a\u6210\u529f\u5904\u7406 error string \u9519\u8bef\u4fe1\u606f\uff0c\u7a7a\u5b57\u7b26\u4e32\u8868\u793a\u65e0\u9519\u8bef\u4fe1\u606f spam json \u6587\u672c\u8bc6\u522b\u7ed3\u679c spam.task_id string \u4efb\u52a1 ID spam.scores list \u5404\u4e2a\u5206\u7c7b\u53ca\u6982\u7387, \u4ece\u5de6\u81f3\u53f3\u4f9d\u6b21\u662f \u6b63\u5e38\u6982\u7387 \u3001 \u8fdd\u89c4\u6982\u7387 spam.label integer \u63a8\u8350\u5206\u7c7b\uff0c\u53ef\u80fd\u503c 0 \u3001 1 \u3001 2 \uff0c 0 \u8868\u793a\u6b63\u5e38\uff0c 1 \u8868\u793a\u8fdd\u89c4\uff0c 2 \u8868\u793a\u7591\u4f3c spam.rate float \u63a8\u8350\u5206\u7c7b\u7684\u6982\u7387 spam.review bool \u662f\u5426\u9700\u8981\u4eba\u5de5\u5ba1\u6838\uff0c true \u8868\u793a\u9700\u8981\uff0c false \u8868\u793a\u4e0d\u9700\u8981","title":"\u54cd\u5e94"},{"location":"ai/audit_nostorage/#_16","text":"\u8bf7\u6c42\u793a\u4f8b POST /text/check HTTP/1.1 Host: banma.api.upyun.com Date: Tue, 19 Sep 2017 07:47:49 GMT Authorization: UPYUN x2biJtrSOGhuYj4vzPg70nfZeLEIdmlH:Q+sPbbukYstHJprpSLsS+lnOrro= Content-Length: 30 Content-Type: application/json {\"text\": \"\u8fd9\u662f\u6b63\u5e38\u6587\u672c\"} \u54cd\u5e94\u793a\u4f8b HTTP/1.1 200 OK Server: marco/1.8 Content-Type: application/json Content-Length: 190 Date: Tue, 19 Sep 2017 07:47:50 GMT {\"status_code\": 200, error: \"\", \"spam\":{\"task_id\":\"6583350f\",\"scores\":[0.9713295698165894,0.028670458123087883],\"rate\":0.028670458123087883,\"label\":1,\"review\":false}}","title":"\u4e3e\u4f8b"},{"location":"ai/audit_nostorage/#_17","text":"\u53c2\u6570 \u7c7b\u578b 200 \u5904\u7406\u6210\u529f 400 \u8bf7\u6c42\u53c2\u6570\u9519\u8bef 401 \u8bf7\u6c42\u8ba4\u8bc1\u5931\u8d25 5xx \u670d\u52a1\u7aef\u9519\u8bef\uff0c\u8bf7\u53cd\u9988\u7ed9 \u552e\u540e \u6216\u60a8\u7684\u5546\u52a1\u7ecf\u7406","title":"\u72b6\u6001\u7801\u8bf4\u660e"},{"location":"ai/audit_nostorage/#python","text":"import base64 import datetime import hashlib import hmac import requests def b64(s): return base64.b64encode(s.encode()).decode() # \u65f6\u95f4\u683c\u5f0f\u5316 def httpdate_rfc1123(dt=None): dt = dt or datetime.datetime.utcnow() return datetime.datetime.utcnow().strftime('%a, %d %b %Y %H:%M:%S GMT') # \u7b7e\u540d def sign(client_key, client_secret, method, uri, date): signarr = [method, uri, date] signstr = '&'.join(signarr) signstr = base64.b64encode( hmac.new(client_secret.encode(), signstr.encode(), digestmod=hashlib.sha1).digest() ).decode() return 'UPYUN %s:%s' % (client_key, signstr) # \u5bc6\u94a5 client_key = '2GO7K6NCPInWZqvJewohbDH5jmt' client_secret = 'BKQrAn5OjgG3HVlkJo78DbyiuL' # \u56fe\u7247 URL \u8fdb\u884c\u8272\u60c5\u8bc6\u522b def image_check(): headers = {} headers['Date'] = httpdate_rfc1123() headers['Authorization'] = sign(client_key, client_secret, 'POST', '/image/url/check', headers['Date']) data = { 'url': 'http://uprocess.b0.upaiyun.com/demo.jpg' } resp = requests.post('http://banma.api.upyun.com/image/url/check', headers=headers, json=data) print(resp.status_code, resp.text) # \u89c6\u9891\u70b9\u64ad URL \u8fdb\u884c\u8272\u60c5\u8bc6\u522b def video_check(): headers = {} headers['Date'] = httpdate_rfc1123() headers['Authorization'] = sign(client_key, client_secret, 'POST', '/video/check', headers['Date']) data = { 'url': 'http://uprocess.b0.upaiyun.com/demo/short_video/UPYUN.mp4', 'notify_url': 'http://httpbin.org/post' } resp = requests.post('http://banma.api.upyun.com/video/check', headers=headers, json=data) print(resp.status_code, resp.text) # \u6587\u672c\u8bc6\u522b def text_check(): # \u6587\u672c\u5ba1\u6838 headers = {} headers['Date'] = httpdate_rfc1123() headers['Authorization'] = sign(client_key, client_secret, 'POST', '/text/check', headers['Date']) data = { 'text': '\u8fd9\u91cc\u653e\u6587\u672c\u5185\u5bb9' } resp = requests.post('http://banma.api.upyun.com/text/check', headers=headers, json=data) print(resp.status_code, resp.text) # \u8c03\u7528 def main(): image_check() video_check() text_check() if __name__ == '__main__': main()","title":"Python \u6f14\u793a"},{"location":"ai/authorization/","text":"\u4f7f\u7528 API \u65f6\uff0c\u9700\u8981\u5bf9\u8bf7\u6c42\u8fdb\u884c\u7b7e\u540d\u3002\u7cfb\u7edf\u53d1\u7ed9\u7528\u6237\u7684\u8bf7\u6c42\uff0c\u4e5f\u4f1a\u8fdb\u884c\u7b7e\u540d\uff0c\u4f9b\u7528\u6237\u9a8c\u8bc1\u8bf7\u6c42\u6765\u6e90\u3002 \u7b7e\u540d\u8ba4\u8bc1 \u00b6 ** \u7b7e\u540d\u8bed\u6cd5 ** Authorization: UPYUN <ClientKey>:<Signature> <Signature> = Base64 (HMAC-SHA1 (<ClientSecret>, <Method>& <URI>& <Date>& <Content-MD5> )) ** \u53c2\u6570\u8bf4\u660e ** \u53c2\u6570 \u5fc5\u9009 \u8bf4\u660e ClientKey \u662f \u7528\u6237\u5bc6\u94a5 KEY Method \u662f \u8bf7\u6c42\u65b9\u5f0f\uff0c\u5982\uff1aGET\u3001POST\u3001PUT\u3001HEAD \u7b49 URI \u662f \u8bf7\u6c42\u8def\u5f84 Date \u662f \u8bf7\u6c42\u65e5\u671f\u65f6\u95f4\uff0cGMT \u683c\u5f0f\u5b57\u7b26\u4e32 ( RFC 1123 )\uff0c\u5982 Wed, 29 Oct 2014 02:26:58 GMT Content-MD5 \u5426 \u8bf7\u6c42\u4f53\u7684 MD5 \u6821\u9a8c\u503c\uff0c\u5982\u679c\u8bf7\u6c42\u4f53\u4e3a\u7a7a\uff0c\u53ef\u4ee5\u4e3a\u7a7a ClientSecret \u662f \u7528\u6237\u5bc6\u94a5 Secret ** \u6ce8 ** \u975e\u5fc5\u9009\u53c2\u6570\u4e3a\u7a7a\u65f6\uff0c\u8fde\u540c\u524d\u9762\u7684 & \u4e00\u8d77\u4e0d\u53c2\u4e0e\u7b7e\u540d\u8ba1\u7b97\u3002\u6240\u6709\u8ba1\u7b97\u7684 MD5 \u503c\uff0c\u683c\u5f0f\u5747\u662f 32 \u4f4d\u5c0f\u5199\u3002 HMAC-SHA1 \u8f93\u51fa\u7684\u5fc5\u987b\u662f \u539f\u751f\u7684\u4e8c\u8fdb\u5236\u6570\u636e \u3002 \u8bf7\u6c42\u7b7e\u540d\u6709\u6548\u671f\u4e3a 30 \u5206\u949f\uff0c\u5982\u679c\u7b7e\u540d\u8d85\u8fc7\u6709\u6548\u671f\uff0c\u9700\u8981\u91cd\u65b0\u751f\u6210\u7b7e\u540d\u3002 \u56de\u8c03\u7b7e\u540d\u6709\u6548\u671f\u7531\u7528\u6237\u81ea\u884c\u786e\u5b9a\uff0c\u5efa\u8bae\u8bbe\u7f6e\u4e3a 30 \u5206\u949f\u3002 \u4e3e\u4f8b \u00b6 ** \u53c2\u6570\u4fe1\u606f ** // \u64cd\u4f5c\u5458\u4fe1\u606f ClientKey = TSzF4Cd9JPt6Qcm3WqfDiuUpoAH1 ClientSecret = KuGnZUD17aN9oyRkjSixBqlwQcH // \u53c2\u6570 Method = POST URI = /image/url/check Date = Thu, 12 Oct 2017 06:57:50 GMT Body = {'url': 'http://uprocess.b0.upaiyun.com/demo.jpg'} Content-MD5 = MD5(Body) = DD0F8A735A45323A32EE4D6154E9985B ** \u751f\u6210 Signature ** Signature = Base64 (HMAC-SHA1 (<ClientSecret>, <Method>& <URI>& <Date>& <Content-MD5> )) // \u4e0d\u7528\u6362\u884c\u6216\u7a7a\u683c\uff0c\u4e0a\u9762\u683c\u5f0f\u7684\u6362\u884c\u6216\u7a7a\u683c\u662f\u4e3a\u4e86\u65b9\u4fbf\u9605\u8bfb = Base64 (HMAC-SHA1 (ClientSecret, Method&URI&Date&Content-MD5)) // HMAC-SHA1 \u8fd4\u56de\u7684\u539f\u751f\u4e8c\u8fdb\u5236\u6570\u636e\u8fdb\u884c Base64 \u7f16\u7801 = CKhrW8SSU0ctnmavfnRs1s1NFBY= ** \u7b7e\u540d ** Authorization: UPYUN TSzF4Cd9JPt6Qcm3WqfDiuUpoAH1:CKhrW8SSU0ctnmavfnRs1s1NFBY= ** \u5b8c\u6574\u8bf7\u6c42 ** POST /image/url/check HTTP/1.1 Host: banma.api.upyun.com Date: Thu, 12 Oct 2017 06:57:50 GMT Content-MD5: DD0F8A735A45323A32EE4D6154E9985B Authorization: UPYUN TSzF4Cd9JPt6Qcm3WqfDiuUpoAH1:CKhrW8SSU0ctnmavfnRs1s1NFBY= Content-Length: 50 Content-Type: application/json {\"url\": \"http://uprocess.b0.upaiyun.com/demo.jpg\"} \u4ee3\u7801\u6f14\u793a \u00b6 \u6ce8\u610f\u4e8b\u9879 \u00b6 \u672c\u793a\u4f8b\u9002\u7528\u4e8e\u4e91\u5b58\u50a8\uff0c\u4e91\u5904\u7406\uff0c\u5185\u5bb9\u8bc6\u522b\uff0c\u5bb9\u5668\u4e91\u670d\u52a1\u3002 \u4f7f\u7528\u65f6\uff0c\u6839\u636e\u81ea\u5df1\u7684\u9700\u6c42\u3001\u914d\u7f6e\uff0c\u4fee\u6539\u5bf9\u5e94\u53c2\u6570: key \uff0c secret \uff0c uri \uff0c method \uff0c policy \uff0c md5 \u3002 \u672c\u793a\u4f8b\u4f7f\u7528\u7684 key \uff0c secret \u5728\u4e0d\u540c\u670d\u52a1\u4e2d\u7684\u542b\u4e49\u4e0d\u4e00\u6837\uff0c\u4e91\u5b58\u50a8\u3001\u4e91\u5904\u7406\u3001\u5185\u5bb9\u8bc6\u522b(\u6709\u5b58\u50a8) \u4e2d\u8868\u793a Operator \u548c Password \uff0c \u5185\u5bb9\u8bc6\u522b(\u65e0\u5b58\u50a8)\u3001\u5bb9\u5668\u4e91\u8868\u793a\u5404\u81ea\u670d\u52a1\u63d0\u4f9b\u7684 ClientKey \u548c ClientSecret \u3002 \u6839\u636e\u5bf9\u5e94 API \u6587\u6863\u8bf4\u660e\uff0c\u628a\u8ba4\u8bc1\u4fe1\u606f\uff0c\u586b\u5165\u76f8\u5e94\u7684 http \u8bf7\u6c42\u4fe1\u606f\u4e2d\u3002 \u4f7f\u7528 form API \u4e0a\u4f20\u65f6\uff0c\u9700\u8981\u7528\u6237\u751f\u6210 policy \uff0c\u672c\u793a\u4f8b\u4e0d\u63d0\u4f9b\u751f\u6210 policy \u7684\u4f7f\u7528\u5b9e\u4f8b\u3002 \u5e38\u7528\u8bed\u8a00\u4ee3\u7801\u793a\u4f8b \u00b6 go \u4ee3\u7801\u6f14\u793a \u00b6 package main import ( \"crypto/hmac\" \"crypto/md5\" \"crypto/sha1\" \"encoding/base64\" \"fmt\" \"strings\" \"time\" ) var ( key = \"upyun\" secret = \"secret\" // \u5bf9\u4e8e\u4e0a\u4f20\uff0c\u5904\u7406\uff0c\u8ddf\u5185\u5bb9\u8bc6\u522b\u9700\u8981MD5\u52a0\u5bc6 uri = \"/v1/apps/\" method = \"GET\" ) func md5Str(s string) string { return fmt.Sprintf(\"%x\", md5.Sum([]byte(s))) } func makeRFC1123Date(d time.Time) string { utc := d.UTC().Format(time.RFC1123) return strings.Replace(utc, \"UTC\", \"GMT\", -1) } func base64ToStr(b []byte) string { return base64.StdEncoding.EncodeToString(b) } func sign(key, secret, method, uri, date, policy, md5 string) string { mac := hmac.New(sha1.New, []byte(secret)) elems := []string{} for _, v := range []string{method, uri, date, policy, md5} { if v != \"\" { elems = append(elems, v) } } value := strings.Join(elems, \"&\") fmt.Println(value) mac.Write([]byte(value)) signStr := base64ToStr(mac.Sum(nil)) return \"UPYUN \" + key + \":\" + signStr } func main() { date := makeRFC1123Date(time.Now()) fmt.Println(date) fmt.Println(md5Str(secret)) // \u4e0a\u4f20\uff0c\u5904\u7406\uff0c\u5185\u5bb9\u8bc6\u522b\u6709\u5b58\u50a8 fmt.Println(sign(key, md5Str(secret), method, uri, date, \"\", \"\")) // \u5bb9\u5668\u4e91\uff0c\u5185\u5bb9\u8bc6\u522b\u65e0\u5b58\u50a8 fmt.Println(sign(key, secret, method, uri, date, \"\", \"\")) } python \u4ee3\u7801\u6f14\u793a \u00b6 # -*- coding: UTF-8 -*- import base64 import datetime import hashlib import hmac # Tip 1 # \u4f7f\u7528\u65f6\u9700\u8981\u6839\u636e\u81ea\u5df1\u914d\u7f6e\u4e0e\u9700\u6c42\u63d0\u4f9b\u53c2\u6570 key secret uri method key = 'upyun' secret = 'secret' uri = '/v1/apps/' method = 'GET' def httpdate_rfc1123(dt=None): dt = dt or datetime.datetime.utcnow() return dt.strftime('%a, %d %b %Y %H:%M:%S GMT') def md5(value): return hashlib.md5(value.encode()).hexdigest() def sign(client_key, client_secret, method, uri, date, policy=None, md5=None): # Tip 4 # MD5 \u4fe1\u606f\u53ef\u9009 signarr = [] for v in [method, uri, date, policy, md5]: if v != None: signarr.append(v) signstr = '&'.join(signarr) signstr = base64.b64encode( hmac.new(client_secret.encode(), signstr.encode(), digestmod=hashlib.sha1).digest() ).decode() return 'UPYUN %s:%s' % (client_key, signstr) def main(): # Tip 2 # \u65f6\u95f4\u9700\u8981\u4e0e http \u5934 Date \u4fe1\u606f\u4fdd\u6301\u4e00\u81f4 # date = httpdate_rfc1123() date = 'Thu, 14 Dec 2017 06:03:27 GMT' # Tip 3 # sign \u51fd\u6570\u8fd4\u56de\u7684\u503c\u586b\u5165 http \u5934 Authorization \u4fe1\u606f\u4e2d print date print md5(secret) # \u4e0a\u4f20\uff0c\u5904\u7406\uff0c\u5185\u5bb9\u8bc6\u522b\u6709\u5b58\u50a8 print sign(key, md5(secret), method, uri, date) # \u5185\u5bb9\u8bc6\u522b\u65e0\u5b58\u50a8\uff0c\u5bb9\u5668\u4e91 print sign(key, secret, method, uri, date) if __name__ == '__main__': main() js \u4ee3\u7801\u6f14\u793a \u00b6 var crypto = require('crypto'); function sign(key, secret, method, uri, date, policy=null, md5=null) { elems = []; [method, uri, date, policy, md5].forEach(item => { if (item != null) { elems.push(item) } }) value = elems.join('&'); auth = hmacsha1(secret, value); return `UPYUN ${key}:${auth}`; } function MD5(value) { return crypto.createHash('md5').update(value).digest('hex'); } function hmacsha1(secret, value) { return crypto.createHmac('sha1', secret).update(value, 'utf-8').digest().toString('base64'); } date = new Date().toGMTString(); console.log(date); key = 'upyun'; secret = 'secret'; method = 'GET'; uri = '/v1/apps/'; console.log(MD5('secret')); // \u4e0a\u4f20\uff0c\u5904\u7406\uff0c\u5185\u5bb9\u8bc6\u522b\u6709\u5b58\u50a8 console.log(sign(key, MD5(secret), method, uri, date)); // \u5185\u5bb9\u8bc6\u522b\u65e0\u5b58\u50a8\uff0c\u5bb9\u5668\u4e91 console.log(sign(key, secret, method, uri, date)); java \u4ee3\u7801\u6f14\u793a \u00b6 import java.security.InvalidKeyException; import java.security.NoSuchAlgorithmException; import java.security.SignatureException; import javax.crypto.Mac; import javax.crypto.spec.SecretKeySpec; import java.util.Base64; import java.util.Calendar; import java.text.SimpleDateFormat; import java.util.Locale; import java.util.TimeZone; import java.security.*; import java.io.*; public class auth { private static final String HMAC_SHA1_ALGORITHM = \"HmacSHA1\"; public static String md5(String string) { byte[] hash; try { hash = MessageDigest.getInstance(\"MD5\").digest(string.getBytes(\"UTF-8\")); } catch (UnsupportedEncodingException e) { throw new RuntimeException(\"UTF-8 is unsupported\", e); } catch (NoSuchAlgorithmException e) { throw new RuntimeException(\"MessageDigest\u4e0d\u652f\u6301MD5Util\", e); } StringBuilder hex = new StringBuilder(hash.length * 2); for (byte b : hash) { if ((b & 0xFF) < 0x10) hex.append(\"0\"); hex.append(Integer.toHexString(b & 0xFF)); } return hex.toString(); } public static byte[] hashHmac(String data, String key) throws SignatureException, NoSuchAlgorithmException, InvalidKeyException { SecretKeySpec signingKey = new SecretKeySpec(key.getBytes(), HMAC_SHA1_ALGORITHM); Mac mac = Mac.getInstance(HMAC_SHA1_ALGORITHM); mac.init(signingKey); return mac.doFinal(data.getBytes()); } public static String sign(String key, String secret, String method, String uri, String date, String policy, String md5) throws Exception { String value = method + \"&\" + uri + \"&\" + date; if (policy != null && policy.length() > 0) { value = value + \"&\" + policy; } if (md5 != null && md5.length() > 0) { value = value + \"&\" + md5; } byte[] hmac = hashHmac(value, secret); String sign = Base64.getEncoder().encodeToString(hmac); return \"UPYUN \" + key + \":\" + sign; } public static String getRfc1123Time() { Calendar calendar = Calendar.getInstance(); SimpleDateFormat dateFormat = new SimpleDateFormat( \"EEE, dd MMM yyyy HH:mm:ss z\", Locale.US); dateFormat.setTimeZone(TimeZone.getTimeZone(\"GMT\")); return dateFormat.format(calendar.getTime()); } public static void main(String[] args) throws Exception { String key = \"upyun\"; String secret = \"secret\"; String method = \"GET\"; String uri = \"/v1/apps/\"; String date = getRfc1123Time(); System.out.println(date); System.out.println(md5(secret)); // \u4e0a\u4f20\uff0c\u5904\u7406\uff0c\u5185\u5bb9\u8bc6\u522b\u6709\u5b58\u50a8 System.out.println(sign(key, md5(secret), method, uri, date, \"\", \"\")); // \u5185\u5bb9\u8bc6\u522b\u65e0\u5b58\u50a8\uff0c\u5bb9\u5668\u4e91 System.out.println(sign(key, secret, method, uri, date, \"\", \"\")); } } php \u4ee3\u7801\u6f14\u793a \u00b6 <?php function sign($key, $secret, $method, $uri, $date, $policy=null, $md5=null) { $elems = array(); foreach (array($method, $uri, $date, $policy, $md5) as $v) { if ($v) { $elems[] = $v; } } $value = implode('&', $elems); $sign = base64_encode(hash_hmac('sha1', $value, $secret, true)); return 'UPYUN ' . $key . ':' . $sign; } function main() { $key = 'upyun'; $secret = 'secret'; $uri = '/v1/apps/'; $method = 'GET'; $date = gmdate('D, d M Y H:i:s \\G\\M\\T'); $md = md5($secret); echo $md . \"\\n\"; echo $date . \"\\n\"; // \u4e0a\u4f20\uff0c\u5904\u7406\uff0c\u5185\u5bb9\u8bc6\u522b\u6709\u5b58\u50a8 echo sign($key, md5($secret), $method, $uri, $date) . \"\\n\"; // \u5185\u5bb9\u8bc6\u522b\u65e0\u5b58\u50a8\uff0c\u5bb9\u5668\u4e91 echo sign($key, $secret, $method, $uri, $date); } main(); \u5982\u6709\u7591\u95ee\u8bf7 \u8054\u7cfb\u6211\u4eec","title":"\u8ba4\u8bc1\u9274\u6743"},{"location":"ai/authorization/#_1","text":"** \u7b7e\u540d\u8bed\u6cd5 ** Authorization: UPYUN <ClientKey>:<Signature> <Signature> = Base64 (HMAC-SHA1 (<ClientSecret>, <Method>& <URI>& <Date>& <Content-MD5> )) ** \u53c2\u6570\u8bf4\u660e ** \u53c2\u6570 \u5fc5\u9009 \u8bf4\u660e ClientKey \u662f \u7528\u6237\u5bc6\u94a5 KEY Method \u662f \u8bf7\u6c42\u65b9\u5f0f\uff0c\u5982\uff1aGET\u3001POST\u3001PUT\u3001HEAD \u7b49 URI \u662f \u8bf7\u6c42\u8def\u5f84 Date \u662f \u8bf7\u6c42\u65e5\u671f\u65f6\u95f4\uff0cGMT \u683c\u5f0f\u5b57\u7b26\u4e32 ( RFC 1123 )\uff0c\u5982 Wed, 29 Oct 2014 02:26:58 GMT Content-MD5 \u5426 \u8bf7\u6c42\u4f53\u7684 MD5 \u6821\u9a8c\u503c\uff0c\u5982\u679c\u8bf7\u6c42\u4f53\u4e3a\u7a7a\uff0c\u53ef\u4ee5\u4e3a\u7a7a ClientSecret \u662f \u7528\u6237\u5bc6\u94a5 Secret ** \u6ce8 ** \u975e\u5fc5\u9009\u53c2\u6570\u4e3a\u7a7a\u65f6\uff0c\u8fde\u540c\u524d\u9762\u7684 & \u4e00\u8d77\u4e0d\u53c2\u4e0e\u7b7e\u540d\u8ba1\u7b97\u3002\u6240\u6709\u8ba1\u7b97\u7684 MD5 \u503c\uff0c\u683c\u5f0f\u5747\u662f 32 \u4f4d\u5c0f\u5199\u3002 HMAC-SHA1 \u8f93\u51fa\u7684\u5fc5\u987b\u662f \u539f\u751f\u7684\u4e8c\u8fdb\u5236\u6570\u636e \u3002 \u8bf7\u6c42\u7b7e\u540d\u6709\u6548\u671f\u4e3a 30 \u5206\u949f\uff0c\u5982\u679c\u7b7e\u540d\u8d85\u8fc7\u6709\u6548\u671f\uff0c\u9700\u8981\u91cd\u65b0\u751f\u6210\u7b7e\u540d\u3002 \u56de\u8c03\u7b7e\u540d\u6709\u6548\u671f\u7531\u7528\u6237\u81ea\u884c\u786e\u5b9a\uff0c\u5efa\u8bae\u8bbe\u7f6e\u4e3a 30 \u5206\u949f\u3002","title":"\u7b7e\u540d\u8ba4\u8bc1"},{"location":"ai/authorization/#_2","text":"** \u53c2\u6570\u4fe1\u606f ** // \u64cd\u4f5c\u5458\u4fe1\u606f ClientKey = TSzF4Cd9JPt6Qcm3WqfDiuUpoAH1 ClientSecret = KuGnZUD17aN9oyRkjSixBqlwQcH // \u53c2\u6570 Method = POST URI = /image/url/check Date = Thu, 12 Oct 2017 06:57:50 GMT Body = {'url': 'http://uprocess.b0.upaiyun.com/demo.jpg'} Content-MD5 = MD5(Body) = DD0F8A735A45323A32EE4D6154E9985B ** \u751f\u6210 Signature ** Signature = Base64 (HMAC-SHA1 (<ClientSecret>, <Method>& <URI>& <Date>& <Content-MD5> )) // \u4e0d\u7528\u6362\u884c\u6216\u7a7a\u683c\uff0c\u4e0a\u9762\u683c\u5f0f\u7684\u6362\u884c\u6216\u7a7a\u683c\u662f\u4e3a\u4e86\u65b9\u4fbf\u9605\u8bfb = Base64 (HMAC-SHA1 (ClientSecret, Method&URI&Date&Content-MD5)) // HMAC-SHA1 \u8fd4\u56de\u7684\u539f\u751f\u4e8c\u8fdb\u5236\u6570\u636e\u8fdb\u884c Base64 \u7f16\u7801 = CKhrW8SSU0ctnmavfnRs1s1NFBY= ** \u7b7e\u540d ** Authorization: UPYUN TSzF4Cd9JPt6Qcm3WqfDiuUpoAH1:CKhrW8SSU0ctnmavfnRs1s1NFBY= ** \u5b8c\u6574\u8bf7\u6c42 ** POST /image/url/check HTTP/1.1 Host: banma.api.upyun.com Date: Thu, 12 Oct 2017 06:57:50 GMT Content-MD5: DD0F8A735A45323A32EE4D6154E9985B Authorization: UPYUN TSzF4Cd9JPt6Qcm3WqfDiuUpoAH1:CKhrW8SSU0ctnmavfnRs1s1NFBY= Content-Length: 50 Content-Type: application/json {\"url\": \"http://uprocess.b0.upaiyun.com/demo.jpg\"}","title":"\u4e3e\u4f8b"},{"location":"ai/authorization/#_3","text":"","title":"\u4ee3\u7801\u6f14\u793a"},{"location":"ai/authorization/#_4","text":"\u672c\u793a\u4f8b\u9002\u7528\u4e8e\u4e91\u5b58\u50a8\uff0c\u4e91\u5904\u7406\uff0c\u5185\u5bb9\u8bc6\u522b\uff0c\u5bb9\u5668\u4e91\u670d\u52a1\u3002 \u4f7f\u7528\u65f6\uff0c\u6839\u636e\u81ea\u5df1\u7684\u9700\u6c42\u3001\u914d\u7f6e\uff0c\u4fee\u6539\u5bf9\u5e94\u53c2\u6570: key \uff0c secret \uff0c uri \uff0c method \uff0c policy \uff0c md5 \u3002 \u672c\u793a\u4f8b\u4f7f\u7528\u7684 key \uff0c secret \u5728\u4e0d\u540c\u670d\u52a1\u4e2d\u7684\u542b\u4e49\u4e0d\u4e00\u6837\uff0c\u4e91\u5b58\u50a8\u3001\u4e91\u5904\u7406\u3001\u5185\u5bb9\u8bc6\u522b(\u6709\u5b58\u50a8) \u4e2d\u8868\u793a Operator \u548c Password \uff0c \u5185\u5bb9\u8bc6\u522b(\u65e0\u5b58\u50a8)\u3001\u5bb9\u5668\u4e91\u8868\u793a\u5404\u81ea\u670d\u52a1\u63d0\u4f9b\u7684 ClientKey \u548c ClientSecret \u3002 \u6839\u636e\u5bf9\u5e94 API \u6587\u6863\u8bf4\u660e\uff0c\u628a\u8ba4\u8bc1\u4fe1\u606f\uff0c\u586b\u5165\u76f8\u5e94\u7684 http \u8bf7\u6c42\u4fe1\u606f\u4e2d\u3002 \u4f7f\u7528 form API \u4e0a\u4f20\u65f6\uff0c\u9700\u8981\u7528\u6237\u751f\u6210 policy \uff0c\u672c\u793a\u4f8b\u4e0d\u63d0\u4f9b\u751f\u6210 policy \u7684\u4f7f\u7528\u5b9e\u4f8b\u3002","title":"\u6ce8\u610f\u4e8b\u9879"},{"location":"ai/authorization/#_5","text":"","title":"\u5e38\u7528\u8bed\u8a00\u4ee3\u7801\u793a\u4f8b"},{"location":"ai/authorization/#go","text":"package main import ( \"crypto/hmac\" \"crypto/md5\" \"crypto/sha1\" \"encoding/base64\" \"fmt\" \"strings\" \"time\" ) var ( key = \"upyun\" secret = \"secret\" // \u5bf9\u4e8e\u4e0a\u4f20\uff0c\u5904\u7406\uff0c\u8ddf\u5185\u5bb9\u8bc6\u522b\u9700\u8981MD5\u52a0\u5bc6 uri = \"/v1/apps/\" method = \"GET\" ) func md5Str(s string) string { return fmt.Sprintf(\"%x\", md5.Sum([]byte(s))) } func makeRFC1123Date(d time.Time) string { utc := d.UTC().Format(time.RFC1123) return strings.Replace(utc, \"UTC\", \"GMT\", -1) } func base64ToStr(b []byte) string { return base64.StdEncoding.EncodeToString(b) } func sign(key, secret, method, uri, date, policy, md5 string) string { mac := hmac.New(sha1.New, []byte(secret)) elems := []string{} for _, v := range []string{method, uri, date, policy, md5} { if v != \"\" { elems = append(elems, v) } } value := strings.Join(elems, \"&\") fmt.Println(value) mac.Write([]byte(value)) signStr := base64ToStr(mac.Sum(nil)) return \"UPYUN \" + key + \":\" + signStr } func main() { date := makeRFC1123Date(time.Now()) fmt.Println(date) fmt.Println(md5Str(secret)) // \u4e0a\u4f20\uff0c\u5904\u7406\uff0c\u5185\u5bb9\u8bc6\u522b\u6709\u5b58\u50a8 fmt.Println(sign(key, md5Str(secret), method, uri, date, \"\", \"\")) // \u5bb9\u5668\u4e91\uff0c\u5185\u5bb9\u8bc6\u522b\u65e0\u5b58\u50a8 fmt.Println(sign(key, secret, method, uri, date, \"\", \"\")) }","title":"go \u4ee3\u7801\u6f14\u793a"},{"location":"ai/authorization/#python","text":"# -*- coding: UTF-8 -*- import base64 import datetime import hashlib import hmac # Tip 1 # \u4f7f\u7528\u65f6\u9700\u8981\u6839\u636e\u81ea\u5df1\u914d\u7f6e\u4e0e\u9700\u6c42\u63d0\u4f9b\u53c2\u6570 key secret uri method key = 'upyun' secret = 'secret' uri = '/v1/apps/' method = 'GET' def httpdate_rfc1123(dt=None): dt = dt or datetime.datetime.utcnow() return dt.strftime('%a, %d %b %Y %H:%M:%S GMT') def md5(value): return hashlib.md5(value.encode()).hexdigest() def sign(client_key, client_secret, method, uri, date, policy=None, md5=None): # Tip 4 # MD5 \u4fe1\u606f\u53ef\u9009 signarr = [] for v in [method, uri, date, policy, md5]: if v != None: signarr.append(v) signstr = '&'.join(signarr) signstr = base64.b64encode( hmac.new(client_secret.encode(), signstr.encode(), digestmod=hashlib.sha1).digest() ).decode() return 'UPYUN %s:%s' % (client_key, signstr) def main(): # Tip 2 # \u65f6\u95f4\u9700\u8981\u4e0e http \u5934 Date \u4fe1\u606f\u4fdd\u6301\u4e00\u81f4 # date = httpdate_rfc1123() date = 'Thu, 14 Dec 2017 06:03:27 GMT' # Tip 3 # sign \u51fd\u6570\u8fd4\u56de\u7684\u503c\u586b\u5165 http \u5934 Authorization \u4fe1\u606f\u4e2d print date print md5(secret) # \u4e0a\u4f20\uff0c\u5904\u7406\uff0c\u5185\u5bb9\u8bc6\u522b\u6709\u5b58\u50a8 print sign(key, md5(secret), method, uri, date) # \u5185\u5bb9\u8bc6\u522b\u65e0\u5b58\u50a8\uff0c\u5bb9\u5668\u4e91 print sign(key, secret, method, uri, date) if __name__ == '__main__': main()","title":"python \u4ee3\u7801\u6f14\u793a"},{"location":"ai/authorization/#js","text":"var crypto = require('crypto'); function sign(key, secret, method, uri, date, policy=null, md5=null) { elems = []; [method, uri, date, policy, md5].forEach(item => { if (item != null) { elems.push(item) } }) value = elems.join('&'); auth = hmacsha1(secret, value); return `UPYUN ${key}:${auth}`; } function MD5(value) { return crypto.createHash('md5').update(value).digest('hex'); } function hmacsha1(secret, value) { return crypto.createHmac('sha1', secret).update(value, 'utf-8').digest().toString('base64'); } date = new Date().toGMTString(); console.log(date); key = 'upyun'; secret = 'secret'; method = 'GET'; uri = '/v1/apps/'; console.log(MD5('secret')); // \u4e0a\u4f20\uff0c\u5904\u7406\uff0c\u5185\u5bb9\u8bc6\u522b\u6709\u5b58\u50a8 console.log(sign(key, MD5(secret), method, uri, date)); // \u5185\u5bb9\u8bc6\u522b\u65e0\u5b58\u50a8\uff0c\u5bb9\u5668\u4e91 console.log(sign(key, secret, method, uri, date));","title":"js \u4ee3\u7801\u6f14\u793a"},{"location":"ai/authorization/#java","text":"import java.security.InvalidKeyException; import java.security.NoSuchAlgorithmException; import java.security.SignatureException; import javax.crypto.Mac; import javax.crypto.spec.SecretKeySpec; import java.util.Base64; import java.util.Calendar; import java.text.SimpleDateFormat; import java.util.Locale; import java.util.TimeZone; import java.security.*; import java.io.*; public class auth { private static final String HMAC_SHA1_ALGORITHM = \"HmacSHA1\"; public static String md5(String string) { byte[] hash; try { hash = MessageDigest.getInstance(\"MD5\").digest(string.getBytes(\"UTF-8\")); } catch (UnsupportedEncodingException e) { throw new RuntimeException(\"UTF-8 is unsupported\", e); } catch (NoSuchAlgorithmException e) { throw new RuntimeException(\"MessageDigest\u4e0d\u652f\u6301MD5Util\", e); } StringBuilder hex = new StringBuilder(hash.length * 2); for (byte b : hash) { if ((b & 0xFF) < 0x10) hex.append(\"0\"); hex.append(Integer.toHexString(b & 0xFF)); } return hex.toString(); } public static byte[] hashHmac(String data, String key) throws SignatureException, NoSuchAlgorithmException, InvalidKeyException { SecretKeySpec signingKey = new SecretKeySpec(key.getBytes(), HMAC_SHA1_ALGORITHM); Mac mac = Mac.getInstance(HMAC_SHA1_ALGORITHM); mac.init(signingKey); return mac.doFinal(data.getBytes()); } public static String sign(String key, String secret, String method, String uri, String date, String policy, String md5) throws Exception { String value = method + \"&\" + uri + \"&\" + date; if (policy != null && policy.length() > 0) { value = value + \"&\" + policy; } if (md5 != null && md5.length() > 0) { value = value + \"&\" + md5; } byte[] hmac = hashHmac(value, secret); String sign = Base64.getEncoder().encodeToString(hmac); return \"UPYUN \" + key + \":\" + sign; } public static String getRfc1123Time() { Calendar calendar = Calendar.getInstance(); SimpleDateFormat dateFormat = new SimpleDateFormat( \"EEE, dd MMM yyyy HH:mm:ss z\", Locale.US); dateFormat.setTimeZone(TimeZone.getTimeZone(\"GMT\")); return dateFormat.format(calendar.getTime()); } public static void main(String[] args) throws Exception { String key = \"upyun\"; String secret = \"secret\"; String method = \"GET\"; String uri = \"/v1/apps/\"; String date = getRfc1123Time(); System.out.println(date); System.out.println(md5(secret)); // \u4e0a\u4f20\uff0c\u5904\u7406\uff0c\u5185\u5bb9\u8bc6\u522b\u6709\u5b58\u50a8 System.out.println(sign(key, md5(secret), method, uri, date, \"\", \"\")); // \u5185\u5bb9\u8bc6\u522b\u65e0\u5b58\u50a8\uff0c\u5bb9\u5668\u4e91 System.out.println(sign(key, secret, method, uri, date, \"\", \"\")); } }","title":"java \u4ee3\u7801\u6f14\u793a"},{"location":"ai/authorization/#php","text":"<?php function sign($key, $secret, $method, $uri, $date, $policy=null, $md5=null) { $elems = array(); foreach (array($method, $uri, $date, $policy, $md5) as $v) { if ($v) { $elems[] = $v; } } $value = implode('&', $elems); $sign = base64_encode(hash_hmac('sha1', $value, $secret, true)); return 'UPYUN ' . $key . ':' . $sign; } function main() { $key = 'upyun'; $secret = 'secret'; $uri = '/v1/apps/'; $method = 'GET'; $date = gmdate('D, d M Y H:i:s \\G\\M\\T'); $md = md5($secret); echo $md . \"\\n\"; echo $date . \"\\n\"; // \u4e0a\u4f20\uff0c\u5904\u7406\uff0c\u5185\u5bb9\u8bc6\u522b\u6709\u5b58\u50a8 echo sign($key, md5($secret), $method, $uri, $date) . \"\\n\"; // \u5185\u5bb9\u8bc6\u522b\u65e0\u5b58\u50a8\uff0c\u5bb9\u5668\u4e91 echo sign($key, $secret, $method, $uri, $date); } main(); \u5982\u6709\u7591\u95ee\u8bf7 \u8054\u7cfb\u6211\u4eec","title":"php \u4ee3\u7801\u6f14\u793a"},{"location":"ai/face_detect/","text":"\u5feb\u901f\u5165\u95e8 \u00b6 \u53c8\u62cd\u4e91\u5904\u7406\uff08\u4eba\u8138\u8bc6\u522b\uff09\u57fa\u4e8e CDN \u6216\u4e91\u5b58\u50a8\u670d\u52a1\uff0c\u60a8\u5728\u4f7f\u7528\u5b83\u4e4b\u524d\uff0c\u8bf7\u786e\u4fdd\u60a8\u5df2\u7ecf\u6ce8\u518c\u53c8\u62cd\u4e91\u8d26\u53f7\u5e76\u5b8c\u6210\u5b9e\u540d\u9a8c\u8bc1\uff0c\u8bf7\u786e\u4fdd\u60a8\u5df2\u7ecf\u521b\u5efa CDN \u670d\u52a1 \u6216 \u4e91\u5b58\u50a8\u670d\u52a1 \u3002 \u6536\u8d39\u65b9\u9762\uff0c\u73b0\u5728\u514d\u8d39\u516c\u6d4b\u4e2d\uff0c\u540e\u7eed\u4f1a\u8fdb\u884c\u6536\u8d39\u3002 \u5f00\u53d1\u8005\u6307\u5357 \u00b6 \u8bf7\u6c42\u65b9\u6cd5 \u00b6 \u901a\u8fc7 URL \u8bbf\u95ee\u56fe\u7247\u65f6\uff0c\u5bf9\u56fe\u7247\u8fdb\u884c\u8bc6\u522b\u3002\u4efb\u52a1\u4ee5\u540c\u6b65\u7684\u65b9\u5f0f\u5904\u7406\uff0c\u5904\u7406\u5b8c\u6210\u540e\uff0c\u54cd\u5e94\u4fe1\u606f\u4e2d\u8fd4\u56de\u4eba\u8138\u8bc6\u522b\u7684\u4fe1\u606f\u3002 ** \u683c\u5f0f ** \u56fe\u7247 URL + \u95f4\u9694\u6807\u8bc6\u7b26 + \u53c2\u6570 \u95f4\u9694\u6807\u8bc6\u7b26\u8bf4\u660e\uff0c\u89c1 \u95f4\u9694\u6807\u8bc6\u7b26 \uff1b\u53c2\u6570\u8bf4\u660e\uff0c\u89c1 \u529f\u80fd \u3002 ** \u4e3e\u4f8b ** \u56fe\u7247 URL \u662f https://p.upyun.com/docs/cloud/face.jpg \u4eba\u8138\u68c0\u6d4b\u7684 URL \u662f https://p.upyun.com/docs/cloud/face.jpg!/face/detection \u54cd\u5e94\u4fe1\u606f \u00b6 \u8bc6\u522b\u6210\u529f\uff1a\u8fd4\u56de 200 \uff0c\u54cd\u5e94\u4fe1\u606f\u662f\u4eba\u8138\u8bc6\u522b\u7ed3\u679c\u3002\u54cd\u5e94\u4fe1\u606f\u4e3a JSON \u683c\u5f0f\uff0c\u5b57\u6bb5\u540d\u53ca\u542b\u4e49\u5982\u4e0b\uff1a \u53c2\u6570 \u7c7b\u578b \u8bf4\u660e face list \u4eba\u8138\u4f4d\u7f6e\u5750\u6807\u4fe1\u606f\uff0c\u5982\u679c\u6ca1\u6709\u4eba\u8138\uff0c\u8fd4\u56de\u7a7a\u4fe1\u606f size list \u56fe\u7247\u7684\u5bbd\u3001\u9ad8 ** \u4e3e\u4f8b ** { \"size\": [ 598, 960 ], \"face\": [ { \"x\": 179, \"y\": 290, \"width\": 288, \"height\": 288 } ] } \u8bc6\u522b\u5931\u8d25\uff1a\u8fd4\u56de\u76f8\u5e94\u7684\u51fa\u9519\u4fe1\u606f\uff0c\u5177\u4f53\u8bf7\u53c2\u9605\u300c \u72b6\u6001\u7801\u8868 \u300d\u3002 \u72b6\u6001\u7801\u8868 \u00b6 \u72b6\u6001\u7801 \u8bf4\u660e 200 \u5904\u7406\u6210\u529f 404 \u6587\u4ef6\u4e0d\u5b58\u5728 413 \u6587\u4ef6\u5927\u5c0f\u8d85\u51fa\u9650\u5236 415 \u4e0d\u652f\u6301\u7684\u6587\u4ef6\u7c7b\u578b 5xx \u670d\u52a1\u7aef\u9519\u8bef\u3002\u5982\u9047\u6b64\u7c7b\u9519\u8bef\uff0c\u8bf7\u53cd\u9988\u7ed9 \u552e\u540e \u6216\u60a8\u7684\u5546\u52a1\u7ecf\u7406 \u529f\u80fd \u00b6 \u4eba\u8138\u68c0\u6d4b \u00b6 \u53c2\u6570 \u503c \u8bf4\u660e /face/<\u56fa\u5b9a\u503c> detection \u5206\u6790\u56fe\u7247\u4e0a\u662f\u5426\u6709\u4eba\u8138\uff0c\u5e76\u8fd4\u56de\u76f8\u5e94\u4fe1\u606f ** \u6ce8 ** \u56fe\u7247\u5927\u5c0f\u4e0d\u80fd\u8d85\u8fc7 8M\uff0c\u5426\u5219\u4e0d\u5904\u7406\u3002 \u5982\u6709\u7591\u95ee\u8bf7 \u8054\u7cfb\u6211\u4eec","title":"\u4eba\u8138\u8bc6\u522b"},{"location":"ai/face_detect/#_1","text":"\u53c8\u62cd\u4e91\u5904\u7406\uff08\u4eba\u8138\u8bc6\u522b\uff09\u57fa\u4e8e CDN \u6216\u4e91\u5b58\u50a8\u670d\u52a1\uff0c\u60a8\u5728\u4f7f\u7528\u5b83\u4e4b\u524d\uff0c\u8bf7\u786e\u4fdd\u60a8\u5df2\u7ecf\u6ce8\u518c\u53c8\u62cd\u4e91\u8d26\u53f7\u5e76\u5b8c\u6210\u5b9e\u540d\u9a8c\u8bc1\uff0c\u8bf7\u786e\u4fdd\u60a8\u5df2\u7ecf\u521b\u5efa CDN \u670d\u52a1 \u6216 \u4e91\u5b58\u50a8\u670d\u52a1 \u3002 \u6536\u8d39\u65b9\u9762\uff0c\u73b0\u5728\u514d\u8d39\u516c\u6d4b\u4e2d\uff0c\u540e\u7eed\u4f1a\u8fdb\u884c\u6536\u8d39\u3002","title":"\u5feb\u901f\u5165\u95e8"},{"location":"ai/face_detect/#_2","text":"","title":"\u5f00\u53d1\u8005\u6307\u5357"},{"location":"ai/face_detect/#_3","text":"\u901a\u8fc7 URL \u8bbf\u95ee\u56fe\u7247\u65f6\uff0c\u5bf9\u56fe\u7247\u8fdb\u884c\u8bc6\u522b\u3002\u4efb\u52a1\u4ee5\u540c\u6b65\u7684\u65b9\u5f0f\u5904\u7406\uff0c\u5904\u7406\u5b8c\u6210\u540e\uff0c\u54cd\u5e94\u4fe1\u606f\u4e2d\u8fd4\u56de\u4eba\u8138\u8bc6\u522b\u7684\u4fe1\u606f\u3002 ** \u683c\u5f0f ** \u56fe\u7247 URL + \u95f4\u9694\u6807\u8bc6\u7b26 + \u53c2\u6570 \u95f4\u9694\u6807\u8bc6\u7b26\u8bf4\u660e\uff0c\u89c1 \u95f4\u9694\u6807\u8bc6\u7b26 \uff1b\u53c2\u6570\u8bf4\u660e\uff0c\u89c1 \u529f\u80fd \u3002 ** \u4e3e\u4f8b ** \u56fe\u7247 URL \u662f https://p.upyun.com/docs/cloud/face.jpg \u4eba\u8138\u68c0\u6d4b\u7684 URL \u662f https://p.upyun.com/docs/cloud/face.jpg!/face/detection","title":"\u8bf7\u6c42\u65b9\u6cd5"},{"location":"ai/face_detect/#_4","text":"\u8bc6\u522b\u6210\u529f\uff1a\u8fd4\u56de 200 \uff0c\u54cd\u5e94\u4fe1\u606f\u662f\u4eba\u8138\u8bc6\u522b\u7ed3\u679c\u3002\u54cd\u5e94\u4fe1\u606f\u4e3a JSON \u683c\u5f0f\uff0c\u5b57\u6bb5\u540d\u53ca\u542b\u4e49\u5982\u4e0b\uff1a \u53c2\u6570 \u7c7b\u578b \u8bf4\u660e face list \u4eba\u8138\u4f4d\u7f6e\u5750\u6807\u4fe1\u606f\uff0c\u5982\u679c\u6ca1\u6709\u4eba\u8138\uff0c\u8fd4\u56de\u7a7a\u4fe1\u606f size list \u56fe\u7247\u7684\u5bbd\u3001\u9ad8 ** \u4e3e\u4f8b ** { \"size\": [ 598, 960 ], \"face\": [ { \"x\": 179, \"y\": 290, \"width\": 288, \"height\": 288 } ] } \u8bc6\u522b\u5931\u8d25\uff1a\u8fd4\u56de\u76f8\u5e94\u7684\u51fa\u9519\u4fe1\u606f\uff0c\u5177\u4f53\u8bf7\u53c2\u9605\u300c \u72b6\u6001\u7801\u8868 \u300d\u3002","title":"\u54cd\u5e94\u4fe1\u606f"},{"location":"ai/face_detect/#_5","text":"\u72b6\u6001\u7801 \u8bf4\u660e 200 \u5904\u7406\u6210\u529f 404 \u6587\u4ef6\u4e0d\u5b58\u5728 413 \u6587\u4ef6\u5927\u5c0f\u8d85\u51fa\u9650\u5236 415 \u4e0d\u652f\u6301\u7684\u6587\u4ef6\u7c7b\u578b 5xx \u670d\u52a1\u7aef\u9519\u8bef\u3002\u5982\u9047\u6b64\u7c7b\u9519\u8bef\uff0c\u8bf7\u53cd\u9988\u7ed9 \u552e\u540e \u6216\u60a8\u7684\u5546\u52a1\u7ecf\u7406","title":"\u72b6\u6001\u7801\u8868"},{"location":"ai/face_detect/#_6","text":"","title":"\u529f\u80fd"},{"location":"ai/face_detect/#_7","text":"\u53c2\u6570 \u503c \u8bf4\u660e /face/<\u56fa\u5b9a\u503c> detection \u5206\u6790\u56fe\u7247\u4e0a\u662f\u5426\u6709\u4eba\u8138\uff0c\u5e76\u8fd4\u56de\u76f8\u5e94\u4fe1\u606f ** \u6ce8 ** \u56fe\u7247\u5927\u5c0f\u4e0d\u80fd\u8d85\u8fc7 8M\uff0c\u5426\u5219\u4e0d\u5904\u7406\u3002 \u5982\u6709\u7591\u95ee\u8bf7 \u8054\u7cfb\u6211\u4eec","title":"\u4eba\u8138\u68c0\u6d4b"},{"location":"api/","text":"\u53c8\u62cd\u4e91\u5b58\u50a8\u4ecb\u7ecd \u00b6 \u53c8\u62cd\u4e91\u5b58\u50a8\u662f\u9762\u5411\u4e92\u8054\u7f51\u5e94\u7528\u7684\u5bf9\u8c61\u5b58\u50a8\u670d\u52a1\uff0c\u5177\u6709\u4f7f\u7528\u7b80\u5355\u3001\u9ad8\u53ef\u9760\u3001\u9ad8\u5b89\u5168\u7b49\u7279\u6027\uff0c\u6ee1\u8db3\u6d77\u91cf\u6570\u636e\u4e0a\u4f20\u3001\u9ad8 IO\uff08\u9ad8\u8bbf\u95ee\uff09\u3001\u9ad8\u53ef\u7528\u9700\u6c42\uff0c\u6ee1\u8db3\u5927\u6570\u636e\u4f01\u4e1a\u5e94\u7528\u80cc\u666f\u4e0b\u7684\u6570\u636e\u4f20\u8f93\u3001\u5904\u7406\u3001\u5b58\u50a8\u3001\u5206\u53d1\u4e0e\u5bb9\u707e\u9700\u6c42\u3002 \u57fa\u672c\u6982\u5ff5 \u00b6 \u670d\u52a1 \u4e00\u4e2a\u670d\u52a1\u76f8\u5f53\u4e8e\u4e00\u4e2a\u5b58\u50a8\u7a7a\u95f4\u6216\u5b58\u50a8\u5bb9\u5668\uff0c\u53ef\u4ee5\u5411\u91cc\u9762\u5b58\u653e\u975e\u7ed3\u6784\u5316\u6570\u636e\uff0c\u5982\u7f51\u9875\u3001\u56fe\u7247\u3001\u97f3\u9891\u3001\u89c6\u9891\u7b49\u3002 \u64cd\u4f5c\u5458 \u64cd\u4f5c\u5458\u662f\u60a8\u8bbf\u95ee\u4e91\u5b58\u50a8\u3001\u4e91\u5904\u7406\u7684\u51ed\u8bc1\uff0c\u5b83\u7531\u64cd\u4f5c\u5458\u540d\u79f0\u548c\u5bc6\u7801\u7ec4\u6210\uff0c\u64cd\u4f5c\u5458\u540d\u79f0\u7c7b\u4f3c\u8eab\u4efd\u6807\u8bc6\uff0c\u5bc6\u7801\u7684\u4f5c\u7528\u662f\u7b7e\u540d\u60a8\u7684\u8bbf\u95ee\u8bf7\u6c42\uff0c\u4ee5\u9632\u88ab\u7be1\u6539\u3002 \u7279\u522b\u5730\uff0c\u64cd\u4f5c\u5458\u4e0e\u670d\u52a1\u540d\u662f N:N \u7684\u5173\u7cfb\uff0c\u4e00\u4e2a\u670d\u52a1\u540d\u53ef\u4ee5\u6709\u591a\u4e2a\u64cd\u4f5c\u5458\uff0c\u4e00\u4e2a\u64cd\u4f5c\u5458\u53ef\u4ee5\u5f52\u5c5e\u4e8e\u591a\u4e2a\u670d\u52a1\u540d\u3002 \u64cd\u4f5c\u5458\u6743\u9650 \u64cd\u4f5c\u5458\u6743\u9650\u6709 3 \u79cd\uff0c\u5206\u522b\u662f\u53ef\u8bfb\u53d6\u3001\u53ef\u5199\u5165\u3001\u53ef\u5220\u9664\uff0c\u652f\u6301\u591a\u9009\u3002\u60a8\u53ef\u4ee5\u6839\u636e\u9700\u8981\uff0c\u4e3a\u64cd\u4f5c\u5458\u914d\u7f6e\u5408\u9002\u7684\u6743\u9650\uff1b\u4e5f\u53ef\u4ee5\u521b\u5efa\u591a\u4e2a\u64cd\u4f5c\u5458\uff0c\u4e3a\u4e0d\u540c\u64cd\u4f5c\u5458\u5206\u914d\u4e0d\u540c\u6743\u9650\uff0c\u4f9b\u4e0d\u540c\u7ea7\u522b\u7684\u4eba\u4f7f\u7528\u3002 \u8bbf\u95ee\u670d\u52a1 \u501f\u52a9\u670d\u52a1\u540d\u79f0\u3001\u64cd\u4f5c\u5458\uff0c\u53ef\u4ee5\u901a\u8fc7 FTP/FTPS \u3001 UPX \u3001API/SDK \u8bbf\u95ee\u4e91\u5b58\u50a8\uff0c\u7ba1\u7406\u60a8\u5728\u4e91\u5b58\u50a8\u7684\u6587\u4ef6\u3002 \u57fa\u7840\u67b6\u6784 \u00b6 \u4ea7\u54c1\u529f\u80fd \u00b6 \u4e0a\u4f20 \u4e0a\u4f20\u652f\u6301\u666e\u901a\u4e0a\u4f20\u3001\u8868\u5355\u4e0a\u4f20\uff08\u7f51\u9875\u76f4\u4f20\uff09\u3001\u6d41\u5f0f\u4e0a\u4f20\uff08\u8ffd\u52a0\u4e0a\u4f20\uff09\u3001\u65ad\u70b9\u7eed\u4f20\uff08\u5927\u6587\u4ef6\u4e0a\u4f20\uff09\u3002 \u4e0b\u8f7d \u4e0b\u8f7d\u652f\u6301\u666e\u901a\u4e0b\u8f7d\u3001\u6d41\u5f0f\u4e0b\u8f7d\u3002 \u76ee\u5f55 \u652f\u6301\u5217\u76ee\u5f55\uff0c\u652f\u6301\u5927\u91cf\u6587\u4ef6\u76ee\u5f55\u5206\u9875\u83b7\u53d6\u6587\u4ef6\u4fe1\u606f\u3002 \u5220\u9664 \u652f\u6301\u6587\u4ef6\u3001\u76ee\u5f55\u5220\u9664\uff0c\u652f\u6301\u6279\u91cf\u6587\u4ef6\u5f02\u6b65\u5220\u9664\u3002 \u5e94\u7528\u573a\u666f \u00b6 \u56fe\u7247\u3001\u70b9\u64ad\u97f3\u89c6\u9891\u3001\u6e38\u620f\u5ba2\u6237\u7aef\u7b49\u6d77\u91cf\u6587\u4ef6\u5b58\u50a8 \u56fe\u7247\u3001\u70b9\u64ad\u97f3\u89c6\u9891\u3001\u6e38\u620f\u5ba2\u6237\u7aef\u7b49\u6587\u4ef6\u901a\u8fc7 CDN \u5c31\u8fd1\u4e0a\u4f20\u3001\u4e0a\u4f20\u52a0\u901f\u4f20\u8f93\u5230\u4e91\u5b58\u50a8\uff0c\u8bbf\u95ee\u7684\u65f6\u5019\uff0c\u901a\u8fc7 CDN \u4f7f\u7528\u5927\u6587\u4ef6\u5206\u6bb5\u7f13\u5b58\u3001\u89c6\u9891\u62d6\u62c9\u3001\u94fe\u8def\u4f18\u5316\u7b49\u529f\u80fd\u8fdb\u884c\u5168\u7f51\u5206\u53d1\uff0c\u63d0\u9ad8\u6d77\u91cf\u6587\u4ef6\u4e0a\u4f20\u3001\u5206\u53d1\u901f\u5ea6\u3001\u8d28\u91cf\u3002\u8fd8\u53ef\u4ee5\u4f7f\u7528\u56fe\u7247\u5904\u7406\u3001\u70b9\u64ad\u5904\u7406\u3001\u6587\u4ef6\u538b\u7f29\u89e3\u538b\u7f29\u5bf9\u6587\u4ef6\u8fdb\u884c\u5904\u7406\u3002 \u7f51\u7ad9\u3001\u79fb\u52a8 APP \u7b49\u52a8\u9759\u6001\u8d44\u6e90\u5206\u79bb \u52a8\u6001\u8d44\u6e90\u5206\u79bb\u540e\uff0c\u80fd\u4e3a\u9759\u6001\u8d44\u6e90\u63d0\u4f9b\u66f4\u5feb\u3001\u66f4\u7a33\u5b9a\u7684\u4f20\u8f93\uff0c\u4e0d\u9700\u8003\u8651\u9759\u6001\u8d44\u6e90\u5feb\u901f\u589e\u957f\u5e26\u6765\u7684\u5b58\u50a8\u538b\u529b\uff0c\u964d\u4f4e\u7528\u6237\u8ba1\u7b97\u670d\u52a1\u7684\u590d\u6742\u5ea6\u3002 \u76f4\u64ad\u6587\u4ef6\u5b58\u50a8 \u6444\u50cf\u5934\u63a8\u7684\u76f4\u64ad\u6d41\uff0c\u901a\u8fc7 CDN \u6d41\u5f0f\u4e0a\u4f20\u3001\u76f4\u64ad\u8f6c\u5f55\u70b9\u64ad\u6587\u4ef6\u65b9\u5f0f\u628a\u6d41\u4e0a\u4f20\u5230\u4e91\u5b58\u50a8\uff0c\u5f53\u7528\u6237\u8fdb\u884c\u89c6\u9891\u5206\u4eab\u3001\u89c6\u9891\u56de\u653e\u65f6\uff0c\u901a\u8fc7 CDN \u7684\u6d41\u5f0f\u4e0b\u8f7d\u3001\u5927\u6587\u4ef6\u5206\u6bb5\u7f13\u5b58\u3001\u89c6\u9891\u62d6\u62c9\u7b49\u7279\u6027\uff0c\u628a\u89c6\u9891\u8fc5\u901f\u5c55\u73b0\u7ed9\u7528\u6237\u3002 \u4ea7\u54c1\u4f18\u52bf \u00b6 \u6d77\u91cf\u5b58\u50a8 \u53c8\u62cd\u4e91\u5b58\u50a8\u5355\u5b58\u50a8\u96c6\u7fa4\u652f\u6301 PB \u7ea7\u5bb9\u91cf\uff0c\u5355\u6570\u636e\u4e2d\u5fc3\u652f\u6301 EB \u7ea7\u5bb9\u91cf\uff0c\u5168\u7f51\u8f7b\u677e\u5e94\u5bf9 ZB \u7ea7\u7684\u5f02\u6784\u5316\u6570\u636e\u3002 \u5b89\u5168\u3001\u8010\u4e45 \u5c06\u4e00\u4efd\u6570\u636e\u5199\u4e09\u4efd\uff0c\u652f\u6301\u8de8\u6570\u636e\u4e2d\u5fc3\u5b58\u50a8\uff0c\u591a\u5c42\u7ea7 ACL \u53ca DDOS \u9632\u62a4\uff0c\u786e\u4fdd\u4e1a\u52a1\u7684\u7a33\u5b9a\uff0c\u6301\u4e45\u53ef\u4fe1\u3002 \u8d85\u4f4e\u6210\u672c \u652f\u6301\u6309\u4f7f\u7528\u91cf\u4ed8\u8d39\uff0c\u5e76\u63d0\u4f9b\u642d\u914d CDN \u4f7f\u7528\u6d41\u91cf 1:1 \u7684\u514d\u8d39\u5b58\u50a8\u5bb9\u91cf\uff0c\u4f7f\u7528\u6237\u5b58\u50a8\u6210\u672c\u66f4\u4f4e\u3002 \u65b9\u4fbf\u63a5\u5165\uff0c\u4e00\u952e\u8fc1\u79fb \u7279\u8272\u7684\u955c\u50cf\u8fc1\u79fb\u529f\u80fd\uff0c\u53ef\u4e00\u952e\u901a\u8fc7 CDN \u5c06\u6e90\u7ad9\u8d44\u6e90\u8fc1\u79fb\u5230\u53c8\u62cd\u4e91\u5b58\u50a8\uff0c\u53e6\u5916\u652f\u6301\u6587\u4ef6\u62c9\u53d6\u3001\u6587\u4ef6\u538b\u7f29\u89e3\u538b\u7f29\u3001 FTP \u529f\u80fd\uff0c\u8ba9\u4e91\u5b58\u50a8\u63a5\u5165\u548c\u4f7f\u7528\u66f4\u7b80\u5355\u3002 \u7075\u6d3b\u4e0a\u4f20 \u63d0\u4f9b RESTful API \u548c\u591a\u79cd\u8bed\u8a00\u7684 SDK \u5305\uff0c\u652f\u6301\u8868\u5355/\u5206\u5757/\u6d41\u5f0f/FTP \u4e0a\u4f20\uff0c\u65ad\u70b9\u7eed\u4f20\uff0c\u4ee5\u4fbf\u7528\u6237\u8f7b\u677e\u96c6\u6210\u3002 \u7b80\u5355\u6613\u7528 \u53c8\u62cd\u4e91\u5c06\u4ea7\u54c1\u529f\u80fd\u6574\u5408\uff0c\u63d0\u4f9b\u96c6 CDN\u3001\u4e91\u5b58\u50a8\u3001\u4e91\u5904\u7406\u4e8e\u4e00\u4f53\u7684\u573a\u666f\u5316\u89e3\u51b3\u65b9\u6848\uff0c\u5316\u7e41\u4e3a\u7b80\uff0c\u63a5\u5165\u65b9\u4fbf\u3002 \u6587\u6848\u7ea6\u5b9a \u00b6 \u5728\u60a8\u9605\u8bfb\u6587\u6863\u4e4b\u524d\uff0c\u8bf7\u5148\u719f\u6089\u6211\u4eec\u7684\u4e00\u4e9b\u7ea6\u5b9a\uff0c\u4ee5\u4fbf\u60a8\u7684\u7406\u89e3\u3002 \u66ff\u4ee3\u5b57\u7b26 \u6240\u6709\u7528\u5c16\u62ec\u53f7 <> \u5305\u56f4\u7684\u5b57\u7b26\uff0c\u5747\u4e3a\u9700\u8981\u6839\u636e\u5b9e\u9645\u60c5\u51b5\u505a\u66ff\u6362\u7684\u5730\u65b9\uff0c\u7279\u522b\u7684\uff0c <> \u4ec5\u4f5c\u4e3a\u6587\u6863\u4e2d\u5c06\u5176\u533a\u5206\u4e8e\u5176\u4ed6\u5b57\u7b26\uff0c\u60a8\u5728\u5b9e\u9645\u4f7f\u7528\u7684\u65f6\u5019\uff0c\u4e0d\u9700\u8981\u52a0\u4e0a <> \u3002 \u5982\u6709\u7591\u95ee\u8bf7 \u8054\u7cfb\u6211\u4eec","title":"\u4ea7\u54c1\u7b80\u4ecb"},{"location":"api/#_1","text":"\u53c8\u62cd\u4e91\u5b58\u50a8\u662f\u9762\u5411\u4e92\u8054\u7f51\u5e94\u7528\u7684\u5bf9\u8c61\u5b58\u50a8\u670d\u52a1\uff0c\u5177\u6709\u4f7f\u7528\u7b80\u5355\u3001\u9ad8\u53ef\u9760\u3001\u9ad8\u5b89\u5168\u7b49\u7279\u6027\uff0c\u6ee1\u8db3\u6d77\u91cf\u6570\u636e\u4e0a\u4f20\u3001\u9ad8 IO\uff08\u9ad8\u8bbf\u95ee\uff09\u3001\u9ad8\u53ef\u7528\u9700\u6c42\uff0c\u6ee1\u8db3\u5927\u6570\u636e\u4f01\u4e1a\u5e94\u7528\u80cc\u666f\u4e0b\u7684\u6570\u636e\u4f20\u8f93\u3001\u5904\u7406\u3001\u5b58\u50a8\u3001\u5206\u53d1\u4e0e\u5bb9\u707e\u9700\u6c42\u3002","title":"\u53c8\u62cd\u4e91\u5b58\u50a8\u4ecb\u7ecd"},{"location":"api/#_2","text":"\u670d\u52a1 \u4e00\u4e2a\u670d\u52a1\u76f8\u5f53\u4e8e\u4e00\u4e2a\u5b58\u50a8\u7a7a\u95f4\u6216\u5b58\u50a8\u5bb9\u5668\uff0c\u53ef\u4ee5\u5411\u91cc\u9762\u5b58\u653e\u975e\u7ed3\u6784\u5316\u6570\u636e\uff0c\u5982\u7f51\u9875\u3001\u56fe\u7247\u3001\u97f3\u9891\u3001\u89c6\u9891\u7b49\u3002 \u64cd\u4f5c\u5458 \u64cd\u4f5c\u5458\u662f\u60a8\u8bbf\u95ee\u4e91\u5b58\u50a8\u3001\u4e91\u5904\u7406\u7684\u51ed\u8bc1\uff0c\u5b83\u7531\u64cd\u4f5c\u5458\u540d\u79f0\u548c\u5bc6\u7801\u7ec4\u6210\uff0c\u64cd\u4f5c\u5458\u540d\u79f0\u7c7b\u4f3c\u8eab\u4efd\u6807\u8bc6\uff0c\u5bc6\u7801\u7684\u4f5c\u7528\u662f\u7b7e\u540d\u60a8\u7684\u8bbf\u95ee\u8bf7\u6c42\uff0c\u4ee5\u9632\u88ab\u7be1\u6539\u3002 \u7279\u522b\u5730\uff0c\u64cd\u4f5c\u5458\u4e0e\u670d\u52a1\u540d\u662f N:N \u7684\u5173\u7cfb\uff0c\u4e00\u4e2a\u670d\u52a1\u540d\u53ef\u4ee5\u6709\u591a\u4e2a\u64cd\u4f5c\u5458\uff0c\u4e00\u4e2a\u64cd\u4f5c\u5458\u53ef\u4ee5\u5f52\u5c5e\u4e8e\u591a\u4e2a\u670d\u52a1\u540d\u3002 \u64cd\u4f5c\u5458\u6743\u9650 \u64cd\u4f5c\u5458\u6743\u9650\u6709 3 \u79cd\uff0c\u5206\u522b\u662f\u53ef\u8bfb\u53d6\u3001\u53ef\u5199\u5165\u3001\u53ef\u5220\u9664\uff0c\u652f\u6301\u591a\u9009\u3002\u60a8\u53ef\u4ee5\u6839\u636e\u9700\u8981\uff0c\u4e3a\u64cd\u4f5c\u5458\u914d\u7f6e\u5408\u9002\u7684\u6743\u9650\uff1b\u4e5f\u53ef\u4ee5\u521b\u5efa\u591a\u4e2a\u64cd\u4f5c\u5458\uff0c\u4e3a\u4e0d\u540c\u64cd\u4f5c\u5458\u5206\u914d\u4e0d\u540c\u6743\u9650\uff0c\u4f9b\u4e0d\u540c\u7ea7\u522b\u7684\u4eba\u4f7f\u7528\u3002 \u8bbf\u95ee\u670d\u52a1 \u501f\u52a9\u670d\u52a1\u540d\u79f0\u3001\u64cd\u4f5c\u5458\uff0c\u53ef\u4ee5\u901a\u8fc7 FTP/FTPS \u3001 UPX \u3001API/SDK \u8bbf\u95ee\u4e91\u5b58\u50a8\uff0c\u7ba1\u7406\u60a8\u5728\u4e91\u5b58\u50a8\u7684\u6587\u4ef6\u3002","title":"\u57fa\u672c\u6982\u5ff5"},{"location":"api/#_3","text":"","title":"\u57fa\u7840\u67b6\u6784"},{"location":"api/#_4","text":"\u4e0a\u4f20 \u4e0a\u4f20\u652f\u6301\u666e\u901a\u4e0a\u4f20\u3001\u8868\u5355\u4e0a\u4f20\uff08\u7f51\u9875\u76f4\u4f20\uff09\u3001\u6d41\u5f0f\u4e0a\u4f20\uff08\u8ffd\u52a0\u4e0a\u4f20\uff09\u3001\u65ad\u70b9\u7eed\u4f20\uff08\u5927\u6587\u4ef6\u4e0a\u4f20\uff09\u3002 \u4e0b\u8f7d \u4e0b\u8f7d\u652f\u6301\u666e\u901a\u4e0b\u8f7d\u3001\u6d41\u5f0f\u4e0b\u8f7d\u3002 \u76ee\u5f55 \u652f\u6301\u5217\u76ee\u5f55\uff0c\u652f\u6301\u5927\u91cf\u6587\u4ef6\u76ee\u5f55\u5206\u9875\u83b7\u53d6\u6587\u4ef6\u4fe1\u606f\u3002 \u5220\u9664 \u652f\u6301\u6587\u4ef6\u3001\u76ee\u5f55\u5220\u9664\uff0c\u652f\u6301\u6279\u91cf\u6587\u4ef6\u5f02\u6b65\u5220\u9664\u3002","title":"\u4ea7\u54c1\u529f\u80fd"},{"location":"api/#_5","text":"\u56fe\u7247\u3001\u70b9\u64ad\u97f3\u89c6\u9891\u3001\u6e38\u620f\u5ba2\u6237\u7aef\u7b49\u6d77\u91cf\u6587\u4ef6\u5b58\u50a8 \u56fe\u7247\u3001\u70b9\u64ad\u97f3\u89c6\u9891\u3001\u6e38\u620f\u5ba2\u6237\u7aef\u7b49\u6587\u4ef6\u901a\u8fc7 CDN \u5c31\u8fd1\u4e0a\u4f20\u3001\u4e0a\u4f20\u52a0\u901f\u4f20\u8f93\u5230\u4e91\u5b58\u50a8\uff0c\u8bbf\u95ee\u7684\u65f6\u5019\uff0c\u901a\u8fc7 CDN \u4f7f\u7528\u5927\u6587\u4ef6\u5206\u6bb5\u7f13\u5b58\u3001\u89c6\u9891\u62d6\u62c9\u3001\u94fe\u8def\u4f18\u5316\u7b49\u529f\u80fd\u8fdb\u884c\u5168\u7f51\u5206\u53d1\uff0c\u63d0\u9ad8\u6d77\u91cf\u6587\u4ef6\u4e0a\u4f20\u3001\u5206\u53d1\u901f\u5ea6\u3001\u8d28\u91cf\u3002\u8fd8\u53ef\u4ee5\u4f7f\u7528\u56fe\u7247\u5904\u7406\u3001\u70b9\u64ad\u5904\u7406\u3001\u6587\u4ef6\u538b\u7f29\u89e3\u538b\u7f29\u5bf9\u6587\u4ef6\u8fdb\u884c\u5904\u7406\u3002 \u7f51\u7ad9\u3001\u79fb\u52a8 APP \u7b49\u52a8\u9759\u6001\u8d44\u6e90\u5206\u79bb \u52a8\u6001\u8d44\u6e90\u5206\u79bb\u540e\uff0c\u80fd\u4e3a\u9759\u6001\u8d44\u6e90\u63d0\u4f9b\u66f4\u5feb\u3001\u66f4\u7a33\u5b9a\u7684\u4f20\u8f93\uff0c\u4e0d\u9700\u8003\u8651\u9759\u6001\u8d44\u6e90\u5feb\u901f\u589e\u957f\u5e26\u6765\u7684\u5b58\u50a8\u538b\u529b\uff0c\u964d\u4f4e\u7528\u6237\u8ba1\u7b97\u670d\u52a1\u7684\u590d\u6742\u5ea6\u3002 \u76f4\u64ad\u6587\u4ef6\u5b58\u50a8 \u6444\u50cf\u5934\u63a8\u7684\u76f4\u64ad\u6d41\uff0c\u901a\u8fc7 CDN \u6d41\u5f0f\u4e0a\u4f20\u3001\u76f4\u64ad\u8f6c\u5f55\u70b9\u64ad\u6587\u4ef6\u65b9\u5f0f\u628a\u6d41\u4e0a\u4f20\u5230\u4e91\u5b58\u50a8\uff0c\u5f53\u7528\u6237\u8fdb\u884c\u89c6\u9891\u5206\u4eab\u3001\u89c6\u9891\u56de\u653e\u65f6\uff0c\u901a\u8fc7 CDN \u7684\u6d41\u5f0f\u4e0b\u8f7d\u3001\u5927\u6587\u4ef6\u5206\u6bb5\u7f13\u5b58\u3001\u89c6\u9891\u62d6\u62c9\u7b49\u7279\u6027\uff0c\u628a\u89c6\u9891\u8fc5\u901f\u5c55\u73b0\u7ed9\u7528\u6237\u3002","title":"\u5e94\u7528\u573a\u666f"},{"location":"api/#_6","text":"\u6d77\u91cf\u5b58\u50a8 \u53c8\u62cd\u4e91\u5b58\u50a8\u5355\u5b58\u50a8\u96c6\u7fa4\u652f\u6301 PB \u7ea7\u5bb9\u91cf\uff0c\u5355\u6570\u636e\u4e2d\u5fc3\u652f\u6301 EB \u7ea7\u5bb9\u91cf\uff0c\u5168\u7f51\u8f7b\u677e\u5e94\u5bf9 ZB \u7ea7\u7684\u5f02\u6784\u5316\u6570\u636e\u3002 \u5b89\u5168\u3001\u8010\u4e45 \u5c06\u4e00\u4efd\u6570\u636e\u5199\u4e09\u4efd\uff0c\u652f\u6301\u8de8\u6570\u636e\u4e2d\u5fc3\u5b58\u50a8\uff0c\u591a\u5c42\u7ea7 ACL \u53ca DDOS \u9632\u62a4\uff0c\u786e\u4fdd\u4e1a\u52a1\u7684\u7a33\u5b9a\uff0c\u6301\u4e45\u53ef\u4fe1\u3002 \u8d85\u4f4e\u6210\u672c \u652f\u6301\u6309\u4f7f\u7528\u91cf\u4ed8\u8d39\uff0c\u5e76\u63d0\u4f9b\u642d\u914d CDN \u4f7f\u7528\u6d41\u91cf 1:1 \u7684\u514d\u8d39\u5b58\u50a8\u5bb9\u91cf\uff0c\u4f7f\u7528\u6237\u5b58\u50a8\u6210\u672c\u66f4\u4f4e\u3002 \u65b9\u4fbf\u63a5\u5165\uff0c\u4e00\u952e\u8fc1\u79fb \u7279\u8272\u7684\u955c\u50cf\u8fc1\u79fb\u529f\u80fd\uff0c\u53ef\u4e00\u952e\u901a\u8fc7 CDN \u5c06\u6e90\u7ad9\u8d44\u6e90\u8fc1\u79fb\u5230\u53c8\u62cd\u4e91\u5b58\u50a8\uff0c\u53e6\u5916\u652f\u6301\u6587\u4ef6\u62c9\u53d6\u3001\u6587\u4ef6\u538b\u7f29\u89e3\u538b\u7f29\u3001 FTP \u529f\u80fd\uff0c\u8ba9\u4e91\u5b58\u50a8\u63a5\u5165\u548c\u4f7f\u7528\u66f4\u7b80\u5355\u3002 \u7075\u6d3b\u4e0a\u4f20 \u63d0\u4f9b RESTful API \u548c\u591a\u79cd\u8bed\u8a00\u7684 SDK \u5305\uff0c\u652f\u6301\u8868\u5355/\u5206\u5757/\u6d41\u5f0f/FTP \u4e0a\u4f20\uff0c\u65ad\u70b9\u7eed\u4f20\uff0c\u4ee5\u4fbf\u7528\u6237\u8f7b\u677e\u96c6\u6210\u3002 \u7b80\u5355\u6613\u7528 \u53c8\u62cd\u4e91\u5c06\u4ea7\u54c1\u529f\u80fd\u6574\u5408\uff0c\u63d0\u4f9b\u96c6 CDN\u3001\u4e91\u5b58\u50a8\u3001\u4e91\u5904\u7406\u4e8e\u4e00\u4f53\u7684\u573a\u666f\u5316\u89e3\u51b3\u65b9\u6848\uff0c\u5316\u7e41\u4e3a\u7b80\uff0c\u63a5\u5165\u65b9\u4fbf\u3002","title":"\u4ea7\u54c1\u4f18\u52bf"},{"location":"api/#_7","text":"\u5728\u60a8\u9605\u8bfb\u6587\u6863\u4e4b\u524d\uff0c\u8bf7\u5148\u719f\u6089\u6211\u4eec\u7684\u4e00\u4e9b\u7ea6\u5b9a\uff0c\u4ee5\u4fbf\u60a8\u7684\u7406\u89e3\u3002 \u66ff\u4ee3\u5b57\u7b26 \u6240\u6709\u7528\u5c16\u62ec\u53f7 <> \u5305\u56f4\u7684\u5b57\u7b26\uff0c\u5747\u4e3a\u9700\u8981\u6839\u636e\u5b9e\u9645\u60c5\u51b5\u505a\u66ff\u6362\u7684\u5730\u65b9\uff0c\u7279\u522b\u7684\uff0c <> \u4ec5\u4f5c\u4e3a\u6587\u6863\u4e2d\u5c06\u5176\u533a\u5206\u4e8e\u5176\u4ed6\u5b57\u7b26\uff0c\u60a8\u5728\u5b9e\u9645\u4f7f\u7528\u7684\u65f6\u5019\uff0c\u4e0d\u9700\u8981\u52a0\u4e0a <> \u3002 \u5982\u6709\u7591\u95ee\u8bf7 \u8054\u7cfb\u6211\u4eec","title":"\u6587\u6848\u7ea6\u5b9a"},{"location":"api/authorization/","text":"\u57fa\u672c\u8ba4\u8bc1 \u00b6 curl -u <operator>:<password> http://v0.api.upyun.com/<bucket>/ \u6216\u8005\uff0c\u5c06\u64cd\u4f5c\u5458\u540d\u548c\u64cd\u4f5c\u5458\u7684\u5bc6\u7801\u6309 operator:password \u62fc\u63a5 Base64 \u7f16\u7801\u540e\u52a0\u5728\u8bf7\u6c42\u5934\u7684 Authorization \u5b57\u6bb5\u4e2d\uff1a curl -X GET \\ http://v0.api.upyun.com/<bucket>/ \\ -H \"Authorization: Basic b3BlcmF0b3I6cGFzc3dvcmQ=\" \u7279\u522b\u5730\uff0c HTTP \u57fa\u672c\u8ba4\u8bc1 \u91c7\u7528 Base64 \u7f16\u7801\u548c\u4f20\u8f93\u64cd\u4f5c\u5458\u4fe1\u606f\uff0c\u5b58\u5728\u64cd\u4f5c\u5458\u4fe1\u606f\u6cc4\u9732\u7684\u98ce\u9669\u3002 \u7b7e\u540d\u8ba4\u8bc1 \u00b6 \u4e3a\u4e86\u907f\u514d\u57fa\u672c\u8ba4\u8bc1\u4e2d Base64 \u7f16\u7801\u53ef\u9006\u5e26\u6765\u7684\u5b89\u5168\u9690\u60a3\uff0c\u53c8\u62cd\u4e91\u63d0\u4f9b\u4e86\u7b7e\u540d\u8ba4\u8bc1\u8fd9\u79cd\u66f4\u5b89\u5168\u7684\u8ba4\u8bc1\u65b9\u5f0f\u3002\u5b83\u7ed3\u5408\u8bf7\u6c42\u5173\u952e\u4fe1\u606f\u548c\u7528\u6237\u8eab\u4efd\u4fe1\u606f\uff0c\u8ba1\u7b97\u4e00\u4e2a\u6d88\u606f\u6458\u8981\uff0c\u4f5c\u4e3a\u8bf7\u6c42\u7684 Authorization\uff0c\u4fdd\u8bc1\u8bf7\u6c42\u7684\u5b89\u5168\u3002 \u653e\u5728 HTTP Header \u4e2d \u00b6 \u8ba4\u8bc1\u4fe1\u606f Authorization \u653e\u5728 Header \u4e2d\uff0c\u5728\u4e91\u5b58\u50a8\u7684 API \u4e2d\uff0cREST API \u4ee5\u53ca FORM API \u7684\u56de\u8c03\u901a\u77e5\u4f7f\u7528\u8fd9\u79cd\u65b9\u5f0f\u3002 ** \u7b7e\u540d\u8ba1\u7b97\u65b9\u6cd5 ** Authorization: UPYUN <Operator>:<Signature> <Signature> = Base64 (HMAC-SHA1 (<Password>, <Method>& <URI>& <Date>& <Content-MD5> )) \u76f8\u5173\u53c2\u6570\u8bf4\u660e\uff1a \u53c2\u6570 \u5fc5\u9009 \u8bf4\u660e Operator \u662f \u670d\u52a1\u7684\u64cd\u4f5c\u5458\u540d\u79f0 Method \u662f \u8bf7\u6c42\u65b9\u5f0f\uff0c\u5982\uff1aGET\u3001POST\u3001PUT\u3001HEAD \u7b49 URI \u662f \u8bf7\u6c42\u8def\u5f84 Date \u662f \u8bf7\u6c42\u65e5\u671f\u65f6\u95f4\uff0cGMT \u683c\u5f0f\u5b57\u7b26\u4e32 ( RFC 1123 )\uff0c\u5982 Wed, 29 Oct 2014 02:26:58 GMT Content-MD5 \u5426 \u8bf7\u6c42\u4f53\u7684 MD5 \u503c\uff0c\u5982\u679c\u6587\u4ef6\u592a\u5927\u8ba1\u7b97 MD5 \u4e0d\u65b9\u4fbf\u6216\u8bf7\u6c42\u4f53\u4e3a\u7a7a\uff0c\u53ef\u4ee5\u4e3a\u7a7a Password \u662f \u670d\u52a1\u7684\u64cd\u4f5c\u5458\u5bc6\u7801\u7684 MD5 \u503c ** \u6ce8 ** \u975e\u5fc5\u9009\u53c2\u6570\u4e3a\u7a7a\u65f6\uff0c\u8fde\u540c\u540e\u9762\u7684 & \u4e00\u8d77\u4e0d\u53c2\u4e0e\u7b7e\u540d\u8ba1\u7b97\u3002\u6240\u6709\u8ba1\u7b97\u7684 MD5 \u503c\uff0c\u683c\u5f0f\u5747\u662f 32 \u4f4d\u5c0f\u5199\u3002 HMAC-SHA1 \u8f93\u51fa\u7684\u5fc5\u987b\u662f \u539f\u751f\u7684\u4e8c\u8fdb\u5236\u6570\u636e \u3002 Date \u7528\u4e8e\u9a8c\u8bc1\u8be5\u7b7e\u540d\u662f\u5426\u6709\u6548\uff0cREST API \u7b7e\u540d\u6709\u6548\u65f6\u95f4\u4e3a\u8bf7\u6c42\u65f6\u95f4\u8d77\u7684 30 \u5206\u949f\u5185\uff1bFORM API \u56de\u8c03\u901a\u77e5\u7b7e\u540d\u6709\u6548\u671f\u7531\u7528\u6237\u81ea\u884c\u786e\u5b9a\uff0c\u5efa\u8bae\u8bbe\u7f6e\u4e3a 30 \u5206\u949f\u3002 ** \u4e3e\u4f8b ** REST API \u4e0a\u4f20\u6587\u4ef6 \u8bf7\u6c42\u7b7e\u540d // \u64cd\u4f5c\u5458\u4fe1\u606f Operator = operator123 Password = MD5(password123) = 482c811da5d5b4bc6d497ffa98491e38 // \u53c2\u6570\u4fe1\u606f Method = PUT URI = /upyun-temp/demo.jpg Date = Wed, 09 Nov 2016 14:26:58 GMT // \u4e0a\u4f20\u6587\u4ef6\u7684 MD5 Content-MD5 = 7ac66c0f148de9519b8bd264312c4d64 \u751f\u6210 Signature\uff1a Signature = Base64 (HMAC-SHA1 (<Password>, <Method>& <URI>& <Date>& <Content-MD5> )) = Base64 (HMAC-SHA1 (482c811da5d5b4bc6d497ffa98491e38,PUT&/upyun-temp/demo.jpg&Wed, 09 Nov 2016 14:26:58 GMT&7ac66c0f148de9519b8bd264312c4d64)) // HMAC-SHA1 \u8fd4\u56de\u7684\u539f\u751f\u4e8c\u8fdb\u5236\u6570\u636e\u8fdb\u884c Base64 \u7f16\u7801 = YUaAZX+WNAcJdNGHS5SBlITME5A= Authorization \u7b7e\u540d\uff1a Authorization: UPYUN operator123:YUaAZX+WNAcJdNGHS5SBlITME5A= \u8bf7\u6c42 Header\uff1a PUT /upyun-temp/demo.jpg HTTP/1.1 Authorization: UPYUN operator123:YUaAZX+WNAcJdNGHS5SBlITME5A= Content-MD5: 7ac66c0f148de9519b8bd264312c4d64 Date: Wed, 09 Nov 2016 14:26:58 GMT Content-Type: image/jpeg Host: v0.api.upyun.com Content-Length: 33456 FORM API \u56de\u8c03\u901a\u77e5 \u7b7e\u540d // \u64cd\u4f5c\u5458\u4fe1\u606f Operator = operator123 Password = MD5(password123) = 482c811da5d5b4bc6d497ffa98491e38 // \u53c2\u6570\u4fe1\u606f Method = POST URI = /upyun_notify_url Date = Wed, 09 Nov 2016 14:26:58 GMT Content-MD5 = MD5(code=200&message=ok&url=%2F2011%2F12%2Ffd0e30047f81fa95.mp3&time=1478701618) = e861f9f2ccd323df87b975904ccf19bb \u751f\u6210 Signature\uff1a Signature = Base64 (HMAC-SHA1 (<Password>, <Method>& <URI>& <Date>& <Content-MD5> )) = Base64 (HMAC-SHA1 (482c811da5d5b4bc6d497ffa98491e38,POST&/upyun_notify_url&Wed, 09 Nov 2016 14:26:58 GMT&e861f9f2ccd323df87b975904ccf19bb)) // HMAC-SHA1 \u8fd4\u56de\u7684\u539f\u751f\u4e8c\u8fdb\u5236\u6570\u636e\u8fdb\u884c Base64 \u7f16\u7801 = 8wTKBjONUWG+Zwzxo8EpJISy95E= Authorization \u7b7e\u540d\uff1a Authorization: UPYUN operator123:8wTKBjONUWG+Zwzxo8EpJISy95E= \u5b8c\u6574\u7684\u8bf7\u6c42\uff1a POST /upyun_notify_url HTTP/1.1 Authorization: UPYUN operator123:8wTKBjONUWG+Zwzxo8EpJISy95E= Content-MD5: e861f9f2ccd323df87b975904ccf19bb Date: Wed, 09 Nov 2016 14:26:58 GMT Content-Type: application/x-www-form-urlencoded;charset=utf-8 code=200&message=ok&url=%2F2011%2F12%2Ffd0e30047f81fa95.mp3&time=1478701618 \u653e\u5728 HTTP Body \u4e2d \u00b6 \u8ba4\u8bc1\u4fe1\u606f Authorization \u653e\u5728 Body \u4e2d\uff0c\u5728\u4e91\u5b58\u50a8\u7684 API \u4e2d\uff0cFORM API \u7684\u4e0a\u4f20\u6587\u4ef6\u4f7f\u7528\u8fd9\u79cd\u65b9\u5f0f\u3002 ** \u7b7e\u540d\u8ba1\u7b97\u65b9\u6cd5 ** authorization=UPYUN <Operator>:<Signature> <Signature> = Base64 (HMAC-SHA1 (<Password>, <Method>& <URI>& <Date>& <Policy>& <Content-MD5> )) \u76f8\u5173\u53c2\u6570\u8bf4\u660e\uff1a \u53c2\u6570 \u5fc5\u9009 \u8bf4\u660e Operator \u662f \u670d\u52a1\u7684\u64cd\u4f5c\u5458\u540d\u79f0 Method \u662f \u8bf7\u6c42\u65b9\u5f0f\uff0c\u5982\uff1aGET\u3001POST\u3001PUT\u3001HEAD \u7b49 URI \u662f \u8bf7\u6c42\u8def\u5f84 Date \u5426 \u8bf7\u6c42\u65e5\u671f\u65f6\u95f4\uff0cGMT \u683c\u5f0f\u5b57\u7b26\u4e32 ( RFC 1123 )\uff0c\u5982 Wed, 29 Oct 2014 02:26:58 GMT Policy \u662f \u4e0a\u4f20\u53c2\u6570 \u7684 Base64 \u7f16\u7801\uff0c\u8be6\u89c1 Policy \u7b97\u6cd5 Content-MD5 \u5426 \u4e0a\u4f20\u6587\u4ef6\u7684 MD5 \u503c Password \u662f \u670d\u52a1\u7684\u64cd\u4f5c\u5458\u5bc6\u7801\u7684 MD5 \u503c ** \u6ce8 ** \u975e\u5fc5\u9009\u53c2\u6570\u4e3a\u7a7a\u65f6\uff0c\u8fde\u540c\u540e\u9762\u7684 & \u4e00\u8d77\u4e0d\u53c2\u4e0e\u7b7e\u540d\u8ba1\u7b97\u3002\u6240\u6709\u8ba1\u7b97\u7684 MD5 \u503c\uff0c\u683c\u5f0f\u5747\u662f 32 \u4f4d\u5c0f\u5199\u3002 HMAC-SHA1 \u8f93\u51fa\u7684\u5fc5\u987b\u662f \u539f\u751f\u7684\u4e8c\u8fdb\u5236\u6570\u636e \u3002 \u81ea\u5b9a\u4e49\u7b7e\u540d\u6709\u6548\u671f\uff0c\u5efa\u8bae\u4e3a 30 \u5206\u949f\u3002\u5982\u679c\u7b7e\u540d\u8d85\u8fc7\u6709\u6548\u671f\uff0c\u9700\u8981\u91cd\u65b0\u751f\u6210\u7b7e\u540d\u3002 ** Policy \u7b97\u6cd5 ** \u751f\u6210\u6b65\u9aa4\uff1a \u5c06 \u4e0a\u4f20\u53c2\u6570 \u952e\u503c\u5bf9\u8f6c\u6362\u4e3a JSON \u5b57\u7b26\u4e32\uff1b \u5c06\u7b2c 1 \u6b65\u6240\u5f97\u5230\u7684\u5b57\u7b26\u4e32\u8fdb\u884c Base64 Encode \u5904\u7406\uff0c\u5f97\u5230 policy\u3002 ** \u6ce8 ** \u53c2\u6570\u548c\u53c2\u6570\u503c\u5fc5\u987b\u662f UTF-8 \u7f16\u7801\uff0c\u4e14\u4e0d\u5305\u542b\u6362\u884c\u7b26\u3002 \u53c2\u6570 date \u548c content-md5 \u5c31\u662f\u7b7e\u540d\u4e2d\u7684 Date \u548c Content-MD5 \u3002 ** \u4e3e\u4f8b ** FORM API \u4e0a\u4f20\u6587\u4ef6 \u8bf7\u6c42\u7b7e\u540d // \u64cd\u4f5c\u5458\u4fe1\u606f Operator = operator123 Password = MD5(password123) = 482c811da5d5b4bc6d497ffa98491e38 // \u53c2\u6570 Method = POST URI = /upyun-temp // \u4e0a\u4f20\u53c2\u6570\uff0c\u9700\u8981\u8ba1\u7b97 Policy bucket = upyun-temp save-key = /demo.jpg expiration = 1478674618 date = Wed, 09 Nov 2016 14:26:58 GMT content-md5 = 7ac66c0f148de9519b8bd264312c4d64 \u751f\u6210 Policy\uff1a Policy = Base64 ({\"bucket\": \"upyun-temp\", \"save-key\": \"/demo.jpg\", \"expiration\": \"1478674618\", \"date\": \"Wed, 09 Nov 2016 14:26:58 GMT\", \"content-md5\": \"7ac66c0f148de9519b8bd264312c4d64\"}) = eyJidWNrZXQiOiAidXB5dW4tdGVtcCIsICJzYXZlLWtleSI6ICIvZGVtby5qcGciLCAiZXhwaXJhdGlvbiI6ICIxNDc4Njc0NjE4IiwgImRhdGUiOiAiV2VkLCA5IE5vdiAyMDE2IDE0OjI2OjU4IEdNVCIsICJjb250ZW50LW1kNSI6ICI3YWM2NmMwZjE0OGRlOTUxOWI4YmQyNjQzMTJjNGQ2NCJ9 \u751f\u6210 Signature\uff1a Signature = Base64 (HMAC-SHA1 (<Password>, <Method>& <URI>& <Date>& <Policy>& <Content-MD5> )) = Base64 (HMAC-SHA1 (482c811da5d5b4bc6d497ffa98491e38,POST&/upyun-temp&Wed, 09 Nov 2016 14:26:58 GMT&eyJidWNrZXQiOiAidXB5dW4tdGVtcCIsICJzYXZlLWtleSI6ICIvZGVtby5qcGciLCAiZXhwaXJhdGlvbiI6ICIxNDc4Njc0NjE4IiwgImRhdGUiOiAiV2VkLCA5IE5vdiAyMDE2IDE0OjI2OjU4IEdNVCIsICJjb250ZW50LW1kNSI6ICI3YWM2NmMwZjE0OGRlOTUxOWI4YmQyNjQzMTJjNGQ2NCJ9&7ac66c0f148de9519b8bd264312c4d64)) // HMAC-SHA1 \u8fd4\u56de\u7684\u539f\u751f\u4e8c\u8fdb\u5236\u6570\u636e\u8fdb\u884c Base64 \u7f16\u7801 = DTGOeaCa1yk1JWG4G3DH+u5sI5M= Authorization \u7b7e\u540d\uff1a authorization=UPYUN operator123:DTGOeaCa1yk1JWG4G3DH+u5sI5M= \u5b8c\u6574\u7684\u8bf7\u6c42\uff1a POST /upyun-temp HTTP/1.1 Host: v0.api.upyun.com Content-Type:multipart/form-data; boundary=\u2014\u2014WebKitFormBoundaryE19zNvXGzXaLvS5C ----WebKitFormBoundaryE19zNvXGzXaLvS5C Content-Disposition: form-data; name=\"policy\" eyJidWNrZXQiOiAidXB5dW4tdGVtcCIsICJzYXZlLWtleSI6ICIvZGVtby5qcGciLCAiZXhwaXJhdGlvbiI6ICIxNDc4Njc0NjE4IiwgImRhdGUiOiAiV2VkLCA5IE5vdiAyMDE2IDE0OjI2OjU4IEdNVCIsICJjb250ZW50LW1kNSI6ICI3YWM2NmMwZjE0OGRlOTUxOWI4YmQyNjQzMTJjNGQ2NCJ9&file= ----WebKitFormBoundaryE19zNvXGzXaLvS5C Content-Disposition: form-data; name=\"file\"; filename=\"demo.jpg\" def ----WebKitFormBoundaryE19zNvXGzXaLvS5C Content-Disposition: form-data; name=\"authorization\" UPYUN operator123:DTGOeaCa1yk1JWG4G3DH+u5sI5M= ----WebKitFormBoundaryE19zNvXGzXaLvS5C token \u8ba4\u8bc1 \u00b6 \u7269\u8054\u7f51\u3001\u79fb\u52a8\u4e92\u8054\u7f51\u7b49\u884c\u4e1a\uff0c\u4e3a\u4e86\u533a\u5206\u4e0d\u540c\u7ec8\u7aef\uff0c\u63d0\u5347\u8ba4\u8bc1\u5b89\u5168\u6027\uff0c\u5728 REST API \u4e0a\u6dfb\u52a0\u4e86 token \u8ba4\u8bc1\uff0c\u4f7f\u7528 token \u8ba4\u8bc1\u53ef\u4ee5\u4e3a\u6bcf\u4e2a\u7ec8\u7aef\u7b7e\u53d1 \u4e00\u4e2a\u72ec\u7acb\u7684\u6709\u8fc7\u671f\u65f6\u95f4\u7684 \u201c\u5bc6\u7801\u201d\u3002 token \u8ba4\u8bc1\u7684\u751f\u6210\u903b\u8f91 \u00b6 \u4f7f\u7528\u7ec8\u7aef\u4e0a\u4f20\u6587\u4ef6\u7684\u6807\u8bc6\u4fe1\u606f\uff0c\u8ba1\u7b97 token\u3002 Server \u7aef\u751f\u6210 token\u3002 \u7ec8\u7aef\u7f13\u5b58 token\uff0c\u5728\u6709\u6548\u671f\u5185\u7684\u4e0a\u4f20\u6587\u4ef6\u8bf7\u6c42\uff0c\u90fd\u53ef\u4ee5\u4f7f\u7528\u8be5 token\u3002 \u7ec8\u7aef\u4e0a\u4f20\u6587\u4ef6\uff0c\u8bf7\u6c42\u4e2d\u9644\u5e26 token\u3002\u5982\u679c token \u6b63\u786e\u4e14\u5728\u6709\u6548\u671f\u5185\uff0c\u9a8c\u8bc1\u901a\u8fc7\uff0c\u5141\u8bb8\u4e0a\u4f20\u6587\u4ef6\uff1b\u5426\u5219\uff0c\u62d2\u7edd\u4e0a\u4f20\uff0c\u8fd4\u56de\u9519\u8bef\u7801 401 \u3002 token \u8ba4\u8bc1\u751f\u6210 \u00b6 ** \u51c6\u5907\u5de5\u4f5c ** \u51c6\u5907\u7528\u4e8e\u8fd0\u884c token \u751f\u6210\u7a0b\u5e8f\u7684 Server\u3002 \u51c6\u5907 Operator\u3001Password\uff0c\u5373\u64cd\u4f5c\u5458\u4fe1\u606f\u3002 ** token \u8ba4\u8bc1\u8ba1\u7b97\u65b9\u6cd5 ** Authorization: UPYUN <Operator>:<token> <token> = Base64 (HMAC-SHA1 (<Password>, <Method>& <X-Upyun-Uri-Prefix>& <X-Upyun-Uri-Postfix>& <X-Upyun-Expire> )) \u76f8\u5173\u53c2\u6570\u8bf4\u660e\uff1a \u53c2\u6570 \u5fc5\u9009 \u8bf4\u660e Operator \u662f \u670d\u52a1\u7684\u64cd\u4f5c\u5458\u540d\u79f0 Method \u662f \u8bf7\u6c42\u65b9\u5f0f\uff0c\u5982\uff1aGET\u3001POST\u3001PUT\u3001HEAD \u7b49 X-Upyun-Uri-Prefix \u5426 \u4f7f\u7528\u8bf7\u6c42\u8def\u5f84\u4e2d\u524d\u9762\u90e8\u5206\u8ba1\u7b97 token\uff0c\u548c\u4e0b\u4e00\u4e2a\u53c2\u6570\u662f\u4e00\u7ec4\uff0c\u4e24\u4e2a\u5fc5\u987b\u586b\u4e00\u4e2a\uff0c\u5141\u8bb8\u4e24\u4e2a\u90fd\u586b X-Upyun-Uri-Postfix \u5426 \u4f7f\u7528\u8bf7\u6c42\u8def\u5f84\u4e2d\u540e\u9762\u90e8\u5206\u8ba1\u7b97 token\uff0c\u548c\u4e0a\u4e00\u4e2a\u53c2\u6570\u662f\u4e00\u7ec4\uff0c\u4e24\u4e2a\u5fc5\u987b\u586b\u4e00\u4e2a\uff0c\u5141\u8bb8\u4e24\u4e2a\u90fd\u586b X-Upyun-Expire \u662f token \u7684\u8fc7\u671f\u65f6\u95f4\uff0cUNIX UTC \u65f6\u95f4\u6233\uff0c\u5355\u4f4d\u79d2\uff0c\u5efa\u8bae 3 \u4e2a\u6708 Password \u662f \u670d\u52a1\u7684\u64cd\u4f5c\u5458\u5bc6\u7801\u7684 MD5 \u503c ** \u6ce8 ** \u975e\u5fc5\u9009\u53c2\u6570\u4e3a\u7a7a\u65f6\uff0c\u8fde\u540c\u540e\u9762\u7684 & \u4e00\u8d77\u4e0d\u53c2\u4e0e\u7b7e\u540d\u8ba1\u7b97\u3002\u6240\u6709\u8ba1\u7b97\u7684 MD5 \u503c\uff0c\u683c\u5f0f\u5747\u662f 32 \u4f4d\u5c0f\u5199\u3002 HMAC-SHA1 \u8f93\u51fa\u7684\u5fc5\u987b\u662f \u539f\u751f\u7684\u4e8c\u8fdb\u5236\u6570\u636e \u3002 ** \u4e3e\u4f8b ** // \u64cd\u4f5c\u5458\u4fe1\u606f Operator = operator123 Password = MD5(password123) = 482c811da5d5b4bc6d497ffa98491e38 // \u53c2\u6570\u4fe1\u606f Method = PUT X-Upyun-Uri-Prefix = /bucket/client_37ascii // \u7ec8\u7aef\u8bbe\u5907\u7684\u6807\u8bc6\u524d\u7f00 \uff08\u4e5f\u53ef\u4ee5\u662f\u5b58\u50a8\u4e0a\u7684\u4e00\u4e2a\u76ee\u5f55\uff0c\u5982 /client_37ascii/ \uff09 X-Upyun-Expire = 1528531186 // \u8fc7\u671f\u65f6\u95f4\uff1a2018/6/9 15:59:46 \u751f\u6210 Token\uff1a Token = Base64 (HMAC-SHA1 (<Password>, <Method>& <X-Upyun-Uri-Prefix>& <X-Upyun-Expire> )) = Base64 (HMAC-SHA1 (482c811da5d5b4bc6d497ffa98491e38,PUT&/bucket/client_37ascii&1528531186)) // HMAC-SHA1 \u8fd4\u56de\u7684\u539f\u751f\u4e8c\u8fdb\u5236\u6570\u636e\u8fdb\u884c Base64 \u7f16\u7801 = P2UZNhjF+wB4MPq8ONSFU2aVW+8= Authorization \u7b7e\u540d\uff1a Authorization: UPYUN operator123:P2UZNhjF+wB4MPq8ONSFU2aVW+8= \u7ec8\u7aef\u4e0a\u4f20\u6587\u4ef6\u8bf7\u6c42 Header\uff1a PUT /bucket/client_37ascii_xxx.jpg HTTP/1.1 Authorization: UPYUN operator123:P2UZNhjF+wB4MPq8ONSFU2aVW+8= X-Upyun-Uri-Prefix = /bucket/client_37ascii X-Upyun-Expire = 1528531186 Date: Tue, 09 Jan 2018 15:39:40 GMT Content-Type: image/jpeg Host: v0.api.upyun.com Content-Length: 33456 \u4ee3\u7801\u6f14\u793a \u00b6 \u6ce8\u610f\u4e8b\u9879 \u00b6 \u672c\u793a\u4f8b\u9002\u7528\u4e8e\u4e91\u5b58\u50a8\uff0c\u4e91\u5904\u7406\uff0c\u5185\u5bb9\u8bc6\u522b\uff0c\u5bb9\u5668\u4e91\u670d\u52a1\u3002 \u4f7f\u7528\u65f6\uff0c\u6839\u636e\u81ea\u5df1\u7684\u9700\u6c42\u548c\u914d\u7f6e\uff0c\u4fee\u6539\u5bf9\u5e94\u53c2\u6570: key \uff0c secret \uff0c uri \uff0c method \uff0c policy \uff0c md5 \u3002 \u672c\u793a\u4f8b\u4f7f\u7528\u7684 key \u548c secret \u5728\u4e0d\u540c\u670d\u52a1\u4e2d\u7684\u542b\u4e49\u4e0d\u4e00\u6837\uff0c\u4e91\u5b58\u50a8\u3001\u4e91\u5904\u7406\u3001\u5185\u5bb9\u8bc6\u522b(\u6709\u5b58\u50a8) \u4e2d\u8868\u793a Operator \u548c Password \uff0c \u5185\u5bb9\u8bc6\u522b(\u65e0\u5b58\u50a8)\u3001\u5bb9\u5668\u4e91\u8868\u793a\u5404\u81ea\u670d\u52a1\u63d0\u4f9b\u7684 ClientKey \u548c ClientSecret \u3002 \u6839\u636e\u5bf9\u5e94 API \u6587\u6863\u8bf4\u660e\uff0c\u628a\u8ba4\u8bc1\u4fe1\u606f\uff0c\u586b\u5165\u76f8\u5e94\u7684 http \u8bf7\u6c42\u4fe1\u606f\u4e2d\u3002 \u4f7f\u7528 form API \u4e0a\u4f20\u65f6\uff0c\u9700\u8981\u7528\u6237\u751f\u6210 policy \uff0c\u672c\u793a\u4f8b\u4e0d\u63d0\u4f9b\u751f\u6210 policy \u7684\u4f7f\u7528\u5b9e\u4f8b\u3002 \u5e38\u7528\u8bed\u8a00\u4ee3\u7801\u793a\u4f8b \u00b6 go \u4ee3\u7801\u6f14\u793a \u00b6 package main import ( \"crypto/hmac\" \"crypto/md5\" \"crypto/sha1\" \"encoding/base64\" \"fmt\" \"strings\" \"time\" ) var ( key = \"upyun\" secret = \"secret\" // \u5bf9\u4e8e\u4e0a\u4f20\uff0c\u5904\u7406\uff0c\u8ddf\u5185\u5bb9\u8bc6\u522b\u9700\u8981MD5\u52a0\u5bc6 uri = \"/v1/apps/\" method = \"GET\" ) func md5Str(s string) string { return fmt.Sprintf(\"%x\", md5.Sum([]byte(s))) } func makeRFC1123Date(d time.Time) string { utc := d.UTC().Format(time.RFC1123) return strings.Replace(utc, \"UTC\", \"GMT\", -1) } func base64ToStr(b []byte) string { return base64.StdEncoding.EncodeToString(b) } func sign(key, secret, method, uri, date, policy, md5 string) string { mac := hmac.New(sha1.New, []byte(secret)) elems := []string{} for _, v := range []string{method, uri, date, policy, md5} { if v != \"\" { elems = append(elems, v) } } value := strings.Join(elems, \"&\") fmt.Println(value) mac.Write([]byte(value)) signStr := base64ToStr(mac.Sum(nil)) return \"UPYUN \" + key + \":\" + signStr } func main() { date := makeRFC1123Date(time.Now()) fmt.Println(date) fmt.Println(md5Str(secret)) // \u4e0a\u4f20\uff0c\u5904\u7406\uff0c\u5185\u5bb9\u8bc6\u522b\u6709\u5b58\u50a8 fmt.Println(sign(key, md5Str(secret), method, uri, date, \"\", \"\")) // \u5bb9\u5668\u4e91\uff0c\u5185\u5bb9\u8bc6\u522b\u65e0\u5b58\u50a8 fmt.Println(sign(key, secret, method, uri, date, \"\", \"\")) } python \u4ee3\u7801\u6f14\u793a \u00b6 # -*- coding: UTF-8 -*- import base64 import datetime import hashlib import hmac # Tip 1 # \u4f7f\u7528\u65f6\u9700\u8981\u6839\u636e\u81ea\u5df1\u914d\u7f6e\u4e0e\u9700\u6c42\u63d0\u4f9b\u53c2\u6570 key secret uri method key = 'upyun' secret = 'secret' uri = '/v1/apps/' method = 'GET' def httpdate_rfc1123(dt=None): dt = dt or datetime.datetime.utcnow() return dt.strftime('%a, %d %b %Y %H:%M:%S GMT') def md5(value): return hashlib.md5(value.encode()).hexdigest() def sign(client_key, client_secret, method, uri, date, policy=None, md5=None): # Tip 4 # MD5 \u4fe1\u606f\u53ef\u9009 signarr = [] for v in [method, uri, date, policy, md5]: if v != None: signarr.append(v) signstr = '&'.join(signarr) signstr = base64.b64encode( hmac.new(client_secret.encode(), signstr.encode(), digestmod=hashlib.sha1).digest() ).decode() return 'UPYUN %s:%s' % (client_key, signstr) def main(): # Tip 2 # \u65f6\u95f4\u9700\u8981\u4e0e http \u5934 Date \u4fe1\u606f\u4fdd\u6301\u4e00\u81f4 # date = httpdate_rfc1123() date = 'Thu, 14 Dec 2017 06:03:27 GMT' # Tip 3 # sign \u51fd\u6570\u8fd4\u56de\u7684\u503c\u586b\u5165 http \u5934 Authorization \u4fe1\u606f\u4e2d print date print md5(secret) # \u4e0a\u4f20\uff0c\u5904\u7406\uff0c\u5185\u5bb9\u8bc6\u522b\u6709\u5b58\u50a8 print sign(key, md5(secret), method, uri, date) # \u5185\u5bb9\u8bc6\u522b\u65e0\u5b58\u50a8\uff0c\u5bb9\u5668\u4e91 print sign(key, secret, method, uri, date) if __name__ == '__main__': main() js \u4ee3\u7801\u6f14\u793a \u00b6 var crypto = require('crypto'); function sign(key, secret, method, uri, date, policy=null, md5=null) { elems = []; [method, uri, date, policy, md5].forEach(item => { if (item != null) { elems.push(item) } }) value = elems.join('&'); auth = hmacsha1(secret, value); return `UPYUN ${key}:${auth}`; } function MD5(value) { return crypto.createHash('md5').update(value).digest('hex'); } function hmacsha1(secret, value) { return crypto.createHmac('sha1', secret).update(value, 'utf-8').digest().toString('base64'); } date = new Date().toGMTString(); console.log(date); key = 'upyun'; secret = 'secret'; method = 'GET'; uri = '/v1/apps/'; console.log(MD5('secret')); // \u4e0a\u4f20\uff0c\u5904\u7406\uff0c\u5185\u5bb9\u8bc6\u522b\u6709\u5b58\u50a8 console.log(sign(key, MD5(secret), method, uri, date)); // \u5185\u5bb9\u8bc6\u522b\u65e0\u5b58\u50a8\uff0c\u5bb9\u5668\u4e91 console.log(sign(key, secret, method, uri, date)); java \u4ee3\u7801\u6f14\u793a \u00b6 import java.security.InvalidKeyException; import java.security.NoSuchAlgorithmException; import java.security.SignatureException; import javax.crypto.Mac; import javax.crypto.spec.SecretKeySpec; import java.util.Base64; import java.util.Calendar; import java.text.SimpleDateFormat; import java.util.Locale; import java.util.TimeZone; import java.security.*; import java.io.*; public class auth { private static final String HMAC_SHA1_ALGORITHM = \"HmacSHA1\"; public static String md5(String string) { byte[] hash; try { hash = MessageDigest.getInstance(\"MD5\").digest(string.getBytes(\"UTF-8\")); } catch (UnsupportedEncodingException e) { throw new RuntimeException(\"UTF-8 is unsupported\", e); } catch (NoSuchAlgorithmException e) { throw new RuntimeException(\"MessageDigest\u4e0d\u652f\u6301MD5Util\", e); } StringBuilder hex = new StringBuilder(hash.length * 2); for (byte b : hash) { if ((b & 0xFF) < 0x10) hex.append(\"0\"); hex.append(Integer.toHexString(b & 0xFF)); } return hex.toString(); } public static byte[] hashHmac(String data, String key) throws SignatureException, NoSuchAlgorithmException, InvalidKeyException { SecretKeySpec signingKey = new SecretKeySpec(key.getBytes(), HMAC_SHA1_ALGORITHM); Mac mac = Mac.getInstance(HMAC_SHA1_ALGORITHM); mac.init(signingKey); return mac.doFinal(data.getBytes()); } public static String sign(String key, String secret, String method, String uri, String date, String policy, String md5) throws Exception { String value = method + \"&\" + uri + \"&\" + date; if (policy != null && policy.length() > 0) { value = value + \"&\" + policy; } if (md5 != null && md5.length() > 0) { value = value + \"&\" + md5; } byte[] hmac = hashHmac(value, secret); String sign = Base64.getEncoder().encodeToString(hmac); return \"UPYUN \" + key + \":\" + sign; } public static String getRfc1123Time() { Calendar calendar = Calendar.getInstance(); SimpleDateFormat dateFormat = new SimpleDateFormat( \"EEE, dd MMM yyyy HH:mm:ss z\", Locale.US); dateFormat.setTimeZone(TimeZone.getTimeZone(\"GMT\")); return dateFormat.format(calendar.getTime()); } public static void main(String[] args) throws Exception { String key = \"upyun\"; String secret = \"secret\"; String method = \"GET\"; String uri = \"/v1/apps/\"; String date = getRfc1123Time(); System.out.println(date); System.out.println(md5(secret)); // \u4e0a\u4f20\uff0c\u5904\u7406\uff0c\u5185\u5bb9\u8bc6\u522b\u6709\u5b58\u50a8 System.out.println(sign(key, md5(secret), method, uri, date, \"\", \"\")); // \u5185\u5bb9\u8bc6\u522b\u65e0\u5b58\u50a8\uff0c\u5bb9\u5668\u4e91 System.out.println(sign(key, secret, method, uri, date, \"\", \"\")); } } php \u4ee3\u7801\u6f14\u793a \u00b6 <?php function sign($key, $secret, $method, $uri, $date, $policy=null, $md5=null) { $elems = array(); foreach (array($method, $uri, $date, $policy, $md5) as $v) { if ($v) { $elems[] = $v; } } $value = implode('&', $elems); $sign = base64_encode(hash_hmac('sha1', $value, $secret, true)); return 'UPYUN ' . $key . ':' . $sign; } function main() { $key = 'upyun'; $secret = 'secret'; $uri = '/v1/apps/'; $method = 'GET'; $date = gmdate('D, d M Y H:i:s \\G\\M\\T'); $md = md5($secret); echo $md . \"\\n\"; echo $date . \"\\n\"; // \u4e0a\u4f20\uff0c\u5904\u7406\uff0c\u5185\u5bb9\u8bc6\u522b\u6709\u5b58\u50a8 echo sign($key, md5($secret), $method, $uri, $date) . \"\\n\"; // \u5185\u5bb9\u8bc6\u522b\u65e0\u5b58\u50a8\uff0c\u5bb9\u5668\u4e91 echo sign($key, $secret, $method, $uri, $date); } main(); \u5982\u6709\u7591\u95ee\u8bf7 \u8054\u7cfb\u6211\u4eec","title":"\u8ba4\u8bc1\u9274\u6743"},{"location":"api/authorization/#_1","text":"curl -u <operator>:<password> http://v0.api.upyun.com/<bucket>/ \u6216\u8005\uff0c\u5c06\u64cd\u4f5c\u5458\u540d\u548c\u64cd\u4f5c\u5458\u7684\u5bc6\u7801\u6309 operator:password \u62fc\u63a5 Base64 \u7f16\u7801\u540e\u52a0\u5728\u8bf7\u6c42\u5934\u7684 Authorization \u5b57\u6bb5\u4e2d\uff1a curl -X GET \\ http://v0.api.upyun.com/<bucket>/ \\ -H \"Authorization: Basic b3BlcmF0b3I6cGFzc3dvcmQ=\" \u7279\u522b\u5730\uff0c HTTP \u57fa\u672c\u8ba4\u8bc1 \u91c7\u7528 Base64 \u7f16\u7801\u548c\u4f20\u8f93\u64cd\u4f5c\u5458\u4fe1\u606f\uff0c\u5b58\u5728\u64cd\u4f5c\u5458\u4fe1\u606f\u6cc4\u9732\u7684\u98ce\u9669\u3002","title":"\u57fa\u672c\u8ba4\u8bc1"},{"location":"api/authorization/#_2","text":"\u4e3a\u4e86\u907f\u514d\u57fa\u672c\u8ba4\u8bc1\u4e2d Base64 \u7f16\u7801\u53ef\u9006\u5e26\u6765\u7684\u5b89\u5168\u9690\u60a3\uff0c\u53c8\u62cd\u4e91\u63d0\u4f9b\u4e86\u7b7e\u540d\u8ba4\u8bc1\u8fd9\u79cd\u66f4\u5b89\u5168\u7684\u8ba4\u8bc1\u65b9\u5f0f\u3002\u5b83\u7ed3\u5408\u8bf7\u6c42\u5173\u952e\u4fe1\u606f\u548c\u7528\u6237\u8eab\u4efd\u4fe1\u606f\uff0c\u8ba1\u7b97\u4e00\u4e2a\u6d88\u606f\u6458\u8981\uff0c\u4f5c\u4e3a\u8bf7\u6c42\u7684 Authorization\uff0c\u4fdd\u8bc1\u8bf7\u6c42\u7684\u5b89\u5168\u3002","title":"\u7b7e\u540d\u8ba4\u8bc1"},{"location":"api/authorization/#http-header","text":"\u8ba4\u8bc1\u4fe1\u606f Authorization \u653e\u5728 Header \u4e2d\uff0c\u5728\u4e91\u5b58\u50a8\u7684 API \u4e2d\uff0cREST API \u4ee5\u53ca FORM API \u7684\u56de\u8c03\u901a\u77e5\u4f7f\u7528\u8fd9\u79cd\u65b9\u5f0f\u3002 ** \u7b7e\u540d\u8ba1\u7b97\u65b9\u6cd5 ** Authorization: UPYUN <Operator>:<Signature> <Signature> = Base64 (HMAC-SHA1 (<Password>, <Method>& <URI>& <Date>& <Content-MD5> )) \u76f8\u5173\u53c2\u6570\u8bf4\u660e\uff1a \u53c2\u6570 \u5fc5\u9009 \u8bf4\u660e Operator \u662f \u670d\u52a1\u7684\u64cd\u4f5c\u5458\u540d\u79f0 Method \u662f \u8bf7\u6c42\u65b9\u5f0f\uff0c\u5982\uff1aGET\u3001POST\u3001PUT\u3001HEAD \u7b49 URI \u662f \u8bf7\u6c42\u8def\u5f84 Date \u662f \u8bf7\u6c42\u65e5\u671f\u65f6\u95f4\uff0cGMT \u683c\u5f0f\u5b57\u7b26\u4e32 ( RFC 1123 )\uff0c\u5982 Wed, 29 Oct 2014 02:26:58 GMT Content-MD5 \u5426 \u8bf7\u6c42\u4f53\u7684 MD5 \u503c\uff0c\u5982\u679c\u6587\u4ef6\u592a\u5927\u8ba1\u7b97 MD5 \u4e0d\u65b9\u4fbf\u6216\u8bf7\u6c42\u4f53\u4e3a\u7a7a\uff0c\u53ef\u4ee5\u4e3a\u7a7a Password \u662f \u670d\u52a1\u7684\u64cd\u4f5c\u5458\u5bc6\u7801\u7684 MD5 \u503c ** \u6ce8 ** \u975e\u5fc5\u9009\u53c2\u6570\u4e3a\u7a7a\u65f6\uff0c\u8fde\u540c\u540e\u9762\u7684 & \u4e00\u8d77\u4e0d\u53c2\u4e0e\u7b7e\u540d\u8ba1\u7b97\u3002\u6240\u6709\u8ba1\u7b97\u7684 MD5 \u503c\uff0c\u683c\u5f0f\u5747\u662f 32 \u4f4d\u5c0f\u5199\u3002 HMAC-SHA1 \u8f93\u51fa\u7684\u5fc5\u987b\u662f \u539f\u751f\u7684\u4e8c\u8fdb\u5236\u6570\u636e \u3002 Date \u7528\u4e8e\u9a8c\u8bc1\u8be5\u7b7e\u540d\u662f\u5426\u6709\u6548\uff0cREST API \u7b7e\u540d\u6709\u6548\u65f6\u95f4\u4e3a\u8bf7\u6c42\u65f6\u95f4\u8d77\u7684 30 \u5206\u949f\u5185\uff1bFORM API \u56de\u8c03\u901a\u77e5\u7b7e\u540d\u6709\u6548\u671f\u7531\u7528\u6237\u81ea\u884c\u786e\u5b9a\uff0c\u5efa\u8bae\u8bbe\u7f6e\u4e3a 30 \u5206\u949f\u3002 ** \u4e3e\u4f8b ** REST API \u4e0a\u4f20\u6587\u4ef6 \u8bf7\u6c42\u7b7e\u540d // \u64cd\u4f5c\u5458\u4fe1\u606f Operator = operator123 Password = MD5(password123) = 482c811da5d5b4bc6d497ffa98491e38 // \u53c2\u6570\u4fe1\u606f Method = PUT URI = /upyun-temp/demo.jpg Date = Wed, 09 Nov 2016 14:26:58 GMT // \u4e0a\u4f20\u6587\u4ef6\u7684 MD5 Content-MD5 = 7ac66c0f148de9519b8bd264312c4d64 \u751f\u6210 Signature\uff1a Signature = Base64 (HMAC-SHA1 (<Password>, <Method>& <URI>& <Date>& <Content-MD5> )) = Base64 (HMAC-SHA1 (482c811da5d5b4bc6d497ffa98491e38,PUT&/upyun-temp/demo.jpg&Wed, 09 Nov 2016 14:26:58 GMT&7ac66c0f148de9519b8bd264312c4d64)) // HMAC-SHA1 \u8fd4\u56de\u7684\u539f\u751f\u4e8c\u8fdb\u5236\u6570\u636e\u8fdb\u884c Base64 \u7f16\u7801 = YUaAZX+WNAcJdNGHS5SBlITME5A= Authorization \u7b7e\u540d\uff1a Authorization: UPYUN operator123:YUaAZX+WNAcJdNGHS5SBlITME5A= \u8bf7\u6c42 Header\uff1a PUT /upyun-temp/demo.jpg HTTP/1.1 Authorization: UPYUN operator123:YUaAZX+WNAcJdNGHS5SBlITME5A= Content-MD5: 7ac66c0f148de9519b8bd264312c4d64 Date: Wed, 09 Nov 2016 14:26:58 GMT Content-Type: image/jpeg Host: v0.api.upyun.com Content-Length: 33456 FORM API \u56de\u8c03\u901a\u77e5 \u7b7e\u540d // \u64cd\u4f5c\u5458\u4fe1\u606f Operator = operator123 Password = MD5(password123) = 482c811da5d5b4bc6d497ffa98491e38 // \u53c2\u6570\u4fe1\u606f Method = POST URI = /upyun_notify_url Date = Wed, 09 Nov 2016 14:26:58 GMT Content-MD5 = MD5(code=200&message=ok&url=%2F2011%2F12%2Ffd0e30047f81fa95.mp3&time=1478701618) = e861f9f2ccd323df87b975904ccf19bb \u751f\u6210 Signature\uff1a Signature = Base64 (HMAC-SHA1 (<Password>, <Method>& <URI>& <Date>& <Content-MD5> )) = Base64 (HMAC-SHA1 (482c811da5d5b4bc6d497ffa98491e38,POST&/upyun_notify_url&Wed, 09 Nov 2016 14:26:58 GMT&e861f9f2ccd323df87b975904ccf19bb)) // HMAC-SHA1 \u8fd4\u56de\u7684\u539f\u751f\u4e8c\u8fdb\u5236\u6570\u636e\u8fdb\u884c Base64 \u7f16\u7801 = 8wTKBjONUWG+Zwzxo8EpJISy95E= Authorization \u7b7e\u540d\uff1a Authorization: UPYUN operator123:8wTKBjONUWG+Zwzxo8EpJISy95E= \u5b8c\u6574\u7684\u8bf7\u6c42\uff1a POST /upyun_notify_url HTTP/1.1 Authorization: UPYUN operator123:8wTKBjONUWG+Zwzxo8EpJISy95E= Content-MD5: e861f9f2ccd323df87b975904ccf19bb Date: Wed, 09 Nov 2016 14:26:58 GMT Content-Type: application/x-www-form-urlencoded;charset=utf-8 code=200&message=ok&url=%2F2011%2F12%2Ffd0e30047f81fa95.mp3&time=1478701618","title":"\u653e\u5728 HTTP Header \u4e2d"},{"location":"api/authorization/#http-body","text":"\u8ba4\u8bc1\u4fe1\u606f Authorization \u653e\u5728 Body \u4e2d\uff0c\u5728\u4e91\u5b58\u50a8\u7684 API \u4e2d\uff0cFORM API \u7684\u4e0a\u4f20\u6587\u4ef6\u4f7f\u7528\u8fd9\u79cd\u65b9\u5f0f\u3002 ** \u7b7e\u540d\u8ba1\u7b97\u65b9\u6cd5 ** authorization=UPYUN <Operator>:<Signature> <Signature> = Base64 (HMAC-SHA1 (<Password>, <Method>& <URI>& <Date>& <Policy>& <Content-MD5> )) \u76f8\u5173\u53c2\u6570\u8bf4\u660e\uff1a \u53c2\u6570 \u5fc5\u9009 \u8bf4\u660e Operator \u662f \u670d\u52a1\u7684\u64cd\u4f5c\u5458\u540d\u79f0 Method \u662f \u8bf7\u6c42\u65b9\u5f0f\uff0c\u5982\uff1aGET\u3001POST\u3001PUT\u3001HEAD \u7b49 URI \u662f \u8bf7\u6c42\u8def\u5f84 Date \u5426 \u8bf7\u6c42\u65e5\u671f\u65f6\u95f4\uff0cGMT \u683c\u5f0f\u5b57\u7b26\u4e32 ( RFC 1123 )\uff0c\u5982 Wed, 29 Oct 2014 02:26:58 GMT Policy \u662f \u4e0a\u4f20\u53c2\u6570 \u7684 Base64 \u7f16\u7801\uff0c\u8be6\u89c1 Policy \u7b97\u6cd5 Content-MD5 \u5426 \u4e0a\u4f20\u6587\u4ef6\u7684 MD5 \u503c Password \u662f \u670d\u52a1\u7684\u64cd\u4f5c\u5458\u5bc6\u7801\u7684 MD5 \u503c ** \u6ce8 ** \u975e\u5fc5\u9009\u53c2\u6570\u4e3a\u7a7a\u65f6\uff0c\u8fde\u540c\u540e\u9762\u7684 & \u4e00\u8d77\u4e0d\u53c2\u4e0e\u7b7e\u540d\u8ba1\u7b97\u3002\u6240\u6709\u8ba1\u7b97\u7684 MD5 \u503c\uff0c\u683c\u5f0f\u5747\u662f 32 \u4f4d\u5c0f\u5199\u3002 HMAC-SHA1 \u8f93\u51fa\u7684\u5fc5\u987b\u662f \u539f\u751f\u7684\u4e8c\u8fdb\u5236\u6570\u636e \u3002 \u81ea\u5b9a\u4e49\u7b7e\u540d\u6709\u6548\u671f\uff0c\u5efa\u8bae\u4e3a 30 \u5206\u949f\u3002\u5982\u679c\u7b7e\u540d\u8d85\u8fc7\u6709\u6548\u671f\uff0c\u9700\u8981\u91cd\u65b0\u751f\u6210\u7b7e\u540d\u3002 ** Policy \u7b97\u6cd5 ** \u751f\u6210\u6b65\u9aa4\uff1a \u5c06 \u4e0a\u4f20\u53c2\u6570 \u952e\u503c\u5bf9\u8f6c\u6362\u4e3a JSON \u5b57\u7b26\u4e32\uff1b \u5c06\u7b2c 1 \u6b65\u6240\u5f97\u5230\u7684\u5b57\u7b26\u4e32\u8fdb\u884c Base64 Encode \u5904\u7406\uff0c\u5f97\u5230 policy\u3002 ** \u6ce8 ** \u53c2\u6570\u548c\u53c2\u6570\u503c\u5fc5\u987b\u662f UTF-8 \u7f16\u7801\uff0c\u4e14\u4e0d\u5305\u542b\u6362\u884c\u7b26\u3002 \u53c2\u6570 date \u548c content-md5 \u5c31\u662f\u7b7e\u540d\u4e2d\u7684 Date \u548c Content-MD5 \u3002 ** \u4e3e\u4f8b ** FORM API \u4e0a\u4f20\u6587\u4ef6 \u8bf7\u6c42\u7b7e\u540d // \u64cd\u4f5c\u5458\u4fe1\u606f Operator = operator123 Password = MD5(password123) = 482c811da5d5b4bc6d497ffa98491e38 // \u53c2\u6570 Method = POST URI = /upyun-temp // \u4e0a\u4f20\u53c2\u6570\uff0c\u9700\u8981\u8ba1\u7b97 Policy bucket = upyun-temp save-key = /demo.jpg expiration = 1478674618 date = Wed, 09 Nov 2016 14:26:58 GMT content-md5 = 7ac66c0f148de9519b8bd264312c4d64 \u751f\u6210 Policy\uff1a Policy = Base64 ({\"bucket\": \"upyun-temp\", \"save-key\": \"/demo.jpg\", \"expiration\": \"1478674618\", \"date\": \"Wed, 09 Nov 2016 14:26:58 GMT\", \"content-md5\": \"7ac66c0f148de9519b8bd264312c4d64\"}) = eyJidWNrZXQiOiAidXB5dW4tdGVtcCIsICJzYXZlLWtleSI6ICIvZGVtby5qcGciLCAiZXhwaXJhdGlvbiI6ICIxNDc4Njc0NjE4IiwgImRhdGUiOiAiV2VkLCA5IE5vdiAyMDE2IDE0OjI2OjU4IEdNVCIsICJjb250ZW50LW1kNSI6ICI3YWM2NmMwZjE0OGRlOTUxOWI4YmQyNjQzMTJjNGQ2NCJ9 \u751f\u6210 Signature\uff1a Signature = Base64 (HMAC-SHA1 (<Password>, <Method>& <URI>& <Date>& <Policy>& <Content-MD5> )) = Base64 (HMAC-SHA1 (482c811da5d5b4bc6d497ffa98491e38,POST&/upyun-temp&Wed, 09 Nov 2016 14:26:58 GMT&eyJidWNrZXQiOiAidXB5dW4tdGVtcCIsICJzYXZlLWtleSI6ICIvZGVtby5qcGciLCAiZXhwaXJhdGlvbiI6ICIxNDc4Njc0NjE4IiwgImRhdGUiOiAiV2VkLCA5IE5vdiAyMDE2IDE0OjI2OjU4IEdNVCIsICJjb250ZW50LW1kNSI6ICI3YWM2NmMwZjE0OGRlOTUxOWI4YmQyNjQzMTJjNGQ2NCJ9&7ac66c0f148de9519b8bd264312c4d64)) // HMAC-SHA1 \u8fd4\u56de\u7684\u539f\u751f\u4e8c\u8fdb\u5236\u6570\u636e\u8fdb\u884c Base64 \u7f16\u7801 = DTGOeaCa1yk1JWG4G3DH+u5sI5M= Authorization \u7b7e\u540d\uff1a authorization=UPYUN operator123:DTGOeaCa1yk1JWG4G3DH+u5sI5M= \u5b8c\u6574\u7684\u8bf7\u6c42\uff1a POST /upyun-temp HTTP/1.1 Host: v0.api.upyun.com Content-Type:multipart/form-data; boundary=\u2014\u2014WebKitFormBoundaryE19zNvXGzXaLvS5C ----WebKitFormBoundaryE19zNvXGzXaLvS5C Content-Disposition: form-data; name=\"policy\" eyJidWNrZXQiOiAidXB5dW4tdGVtcCIsICJzYXZlLWtleSI6ICIvZGVtby5qcGciLCAiZXhwaXJhdGlvbiI6ICIxNDc4Njc0NjE4IiwgImRhdGUiOiAiV2VkLCA5IE5vdiAyMDE2IDE0OjI2OjU4IEdNVCIsICJjb250ZW50LW1kNSI6ICI3YWM2NmMwZjE0OGRlOTUxOWI4YmQyNjQzMTJjNGQ2NCJ9&file= ----WebKitFormBoundaryE19zNvXGzXaLvS5C Content-Disposition: form-data; name=\"file\"; filename=\"demo.jpg\" def ----WebKitFormBoundaryE19zNvXGzXaLvS5C Content-Disposition: form-data; name=\"authorization\" UPYUN operator123:DTGOeaCa1yk1JWG4G3DH+u5sI5M= ----WebKitFormBoundaryE19zNvXGzXaLvS5C","title":"\u653e\u5728 HTTP Body \u4e2d"},{"location":"api/authorization/#token","text":"\u7269\u8054\u7f51\u3001\u79fb\u52a8\u4e92\u8054\u7f51\u7b49\u884c\u4e1a\uff0c\u4e3a\u4e86\u533a\u5206\u4e0d\u540c\u7ec8\u7aef\uff0c\u63d0\u5347\u8ba4\u8bc1\u5b89\u5168\u6027\uff0c\u5728 REST API \u4e0a\u6dfb\u52a0\u4e86 token \u8ba4\u8bc1\uff0c\u4f7f\u7528 token \u8ba4\u8bc1\u53ef\u4ee5\u4e3a\u6bcf\u4e2a\u7ec8\u7aef\u7b7e\u53d1 \u4e00\u4e2a\u72ec\u7acb\u7684\u6709\u8fc7\u671f\u65f6\u95f4\u7684 \u201c\u5bc6\u7801\u201d\u3002","title":"token \u8ba4\u8bc1"},{"location":"api/authorization/#token_1","text":"\u4f7f\u7528\u7ec8\u7aef\u4e0a\u4f20\u6587\u4ef6\u7684\u6807\u8bc6\u4fe1\u606f\uff0c\u8ba1\u7b97 token\u3002 Server \u7aef\u751f\u6210 token\u3002 \u7ec8\u7aef\u7f13\u5b58 token\uff0c\u5728\u6709\u6548\u671f\u5185\u7684\u4e0a\u4f20\u6587\u4ef6\u8bf7\u6c42\uff0c\u90fd\u53ef\u4ee5\u4f7f\u7528\u8be5 token\u3002 \u7ec8\u7aef\u4e0a\u4f20\u6587\u4ef6\uff0c\u8bf7\u6c42\u4e2d\u9644\u5e26 token\u3002\u5982\u679c token \u6b63\u786e\u4e14\u5728\u6709\u6548\u671f\u5185\uff0c\u9a8c\u8bc1\u901a\u8fc7\uff0c\u5141\u8bb8\u4e0a\u4f20\u6587\u4ef6\uff1b\u5426\u5219\uff0c\u62d2\u7edd\u4e0a\u4f20\uff0c\u8fd4\u56de\u9519\u8bef\u7801 401 \u3002","title":"token \u8ba4\u8bc1\u7684\u751f\u6210\u903b\u8f91"},{"location":"api/authorization/#token_2","text":"** \u51c6\u5907\u5de5\u4f5c ** \u51c6\u5907\u7528\u4e8e\u8fd0\u884c token \u751f\u6210\u7a0b\u5e8f\u7684 Server\u3002 \u51c6\u5907 Operator\u3001Password\uff0c\u5373\u64cd\u4f5c\u5458\u4fe1\u606f\u3002 ** token \u8ba4\u8bc1\u8ba1\u7b97\u65b9\u6cd5 ** Authorization: UPYUN <Operator>:<token> <token> = Base64 (HMAC-SHA1 (<Password>, <Method>& <X-Upyun-Uri-Prefix>& <X-Upyun-Uri-Postfix>& <X-Upyun-Expire> )) \u76f8\u5173\u53c2\u6570\u8bf4\u660e\uff1a \u53c2\u6570 \u5fc5\u9009 \u8bf4\u660e Operator \u662f \u670d\u52a1\u7684\u64cd\u4f5c\u5458\u540d\u79f0 Method \u662f \u8bf7\u6c42\u65b9\u5f0f\uff0c\u5982\uff1aGET\u3001POST\u3001PUT\u3001HEAD \u7b49 X-Upyun-Uri-Prefix \u5426 \u4f7f\u7528\u8bf7\u6c42\u8def\u5f84\u4e2d\u524d\u9762\u90e8\u5206\u8ba1\u7b97 token\uff0c\u548c\u4e0b\u4e00\u4e2a\u53c2\u6570\u662f\u4e00\u7ec4\uff0c\u4e24\u4e2a\u5fc5\u987b\u586b\u4e00\u4e2a\uff0c\u5141\u8bb8\u4e24\u4e2a\u90fd\u586b X-Upyun-Uri-Postfix \u5426 \u4f7f\u7528\u8bf7\u6c42\u8def\u5f84\u4e2d\u540e\u9762\u90e8\u5206\u8ba1\u7b97 token\uff0c\u548c\u4e0a\u4e00\u4e2a\u53c2\u6570\u662f\u4e00\u7ec4\uff0c\u4e24\u4e2a\u5fc5\u987b\u586b\u4e00\u4e2a\uff0c\u5141\u8bb8\u4e24\u4e2a\u90fd\u586b X-Upyun-Expire \u662f token \u7684\u8fc7\u671f\u65f6\u95f4\uff0cUNIX UTC \u65f6\u95f4\u6233\uff0c\u5355\u4f4d\u79d2\uff0c\u5efa\u8bae 3 \u4e2a\u6708 Password \u662f \u670d\u52a1\u7684\u64cd\u4f5c\u5458\u5bc6\u7801\u7684 MD5 \u503c ** \u6ce8 ** \u975e\u5fc5\u9009\u53c2\u6570\u4e3a\u7a7a\u65f6\uff0c\u8fde\u540c\u540e\u9762\u7684 & \u4e00\u8d77\u4e0d\u53c2\u4e0e\u7b7e\u540d\u8ba1\u7b97\u3002\u6240\u6709\u8ba1\u7b97\u7684 MD5 \u503c\uff0c\u683c\u5f0f\u5747\u662f 32 \u4f4d\u5c0f\u5199\u3002 HMAC-SHA1 \u8f93\u51fa\u7684\u5fc5\u987b\u662f \u539f\u751f\u7684\u4e8c\u8fdb\u5236\u6570\u636e \u3002 ** \u4e3e\u4f8b ** // \u64cd\u4f5c\u5458\u4fe1\u606f Operator = operator123 Password = MD5(password123) = 482c811da5d5b4bc6d497ffa98491e38 // \u53c2\u6570\u4fe1\u606f Method = PUT X-Upyun-Uri-Prefix = /bucket/client_37ascii // \u7ec8\u7aef\u8bbe\u5907\u7684\u6807\u8bc6\u524d\u7f00 \uff08\u4e5f\u53ef\u4ee5\u662f\u5b58\u50a8\u4e0a\u7684\u4e00\u4e2a\u76ee\u5f55\uff0c\u5982 /client_37ascii/ \uff09 X-Upyun-Expire = 1528531186 // \u8fc7\u671f\u65f6\u95f4\uff1a2018/6/9 15:59:46 \u751f\u6210 Token\uff1a Token = Base64 (HMAC-SHA1 (<Password>, <Method>& <X-Upyun-Uri-Prefix>& <X-Upyun-Expire> )) = Base64 (HMAC-SHA1 (482c811da5d5b4bc6d497ffa98491e38,PUT&/bucket/client_37ascii&1528531186)) // HMAC-SHA1 \u8fd4\u56de\u7684\u539f\u751f\u4e8c\u8fdb\u5236\u6570\u636e\u8fdb\u884c Base64 \u7f16\u7801 = P2UZNhjF+wB4MPq8ONSFU2aVW+8= Authorization \u7b7e\u540d\uff1a Authorization: UPYUN operator123:P2UZNhjF+wB4MPq8ONSFU2aVW+8= \u7ec8\u7aef\u4e0a\u4f20\u6587\u4ef6\u8bf7\u6c42 Header\uff1a PUT /bucket/client_37ascii_xxx.jpg HTTP/1.1 Authorization: UPYUN operator123:P2UZNhjF+wB4MPq8ONSFU2aVW+8= X-Upyun-Uri-Prefix = /bucket/client_37ascii X-Upyun-Expire = 1528531186 Date: Tue, 09 Jan 2018 15:39:40 GMT Content-Type: image/jpeg Host: v0.api.upyun.com Content-Length: 33456","title":"token \u8ba4\u8bc1\u751f\u6210"},{"location":"api/authorization/#_3","text":"","title":"\u4ee3\u7801\u6f14\u793a"},{"location":"api/authorization/#_4","text":"\u672c\u793a\u4f8b\u9002\u7528\u4e8e\u4e91\u5b58\u50a8\uff0c\u4e91\u5904\u7406\uff0c\u5185\u5bb9\u8bc6\u522b\uff0c\u5bb9\u5668\u4e91\u670d\u52a1\u3002 \u4f7f\u7528\u65f6\uff0c\u6839\u636e\u81ea\u5df1\u7684\u9700\u6c42\u548c\u914d\u7f6e\uff0c\u4fee\u6539\u5bf9\u5e94\u53c2\u6570: key \uff0c secret \uff0c uri \uff0c method \uff0c policy \uff0c md5 \u3002 \u672c\u793a\u4f8b\u4f7f\u7528\u7684 key \u548c secret \u5728\u4e0d\u540c\u670d\u52a1\u4e2d\u7684\u542b\u4e49\u4e0d\u4e00\u6837\uff0c\u4e91\u5b58\u50a8\u3001\u4e91\u5904\u7406\u3001\u5185\u5bb9\u8bc6\u522b(\u6709\u5b58\u50a8) \u4e2d\u8868\u793a Operator \u548c Password \uff0c \u5185\u5bb9\u8bc6\u522b(\u65e0\u5b58\u50a8)\u3001\u5bb9\u5668\u4e91\u8868\u793a\u5404\u81ea\u670d\u52a1\u63d0\u4f9b\u7684 ClientKey \u548c ClientSecret \u3002 \u6839\u636e\u5bf9\u5e94 API \u6587\u6863\u8bf4\u660e\uff0c\u628a\u8ba4\u8bc1\u4fe1\u606f\uff0c\u586b\u5165\u76f8\u5e94\u7684 http \u8bf7\u6c42\u4fe1\u606f\u4e2d\u3002 \u4f7f\u7528 form API \u4e0a\u4f20\u65f6\uff0c\u9700\u8981\u7528\u6237\u751f\u6210 policy \uff0c\u672c\u793a\u4f8b\u4e0d\u63d0\u4f9b\u751f\u6210 policy \u7684\u4f7f\u7528\u5b9e\u4f8b\u3002","title":"\u6ce8\u610f\u4e8b\u9879"},{"location":"api/authorization/#_5","text":"","title":"\u5e38\u7528\u8bed\u8a00\u4ee3\u7801\u793a\u4f8b"},{"location":"api/authorization/#go","text":"package main import ( \"crypto/hmac\" \"crypto/md5\" \"crypto/sha1\" \"encoding/base64\" \"fmt\" \"strings\" \"time\" ) var ( key = \"upyun\" secret = \"secret\" // \u5bf9\u4e8e\u4e0a\u4f20\uff0c\u5904\u7406\uff0c\u8ddf\u5185\u5bb9\u8bc6\u522b\u9700\u8981MD5\u52a0\u5bc6 uri = \"/v1/apps/\" method = \"GET\" ) func md5Str(s string) string { return fmt.Sprintf(\"%x\", md5.Sum([]byte(s))) } func makeRFC1123Date(d time.Time) string { utc := d.UTC().Format(time.RFC1123) return strings.Replace(utc, \"UTC\", \"GMT\", -1) } func base64ToStr(b []byte) string { return base64.StdEncoding.EncodeToString(b) } func sign(key, secret, method, uri, date, policy, md5 string) string { mac := hmac.New(sha1.New, []byte(secret)) elems := []string{} for _, v := range []string{method, uri, date, policy, md5} { if v != \"\" { elems = append(elems, v) } } value := strings.Join(elems, \"&\") fmt.Println(value) mac.Write([]byte(value)) signStr := base64ToStr(mac.Sum(nil)) return \"UPYUN \" + key + \":\" + signStr } func main() { date := makeRFC1123Date(time.Now()) fmt.Println(date) fmt.Println(md5Str(secret)) // \u4e0a\u4f20\uff0c\u5904\u7406\uff0c\u5185\u5bb9\u8bc6\u522b\u6709\u5b58\u50a8 fmt.Println(sign(key, md5Str(secret), method, uri, date, \"\", \"\")) // \u5bb9\u5668\u4e91\uff0c\u5185\u5bb9\u8bc6\u522b\u65e0\u5b58\u50a8 fmt.Println(sign(key, secret, method, uri, date, \"\", \"\")) }","title":"go \u4ee3\u7801\u6f14\u793a"},{"location":"api/authorization/#python","text":"# -*- coding: UTF-8 -*- import base64 import datetime import hashlib import hmac # Tip 1 # \u4f7f\u7528\u65f6\u9700\u8981\u6839\u636e\u81ea\u5df1\u914d\u7f6e\u4e0e\u9700\u6c42\u63d0\u4f9b\u53c2\u6570 key secret uri method key = 'upyun' secret = 'secret' uri = '/v1/apps/' method = 'GET' def httpdate_rfc1123(dt=None): dt = dt or datetime.datetime.utcnow() return dt.strftime('%a, %d %b %Y %H:%M:%S GMT') def md5(value): return hashlib.md5(value.encode()).hexdigest() def sign(client_key, client_secret, method, uri, date, policy=None, md5=None): # Tip 4 # MD5 \u4fe1\u606f\u53ef\u9009 signarr = [] for v in [method, uri, date, policy, md5]: if v != None: signarr.append(v) signstr = '&'.join(signarr) signstr = base64.b64encode( hmac.new(client_secret.encode(), signstr.encode(), digestmod=hashlib.sha1).digest() ).decode() return 'UPYUN %s:%s' % (client_key, signstr) def main(): # Tip 2 # \u65f6\u95f4\u9700\u8981\u4e0e http \u5934 Date \u4fe1\u606f\u4fdd\u6301\u4e00\u81f4 # date = httpdate_rfc1123() date = 'Thu, 14 Dec 2017 06:03:27 GMT' # Tip 3 # sign \u51fd\u6570\u8fd4\u56de\u7684\u503c\u586b\u5165 http \u5934 Authorization \u4fe1\u606f\u4e2d print date print md5(secret) # \u4e0a\u4f20\uff0c\u5904\u7406\uff0c\u5185\u5bb9\u8bc6\u522b\u6709\u5b58\u50a8 print sign(key, md5(secret), method, uri, date) # \u5185\u5bb9\u8bc6\u522b\u65e0\u5b58\u50a8\uff0c\u5bb9\u5668\u4e91 print sign(key, secret, method, uri, date) if __name__ == '__main__': main()","title":"python \u4ee3\u7801\u6f14\u793a"},{"location":"api/authorization/#js","text":"var crypto = require('crypto'); function sign(key, secret, method, uri, date, policy=null, md5=null) { elems = []; [method, uri, date, policy, md5].forEach(item => { if (item != null) { elems.push(item) } }) value = elems.join('&'); auth = hmacsha1(secret, value); return `UPYUN ${key}:${auth}`; } function MD5(value) { return crypto.createHash('md5').update(value).digest('hex'); } function hmacsha1(secret, value) { return crypto.createHmac('sha1', secret).update(value, 'utf-8').digest().toString('base64'); } date = new Date().toGMTString(); console.log(date); key = 'upyun'; secret = 'secret'; method = 'GET'; uri = '/v1/apps/'; console.log(MD5('secret')); // \u4e0a\u4f20\uff0c\u5904\u7406\uff0c\u5185\u5bb9\u8bc6\u522b\u6709\u5b58\u50a8 console.log(sign(key, MD5(secret), method, uri, date)); // \u5185\u5bb9\u8bc6\u522b\u65e0\u5b58\u50a8\uff0c\u5bb9\u5668\u4e91 console.log(sign(key, secret, method, uri, date));","title":"js \u4ee3\u7801\u6f14\u793a"},{"location":"api/authorization/#java","text":"import java.security.InvalidKeyException; import java.security.NoSuchAlgorithmException; import java.security.SignatureException; import javax.crypto.Mac; import javax.crypto.spec.SecretKeySpec; import java.util.Base64; import java.util.Calendar; import java.text.SimpleDateFormat; import java.util.Locale; import java.util.TimeZone; import java.security.*; import java.io.*; public class auth { private static final String HMAC_SHA1_ALGORITHM = \"HmacSHA1\"; public static String md5(String string) { byte[] hash; try { hash = MessageDigest.getInstance(\"MD5\").digest(string.getBytes(\"UTF-8\")); } catch (UnsupportedEncodingException e) { throw new RuntimeException(\"UTF-8 is unsupported\", e); } catch (NoSuchAlgorithmException e) { throw new RuntimeException(\"MessageDigest\u4e0d\u652f\u6301MD5Util\", e); } StringBuilder hex = new StringBuilder(hash.length * 2); for (byte b : hash) { if ((b & 0xFF) < 0x10) hex.append(\"0\"); hex.append(Integer.toHexString(b & 0xFF)); } return hex.toString(); } public static byte[] hashHmac(String data, String key) throws SignatureException, NoSuchAlgorithmException, InvalidKeyException { SecretKeySpec signingKey = new SecretKeySpec(key.getBytes(), HMAC_SHA1_ALGORITHM); Mac mac = Mac.getInstance(HMAC_SHA1_ALGORITHM); mac.init(signingKey); return mac.doFinal(data.getBytes()); } public static String sign(String key, String secret, String method, String uri, String date, String policy, String md5) throws Exception { String value = method + \"&\" + uri + \"&\" + date; if (policy != null && policy.length() > 0) { value = value + \"&\" + policy; } if (md5 != null && md5.length() > 0) { value = value + \"&\" + md5; } byte[] hmac = hashHmac(value, secret); String sign = Base64.getEncoder().encodeToString(hmac); return \"UPYUN \" + key + \":\" + sign; } public static String getRfc1123Time() { Calendar calendar = Calendar.getInstance(); SimpleDateFormat dateFormat = new SimpleDateFormat( \"EEE, dd MMM yyyy HH:mm:ss z\", Locale.US); dateFormat.setTimeZone(TimeZone.getTimeZone(\"GMT\")); return dateFormat.format(calendar.getTime()); } public static void main(String[] args) throws Exception { String key = \"upyun\"; String secret = \"secret\"; String method = \"GET\"; String uri = \"/v1/apps/\"; String date = getRfc1123Time(); System.out.println(date); System.out.println(md5(secret)); // \u4e0a\u4f20\uff0c\u5904\u7406\uff0c\u5185\u5bb9\u8bc6\u522b\u6709\u5b58\u50a8 System.out.println(sign(key, md5(secret), method, uri, date, \"\", \"\")); // \u5185\u5bb9\u8bc6\u522b\u65e0\u5b58\u50a8\uff0c\u5bb9\u5668\u4e91 System.out.println(sign(key, secret, method, uri, date, \"\", \"\")); } }","title":"java \u4ee3\u7801\u6f14\u793a"},{"location":"api/authorization/#php","text":"<?php function sign($key, $secret, $method, $uri, $date, $policy=null, $md5=null) { $elems = array(); foreach (array($method, $uri, $date, $policy, $md5) as $v) { if ($v) { $elems[] = $v; } } $value = implode('&', $elems); $sign = base64_encode(hash_hmac('sha1', $value, $secret, true)); return 'UPYUN ' . $key . ':' . $sign; } function main() { $key = 'upyun'; $secret = 'secret'; $uri = '/v1/apps/'; $method = 'GET'; $date = gmdate('D, d M Y H:i:s \\G\\M\\T'); $md = md5($secret); echo $md . \"\\n\"; echo $date . \"\\n\"; // \u4e0a\u4f20\uff0c\u5904\u7406\uff0c\u5185\u5bb9\u8bc6\u522b\u6709\u5b58\u50a8 echo sign($key, md5($secret), $method, $uri, $date) . \"\\n\"; // \u5185\u5bb9\u8bc6\u522b\u65e0\u5b58\u50a8\uff0c\u5bb9\u5668\u4e91 echo sign($key, $secret, $method, $uri, $date); } main(); \u5982\u6709\u7591\u95ee\u8bf7 \u8054\u7cfb\u6211\u4eec","title":"php \u4ee3\u7801\u6f14\u793a"},{"location":"api/developer_guide/","text":"\u4e0a\u4f20\u4e0b\u8f7d\u7ecf\u5178\u67b6\u6784 \u00b6 \u4e0e\u4e91\u5b58\u50a8\u642d\u914d\u7684\u4f7f\u7528\u65b9\u5f0f\u4e3b\u8981\u6709\u4e24\u79cd\uff1a 1. \u5ba2\u6237\u7aef\u76f4\u4f20 \uff0c\u5ba2\u6237\u7aef\u628a\u6587\u4ef6\u76f4\u63a5\u4e0a\u4f20\u5230\u4e91\u5b58\u50a8\uff1b \u4e3b\u8981\u9002\u7528\u4e8e\u5927\u91cf\u6587\u4ef6\uff08TB \u7ea7\u4ee5\u4e0a\uff09\u5b58\u50a8\u3001\u672c\u5730\u4e0d\u5b58\u50a8\u6587\u4ef6\u6216\u65b0\u5efa\u9879\u76ee\u3002 2. \u7528\u6237\u670d\u52a1\u5668\u4e2d\u8f6c \uff0c\u5ba2\u6237\u7aef\u6587\u4ef6\u5148\u4e0a\u4f20\u5230\u7528\u6237\u670d\u52a1\u5668\uff0c\u518d\u4ece\u7528\u6237\u670d\u52a1\u5668\u4e0a\u4f20\u5230\u53c8\u62cd\u4e91\u5b58\u50a8\u3002 \u4e3b\u8981\u9002\u7528\u4e8e\u5c0f\u91cf\u6587\u4ef6\u5b58\u50a8\u3001\u5df2\u4f7f\u7528\u672c\u5730\u5b58\u50a8\u9879\u76ee\u3002 API \u9009\u62e9 \u00b6 HTTP REST API \u652f\u6301\u7528\u6237\u670d\u52a1\u5668\u4e0a\u4f20\u6a21\u5f0f\uff1b \u501f\u52a9 JS \u652f\u6301\u5ba2\u6237\u7aef\u76f4\u4f20\u6a21\u5f0f\uff1b \u9ed8\u8ba4\u4f7f\u7528\u6d41\u5f0f\u4e0a\u4f20\uff1b \u652f\u6301\u4e0a\u4f20\u65ad\u70b9\u7eed\u4f20\uff1b \u652f\u6301\u4e91\u7aef\u5b9e\u65f6\u56fe\u7247\u9884\u5904\u7406\uff1b \u4e3b\u8981\u9002\u7528\u4e8e\u5927\u91cf\u5927\u6587\u4ef6\u4f20\u8f93\u3001\u79fb\u52a8\u7aef\u4e0a\u4f20\u3002 HTTP FORM API \u901a\u8fc7\u8868\u5355\uff08FORM\uff09\u652f\u6301\u5ba2\u6237\u7aef\u76f4\u4f20\u6a21\u5f0f\uff1b \u652f\u6301\u7528\u6237\u670d\u52a1\u5668\u4e0a\u4f20\u6a21\u5f0f\uff1b \u9ed8\u8ba4\u4f7f\u7528\u8868\u5355\u4e0a\u4f20\uff1b \u652f\u6301\u4e91\u7aef\u6570\u636e\u9884\u5904\u7406\uff1b \u4e3b\u8981\u9002\u7528\u4e8e\u5927\u91cf\u5c0f\u6587\u4ef6\u4f20\u8f93\u3002 \u4e0a\u4f20\u65b9\u5f0f \u00b6 \u4e91\u5b58\u50a8\u7684\u4e0a\u4f20\u65b9\u5f0f\uff0c\u90fd\u901a\u8fc7 CDN \u8fdb\u884c\u52a0\u901f\uff0c\u5305\u62ec\u5c31\u8fd1\u4e0a\u4f20\u3001\u94fe\u8def\u4f18\u5316\u3001\u8d1f\u8f7d\u5747\u8861\u3001\u4e13\u7ebf\u4f20\u8f93\u3001\u514d\u8d39\u7b49\u4f18\u52bf\u3002 \u65ad\u70b9\u7eed\u4f20 \u628a\u6587\u4ef6\u5207\u6210\u56fa\u5b9a\u5927\u5c0f\u5206\u7247\uff0c\u4e00\u4e2a\u5206\u7247\u4e00\u4e2a\u5206\u7247\u4e0a\u4f20\uff08\u53ef\u4ee5\u5e76\u53d1\u4f20\uff09\uff0c\u5f53\u56e0\u7f51\u7edc\u539f\u56e0\u6216\u5176\u4ed6\u60c5\u51b5\u4e0a\u4f20\u5931\u8d25\u540e\uff0c\u4ece\u5931\u8d25\u5206\u7247\u5f00\u59cb\u63a5\u7740\u4f20\uff0c\u4e0d\u9700\u8981\u91cd\u5934\u5f00\u59cb\u4f20\u3002 \u4e3b\u8981\u9002\u7528\u4e8e MB \u53ca\u4ee5\u4e0a\u6587\u4ef6\u4e0a\u4f20\uff0c\u7279\u522b\u662f\u79fb\u52a8\u7aef\u4e0a\u4f20\uff0c\u907f\u514d\u4e86\u591a\u6b21\u5931\u8d25\u5e26\u6765\u7684\u5dee\u4e0a\u4f20\u4f53\u9a8c\u3002 \u8868\u5355\u4e0a\u4f20 \u901a\u8fc7 HTML FORM \uff0c\u628a\u6587\u4ef6\u76f4\u63a5\u4e0a\u4f20\u5230\u4e91\u5b58\u50a8\u3002 \u4e3b\u8981\u9002\u7528\u4e8e\u7f51\u7ad9\u3001APP \u7b49\u5c0f\u6587\u4ef6\u4e0a\u4f20\u3002 \u666e\u901a\u4e0a\u4f20 \u901a\u8fc7\u4e00\u6b21 HTTP \u8bf7\u6c42\u4ea4\u4e92\u5b8c\u6210\u6587\u4ef6\u4e0a\u4f20\uff0c\u4e14\u4e0d\u5bf9\u6587\u4ef6\u8fdb\u884c\u5206\u7247\u3002 \u4e3b\u8981\u9002\u7528\u4e8e\u7f51\u7edc\u73af\u5883\u826f\u597d\u7684\u60c5\u51b5\u4e0b\u5c0f\u6587\u4ef6\u4e0a\u4f20\u3002 \u4e0b\u8f7d\u65b9\u5f0f \u00b6 \u4e91\u5b58\u50a8\u7684\u4e0b\u8f7d\u65b9\u5f0f\uff0c\u90fd\u901a\u8fc7 CDN \u8fdb\u884c\u52a0\u901f\uff0c\u5305\u62ec\u5c31\u8fd1\u8bbf\u95ee\u3001\u94fe\u8def\u4f18\u5316\u3001\u8d1f\u8f7d\u5747\u8861\u3001\u4e13\u7ebf\u4f20\u8f93\u7b49\u4f18\u52bf\u3002 \u878d\u5408 CDN \u4e0b\u8f7d\u8bbf\u95ee \u4ee5 URL \u7684\u65b9\u5f0f\u8bbf\u95ee\u6587\u4ef6\uff0c\u6587\u4ef6\u501f\u52a9 CDN \u7684\u72ec\u7279\u7279\u6027\u5206\u53d1\u7ed9\u7528\u6237\uff0c\u8fd9\u4e9b\u7279\u6027\u5305\u62ec\uff08\u81ea\u52a8\uff09\u52a8\u9759\u6001\u6587\u4ef6\u5206\u79bb\u3001\u5927\u6587\u4ef6\u5206\u6bb5\u7f13\u5b58\u3001\u70b9\u64ad\u89c6\u9891\u6587\u4ef6\u62d6\u62c9\u7b49\uff0c\u5168\u9762\u89e3\u51b3\u5927\u5c0f\u6587\u4ef6\u3001\u4e0d\u540c\u7c7b\u578b\u6587\u4ef6\u7684\u5206\u53d1\u52a0\u901f\u9700\u6c42\u3002 \u9002\u7528\u4e8e\u6240\u6709\u6587\u4ef6\u8bbf\u95ee\u65b9\u5f0f\u3002 \u666e\u901a\u4e0b\u8f7d \u4ee5 API \u7684\u65b9\u5f0f\u4e0b\u8f7d\u6587\u4ef6\u3002 \u6570\u636e\u9884\u5904\u7406 \u00b6 \u56fe\u7247\u9884\u5904\u7406 \u652f\u6301\u4e0a\u4f20\u540c\u6b65\u4f5c\u56fe\uff0c\u628a\u56fe\u7247\u5904\u7406\u5e76\u4fdd\u5b58\uff0c\u540c\u65f6\u4e22\u6389\u539f\u56fe\u3002 \u652f\u6301\u4e0a\u4f20\u5f02\u6b65\u4f5c\u56fe\uff0c\u628a\u56fe\u7247\u5904\u7406\u6210\u591a\u5f20\u56fe\u5e76\u4fdd\u5b58\uff0c\u652f\u6301\u4fdd\u5b58\u539f\u56fe\u3002 \u97f3\u89c6\u9891\u9884\u5904\u7406 \u652f\u6301\u4e0a\u4f20\u5f02\u6b65\u97f3\u89c6\u9891\u5904\u7406\uff0c\u6587\u4ef6\u4e0a\u4f20\u5b8c\u540e\uff0c\u81ea\u52a8\u5f00\u59cb\u97f3\u89c6\u9891\u5904\u7406\u3002 \u6570\u636e\u8fc1\u79fb \u00b6 FTP \u5bf9\u652f\u6301 FTP \u7684\u5b58\u50a8\u6e90\uff0c\u53ef\u4ee5\u4f7f\u7528 FTP \u628a\u6570\u636e\u4e0b\u8f7d\u4e0b\u6765\uff0c\u518d\u4e0a\u4f20\u5230\u53c8\u62cd\u4e91\u5b58\u50a8\u3002\u5728\u8fd9\u4e2a\u8fc7\u7a0b\uff0c\u4e3a\u4e86\u4fdd\u8bc1\u8fc1\u79fb\u6570\u636e\u7684\u4e00\u81f4\u6027\uff0c\u9700\u8981\u5904\u7406\u9519\u8bef\u65e5\u5fd7\u3002\u90e8\u5206 FTP \u5de5\u5177\uff0c\u5982 MAC \u4e0a\u7684 Transmit\uff08 \u4e0b\u8f7d \uff09\uff0c\u652f\u6301\u76f4\u63a5\u4ece\u5b58\u50a8\u6e90\u628a\u6587\u4ef6\u3001\u76ee\u5f55\u62d6\u52a8\u53c8\u62cd\u4e91\u5b58\u50a8\uff0c\u51cf\u5c11\u4eba\u5de5\u64cd\u4f5c\u91cf\u3002 \u4e3b\u8981\u9002\u7528\u4e8e\u4e0d\u60f3\u5f00\u53d1\u6570\u636e\u8fc1\u79fb\u7a0b\u5e8f\u3001\u4e2d\u5c0f\u89c4\u6a21\u6570\u636e\u8fc1\u79fb\u3002 FTP/FTPS \u600e\u4e48\u4f7f\u7528\uff0c \u8bf7\u70b9\u8fd9\u91cc \u3002 \u5f02\u6b65\u62c9\u53d6 \u5bf9\u80fd\u83b7\u53d6\u5230\u6216\u5df2\u77e5\u6570\u636e URL \u5217\u8868\u7684\u5b58\u50a8\u6e90\uff0c\u53ef\u4ee5\u4f7f\u7528\u5f02\u6b65\u62c9\u53d6\uff0c\u901a\u8fc7\u6587\u4ef6 URL\uff0c\u5229\u7528\u53c8\u62cd\u4e91 CDN \u53bb\u83b7\u53d6\u6587\u4ef6\uff0c\u4f7f\u6587\u4ef6\u5feb\u901f\u3001\u7a33\u5b9a\u8fc1\u79fb\u3002 \u4e3b\u8981\u9002\u7528\u4e8e\u4e2d\u5927\u89c4\u6a21\u6570\u636e\u8fc1\u79fb\u3002 \u5f02\u6b65\u62c9\u53d6\u600e\u4e48\u4f7f\u7528\uff0c \u8bf7\u70b9\u8fd9\u91cc \u3002 \u5982\u6709\u7591\u95ee\u8bf7 \u8054\u7cfb\u6211\u4eec","title":"\u5f00\u53d1\u8005\u6307\u5357"},{"location":"api/developer_guide/#_1","text":"\u4e0e\u4e91\u5b58\u50a8\u642d\u914d\u7684\u4f7f\u7528\u65b9\u5f0f\u4e3b\u8981\u6709\u4e24\u79cd\uff1a 1. \u5ba2\u6237\u7aef\u76f4\u4f20 \uff0c\u5ba2\u6237\u7aef\u628a\u6587\u4ef6\u76f4\u63a5\u4e0a\u4f20\u5230\u4e91\u5b58\u50a8\uff1b \u4e3b\u8981\u9002\u7528\u4e8e\u5927\u91cf\u6587\u4ef6\uff08TB \u7ea7\u4ee5\u4e0a\uff09\u5b58\u50a8\u3001\u672c\u5730\u4e0d\u5b58\u50a8\u6587\u4ef6\u6216\u65b0\u5efa\u9879\u76ee\u3002 2. \u7528\u6237\u670d\u52a1\u5668\u4e2d\u8f6c \uff0c\u5ba2\u6237\u7aef\u6587\u4ef6\u5148\u4e0a\u4f20\u5230\u7528\u6237\u670d\u52a1\u5668\uff0c\u518d\u4ece\u7528\u6237\u670d\u52a1\u5668\u4e0a\u4f20\u5230\u53c8\u62cd\u4e91\u5b58\u50a8\u3002 \u4e3b\u8981\u9002\u7528\u4e8e\u5c0f\u91cf\u6587\u4ef6\u5b58\u50a8\u3001\u5df2\u4f7f\u7528\u672c\u5730\u5b58\u50a8\u9879\u76ee\u3002","title":"\u4e0a\u4f20\u4e0b\u8f7d\u7ecf\u5178\u67b6\u6784"},{"location":"api/developer_guide/#api","text":"HTTP REST API \u652f\u6301\u7528\u6237\u670d\u52a1\u5668\u4e0a\u4f20\u6a21\u5f0f\uff1b \u501f\u52a9 JS \u652f\u6301\u5ba2\u6237\u7aef\u76f4\u4f20\u6a21\u5f0f\uff1b \u9ed8\u8ba4\u4f7f\u7528\u6d41\u5f0f\u4e0a\u4f20\uff1b \u652f\u6301\u4e0a\u4f20\u65ad\u70b9\u7eed\u4f20\uff1b \u652f\u6301\u4e91\u7aef\u5b9e\u65f6\u56fe\u7247\u9884\u5904\u7406\uff1b \u4e3b\u8981\u9002\u7528\u4e8e\u5927\u91cf\u5927\u6587\u4ef6\u4f20\u8f93\u3001\u79fb\u52a8\u7aef\u4e0a\u4f20\u3002 HTTP FORM API \u901a\u8fc7\u8868\u5355\uff08FORM\uff09\u652f\u6301\u5ba2\u6237\u7aef\u76f4\u4f20\u6a21\u5f0f\uff1b \u652f\u6301\u7528\u6237\u670d\u52a1\u5668\u4e0a\u4f20\u6a21\u5f0f\uff1b \u9ed8\u8ba4\u4f7f\u7528\u8868\u5355\u4e0a\u4f20\uff1b \u652f\u6301\u4e91\u7aef\u6570\u636e\u9884\u5904\u7406\uff1b \u4e3b\u8981\u9002\u7528\u4e8e\u5927\u91cf\u5c0f\u6587\u4ef6\u4f20\u8f93\u3002","title":"API \u9009\u62e9"},{"location":"api/developer_guide/#_2","text":"\u4e91\u5b58\u50a8\u7684\u4e0a\u4f20\u65b9\u5f0f\uff0c\u90fd\u901a\u8fc7 CDN \u8fdb\u884c\u52a0\u901f\uff0c\u5305\u62ec\u5c31\u8fd1\u4e0a\u4f20\u3001\u94fe\u8def\u4f18\u5316\u3001\u8d1f\u8f7d\u5747\u8861\u3001\u4e13\u7ebf\u4f20\u8f93\u3001\u514d\u8d39\u7b49\u4f18\u52bf\u3002 \u65ad\u70b9\u7eed\u4f20 \u628a\u6587\u4ef6\u5207\u6210\u56fa\u5b9a\u5927\u5c0f\u5206\u7247\uff0c\u4e00\u4e2a\u5206\u7247\u4e00\u4e2a\u5206\u7247\u4e0a\u4f20\uff08\u53ef\u4ee5\u5e76\u53d1\u4f20\uff09\uff0c\u5f53\u56e0\u7f51\u7edc\u539f\u56e0\u6216\u5176\u4ed6\u60c5\u51b5\u4e0a\u4f20\u5931\u8d25\u540e\uff0c\u4ece\u5931\u8d25\u5206\u7247\u5f00\u59cb\u63a5\u7740\u4f20\uff0c\u4e0d\u9700\u8981\u91cd\u5934\u5f00\u59cb\u4f20\u3002 \u4e3b\u8981\u9002\u7528\u4e8e MB \u53ca\u4ee5\u4e0a\u6587\u4ef6\u4e0a\u4f20\uff0c\u7279\u522b\u662f\u79fb\u52a8\u7aef\u4e0a\u4f20\uff0c\u907f\u514d\u4e86\u591a\u6b21\u5931\u8d25\u5e26\u6765\u7684\u5dee\u4e0a\u4f20\u4f53\u9a8c\u3002 \u8868\u5355\u4e0a\u4f20 \u901a\u8fc7 HTML FORM \uff0c\u628a\u6587\u4ef6\u76f4\u63a5\u4e0a\u4f20\u5230\u4e91\u5b58\u50a8\u3002 \u4e3b\u8981\u9002\u7528\u4e8e\u7f51\u7ad9\u3001APP \u7b49\u5c0f\u6587\u4ef6\u4e0a\u4f20\u3002 \u666e\u901a\u4e0a\u4f20 \u901a\u8fc7\u4e00\u6b21 HTTP \u8bf7\u6c42\u4ea4\u4e92\u5b8c\u6210\u6587\u4ef6\u4e0a\u4f20\uff0c\u4e14\u4e0d\u5bf9\u6587\u4ef6\u8fdb\u884c\u5206\u7247\u3002 \u4e3b\u8981\u9002\u7528\u4e8e\u7f51\u7edc\u73af\u5883\u826f\u597d\u7684\u60c5\u51b5\u4e0b\u5c0f\u6587\u4ef6\u4e0a\u4f20\u3002","title":"\u4e0a\u4f20\u65b9\u5f0f"},{"location":"api/developer_guide/#_3","text":"\u4e91\u5b58\u50a8\u7684\u4e0b\u8f7d\u65b9\u5f0f\uff0c\u90fd\u901a\u8fc7 CDN \u8fdb\u884c\u52a0\u901f\uff0c\u5305\u62ec\u5c31\u8fd1\u8bbf\u95ee\u3001\u94fe\u8def\u4f18\u5316\u3001\u8d1f\u8f7d\u5747\u8861\u3001\u4e13\u7ebf\u4f20\u8f93\u7b49\u4f18\u52bf\u3002 \u878d\u5408 CDN \u4e0b\u8f7d\u8bbf\u95ee \u4ee5 URL \u7684\u65b9\u5f0f\u8bbf\u95ee\u6587\u4ef6\uff0c\u6587\u4ef6\u501f\u52a9 CDN \u7684\u72ec\u7279\u7279\u6027\u5206\u53d1\u7ed9\u7528\u6237\uff0c\u8fd9\u4e9b\u7279\u6027\u5305\u62ec\uff08\u81ea\u52a8\uff09\u52a8\u9759\u6001\u6587\u4ef6\u5206\u79bb\u3001\u5927\u6587\u4ef6\u5206\u6bb5\u7f13\u5b58\u3001\u70b9\u64ad\u89c6\u9891\u6587\u4ef6\u62d6\u62c9\u7b49\uff0c\u5168\u9762\u89e3\u51b3\u5927\u5c0f\u6587\u4ef6\u3001\u4e0d\u540c\u7c7b\u578b\u6587\u4ef6\u7684\u5206\u53d1\u52a0\u901f\u9700\u6c42\u3002 \u9002\u7528\u4e8e\u6240\u6709\u6587\u4ef6\u8bbf\u95ee\u65b9\u5f0f\u3002 \u666e\u901a\u4e0b\u8f7d \u4ee5 API \u7684\u65b9\u5f0f\u4e0b\u8f7d\u6587\u4ef6\u3002","title":"\u4e0b\u8f7d\u65b9\u5f0f"},{"location":"api/developer_guide/#_4","text":"\u56fe\u7247\u9884\u5904\u7406 \u652f\u6301\u4e0a\u4f20\u540c\u6b65\u4f5c\u56fe\uff0c\u628a\u56fe\u7247\u5904\u7406\u5e76\u4fdd\u5b58\uff0c\u540c\u65f6\u4e22\u6389\u539f\u56fe\u3002 \u652f\u6301\u4e0a\u4f20\u5f02\u6b65\u4f5c\u56fe\uff0c\u628a\u56fe\u7247\u5904\u7406\u6210\u591a\u5f20\u56fe\u5e76\u4fdd\u5b58\uff0c\u652f\u6301\u4fdd\u5b58\u539f\u56fe\u3002 \u97f3\u89c6\u9891\u9884\u5904\u7406 \u652f\u6301\u4e0a\u4f20\u5f02\u6b65\u97f3\u89c6\u9891\u5904\u7406\uff0c\u6587\u4ef6\u4e0a\u4f20\u5b8c\u540e\uff0c\u81ea\u52a8\u5f00\u59cb\u97f3\u89c6\u9891\u5904\u7406\u3002","title":"\u6570\u636e\u9884\u5904\u7406"},{"location":"api/developer_guide/#_5","text":"FTP \u5bf9\u652f\u6301 FTP \u7684\u5b58\u50a8\u6e90\uff0c\u53ef\u4ee5\u4f7f\u7528 FTP \u628a\u6570\u636e\u4e0b\u8f7d\u4e0b\u6765\uff0c\u518d\u4e0a\u4f20\u5230\u53c8\u62cd\u4e91\u5b58\u50a8\u3002\u5728\u8fd9\u4e2a\u8fc7\u7a0b\uff0c\u4e3a\u4e86\u4fdd\u8bc1\u8fc1\u79fb\u6570\u636e\u7684\u4e00\u81f4\u6027\uff0c\u9700\u8981\u5904\u7406\u9519\u8bef\u65e5\u5fd7\u3002\u90e8\u5206 FTP \u5de5\u5177\uff0c\u5982 MAC \u4e0a\u7684 Transmit\uff08 \u4e0b\u8f7d \uff09\uff0c\u652f\u6301\u76f4\u63a5\u4ece\u5b58\u50a8\u6e90\u628a\u6587\u4ef6\u3001\u76ee\u5f55\u62d6\u52a8\u53c8\u62cd\u4e91\u5b58\u50a8\uff0c\u51cf\u5c11\u4eba\u5de5\u64cd\u4f5c\u91cf\u3002 \u4e3b\u8981\u9002\u7528\u4e8e\u4e0d\u60f3\u5f00\u53d1\u6570\u636e\u8fc1\u79fb\u7a0b\u5e8f\u3001\u4e2d\u5c0f\u89c4\u6a21\u6570\u636e\u8fc1\u79fb\u3002 FTP/FTPS \u600e\u4e48\u4f7f\u7528\uff0c \u8bf7\u70b9\u8fd9\u91cc \u3002 \u5f02\u6b65\u62c9\u53d6 \u5bf9\u80fd\u83b7\u53d6\u5230\u6216\u5df2\u77e5\u6570\u636e URL \u5217\u8868\u7684\u5b58\u50a8\u6e90\uff0c\u53ef\u4ee5\u4f7f\u7528\u5f02\u6b65\u62c9\u53d6\uff0c\u901a\u8fc7\u6587\u4ef6 URL\uff0c\u5229\u7528\u53c8\u62cd\u4e91 CDN \u53bb\u83b7\u53d6\u6587\u4ef6\uff0c\u4f7f\u6587\u4ef6\u5feb\u901f\u3001\u7a33\u5b9a\u8fc1\u79fb\u3002 \u4e3b\u8981\u9002\u7528\u4e8e\u4e2d\u5927\u89c4\u6a21\u6570\u636e\u8fc1\u79fb\u3002 \u5f02\u6b65\u62c9\u53d6\u600e\u4e48\u4f7f\u7528\uff0c \u8bf7\u70b9\u8fd9\u91cc \u3002 \u5982\u6709\u7591\u95ee\u8bf7 \u8054\u7cfb\u6211\u4eec","title":"\u6570\u636e\u8fc1\u79fb"},{"location":"api/developer_tools/","text":"FTP/FTPS \u00b6 \u901a\u8fc7 FTP/FTPS \u5ba2\u6237\u7aef\uff0c\u53ef\u4ee5\u8fde\u63a5\u4e91\u5b58\u50a8\u7684 FTP/FTPS \u670d\u52a1\u5668\uff0c\u5b9e\u73b0\u5bf9\u4e91\u5b58\u50a8\u7684\u7ba1\u7406\u3002\u63a8\u8350\u4f7f\u7528 FileZilla \u5ba2\u6237\u7aef \u3002 FTP/FTPS \u767b\u5f55\u65b9\u5f0f \u5730\u5740\uff08\u4e3b\u673a)\uff1a \u667a\u80fd\u9009\u8def\uff08\u63a8\u8350\uff09\uff1av0.ftp.upyun.com \u7535\u4fe1\u7ebf\u8def\uff1av1.ftp.upyun.com \u8054\u901a\u7ebf\u8def\uff1av2.ftp.upyun.com \u79fb\u52a8\u7ebf\u8def\uff1av3.ftp.upyun.com \u52a0\u5bc6\uff1a\u9009\u62e9 \u4e0d\u52a0\u5bc6 \u4f7f\u7528 FTP\uff0c\u9009\u62e9 \u663e\u5f0f\u7684 FTP over TLS \u6216 TLS/SSL \u663e\u5f0f\u52a0\u5bc6 \u4f7f\u7528 FTPS \u7528\u6237\u540d\uff1a \u64cd\u4f5c\u5458\u540d/\u670d\u52a1\u540d \uff0c\u5982 operator/mybucket \u5bc6\u7801\uff1a\u64cd\u4f5c\u5458\u7684\u5bc6\u7801 \u7aef\u53e3\uff1a21 \u672c\u6587\u6f14\u793a Windows \u4e0b\u7684 FTPS \u4f7f\u7528\u3002 \u767b\u5f55\u670d\u52a1 \u00b6 \u6253\u5f00 FileZilla\uff0c\u6309 FTP/FTPS \u4f7f\u7528\u8bf4\u660e\u8fdb\u884c\u767b\u5f55\u3002\u5982\u4e0b\u56fe\uff1a \u4e0a\u4f20\u6587\u4ef6 \u00b6 \u9009\u5b9a\u9700\u8981\u4e0a\u4f20\u7684\u6587\u4ef6\uff0c\u62d6\u52a8\u5230\u4e91\u5b58\u50a8\u670d\u52a1\u533a\u57df\u3002\u62d6\u52a8\u524d\uff0c\u8bf7\u6ce8\u610f\u4e91\u5b58\u50a8\u76ee\u5f55\u662f\u5426\u6b63\u786e\u3002 \u4e0b\u8f7d\u6587\u4ef6 \u00b6 \u9009\u5b9a\u9700\u8981\u4e0b\u8f7d\u7684\u6587\u4ef6\uff0c\u62d6\u52a8\u5230\u672c\u5730\u76ee\u5f55\u6587\u4ef6\u533a\u57df\u3002\u62d6\u52a8\u524d\uff0c\u8bf7\u6ce8\u610f\u4e91\u5b58\u50a8\u76ee\u5f55\u662f\u5426\u6b63\u786e\u3002 \u5220\u9664\u6587\u4ef6 \u00b6 \u9009\u5b9a\u9700\u8981\u5220\u9664\u7684\u6587\u4ef6\u3001\u76ee\u5f55\uff0c\u70b9\u51fb\u53f3\u952e\uff0c\u8fdb\u884c\u5220\u9664\u3002 \u9000\u51fa\u670d\u52a1 \u00b6 \u5173\u95ed\u8fde\u63a5\u6216\u9000\u51fa FileZilla \u5373\u53ef\u3002 UPX \uff08\u547d\u4ee4\u884c\u5de5\u5177\uff09 \u00b6 UPX \u662f\u53c8\u62cd\u4e91\u4e13\u4e3a\u5f00\u53d1\u8005\u8bbe\u8ba1\uff0c\u57fa\u4e8e\u547d\u4ee4\u884c\u7684\u4e91\u5b58\u50a8\u7ba1\u7406\u5de5\u5177\u3002\u901a\u8fc7\u5b83\uff0c\u53ef\u4ee5\u5b9e\u73b0\u6587\u4ef6\u4e0a\u4e0b\u4f20\u3001\u589e\u91cf\u6587\u4ef6\u540c\u6b65\u3001\u76ee\u5f55\u521b\u5efa\u5220\u9664\u3001\u6587\u4ef6\u5220\u9664\uff08\u5305\u62ec\u5f02\u6b65\u6587\u4ef6\u6279\u91cf\u5220\u9664\uff09\u3002 \u5728\u4f7f\u7528 UPX \u4e4b\u524d\uff0c\u9700\u8981\u4e0b\u8f7d\u5b83\uff0c \u70b9\u6b64\u8bbf\u95ee\u5230 Github \u4e0b\u8f7d UPX \u3002\u4e0b\u8f7d\u5b83\u540e\uff0c\u901a\u8fc7\u7ec8\u7aef\u4f7f\u7528\u3002 \u672c\u6587\u6f14\u793a Windows DOS \u7a97\u53e3\u4e0b UPX \u4f7f\u7528\uff0cLinux \u7684\u4f7f\u7528\u8bf7 \u89c2\u770b\u89c6\u9891 \u3002 \u8bed\u6cd5 \u00b6 upx [global options] command [command options] \u9009\u9879 command \u542b\u4e49 login \u767b\u5f55\u53c8\u62cd\u4e91\u5b58\u50a8 pwd \u663e\u793a\u5f53\u524d\u6240\u5904\u76ee\u5f55 ls \u663e\u793a\u5f53\u524d\u76ee\u5f55\u4e2d\u7684\u6587\u4ef6\u548c\u76ee\u5f55\u4fe1\u606f\uff0c\u52a0 \u2013d \uff0c \u4ec5\u663e\u793a\u76ee\u5f55\u4fe1\u606f cd \u6539\u53d8\u5de5\u4f5c\u76ee\u5f55\uff08\u8fdb\u5165\u4e00\u4e2a\u76ee\u5f55\uff09\uff0c\u52a0 .. \uff0c\u56de\u5230\u4e0a\u4e00\u7ea7\u76ee\u5f55 get \u4e0b\u8f7d\u4e00\u4e2a\u6587\u4ef6\u6216\u76ee\u5f55 put \u4e0a\u4f20\u4e00\u4e2a\u6587\u4ef6\u6216\u76ee\u5f55 sync \u589e\u91cf\u6587\u4ef6\u540c\u6b65\uff0c\u7c7b\u4f3c rsync mkdir \u521b\u5efa\u76ee\u5f55 rm \u5220\u9664\u6587\u4ef6\uff0c\u652f\u6301\u901a\u914d\u7b26 * \uff1b\u52a0 \u2013d \uff0c\u5220\u9664\u76ee\u5f55\uff1b\u52a0 \u2013a \uff0c\u5220\u9664\u76ee\u5f55\u548c\u6587\u4ef6\uff1b\u52a0 \u2013async \uff0c\u5f02\u6b65\u65b9\u5f0f\u5220\u9664\u6587\u4ef6\u6216\u76ee\u5f55 info \u663e\u793a\u767b\u5f55\u7684\u670d\u52a1\u540d\u3001\u64cd\u4f5c\u5458\u4fe1\u606f\u548c\u5f53\u524d\u6240\u5728\u76ee\u5f55 logout \u9000\u51fa\u53c8\u62cd\u4e91\u5b58\u50a8 global options \u542b\u4e49 -h \u663e\u793a\u5e2e\u52a9\u4fe1\u606f -v \u663e\u793a UPX \u7248\u672c\u4fe1\u606f\u6216\u5904\u7406\u8fc7\u7a0b\u4fe1\u606f \u8bbf\u95ee\u670d\u52a1 \u00b6 // \u767b\u5f55\u65b9\u5f0f\u4e00 upx-windows-amd64-v0.1.4.exe login // \u4f9d\u6b21\u8f93\u5165\u670d\u52a1\u540d\u3001\u64cd\u4f5c\u5458\u3001\u64cd\u4f5c\u5458\u7684\u5bc6\u7801 ServiceName: <bucket> Operator: <operator> Password: <operator_password> // \u767b\u5f55\u65b9\u5f0f\u4e8c upx-windows-amd64-v0.1.4.exe login <bucket> <operator> <operator_password> // \u767b\u5f55\u65b9\u5f0f\u4e09\uff0c\u7528\u4e8e\u591a\u64cd\u4f5c\u5458\u3001\u591a\u670d\u52a1\u767b\u5f55 upx-windows-amd64-v0.1.4.exe login <bucket> <operator> <operator_password> // \u751f\u6210\u57fa\u4e8e\u670d\u52a1\u540d\u3001\u64cd\u4f5c\u5458\u3001\u64cd\u4f5c\u5458\u5bc6\u7801\u7684\u79d8\u94a5 upx-windows-amd64-v0.1.4.exe auth <bucket> <operator> <operator_password> // \u6267\u884c\u64cd\u4f5c\u65f6\uff0c\u52a0\u4e0a --auth <key>\uff0c\u64cd\u4f5c\u57fa\u4e8e\u79d8\u94a5\u7684\u8eab\u4efd\u4fe1\u606f\u8fdb\u884c upx-windows-amd64-v0.1.4.exe info --auth <key> \u4e0a\u4f20\u6587\u4ef6 \u00b6 // \u4e0a\u4f20\u6587\u4ef6 upx-windows-amd64-v0.1.4.exe put <\u672c\u5730\u8def\u5f84> <\u4e91\u5b58\u50a8\u8def\u5f84> // \u83b7\u53d6\u670d\u52a1\u5f53\u524d\u76ee\u5f55\u4e0b\u7684\u6587\u4ef6\uff08\u542b\u76ee\u5f55\uff09\u5217\u8868 upx-windows-amd64-v0.1.4.exe ls \u4e0b\u8f7d\u6587\u4ef6 \u00b6 // \u4e0b\u8f7d\u6587\u4ef6 upx-windows-amd64-v0.1.4.exe get <\u4e91\u5b58\u50a8\u8def\u5f84> <\u672c\u5730\u8def\u5f84> \u589e\u91cf\u6587\u4ef6\u540c\u6b65 \u00b6 // \u589e\u91cf\u6587\u4ef6\u540c\u6b65,\u52a0 -v,\u663e\u793a\u589e\u91cf\u6587\u4ef6\u540c\u6b65\u8fc7\u7a0b\u4fe1\u606f upx-windows-amd64-v0.1.4.exe sync <\u672c\u5730\u76ee\u5f55> <\u4e91\u5b58\u50a8\u76ee\u5f55> -v \u521b\u5efa\u76ee\u5f55 \u00b6 // \u663e\u793a\u5f53\u524d\u6240\u5728\u76ee\u5f55 upx-windows-amd64-v0.1.4.exe pwd // \u5728\u5f53\u524d\u76ee\u5f55\u4e0b\uff0c\u521b\u5efa\u76ee\u5f55 upx-windows-amd64-v0.1.4.exe mkdir <\u76ee\u5f55\u540d\u79f0> \u5220\u9664\u6587\u4ef6\u3001\u76ee\u5f55 \u00b6 \u6587\u4ef6\u6216\u76ee\u5f55\u5220\u9664\u540e\uff0c\u4e0d\u53ef\u6062\u590d\uff0c\u8bf7\u614e\u91cd\u64cd\u4f5c\uff01 // \u5220\u9664\u6587\u4ef6 upx-windows-amd64-v0.1.4.exe rm <\u6587\u4ef6\u540d> // \u52a0 -d\uff0c\u5220\u9664\u76ee\u5f55 upx-windows-amd64-v0.1.4.exe rm -d <\u76ee\u5f55\u540d> // \u5f02\u6b65\u6587\u4ef6\u5220\u9664\uff0c\u901a\u914d\u7b26\u5339\u914d\uff0c\u6279\u91cf\u5220\u9664 upx-windows-amd64-v0.1.4.exe rm --async /* \u9000\u51fa\u670d\u52a1 \u00b6 // \u9000\u51fa\u670d\u52a1 upx-windows-amd64-v0.1.4.exe logout cURL\uff08\u547d\u4ee4\u884c\u5de5\u5177\uff09 \u00b6 cURL \u662f\u4e00\u4e2a\u5229\u7528 URL \u8bed\u6cd5\u5728\u547d\u4ee4\u884c\u4e0b\u5de5\u4f5c\u7684\u6587\u4ef6\u4f20\u8f93\u5de5\u5177\u3002\u501f\u52a9 cURL\uff0c\u4f7f\u7528 REST API \u3001 \u57fa\u672c\u8ba4\u8bc1 \u8fdb\u884c\u5b58\u50a8\u7ba1\u7406\uff0c\u5305\u62ec\u5217\u76ee\u5f55\u3001\u6587\u4ef6\u4e0a\u4e0b\u4f20\u3001\u76ee\u5f55\u521b\u5efa\u5220\u9664\u3001\u6587\u4ef6\u5220\u9664\u7b49\u3002 \u5728\u4f7f\u7528 cURL \u4e4b\u524d\uff0c\u8bf7\u786e\u4fdd\u60a8\u7684\u7ec8\u7aef\u652f\u6301\u5b83\u3002 \u672c\u6587\u6f14\u793a Windows DOS \u7a97\u53e3\u4e0b cURL \u4f7f\u7528\uff0cLinux \u7684\u4f7f\u7528\u8bf7 \u89c2\u770b\u89c6\u9891 \u3002 \u8bbf\u95ee\u670d\u52a1 \u00b6 // \u8bbf\u95ee\u670d\u52a1\uff0c\u5217\u51fa\u670d\u52a1\u6839\u76ee\u5f55\u4e0b\u6587\u4ef6\u4fe1\u606f\uff0c\u5982\u679c\u6ca1\u6709\u6587\u4ef6\u4fe1\u606f\uff0c\u5219\u4e3a\u7a7a curl http://v0.api.upyun.com/<bucket>/ -u <operator>:<password> -v \u4e0a\u4f20\u6587\u4ef6 \u00b6 // \u4e0a\u4f20\u6587\u4ef6 curl -T <\u4e0a\u4f20\u6587\u4ef6\u8def\u5f84> http://v0.api.upyun.com/<bucket>/<\u6587\u4ef6\u8def\u5f84> -u <operator>:<password> -v \u4e0b\u8f7d\u6587\u4ef6 \u00b6 // \u4e0b\u8f7d\u6587\u4ef6 curl http://v0.api.upyun.com/<bucket>/<\u6587\u4ef6> -o <\u6587\u4ef6\u672c\u5730\u4fdd\u5b58\u8def\u5f84> -u <operator>:<password> -v \u83b7\u53d6\u6587\u4ef6\u4fe1\u606f \u00b6 //\u83b7\u53d6\u6587\u4ef6/\u76ee\u5f55\u4fe1\u606f curl http://v0.api.upyun.com/<bucket>/<\u6587\u4ef6/\u76ee\u5f55\u540d> -X HEAD -u <operator>:<password> -v // \u8fd4\u56de\u4fe1\u606f x-upyun-file-type: <file \u8868\u793a\u6587\u4ef6\uff0cfolder \u8868\u793a\u6587\u4ef6\u5939> x-upyun-file-size: <\u6587\u4ef6/\u6587\u4ef6\u5939\u5927\u5c0f> x-upyun-file-date: <\u521b\u5efa\u65f6\u95f4\uff0cUnix \u65f6\u95f4\u6233> \u5220\u9664\u6587\u4ef6 \u00b6 //\u5220\u9664\u6587\u4ef6/\u76ee\u5f55\uff0c\u76ee\u5f55\u5fc5\u987b\u4e3a\u7a7a\u76ee\u5f55\uff0c\u624d\u80fd\u5220\u9664 curl http://v0.api.upyun.com/<bucket>/<\u6587\u4ef6/\u76ee\u5f55\u540d> -X DELETE -u <operator>:<password> -v \u5982\u6709\u7591\u95ee\u8bf7 \u8054\u7cfb\u6211\u4eec","title":"\u5f00\u53d1\u8005\u5de5\u5177"},{"location":"api/developer_tools/#ftpftps","text":"\u901a\u8fc7 FTP/FTPS \u5ba2\u6237\u7aef\uff0c\u53ef\u4ee5\u8fde\u63a5\u4e91\u5b58\u50a8\u7684 FTP/FTPS \u670d\u52a1\u5668\uff0c\u5b9e\u73b0\u5bf9\u4e91\u5b58\u50a8\u7684\u7ba1\u7406\u3002\u63a8\u8350\u4f7f\u7528 FileZilla \u5ba2\u6237\u7aef \u3002 FTP/FTPS \u767b\u5f55\u65b9\u5f0f \u5730\u5740\uff08\u4e3b\u673a)\uff1a \u667a\u80fd\u9009\u8def\uff08\u63a8\u8350\uff09\uff1av0.ftp.upyun.com \u7535\u4fe1\u7ebf\u8def\uff1av1.ftp.upyun.com \u8054\u901a\u7ebf\u8def\uff1av2.ftp.upyun.com \u79fb\u52a8\u7ebf\u8def\uff1av3.ftp.upyun.com \u52a0\u5bc6\uff1a\u9009\u62e9 \u4e0d\u52a0\u5bc6 \u4f7f\u7528 FTP\uff0c\u9009\u62e9 \u663e\u5f0f\u7684 FTP over TLS \u6216 TLS/SSL \u663e\u5f0f\u52a0\u5bc6 \u4f7f\u7528 FTPS \u7528\u6237\u540d\uff1a \u64cd\u4f5c\u5458\u540d/\u670d\u52a1\u540d \uff0c\u5982 operator/mybucket \u5bc6\u7801\uff1a\u64cd\u4f5c\u5458\u7684\u5bc6\u7801 \u7aef\u53e3\uff1a21 \u672c\u6587\u6f14\u793a Windows \u4e0b\u7684 FTPS \u4f7f\u7528\u3002","title":"FTP/FTPS"},{"location":"api/developer_tools/#_1","text":"\u6253\u5f00 FileZilla\uff0c\u6309 FTP/FTPS \u4f7f\u7528\u8bf4\u660e\u8fdb\u884c\u767b\u5f55\u3002\u5982\u4e0b\u56fe\uff1a","title":"\u767b\u5f55\u670d\u52a1"},{"location":"api/developer_tools/#_2","text":"\u9009\u5b9a\u9700\u8981\u4e0a\u4f20\u7684\u6587\u4ef6\uff0c\u62d6\u52a8\u5230\u4e91\u5b58\u50a8\u670d\u52a1\u533a\u57df\u3002\u62d6\u52a8\u524d\uff0c\u8bf7\u6ce8\u610f\u4e91\u5b58\u50a8\u76ee\u5f55\u662f\u5426\u6b63\u786e\u3002","title":"\u4e0a\u4f20\u6587\u4ef6"},{"location":"api/developer_tools/#_3","text":"\u9009\u5b9a\u9700\u8981\u4e0b\u8f7d\u7684\u6587\u4ef6\uff0c\u62d6\u52a8\u5230\u672c\u5730\u76ee\u5f55\u6587\u4ef6\u533a\u57df\u3002\u62d6\u52a8\u524d\uff0c\u8bf7\u6ce8\u610f\u4e91\u5b58\u50a8\u76ee\u5f55\u662f\u5426\u6b63\u786e\u3002","title":"\u4e0b\u8f7d\u6587\u4ef6"},{"location":"api/developer_tools/#_4","text":"\u9009\u5b9a\u9700\u8981\u5220\u9664\u7684\u6587\u4ef6\u3001\u76ee\u5f55\uff0c\u70b9\u51fb\u53f3\u952e\uff0c\u8fdb\u884c\u5220\u9664\u3002","title":"\u5220\u9664\u6587\u4ef6"},{"location":"api/developer_tools/#_5","text":"\u5173\u95ed\u8fde\u63a5\u6216\u9000\u51fa FileZilla \u5373\u53ef\u3002","title":"\u9000\u51fa\u670d\u52a1"},{"location":"api/developer_tools/#upx","text":"UPX \u662f\u53c8\u62cd\u4e91\u4e13\u4e3a\u5f00\u53d1\u8005\u8bbe\u8ba1\uff0c\u57fa\u4e8e\u547d\u4ee4\u884c\u7684\u4e91\u5b58\u50a8\u7ba1\u7406\u5de5\u5177\u3002\u901a\u8fc7\u5b83\uff0c\u53ef\u4ee5\u5b9e\u73b0\u6587\u4ef6\u4e0a\u4e0b\u4f20\u3001\u589e\u91cf\u6587\u4ef6\u540c\u6b65\u3001\u76ee\u5f55\u521b\u5efa\u5220\u9664\u3001\u6587\u4ef6\u5220\u9664\uff08\u5305\u62ec\u5f02\u6b65\u6587\u4ef6\u6279\u91cf\u5220\u9664\uff09\u3002 \u5728\u4f7f\u7528 UPX \u4e4b\u524d\uff0c\u9700\u8981\u4e0b\u8f7d\u5b83\uff0c \u70b9\u6b64\u8bbf\u95ee\u5230 Github \u4e0b\u8f7d UPX \u3002\u4e0b\u8f7d\u5b83\u540e\uff0c\u901a\u8fc7\u7ec8\u7aef\u4f7f\u7528\u3002 \u672c\u6587\u6f14\u793a Windows DOS \u7a97\u53e3\u4e0b UPX \u4f7f\u7528\uff0cLinux \u7684\u4f7f\u7528\u8bf7 \u89c2\u770b\u89c6\u9891 \u3002","title":"UPX \uff08\u547d\u4ee4\u884c\u5de5\u5177\uff09"},{"location":"api/developer_tools/#_6","text":"upx [global options] command [command options] \u9009\u9879 command \u542b\u4e49 login \u767b\u5f55\u53c8\u62cd\u4e91\u5b58\u50a8 pwd \u663e\u793a\u5f53\u524d\u6240\u5904\u76ee\u5f55 ls \u663e\u793a\u5f53\u524d\u76ee\u5f55\u4e2d\u7684\u6587\u4ef6\u548c\u76ee\u5f55\u4fe1\u606f\uff0c\u52a0 \u2013d \uff0c \u4ec5\u663e\u793a\u76ee\u5f55\u4fe1\u606f cd \u6539\u53d8\u5de5\u4f5c\u76ee\u5f55\uff08\u8fdb\u5165\u4e00\u4e2a\u76ee\u5f55\uff09\uff0c\u52a0 .. \uff0c\u56de\u5230\u4e0a\u4e00\u7ea7\u76ee\u5f55 get \u4e0b\u8f7d\u4e00\u4e2a\u6587\u4ef6\u6216\u76ee\u5f55 put \u4e0a\u4f20\u4e00\u4e2a\u6587\u4ef6\u6216\u76ee\u5f55 sync \u589e\u91cf\u6587\u4ef6\u540c\u6b65\uff0c\u7c7b\u4f3c rsync mkdir \u521b\u5efa\u76ee\u5f55 rm \u5220\u9664\u6587\u4ef6\uff0c\u652f\u6301\u901a\u914d\u7b26 * \uff1b\u52a0 \u2013d \uff0c\u5220\u9664\u76ee\u5f55\uff1b\u52a0 \u2013a \uff0c\u5220\u9664\u76ee\u5f55\u548c\u6587\u4ef6\uff1b\u52a0 \u2013async \uff0c\u5f02\u6b65\u65b9\u5f0f\u5220\u9664\u6587\u4ef6\u6216\u76ee\u5f55 info \u663e\u793a\u767b\u5f55\u7684\u670d\u52a1\u540d\u3001\u64cd\u4f5c\u5458\u4fe1\u606f\u548c\u5f53\u524d\u6240\u5728\u76ee\u5f55 logout \u9000\u51fa\u53c8\u62cd\u4e91\u5b58\u50a8 global options \u542b\u4e49 -h \u663e\u793a\u5e2e\u52a9\u4fe1\u606f -v \u663e\u793a UPX \u7248\u672c\u4fe1\u606f\u6216\u5904\u7406\u8fc7\u7a0b\u4fe1\u606f","title":"\u8bed\u6cd5"},{"location":"api/developer_tools/#_7","text":"// \u767b\u5f55\u65b9\u5f0f\u4e00 upx-windows-amd64-v0.1.4.exe login // \u4f9d\u6b21\u8f93\u5165\u670d\u52a1\u540d\u3001\u64cd\u4f5c\u5458\u3001\u64cd\u4f5c\u5458\u7684\u5bc6\u7801 ServiceName: <bucket> Operator: <operator> Password: <operator_password> // \u767b\u5f55\u65b9\u5f0f\u4e8c upx-windows-amd64-v0.1.4.exe login <bucket> <operator> <operator_password> // \u767b\u5f55\u65b9\u5f0f\u4e09\uff0c\u7528\u4e8e\u591a\u64cd\u4f5c\u5458\u3001\u591a\u670d\u52a1\u767b\u5f55 upx-windows-amd64-v0.1.4.exe login <bucket> <operator> <operator_password> // \u751f\u6210\u57fa\u4e8e\u670d\u52a1\u540d\u3001\u64cd\u4f5c\u5458\u3001\u64cd\u4f5c\u5458\u5bc6\u7801\u7684\u79d8\u94a5 upx-windows-amd64-v0.1.4.exe auth <bucket> <operator> <operator_password> // \u6267\u884c\u64cd\u4f5c\u65f6\uff0c\u52a0\u4e0a --auth <key>\uff0c\u64cd\u4f5c\u57fa\u4e8e\u79d8\u94a5\u7684\u8eab\u4efd\u4fe1\u606f\u8fdb\u884c upx-windows-amd64-v0.1.4.exe info --auth <key>","title":"\u8bbf\u95ee\u670d\u52a1"},{"location":"api/developer_tools/#_8","text":"// \u4e0a\u4f20\u6587\u4ef6 upx-windows-amd64-v0.1.4.exe put <\u672c\u5730\u8def\u5f84> <\u4e91\u5b58\u50a8\u8def\u5f84> // \u83b7\u53d6\u670d\u52a1\u5f53\u524d\u76ee\u5f55\u4e0b\u7684\u6587\u4ef6\uff08\u542b\u76ee\u5f55\uff09\u5217\u8868 upx-windows-amd64-v0.1.4.exe ls","title":"\u4e0a\u4f20\u6587\u4ef6"},{"location":"api/developer_tools/#_9","text":"// \u4e0b\u8f7d\u6587\u4ef6 upx-windows-amd64-v0.1.4.exe get <\u4e91\u5b58\u50a8\u8def\u5f84> <\u672c\u5730\u8def\u5f84>","title":"\u4e0b\u8f7d\u6587\u4ef6"},{"location":"api/developer_tools/#_10","text":"// \u589e\u91cf\u6587\u4ef6\u540c\u6b65,\u52a0 -v,\u663e\u793a\u589e\u91cf\u6587\u4ef6\u540c\u6b65\u8fc7\u7a0b\u4fe1\u606f upx-windows-amd64-v0.1.4.exe sync <\u672c\u5730\u76ee\u5f55> <\u4e91\u5b58\u50a8\u76ee\u5f55> -v","title":"\u589e\u91cf\u6587\u4ef6\u540c\u6b65"},{"location":"api/developer_tools/#_11","text":"// \u663e\u793a\u5f53\u524d\u6240\u5728\u76ee\u5f55 upx-windows-amd64-v0.1.4.exe pwd // \u5728\u5f53\u524d\u76ee\u5f55\u4e0b\uff0c\u521b\u5efa\u76ee\u5f55 upx-windows-amd64-v0.1.4.exe mkdir <\u76ee\u5f55\u540d\u79f0>","title":"\u521b\u5efa\u76ee\u5f55"},{"location":"api/developer_tools/#_12","text":"\u6587\u4ef6\u6216\u76ee\u5f55\u5220\u9664\u540e\uff0c\u4e0d\u53ef\u6062\u590d\uff0c\u8bf7\u614e\u91cd\u64cd\u4f5c\uff01 // \u5220\u9664\u6587\u4ef6 upx-windows-amd64-v0.1.4.exe rm <\u6587\u4ef6\u540d> // \u52a0 -d\uff0c\u5220\u9664\u76ee\u5f55 upx-windows-amd64-v0.1.4.exe rm -d <\u76ee\u5f55\u540d> // \u5f02\u6b65\u6587\u4ef6\u5220\u9664\uff0c\u901a\u914d\u7b26\u5339\u914d\uff0c\u6279\u91cf\u5220\u9664 upx-windows-amd64-v0.1.4.exe rm --async /*","title":"\u5220\u9664\u6587\u4ef6\u3001\u76ee\u5f55"},{"location":"api/developer_tools/#_13","text":"// \u9000\u51fa\u670d\u52a1 upx-windows-amd64-v0.1.4.exe logout","title":"\u9000\u51fa\u670d\u52a1"},{"location":"api/developer_tools/#curl","text":"cURL \u662f\u4e00\u4e2a\u5229\u7528 URL \u8bed\u6cd5\u5728\u547d\u4ee4\u884c\u4e0b\u5de5\u4f5c\u7684\u6587\u4ef6\u4f20\u8f93\u5de5\u5177\u3002\u501f\u52a9 cURL\uff0c\u4f7f\u7528 REST API \u3001 \u57fa\u672c\u8ba4\u8bc1 \u8fdb\u884c\u5b58\u50a8\u7ba1\u7406\uff0c\u5305\u62ec\u5217\u76ee\u5f55\u3001\u6587\u4ef6\u4e0a\u4e0b\u4f20\u3001\u76ee\u5f55\u521b\u5efa\u5220\u9664\u3001\u6587\u4ef6\u5220\u9664\u7b49\u3002 \u5728\u4f7f\u7528 cURL \u4e4b\u524d\uff0c\u8bf7\u786e\u4fdd\u60a8\u7684\u7ec8\u7aef\u652f\u6301\u5b83\u3002 \u672c\u6587\u6f14\u793a Windows DOS \u7a97\u53e3\u4e0b cURL \u4f7f\u7528\uff0cLinux \u7684\u4f7f\u7528\u8bf7 \u89c2\u770b\u89c6\u9891 \u3002","title":"cURL\uff08\u547d\u4ee4\u884c\u5de5\u5177\uff09"},{"location":"api/developer_tools/#_14","text":"// \u8bbf\u95ee\u670d\u52a1\uff0c\u5217\u51fa\u670d\u52a1\u6839\u76ee\u5f55\u4e0b\u6587\u4ef6\u4fe1\u606f\uff0c\u5982\u679c\u6ca1\u6709\u6587\u4ef6\u4fe1\u606f\uff0c\u5219\u4e3a\u7a7a curl http://v0.api.upyun.com/<bucket>/ -u <operator>:<password> -v","title":"\u8bbf\u95ee\u670d\u52a1"},{"location":"api/developer_tools/#_15","text":"// \u4e0a\u4f20\u6587\u4ef6 curl -T <\u4e0a\u4f20\u6587\u4ef6\u8def\u5f84> http://v0.api.upyun.com/<bucket>/<\u6587\u4ef6\u8def\u5f84> -u <operator>:<password> -v","title":"\u4e0a\u4f20\u6587\u4ef6"},{"location":"api/developer_tools/#_16","text":"// \u4e0b\u8f7d\u6587\u4ef6 curl http://v0.api.upyun.com/<bucket>/<\u6587\u4ef6> -o <\u6587\u4ef6\u672c\u5730\u4fdd\u5b58\u8def\u5f84> -u <operator>:<password> -v","title":"\u4e0b\u8f7d\u6587\u4ef6"},{"location":"api/developer_tools/#_17","text":"//\u83b7\u53d6\u6587\u4ef6/\u76ee\u5f55\u4fe1\u606f curl http://v0.api.upyun.com/<bucket>/<\u6587\u4ef6/\u76ee\u5f55\u540d> -X HEAD -u <operator>:<password> -v // \u8fd4\u56de\u4fe1\u606f x-upyun-file-type: <file \u8868\u793a\u6587\u4ef6\uff0cfolder \u8868\u793a\u6587\u4ef6\u5939> x-upyun-file-size: <\u6587\u4ef6/\u6587\u4ef6\u5939\u5927\u5c0f> x-upyun-file-date: <\u521b\u5efa\u65f6\u95f4\uff0cUnix \u65f6\u95f4\u6233>","title":"\u83b7\u53d6\u6587\u4ef6\u4fe1\u606f"},{"location":"api/developer_tools/#_18","text":"//\u5220\u9664\u6587\u4ef6/\u76ee\u5f55\uff0c\u76ee\u5f55\u5fc5\u987b\u4e3a\u7a7a\u76ee\u5f55\uff0c\u624d\u80fd\u5220\u9664 curl http://v0.api.upyun.com/<bucket>/<\u6587\u4ef6/\u76ee\u5f55\u540d> -X DELETE -u <operator>:<password> -v \u5982\u6709\u7591\u95ee\u8bf7 \u8054\u7cfb\u6211\u4eec","title":"\u5220\u9664\u6587\u4ef6"},{"location":"api/errno/","text":"\u6982\u8ff0 \u00b6 API \u8bf7\u6c42\u5931\u8d25\u65f6\uff0c\u670d\u52a1\u7aef\u4f1a\u8fd4\u56de\u4e00\u4e2a JSON \u683c\u5f0f\u7684\u54cd\u5e94\u4f53\u3002\u5b83\u53ef\u4ee5\u7528\u4e8e\u5b9a\u4f4d\u5177\u4f53\u9519\u8bef\u539f\u56e0\u3002\u5982\uff1a {\"msg\": \"file or directory not found\", \"code\": 40400001, \"id\": \"11e4a729d24943409933a5e8314cd32e\"} ** \u5b57\u6bb5\u8bf4\u660e ** code \uff1a\u9519\u8bef\u7801\u3002\u5177\u4f53\u542b\u4e49\u89c1 API \u9519\u8bef\u7801\u8868 \u3002 msg \uff1a\u9519\u8bef\u7684\u7b80\u5355\u63cf\u8ff0\u3002 id \uff1a\u53c8\u62cd\u4e91\u4e3a\u8be5\u8bf7\u6c42\u751f\u6210\u7684\u552f\u4e00 ID\u3002 API \u9519\u8bef\u7801\u8868 \u00b6 \u5982\u9047 5xx \u9519\u8bef\uff0c\u8bf7\u53cd\u9988\u7ed9 \u552e\u540e \u6216\u60a8\u7684\u5546\u52a1\u7ecf\u7406\u3002 HTTP \u72b6\u6001\u7801 \u8fd4\u56de\u4ee3\u7801 \u542b\u4e49 400 40001000 wrong uri 400 40001001 wrong content-md5 400 40001002 wrong content-length 400 40001003 meta invalid 400 40001004 folder args invalid 400 40001005 iter args invalid 400 40001006 type invalid 400 40001007 block invalid 400 40001008 list type not support 400 40001009 invalid update time 400 40001011 invalid append position 400 40001021 invalid utf8 key 400 40001022 wrong multipart action 400 40001023 wrong multipart uuid 400 40001024 wrong multipart type 400 40001025 wrong multipart length 400 40001027 wrong multipart size 400 40001030 wrong multipart part id 400 40001031 duplicate multipart part 400 40001032 oversize multipart part 400 40001033 overflow multipart part 400 40001034 unexpect multipart length 400 40001035 notfound multipart uuid 400 40001036 completed multipart 400 40001037 incomplete multipart parts 400 40001038 invalid append file 400 40001041 request wrong type 400 40001042 request wrong timestamp 400 40001043 request wrong column 400 40001044 request wrong list 400 40001045 not found 400 40001046 wrong length 400 40001047 wrong check column 400 40001051 encode data error 400 40001052 decode data error 400 40001055 put and check error 400 40001161 wrong range 400 40010001 not enough arguments 400 40010002 url not allowed 400 40010003 tasks number error 400 40010029 only 1~10 tasks supported in get 400 40010033 decode tasks error 400 40011001 invalid x-gmkerl-type 400 40011002 invalid x-gmkerl-value 400 40011003 invalid x-gmkerl-unsharp 400 40011004 invalid x-gmkerl-quality 400 40011005 invalid x-gmkerl-exif-switch 400 40011006 invalid x-gmkerl-gifto 400 40011007 invalid x-gmkerl-webp 400 40011008 invalid x-gmkerl-format 400 40011009 invalid x-gmkerl-crop 400 40011010 invalid x-gmkerl-rotate 400 40011011 invalid x-gmkerl-gaussblur 400 40011012 invalid x-gmkerl-compress 400 40011013 invalid x-gmkerl-progressive 400 40011014 invalid x-gmkerl-noicc 400 40011015 invalid x-gmkerl-watermark-switch 400 40011016 invalid x-gmkerl-watermark-align 400 40011017 invalid x-gmkerl-watermark-margin 400 40011018 invalid x-gmkerl-watermark-opacity 400 40011019 invalid x-gmkerl-watermark-animate 400 40011020 invalid x-gmkerl-watermark-font 400 40011021 invalid x-gmkerl-watermark-text 400 40011022 invalid x-gmkerl-watermark-color 400 40011023 invalid x-gmkerl-watermark-border 400 40011024 invalid x-gmkerl-watermark-size 400 40011025 invalid x-gmkerl-gradient-orientation 400 40011026 invalid x-gmkerl-gradient-pos 400 40011027 invalid x-gmkerl-gradient-startcolor 400 40011028 invalid x-gmkerl-gradient-stopcolor 400 40011029 invalid x-gmkerl-extract-func 400 40011030 invalid x-gmkerl-extract-color-count 400 40011031 invalid x-gmkerl-extract-offset 400 40011032 invalid x-gmkerl-extract-palette 400 40011033 invalid x-gmkerl-canvas 400 40011034 invalid x-gmkerl-canvas-color 400 40011035 invalid param in thumb 400 40011050 invalid app name 400 40011051 invalid x-upyun-part-id 400 40011052 invalid x-upyun-multi-length 400 40011053 invalid x-upyun-multi-type 400 40011054 invalid x-upyun-part-size 400 40011055 invalid invalid multipart stage 400 40011056 invalid invalid x-upyun-multi-uuid 400 40011057 invalid UTF8 Key 400 40011058 invalid x-upyun-multi-uuid not found 400 40011059 file already upload 400 40011060 file md5 not match 400 40011061 part id error 400 40011062 part already complete 400 40011091 invalid app name 400 40011092 invalid file ttl 400 40000000 storage bad request 400 40000001 need save-key 400 40000002 need body 400 40000003 need bucket name 400 40000004 need expiration 400 40000005 need file 400 40000006 content md5 not match 400 40000007 need policy 400 40000008 need signature 400 40000009 decode policy error 400 40000010 data too long for ext-param 400 40000011 chunked request bodies not supported yet 400 40000012 write file to fs error 400 40000013 need content-md5 but no body provided 400 40000014 need content-md5 but no content provided 400 40000015 missing required arguments 400 40000016 missing file_hash argument 400 40000017 missing file_blocks argument 400 40000018 too many file blocks 400 40000019 missing file_size argument 400 40000020 missing save_token argument 400 40000021 missing block_index argument 400 40000022 missing block_hash argument 400 40000023 block already exists 400 40000024 block not finished 400 40000025 file size not match 400 40000026 block index out of range 400 40000027 block size too small, at least 100KB 400 40000028 block size too large, at most 5MB 400 40000029 save-key encoding should be utf8 400 40000030 path encoding should be utf8 400 40000031 filename should be utf8 400 40000032 ffmpeg args error 400 40000033 failed to read firstchunk 400 40000034 client error 400 40000035 need purge body 400 40000036 uri bucket must be same as param bucket 400 40000037 unknown service 400 40000038 no boundary defined in Content-Type 400 40000039 Content-Length is equal to 0 400 40000040 source bucket not equal target bucket 400 40000041 source key equals to target key 400 40000042 source key wrong 400 40000043 wrong metadata directive 400 40000044 need metadata 401 40100001 need date header 401 40100002 date offset error 401 40100003 unknown realm in authorization header 401 40100004 need authorization header 401 40100005 signature error 401 40100006 user not exists 401 40100007 user blocked 401 40100008 user blocked in this bucket 401 40100009 user password error 401 40100010 account not exist 401 40100011 account blocked 401 40100012 bucket not exist 401 40100013 bucket blocked 401 40100014 bucket removed 401 40100015 bucket read only 401 40100016 invalid date value in header 401 40100017 user need permission 401 40100018 account inactivate 401 40100019 account forbidden 401 40100020 account reject 401 40100021 overdue account 401 40100022 uri prefix error 401 40100023 uri postfix error 401 40100024 expire error 401 40100025 auth error 403 40300001 file name contains invalid chars (\\r\\n\\t) 403 40300002 file path too long 403 40300003 file name too long 403 40300004 bucket is full 403 40300005 directory not empty 403 40300006 authorization has expired 403 40300007 content md5 not match 403 40300008 file too small 403 40300009 file too large 403 40300010 file type error 403 40300011 has no permission to delete 403 40300012 need content-type 403 40300013 form api disabled 403 40300014 order must be asc or desc 403 40300015 path is not a file, maybe a directory 403 40300016 content-secret only accept [a-zA-Z0-9] 403 40300017 no thumb setting found for bucket 403 40300018 not an image 403 40300019 image width too small or too big 403 40300020 image height too small or too big 403 40300021 image limit exceeded 403 40300022 invalid image-width-range 403 40300023 invalid image-height-range 403 40300024 exceed max size 403 40300025 wrong content-type header 403 40300026 need content-length header 403 40300027 request body too big 403 40300028 request has expired 403 40300029 purge too much items 403 40300030 wrong content-length header 403 40300031 only support that list flat files by bucket's root folder 403 40300032 start time format error 403 40300033 end time format error 403 40300034 start time bigger than end time 403 40300035 content-length of policy format error 403 40310007 Binded domain and source domain can't be the same 404 40400001 file or directory not found 404 40400002 base64 decoded err 404 40401004 Not found, mark as deleted 404 40401005 Not found, block deleted 404 40401006 type invalid 406 40600001 dir not acceptable 406 40600002 folder already exists 406 40600003 single-copy bucket not support form api 406 40600004 single-copy bucket not support breakpoint resume 408 40800001 read client request timeout 412 41200001 precondition failed 413 41300001 content length too large 415 41500001 media type error, need content-type 429 42900001 too many requests 429 42900002 too many requests of the same uri 429 42900003 too many requests of the same bucket 429 42900004 request banned 429 42900005 bandwidth limit 429 42900006 too many auth check 503 50300000 unknown error 503 50300001 write hub failed 503 50300002 decode error 503 50300003 ffmpeg error 503 50300006 get hub error 503 50300007 capture file from fs error 503 50300008 delete hub error 503 50300009 get body temp file error 503 50300010 read body temp file error 503 50300011 capture file from ffmpeg error 503 50300012 service error in thumb 503 50300013 put file capture timeout 503 50300014 get client socket error 503 50300015 decode image info error 503 50300016 get image info error 503 50300017 failed to new md5 503 50300018 failed to new form 503 50300020 put file capture error 503 50300021 put capture broken pipe 503 50300022 new resource error 503 50300023 connect to db error 503 50300024 get master failed 503 50300025 write info error 503 50300026 get data error 503 50300027 put file to fs error 503 50300028 get file from fs error 503 50300029 unknow error 503 50300030 upstream closed connection 503 50300031 read upstream timeout 503 50300032 wrong data 503 50300033 new resource error 503 50300034 get info errors 503 50300035 decode hub body error 503 50300036 send to message queue error 503 50300038 failed to new http 503 50300039 failed to get client body reader 503 50300040 wrong config 503 50300041 connect to database error 503 50300042 delete path error 503 50300043 put task to message queue error 503 50300044 avalon list dir error \u5982\u6709\u7591\u95ee\u8bf7 \u8054\u7cfb\u6211\u4eec","title":"API \u9519\u8bef\u7801\u8868"},{"location":"api/errno/#_1","text":"API \u8bf7\u6c42\u5931\u8d25\u65f6\uff0c\u670d\u52a1\u7aef\u4f1a\u8fd4\u56de\u4e00\u4e2a JSON \u683c\u5f0f\u7684\u54cd\u5e94\u4f53\u3002\u5b83\u53ef\u4ee5\u7528\u4e8e\u5b9a\u4f4d\u5177\u4f53\u9519\u8bef\u539f\u56e0\u3002\u5982\uff1a {\"msg\": \"file or directory not found\", \"code\": 40400001, \"id\": \"11e4a729d24943409933a5e8314cd32e\"} ** \u5b57\u6bb5\u8bf4\u660e ** code \uff1a\u9519\u8bef\u7801\u3002\u5177\u4f53\u542b\u4e49\u89c1 API \u9519\u8bef\u7801\u8868 \u3002 msg \uff1a\u9519\u8bef\u7684\u7b80\u5355\u63cf\u8ff0\u3002 id \uff1a\u53c8\u62cd\u4e91\u4e3a\u8be5\u8bf7\u6c42\u751f\u6210\u7684\u552f\u4e00 ID\u3002","title":"\u6982\u8ff0"},{"location":"api/errno/#api","text":"\u5982\u9047 5xx \u9519\u8bef\uff0c\u8bf7\u53cd\u9988\u7ed9 \u552e\u540e \u6216\u60a8\u7684\u5546\u52a1\u7ecf\u7406\u3002 HTTP \u72b6\u6001\u7801 \u8fd4\u56de\u4ee3\u7801 \u542b\u4e49 400 40001000 wrong uri 400 40001001 wrong content-md5 400 40001002 wrong content-length 400 40001003 meta invalid 400 40001004 folder args invalid 400 40001005 iter args invalid 400 40001006 type invalid 400 40001007 block invalid 400 40001008 list type not support 400 40001009 invalid update time 400 40001011 invalid append position 400 40001021 invalid utf8 key 400 40001022 wrong multipart action 400 40001023 wrong multipart uuid 400 40001024 wrong multipart type 400 40001025 wrong multipart length 400 40001027 wrong multipart size 400 40001030 wrong multipart part id 400 40001031 duplicate multipart part 400 40001032 oversize multipart part 400 40001033 overflow multipart part 400 40001034 unexpect multipart length 400 40001035 notfound multipart uuid 400 40001036 completed multipart 400 40001037 incomplete multipart parts 400 40001038 invalid append file 400 40001041 request wrong type 400 40001042 request wrong timestamp 400 40001043 request wrong column 400 40001044 request wrong list 400 40001045 not found 400 40001046 wrong length 400 40001047 wrong check column 400 40001051 encode data error 400 40001052 decode data error 400 40001055 put and check error 400 40001161 wrong range 400 40010001 not enough arguments 400 40010002 url not allowed 400 40010003 tasks number error 400 40010029 only 1~10 tasks supported in get 400 40010033 decode tasks error 400 40011001 invalid x-gmkerl-type 400 40011002 invalid x-gmkerl-value 400 40011003 invalid x-gmkerl-unsharp 400 40011004 invalid x-gmkerl-quality 400 40011005 invalid x-gmkerl-exif-switch 400 40011006 invalid x-gmkerl-gifto 400 40011007 invalid x-gmkerl-webp 400 40011008 invalid x-gmkerl-format 400 40011009 invalid x-gmkerl-crop 400 40011010 invalid x-gmkerl-rotate 400 40011011 invalid x-gmkerl-gaussblur 400 40011012 invalid x-gmkerl-compress 400 40011013 invalid x-gmkerl-progressive 400 40011014 invalid x-gmkerl-noicc 400 40011015 invalid x-gmkerl-watermark-switch 400 40011016 invalid x-gmkerl-watermark-align 400 40011017 invalid x-gmkerl-watermark-margin 400 40011018 invalid x-gmkerl-watermark-opacity 400 40011019 invalid x-gmkerl-watermark-animate 400 40011020 invalid x-gmkerl-watermark-font 400 40011021 invalid x-gmkerl-watermark-text 400 40011022 invalid x-gmkerl-watermark-color 400 40011023 invalid x-gmkerl-watermark-border 400 40011024 invalid x-gmkerl-watermark-size 400 40011025 invalid x-gmkerl-gradient-orientation 400 40011026 invalid x-gmkerl-gradient-pos 400 40011027 invalid x-gmkerl-gradient-startcolor 400 40011028 invalid x-gmkerl-gradient-stopcolor 400 40011029 invalid x-gmkerl-extract-func 400 40011030 invalid x-gmkerl-extract-color-count 400 40011031 invalid x-gmkerl-extract-offset 400 40011032 invalid x-gmkerl-extract-palette 400 40011033 invalid x-gmkerl-canvas 400 40011034 invalid x-gmkerl-canvas-color 400 40011035 invalid param in thumb 400 40011050 invalid app name 400 40011051 invalid x-upyun-part-id 400 40011052 invalid x-upyun-multi-length 400 40011053 invalid x-upyun-multi-type 400 40011054 invalid x-upyun-part-size 400 40011055 invalid invalid multipart stage 400 40011056 invalid invalid x-upyun-multi-uuid 400 40011057 invalid UTF8 Key 400 40011058 invalid x-upyun-multi-uuid not found 400 40011059 file already upload 400 40011060 file md5 not match 400 40011061 part id error 400 40011062 part already complete 400 40011091 invalid app name 400 40011092 invalid file ttl 400 40000000 storage bad request 400 40000001 need save-key 400 40000002 need body 400 40000003 need bucket name 400 40000004 need expiration 400 40000005 need file 400 40000006 content md5 not match 400 40000007 need policy 400 40000008 need signature 400 40000009 decode policy error 400 40000010 data too long for ext-param 400 40000011 chunked request bodies not supported yet 400 40000012 write file to fs error 400 40000013 need content-md5 but no body provided 400 40000014 need content-md5 but no content provided 400 40000015 missing required arguments 400 40000016 missing file_hash argument 400 40000017 missing file_blocks argument 400 40000018 too many file blocks 400 40000019 missing file_size argument 400 40000020 missing save_token argument 400 40000021 missing block_index argument 400 40000022 missing block_hash argument 400 40000023 block already exists 400 40000024 block not finished 400 40000025 file size not match 400 40000026 block index out of range 400 40000027 block size too small, at least 100KB 400 40000028 block size too large, at most 5MB 400 40000029 save-key encoding should be utf8 400 40000030 path encoding should be utf8 400 40000031 filename should be utf8 400 40000032 ffmpeg args error 400 40000033 failed to read firstchunk 400 40000034 client error 400 40000035 need purge body 400 40000036 uri bucket must be same as param bucket 400 40000037 unknown service 400 40000038 no boundary defined in Content-Type 400 40000039 Content-Length is equal to 0 400 40000040 source bucket not equal target bucket 400 40000041 source key equals to target key 400 40000042 source key wrong 400 40000043 wrong metadata directive 400 40000044 need metadata 401 40100001 need date header 401 40100002 date offset error 401 40100003 unknown realm in authorization header 401 40100004 need authorization header 401 40100005 signature error 401 40100006 user not exists 401 40100007 user blocked 401 40100008 user blocked in this bucket 401 40100009 user password error 401 40100010 account not exist 401 40100011 account blocked 401 40100012 bucket not exist 401 40100013 bucket blocked 401 40100014 bucket removed 401 40100015 bucket read only 401 40100016 invalid date value in header 401 40100017 user need permission 401 40100018 account inactivate 401 40100019 account forbidden 401 40100020 account reject 401 40100021 overdue account 401 40100022 uri prefix error 401 40100023 uri postfix error 401 40100024 expire error 401 40100025 auth error 403 40300001 file name contains invalid chars (\\r\\n\\t) 403 40300002 file path too long 403 40300003 file name too long 403 40300004 bucket is full 403 40300005 directory not empty 403 40300006 authorization has expired 403 40300007 content md5 not match 403 40300008 file too small 403 40300009 file too large 403 40300010 file type error 403 40300011 has no permission to delete 403 40300012 need content-type 403 40300013 form api disabled 403 40300014 order must be asc or desc 403 40300015 path is not a file, maybe a directory 403 40300016 content-secret only accept [a-zA-Z0-9] 403 40300017 no thumb setting found for bucket 403 40300018 not an image 403 40300019 image width too small or too big 403 40300020 image height too small or too big 403 40300021 image limit exceeded 403 40300022 invalid image-width-range 403 40300023 invalid image-height-range 403 40300024 exceed max size 403 40300025 wrong content-type header 403 40300026 need content-length header 403 40300027 request body too big 403 40300028 request has expired 403 40300029 purge too much items 403 40300030 wrong content-length header 403 40300031 only support that list flat files by bucket's root folder 403 40300032 start time format error 403 40300033 end time format error 403 40300034 start time bigger than end time 403 40300035 content-length of policy format error 403 40310007 Binded domain and source domain can't be the same 404 40400001 file or directory not found 404 40400002 base64 decoded err 404 40401004 Not found, mark as deleted 404 40401005 Not found, block deleted 404 40401006 type invalid 406 40600001 dir not acceptable 406 40600002 folder already exists 406 40600003 single-copy bucket not support form api 406 40600004 single-copy bucket not support breakpoint resume 408 40800001 read client request timeout 412 41200001 precondition failed 413 41300001 content length too large 415 41500001 media type error, need content-type 429 42900001 too many requests 429 42900002 too many requests of the same uri 429 42900003 too many requests of the same bucket 429 42900004 request banned 429 42900005 bandwidth limit 429 42900006 too many auth check 503 50300000 unknown error 503 50300001 write hub failed 503 50300002 decode error 503 50300003 ffmpeg error 503 50300006 get hub error 503 50300007 capture file from fs error 503 50300008 delete hub error 503 50300009 get body temp file error 503 50300010 read body temp file error 503 50300011 capture file from ffmpeg error 503 50300012 service error in thumb 503 50300013 put file capture timeout 503 50300014 get client socket error 503 50300015 decode image info error 503 50300016 get image info error 503 50300017 failed to new md5 503 50300018 failed to new form 503 50300020 put file capture error 503 50300021 put capture broken pipe 503 50300022 new resource error 503 50300023 connect to db error 503 50300024 get master failed 503 50300025 write info error 503 50300026 get data error 503 50300027 put file to fs error 503 50300028 get file from fs error 503 50300029 unknow error 503 50300030 upstream closed connection 503 50300031 read upstream timeout 503 50300032 wrong data 503 50300033 new resource error 503 50300034 get info errors 503 50300035 decode hub body error 503 50300036 send to message queue error 503 50300038 failed to new http 503 50300039 failed to get client body reader 503 50300040 wrong config 503 50300041 connect to database error 503 50300042 delete path error 503 50300043 put task to message queue error 503 50300044 avalon list dir error \u5982\u6709\u7591\u95ee\u8bf7 \u8054\u7cfb\u6211\u4eec","title":"API \u9519\u8bef\u7801\u8868"},{"location":"api/form_api/","text":"\u901a\u8fc7\u7f51\u9875 FORM\uff0c\u4f7f\u7528 HTTP/HTTPS \u76f4\u63a5\u628a\u6587\u4ef6\u4e0a\u4f20\u5230\u53c8\u62cd\u4e91\u5b58\u50a8\u3002\u7279\u522b\u5730\uff0c\u6587\u4e2d\u8bf7\u6c42\u53c2\u6570\u653e\u5728 HTTP/HTTPS body \u4e2d\u4f20\u9012\uff0c\u8bf7\u786e\u4fdd\u60a8\u4e0a\u4f20\u8868\u5355\u683c\u5f0f\u7b26\u5408 RFC 1867 \u534f\u8bae\u89c4\u8303\u3002 \u8bf7\u6c42\u65b9\u6cd5 \u00b6 curl http://v0.api.upyun.com/<bucket> \\ -F authorization=\"UPYUN <Operator>:<Signature>\" \\ -F file=@<filename> \\ -F policy=<policy> \\ # \u5176\u4ed6\u53c2\u6570... \u57fa\u672c\u57df\u540d \u667a\u80fd\u9009\u8def\uff08\u63a8\u8350\uff09\uff1a v0.api.upyun.com \u7535\u4fe1\u7ebf\u8def\uff1a v1.api.upyun.com \u8054\u901a\uff08\u7f51\u901a\uff09\u7ebf\u8def\uff1a v2.api.upyun.com \u79fb\u52a8\uff08\u94c1\u901a\uff09\u7ebf\u8def\uff1a v3.api.upyun.com \u8ba4\u8bc1\u9274\u6743 \u8be6\u89c1 \u7b7e\u540d\u8ba4\u8bc1 \u3002 \u63a8\u8350\u4e0a\u4f20\u6d41\u7a0b +-----------------+ +-----------------+ +-----------------+ | Client/Browser | | FORM API | | Customer Server | +-----------------+ +-----------------+ +-----------------+ | | | | | | +++ Request authorization +++ |-|====================================>|-| |-| | |-| |-| | |-| |-| Response authorization |-| |-|<====================================|-| +++ | +++ | | | | | | | | | +++ Upload +++ +++ |-|================>|-| Notify |-| |-| |-|---------------->|-| |-| |-| |-| |-| Response |-| |-| |-|<================|-| |-| +++ +++ +++ | | | | | | \u5ba2\u6237\u7aef\u8bf7\u6c42\u5ba2\u6237\u670d\u52a1\u5668\uff0c\u751f\u6210\u3001\u83b7\u53d6\u4e0a\u4f20\u6240\u9700\u7684 policy \u3001 authorization \uff1b \u5ba2\u6237\u7aef\u901a\u8fc7 FORM API \u4e0a\u4f20\u6587\u4ef6\uff0c\u8fd4\u56de\u4e0a\u4f20\u7ed3\u679c\u4fe1\u606f\uff0c\uff08\u53ef\u9009\uff09\u56de\u8c03\u901a\u77e5\u5ba2\u6237\u670d\u52a1\u5668\uff1b \u5ba2\u6237\u7aef\u5904\u7406\u5176\u4ed6\u4e1a\u52a1\u6d41\u7a0b\u3002 \u5c0f\u6587\u4ef6\u4e0a\u4f20 \u00b6 \u6587\u4ef6\u5927\u5c0f\u8d85\u8fc7 100M \u540e\uff0c\u5efa\u8bae\u4f7f\u7528 \u5927\u6587\u4ef6\u4e0a\u4f20 \uff1b\u79fb\u52a8\u7aef\u6216\u8005\u5f31\u7f51\u73af\u5883\u4e0a\u4f20\uff0c\u63a8\u8350\u4f7f\u7528 REST API \u65ad\u70b9\u7eed\u4f20\u4e0a\u4f20 \u3002 \u53c2\u6570 \u5fc5\u9009 \u8bf4\u660e bucket \u662f \u6587\u4ef6\u4e0a\u4f20\u5230\u7684\u670d\u52a1 save-key \u662f \u6587\u4ef6\u4fdd\u5b58\u8def\u5f84\uff0c\u53ef\u7528\u5360\u4f4d\u7b26\uff0c\u89c1 \u8def\u5f84\u8bbe\u7f6e expiration \u662f \u8bf7\u6c42\u7684\u8fc7\u671f\u65f6\u95f4\uff0cUNIX UTC \u65f6\u95f4\u6233\uff0c\u5355\u4f4d\u79d2\u3002\u5efa\u8bae\u8bbe\u4e3a 30 \u5206\u949f date \u5426 \u8bf7\u6c42\u65e5\u671f\u65f6\u95f4\uff0cGMT \u683c\u5f0f\u5b57\u7b26\u4e32 ( RFC 1123 )\uff0c\u5982 Wed, 29 Oct 2014 02:26:58 GMT content-md5 \u5426 \u4e0a\u4f20\u6587\u4ef6\u7684 MD5 \u503c\uff0c\u5982\u679c\u8bf7\u6c42\u4e2d\u6587\u4ef6\u592a\u5927\u8ba1\u7b97 MD5 \u4e0d\u65b9\u4fbf\uff0c\u53ef\u4ee5\u4e3a\u7a7a return-url \u5426 \u540c\u6b65\u901a\u77e5 URL\uff0c\u89c1 \u901a\u77e5\u89c4\u5219 notify-url \u5426 \u5f02\u6b65\u901a\u77e5 URL\uff0c\u89c1 \u901a\u77e5\u89c4\u5219 content-secret \u5426 \u6587\u4ef6\u5bc6\u94a5\uff0c\u7528\u4e8e\u4fdd\u62a4\u6587\u4ef6\uff0c\u9632\u6b62\u6587\u4ef6\u88ab\u76f4\u63a5\u8bbf\u95ee\uff0c\u89c1 Content-Secret \u53c2\u6570\u8bf4\u660e content-type \u5426 \u6587\u4ef6\u7c7b\u578b\uff0c\u9ed8\u8ba4\u4f7f\u7528\u6587\u4ef6\u6269\u5c55\u540d\u4f5c\u4e3a\u6587\u4ef6\u7c7b\u578b allow-file-type \u5426 \u5141\u8bb8\u4e0a\u4f20\u7684\u6587\u4ef6\u6269\u5c55\u540d\uff0c\u4ee5 , \u5206\u9694\u3002\u5982 jpg,jpeg,png content-length-range \u5426 \u6587\u4ef6\u5927\u5c0f\u9650\u5236\uff0c\u683c\u5f0f\uff1a min,max \uff0c\u5355\u4f4d\uff1a\u5b57\u8282 \u5982 102400,1024000 \uff0c\u8868\u793a\u5141\u8bb8\u4e0a\u4f20 100Kb\uff5e1Mb \u7684\u6587\u4ef6 image-width-range \u5426 \u56fe\u7247\u5bbd\u5ea6\u9650\u5236\uff0c\u683c\u5f0f\uff1a min,max \uff0c\u5355\u4f4d\uff1a\u50cf\u7d20 \u5982 0,1024 \uff0c\u5141\u8bb8\u4e0a\u4f20\u5bbd\u5ea6\u4e3a 0\uff5e1024px \u4e4b\u95f4 image-height-range \u5426 \u56fe\u7247\u9ad8\u5ea6\u9650\u5236\uff0c\u683c\u5f0f\uff1a min,max \uff0c\u5355\u4f4d\uff1a\u50cf\u7d20 \u5982 0,1024 \uff0c\u5141\u8bb8\u4e0a\u4f20\u9ad8\u5ea6\u5728 0\uff5e1024px \u4e4b\u95f4 x-gmkerl-thumb \u5426 \u56fe\u7247\u9884\u5904\u7406\uff0c\u89c1 \u4e0a\u4f20\u9884\u5904\u7406\uff08\u540c\u6b65\uff09 x-gmkerl-type \u5426 \u53ef\u9009\u503c\uff1a get_meta \uff0c\u83b7\u53d6\u56fe\u7247\u4fe1\u606f\uff1b get_theme_color \uff0c\u83b7\u53d6\u56fe\u7247\u4e3b\u9898\u8272 apps \u5426 \u5f02\u6b65\u9884\u5904\u7406\uff0c\u89c1 \u5f02\u6b65\u9884\u5904\u7406 b64encoded \u5426 \u5bf9\u901a\u8fc7 Base64 \u7f16\u7801\u4e0a\u4f20\u7684\u6587\u4ef6\u8fdb\u884c Base64 \u89e3\u7801\uff0c\u503c\u4e3a on ext-param \u5426 \u989d\u5916\u53c2\u6570\uff0c\u89c1 ext-param x-upyun-meta-ttl \u5426 \u6587\u4ef6\u5143\u4fe1\u606f, \u6307\u5b9a\u6587\u4ef6\u7684\u751f\u5b58\u65f6\u95f4\uff0c \u5355\u4f4d\u5929\uff0c\u6700\u5927\u652f\u6301180\u5929 \u6ce8 \u6bcf\u4e2a\u4e0a\u4f20\u8bf7\u6c42\u53ea\u80fd\u4e0a\u4f20\u4e00\u4e2a\u6587\u4ef6\uff0c\u8bf7\u6c42\u7684\u53c2\u6570\u540d\u548c\u53c2\u6570\u503c \u533a\u5206\u5927\u5c0f\u5199 \u3002 \u82e5\u5728\u4e0a\u4f20\u975e\u56fe\u7247\u6587\u4ef6\u65f6\u4f7f\u7528 image-width-range \uff0c image-height-range \uff0c\u4f1a\u8fd4\u56de\u300c\u4e0d\u662f\u56fe\u7247\u300d\u7684\u9519\u8bef\u3002 \u82e5\u8bf7\u6c42\u4e2d\u5e26\u6709\u9884\u5904\u7406\u53c2\u6570\uff08 x-gmkerl-thumb \uff09\uff0c\u56fe\u7247\u5904\u7406\u540e\u518d\u4fdd\u5b58\u3002 \u82e5\u8bbe\u7f6e\u4e86 x-gmkerl-type \u53c2\u6570\uff0c\u5219\u56fe\u7247\u4e0a\u4f20\u5b8c\u6210\u540e\u4f1a\u8fd4\u56de\u56fe\u7247\u7684 meta \u4fe1\u606f\u6216\u4e3b\u9898\u8272\u3002 \u54cd\u5e94\u4fe1\u606f \u00b6 \u4e0a\u4f20\u6210\u529f\uff1a\u8fd4\u56de 200 \u6216\u8bbf\u95ee\u6307\u5b9a\u7684 URL\uff08\u89c1 \u901a\u77e5\u89c4\u5219 \uff09\u3002 \u4e0a\u4f20\u5931\u8d25\uff1a\u8fd4\u56de\u76f8\u5e94\u7684\u51fa\u9519\u4fe1\u606f\uff0c\u5177\u4f53\u8bf7\u53c2\u9605\u300c API \u9519\u8bef\u7801\u8868 \u300d\u3002 \u901a\u77e5\u89c4\u5219 \u00b6 return-url \u53c2\u6570\u8bf4\u660e \u5982\u679c\u6ca1\u6709\u8bbe\u7f6e return-url \uff0c\u6587\u4ef6\u4e0a\u4f20\u5b8c\u6210\u540e\uff0c\u7ed3\u679c\u4fe1\u606f\u5728\u54cd\u5e94\u4f53\u4e2d\u8fd4\u56de\u3002 \u5982\u679c\u8bbe\u7f6e\u4e86 return-url \uff0c\u6587\u4ef6\u4e0a\u4f20\u5b8c\u6210\u540e\uff0c\u7ed3\u679c\u4fe1\u606f\u4ee5 Query String \u7684\u5f62\u5f0f\u8ffd\u52a0\u5230 return-url \u6307\u5b9a\u7684 URL \u540e\uff0c\u5e76\u8bbf\u95ee\u3002\u4f8b\u5982\uff0c return-url \u4e3a http://www.yourdomain.com/return/ \uff0c\u8bbf\u95ee\u7684 URL \u662f\uff1a http://yourdomain.com/return/?code=200&message=ok&url=%2F2011%2F12%2Ffd0e30047f81fa95.mp3&time=1332129461 \u7ed3\u679c\u4fe1\u606f\u7684\u53c2\u6570\u540d\u53ca\u8bf4\u660e\u5982\u4e0b\uff1a \u53c2\u6570 \u8bf4\u660e code \u72b6\u6001\u7801\uff0c 200 \u8868\u793a\u4e0a\u4f20\u6210\u529f message URL encoding \u7684\u63cf\u8ff0\u4fe1\u606f\uff0c ok \u8868\u793a\u4e0a\u4f20\u6210\u529f\uff0c\u5176\u4ed6\u7684\u8868\u793a\u9519\u8bef\u4fe1\u606f url URL encoding \u7684\u6587\u4ef6\u4fdd\u5b58\u8def\u5f84 time UNIX UTC \u65f6\u95f4\u6233\uff0c\u5355\u4f4d\u79d2 sign/no-sign \u7b7e\u540d\uff0c\u8be6\u89c1 \u56de\u8c03\u7b7e\u540d\uff08\u65e7\uff09 \u3002\u4f7f\u7528 \u56de\u8c03\u7b7e\u540d\uff08\u65b0\uff09 \u65f6\uff0c\u4e0d\u5b58\u5728 image-width \u56fe\u7247\u7684\u5bbd\u3002\u4e0a\u4f20\u6587\u4ef6\u662f\u56fe\u7247\u65f6\uff0c\u624d\u5b58\u5728 image-height \u56fe\u7247\u7684\u9ad8\u3002\u4e0a\u4f20\u6587\u4ef6\u662f\u56fe\u7247\u65f6\uff0c\u624d\u5b58\u5728 image-type \u56fe\u7247\u7c7b\u578b\u3002\u4e0a\u4f20\u6587\u4ef6\u662f\u56fe\u7247\u65f6\uff0c\u624d\u5b58\u5728 image-frames \u56fe\u7247\u5e27\u6570\u3002\u4e0a\u4f20\u6587\u4ef6\u662f\u56fe\u7247\u65f6\uff0c\u624d\u5b58\u5728 task_ids \u5f02\u6b65\u4efb\u52a1 ID \u96c6\u3002\u8bbe\u7f6e\u4e86 apps \u53c2\u6570\u65f6\uff0c\u624d\u5b58\u5728 notify-url \u53c2\u6570\u8bf4\u660e \u5982\u679c\u6ca1\u6709\u8bbe\u7f6e notify-url \uff0c\u4e0d\u53d1\u8d77\u5f02\u6b65\u901a\u77e5\u3002 \u5982\u679c\u8bbe\u7f6e\u4e86 notify-url \uff0c\u6587\u4ef6\u4e0a\u4f20\u5b8c\u6210\u540e\uff0c\u5411 notify-url \u53d1\u9001 HTTP POST \u8bf7\u6c42\uff0c\u8bf7\u6c42\u4f53\u662f\u56de\u8c03\u4fe1\u606f\u3002\u56de\u8c03\u4fe1\u606f\u662f URL encoding \u7684\u5b57\u7b26\u4e32\uff0c\u5185\u5bb9\u548c return-url \u4e2d\u7684 \u7ed3\u679c\u4fe1\u606f \u76f8\u540c\u3002\u56de\u8c03\u901a\u77e5\u7b7e\u540d\uff0c\u89c1 \u7b7e\u540d\u8ba4\u8bc1 \uff0c\u5b83\u63d0\u4f9b\u7ed9\u5ba2\u6237\u7aef\u7528\u4e8e\u9a8c\u8bc1\u56de\u8c03\u901a\u77e5\u7684\u5408\u6cd5\u6027\u3002 \u5927\u6587\u4ef6\u4e0a\u4f20 \u00b6 \u5927\u6587\u4ef6\u4e0a\u4f20\u57fa\u4e8e\u6570\u636e\u6d41\u5f0f\u4f20\u8f93\u7684\u539f\u7406\uff0c\u901a\u8fc7\u964d\u4f4e\u6570\u636e\u5728\u8fb9\u7f18\u8282\u70b9\u3001\u4e2d\u8f6c\u8282\u70b9\u7684\u65f6\u95f4\u5f00\u9500\uff0c\u8ba9\u4e0a\u4f20\u901f\u5ea6\u66f4\u5feb\u3002 \u76f8\u6bd4\u5c0f\u6587\u4ef6\u4e0a\u4f20\uff0c\u5b83\u6709\u4e24\u70b9\u7ea6\u675f\uff0c\u5177\u4f53\u5982\u4e0b\uff1a 1\u3001\u9700\u8981\u5728 \u5c0f\u6587\u4ef6\u4e0a\u4f20 \u7684\u53c2\u6570\u4e2d\u52a0\u5165 content-length \u53c2\u6570\uff0c\u6307\u5b9a\u6587\u4ef6\u957f\u5ea6\u3002 2\u3001\u786e\u4fdd\u4e09\u4e2a\u5b57\u6bb5 authorization \u3001 policy \u3001 file \u4e2d\uff0c file \u5904\u4e8e\u6700\u540e\u7684\u4f4d\u7f6e\u3002 \u4e3e\u4f8b\u8bf4\u660e // policy \u4e2d\u52a0\u5165\u6587\u4ef6\u957f\u5ea6 content-length POLICY = { 'bucket': 'bucket1', 'expiration': 1509200758, 'content-length': 10, 'save-key': '/img1.txt', } // file \u5b57\u6bb5\u5904\u4e8e\u6700\u540e\u7684\u4f4d\u7f6e POST /bucket1 HTTP/1.1 Host: v0.api.upyun.com Content-Type: multipart/form-data; boundary=xxxxxxx Content-Length: 386 --xxxxxxx. Content-Disposition: form-data; name=\"policy\" eyJjb250ZW50LWxlbmd0aCI6IDEwLCAiYnVja2V0IjogImJ1Y2tldDEiLCAiZXhwaXJhdGlvbiI6IDE1MDkyMDA3NTgsICJzYXZlLWtleSI6ICIvaW1nMS50eHQifQ== --xxxxxxx Content-Disposition: form-data; name=\"signature\" 48f7ccda45cc3a5e25f4eb5eb1d6dbba --xxxxxxx Content-Disposition: form-data; name=\"file\"; filename=abc.txt. d63..`PPq. --xxxxxxx-- \u8def\u5f84\u8bbe\u7f6e \u00b6 save-key \u652f\u6301\u7684\u8bbe\u7f6e\u7c7b\u578b\uff1a \u7c7b\u578b \u683c\u5f0f \u8bf4\u660e \u7edd\u5bf9\u503c String \u6307\u5b9a\u5177\u4f53\u7684\u8def\u5f84\uff0c\u5982: /path/to/file.txt \u65f6\u95f4\u7c7b {year} {mon} {day} {hour} {min} {sec} \u65e5\u671f\u3001\u65f6\u95f4\u76f8\u5173\u5185\u5bb9\uff08UTC \u65f6\u95f4\uff09 md5 \u7c7b {filemd5} \u6587\u4ef6\u7684 md5 \u503c \u968f\u673a\u7c7b {random} {random32} 16 \u4f4d\u6216 32 \u4f4d\u968f\u673a\u5b57\u7b26\u548c\u6570\u5b57 \u6587\u4ef6\u540d {filename} {suffix} {.suffix} \u4e0a\u4f20\u6587\u4ef6\u7684\u6587\u4ef6\u540d\u53ca\u6269\u5c55\u540d \u4e3e\u4f8b\u8bf4\u660e \u4f8b 1\uff1a\u65f6\u95f4\u7c7b + \u968f\u673a\u7c7b \u4e0a\u4f20\u6587\u4ef6\u540d\uff1asample.jpg UTC \u65f6\u95f4\uff1a2013-01-01 10:05:20 save-key\uff1a/{year}/{mon}/{day}/upload_{random32}{.suffix} \u4fdd\u5b58\u8def\u5f84\u4e3a\uff1a/2013/01/01/upload_b92c9cc21ce6a88ea696705c88b57c3f.jpg \u4f8b 2\uff1a\u65f6\u95f4\u7c7b + \u6587\u4ef6\u540d \u4e0a\u4f20\u6587\u4ef6\u540d\uff1asample.jpg UTC \u65f6\u95f4\uff1a2014-02-02 11:05:20 save-key\uff1a/{year}/{mon}/{day}/{hour}_{min}_{sec}_{filename}{.suffix} \u4fdd\u5b58\u8def\u5f84\u4e3a\uff1a/2014/02/02/11_05_20_sample.jpg \u4e3a\u4e86\u907f\u514d\u8def\u5f84\u91cd\u540d\u5bfc\u81f4\u6587\u4ef6\u88ab\u8986\u76d6\uff0c\u5efa\u8bae\u4f7f\u7528\u590d\u6742\u7684\u4f4e\u91cd\u590d\u6027\u7684\u547d\u540d\u65b9\u5f0f\u3002 \u5f02\u6b65\u9884\u5904\u7406 \u00b6 \u5982\u679c\u8bbe\u7f6e\u4e86 apps \u53c2\u6570\uff0c\u6587\u4ef6\u4e0a\u4f20\u5b8c\u6210\u540e\uff0c\u4f1a\u521b\u5efa\u5f02\u6b65\u5904\u7406\u4efb\u52a1\u3002\u76ee\u524d\uff0c\u5f02\u6b65\u9884\u5904\u7406\u652f\u6301 \u5f02\u6b65\u56fe\u7247\u5904\u7406 \u3001 \u5f02\u6b65\u97f3\u89c6\u9891\u5904\u7406 \u548c \u5f02\u6b65\u56fe\u7247\u9274\u522b \u3002 apps \u53c2\u6570\u7ed3\u6784 \u00b6 apps = [ { // \u5f02\u6b65\u56fe\u7247\u5904\u7406\u4efb\u52a1 \"name\": \"thumb\", // \u5f02\u6b65\u4efb\u52a1\u540d\u79f0\uff0c\u5fc5\u586b\u3002thumb \u8868\u793a\u5f02\u6b65\u56fe\u7247\u5904\u7406\u670d\u52a1 \"x-gmkerl-thumb\": \"<\u56fe\u7247\u5904\u7406\u53c2\u6570>\", // \u5904\u7406\u53c2\u6570\uff0c\u5fc5\u586b \"save_as\": \"<save_as>\", // \u7ed3\u679c\u56fe\u7247\u4fdd\u5b58\u8def\u5f84\uff0c\u9009\u586b \"notify_url\": \"<notify_url>\" // \u56de\u8c03\u5730\u5740\uff0c\u4e0d\u586b\u65f6\u4f7f\u7528\u4e0a\u4f20\u53c2\u6570\u4e2d\u7684 notify_url }, ...... ] apps = [ { // \u5f02\u6b65\u97f3\u89c6\u9891\u5904\u7406\u4efb\u52a1 \"name\": \"naga\", // \u5f02\u6b65\u4efb\u52a1\u540d\u79f0\uff0c\u5fc5\u586b\u3002naga \u8868\u793a\u5f02\u6b65\u97f3\u89c6\u9891\u5904\u7406\u670d\u52a1 \"type\": \"<type>\", // \u89c6\u9891\u8f6c\u7801\uff0c\u5fc5\u586b \"avopts\": \"<avopts>\", // \u5904\u7406\u53c2\u6570\uff0c\u5fc5\u586b \"return_info\": true/false, // \u662f\u5426\u8fd4\u56de\u5143\u6570\u636e\uff0c\u9009\u586b \"save_as\": \"<save_as>\", // \u7ed3\u679c\u97f3\u9891/\u89c6\u9891\u4fdd\u5b58\u8def\u5f84\uff0c\u9009\u586b \"notify_url\": \"<notify_url>\" // \u56de\u8c03\u5730\u5740\uff0c\u4e0d\u586b\u65f6\u4f7f\u7528\u4e0a\u4f20\u53c2\u6570\u4e2d\u7684 notify_url }, ...... ] apps = [ { // \u5f02\u6b65\u56fe\u7247\u5ba1\u6838\u4efb\u52a1 \"name\": \"imgaudit\", // \u5f02\u6b65\u4efb\u52a1\u540d\u79f0\uff0c\u5fc5\u586b\u3002imgaudit \u8868\u793a\u5f02\u6b65\u56fe\u7247\u5ba1\u6838\u670d\u52a1 \"notify_url\": \"<notify_url>\" // \u56de\u8c03\u5730\u5740\uff0c\u4e0d\u586b\u65f6\u4f7f\u7528\u4e0a\u4f20\u53c2\u6570\u4e2d\u7684 notify_url }, ...... ] apps = [ { // \u5f02\u6b65\u6587\u672c\u5ba1\u6838\u4efb\u52a1 \"name\": \"textjudge\", // \u5f02\u6b65\u4efb\u52a1\u540d\u79f0\uff0c\u5fc5\u586b\u3002textjudge \u8868\u793a\u5f02\u6b65\u6587\u672c\u5ba1\u6838\u670d\u52a1 \"notify_url\": \"<notify_url>\" // \u56de\u8c03\u5730\u5740\uff0c\u4e0d\u586b\u65f6\u4f7f\u7528\u4e0a\u4f20\u53c2\u6570\u4e2d\u7684 notify_url }, ...... ] \u6ce8 apps \u6309 JSON \u683c\u5f0f\u7ec4\u88c5\u4efb\u52a1\uff0c\u6700\u591a\u53ef\u4ee5\u5305\u542b 10 \u4e2a\u4efb\u52a1\uff0c\u6bcf\u4e2a\u4efb\u52a1\u5fc5\u987b\u6307\u5b9a name \u53c2\u6570\u3002 \u539f\u6587\u4ef6\u7684\u4fdd\u5b58\u8def\u5f84\u7531 \u4e0a\u4f20\u53c2\u6570 \u4e2d\u7684 save-key \u6307\u5b9a\u3002 \u5f02\u6b65\u56fe\u7247\u5904\u7406\uff0c\u8be6\u89c1 \u300c\u56fe\u7247\u5904\u7406\u300d > \u300c \u4e0a\u4f20\u9884\u5904\u7406\uff08\u5f02\u6b65\uff09 \u300d\uff1b\u5f02\u6b65\u97f3\u89c6\u9891\u5904\u7406\uff0c\u8be6\u89c1\u300c\u97f3\u89c6\u9891\u5904\u7406\u300d > \u300c \u4e0a\u4f20\u9884\u5904\u7406 \u300d\uff1b\u5f02\u6b65\u5185\u5bb9\u5ba1\u6838\uff0c\u8be6\u89c1 \u300c\u5185\u5bb9\u5ba1\u6838\u300d > \u300c \u4e0a\u4f20\u9884\u5904\u7406 \u300d\u3002 \u54cd\u5e94\u4fe1\u606f \u00b6 \u5f02\u6b65\u5904\u7406\u4efb\u52a1\u521b\u5efa\u6210\u529f\u540e\uff0c\u5728\u4e0a\u4f20\u8fd4\u56de\u4fe1\u606f\u548c\u56de\u8c03\u4fe1\u606f\uff08\u8be6\u89c1 \u901a\u77e5\u89c4\u5219 \uff09\u4e2d\u4f1a\u5e26\u4e0a task_ids \u5b57\u6bb5\uff0c\u91cc\u9762\u5305\u542b\u6bcf\u4e2a\u4efb\u52a1\u7684 task_id \u3002 \u56de\u8c03\u901a\u77e5 \u00b6 \u5f02\u6b65\u5904\u7406\u4efb\u52a1\u5b8c\u6210\u540e\uff0c\u5982\u679c\u5b58\u5728 notify_url \uff08\u4efb\u52a1\u4e2d\u4e0d\u5b58\u5728 notify_url \uff0c\u4f7f\u7528 \u4e0a\u4f20\u53c2\u6570 \u4e2d\u7684 notify_url \uff0c\u5982\u679c\u4e0a\u4f20\u53c2\u6570\u4e2d\u4e5f\u4e0d\u5b58\u5728\uff0c\u4e0d\u56de\u8c03\uff09\uff0c\u4ee5\u56de\u8c03\u7684\u5f62\u5f0f\u53d1\u9001\u5904\u7406\u7ed3\u679c\uff0c\u91cc\u9762\u5305\u542b task_id \u7b49\u4fe1\u606f\uff0c\u5177\u4f53\u8be6\u89c1\u5404\u670d\u52a1\u7684\u56de\u8c03\u901a\u77e5\u3002 ext-param \u00b6 \u5f53\u4f7f\u7528 return-url \u6216 notify-url \u53c2\u6570\u53d1\u9001\u8fd4\u56de\u4fe1\u606f\u6216\u56de\u8c03\u4fe1\u606f\u65f6\uff0c\u7ed3\u679c\u4fe1\u606f\uff08\u8be6\u89c1 \u901a\u77e5\u89c4\u5219 \uff09\u4ec5\u5305\u542b\u53c8\u62cd\u4e91\u6307\u5b9a\u7684\u5185\u5bb9\uff0c\u65e0\u6cd5\u56de\u4f20\u7528\u6237\u81ea\u5b9a\u4e49\u7684\u5185\u5bb9\u3002\u5982\u679c\u9700\u8981\u56de\u4f20\u81ea\u5b9a\u4e49\u7684\u5185\u5bb9\uff0c\u53ef\u4ee5\u6307\u5b9a ext-param \u53c2\u6570\u3002 \u81ea\u5b9a\u4e49\u7684\u5185\u5bb9\u5fc5\u987b\u662f UTF-8 \u7f16\u7801\uff0c\u4e14\u957f\u5ea6\u4e0d\u80fd\u8d85\u8fc7 255 \u4e2a\u5b57\u8282\u3002 notify-url \u56de\u8c03\u662f\u5f02\u6b65\u8fdb\u884c\u7684\uff0c\u5982\u679c\u56de\u8c03\u4fe1\u606f\u9700\u8981\u533a\u5206\u81ea\u5b9a\u4e49\u5185\u5bb9\u6765\u81ea\u90a3\u4e2a\u4e0a\u4f20\u8bf7\u6c42\uff0c\u53ef\u4ee5\u5728 ext-param \u53c2\u6570\u4e2d\u6dfb\u52a0\u4e2a clientId_xxx \u6807\u8bc6\u3002 \u7b7e\u540d\u8ba4\u8bc1\uff08\u65e7\uff09 \u00b6 \u8bf7\u6c42\u7b7e\u540d\uff08\u65e7\uff09 \u00b6 \u8bf7\u6c42\u65b9\u6cd5 curl http://v0.api.upyun.com/<bucket> \\ -F file=@<filename> \\ -F policy=<policy> \\ -F signature=<signature> \\ # \u5176\u4ed6\u53c2\u6570... signature \u7b97\u6cd5 \u4e3a\u4e86\u4fdd\u8bc1\u670d\u52a1\u7684\u5b89\u5168\u6027\uff0c\u4f7f\u7528\u670d\u52a1\u7684\u8868\u5355 API \u5bc6\u94a5\uff08\u53ef\u767b\u5f55\u53c8\u62cd\u4e91\u63a7\u5236\u53f0\u67e5\u770b\uff09\u5bf9 policy \u8fdb\u884c\u7b7e\u540d\uff0c\u7b7e\u540d\u7684\u7ed3\u679c\u5373\u662f signature\u3002 signature \u751f\u6210\u6b65\u9aa4\uff1a \u751f\u6210 policy \u5b57\u7b26\u4e32\uff08\u89c1 policy \u7b97\u6cd5 \uff09\uff1b \u5c06\u7b2c 1 \u6b65\u4e2d\u7684\u5b57\u7b26\u4e32\u4e0e\u8868\u5355 API \u5bc6\u94a5\u5b57\u7b26\u4e32\u7528 & \u62fc\u63a5\uff1b \u5c06\u7b2c 2 \u6b65\u4e2d\u7684\u5b57\u7b26\u4e32\u8ba1\u7b97 md5\uff0c\u6240\u5f97\u5373\u4e3a signature \u3002 \u4f8b\u5982\uff0c\u5047\u8bbe\u670d\u52a1\u7684\u8868\u5355 API \u9a8c\u8bc1\u5bc6\u94a5\u4e3a\uff1a cAnyet74l9hdUag34h2dZu8z7gU= \u7b2c\u4e00\u6b65\uff0c\u751f\u6210 policy \u5b57\u7b26\u4e32\uff1a eyJidWNrZXQiOiJkZW1vYnVja2V0IiwiZXhwaXJhdGlvbiI6MTQwOTIwMDc1OCwic2F2ZS1rZXkiOiIvaW1nLmpwZyJ9 \u7b2c\u4e8c\u6b65\uff0c\u7b2c\u4e00\u6b65\u7684\u5b57\u7b26\u4e32\u4e0e\u8868\u5355 API \u5bc6\u94a5\u5b57\u7b26\u4e32\u7528 & \u62fc\u63a5\uff1a eyJidWNrZXQiOiJkZW1vYnVja2V0IiwiZXhwaXJhdGlvbiI6MTQwOTIwMDc1OCwic2F2ZS1rZXkiOiIvaW1nLmpwZyJ9&cAnyet74l9hdUag34h2dZu8z7gU= \u7b2c\u4e09\u6b65\uff0c\u5c06\u7b2c\u4e8c\u6b65\u7684\u5b57\u7b26\u4e32\u8ba1\u7b97 md5 \u540e\u5373\u5f97\u5230 signature \uff1a 646a6a629c344ce0e6a10cadd49756d4 \u56de\u8c03\u7b7e\u540d\uff08\u65e7\uff09 \u00b6 sign \u7b97\u6cd5 sign \u662f\u6839\u636e code \u3001 message \u3001 url \u3001 time \u548c\u8868\u5355 API \u9a8c\u8bc1\u5bc6\u5319( form_api_secret ) \u4f7f\u7528 & \u62fc\u63a5\u540e\u8fdb\u884c MD5 \u5904\u7406\u5f97\u5230\u3002\u62fc\u63a5\u65f6\u9700\u6ce8\u610f URL \u7684\u7f16\u7801\u4e0e\u89e3\u7801\u95ee\u9898\u3002\u5982\u679c\u4f7f\u7528\u4e86 ext-param \u53c2\u6570, ext-param \u4e5f\u9700\u8981\u4f7f\u7528 & \u62fc\u63a5\u5728 form_api_secret \u4e4b\u540e\u3002 \u5982\u679c\u4e0a\u4f20\u7684\u662f\u56fe\u7247\uff0c\u5b58\u5728 image-width \u3001 image-height \u3001 image-frames \u548c image-type \u56db\u4e2a\u53c2\u6570\uff0c\u8fd9\u56db\u4e2a\u53c2\u6570\u4e0d\u53c2\u4e0e\u7b7e\u540d\u8ba1\u7b97\u3002 \u5982\u679c\u8bbe\u7f6e\u4e86 apps \u53c2\u6570\uff0c\u5b58\u5728 task_ids \uff0c\u5b83\u4e5f\u4e0d\u53c2\u4e0e\u7b7e\u540d\u8ba1\u7b97\u3002 \u4f8b\u5982\uff0ccode\uff1a 200 message\uff1a 'ok' url\uff1a '/2015/06/17/190623/upload_QQ \u56fe\u7247 201506011111206f7c696f0920f097d7eefd750334003e.png' time\uff1a 1434539183 form_api_secret\uff1a lGetaXubhGezKp89+6iuOb5IaS3= \u62fc\u63a5\u540e\u7684\u5b57\u7b26\u4e32\uff1a 200&ok&/2015/06/17/190623/upload_QQ \u56fe\u7247 201506011111206f7c696f0920f097d7eefd750334003e.png&1434539183&lGetaXubhGezKp89+6iuOb5IaS3= sign \u662f '086c46cfedfc22bfa2e4971a77530a76' \u3002 \u56de\u8c03\u4fe1\u606f\uff08\u5df2\u7ecf\u7b7e\u540d\uff09\u662f\uff1a {\"code\":200,\"message\":\"ok\",\"url\":\"\\/2015\\/06\\/17\\/190623\\/upload_QQ\\u56fe\\u7247201506011111206f7c696f0920f097d7eefd750334003e.png\",\"time\":1434539183,\"image-width\":1024,\"image-height\":768,\"image-frames\":1,\"image-type\":\"PNG\",\"sign\":\"086c46cfedfc22bfa2e4971a77530a76\"} no-sign \u7b97\u6cd5 \u5982\u679c\u53d1\u751f\u5f02\u5e38\uff0c\u8868\u5355 API \u9a8c\u8bc1\u5bc6\u94a5\u83b7\u53d6\u5931\u8d25\uff0c\u8fd4\u56de no-sign \u3002 no-sign \u7b97\u6cd5\u8ddf sign \u76f8\u540c\uff0c\u53ea\u662f\u8868\u5355 API \u9a8c\u8bc1\u5bc6\u5319( form_api_secret ) \u4e3a\u7a7a\u5b57\u7b26\u4e32 '' \u3002 \u4f8b\u5982\uff0c\u4f7f\u7528\u4e0a\u4f8b\u53c2\u6570\u62fc\u63a5\u540e\u7684\u5b57\u7b26\u4e32\u662f\uff1a 200&ok&/2015/06/17/190623/upload_QQ \u56fe\u7247 201506011111206f7c696f0920f097d7eefd750334003e.png&1434539183 no-sign \u662f 'bbaeeb9d05623fe1b380f756a291011a' \u3002 \u56fe\u7247\u9884\u5904\u7406\uff08\u65e7\uff09 \u00b6 \u53c2\u6570 \u5fc5\u9009 \u8bf4\u660e x-gmkerl-extract-color-count \u5426 \u4e3b\u9898\u8272\u63d0\u53d6\u7684\u989c\u8272\u6570\u91cf\uff0c\u9ed8\u8ba4 256 x-gmkerl-extract-format \u5426 \u4e3b\u9898\u8272\u63d0\u53d6\u683c\u5f0f\uff0c\u9ed8\u8ba4 dec x-gmkerl-thumbnail \u5426 \u7f29\u7565\u56fe\u7248\u672c\u540d\u79f0\uff0c\u53ef\u642d\u914d\u5176\u4ed6 x-gmkerl-* \u53c2\u6570\u4f7f\u7528 x-gmkerl-type \u5426 \u7f29\u7565\u7c7b\u578b\uff0c\u89c1 x-gmkerl-type \u53ef\u9009\u503c\u5217\u8868 x-gmkerl-value \u5426 \u7f29\u7565\u7c7b\u578b\u5bf9\u5e94\u7684\u53c2\u6570\u503c\uff0c\u89c1 x-gmkerl-value \u503c\u8bf4\u660e x-gmkerl-quality \u5426 \u538b\u7f29\u8d28\u91cf\uff0c\u9ed8\u8ba4 95 x-gmkerl-unsharp \u5426 \u662f\u5426\u9510\u5316\uff0c\u9ed8\u8ba4\u9510\u5316 x-gmkerl-rotate \u5426 \u56fe\u7247\u65cb\u8f6c\uff08\u987a\u65f6\u9488\uff09\uff0c\u53ef\u9009\u503c\uff1a auto \u3001 (0, 360] \u3002\u8be6\u89c1 \u65cb\u8f6c x-gmkerl-crop \u5426 \u56fe\u7247\u88c1\u526a\uff0c\u683c\u5f0f\uff1a <w>x<h>a<x>a<y> \u3002\u8be6\u89c1 \u88c1\u526a x-gmkerl-exif-switch \u5426 \u662f\u5426\u4fdd\u7559 EXIF \u4fe1\u606f\uff0c\u9ed8\u8ba4\u4e0d\u4fdd\u7559 \u4ec5\u5728\u642d\u914d x-gmkerl-crop \u3001 x-gmkerl-type \u3001 x-gmkerl-thumbnail \u65f6\u6709\u6548 x-gmkerl-type \u53ef\u9009\u503c\u5217\u8868 \u503c \u542b\u4e49 fix_width \u9650\u5b9a\u5bbd\u5ea6\uff0c\u9ad8\u5ea6\u81ea\u9002\u5e94 fix_height \u9650\u5b9a\u9ad8\u5ea6\uff0c\u5bbd\u5ea6\u81ea\u9002\u5e94 fix_width_or_height \u9650\u5b9a\u5bbd\u5ea6\u548c\u9ad8\u5ea6\uff0c\u5bbd\u9ad8\u4e0d\u8db3\u65f6\u4e0d\u7f29\u653e fix_both \u56fa\u5b9a\u5bbd\u5ea6\u548c\u9ad8\u5ea6\uff0c\u5bbd\u9ad8\u4e0d\u8db3\u65f6\u5f3a\u884c\u7f29\u653e fix_max \u9650\u5b9a\u6700\u957f\u8fb9\uff0c\u77ed\u8fb9\u81ea\u9002\u5e94 fix_min \u9650\u5b9a\u6700\u77ed\u8fb9\uff0c\u957f\u8fb9\u81ea\u9002\u5e94 fix_scale \u7b49\u6bd4\u4f8b\u7f29\u653e\uff081-1000\uff09 x-gmkerl-value \u503c\u8bf4\u660e \u5f53 x-gmkerl-type \u6307\u5b9a\u4e3a fix_width_or_height \u6216 fix_both \u65f6\uff0c x-gmkerl-value \u503c\u7684\u683c\u5f0f\u4e3a <width>x<height> \uff0c\u5982 480x576 \u3002 \u5f53 x-gmkerl-type \u4e3a\u5176\u4ed6\u7684\u7c7b\u578b\uff0c x-gmkerl-value \u503c\u53ea\u9700\u8981\u6307\u5b9a\u5355\u4e2a\u6570\u5b57\uff0c\u5982 100 \uff0c\u610f\u601d\u4e3a\u9ad8\u548c/\u6216\u5bbd\u4e3a 100 \u3002 \u5982\u6709\u7591\u95ee\u8bf7 \u8054\u7cfb\u6211\u4eec","title":"FORM API"},{"location":"api/form_api/#_1","text":"curl http://v0.api.upyun.com/<bucket> \\ -F authorization=\"UPYUN <Operator>:<Signature>\" \\ -F file=@<filename> \\ -F policy=<policy> \\ # \u5176\u4ed6\u53c2\u6570... \u57fa\u672c\u57df\u540d \u667a\u80fd\u9009\u8def\uff08\u63a8\u8350\uff09\uff1a v0.api.upyun.com \u7535\u4fe1\u7ebf\u8def\uff1a v1.api.upyun.com \u8054\u901a\uff08\u7f51\u901a\uff09\u7ebf\u8def\uff1a v2.api.upyun.com \u79fb\u52a8\uff08\u94c1\u901a\uff09\u7ebf\u8def\uff1a v3.api.upyun.com \u8ba4\u8bc1\u9274\u6743 \u8be6\u89c1 \u7b7e\u540d\u8ba4\u8bc1 \u3002 \u63a8\u8350\u4e0a\u4f20\u6d41\u7a0b +-----------------+ +-----------------+ +-----------------+ | Client/Browser | | FORM API | | Customer Server | +-----------------+ +-----------------+ +-----------------+ | | | | | | +++ Request authorization +++ |-|====================================>|-| |-| | |-| |-| | |-| |-| Response authorization |-| |-|<====================================|-| +++ | +++ | | | | | | | | | +++ Upload +++ +++ |-|================>|-| Notify |-| |-| |-|---------------->|-| |-| |-| |-| |-| Response |-| |-| |-|<================|-| |-| +++ +++ +++ | | | | | | \u5ba2\u6237\u7aef\u8bf7\u6c42\u5ba2\u6237\u670d\u52a1\u5668\uff0c\u751f\u6210\u3001\u83b7\u53d6\u4e0a\u4f20\u6240\u9700\u7684 policy \u3001 authorization \uff1b \u5ba2\u6237\u7aef\u901a\u8fc7 FORM API \u4e0a\u4f20\u6587\u4ef6\uff0c\u8fd4\u56de\u4e0a\u4f20\u7ed3\u679c\u4fe1\u606f\uff0c\uff08\u53ef\u9009\uff09\u56de\u8c03\u901a\u77e5\u5ba2\u6237\u670d\u52a1\u5668\uff1b \u5ba2\u6237\u7aef\u5904\u7406\u5176\u4ed6\u4e1a\u52a1\u6d41\u7a0b\u3002","title":"\u8bf7\u6c42\u65b9\u6cd5"},{"location":"api/form_api/#_2","text":"\u6587\u4ef6\u5927\u5c0f\u8d85\u8fc7 100M \u540e\uff0c\u5efa\u8bae\u4f7f\u7528 \u5927\u6587\u4ef6\u4e0a\u4f20 \uff1b\u79fb\u52a8\u7aef\u6216\u8005\u5f31\u7f51\u73af\u5883\u4e0a\u4f20\uff0c\u63a8\u8350\u4f7f\u7528 REST API \u65ad\u70b9\u7eed\u4f20\u4e0a\u4f20 \u3002 \u53c2\u6570 \u5fc5\u9009 \u8bf4\u660e bucket \u662f \u6587\u4ef6\u4e0a\u4f20\u5230\u7684\u670d\u52a1 save-key \u662f \u6587\u4ef6\u4fdd\u5b58\u8def\u5f84\uff0c\u53ef\u7528\u5360\u4f4d\u7b26\uff0c\u89c1 \u8def\u5f84\u8bbe\u7f6e expiration \u662f \u8bf7\u6c42\u7684\u8fc7\u671f\u65f6\u95f4\uff0cUNIX UTC \u65f6\u95f4\u6233\uff0c\u5355\u4f4d\u79d2\u3002\u5efa\u8bae\u8bbe\u4e3a 30 \u5206\u949f date \u5426 \u8bf7\u6c42\u65e5\u671f\u65f6\u95f4\uff0cGMT \u683c\u5f0f\u5b57\u7b26\u4e32 ( RFC 1123 )\uff0c\u5982 Wed, 29 Oct 2014 02:26:58 GMT content-md5 \u5426 \u4e0a\u4f20\u6587\u4ef6\u7684 MD5 \u503c\uff0c\u5982\u679c\u8bf7\u6c42\u4e2d\u6587\u4ef6\u592a\u5927\u8ba1\u7b97 MD5 \u4e0d\u65b9\u4fbf\uff0c\u53ef\u4ee5\u4e3a\u7a7a return-url \u5426 \u540c\u6b65\u901a\u77e5 URL\uff0c\u89c1 \u901a\u77e5\u89c4\u5219 notify-url \u5426 \u5f02\u6b65\u901a\u77e5 URL\uff0c\u89c1 \u901a\u77e5\u89c4\u5219 content-secret \u5426 \u6587\u4ef6\u5bc6\u94a5\uff0c\u7528\u4e8e\u4fdd\u62a4\u6587\u4ef6\uff0c\u9632\u6b62\u6587\u4ef6\u88ab\u76f4\u63a5\u8bbf\u95ee\uff0c\u89c1 Content-Secret \u53c2\u6570\u8bf4\u660e content-type \u5426 \u6587\u4ef6\u7c7b\u578b\uff0c\u9ed8\u8ba4\u4f7f\u7528\u6587\u4ef6\u6269\u5c55\u540d\u4f5c\u4e3a\u6587\u4ef6\u7c7b\u578b allow-file-type \u5426 \u5141\u8bb8\u4e0a\u4f20\u7684\u6587\u4ef6\u6269\u5c55\u540d\uff0c\u4ee5 , \u5206\u9694\u3002\u5982 jpg,jpeg,png content-length-range \u5426 \u6587\u4ef6\u5927\u5c0f\u9650\u5236\uff0c\u683c\u5f0f\uff1a min,max \uff0c\u5355\u4f4d\uff1a\u5b57\u8282 \u5982 102400,1024000 \uff0c\u8868\u793a\u5141\u8bb8\u4e0a\u4f20 100Kb\uff5e1Mb \u7684\u6587\u4ef6 image-width-range \u5426 \u56fe\u7247\u5bbd\u5ea6\u9650\u5236\uff0c\u683c\u5f0f\uff1a min,max \uff0c\u5355\u4f4d\uff1a\u50cf\u7d20 \u5982 0,1024 \uff0c\u5141\u8bb8\u4e0a\u4f20\u5bbd\u5ea6\u4e3a 0\uff5e1024px \u4e4b\u95f4 image-height-range \u5426 \u56fe\u7247\u9ad8\u5ea6\u9650\u5236\uff0c\u683c\u5f0f\uff1a min,max \uff0c\u5355\u4f4d\uff1a\u50cf\u7d20 \u5982 0,1024 \uff0c\u5141\u8bb8\u4e0a\u4f20\u9ad8\u5ea6\u5728 0\uff5e1024px \u4e4b\u95f4 x-gmkerl-thumb \u5426 \u56fe\u7247\u9884\u5904\u7406\uff0c\u89c1 \u4e0a\u4f20\u9884\u5904\u7406\uff08\u540c\u6b65\uff09 x-gmkerl-type \u5426 \u53ef\u9009\u503c\uff1a get_meta \uff0c\u83b7\u53d6\u56fe\u7247\u4fe1\u606f\uff1b get_theme_color \uff0c\u83b7\u53d6\u56fe\u7247\u4e3b\u9898\u8272 apps \u5426 \u5f02\u6b65\u9884\u5904\u7406\uff0c\u89c1 \u5f02\u6b65\u9884\u5904\u7406 b64encoded \u5426 \u5bf9\u901a\u8fc7 Base64 \u7f16\u7801\u4e0a\u4f20\u7684\u6587\u4ef6\u8fdb\u884c Base64 \u89e3\u7801\uff0c\u503c\u4e3a on ext-param \u5426 \u989d\u5916\u53c2\u6570\uff0c\u89c1 ext-param x-upyun-meta-ttl \u5426 \u6587\u4ef6\u5143\u4fe1\u606f, \u6307\u5b9a\u6587\u4ef6\u7684\u751f\u5b58\u65f6\u95f4\uff0c \u5355\u4f4d\u5929\uff0c\u6700\u5927\u652f\u6301180\u5929 \u6ce8 \u6bcf\u4e2a\u4e0a\u4f20\u8bf7\u6c42\u53ea\u80fd\u4e0a\u4f20\u4e00\u4e2a\u6587\u4ef6\uff0c\u8bf7\u6c42\u7684\u53c2\u6570\u540d\u548c\u53c2\u6570\u503c \u533a\u5206\u5927\u5c0f\u5199 \u3002 \u82e5\u5728\u4e0a\u4f20\u975e\u56fe\u7247\u6587\u4ef6\u65f6\u4f7f\u7528 image-width-range \uff0c image-height-range \uff0c\u4f1a\u8fd4\u56de\u300c\u4e0d\u662f\u56fe\u7247\u300d\u7684\u9519\u8bef\u3002 \u82e5\u8bf7\u6c42\u4e2d\u5e26\u6709\u9884\u5904\u7406\u53c2\u6570\uff08 x-gmkerl-thumb \uff09\uff0c\u56fe\u7247\u5904\u7406\u540e\u518d\u4fdd\u5b58\u3002 \u82e5\u8bbe\u7f6e\u4e86 x-gmkerl-type \u53c2\u6570\uff0c\u5219\u56fe\u7247\u4e0a\u4f20\u5b8c\u6210\u540e\u4f1a\u8fd4\u56de\u56fe\u7247\u7684 meta \u4fe1\u606f\u6216\u4e3b\u9898\u8272\u3002","title":"\u5c0f\u6587\u4ef6\u4e0a\u4f20"},{"location":"api/form_api/#_3","text":"\u4e0a\u4f20\u6210\u529f\uff1a\u8fd4\u56de 200 \u6216\u8bbf\u95ee\u6307\u5b9a\u7684 URL\uff08\u89c1 \u901a\u77e5\u89c4\u5219 \uff09\u3002 \u4e0a\u4f20\u5931\u8d25\uff1a\u8fd4\u56de\u76f8\u5e94\u7684\u51fa\u9519\u4fe1\u606f\uff0c\u5177\u4f53\u8bf7\u53c2\u9605\u300c API \u9519\u8bef\u7801\u8868 \u300d\u3002","title":"\u54cd\u5e94\u4fe1\u606f"},{"location":"api/form_api/#_4","text":"return-url \u53c2\u6570\u8bf4\u660e \u5982\u679c\u6ca1\u6709\u8bbe\u7f6e return-url \uff0c\u6587\u4ef6\u4e0a\u4f20\u5b8c\u6210\u540e\uff0c\u7ed3\u679c\u4fe1\u606f\u5728\u54cd\u5e94\u4f53\u4e2d\u8fd4\u56de\u3002 \u5982\u679c\u8bbe\u7f6e\u4e86 return-url \uff0c\u6587\u4ef6\u4e0a\u4f20\u5b8c\u6210\u540e\uff0c\u7ed3\u679c\u4fe1\u606f\u4ee5 Query String \u7684\u5f62\u5f0f\u8ffd\u52a0\u5230 return-url \u6307\u5b9a\u7684 URL \u540e\uff0c\u5e76\u8bbf\u95ee\u3002\u4f8b\u5982\uff0c return-url \u4e3a http://www.yourdomain.com/return/ \uff0c\u8bbf\u95ee\u7684 URL \u662f\uff1a http://yourdomain.com/return/?code=200&message=ok&url=%2F2011%2F12%2Ffd0e30047f81fa95.mp3&time=1332129461 \u7ed3\u679c\u4fe1\u606f\u7684\u53c2\u6570\u540d\u53ca\u8bf4\u660e\u5982\u4e0b\uff1a \u53c2\u6570 \u8bf4\u660e code \u72b6\u6001\u7801\uff0c 200 \u8868\u793a\u4e0a\u4f20\u6210\u529f message URL encoding \u7684\u63cf\u8ff0\u4fe1\u606f\uff0c ok \u8868\u793a\u4e0a\u4f20\u6210\u529f\uff0c\u5176\u4ed6\u7684\u8868\u793a\u9519\u8bef\u4fe1\u606f url URL encoding \u7684\u6587\u4ef6\u4fdd\u5b58\u8def\u5f84 time UNIX UTC \u65f6\u95f4\u6233\uff0c\u5355\u4f4d\u79d2 sign/no-sign \u7b7e\u540d\uff0c\u8be6\u89c1 \u56de\u8c03\u7b7e\u540d\uff08\u65e7\uff09 \u3002\u4f7f\u7528 \u56de\u8c03\u7b7e\u540d\uff08\u65b0\uff09 \u65f6\uff0c\u4e0d\u5b58\u5728 image-width \u56fe\u7247\u7684\u5bbd\u3002\u4e0a\u4f20\u6587\u4ef6\u662f\u56fe\u7247\u65f6\uff0c\u624d\u5b58\u5728 image-height \u56fe\u7247\u7684\u9ad8\u3002\u4e0a\u4f20\u6587\u4ef6\u662f\u56fe\u7247\u65f6\uff0c\u624d\u5b58\u5728 image-type \u56fe\u7247\u7c7b\u578b\u3002\u4e0a\u4f20\u6587\u4ef6\u662f\u56fe\u7247\u65f6\uff0c\u624d\u5b58\u5728 image-frames \u56fe\u7247\u5e27\u6570\u3002\u4e0a\u4f20\u6587\u4ef6\u662f\u56fe\u7247\u65f6\uff0c\u624d\u5b58\u5728 task_ids \u5f02\u6b65\u4efb\u52a1 ID \u96c6\u3002\u8bbe\u7f6e\u4e86 apps \u53c2\u6570\u65f6\uff0c\u624d\u5b58\u5728 notify-url \u53c2\u6570\u8bf4\u660e \u5982\u679c\u6ca1\u6709\u8bbe\u7f6e notify-url \uff0c\u4e0d\u53d1\u8d77\u5f02\u6b65\u901a\u77e5\u3002 \u5982\u679c\u8bbe\u7f6e\u4e86 notify-url \uff0c\u6587\u4ef6\u4e0a\u4f20\u5b8c\u6210\u540e\uff0c\u5411 notify-url \u53d1\u9001 HTTP POST \u8bf7\u6c42\uff0c\u8bf7\u6c42\u4f53\u662f\u56de\u8c03\u4fe1\u606f\u3002\u56de\u8c03\u4fe1\u606f\u662f URL encoding \u7684\u5b57\u7b26\u4e32\uff0c\u5185\u5bb9\u548c return-url \u4e2d\u7684 \u7ed3\u679c\u4fe1\u606f \u76f8\u540c\u3002\u56de\u8c03\u901a\u77e5\u7b7e\u540d\uff0c\u89c1 \u7b7e\u540d\u8ba4\u8bc1 \uff0c\u5b83\u63d0\u4f9b\u7ed9\u5ba2\u6237\u7aef\u7528\u4e8e\u9a8c\u8bc1\u56de\u8c03\u901a\u77e5\u7684\u5408\u6cd5\u6027\u3002","title":"\u901a\u77e5\u89c4\u5219"},{"location":"api/form_api/#_5","text":"\u5927\u6587\u4ef6\u4e0a\u4f20\u57fa\u4e8e\u6570\u636e\u6d41\u5f0f\u4f20\u8f93\u7684\u539f\u7406\uff0c\u901a\u8fc7\u964d\u4f4e\u6570\u636e\u5728\u8fb9\u7f18\u8282\u70b9\u3001\u4e2d\u8f6c\u8282\u70b9\u7684\u65f6\u95f4\u5f00\u9500\uff0c\u8ba9\u4e0a\u4f20\u901f\u5ea6\u66f4\u5feb\u3002 \u76f8\u6bd4\u5c0f\u6587\u4ef6\u4e0a\u4f20\uff0c\u5b83\u6709\u4e24\u70b9\u7ea6\u675f\uff0c\u5177\u4f53\u5982\u4e0b\uff1a 1\u3001\u9700\u8981\u5728 \u5c0f\u6587\u4ef6\u4e0a\u4f20 \u7684\u53c2\u6570\u4e2d\u52a0\u5165 content-length \u53c2\u6570\uff0c\u6307\u5b9a\u6587\u4ef6\u957f\u5ea6\u3002 2\u3001\u786e\u4fdd\u4e09\u4e2a\u5b57\u6bb5 authorization \u3001 policy \u3001 file \u4e2d\uff0c file \u5904\u4e8e\u6700\u540e\u7684\u4f4d\u7f6e\u3002 \u4e3e\u4f8b\u8bf4\u660e // policy \u4e2d\u52a0\u5165\u6587\u4ef6\u957f\u5ea6 content-length POLICY = { 'bucket': 'bucket1', 'expiration': 1509200758, 'content-length': 10, 'save-key': '/img1.txt', } // file \u5b57\u6bb5\u5904\u4e8e\u6700\u540e\u7684\u4f4d\u7f6e POST /bucket1 HTTP/1.1 Host: v0.api.upyun.com Content-Type: multipart/form-data; boundary=xxxxxxx Content-Length: 386 --xxxxxxx. Content-Disposition: form-data; name=\"policy\" eyJjb250ZW50LWxlbmd0aCI6IDEwLCAiYnVja2V0IjogImJ1Y2tldDEiLCAiZXhwaXJhdGlvbiI6IDE1MDkyMDA3NTgsICJzYXZlLWtleSI6ICIvaW1nMS50eHQifQ== --xxxxxxx Content-Disposition: form-data; name=\"signature\" 48f7ccda45cc3a5e25f4eb5eb1d6dbba --xxxxxxx Content-Disposition: form-data; name=\"file\"; filename=abc.txt. d63..`PPq. --xxxxxxx--","title":"\u5927\u6587\u4ef6\u4e0a\u4f20"},{"location":"api/form_api/#_6","text":"save-key \u652f\u6301\u7684\u8bbe\u7f6e\u7c7b\u578b\uff1a \u7c7b\u578b \u683c\u5f0f \u8bf4\u660e \u7edd\u5bf9\u503c String \u6307\u5b9a\u5177\u4f53\u7684\u8def\u5f84\uff0c\u5982: /path/to/file.txt \u65f6\u95f4\u7c7b {year} {mon} {day} {hour} {min} {sec} \u65e5\u671f\u3001\u65f6\u95f4\u76f8\u5173\u5185\u5bb9\uff08UTC \u65f6\u95f4\uff09 md5 \u7c7b {filemd5} \u6587\u4ef6\u7684 md5 \u503c \u968f\u673a\u7c7b {random} {random32} 16 \u4f4d\u6216 32 \u4f4d\u968f\u673a\u5b57\u7b26\u548c\u6570\u5b57 \u6587\u4ef6\u540d {filename} {suffix} {.suffix} \u4e0a\u4f20\u6587\u4ef6\u7684\u6587\u4ef6\u540d\u53ca\u6269\u5c55\u540d \u4e3e\u4f8b\u8bf4\u660e \u4f8b 1\uff1a\u65f6\u95f4\u7c7b + \u968f\u673a\u7c7b \u4e0a\u4f20\u6587\u4ef6\u540d\uff1asample.jpg UTC \u65f6\u95f4\uff1a2013-01-01 10:05:20 save-key\uff1a/{year}/{mon}/{day}/upload_{random32}{.suffix} \u4fdd\u5b58\u8def\u5f84\u4e3a\uff1a/2013/01/01/upload_b92c9cc21ce6a88ea696705c88b57c3f.jpg \u4f8b 2\uff1a\u65f6\u95f4\u7c7b + \u6587\u4ef6\u540d \u4e0a\u4f20\u6587\u4ef6\u540d\uff1asample.jpg UTC \u65f6\u95f4\uff1a2014-02-02 11:05:20 save-key\uff1a/{year}/{mon}/{day}/{hour}_{min}_{sec}_{filename}{.suffix} \u4fdd\u5b58\u8def\u5f84\u4e3a\uff1a/2014/02/02/11_05_20_sample.jpg \u4e3a\u4e86\u907f\u514d\u8def\u5f84\u91cd\u540d\u5bfc\u81f4\u6587\u4ef6\u88ab\u8986\u76d6\uff0c\u5efa\u8bae\u4f7f\u7528\u590d\u6742\u7684\u4f4e\u91cd\u590d\u6027\u7684\u547d\u540d\u65b9\u5f0f\u3002","title":"\u8def\u5f84\u8bbe\u7f6e"},{"location":"api/form_api/#_7","text":"\u5982\u679c\u8bbe\u7f6e\u4e86 apps \u53c2\u6570\uff0c\u6587\u4ef6\u4e0a\u4f20\u5b8c\u6210\u540e\uff0c\u4f1a\u521b\u5efa\u5f02\u6b65\u5904\u7406\u4efb\u52a1\u3002\u76ee\u524d\uff0c\u5f02\u6b65\u9884\u5904\u7406\u652f\u6301 \u5f02\u6b65\u56fe\u7247\u5904\u7406 \u3001 \u5f02\u6b65\u97f3\u89c6\u9891\u5904\u7406 \u548c \u5f02\u6b65\u56fe\u7247\u9274\u522b \u3002","title":"\u5f02\u6b65\u9884\u5904\u7406"},{"location":"api/form_api/#apps","text":"apps = [ { // \u5f02\u6b65\u56fe\u7247\u5904\u7406\u4efb\u52a1 \"name\": \"thumb\", // \u5f02\u6b65\u4efb\u52a1\u540d\u79f0\uff0c\u5fc5\u586b\u3002thumb \u8868\u793a\u5f02\u6b65\u56fe\u7247\u5904\u7406\u670d\u52a1 \"x-gmkerl-thumb\": \"<\u56fe\u7247\u5904\u7406\u53c2\u6570>\", // \u5904\u7406\u53c2\u6570\uff0c\u5fc5\u586b \"save_as\": \"<save_as>\", // \u7ed3\u679c\u56fe\u7247\u4fdd\u5b58\u8def\u5f84\uff0c\u9009\u586b \"notify_url\": \"<notify_url>\" // \u56de\u8c03\u5730\u5740\uff0c\u4e0d\u586b\u65f6\u4f7f\u7528\u4e0a\u4f20\u53c2\u6570\u4e2d\u7684 notify_url }, ...... ] apps = [ { // \u5f02\u6b65\u97f3\u89c6\u9891\u5904\u7406\u4efb\u52a1 \"name\": \"naga\", // \u5f02\u6b65\u4efb\u52a1\u540d\u79f0\uff0c\u5fc5\u586b\u3002naga \u8868\u793a\u5f02\u6b65\u97f3\u89c6\u9891\u5904\u7406\u670d\u52a1 \"type\": \"<type>\", // \u89c6\u9891\u8f6c\u7801\uff0c\u5fc5\u586b \"avopts\": \"<avopts>\", // \u5904\u7406\u53c2\u6570\uff0c\u5fc5\u586b \"return_info\": true/false, // \u662f\u5426\u8fd4\u56de\u5143\u6570\u636e\uff0c\u9009\u586b \"save_as\": \"<save_as>\", // \u7ed3\u679c\u97f3\u9891/\u89c6\u9891\u4fdd\u5b58\u8def\u5f84\uff0c\u9009\u586b \"notify_url\": \"<notify_url>\" // \u56de\u8c03\u5730\u5740\uff0c\u4e0d\u586b\u65f6\u4f7f\u7528\u4e0a\u4f20\u53c2\u6570\u4e2d\u7684 notify_url }, ...... ] apps = [ { // \u5f02\u6b65\u56fe\u7247\u5ba1\u6838\u4efb\u52a1 \"name\": \"imgaudit\", // \u5f02\u6b65\u4efb\u52a1\u540d\u79f0\uff0c\u5fc5\u586b\u3002imgaudit \u8868\u793a\u5f02\u6b65\u56fe\u7247\u5ba1\u6838\u670d\u52a1 \"notify_url\": \"<notify_url>\" // \u56de\u8c03\u5730\u5740\uff0c\u4e0d\u586b\u65f6\u4f7f\u7528\u4e0a\u4f20\u53c2\u6570\u4e2d\u7684 notify_url }, ...... ] apps = [ { // \u5f02\u6b65\u6587\u672c\u5ba1\u6838\u4efb\u52a1 \"name\": \"textjudge\", // \u5f02\u6b65\u4efb\u52a1\u540d\u79f0\uff0c\u5fc5\u586b\u3002textjudge \u8868\u793a\u5f02\u6b65\u6587\u672c\u5ba1\u6838\u670d\u52a1 \"notify_url\": \"<notify_url>\" // \u56de\u8c03\u5730\u5740\uff0c\u4e0d\u586b\u65f6\u4f7f\u7528\u4e0a\u4f20\u53c2\u6570\u4e2d\u7684 notify_url }, ...... ] \u6ce8 apps \u6309 JSON \u683c\u5f0f\u7ec4\u88c5\u4efb\u52a1\uff0c\u6700\u591a\u53ef\u4ee5\u5305\u542b 10 \u4e2a\u4efb\u52a1\uff0c\u6bcf\u4e2a\u4efb\u52a1\u5fc5\u987b\u6307\u5b9a name \u53c2\u6570\u3002 \u539f\u6587\u4ef6\u7684\u4fdd\u5b58\u8def\u5f84\u7531 \u4e0a\u4f20\u53c2\u6570 \u4e2d\u7684 save-key \u6307\u5b9a\u3002 \u5f02\u6b65\u56fe\u7247\u5904\u7406\uff0c\u8be6\u89c1 \u300c\u56fe\u7247\u5904\u7406\u300d > \u300c \u4e0a\u4f20\u9884\u5904\u7406\uff08\u5f02\u6b65\uff09 \u300d\uff1b\u5f02\u6b65\u97f3\u89c6\u9891\u5904\u7406\uff0c\u8be6\u89c1\u300c\u97f3\u89c6\u9891\u5904\u7406\u300d > \u300c \u4e0a\u4f20\u9884\u5904\u7406 \u300d\uff1b\u5f02\u6b65\u5185\u5bb9\u5ba1\u6838\uff0c\u8be6\u89c1 \u300c\u5185\u5bb9\u5ba1\u6838\u300d > \u300c \u4e0a\u4f20\u9884\u5904\u7406 \u300d\u3002","title":"apps \u53c2\u6570\u7ed3\u6784"},{"location":"api/form_api/#_8","text":"\u5f02\u6b65\u5904\u7406\u4efb\u52a1\u521b\u5efa\u6210\u529f\u540e\uff0c\u5728\u4e0a\u4f20\u8fd4\u56de\u4fe1\u606f\u548c\u56de\u8c03\u4fe1\u606f\uff08\u8be6\u89c1 \u901a\u77e5\u89c4\u5219 \uff09\u4e2d\u4f1a\u5e26\u4e0a task_ids \u5b57\u6bb5\uff0c\u91cc\u9762\u5305\u542b\u6bcf\u4e2a\u4efb\u52a1\u7684 task_id \u3002","title":"\u54cd\u5e94\u4fe1\u606f"},{"location":"api/form_api/#_9","text":"\u5f02\u6b65\u5904\u7406\u4efb\u52a1\u5b8c\u6210\u540e\uff0c\u5982\u679c\u5b58\u5728 notify_url \uff08\u4efb\u52a1\u4e2d\u4e0d\u5b58\u5728 notify_url \uff0c\u4f7f\u7528 \u4e0a\u4f20\u53c2\u6570 \u4e2d\u7684 notify_url \uff0c\u5982\u679c\u4e0a\u4f20\u53c2\u6570\u4e2d\u4e5f\u4e0d\u5b58\u5728\uff0c\u4e0d\u56de\u8c03\uff09\uff0c\u4ee5\u56de\u8c03\u7684\u5f62\u5f0f\u53d1\u9001\u5904\u7406\u7ed3\u679c\uff0c\u91cc\u9762\u5305\u542b task_id \u7b49\u4fe1\u606f\uff0c\u5177\u4f53\u8be6\u89c1\u5404\u670d\u52a1\u7684\u56de\u8c03\u901a\u77e5\u3002","title":"\u56de\u8c03\u901a\u77e5"},{"location":"api/form_api/#ext-param","text":"\u5f53\u4f7f\u7528 return-url \u6216 notify-url \u53c2\u6570\u53d1\u9001\u8fd4\u56de\u4fe1\u606f\u6216\u56de\u8c03\u4fe1\u606f\u65f6\uff0c\u7ed3\u679c\u4fe1\u606f\uff08\u8be6\u89c1 \u901a\u77e5\u89c4\u5219 \uff09\u4ec5\u5305\u542b\u53c8\u62cd\u4e91\u6307\u5b9a\u7684\u5185\u5bb9\uff0c\u65e0\u6cd5\u56de\u4f20\u7528\u6237\u81ea\u5b9a\u4e49\u7684\u5185\u5bb9\u3002\u5982\u679c\u9700\u8981\u56de\u4f20\u81ea\u5b9a\u4e49\u7684\u5185\u5bb9\uff0c\u53ef\u4ee5\u6307\u5b9a ext-param \u53c2\u6570\u3002 \u81ea\u5b9a\u4e49\u7684\u5185\u5bb9\u5fc5\u987b\u662f UTF-8 \u7f16\u7801\uff0c\u4e14\u957f\u5ea6\u4e0d\u80fd\u8d85\u8fc7 255 \u4e2a\u5b57\u8282\u3002 notify-url \u56de\u8c03\u662f\u5f02\u6b65\u8fdb\u884c\u7684\uff0c\u5982\u679c\u56de\u8c03\u4fe1\u606f\u9700\u8981\u533a\u5206\u81ea\u5b9a\u4e49\u5185\u5bb9\u6765\u81ea\u90a3\u4e2a\u4e0a\u4f20\u8bf7\u6c42\uff0c\u53ef\u4ee5\u5728 ext-param \u53c2\u6570\u4e2d\u6dfb\u52a0\u4e2a clientId_xxx \u6807\u8bc6\u3002","title":"ext-param"},{"location":"api/form_api/#_10","text":"","title":"\u7b7e\u540d\u8ba4\u8bc1\uff08\u65e7\uff09"},{"location":"api/form_api/#_11","text":"\u8bf7\u6c42\u65b9\u6cd5 curl http://v0.api.upyun.com/<bucket> \\ -F file=@<filename> \\ -F policy=<policy> \\ -F signature=<signature> \\ # \u5176\u4ed6\u53c2\u6570... signature \u7b97\u6cd5 \u4e3a\u4e86\u4fdd\u8bc1\u670d\u52a1\u7684\u5b89\u5168\u6027\uff0c\u4f7f\u7528\u670d\u52a1\u7684\u8868\u5355 API \u5bc6\u94a5\uff08\u53ef\u767b\u5f55\u53c8\u62cd\u4e91\u63a7\u5236\u53f0\u67e5\u770b\uff09\u5bf9 policy \u8fdb\u884c\u7b7e\u540d\uff0c\u7b7e\u540d\u7684\u7ed3\u679c\u5373\u662f signature\u3002 signature \u751f\u6210\u6b65\u9aa4\uff1a \u751f\u6210 policy \u5b57\u7b26\u4e32\uff08\u89c1 policy \u7b97\u6cd5 \uff09\uff1b \u5c06\u7b2c 1 \u6b65\u4e2d\u7684\u5b57\u7b26\u4e32\u4e0e\u8868\u5355 API \u5bc6\u94a5\u5b57\u7b26\u4e32\u7528 & \u62fc\u63a5\uff1b \u5c06\u7b2c 2 \u6b65\u4e2d\u7684\u5b57\u7b26\u4e32\u8ba1\u7b97 md5\uff0c\u6240\u5f97\u5373\u4e3a signature \u3002 \u4f8b\u5982\uff0c\u5047\u8bbe\u670d\u52a1\u7684\u8868\u5355 API \u9a8c\u8bc1\u5bc6\u94a5\u4e3a\uff1a cAnyet74l9hdUag34h2dZu8z7gU= \u7b2c\u4e00\u6b65\uff0c\u751f\u6210 policy \u5b57\u7b26\u4e32\uff1a eyJidWNrZXQiOiJkZW1vYnVja2V0IiwiZXhwaXJhdGlvbiI6MTQwOTIwMDc1OCwic2F2ZS1rZXkiOiIvaW1nLmpwZyJ9 \u7b2c\u4e8c\u6b65\uff0c\u7b2c\u4e00\u6b65\u7684\u5b57\u7b26\u4e32\u4e0e\u8868\u5355 API \u5bc6\u94a5\u5b57\u7b26\u4e32\u7528 & \u62fc\u63a5\uff1a eyJidWNrZXQiOiJkZW1vYnVja2V0IiwiZXhwaXJhdGlvbiI6MTQwOTIwMDc1OCwic2F2ZS1rZXkiOiIvaW1nLmpwZyJ9&cAnyet74l9hdUag34h2dZu8z7gU= \u7b2c\u4e09\u6b65\uff0c\u5c06\u7b2c\u4e8c\u6b65\u7684\u5b57\u7b26\u4e32\u8ba1\u7b97 md5 \u540e\u5373\u5f97\u5230 signature \uff1a 646a6a629c344ce0e6a10cadd49756d4","title":"\u8bf7\u6c42\u7b7e\u540d\uff08\u65e7\uff09"},{"location":"api/form_api/#_12","text":"sign \u7b97\u6cd5 sign \u662f\u6839\u636e code \u3001 message \u3001 url \u3001 time \u548c\u8868\u5355 API \u9a8c\u8bc1\u5bc6\u5319( form_api_secret ) \u4f7f\u7528 & \u62fc\u63a5\u540e\u8fdb\u884c MD5 \u5904\u7406\u5f97\u5230\u3002\u62fc\u63a5\u65f6\u9700\u6ce8\u610f URL \u7684\u7f16\u7801\u4e0e\u89e3\u7801\u95ee\u9898\u3002\u5982\u679c\u4f7f\u7528\u4e86 ext-param \u53c2\u6570, ext-param \u4e5f\u9700\u8981\u4f7f\u7528 & \u62fc\u63a5\u5728 form_api_secret \u4e4b\u540e\u3002 \u5982\u679c\u4e0a\u4f20\u7684\u662f\u56fe\u7247\uff0c\u5b58\u5728 image-width \u3001 image-height \u3001 image-frames \u548c image-type \u56db\u4e2a\u53c2\u6570\uff0c\u8fd9\u56db\u4e2a\u53c2\u6570\u4e0d\u53c2\u4e0e\u7b7e\u540d\u8ba1\u7b97\u3002 \u5982\u679c\u8bbe\u7f6e\u4e86 apps \u53c2\u6570\uff0c\u5b58\u5728 task_ids \uff0c\u5b83\u4e5f\u4e0d\u53c2\u4e0e\u7b7e\u540d\u8ba1\u7b97\u3002 \u4f8b\u5982\uff0ccode\uff1a 200 message\uff1a 'ok' url\uff1a '/2015/06/17/190623/upload_QQ \u56fe\u7247 201506011111206f7c696f0920f097d7eefd750334003e.png' time\uff1a 1434539183 form_api_secret\uff1a lGetaXubhGezKp89+6iuOb5IaS3= \u62fc\u63a5\u540e\u7684\u5b57\u7b26\u4e32\uff1a 200&ok&/2015/06/17/190623/upload_QQ \u56fe\u7247 201506011111206f7c696f0920f097d7eefd750334003e.png&1434539183&lGetaXubhGezKp89+6iuOb5IaS3= sign \u662f '086c46cfedfc22bfa2e4971a77530a76' \u3002 \u56de\u8c03\u4fe1\u606f\uff08\u5df2\u7ecf\u7b7e\u540d\uff09\u662f\uff1a {\"code\":200,\"message\":\"ok\",\"url\":\"\\/2015\\/06\\/17\\/190623\\/upload_QQ\\u56fe\\u7247201506011111206f7c696f0920f097d7eefd750334003e.png\",\"time\":1434539183,\"image-width\":1024,\"image-height\":768,\"image-frames\":1,\"image-type\":\"PNG\",\"sign\":\"086c46cfedfc22bfa2e4971a77530a76\"} no-sign \u7b97\u6cd5 \u5982\u679c\u53d1\u751f\u5f02\u5e38\uff0c\u8868\u5355 API \u9a8c\u8bc1\u5bc6\u94a5\u83b7\u53d6\u5931\u8d25\uff0c\u8fd4\u56de no-sign \u3002 no-sign \u7b97\u6cd5\u8ddf sign \u76f8\u540c\uff0c\u53ea\u662f\u8868\u5355 API \u9a8c\u8bc1\u5bc6\u5319( form_api_secret ) \u4e3a\u7a7a\u5b57\u7b26\u4e32 '' \u3002 \u4f8b\u5982\uff0c\u4f7f\u7528\u4e0a\u4f8b\u53c2\u6570\u62fc\u63a5\u540e\u7684\u5b57\u7b26\u4e32\u662f\uff1a 200&ok&/2015/06/17/190623/upload_QQ \u56fe\u7247 201506011111206f7c696f0920f097d7eefd750334003e.png&1434539183 no-sign \u662f 'bbaeeb9d05623fe1b380f756a291011a' \u3002","title":"\u56de\u8c03\u7b7e\u540d\uff08\u65e7\uff09"},{"location":"api/form_api/#_13","text":"\u53c2\u6570 \u5fc5\u9009 \u8bf4\u660e x-gmkerl-extract-color-count \u5426 \u4e3b\u9898\u8272\u63d0\u53d6\u7684\u989c\u8272\u6570\u91cf\uff0c\u9ed8\u8ba4 256 x-gmkerl-extract-format \u5426 \u4e3b\u9898\u8272\u63d0\u53d6\u683c\u5f0f\uff0c\u9ed8\u8ba4 dec x-gmkerl-thumbnail \u5426 \u7f29\u7565\u56fe\u7248\u672c\u540d\u79f0\uff0c\u53ef\u642d\u914d\u5176\u4ed6 x-gmkerl-* \u53c2\u6570\u4f7f\u7528 x-gmkerl-type \u5426 \u7f29\u7565\u7c7b\u578b\uff0c\u89c1 x-gmkerl-type \u53ef\u9009\u503c\u5217\u8868 x-gmkerl-value \u5426 \u7f29\u7565\u7c7b\u578b\u5bf9\u5e94\u7684\u53c2\u6570\u503c\uff0c\u89c1 x-gmkerl-value \u503c\u8bf4\u660e x-gmkerl-quality \u5426 \u538b\u7f29\u8d28\u91cf\uff0c\u9ed8\u8ba4 95 x-gmkerl-unsharp \u5426 \u662f\u5426\u9510\u5316\uff0c\u9ed8\u8ba4\u9510\u5316 x-gmkerl-rotate \u5426 \u56fe\u7247\u65cb\u8f6c\uff08\u987a\u65f6\u9488\uff09\uff0c\u53ef\u9009\u503c\uff1a auto \u3001 (0, 360] \u3002\u8be6\u89c1 \u65cb\u8f6c x-gmkerl-crop \u5426 \u56fe\u7247\u88c1\u526a\uff0c\u683c\u5f0f\uff1a <w>x<h>a<x>a<y> \u3002\u8be6\u89c1 \u88c1\u526a x-gmkerl-exif-switch \u5426 \u662f\u5426\u4fdd\u7559 EXIF \u4fe1\u606f\uff0c\u9ed8\u8ba4\u4e0d\u4fdd\u7559 \u4ec5\u5728\u642d\u914d x-gmkerl-crop \u3001 x-gmkerl-type \u3001 x-gmkerl-thumbnail \u65f6\u6709\u6548 x-gmkerl-type \u53ef\u9009\u503c\u5217\u8868 \u503c \u542b\u4e49 fix_width \u9650\u5b9a\u5bbd\u5ea6\uff0c\u9ad8\u5ea6\u81ea\u9002\u5e94 fix_height \u9650\u5b9a\u9ad8\u5ea6\uff0c\u5bbd\u5ea6\u81ea\u9002\u5e94 fix_width_or_height \u9650\u5b9a\u5bbd\u5ea6\u548c\u9ad8\u5ea6\uff0c\u5bbd\u9ad8\u4e0d\u8db3\u65f6\u4e0d\u7f29\u653e fix_both \u56fa\u5b9a\u5bbd\u5ea6\u548c\u9ad8\u5ea6\uff0c\u5bbd\u9ad8\u4e0d\u8db3\u65f6\u5f3a\u884c\u7f29\u653e fix_max \u9650\u5b9a\u6700\u957f\u8fb9\uff0c\u77ed\u8fb9\u81ea\u9002\u5e94 fix_min \u9650\u5b9a\u6700\u77ed\u8fb9\uff0c\u957f\u8fb9\u81ea\u9002\u5e94 fix_scale \u7b49\u6bd4\u4f8b\u7f29\u653e\uff081-1000\uff09 x-gmkerl-value \u503c\u8bf4\u660e \u5f53 x-gmkerl-type \u6307\u5b9a\u4e3a fix_width_or_height \u6216 fix_both \u65f6\uff0c x-gmkerl-value \u503c\u7684\u683c\u5f0f\u4e3a <width>x<height> \uff0c\u5982 480x576 \u3002 \u5f53 x-gmkerl-type \u4e3a\u5176\u4ed6\u7684\u7c7b\u578b\uff0c x-gmkerl-value \u503c\u53ea\u9700\u8981\u6307\u5b9a\u5355\u4e2a\u6570\u5b57\uff0c\u5982 100 \uff0c\u610f\u601d\u4e3a\u9ad8\u548c/\u6216\u5bbd\u4e3a 100 \u3002 \u5982\u6709\u7591\u95ee\u8bf7 \u8054\u7cfb\u6211\u4eec","title":"\u56fe\u7247\u9884\u5904\u7406\uff08\u65e7\uff09"},{"location":"api/fusion_storage/","text":"\u9488\u5bf9\u5f88\u591a\u7528\u6237\u5728\u5e73\u53f0\u9009\u578b\u65f6\uff0c\u9700\u8981\u5c06\u6570\u636e\u5b58\u50a8\u5728\u591a\u5bb6\u5b58\u50a8\u5382\u5546\u4ee5\u4fdd\u8bc1\u670d\u52a1\u7684\u53ef\u7528\u6027\uff0c\u53c8\u62cd\u4e91\u63a8\u51fa\u4e86\u878d\u5408\u4e91\u5b58\u50a8\u3002\u5b83\u4ee5\u53c8\u62cd\u4e91\u5b58\u50a8\u4f5c\u4e3a\u4e3b\u5b58\u50a8\uff0c\u81ea\u52a8\u5c06\u589e\u91cf\u6587\u4ef6\u540c\u6b65\u5230\u7b2c\u4e09\u65b9\u5b58\u50a8\u5382\u5546\uff08\u5982\uff1a\u963f\u91cc\u4e91 OSS\u3001\u4e03\u725b\u4e91\u5b58\u50a8\u7b49\uff09\uff0c\u5e76\u5728\u53c8\u62cd\u4e91\u5b58\u50a8\u53d8\u52a8\u65f6\uff0c\u542f\u7528\u7b2c\u4e09\u65b9\u5b58\u50a8\u6e90\uff0c\u4fdd\u8bc1\u60a8\u670d\u52a1\u7684\u9ad8\u53ef\u7528\u3002 \u57fa\u7840\u67b6\u6784 \u00b6 \u5f53\u53c8\u62cd\u4e91\u5b58\u50a8\u6b63\u5e38\u65f6\uff0c\u7ec8\u7aef\u670d\u52a1\u4e0a\u4f20\u6587\u4ef6\u5230\u53c8\u62cd\u4e91\u5b58\u50a8\uff0c\u53c8\u62cd\u4e91\u5b58\u50a8\u81ea\u52a8\u540c\u6b65\u6587\u4ef6\u5230\u7b2c\u4e09\u65b9\u5b58\u50a8\u5382\u5546\u3002\u7528\u6237\u8bbf\u95ee\u6587\u4ef6\u65f6\uff0c\u901a\u8fc7\u53c8\u62cd\u4e91 CDN \u8bbf\u95ee\u53c8\u62cd\u4e91\u5b58\u50a8\u4e0a\u7684\u6587\u4ef6\u3002 \u5f53\u53c8\u62cd\u4e91\u5b58\u50a8\u51fa\u73b0\u53d8\u52a8\uff08\u5f02\u5e38\uff09\u65f6\uff0cCDN \u611f\u77e5\u5230\u4e91\u5b58\u50a8\u53d8\u52a8\uff0c\u53bb\u7b2c\u4e09\u65b9\u5b58\u50a8\u5382\u5546\u83b7\u53d6\u6587\u4ef6\uff0c\u5206\u53d1\u7ed9\u7528\u6237\u3002\u540c\u65f6\uff0c\u7ec8\u7aef\u670d\u52a1\u7684\u6587\u4ef6\u9700\u8981\u4e0a\u4f20\u5230\u7b2c\u4e09\u65b9\u5b58\u50a8\u5382\u5546\u3002\u5f85\u53c8\u62cd\u4e91\u5b58\u50a8\u6062\u590d\u540e\uff0c\u81ea\u52a8\u540c\u6b65\u8be5\u671f\u95f4\u4e0a\u4f20\u5230\u7b2c\u4e09\u65b9\u5b58\u50a8\u5382\u5546\u7684\u6587\u4ef6\u5230\u53c8\u62cd\u4e91\u5b58\u50a8\u3002 \u4f7f\u7528\u878d\u5408\u4e91\u5b58\u50a8\u9700\u8981\u505a\u4e24\u65b9\u9762\u4e8b\u60c5\uff1a \u5728\u53c8\u62cd\u4e91\u63a7\u5236\u53f0\u914d\u7f6e\u670d\u52a1\u878d\u5408\u7684\u7b2c\u4e09\u65b9\u5b58\u50a8\u5382\u5546\uff0c\u89c1 \u529f\u80fd\u914d\u7f6e \uff1b \u4e0a\u4f20\u652f\u6301\u7b2c\u4e09\u65b9\u5b58\u50a8\u5382\u5546\uff0c\u89c1 SDK \u3002 \u529f\u80fd\u914d\u7f6e \u00b6 \u60a8\u5728\u4f7f\u7528\u63a7\u5236\u53f0\u8fdb\u884c\u529f\u80fd\u914d\u7f6e\u4e4b\u524d\uff0c\u8bf7\u786e\u4fdd\u60a8\u5df2\u7ecf\u6ce8\u518c\u53c8\u62cd\u4e91\u8d26\u53f7\u5e76\u5b8c\u6210\u5b9e\u540d\u9a8c\u8bc1\uff0c\u8bf7\u786e\u4fdd\u60a8\u5df2\u7ecf\u521b\u5efa \u4e91\u5b58\u50a8\u670d\u52a1 \u3002 \u914d\u7f6e\u5165\u53e3 \u00b6 1\uff09\u300c\u5de5\u5177\u7bb1\u300d > \u300c\u878d\u5408\u4e91\u5b58\u50a8\u300d\u3002 2\uff09\u300c\u670d\u52a1\u300d \u5217\u8868 > \u300c\u878d\u5408\u4e91\u300d\u3002\u7279\u522b\u5730\uff0c\u53ea\u6709\u6e90\u7ad9\u662f \u300c\u53c8\u62cd\u4e91\u300d\u7684\u670d\u52a1\uff0c\u624d\u6709\u300c\u878d\u5408\u4e91\u300d \u8fd9\u4e2a\u5165\u53e3\u3002 \u6dfb\u52a0\u670d\u52a1 \u00b6 \u8fdb\u5165\u914d\u7f6e\u5217\u8868\u9875\u9762\u540e\uff0c\u70b9\u51fb\u53f3\u4e0a\u89d2\u7684 \u300c\u6dfb\u52a0\u670d\u52a1\u300d\u3002 \u914d\u7f6e \u00b6 1\uff09\u9009\u62e9\u9700\u8981\u878d\u5408\u7684\u670d\u52a1 \u901a\u8fc7\u5de6\u4fa7\u7684\u9009\u9879\uff0c\u9009\u62e9\u60a8\u9700\u8981\u914d\u7f6e\u878d\u5408\u4e91\u5b58\u50a8\u7684\u53c8\u62cd\u4e91\u670d\u52a1\uff0c\u652f\u6301\u901a\u8fc7\u5173\u952e\u5b57\u8fdb\u884c\u641c\u7d22\u7b5b\u9009\uff0c\u4ee5\u4fbf\u5feb\u901f\u627e\u5230\u60a8\u8981\u914d\u7f6e\u7684\u670d\u52a1\u3002 2\uff09\u9009\u62e9\u7b2c\u4e09\u65b9\u5b58\u50a8\u5382\u5546 \u76ee\u524d\u4ec5\u652f\u6301\u963f\u91cc\u4e91 OSS \u548c\u4e03\u725b\u4e91\u5b58\u50a8\uff0c\u4e14\u5355\u4e2a\u670d\u52a1\u53ea\u80fd\u9009\u62e9\u4e00\u5bb6\u7b2c\u4e09\u65b9\u5b58\u50a8\u5382\u5546\u3002 3\uff09\u521b\u5efa\u7a7a\u95f4\u5e76\u8f93\u5165 \u5728\u7b2c\u4e09\u65b9\u5b58\u50a8\u5382\u5546\u7684\u7ba1\u7406\u4e2d\u5fc3\u521b\u5efa\u4e00\u4e2a\u65b0\u7684\u5177\u5907 \u516c\u5171\u8bfb\u6743\u9650 \u7684\u7a7a\u95f4\u7528\u4e8e\u53c8\u62cd\u4e91\u670d\u52a1\u589e\u91cf\u6587\u4ef6\u540c\u6b65\uff0c\u4e0d\u540c\u5382\u5546\u9700\u8981\u63d0\u4f9b\u7684\u914d\u7f6e\u9879\u4e0d\u540c\u3002 \u963f\u91cc\u4e91 OSS \u9700\u8981\u63d0\u4f9b BucketName \u3001\u6240\u5c5e\u5730\u533a\u3001\u540c\u6b65\u51ed\u8bc1\uff08AccessKeyId \u3001AccessKeySecret\uff09\u3002 \u4e03\u725b\u4e91\u5b58\u50a8\u9700\u8981\u63d0\u4f9b\u7a7a\u95f4\u540d\u79f0\u3001\u540c\u6b65\u51ed\u8bc1\uff08UploadToken\uff09\u3002 \u7279\u522b\u5730\uff0c\u4e0d\u8981\u4f7f\u7528\u4e00\u4e2a\u7b2c\u4e09\u65b9\u5b58\u50a8\u5382\u5546\u7a7a\u95f4\u914d\u7f6e\u53c8\u62cd\u4e91\u7684\u591a\u4e2a\u670d\u52a1\uff0c\u907f\u514d\u6587\u4ef6\u540c\u540d\u8986\u76d6\u3002\u540c\u6b65\u51ed\u8bc1\u83b7\u53d6\uff0c\u89c1 \u540c\u6b65\u51ed\u8bc1\u751f\u6210\u6307\u5357 \u3002 4\uff09\u542f\u7528\u7b2c\u4e09\u65b9\u5b58\u50a8\u6e90 \u6839\u636e\u9700\u8981\uff0c\u9009\u62e9\u662f\u5426\u542f\u7528\u7b2c\u4e09\u65b9\u5b58\u50a8\u6e90\u3002\u5982\u679c\u5f00\u542f\uff0c\u9700\u8981\u8f93\u5165\u7b2c\u4e09\u65b9\u5382\u5546\u914d\u7f6e\u7684\u7a7a\u95f4\u5bf9\u5e94\u56de\u6e90\u5730\u5740\u3002 \u963f\u91cc\u4e91 OSS \u662f\u7a7a\u95f4\u5bf9\u5e94\u7684\u5916\u7f51\u57df\u540d\u3002 \u4e03\u725b\u4e91\u5b58\u50a8\u662f\u7a7a\u95f4\u5bf9\u5e94\u7684\u5916\u94fe\u57df\u540d\u3002\u9700\u5411\u4e03\u725b\u7533\u8bf7\u4e0d\u5e26\u52a0\u901f\u7684\u5916\u94fe\u57df\u540d\uff0c\u5426\u5219\u53ef\u80fd\u4f1a\u5f15\u8d77 CDN \u670d\u52a1\u5728\u591a\u5bb6 CDN \u5382\u5546\u8fdb\u884c\u8c03\u5ea6\uff0c\u6700\u7ec8\u5f71\u54cd\u4f53\u9a8c\u3002 5\uff09\u9a8c\u8bc1\u914d\u7f6e \u70b9\u51fb\u63d0\u4ea4\uff0c\u4f1a\u9a8c\u8bc1\u60a8\u7684\u914d\u7f6e\u662f\u5426\u6709\u6548\u3002\u914d\u7f6e\u9a8c\u8bc1\u65e0\u8bef\uff0c\u63d0\u793a\uff1a\u9a8c\u8bc1\u6210\u529f\uff0c\u670d\u52a1\u914d\u7f6e\u6210\u529f\uff01 \u914d\u7f6e\u5217\u8868 \u00b6 \u914d\u7f6e\u6210\u529f\u540e\uff0c\u4f1a\u663e\u793a\u5728\u914d\u7f6e\u5217\u8868\u4e2d\u3002 \u5176\u4ed6\u64cd\u4f5c \u00b6 1) \u65e5\u5fd7 \u60a8\u53ef\u4ee5\u901a\u8fc7\u8be5\u529f\u80fd\u67e5\u770b\u589e\u91cf\u540c\u6b65\u7684\u65e5\u671f\u548c\u540c\u6b65\u8fdb\u5ea6\uff0c\u5e76\u53ef\u4ee5\u70b9\u51fb \u300c\u4e0b\u8f7d\u300d\uff0c\u628a\u65e5\u5fd7\u4fdd\u5b58\u5230\u672c\u5730\u3002 2\uff09\u7981\u7528/\u542f\u7528 \u60a8\u53ef\u4ee5\u901a\u8fc7\u8be5\u529f\u80fd\u968f\u65f6\u5bf9\u60a8\u7684\u914d\u7f6e\u8fdb\u884c\u7981\u7528\u548c\u542f\u7528\u3002\u7981\u7528\u540e\u5c06\u4f1a\u505c\u6b62\u5411\u7b2c\u4e09\u65b9\u5b58\u50a8\u5382\u5546\u8fdb\u884c\u589e\u91cf\u540c\u6b65\uff0c\u7b2c\u4e09\u65b9\u56de\u6e90\u4e5f\u5c06\u7981\u7528\u3002 3\uff09\u4fee\u6539 \u60a8\u53ef\u4ee5\u5bf9\u914d\u7f6e\u8fdb\u884c\u4fee\u6539\uff0c\u66f4\u6362\u7b2c\u4e09\u65b9\u5382\u5546\u6216\u7a7a\u95f4\u3002\u66f4\u6362\u7b2c\u4e09\u65b9\u5382\u5546\u5c06\u4f1a\u6309\u7167\u5f53\u524d\u540c\u6b65\u65f6\u95f4\u5f00\u59cb\u91cd\u65b0\u8fdb\u884c\u589e\u91cf\u540c\u6b65\u3002 4\uff09\u5220\u9664 \u60a8\u53ef\u4ee5\u5bf9\u914d\u7f6e\u8fdb\u884c\u5220\u9664\u64cd\u4f5c\u3002\u5220\u9664\u540e\u589e\u91cf\u540c\u6b65\u5c06\u4f1a\u505c\u6b62\uff0c\u7b2c\u4e09\u65b9\u56de\u6e90\u4e5f\u5c06\u7981\u7528\u3002 SDK \u00b6 \u5f53\u524d\uff0c\u878d\u5408\u4e91\u5b58\u50a8\u4e0a\u4f20 SDK \u4ec5\u5305\u62ec iOS \u548c Android \u3002\u5176\u4ed6\u8bed\u8a00\u7684\u5b9e\u73b0\uff0c\u9700\u8981\u7528\u6237\u81ea\u884c\u5904\u7406\u3002 \u540c\u6b65\u51ed\u8bc1\u751f\u6210\u6307\u5357 \u00b6 \u540c\u6b65\u51ed\u8bc1\u7684\u751f\u6210\u5404\u5b58\u50a8\u5382\u5546\u7684\u65b9\u5f0f\u548c\u65b9\u6cd5\u5404\u4e0d\u76f8\u540c\u3002\u8fd9\u91cc\u63a8\u8350\uff1a\u963f\u91cc\u4e91 OSS \u53ef\u901a\u8fc7 RAM \u7684\u65b9\u5f0f\u751f\u6210\uff0c\u4e03\u725b\u53ef\u624b\u52a8\u751f\u6210\u3002 \u963f\u91cc\u4e91 OSS \u00b6 \u963f\u91cc\u4e91\u63d0\u4f9b\u4e86 RAM \u548c STS \u4e24\u79cd\u6743\u9650\u7ba1\u7406\u7cfb\u7edf\u3002RAM \u4e3b\u8981\u7684\u4f5c\u7528\u662f\u63a7\u5236\u8d26\u53f7\u7cfb\u7edf\u7684\u6743\u9650\uff0c\u901a\u8fc7\u4f7f\u7528 RAM \u53ef\u4ee5\u5728\u4e3b\u8d26\u53f7\u7684\u6743\u9650\u8303\u56f4\u5185\u521b\u5efa\u5b50\u7528\u6237\uff0c\u7ed9\u4e0d\u540c\u7684\u5b50\u7528\u6237\u5206\u914d\u4e0d\u540c\u7684\u6743\u9650\u4ece\u800c\u8fbe\u5230\u6388\u6743\u7ba1\u7406\u7684\u76ee\u7684\u3002STS \u662f\u4e00\u4e2a\u5b89\u5168\u51ed\u8bc1\uff08Token\uff09\u7684\u7ba1\u7406\u7cfb\u7edf\uff0c\u7528\u6765\u6388\u4e88\u4e34\u65f6\u7684\u8bbf\u95ee\u6743\u9650\uff0c\u5b8c\u6210\u5bf9\u4e8e\u4e34\u65f6\u7528\u6237\u7684\u8bbf\u95ee\u6388\u6743\u3002\u7531\u4e8e STS \u65b9\u5f0f\u5177\u6709\u4e34\u65f6\u6027\uff0c\u4e0d\u9002\u7528\u4e8e\u672c\u65b9\u6848\uff0c\u6545\u63a8\u8350\u4f7f\u7528 RAM \u7684\u65b9\u5f0f\u6765\u751f\u6210\u540c\u6b65\u51ed\u8bc1\u3002 ** \u751f\u6210\u6b65\u9aa4 ** 1\uff09\u901a\u8fc7\u963f\u91cc\u4e91 RAM \u7ba1\u7406\u5e73\u53f0\u521b\u5efa\u7528\u6237\uff1b 2\uff09\u81ea\u52a8\u751f\u6210 AccessKey\uff0c\u4fdd\u5b58 AK \u4fe1\u606f\uff1b 3\uff09\u6dfb\u52a0\u6388\u6743\u7b56\u7565\uff08\u53ef\u6307\u5b9a\u5355\u4e2a OSS \u7a7a\u95f4\u6743\u9650\uff09\uff1b 4\uff09\u6388\u6743\u7b56\u7565\u914d\u7f6e\u597d\u4e4b\u540e\uff0c\u5728 AK \u4fe1\u606f\u91cc\u9762\u4fbf\u53ef\u4ee5\u627e\u5230 AccessKeyID \u548c AccessKeySecret \u4fe1\u606f\u3002 \u8be6\u60c5\u8bf7\u53c2\u8003 \u963f\u91cc\u4e91 OSS RAM \u4f7f\u7528\u6307\u5357 \u3002 ** \u6ce8\u610f\u4e8b\u9879 ** 1\uff09\u9700\u8981\u6388\u6743\u5bf9\u6307\u5b9a\u7684\u7a7a\u95f4\u8d44\u6e90\u5177\u6709\u516c\u5171\u8bfb\u6743\u9650\uff1b 2\uff09\u5728\u9650\u5236\u6761\u4ef6\u65b9\u9762\uff0c\u6388\u6743\u7684\u65f6\u95f4\u8981\u5c3d\u53ef\u80fd\u7684\u957f\u3002\u5426\u5219\u6388\u6743\u65f6\u95f4\u5931\u6548\u4e4b\u540e\uff0c\u53c8\u62cd\u4e91\u5b58\u50a8\u65e0\u6cd5\u8fdb\u884c\u4e0a\u4f20\u540c\u6b65\u64cd\u4f5c\u3002 \u4e03\u725b\u4e91\u5b58\u50a8 \u00b6 \u4e03\u725b\u4e91\u5b58\u50a8\u63d0\u4f9b\u4e00\u5bf9\u4e3b\u548c\u4ece Access Key \u548c Secret Key \u4f5c\u4e3a\u6743\u9650\u7ba1\u7406\u57fa\u7840\uff0c\u4e0a\u4f20\u3001\u4e0b\u8f7d\u7b49\u64cd\u4f5c\u7684\u6388\u6743\u51ed\u8bc1\uff0c\u901a\u8fc7\u5bf9\u5e94\u7684\u7a7a\u95f4\u4e0e Access Key \u548c Secret Key \u751f\u6210\u3002\u5176\u4e2d\uff0c\u4e0a\u4f20\u64cd\u4f5c\u7684\u4e0a\u4f20\u51ed\u8bc1 UploadToken\uff0c\u5373\u662f\u878d\u5408\u4e91\u5b58\u50a8\u914d\u7f6e\u4e2d\u9700\u8981\u7684\u540c\u6b65\u51ed\u8bc1\u3002 ** \u751f\u6210\u6b65\u9aa4 ** 1\uff09\u6784\u9020\u4e0a\u4f20\u7b56\u7565\uff1b 2\uff09\u5c06\u4e0a\u4f20\u7b56\u7565\u5e8f\u5217\u5316\u6210\u4e3a JSON \u683c\u5f0f\uff1b 3\uff09\u5bf9 JSON \u7f16\u7801\u7684\u4e0a\u4f20\u7b56\u7565\u8fdb\u884c URL \u5b89\u5168\u7684 Base64 \u7f16\u7801\uff0c\u5f97\u5230\u5f85\u7b7e\u540d\u5b57\u7b26\u4e32 encodedPutPolicy\uff1b 4\uff09\u4f7f\u7528SecretKey\u5bf9\u4e0a\u4e00\u6b65\u751f\u6210\u7684\u5f85\u7b7e\u540d\u5b57\u7b26\u4e32\u8ba1\u7b97 HMAC-SHA1 \u7b7e\u540d\uff1b 5\uff09\u5bf9\u7b7e\u540d\u8fdb\u884c URL \u5b89\u5168\u7684 Base64 \u7f16\u7801\uff0c\u5f97\u5230\u503c\uff1aencodedSign\uff1b 6\uff09\u5c06 AccessKey\u3001encodedSign \u548c encodedPutPolicy \u7528\u82f1\u6587\u7b26\u53f7 : \u8fde\u63a5\u8d77\u6765\uff0c\u5f97\u5230 UploadToken\u3002 \u8be6\u60c5\u8bf7\u53c2\u8003 \u4e03\u725b\u4e0a\u4f20\u51ed\u8bc1\u751f\u6210\u6307\u5357 \u3002 ** \u6ce8\u610f\u4e8b\u9879 ** 1) \u5728\u6784\u9020\u4e0a\u4f20\u7b56\u7565\u65f6\uff0c\u6388\u6743\u7684\u751f\u6548\u65f6\u95f4\u9700\u8981\u5c3d\u53ef\u80fd\u7684\u957f\uff0c\u5426\u5219\u6388\u6743\u65f6\u95f4\u622a\u6b62\uff0c\u6587\u4ef6\u5c06\u4e0d\u80fd\u591f\u8fdb\u884c\u540c\u6b65\u3002 2\uff09\u6307\u5b9a\u4e0a\u4f20\u7684\u76ee\u6807\u8d44\u6e90\u7a7a\u95f4\uff08Bucket\uff09\u548c\u8d44\u6e90\u952e\u540d\uff08Key\uff09\uff0c\u9700\u8981\u548c\u878d\u5408\u4e91\u5b58\u50a8\u914d\u7f6e\u4e2d\u6307\u5b9a\u7684\u7a7a\u95f4\u540d\u4e00\u81f4\u3002 \u5e38\u89c1\u95ee\u9898 \u00b6 ** \u4ec0\u4e48\u662f\u878d\u5408\u4e91\u5b58\u50a8\uff1f ** \u878d\u5408\u4e91\u5b58\u50a8\u662f\u53c8\u62cd\u4e91\u7ed3\u5408\u81ea\u6709\u4e91\u5b58\u50a8\u670d\u52a1\uff0c\u540c\u65f6\u878d\u5408\u7b2c\u4e09\u65b9\u4e91\u5b58\u50a8\u670d\u52a1\uff0c\u63a8\u51fa\u7684\u591a\u6e90\u5b58\u50a8\u65b9\u6848\u3002 ** \u878d\u5408\u4e91\u5b58\u50a8\u65b9\u6848\u53ea\u80fd\u5bf9\u589e\u91cf\u6587\u4ef6\u8fdb\u884c\u540c\u6b65\uff0c\u5b58\u91cf\u6587\u4ef6\u540c\u6b65\u53ef\u4ee5\u652f\u6301\u5417\uff1f ** \u76ee\u524d\u4ec5\u652f\u6301\u589e\u91cf\u6587\u4ef6\u540c\u6b65\uff0c\u5b58\u91cf\u6587\u4ef6\u4e0d\u652f\u6301\u3002 ** \u662f\u5426\u652f\u6301\u5bf9\u589e\u91cf\u6587\u4ef6\u5220\u9664\u7684\u540c\u6b65\uff1f ** \u4e0d\u652f\u6301\u3002 ** \u878d\u5408\u4e91\u5b58\u50a8\u65b9\u6848\u6536\u8d39\u5417\uff1f ** \u5728\u516c\u6d4b\u9636\u6bb5\u8be5\u65b9\u6848\u4e0d\u6536\u53d6\u4efb\u4f55\u6d41\u91cf\u548c\u8d44\u6e90\u6d88\u8017\u8d39\u7528\uff0c\u5b8c\u5168\u514d\u8d39\u5f00\u653e\u7ed9\u7528\u6237\u4f7f\u7528\u3002 ** \u878d\u5408\u4e91\u5b58\u50a8\u65b9\u6848\u4e2d\u540c\u6b65\u51ed\u8bc1\u6709\u4ec0\u4e48\u4f5c\u7528\uff1f ** \u4e3b\u8981\u662f\u5bf9\u589e\u91cf\u6587\u4ef6\u540c\u6b65\u4e0a\u4f20\u8fdb\u884c\u6388\u6743\u7684\uff0c\u5404\u5b58\u50a8\u5382\u5546\u4f1a\u7528\u6765\u9a8c\u8bc1\u4e0a\u4f20\u8bf7\u6c42\u5408\u6cd5\u6027\u7684\u673a\u5236\uff0c\u6b64\u5904\u6388\u6743\u5176\u5b9e\u5c31\u662f\u901a\u8fc7 \u300c\u540c\u6b65\u51ed\u8bc1\u300d \u6765\u5b9e\u73b0\u3002 ** \u4f7f\u7528\u878d\u5408\u4e91\u5b58\u50a8\u65b9\u6848\u540e\uff0c\u662f\u5426\u652f\u6301\u4f7f\u7528\u7b2c\u4e09\u65b9\u4e91\u5b58\u50a8\u5382\u5546\u7684\u4e91\u5904\u7406\u670d\u52a1\uff1f ** \u4ec5\u652f\u6301\u878d\u5408\u4e03\u725b\u4e91\u56fe\u7247\u5904\u7406\u670d\u52a1\uff0c\u5982\u6709\u9700\u8981\uff0c\u8bf7\u8054\u7cfb \u552e\u540e \u6216\u60a8\u7684\u5546\u52a1\u7ecf\u7406\u3002 \u5982\u6709\u7591\u95ee\u8bf7 \u8054\u7cfb\u6211\u4eec","title":"\u878d\u5408\u4e91\u5b58\u50a8"},{"location":"api/fusion_storage/#_1","text":"\u5f53\u53c8\u62cd\u4e91\u5b58\u50a8\u6b63\u5e38\u65f6\uff0c\u7ec8\u7aef\u670d\u52a1\u4e0a\u4f20\u6587\u4ef6\u5230\u53c8\u62cd\u4e91\u5b58\u50a8\uff0c\u53c8\u62cd\u4e91\u5b58\u50a8\u81ea\u52a8\u540c\u6b65\u6587\u4ef6\u5230\u7b2c\u4e09\u65b9\u5b58\u50a8\u5382\u5546\u3002\u7528\u6237\u8bbf\u95ee\u6587\u4ef6\u65f6\uff0c\u901a\u8fc7\u53c8\u62cd\u4e91 CDN \u8bbf\u95ee\u53c8\u62cd\u4e91\u5b58\u50a8\u4e0a\u7684\u6587\u4ef6\u3002 \u5f53\u53c8\u62cd\u4e91\u5b58\u50a8\u51fa\u73b0\u53d8\u52a8\uff08\u5f02\u5e38\uff09\u65f6\uff0cCDN \u611f\u77e5\u5230\u4e91\u5b58\u50a8\u53d8\u52a8\uff0c\u53bb\u7b2c\u4e09\u65b9\u5b58\u50a8\u5382\u5546\u83b7\u53d6\u6587\u4ef6\uff0c\u5206\u53d1\u7ed9\u7528\u6237\u3002\u540c\u65f6\uff0c\u7ec8\u7aef\u670d\u52a1\u7684\u6587\u4ef6\u9700\u8981\u4e0a\u4f20\u5230\u7b2c\u4e09\u65b9\u5b58\u50a8\u5382\u5546\u3002\u5f85\u53c8\u62cd\u4e91\u5b58\u50a8\u6062\u590d\u540e\uff0c\u81ea\u52a8\u540c\u6b65\u8be5\u671f\u95f4\u4e0a\u4f20\u5230\u7b2c\u4e09\u65b9\u5b58\u50a8\u5382\u5546\u7684\u6587\u4ef6\u5230\u53c8\u62cd\u4e91\u5b58\u50a8\u3002 \u4f7f\u7528\u878d\u5408\u4e91\u5b58\u50a8\u9700\u8981\u505a\u4e24\u65b9\u9762\u4e8b\u60c5\uff1a \u5728\u53c8\u62cd\u4e91\u63a7\u5236\u53f0\u914d\u7f6e\u670d\u52a1\u878d\u5408\u7684\u7b2c\u4e09\u65b9\u5b58\u50a8\u5382\u5546\uff0c\u89c1 \u529f\u80fd\u914d\u7f6e \uff1b \u4e0a\u4f20\u652f\u6301\u7b2c\u4e09\u65b9\u5b58\u50a8\u5382\u5546\uff0c\u89c1 SDK \u3002","title":"\u57fa\u7840\u67b6\u6784"},{"location":"api/fusion_storage/#_2","text":"\u60a8\u5728\u4f7f\u7528\u63a7\u5236\u53f0\u8fdb\u884c\u529f\u80fd\u914d\u7f6e\u4e4b\u524d\uff0c\u8bf7\u786e\u4fdd\u60a8\u5df2\u7ecf\u6ce8\u518c\u53c8\u62cd\u4e91\u8d26\u53f7\u5e76\u5b8c\u6210\u5b9e\u540d\u9a8c\u8bc1\uff0c\u8bf7\u786e\u4fdd\u60a8\u5df2\u7ecf\u521b\u5efa \u4e91\u5b58\u50a8\u670d\u52a1 \u3002","title":"\u529f\u80fd\u914d\u7f6e"},{"location":"api/fusion_storage/#_3","text":"1\uff09\u300c\u5de5\u5177\u7bb1\u300d > \u300c\u878d\u5408\u4e91\u5b58\u50a8\u300d\u3002 2\uff09\u300c\u670d\u52a1\u300d \u5217\u8868 > \u300c\u878d\u5408\u4e91\u300d\u3002\u7279\u522b\u5730\uff0c\u53ea\u6709\u6e90\u7ad9\u662f \u300c\u53c8\u62cd\u4e91\u300d\u7684\u670d\u52a1\uff0c\u624d\u6709\u300c\u878d\u5408\u4e91\u300d \u8fd9\u4e2a\u5165\u53e3\u3002","title":"\u914d\u7f6e\u5165\u53e3"},{"location":"api/fusion_storage/#_4","text":"\u8fdb\u5165\u914d\u7f6e\u5217\u8868\u9875\u9762\u540e\uff0c\u70b9\u51fb\u53f3\u4e0a\u89d2\u7684 \u300c\u6dfb\u52a0\u670d\u52a1\u300d\u3002","title":"\u6dfb\u52a0\u670d\u52a1"},{"location":"api/fusion_storage/#_5","text":"1\uff09\u9009\u62e9\u9700\u8981\u878d\u5408\u7684\u670d\u52a1 \u901a\u8fc7\u5de6\u4fa7\u7684\u9009\u9879\uff0c\u9009\u62e9\u60a8\u9700\u8981\u914d\u7f6e\u878d\u5408\u4e91\u5b58\u50a8\u7684\u53c8\u62cd\u4e91\u670d\u52a1\uff0c\u652f\u6301\u901a\u8fc7\u5173\u952e\u5b57\u8fdb\u884c\u641c\u7d22\u7b5b\u9009\uff0c\u4ee5\u4fbf\u5feb\u901f\u627e\u5230\u60a8\u8981\u914d\u7f6e\u7684\u670d\u52a1\u3002 2\uff09\u9009\u62e9\u7b2c\u4e09\u65b9\u5b58\u50a8\u5382\u5546 \u76ee\u524d\u4ec5\u652f\u6301\u963f\u91cc\u4e91 OSS \u548c\u4e03\u725b\u4e91\u5b58\u50a8\uff0c\u4e14\u5355\u4e2a\u670d\u52a1\u53ea\u80fd\u9009\u62e9\u4e00\u5bb6\u7b2c\u4e09\u65b9\u5b58\u50a8\u5382\u5546\u3002 3\uff09\u521b\u5efa\u7a7a\u95f4\u5e76\u8f93\u5165 \u5728\u7b2c\u4e09\u65b9\u5b58\u50a8\u5382\u5546\u7684\u7ba1\u7406\u4e2d\u5fc3\u521b\u5efa\u4e00\u4e2a\u65b0\u7684\u5177\u5907 \u516c\u5171\u8bfb\u6743\u9650 \u7684\u7a7a\u95f4\u7528\u4e8e\u53c8\u62cd\u4e91\u670d\u52a1\u589e\u91cf\u6587\u4ef6\u540c\u6b65\uff0c\u4e0d\u540c\u5382\u5546\u9700\u8981\u63d0\u4f9b\u7684\u914d\u7f6e\u9879\u4e0d\u540c\u3002 \u963f\u91cc\u4e91 OSS \u9700\u8981\u63d0\u4f9b BucketName \u3001\u6240\u5c5e\u5730\u533a\u3001\u540c\u6b65\u51ed\u8bc1\uff08AccessKeyId \u3001AccessKeySecret\uff09\u3002 \u4e03\u725b\u4e91\u5b58\u50a8\u9700\u8981\u63d0\u4f9b\u7a7a\u95f4\u540d\u79f0\u3001\u540c\u6b65\u51ed\u8bc1\uff08UploadToken\uff09\u3002 \u7279\u522b\u5730\uff0c\u4e0d\u8981\u4f7f\u7528\u4e00\u4e2a\u7b2c\u4e09\u65b9\u5b58\u50a8\u5382\u5546\u7a7a\u95f4\u914d\u7f6e\u53c8\u62cd\u4e91\u7684\u591a\u4e2a\u670d\u52a1\uff0c\u907f\u514d\u6587\u4ef6\u540c\u540d\u8986\u76d6\u3002\u540c\u6b65\u51ed\u8bc1\u83b7\u53d6\uff0c\u89c1 \u540c\u6b65\u51ed\u8bc1\u751f\u6210\u6307\u5357 \u3002 4\uff09\u542f\u7528\u7b2c\u4e09\u65b9\u5b58\u50a8\u6e90 \u6839\u636e\u9700\u8981\uff0c\u9009\u62e9\u662f\u5426\u542f\u7528\u7b2c\u4e09\u65b9\u5b58\u50a8\u6e90\u3002\u5982\u679c\u5f00\u542f\uff0c\u9700\u8981\u8f93\u5165\u7b2c\u4e09\u65b9\u5382\u5546\u914d\u7f6e\u7684\u7a7a\u95f4\u5bf9\u5e94\u56de\u6e90\u5730\u5740\u3002 \u963f\u91cc\u4e91 OSS \u662f\u7a7a\u95f4\u5bf9\u5e94\u7684\u5916\u7f51\u57df\u540d\u3002 \u4e03\u725b\u4e91\u5b58\u50a8\u662f\u7a7a\u95f4\u5bf9\u5e94\u7684\u5916\u94fe\u57df\u540d\u3002\u9700\u5411\u4e03\u725b\u7533\u8bf7\u4e0d\u5e26\u52a0\u901f\u7684\u5916\u94fe\u57df\u540d\uff0c\u5426\u5219\u53ef\u80fd\u4f1a\u5f15\u8d77 CDN \u670d\u52a1\u5728\u591a\u5bb6 CDN \u5382\u5546\u8fdb\u884c\u8c03\u5ea6\uff0c\u6700\u7ec8\u5f71\u54cd\u4f53\u9a8c\u3002 5\uff09\u9a8c\u8bc1\u914d\u7f6e \u70b9\u51fb\u63d0\u4ea4\uff0c\u4f1a\u9a8c\u8bc1\u60a8\u7684\u914d\u7f6e\u662f\u5426\u6709\u6548\u3002\u914d\u7f6e\u9a8c\u8bc1\u65e0\u8bef\uff0c\u63d0\u793a\uff1a\u9a8c\u8bc1\u6210\u529f\uff0c\u670d\u52a1\u914d\u7f6e\u6210\u529f\uff01","title":"\u914d\u7f6e"},{"location":"api/fusion_storage/#_6","text":"\u914d\u7f6e\u6210\u529f\u540e\uff0c\u4f1a\u663e\u793a\u5728\u914d\u7f6e\u5217\u8868\u4e2d\u3002","title":"\u914d\u7f6e\u5217\u8868"},{"location":"api/fusion_storage/#_7","text":"1) \u65e5\u5fd7 \u60a8\u53ef\u4ee5\u901a\u8fc7\u8be5\u529f\u80fd\u67e5\u770b\u589e\u91cf\u540c\u6b65\u7684\u65e5\u671f\u548c\u540c\u6b65\u8fdb\u5ea6\uff0c\u5e76\u53ef\u4ee5\u70b9\u51fb \u300c\u4e0b\u8f7d\u300d\uff0c\u628a\u65e5\u5fd7\u4fdd\u5b58\u5230\u672c\u5730\u3002 2\uff09\u7981\u7528/\u542f\u7528 \u60a8\u53ef\u4ee5\u901a\u8fc7\u8be5\u529f\u80fd\u968f\u65f6\u5bf9\u60a8\u7684\u914d\u7f6e\u8fdb\u884c\u7981\u7528\u548c\u542f\u7528\u3002\u7981\u7528\u540e\u5c06\u4f1a\u505c\u6b62\u5411\u7b2c\u4e09\u65b9\u5b58\u50a8\u5382\u5546\u8fdb\u884c\u589e\u91cf\u540c\u6b65\uff0c\u7b2c\u4e09\u65b9\u56de\u6e90\u4e5f\u5c06\u7981\u7528\u3002 3\uff09\u4fee\u6539 \u60a8\u53ef\u4ee5\u5bf9\u914d\u7f6e\u8fdb\u884c\u4fee\u6539\uff0c\u66f4\u6362\u7b2c\u4e09\u65b9\u5382\u5546\u6216\u7a7a\u95f4\u3002\u66f4\u6362\u7b2c\u4e09\u65b9\u5382\u5546\u5c06\u4f1a\u6309\u7167\u5f53\u524d\u540c\u6b65\u65f6\u95f4\u5f00\u59cb\u91cd\u65b0\u8fdb\u884c\u589e\u91cf\u540c\u6b65\u3002 4\uff09\u5220\u9664 \u60a8\u53ef\u4ee5\u5bf9\u914d\u7f6e\u8fdb\u884c\u5220\u9664\u64cd\u4f5c\u3002\u5220\u9664\u540e\u589e\u91cf\u540c\u6b65\u5c06\u4f1a\u505c\u6b62\uff0c\u7b2c\u4e09\u65b9\u56de\u6e90\u4e5f\u5c06\u7981\u7528\u3002","title":"\u5176\u4ed6\u64cd\u4f5c"},{"location":"api/fusion_storage/#sdk","text":"\u5f53\u524d\uff0c\u878d\u5408\u4e91\u5b58\u50a8\u4e0a\u4f20 SDK \u4ec5\u5305\u62ec iOS \u548c Android \u3002\u5176\u4ed6\u8bed\u8a00\u7684\u5b9e\u73b0\uff0c\u9700\u8981\u7528\u6237\u81ea\u884c\u5904\u7406\u3002","title":"SDK"},{"location":"api/fusion_storage/#_8","text":"\u540c\u6b65\u51ed\u8bc1\u7684\u751f\u6210\u5404\u5b58\u50a8\u5382\u5546\u7684\u65b9\u5f0f\u548c\u65b9\u6cd5\u5404\u4e0d\u76f8\u540c\u3002\u8fd9\u91cc\u63a8\u8350\uff1a\u963f\u91cc\u4e91 OSS \u53ef\u901a\u8fc7 RAM \u7684\u65b9\u5f0f\u751f\u6210\uff0c\u4e03\u725b\u53ef\u624b\u52a8\u751f\u6210\u3002","title":"\u540c\u6b65\u51ed\u8bc1\u751f\u6210\u6307\u5357"},{"location":"api/fusion_storage/#oss","text":"\u963f\u91cc\u4e91\u63d0\u4f9b\u4e86 RAM \u548c STS \u4e24\u79cd\u6743\u9650\u7ba1\u7406\u7cfb\u7edf\u3002RAM \u4e3b\u8981\u7684\u4f5c\u7528\u662f\u63a7\u5236\u8d26\u53f7\u7cfb\u7edf\u7684\u6743\u9650\uff0c\u901a\u8fc7\u4f7f\u7528 RAM \u53ef\u4ee5\u5728\u4e3b\u8d26\u53f7\u7684\u6743\u9650\u8303\u56f4\u5185\u521b\u5efa\u5b50\u7528\u6237\uff0c\u7ed9\u4e0d\u540c\u7684\u5b50\u7528\u6237\u5206\u914d\u4e0d\u540c\u7684\u6743\u9650\u4ece\u800c\u8fbe\u5230\u6388\u6743\u7ba1\u7406\u7684\u76ee\u7684\u3002STS \u662f\u4e00\u4e2a\u5b89\u5168\u51ed\u8bc1\uff08Token\uff09\u7684\u7ba1\u7406\u7cfb\u7edf\uff0c\u7528\u6765\u6388\u4e88\u4e34\u65f6\u7684\u8bbf\u95ee\u6743\u9650\uff0c\u5b8c\u6210\u5bf9\u4e8e\u4e34\u65f6\u7528\u6237\u7684\u8bbf\u95ee\u6388\u6743\u3002\u7531\u4e8e STS \u65b9\u5f0f\u5177\u6709\u4e34\u65f6\u6027\uff0c\u4e0d\u9002\u7528\u4e8e\u672c\u65b9\u6848\uff0c\u6545\u63a8\u8350\u4f7f\u7528 RAM \u7684\u65b9\u5f0f\u6765\u751f\u6210\u540c\u6b65\u51ed\u8bc1\u3002 ** \u751f\u6210\u6b65\u9aa4 ** 1\uff09\u901a\u8fc7\u963f\u91cc\u4e91 RAM \u7ba1\u7406\u5e73\u53f0\u521b\u5efa\u7528\u6237\uff1b 2\uff09\u81ea\u52a8\u751f\u6210 AccessKey\uff0c\u4fdd\u5b58 AK \u4fe1\u606f\uff1b 3\uff09\u6dfb\u52a0\u6388\u6743\u7b56\u7565\uff08\u53ef\u6307\u5b9a\u5355\u4e2a OSS \u7a7a\u95f4\u6743\u9650\uff09\uff1b 4\uff09\u6388\u6743\u7b56\u7565\u914d\u7f6e\u597d\u4e4b\u540e\uff0c\u5728 AK \u4fe1\u606f\u91cc\u9762\u4fbf\u53ef\u4ee5\u627e\u5230 AccessKeyID \u548c AccessKeySecret \u4fe1\u606f\u3002 \u8be6\u60c5\u8bf7\u53c2\u8003 \u963f\u91cc\u4e91 OSS RAM \u4f7f\u7528\u6307\u5357 \u3002 ** \u6ce8\u610f\u4e8b\u9879 ** 1\uff09\u9700\u8981\u6388\u6743\u5bf9\u6307\u5b9a\u7684\u7a7a\u95f4\u8d44\u6e90\u5177\u6709\u516c\u5171\u8bfb\u6743\u9650\uff1b 2\uff09\u5728\u9650\u5236\u6761\u4ef6\u65b9\u9762\uff0c\u6388\u6743\u7684\u65f6\u95f4\u8981\u5c3d\u53ef\u80fd\u7684\u957f\u3002\u5426\u5219\u6388\u6743\u65f6\u95f4\u5931\u6548\u4e4b\u540e\uff0c\u53c8\u62cd\u4e91\u5b58\u50a8\u65e0\u6cd5\u8fdb\u884c\u4e0a\u4f20\u540c\u6b65\u64cd\u4f5c\u3002","title":"\u963f\u91cc\u4e91 OSS"},{"location":"api/fusion_storage/#_9","text":"\u4e03\u725b\u4e91\u5b58\u50a8\u63d0\u4f9b\u4e00\u5bf9\u4e3b\u548c\u4ece Access Key \u548c Secret Key \u4f5c\u4e3a\u6743\u9650\u7ba1\u7406\u57fa\u7840\uff0c\u4e0a\u4f20\u3001\u4e0b\u8f7d\u7b49\u64cd\u4f5c\u7684\u6388\u6743\u51ed\u8bc1\uff0c\u901a\u8fc7\u5bf9\u5e94\u7684\u7a7a\u95f4\u4e0e Access Key \u548c Secret Key \u751f\u6210\u3002\u5176\u4e2d\uff0c\u4e0a\u4f20\u64cd\u4f5c\u7684\u4e0a\u4f20\u51ed\u8bc1 UploadToken\uff0c\u5373\u662f\u878d\u5408\u4e91\u5b58\u50a8\u914d\u7f6e\u4e2d\u9700\u8981\u7684\u540c\u6b65\u51ed\u8bc1\u3002 ** \u751f\u6210\u6b65\u9aa4 ** 1\uff09\u6784\u9020\u4e0a\u4f20\u7b56\u7565\uff1b 2\uff09\u5c06\u4e0a\u4f20\u7b56\u7565\u5e8f\u5217\u5316\u6210\u4e3a JSON \u683c\u5f0f\uff1b 3\uff09\u5bf9 JSON \u7f16\u7801\u7684\u4e0a\u4f20\u7b56\u7565\u8fdb\u884c URL \u5b89\u5168\u7684 Base64 \u7f16\u7801\uff0c\u5f97\u5230\u5f85\u7b7e\u540d\u5b57\u7b26\u4e32 encodedPutPolicy\uff1b 4\uff09\u4f7f\u7528SecretKey\u5bf9\u4e0a\u4e00\u6b65\u751f\u6210\u7684\u5f85\u7b7e\u540d\u5b57\u7b26\u4e32\u8ba1\u7b97 HMAC-SHA1 \u7b7e\u540d\uff1b 5\uff09\u5bf9\u7b7e\u540d\u8fdb\u884c URL \u5b89\u5168\u7684 Base64 \u7f16\u7801\uff0c\u5f97\u5230\u503c\uff1aencodedSign\uff1b 6\uff09\u5c06 AccessKey\u3001encodedSign \u548c encodedPutPolicy \u7528\u82f1\u6587\u7b26\u53f7 : \u8fde\u63a5\u8d77\u6765\uff0c\u5f97\u5230 UploadToken\u3002 \u8be6\u60c5\u8bf7\u53c2\u8003 \u4e03\u725b\u4e0a\u4f20\u51ed\u8bc1\u751f\u6210\u6307\u5357 \u3002 ** \u6ce8\u610f\u4e8b\u9879 ** 1) \u5728\u6784\u9020\u4e0a\u4f20\u7b56\u7565\u65f6\uff0c\u6388\u6743\u7684\u751f\u6548\u65f6\u95f4\u9700\u8981\u5c3d\u53ef\u80fd\u7684\u957f\uff0c\u5426\u5219\u6388\u6743\u65f6\u95f4\u622a\u6b62\uff0c\u6587\u4ef6\u5c06\u4e0d\u80fd\u591f\u8fdb\u884c\u540c\u6b65\u3002 2\uff09\u6307\u5b9a\u4e0a\u4f20\u7684\u76ee\u6807\u8d44\u6e90\u7a7a\u95f4\uff08Bucket\uff09\u548c\u8d44\u6e90\u952e\u540d\uff08Key\uff09\uff0c\u9700\u8981\u548c\u878d\u5408\u4e91\u5b58\u50a8\u914d\u7f6e\u4e2d\u6307\u5b9a\u7684\u7a7a\u95f4\u540d\u4e00\u81f4\u3002","title":"\u4e03\u725b\u4e91\u5b58\u50a8"},{"location":"api/fusion_storage/#_10","text":"** \u4ec0\u4e48\u662f\u878d\u5408\u4e91\u5b58\u50a8\uff1f ** \u878d\u5408\u4e91\u5b58\u50a8\u662f\u53c8\u62cd\u4e91\u7ed3\u5408\u81ea\u6709\u4e91\u5b58\u50a8\u670d\u52a1\uff0c\u540c\u65f6\u878d\u5408\u7b2c\u4e09\u65b9\u4e91\u5b58\u50a8\u670d\u52a1\uff0c\u63a8\u51fa\u7684\u591a\u6e90\u5b58\u50a8\u65b9\u6848\u3002 ** \u878d\u5408\u4e91\u5b58\u50a8\u65b9\u6848\u53ea\u80fd\u5bf9\u589e\u91cf\u6587\u4ef6\u8fdb\u884c\u540c\u6b65\uff0c\u5b58\u91cf\u6587\u4ef6\u540c\u6b65\u53ef\u4ee5\u652f\u6301\u5417\uff1f ** \u76ee\u524d\u4ec5\u652f\u6301\u589e\u91cf\u6587\u4ef6\u540c\u6b65\uff0c\u5b58\u91cf\u6587\u4ef6\u4e0d\u652f\u6301\u3002 ** \u662f\u5426\u652f\u6301\u5bf9\u589e\u91cf\u6587\u4ef6\u5220\u9664\u7684\u540c\u6b65\uff1f ** \u4e0d\u652f\u6301\u3002 ** \u878d\u5408\u4e91\u5b58\u50a8\u65b9\u6848\u6536\u8d39\u5417\uff1f ** \u5728\u516c\u6d4b\u9636\u6bb5\u8be5\u65b9\u6848\u4e0d\u6536\u53d6\u4efb\u4f55\u6d41\u91cf\u548c\u8d44\u6e90\u6d88\u8017\u8d39\u7528\uff0c\u5b8c\u5168\u514d\u8d39\u5f00\u653e\u7ed9\u7528\u6237\u4f7f\u7528\u3002 ** \u878d\u5408\u4e91\u5b58\u50a8\u65b9\u6848\u4e2d\u540c\u6b65\u51ed\u8bc1\u6709\u4ec0\u4e48\u4f5c\u7528\uff1f ** \u4e3b\u8981\u662f\u5bf9\u589e\u91cf\u6587\u4ef6\u540c\u6b65\u4e0a\u4f20\u8fdb\u884c\u6388\u6743\u7684\uff0c\u5404\u5b58\u50a8\u5382\u5546\u4f1a\u7528\u6765\u9a8c\u8bc1\u4e0a\u4f20\u8bf7\u6c42\u5408\u6cd5\u6027\u7684\u673a\u5236\uff0c\u6b64\u5904\u6388\u6743\u5176\u5b9e\u5c31\u662f\u901a\u8fc7 \u300c\u540c\u6b65\u51ed\u8bc1\u300d \u6765\u5b9e\u73b0\u3002 ** \u4f7f\u7528\u878d\u5408\u4e91\u5b58\u50a8\u65b9\u6848\u540e\uff0c\u662f\u5426\u652f\u6301\u4f7f\u7528\u7b2c\u4e09\u65b9\u4e91\u5b58\u50a8\u5382\u5546\u7684\u4e91\u5904\u7406\u670d\u52a1\uff1f ** \u4ec5\u652f\u6301\u878d\u5408\u4e03\u725b\u4e91\u56fe\u7247\u5904\u7406\u670d\u52a1\uff0c\u5982\u6709\u9700\u8981\uff0c\u8bf7\u8054\u7cfb \u552e\u540e \u6216\u60a8\u7684\u5546\u52a1\u7ecf\u7406\u3002 \u5982\u6709\u7591\u95ee\u8bf7 \u8054\u7cfb\u6211\u4eec","title":"\u5e38\u89c1\u95ee\u9898"},{"location":"api/multipart_upload/","text":"\u5728\u4e0a\u4f20\u5927\u6587\u4ef6\u7684\u65f6\u5019\uff0c\u9762\u5bf9\u6709\u53ef\u80fd\u56e0\u4e3a\u7f51\u7edc\u8d28\u91cf\u7b49\u5176\u4ed6\u539f\u56e0\u800c\u9020\u6210\u7684\u4e0a\u4f20\u5931\u8d25\uff0c\u4f7f\u7528\u5206\u5757\u4e0a\u4f20\u548c\u65ad\u70b9\u7eed\u4f20\u673a\u5236\u5c31\u663e\u5f97\u975e\u5e38\u6709\u5fc5\u8981\u3002 \u4e91\u5b58\u50a8\u5b8c\u5584\u4e86\u65ad\u70b9\u7eed\u4f20\u673a\u5236\uff0c\u65b0\u7684\u65ad\u70b9\u7eed\u4f20\u6bd4\u5206\u5feb\u4e0a\u4f20\u66f4\u5feb\u3001\u66f4\u7b80\u5355\uff0c\u56e0\u6b64\uff0c\u5206\u5757\u4e0a\u4f20\u4e0d\u518d\u66f4\u65b0\uff0c\u656c\u8bf7\u4f7f\u7528 \u65b0\u7684\u65ad\u70b9\u7eed\u4f20 \u3002 API \u57fa\u672c\u57df\u540d \u00b6 m0.api.upyun.com \u540d\u79f0\u6982\u5ff5 \u00b6 \u6587\u4ef6\u5206\u5757\uff1a\u76f4\u63a5\u5207\u5206\u4e8c\u8fdb\u5236\u6587\u4ef6\u6210\u5c0f\u5757\u3002\u5177\u4f53\u6587\u4ef6\u7684\u6bcf\u4e2a\u5206\u5757\u7684\u5927\u5c0f\u4ee5\u53ca\u5206\u5757\u6570\u76ee\uff0c\u53ef\u4ee5\u6839\u636e\u81ea\u5df1\u60c5\u51b5\u8c03\u6574\uff08eg. 10MB \u7684\u6587\u4ef6\uff0c\u53ef\u4ee5\u5b9a\u6bcf\u4e2a\u5206\u5757 1MB\uff0c\u5219\u5206\u5757\u6570\u76ee\u5373\u4e3a 10 \u5757\uff09 \u8bf7\u6c42\u53c2\u6570\uff08Request Params\uff09\uff1a \u5373\u662f\u6307\u5e38\u89c4\u7684\u8bf7\u6c42\u4e2d\u6240\u5e26\u53c2\u6570 \u53c2\u6570\u7ec4\uff08Meta Params\uff09\uff1a \u5305\u542b\u6587\u4ef6\u4e0a\u4f20\u5b58\u50a8\u53ca\u6821\u9a8c\u76f8\u5173\u7684\u5fc5\u8981\u4fe1\u606f\uff0c\u4e5f\u662f\u6bcf\u6b21\u8bf7\u6c42\u65f6\u5019\u8ba1\u7b97 policy \u548c signature \u6240\u9700\u7684\u53c2\u6570\u7ec4\u3002 signature\uff1a \u6821\u9a8c\u7b7e\u540d policy\uff1a \u5b58\u50a8/\u6821\u9a8c\u4fe1\u606f signature \u548c policy \u7b97\u6cd5 \u00b6 signature \u548c policy \u7b97\u6cd5\u4e0e\u8868\u5355 API \u76f8\u540c\uff0c\u8bf7\u53c2\u8003 \u8fd9\u91cc \u3002 \u6ce8\uff1a\u5728\u5206\u5757\u4e0a\u4f20\u6570\u636e\u548c\u5408\u5e76\u6587\u4ef6\u8bf7\u6c42\u4e2d\uff0c\u9700\u8981\u5c06\u6b64\u5904\u6240\u7528\u300e\u8868\u5355 API \u9a8c\u8bc1\u5bc6\u94a5\u300f\u66ff\u6362\u4e3a\u4e0a\u6b21\u8bf7\u6c42\u8fd4\u56de\u7684 token_secret \uff0c\u518d\u8fdb\u884c signature \u8ba1\u7b97 \u5047\u8bbe\u4e00\u4e2a\u8bf7\u6c42\u6240\u9700\u7684\u7684\u7b56\u7565\u53c2\u6570\u5982\u4e0b\u8868: \u952e \u503c path /demo.png expiration 1409200758 file_blocks 1 file_hash b1143cbc07c8e768d517fa5e73cb79ca file_size 653252 \u53e6\u8bbe\uff0c\u8be5\u7a7a\u95f4\u300e\u8868\u5355 API \u9a8c\u8bc1\u5bc6\u94a5\u300f\u4e3a\uff1a cAnyet74l9hdUag34h2dZu8z7gU= \u8ba1\u7b97 policy \u548c signature \u76f8\u5e94\u6b65\u9aa4\u6240\u5f97\u7ed3\u679c\u5982\u4e0b\uff1a \u7b2c\u4e00\u6b65\uff0c\u5c06\u53c2\u6570\u7ec4\u8f6c\u6362\u4e3a JSON \u5b57\u7b26\u4e32\u540e\uff1a {\"path\":\"/demo.png\",\"expiration\":1409200758,\"file_blocks\":1,\"file_size\":653252,\"file_hash\":\"b1143cbc07c8e768d517fa5e73cb79ca\"} \u7b2c\u4e8c\u6b65\uff0c\u5c06\u7b2c\u4e00\u6b65\u6240\u5f97\u5b57\u7b26\u4e32 base64 \u7f16\u7801\u540e\uff1a eyJwYXRoIjoiL2RlbW8ucG5nIiwiZXhwaXJhdGlvbiI6MTQwOTIwMDc1OCwiZmlsZV9ibG9ja3MiOjEsImZpbGVfc2l6ZSI6NjUzMjUyLCJmaWxlX2hhc2giOiJiMTE0M2NiYzA3YzhlNzY4ZDUxN2ZhNWU3M2NiNzljYSJ9 \u7b2c\u4e09\u6b65\uff0c\u7b2c\u4e8c\u6b65\u7ed3\u679c\u4e0e\u300e\u8868\u5355 API \u9a8c\u8bc1\u5bc6\u94a5\u300f\u7528 & \u62fc\u63a5\u540e\uff1a eyJwYXRoIjoiL2RlbW8ucG5nIiwiZXhwaXJhdGlvbiI6MTQwOTIwMDc1OCwiZmlsZV9ibG9ja3MiOjEsImZpbGVfc2l6ZSI6NjUzMjUyLCJmaWxlX2hhc2giOiJiMTE0M2NiYzA3YzhlNzY4ZDUxN2ZhNWU3M2NiNzljYSJ9&cAnyet74l9hdUag34h2dZu8z7gU= \u6ce8\uff1a\u5728\u5206\u5757\u4e0a\u4f20\u6570\u636e\u548c\u5408\u5e76\u6587\u4ef6\u8bf7\u6c42\u4e2d\uff0c\u9700\u8981\u5c06\u6b64\u5904\u6240\u7528\u300e\u8868\u5355 API \u9a8c\u8bc1\u5bc6\u94a5\u300f\u66ff\u6362\u4e3a\u4e0a\u6b21\u8bf7\u6c42\u8fd4\u56de\u7684 token_secret \uff0c\u518d\u8fdb\u884c\u7b2c\u56db\u6b65\u8ba1\u7b97 \u7b2c\u56db\u6b65\uff0c\u5c06\u7b2c\u4e09\u6b65\u6240\u5f97\u5b57\u7b26\u8ba1\u7b97 md5 \u540e\u5373\u5f97\u5230 signature\uff1a 98cf3f74698bfec04886eee446439ae3 \u4e0a\u4f20\u6b65\u9aa4 \u00b6 \u8868\u5355\u5206\u5757\u4e0a\u4f20\u7684\u6574\u4e2a\u6b65\u9aa4\u5206\u4e3a\uff1a \u521d\u59cb\u5316\u4e0a\u4f20 \u5206\u5757\u4e0a\u4f20\u6570\u636e \u6587\u4ef6\u5408\u5e76\u5b8c\u6210\u4e0a\u4f20 \u521d\u59cb\u5316\u4e0a\u4f20 \u00b6 POST /<bucket-name>/ \u8bf7\u6c42\u7c7b\u578b \u00b6 Content-Type: application/x-www-form-urlencoded \u8bf7\u6c42\u53c2\u6570 \u00b6 \u53c2\u6570 \u53c2\u6570\u7c7b\u578b \u5fc5\u9009 \u53c2\u6570\u8bf4\u660e policy string true \u6587\u4ef6\u5b58\u50a8/\u6821\u9a8c\u4fe1\u606f\uff0c\u89c1 \u7b97\u6cd5 signature string true \u6821\u9a8c\u7b7e\u540d\uff0c\u89c1 \u7b97\u6cd5 \u53c2\u6570\u7ec4 \u00b6 \u53c2\u6570 \u53c2\u6570\u8bf4\u660e path \u6587\u4ef6\u5b58\u50a8\u8def\u5f84 expiration \u6388\u6743\u6709\u6548\u671f\uff0cUnix UTC \u65f6\u95f4\u6233 file_blocks \u672c\u6b21\u6240\u4e0a\u4f20\u7684\u6587\u4ef6\u7684\u5206\u5757\u6570\u76ee file_hash \u6240\u4e0a\u4f20\u6587\u4ef6\u6574\u4e2a\u6587\u4ef6\u7684 md5 hash \u503c file_size \u6240\u4e0a\u4f20\u6587\u4ef6\u6574\u4e2a\u6587\u4ef6\u7684\u5927\u5c0f(\u5355\u4f4d Byte) \u6ce8\uff1a\u8bf7\u9009\u53d6\u9002\u5f53\u7684 file_blocks \u4ee5\u4fdd\u8bc1\u5206\u5757\u7684\u5927\u5c0f \u4e0d\u8d85\u8fc7 5M \uff0c\u5e76\u4e14\u9664\u6700\u540e\u4e00\u5757\u5916\u5176\u4f59\u5206\u5757 \u4e0d\u5c0f\u4e8e 100K \u3002 \u5176\u4ed6\u53ef\u9009\u53c2\u6570\u5982\u4e0b\uff1a \u53c2\u6570 \u53ef\u9009\u6027 \u5907\u6ce8 allow-file-type \u5426 \u6587\u4ef6\u7c7b\u578b\u9650\u5236\uff0c\u5236\u5b9a\u5141\u8bb8\u4e0a\u4f20\u7684\u6587\u4ef6\u6269\u5c55\u540d content-length-range \u5426 \u6587\u4ef6\u5927\u5c0f\u9650\u5236\uff0c\u683c\u5f0f\uff1a min,max \uff0c\u5355\u4f4d\uff1a\u5b57\u8282\uff0c\u5982 102400,1024000 \uff0c\u5141\u8bb8\u4e0a\u4f20 100Kb\uff5e1Mb \u7684\u6587\u4ef6 content-md5 \u5426 \u6240\u4e0a\u4f20\u7684\u6587\u4ef6\u7684 MD5 \u6821\u9a8c\u503c\uff0c\u53c8\u62cd\u4e91\u6839\u636e\u6b64\u6765\u6821\u9a8c\u6587\u4ef6\u4e0a\u4f20\u662f\u5426\u6b63\u786e content-secret \u5426 \u539f\u56fe\u8bbf\u95ee\u5bc6\u94a5 [\u8868\u5355 API \u6ce8 2] content-type \u5426 \u53c8\u62cd\u4e91\u9ed8\u8ba4\u6839\u636e\u6269\u5c55\u540d\u5224\u65ad\uff0c\u624b\u52a8\u6307\u5b9a\u53ef\u63d0\u9ad8\u7cbe\u786e\u6027 image-width-range \u5426 \u56fe\u7247\u5bbd\u5ea6\u9650\u5236\uff0c\u683c\u5f0f\uff1a min,max \uff0c\u5355\u4f4d\uff1a\u50cf\u7d20\uff0c\u5982 0,1024 \uff0c\u5141\u8bb8\u4e0a\u4f20\u5bbd\u5ea6\u4e3a 0\uff5e1024px \u4e4b\u95f4 image-height-range \u5426 \u56fe\u7247\u9ad8\u5ea6\u9650\u5236\uff0c\u683c\u5f0f\uff1a min,max \uff0c\u5355\u4f4d\uff1a\u50cf\u7d20\uff0c\u5982 0,1024 \uff0c\u5141\u8bb8\u4e0a\u4f20\u9ad8\u5ea6\u5728 0\uff5e1024px \u4e4b\u95f4 notify-url \u5426 \u5f02\u6b65\u901a\u77e5 URL\uff0c\u89c1 [\u8868\u5355 API \u901a\u77e5\u89c4\u5219] return-url \u5426 \u540c\u6b65\u901a\u77e5 URL\uff0c\u89c1 [\u8868\u5355 API \u901a\u77e5\u89c4\u5219] x-gmkerl-thumb \u5426 \u56fe\u7247\u5904\u7406\u53c2\u6570\uff0c\u89c1 \u4e0a\u4f20\u4f5c\u56fe x-gmkerl-type \u5426 get_meta \uff08\u83b7\u53d6\u56fe\u7247\u4fe1\u606f\uff09\u6216 get_theme_color \uff08\u4e3b\u9898\u8272\u63d0\u53d6\uff09 x-gmkerl-extract-color-count \u5426 \u4e3b\u9898\u8272\u63d0\u53d6\u989c\u8272\u6570\u91cf\uff0c\u9ed8\u8ba4 256 x-gmkerl-extract-format \u5426 \u4e3b\u9898\u8272\u63d0\u53d6\u683c\u5f0f\uff0c\u9ed8\u8ba4 hex ext-param \u5426 \u989d\u5916\u53c2\u6570\uff0cUTF-8 \u7f16\u7801\uff0c\u5e76\u5c0f\u4e8e 255 \u4e2a\u5b57\u7b26 [\u8868\u5355 API \u6ce8 5] apps \u5426 json \u683c\u5f0f\u7684\u5f02\u6b65\u5904\u7406\u4efb\u52a1\u5217\u8868\u3002\u89c1 \u5f02\u6b65\u5904\u7406\u4efb\u52a1 x-gmkerl-thumbnail DEPRECATED \u5426 \u7f29\u7565\u56fe\u7248\u672c\u540d\u79f0\uff0c\u4ec5\u652f\u6301\u56fe\u7247\u7c7b\u7a7a\u95f4\uff0c\u53ef\u642d\u914d\u5176\u4ed6 x-gmkerl-* \u53c2\u6570\u4f7f\u7528 [\u8868\u5355 API \u6ce8 3] x-gmkerl-type DEPRECATED \u5426 \u7f29\u7565\u7c7b\u578b [\u8868\u5355 API \u6ce8 4] x-gmkerl-value DEPRECATED \u5426 \u7f29\u7565\u7c7b\u578b\u5bf9\u5e94\u7684\u53c2\u6570\u503c [\u8868\u5355 API \u6ce8 4] x-gmkerl-quality DEPRECATED \u5426 \u9ed8\u8ba4 95 \u7f29\u7565\u56fe\u538b\u7f29\u8d28\u91cf x-gmkerl-unsharp DEPRECATED \u5426 \u9ed8\u8ba4\u9510\u5316\uff08true\uff09 \u662f\u5426\u8fdb\u884c\u9510\u5316\u5904\u7406 x-gmkerl-rotate DEPRECATED \u5426 \u56fe\u7247\u65cb\u8f6c\uff08\u987a\u65f6\u9488\uff09\uff0c\u53ef\u9009\uff1a auto\uff0c90\uff0c180\uff0c270 \u4e4b\u4e00 x-gmkerl-crop DEPRECATED \u5426 \u56fe\u7247\u88c1\u526a\uff0c\u683c\u5f0f\uff1a <w>x<h>a<x>a<y> \u3002 \u5176\u4e2d w, h \u5206\u522b\u8868\u793a\u88c1\u526a\u540e\u7684\u5bbd\u548c\u9ad8\uff0cx, y \u8868\u793a\u5de6\u4e0a\u89d2\u5750\u6807\u3002\u5982 100x100a0a0\u3002 x-gmkerl-exif-switch DEPRECATED \u5426 \u662f\u5426\u4fdd\u7559 EXIF \u4fe1\u606f\uff0c\u4ec5\u5728\u642d\u914d x-gmkerl-crop\uff0cx-gmkerl-type\uff0cx-gmkerl-thumbnail \u65f6\u6709\u6548\u3002 \u8fd4\u56de\u7ed3\u679c \u00b6 { save_token: '68640c7ab4120b4992907cabc6ea2c48', token_secret: \"89a3d8d8a26a8adb32a3651a63c0d5cc\", bucket_name: 'example', blocks: 5, status: [0,0,0,0,0], expired_at: 1401784219 } \u8fd4\u56de\u53c2\u6570\u8bf4\u660e \u53c2\u6570 \u8bf4\u660e save_token \u5206\u5757\u4e0a\u4f20\u7d22\u5f15 key\uff0c\u4e0b\u4e00\u6b65\u5206\u5757\u4e0a\u4f20\u6570\u636e\u65f6\u5fc5\u987b\u643a\u5e26\u672c\u53c2\u6570 token_secret \u7528\u4e8e\u4e4b\u540e\u8bf7\u6c42\u8ba1\u7b97 policy \u548c signature \u6240\u7528\uff0c\u4ee3\u66ff\u300e\u8868\u5355 API \u9a8c\u8bc1\u5bc6\u94a5\u300f bucket_name \u6587\u4ef6\u4fdd\u5b58\u7a7a\u95f4 blocks \u6587\u4ef6\u5206\u5757\u6570\u91cf status \u5206\u5757\u6587\u4ef6\u4e0a\u4f20\u72b6\u6001\uff0c 1 \u8868\u793a\u5df2\u5b8c\u6210\u4e0a\u4f20\uff0c 0 \u8868\u793a\u5206\u5757\u672a\u5b8c\u6210\u4e0a\u4f20\u3002\u6570\u7ec4\u7d22\u5f15\u8868\u793a\u5206\u5757\u5e8f\u53f7\uff0c \u4ece 0 \u5f00\u59cb \uff1b expired_at \u5f53\u524d\u5206\u5757\u4e0a\u4f20\u6570\u636e\u6709\u6548\u671f\uff0c\u8d85\u8fc7\u6709\u6548\u671f\u4e4b\u540e\u6570\u636e\u5c06\u4f1a\u88ab\u6e05\u7406 \u5206\u5757\u4e0a\u4f20\u6570\u636e \u00b6 POST /<bucket-name>/ \u8bf7\u6c42\u7c7b\u578b \u00b6 Content-Type: multipart/form-data \u8bf7\u6c42\u53c2\u6570 \u00b6 \u53c2\u6570 \u53c2\u6570\u7c7b\u578b \u5fc5\u9009 \u53c2\u6570\u8bf4\u660e policy String true \u6587\u4ef6\u5b58\u50a8/\u6821\u9a8c\u4fe1\u606f\uff0c\u89c1 \u7b97\u6cd5 signature String true \u6821\u9a8c\u7b7e\u540d\uff0c\u89c1 \u7b97\u6cd5 file Blob true \u4e0a\u4f20\u7684\u6587\u4ef6\u5206\u5757\u6570\u636e \u53c2\u6570\u7ec4 \u00b6 \u53c2\u6570 \u53c2\u6570\u8bf4\u660e save_token \u5373\u521d\u59cb\u5316\u4e0a\u4f20\u8bf7\u6c42\u8fd4\u56de\u7ed3\u679c\u4e2d\u7684 save_token expiration Unix UTC \u65f6\u95f4\u6233\uff0c\u6388\u6743\u6709\u6548\u671f\uff0c\u8d85\u8fc7\u8fd9\u4e2a\u65f6\u95f4\u4e4b\u540e\u6388\u6743\u5c06\u4f1a\u5931\u6548 block_index \u8be5\u5206\u5757\u5728\u5b8c\u6574\u6587\u4ef6\u4e2d\u7684\u5206\u5757\u7d22\u5f15 block_hash \u8be5\u5206\u5757\u6587\u4ef6\u7684 md5 \u503c \u8fd4\u56de\u7ed3\u679c \u00b6 \u4e0a\u4f20\u6210\u529f\u8fd4\u56de: { save_token: '68640c7ab4120b4992907cabc6ea2c48', token_secret: \"89a3d8d8a26a8adb32a3651a63c0d5cc\", bucket_name: 'example', blocks: 5, status: [1,1,1,1,0], expired_at: 1401784219 } \u8fd4\u56de\u53c2\u6570\u8bf4\u660e \u53c2\u6570 \u8bf4\u660e save_token \u5206\u5757\u4e0a\u4f20\u7d22\u5f15 key\uff0c\u4e0b\u4e00\u6b65\u5206\u5757\u4e0a\u4f20\u6570\u636e\u65f6\u5fc5\u987b\u643a\u5e26\u672c\u53c2\u6570 token_secret \u7528\u4e8e\u4e4b\u540e\u8bf7\u6c42\u8ba1\u7b97 policy \u548c signature \u6240\u7528\uff0c\u4ee3\u66ff\u300e\u8868\u5355 API \u9a8c\u8bc1\u5bc6\u94a5\u300f bucket_name \u6587\u4ef6\u4fdd\u5b58\u7a7a\u95f4 blocks \u6587\u4ef6\u5206\u5757\u6570\u91cf status \u5206\u5757\u6587\u4ef6\u4e0a\u4f20\u72b6\u6001\uff0c 1 \u8868\u793a\u5df2\u5b8c\u6210\u4e0a\u4f20\uff0c 0 \u8868\u793a\u5206\u5757\u672a\u5b8c\u6210\u4e0a\u4f20\u3002\u6570\u7ec4\u7d22\u5f15\u8868\u793a\u5206\u5757\u5e8f\u53f7\uff0c \u4ece 0 \u5f00\u59cb \uff1b expired_at \u5f53\u524d\u5206\u5757\u4e0a\u4f20\u6570\u636e\u6709\u6548\u671f\uff0c\u8d85\u8fc7\u6709\u6548\u671f\u4e4b\u540e\u6570\u636e\u5c06\u4f1a\u88ab\u6e05\u7406 \u6587\u4ef6\u5408\u5e76\u5b8c\u6210\u4e0a\u4f20 \u00b6 POST /<bucket-name>/ \u8bf7\u6c42\u7c7b\u578b \u00b6 Content-Type: application/x-www-form-urlencoded \u8bf7\u6c42\u53c2\u6570 \u00b6 \u53c2\u6570 \u53c2\u6570\u7c7b\u578b \u5fc5\u9009 \u53c2\u6570\u8bf4\u660e policy string true \u6587\u4ef6\u5b58\u50a8/\u6821\u9a8c\u4fe1\u606f\uff0c\u89c1 \u7b97\u6cd5 signature string true \u6821\u9a8c\u7b7e\u540d\uff0c\u89c1 \u7b97\u6cd5 \u53c2\u6570\u7ec4 \u00b6 \u53c2\u6570 \u53c2\u6570\u8bf4\u660e save_token \u5373\u521d\u59cb\u5316\u4e0a\u4f20\u8bf7\u6c42\u8fd4\u56de\u7ed3\u679c\u4e2d\u7684 save_token expiration Unix UTC \u65f6\u95f4\u6233\uff0c\u6388\u6743\u6709\u6548\u671f\uff0c\u8d85\u8fc7\u8fd9\u4e2a\u65f6\u95f4\u4e4b\u540e\u6388\u6743\u5c06\u4f1a\u5931\u6548 \u8fd4\u56de\u7ed3\u679c \u00b6 \u8868\u5355 API \u7ed3\u5408 return-url \u548c notify-url \u4e24\u4e2a\uff0c\u6709\u4e09\u79cd\u65b9\u5f0f\u5c06\u4e0a\u4f20\u7ed3\u679c\u8fd4\u56de: * HTTP Body \u540c\u6b65\u8fd4\u56de\uff1b\u5728\u6ca1\u6709\u4f20\u9012 return-url \u65f6\uff0c\u90fd\u4f1a\u4f7f\u7528\u8fd9\u79cd\u65b9\u5f0f\u4ee5 JSON \u5b57\u7b26\u4e32\u7684\u65b9\u5f0f\u8fd4\u56de\u6570\u636e\u5230\u5ba2\u6237\u7aef\uff1b * \u5ba2\u6237\u7aef\u540c\u6b65\u8df3\u8f6c\u56de\u8c03\uff1b\u4f20\u9012 return-url \u53c2\u6570\u65f6\uff0c\u4f1a\u901a\u8fc7 HTTP 302 \u7684\u65b9\u5f0f\u5728\u5ba2\u6237\u7aef\u8df3\u8f6c\u5230\u56de\u8c03\u5730\u5740\uff0c\u901a\u8fc7 GET \u53c2\u6570\u4f20\u9012\uff1b * \u670d\u52a1\u5668\u5f02\u6b65\u961f\u5217\u901a\u77e5\uff1b\u4f20\u9012\u4e86 notify-url \u53c2\u6570\u65f6\uff0c\u4f1a\u901a\u8fc7\u53c8\u62cd\u4e91\u7684\u670d\u52a1\u7aef\u5f02\u6b65\u961f\u5217\u53d1\u9001 POST \u8bf7\u6c42\u4ee5\u6807\u51c6\u7684 x-www-form-urlencoded \u8868\u5355\u8fdb\u884c\u901a\u77e5\uff0c\u5982\u679c\u56de\u8c03\u901a\u77e5\u5931\u8d25\uff0c\u518d\u91cd\u8bd5 10 \u6b21\uff08\u7d2f\u8ba1\u4e00\u5929\u65f6\u95f4\uff09\u4e4b\u540e\u5c06\u4e22\u5f03\u8fd9\u6761\u56de\u8c03\u4efb\u52a1\uff1b \u4e09\u79cd\u65b9\u5f0f\u5c06\u8fd4\u56de/\u63d0\u4ea4\u4e00\u6837\u7684\u6570\u636e\uff0c\u7b7e\u540d\u9a8c\u8bc1\u673a\u5236\u4e5f\u5b8c\u5168\u4e00\u6837\uff0c\u4ee5 HTTP Body \u8fd4\u56de\u7684\u6570\u636e\u4e3a\u4f8b\u4e0a\u4f20\u6210\u529f\u8fd4\u56de\uff1a { bucket_name: 'example', path: '/demo.png', mimetype: 'image/png', file_size: 65422, image_width: 800, image_height: 600, image_frames: 1, image_type: 'PNG', last_modified: 1402021925, signature: 'c0ec4d6b0bb0515b4b889a12436118aa' } \u8fd4\u56de\u53c2\u6570\u8bf4\u660e \u53c2\u6570 \u8bf4\u660e bucket_name \u7a7a\u95f4\u540d path \u6587\u4ef6\u4fdd\u5b58\u8def\u5f84 mimetype \u4fdd\u5b58\u6587\u4ef6\u7684 content-type file_size \u6587\u4ef6\u5927\u5c0f image_width \u56fe\u7247\u5bbd\u5ea6\uff0c\u4ec5\u56fe\u7247\u8fd4\u56de image_height \u56fe\u7247\u9ad8\u5ea6\uff0c\u4ec5\u56fe\u7247\u8fd4\u56de image_frames \u56fe\u7247\u5e27\u6570\uff0c\u4ec5\u56fe\u7247\u8fd4\u56de image_type \u56fe\u7247\u7c7b\u578b\uff0c\u4ec5\u56fe\u7247\u8fd4\u56de last_modified \u6587\u4ef6\u6700\u540e\u4fee\u6539\u65f6\u95f4\uff0c\u65e2\u672c\u6b21\u4e0a\u4f20\u64cd\u4f5c\u6210\u529f\u521b\u5efa\u6587\u4ef6\u7684\u65f6\u95f4 signature \u6821\u9a8c\u7b7e\u540d\uff0c\u7528\u4e8e\u6821\u9a8c\u8fd4\u56de\u6570\u636e\u7684\u5408\u6cd5\u6027 \uff0c\u751f\u6210\u65b9\u5f0f\u53c2\u89c1\u7b7e\u540d\u7b97\u6cd5 ext-param \u521d\u59cb\u5316\u65f6\u6307\u5b9a\u7684\u989d\u5916\u53c2\u6570\uff08\u5982\u679c\u6ca1\u6709\u6307\u5b9a\u5219\u4e0d\u8fd4\u56de\u8fd9\u4e2a\u5b57\u6bb5\uff09 \u540c\u6b65\u56de\u8c03\u65b9\u5f0f\u4f1a\u901a\u8fc7 HTTP 302 \u7684\u65b9\u5f0f\u8fdb\u884c\u8df3\u8f6c\uff1a > Access-Control-Allow-Methods:PUT,POST > Access-Control-Allow-Origin:* > X-Powered-By:Crocodile/0.0.1 > ... > Location: http://www.example.com/callback/return.php?path=%2Fdemo.png&content_type=image%2Fpng&file_size=65422&image_width=800&image_height=600&image_frames=1&last_modified=1402021925&signature=bc0b1ee186486c050146616a6ec74747 \u9519\u8bef\u4ee3\u7801\u8bf4\u660e \u00b6 \u8bf7\u53c2\u8003 API \u9519\u8bef\u7801\u8868","title":"\u5206\u5757\u4e0a\u4f20\uff08\u5df2\u5f03\u7528\uff09"},{"location":"api/multipart_upload/#api","text":"m0.api.upyun.com","title":"API \u57fa\u672c\u57df\u540d"},{"location":"api/multipart_upload/#_1","text":"\u6587\u4ef6\u5206\u5757\uff1a\u76f4\u63a5\u5207\u5206\u4e8c\u8fdb\u5236\u6587\u4ef6\u6210\u5c0f\u5757\u3002\u5177\u4f53\u6587\u4ef6\u7684\u6bcf\u4e2a\u5206\u5757\u7684\u5927\u5c0f\u4ee5\u53ca\u5206\u5757\u6570\u76ee\uff0c\u53ef\u4ee5\u6839\u636e\u81ea\u5df1\u60c5\u51b5\u8c03\u6574\uff08eg. 10MB \u7684\u6587\u4ef6\uff0c\u53ef\u4ee5\u5b9a\u6bcf\u4e2a\u5206\u5757 1MB\uff0c\u5219\u5206\u5757\u6570\u76ee\u5373\u4e3a 10 \u5757\uff09 \u8bf7\u6c42\u53c2\u6570\uff08Request Params\uff09\uff1a \u5373\u662f\u6307\u5e38\u89c4\u7684\u8bf7\u6c42\u4e2d\u6240\u5e26\u53c2\u6570 \u53c2\u6570\u7ec4\uff08Meta Params\uff09\uff1a \u5305\u542b\u6587\u4ef6\u4e0a\u4f20\u5b58\u50a8\u53ca\u6821\u9a8c\u76f8\u5173\u7684\u5fc5\u8981\u4fe1\u606f\uff0c\u4e5f\u662f\u6bcf\u6b21\u8bf7\u6c42\u65f6\u5019\u8ba1\u7b97 policy \u548c signature \u6240\u9700\u7684\u53c2\u6570\u7ec4\u3002 signature\uff1a \u6821\u9a8c\u7b7e\u540d policy\uff1a \u5b58\u50a8/\u6821\u9a8c\u4fe1\u606f","title":"\u540d\u79f0\u6982\u5ff5"},{"location":"api/multipart_upload/#signature-policy","text":"signature \u548c policy \u7b97\u6cd5\u4e0e\u8868\u5355 API \u76f8\u540c\uff0c\u8bf7\u53c2\u8003 \u8fd9\u91cc \u3002 \u6ce8\uff1a\u5728\u5206\u5757\u4e0a\u4f20\u6570\u636e\u548c\u5408\u5e76\u6587\u4ef6\u8bf7\u6c42\u4e2d\uff0c\u9700\u8981\u5c06\u6b64\u5904\u6240\u7528\u300e\u8868\u5355 API \u9a8c\u8bc1\u5bc6\u94a5\u300f\u66ff\u6362\u4e3a\u4e0a\u6b21\u8bf7\u6c42\u8fd4\u56de\u7684 token_secret \uff0c\u518d\u8fdb\u884c signature \u8ba1\u7b97 \u5047\u8bbe\u4e00\u4e2a\u8bf7\u6c42\u6240\u9700\u7684\u7684\u7b56\u7565\u53c2\u6570\u5982\u4e0b\u8868: \u952e \u503c path /demo.png expiration 1409200758 file_blocks 1 file_hash b1143cbc07c8e768d517fa5e73cb79ca file_size 653252 \u53e6\u8bbe\uff0c\u8be5\u7a7a\u95f4\u300e\u8868\u5355 API \u9a8c\u8bc1\u5bc6\u94a5\u300f\u4e3a\uff1a cAnyet74l9hdUag34h2dZu8z7gU= \u8ba1\u7b97 policy \u548c signature \u76f8\u5e94\u6b65\u9aa4\u6240\u5f97\u7ed3\u679c\u5982\u4e0b\uff1a \u7b2c\u4e00\u6b65\uff0c\u5c06\u53c2\u6570\u7ec4\u8f6c\u6362\u4e3a JSON \u5b57\u7b26\u4e32\u540e\uff1a {\"path\":\"/demo.png\",\"expiration\":1409200758,\"file_blocks\":1,\"file_size\":653252,\"file_hash\":\"b1143cbc07c8e768d517fa5e73cb79ca\"} \u7b2c\u4e8c\u6b65\uff0c\u5c06\u7b2c\u4e00\u6b65\u6240\u5f97\u5b57\u7b26\u4e32 base64 \u7f16\u7801\u540e\uff1a eyJwYXRoIjoiL2RlbW8ucG5nIiwiZXhwaXJhdGlvbiI6MTQwOTIwMDc1OCwiZmlsZV9ibG9ja3MiOjEsImZpbGVfc2l6ZSI6NjUzMjUyLCJmaWxlX2hhc2giOiJiMTE0M2NiYzA3YzhlNzY4ZDUxN2ZhNWU3M2NiNzljYSJ9 \u7b2c\u4e09\u6b65\uff0c\u7b2c\u4e8c\u6b65\u7ed3\u679c\u4e0e\u300e\u8868\u5355 API \u9a8c\u8bc1\u5bc6\u94a5\u300f\u7528 & \u62fc\u63a5\u540e\uff1a eyJwYXRoIjoiL2RlbW8ucG5nIiwiZXhwaXJhdGlvbiI6MTQwOTIwMDc1OCwiZmlsZV9ibG9ja3MiOjEsImZpbGVfc2l6ZSI6NjUzMjUyLCJmaWxlX2hhc2giOiJiMTE0M2NiYzA3YzhlNzY4ZDUxN2ZhNWU3M2NiNzljYSJ9&cAnyet74l9hdUag34h2dZu8z7gU= \u6ce8\uff1a\u5728\u5206\u5757\u4e0a\u4f20\u6570\u636e\u548c\u5408\u5e76\u6587\u4ef6\u8bf7\u6c42\u4e2d\uff0c\u9700\u8981\u5c06\u6b64\u5904\u6240\u7528\u300e\u8868\u5355 API \u9a8c\u8bc1\u5bc6\u94a5\u300f\u66ff\u6362\u4e3a\u4e0a\u6b21\u8bf7\u6c42\u8fd4\u56de\u7684 token_secret \uff0c\u518d\u8fdb\u884c\u7b2c\u56db\u6b65\u8ba1\u7b97 \u7b2c\u56db\u6b65\uff0c\u5c06\u7b2c\u4e09\u6b65\u6240\u5f97\u5b57\u7b26\u8ba1\u7b97 md5 \u540e\u5373\u5f97\u5230 signature\uff1a 98cf3f74698bfec04886eee446439ae3","title":"signature \u548c policy \u7b97\u6cd5"},{"location":"api/multipart_upload/#_2","text":"\u8868\u5355\u5206\u5757\u4e0a\u4f20\u7684\u6574\u4e2a\u6b65\u9aa4\u5206\u4e3a\uff1a \u521d\u59cb\u5316\u4e0a\u4f20 \u5206\u5757\u4e0a\u4f20\u6570\u636e \u6587\u4ef6\u5408\u5e76\u5b8c\u6210\u4e0a\u4f20","title":"\u4e0a\u4f20\u6b65\u9aa4"},{"location":"api/multipart_upload/#_3","text":"POST /<bucket-name>/","title":"\u521d\u59cb\u5316\u4e0a\u4f20"},{"location":"api/multipart_upload/#_4","text":"Content-Type: application/x-www-form-urlencoded","title":"\u8bf7\u6c42\u7c7b\u578b"},{"location":"api/multipart_upload/#_5","text":"\u53c2\u6570 \u53c2\u6570\u7c7b\u578b \u5fc5\u9009 \u53c2\u6570\u8bf4\u660e policy string true \u6587\u4ef6\u5b58\u50a8/\u6821\u9a8c\u4fe1\u606f\uff0c\u89c1 \u7b97\u6cd5 signature string true \u6821\u9a8c\u7b7e\u540d\uff0c\u89c1 \u7b97\u6cd5","title":"\u8bf7\u6c42\u53c2\u6570"},{"location":"api/multipart_upload/#_6","text":"\u53c2\u6570 \u53c2\u6570\u8bf4\u660e path \u6587\u4ef6\u5b58\u50a8\u8def\u5f84 expiration \u6388\u6743\u6709\u6548\u671f\uff0cUnix UTC \u65f6\u95f4\u6233 file_blocks \u672c\u6b21\u6240\u4e0a\u4f20\u7684\u6587\u4ef6\u7684\u5206\u5757\u6570\u76ee file_hash \u6240\u4e0a\u4f20\u6587\u4ef6\u6574\u4e2a\u6587\u4ef6\u7684 md5 hash \u503c file_size \u6240\u4e0a\u4f20\u6587\u4ef6\u6574\u4e2a\u6587\u4ef6\u7684\u5927\u5c0f(\u5355\u4f4d Byte) \u6ce8\uff1a\u8bf7\u9009\u53d6\u9002\u5f53\u7684 file_blocks \u4ee5\u4fdd\u8bc1\u5206\u5757\u7684\u5927\u5c0f \u4e0d\u8d85\u8fc7 5M \uff0c\u5e76\u4e14\u9664\u6700\u540e\u4e00\u5757\u5916\u5176\u4f59\u5206\u5757 \u4e0d\u5c0f\u4e8e 100K \u3002 \u5176\u4ed6\u53ef\u9009\u53c2\u6570\u5982\u4e0b\uff1a \u53c2\u6570 \u53ef\u9009\u6027 \u5907\u6ce8 allow-file-type \u5426 \u6587\u4ef6\u7c7b\u578b\u9650\u5236\uff0c\u5236\u5b9a\u5141\u8bb8\u4e0a\u4f20\u7684\u6587\u4ef6\u6269\u5c55\u540d content-length-range \u5426 \u6587\u4ef6\u5927\u5c0f\u9650\u5236\uff0c\u683c\u5f0f\uff1a min,max \uff0c\u5355\u4f4d\uff1a\u5b57\u8282\uff0c\u5982 102400,1024000 \uff0c\u5141\u8bb8\u4e0a\u4f20 100Kb\uff5e1Mb \u7684\u6587\u4ef6 content-md5 \u5426 \u6240\u4e0a\u4f20\u7684\u6587\u4ef6\u7684 MD5 \u6821\u9a8c\u503c\uff0c\u53c8\u62cd\u4e91\u6839\u636e\u6b64\u6765\u6821\u9a8c\u6587\u4ef6\u4e0a\u4f20\u662f\u5426\u6b63\u786e content-secret \u5426 \u539f\u56fe\u8bbf\u95ee\u5bc6\u94a5 [\u8868\u5355 API \u6ce8 2] content-type \u5426 \u53c8\u62cd\u4e91\u9ed8\u8ba4\u6839\u636e\u6269\u5c55\u540d\u5224\u65ad\uff0c\u624b\u52a8\u6307\u5b9a\u53ef\u63d0\u9ad8\u7cbe\u786e\u6027 image-width-range \u5426 \u56fe\u7247\u5bbd\u5ea6\u9650\u5236\uff0c\u683c\u5f0f\uff1a min,max \uff0c\u5355\u4f4d\uff1a\u50cf\u7d20\uff0c\u5982 0,1024 \uff0c\u5141\u8bb8\u4e0a\u4f20\u5bbd\u5ea6\u4e3a 0\uff5e1024px \u4e4b\u95f4 image-height-range \u5426 \u56fe\u7247\u9ad8\u5ea6\u9650\u5236\uff0c\u683c\u5f0f\uff1a min,max \uff0c\u5355\u4f4d\uff1a\u50cf\u7d20\uff0c\u5982 0,1024 \uff0c\u5141\u8bb8\u4e0a\u4f20\u9ad8\u5ea6\u5728 0\uff5e1024px \u4e4b\u95f4 notify-url \u5426 \u5f02\u6b65\u901a\u77e5 URL\uff0c\u89c1 [\u8868\u5355 API \u901a\u77e5\u89c4\u5219] return-url \u5426 \u540c\u6b65\u901a\u77e5 URL\uff0c\u89c1 [\u8868\u5355 API \u901a\u77e5\u89c4\u5219] x-gmkerl-thumb \u5426 \u56fe\u7247\u5904\u7406\u53c2\u6570\uff0c\u89c1 \u4e0a\u4f20\u4f5c\u56fe x-gmkerl-type \u5426 get_meta \uff08\u83b7\u53d6\u56fe\u7247\u4fe1\u606f\uff09\u6216 get_theme_color \uff08\u4e3b\u9898\u8272\u63d0\u53d6\uff09 x-gmkerl-extract-color-count \u5426 \u4e3b\u9898\u8272\u63d0\u53d6\u989c\u8272\u6570\u91cf\uff0c\u9ed8\u8ba4 256 x-gmkerl-extract-format \u5426 \u4e3b\u9898\u8272\u63d0\u53d6\u683c\u5f0f\uff0c\u9ed8\u8ba4 hex ext-param \u5426 \u989d\u5916\u53c2\u6570\uff0cUTF-8 \u7f16\u7801\uff0c\u5e76\u5c0f\u4e8e 255 \u4e2a\u5b57\u7b26 [\u8868\u5355 API \u6ce8 5] apps \u5426 json \u683c\u5f0f\u7684\u5f02\u6b65\u5904\u7406\u4efb\u52a1\u5217\u8868\u3002\u89c1 \u5f02\u6b65\u5904\u7406\u4efb\u52a1 x-gmkerl-thumbnail DEPRECATED \u5426 \u7f29\u7565\u56fe\u7248\u672c\u540d\u79f0\uff0c\u4ec5\u652f\u6301\u56fe\u7247\u7c7b\u7a7a\u95f4\uff0c\u53ef\u642d\u914d\u5176\u4ed6 x-gmkerl-* \u53c2\u6570\u4f7f\u7528 [\u8868\u5355 API \u6ce8 3] x-gmkerl-type DEPRECATED \u5426 \u7f29\u7565\u7c7b\u578b [\u8868\u5355 API \u6ce8 4] x-gmkerl-value DEPRECATED \u5426 \u7f29\u7565\u7c7b\u578b\u5bf9\u5e94\u7684\u53c2\u6570\u503c [\u8868\u5355 API \u6ce8 4] x-gmkerl-quality DEPRECATED \u5426 \u9ed8\u8ba4 95 \u7f29\u7565\u56fe\u538b\u7f29\u8d28\u91cf x-gmkerl-unsharp DEPRECATED \u5426 \u9ed8\u8ba4\u9510\u5316\uff08true\uff09 \u662f\u5426\u8fdb\u884c\u9510\u5316\u5904\u7406 x-gmkerl-rotate DEPRECATED \u5426 \u56fe\u7247\u65cb\u8f6c\uff08\u987a\u65f6\u9488\uff09\uff0c\u53ef\u9009\uff1a auto\uff0c90\uff0c180\uff0c270 \u4e4b\u4e00 x-gmkerl-crop DEPRECATED \u5426 \u56fe\u7247\u88c1\u526a\uff0c\u683c\u5f0f\uff1a <w>x<h>a<x>a<y> \u3002 \u5176\u4e2d w, h \u5206\u522b\u8868\u793a\u88c1\u526a\u540e\u7684\u5bbd\u548c\u9ad8\uff0cx, y \u8868\u793a\u5de6\u4e0a\u89d2\u5750\u6807\u3002\u5982 100x100a0a0\u3002 x-gmkerl-exif-switch DEPRECATED \u5426 \u662f\u5426\u4fdd\u7559 EXIF \u4fe1\u606f\uff0c\u4ec5\u5728\u642d\u914d x-gmkerl-crop\uff0cx-gmkerl-type\uff0cx-gmkerl-thumbnail \u65f6\u6709\u6548\u3002","title":"\u53c2\u6570\u7ec4"},{"location":"api/multipart_upload/#_7","text":"{ save_token: '68640c7ab4120b4992907cabc6ea2c48', token_secret: \"89a3d8d8a26a8adb32a3651a63c0d5cc\", bucket_name: 'example', blocks: 5, status: [0,0,0,0,0], expired_at: 1401784219 } \u8fd4\u56de\u53c2\u6570\u8bf4\u660e \u53c2\u6570 \u8bf4\u660e save_token \u5206\u5757\u4e0a\u4f20\u7d22\u5f15 key\uff0c\u4e0b\u4e00\u6b65\u5206\u5757\u4e0a\u4f20\u6570\u636e\u65f6\u5fc5\u987b\u643a\u5e26\u672c\u53c2\u6570 token_secret \u7528\u4e8e\u4e4b\u540e\u8bf7\u6c42\u8ba1\u7b97 policy \u548c signature \u6240\u7528\uff0c\u4ee3\u66ff\u300e\u8868\u5355 API \u9a8c\u8bc1\u5bc6\u94a5\u300f bucket_name \u6587\u4ef6\u4fdd\u5b58\u7a7a\u95f4 blocks \u6587\u4ef6\u5206\u5757\u6570\u91cf status \u5206\u5757\u6587\u4ef6\u4e0a\u4f20\u72b6\u6001\uff0c 1 \u8868\u793a\u5df2\u5b8c\u6210\u4e0a\u4f20\uff0c 0 \u8868\u793a\u5206\u5757\u672a\u5b8c\u6210\u4e0a\u4f20\u3002\u6570\u7ec4\u7d22\u5f15\u8868\u793a\u5206\u5757\u5e8f\u53f7\uff0c \u4ece 0 \u5f00\u59cb \uff1b expired_at \u5f53\u524d\u5206\u5757\u4e0a\u4f20\u6570\u636e\u6709\u6548\u671f\uff0c\u8d85\u8fc7\u6709\u6548\u671f\u4e4b\u540e\u6570\u636e\u5c06\u4f1a\u88ab\u6e05\u7406","title":"\u8fd4\u56de\u7ed3\u679c"},{"location":"api/multipart_upload/#_8","text":"POST /<bucket-name>/","title":"\u5206\u5757\u4e0a\u4f20\u6570\u636e"},{"location":"api/multipart_upload/#_9","text":"Content-Type: multipart/form-data","title":"\u8bf7\u6c42\u7c7b\u578b"},{"location":"api/multipart_upload/#_10","text":"\u53c2\u6570 \u53c2\u6570\u7c7b\u578b \u5fc5\u9009 \u53c2\u6570\u8bf4\u660e policy String true \u6587\u4ef6\u5b58\u50a8/\u6821\u9a8c\u4fe1\u606f\uff0c\u89c1 \u7b97\u6cd5 signature String true \u6821\u9a8c\u7b7e\u540d\uff0c\u89c1 \u7b97\u6cd5 file Blob true \u4e0a\u4f20\u7684\u6587\u4ef6\u5206\u5757\u6570\u636e","title":"\u8bf7\u6c42\u53c2\u6570"},{"location":"api/multipart_upload/#_11","text":"\u53c2\u6570 \u53c2\u6570\u8bf4\u660e save_token \u5373\u521d\u59cb\u5316\u4e0a\u4f20\u8bf7\u6c42\u8fd4\u56de\u7ed3\u679c\u4e2d\u7684 save_token expiration Unix UTC \u65f6\u95f4\u6233\uff0c\u6388\u6743\u6709\u6548\u671f\uff0c\u8d85\u8fc7\u8fd9\u4e2a\u65f6\u95f4\u4e4b\u540e\u6388\u6743\u5c06\u4f1a\u5931\u6548 block_index \u8be5\u5206\u5757\u5728\u5b8c\u6574\u6587\u4ef6\u4e2d\u7684\u5206\u5757\u7d22\u5f15 block_hash \u8be5\u5206\u5757\u6587\u4ef6\u7684 md5 \u503c","title":"\u53c2\u6570\u7ec4"},{"location":"api/multipart_upload/#_12","text":"\u4e0a\u4f20\u6210\u529f\u8fd4\u56de: { save_token: '68640c7ab4120b4992907cabc6ea2c48', token_secret: \"89a3d8d8a26a8adb32a3651a63c0d5cc\", bucket_name: 'example', blocks: 5, status: [1,1,1,1,0], expired_at: 1401784219 } \u8fd4\u56de\u53c2\u6570\u8bf4\u660e \u53c2\u6570 \u8bf4\u660e save_token \u5206\u5757\u4e0a\u4f20\u7d22\u5f15 key\uff0c\u4e0b\u4e00\u6b65\u5206\u5757\u4e0a\u4f20\u6570\u636e\u65f6\u5fc5\u987b\u643a\u5e26\u672c\u53c2\u6570 token_secret \u7528\u4e8e\u4e4b\u540e\u8bf7\u6c42\u8ba1\u7b97 policy \u548c signature \u6240\u7528\uff0c\u4ee3\u66ff\u300e\u8868\u5355 API \u9a8c\u8bc1\u5bc6\u94a5\u300f bucket_name \u6587\u4ef6\u4fdd\u5b58\u7a7a\u95f4 blocks \u6587\u4ef6\u5206\u5757\u6570\u91cf status \u5206\u5757\u6587\u4ef6\u4e0a\u4f20\u72b6\u6001\uff0c 1 \u8868\u793a\u5df2\u5b8c\u6210\u4e0a\u4f20\uff0c 0 \u8868\u793a\u5206\u5757\u672a\u5b8c\u6210\u4e0a\u4f20\u3002\u6570\u7ec4\u7d22\u5f15\u8868\u793a\u5206\u5757\u5e8f\u53f7\uff0c \u4ece 0 \u5f00\u59cb \uff1b expired_at \u5f53\u524d\u5206\u5757\u4e0a\u4f20\u6570\u636e\u6709\u6548\u671f\uff0c\u8d85\u8fc7\u6709\u6548\u671f\u4e4b\u540e\u6570\u636e\u5c06\u4f1a\u88ab\u6e05\u7406","title":"\u8fd4\u56de\u7ed3\u679c"},{"location":"api/multipart_upload/#_13","text":"POST /<bucket-name>/","title":"\u6587\u4ef6\u5408\u5e76\u5b8c\u6210\u4e0a\u4f20"},{"location":"api/multipart_upload/#_14","text":"Content-Type: application/x-www-form-urlencoded","title":"\u8bf7\u6c42\u7c7b\u578b"},{"location":"api/multipart_upload/#_15","text":"\u53c2\u6570 \u53c2\u6570\u7c7b\u578b \u5fc5\u9009 \u53c2\u6570\u8bf4\u660e policy string true \u6587\u4ef6\u5b58\u50a8/\u6821\u9a8c\u4fe1\u606f\uff0c\u89c1 \u7b97\u6cd5 signature string true \u6821\u9a8c\u7b7e\u540d\uff0c\u89c1 \u7b97\u6cd5","title":"\u8bf7\u6c42\u53c2\u6570"},{"location":"api/multipart_upload/#_16","text":"\u53c2\u6570 \u53c2\u6570\u8bf4\u660e save_token \u5373\u521d\u59cb\u5316\u4e0a\u4f20\u8bf7\u6c42\u8fd4\u56de\u7ed3\u679c\u4e2d\u7684 save_token expiration Unix UTC \u65f6\u95f4\u6233\uff0c\u6388\u6743\u6709\u6548\u671f\uff0c\u8d85\u8fc7\u8fd9\u4e2a\u65f6\u95f4\u4e4b\u540e\u6388\u6743\u5c06\u4f1a\u5931\u6548","title":"\u53c2\u6570\u7ec4"},{"location":"api/multipart_upload/#_17","text":"\u8868\u5355 API \u7ed3\u5408 return-url \u548c notify-url \u4e24\u4e2a\uff0c\u6709\u4e09\u79cd\u65b9\u5f0f\u5c06\u4e0a\u4f20\u7ed3\u679c\u8fd4\u56de: * HTTP Body \u540c\u6b65\u8fd4\u56de\uff1b\u5728\u6ca1\u6709\u4f20\u9012 return-url \u65f6\uff0c\u90fd\u4f1a\u4f7f\u7528\u8fd9\u79cd\u65b9\u5f0f\u4ee5 JSON \u5b57\u7b26\u4e32\u7684\u65b9\u5f0f\u8fd4\u56de\u6570\u636e\u5230\u5ba2\u6237\u7aef\uff1b * \u5ba2\u6237\u7aef\u540c\u6b65\u8df3\u8f6c\u56de\u8c03\uff1b\u4f20\u9012 return-url \u53c2\u6570\u65f6\uff0c\u4f1a\u901a\u8fc7 HTTP 302 \u7684\u65b9\u5f0f\u5728\u5ba2\u6237\u7aef\u8df3\u8f6c\u5230\u56de\u8c03\u5730\u5740\uff0c\u901a\u8fc7 GET \u53c2\u6570\u4f20\u9012\uff1b * \u670d\u52a1\u5668\u5f02\u6b65\u961f\u5217\u901a\u77e5\uff1b\u4f20\u9012\u4e86 notify-url \u53c2\u6570\u65f6\uff0c\u4f1a\u901a\u8fc7\u53c8\u62cd\u4e91\u7684\u670d\u52a1\u7aef\u5f02\u6b65\u961f\u5217\u53d1\u9001 POST \u8bf7\u6c42\u4ee5\u6807\u51c6\u7684 x-www-form-urlencoded \u8868\u5355\u8fdb\u884c\u901a\u77e5\uff0c\u5982\u679c\u56de\u8c03\u901a\u77e5\u5931\u8d25\uff0c\u518d\u91cd\u8bd5 10 \u6b21\uff08\u7d2f\u8ba1\u4e00\u5929\u65f6\u95f4\uff09\u4e4b\u540e\u5c06\u4e22\u5f03\u8fd9\u6761\u56de\u8c03\u4efb\u52a1\uff1b \u4e09\u79cd\u65b9\u5f0f\u5c06\u8fd4\u56de/\u63d0\u4ea4\u4e00\u6837\u7684\u6570\u636e\uff0c\u7b7e\u540d\u9a8c\u8bc1\u673a\u5236\u4e5f\u5b8c\u5168\u4e00\u6837\uff0c\u4ee5 HTTP Body \u8fd4\u56de\u7684\u6570\u636e\u4e3a\u4f8b\u4e0a\u4f20\u6210\u529f\u8fd4\u56de\uff1a { bucket_name: 'example', path: '/demo.png', mimetype: 'image/png', file_size: 65422, image_width: 800, image_height: 600, image_frames: 1, image_type: 'PNG', last_modified: 1402021925, signature: 'c0ec4d6b0bb0515b4b889a12436118aa' } \u8fd4\u56de\u53c2\u6570\u8bf4\u660e \u53c2\u6570 \u8bf4\u660e bucket_name \u7a7a\u95f4\u540d path \u6587\u4ef6\u4fdd\u5b58\u8def\u5f84 mimetype \u4fdd\u5b58\u6587\u4ef6\u7684 content-type file_size \u6587\u4ef6\u5927\u5c0f image_width \u56fe\u7247\u5bbd\u5ea6\uff0c\u4ec5\u56fe\u7247\u8fd4\u56de image_height \u56fe\u7247\u9ad8\u5ea6\uff0c\u4ec5\u56fe\u7247\u8fd4\u56de image_frames \u56fe\u7247\u5e27\u6570\uff0c\u4ec5\u56fe\u7247\u8fd4\u56de image_type \u56fe\u7247\u7c7b\u578b\uff0c\u4ec5\u56fe\u7247\u8fd4\u56de last_modified \u6587\u4ef6\u6700\u540e\u4fee\u6539\u65f6\u95f4\uff0c\u65e2\u672c\u6b21\u4e0a\u4f20\u64cd\u4f5c\u6210\u529f\u521b\u5efa\u6587\u4ef6\u7684\u65f6\u95f4 signature \u6821\u9a8c\u7b7e\u540d\uff0c\u7528\u4e8e\u6821\u9a8c\u8fd4\u56de\u6570\u636e\u7684\u5408\u6cd5\u6027 \uff0c\u751f\u6210\u65b9\u5f0f\u53c2\u89c1\u7b7e\u540d\u7b97\u6cd5 ext-param \u521d\u59cb\u5316\u65f6\u6307\u5b9a\u7684\u989d\u5916\u53c2\u6570\uff08\u5982\u679c\u6ca1\u6709\u6307\u5b9a\u5219\u4e0d\u8fd4\u56de\u8fd9\u4e2a\u5b57\u6bb5\uff09 \u540c\u6b65\u56de\u8c03\u65b9\u5f0f\u4f1a\u901a\u8fc7 HTTP 302 \u7684\u65b9\u5f0f\u8fdb\u884c\u8df3\u8f6c\uff1a > Access-Control-Allow-Methods:PUT,POST > Access-Control-Allow-Origin:* > X-Powered-By:Crocodile/0.0.1 > ... > Location: http://www.example.com/callback/return.php?path=%2Fdemo.png&content_type=image%2Fpng&file_size=65422&image_width=800&image_height=600&image_frames=1&last_modified=1402021925&signature=bc0b1ee186486c050146616a6ec74747","title":"\u8fd4\u56de\u7ed3\u679c"},{"location":"api/multipart_upload/#_18","text":"\u8bf7\u53c2\u8003 API \u9519\u8bef\u7801\u8868","title":"\u9519\u8bef\u4ee3\u7801\u8bf4\u660e"},{"location":"api/old_thumb/","text":"** \u8be5\u6587\u6863\u4e3a\u65e7\u7248\u4f5c\u56fe\u53c2\u6570\uff0c\u76ee\u524d\u5df2\u4e0d\u518d\u66f4\u65b0\uff0c\u65b0\u7248\u8bf7\u53c2\u8003 \u65b0\u7248\u4f5c\u56fe\u53c2\u6570 ** \u53c2\u6570 \u8bf4\u660e x-gmkerl-type \u7f29\u7565\u7c7b\u578b\uff08\u5177\u4f53\u8bf7\u53c2\u89c1\u6ce8 1\uff09 x-gmkerl-value \u7f29\u7565\u7c7b\u578b\u5bf9\u5e94\u7684\u53c2\u6570\u503c\uff0c\u5355\u4f4d\u4e3a\u50cf\u7d20\uff0c\u987b\u642d\u914d x-gmkerl-type \u4f7f\u7528\uff08\u5177\u4f53\u8bf7\u53c2\u89c1\u6ce8 2\uff09 x-gmkerl-quality \u56fe\u7247\u8d28\u91cf\uff0c\u9ed8\u8ba4 95 \uff0c\u53ef\u9009\uff081~100\uff09 x-gmkerl-unsharp \u56fe\u7247\u9510\u5316\uff0c\u9ed8\u8ba4 true \u5373\u5f00\u542f\u9510\u5316 x-gmkerl-thumbnail \u5728\u53c8\u62cd\u4e91\u7ba1\u7406\u5e73\u53f0\u521b\u5efa\u597d\u7f29\u7565\u56fe\u7248\u672c\u8be5\u7f29\u7565\u65b9\u5f0f\u5305\u542b\u4e86\u6240\u9700\u7684\u7f29\u7565\u53c2\u6570\uff0c\u53c2\u6570\u66f4\u7b80\u6d01\uff0c\u4f7f\u7528\u66f4\u65b9\u4fbf x-gmkerl-exif-switch \u662f\u5426\u4fdd\u7559\u539f\u56fe\u7684 EXIF \u4fe1\u606f\uff0c\u9ed8\u8ba4 false \u5373\u4e0d\u4fdd\u7559 x-gmkerl-crop \u683c\u5f0f\u4e3a x,y,width,height \uff0c\u5982\uff1a 0,0,100,200 \uff08\u5177\u4f53\u8bf7\u53c2\u89c1\u6ce8 3\uff09 x-gmkerl-rotate \u65cb\u8f6c\u89d2\u5ea6\uff0c\u76ee\u524d\u53ea\u5141\u8bb8\u8bbe\u7f6e\uff1a auto\uff0c90\uff0c180\uff0c270 \uff08\u5177\u4f53\u8bf7\u53c2\u89c1\u6ce8 4\uff09 \u6ce8 1\uff1ax-gmkerl-type \u503c\u53ef\u9009\u5217\u8868 \u503c \u542b\u4e49 fix_width \u9650\u5b9a\u5bbd\u5ea6\uff0c\u9ad8\u5ea6\u81ea\u9002\u5e94 fix_height \u9650\u5b9a\u9ad8\u5ea6\uff0c\u5bbd\u5ea6\u81ea\u9002\u5e94 fix_width_or_height \u9650\u5b9a\u5bbd\u5ea6\u548c\u9ad8\u5ea6\uff0c\u5bbd\u9ad8\u4e0d\u8db3\u65f6\u4e0d\u7f29\u653e fix_both \u56fa\u5b9a\u5bbd\u5ea6\u548c\u9ad8\u5ea6\uff0c\u5bbd\u9ad8\u4e0d\u8db3\u65f6\u5f3a\u884c\u7f29\u653e fix_max \u9650\u5b9a\u6700\u957f\u8fb9\uff0c\u77ed\u8fb9\u81ea\u9002\u5e94 fix_min \u9650\u5b9a\u6700\u77ed\u8fb9\uff0c\u957f\u8fb9\u81ea\u9002\u5e94 fix_scale \u7b49\u6bd4\u4f8b\u7f29\u653e\uff081-99\uff09 \u6ce8 2\uff1ax-gmkerl-value \u503c\u7684\u4f7f\u7528 \u82e5 x-gmkerl-type \u6307\u5b9a\u4e3a fix_width_or_height \u6216 fix_both \uff0c\u5219\uff0c x-gmkerl-value \u503c\u7684\u683c\u5f0f\u4e3a <width>x<height> \uff0c\u5982 480x576 \u3002 \u82e5 x-gmkerl-type \u4e3a\u5176\u4ed6\u7684\u7c7b\u578b\uff0c\u5219 x-gmkerl-value \u53ea\u9700\u6307\u5b9a\u5355\u4e2a\u6570\u5b57\uff0c\u5982 42 \uff0c\u610f\u4e3a\u9ad8\u5bbd\u540c\u4e3a 42\u3002 \u6ce8 3\uff1ax-gmkerl-crop \u503c\u7684\u4f7f\u7528 (x, y) \u5de6\u4e0a\u89d2\u5750\u6807\uff1b width \uff1a\u8981\u88c1\u526a\u7684\u5bbd\u5ea6\uff1b height \uff1a\u8981\u88c1\u526a\u7684\u9ad8\u5ea6\u3002x >= 0 && y >=0 && width > 0 && height > 0 \u4e14\u5fc5\u987b\u662f\u6b63\u6574\u578b\u3002 \u88c1\u526a\u53c2\u6570 (x,y) \u82e5\u5927\u4e8e\u539f\u56fe\u5927\u5c0f\uff0c\u5219\u5c06 (x,y) \u91cd\u7f6e\u4e3a (0,0) \u8fdb\u884c\u88c1\u526a\u3002 width+x \u82e5\u5927\u4e8e\u539f\u56fe\u7684\u5bbd\u5ea6\uff0c\u5219\u53ea\u88c1\u526a\u5230\u539f\u56fe\u7684\u6700\u5927\u5bbd\u5ea6\u4e3a\u6b62\uff0c\u4e0d\u8fdb\u884c\u7a7a\u767d\u753b\u5e03\u586b\u5145\u3002 heigth+y \u82e5\u5927\u4e8e\u539f\u56fe\u7684\u9ad8\u5ea6\uff0c\u5219\u53ea\u88c1\u526a\u5230\u539f\u56fe\u7684\u6700\u5927\u9ad8\u5ea6\u4e3a\u6b62\uff0c\u4e0d\u8fdb\u884c\u7a7a\u767d\u753b\u5e03\u586b\u5145\u3002 \u6ce8 4\uff1ax-gmkerl-rotate \u503c\u7684\u4f7f\u7528 \u82e5\u53c2\u6570\u8bbe\u7f6e\u4e3a auto \uff0c\u5219\u6839\u636e\u539f\u56fe\u7684 EXIF \u4fe1\u606f\u8fdb\u884c\u65cb\u8f6c\uff08\u65cb\u8f6c\u540e\u5c06\u4fee\u6539\u539f\u56fe\u7684 EXIF \u4fe1\u606f\uff09\uff0c\u5176\u4ed6\u53c2\u6570\u5219\u8fdb\u884c\u5f3a\u5236\u65cb\u8f6c\u3002 \u65cb\u8f6c\u5931\u8d25\u65f6\u82e5\u53c2\u6570\u4e3a auto \uff0c\u5219\u5ffd\u7565\u9519\u8bef\u8fdb\u884c\u4fdd\u5b58\u64cd\u4f5c\uff1b\u5176\u4ed6\u53c2\u6570\u5219\u76f4\u63a5\u8fd4\u56de\u9519\u8bef\u4fe1\u606f\u3002 \u6c34\u5370\u53c2\u6570 \u00b6 \u5728\u4e0a\u4f20\u56fe\u7247\u6587\u4ef6\u65f6\uff0c\u53ef\u4ee5\u901a\u8fc7\u6dfb\u52a0\u4e0b\u9762\u7684\u53c2\u6570\u8fdb\u884c\u6dfb\u52a0\u6587\u5b57\u6c34\u5370\u7684\u5904\u7406 \u53c2\u6570 \u8bf4\u660e x-gmkerl-watermark-text \u6587\u5b57\u6c34\u5370\u5185\u5bb9\uff0c\u5fc5\u987b\u7ecf\u8fc7 urlencode \u5904\u7406 x-gmkerl-watermark-font \u9ed8\u8ba4 simsun \u6587\u5b57\u6c34\u5370\u5b57\u4f53\uff08\u5177\u4f53\u8bf7\u53c2\u89c1\u6ce8 1\uff09 x-gmkerl-watermark-size \u9ed8\u8ba4 32 \uff1b\u6587\u5b57\u6c34\u5370\u5c3a\u5bf8\uff0c\u53d6\u503c\u5fc5\u987b\u4e3a\u6574\u6570\uff0c\u5355\u4f4d\u50cf\u7d20 x-gmkerl-watermark-align \u9ed8\u8ba4 top,left \u6c34\u5370\u5bf9\u9f50\u65b9\u5f0f \uff08\u5177\u4f53\u8bf7\u53c2\u89c1\u6ce8 2\uff09 x-gmkerl-watermark-margin \u9ed8\u8ba4 20,20 \u6c34\u5370\u8fb9\u8ddd\uff0c\u683c\u5f0f x,y \uff0c\u65e2 \u6c34\u5e73\u8fb9\u8ddd,\u5782\u76f4\u8fb9\u8ddd \uff08\u5982 20,20 \uff09\uff0c\u5355\u4f4d\u50cf\u7d20 x-gmkerl-watermark-opacity \u9ed8\u8ba4 0 \u6c34\u5370\u900f\u660e\u5ea6\uff0c\u53d6\u503c\u8303\u56f4 0 ~ 100 \u7684\u6574\u6570 x-gmkerl-watermark-color \u9ed8\u8ba4 #000000 \u6587\u5b57\u6c34\u5370\u989c\u8272\uff0cRGB \u503c x-gmkerl-watermark-border \u6587\u5b57\u6c34\u5370\u8fb9\u6846\uff0c\u9ed8\u8ba4\u65e0\u8fb9\u6846\uff0c\uff08\u5177\u4f53\u8bf7\u53c2\u89c1\u6ce8 3\uff09 \u6ce8 1\uff1ax-gmkerl-watermark-font \u503c\u53ef\u9009\u5217\u8868 \u76ee\u524d\u652f\u6301\u7684\u4e2d\u6587\u5b57\u4f53\u5305\u62ec\uff1a simsun \uff1a\u5b8b\u4f53(simsun) simhei \uff1a\u9ed1\u4f53 (simhei) simkai \uff1a\u6977\u4f53 (simkai) simli \uff1a\u96b6\u4e66 (simli) simyou \uff1a\u5e7c\u5706 (simyou) simfang \uff1a\u4eff\u5b8b (simfang) \u6ce8 2\uff1ax-gmkerl-watermark-align \u503c\u7684\u4f7f\u7528 \u683c\u5f0f valign,halign \uff0c\u65e2 \u5782\u76f4\u5bf9\u9f50,\u6c34\u5e73\u5bf9\u9f50 \uff08\u5982 bottom,right \uff09\uff0c\u53ef\u9009\u503c\u5305\u62ec\uff1a \u5782\u76f4\u5bf9\u9f50\uff1a top \uff0c middle \uff0c bottom \u6c34\u5e73\u5bf9\u9f50\uff1a left \uff0c center \uff0c right \u6ce8 3\uff1ax-gmkerl-watermark-border \u503c\u7684\u4f7f\u7528 \u683c\u5f0f rgba \uff0c\u65e2 RGB \u503c\u900f\u660e\u5ea6 \uff0c\u5982 #cccccccc","title":"Old thumb"},{"location":"api/old_thumb/#_1","text":"\u5728\u4e0a\u4f20\u56fe\u7247\u6587\u4ef6\u65f6\uff0c\u53ef\u4ee5\u901a\u8fc7\u6dfb\u52a0\u4e0b\u9762\u7684\u53c2\u6570\u8fdb\u884c\u6dfb\u52a0\u6587\u5b57\u6c34\u5370\u7684\u5904\u7406 \u53c2\u6570 \u8bf4\u660e x-gmkerl-watermark-text \u6587\u5b57\u6c34\u5370\u5185\u5bb9\uff0c\u5fc5\u987b\u7ecf\u8fc7 urlencode \u5904\u7406 x-gmkerl-watermark-font \u9ed8\u8ba4 simsun \u6587\u5b57\u6c34\u5370\u5b57\u4f53\uff08\u5177\u4f53\u8bf7\u53c2\u89c1\u6ce8 1\uff09 x-gmkerl-watermark-size \u9ed8\u8ba4 32 \uff1b\u6587\u5b57\u6c34\u5370\u5c3a\u5bf8\uff0c\u53d6\u503c\u5fc5\u987b\u4e3a\u6574\u6570\uff0c\u5355\u4f4d\u50cf\u7d20 x-gmkerl-watermark-align \u9ed8\u8ba4 top,left \u6c34\u5370\u5bf9\u9f50\u65b9\u5f0f \uff08\u5177\u4f53\u8bf7\u53c2\u89c1\u6ce8 2\uff09 x-gmkerl-watermark-margin \u9ed8\u8ba4 20,20 \u6c34\u5370\u8fb9\u8ddd\uff0c\u683c\u5f0f x,y \uff0c\u65e2 \u6c34\u5e73\u8fb9\u8ddd,\u5782\u76f4\u8fb9\u8ddd \uff08\u5982 20,20 \uff09\uff0c\u5355\u4f4d\u50cf\u7d20 x-gmkerl-watermark-opacity \u9ed8\u8ba4 0 \u6c34\u5370\u900f\u660e\u5ea6\uff0c\u53d6\u503c\u8303\u56f4 0 ~ 100 \u7684\u6574\u6570 x-gmkerl-watermark-color \u9ed8\u8ba4 #000000 \u6587\u5b57\u6c34\u5370\u989c\u8272\uff0cRGB \u503c x-gmkerl-watermark-border \u6587\u5b57\u6c34\u5370\u8fb9\u6846\uff0c\u9ed8\u8ba4\u65e0\u8fb9\u6846\uff0c\uff08\u5177\u4f53\u8bf7\u53c2\u89c1\u6ce8 3\uff09 \u6ce8 1\uff1ax-gmkerl-watermark-font \u503c\u53ef\u9009\u5217\u8868 \u76ee\u524d\u652f\u6301\u7684\u4e2d\u6587\u5b57\u4f53\u5305\u62ec\uff1a simsun \uff1a\u5b8b\u4f53(simsun) simhei \uff1a\u9ed1\u4f53 (simhei) simkai \uff1a\u6977\u4f53 (simkai) simli \uff1a\u96b6\u4e66 (simli) simyou \uff1a\u5e7c\u5706 (simyou) simfang \uff1a\u4eff\u5b8b (simfang) \u6ce8 2\uff1ax-gmkerl-watermark-align \u503c\u7684\u4f7f\u7528 \u683c\u5f0f valign,halign \uff0c\u65e2 \u5782\u76f4\u5bf9\u9f50,\u6c34\u5e73\u5bf9\u9f50 \uff08\u5982 bottom,right \uff09\uff0c\u53ef\u9009\u503c\u5305\u62ec\uff1a \u5782\u76f4\u5bf9\u9f50\uff1a top \uff0c middle \uff0c bottom \u6c34\u5e73\u5bf9\u9f50\uff1a left \uff0c center \uff0c right \u6ce8 3\uff1ax-gmkerl-watermark-border \u503c\u7684\u4f7f\u7528 \u683c\u5f0f rgba \uff0c\u65e2 RGB \u503c\u900f\u660e\u5ea6 \uff0c\u5982 #cccccccc","title":"\u6c34\u5370\u53c2\u6570"},{"location":"api/purge/","text":"\u5f53\u6e90\u7ad9\u7684\u8d44\u6e90\u53d1\u751f\u53d8\u66f4\u540e\uff0c\u53ef\u4ee5\u8c03\u7528\u8be5 API \u63a5\u53e3\u544a\u77e5\u53c8\u62cd\u4e91\u5237\u65b0\u7f13\u5b58\uff0c\u7f13\u5b58\u66f4\u65b0\u540e\uff0c\u7528\u6237\u8bbf\u95ee\u65f6\u4f1a\u83b7\u53d6\u5230\u66f4\u65b0\u540e\u7684\u8d44\u6e90\u3002 \u7279\u522b\u5730\uff0c\u4f7f\u7528\u53c8\u62cd\u4e91\u5b58\u50a8\u4f1a\u5728\u8d44\u6e90\u53d8\u66f4\u540e\uff0c\u81ea\u52a8\u5237\u65b0\u7f13\u5b58\uff0c\u7701\u53bb\u4f7f\u7528\u81ea\u4e3b\u6e90\u7ad9\u7f13\u5b58\u5237\u65b0\u8fd9\u4e00\u6b65\u3002 API \u5730\u5740 \u00b6 http://purge.upyun.com/purge/ \u8bf7\u6c42\u65b9\u6cd5 \u00b6 curl -X POST \\ http://purge.upyun.com/purge/ \\ -H \"Authorization: <your_authorization>\" \\ -H \"Date: <date>\" \\ -F purge=<url-list> \u5176\u4e2d\uff0c\u8bf7\u6c42\u5934\u90e8\u7684 Authorization \u7684\u5934\u90e8\u7b7e\u540d\u7b97\u6cd5\u5982\u4e0b\u6240\u793a\uff1a \u5c06\u9700\u8981\u5237\u65b0\u7684\u6587\u4ef6 URL\uff08\u4ee5 http:// \u5f00\u5934\uff09 \u4ee5 \\n \u4e3a\u95f4\u9694\u7b26\u8fde\u63a5 \u5c06\u7b2c 1 \u6b65\u6240\u5f97\u5b57\u7b26\u4e32\u3001\u7a7a\u95f4\u540d\u3001\u65e5\u671f\uff08GMT \u683c\u5f0f\uff09\u3001\u7ecf\u8fc7 MD5 \u5904\u7406\u540e\u7684\u64cd\u4f5c\u5458\u5bc6\u7801\u7528 & \u62fc\u63a5 \u5c06\u7b2c 2 \u6b65\u6240\u5f97\u5b57\u7b26\u4e32\u8fdb\u884c MD5 \u7f16\u7801\u5904\u7406\uff0c\u6240\u5f97\u8bb0\u4e3a sign , \u6700\u540e\uff0c\u5c06\u7a7a\u95f4\u540d\uff0c\u64cd\u4f5c\u5458\u540d\u548c\u7b2c 3 \u6b65\u6240\u5f97\u7684 sign \u4ee5\u5982\u4e0b\u683c\u5f0f\u4f5c\u4e3a\u8bf7\u6c42\u5934\u53c2\u6570\u4f20\u9012\uff1a Authorization: UpYun <bucket-name>:<operator-name>:<sign> \u53e6\u5916\uff0c\u9700\u5c06\u5f85\u5237\u65b0\u7684 URL \u5217\u8868\u5728\u4ee5\u6362\u884c\u7b26 \\n \u8fde\u63a5\u540e\u4ee5\u8868\u5355\u5b57\u6bb5 purge \u968f\u8bf7\u6c42\u53d1\u9001\u3002 \u54cd\u5e94\u72b6\u6001 \u00b6 \u72b6\u6001\u7801 \u8bf4\u660e 200 json \u683c\u5f0f\u7684\u5b57\u7b26\u4e32{invalid_domain_of_url:\u4e0d\u5c5e\u4e8e\u81ea\u5df1\u57df\u540d\u7684 url \u5217\u8868} 401 \u65e0\u8ba4\u8bc1\u5934\u90e8\u4fe1\u606f\uff08Authorization\uff09\uff08\u63d0\u793a\u4fe1\u606f\uff1aNeed Authorization Header\uff09 401 \u65e0\u8ba4\u8bc1\u5934\u90e8\u4fe1\u606f\uff08Date\uff09\uff08\u63d0\u793a\u4fe1\u606f\uff1aNeed Date Header\uff09 401 \u64cd\u4f5c\u5458\u4e0d\u5b58\u5728\uff08\u63d0\u793a\u4fe1\u606f\uff1aUser is not exists\uff09 401 \u7a7a\u95f4\u540d\u4e0d\u5b58\u5728\uff08\u63d0\u793a\u4fe1\u606f\uff1aBucket is not exists\uff09 401 \u8bf7\u6c42\u65f6\u95f4\u8d85\u51fa 30 \u5206\u949f\uff08\u63d0\u793a\u4fe1\u606f\uff1aDate offset error\uff09 401 \u7b7e\u540d\u9519\u8bef\uff08\u63d0\u793a\u4fe1\u606f\uff1aSign error\uff09 406 \u6bcf\u5206\u949f\u5237\u65b0 URL \u4e2a\u6570\u8d85\u8fc7 600 \u9650\u5236","title":"\u7f13\u5b58\u5237\u65b0"},{"location":"api/purge/#api","text":"http://purge.upyun.com/purge/","title":"API \u5730\u5740"},{"location":"api/purge/#_1","text":"curl -X POST \\ http://purge.upyun.com/purge/ \\ -H \"Authorization: <your_authorization>\" \\ -H \"Date: <date>\" \\ -F purge=<url-list> \u5176\u4e2d\uff0c\u8bf7\u6c42\u5934\u90e8\u7684 Authorization \u7684\u5934\u90e8\u7b7e\u540d\u7b97\u6cd5\u5982\u4e0b\u6240\u793a\uff1a \u5c06\u9700\u8981\u5237\u65b0\u7684\u6587\u4ef6 URL\uff08\u4ee5 http:// \u5f00\u5934\uff09 \u4ee5 \\n \u4e3a\u95f4\u9694\u7b26\u8fde\u63a5 \u5c06\u7b2c 1 \u6b65\u6240\u5f97\u5b57\u7b26\u4e32\u3001\u7a7a\u95f4\u540d\u3001\u65e5\u671f\uff08GMT \u683c\u5f0f\uff09\u3001\u7ecf\u8fc7 MD5 \u5904\u7406\u540e\u7684\u64cd\u4f5c\u5458\u5bc6\u7801\u7528 & \u62fc\u63a5 \u5c06\u7b2c 2 \u6b65\u6240\u5f97\u5b57\u7b26\u4e32\u8fdb\u884c MD5 \u7f16\u7801\u5904\u7406\uff0c\u6240\u5f97\u8bb0\u4e3a sign , \u6700\u540e\uff0c\u5c06\u7a7a\u95f4\u540d\uff0c\u64cd\u4f5c\u5458\u540d\u548c\u7b2c 3 \u6b65\u6240\u5f97\u7684 sign \u4ee5\u5982\u4e0b\u683c\u5f0f\u4f5c\u4e3a\u8bf7\u6c42\u5934\u53c2\u6570\u4f20\u9012\uff1a Authorization: UpYun <bucket-name>:<operator-name>:<sign> \u53e6\u5916\uff0c\u9700\u5c06\u5f85\u5237\u65b0\u7684 URL \u5217\u8868\u5728\u4ee5\u6362\u884c\u7b26 \\n \u8fde\u63a5\u540e\u4ee5\u8868\u5355\u5b57\u6bb5 purge \u968f\u8bf7\u6c42\u53d1\u9001\u3002","title":"\u8bf7\u6c42\u65b9\u6cd5"},{"location":"api/purge/#_2","text":"\u72b6\u6001\u7801 \u8bf4\u660e 200 json \u683c\u5f0f\u7684\u5b57\u7b26\u4e32{invalid_domain_of_url:\u4e0d\u5c5e\u4e8e\u81ea\u5df1\u57df\u540d\u7684 url \u5217\u8868} 401 \u65e0\u8ba4\u8bc1\u5934\u90e8\u4fe1\u606f\uff08Authorization\uff09\uff08\u63d0\u793a\u4fe1\u606f\uff1aNeed Authorization Header\uff09 401 \u65e0\u8ba4\u8bc1\u5934\u90e8\u4fe1\u606f\uff08Date\uff09\uff08\u63d0\u793a\u4fe1\u606f\uff1aNeed Date Header\uff09 401 \u64cd\u4f5c\u5458\u4e0d\u5b58\u5728\uff08\u63d0\u793a\u4fe1\u606f\uff1aUser is not exists\uff09 401 \u7a7a\u95f4\u540d\u4e0d\u5b58\u5728\uff08\u63d0\u793a\u4fe1\u606f\uff1aBucket is not exists\uff09 401 \u8bf7\u6c42\u65f6\u95f4\u8d85\u51fa 30 \u5206\u949f\uff08\u63d0\u793a\u4fe1\u606f\uff1aDate offset error\uff09 401 \u7b7e\u540d\u9519\u8bef\uff08\u63d0\u793a\u4fe1\u606f\uff1aSign error\uff09 406 \u6bcf\u5206\u949f\u5237\u65b0 URL \u4e2a\u6570\u8d85\u8fc7 600 \u9650\u5236","title":"\u54cd\u5e94\u72b6\u6001"},{"location":"api/quick_start/","text":"\u5f00\u59cb\u4f7f\u7528\u53c8\u62cd\u4e91\u5b58\u50a8 \u00b6 \u53c8\u62cd\u4e91\u5b58\u50a8\u662f\u9762\u5411\u5bf9\u8c61\u7684\u5b58\u50a8\u670d\u52a1\uff0c\u5b83\u4e0e\u53c8\u62cd\u4e91 CDN \u65e0\u7f1d\u8854\u63a5\u5728\u4e00\u8d77\uff0c\u5728\u60a8\u4f7f\u7528\u5b83\u7684\u540c\u65f6\uff0c\u4e5f\u5728\u4f7f\u7528\u53c8\u62cd\u4e91 CDN\u3002\u5728\u4f7f\u7528\u53c8\u62cd\u4e91\u5b58\u50a8\u4e4b\u524d\uff0c\u8bf7\u786e\u4fdd\u60a8\u5df2\u7ecf\u6ce8\u518c\u4e86\u53c8\u62cd\u4e91\u8d26\u53f7\u5e76\u5b8c\u6210\u5b9e\u540d\u9a8c\u8bc1\u3002 \u521b\u5efa\u670d\u52a1 \u00b6 \u767b\u5f55\u53c8\u62cd\u4e91\u63a7\u5236\u53f0\uff0c\u5728 \u300c\u4e91\u4ea7\u54c1\u300d \u4e2d\u9009\u62e9 \u300c\u4e91\u5b58\u50a8\u300d\uff0c\u70b9\u51fb \u300c\u521b\u5efa\u670d\u52a1\u300d \u3002 \u8f93\u5165 \u300c\u670d\u52a1\u540d\u79f0\u300d\uff0c\u5e76\u4e3a\u8be5\u670d\u52a1\u521b\u5efa\u6216\u6388\u6743\u64cd\u4f5c\u5458\u3002 \u70b9\u51fb \u300c\u521b\u5efa\u300d\uff0c\u4e91\u5b58\u50a8\u670d\u52a1\u521b\u5efa\u6210\u529f\u3002 \u670d\u52a1\u4f7f\u7528 \u00b6 \u53c8\u62cd\u4e91\u5b58\u50a8\u63d0\u4f9b\u4e86\u591a\u79cd\u65b9\u5f0f\u4f7f\u7528\u670d\u52a1\uff0c\u60a8\u53ef\u4ee5\u6839\u636e\u60c5\u51b5\uff0c\u9009\u62e9\u5408\u9002\u7684\u65b9\u5f0f\u3002 \u56fe\u5f62\u5316\u5de5\u5177\uff1a FTP/FTPS \u547d\u4ee4\u884c\u5de5\u5177\uff1a UPX \uff0c cURL SDK\uff1a \u5404\u8bed\u8a00 SDK API\uff1a REST API \uff0c FORM API \u64cd\u4f5c\u5458\u4f7f\u7528 \u00b6 \u5728 \u521b\u5efa\u670d\u52a1 \u65f6\uff0c\u521b\u5efa\u6216\u6388\u6743\u64cd\u4f5c\u5458\u3002 \u5728\u300c\u914d\u7f6e\u300d>\u300c\u5185\u5bb9\u7ba1\u7406\u300d>\u300c\u64cd\u4f5c\u5458\u6388\u6743\u300d\u4e2d\uff0c\u521b\u5efa\u6216\u6388\u6743\u64cd\u4f5c\u5458\u3002 \u5728\u300c\u8d26\u53f7\u300d>\u300c\u8d26\u53f7\u7ba1\u7406\u300d>\u300c\u64cd\u4f5c\u5458\u7ba1\u7406\u300d\u4e2d\uff0c\u7ba1\u7406\u64cd\u4f5c\u5458\u3002 \u64cd\u4f5c\u5458\u7684\u89e3\u91ca\u8bf4\u660e\uff0c\u89c1 \u57fa\u672c\u6982\u5ff5 \u3002 \u5220\u9664\u670d\u52a1 \u00b6 \u767b\u5f55\u53c8\u62cd\u4e91\u63a7\u5236\u53f0\uff0c\u9009\u62e9 \u300c\u4e91\u5b58\u50a8\u300d\uff0c\u5148 \u300c\u5173\u95ed\u300d \u9700\u8981\u5220\u9664\u7684\u670d\u52a1\uff0c\u7136\u540e\u70b9 \u300c\u5220\u9664\u300d\uff0c\u5373\u53ef\u4ee5\u5220\u9664\u670d\u52a1\u3002 \u7279\u522b\u5730\uff0c\u670d\u52a1\u5220\u9664\u524d\uff0c\u9700\u8981\u6e05\u7a7a\u670d\u52a1\u4e0b\u7684\u6570\u636e\uff1b\u670d\u52a1\u5220\u9664\u540e\uff0c\u4e03\u5929\u5185\u4e0d\u80fd\u521b\u5efa\u540c\u540d\u670d\u52a1\u3002 \u5982\u6709\u7591\u95ee\u8bf7 \u8054\u7cfb\u6211\u4eec","title":"\u5feb\u901f\u5165\u95e8"},{"location":"api/quick_start/#_1","text":"\u53c8\u62cd\u4e91\u5b58\u50a8\u662f\u9762\u5411\u5bf9\u8c61\u7684\u5b58\u50a8\u670d\u52a1\uff0c\u5b83\u4e0e\u53c8\u62cd\u4e91 CDN \u65e0\u7f1d\u8854\u63a5\u5728\u4e00\u8d77\uff0c\u5728\u60a8\u4f7f\u7528\u5b83\u7684\u540c\u65f6\uff0c\u4e5f\u5728\u4f7f\u7528\u53c8\u62cd\u4e91 CDN\u3002\u5728\u4f7f\u7528\u53c8\u62cd\u4e91\u5b58\u50a8\u4e4b\u524d\uff0c\u8bf7\u786e\u4fdd\u60a8\u5df2\u7ecf\u6ce8\u518c\u4e86\u53c8\u62cd\u4e91\u8d26\u53f7\u5e76\u5b8c\u6210\u5b9e\u540d\u9a8c\u8bc1\u3002","title":"\u5f00\u59cb\u4f7f\u7528\u53c8\u62cd\u4e91\u5b58\u50a8"},{"location":"api/quick_start/#_2","text":"\u767b\u5f55\u53c8\u62cd\u4e91\u63a7\u5236\u53f0\uff0c\u5728 \u300c\u4e91\u4ea7\u54c1\u300d \u4e2d\u9009\u62e9 \u300c\u4e91\u5b58\u50a8\u300d\uff0c\u70b9\u51fb \u300c\u521b\u5efa\u670d\u52a1\u300d \u3002 \u8f93\u5165 \u300c\u670d\u52a1\u540d\u79f0\u300d\uff0c\u5e76\u4e3a\u8be5\u670d\u52a1\u521b\u5efa\u6216\u6388\u6743\u64cd\u4f5c\u5458\u3002 \u70b9\u51fb \u300c\u521b\u5efa\u300d\uff0c\u4e91\u5b58\u50a8\u670d\u52a1\u521b\u5efa\u6210\u529f\u3002","title":"\u521b\u5efa\u670d\u52a1"},{"location":"api/quick_start/#_3","text":"\u53c8\u62cd\u4e91\u5b58\u50a8\u63d0\u4f9b\u4e86\u591a\u79cd\u65b9\u5f0f\u4f7f\u7528\u670d\u52a1\uff0c\u60a8\u53ef\u4ee5\u6839\u636e\u60c5\u51b5\uff0c\u9009\u62e9\u5408\u9002\u7684\u65b9\u5f0f\u3002 \u56fe\u5f62\u5316\u5de5\u5177\uff1a FTP/FTPS \u547d\u4ee4\u884c\u5de5\u5177\uff1a UPX \uff0c cURL SDK\uff1a \u5404\u8bed\u8a00 SDK API\uff1a REST API \uff0c FORM API","title":"\u670d\u52a1\u4f7f\u7528"},{"location":"api/quick_start/#_4","text":"\u5728 \u521b\u5efa\u670d\u52a1 \u65f6\uff0c\u521b\u5efa\u6216\u6388\u6743\u64cd\u4f5c\u5458\u3002 \u5728\u300c\u914d\u7f6e\u300d>\u300c\u5185\u5bb9\u7ba1\u7406\u300d>\u300c\u64cd\u4f5c\u5458\u6388\u6743\u300d\u4e2d\uff0c\u521b\u5efa\u6216\u6388\u6743\u64cd\u4f5c\u5458\u3002 \u5728\u300c\u8d26\u53f7\u300d>\u300c\u8d26\u53f7\u7ba1\u7406\u300d>\u300c\u64cd\u4f5c\u5458\u7ba1\u7406\u300d\u4e2d\uff0c\u7ba1\u7406\u64cd\u4f5c\u5458\u3002 \u64cd\u4f5c\u5458\u7684\u89e3\u91ca\u8bf4\u660e\uff0c\u89c1 \u57fa\u672c\u6982\u5ff5 \u3002","title":"\u64cd\u4f5c\u5458\u4f7f\u7528"},{"location":"api/quick_start/#_5","text":"\u767b\u5f55\u53c8\u62cd\u4e91\u63a7\u5236\u53f0\uff0c\u9009\u62e9 \u300c\u4e91\u5b58\u50a8\u300d\uff0c\u5148 \u300c\u5173\u95ed\u300d \u9700\u8981\u5220\u9664\u7684\u670d\u52a1\uff0c\u7136\u540e\u70b9 \u300c\u5220\u9664\u300d\uff0c\u5373\u53ef\u4ee5\u5220\u9664\u670d\u52a1\u3002 \u7279\u522b\u5730\uff0c\u670d\u52a1\u5220\u9664\u524d\uff0c\u9700\u8981\u6e05\u7a7a\u670d\u52a1\u4e0b\u7684\u6570\u636e\uff1b\u670d\u52a1\u5220\u9664\u540e\uff0c\u4e03\u5929\u5185\u4e0d\u80fd\u521b\u5efa\u540c\u540d\u670d\u52a1\u3002 \u5982\u6709\u7591\u95ee\u8bf7 \u8054\u7cfb\u6211\u4eec","title":"\u5220\u9664\u670d\u52a1"},{"location":"api/rest_api/","text":"\u57fa\u4e8e RESTful \u67b6\u6784\u7684 API\uff0c\u60a8\u53ef\u4ee5\u4f7f\u7528\u4efb\u4f55\u7f16\u7a0b\u8bed\u8a00\u53d1\u9001 HTTP/HTTPS \u8bf7\u6c42\u4e0e\u4e91\u5b58\u50a8\u901a\u4fe1\u3002\u7279\u522b\u5730\uff0c\u6587\u4e2d\u8bf7\u6c42\u53c2\u6570\u5747\u901a\u8fc7 HTTP/HTTPS \u8bf7\u6c42\u5934\u4ee5 Key: Value \u7684\u5f62\u5f0f\u4f20\u9012\u3002 \u8bf7\u6c42\u65b9\u6cd5 \u00b6 curl -X GET \\ http://v0.api.upyun.com/<bucket>/<path> \\ -H \"Authorization: UPYUN <Operator>:<Signature>\" \\ -H \"Date: <Wed, 29 Oct 2014 11:26:58 GMT>\"\\ -H \"Content-MD5: <Content-MD5>\"\\ # \u5176\u4ed6\u53ef\u9009\u53c2\u6570... \u57fa\u672c\u57df\u540d \u667a\u80fd\u9009\u8def\uff08\u63a8\u8350\uff09\uff1a v0.api.upyun.com \u7535\u4fe1\u7ebf\u8def\uff1a v1.api.upyun.com \u8054\u901a\uff08\u7f51\u901a\uff09\u7ebf\u8def\uff1a v2.api.upyun.com \u79fb\u52a8\uff08\u94c1\u901a\uff09\u7ebf\u8def\uff1a v3.api.upyun.com \u8ba4\u8bc1\u9274\u6743 \u8be6\u89c1 \u7b7e\u540d\u8ba4\u8bc1 \u3002 \u4e0a\u4f20\u6587\u4ef6 \u00b6 \u628a\u6587\u4ef6\u4e0a\u4f20\u81f3\u53c8\u62cd\u4e91\u5b58\u50a8\u3002\u5728\u4e0a\u4f20\u56fe\u7247\u6587\u4ef6\u65f6\uff0c\u53ef\u4ee5\u8bbe\u7f6e\u9884\u5904\u7406\u53c2\u6570\uff0c\u56fe\u7247\u4f1a\u5904\u7406\u540e\u518d\u4fdd\u5b58\u3002 PUT /<bucket>/path/to/file \u4e0a\u4f20\u53c2\u6570 \u53c2\u6570 \u5fc5\u9009 \u7c7b\u578b \u8bf4\u660e Date \u662f String \u8bf7\u6c42\u65e5\u671f\u65f6\u95f4\uff0cGMT \u683c\u5f0f\u5b57\u7b26\u4e32 ( RFC 1123 )\uff0c\u5982 Wed, 29 Oct 2014 02:26:58 GMT Content-Length \u662f String \u8bf7\u6c42\u5185\u5bb9\u957f\u5ea6 Content-MD5 \u5426 String \u4e0a\u4f20\u6587\u4ef6\u7684 MD5 \u503c\uff0c\u5982\u679c\u8bf7\u6c42\u4e2d\u6587\u4ef6\u592a\u5927\u8ba1\u7b97 MD5 \u4e0d\u65b9\u4fbf\uff0c\u53ef\u4ee5\u4e3a\u7a7a Content-Type \u5426 String \u6587\u4ef6\u7c7b\u578b\uff0c\u9ed8\u8ba4\u4f7f\u7528\u6587\u4ef6\u6269\u5c55\u540d\u4f5c\u4e3a\u6587\u4ef6\u7c7b\u578b Content-Secret \u5426 String \u6587\u4ef6\u5bc6\u94a5\uff0c\u7528\u4e8e\u4fdd\u62a4\u6587\u4ef6\uff0c\u9632\u6b62\u6587\u4ef6\u88ab\u76f4\u63a5\u8bbf\u95ee\uff0c\u89c1 Content-Secret \u53c2\u6570\u8bf4\u660e x-upyun-meta-x \u5426 String \u6587\u4ef6\u5143\u4fe1\u606f\uff0c\u89c1 Metadata x-upyun-meta-ttl \u5426 Integer \u6587\u4ef6\u5143\u4fe1\u606f, \u6307\u5b9a\u6587\u4ef6\u7684\u751f\u5b58\u65f6\u95f4\uff0c\u5355\u4f4d\u5929\uff0c\u6700\u5927\u652f\u6301180\u5929\uff0c\u89c1 Metadata x-gmkerl-thumb \u5426 String \u56fe\u7247\u9884\u5904\u7406\u53c2\u6570\uff0c\u89c1 \u4e0a\u4f20\u9884\u5904\u7406\uff08\u540c\u6b65\uff09 \u54cd\u5e94\u4fe1\u606f \u4e0a\u4f20\u6210\u529f\uff1a\u8fd4\u56de 200 \uff0c\u5f53\u4e0a\u4f20\u6587\u4ef6\u662f\u56fe\u7247\u4e14\u8bbe\u7f6e x-gmkerl-xxx \u65f6\uff0c\u5305\u542b\u56fe\u7247 \u57fa\u672c\u4fe1\u606f \uff08\u5305\u62ec\u56fe\u7247\u5bbd\u3001\u9ad8\u3001\u683c\u5f0f\u3001\u5e27\u6570\uff09\uff0c\u4f8b\u5982\uff1a > HTTP/1.1 200 OK > x-upyun-width: 50 > x-upyun-height: 50 > x-upyun-file-type: JPEG > x-upyun-frames: 1 \u4e0a\u4f20\u5931\u8d25\uff1a\u8fd4\u56de\u76f8\u5e94\u7684\u51fa\u9519\u4fe1\u606f\uff0c\u5177\u4f53\u8bf7\u53c2\u9605\u300c API \u9519\u8bef\u7801\u8868 \u300d\u3002 Content-Secret \u53c2\u6570\u8bf4\u660e \u6587\u4ef6\u8bbe\u7f6e Content-Secret \u540e\uff0c\u6587\u4ef6\u5c06\u4e0d\u80fd\u88ab\u76f4\u63a5\u8bbf\u95ee\uff0c\u82e5\u9700\u8bbf\u95ee\uff0c\u9700\u8981\u5728 URL \u540e\u52a0\u4e0a \u300c\u95f4\u9694\u6807\u8bc6\u7b26\u300d \u548c \u300c\u6587\u4ef6\u5bc6\u94a5\u300d\u3002\u5982\uff1a \u95f4\u9694\u7b26\u4e3a ! \uff0c Content-Secret \u4e3a abc \uff0c\u56fe\u7247\u8bbf\u95ee\u65b9\u5f0f\u4e3a\uff1a https://p.upyun.com/docs/cloud/secret.jpg!abc \u3002 \u95f4\u9694\u6807\u8bc6\u7b26 \u7528\u4e8e\u5206\u9694\u6587\u4ef6 URL \u548c\u6587\u4ef6\u5bc6\u94a5\uff0c\u6709 3 \u79cd\u53ef\u9009\uff0c\u5206\u522b\u662f\uff1a!\uff08\u611f\u53f9\u53f7/\u9ed8\u8ba4\u503c\uff09\u3001-\uff08\u4e2d\u5212\u7ebf\uff09\u548c _\uff08\u4e0b\u5212\u7ebf\uff09\uff0c\u53ef\u767b\u5f55\u53c8\u62cd\u4e91 \u63a7\u5236\u53f0 \uff0c\u5728 \u300c\u670d\u52a1\u300d > \u300c\u529f\u80fd\u914d\u7f6e\u300d > \u300c\u4e91\u5904\u7406\u300d \u4e2d\u8bbe\u7f6e\u3002 \u5220\u9664\u6216\u4fee\u6539 Content-Secret \uff0c\u89c1 Metadata \u7684 \u5e38\u89c1\u5e94\u7528\u6848\u4f8b \u3002 \u5982\u679c\u539f\u6587\u4ef6\u662f\u4e00\u5f20\u56fe\u7247\uff0c\u9664\u4e86\u901a\u8fc7\u6587\u4ef6\u5bc6\u7801\u8fdb\u884c\u8bbf\u95ee\u5916\uff0c\u8fd8\u53ef\u4ee5\u901a\u8fc7 \u56fe\u7247\u5904\u7406 \u8fdb\u884c\u8bbf\u95ee\u3002 \u5982\u679c\u539f\u6587\u4ef6\u662f\u4e00\u5f20\u56fe\u7247\uff0c\u6587\u4ef6\u5bc6\u94a5\u5e94\u907f\u514d\u4e0e \u7f29\u7565\u56fe\u7248\u672c \u51b2\u7a81\uff0c\u5982\u679c\u51b2\u7a81\uff0c\u6587\u4ef6\u5bc6\u94a5\u7684\u4f18\u5148\u7ea7\u5927\u4e8e\u7f29\u7565\u56fe\u7248\u672c\u3002 \u65ad\u70b9\u7eed\u4f20 \u00b6 \u5728\u4e0a\u4f20\u5927\u6587\u4ef6\u6216\u79fb\u52a8\u7aef\u4e0a\u4f20\u6587\u4ef6\u65f6\uff0c\u56e0\u4e3a\u7f51\u7edc\u8d28\u91cf\u3001\u4f20\u8f93\u65f6\u95f4\u8fc7\u957f\u7b49\u539f\u56e0\u9020\u6210\u4e0a\u4f20\u5931\u8d25\uff0c\u53ef\u4ee5\u4f7f\u7528\u65ad\u70b9\u7eed\u4f20\u3002\u7279\u522b\u5730\uff0c\u65ad\u70b9\u7eed\u4f20\u4e0a\u4f20\u7684\u56fe\u7247\u4e0d\u652f\u6301\u9884\u5904\u7406\u3002\u7279\u522b\u5730\uff0c\u65ad\u70b9\u7eed\u4f20\u4e0a\u4f20\u7684\u6587\u4ef6\u4e0d\u80fd\u4f7f\u7528\u5176\u4ed6\u4e0a\u4f20\u65b9\u5f0f\u8986\u76d6\uff0c\u5982\u679c\u9700\u8981\u8986\u76d6\uff0c\u987b\u5148\u5220\u9664\u6587\u4ef6\u3002 \u540d\u79f0\u6982\u5ff5 \u00b6 \u6587\u4ef6\u5206\u5757\uff1a\u76f4\u63a5\u5207\u5206\u4e8c\u8fdb\u5236\u6587\u4ef6\u6210\u5c0f\u5757\u3002\u5206\u5757\u5927\u5c0f\u56fa\u5b9a\u4e3a 1M\u3002\u6700\u540e\u4e00\u4e2a\u5206\u5757\u9664\u5916\u3002 \u4e0a\u4f20\u9636\u6bb5\uff1a\u4f7f\u7528 x-upyun-multi-stage \u53c2\u6570\u6765\u6307\u793a\u65ad\u70b9\u7eed\u4f20\u7684\u9636\u6bb5\u3002\u5206\u4e3a\u4ee5\u4e0b\u4e09\u4e2a\u9636\u6bb5: initate (\u4e0a\u4f20\u521d\u59cb\u5316), upload (\u4e0a\u4f20\u4e2d), complete (\u4e0a\u4f20\u7ed3\u675f)\u3002\u5404\u9636\u6bb5\u4f9d\u6b21\u8fdb\u884c\u3002 \u5206\u7247\u5e8f\u53f7\uff1a\u4f7f\u7528 x-upyun-part-id \u53c2\u6570\u6765\u6307\u793a\u5f53\u524d\u7684\u5206\u7247\u5e8f\u53f7\uff0c\u5e8f\u53f7\u4ece 0 \u8d77\u7b97\u3002 \u987a\u5e8f\u4e0a\u4f20\uff1a\u5bf9\u4e8e\u540c\u4e00\u4e2a\u65ad\u70b9\u7eed\u4f20\u4efb\u52a1\uff0c\u53ea\u652f\u6301\u987a\u5e8f\u4e0a\u4f20\u3002 \u4e0a\u4f20\u6807\u8bc6\uff1a\u4f7f\u7528 x-upyun-multi-uuid \u53c2\u6570\u6765\u552f\u4e00\u6807\u8bc6\u4e00\u6b21\u4e0a\u4f20\u4efb\u52a1, \u7c7b\u578b\u4e3a\u5b57\u7b26\u4e32, \u957f\u5ea6\u4e3a 36 \u4f4d\u3002 \u4e0a\u4f20\u6e05\u7406\uff1a\u65ad\u70b9\u7eed\u4f20\u672a\u5b8c\u6210\u7684\u6587\u4ef6\uff0c\u4f1a\u4fdd\u5b58 24 \u5c0f\u65f6\uff0c\u8d85\u8fc7\u540e\uff0c\u6587\u4ef6\u4f1a\u88ab\u5220\u9664\u3002 \u521d\u59cb\u5316\u65ad\u70b9\u7eed\u4f20 \u00b6 PUT /<bucket>/path/to/file \u8bf7\u6c42\u53c2\u6570 \u53c2\u6570 \u5fc5\u9009 \u7c7b\u578b \u8bf4\u660e Content-Length \u662f String \u8bf7\u6c42\u5185\u5bb9\u957f\u5ea6 x-upyun-multi-stage \u662f String \u503c\u4e3a initiate \uff0c \u8868\u793a\u521d\u59cb\u5316\u4e0a\u4f20\u4efb\u52a1 x-upyun-multi-length \u662f String \u5f85\u4e0a\u4f20\u6587\u4ef6\u5927\u5c0f\uff0c\u6574\u578b\uff0c\u5355\u4f4d Byte x-upyun-multi-type \u5426 String \u5f85\u4e0a\u4f20\u6587\u4ef6\u7684 MIME \u7c7b\u578b\uff0c\u9ed8\u8ba4 application/octet-stream \uff0c\u5efa\u8bae\u81ea\u884c\u8bbe\u7f6e x-upyun-meta-x \u5426 String \u7528\u4e8e\u989d\u5916\u6307\u5b9a\u6587\u4ef6\u7684\u5143\u4fe1\u606f\uff0c\u8be6\u89c1 Metadata x-upyun-meta-ttl \u5426 Integer \u6587\u4ef6\u5143\u4fe1\u606f, \u6307\u5b9a\u6587\u4ef6\u7684\u751f\u5b58\u65f6\u95f4\uff0c\u5355\u4f4d\u5929\uff0c\u6700\u5927\u652f\u6301180\u5929\uff0c\u89c1 Metadata \u54cd\u5e94\u4fe1\u606f \u521d\u59cb\u5316\u65ad\u70b9\u7eed\u4f20\u6210\u529f\u8fd4\u56de 204 \u72b6\u6001\u7801, \u5305\u62ec\u4ee5\u4e0b\u54cd\u5e94\u53c2\u6570\uff1a \u53c2\u6570 \u7c7b\u578b \u8bf4\u660e x-upyun-multi-uuid String \u672c\u6b21\u4e0a\u4f20\u4efb\u52a1\u7684\u6807\u8bc6 x-upyun-next-part-id String \u4e0b\u4e00\u4e2a\u5206\u5757\u5e8f\u53f7\u3002\u56e0\u4e3a\u662f\u521d\u59cb\u5316\u9636\u6bb5\uff0c\u6240\u4ee5\u503c\u4e3a 0 \u4e0a\u4f20\u5931\u8d25\u65f6\u8fd4\u56de\u76f8\u5e94\u7684\u51fa\u9519\u4fe1\u606f\uff0c\u5177\u4f53\u8bf7\u53c2\u9605\u300c API \u9519\u8bef\u7801\u8868 \u300d\u3002 \u7eed\u4f20\u6570\u636e \u00b6 PUT /<bucket>/path/to/file \u8bf7\u6c42\u53c2\u6570 \u53c2\u6570 \u5fc5\u9009 \u7c7b\u578b \u8bf4\u660e Content-Length \u662f String \u8bf7\u6c42\u5185\u5bb9\u957f\u5ea6 x-upyun-multi-stage \u662f String \u503c\u4e3a upload \uff0c \u8868\u793a\u5f00\u59cb\u4e0a\u4f20\u6587\u4ef6\u6570\u636e x-upyun-multi-uuid \u662f String \u672c\u6b21\u4e0a\u4f20\u4efb\u52a1\u7684\u6807\u8bc6\uff0c\u662f\u521d\u59cb\u5316\u65ad\u70b9\u7eed\u4f20\u4efb\u52a1\u65f6\u54cd\u5e94\u4fe1\u606f\u4e2d\u7684 x-upyun-multi-uuid x-upyun-part-id \u662f String \u6307\u5b9a\u6b64\u6b21\u5206\u7247\u7684\u552f\u4e00 ID\uff0c\u5e94\u4e25\u683c\u7b49\u4e8e\u4e0a\u4e00\u6b21\u8bf7\u6c42\u8fd4\u56de\u7684 x-upyun-next-part-id Content-MD5 \u5426 String \u6240\u4e0a\u4f20\u5206\u5757\u7684 MD5 \u503c\uff0c\u7b49\u6548\u4e8e \u7b7e\u540d\u8ba4\u8bc1 \u4e2d\u7684 Content-MD5 \u54cd\u5e94\u4fe1\u606f \u65ad\u70b9\u7eed\u4f20\u6b64\u5206\u5757\u6210\u529f\u8fd4\u56de 204 \u72b6\u6001\u7801, \u5305\u62ec\u4ee5\u4e0b\u54cd\u5e94\u53c2\u6570\uff1a \u53c2\u6570 \u7c7b\u578b \u8bf4\u660e x-upyun-multi-uuid String \u672c\u6b21\u4e0a\u4f20\u4efb\u52a1\u7684\u6807\u8bc6 x-upyun-next-part-id String \u4e0b\u4e00\u4e2a\u5206\u5757\u5e8f\u53f7\u3002\u82e5\u5168\u90e8\u5206\u5757\u90fd\u5df2\u7ecf\u4f20\u5b8c\uff0c\u5219\u8be5\u54cd\u5e94\u5934\u503c\u4e3a -1 \u4e0a\u4f20\u5931\u8d25\u65f6\u8fd4\u56de\u76f8\u5e94\u7684\u51fa\u9519\u4fe1\u606f\uff0c\u5177\u4f53\u8bf7\u53c2\u9605\u300c API \u9519\u8bef\u7801\u8868 \u300d\u3002 \u7ed3\u675f\u65ad\u70b9\u7eed\u4f20 \u00b6 PUT /<bucket>/path/to/file \u8bf7\u6c42\u53c2\u6570 \u53c2\u6570 \u5fc5\u9009 \u7c7b\u578b \u8bf4\u660e Content-Length \u662f String \u8bf7\u6c42\u5185\u5bb9\u957f\u5ea6 x-upyun-multi-stage \u662f String \u503c\u4e3a complete \uff0c \u8868\u793a\u5b8c\u6210\u65ad\u70b9\u7eed\u4f20\u4efb\u52a1 x-upyun-multi-uuid \u662f String \u672c\u6b21\u4e0a\u4f20\u4efb\u52a1\u7684\u6807\u8bc6\uff0c\u662f\u521d\u59cb\u5316\u65ad\u70b9\u7eed\u4f20\u4efb\u52a1\u65f6\u54cd\u5e94\u4fe1\u606f\u4e2d\u7684 x-upyun-multi-uuid Content-MD5 \u5426 String \u8bf7\u6c42\u7684 MD5 \u503c\uff0c\u7b49\u6548\u4e8e \u7b7e\u540d\u8ba4\u8bc1 \u4e2d\u7684 Content-MD5 x-upyun-multi-md5 \u5426 String \u6574\u4e2a\u6587\u4ef6\u7684 MD5 \u503c\uff0c\u7528\u4e8e\u670d\u52a1\u7aef\u6821\u9a8c \u54cd\u5e94\u4fe1\u606f \u7ed3\u675f\u65ad\u70b9\u7eed\u4f20\u6210\u529f\uff0c\u5982\u679c\u8fd4\u56de 204 \u72b6\u6001\u7801\uff0c\u8868\u793a\u6587\u4ef6\u8986\u76d6\u540c\u540d\u6587\u4ef6\uff1b\u5982\u679c\u8fd4\u56de 201 \u72b6\u6001\u7801\uff0c\u8868\u793a\u6587\u4ef6\u662f\u65b0\u6587\u4ef6\u3002 \u54cd\u5e94\u4fe1\u606f\u8fd8\u5305\u62ec\u4ee5\u4e0b\u54cd\u5e94\u53c2\u6570\uff1a \u53c2\u6570 \u7c7b\u578b \u8bf4\u660e x-upyun-multi-uuid String \u672c\u6b21\u4e0a\u4f20\u4efb\u52a1\u7684\u6807\u8bc6 x-upyun-multi-type String \u672c\u6b21\u4e0a\u4f20\u6587\u4ef6\u7684 MIME \u7c7b\u578b x-upyun-multi-length String \u672c\u6b21\u4e0a\u4f20\u6587\u4ef6\u5927\u5c0f\uff0c\u6574\u578b\uff0c\u5355\u4f4d Byte \u4e0a\u4f20\u5931\u8d25\u65f6\u8fd4\u56de\u76f8\u5e94\u7684\u51fa\u9519\u4fe1\u606f\uff0c\u5177\u4f53\u8bf7\u53c2\u9605\u300c API \u9519\u8bef\u7801\u8868 \u300d\u3002 \u4e0b\u8f7d\u6587\u4ef6 \u00b6 GET /<bucket>/path/to/file \u54cd\u5e94\u4fe1\u606f \u4e0b\u8f7d\u6210\u529f\uff1a\u8fd4\u56de 200 \uff0cHTTP body \u4e2d\u8fd4\u56de\u6587\u4ef6\u5185\u5bb9\u3002 \u4e0b\u8f7d\u5931\u8d25\uff1a\u8fd4\u56de\u76f8\u5e94\u7684\u51fa\u9519\u4fe1\u606f\uff0c\u5177\u4f53\u8bf7\u53c2\u9605\u300c API \u9519\u8bef\u7801\u8868 \u300d\u3002 \u5220\u9664\u6587\u4ef6 \u00b6 DELETE /<bucket>/path/to/file \u8bf7\u6c42\u53c2\u6570 \u53c2\u6570 \u5fc5\u9009 \u8bf4\u660e x-upyun-async \u5426 true \u8868\u793a\u8fdb\u884c\u5f02\u6b65\u5220\u9664\uff0c\u4e0d\u8bbe\u7f6e\u8868\u793a\u540c\u6b65\u5220\u9664\uff08\u9ed8\u8ba4\uff09 \u54cd\u5e94\u4fe1\u606f \u5220\u9664\u6210\u529f\uff1a\u8fd4\u56de 200 \u3002 \u5220\u9664\u5931\u8d25\uff1a\u8fd4\u56de\u76f8\u5e94\u7684\u51fa\u9519\u4fe1\u606f\uff0c\u5177\u4f53\u8bf7\u53c2\u9605\u300c API \u9519\u8bef\u7801\u8868 \u300d\u3002 \u6ce8 \u540c\u6b65\u5220\u9664\u6709\u9891\u7387\u9650\u5236\uff0c\u6279\u91cf\u5220\u9664\u8bf7\u5728\u8bf7\u6c42\u5934\u91cc\u52a0\u4e0a x-upyun-async: true \u8fdb\u884c\u5f02\u6b65\u5220\u9664\uff08\u65e0\u9891\u7387\u9650\u5236\uff09\u3002 \u5f02\u6b65\u5220\u9664\u8bf7\u6c42\u6210\u529f\uff0c\u8fd4\u56de 200 \uff0c\u4f46\u5220\u9664\u64cd\u4f5c\u4f1a\u5ef6\u671f\u6267\u884c\u3002 \u521b\u5efa\u76ee\u5f55 \u00b6 POST /<bucket>/path/to/folder \u8bf7\u6c42\u53c2\u6570 \u53c2\u6570 \u5fc5\u9009 \u8bf4\u660e folder \u662f \u503c\u4e3a true \u54cd\u5e94\u4fe1\u606f \u521b\u5efa\u6210\u529f\uff1a\u8fd4\u56de 200 \u3002 \u521b\u5efa\u5931\u8d25\uff1a\u8fd4\u56de\u76f8\u5e94\u7684\u51fa\u9519\u4fe1\u606f\uff0c\u5177\u4f53\u8bf7\u53c2\u9605\u300c API \u9519\u8bef\u7801\u8868 \u300d\u3002 \u5220\u9664\u76ee\u5f55 \u00b6 DELETE /<bucket>/path/to/folder \u54cd\u5e94\u4fe1\u606f \u5220\u9664\u6210\u529f\uff1a\u8fd4\u56de 200 \u3002 \u5220\u9664\u5931\u8d25\uff1a\u8fd4\u56de\u76f8\u5e94\u7684\u51fa\u9519\u4fe1\u606f\uff0c\u5177\u4f53\u8bf7\u53c2\u9605\u300c API \u9519\u8bef\u7801\u8868 \u300d\u3002 \u6ce8 \u53ea\u5141\u8bb8\u5220\u9664\u7a7a\u7684\u76ee\u5f55\uff0c\u975e\u7a7a\u76ee\u5f55\u9700\u8981\u5148\u5220\u9664\u91cc\u9762\u7684\u6587\u4ef6\uff0c\u5426\u5219\u5220\u9664\u8bf7\u6c42\u4f1a\u88ab\u62d2\u7edd\u3002 \u83b7\u53d6\u6587\u4ef6\u4fe1\u606f \u00b6 HEAD /<bucket>/path/to/file \u54cd\u5e94\u4fe1\u606f \u83b7\u53d6\u6210\u529f\uff1a\u8fd4\u56de 200 \uff0c\u8fd4\u56de\u5934\u4fe1\u606f\u5982\u4e0b\u6240\u793a\uff1a \u53c2\u6570 \u8bf4\u660e x-upyun-file-type \u6587\u4ef6\u4e3a file \uff0c\u6587\u4ef6\u5939\u4e3a folder x-upyun-file-size \u6587\u4ef6\u5927\u5c0f x-upyun-file-date \u6587\u4ef6\u521b\u5efa\u65f6\u95f4 Content-Md5 \u6587\u4ef6\u7684 MD5 \u503c \u83b7\u53d6\u5931\u8d25\uff1a\u8fd4\u56de\u76f8\u5e94\u7684\u51fa\u9519\u4fe1\u606f\uff0c\u5177\u4f53\u8bf7\u53c2\u9605\u300c API \u9519\u8bef\u7801\u8868 \u300d\u3002 \u83b7\u53d6\u76ee\u5f55\u6587\u4ef6\u5217\u8868 \u00b6 GET /<bucket>/path/to/folder \u5206\u9875\u53c2\u6570 \u5982\u679c\u76ee\u5f55\u4e2d\u6587\u4ef6\u6570\u91cf\u8fc7\u591a\uff0c\u4e3a\u4e86\u66f4\u53cb\u597d\u7684\u83b7\u53d6\u6587\u4ef6\u4fe1\u606f\uff0c\u53ef\u4ee5\u5206\u9875\u83b7\u53d6\uff1a \u53c2\u6570 \u5fc5\u9009 \u7c7b\u578b \u8bf4\u660e x-list-iter \u5426 string \u5206\u9875\u5f00\u59cb\u4f4d\u7f6e\uff0c\u901a\u8fc7 x-upyun-list-iter \u54cd\u5e94\u5934\u8fd4\u56de\uff0c\u6240\u4ee5\u7b2c\u4e00\u6b21\u8bf7\u6c42\u4e0d\u9700\u8981\u586b\u5199 x-list-limit \u5426 string \u83b7\u53d6\u7684\u6587\u4ef6\u6570\u91cf\uff0c\u9ed8\u8ba4 100\uff0c\u6700\u5927 10000 x-list-order \u5426 string asc \u6216 desc \uff0c\u6309\u6587\u4ef6\u540d\u5347\u5e8f\u6216\u964d\u5e8f\u6392\u5217\u3002\u9ed8\u8ba4 asc Accept \u5426 string application/json ,\u8fd4\u56dejson\u683c\u5f0f \u54cd\u5e94\u4fe1\u606f \u83b7\u53d6\u6210\u529f\uff1a\u8fd4\u56de 200 \u3002 \u83b7\u53d6\u5931\u8d25\uff1a\u8fd4\u56de\u76f8\u5e94\u7684\u51fa\u9519\u4fe1\u606f\uff0c\u5177\u4f53\u8bf7\u53c2\u9605\u300c API \u9519\u8bef\u7801\u8868 \u300d\u3002 \u4f8b\u5982\uff1a > HTTP/1.1 200 OK > x-upyun-list-iter: c2Rmc2Rsamdvc2pnb3dlam9pd2Vmd2Z3Zg== foo.jpg\\tN\\t4237\\t1415096225\\nbar\\tF\\t423404\\t1415096260 x-upyun-list-iter \u8fd4\u56de\u4e0b\u4e00\u6b21\u5206\u9875\u5f00\u59cb\u4f4d\u7f6e\u3002\u5b83\u7531\u4e00\u4e32 Base64 \u7f16\u7801\u7684\u968f\u673a\u6570\u7ec4\u6210\uff0c\u5f53\u5b83\u662f g2gCZAAEbmV4dGQAA2VvZg \u65f6\uff0c\u8868\u793a \u6700\u540e\u4e00\u4e2a\u5206\u9875 \u3002 HTTP body \u4e3a\u5404\u4e2a\u6587\u4ef6/\u76ee\u5f55\u7684\u4fe1\u606f\uff0c\u6587\u4ef6/\u76ee\u5f55\u4e4b\u95f4\u4ee5 \\n \u5206\u9694\uff0c\u5c5e\u6027\u6309 \u300c\u6587\u4ef6\\t\u7c7b\u578b\\t\u5927\u5c0f\\t\u6700\u540e\u4fee\u6539\u65f6\u95f4\u300d \u6392\u5217\uff0c\u7c7b\u578b\u53ef\u9009\u503c\uff1a N \u8868\u793a\u6587\u4ef6\uff0c F \u8868\u793a\u76ee\u5f55\u3002 \u82e5\u8bbe\u7f6e\u4e86 Accept: application/json \u8bf7\u6c42\u5934\u5219\u8fd4\u56de: { \"files\": [{ \"type\": \"image/jpeg\", \"length\": 4237, \"name\": \"foo.jpg\", \"last_modified\": 1415096225 }, { \"type\": \"folder\", \"length\": 423404, \"name\": \"bar\", \"last_modified\": 1415096260 }], \"iter\": \"c2Rmc2Rsamdvc2pnb3dlam9pd2Vmd2Z3Zg==\" } \u83b7\u53d6\u670d\u52a1\u4f7f\u7528\u91cf \u00b6 GET /<bucket>/?usage \u54cd\u5e94\u4fe1\u606f \u83b7\u53d6\u6210\u529f\uff1a\u8fd4\u56de 200 \u3002HTTP body \u5185\u5bb9\u4e3a\u670d\u52a1\u7684\u4f7f\u7528\u91cf\uff08\u5355\u4f4d\u4e3a Byte \uff09\u3002 \u83b7\u53d6\u5931\u8d25\uff1a\u8fd4\u56de\u76f8\u5e94\u7684\u51fa\u9519\u4fe1\u606f\uff0c\u5177\u4f53\u8bf7\u53c2\u9605\u300c API \u9519\u8bef\u7801\u8868 \u300d\u3002 Metadata \u00b6 \u4e0b\u8f7d\u6587\u4ef6\u65f6\uff0c\u5728\u54cd\u5e94\u5934\u91cc\u8fd4\u56de\u6587\u4ef6\u7684\u6240\u6709\u5143\u6570\u636e\u3002 \u6dfb\u52a0 Metadata \u00b6 \u4e0a\u4f20\u6587\u4ef6 \u65f6\uff0c\u5982\u679c\u5728\u8bf7\u6c42\u5934\u91cc\u5e26\u4e0a\u4ee5 x-upyun-meta- \u5f00\u5934\u7684\u53c2\u6570\uff0c\u90a3\u4e48\u8be5\u53c2\u6570\u4f1a\u4f5c\u4e3a\u6587\u4ef6\u7684\u5143\u6570\u636e\u5b58\u50a8\u5230\u4e91\u5b58\u50a8\u3002\u4f8b\u5982\uff1a curl -d 'abc' \\ http://v0.api.upyun.com/<bucket>/abc.txt \\ -H \"Authorization: UPYUN <Operator>:<Signature>\" \\ -H \"Date: <Wed, 30 Oct 2016 11:26:58 GMT>\"\\ -H \"x-upyun-meta-foo: Bar\"\\ -H \"x-upyun-meta-a: 2\" \u6587\u4ef6 abc.txt \u4f1a\u589e\u52a0 x-upyun-meta-foo: bar \u548c x-upyun-meta-a: 2 \u8fd9\u4e24\u4e2a\u5143\u4fe1\u606f\u3002 \u4fee\u6539 Metadata \u00b6 PATCH /<bucket>/path/to/file?metadata=<option> option \u7684\u53d6\u503c\u5982\u4e0b\uff1a option \u8bf4\u660e merge\uff08 \u9ed8\u8ba4 \uff09 \u5408\u5e76\u6587\u4ef6\u5143\u4fe1\u606f\uff0c\u5982\u679c\u662f\u76f8\u540c\u7684\u5143\u4fe1\u606f\uff0c\u5c06\u88ab\u65b0\u4e0a\u4f20\u7684\u503c\u66ff\u6362 replace \u66ff\u6362\u6587\u4ef6\u5143\u4fe1\u606f\u4e3a\u65b0\u4e0a\u4f20\u7684\u6587\u4ef6\u5143\u4fe1\u606f delete \u5220\u9664\u6587\u4ef6\u5143\u4fe1\u606f \u54cd\u5e94\u4fe1\u606f \u4fee\u6539\u6210\u529f\uff1a\u8fd4\u56de 200 \u3002 \u4fee\u6539\u5931\u8d25\uff1a\u8fd4\u56de\u76f8\u5e94\u7684\u51fa\u9519\u4fe1\u606f\uff0c\u5177\u4f53\u8bf7\u53c2\u9605\u300c API \u9519\u8bef\u7801\u8868 \u300d\u3002 \u4e3e\u4f8b \u4f8b 1\uff1a\u5408\u5e76\u5143\u4fe1\u606f\uff0c metadata=merge curl -d 'abc' http://v0.api.upyun.com/<bucket>/abc.txt \\ -H \"Authorization: Basic b3BlcmF0b3I6cGFzc3dvcmQ=\" \\ -H \"x-upyun-meta-a: 1\" curl -XPATCH http://v0.api.upyun.com/<bucket>/abc.txt?metadata=merge \\ -H \"Authorization: Basic b3BlcmF0b3I6cGFzc3dvcmQ=\" \\ -H \"x-upyun-meta-a: 2\" \\ -H \"x-upyun-meta-b: 3\" \u6587\u4ef6 abc.txt \u7684\u5143\u4fe1\u606f\u662f\uff1a x-upyun-meta-a: 2 x-upyun-meta-b: 3 \u4f8b 2\uff1a\u66ff\u6362\u5143\u4fe1\u606f\uff0c metadata=replace curl -d 'abc' http://v0.api.upyun.com/<bucket>/abc.txt \\ -H \"Authorization: Basic b3BlcmF0b3I6cGFzc3dvcmQ=\" \\ -H \"x-upyun-meta-a: 1\" \\ -H \"x-upyun-meta-b: 2\" curl -XPATCH http://v0.api.upyun.com/<bucket>/abc.txt?metadata=replace \\ -H \"Authorization: Basic b3BlcmF0b3I6cGFzc3dvcmQ=\" \\ -H \"x-upyun-meta-a: 3\" \\ -H \"x-upyun-meta-c: 4\" \u6587\u4ef6 abc.txt \u7684\u5143\u4fe1\u606f\u4e3a\uff1a x-upyun-meta-a: 3 x-upyun-meta-c: 4 \u4f8b 3\uff1a\u5220\u9664\u5143\u4fe1\u606f\uff0c metadata=delete curl -d 'abc' http://v0.api.upyun.com/<bucket>/abc.txt \\ -H \"Authorization: Basic b3BlcmF0b3I6cGFzc3dvcmQ=\" \\ -H \"x-upyun-meta-a: 1\" \\ -H \"x-upyun-meta-b: 2\" curl -XPATCH http://v0.api.upyun.com/<bucket>/abc.txt?metadata=delete \\ -H \"Authorization: Basic b3BlcmF0b3I6cGFzc3dvcmQ=\" \\ -H \"x-upyun-meta-a: true\" \u6587\u4ef6 abc.txt \u7684\u5143\u4fe1\u606f\u4e3a\uff1a x-upyun-meta-b: 2 \u5e38\u89c1\u5e94\u7528\u6848\u4f8b \u00b6 \u4f8b 1\uff1a\u4fee\u6539 Metadata \u9ed8\u8ba4\u4e0d\u66f4\u65b0\u6587\u4ef6\u7684 Last-Modified \uff0c\u5982\u679c\u9700\u8981\u66f4\u65b0\uff0c\u5728\u53c2\u6570\u4e2d\u6307\u5b9a update_last_modified=true \uff1a curl -XPATCH http://v0.api.upyun.com/<bucket>/abc.txt?metadata=replace&update_last_modified=true \\ -H \"Authorization: Basic b3BlcmF0b3I6cGFzc3dvcmQ=\" \\ -H \"x-upyun-meta-a: 3\" \\ -H \"x-upyun-meta-c: 4\" \u4f8b 2\uff1a Content-Secret \u662f\u88ab\u5b58\u50a8\u4e3a x-upyun-meta-secret \u5143\u4fe1\u606f\uff0c\u5982\u679c\u9700\u8981\u4fee\u6539\u6216\u5220\u9664\uff0c\u53ef\u4ee5\u5bf9 x-upyun-meta-secret \u8fdb\u884c\u64cd\u4f5c\uff1a curl -XPATCH http://v0.api.upyun.com/<bucket>/abc.txt?metadata=delete \\ -H \"Authorization: Basic b3BlcmF0b3I6cGFzc3dvcmQ=\" \\ -H \"x-upyun-meta-secret: upyun520\" \u7b7e\u540d\u8ba4\u8bc1\uff08\u65e7\uff09 \u00b6 \u7b7e\u540d\u683c\u5f0f Authorization: UpYun <operator>:<signature> \u7b7e\u540d\uff08signature\uff09\u7b97\u6cd5 \u7b7e\u540d\u6240\u9700\u7684\u76f8\u5173\u4fe1\u606f\u5982\u4e0b\u8868\uff1a \u6240\u9700\u4fe1\u606f \u8bf4\u660e METHOD \u8bf7\u6c42\u65b9\u5f0f\uff0c\u5982\uff1aGET\u3001POST\u3001PUT\u3001HEAD \u7b49 PATH \u8bf7\u6c42\u8def\u5f84\uff0c\u9700 URL \u7f16\u7801\u5904\u7406 ( RFC 1738 ) DATE \u8bf7\u6c42\u65e5\u671f\uff0cGMT \u683c\u5f0f\u5b57\u7b26\u4e32 ( RFC 1123 ) CONTENT_LENGTH \u8bf7\u6c42\u5185\u5bb9\u957f\u5ea6\uff0c\u9664 GET \u7b49\u65e0\u5b9e\u4f53\u8bf7\u6c42\u5916\uff0c\u9700\u548c\u8bf7\u6c42\u5934\u90e8\u7684 Content-Length \u4e00\u81f4 PASSWORD \u670d\u52a1\u7684\u64cd\u4f5c\u5458\u7684\u5bc6\u7801 \u5c06 PASSWORD md5 \u4e4b\u540e\uff08\u6211\u4eec\u6682\u4e14\u5c06\u5176\u8bb0\u4f5c PASSWORD_MD5 \uff09\uff0c\u4e0a\u8868\u6240\u6ce8\u7684\u5176\u4ed6\u4fe1\u606f\u4ee5 & \u5b57\u7b26\u8fdb\u884c\u62fc\u63a5\uff08\u6309\u8868\u683c\u4ece\u4e0a\u81f3\u4e0b\u7684\u987a\u5e8f\uff09\u5373\uff08 METHOD&PATH&DATE&CONTENT-LENGTH&PASSWORD_MD5 \uff09\uff0c\u5e76\u5c06\u6240\u5f97\u5b57\u7b26\u4e32\u8fdb\u884c MD5 \u52a0\u5bc6\uff0c\u5373\u5f97\u6211\u4eec\u6240\u9700\u7684 \u7b7e\u540d\uff08signature\uff09 \u6ce8 \u7b7e\u540d\u7684\u6709\u6548\u671f\u4e3a 30 \u5206\u949f\u3002\u5982\u679c\u8d85\u8fc7 30 \u5206\u949f\uff0c\u5219\u9700\u91cd\u65b0\u751f\u6210\u7b7e\u540d\u3002 GET\uff0cDELETE \u64cd\u4f5c\u7684 CONTENT_LENGTH \u4e3a 0\u3002 \u4f8b\u5982 \u8bf7\u6c42\u65b9\u5f0f\u4e3a GET \uff0cURI \u4e3a bucket \u670d\u52a1\u7684\u5b50\u76ee\u5f55 /sub \uff0c\u8bf7\u6c42\u65f6\u95f4\u4e3a Wed, 29 Oct 2014 02:26:58 GMT \uff0c\u56e0\u4e3a\u662f GET \uff0c\u6240\u4ee5 CONTENT-LENGTH \u4e3a 0 \uff0c\u5047\u8bbe\u8be5\u670d\u52a1\u6709\u4e00\u4e2a\u6388\u6743\u64cd\u4f5c\u5458\u540d\u4e3a upyun \uff0c\u8be5\u64cd\u4f5c\u5458\u5bc6\u7801\u4e3a password \uff08\u5bc6\u7801 md5 \u540e\u4e3a 5f4dcc3b5aa765d61d8327deb882cf99 \uff09\uff0c\u90a3\u4e48\uff1a \u7b7e\u540d\uff08signature\uff09\u5373\u662f\u5bf9\u5b57\u7b26\u4e32 GET&/bucket/sub&Wed, 29 Oct 2014 02:26:58 GMT&0&5f4dcc3b5aa765d61d8327deb882cf99 \u8ba1\u7b97 MD5 \u6240\u5f97\uff0c\u5373\uff1a 03db45e2904663c5c9305a9c6ed62af3 \uff0c\u56e0\u6b64\uff0c\u53ea\u9700\u5728\u8bf7\u6c42\u5934\u90e8\u52a0\u4e0a\u5982\u4e0b\u5b57\u6bb5\u5373\u53ef\uff1a Authorization: UpYun upyun:03db45e2904663c5c9305a9c6ed62af3 \u56fe\u7247\u9884\u5904\u7406\uff08\u65e7\uff09 \u00b6 \u53c2\u6570 \u5fc5\u9009 \u8bf4\u660e x-gmkerl-extract-color-count \u5426 \u4e3b\u9898\u8272\u63d0\u53d6\u7684\u989c\u8272\u6570\u91cf\uff0c\u9ed8\u8ba4 256 x-gmkerl-extract-format \u5426 \u4e3b\u9898\u8272\u63d0\u53d6\u683c\u5f0f\uff0c\u9ed8\u8ba4 hex x-gmkerl-thumbnail \u5426 \u7f29\u7565\u56fe\u7248\u672c\u540d\u79f0\uff0c\u53ef\u642d\u914d\u5176\u4ed6 x-gmkerl-* \u53c2\u6570\u4f7f\u7528 x-gmkerl-type \u5426 \u7f29\u7565\u7c7b\u578b\uff0c\u89c1 x-gmkerl-type \u53ef\u9009\u503c\u5217\u8868 x-gmkerl-value \u5426 \u7f29\u7565\u7c7b\u578b\u5bf9\u5e94\u7684\u53c2\u6570\u503c\uff0c\u89c1 x-gmkerl-value \u503c\u8bf4\u660e x-gmkerl-quality \u5426 \u538b\u7f29\u8d28\u91cf\uff0c\u9ed8\u8ba4 95 x-gmkerl-unsharp \u5426 \u662f\u5426\u9510\u5316\uff0c\u9ed8\u8ba4\u9510\u5316 x-gmkerl-rotate \u5426 \u56fe\u7247\u65cb\u8f6c\uff08\u987a\u65f6\u9488\uff09\uff0c\u53ef\u9009\u503c\uff1a auto \u3001 (0, 360] \u3002\u8be6\u89c1 \u65cb\u8f6c x-gmkerl-crop \u5426 \u56fe\u7247\u88c1\u526a\uff0c\u683c\u5f0f\uff1a <w>x<h>a<x>a<y> \u3002\u8be6\u89c1 \u88c1\u526a x-gmkerl-exif-switch \u5426 \u662f\u5426\u4fdd\u7559 EXIF \u4fe1\u606f\uff0c\u9ed8\u8ba4\u4e0d\u4fdd\u7559 \u4ec5\u5728\u642d\u914d x-gmkerl-crop \u3001 x-gmkerl-type \u3001 x-gmkerl-thumbnail \u65f6\u6709\u6548 x-gmkerl-watermark-text \u5426 \u6587\u5b57\u6c34\u5370\u5185\u5bb9\uff0c\u5fc5\u987b\u7ecf\u8fc7 urlencode \u5904\u7406 x-gmkerl-watermark-font \u5426 \u6587\u5b57\u6c34\u5370\u5b57\u4f53\uff0c\u9ed8\u8ba4 simsun \uff0c\u89c1 x-gmkerl-watermark-font \u53ef\u9009\u503c\u5217\u8868 x-gmkerl-watermark-size \u5426 \u6587\u5b57\u6c34\u5370\u5b57\u4f53\u5927\u5c0f\uff0c\u6b63\u6574\u6570\uff0c\u5355\u4f4d\u50cf\u7d20\uff0c\u9ed8\u8ba4 32 x-gmkerl-watermark-align \u5426 \u6c34\u5370\u5bf9\u9f50\u65b9\u5f0f\uff0c\u9ed8\u8ba4 top,left \uff0c\u89c1 x-gmkerl-watermark-align \u503c\u8bf4\u660e x-gmkerl-watermark-margin \u5426 \u6c34\u5370\u8fb9\u8ddd\uff0c\u683c\u5f0f x,y \uff0c\u65e2 \u6c34\u5e73\u8fb9\u8ddd,\u5782\u76f4\u8fb9\u8ddd \uff0c\u5355\u4f4d\u50cf\u7d20\uff0c\u9ed8\u8ba4 20,20 x-gmkerl-watermark-opacity \u5426 \u6c34\u5370\u900f\u660e\u5ea6\uff0c\u53d6\u503c\u8303\u56f4 0 ~ 100 \u7684\u6574\u6570\uff0c\u9ed8\u8ba4 0 x-gmkerl-watermark-color \u5426 \u6587\u5b57\u6c34\u5370\u989c\u8272\uff0cRGB \u503c\uff0c\u9ed8\u8ba4 #000000 x-gmkerl-watermark-border \u5426 \u6587\u5b57\u6c34\u5370\u8fb9\u6846\uff0c\u9ed8\u8ba4\u65e0\u8fb9\u6846\uff0c\u89c1 x-gmkerl-watermark-border \u503c\u8bf4\u660e x-gmkerl-type \u53ef\u9009\u503c\u5217\u8868 \u503c \u542b\u4e49 fix_width \u9650\u5b9a\u5bbd\u5ea6\uff0c\u9ad8\u5ea6\u81ea\u9002\u5e94 fix_height \u9650\u5b9a\u9ad8\u5ea6\uff0c\u5bbd\u5ea6\u81ea\u9002\u5e94 fix_width_or_height \u9650\u5b9a\u5bbd\u5ea6\u548c\u9ad8\u5ea6\uff0c\u5bbd\u9ad8\u4e0d\u8db3\u65f6\u4e0d\u7f29\u653e fix_both \u56fa\u5b9a\u5bbd\u5ea6\u548c\u9ad8\u5ea6\uff0c\u5bbd\u9ad8\u4e0d\u8db3\u65f6\u5f3a\u884c\u7f29\u653e fix_max \u9650\u5b9a\u6700\u957f\u8fb9\uff0c\u77ed\u8fb9\u81ea\u9002\u5e94 fix_min \u9650\u5b9a\u6700\u77ed\u8fb9\uff0c\u957f\u8fb9\u81ea\u9002\u5e94 fix_scale \u7b49\u6bd4\u4f8b\u7f29\u653e\uff081-1000\uff09 x-gmkerl-value \u503c\u8bf4\u660e \u5f53 x-gmkerl-type \u6307\u5b9a\u4e3a fix_width_or_height \u6216 fix_both \u65f6\uff0c x-gmkerl-value \u503c\u7684\u683c\u5f0f\u4e3a <width>x<height> \uff0c\u5982 480x576 \u3002 \u5f53 x-gmkerl-type \u4e3a\u5176\u4ed6\u7684\u7c7b\u578b\uff0c x-gmkerl-value \u503c\u53ea\u9700\u8981\u6307\u5b9a\u5355\u4e2a\u6570\u5b57\uff0c\u5982 100 \uff0c\u610f\u601d\u4e3a\u9ad8\u548c/\u6216\u5bbd\u4e3a 100 \u3002 x-gmkerl-watermark-font \u53ef\u9009\u503c\u5217\u8868 simsun \uff1a\u5b8b\u4f53(simsun) simhei \uff1a\u9ed1\u4f53 (simhei) simkai \uff1a\u6977\u4f53 (simkai) simli \uff1a\u96b6\u4e66 (simli) simyou \uff1a\u5e7c\u5706 (simyou) simfang \uff1a\u4eff\u5b8b (simfang) x-gmkerl-watermark-align \u503c\u8bf4\u660e \u683c\u5f0f valign,halign \uff0c\u65e2 \u5782\u76f4\u5bf9\u9f50,\u6c34\u5e73\u5bf9\u9f50 \uff0c valign \u3001 halign \u53ef\u9009\u503c\uff1a \u5782\u76f4\u5bf9\u9f50\uff1a top \uff0c middle \uff0c bottom \uff1b \u6c34\u5e73\u5bf9\u9f50\uff1a left \uff0c center \uff0c right \u3002 x-gmkerl-watermark-border \u503c\u8bf4\u660e \u683c\u5f0f rgba \uff0c RGB \u8868\u793a\u8fb9\u6846\u7684\u989c\u8272\uff0c a \u8868\u793a\u8fb9\u6846\u7684\u900f\u660e\u5ea6\uff0c\u5982 #cccccccc \u5982\u6709\u7591\u95ee\u8bf7 \u8054\u7cfb\u6211\u4eec","title":"REST API"},{"location":"api/rest_api/#_1","text":"curl -X GET \\ http://v0.api.upyun.com/<bucket>/<path> \\ -H \"Authorization: UPYUN <Operator>:<Signature>\" \\ -H \"Date: <Wed, 29 Oct 2014 11:26:58 GMT>\"\\ -H \"Content-MD5: <Content-MD5>\"\\ # \u5176\u4ed6\u53ef\u9009\u53c2\u6570... \u57fa\u672c\u57df\u540d \u667a\u80fd\u9009\u8def\uff08\u63a8\u8350\uff09\uff1a v0.api.upyun.com \u7535\u4fe1\u7ebf\u8def\uff1a v1.api.upyun.com \u8054\u901a\uff08\u7f51\u901a\uff09\u7ebf\u8def\uff1a v2.api.upyun.com \u79fb\u52a8\uff08\u94c1\u901a\uff09\u7ebf\u8def\uff1a v3.api.upyun.com \u8ba4\u8bc1\u9274\u6743 \u8be6\u89c1 \u7b7e\u540d\u8ba4\u8bc1 \u3002","title":"\u8bf7\u6c42\u65b9\u6cd5"},{"location":"api/rest_api/#_2","text":"\u628a\u6587\u4ef6\u4e0a\u4f20\u81f3\u53c8\u62cd\u4e91\u5b58\u50a8\u3002\u5728\u4e0a\u4f20\u56fe\u7247\u6587\u4ef6\u65f6\uff0c\u53ef\u4ee5\u8bbe\u7f6e\u9884\u5904\u7406\u53c2\u6570\uff0c\u56fe\u7247\u4f1a\u5904\u7406\u540e\u518d\u4fdd\u5b58\u3002 PUT /<bucket>/path/to/file \u4e0a\u4f20\u53c2\u6570 \u53c2\u6570 \u5fc5\u9009 \u7c7b\u578b \u8bf4\u660e Date \u662f String \u8bf7\u6c42\u65e5\u671f\u65f6\u95f4\uff0cGMT \u683c\u5f0f\u5b57\u7b26\u4e32 ( RFC 1123 )\uff0c\u5982 Wed, 29 Oct 2014 02:26:58 GMT Content-Length \u662f String \u8bf7\u6c42\u5185\u5bb9\u957f\u5ea6 Content-MD5 \u5426 String \u4e0a\u4f20\u6587\u4ef6\u7684 MD5 \u503c\uff0c\u5982\u679c\u8bf7\u6c42\u4e2d\u6587\u4ef6\u592a\u5927\u8ba1\u7b97 MD5 \u4e0d\u65b9\u4fbf\uff0c\u53ef\u4ee5\u4e3a\u7a7a Content-Type \u5426 String \u6587\u4ef6\u7c7b\u578b\uff0c\u9ed8\u8ba4\u4f7f\u7528\u6587\u4ef6\u6269\u5c55\u540d\u4f5c\u4e3a\u6587\u4ef6\u7c7b\u578b Content-Secret \u5426 String \u6587\u4ef6\u5bc6\u94a5\uff0c\u7528\u4e8e\u4fdd\u62a4\u6587\u4ef6\uff0c\u9632\u6b62\u6587\u4ef6\u88ab\u76f4\u63a5\u8bbf\u95ee\uff0c\u89c1 Content-Secret \u53c2\u6570\u8bf4\u660e x-upyun-meta-x \u5426 String \u6587\u4ef6\u5143\u4fe1\u606f\uff0c\u89c1 Metadata x-upyun-meta-ttl \u5426 Integer \u6587\u4ef6\u5143\u4fe1\u606f, \u6307\u5b9a\u6587\u4ef6\u7684\u751f\u5b58\u65f6\u95f4\uff0c\u5355\u4f4d\u5929\uff0c\u6700\u5927\u652f\u6301180\u5929\uff0c\u89c1 Metadata x-gmkerl-thumb \u5426 String \u56fe\u7247\u9884\u5904\u7406\u53c2\u6570\uff0c\u89c1 \u4e0a\u4f20\u9884\u5904\u7406\uff08\u540c\u6b65\uff09 \u54cd\u5e94\u4fe1\u606f \u4e0a\u4f20\u6210\u529f\uff1a\u8fd4\u56de 200 \uff0c\u5f53\u4e0a\u4f20\u6587\u4ef6\u662f\u56fe\u7247\u4e14\u8bbe\u7f6e x-gmkerl-xxx \u65f6\uff0c\u5305\u542b\u56fe\u7247 \u57fa\u672c\u4fe1\u606f \uff08\u5305\u62ec\u56fe\u7247\u5bbd\u3001\u9ad8\u3001\u683c\u5f0f\u3001\u5e27\u6570\uff09\uff0c\u4f8b\u5982\uff1a > HTTP/1.1 200 OK > x-upyun-width: 50 > x-upyun-height: 50 > x-upyun-file-type: JPEG > x-upyun-frames: 1 \u4e0a\u4f20\u5931\u8d25\uff1a\u8fd4\u56de\u76f8\u5e94\u7684\u51fa\u9519\u4fe1\u606f\uff0c\u5177\u4f53\u8bf7\u53c2\u9605\u300c API \u9519\u8bef\u7801\u8868 \u300d\u3002 Content-Secret \u53c2\u6570\u8bf4\u660e \u6587\u4ef6\u8bbe\u7f6e Content-Secret \u540e\uff0c\u6587\u4ef6\u5c06\u4e0d\u80fd\u88ab\u76f4\u63a5\u8bbf\u95ee\uff0c\u82e5\u9700\u8bbf\u95ee\uff0c\u9700\u8981\u5728 URL \u540e\u52a0\u4e0a \u300c\u95f4\u9694\u6807\u8bc6\u7b26\u300d \u548c \u300c\u6587\u4ef6\u5bc6\u94a5\u300d\u3002\u5982\uff1a \u95f4\u9694\u7b26\u4e3a ! \uff0c Content-Secret \u4e3a abc \uff0c\u56fe\u7247\u8bbf\u95ee\u65b9\u5f0f\u4e3a\uff1a https://p.upyun.com/docs/cloud/secret.jpg!abc \u3002 \u95f4\u9694\u6807\u8bc6\u7b26 \u7528\u4e8e\u5206\u9694\u6587\u4ef6 URL \u548c\u6587\u4ef6\u5bc6\u94a5\uff0c\u6709 3 \u79cd\u53ef\u9009\uff0c\u5206\u522b\u662f\uff1a!\uff08\u611f\u53f9\u53f7/\u9ed8\u8ba4\u503c\uff09\u3001-\uff08\u4e2d\u5212\u7ebf\uff09\u548c _\uff08\u4e0b\u5212\u7ebf\uff09\uff0c\u53ef\u767b\u5f55\u53c8\u62cd\u4e91 \u63a7\u5236\u53f0 \uff0c\u5728 \u300c\u670d\u52a1\u300d > \u300c\u529f\u80fd\u914d\u7f6e\u300d > \u300c\u4e91\u5904\u7406\u300d \u4e2d\u8bbe\u7f6e\u3002 \u5220\u9664\u6216\u4fee\u6539 Content-Secret \uff0c\u89c1 Metadata \u7684 \u5e38\u89c1\u5e94\u7528\u6848\u4f8b \u3002 \u5982\u679c\u539f\u6587\u4ef6\u662f\u4e00\u5f20\u56fe\u7247\uff0c\u9664\u4e86\u901a\u8fc7\u6587\u4ef6\u5bc6\u7801\u8fdb\u884c\u8bbf\u95ee\u5916\uff0c\u8fd8\u53ef\u4ee5\u901a\u8fc7 \u56fe\u7247\u5904\u7406 \u8fdb\u884c\u8bbf\u95ee\u3002 \u5982\u679c\u539f\u6587\u4ef6\u662f\u4e00\u5f20\u56fe\u7247\uff0c\u6587\u4ef6\u5bc6\u94a5\u5e94\u907f\u514d\u4e0e \u7f29\u7565\u56fe\u7248\u672c \u51b2\u7a81\uff0c\u5982\u679c\u51b2\u7a81\uff0c\u6587\u4ef6\u5bc6\u94a5\u7684\u4f18\u5148\u7ea7\u5927\u4e8e\u7f29\u7565\u56fe\u7248\u672c\u3002","title":"\u4e0a\u4f20\u6587\u4ef6"},{"location":"api/rest_api/#_3","text":"\u5728\u4e0a\u4f20\u5927\u6587\u4ef6\u6216\u79fb\u52a8\u7aef\u4e0a\u4f20\u6587\u4ef6\u65f6\uff0c\u56e0\u4e3a\u7f51\u7edc\u8d28\u91cf\u3001\u4f20\u8f93\u65f6\u95f4\u8fc7\u957f\u7b49\u539f\u56e0\u9020\u6210\u4e0a\u4f20\u5931\u8d25\uff0c\u53ef\u4ee5\u4f7f\u7528\u65ad\u70b9\u7eed\u4f20\u3002\u7279\u522b\u5730\uff0c\u65ad\u70b9\u7eed\u4f20\u4e0a\u4f20\u7684\u56fe\u7247\u4e0d\u652f\u6301\u9884\u5904\u7406\u3002\u7279\u522b\u5730\uff0c\u65ad\u70b9\u7eed\u4f20\u4e0a\u4f20\u7684\u6587\u4ef6\u4e0d\u80fd\u4f7f\u7528\u5176\u4ed6\u4e0a\u4f20\u65b9\u5f0f\u8986\u76d6\uff0c\u5982\u679c\u9700\u8981\u8986\u76d6\uff0c\u987b\u5148\u5220\u9664\u6587\u4ef6\u3002","title":"\u65ad\u70b9\u7eed\u4f20"},{"location":"api/rest_api/#_4","text":"\u6587\u4ef6\u5206\u5757\uff1a\u76f4\u63a5\u5207\u5206\u4e8c\u8fdb\u5236\u6587\u4ef6\u6210\u5c0f\u5757\u3002\u5206\u5757\u5927\u5c0f\u56fa\u5b9a\u4e3a 1M\u3002\u6700\u540e\u4e00\u4e2a\u5206\u5757\u9664\u5916\u3002 \u4e0a\u4f20\u9636\u6bb5\uff1a\u4f7f\u7528 x-upyun-multi-stage \u53c2\u6570\u6765\u6307\u793a\u65ad\u70b9\u7eed\u4f20\u7684\u9636\u6bb5\u3002\u5206\u4e3a\u4ee5\u4e0b\u4e09\u4e2a\u9636\u6bb5: initate (\u4e0a\u4f20\u521d\u59cb\u5316), upload (\u4e0a\u4f20\u4e2d), complete (\u4e0a\u4f20\u7ed3\u675f)\u3002\u5404\u9636\u6bb5\u4f9d\u6b21\u8fdb\u884c\u3002 \u5206\u7247\u5e8f\u53f7\uff1a\u4f7f\u7528 x-upyun-part-id \u53c2\u6570\u6765\u6307\u793a\u5f53\u524d\u7684\u5206\u7247\u5e8f\u53f7\uff0c\u5e8f\u53f7\u4ece 0 \u8d77\u7b97\u3002 \u987a\u5e8f\u4e0a\u4f20\uff1a\u5bf9\u4e8e\u540c\u4e00\u4e2a\u65ad\u70b9\u7eed\u4f20\u4efb\u52a1\uff0c\u53ea\u652f\u6301\u987a\u5e8f\u4e0a\u4f20\u3002 \u4e0a\u4f20\u6807\u8bc6\uff1a\u4f7f\u7528 x-upyun-multi-uuid \u53c2\u6570\u6765\u552f\u4e00\u6807\u8bc6\u4e00\u6b21\u4e0a\u4f20\u4efb\u52a1, \u7c7b\u578b\u4e3a\u5b57\u7b26\u4e32, \u957f\u5ea6\u4e3a 36 \u4f4d\u3002 \u4e0a\u4f20\u6e05\u7406\uff1a\u65ad\u70b9\u7eed\u4f20\u672a\u5b8c\u6210\u7684\u6587\u4ef6\uff0c\u4f1a\u4fdd\u5b58 24 \u5c0f\u65f6\uff0c\u8d85\u8fc7\u540e\uff0c\u6587\u4ef6\u4f1a\u88ab\u5220\u9664\u3002","title":"\u540d\u79f0\u6982\u5ff5"},{"location":"api/rest_api/#_5","text":"PUT /<bucket>/path/to/file \u8bf7\u6c42\u53c2\u6570 \u53c2\u6570 \u5fc5\u9009 \u7c7b\u578b \u8bf4\u660e Content-Length \u662f String \u8bf7\u6c42\u5185\u5bb9\u957f\u5ea6 x-upyun-multi-stage \u662f String \u503c\u4e3a initiate \uff0c \u8868\u793a\u521d\u59cb\u5316\u4e0a\u4f20\u4efb\u52a1 x-upyun-multi-length \u662f String \u5f85\u4e0a\u4f20\u6587\u4ef6\u5927\u5c0f\uff0c\u6574\u578b\uff0c\u5355\u4f4d Byte x-upyun-multi-type \u5426 String \u5f85\u4e0a\u4f20\u6587\u4ef6\u7684 MIME \u7c7b\u578b\uff0c\u9ed8\u8ba4 application/octet-stream \uff0c\u5efa\u8bae\u81ea\u884c\u8bbe\u7f6e x-upyun-meta-x \u5426 String \u7528\u4e8e\u989d\u5916\u6307\u5b9a\u6587\u4ef6\u7684\u5143\u4fe1\u606f\uff0c\u8be6\u89c1 Metadata x-upyun-meta-ttl \u5426 Integer \u6587\u4ef6\u5143\u4fe1\u606f, \u6307\u5b9a\u6587\u4ef6\u7684\u751f\u5b58\u65f6\u95f4\uff0c\u5355\u4f4d\u5929\uff0c\u6700\u5927\u652f\u6301180\u5929\uff0c\u89c1 Metadata \u54cd\u5e94\u4fe1\u606f \u521d\u59cb\u5316\u65ad\u70b9\u7eed\u4f20\u6210\u529f\u8fd4\u56de 204 \u72b6\u6001\u7801, \u5305\u62ec\u4ee5\u4e0b\u54cd\u5e94\u53c2\u6570\uff1a \u53c2\u6570 \u7c7b\u578b \u8bf4\u660e x-upyun-multi-uuid String \u672c\u6b21\u4e0a\u4f20\u4efb\u52a1\u7684\u6807\u8bc6 x-upyun-next-part-id String \u4e0b\u4e00\u4e2a\u5206\u5757\u5e8f\u53f7\u3002\u56e0\u4e3a\u662f\u521d\u59cb\u5316\u9636\u6bb5\uff0c\u6240\u4ee5\u503c\u4e3a 0 \u4e0a\u4f20\u5931\u8d25\u65f6\u8fd4\u56de\u76f8\u5e94\u7684\u51fa\u9519\u4fe1\u606f\uff0c\u5177\u4f53\u8bf7\u53c2\u9605\u300c API \u9519\u8bef\u7801\u8868 \u300d\u3002","title":"\u521d\u59cb\u5316\u65ad\u70b9\u7eed\u4f20"},{"location":"api/rest_api/#_6","text":"PUT /<bucket>/path/to/file \u8bf7\u6c42\u53c2\u6570 \u53c2\u6570 \u5fc5\u9009 \u7c7b\u578b \u8bf4\u660e Content-Length \u662f String \u8bf7\u6c42\u5185\u5bb9\u957f\u5ea6 x-upyun-multi-stage \u662f String \u503c\u4e3a upload \uff0c \u8868\u793a\u5f00\u59cb\u4e0a\u4f20\u6587\u4ef6\u6570\u636e x-upyun-multi-uuid \u662f String \u672c\u6b21\u4e0a\u4f20\u4efb\u52a1\u7684\u6807\u8bc6\uff0c\u662f\u521d\u59cb\u5316\u65ad\u70b9\u7eed\u4f20\u4efb\u52a1\u65f6\u54cd\u5e94\u4fe1\u606f\u4e2d\u7684 x-upyun-multi-uuid x-upyun-part-id \u662f String \u6307\u5b9a\u6b64\u6b21\u5206\u7247\u7684\u552f\u4e00 ID\uff0c\u5e94\u4e25\u683c\u7b49\u4e8e\u4e0a\u4e00\u6b21\u8bf7\u6c42\u8fd4\u56de\u7684 x-upyun-next-part-id Content-MD5 \u5426 String \u6240\u4e0a\u4f20\u5206\u5757\u7684 MD5 \u503c\uff0c\u7b49\u6548\u4e8e \u7b7e\u540d\u8ba4\u8bc1 \u4e2d\u7684 Content-MD5 \u54cd\u5e94\u4fe1\u606f \u65ad\u70b9\u7eed\u4f20\u6b64\u5206\u5757\u6210\u529f\u8fd4\u56de 204 \u72b6\u6001\u7801, \u5305\u62ec\u4ee5\u4e0b\u54cd\u5e94\u53c2\u6570\uff1a \u53c2\u6570 \u7c7b\u578b \u8bf4\u660e x-upyun-multi-uuid String \u672c\u6b21\u4e0a\u4f20\u4efb\u52a1\u7684\u6807\u8bc6 x-upyun-next-part-id String \u4e0b\u4e00\u4e2a\u5206\u5757\u5e8f\u53f7\u3002\u82e5\u5168\u90e8\u5206\u5757\u90fd\u5df2\u7ecf\u4f20\u5b8c\uff0c\u5219\u8be5\u54cd\u5e94\u5934\u503c\u4e3a -1 \u4e0a\u4f20\u5931\u8d25\u65f6\u8fd4\u56de\u76f8\u5e94\u7684\u51fa\u9519\u4fe1\u606f\uff0c\u5177\u4f53\u8bf7\u53c2\u9605\u300c API \u9519\u8bef\u7801\u8868 \u300d\u3002","title":"\u7eed\u4f20\u6570\u636e"},{"location":"api/rest_api/#_7","text":"PUT /<bucket>/path/to/file \u8bf7\u6c42\u53c2\u6570 \u53c2\u6570 \u5fc5\u9009 \u7c7b\u578b \u8bf4\u660e Content-Length \u662f String \u8bf7\u6c42\u5185\u5bb9\u957f\u5ea6 x-upyun-multi-stage \u662f String \u503c\u4e3a complete \uff0c \u8868\u793a\u5b8c\u6210\u65ad\u70b9\u7eed\u4f20\u4efb\u52a1 x-upyun-multi-uuid \u662f String \u672c\u6b21\u4e0a\u4f20\u4efb\u52a1\u7684\u6807\u8bc6\uff0c\u662f\u521d\u59cb\u5316\u65ad\u70b9\u7eed\u4f20\u4efb\u52a1\u65f6\u54cd\u5e94\u4fe1\u606f\u4e2d\u7684 x-upyun-multi-uuid Content-MD5 \u5426 String \u8bf7\u6c42\u7684 MD5 \u503c\uff0c\u7b49\u6548\u4e8e \u7b7e\u540d\u8ba4\u8bc1 \u4e2d\u7684 Content-MD5 x-upyun-multi-md5 \u5426 String \u6574\u4e2a\u6587\u4ef6\u7684 MD5 \u503c\uff0c\u7528\u4e8e\u670d\u52a1\u7aef\u6821\u9a8c \u54cd\u5e94\u4fe1\u606f \u7ed3\u675f\u65ad\u70b9\u7eed\u4f20\u6210\u529f\uff0c\u5982\u679c\u8fd4\u56de 204 \u72b6\u6001\u7801\uff0c\u8868\u793a\u6587\u4ef6\u8986\u76d6\u540c\u540d\u6587\u4ef6\uff1b\u5982\u679c\u8fd4\u56de 201 \u72b6\u6001\u7801\uff0c\u8868\u793a\u6587\u4ef6\u662f\u65b0\u6587\u4ef6\u3002 \u54cd\u5e94\u4fe1\u606f\u8fd8\u5305\u62ec\u4ee5\u4e0b\u54cd\u5e94\u53c2\u6570\uff1a \u53c2\u6570 \u7c7b\u578b \u8bf4\u660e x-upyun-multi-uuid String \u672c\u6b21\u4e0a\u4f20\u4efb\u52a1\u7684\u6807\u8bc6 x-upyun-multi-type String \u672c\u6b21\u4e0a\u4f20\u6587\u4ef6\u7684 MIME \u7c7b\u578b x-upyun-multi-length String \u672c\u6b21\u4e0a\u4f20\u6587\u4ef6\u5927\u5c0f\uff0c\u6574\u578b\uff0c\u5355\u4f4d Byte \u4e0a\u4f20\u5931\u8d25\u65f6\u8fd4\u56de\u76f8\u5e94\u7684\u51fa\u9519\u4fe1\u606f\uff0c\u5177\u4f53\u8bf7\u53c2\u9605\u300c API \u9519\u8bef\u7801\u8868 \u300d\u3002","title":"\u7ed3\u675f\u65ad\u70b9\u7eed\u4f20"},{"location":"api/rest_api/#_8","text":"GET /<bucket>/path/to/file \u54cd\u5e94\u4fe1\u606f \u4e0b\u8f7d\u6210\u529f\uff1a\u8fd4\u56de 200 \uff0cHTTP body \u4e2d\u8fd4\u56de\u6587\u4ef6\u5185\u5bb9\u3002 \u4e0b\u8f7d\u5931\u8d25\uff1a\u8fd4\u56de\u76f8\u5e94\u7684\u51fa\u9519\u4fe1\u606f\uff0c\u5177\u4f53\u8bf7\u53c2\u9605\u300c API \u9519\u8bef\u7801\u8868 \u300d\u3002","title":"\u4e0b\u8f7d\u6587\u4ef6"},{"location":"api/rest_api/#_9","text":"DELETE /<bucket>/path/to/file \u8bf7\u6c42\u53c2\u6570 \u53c2\u6570 \u5fc5\u9009 \u8bf4\u660e x-upyun-async \u5426 true \u8868\u793a\u8fdb\u884c\u5f02\u6b65\u5220\u9664\uff0c\u4e0d\u8bbe\u7f6e\u8868\u793a\u540c\u6b65\u5220\u9664\uff08\u9ed8\u8ba4\uff09 \u54cd\u5e94\u4fe1\u606f \u5220\u9664\u6210\u529f\uff1a\u8fd4\u56de 200 \u3002 \u5220\u9664\u5931\u8d25\uff1a\u8fd4\u56de\u76f8\u5e94\u7684\u51fa\u9519\u4fe1\u606f\uff0c\u5177\u4f53\u8bf7\u53c2\u9605\u300c API \u9519\u8bef\u7801\u8868 \u300d\u3002 \u6ce8 \u540c\u6b65\u5220\u9664\u6709\u9891\u7387\u9650\u5236\uff0c\u6279\u91cf\u5220\u9664\u8bf7\u5728\u8bf7\u6c42\u5934\u91cc\u52a0\u4e0a x-upyun-async: true \u8fdb\u884c\u5f02\u6b65\u5220\u9664\uff08\u65e0\u9891\u7387\u9650\u5236\uff09\u3002 \u5f02\u6b65\u5220\u9664\u8bf7\u6c42\u6210\u529f\uff0c\u8fd4\u56de 200 \uff0c\u4f46\u5220\u9664\u64cd\u4f5c\u4f1a\u5ef6\u671f\u6267\u884c\u3002","title":"\u5220\u9664\u6587\u4ef6"},{"location":"api/rest_api/#_10","text":"POST /<bucket>/path/to/folder \u8bf7\u6c42\u53c2\u6570 \u53c2\u6570 \u5fc5\u9009 \u8bf4\u660e folder \u662f \u503c\u4e3a true \u54cd\u5e94\u4fe1\u606f \u521b\u5efa\u6210\u529f\uff1a\u8fd4\u56de 200 \u3002 \u521b\u5efa\u5931\u8d25\uff1a\u8fd4\u56de\u76f8\u5e94\u7684\u51fa\u9519\u4fe1\u606f\uff0c\u5177\u4f53\u8bf7\u53c2\u9605\u300c API \u9519\u8bef\u7801\u8868 \u300d\u3002","title":"\u521b\u5efa\u76ee\u5f55"},{"location":"api/rest_api/#_11","text":"DELETE /<bucket>/path/to/folder \u54cd\u5e94\u4fe1\u606f \u5220\u9664\u6210\u529f\uff1a\u8fd4\u56de 200 \u3002 \u5220\u9664\u5931\u8d25\uff1a\u8fd4\u56de\u76f8\u5e94\u7684\u51fa\u9519\u4fe1\u606f\uff0c\u5177\u4f53\u8bf7\u53c2\u9605\u300c API \u9519\u8bef\u7801\u8868 \u300d\u3002 \u6ce8 \u53ea\u5141\u8bb8\u5220\u9664\u7a7a\u7684\u76ee\u5f55\uff0c\u975e\u7a7a\u76ee\u5f55\u9700\u8981\u5148\u5220\u9664\u91cc\u9762\u7684\u6587\u4ef6\uff0c\u5426\u5219\u5220\u9664\u8bf7\u6c42\u4f1a\u88ab\u62d2\u7edd\u3002","title":"\u5220\u9664\u76ee\u5f55"},{"location":"api/rest_api/#_12","text":"HEAD /<bucket>/path/to/file \u54cd\u5e94\u4fe1\u606f \u83b7\u53d6\u6210\u529f\uff1a\u8fd4\u56de 200 \uff0c\u8fd4\u56de\u5934\u4fe1\u606f\u5982\u4e0b\u6240\u793a\uff1a \u53c2\u6570 \u8bf4\u660e x-upyun-file-type \u6587\u4ef6\u4e3a file \uff0c\u6587\u4ef6\u5939\u4e3a folder x-upyun-file-size \u6587\u4ef6\u5927\u5c0f x-upyun-file-date \u6587\u4ef6\u521b\u5efa\u65f6\u95f4 Content-Md5 \u6587\u4ef6\u7684 MD5 \u503c \u83b7\u53d6\u5931\u8d25\uff1a\u8fd4\u56de\u76f8\u5e94\u7684\u51fa\u9519\u4fe1\u606f\uff0c\u5177\u4f53\u8bf7\u53c2\u9605\u300c API \u9519\u8bef\u7801\u8868 \u300d\u3002","title":"\u83b7\u53d6\u6587\u4ef6\u4fe1\u606f"},{"location":"api/rest_api/#_13","text":"GET /<bucket>/path/to/folder \u5206\u9875\u53c2\u6570 \u5982\u679c\u76ee\u5f55\u4e2d\u6587\u4ef6\u6570\u91cf\u8fc7\u591a\uff0c\u4e3a\u4e86\u66f4\u53cb\u597d\u7684\u83b7\u53d6\u6587\u4ef6\u4fe1\u606f\uff0c\u53ef\u4ee5\u5206\u9875\u83b7\u53d6\uff1a \u53c2\u6570 \u5fc5\u9009 \u7c7b\u578b \u8bf4\u660e x-list-iter \u5426 string \u5206\u9875\u5f00\u59cb\u4f4d\u7f6e\uff0c\u901a\u8fc7 x-upyun-list-iter \u54cd\u5e94\u5934\u8fd4\u56de\uff0c\u6240\u4ee5\u7b2c\u4e00\u6b21\u8bf7\u6c42\u4e0d\u9700\u8981\u586b\u5199 x-list-limit \u5426 string \u83b7\u53d6\u7684\u6587\u4ef6\u6570\u91cf\uff0c\u9ed8\u8ba4 100\uff0c\u6700\u5927 10000 x-list-order \u5426 string asc \u6216 desc \uff0c\u6309\u6587\u4ef6\u540d\u5347\u5e8f\u6216\u964d\u5e8f\u6392\u5217\u3002\u9ed8\u8ba4 asc Accept \u5426 string application/json ,\u8fd4\u56dejson\u683c\u5f0f \u54cd\u5e94\u4fe1\u606f \u83b7\u53d6\u6210\u529f\uff1a\u8fd4\u56de 200 \u3002 \u83b7\u53d6\u5931\u8d25\uff1a\u8fd4\u56de\u76f8\u5e94\u7684\u51fa\u9519\u4fe1\u606f\uff0c\u5177\u4f53\u8bf7\u53c2\u9605\u300c API \u9519\u8bef\u7801\u8868 \u300d\u3002 \u4f8b\u5982\uff1a > HTTP/1.1 200 OK > x-upyun-list-iter: c2Rmc2Rsamdvc2pnb3dlam9pd2Vmd2Z3Zg== foo.jpg\\tN\\t4237\\t1415096225\\nbar\\tF\\t423404\\t1415096260 x-upyun-list-iter \u8fd4\u56de\u4e0b\u4e00\u6b21\u5206\u9875\u5f00\u59cb\u4f4d\u7f6e\u3002\u5b83\u7531\u4e00\u4e32 Base64 \u7f16\u7801\u7684\u968f\u673a\u6570\u7ec4\u6210\uff0c\u5f53\u5b83\u662f g2gCZAAEbmV4dGQAA2VvZg \u65f6\uff0c\u8868\u793a \u6700\u540e\u4e00\u4e2a\u5206\u9875 \u3002 HTTP body \u4e3a\u5404\u4e2a\u6587\u4ef6/\u76ee\u5f55\u7684\u4fe1\u606f\uff0c\u6587\u4ef6/\u76ee\u5f55\u4e4b\u95f4\u4ee5 \\n \u5206\u9694\uff0c\u5c5e\u6027\u6309 \u300c\u6587\u4ef6\\t\u7c7b\u578b\\t\u5927\u5c0f\\t\u6700\u540e\u4fee\u6539\u65f6\u95f4\u300d \u6392\u5217\uff0c\u7c7b\u578b\u53ef\u9009\u503c\uff1a N \u8868\u793a\u6587\u4ef6\uff0c F \u8868\u793a\u76ee\u5f55\u3002 \u82e5\u8bbe\u7f6e\u4e86 Accept: application/json \u8bf7\u6c42\u5934\u5219\u8fd4\u56de: { \"files\": [{ \"type\": \"image/jpeg\", \"length\": 4237, \"name\": \"foo.jpg\", \"last_modified\": 1415096225 }, { \"type\": \"folder\", \"length\": 423404, \"name\": \"bar\", \"last_modified\": 1415096260 }], \"iter\": \"c2Rmc2Rsamdvc2pnb3dlam9pd2Vmd2Z3Zg==\" }","title":"\u83b7\u53d6\u76ee\u5f55\u6587\u4ef6\u5217\u8868"},{"location":"api/rest_api/#_14","text":"GET /<bucket>/?usage \u54cd\u5e94\u4fe1\u606f \u83b7\u53d6\u6210\u529f\uff1a\u8fd4\u56de 200 \u3002HTTP body \u5185\u5bb9\u4e3a\u670d\u52a1\u7684\u4f7f\u7528\u91cf\uff08\u5355\u4f4d\u4e3a Byte \uff09\u3002 \u83b7\u53d6\u5931\u8d25\uff1a\u8fd4\u56de\u76f8\u5e94\u7684\u51fa\u9519\u4fe1\u606f\uff0c\u5177\u4f53\u8bf7\u53c2\u9605\u300c API \u9519\u8bef\u7801\u8868 \u300d\u3002","title":"\u83b7\u53d6\u670d\u52a1\u4f7f\u7528\u91cf"},{"location":"api/rest_api/#metadata","text":"\u4e0b\u8f7d\u6587\u4ef6\u65f6\uff0c\u5728\u54cd\u5e94\u5934\u91cc\u8fd4\u56de\u6587\u4ef6\u7684\u6240\u6709\u5143\u6570\u636e\u3002","title":"Metadata"},{"location":"api/rest_api/#metadata_1","text":"\u4e0a\u4f20\u6587\u4ef6 \u65f6\uff0c\u5982\u679c\u5728\u8bf7\u6c42\u5934\u91cc\u5e26\u4e0a\u4ee5 x-upyun-meta- \u5f00\u5934\u7684\u53c2\u6570\uff0c\u90a3\u4e48\u8be5\u53c2\u6570\u4f1a\u4f5c\u4e3a\u6587\u4ef6\u7684\u5143\u6570\u636e\u5b58\u50a8\u5230\u4e91\u5b58\u50a8\u3002\u4f8b\u5982\uff1a curl -d 'abc' \\ http://v0.api.upyun.com/<bucket>/abc.txt \\ -H \"Authorization: UPYUN <Operator>:<Signature>\" \\ -H \"Date: <Wed, 30 Oct 2016 11:26:58 GMT>\"\\ -H \"x-upyun-meta-foo: Bar\"\\ -H \"x-upyun-meta-a: 2\" \u6587\u4ef6 abc.txt \u4f1a\u589e\u52a0 x-upyun-meta-foo: bar \u548c x-upyun-meta-a: 2 \u8fd9\u4e24\u4e2a\u5143\u4fe1\u606f\u3002","title":"\u6dfb\u52a0 Metadata"},{"location":"api/rest_api/#metadata_2","text":"PATCH /<bucket>/path/to/file?metadata=<option> option \u7684\u53d6\u503c\u5982\u4e0b\uff1a option \u8bf4\u660e merge\uff08 \u9ed8\u8ba4 \uff09 \u5408\u5e76\u6587\u4ef6\u5143\u4fe1\u606f\uff0c\u5982\u679c\u662f\u76f8\u540c\u7684\u5143\u4fe1\u606f\uff0c\u5c06\u88ab\u65b0\u4e0a\u4f20\u7684\u503c\u66ff\u6362 replace \u66ff\u6362\u6587\u4ef6\u5143\u4fe1\u606f\u4e3a\u65b0\u4e0a\u4f20\u7684\u6587\u4ef6\u5143\u4fe1\u606f delete \u5220\u9664\u6587\u4ef6\u5143\u4fe1\u606f \u54cd\u5e94\u4fe1\u606f \u4fee\u6539\u6210\u529f\uff1a\u8fd4\u56de 200 \u3002 \u4fee\u6539\u5931\u8d25\uff1a\u8fd4\u56de\u76f8\u5e94\u7684\u51fa\u9519\u4fe1\u606f\uff0c\u5177\u4f53\u8bf7\u53c2\u9605\u300c API \u9519\u8bef\u7801\u8868 \u300d\u3002 \u4e3e\u4f8b \u4f8b 1\uff1a\u5408\u5e76\u5143\u4fe1\u606f\uff0c metadata=merge curl -d 'abc' http://v0.api.upyun.com/<bucket>/abc.txt \\ -H \"Authorization: Basic b3BlcmF0b3I6cGFzc3dvcmQ=\" \\ -H \"x-upyun-meta-a: 1\" curl -XPATCH http://v0.api.upyun.com/<bucket>/abc.txt?metadata=merge \\ -H \"Authorization: Basic b3BlcmF0b3I6cGFzc3dvcmQ=\" \\ -H \"x-upyun-meta-a: 2\" \\ -H \"x-upyun-meta-b: 3\" \u6587\u4ef6 abc.txt \u7684\u5143\u4fe1\u606f\u662f\uff1a x-upyun-meta-a: 2 x-upyun-meta-b: 3 \u4f8b 2\uff1a\u66ff\u6362\u5143\u4fe1\u606f\uff0c metadata=replace curl -d 'abc' http://v0.api.upyun.com/<bucket>/abc.txt \\ -H \"Authorization: Basic b3BlcmF0b3I6cGFzc3dvcmQ=\" \\ -H \"x-upyun-meta-a: 1\" \\ -H \"x-upyun-meta-b: 2\" curl -XPATCH http://v0.api.upyun.com/<bucket>/abc.txt?metadata=replace \\ -H \"Authorization: Basic b3BlcmF0b3I6cGFzc3dvcmQ=\" \\ -H \"x-upyun-meta-a: 3\" \\ -H \"x-upyun-meta-c: 4\" \u6587\u4ef6 abc.txt \u7684\u5143\u4fe1\u606f\u4e3a\uff1a x-upyun-meta-a: 3 x-upyun-meta-c: 4 \u4f8b 3\uff1a\u5220\u9664\u5143\u4fe1\u606f\uff0c metadata=delete curl -d 'abc' http://v0.api.upyun.com/<bucket>/abc.txt \\ -H \"Authorization: Basic b3BlcmF0b3I6cGFzc3dvcmQ=\" \\ -H \"x-upyun-meta-a: 1\" \\ -H \"x-upyun-meta-b: 2\" curl -XPATCH http://v0.api.upyun.com/<bucket>/abc.txt?metadata=delete \\ -H \"Authorization: Basic b3BlcmF0b3I6cGFzc3dvcmQ=\" \\ -H \"x-upyun-meta-a: true\" \u6587\u4ef6 abc.txt \u7684\u5143\u4fe1\u606f\u4e3a\uff1a x-upyun-meta-b: 2","title":"\u4fee\u6539 Metadata"},{"location":"api/rest_api/#_15","text":"\u4f8b 1\uff1a\u4fee\u6539 Metadata \u9ed8\u8ba4\u4e0d\u66f4\u65b0\u6587\u4ef6\u7684 Last-Modified \uff0c\u5982\u679c\u9700\u8981\u66f4\u65b0\uff0c\u5728\u53c2\u6570\u4e2d\u6307\u5b9a update_last_modified=true \uff1a curl -XPATCH http://v0.api.upyun.com/<bucket>/abc.txt?metadata=replace&update_last_modified=true \\ -H \"Authorization: Basic b3BlcmF0b3I6cGFzc3dvcmQ=\" \\ -H \"x-upyun-meta-a: 3\" \\ -H \"x-upyun-meta-c: 4\" \u4f8b 2\uff1a Content-Secret \u662f\u88ab\u5b58\u50a8\u4e3a x-upyun-meta-secret \u5143\u4fe1\u606f\uff0c\u5982\u679c\u9700\u8981\u4fee\u6539\u6216\u5220\u9664\uff0c\u53ef\u4ee5\u5bf9 x-upyun-meta-secret \u8fdb\u884c\u64cd\u4f5c\uff1a curl -XPATCH http://v0.api.upyun.com/<bucket>/abc.txt?metadata=delete \\ -H \"Authorization: Basic b3BlcmF0b3I6cGFzc3dvcmQ=\" \\ -H \"x-upyun-meta-secret: upyun520\"","title":"\u5e38\u89c1\u5e94\u7528\u6848\u4f8b"},{"location":"api/rest_api/#_16","text":"\u7b7e\u540d\u683c\u5f0f Authorization: UpYun <operator>:<signature> \u7b7e\u540d\uff08signature\uff09\u7b97\u6cd5 \u7b7e\u540d\u6240\u9700\u7684\u76f8\u5173\u4fe1\u606f\u5982\u4e0b\u8868\uff1a \u6240\u9700\u4fe1\u606f \u8bf4\u660e METHOD \u8bf7\u6c42\u65b9\u5f0f\uff0c\u5982\uff1aGET\u3001POST\u3001PUT\u3001HEAD \u7b49 PATH \u8bf7\u6c42\u8def\u5f84\uff0c\u9700 URL \u7f16\u7801\u5904\u7406 ( RFC 1738 ) DATE \u8bf7\u6c42\u65e5\u671f\uff0cGMT \u683c\u5f0f\u5b57\u7b26\u4e32 ( RFC 1123 ) CONTENT_LENGTH \u8bf7\u6c42\u5185\u5bb9\u957f\u5ea6\uff0c\u9664 GET \u7b49\u65e0\u5b9e\u4f53\u8bf7\u6c42\u5916\uff0c\u9700\u548c\u8bf7\u6c42\u5934\u90e8\u7684 Content-Length \u4e00\u81f4 PASSWORD \u670d\u52a1\u7684\u64cd\u4f5c\u5458\u7684\u5bc6\u7801 \u5c06 PASSWORD md5 \u4e4b\u540e\uff08\u6211\u4eec\u6682\u4e14\u5c06\u5176\u8bb0\u4f5c PASSWORD_MD5 \uff09\uff0c\u4e0a\u8868\u6240\u6ce8\u7684\u5176\u4ed6\u4fe1\u606f\u4ee5 & \u5b57\u7b26\u8fdb\u884c\u62fc\u63a5\uff08\u6309\u8868\u683c\u4ece\u4e0a\u81f3\u4e0b\u7684\u987a\u5e8f\uff09\u5373\uff08 METHOD&PATH&DATE&CONTENT-LENGTH&PASSWORD_MD5 \uff09\uff0c\u5e76\u5c06\u6240\u5f97\u5b57\u7b26\u4e32\u8fdb\u884c MD5 \u52a0\u5bc6\uff0c\u5373\u5f97\u6211\u4eec\u6240\u9700\u7684 \u7b7e\u540d\uff08signature\uff09 \u6ce8 \u7b7e\u540d\u7684\u6709\u6548\u671f\u4e3a 30 \u5206\u949f\u3002\u5982\u679c\u8d85\u8fc7 30 \u5206\u949f\uff0c\u5219\u9700\u91cd\u65b0\u751f\u6210\u7b7e\u540d\u3002 GET\uff0cDELETE \u64cd\u4f5c\u7684 CONTENT_LENGTH \u4e3a 0\u3002 \u4f8b\u5982 \u8bf7\u6c42\u65b9\u5f0f\u4e3a GET \uff0cURI \u4e3a bucket \u670d\u52a1\u7684\u5b50\u76ee\u5f55 /sub \uff0c\u8bf7\u6c42\u65f6\u95f4\u4e3a Wed, 29 Oct 2014 02:26:58 GMT \uff0c\u56e0\u4e3a\u662f GET \uff0c\u6240\u4ee5 CONTENT-LENGTH \u4e3a 0 \uff0c\u5047\u8bbe\u8be5\u670d\u52a1\u6709\u4e00\u4e2a\u6388\u6743\u64cd\u4f5c\u5458\u540d\u4e3a upyun \uff0c\u8be5\u64cd\u4f5c\u5458\u5bc6\u7801\u4e3a password \uff08\u5bc6\u7801 md5 \u540e\u4e3a 5f4dcc3b5aa765d61d8327deb882cf99 \uff09\uff0c\u90a3\u4e48\uff1a \u7b7e\u540d\uff08signature\uff09\u5373\u662f\u5bf9\u5b57\u7b26\u4e32 GET&/bucket/sub&Wed, 29 Oct 2014 02:26:58 GMT&0&5f4dcc3b5aa765d61d8327deb882cf99 \u8ba1\u7b97 MD5 \u6240\u5f97\uff0c\u5373\uff1a 03db45e2904663c5c9305a9c6ed62af3 \uff0c\u56e0\u6b64\uff0c\u53ea\u9700\u5728\u8bf7\u6c42\u5934\u90e8\u52a0\u4e0a\u5982\u4e0b\u5b57\u6bb5\u5373\u53ef\uff1a Authorization: UpYun upyun:03db45e2904663c5c9305a9c6ed62af3","title":"\u7b7e\u540d\u8ba4\u8bc1\uff08\u65e7\uff09"},{"location":"api/rest_api/#_17","text":"\u53c2\u6570 \u5fc5\u9009 \u8bf4\u660e x-gmkerl-extract-color-count \u5426 \u4e3b\u9898\u8272\u63d0\u53d6\u7684\u989c\u8272\u6570\u91cf\uff0c\u9ed8\u8ba4 256 x-gmkerl-extract-format \u5426 \u4e3b\u9898\u8272\u63d0\u53d6\u683c\u5f0f\uff0c\u9ed8\u8ba4 hex x-gmkerl-thumbnail \u5426 \u7f29\u7565\u56fe\u7248\u672c\u540d\u79f0\uff0c\u53ef\u642d\u914d\u5176\u4ed6 x-gmkerl-* \u53c2\u6570\u4f7f\u7528 x-gmkerl-type \u5426 \u7f29\u7565\u7c7b\u578b\uff0c\u89c1 x-gmkerl-type \u53ef\u9009\u503c\u5217\u8868 x-gmkerl-value \u5426 \u7f29\u7565\u7c7b\u578b\u5bf9\u5e94\u7684\u53c2\u6570\u503c\uff0c\u89c1 x-gmkerl-value \u503c\u8bf4\u660e x-gmkerl-quality \u5426 \u538b\u7f29\u8d28\u91cf\uff0c\u9ed8\u8ba4 95 x-gmkerl-unsharp \u5426 \u662f\u5426\u9510\u5316\uff0c\u9ed8\u8ba4\u9510\u5316 x-gmkerl-rotate \u5426 \u56fe\u7247\u65cb\u8f6c\uff08\u987a\u65f6\u9488\uff09\uff0c\u53ef\u9009\u503c\uff1a auto \u3001 (0, 360] \u3002\u8be6\u89c1 \u65cb\u8f6c x-gmkerl-crop \u5426 \u56fe\u7247\u88c1\u526a\uff0c\u683c\u5f0f\uff1a <w>x<h>a<x>a<y> \u3002\u8be6\u89c1 \u88c1\u526a x-gmkerl-exif-switch \u5426 \u662f\u5426\u4fdd\u7559 EXIF \u4fe1\u606f\uff0c\u9ed8\u8ba4\u4e0d\u4fdd\u7559 \u4ec5\u5728\u642d\u914d x-gmkerl-crop \u3001 x-gmkerl-type \u3001 x-gmkerl-thumbnail \u65f6\u6709\u6548 x-gmkerl-watermark-text \u5426 \u6587\u5b57\u6c34\u5370\u5185\u5bb9\uff0c\u5fc5\u987b\u7ecf\u8fc7 urlencode \u5904\u7406 x-gmkerl-watermark-font \u5426 \u6587\u5b57\u6c34\u5370\u5b57\u4f53\uff0c\u9ed8\u8ba4 simsun \uff0c\u89c1 x-gmkerl-watermark-font \u53ef\u9009\u503c\u5217\u8868 x-gmkerl-watermark-size \u5426 \u6587\u5b57\u6c34\u5370\u5b57\u4f53\u5927\u5c0f\uff0c\u6b63\u6574\u6570\uff0c\u5355\u4f4d\u50cf\u7d20\uff0c\u9ed8\u8ba4 32 x-gmkerl-watermark-align \u5426 \u6c34\u5370\u5bf9\u9f50\u65b9\u5f0f\uff0c\u9ed8\u8ba4 top,left \uff0c\u89c1 x-gmkerl-watermark-align \u503c\u8bf4\u660e x-gmkerl-watermark-margin \u5426 \u6c34\u5370\u8fb9\u8ddd\uff0c\u683c\u5f0f x,y \uff0c\u65e2 \u6c34\u5e73\u8fb9\u8ddd,\u5782\u76f4\u8fb9\u8ddd \uff0c\u5355\u4f4d\u50cf\u7d20\uff0c\u9ed8\u8ba4 20,20 x-gmkerl-watermark-opacity \u5426 \u6c34\u5370\u900f\u660e\u5ea6\uff0c\u53d6\u503c\u8303\u56f4 0 ~ 100 \u7684\u6574\u6570\uff0c\u9ed8\u8ba4 0 x-gmkerl-watermark-color \u5426 \u6587\u5b57\u6c34\u5370\u989c\u8272\uff0cRGB \u503c\uff0c\u9ed8\u8ba4 #000000 x-gmkerl-watermark-border \u5426 \u6587\u5b57\u6c34\u5370\u8fb9\u6846\uff0c\u9ed8\u8ba4\u65e0\u8fb9\u6846\uff0c\u89c1 x-gmkerl-watermark-border \u503c\u8bf4\u660e x-gmkerl-type \u53ef\u9009\u503c\u5217\u8868 \u503c \u542b\u4e49 fix_width \u9650\u5b9a\u5bbd\u5ea6\uff0c\u9ad8\u5ea6\u81ea\u9002\u5e94 fix_height \u9650\u5b9a\u9ad8\u5ea6\uff0c\u5bbd\u5ea6\u81ea\u9002\u5e94 fix_width_or_height \u9650\u5b9a\u5bbd\u5ea6\u548c\u9ad8\u5ea6\uff0c\u5bbd\u9ad8\u4e0d\u8db3\u65f6\u4e0d\u7f29\u653e fix_both \u56fa\u5b9a\u5bbd\u5ea6\u548c\u9ad8\u5ea6\uff0c\u5bbd\u9ad8\u4e0d\u8db3\u65f6\u5f3a\u884c\u7f29\u653e fix_max \u9650\u5b9a\u6700\u957f\u8fb9\uff0c\u77ed\u8fb9\u81ea\u9002\u5e94 fix_min \u9650\u5b9a\u6700\u77ed\u8fb9\uff0c\u957f\u8fb9\u81ea\u9002\u5e94 fix_scale \u7b49\u6bd4\u4f8b\u7f29\u653e\uff081-1000\uff09 x-gmkerl-value \u503c\u8bf4\u660e \u5f53 x-gmkerl-type \u6307\u5b9a\u4e3a fix_width_or_height \u6216 fix_both \u65f6\uff0c x-gmkerl-value \u503c\u7684\u683c\u5f0f\u4e3a <width>x<height> \uff0c\u5982 480x576 \u3002 \u5f53 x-gmkerl-type \u4e3a\u5176\u4ed6\u7684\u7c7b\u578b\uff0c x-gmkerl-value \u503c\u53ea\u9700\u8981\u6307\u5b9a\u5355\u4e2a\u6570\u5b57\uff0c\u5982 100 \uff0c\u610f\u601d\u4e3a\u9ad8\u548c/\u6216\u5bbd\u4e3a 100 \u3002 x-gmkerl-watermark-font \u53ef\u9009\u503c\u5217\u8868 simsun \uff1a\u5b8b\u4f53(simsun) simhei \uff1a\u9ed1\u4f53 (simhei) simkai \uff1a\u6977\u4f53 (simkai) simli \uff1a\u96b6\u4e66 (simli) simyou \uff1a\u5e7c\u5706 (simyou) simfang \uff1a\u4eff\u5b8b (simfang) x-gmkerl-watermark-align \u503c\u8bf4\u660e \u683c\u5f0f valign,halign \uff0c\u65e2 \u5782\u76f4\u5bf9\u9f50,\u6c34\u5e73\u5bf9\u9f50 \uff0c valign \u3001 halign \u53ef\u9009\u503c\uff1a \u5782\u76f4\u5bf9\u9f50\uff1a top \uff0c middle \uff0c bottom \uff1b \u6c34\u5e73\u5bf9\u9f50\uff1a left \uff0c center \uff0c right \u3002 x-gmkerl-watermark-border \u503c\u8bf4\u660e \u683c\u5f0f rgba \uff0c RGB \u8868\u793a\u8fb9\u6846\u7684\u989c\u8272\uff0c a \u8868\u793a\u8fb9\u6846\u7684\u900f\u660e\u5ea6\uff0c\u5982 #cccccccc \u5982\u6709\u7591\u95ee\u8bf7 \u8054\u7cfb\u6211\u4eec","title":"\u56fe\u7247\u9884\u5904\u7406\uff08\u65e7\uff09"},{"location":"api/sdk/","text":"PHP SDK \u00b6 \u53c8\u62cd\u4e91 PHP SDK \u6258\u7ba1\u5728 github \uff0c\u5b83\u5305\u542b\u5982\u4e0b\u529f\u80fd\uff1a1\uff09\u5b58\u50a8\u7ba1\u7406\uff1b2\uff09\u56fe\u7247\u5904\u7406\uff1b3\uff09\u97f3\u89c6\u9891\u5904\u7406\uff1b4\uff09\u7f13\u5b58\u5237\u65b0\u3002\u672c\u6bb5\u4ecb\u7ecd PHP SDK \u7684\u4f7f\u7528\u3002 \u5f00\u53d1\u51c6\u5907 \u00b6 ** \u8fd0\u884c\u73af\u5883 ** PHP SDK version 3.0\uff0c\u9700\u8981 PHP \u7248\u672c >= 5.5\u3002\u60a8\u53ef\u4ee5\u901a\u8fc7 php -v \u547d\u4ee4\u67e5\u770b\u5f53\u524d\u7684 PHP \u7248\u672c\u3002 ** \u5b89\u88c5 ** Composer \u65b9\u5f0f Composer \u662f PHP \u7684\u4f9d\u8d56\u7ba1\u7406\u5de5\u5177\u3002\u60a8\u53ef\u4ee5\u5728\u81ea\u5df1\u7684\u9879\u76ee\u4e2d\u58f0\u660e\u6240\u4f9d\u8d56\u7684\u5916\u90e8\u5de5\u5177\u5e93\uff0cComposer \u4f1a\u81ea\u52a8\u5e2e\u60a8\u5b89\u88c5\u8fd9\u4e9b\u4f9d\u8d56\u7684\u5e93\u6587\u4ef6\u3002 \u5728\u9879\u76ee\u6839\u76ee\u5f55\u8fd0\u884c\uff1a composer require upyun/sdk \u6e90\u7801\u65b9\u5f0f \u5982\u679c\u4f7f\u7528 Composer \u65b9\u5f0f\u8f83\u6162\uff0c\u53ef\u4ee5\u76f4\u63a5\u4e0b\u8f7d SDK \u5305 \uff0c\u653e\u5230\u9879\u76ee\u6839\u76ee\u5f55\uff0c\u7136\u540e\u628a\u5305\u5bfc\u5165\u5de5\u7a0b\u4e2d\u3002 \u521d\u59cb\u5316 \u00b6 Config\uff08\u914d\u7f6e\uff09\u548c Upyun\uff08\u8fde\u63a5\uff09\u662f PHP SDK \u7684\u521d\u59cb\u5316\u7c7b\uff0c\u5728\u64cd\u4f5c\u4e91\u5b58\u50a8\u3001\u4e91\u5904\u7406\u4e4b\u524d\uff0c\u9700\u8981\u5148\u5b9e\u4f8b\u5316\u5b83\u4eec\u3002 <?php // \u5305\u542b\u6587\u4ef6 require_once('vendor/autoload.php'); use Upyun\\Upyun; use Upyun\\Config; // \u521b\u5efa\u5b9e\u4f8b $bucketConfig = new Config('\u60a8\u7684\u670d\u52a1\u540d', '\u60a8\u7684\u64cd\u4f5c\u5458\u540d', '\u60a8\u7684\u64cd\u4f5c\u5458\u5bc6\u7801'); $client = new Upyun($bucketConfig); ?> \u8bf4\u660e\uff0c\u4e3a\u4e86\u907f\u514d\u91cd\u590d\uff0c\u540e\u7eed \u300c\u529f\u80fd\u4f7f\u7528\u300d \u4e2d\u7684 DEMO \u4e0d\u518d\u5305\u542b\u8fd9\u6bb5\u4ee3\u7801\uff0c\u8bf7\u5728\u4f7f\u7528\u65f6\u6ce8\u610f\u3002 \u529f\u80fd\u4f7f\u7528 \u00b6 \u5217\u8868\uff1a \u6587\u4ef6\u4e0a\u4f20 \u3001 \u6587\u4ef6\u5220\u9664 \u3001 \u76ee\u5f55\u521b\u5efa\u548c\u5220\u9664 \u3001 \u5217\u76ee\u5f55 \u3001 \u83b7\u53d6\u6587\u4ef6\u4fe1\u606f \u3001 \u83b7\u53d6\u670d\u52a1\u5bb9\u91cf ** \u6587\u4ef6\u4e0a\u4f20\u3001\u56fe\u7247\u5904\u7406\uff08\u540c\u6b65\uff09 ** <?php // \u7701\u7565\u521d\u59cb\u5316\u4ee3\u7801 // \u8bfb\u6587\u4ef6 $file = fopen('/root/13.jpg', 'r'); // \u4e0a\u4f20\u6587\u4ef6 $res = $client->write('/up/dd.jpg', $file); // \u6253\u5370\u4e0a\u4f20\u7ed3\u679c print_r($res); ?> \u8bf4\u660e\uff0c /root/13.jpg \u4e3a\u672c\u5730\u6587\u4ef6\u7edd\u5bf9\u8def\u5f84\uff0c /up/dd.jpg \u4e3a\u4fdd\u5b58\u5230\u53c8\u62cd\u4e91\u5b58\u50a8\u7684\u8def\u5f84\u53ca\u6587\u4ef6\u540d\u3002 <?php // \u7701\u7565\u521d\u59cb\u5316\u4ee3\u7801 // \u8bfb\u6587\u4ef6 $file = fopen('/root/13.jpg', 'r'); // \u6dfb\u52a0\u4f5c\u56fe\u53c2\u6570 $tasks = array('x-gmkerl-thumb' => '/format/png/fw/100'); // \u4e0a\u4f20\u6587\u4ef6 $res = $client->write('/up/dd.png', $file, $tasks); // \u6253\u5370\u4e0a\u4f20\u7ed3\u679c print_r($res); ?> \u8bf4\u660e\uff0c\u4e0a\u4f20\u56fe\u7247\u540c\u65f6\uff0c\u5bf9\u56fe\u7247\u8fdb\u884c\u5904\u7406\uff0c\u628a\u5904\u7406\u540e\u7684\u56fe\u7247\u5b58\u8fdb\u5b58\u50a8\u3002\u5177\u4f53\u8be6\u89c1 \u56fe\u7247\u5904\u7406\uff08\u540c\u6b65\uff09 \u3002 ** \u6587\u4ef6\u5220\u9664 ** <?php // \u7701\u7565\u521d\u59cb\u5316\u4ee3\u7801 // \u5355\u6587\u4ef6\u5220\u9664 $res=$client->delete('/up/dd.txt'); echo $res; ?> \u8bf4\u660e\uff0c /up/dd.txt \u4e3a\u6587\u4ef6\u5728\u53c8\u62cd\u4e91\u5b58\u50a8\u7684\u8def\u5f84\u3002\u7ed3\u679c\u4e3a 1 \uff0c\u8868\u793a\u5220\u9664\u6210\u529f\u3002\u5f02\u5e38\u76f4\u63a5\u629b\u51fa\u3002 ** \u76ee\u5f55\u521b\u5efa\u548c\u5220\u9664 ** <?php // \u7701\u7565\u521d\u59cb\u5316\u4ee3\u7801 // \u521b\u5efa\u76ee\u5f55 $res=$client->createDir('/up/tt/ss'); echo $res; // \u5220\u9664\u7a7a\u76ee\u5f55 $res=$client->deleteDir('/up/tt/ss'); echo $res; ?> \u8bf4\u660e\uff0c /up/tt/ss \u4e3a\u76ee\u5f55\u7684\u8def\u5f84\u3002\u7ed3\u679c\u4e3a 1 \uff0c\u8868\u793a\u6210\u529f\u3002\u5f02\u5e38\u76f4\u63a5\u629b\u51fa\u3002 ** \u83b7\u53d6\u6587\u4ef6\u4fe1\u606f ** <?php // \u7701\u7565\u521d\u59cb\u5316\u4ee3\u7801 $res=$client->info('/up/dd.jpg'); print_r($res); ?> \u8bf4\u660e\uff0c /up/dd.jpg \u4e3a\u6587\u4ef6\u5728\u53c8\u62cd\u4e91\u5b58\u50a8\u7684\u8def\u5f84\u3002\u7ed3\u679c\u4ee5\u6570\u7ec4\u5f62\u5f0f\u8fd4\u56de\uff0c\u5185\u5bb9\u5305\u62ec\uff1a\u6587\u4ef6\u7c7b\u578b\u3001\u6587\u4ef6\u5927\u5c0f\u548c\u6587\u4ef6\u6700\u540e\u4fee\u6539\u65f6\u95f4\u3002 ** \u83b7\u53d6\u670d\u52a1\u5bb9\u91cf ** <?php // \u7701\u7565\u521d\u59cb\u5316\u4ee3\u7801 $res=$client->usage(); echo $res; ?> \u8bf4\u660e\uff0c\u7ed3\u679c\u4e3a\u5bb9\u91cf\u6570\u503c\uff0c\u5355\u4f4d\u5b57\u8282\u3002\u5f02\u5e38\u76f4\u63a5\u629b\u51fa\u3002 Java SDK \u00b6 \u53c8\u62cd\u4e91 Java SDK \u6258\u7ba1\u5728 github \uff0c\u5b83\u5305\u542b\u5982\u4e0b\u529f\u80fd\uff1a1\uff09\u5b58\u50a8\u7ba1\u7406\uff1b2\uff09\u56fe\u7247\u5904\u7406\uff1b3\uff09\u97f3\u89c6\u9891\u5904\u7406\uff1b4\uff09\u7f13\u5b58\u5237\u65b0\u3002\u672c\u6bb5\u4ecb\u7ecd Java SDK \u7684\u4f7f\u7528\u3002 \u5f00\u53d1\u51c6\u5907 \u00b6 ** \u8fd0\u884c\u73af\u5883 ** Java SDK version 3.0+\uff0c\u9700\u8981 Java \u7248\u672c >= 6\u3002\u53ef\u4ee5\u901a\u8fc7 java -version \u547d\u4ee4\u67e5\u770b\u5f53\u524d\u7684 Java \u7248\u672c\u3002 ** \u5b89\u88c5 ** Maven \u65b9\u5f0f Maven \u662f\u4e00\u4e2a\u9879\u76ee\u7ba1\u7406\u53ca\u81ea\u52a8\u6784\u5efa\u5de5\u5177\u3002\u60a8\u53ef\u4ee5\u5728\u81ea\u5df1\u7684\u9879\u76ee\u4e2d\u58f0\u660e\u6240\u4f9d\u8d56\u7684\u5916\u90e8\u5de5\u5177\u5e93\uff0cMaven \u4f1a\u81ea\u52a8\u5e2e\u60a8\u5b89\u88c5\u8fd9\u4e9b\u4f9d\u8d56\u7684\u5e93\u6587\u4ef6\u3002 <dependency> <groupId>com.upyun</groupId> <artifactId>java-sdk</artifactId> <version>4.0.1</version> </dependency> \u6e90\u7801\u65b9\u5f0f \u9664\u4e86 Maven \u65b9\u5f0f\u5916\uff0c\u8fd8\u53ef\u4ee5\u76f4\u63a5\u4e0b\u8f7d SDK \u5305 \uff0c\u653e\u5230\u9879\u76ee\u6839\u76ee\u5f55\uff0c\u7136\u540e\u628a\u5305\u5bfc\u5165\u5de5\u7a0b\u4e2d\u3002 \u521d\u59cb\u5316 \u00b6 UpYun \u662f Java SDK \u7684\u521d\u59cb\u5316\u7c7b\uff0c\u5728\u64cd\u4f5c\u4e91\u5b58\u50a8\u3001\u4e91\u5904\u7406\u4e4b\u524d\uff0c\u9700\u8981\u5148\u5b9e\u4f8b\u5316\u5b83\u3002 // \u521b\u5efa\u5b9e\u4f8b UpYun upyun = new UpYun('\u60a8\u7684\u670d\u52a1\u540d', '\u60a8\u7684\u64cd\u4f5c\u5458\u540d', '\u60a8\u7684\u64cd\u4f5c\u5458\u5bc6\u7801'); // \u53ef\u9009\u5c5e\u60271\uff0c\u662f\u5426\u5f00\u542f debug \u6a21\u5f0f\uff0c\u9ed8\u8ba4\u4e0d\u5f00\u542f upyun.setDebug(false); // \u53ef\u9009\u5c5e\u60272\uff0c\u8d85\u65f6\u65f6\u95f4\uff0c\u9ed8\u8ba4 30s upyun.setTimeout(30); \u8bf4\u660e\uff0c\u4e3a\u4e86\u907f\u514d\u91cd\u590d\uff0c\u540e\u7eed \u300c\u529f\u80fd\u4f7f\u7528\u300d \u4e2d\u7684 DEMO \u4e0d\u518d\u5305\u542b\u521d\u59cb\u5316\u8fd9\u6bb5\u4ee3\u7801\uff0c\u8bf7\u5728\u4f7f\u7528\u65f6\u6ce8\u610f\u3002 \u529f\u80fd\u4f7f\u7528 \u00b6 \u5217\u8868\uff1a \u6587\u4ef6\u4e0a\u4f20 \u3001 \u8868\u5355\u4e0a\u4f20 \u3001 \u6587\u4ef6\u5220\u9664 \u3001 \u76ee\u5f55\u521b\u5efa\u548c\u5220\u9664 \u3001 \u5217\u76ee\u5f55 \u3001 \u83b7\u53d6\u6587\u4ef6\u4fe1\u606f \u3001 \u83b7\u53d6\u670d\u52a1\u5bb9\u91cf ** \u6587\u4ef6\u4e0a\u4f20\u3001\u6279\u91cf\u4e0a\u4f20 ** REST API\u3001FORM API // \u6587\u4ef6\u4e0a\u4f20 upyun.setContentMD5(UpYun.md5('/root/13.jpg')); // \u8ba1\u7b97\u6587\u4ef6 MD5\uff0c\u5982\u679c\u6587\u4ef6\u592a\u5927\u6216\u8ba1\u7b97\u4e0d\u4fbf\uff0c\u53ef\u4ee5\u4e0d\u8ba1\u7b97 boolean result4 = upyun.writeFile('/up/dd.jpg', '/root/13.jpg'); \u8bf4\u660e\uff0c /root/13.jpg \u4e3a\u672c\u5730\u6587\u4ef6\u7edd\u5bf9\u8def\u5f84\uff0c /up/dd.jpg \u4e3a\u4fdd\u5b58\u5230\u53c8\u62cd\u4e91\u5b58\u50a8\u7684\u8def\u5f84\u53ca\u6587\u4ef6\u540d\u3002 ** \u8868\u5355\u4e0a\u4f20 ** // \u5b9a\u4e49\u4fdd\u5b58\u8def\u5f84 String savePath = \"/uploads/{year}{mon}{day}/{random32}{.suffix}\"; paramsMap.put(Params.SAVE_KEY, savePath); // \u4e0a\u4f20\u6587\u4ef6 FormUploader uploader = new FormUploader(BUCKET_NAME, APIKEY, null); Result result = uploader.upload(paramsMap, file); // file\uff08File \u7c7b\u578b\uff09 \u8868\u793a\u4e00\u4e2a\u5f85\u4e0a\u4f20\u7684\u6587\u4ef6 \u8bf4\u660e\uff0c savePath \u7684\u89e3\u91ca\u8be6\u89c1 FORM API \u8def\u5f84\u8bbe\u7f6e \u3002 ** \u4e0a\u4f20\u9884\u5904\u7406 ** // \u6587\u4ef6\u4e0a\u4f20 boolean result3 = upyun.writeFile('/up/dd.jpg', '/root/13.jpg'); // \u56fe\u7247\u4e0a\u4f20\u9884\u5904\u7406\uff08\u540c\u6b65\uff09 params.put(\u201cx-gmkerl-thumb\u201d,\"/fw/300/unsharp/true/quality/80/format/png\") ** \u6587\u4ef6\u5220\u9664 ** // \u5355\u4e2a\u6587\u4ef6\u5220\u9664 boolean result = upyun.deleteFile('/up/dd.jpg'); \u8bf4\u660e\uff0c /up/dd.jpg \u4e3a\u6587\u4ef6\u7684\u8def\u5f84\u3002 ** \u76ee\u5f55\u521b\u5efa\u548c\u5220\u9664 ** // \u521b\u5efa\u76ee\u5f55 boolean result = upyun.mkDir('/up/tt/'); // \u5220\u9664\u76ee\u5f55 boolean result = upyun.rmDir('/up/tt/'); \u8bf4\u660e\uff0c /up/tt/ \u4e3a\u76ee\u5f55\u7684\u8def\u5f84\u3002 ** \u5217\u76ee\u5f55 ** List<UpYun.FolderItem> items = upyun.readDir('/up/tt/'); \u8bf4\u660e\uff0c /up/tt/ \u4e3a\u76ee\u5f55\u7684\u8def\u5f84\u3002\u7ed3\u679c\u8fd4\u56de\u76ee\u5f55\u4e0b\u524d 10000 \u4e2a\u6587\u4ef6\u5217\u8868\uff0c\u8d85\u51fa 10000 \u4e2a\u7684\u4e0d\u4f1a\u8fd4\u56de\uff0c\u5982\u679c\u9700\u8981\u5217\u51fa\u6765\uff0c\u9700\u8981\u4f7f\u7528\u5206\u9875\u53c2\u6570\u5faa\u73af\u83b7\u53d6\uff0c\u76f4\u5230\u53d6\u5b8c\u3002 ** \u83b7\u53d6\u6587\u4ef6\u4fe1\u606f ** Map<String,String> result = upyun.getFileInfo('/up/dd.jpg'); \u8bf4\u660e\uff0c /up/dd.jpg \u4e3a\u6587\u4ef6\u5728\u53c8\u62cd\u4e91\u5b58\u50a8\u7684\u8def\u5f84\u3002\u7ed3\u679c\u4ee5 Map \u5f62\u5f0f\u8fd4\u56de\uff0c\u5185\u5bb9\u5305\u62ec\uff1a\u6587\u4ef6\u7c7b\u578b\u3001\u6587\u4ef6\u5927\u5c0f\u548c\u6587\u4ef6\u6700\u540e\u4fee\u6539\u65f6\u95f4\u3002 ** \u83b7\u53d6\u7a7a\u95f4\u5bb9\u91cf ** long usage = upyun.getBucketUsage(); \u8bf4\u660e\uff0c\u7ed3\u679c\u4e3a\u5bb9\u91cf\u6570\u503c\uff0c\u5355\u4f4d\u5b57\u8282\u3002 Python SDK \u00b6 \u53c8\u62cd\u4e91 Python SDK \u6258\u7ba1\u5728 github \uff0c\u5b83\u5305\u542b\u5982\u4e0b\u529f\u80fd\uff1a1\uff09\u5b58\u50a8\u7ba1\u7406\uff1b2\uff09\u56fe\u7247\u5904\u7406\uff1b3\uff09\u97f3\u89c6\u9891\u5904\u7406\uff1b4\uff09\u7f13\u5b58\u5237\u65b0\u3002\u672c\u6bb5\u4ecb\u7ecd Python SDK \u7684\u4f7f\u7528\u3002 \u5f00\u53d1\u51c6\u5907 \u00b6 ** \u8fd0\u884c\u73af\u5883 ** Python SDK version 2.2+\uff0c\u9002\u7528\u4e8e Python 2.6\u30012.7\u30013.3\u30013.4 \u7248\u672c\u3002\u53ef\u4ee5\u901a\u8fc7 python -V \u547d\u4ee4\u67e5\u770b\u5f53\u524d\u7684 Python \u7248\u672c\u3002 Python SDK version 2.3+\uff0c\u4e0d\u518d\u76f4\u63a5\u4f7f\u7528\u9ed8\u8ba4\u6807\u51c6\u5e93 httplib\uff0c\u4f7f\u7528\u57fa\u4e8e httplib \u7684 requests \u8fd9\u4e2a\u7b2c\u4e09\u65b9\u5e93\u3002 ** \u5b89\u88c5 ** pip \u65b9\u5f0f pip \u662f Python \u7684\u4f9d\u8d56\u7ba1\u7406\u5de5\u5177\u3002\u60a8\u53ef\u4ee5\u5728\u81ea\u5df1\u7684\u9879\u76ee\u4e2d\u58f0\u660e\u6240\u4f9d\u8d56\u7684\u5916\u90e8\u5de5\u5177\u5e93\uff0cpip \u4f1a\u81ea\u52a8\u5e2e\u60a8\u5b89\u88c5\u8fd9\u4e9b\u4f9d\u8d56\u7684\u5e93\u6587\u4ef6\u3002 \u5b89\u88c5 requests pip install requests \u5b89\u88c5 Python SDK pip install upyun \u8fd0\u884c\u6d4b\u8bd5\u7528\u4f8b\uff0c\u5224\u65ad\u5b89\u88c5\u6210\u529f\u4e0e\u5426 # \u914d\u7f6e\u53c2\u6570 export UPYUN_SERVICE=<service> export UPYUN_USERNAME=<username> export UPYUN_PASSWORD=<password> # \u6267\u884c\u6d4b\u8bd5\u7528\u4f8b make init test \u6e90\u7801\u65b9\u5f0f \u9664\u4e86 pip \u65b9\u5f0f\u5916\uff0c\u8fd8\u53ef\u4ee5\u76f4\u63a5\u4e0b\u8f7d SDK \u5305 \uff0c\u653e\u5230\u9879\u76ee\u6839\u76ee\u5f55\uff0c\u7136\u540e\u628a\u5305\u5bfc\u5165\u5de5\u7a0b\u4e2d\u3002 \u521d\u59cb\u5316 \u00b6 UpYun \u662f Python SDK \u7684\u521d\u59cb\u5316\u7c7b\uff0c\u5728\u64cd\u4f5c\u4e91\u5b58\u50a8\u3001\u4e91\u5904\u7406\u4e4b\u524d\uff0c\u9700\u8981\u5148\u5b9e\u4f8b\u5316\u5b83\u3002 # \u5305\u542b\u6587\u4ef6 import upyun # \u521b\u5efa\u5b9e\u4f8b up = upyun.UpYun('\u60a8\u7684\u670d\u52a1\u540d', '\u60a8\u7684\u64cd\u4f5c\u5458\u540d', '\u60a8\u7684\u64cd\u4f5c\u5458\u5bc6\u7801') \u8bf4\u660e\uff0c\u4e3a\u4e86\u907f\u514d\u91cd\u590d\uff0c\u540e\u7eed \u300c\u529f\u80fd\u4f7f\u7528\u300d \u4e2d\u7684 DEMO \u4e0d\u518d\u5305\u542b\u521d\u59cb\u5316\u8fd9\u6bb5\u4ee3\u7801\uff0c\u8bf7\u5728\u4f7f\u7528\u65f6\u6ce8\u610f\u3002 \u529f\u80fd\u4f7f\u7528 \u00b6 \u5217\u8868\uff1a \u6587\u4ef6\u4e0a\u4f20 \u3001 \u8868\u5355\u4e0a\u4f20 \u3001 \u65ad\u70b9\u7eed\u4f20\u4e0a\u4f20 \u3001 \u6587\u4ef6\u5220\u9664 \u3001 \u76ee\u5f55\u521b\u5efa\u548c\u5220\u9664 \u3001 \u5217\u76ee\u5f55 \u3001 \u83b7\u53d6\u6587\u4ef6\u4fe1\u606f \u3001 \u83b7\u53d6\u670d\u52a1\u5bb9\u91cf ** \u6587\u4ef6\u4e0a\u4f20\u3001\u56fe\u7247\u5904\u7406\uff08\u540c\u6b65\uff09 ** /* * \u53c2\u6570\u8bf4\u660e * checksum\uff0c\u8868\u793a\u662f\u5426\u8fdb\u884c MD5 \u6821\u9a8c\uff0c\u5982\u679c\u662f\u5c0f\u6587\u4ef6\uff0c\u5efa\u8bae\u8fdb\u884c\uff0c\u4e3a True\uff1b\u5982\u679c\u662f\u5927\u6587\u4ef6\uff0c\u5efa\u8bae\u4e0d\u8fdb\u884c\uff0c\u4e3a False * headers\uff0c\u8868\u793a\u9700\u8981\u7684\u5934\u4fe1\u606f\uff0c\u89c1 REST API \u4e0a\u4f20\u6587\u4ef6 */ headers = { 'x-gmkerl-thumb': '/fw/300' } with open('dd.png', 'rb') as f: res = up.put('/up/dd.png', f, checksum=True, headers=headers) \u8bf4\u660e\uff0c\u4e0a\u4f20\u6210\u529f\uff0c\u5982\u679c\u662f\u56fe\u7247\uff0c\u8fd4\u56de\u5305\u542b\u56fe\u7247\u5bbd\u3001\u9ad8\u3001\u683c\u5f0f\u3001\u5e27\u6570\u7684 Python Dict \u5bf9\u8c61\uff0c\u5982\u679c\u4e0d\u662f\uff0c\u662f\u7a7a Python Dict \u5bf9\u8c61\uff1b\u4e0a\u4f20\u5931\u8d25\uff0c\u629b\u51fa\u5f02\u5e38\u3002 ** \u8868\u5355\u4e0a\u4f20\u3001\u56fe\u7247\u5904\u7406\uff08\u540c\u6b65\uff09 ** // \u8bbe\u5b9a\u53c2\u6570 kwargs = { 'allow-file-type': 'jpg,jpeg,png', 'notify-url': 'http://notify-url/', 'x-gmkerl-thumb':'/fw/300' } // checksum\uff0c\u8868\u793a\u662f\u5426\u8fdb\u884c MD5 \u6821\u9a8c\uff0c\u5982\u679c\u662f\u5c0f\u6587\u4ef6\uff0c\u5efa\u8bae\u8fdb\u884c\uff0c\u4e3a True\uff1b\u5982\u679c\u662f\u5927\u6587\u4ef6\uff0c\u5efa\u8bae\u4e0d\u8fdb\u884c\uff0c\u4e3a False with open('dd.png', 'rb') as f: res = up.put('/up/dd.png', f, checksum=True, form=True, **kwargs) \u8bf4\u660e\uff0c\u4e0a\u4f20\u6210\u529f\uff0c\u8fd4\u56de\u5185\u5bb9\u89c1 FORM API \u7684 \u901a\u77e5\u8bbe\u7f6e \uff1b\u4e0a\u4f20\u5931\u8d25\uff0c\u629b\u51fa\u5f02\u5e38\u3002 ** \u65ad\u70b9\u7eed\u4f20\u4e0a\u4f20 ** from upyun import FileStore from upyun import print_reporter /* * \u53c2\u6570\u8bf4\u660e * need_resume\uff0c\u8868\u793a\u662f\u5426\u9700\u8981\u65ad\u70b9\u7eed\u4f20\uff0c\u9ed8\u8ba4 False * headers\uff0c\u8868\u793a\u9700\u8981\u7684\u5934\u4fe1\u606f\uff0c\uff0c\u89c1 REST API \u65ad\u70b9\u7eed\u4f20 * store\uff0c\u8868\u793a\u65ad\u70b9\u4fe1\u606f\u5b58\u50a8\u4f4d\u7f6e\uff0c\u9ed8\u8ba4 memory_store\u3002memory_store \u8868\u793a\u5b58\u653e\u5728\u5185\u5b58\uff0cFileStore() \u8868\u793a\u5b58\u653e\u5728\u6587\u4ef6\uff0c\u9ed8\u8ba4\u662f ~/.up-python-resume/ * reporter\uff0c\u8868\u793a\u62a5\u544a\u4e0a\u4f20\u8fdb\u5ea6\uff0c\u9ed8\u8ba4\u5ffd\u7565\u3002print_reporter \u53ea\u662f print \u4e0a\u4f20\u8fdb\u5ea6\uff0c\u6709\u5176\u4ed6\u9700\u8981\u7684\u7528\u6237\u53ef\u4ee5\u81ea\u884c\u5b9e\u73b0 */ with open('dd.png', 'rb') as f: res = up.put('/up/dd.png', f, checksum=True, need_resume=True, headers={}, store=None, reporter=print_reporter) \u8bf4\u660e\uff0c\u4e0a\u4f20\u6210\u529f\uff0c\u8fd4\u56de\u7a7a Python Dict \u5bf9\u8c61\uff1b\u4e0a\u4f20\u5931\u8d25\uff0c\u629b\u51fa\u5f02\u5e38\u3002 ** \u6587\u4ef6\u5220\u9664 ** up.delete('/up/dd.png') \u8bf4\u660e\uff0c\u6210\u529f\uff0c\u8fd4\u56de Python None \u5bf9\u8c61\uff1b\u5931\u8d25\uff0c\u629b\u51fa\u5f02\u5e38\u3002 ** \u76ee\u5f55\u521b\u5efa\u548c\u5220\u9664** up.mkdir('/up/temp/') // \u521b\u5efa up.delete('/up/temp/') // \u5220\u9664 \u8bf4\u660e\uff0c\u6210\u529f\uff0c\u8fd4\u56de Python None \u5bf9\u8c61\uff1b\u5931\u8d25\uff0c\u629b\u51fa\u5f02\u5e38\u3002\u6ce8\uff0c\u76ee\u5f55\u5220\u9664\u53ea\u80fd\u5220\u9664\u7a7a\u76ee\u5f55\u3002 ** \u5217\u76ee\u5f55 ** res = up.getlist('/up/', limit=100, order='asc', begin='') \u8bf4\u660e\uff0c\u83b7\u53d6\u6210\u529f\uff0c\u8fd4\u56de Python List \u5bf9\u8c61\uff1b\u83b7\u53d6\u5931\u8d25\uff0c\u629b\u51fa\u5f02\u5e38\u3002 ** \u83b7\u53d6\u6587\u4ef6\u4fe1\u606f ** res = up.getinfo('/up/dd.png') print res['file-type'] print res['file-size'] print res['file-date'] \u8bf4\u660e\uff0c\u83b7\u53d6\u6210\u529f\uff0c\u8fd4\u56de Python List \u5bf9\u8c61\uff0c\u5185\u5bb9\u5305\u62ec\uff1a\u6587\u4ef6\u7c7b\u578b\u3001\u6587\u4ef6\u5927\u5c0f\u548c\u6587\u4ef6\u6700\u540e\u4fee\u6539\u65f6\u95f4\uff1b\u83b7\u53d6\u5931\u8d25\uff0c\u629b\u51fa\u5f02\u5e38\u3002 ** \u83b7\u53d6\u670d\u52a1\u5bb9\u91cf ** res = up.usage() \u8bf4\u660e\uff0c\u83b7\u53d6\u6210\u529f\uff0c\u8fd4\u56de Python String \u5bf9\u8c61\uff0c\u5355\u4f4d Bytes\uff1b\u83b7\u53d6\u5931\u8d25\uff0c\u629b\u51fa\u5f02\u5e38\u3002","title":"SDK \u4f7f\u7528\u6587\u6863"},{"location":"api/sdk/#php-sdk","text":"\u53c8\u62cd\u4e91 PHP SDK \u6258\u7ba1\u5728 github \uff0c\u5b83\u5305\u542b\u5982\u4e0b\u529f\u80fd\uff1a1\uff09\u5b58\u50a8\u7ba1\u7406\uff1b2\uff09\u56fe\u7247\u5904\u7406\uff1b3\uff09\u97f3\u89c6\u9891\u5904\u7406\uff1b4\uff09\u7f13\u5b58\u5237\u65b0\u3002\u672c\u6bb5\u4ecb\u7ecd PHP SDK \u7684\u4f7f\u7528\u3002","title":"PHP SDK"},{"location":"api/sdk/#_1","text":"** \u8fd0\u884c\u73af\u5883 ** PHP SDK version 3.0\uff0c\u9700\u8981 PHP \u7248\u672c >= 5.5\u3002\u60a8\u53ef\u4ee5\u901a\u8fc7 php -v \u547d\u4ee4\u67e5\u770b\u5f53\u524d\u7684 PHP \u7248\u672c\u3002 ** \u5b89\u88c5 ** Composer \u65b9\u5f0f Composer \u662f PHP \u7684\u4f9d\u8d56\u7ba1\u7406\u5de5\u5177\u3002\u60a8\u53ef\u4ee5\u5728\u81ea\u5df1\u7684\u9879\u76ee\u4e2d\u58f0\u660e\u6240\u4f9d\u8d56\u7684\u5916\u90e8\u5de5\u5177\u5e93\uff0cComposer \u4f1a\u81ea\u52a8\u5e2e\u60a8\u5b89\u88c5\u8fd9\u4e9b\u4f9d\u8d56\u7684\u5e93\u6587\u4ef6\u3002 \u5728\u9879\u76ee\u6839\u76ee\u5f55\u8fd0\u884c\uff1a composer require upyun/sdk \u6e90\u7801\u65b9\u5f0f \u5982\u679c\u4f7f\u7528 Composer \u65b9\u5f0f\u8f83\u6162\uff0c\u53ef\u4ee5\u76f4\u63a5\u4e0b\u8f7d SDK \u5305 \uff0c\u653e\u5230\u9879\u76ee\u6839\u76ee\u5f55\uff0c\u7136\u540e\u628a\u5305\u5bfc\u5165\u5de5\u7a0b\u4e2d\u3002","title":"\u5f00\u53d1\u51c6\u5907"},{"location":"api/sdk/#_2","text":"Config\uff08\u914d\u7f6e\uff09\u548c Upyun\uff08\u8fde\u63a5\uff09\u662f PHP SDK \u7684\u521d\u59cb\u5316\u7c7b\uff0c\u5728\u64cd\u4f5c\u4e91\u5b58\u50a8\u3001\u4e91\u5904\u7406\u4e4b\u524d\uff0c\u9700\u8981\u5148\u5b9e\u4f8b\u5316\u5b83\u4eec\u3002 <?php // \u5305\u542b\u6587\u4ef6 require_once('vendor/autoload.php'); use Upyun\\Upyun; use Upyun\\Config; // \u521b\u5efa\u5b9e\u4f8b $bucketConfig = new Config('\u60a8\u7684\u670d\u52a1\u540d', '\u60a8\u7684\u64cd\u4f5c\u5458\u540d', '\u60a8\u7684\u64cd\u4f5c\u5458\u5bc6\u7801'); $client = new Upyun($bucketConfig); ?> \u8bf4\u660e\uff0c\u4e3a\u4e86\u907f\u514d\u91cd\u590d\uff0c\u540e\u7eed \u300c\u529f\u80fd\u4f7f\u7528\u300d \u4e2d\u7684 DEMO \u4e0d\u518d\u5305\u542b\u8fd9\u6bb5\u4ee3\u7801\uff0c\u8bf7\u5728\u4f7f\u7528\u65f6\u6ce8\u610f\u3002","title":"\u521d\u59cb\u5316"},{"location":"api/sdk/#_3","text":"\u5217\u8868\uff1a \u6587\u4ef6\u4e0a\u4f20 \u3001 \u6587\u4ef6\u5220\u9664 \u3001 \u76ee\u5f55\u521b\u5efa\u548c\u5220\u9664 \u3001 \u5217\u76ee\u5f55 \u3001 \u83b7\u53d6\u6587\u4ef6\u4fe1\u606f \u3001 \u83b7\u53d6\u670d\u52a1\u5bb9\u91cf ** \u6587\u4ef6\u4e0a\u4f20\u3001\u56fe\u7247\u5904\u7406\uff08\u540c\u6b65\uff09 ** <?php // \u7701\u7565\u521d\u59cb\u5316\u4ee3\u7801 // \u8bfb\u6587\u4ef6 $file = fopen('/root/13.jpg', 'r'); // \u4e0a\u4f20\u6587\u4ef6 $res = $client->write('/up/dd.jpg', $file); // \u6253\u5370\u4e0a\u4f20\u7ed3\u679c print_r($res); ?> \u8bf4\u660e\uff0c /root/13.jpg \u4e3a\u672c\u5730\u6587\u4ef6\u7edd\u5bf9\u8def\u5f84\uff0c /up/dd.jpg \u4e3a\u4fdd\u5b58\u5230\u53c8\u62cd\u4e91\u5b58\u50a8\u7684\u8def\u5f84\u53ca\u6587\u4ef6\u540d\u3002 <?php // \u7701\u7565\u521d\u59cb\u5316\u4ee3\u7801 // \u8bfb\u6587\u4ef6 $file = fopen('/root/13.jpg', 'r'); // \u6dfb\u52a0\u4f5c\u56fe\u53c2\u6570 $tasks = array('x-gmkerl-thumb' => '/format/png/fw/100'); // \u4e0a\u4f20\u6587\u4ef6 $res = $client->write('/up/dd.png', $file, $tasks); // \u6253\u5370\u4e0a\u4f20\u7ed3\u679c print_r($res); ?> \u8bf4\u660e\uff0c\u4e0a\u4f20\u56fe\u7247\u540c\u65f6\uff0c\u5bf9\u56fe\u7247\u8fdb\u884c\u5904\u7406\uff0c\u628a\u5904\u7406\u540e\u7684\u56fe\u7247\u5b58\u8fdb\u5b58\u50a8\u3002\u5177\u4f53\u8be6\u89c1 \u56fe\u7247\u5904\u7406\uff08\u540c\u6b65\uff09 \u3002 ** \u6587\u4ef6\u5220\u9664 ** <?php // \u7701\u7565\u521d\u59cb\u5316\u4ee3\u7801 // \u5355\u6587\u4ef6\u5220\u9664 $res=$client->delete('/up/dd.txt'); echo $res; ?> \u8bf4\u660e\uff0c /up/dd.txt \u4e3a\u6587\u4ef6\u5728\u53c8\u62cd\u4e91\u5b58\u50a8\u7684\u8def\u5f84\u3002\u7ed3\u679c\u4e3a 1 \uff0c\u8868\u793a\u5220\u9664\u6210\u529f\u3002\u5f02\u5e38\u76f4\u63a5\u629b\u51fa\u3002 ** \u76ee\u5f55\u521b\u5efa\u548c\u5220\u9664 ** <?php // \u7701\u7565\u521d\u59cb\u5316\u4ee3\u7801 // \u521b\u5efa\u76ee\u5f55 $res=$client->createDir('/up/tt/ss'); echo $res; // \u5220\u9664\u7a7a\u76ee\u5f55 $res=$client->deleteDir('/up/tt/ss'); echo $res; ?> \u8bf4\u660e\uff0c /up/tt/ss \u4e3a\u76ee\u5f55\u7684\u8def\u5f84\u3002\u7ed3\u679c\u4e3a 1 \uff0c\u8868\u793a\u6210\u529f\u3002\u5f02\u5e38\u76f4\u63a5\u629b\u51fa\u3002 ** \u83b7\u53d6\u6587\u4ef6\u4fe1\u606f ** <?php // \u7701\u7565\u521d\u59cb\u5316\u4ee3\u7801 $res=$client->info('/up/dd.jpg'); print_r($res); ?> \u8bf4\u660e\uff0c /up/dd.jpg \u4e3a\u6587\u4ef6\u5728\u53c8\u62cd\u4e91\u5b58\u50a8\u7684\u8def\u5f84\u3002\u7ed3\u679c\u4ee5\u6570\u7ec4\u5f62\u5f0f\u8fd4\u56de\uff0c\u5185\u5bb9\u5305\u62ec\uff1a\u6587\u4ef6\u7c7b\u578b\u3001\u6587\u4ef6\u5927\u5c0f\u548c\u6587\u4ef6\u6700\u540e\u4fee\u6539\u65f6\u95f4\u3002 ** \u83b7\u53d6\u670d\u52a1\u5bb9\u91cf ** <?php // \u7701\u7565\u521d\u59cb\u5316\u4ee3\u7801 $res=$client->usage(); echo $res; ?> \u8bf4\u660e\uff0c\u7ed3\u679c\u4e3a\u5bb9\u91cf\u6570\u503c\uff0c\u5355\u4f4d\u5b57\u8282\u3002\u5f02\u5e38\u76f4\u63a5\u629b\u51fa\u3002","title":"\u529f\u80fd\u4f7f\u7528"},{"location":"api/sdk/#java-sdk","text":"\u53c8\u62cd\u4e91 Java SDK \u6258\u7ba1\u5728 github \uff0c\u5b83\u5305\u542b\u5982\u4e0b\u529f\u80fd\uff1a1\uff09\u5b58\u50a8\u7ba1\u7406\uff1b2\uff09\u56fe\u7247\u5904\u7406\uff1b3\uff09\u97f3\u89c6\u9891\u5904\u7406\uff1b4\uff09\u7f13\u5b58\u5237\u65b0\u3002\u672c\u6bb5\u4ecb\u7ecd Java SDK \u7684\u4f7f\u7528\u3002","title":"Java SDK"},{"location":"api/sdk/#_4","text":"** \u8fd0\u884c\u73af\u5883 ** Java SDK version 3.0+\uff0c\u9700\u8981 Java \u7248\u672c >= 6\u3002\u53ef\u4ee5\u901a\u8fc7 java -version \u547d\u4ee4\u67e5\u770b\u5f53\u524d\u7684 Java \u7248\u672c\u3002 ** \u5b89\u88c5 ** Maven \u65b9\u5f0f Maven \u662f\u4e00\u4e2a\u9879\u76ee\u7ba1\u7406\u53ca\u81ea\u52a8\u6784\u5efa\u5de5\u5177\u3002\u60a8\u53ef\u4ee5\u5728\u81ea\u5df1\u7684\u9879\u76ee\u4e2d\u58f0\u660e\u6240\u4f9d\u8d56\u7684\u5916\u90e8\u5de5\u5177\u5e93\uff0cMaven \u4f1a\u81ea\u52a8\u5e2e\u60a8\u5b89\u88c5\u8fd9\u4e9b\u4f9d\u8d56\u7684\u5e93\u6587\u4ef6\u3002 <dependency> <groupId>com.upyun</groupId> <artifactId>java-sdk</artifactId> <version>4.0.1</version> </dependency> \u6e90\u7801\u65b9\u5f0f \u9664\u4e86 Maven \u65b9\u5f0f\u5916\uff0c\u8fd8\u53ef\u4ee5\u76f4\u63a5\u4e0b\u8f7d SDK \u5305 \uff0c\u653e\u5230\u9879\u76ee\u6839\u76ee\u5f55\uff0c\u7136\u540e\u628a\u5305\u5bfc\u5165\u5de5\u7a0b\u4e2d\u3002","title":"\u5f00\u53d1\u51c6\u5907"},{"location":"api/sdk/#_5","text":"UpYun \u662f Java SDK \u7684\u521d\u59cb\u5316\u7c7b\uff0c\u5728\u64cd\u4f5c\u4e91\u5b58\u50a8\u3001\u4e91\u5904\u7406\u4e4b\u524d\uff0c\u9700\u8981\u5148\u5b9e\u4f8b\u5316\u5b83\u3002 // \u521b\u5efa\u5b9e\u4f8b UpYun upyun = new UpYun('\u60a8\u7684\u670d\u52a1\u540d', '\u60a8\u7684\u64cd\u4f5c\u5458\u540d', '\u60a8\u7684\u64cd\u4f5c\u5458\u5bc6\u7801'); // \u53ef\u9009\u5c5e\u60271\uff0c\u662f\u5426\u5f00\u542f debug \u6a21\u5f0f\uff0c\u9ed8\u8ba4\u4e0d\u5f00\u542f upyun.setDebug(false); // \u53ef\u9009\u5c5e\u60272\uff0c\u8d85\u65f6\u65f6\u95f4\uff0c\u9ed8\u8ba4 30s upyun.setTimeout(30); \u8bf4\u660e\uff0c\u4e3a\u4e86\u907f\u514d\u91cd\u590d\uff0c\u540e\u7eed \u300c\u529f\u80fd\u4f7f\u7528\u300d \u4e2d\u7684 DEMO \u4e0d\u518d\u5305\u542b\u521d\u59cb\u5316\u8fd9\u6bb5\u4ee3\u7801\uff0c\u8bf7\u5728\u4f7f\u7528\u65f6\u6ce8\u610f\u3002","title":"\u521d\u59cb\u5316"},{"location":"api/sdk/#_6","text":"\u5217\u8868\uff1a \u6587\u4ef6\u4e0a\u4f20 \u3001 \u8868\u5355\u4e0a\u4f20 \u3001 \u6587\u4ef6\u5220\u9664 \u3001 \u76ee\u5f55\u521b\u5efa\u548c\u5220\u9664 \u3001 \u5217\u76ee\u5f55 \u3001 \u83b7\u53d6\u6587\u4ef6\u4fe1\u606f \u3001 \u83b7\u53d6\u670d\u52a1\u5bb9\u91cf ** \u6587\u4ef6\u4e0a\u4f20\u3001\u6279\u91cf\u4e0a\u4f20 ** REST API\u3001FORM API // \u6587\u4ef6\u4e0a\u4f20 upyun.setContentMD5(UpYun.md5('/root/13.jpg')); // \u8ba1\u7b97\u6587\u4ef6 MD5\uff0c\u5982\u679c\u6587\u4ef6\u592a\u5927\u6216\u8ba1\u7b97\u4e0d\u4fbf\uff0c\u53ef\u4ee5\u4e0d\u8ba1\u7b97 boolean result4 = upyun.writeFile('/up/dd.jpg', '/root/13.jpg'); \u8bf4\u660e\uff0c /root/13.jpg \u4e3a\u672c\u5730\u6587\u4ef6\u7edd\u5bf9\u8def\u5f84\uff0c /up/dd.jpg \u4e3a\u4fdd\u5b58\u5230\u53c8\u62cd\u4e91\u5b58\u50a8\u7684\u8def\u5f84\u53ca\u6587\u4ef6\u540d\u3002 ** \u8868\u5355\u4e0a\u4f20 ** // \u5b9a\u4e49\u4fdd\u5b58\u8def\u5f84 String savePath = \"/uploads/{year}{mon}{day}/{random32}{.suffix}\"; paramsMap.put(Params.SAVE_KEY, savePath); // \u4e0a\u4f20\u6587\u4ef6 FormUploader uploader = new FormUploader(BUCKET_NAME, APIKEY, null); Result result = uploader.upload(paramsMap, file); // file\uff08File \u7c7b\u578b\uff09 \u8868\u793a\u4e00\u4e2a\u5f85\u4e0a\u4f20\u7684\u6587\u4ef6 \u8bf4\u660e\uff0c savePath \u7684\u89e3\u91ca\u8be6\u89c1 FORM API \u8def\u5f84\u8bbe\u7f6e \u3002 ** \u4e0a\u4f20\u9884\u5904\u7406 ** // \u6587\u4ef6\u4e0a\u4f20 boolean result3 = upyun.writeFile('/up/dd.jpg', '/root/13.jpg'); // \u56fe\u7247\u4e0a\u4f20\u9884\u5904\u7406\uff08\u540c\u6b65\uff09 params.put(\u201cx-gmkerl-thumb\u201d,\"/fw/300/unsharp/true/quality/80/format/png\") ** \u6587\u4ef6\u5220\u9664 ** // \u5355\u4e2a\u6587\u4ef6\u5220\u9664 boolean result = upyun.deleteFile('/up/dd.jpg'); \u8bf4\u660e\uff0c /up/dd.jpg \u4e3a\u6587\u4ef6\u7684\u8def\u5f84\u3002 ** \u76ee\u5f55\u521b\u5efa\u548c\u5220\u9664 ** // \u521b\u5efa\u76ee\u5f55 boolean result = upyun.mkDir('/up/tt/'); // \u5220\u9664\u76ee\u5f55 boolean result = upyun.rmDir('/up/tt/'); \u8bf4\u660e\uff0c /up/tt/ \u4e3a\u76ee\u5f55\u7684\u8def\u5f84\u3002 ** \u5217\u76ee\u5f55 ** List<UpYun.FolderItem> items = upyun.readDir('/up/tt/'); \u8bf4\u660e\uff0c /up/tt/ \u4e3a\u76ee\u5f55\u7684\u8def\u5f84\u3002\u7ed3\u679c\u8fd4\u56de\u76ee\u5f55\u4e0b\u524d 10000 \u4e2a\u6587\u4ef6\u5217\u8868\uff0c\u8d85\u51fa 10000 \u4e2a\u7684\u4e0d\u4f1a\u8fd4\u56de\uff0c\u5982\u679c\u9700\u8981\u5217\u51fa\u6765\uff0c\u9700\u8981\u4f7f\u7528\u5206\u9875\u53c2\u6570\u5faa\u73af\u83b7\u53d6\uff0c\u76f4\u5230\u53d6\u5b8c\u3002 ** \u83b7\u53d6\u6587\u4ef6\u4fe1\u606f ** Map<String,String> result = upyun.getFileInfo('/up/dd.jpg'); \u8bf4\u660e\uff0c /up/dd.jpg \u4e3a\u6587\u4ef6\u5728\u53c8\u62cd\u4e91\u5b58\u50a8\u7684\u8def\u5f84\u3002\u7ed3\u679c\u4ee5 Map \u5f62\u5f0f\u8fd4\u56de\uff0c\u5185\u5bb9\u5305\u62ec\uff1a\u6587\u4ef6\u7c7b\u578b\u3001\u6587\u4ef6\u5927\u5c0f\u548c\u6587\u4ef6\u6700\u540e\u4fee\u6539\u65f6\u95f4\u3002 ** \u83b7\u53d6\u7a7a\u95f4\u5bb9\u91cf ** long usage = upyun.getBucketUsage(); \u8bf4\u660e\uff0c\u7ed3\u679c\u4e3a\u5bb9\u91cf\u6570\u503c\uff0c\u5355\u4f4d\u5b57\u8282\u3002","title":"\u529f\u80fd\u4f7f\u7528"},{"location":"api/sdk/#python-sdk","text":"\u53c8\u62cd\u4e91 Python SDK \u6258\u7ba1\u5728 github \uff0c\u5b83\u5305\u542b\u5982\u4e0b\u529f\u80fd\uff1a1\uff09\u5b58\u50a8\u7ba1\u7406\uff1b2\uff09\u56fe\u7247\u5904\u7406\uff1b3\uff09\u97f3\u89c6\u9891\u5904\u7406\uff1b4\uff09\u7f13\u5b58\u5237\u65b0\u3002\u672c\u6bb5\u4ecb\u7ecd Python SDK \u7684\u4f7f\u7528\u3002","title":"Python SDK"},{"location":"api/sdk/#_7","text":"** \u8fd0\u884c\u73af\u5883 ** Python SDK version 2.2+\uff0c\u9002\u7528\u4e8e Python 2.6\u30012.7\u30013.3\u30013.4 \u7248\u672c\u3002\u53ef\u4ee5\u901a\u8fc7 python -V \u547d\u4ee4\u67e5\u770b\u5f53\u524d\u7684 Python \u7248\u672c\u3002 Python SDK version 2.3+\uff0c\u4e0d\u518d\u76f4\u63a5\u4f7f\u7528\u9ed8\u8ba4\u6807\u51c6\u5e93 httplib\uff0c\u4f7f\u7528\u57fa\u4e8e httplib \u7684 requests \u8fd9\u4e2a\u7b2c\u4e09\u65b9\u5e93\u3002 ** \u5b89\u88c5 ** pip \u65b9\u5f0f pip \u662f Python \u7684\u4f9d\u8d56\u7ba1\u7406\u5de5\u5177\u3002\u60a8\u53ef\u4ee5\u5728\u81ea\u5df1\u7684\u9879\u76ee\u4e2d\u58f0\u660e\u6240\u4f9d\u8d56\u7684\u5916\u90e8\u5de5\u5177\u5e93\uff0cpip \u4f1a\u81ea\u52a8\u5e2e\u60a8\u5b89\u88c5\u8fd9\u4e9b\u4f9d\u8d56\u7684\u5e93\u6587\u4ef6\u3002 \u5b89\u88c5 requests pip install requests \u5b89\u88c5 Python SDK pip install upyun \u8fd0\u884c\u6d4b\u8bd5\u7528\u4f8b\uff0c\u5224\u65ad\u5b89\u88c5\u6210\u529f\u4e0e\u5426 # \u914d\u7f6e\u53c2\u6570 export UPYUN_SERVICE=<service> export UPYUN_USERNAME=<username> export UPYUN_PASSWORD=<password> # \u6267\u884c\u6d4b\u8bd5\u7528\u4f8b make init test \u6e90\u7801\u65b9\u5f0f \u9664\u4e86 pip \u65b9\u5f0f\u5916\uff0c\u8fd8\u53ef\u4ee5\u76f4\u63a5\u4e0b\u8f7d SDK \u5305 \uff0c\u653e\u5230\u9879\u76ee\u6839\u76ee\u5f55\uff0c\u7136\u540e\u628a\u5305\u5bfc\u5165\u5de5\u7a0b\u4e2d\u3002","title":"\u5f00\u53d1\u51c6\u5907"},{"location":"api/sdk/#_8","text":"UpYun \u662f Python SDK \u7684\u521d\u59cb\u5316\u7c7b\uff0c\u5728\u64cd\u4f5c\u4e91\u5b58\u50a8\u3001\u4e91\u5904\u7406\u4e4b\u524d\uff0c\u9700\u8981\u5148\u5b9e\u4f8b\u5316\u5b83\u3002 # \u5305\u542b\u6587\u4ef6 import upyun # \u521b\u5efa\u5b9e\u4f8b up = upyun.UpYun('\u60a8\u7684\u670d\u52a1\u540d', '\u60a8\u7684\u64cd\u4f5c\u5458\u540d', '\u60a8\u7684\u64cd\u4f5c\u5458\u5bc6\u7801') \u8bf4\u660e\uff0c\u4e3a\u4e86\u907f\u514d\u91cd\u590d\uff0c\u540e\u7eed \u300c\u529f\u80fd\u4f7f\u7528\u300d \u4e2d\u7684 DEMO \u4e0d\u518d\u5305\u542b\u521d\u59cb\u5316\u8fd9\u6bb5\u4ee3\u7801\uff0c\u8bf7\u5728\u4f7f\u7528\u65f6\u6ce8\u610f\u3002","title":"\u521d\u59cb\u5316"},{"location":"api/sdk/#_9","text":"\u5217\u8868\uff1a \u6587\u4ef6\u4e0a\u4f20 \u3001 \u8868\u5355\u4e0a\u4f20 \u3001 \u65ad\u70b9\u7eed\u4f20\u4e0a\u4f20 \u3001 \u6587\u4ef6\u5220\u9664 \u3001 \u76ee\u5f55\u521b\u5efa\u548c\u5220\u9664 \u3001 \u5217\u76ee\u5f55 \u3001 \u83b7\u53d6\u6587\u4ef6\u4fe1\u606f \u3001 \u83b7\u53d6\u670d\u52a1\u5bb9\u91cf ** \u6587\u4ef6\u4e0a\u4f20\u3001\u56fe\u7247\u5904\u7406\uff08\u540c\u6b65\uff09 ** /* * \u53c2\u6570\u8bf4\u660e * checksum\uff0c\u8868\u793a\u662f\u5426\u8fdb\u884c MD5 \u6821\u9a8c\uff0c\u5982\u679c\u662f\u5c0f\u6587\u4ef6\uff0c\u5efa\u8bae\u8fdb\u884c\uff0c\u4e3a True\uff1b\u5982\u679c\u662f\u5927\u6587\u4ef6\uff0c\u5efa\u8bae\u4e0d\u8fdb\u884c\uff0c\u4e3a False * headers\uff0c\u8868\u793a\u9700\u8981\u7684\u5934\u4fe1\u606f\uff0c\u89c1 REST API \u4e0a\u4f20\u6587\u4ef6 */ headers = { 'x-gmkerl-thumb': '/fw/300' } with open('dd.png', 'rb') as f: res = up.put('/up/dd.png', f, checksum=True, headers=headers) \u8bf4\u660e\uff0c\u4e0a\u4f20\u6210\u529f\uff0c\u5982\u679c\u662f\u56fe\u7247\uff0c\u8fd4\u56de\u5305\u542b\u56fe\u7247\u5bbd\u3001\u9ad8\u3001\u683c\u5f0f\u3001\u5e27\u6570\u7684 Python Dict \u5bf9\u8c61\uff0c\u5982\u679c\u4e0d\u662f\uff0c\u662f\u7a7a Python Dict \u5bf9\u8c61\uff1b\u4e0a\u4f20\u5931\u8d25\uff0c\u629b\u51fa\u5f02\u5e38\u3002 ** \u8868\u5355\u4e0a\u4f20\u3001\u56fe\u7247\u5904\u7406\uff08\u540c\u6b65\uff09 ** // \u8bbe\u5b9a\u53c2\u6570 kwargs = { 'allow-file-type': 'jpg,jpeg,png', 'notify-url': 'http://notify-url/', 'x-gmkerl-thumb':'/fw/300' } // checksum\uff0c\u8868\u793a\u662f\u5426\u8fdb\u884c MD5 \u6821\u9a8c\uff0c\u5982\u679c\u662f\u5c0f\u6587\u4ef6\uff0c\u5efa\u8bae\u8fdb\u884c\uff0c\u4e3a True\uff1b\u5982\u679c\u662f\u5927\u6587\u4ef6\uff0c\u5efa\u8bae\u4e0d\u8fdb\u884c\uff0c\u4e3a False with open('dd.png', 'rb') as f: res = up.put('/up/dd.png', f, checksum=True, form=True, **kwargs) \u8bf4\u660e\uff0c\u4e0a\u4f20\u6210\u529f\uff0c\u8fd4\u56de\u5185\u5bb9\u89c1 FORM API \u7684 \u901a\u77e5\u8bbe\u7f6e \uff1b\u4e0a\u4f20\u5931\u8d25\uff0c\u629b\u51fa\u5f02\u5e38\u3002 ** \u65ad\u70b9\u7eed\u4f20\u4e0a\u4f20 ** from upyun import FileStore from upyun import print_reporter /* * \u53c2\u6570\u8bf4\u660e * need_resume\uff0c\u8868\u793a\u662f\u5426\u9700\u8981\u65ad\u70b9\u7eed\u4f20\uff0c\u9ed8\u8ba4 False * headers\uff0c\u8868\u793a\u9700\u8981\u7684\u5934\u4fe1\u606f\uff0c\uff0c\u89c1 REST API \u65ad\u70b9\u7eed\u4f20 * store\uff0c\u8868\u793a\u65ad\u70b9\u4fe1\u606f\u5b58\u50a8\u4f4d\u7f6e\uff0c\u9ed8\u8ba4 memory_store\u3002memory_store \u8868\u793a\u5b58\u653e\u5728\u5185\u5b58\uff0cFileStore() \u8868\u793a\u5b58\u653e\u5728\u6587\u4ef6\uff0c\u9ed8\u8ba4\u662f ~/.up-python-resume/ * reporter\uff0c\u8868\u793a\u62a5\u544a\u4e0a\u4f20\u8fdb\u5ea6\uff0c\u9ed8\u8ba4\u5ffd\u7565\u3002print_reporter \u53ea\u662f print \u4e0a\u4f20\u8fdb\u5ea6\uff0c\u6709\u5176\u4ed6\u9700\u8981\u7684\u7528\u6237\u53ef\u4ee5\u81ea\u884c\u5b9e\u73b0 */ with open('dd.png', 'rb') as f: res = up.put('/up/dd.png', f, checksum=True, need_resume=True, headers={}, store=None, reporter=print_reporter) \u8bf4\u660e\uff0c\u4e0a\u4f20\u6210\u529f\uff0c\u8fd4\u56de\u7a7a Python Dict \u5bf9\u8c61\uff1b\u4e0a\u4f20\u5931\u8d25\uff0c\u629b\u51fa\u5f02\u5e38\u3002 ** \u6587\u4ef6\u5220\u9664 ** up.delete('/up/dd.png') \u8bf4\u660e\uff0c\u6210\u529f\uff0c\u8fd4\u56de Python None \u5bf9\u8c61\uff1b\u5931\u8d25\uff0c\u629b\u51fa\u5f02\u5e38\u3002 ** \u76ee\u5f55\u521b\u5efa\u548c\u5220\u9664** up.mkdir('/up/temp/') // \u521b\u5efa up.delete('/up/temp/') // \u5220\u9664 \u8bf4\u660e\uff0c\u6210\u529f\uff0c\u8fd4\u56de Python None \u5bf9\u8c61\uff1b\u5931\u8d25\uff0c\u629b\u51fa\u5f02\u5e38\u3002\u6ce8\uff0c\u76ee\u5f55\u5220\u9664\u53ea\u80fd\u5220\u9664\u7a7a\u76ee\u5f55\u3002 ** \u5217\u76ee\u5f55 ** res = up.getlist('/up/', limit=100, order='asc', begin='') \u8bf4\u660e\uff0c\u83b7\u53d6\u6210\u529f\uff0c\u8fd4\u56de Python List \u5bf9\u8c61\uff1b\u83b7\u53d6\u5931\u8d25\uff0c\u629b\u51fa\u5f02\u5e38\u3002 ** \u83b7\u53d6\u6587\u4ef6\u4fe1\u606f ** res = up.getinfo('/up/dd.png') print res['file-type'] print res['file-size'] print res['file-date'] \u8bf4\u660e\uff0c\u83b7\u53d6\u6210\u529f\uff0c\u8fd4\u56de Python List \u5bf9\u8c61\uff0c\u5185\u5bb9\u5305\u62ec\uff1a\u6587\u4ef6\u7c7b\u578b\u3001\u6587\u4ef6\u5927\u5c0f\u548c\u6587\u4ef6\u6700\u540e\u4fee\u6539\u65f6\u95f4\uff1b\u83b7\u53d6\u5931\u8d25\uff0c\u629b\u51fa\u5f02\u5e38\u3002 ** \u83b7\u53d6\u670d\u52a1\u5bb9\u91cf ** res = up.usage() \u8bf4\u660e\uff0c\u83b7\u53d6\u6210\u529f\uff0c\u8fd4\u56de Python String \u5bf9\u8c61\uff0c\u5355\u4f4d Bytes\uff1b\u83b7\u53d6\u5931\u8d25\uff0c\u629b\u51fa\u5f02\u5e38\u3002","title":"\u529f\u80fd\u4f7f\u7528"},{"location":"api/small_program/","text":"1.\u524d\u8a00 \u00b6 \u5fae\u4fe1\u5c0f\u7a0b\u5e8f\u662f\u4e00\u79cd\u5168\u65b0\u7684\u8fde\u63a5\u7528\u6237\u4e0e\u670d\u52a1\u7684\u65b9\u5f0f\uff0c\u5b83\u53ef\u4ee5\u5728\u5fae\u4fe1\u5185\u88ab\u4fbf\u6377\u5730\u83b7\u53d6\u548c\u4f20\u64ad\uff0c\u62e5\u6709\u7c7b\u4f3c App \u7684\u4f7f\u7528\u4f53\u9a8c\u3002\u5fae\u4fe1\u5c0f\u7a0b\u5e8f\u7684\u51fa\u73b0\uff0c\u5f00\u542f\u4e86\u65b0\u7684\u8de8\u5e73\u53f0\u79fb\u52a8\u5e94\u7528\u65b9\u5f0f\uff0c\u53c8\u62cd\u4e91\u63a8\u51fa\u4e86 \u5fae\u4fe1\u5c0f\u7a0b\u5e8f SDK \uff0c\u5e2e\u52a9\u5f00\u53d1\u8005\u51cf\u8f7b\u540e\u7aef\u90e8\u7f72\u3001\u8fd0\u7ef4\u3001\u8bc1\u4e66\u914d\u7f6e\u7b49\u7e41\u7410\u5de5\u4f5c\uff0c\u63d0\u5347\u5c0f\u7a0b\u5e8f\u6027\u80fd\u7684\u540c\u65f6\uff0c\u51cf\u5c11\u5f00\u53d1\u6210\u672c\u3002 \u4e3a\u4e86\u65b9\u4fbf\u5fae\u4fe1\u5c0f\u7a0b\u5e8f\u5f00\u53d1\u8005\u4fbf\u6377\u4f7f\u7528\u53c8\u62cd\u4e91\u7684\u4e91\u670d\u52a1\uff0c\u672c\u6587\u6848\u5c06\u4f1a\u7ed3\u5408\u53c8\u62cd\u4e91\u5bf9\u8c61\u5b58\u50a8\u3001SSL \u8bc1\u4e66\u3001CDN \u52a0\u901f\u3001\u56fe\u7247\u5904\u7406\u3001\u97f3\u89c6\u9891\u5904\u7406\u7b49\u670d\u52a1\uff0c\u5feb\u901f\u6784\u5efa\u5177\u5907\u4e91\u7aef\u80fd\u529b\u7684\u4e13\u5c5e\u5c0f\u7a0b\u5e8f\u3002 2.\u51c6\u5907\u5de5\u4f5c \u00b6 2.1 \u6ce8\u518c\u5fae\u4fe1\u5c0f\u7a0b\u5e8f \u5f00\u53d1\u5c0f\u7a0b\u5e8f\u7684\u7b2c\u4e00\u6b65\uff0c\u60a8\u9700\u8981\u6ce8\u518c\u4e00\u4e2a\u5fae\u4fe1\u5c0f\u7a0b\u5e8f\u7684\u8d26\u53f7\uff0c\u901a\u8fc7\u6b64\u8d26\u53f7\u60a8\u53ef\u4ee5\u7ba1\u7406\u60a8\u7684\u5c0f\u7a0b\u5e8f\uff0c\u5fae\u4fe1\u5c0f\u7a0b\u5e8f\u8d26\u53f7\u6ce8\u518c\u5730\u5740\u8bf7\u79fb\u6b65 \u5fae\u4fe1\u516c\u4f17\u5e73\u53f0 \uff0c\u8be6\u7ec6\u4f7f\u7528\u6307\u5357\u8bf7\u53c2\u89c1\u5fae\u4fe1\u5c0f\u7a0b\u5e8f \u7b80\u6613\u6559\u7a0b \u6587\u6863\u3002 2.2 \u53c8\u62cd\u4e91\u8d26\u6237\u5b9e\u540d\u8ba4\u8bc1 \u4e3a\u4e86\u987a\u5229\u4f7f\u7528\u53c8\u62cd\u4e91\u7684\u4e91\u670d\u52a1\uff0c\u60a8\u9700\u8981\u5728\u53c8\u62cd\u4e91\u6ce8\u518c\u4e00\u4e2a\u8d26\u53f7\uff0c\u5e76\u8fdb\u884c\u8d26\u6237\u7684\u5b9e\u540d\u8ba4\u8bc1\u3002\u6253\u5f00 \u6ce8\u518c\u754c\u9762 \u6216\u8005\u5728\u53c8\u62cd\u4e91\u5b98\u7f51\u9875\u9762\u53f3\u4e0a\u89d2\u70b9\u51fb\u300c\u6ce8\u518c\u300d\u6309\u94ae\u3002\u66f4\u591a\u4e86\u89e3\uff0c\u8bf7\u53c2\u8003\u4e91\u670d\u52a1 \u5feb\u901f\u5165\u95e8 \u6307\u5357\u3002 2.3 \u8d2d\u4e70\u4e91\u670d\u52a1\u5668\u548c\u4e91\u6570\u636e\u5e93 \u4e3a\u4e86\u66f4\u597d\u7684\u8fd0\u884c\u670d\u52a1\u7aef\u4ee3\u7801\uff0c\u60a8\u8fd8\u9700\u8981\u8d2d\u4e70\u4e1a\u52a1\u670d\u52a1\u5668\u548c\u4e91\u6570\u636e\u5e93\uff0c\u5177\u4f53\u914d\u7f6e\u6839\u636e\u60a8\u7684\u4e1a\u52a1\u9700\u6c42\u800c\u5b9a\u3002\u53c8\u62cd\u4e91\u6682\u672a\u63d0\u4f9b\u8be5\u670d\u52a1\uff0c\u8fd9\u91cc\u63a8\u8350\u53c8\u62cd\u4e91\u6218\u7565\u5408\u4f5c\u4f19\u4f34\u7684\u4e91\u7aef\u7f51\u7edc\u7684 \u4e91\u4e3b\u673a\u670d\u52a1 \uff0c\u6216\u8005\u81ea\u884c\u91c7\u8d2d\u5e76\u8fdb\u884c\u6258\u7ba1\u3002 3.\u57df\u540d\u53ca\u8bc1\u4e66\u7533\u8bf7 \u00b6 3.1 \u57df\u540d\u7533\u8bf7\u53ca\u5907\u6848 \u642d\u5efa\u4f01\u4e1a\u7ea7\u7684\u5fae\u4fe1\u5c0f\u7a0b\u5e8f\uff0c\u9700\u8981\u6ce8\u518c\u81ea\u6709\u57df\u540d\u5e76\u8fdb\u884c\u5907\u6848\u3002\u5982\u679c\u60a8\u5df2\u7ecf\u6ce8\u518c\u4f01\u4e1a\u57df\u540d\u5e76\u4e14\u5df2\u5907\u6848\uff0c\u8bf7\u5ffd\u7565\u672c\u6b65\u9aa4\u3002 3.2 SSL \u8bc1\u4e66\u7533\u8bf7 \u53c8\u62cd\u4e91\u63d0\u4f9b\u4e86 Symantec\u3001GeoTrust\u3001TrustAsia\u3001Let\u2019s Encrypt \u7684\u5404\u7c7b DV/OV/EV SSL \u8bc1\u4e66\u7684\u7533\u8d2d\u670d\u52a1\uff0c\u5176\u4e2d TrustAsia\u3001Let\u2019s Encrypt DV SSL \u5355\u57df\u540d\u8bc1\u4e66\u53ef\u514d\u8d39\u7533\u8bf7\u3002\u7acb\u5373\u8d2d\u4e70\u8bf7\u70b9\u51fb SSL \u8bc1\u4e66\u8d2d\u4e70 \uff0c\u8be6\u7ec6\u64cd\u4f5c\u6b65\u9aa4\u53ef\u53c2\u89c1 \u5feb\u901f\u5165\u95e8 \u3002\u5982\u4e0b\u56fe\u4e3a SSL \u8bc1\u4e66\u7533\u8d2d\u754c\u9762\uff1a 3.3 SSL \u8bc1\u4e66\u90e8\u7f72 SSL \u8bc1\u4e66\u90e8\u7f72\u5206\u4e3a\u4e24\u4e2a\u90e8\u5206\uff0c\u60a8\u9700\u8981\u5728\u670d\u52a1\u7aef\u548c CDN \u5e73\u53f0\u540c\u65f6\u8fdb\u884c SSL \u8bc1\u4e66\u7684\u90e8\u7f72\u3002 1\uff09\u5728\u670d\u52a1\u7aef\u8fdb\u884c SSL \u8bc1\u4e66\u7684\u90e8\u7f72 \u5fae\u4fe1\u5c0f\u7a0b\u5e8f\u5fc5\u987b\u4f7f\u7528 HTTPS \u8fdb\u884c\u52a0\u5bc6\u901a\u4fe1\uff0c\u6240\u4ee5\u60a8\u9700\u8981\u5728\u6e90\u7ad9\u8fdb\u884c SSL \u8bc1\u4e66\u7684\u90e8\u7f72\u548c\u914d\u7f6e\u3002 \u8fd9\u91cc\u4ee5 Nginx \u4e3a\u4f8b\uff0c\u6253\u5f00 Nginx \u6839\u76ee\u5f55\uff0c\u8f93\u5165\u547d\u4ee4\uff1a vim nginx.conf \u5177\u4f53\u914d\u7f6e\u4fe1\u606f\u53c2\u89c1\u5982\u4e0b\u6837\u4f8b\uff1a server { listen 443; #SSL \u8bbf\u95ee\u7aef\u53e3\u53f7\u4e3a 443 server_name www.example.com #\u60a8\u7684\u57df\u540d ... ssl on; #\u5f00\u542f SSL \u529f\u80fd ssl_certificate /xxx/xxx/www.example.com.pem; #\u8bc1\u4e66\u6587\u4ef6 ssl_certificate_key /xxx/xxx/www.example.com.key; #\u79c1\u94a5\u6587\u4ef6 ssl_protocols TLSv1 TLSv1.1 TLSv1.2; #\u652f\u6301\u7684 TLS \u534f\u8bae ssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:ECDHE:ECDH:AES:HIGH:!NULL:!aNULL:!MD5:!ADH:!RC4; #\u914d\u7f6e\u52a0\u5bc6\u5957\u4ef6,\u63a8\u8350\u914d\u7f6e\u3002 location / { root html; #\u7ad9\u70b9\u76ee\u5f55 index index.html index.htm; } ... } \u914d\u7f6e\u5b8c\u6210\u540e\uff0c\u7136\u540e\u901a\u8fc7\u5982\u4e0b\u547d\u4ee4\u6765\u5224\u65ad\u914d\u7f6e\u6587\u4ef6\u8bed\u6cd5\u662f\u5426\u6b63\u786e sudo nginx -t -c /etc/nginx/nginx.conf \u786e\u4fdd\u914d\u7f6e\u65e0\u8bef\u7684\u8bdd\uff0c\u5efa\u8bae\u91cd\u65b0\u542f\u52a8 Nginx\u3002 2\uff09\u5728\u53c8\u62cd\u4e91 CDN \u5e73\u53f0\u8fdb\u884c SSL \u8bc1\u4e66\u7684\u90e8\u7f72 \u5728 CDN \u5e73\u53f0\u8fdb\u884c SSL \u8bc1\u4e66\u7684\u90e8\u7f72\u8bf7\u8fdb\u5165 SSL \u8bc1\u4e66\u7ba1\u7406 \uff0c\u53ef\u4e00\u952e\u5f00\u542f HTTPS \u52a0\u901f\u3002\u66f4\u591a\u4e86\u89e3\u8bf7\u53c2\u89c1 HTTPS \u914d\u7f6e \u6587\u6863\u3002 3.4 \u901a\u4fe1\u57df\u540d\u914d\u7f6e \u524d\u5f80 \u5fae\u4fe1\u516c\u4f17\u5e73\u53f0 \uff0c\u4f9d\u6b21\u8fdb\u5165\uff1a\u3010\u8bbe\u7f6e\u3011-\u300b\u3010\u5f00\u53d1\u8bbe\u7f6e\u3011-\u300b\u3010\u670d\u52a1\u5668\u57df\u540d\u3011-\u300b\u3010\u4fee\u6539\u3011\uff0c\u4f7f\u7528\u4e8c\u7ea7\u57df\u540d\u5b8c\u6210\u901a\u4fe1\u57df\u540d\u8bbe\u7f6e\u3002\u914d\u7f6e\u622a\u56fe\u5982\u4e0b\u56fe\uff1a request \u5408\u6cd5\u57df\u540d\uff1a\u8bf7\u6c42\u7684\u5408\u6cd5\u57df\u540d socket \u5408\u6cd5\u57df\u540d\uff1asocket \u901a\u8baf\u7684\u5408\u6cd5\u57df\u540d uploadFile \u5408\u6cd5\u57df\u540d\uff1a\u8d44\u6e90\u4e0a\u4f20\u7684\u5408\u6cd5\u57df\u540d downloadFile \u5408\u6cd5\u57df\u540d\uff1a\u8d44\u6e90\u4e0b\u8f7d\u7684\u5408\u6cd5\u57df\u540d \u8bf7\u6839\u636e\u9700\u6c42\u5408\u7406\u914d\u7f6e\u3002\u5173\u4e8e uploadFile \u5408\u6cd5\u57df\u540d\u914d\u7f6e\u8bf7\u53c2\u89c1 5.4 \u57fa\u7840\u914d\u7f6e\u3002 4.\u642d\u5efa\u5f00\u53d1\u73af\u5883 \u00b6 4.1 \u4e0b\u8f7d\u5c0f\u7a0b\u5e8f\u5f00\u53d1\u8005\u5de5\u5177 \u4e0b\u8f7d\u5e76\u5b89\u88c5\u6700\u65b0\u7248\u672c\u7684 \u5c0f\u7a0b\u5e8f\u5f00\u53d1\u8005\u5de5\u5177 \uff0c\u4f7f\u7528\u5c0f\u7a0b\u5e8f\u7ed1\u5b9a\u7684\u5fae\u4fe1\u53f7\u626b\u7801\u767b\u5f55\u5f00\u53d1\u8005\u5de5\u5177\u3002 4.2 \u7b80\u5355\u64cd\u4f5c \u5fae\u4fe1\u626b\u4e8c\u7ef4\u7801\u767b\u9646 \u521b\u5efa\u9879\u76ee \u9009\u62e9 \u3010\u5c0f\u7a0b\u5e8f\u9879\u76ee\u3011 \u5373\u53ef\u6dfb\u52a0\u9879\u76ee\u3002 \u8be6\u7ec6\u64cd\u4f5c\u6b65\u9aa4\u8bf7\u79fb\u6b65\u5c0f\u7a0b\u5e8f\u5f00\u53d1\u8005\u5de5\u5177 \u64cd\u4f5c\u6307\u5357 \u3002 5.\u53c8\u62cd\u4e91\u5c0f\u7a0b\u5e8f\u4e0a\u4f20\u65b9\u6848 \u00b6 \u5fae\u4fe1\u5c0f\u7a0b\u5e8f\u8981\u6c42\u5b89\u88c5\u5305\u5927\u5c0f\u4e0d\u8d85\u8fc7 2MB\uff0c\u800c\u56fe\u7247\u3001\u97f3\u9891\u3001\u77ed\u89c6\u9891\u7b49\u591a\u5a92\u4f53\u6587\u4ef6\u5f80\u5f80\u5360\u636e\u4e86 App \u5927\u90e8\u5206\u7a7a\u95f4\uff0c\u53ef\u4ee5\u628a\u8fd9\u4e9b\u6587\u4ef6\u4e0a\u4f20\u81f3\u4e91\u7aef\u5b58\u50a8\uff0c\u7a0b\u5e8f\u5305\u8fdb\u884c\u591a\u5a92\u4f53\u6587\u4ef6\u8bfb\u53d6\uff0c\u8ba9\u5c0f\u7a0b\u5e8f\u8f7b\u677e \u201c\u8df3\u8131\u201d 2MB \u7684\u5bb9\u91cf\u9650\u5236\u3002\u53c8\u62cd\u4e91\u5b58\u50a8\u62e5\u6709\u4e0a\u4f20\u52a0\u901f\uff0c\u4e0b\u8f7d\u52a0\u901f\uff0c\u4e0d\u9650\u91cf\u5b58\u50a8\u7b49\u529f\u80fd\uff0c\u6ee1\u8db3\u60a8\u6587\u4ef6\u7684\u65e0\u9650\u5b58\u50a8\u548c\u5feb\u901f\u8bfb\u53d6\u3002 \u53e6\u5916\uff0c\u901a\u8fc7\u53c8\u62cd\u4e91 \u5fae\u4fe1\u5c0f\u7a0b\u5e8f SDK \uff0c\u53ef\u8f7b\u677e\u5c06\u6587\u4ef6\u4e0a\u4f20\u5230\u53c8\u62cd\u4e91 \u5bf9\u8c61\u5b58\u50a8\u670d\u52a1 \u3002 5.1 \u4e0b\u8f7d\u5fae\u4fe1\u5c0f\u7a0b\u5e8f SDK \u70b9\u51fb \u53c8\u62cd\u4e91\u5fae\u4fe1\u5c0f\u7a0b\u5e8f SDK \u8fdb\u884c\u4e0b\u8f7d\u3002 5.2 \u51c6\u5907\u5de5\u4f5c 1) \u521b\u5efa\u4e91\u5b58\u50a8\u670d\u52a1\uff0c\u8be6\u7ec6\u64cd\u4f5c\u53c2\u89c1 \u57df\u540d\u63a5\u5165(\u53c8\u62cd\u5b58\u50a8\u6e90) \uff0c\u5982\u622a\u56fe\u6240\u793a\uff1a \u4ece\u622a\u56fe\u53ef\u4ee5\u5f97\u77e5\uff0c\u670d\u52a1\u540d\u79f0\u4e3a\uff08\u4e5f\u5373 bucket\uff09 video-upyun-com \u3002 2) \u4e3a\u5b58\u50a8\u670d\u52a1 video-upyun-com \u6388\u6743\u4e00\u4e2a\u64cd\u4f5c\u5458\uff0c\u8be6\u7ec6\u64cd\u4f5c\u53c2\u52a0\u6587\u6863 \u64cd\u4f5c\u5458\u4f7f\u7528 \uff0c\u914d\u7f6e\u53c2\u52a0\u622a\u56fe\u6240\u793a\uff1a \u4ece\u622a\u56fe\u53ef\u4ee5\u770b\u51fa\uff0c\u64cd\u4f5c\u5458\u540d\uff08\u4e5f\u5373 Operator \uff09\u4e3a wxj2017 \uff0c\u4e0e\u6b64\u540c\u65f6\u8bf7\u8bb0\u4f4f\u64cd\u4f5c\u5458\u5bc6\u7801\u3002 5.3 \u4e0a\u4f20\u548c\u90e8\u7f72\u4ee3\u7801 \u8be5\u6b65\u9aa4\uff0c\u9996\u5148\u9700\u8981\u4e0b\u8f7d\u5c0f\u7a0b\u5e8f SDK+Demo \uff0c\u83b7\u53d6\u5c0f\u7a0b\u5e8f Demo \u53ca\u6e90\u7801\u3002\u63a5\u4e0b\u6765\u7684\u64cd\u4f5c\u6b65\u9aa4\u4e3a\uff1a 1\uff09\u6253\u5f00\u7b2c\u56db\u6b65\u5b89\u88c5\u7684\u5fae\u4fe1\u5f00\u53d1\u8005\u5de5\u5177\uff0c\u70b9\u51fb\u3010\u5c0f\u7a0b\u5e8f\u9879\u76ee\u3011\u6a21\u5757\uff0c\u8fdb\u5165\u5982\u4e0b\u754c\u9762\uff1a 2) \u70b9\u51fb\u4e0a\u56fe\u5de6\u4e0b\u89d2\u7684\u3010\u6dfb\u52a0\u3011\u6309\u94ae\uff0c\u8fdb\u5165\u5982\u4e0b\u754c\u9762\uff0c\u8f93\u5165\u5c0f\u7a0b\u5e8f AppID\uff0c\u9879\u76ee\u76ee\u5f55\u9009\u62e9\u4e0a\u4e00\u6b65\u4e0b\u8f7d\u4e0b\u6765\u7684\u4ee3\u7801\u76ee\u5f55\uff1a \u6ce8\u610f\uff1aAppID \u53ef\u4ee5\u4ece\u5fae\u4fe1\u516c\u4f17\u53f7\u91cc\u9762\u83b7\u53d6\uff0c\u5982\u622a\u56fe\u6240\u793a\uff1a 3\uff09\u70b9\u51fb\u3010\u786e\u5b9a\u3011\u521b\u5efa\u5c0f\u7a0b\u5e8f\u9879\u76ee\uff0c\u8fdb\u5165\u5fae\u4fe1\u5f00\u53d1\u8005\u5de5\u5177\u754c\u9762\uff1a 5.4 \u57fa\u7840\u914d\u7f6e 1\uff09\u5b57\u6bb5\u66ff\u6362 \u60a8\u9700\u8981\u8fdb\u5165 /pages/index/index.js \u6587\u4ef6\uff0c\u5c06\u76f8\u5173\u5b57\u6bb5\u8fdb\u884c\u4fee\u6539\u548c\u66ff\u6362\uff0c\u53c2\u89c1\u5982\u4e0b\u622a\u56fe\uff1a const upyun = new Upyun({ bucket: 'sdkimg', operator: 'tester', getSignatureUrl: 'http://localhost:8080' }) \u9700\u8981\u66ff\u6362\u7684\u5b57\u6bb5\u4e3a\uff1a bucket:\u670d\u52a1\u540d\u79f0 operator\uff1a\u64cd\u4f5c\u5458 getSignatureUrl\uff1a\u8ba1\u7b97 signature \u7684\u670d\u52a1\u5668\u63a5\u53e3\u5730\u5740 upyun.upload({ localPath: imageSrc, remotePath: '/wxapp/demo', success: function (res) { console.log('uploadImage success, res is:', res) wx.showToast({ title: '\u4e0a\u4f20\u6210\u529f', icon: 'success', duration: 1000 }) self.setData({ imageSrc }) }, \u9700\u8981\u66ff\u6362\u7684\u5b57\u6bb5\u4e3a\uff1a remotePath\uff1a\u5728\u53c8\u62cd\u4e91\u5b58\u50a8\u7684\u6587\u4ef6\u8def\u5f84\u3002 2\uff09\u4e0a\u4f20\u57df\u540d\u914d\u7f6e \u767b\u5f55\u5fae\u4fe1\u5c0f\u7a0b\u5e8f\u8d26\u6237\u5e76\u914d\u7f6e uploadFile \u5408\u6cd5\u57df\u540d\u4e3a https://v0.api.upyun.com \uff0c\u914d\u7f6e\u5982\u622a\u56fe\u6240\u793a\uff1a 5.5 \u8ba4\u8bc1\u9274\u6743 \u4e91\u5b58\u50a8\u670d\u52a1\u7684\u8ba4\u8bc1\u9274\u6743\u8be6\u7ec6\u53c2\u89c1\u6587\u6863 \u8ba4\u8bc1\u9274\u6743 \u3002\u5173\u4e8e\u8ba4\u8bc1\u9274\u6743\u90e8\u5206\uff0c\u53ef\u901a\u8fc7\u5982\u4e0b\u4e09\u4e2a\u90e8\u5206\u6765\u5206\u5f00\u4ecb\u7ecd\uff1a 1\uff09\u5fae\u4fe1\u5c0f\u7a0b\u5e8f\u5ba2\u6237\u7aef\u4e0a\u4f20 data \u53c2\u6570 \u53ef\u4ee5\u76f4\u63a5\u53c2\u8003\u5fae\u4fe1\u5c0f\u7a0b\u5e8f /utils/upyun-wxapp-sdk.js \u4e2d\u7684\u4ee3\u7801\u3002\u4e0b\u9762\u4e3a\u90e8\u5206\u4ee3\u7801\u793a\u4f8b\uff1a function Upyun (options) { this.bucket = options.bucket this.operator = options.operator this.getSignatureUrl = options.getSignatureUrl } Upyun.prototype.upload = function (options) { var self = this if (!options.remotePath) { options.remotePath = options.localPath.split('//')[1] } var date = (new Date()).toGMTString() var opts = { 'save-key': options.remotePath, bucket: self.bucket, expiration: Math.round(new Date().getTime() / 1000) + 3600, date: date } var policy = Base64.encode(JSON.stringify(opts)) var data = [ 'POST', '/' + self.bucket, date, policy ].join('&') self.getSignature(data, function (err, signature) { if (err) { options.fail && options.fail(err) options.complete && options.complete(err) return } wx.uploadFile({ url: `https://v0.api.upyun.com/${self.bucket}`, filePath: options.localPath, name: 'file', formData: { authorization: `UPYUN ${self.operator}:${signature}`, policy: policy }, success: options.success, fail: options.fail, complete: options.complete }) }) } \u4ece\u4ee3\u7801\u4e2d\u53ef\u4ee5\u5f97\u77e5\uff0c\u9700\u8981\u83b7\u53d6\u7684\u5b57\u6bb5\u5305\u62ec\uff1a bucket\uff1a\u670d\u52a1\u540d\u79f0 save-key\uff1a\u6587\u4ef6\u4fdd\u5b58\u8def\u5f84\uff0c\u4e5f\u5373 remotePath expiration\uff1a\u8bf7\u6c42\u7684\u8fc7\u671f\u65f6\u95f4\uff0cUNIX UTC \u65f6\u95f4\u6233\uff0c\u5355\u4f4d\u79d2 date\uff1a\u8bf7\u6c42\u65e5\u671f\u65f6\u95f4\uff0cGMT \u683c\u5f0f\u5b57\u7b26\u4e32 Method\uff1a\u8fd9\u91cc\u4e3a POST URI\uff1a\u8bf7\u6c42\u8def\u5f84\uff0c\u672c\u4f8b\u4e3a / \u6700\u7ec8\u5ba2\u6237\u7aef\u751f\u6210 data \u53c2\u6570\u4f20\u9012\u7ed9\u670d\u52a1\u7aef\u7b7e\u540d\u63a5\u53e3\uff08 \u4e5f\u5373 getSignatureUrl \u5730\u5740 \uff09\uff0c\u7b7e\u540d\u670d\u52a1\u5668\u751f\u6210 signature \u5e76\u8fd4\u56de\u7ed9\u5ba2\u6237\u7aef\u3002 2\uff09\u7b7e\u540d\u670d\u52a1\u7aef\u751f\u6210 signature \u4e3a\u4e86\u8003\u8651\u5b89\u5168\u6027\uff0c\u64cd\u4f5c\u5458\u5bc6\u7801\u4e0d\u5b9c\u76f4\u63a5\u66b4\u9732\uff0c signature \u76f4\u63a5\u7531\u7b7e\u540d\u670d\u52a1\u7aef\u751f\u6210\uff0c\u5fae\u4fe1\u5c0f\u7a0b\u5e8f\u9700\u8981\u643a\u5e26 data \u53c2\u6570\uff0c\u5177\u4f53\u53c2\u89c1\u4e0a\u4e2a\u6b65\u9aa4\u7684\u4ee3\u7801\u3002 \u63a5\u53e3\u5730\u5740\u5b57\u6bb5\u4e3a getSignatureUrl \uff0c\u5728 5.4 \u57fa\u7840\u914d\u7f6e\u4e2d\u5df2\u7ecf\u6709\u4ecb\u7ecd\uff0c\u8be5\u63a5\u53e3\u63a5\u53d7 GET \u8bf7\u6c42\uff0c\u5e76\u63a5\u53d7\u4e00\u4e2a\u53c2\u6570 data \uff0c\u8ba1\u7b97\u5e76\u8fd4\u56de\u5e26\u6709 signature \u5b57\u6bb5\u7684\u54cd\u5e94\u3002 signature \u7684\u8ba1\u7b97\u516c\u5f0f\u662f\uff1a Base64 (HMAC-SHA1 (<md5_password>, <data>) \u5176\u4e2d\uff0cmd5_password \u662f\u64cd\u4f5c\u5458\u5bc6\u7801\u7684 MD5 \u503c\uff0c\u64cd\u4f5c\u5458\u5bc6\u7801\u8bf7\u59a5\u5584\u4fdd\u7ba1\uff0c\u4e0d\u5b9c\u66b4\u9732\u3002 3\uff09\u5ba2\u6237\u7aef\u5411\u53c8\u62cd\u4e91 API \u670d\u52a1\u7aef\u8fdb\u884c\u8ba4\u8bc1\u9274\u6743 \u6839\u636e\u4e0a\u9762\u4e24\u4e2a\u6b65\u9aa4\uff0c\u6700\u7ec8\u751f\u6210\u7b7e\u540d\u4fe1\u606f\uff0c\u8be6\u89c1\u4ee3\u7801\uff1a wx.uploadFile({ url: `https://v0.api.upyun.com/${self.bucket}`, filePath: options.localPath, name: 'file', formData: { authorization: `UPYUN ${self.operator}:${signature}`, policy: policy }, success: options.success, fail: options.fail, complete: options.complete }) 5.6 \u4e0a\u4f20\u4ee3\u7801 \u4ee5\u4e0a\u64cd\u4f5c\u6b65\u9aa4\u8fdb\u884c\u5b8c\u4e4b\u540e\uff0c\u60a8\u53ef\u4ee5\u4e0a\u4f20\u5fae\u4fe1\u5c0f\u7a0b\u5e8f\u4ee3\u7801\u81f3\u5fae\u4fe1\u5c0f\u7a0b\u5e8f\u670d\u52a1\u7aef\u3002\u8fdb\u5165\u5fae\u4fe1\u5f00\u53d1\u8005\u5de5\u5177\uff0c\u70b9\u51fb\u3010\u4e0a\u4f20\u3011\u6309\u94ae\uff0c\u586b\u5199\u7248\u672c\u53f7\u53ca\u9879\u76ee\u5907\u6ce8\u3002 \u8fdb\u5165\u5fae\u4fe1\u516c\u4f17\u5e73\u53f0\uff0c\u4f9d\u6b21\u8fdb\u5165\uff1a\u3010\u5f00\u53d1\u7ba1\u7406\u3011-\u300b\u3010\u5f00\u53d1\u7248\u672c\u3011-\u300b\u9009\u62e9\u4f53\u9a8c\u7248\u672c\u3002 \u8bbe\u7f6e\u9875\u9762\u8def\u5f84\u53ca\u53c2\u6570\uff0c\u5177\u4f53\u914d\u7f6e\u4e3a\uff1apages/index/index\uff0c\u63d0\u4ea4\u4e4b\u540e\uff0c\u8fdb\u5165\u5982\u4e0b\u9875\u9762\u3002 \u626b\u63cf\u4e8c\u7ef4\u7801\uff0c\u53ef\u4ee5\u8fdb\u5165\u5fae\u4fe1\u5c0f\u7a0b\u5e8f\u4f53\u9a8c\u7248\u3002 6.\u5f00\u901a CDN \u670d\u52a1 \u00b6 \u4e3a\u4e86\u63d0\u5347\u5fae\u4fe1\u5c0f\u7a0b\u5e8f\u7684\u8bbf\u95ee\u4f53\u9a8c\uff0c\u8bbf\u95ee\u57df\u540d\u53ef\u4ee5\u8fdb\u884c CDN \u52a0\u901f\u3002\u53ef\u4ee5\u5728 5.2 \u4e2d\u521b\u5efa\u7684\u5b58\u50a8\u670d\u52a1\u4e0b\u76f4\u63a5\u7ed1\u5b9a\u52a0\u901f\u57df\u540d\u3002 6.1 \u7ed1\u5b9a\u52a0\u901f\u57df\u540d \u7ed3\u5408\u524d\u9762\u6b65\u9aa4\u7533\u8bf7\u7684\u8bbf\u95ee\u57df\u540d\u4ee5\u53ca\u5fae\u4fe1\u516c\u4f17\u5e73\u53f0\u8bbe\u7f6e\u7684\u901a\u4fe1\u57df\u540d\uff0c\u60a8\u53ef\u4ee5\u5c06\u8bbf\u95ee\u57df\u540d\u5728\u53c8\u62cd\u4e91 CDN \u5e73\u53f0\u8fdb\u884c\u914d\u7f6e\u3002\u8fdb\u5165\u7b2c\u4e94\u6b65\u5df2\u5f00\u901a\u7684\u670d\u52a1\uff0c\u76f4\u63a5\u8fdb\u5165\u529f\u80fd\u914d\u7f6e\u6a21\u5757\u8fdb\u884c\u52a0\u901f\u57df\u540d\u7684\u7ed1\u5b9a\uff0c\u8be6\u60c5\u53c2\u89c1 \u52a0\u901f\u57df\u540d \u3002 6.2 \u4e00\u952e\u5f00\u542f HTTPS \u52a0\u901f \u8fdb\u5165\u3010\u529f\u80fd\u914d\u7f6e\u3011\u6a21\u5757\uff0c\u627e\u5230 HTTPS \u914d\u7f6e\uff0c\u53ef\u4ee5\u4e00\u952e\u5f00\u542f HTTPS \u52a0\u901f\u3002\u66f4\u591a\u64cd\u4f5c\u6b65\u9aa4\u53c2\u89c1 HTTPS \u914d\u7f6e \u3002 6.3 \u5c06\u57df\u540d\u5207\u6362\u5230 CDN \u5177\u4f53\u64cd\u4f5c\u8bf7\u53c2\u89c1 CNAME \u914d\u7f6e \u3002 7.\u5176\u4ed6\u670d\u52a1 \u00b6 7.1 \u56fe\u7247\u5904\u7406 \u7ed3\u5408\u56fe\u7247\u5904\u7406\u7684\u4f7f\u7528\u65b9\u5f0f\u6765\u5408\u7406\u4f7f\u7528\uff0c\u8bf7\u53c2\u89c1\u5982\u4e0b\u94fe\u63a5\u3002 URL \u4f5c\u56fe \u7f29\u7565\u56fe\u7248\u672c \u4e0a\u4f20\u9884\u5904\u7406\uff08\u540c\u6b65\uff09 \u4e0a\u4f20\u9884\u5904\u7406\uff08\u5f02\u6b65\uff09 7.2 \u97f3\u89c6\u9891\u5904\u7406 \u97f3\u89c6\u9891\u5904\u7406\u7684\u573a\u666f\u5305\u62ec\u5f02\u6b65\u97f3\u89c6\u9891\u5904\u7406\u548c\u540c\u6b65\u97f3\u89c6\u9891\u5904\u7406\uff0c\u8be6\u7ec6\u53c2\u89c1\u6587\u6863\uff1a \u5f02\u6b65\u97f3\u89c6\u9891\u5904\u7406 \u540c\u6b65\u89c6\u9891\u5904\u7406 \u540c\u6b65\u97f3\u9891\u5904\u7406","title":"\u5fae\u4fe1\u5c0f\u7a0b\u5e8f"},{"location":"api/small_program/#1","text":"\u5fae\u4fe1\u5c0f\u7a0b\u5e8f\u662f\u4e00\u79cd\u5168\u65b0\u7684\u8fde\u63a5\u7528\u6237\u4e0e\u670d\u52a1\u7684\u65b9\u5f0f\uff0c\u5b83\u53ef\u4ee5\u5728\u5fae\u4fe1\u5185\u88ab\u4fbf\u6377\u5730\u83b7\u53d6\u548c\u4f20\u64ad\uff0c\u62e5\u6709\u7c7b\u4f3c App \u7684\u4f7f\u7528\u4f53\u9a8c\u3002\u5fae\u4fe1\u5c0f\u7a0b\u5e8f\u7684\u51fa\u73b0\uff0c\u5f00\u542f\u4e86\u65b0\u7684\u8de8\u5e73\u53f0\u79fb\u52a8\u5e94\u7528\u65b9\u5f0f\uff0c\u53c8\u62cd\u4e91\u63a8\u51fa\u4e86 \u5fae\u4fe1\u5c0f\u7a0b\u5e8f SDK \uff0c\u5e2e\u52a9\u5f00\u53d1\u8005\u51cf\u8f7b\u540e\u7aef\u90e8\u7f72\u3001\u8fd0\u7ef4\u3001\u8bc1\u4e66\u914d\u7f6e\u7b49\u7e41\u7410\u5de5\u4f5c\uff0c\u63d0\u5347\u5c0f\u7a0b\u5e8f\u6027\u80fd\u7684\u540c\u65f6\uff0c\u51cf\u5c11\u5f00\u53d1\u6210\u672c\u3002 \u4e3a\u4e86\u65b9\u4fbf\u5fae\u4fe1\u5c0f\u7a0b\u5e8f\u5f00\u53d1\u8005\u4fbf\u6377\u4f7f\u7528\u53c8\u62cd\u4e91\u7684\u4e91\u670d\u52a1\uff0c\u672c\u6587\u6848\u5c06\u4f1a\u7ed3\u5408\u53c8\u62cd\u4e91\u5bf9\u8c61\u5b58\u50a8\u3001SSL \u8bc1\u4e66\u3001CDN \u52a0\u901f\u3001\u56fe\u7247\u5904\u7406\u3001\u97f3\u89c6\u9891\u5904\u7406\u7b49\u670d\u52a1\uff0c\u5feb\u901f\u6784\u5efa\u5177\u5907\u4e91\u7aef\u80fd\u529b\u7684\u4e13\u5c5e\u5c0f\u7a0b\u5e8f\u3002","title":"1.\u524d\u8a00"},{"location":"api/small_program/#2","text":"2.1 \u6ce8\u518c\u5fae\u4fe1\u5c0f\u7a0b\u5e8f \u5f00\u53d1\u5c0f\u7a0b\u5e8f\u7684\u7b2c\u4e00\u6b65\uff0c\u60a8\u9700\u8981\u6ce8\u518c\u4e00\u4e2a\u5fae\u4fe1\u5c0f\u7a0b\u5e8f\u7684\u8d26\u53f7\uff0c\u901a\u8fc7\u6b64\u8d26\u53f7\u60a8\u53ef\u4ee5\u7ba1\u7406\u60a8\u7684\u5c0f\u7a0b\u5e8f\uff0c\u5fae\u4fe1\u5c0f\u7a0b\u5e8f\u8d26\u53f7\u6ce8\u518c\u5730\u5740\u8bf7\u79fb\u6b65 \u5fae\u4fe1\u516c\u4f17\u5e73\u53f0 \uff0c\u8be6\u7ec6\u4f7f\u7528\u6307\u5357\u8bf7\u53c2\u89c1\u5fae\u4fe1\u5c0f\u7a0b\u5e8f \u7b80\u6613\u6559\u7a0b \u6587\u6863\u3002 2.2 \u53c8\u62cd\u4e91\u8d26\u6237\u5b9e\u540d\u8ba4\u8bc1 \u4e3a\u4e86\u987a\u5229\u4f7f\u7528\u53c8\u62cd\u4e91\u7684\u4e91\u670d\u52a1\uff0c\u60a8\u9700\u8981\u5728\u53c8\u62cd\u4e91\u6ce8\u518c\u4e00\u4e2a\u8d26\u53f7\uff0c\u5e76\u8fdb\u884c\u8d26\u6237\u7684\u5b9e\u540d\u8ba4\u8bc1\u3002\u6253\u5f00 \u6ce8\u518c\u754c\u9762 \u6216\u8005\u5728\u53c8\u62cd\u4e91\u5b98\u7f51\u9875\u9762\u53f3\u4e0a\u89d2\u70b9\u51fb\u300c\u6ce8\u518c\u300d\u6309\u94ae\u3002\u66f4\u591a\u4e86\u89e3\uff0c\u8bf7\u53c2\u8003\u4e91\u670d\u52a1 \u5feb\u901f\u5165\u95e8 \u6307\u5357\u3002 2.3 \u8d2d\u4e70\u4e91\u670d\u52a1\u5668\u548c\u4e91\u6570\u636e\u5e93 \u4e3a\u4e86\u66f4\u597d\u7684\u8fd0\u884c\u670d\u52a1\u7aef\u4ee3\u7801\uff0c\u60a8\u8fd8\u9700\u8981\u8d2d\u4e70\u4e1a\u52a1\u670d\u52a1\u5668\u548c\u4e91\u6570\u636e\u5e93\uff0c\u5177\u4f53\u914d\u7f6e\u6839\u636e\u60a8\u7684\u4e1a\u52a1\u9700\u6c42\u800c\u5b9a\u3002\u53c8\u62cd\u4e91\u6682\u672a\u63d0\u4f9b\u8be5\u670d\u52a1\uff0c\u8fd9\u91cc\u63a8\u8350\u53c8\u62cd\u4e91\u6218\u7565\u5408\u4f5c\u4f19\u4f34\u7684\u4e91\u7aef\u7f51\u7edc\u7684 \u4e91\u4e3b\u673a\u670d\u52a1 \uff0c\u6216\u8005\u81ea\u884c\u91c7\u8d2d\u5e76\u8fdb\u884c\u6258\u7ba1\u3002","title":"2.\u51c6\u5907\u5de5\u4f5c"},{"location":"api/small_program/#3","text":"3.1 \u57df\u540d\u7533\u8bf7\u53ca\u5907\u6848 \u642d\u5efa\u4f01\u4e1a\u7ea7\u7684\u5fae\u4fe1\u5c0f\u7a0b\u5e8f\uff0c\u9700\u8981\u6ce8\u518c\u81ea\u6709\u57df\u540d\u5e76\u8fdb\u884c\u5907\u6848\u3002\u5982\u679c\u60a8\u5df2\u7ecf\u6ce8\u518c\u4f01\u4e1a\u57df\u540d\u5e76\u4e14\u5df2\u5907\u6848\uff0c\u8bf7\u5ffd\u7565\u672c\u6b65\u9aa4\u3002 3.2 SSL \u8bc1\u4e66\u7533\u8bf7 \u53c8\u62cd\u4e91\u63d0\u4f9b\u4e86 Symantec\u3001GeoTrust\u3001TrustAsia\u3001Let\u2019s Encrypt \u7684\u5404\u7c7b DV/OV/EV SSL \u8bc1\u4e66\u7684\u7533\u8d2d\u670d\u52a1\uff0c\u5176\u4e2d TrustAsia\u3001Let\u2019s Encrypt DV SSL \u5355\u57df\u540d\u8bc1\u4e66\u53ef\u514d\u8d39\u7533\u8bf7\u3002\u7acb\u5373\u8d2d\u4e70\u8bf7\u70b9\u51fb SSL \u8bc1\u4e66\u8d2d\u4e70 \uff0c\u8be6\u7ec6\u64cd\u4f5c\u6b65\u9aa4\u53ef\u53c2\u89c1 \u5feb\u901f\u5165\u95e8 \u3002\u5982\u4e0b\u56fe\u4e3a SSL \u8bc1\u4e66\u7533\u8d2d\u754c\u9762\uff1a 3.3 SSL \u8bc1\u4e66\u90e8\u7f72 SSL \u8bc1\u4e66\u90e8\u7f72\u5206\u4e3a\u4e24\u4e2a\u90e8\u5206\uff0c\u60a8\u9700\u8981\u5728\u670d\u52a1\u7aef\u548c CDN \u5e73\u53f0\u540c\u65f6\u8fdb\u884c SSL \u8bc1\u4e66\u7684\u90e8\u7f72\u3002 1\uff09\u5728\u670d\u52a1\u7aef\u8fdb\u884c SSL \u8bc1\u4e66\u7684\u90e8\u7f72 \u5fae\u4fe1\u5c0f\u7a0b\u5e8f\u5fc5\u987b\u4f7f\u7528 HTTPS \u8fdb\u884c\u52a0\u5bc6\u901a\u4fe1\uff0c\u6240\u4ee5\u60a8\u9700\u8981\u5728\u6e90\u7ad9\u8fdb\u884c SSL \u8bc1\u4e66\u7684\u90e8\u7f72\u548c\u914d\u7f6e\u3002 \u8fd9\u91cc\u4ee5 Nginx \u4e3a\u4f8b\uff0c\u6253\u5f00 Nginx \u6839\u76ee\u5f55\uff0c\u8f93\u5165\u547d\u4ee4\uff1a vim nginx.conf \u5177\u4f53\u914d\u7f6e\u4fe1\u606f\u53c2\u89c1\u5982\u4e0b\u6837\u4f8b\uff1a server { listen 443; #SSL \u8bbf\u95ee\u7aef\u53e3\u53f7\u4e3a 443 server_name www.example.com #\u60a8\u7684\u57df\u540d ... ssl on; #\u5f00\u542f SSL \u529f\u80fd ssl_certificate /xxx/xxx/www.example.com.pem; #\u8bc1\u4e66\u6587\u4ef6 ssl_certificate_key /xxx/xxx/www.example.com.key; #\u79c1\u94a5\u6587\u4ef6 ssl_protocols TLSv1 TLSv1.1 TLSv1.2; #\u652f\u6301\u7684 TLS \u534f\u8bae ssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:ECDHE:ECDH:AES:HIGH:!NULL:!aNULL:!MD5:!ADH:!RC4; #\u914d\u7f6e\u52a0\u5bc6\u5957\u4ef6,\u63a8\u8350\u914d\u7f6e\u3002 location / { root html; #\u7ad9\u70b9\u76ee\u5f55 index index.html index.htm; } ... } \u914d\u7f6e\u5b8c\u6210\u540e\uff0c\u7136\u540e\u901a\u8fc7\u5982\u4e0b\u547d\u4ee4\u6765\u5224\u65ad\u914d\u7f6e\u6587\u4ef6\u8bed\u6cd5\u662f\u5426\u6b63\u786e sudo nginx -t -c /etc/nginx/nginx.conf \u786e\u4fdd\u914d\u7f6e\u65e0\u8bef\u7684\u8bdd\uff0c\u5efa\u8bae\u91cd\u65b0\u542f\u52a8 Nginx\u3002 2\uff09\u5728\u53c8\u62cd\u4e91 CDN \u5e73\u53f0\u8fdb\u884c SSL \u8bc1\u4e66\u7684\u90e8\u7f72 \u5728 CDN \u5e73\u53f0\u8fdb\u884c SSL \u8bc1\u4e66\u7684\u90e8\u7f72\u8bf7\u8fdb\u5165 SSL \u8bc1\u4e66\u7ba1\u7406 \uff0c\u53ef\u4e00\u952e\u5f00\u542f HTTPS \u52a0\u901f\u3002\u66f4\u591a\u4e86\u89e3\u8bf7\u53c2\u89c1 HTTPS \u914d\u7f6e \u6587\u6863\u3002 3.4 \u901a\u4fe1\u57df\u540d\u914d\u7f6e \u524d\u5f80 \u5fae\u4fe1\u516c\u4f17\u5e73\u53f0 \uff0c\u4f9d\u6b21\u8fdb\u5165\uff1a\u3010\u8bbe\u7f6e\u3011-\u300b\u3010\u5f00\u53d1\u8bbe\u7f6e\u3011-\u300b\u3010\u670d\u52a1\u5668\u57df\u540d\u3011-\u300b\u3010\u4fee\u6539\u3011\uff0c\u4f7f\u7528\u4e8c\u7ea7\u57df\u540d\u5b8c\u6210\u901a\u4fe1\u57df\u540d\u8bbe\u7f6e\u3002\u914d\u7f6e\u622a\u56fe\u5982\u4e0b\u56fe\uff1a request \u5408\u6cd5\u57df\u540d\uff1a\u8bf7\u6c42\u7684\u5408\u6cd5\u57df\u540d socket \u5408\u6cd5\u57df\u540d\uff1asocket \u901a\u8baf\u7684\u5408\u6cd5\u57df\u540d uploadFile \u5408\u6cd5\u57df\u540d\uff1a\u8d44\u6e90\u4e0a\u4f20\u7684\u5408\u6cd5\u57df\u540d downloadFile \u5408\u6cd5\u57df\u540d\uff1a\u8d44\u6e90\u4e0b\u8f7d\u7684\u5408\u6cd5\u57df\u540d \u8bf7\u6839\u636e\u9700\u6c42\u5408\u7406\u914d\u7f6e\u3002\u5173\u4e8e uploadFile \u5408\u6cd5\u57df\u540d\u914d\u7f6e\u8bf7\u53c2\u89c1 5.4 \u57fa\u7840\u914d\u7f6e\u3002","title":"3.\u57df\u540d\u53ca\u8bc1\u4e66\u7533\u8bf7"},{"location":"api/small_program/#4","text":"4.1 \u4e0b\u8f7d\u5c0f\u7a0b\u5e8f\u5f00\u53d1\u8005\u5de5\u5177 \u4e0b\u8f7d\u5e76\u5b89\u88c5\u6700\u65b0\u7248\u672c\u7684 \u5c0f\u7a0b\u5e8f\u5f00\u53d1\u8005\u5de5\u5177 \uff0c\u4f7f\u7528\u5c0f\u7a0b\u5e8f\u7ed1\u5b9a\u7684\u5fae\u4fe1\u53f7\u626b\u7801\u767b\u5f55\u5f00\u53d1\u8005\u5de5\u5177\u3002 4.2 \u7b80\u5355\u64cd\u4f5c \u5fae\u4fe1\u626b\u4e8c\u7ef4\u7801\u767b\u9646 \u521b\u5efa\u9879\u76ee \u9009\u62e9 \u3010\u5c0f\u7a0b\u5e8f\u9879\u76ee\u3011 \u5373\u53ef\u6dfb\u52a0\u9879\u76ee\u3002 \u8be6\u7ec6\u64cd\u4f5c\u6b65\u9aa4\u8bf7\u79fb\u6b65\u5c0f\u7a0b\u5e8f\u5f00\u53d1\u8005\u5de5\u5177 \u64cd\u4f5c\u6307\u5357 \u3002","title":"4.\u642d\u5efa\u5f00\u53d1\u73af\u5883"},{"location":"api/small_program/#5","text":"\u5fae\u4fe1\u5c0f\u7a0b\u5e8f\u8981\u6c42\u5b89\u88c5\u5305\u5927\u5c0f\u4e0d\u8d85\u8fc7 2MB\uff0c\u800c\u56fe\u7247\u3001\u97f3\u9891\u3001\u77ed\u89c6\u9891\u7b49\u591a\u5a92\u4f53\u6587\u4ef6\u5f80\u5f80\u5360\u636e\u4e86 App \u5927\u90e8\u5206\u7a7a\u95f4\uff0c\u53ef\u4ee5\u628a\u8fd9\u4e9b\u6587\u4ef6\u4e0a\u4f20\u81f3\u4e91\u7aef\u5b58\u50a8\uff0c\u7a0b\u5e8f\u5305\u8fdb\u884c\u591a\u5a92\u4f53\u6587\u4ef6\u8bfb\u53d6\uff0c\u8ba9\u5c0f\u7a0b\u5e8f\u8f7b\u677e \u201c\u8df3\u8131\u201d 2MB \u7684\u5bb9\u91cf\u9650\u5236\u3002\u53c8\u62cd\u4e91\u5b58\u50a8\u62e5\u6709\u4e0a\u4f20\u52a0\u901f\uff0c\u4e0b\u8f7d\u52a0\u901f\uff0c\u4e0d\u9650\u91cf\u5b58\u50a8\u7b49\u529f\u80fd\uff0c\u6ee1\u8db3\u60a8\u6587\u4ef6\u7684\u65e0\u9650\u5b58\u50a8\u548c\u5feb\u901f\u8bfb\u53d6\u3002 \u53e6\u5916\uff0c\u901a\u8fc7\u53c8\u62cd\u4e91 \u5fae\u4fe1\u5c0f\u7a0b\u5e8f SDK \uff0c\u53ef\u8f7b\u677e\u5c06\u6587\u4ef6\u4e0a\u4f20\u5230\u53c8\u62cd\u4e91 \u5bf9\u8c61\u5b58\u50a8\u670d\u52a1 \u3002 5.1 \u4e0b\u8f7d\u5fae\u4fe1\u5c0f\u7a0b\u5e8f SDK \u70b9\u51fb \u53c8\u62cd\u4e91\u5fae\u4fe1\u5c0f\u7a0b\u5e8f SDK \u8fdb\u884c\u4e0b\u8f7d\u3002 5.2 \u51c6\u5907\u5de5\u4f5c 1) \u521b\u5efa\u4e91\u5b58\u50a8\u670d\u52a1\uff0c\u8be6\u7ec6\u64cd\u4f5c\u53c2\u89c1 \u57df\u540d\u63a5\u5165(\u53c8\u62cd\u5b58\u50a8\u6e90) \uff0c\u5982\u622a\u56fe\u6240\u793a\uff1a \u4ece\u622a\u56fe\u53ef\u4ee5\u5f97\u77e5\uff0c\u670d\u52a1\u540d\u79f0\u4e3a\uff08\u4e5f\u5373 bucket\uff09 video-upyun-com \u3002 2) \u4e3a\u5b58\u50a8\u670d\u52a1 video-upyun-com \u6388\u6743\u4e00\u4e2a\u64cd\u4f5c\u5458\uff0c\u8be6\u7ec6\u64cd\u4f5c\u53c2\u52a0\u6587\u6863 \u64cd\u4f5c\u5458\u4f7f\u7528 \uff0c\u914d\u7f6e\u53c2\u52a0\u622a\u56fe\u6240\u793a\uff1a \u4ece\u622a\u56fe\u53ef\u4ee5\u770b\u51fa\uff0c\u64cd\u4f5c\u5458\u540d\uff08\u4e5f\u5373 Operator \uff09\u4e3a wxj2017 \uff0c\u4e0e\u6b64\u540c\u65f6\u8bf7\u8bb0\u4f4f\u64cd\u4f5c\u5458\u5bc6\u7801\u3002 5.3 \u4e0a\u4f20\u548c\u90e8\u7f72\u4ee3\u7801 \u8be5\u6b65\u9aa4\uff0c\u9996\u5148\u9700\u8981\u4e0b\u8f7d\u5c0f\u7a0b\u5e8f SDK+Demo \uff0c\u83b7\u53d6\u5c0f\u7a0b\u5e8f Demo \u53ca\u6e90\u7801\u3002\u63a5\u4e0b\u6765\u7684\u64cd\u4f5c\u6b65\u9aa4\u4e3a\uff1a 1\uff09\u6253\u5f00\u7b2c\u56db\u6b65\u5b89\u88c5\u7684\u5fae\u4fe1\u5f00\u53d1\u8005\u5de5\u5177\uff0c\u70b9\u51fb\u3010\u5c0f\u7a0b\u5e8f\u9879\u76ee\u3011\u6a21\u5757\uff0c\u8fdb\u5165\u5982\u4e0b\u754c\u9762\uff1a 2) \u70b9\u51fb\u4e0a\u56fe\u5de6\u4e0b\u89d2\u7684\u3010\u6dfb\u52a0\u3011\u6309\u94ae\uff0c\u8fdb\u5165\u5982\u4e0b\u754c\u9762\uff0c\u8f93\u5165\u5c0f\u7a0b\u5e8f AppID\uff0c\u9879\u76ee\u76ee\u5f55\u9009\u62e9\u4e0a\u4e00\u6b65\u4e0b\u8f7d\u4e0b\u6765\u7684\u4ee3\u7801\u76ee\u5f55\uff1a \u6ce8\u610f\uff1aAppID \u53ef\u4ee5\u4ece\u5fae\u4fe1\u516c\u4f17\u53f7\u91cc\u9762\u83b7\u53d6\uff0c\u5982\u622a\u56fe\u6240\u793a\uff1a 3\uff09\u70b9\u51fb\u3010\u786e\u5b9a\u3011\u521b\u5efa\u5c0f\u7a0b\u5e8f\u9879\u76ee\uff0c\u8fdb\u5165\u5fae\u4fe1\u5f00\u53d1\u8005\u5de5\u5177\u754c\u9762\uff1a 5.4 \u57fa\u7840\u914d\u7f6e 1\uff09\u5b57\u6bb5\u66ff\u6362 \u60a8\u9700\u8981\u8fdb\u5165 /pages/index/index.js \u6587\u4ef6\uff0c\u5c06\u76f8\u5173\u5b57\u6bb5\u8fdb\u884c\u4fee\u6539\u548c\u66ff\u6362\uff0c\u53c2\u89c1\u5982\u4e0b\u622a\u56fe\uff1a const upyun = new Upyun({ bucket: 'sdkimg', operator: 'tester', getSignatureUrl: 'http://localhost:8080' }) \u9700\u8981\u66ff\u6362\u7684\u5b57\u6bb5\u4e3a\uff1a bucket:\u670d\u52a1\u540d\u79f0 operator\uff1a\u64cd\u4f5c\u5458 getSignatureUrl\uff1a\u8ba1\u7b97 signature \u7684\u670d\u52a1\u5668\u63a5\u53e3\u5730\u5740 upyun.upload({ localPath: imageSrc, remotePath: '/wxapp/demo', success: function (res) { console.log('uploadImage success, res is:', res) wx.showToast({ title: '\u4e0a\u4f20\u6210\u529f', icon: 'success', duration: 1000 }) self.setData({ imageSrc }) }, \u9700\u8981\u66ff\u6362\u7684\u5b57\u6bb5\u4e3a\uff1a remotePath\uff1a\u5728\u53c8\u62cd\u4e91\u5b58\u50a8\u7684\u6587\u4ef6\u8def\u5f84\u3002 2\uff09\u4e0a\u4f20\u57df\u540d\u914d\u7f6e \u767b\u5f55\u5fae\u4fe1\u5c0f\u7a0b\u5e8f\u8d26\u6237\u5e76\u914d\u7f6e uploadFile \u5408\u6cd5\u57df\u540d\u4e3a https://v0.api.upyun.com \uff0c\u914d\u7f6e\u5982\u622a\u56fe\u6240\u793a\uff1a 5.5 \u8ba4\u8bc1\u9274\u6743 \u4e91\u5b58\u50a8\u670d\u52a1\u7684\u8ba4\u8bc1\u9274\u6743\u8be6\u7ec6\u53c2\u89c1\u6587\u6863 \u8ba4\u8bc1\u9274\u6743 \u3002\u5173\u4e8e\u8ba4\u8bc1\u9274\u6743\u90e8\u5206\uff0c\u53ef\u901a\u8fc7\u5982\u4e0b\u4e09\u4e2a\u90e8\u5206\u6765\u5206\u5f00\u4ecb\u7ecd\uff1a 1\uff09\u5fae\u4fe1\u5c0f\u7a0b\u5e8f\u5ba2\u6237\u7aef\u4e0a\u4f20 data \u53c2\u6570 \u53ef\u4ee5\u76f4\u63a5\u53c2\u8003\u5fae\u4fe1\u5c0f\u7a0b\u5e8f /utils/upyun-wxapp-sdk.js \u4e2d\u7684\u4ee3\u7801\u3002\u4e0b\u9762\u4e3a\u90e8\u5206\u4ee3\u7801\u793a\u4f8b\uff1a function Upyun (options) { this.bucket = options.bucket this.operator = options.operator this.getSignatureUrl = options.getSignatureUrl } Upyun.prototype.upload = function (options) { var self = this if (!options.remotePath) { options.remotePath = options.localPath.split('//')[1] } var date = (new Date()).toGMTString() var opts = { 'save-key': options.remotePath, bucket: self.bucket, expiration: Math.round(new Date().getTime() / 1000) + 3600, date: date } var policy = Base64.encode(JSON.stringify(opts)) var data = [ 'POST', '/' + self.bucket, date, policy ].join('&') self.getSignature(data, function (err, signature) { if (err) { options.fail && options.fail(err) options.complete && options.complete(err) return } wx.uploadFile({ url: `https://v0.api.upyun.com/${self.bucket}`, filePath: options.localPath, name: 'file', formData: { authorization: `UPYUN ${self.operator}:${signature}`, policy: policy }, success: options.success, fail: options.fail, complete: options.complete }) }) } \u4ece\u4ee3\u7801\u4e2d\u53ef\u4ee5\u5f97\u77e5\uff0c\u9700\u8981\u83b7\u53d6\u7684\u5b57\u6bb5\u5305\u62ec\uff1a bucket\uff1a\u670d\u52a1\u540d\u79f0 save-key\uff1a\u6587\u4ef6\u4fdd\u5b58\u8def\u5f84\uff0c\u4e5f\u5373 remotePath expiration\uff1a\u8bf7\u6c42\u7684\u8fc7\u671f\u65f6\u95f4\uff0cUNIX UTC \u65f6\u95f4\u6233\uff0c\u5355\u4f4d\u79d2 date\uff1a\u8bf7\u6c42\u65e5\u671f\u65f6\u95f4\uff0cGMT \u683c\u5f0f\u5b57\u7b26\u4e32 Method\uff1a\u8fd9\u91cc\u4e3a POST URI\uff1a\u8bf7\u6c42\u8def\u5f84\uff0c\u672c\u4f8b\u4e3a / \u6700\u7ec8\u5ba2\u6237\u7aef\u751f\u6210 data \u53c2\u6570\u4f20\u9012\u7ed9\u670d\u52a1\u7aef\u7b7e\u540d\u63a5\u53e3\uff08 \u4e5f\u5373 getSignatureUrl \u5730\u5740 \uff09\uff0c\u7b7e\u540d\u670d\u52a1\u5668\u751f\u6210 signature \u5e76\u8fd4\u56de\u7ed9\u5ba2\u6237\u7aef\u3002 2\uff09\u7b7e\u540d\u670d\u52a1\u7aef\u751f\u6210 signature \u4e3a\u4e86\u8003\u8651\u5b89\u5168\u6027\uff0c\u64cd\u4f5c\u5458\u5bc6\u7801\u4e0d\u5b9c\u76f4\u63a5\u66b4\u9732\uff0c signature \u76f4\u63a5\u7531\u7b7e\u540d\u670d\u52a1\u7aef\u751f\u6210\uff0c\u5fae\u4fe1\u5c0f\u7a0b\u5e8f\u9700\u8981\u643a\u5e26 data \u53c2\u6570\uff0c\u5177\u4f53\u53c2\u89c1\u4e0a\u4e2a\u6b65\u9aa4\u7684\u4ee3\u7801\u3002 \u63a5\u53e3\u5730\u5740\u5b57\u6bb5\u4e3a getSignatureUrl \uff0c\u5728 5.4 \u57fa\u7840\u914d\u7f6e\u4e2d\u5df2\u7ecf\u6709\u4ecb\u7ecd\uff0c\u8be5\u63a5\u53e3\u63a5\u53d7 GET \u8bf7\u6c42\uff0c\u5e76\u63a5\u53d7\u4e00\u4e2a\u53c2\u6570 data \uff0c\u8ba1\u7b97\u5e76\u8fd4\u56de\u5e26\u6709 signature \u5b57\u6bb5\u7684\u54cd\u5e94\u3002 signature \u7684\u8ba1\u7b97\u516c\u5f0f\u662f\uff1a Base64 (HMAC-SHA1 (<md5_password>, <data>) \u5176\u4e2d\uff0cmd5_password \u662f\u64cd\u4f5c\u5458\u5bc6\u7801\u7684 MD5 \u503c\uff0c\u64cd\u4f5c\u5458\u5bc6\u7801\u8bf7\u59a5\u5584\u4fdd\u7ba1\uff0c\u4e0d\u5b9c\u66b4\u9732\u3002 3\uff09\u5ba2\u6237\u7aef\u5411\u53c8\u62cd\u4e91 API \u670d\u52a1\u7aef\u8fdb\u884c\u8ba4\u8bc1\u9274\u6743 \u6839\u636e\u4e0a\u9762\u4e24\u4e2a\u6b65\u9aa4\uff0c\u6700\u7ec8\u751f\u6210\u7b7e\u540d\u4fe1\u606f\uff0c\u8be6\u89c1\u4ee3\u7801\uff1a wx.uploadFile({ url: `https://v0.api.upyun.com/${self.bucket}`, filePath: options.localPath, name: 'file', formData: { authorization: `UPYUN ${self.operator}:${signature}`, policy: policy }, success: options.success, fail: options.fail, complete: options.complete }) 5.6 \u4e0a\u4f20\u4ee3\u7801 \u4ee5\u4e0a\u64cd\u4f5c\u6b65\u9aa4\u8fdb\u884c\u5b8c\u4e4b\u540e\uff0c\u60a8\u53ef\u4ee5\u4e0a\u4f20\u5fae\u4fe1\u5c0f\u7a0b\u5e8f\u4ee3\u7801\u81f3\u5fae\u4fe1\u5c0f\u7a0b\u5e8f\u670d\u52a1\u7aef\u3002\u8fdb\u5165\u5fae\u4fe1\u5f00\u53d1\u8005\u5de5\u5177\uff0c\u70b9\u51fb\u3010\u4e0a\u4f20\u3011\u6309\u94ae\uff0c\u586b\u5199\u7248\u672c\u53f7\u53ca\u9879\u76ee\u5907\u6ce8\u3002 \u8fdb\u5165\u5fae\u4fe1\u516c\u4f17\u5e73\u53f0\uff0c\u4f9d\u6b21\u8fdb\u5165\uff1a\u3010\u5f00\u53d1\u7ba1\u7406\u3011-\u300b\u3010\u5f00\u53d1\u7248\u672c\u3011-\u300b\u9009\u62e9\u4f53\u9a8c\u7248\u672c\u3002 \u8bbe\u7f6e\u9875\u9762\u8def\u5f84\u53ca\u53c2\u6570\uff0c\u5177\u4f53\u914d\u7f6e\u4e3a\uff1apages/index/index\uff0c\u63d0\u4ea4\u4e4b\u540e\uff0c\u8fdb\u5165\u5982\u4e0b\u9875\u9762\u3002 \u626b\u63cf\u4e8c\u7ef4\u7801\uff0c\u53ef\u4ee5\u8fdb\u5165\u5fae\u4fe1\u5c0f\u7a0b\u5e8f\u4f53\u9a8c\u7248\u3002","title":"5.\u53c8\u62cd\u4e91\u5c0f\u7a0b\u5e8f\u4e0a\u4f20\u65b9\u6848"},{"location":"api/small_program/#6-cdn","text":"\u4e3a\u4e86\u63d0\u5347\u5fae\u4fe1\u5c0f\u7a0b\u5e8f\u7684\u8bbf\u95ee\u4f53\u9a8c\uff0c\u8bbf\u95ee\u57df\u540d\u53ef\u4ee5\u8fdb\u884c CDN \u52a0\u901f\u3002\u53ef\u4ee5\u5728 5.2 \u4e2d\u521b\u5efa\u7684\u5b58\u50a8\u670d\u52a1\u4e0b\u76f4\u63a5\u7ed1\u5b9a\u52a0\u901f\u57df\u540d\u3002 6.1 \u7ed1\u5b9a\u52a0\u901f\u57df\u540d \u7ed3\u5408\u524d\u9762\u6b65\u9aa4\u7533\u8bf7\u7684\u8bbf\u95ee\u57df\u540d\u4ee5\u53ca\u5fae\u4fe1\u516c\u4f17\u5e73\u53f0\u8bbe\u7f6e\u7684\u901a\u4fe1\u57df\u540d\uff0c\u60a8\u53ef\u4ee5\u5c06\u8bbf\u95ee\u57df\u540d\u5728\u53c8\u62cd\u4e91 CDN \u5e73\u53f0\u8fdb\u884c\u914d\u7f6e\u3002\u8fdb\u5165\u7b2c\u4e94\u6b65\u5df2\u5f00\u901a\u7684\u670d\u52a1\uff0c\u76f4\u63a5\u8fdb\u5165\u529f\u80fd\u914d\u7f6e\u6a21\u5757\u8fdb\u884c\u52a0\u901f\u57df\u540d\u7684\u7ed1\u5b9a\uff0c\u8be6\u60c5\u53c2\u89c1 \u52a0\u901f\u57df\u540d \u3002 6.2 \u4e00\u952e\u5f00\u542f HTTPS \u52a0\u901f \u8fdb\u5165\u3010\u529f\u80fd\u914d\u7f6e\u3011\u6a21\u5757\uff0c\u627e\u5230 HTTPS \u914d\u7f6e\uff0c\u53ef\u4ee5\u4e00\u952e\u5f00\u542f HTTPS \u52a0\u901f\u3002\u66f4\u591a\u64cd\u4f5c\u6b65\u9aa4\u53c2\u89c1 HTTPS \u914d\u7f6e \u3002 6.3 \u5c06\u57df\u540d\u5207\u6362\u5230 CDN \u5177\u4f53\u64cd\u4f5c\u8bf7\u53c2\u89c1 CNAME \u914d\u7f6e \u3002","title":"6.\u5f00\u901a CDN \u670d\u52a1"},{"location":"api/small_program/#7","text":"7.1 \u56fe\u7247\u5904\u7406 \u7ed3\u5408\u56fe\u7247\u5904\u7406\u7684\u4f7f\u7528\u65b9\u5f0f\u6765\u5408\u7406\u4f7f\u7528\uff0c\u8bf7\u53c2\u89c1\u5982\u4e0b\u94fe\u63a5\u3002 URL \u4f5c\u56fe \u7f29\u7565\u56fe\u7248\u672c \u4e0a\u4f20\u9884\u5904\u7406\uff08\u540c\u6b65\uff09 \u4e0a\u4f20\u9884\u5904\u7406\uff08\u5f02\u6b65\uff09 7.2 \u97f3\u89c6\u9891\u5904\u7406 \u97f3\u89c6\u9891\u5904\u7406\u7684\u573a\u666f\u5305\u62ec\u5f02\u6b65\u97f3\u89c6\u9891\u5904\u7406\u548c\u540c\u6b65\u97f3\u89c6\u9891\u5904\u7406\uff0c\u8be6\u7ec6\u53c2\u89c1\u6587\u6863\uff1a \u5f02\u6b65\u97f3\u89c6\u9891\u5904\u7406 \u540c\u6b65\u89c6\u9891\u5904\u7406 \u540c\u6b65\u97f3\u9891\u5904\u7406","title":"7.\u5176\u4ed6\u670d\u52a1"},{"location":"cdn/","text":"\u4ea7\u54c1\u4ecb\u7ecd \u4ea7\u54c1\u6982\u8ff0 \uff5c \u4ea7\u54c1\u67b6\u6784 \uff5c \u4e3b\u8981\u529f\u80fd \uff5c \u4ea7\u54c1\u4f18\u52bf \uff5c \u5e94\u7528\u573a\u666f \uff5c \u8d44\u6e90\u5206\u5e03 \u5feb\u901f\u5165\u95e8 \u51c6\u5907\u5de5\u4f5c \uff5c \u5e10\u53f7\u6ce8\u518c \uff5c \u5e10\u53f7\u8ba4\u8bc1 \uff5c \u521b\u5efa\u670d\u52a1 \uff5c \u914d\u7f6e\u6d4b\u8bd5 \uff5c \u7f13\u5b58\u9a8c\u8bc1 \uff5c CNAME \u914d\u7f6e \u8d2d\u4e70\u6307\u5357 \u4ef7\u683c\u603b\u89c8 \uff5c \u6d41\u91cf\u5305\u8d2d\u4e70 \u670d\u52a1\u7ba1\u7406 \u57df\u540d\u63a5\u5165\uff08\u81ea\u6709\u6e90\uff09 \uff5c \u57df\u540d\u63a5\u5165\uff08\u53c8\u62cd\u5b58\u50a8\u6e90\uff09 \uff5c \u64cd\u4f5c\u7ba1\u7406 \u914d\u7f6e\u6307\u5357 \u57df\u540d\u7ba1\u7406 \uff5c \u56de\u6e90\u7ba1\u7406 \uff5c \u7f13\u5b58\u914d\u7f6e \uff5c \u6027\u80fd\u4f18\u5316 \uff5c HTTPS\u914d\u7f6e \uff5c \u8bbf\u95ee\u63a7\u5236 \uff5c \u56fe\u7247\u5904\u7406 \uff5c \u5176\u4ed6\u529f\u80fd \u8fb9\u7f18\u89c4\u5219 \u529f\u80fd\u6982\u8ff0 \uff5c \u8bed\u6cd5\u89c4\u5219 \uff5c \u914d\u7f6e\u6307\u5357 \uff5c \u7ecf\u5178\u6848\u4f8b \u7edf\u8ba1\u5206\u6790 \u7edf\u8ba1\u5206\u6790 \uff5c \u6027\u80fd\u76d1\u63a7 \u5237\u65b0\u9884\u70ed URL\u5237\u65b0 \uff5c \u89c4\u5219\u5237\u65b0 \uff5c URL\u9884\u70ed \uff5c \u64cd\u4f5c\u8bb0\u5f55 \u65e5\u5fd7\u7ba1\u7406 \u65e5\u5fd7\u5206\u6790 \uff5c \u65e5\u5fd7\u4e0b\u8f7d \u8bc1\u4e66\u670d\u52a1 \u4ea7\u54c1\u4ecb\u7ecd \uff5c \u540d\u8bcd\u89e3\u91ca \uff5c \u4ea7\u54c1\u529f\u80fd \uff5c \u4ea7\u54c1\u4f18\u52bf \uff5c \u4f7f\u7528\u573a\u666f \uff5c \u7248\u672c\u8fed\u4ee3 \uff5c \u8d2d\u4e70\u6307\u5bfc \uff5c \u5feb\u901f\u5165\u95e8 \uff5c \u6ce8\u610f\u4e8b\u9879 \u8f85\u52a9\u5de5\u5177 IP\u68c0\u6d4b\u5de5\u5177 \uff5c CDN\u5065\u5eb7\u68c0\u6d4b \u5e38\u89c1\u95ee\u9898 \u7f13\u5b58\u76f8\u5173 \uff5c \u5237\u65b0\u76f8\u5173 \uff5c \u6027\u80fd\u76f8\u5173 \uff5c \u529f\u80fd\u76f8\u5173 \uff5c \u5b89\u5168\u76f8\u5173 \uff5c \u8d44\u6e90\u76f8\u5173 \uff5c \u8bc1\u4e66\u76f8\u5173","title":"\u5185\u5bb9\u603b\u89c8"},{"location":"cdn/advanced/","text":"\u8bbf\u95ee\u63a7\u5236 \u00b6 IP \u7981\u7528 \u5047\u5982\u9700\u8981\u7981\u7528\u67d0\u4e2a IP \u6216\u8005\u67d0\u4e2a IP \u6bb5\uff0c\u5219\u9700\u8981\u8fdb\u884c\u8be5\u529f\u80fd\u914d\u7f6e\u3002\u7279\u522b\u5730\uff0cIP \u9632\u76d7\u94fe\u76ee\u524d\u6682\u65f6\u53ea\u652f\u6301\u9ed1\u540d\u5355\u903b\u8f91\u3002 \u914d\u7f6e\u5f15\u5bfc \u767b\u9646 \u53c8\u62cd\u4e91\u7ba1\u7406\u63a7\u5236\u53f0 \uff0c\u4f9d\u6b21\u8fdb\u5165\uff1a\u670d\u52a1 > \u529f\u80fd\u914d\u7f6e > \u9632\u76d7\u94fe > IP \u7981\u7528\uff0c\u70b9\u51fb\u300c\u7ba1\u7406\u300d\u6309\u94ae\u5373\u53ef\u5f00\u59cb\u914d\u7f6e\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u6ce8\u610f\u4e8b\u9879\uff1a 1.\u652f\u6301 * \u901a\u914d\u7b26\uff0c\u5982 10.11.12.* \u5c06\u7981\u6b62 10.11.12.0~10.11.12.255 \u7684 IP \u8bbf\u95ee 2.\u7981\u7528 IP \u4e0a\u9650 100 \u6761\uff0c\u88ab\u7981\u6b62\u7684 IP \u8bbf\u95ee\u8d44\u6e90\u65f6\uff0c\u5c06\u63d0\u793a 403 \u5730\u533a\u8bbf\u95ee\u9650\u5236 \u5730\u533a\u8bbf\u95ee\u9650\u5236\u662f\u6307\u6839\u636e\u52a0\u901f\u7f51\u7ad9\u7684\u9700\u6c42\uff0c\u5141\u8bb8\u6216\u7981\u6b62\u7279\u5b9a\u533a\u57df\u7684\u7ec8\u7aef\u7528\u6237\u5bf9\u7f51\u7ad9\u8d44\u6e90\u7684\u8bbf\u95ee\u3002\u5373\u7f51\u7ad9\u6307\u5b9a\u5730\u533a\uff0c\u5141\u8bb8\u8be5\u5730\u533a\u7ec8\u7aef\u7528\u6237\u8bbf\u95ee\uff0c\u800c\u9650\u5236\u5176\u4ed6\u5730\u533a\u7528\u6237\u8bbf\u95ee\uff0c\u6216\u8005\u76f8\u53cd\u3002 \u914d\u7f6e\u5f15\u5bfc \u767b\u9646 \u53c8\u62cd\u4e91\u7ba1\u7406\u63a7\u5236\u53f0 \uff0c\u4f9d\u6b21\u8fdb\u5165\uff1a\u670d\u52a1 > \u529f\u80fd\u914d\u7f6e > \u9632\u76d7\u94fe > \u5730\u533a\u8bbf\u95ee\u9650\u5236\uff0c\u70b9\u51fb\u300c\u7ba1\u7406\u300d\u6309\u94ae\u5373\u53ef\u5f00\u59cb\u914d\u7f6e\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u8be6\u7ec6\u914d\u7f6e\u8bf7\u53c2\u89c1 \u5730\u533a\u8bbf\u95ee\u9650\u5236\u7528\u6237\u6307\u5357 \u3002 Referer \u9632\u76d7\u94fe \u5f53\u8bf7\u6c42\u53d1\u9001\u5230 CDN \u670d\u52a1\u5668\u540e\uff0cCDN \u670d\u52a1\u5668\u68c0\u67e5 HTTP \u8bf7\u6c42\u5934\u4e2d\u7684 Referer \u5b57\u6bb5\u7684\u4fe1\u606f\uff0c\u7981\u6b62\u6216\u8005\u5141\u8bb8\u7b26\u5408\u7279\u5b9a\u89c4\u5219\u7684 Referer \u7684\u8bf7\u6c42\u3002 \u914d\u7f6e\u5f15\u5bfc \u767b\u9646 \u53c8\u62cd\u4e91\u7ba1\u7406\u63a7\u5236\u53f0 \uff0c\u4f9d\u6b21\u8fdb\u5165\uff1a\u670d\u52a1 > \u529f\u80fd\u914d\u7f6e > \u9632\u76d7\u94fe > \u57df\u540d\u9632\u76d7\u94fe\uff0c\u70b9\u51fb\u300c\u7ba1\u7406\u300d\u6309\u94ae\u5373\u53ef\u5f00\u59cb\u914d\u7f6e\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u6ce8\u610f\u4e8b\u9879\uff1a 1.\u767d\u540d\u5355\uff1a\u4ec5\u5141\u8bb8\u540d\u5355\u4e2d\u7684\u57df\u540d\u7f51\u7ad9\u8bbf\u95ee\u6587\u4ef6\uff0c\u5176\u4ed6\u57df\u540d\u7f51\u7ad9\u90fd\u4e0d\u5141\u8bb8\u8bbf\u95ee 2.\u9ed1\u540d\u5355\uff1a\u4ec5\u7981\u6b62\u540d\u5355\u4e2d\u7684\u57df\u540d\u7f51\u7ad9\u8bbf\u95ee\u6587\u4ef6\uff0c\u5176\u4ed6\u57df\u540d\u7f51\u7ad9\u90fd\u5141\u8bb8\u8bbf\u95ee 3.\u652f\u6301 * \u901a\u914d\u7b26\uff0c\u6bd4\u5982\u767d\u540d\u5355\u7684 *upyun.com \u5c06\u5141\u8bb8 www.upyun.com \u3001 abcupyun.com \u7b49\u7f51\u7ad9\u8bbf\u95ee 4.\u7279\u522b\u5730\uff0c\u9ed8\u8ba4 \u5141\u8bb8 Referer \u4e3a\u7a7a \u8fd9\u79cd\u60c5\u51b5\u4f1a\u7ed5\u8fc7\u9632\u76d7\u94fe\u7684\u903b\u8f91\uff0c\u82e5\u8fd9\u91cc\u542f\u7528 \u7981\u6b62 Referer \u4e3a\u7a7a \uff0c\u90a3\u4e48\u8fd9\u7c7b\u8bf7\u6c42\u5c31\u76f4\u63a5\u88ab\u7981\u6b62\u8bbf\u95ee\u4e86 User-Agent \u9632\u76d7\u94fe \u53ea\u5141\u8bb8\u7279\u5b9a\u7684\u6d4f\u89c8\u5668\u6216\u8005\u5e26\u6709\u7279\u6b8a User-Agent \u6807\u8bc6\u7684\u4e13\u5c5e\u7684\u5ba2\u6237\u7aef\u8fdb\u884c\u8bbf\u95ee\u3002\u76ee\u524d\u6682\u65f6\u53ea\u652f\u6301\u767d\u540d\u5355\u903b\u8f91\u3002 \u914d\u7f6e\u5f15\u5bfc \u767b\u9646 \u53c8\u62cd\u4e91\u7ba1\u7406\u63a7\u5236\u53f0 \uff0c\u4f9d\u6b21\u8fdb\u5165\uff1a\u670d\u52a1 > \u529f\u80fd\u914d\u7f6e > \u9632\u76d7\u94fe > \u5ba2\u6237\u7aef\u9632\u76d7\u94fe\uff0c\u70b9\u51fb\u300c\u7ba1\u7406\u300d\u6309\u94ae\u5373\u53ef\u5f00\u59cb\u914d\u7f6e\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u6ce8\u610f\u4e8b\u9879\uff1a 1.\u6dfb\u52a0\u6570\u91cf\u4e0a\u9650 50 \u6761 2. User-Agent \u4e0d\u533a\u5206\u5927\u5c0f\u5199\uff0c\u4e14\u652f\u6301 * \u901a\u914d\u7b26 3. User-Agent \u9632\u76d7\u94fe\u7684\u4f18\u5148\u7ea7\u9ad8\u4e8e Referer \u9632\u76d7\u94fe Token \u9632\u76d7\u94fe \u53ef\u8bbe\u7f6e\u7b7e\u540d\u8fc7\u671f\u65f6\u95f4\u6765\u63a7\u5236\u6587\u4ef6\u7684\u8bbf\u95ee\u65f6\u9650\u3002Token \u9632\u76d7\u94fe\u7684\u76ee\u7684\u662f\u4f7f\u5f97\u6bcf\u4e2a\u8bf7\u6c42\u7684 URL \u90fd\u5177\u6709\u4e00\u5b9a\u7684\u201c\u65f6\u6548\u6027\u201d\uff0c\u56e0\u6b64 URL \u672c\u8eab\u9700\u8981\u643a\u5e26\u8fc7\u671f\u65f6\u95f4\u76f8\u5173\u7684\u4fe1\u606f\uff0c\u540c\u65f6\u8fd8\u9700\u8981\u786e\u4fdd\u8fd9\u4e2a\u8fc7\u671f\u65f6\u95f4\uff0c\u4e0d\u80fd\u88ab\u6076\u610f\u4fee\u6539\uff0c\u56e0\u6b64\u91c7\u7528 md5 \u7b97\u6cd5\uff0c\u5c06\u5bc6\u6587\uff08\u901a\u5e38\u662f\u4e00\u4e2a\u666e\u901a\u5b57\u7b26\u4e32\uff09\u3001\u8fc7\u671f\u65f6\u95f4\u3001\u6587\u4ef6\u8def\u5f84\uff08\u8fc7\u671f\u65f6\u95f4\u548c\u6587\u4ef6\u8def\u5f84\u901a\u5e38\u662f\u6709\u5bf9\u5e94\u5173\u7cfb\u7684\uff0c\u56e0\u6b64\u4e5f\u53c2\u4e0e md5 \u7684\u8ba1\u7b97\uff09\u7b49\u4fe1\u606f\u6240\u8ba1\u7b97\u7684 md5 \u503c\u4e5f\u52a0\u5165\u5230 URL \u4e2d\uff0cCDN \u8282\u70b9\u5728\u9a8c\u8bc1\u8bf7\u6c42\u65f6\uff0c\u9664\u4e86\u9a8c\u8bc1\u8fc7\u671f\u65f6\u95f4\uff0c\u540c\u65f6\u8fd8\u4f1a\u9a8c\u8bc1\u8be5 md5 \u503c\u662f\u5426\u5339\u914d\uff0c\u5bf9\u4e8e\u4e0d\u5339\u914d\u7684 md5\uff0c\u8bf4\u660e URL \u88ab\u7be1\u6539\uff0c\u5373\u4f7f\u8bf7\u6c42\u672a\u8fc7\u671f\u4e5f\u9700\u8981\u7981\u6b62\u670d\u52a1\u3002 \u5b9e\u73b0\u539f\u7406 \u914d\u7f6e\u5f15\u5bfc \u767b\u9646 \u53c8\u62cd\u4e91\u7ba1\u7406\u63a7\u5236\u53f0 \uff0c\u4f9d\u6b21\u8fdb\u5165\uff1a\u670d\u52a1 > \u529f\u80fd\u914d\u7f6e > \u9632\u76d7\u94fe > Token \u9632\u76d7\u94fe\uff0c\u70b9\u51fb\u300c\u7ba1\u7406\u300d\u6309\u94ae\u5373\u53ef\u5f00\u59cb\u914d\u7f6e\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u7b7e\u540d\u65b9\u5f0f \u7b7e\u540d\uff1a _upt = MD5(token \u5bc6\u94a5 & etime & URI){\u4e2d\u95f4 8 \u4f4d} + etime \u53c2\u6570\uff1a token \u5bc6\u94a5\uff1a\u7528\u6237\u6240\u586b\u7684\u5bc6\u94a5 etime\uff1a\u8fc7\u671f\u65f6\u95f4\uff0c\u5fc5\u987b\u662f UNIX TIME \u683c\u5f0f\uff0c\u5982\uff1a 1378092990 URI\uff1a\u8bf7\u6c42\u5730\u5740\uff08\u4e0d\u5305\u542b?\u53ca\u540e\u9762\u7684 Query String\uff09\uff0c\u5982\uff1a /dir/pic.jpg \u793a\u4f8b \u8bbe\u7f6e\u56fe\u7247\u94fe\u63a5 http://<bucket>/dir/pic.jpg 10 \u5206\u949f\u6709\u6548 \u5f53\u524d Unix \u65f6\u95f4 = 1370000000 etime = 1370000000 + 600 = 1370000600 URI = '/dir/pic.jpg' sign = MD5(token \u5bc6\u94a5&etime&URI) = xxxxxxxxxxxxabcdefghyyyyyyyyyyyy _upt = MD5(token \u5bc6\u94a5&etime&URI){\u4e2d\u95f4 8 \u4f4d} + etime = abcdefgh1370000600 \u8be5\u7b7e\u540d\u62fc\u63a5\u5728 URL \u5730\u5740\u6216\u7528\u6237 Cookie \u4e2d\uff0c\u5747\u53ef\u8d77\u5230\u9632\u76d7\u94fe\u4f5c\u7528: URL: http://<bucket>/dir/pic.jpg?_upt=abcdefgh1370000600 Cookie: _upt=abcdefgh1370000600; \u4ee3\u7801\u5b9e\u4f8b (PHP) <?php $etime = time() + 600; // \u6388\u6743\u5341\u5206\u949f\u540e\u8fc7\u671f $key = 'token \u5bc6\u94a5'; // token \u9632\u76d7\u94fe\u5bc6\u94a5 $path = '/dir/pic.jpg'; // \u56fe\u7247\u76f8\u5bf9\u8def\u5f84 $sign = substr(md5($key.'&'.$etime.'&'.$path), 12,8).$etime; ?> \u56de\u6e90\u9274\u6743 \u56de\u6e90\u9274\u6743\u662f\u4e00\u79cd\u9ad8\u7ea7\u7684\u9632\u76d7\u94fe\u65b9\u5f0f\uff0c\u9002\u7528\u4e8e\u5bf9\u9632\u76d7\u94fe\u6709\u5f88\u9ad8\u5b9e\u65f6\u6027\u8981\u6c42\u7684\u573a\u666f\u3002\u5927\u6982\u539f\u7406\u662f CDN \u8fb9\u7f18\u8282\u70b9\u6bcf\u6b21\u63a5\u53d7\u5230\u8bf7\u6c42\u4e4b\u540e\uff0c\u90fd\u9700\u8981\u56de\u5ba2\u6237\u6e90\u7ad9\u8fdb\u884c\u9a8c\u8bc1\uff0c\u9a8c\u8bc1\u901a\u8fc7\u4e4b\u540e\u624d\u8ba4\u4e3a\u662f\u5408\u6cd5\u8bf7\u6c42\uff0c\u8fd9\u6837 CDN \u53ef\u4ee5\u7ee7\u7eed\u63d0\u4f9b\u670d\u52a1\u3002 \u914d\u7f6e\u5f15\u5bfc \u767b\u9646 \u53c8\u62cd\u4e91\u7ba1\u7406\u63a7\u5236\u53f0 \uff0c\u4f9d\u6b21\u8fdb\u5165\uff1a\u670d\u52a1 > \u529f\u80fd\u914d\u7f6e > \u9632\u76d7\u94fe > \u56de\u6e90\u9274\u6743\uff0c\u70b9\u51fb\u300c\u7ba1\u7406\u300d\u6309\u94ae\u5373\u53ef\u5f00\u59cb\u914d\u7f6e\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u8be6\u7ec6\u914d\u7f6e\u8bf7\u53c2\u89c1 \u56de\u6e90\u9274\u6743\u7528\u6237\u6307\u5357 \u3002 \u5916\u94fe\u529f\u80fd \u901a\u8fc7\u7ba1\u7406\u540e\u53f0\uff0c\u53ef\u4ee5\u4e00\u952e\u7981\u6b62\u6574\u4e2a\u670d\u52a1\u57df\u540d\u4e0b\u6240\u6709\u8d44\u6e90\u7684\u8bbf\u95ee\uff0c\u7279\u522b\u5730\uff0c\u6b64\u65f6\u4f1a\u54cd\u5e94 405 \u72b6\u6001\u7801\u7ed9\u5ba2\u6237\u7aef\u3002 \u914d\u7f6e\u5f15\u5bfc \u767b\u9646 \u53c8\u62cd\u4e91\u7ba1\u7406\u63a7\u5236\u53f0 \uff0c\u4f9d\u6b21\u8fdb\u5165\uff1a\u670d\u52a1 > \u529f\u80fd\u914d\u7f6e > \u57fa\u7840\u914d\u7f6e > \u5916\u94fe\u529f\u80fd\uff0c\u5173\u95ed\u5916\u94fe\u529f\u80fd\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u6ce8\u610f\u4e8b\u9879\uff1a 1.\u670d\u52a1\u521b\u5efa\u5b8c\u6bd5\u4e4b\u540e\uff0c\u5916\u94fe\u529f\u80fd\u9ed8\u8ba4\u5f00\u542f 2.\u5173\u95ed\u5916\u94fe\u529f\u80fd\uff0c\u4f1a\u5bfc\u81f4\u8d44\u6e90\u65e0\u6cd5\u8bbf\u95ee\uff0c\u8bf7\u8c28\u614e\u64cd\u4f5c \u5b89\u5168\u9632\u62a4 \u00b6 WAF \u9632\u62a4 WAF \u9632\u62a4\u4e3b\u8981\u9632\u62a4\u7684\u662f\u6765\u81ea\u5bf9\u7f51\u7ad9\u6e90\u7ad9\u7684\u52a8\u6001\u6570\u636e\u653b\u51fb\uff0c\u53ef\u9632\u62a4\u7684\u653b\u51fb\u7c7b\u578b\u5305\u62ec SQL \u6ce8\u5165\u3001XSS \u653b\u51fb\u3001CSRF \u653b\u51fb\u3001\u6076\u610f\u722c\u866b\u3001\u626b\u63cf\u5668\u3001\u8fdc\u7a0b\u6587\u4ef6\u5305\u542b\u7b49\u653b\u51fb\u3002 \u914d\u7f6e\u5f15\u5bfc \u767b\u9646 \u53c8\u62cd\u4e91\u7ba1\u7406\u63a7\u5236\u53f0 \uff0c\u4f9d\u6b21\u8fdb\u5165\uff1a\u670d\u52a1 > \u529f\u80fd\u914d\u7f6e > \u4e91\u5b89\u5168 > WAF \u9632\u62a4\uff0c\u5f00\u542f WAF \u4fdd\u62a4\u5373\u53ef\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u6ce8\u610f\u4e8b\u9879\uff1a\u9002\u7528\u4e8e\u52a8\u6001\u8d44\u6e90\u52a0\u901f\uff0c\u5168\u9759\u6001\u8d44\u6e90\u52a0\u901f\u5efa\u8bae\u4e0d\u542f\u7528\u8be5\u529f\u80fd CC \u9632\u62a4 CC \u9632\u62a4\u4e3b\u8981\u662f\u9488\u5bf9\u7f51\u7edc\u5b89\u5168\u9886\u57df\u4e2d\u7684 CC \u653b\u51fb\u800c\u8fdb\u884c\u7684\u4e00\u79cd\u5e94\u7528\u5c42\u653b\u51fb\u9632\u62a4\uff0c\u8be5\u529f\u80fd\u901a\u8fc7\u81ea\u5b9a\u4e49\u5339\u914d\u89c4\u5219\u5bf9\u76ee\u6807\u8d44\u6e90\u8fdb\u884c\u76d1\u63a7\uff0c\u5f53\u8bf7\u6c42\u9891\u7387\u8fbe\u5230\u89e6\u53d1\u9891\u7387\u65f6\u5bf9\u7591\u4f3c\u653b\u51fb\u8bf7\u6c42\u8fdb\u884c\u6821\u9a8c\uff0c\u6821\u9a8c\u901a\u8fc7\u5219\u5141\u8bb8\u8bbf\u95ee\uff1b\u6821\u9a8c\u4e0d\u901a\u8fc7\uff0c\u5219\u76f4\u63a5\u7981\u6b62\u8bbf\u95ee\u3002 \u914d\u7f6e\u5f15\u5bfc \u767b\u9646 \u53c8\u62cd\u4e91\u7ba1\u7406\u63a7\u5236\u53f0 \uff0c\u4f9d\u6b21\u8fdb\u5165\uff1a\u670d\u52a1 > \u529f\u80fd\u914d\u7f6e > \u4e91\u5b89\u5168 > CC \u9632\u62a4\uff0c\u70b9\u51fb\u300c\u7ba1\u7406\u300d\u6309\u94ae\u5373\u53ef\u5f00\u59cb\u914d\u7f6e\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u5177\u4f53\u914d\u7f6e\u53ef\u4ee5\u8d70\u5982\u4e0b\u56db\u4e2a\u6b65\u9aa4\uff1a \u7b2c\u4e00\u6b65\uff1a\u6dfb\u52a0\u9632\u62a4\u7b56\u7565\uff0c\u8bbe\u7f6e URI \u5339\u914d\u89c4\u5219\uff0c\u4f8b\u5982\uff1a/image/*.jpg \u7b2c\u4e8c\u6b65\uff1a\u586b\u5199\u8bbf\u95ee\u9891\u7387\u9608\u503c\uff0c\u4f8b\u5982\uff1a500\u6b21/\u5206\u949f\uff0c\u5728\u667a\u80fd\u9632\u62a4\u6a21\u5f0f\u4e0b\u624d\u6709\u6548 \u7b2c\u4e09\u6b65\uff1a\u8bbe\u7f6e IP \u767d\u540d\u5355\uff0c\u5982\u679c\u8981\u7ed5\u8fc7 CC \u9632\u62a4\u7b56\u7565\uff0c\u6b64\u5904\u53ef\u8fdb\u884c\u8bbe\u7f6e \u7b2c\u56db\u6b65\uff1a\u9009\u62e9 CC \u9632\u62a4\u6a21\u5f0f\uff0c\u5305\u62ec\u5f3a\u5236\u9632\u62a4\u3001\u667a\u80fd\u9632\u62a4\u3001\u6682\u505c\u9632\u62a4\uff0c\u5f53\u6b63\u5728\u906d\u53d7\u653b\u51fb\u65f6\uff0c\u5efa\u8bae\u9009\u62e9\u5f3a\u5236\u9632\u62a4\u6a21\u5f0f \u6ce8\u610f\u4e8b\u9879\uff1a 1.CC \u9632\u62a4\u5206\u4e3a\u5f3a\u5236\u9632\u62a4\u548c\u667a\u80fd\u9632\u62a4\u4e24\u79cd\u6a21\u5f0f\uff0c\u5728\u667a\u80fd\u9632\u62a4\u6a21\u5f0f\u4e0b\uff0c\u5219\u4f1a\u5339\u914d URI \u89c4\u5219\uff0c\u8bf7\u6c42\u4e00\u65e6\u8fbe\u5230\u8bbf\u95ee\u9891\u7387\u9608\u503c\uff0c\u5219\u4f1a\u89e6\u53d1 JavaScript \u6821\u9a8c\uff0c\u6821\u9a8c\u901a\u8fc7\u5219\u53ef\u6b63\u5e38\u8bbf\u95ee\uff0c\u6821\u9a8c\u4e0d\u901a\u8fc7\u5219\u76f4\u63a5\u62d2\u7edd\u3002\u5728\u5f3a\u5236\u9632\u62a4\u6a21\u5f0f\u4e0b\uff0c\u5219\u4f1a\u5ffd\u7565\u8bbf\u95ee\u9891\u7387\u9608\u503c\uff0c\u76f4\u63a5\u89e6\u53d1 JavaScript \u6821\u9a8c\uff0c\u4ee5\u6b64\u7c7b\u63a8 2.\u5728\u667a\u80fd\u9632\u62a4\u6a21\u5f0f\u4e0b\uff0c\u8bbf\u95ee\u9608\u503c\u8bbe\u7f6e\u5f97\u8fc7\u4f4e\uff0c\u53ef\u80fd\u4e0d\u4f1a\u89e6\u53d1 JavaScript \u6821\u9a8c\uff0c\u5efa\u8bae\u9608\u503c\u8bbe\u7f6e\u9ad8\u4e00\u4e9b HTTP \u8bf7\u6c42\u5927\u5c0f\u9650\u5236 \u53ef\u9650\u5236\u5355\u6b21\u8bf7\u6c42\u4f53\u7684\u5185\u5bb9\u5927\u5c0f\uff0c\u80fd\u6709\u6548\u4fdd\u8bc1\u8bf7\u6c42\u7684\u5b89\u5168\u6027\uff0c\u9ed8\u8ba4\u662f 512M \u3002 \u914d\u7f6e\u5f15\u5bfc \u767b\u9646 \u53c8\u62cd\u4e91\u7ba1\u7406\u63a7\u5236\u53f0 \uff0c\u4f9d\u6b21\u8fdb\u5165\uff1a\u670d\u52a1 > \u529f\u80fd\u914d\u7f6e > \u4e91\u5b89\u5168 > HTTP \u8bf7\u6c42\u5927\u5c0f\u9650\u5236\uff0c\u70b9\u51fb\u300c\u7ba1\u7406\u300d\u6309\u94ae\u5373\u53ef\u5f00\u59cb\u914d\u7f6e\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff1a IP \u8bbf\u95ee\u9650\u5236 \u53ef\u6839\u636e\u5355\u4e2a IP \u7684\u8bbf\u95ee\u9891\u7387\u6765\u8fdb\u884c\u9632\u5fa1\uff0c\u5728\u6b63\u5e38\u7684\u60c5\u51b5\u4e0b\uff0c\u7528\u6237\u8bbf\u95ee\u7f51\u7ad9\u662f\u6709\u4e00\u5b9a\u9891\u7387\u7684\uff0c\u53ef\u901a\u8fc7\u5339\u914d\u81ea\u5b9a\u4e49\u7684\u9650\u5236\u89c4\u5219\u5bf9\u5355\u4e2a IP \u8fdb\u884c\u76d1\u63a7\uff0c\u5c06\u8d85\u8fc7\u8bbe\u5b9a\u9608\u503c\u7684 IP \u7684\u8bbf\u95ee\u8fdb\u884c\u62e6\u622a\u6216\u8005\u5ef6\u8fdf\u54cd\u5e94\uff0c\u4ece\u800c\u8fbe\u5230\u5b89\u5168\u9632\u62a4\u6548\u679c\u3002 \u914d\u7f6e\u5f15\u5bfc \u767b\u9646 \u53c8\u62cd\u4e91\u7ba1\u7406\u63a7\u5236\u53f0 \uff0c\u4f9d\u6b21\u8fdb\u5165\uff1a\u670d\u52a1 > \u529f\u80fd\u914d\u7f6e > \u4e91\u5b89\u5168 > IP \u8bbf\u95ee\u9650\u5236\uff0c\u70b9\u51fb\u300c\u7ba1\u7406\u300d\u6309\u94ae\u5373\u53ef\u5f00\u59cb\u914d\u7f6e\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u914d\u7f6e\u6b65\u9aa4\u5982\u4e0b\uff1a \u7b2c\u4e00\u6b65\uff1a\u586b\u5199\u8bbf\u95ee\u7684\u8d44\u6e90\u8def\u5f84\u89c4\u5219\uff0c\u652f\u6301 \uff0a \u901a\u914d\u7b26\uff0c\u5982\uff1a /a/*.mp4 \u3001 /b/*.flv \u7b2c\u4e8c\u6b65\uff1a\u9009\u62e9\u9650\u5236\u65b9\u5f0f\uff1a \u76f4\u63a5\u7981\u6b62 \u6216 \u5ef6\u8fdf\u54cd\u5e94 \u7b2c\u4e09\u6b65\uff1a\u8bbe\u7f6e\u8bbf\u95ee\u9891\u7387\u53ca\u76f8\u5e94\u7684\u65f6\u95f4\u9650\u5236 \u6ce8\u610f\u4e8b\u9879\uff1a 1.\u76f4\u63a5\u7981\u6b62\u3001\u5ef6\u65f6\u54cd\u5e94\u90fd\u662f\u4ee5 60s \u4e3a\u4e00\u4e2a\u8ba1\u6570\u5468\u671f\uff0c\u5373\u4e0a\u4e00\u4e2a 60s \u7684\u8ba1\u6570\u4e0d\u4f1a\u7d2f\u8ba1\u53e0\u52a0\u5230\u4e0b\u4e00\u4e2a 60s \u5185 2.\u7981\u6b62\u8bbf\u95ee\u65f6\u95f4\u7684\u8bbe\u7f6e\u9700\u5927\u4e8e\u7b49\u4e8e 60s\uff0c\u5ef6\u8fdf\u54cd\u5e94\u65f6\u95f4\u7684\u8bbe\u7f6e\u9700\u5c0f\u4e8e\u7b49\u4e8e 30s 3.\u8bf7\u52ff\u5c06\u8bbf\u95ee\u9891\u7387\u503c\u8bbe\u7f6e\u8fc7\u4f4e\uff0c\u4ee5\u514d\u5f71\u54cd\u6b63\u5e38\u7528\u6237\u7684\u8bbf\u95ee\u8bf7\u6c42 \u8be6\u7ec6\u914d\u7f6e\u8bf7\u53c2\u89c1 IP \u8bbf\u95ee\u9650\u5236\u7528\u6237\u6307\u5357 \u3002 HTTPS \u914d\u7f6e \u00b6 \u53c8\u62cd\u4e91 HTTPS \u52a0\u901f\u670d\u52a1\u5efa\u7acb\u5728\u81ea\u4e3b\u7814\u53d1\u7684\u5185\u5bb9\u5206\u53d1\u7f51\u7edc\u57fa\u7840\u4e4b\u4e0a\uff0c\u5168\u9762\u652f\u6301\u4e86 HTTPS \u534f\u8bae\u52a0\u901f\u3002\u901a\u8fc7\u4f1a\u8bdd\u91cd\u7528\u53ca\u4f1a\u8bdd\u4fdd\u6301\u3001\u5728\u7ebf\u8bc1\u4e66\u72b6\u6001\u68c0\u67e5\u3001\u534f\u8bae\u4f18\u5316\u3001SSL \u534f\u8bae\u63e1\u624b\u4f18\u5316\u3001HTTP/2 \u7b49\u6280\u672f\u624b\u6bb5\uff0c\u5168\u9762\u63d0\u5347\u4e86 HTTPS \u534f\u8bae\u52a0\u901f\u6027\u80fd\u3002 \u914d\u7f6e\u5f15\u5bfc \u00b6 \u7b2c\u4e00\u6b65\uff1a\u4f9d\u6b21\u8fdb\u5165 \u670d\u52a1 > \u529f\u80fd\u914d\u7f6e > HTTPS, \u70b9\u51fb \u7ba1\u7406 \u5373\u53ef\u5f00\u59cb\u914d\u7f6e\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u7b2c\u4e8c\u6b65\uff1a\u53ef\u9488\u5bf9\u5355\u4e2a\u57df\u540d\u9009\u62e9\u76f8\u5e94\u7684\u8bc1\u4e66\uff0c\u7136\u540e\u4fdd\u5b58\u3002\u5982\u679c\u65e0\u8bc1\u4e66\u53ef\u9009\uff0c\u53ef\u524d\u5f80 SSL \u8bc1\u4e66\u670d\u52a1 \u5e73\u53f0\u6dfb\u52a0\u57df\u540d\u7684\u81ea\u6709\u8bc1\u4e66\uff1b\u7528\u6237\u4e5f\u53ef\u76f4\u63a5\u5728 SSL \u8bc1\u4e66\u7533\u8d2d \u5e73\u53f0\u7533\u8d2d Symantec\u3001GeoTrust\u3001TrustAsia\u3001Let\u2019s Encrypt \u7684\u5404\u7c7b SSL \u8bc1\u4e66\uff0c\u5176\u4e2d TrustAsia\u3001Let\u2019s Encrypt \u7684 DV SSL \u5355\u57df\u540d\u8bc1\u4e66\u53ef\u514d\u8d39\u7533\u8bf7\u3002 \u7b2c\u4e09\u6b65\uff1a\u53ef\u9009\u62e9\u662f\u5426\u5f00\u542f HTTPS \u8bbf\u95ee\u548c\u5f3a\u5236 HTTPS \u529f\u80fd\u3002\u5728\u5f00\u542f HTTPS \u8bbf\u95ee\u540e\uff0c\u53ef\u901a\u8fc7\u70b9\u51fb \u4fee\u6539 \u5207\u6362\u57df\u540d\u6240\u5bf9\u5e94\u7684\u8bc1\u4e66\uff0c\u70b9\u51fb \u8be6\u60c5 \u53ef\u67e5\u770b\u76f8\u5e94\u8bc1\u4e66\u7684\u8be6\u7ec6\u4fe1\u606f\uff1b \u201c HTTPS \u8bbf\u95ee\u201d\uff1a\u5f00\u542f\u8be5\u529f\u80fd\u540e\uff0c\u5ba2\u6237\u7aef\u624d\u80fd\u4f7f\u7528 HTTPS \u534f\u8bae\u8fdb\u884c\u8bbf\u95ee\uff0c\u9ed8\u8ba4\u5173\u95ed\u3002 \u201c\u5f3a\u5236 HTTPS \u201d\uff1a\u52fe\u9009\u6b64\u529f\u80fd\u540e\uff0c\u53c8\u62cd\u4e91\u8fb9\u7f18\u8282\u70b9\u6536\u5230\u7528\u6237\u7684 HTTP \u8bf7\u6c42\u540e\u4f1a\u5c06\u5176\u5f3a\u5236\u8df3\u8f6c\u5230 HTTPS \u8fdb\u884c\u8bbf\u95ee\u3002\u9ed8\u8ba4\uff1a\u517c\u5bb9\u7528\u6237\u7684 HTTP \u548c HTTPS \u8bf7\u6c42\u3002 \u5907\u6ce8\uff1a\u5176\u4e2d HTTPS \u914d\u7f6e \u4e5f\u53ef\u4ee5\u5728 SSL \u8bc1\u4e66\u7ba1\u7406 \u91cc\u9762\u914d\u7f6e\uff0c\u53c2\u89c1\u4e0b\u6587 SSL \u8bc1\u4e66\u7ba1\u7406 \u90e8\u5206\u3002 \u81ea\u6709\u8bc1\u4e66\u4e0a\u4f20 \u00b6 \u5982\u679c\u57df\u540d\u5f53\u524d\u5df2\u6709\u8bc1\u4e66\uff0c\u53c8\u62cd\u4e91\u63d0\u4f9b\u4e86\u81ea\u6709\u8bc1\u4e66\u7684\u4e0a\u4f20\u65b9\u5f0f\uff0c\u65e0\u9700\u4eba\u5de5\u534f\u52a9\uff0c\u5b89\u5168\u4fbf\u6377\u3002 \u7b2c\u4e00\u6b65\uff1a\u8fdb\u5165 SSL \u8bc1\u4e66\u670d\u52a1\uff0c\u5de5\u5177\u7bb1 -> SSL \u8bc1\u4e66\u670d\u52a1 -> \u8bc1\u4e66\u7ba1\u7406 -> \u6dfb\u52a0\u81ea\u6709\u8bc1\u4e66 \u7b2c\u4e8c\u6b65\uff1a\u7c98\u8d34\u8bc1\u4e66\u5185\u5bb9: \u70b9\u51fb \u4fdd\u5b58 \u4e4b\u540e\uff0c\u53ef\u67e5\u770b SSL \u8bc1\u4e66\u4fe1\u606f\u5982\u4e0b\u56fe\u6240\u793a\uff1a SSL \u8bc1\u4e66\u7ba1\u7406 \u00b6 \u5728 \u8bc1\u4e66\u7ba1\u7406 \u5217\u8868\u4e2d\uff0c\u53ef\u6839\u636e\u9700\u6c42\u9009\u62e9\u7533\u8d2d\u6210\u529f\u5e76\u5df2\u90e8\u7f72\u4e8e CDN \u5e73\u53f0\u7684\u8bc1\u4e66\u6216\u5df2\u4e0a\u4f20\u7684\u81ea\u6709\u8bc1\u4e66\uff0c\u70b9\u51fb HTTPS \u914d\u7f6e \u8fdb\u884c\u64cd\u4f5c \uff0c\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u201cHTTPS \u8bbf\u95ee\u201d\uff1a\u5f00\u542f\u8be5\u529f\u80fd\u540e\uff0c\u5ba2\u6237\u7aef\u4f7f\u7528 HTTPS \u534f\u8bae\u8bbf\u95ee\u65f6\u624d\u80fd\u6210\u529f\uff0c\u9ed8\u8ba4\u5173\u95ed\u3002 \u201c\u5f3a\u5236 HTTPS\u201d\uff1a\u52fe\u9009\u6b64\u529f\u80fd\u540e\uff0c\u53c8\u62cd\u4e91\u8fb9\u7f18\u8282\u70b9\u6536\u5230\u7528\u6237\u7684 HTTP \u8bf7\u6c42\u540e\u4f1a\u5c06\u5176\u5f3a\u5236\u8df3\u8f6c\u5230 HTTPS \u8fdb\u884c\u8bbf\u95ee\u3002\u9ed8\u8ba4\uff1a\u517c\u5bb9\u7528\u6237\u7684 HTTP \u548c HTTPS \u8bf7\u6c42\u3002 HTTP/2 \u00b6 HTTP/2 \u5373\u8d85\u6587\u672c\u4f20\u8f93\u534f\u8bae 2.0\uff0c\u662f\u4e0b\u4e00\u4ee3 HTTP \u534f\u8bae\u3002\u5b83\u7531\u56fd\u9645\u4e92\u8054\u7f51\u5de5\u7a0b\u4efb\u52a1\u7ec4 \uff08IETF\uff09\u7684 Hypertext Transfer Protocol Bis (httpbis) \u5de5\u4f5c\u5c0f\u7ec4\u8fdb\u884c\u5f00\u53d1\uff0c\u4ee5 SPDY \u4e3a\u539f\u578b\uff0c\u7ecf\u8fc7\u4e24\u5e74\u591a\u7684\u8ba8\u8bba\u548c\u5b8c\u5584\u6700\u7ec8\u786e\u5b9a\u3002 HTTP/2 \u4f18\u52bf\u5982\u4e0b\uff1a 1\uff09HTTP/2 \u91c7\u7528\u4e8c\u8fdb\u5236\u683c\u5f0f\u4f20\u8f93\u6570\u636e\uff0c\u5176\u5728\u534f\u8bae\u7684\u89e3\u6790\u548c\u4f18\u5316\u6269\u5c55\u4e0a\u5e26\u6765\u66f4\u591a\u7684\u4f18\u52bf\u548c\u53ef\u80fd\u3002 2\uff09HTTP/2 \u5bf9\u6d88\u606f\u5934\u91c7\u7528 HPACK \u8fdb\u884c\u538b\u7f29\u4f20\u8f93\uff0c\u80fd\u591f\u8282\u7701\u6d88\u606f\u5934\u5360\u7528\u7684\u7f51\u7edc\u7684\u6d41\u91cf\u3002 3\uff09\u591a\u8def\u590d\u7528\uff0c\u7b80\u5355\u8bf4\u5c31\u662f\u6240\u6709\u7684\u8bf7\u6c42\u53ef\u4ee5\u901a\u8fc7\u4e00\u4e2a TCP \u8fde\u63a5\u5e76\u53d1\u5b8c\u6210\u3002 4\uff09Server Push\uff1a\u670d\u52a1\u7aef\u80fd\u591f\u66f4\u5feb\u7684\u628a\u8d44\u6e90\u63a8\u9001\u7ed9\u5ba2\u6237\u7aef\u3002 \u53c8\u62cd\u4e91 CDN \u5f53\u524d\u5df2\u5168\u5e73\u53f0\u652f\u6301 HTTP/2\uff0c\u5e76\u5df2\u9ed8\u8ba4\u5f00\u542f\u3002\u53c8\u56e0 HTTP/2 \u662f\u5728 HTTPS \u534f\u8bae\u7684\u57fa\u7840\u4e0a\u5b9e\u73b0\u7684\uff0c\u6240\u4ee5\u53ea\u8981\u4f7f\u7528\u53c8\u62cd\u4e91 HTTPS \u52a0\u901f\u670d\u52a1\u7684\u57df\u540d\uff0c\u90fd\u53ef\u514d\u8d39\u4eab\u53d7 HTTP/2 \u670d\u52a1\uff0c\u65e0\u9700\u505a\u4efb\u4f55\u7279\u6b8a\u914d\u7f6e\uff0c\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u6ce8\u610f\u4e8b\u9879 \u00b6 \u53c8\u62cd\u4e91 HTTPS \u52a0\u901f\u670d\u52a1\u662f\u57fa\u4e8e SNI \u6280\u672f\u5b9e\u73b0\u7684\uff0c\u56e0\u6b64\u67d0\u4e9b\u4e0d\u652f\u6301 SNI \u7684\u6d4f\u89c8\u5668\u6216\u5ba2\u6237\u7aef\u8bbf\u95ee\u53ef\u80fd\u51fa\u73b0\u95ee\u9898\u3002\u652f\u6301 SNI \u7684\u5ba2\u6237\u7aef\u5217\u8868\u5982\u4e0b\uff1a \u58f0\u660e\uff1a\u8fd0\u884c\u5728 Windows XP \u4e0a\u7684\u6240\u6709\u7248\u672c\u7684 Internet Explorer \u90fd\u4e0d\u652f\u6301 SNI \uff0c\u8be6\u7ec6\u8bf7\u53c2\u8003 \u8fd9\u91cc \u3002 \u6027\u80fd\u4f18\u5316 \u00b6 GZIP \u538b\u7f29 \u76ee\u524d\u53c8\u62cd\u4e91 CDN \u5f00\u542f\u4e86 GZIP \u538b\u7f29\u7684\u76f8\u5173\u7279\u6027\uff0c\u5177\u4f53\u5bf9\u5e94\u7684 NGINX \u914d\u7f6e\u5982\u4e0b\uff1a gzip on; gzip_min_length 256; gzip_types <\u89c1\u4e0b\u9762\u7684\u5217\u8868>; gzip_disable \"MSIE [1-6]\\.\"; gzip_vary on; \u89e6\u53d1\u5b9e\u9645\u7684 GZIP \u538b\u7f29\u884c\u4e3a\u9700\u8981\u540c\u65f6\u6ee1\u8db3\u5982\u4e0b\u6761\u4ef6\uff1a Content-Type \u6ee1\u8db3\u4ee5\u4e0b\u5217\u8868\u5176\u4e2d\u4e4b\u4e00\uff1a text/plain text/javascript text/css text/xml text/x-component application/javascript application/x-javascript application/xml application/json application/xhtml+xml application/rss+xml application/atom+xml application/x-font-ttf application/vnd.ms-fontobject image/svg+xml image/x-icon font/opentype text/html -- default Content-Length \u5927\u4e8e 256 \u5b57\u8282 \u5ba2\u6237\u7aef\u8bf7\u6c42\u5934\u5e26\u4e86 Accept-Encoding: gzip \u4ee3\u7801\u538b\u7f29 \u5f00\u542f\u540e\uff0c\u4f1a\u81ea\u52a8\u53bb\u9664 HTML \u6587\u4ef6\u4e2d\u975e\u5fc5\u8981\u7684\u5b57\u7b26\uff08\u7a7a\u767d\u3001\u6ce8\u91ca\u7b49\uff09\uff0c\u81ea\u52a8\u538b\u7f29\u6587\u4ef6\u5927\u5c0f\uff0c\u63d0\u5347\u8bbf\u95ee\u901f\u5ea6\u3002\u7279\u522b\u5730\uff0c\u76ee\u524d\u4ec5\u652f\u6301 HTML \u4ee3\u7801\u7684\u4f18\u5316\u3002 \u914d\u7f6e\u5f15\u5bfc \u767b\u9646 \u53c8\u62cd\u4e91\u7ba1\u7406\u63a7\u5236\u53f0 \uff0c\u4f9d\u6b21\u8fdb\u5165\uff1a\u670d\u52a1 > \u529f\u80fd\u914d\u7f6e > \u9ad8\u7ea7\u529f\u80fd > \u4ee3\u7801\u538b\u7f29\uff0c\u5f00\u542f\u5f00\u5173\u5373\u53ef\uff0c\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u53c2\u6570\u8ddf\u968f \u53c2\u6570\u8ddf\u968f\u529f\u80fd\u5305\u62ec\u4e09\u79cd\u6a21\u5f0f\uff0c\u5206\u522b\u662f \u53c2\u6570\u4e0d\u8ddf\u968f \u3001 \u5168\u7a0b\u8ddf\u968f \u3001 \u56de\u6e90\u8ddf\u968f \uff0c\u7cfb\u7edf\u9ed8\u8ba4\u4e3a \u5168\u7a0b\u8ddf\u968f \u6a21\u5f0f\u3002\u4e00\u822c\u60c5\u51b5\u4e0b\uff0c\u6839\u636e\u4e1a\u52a1\u60c5\u51b5\uff0c\u5efa\u8bae\u9009\u62e9 \u53c2\u6570\u4e0d\u8ddf\u968f \u6765\u63d0\u9ad8\u8d44\u6e90\u6587\u4ef6\u7f13\u5b58\u547d\u4e2d\u7387\u3002\u8be6\u7ec6\u4ecb\u7ecd\u5982\u4e0b\uff1a \u53c2\u6570\u4e0d\u8ddf\u968f\uff1a \u5f00\u542f\u540e\uff0c\u7cfb\u7edf\u4f1a\u8fc7\u6ee4\u8bf7\u6c42\u4e2d\u7684\u67e5\u8be2\u5b57\u7b26\u4e32\uff0c\u5e76\u4e14\u67e5\u8be2\u5b57\u7b26\u4e32\u4e0d\u4f1a\u4f20\u9012\u7ed9\u6e90\u7ad9 \u5168\u7a0b\u8ddf\u968f\uff1a \u5f00\u542f\u540e\uff0c\u5c06\u4e0d\u518d\u8fc7\u6ee4\u8bf7\u6c42\u4e2d\u7684\u67e5\u8be2\u5b57\u7b26\u4e32\uff0c\u5e76\u5c06\u67e5\u8be2\u5b57\u7b26\u4e32\u4f20\u9012\u7ed9\u6e90\u7ad9 \u56de\u6e90\u8ddf\u968f\uff1a \u5f00\u542f\u540e\uff0c\u4f1a\u8fc7\u6ee4\u8bf7\u6c42\u4e2d\u7684\u67e5\u8be2\u5b57\u7b26\u4e32\uff0c\u5728\u8bbf\u95ee\u56de\u6e90\u9636\u6bb5\u4f1a\u5c06\u67e5\u8be2\u5b57\u7b26\u4e32\u4f20\u9012\u7ed9\u6e90\u7ad9 \u914d\u7f6e\u5f15\u5bfc \u767b\u9646 \u53c8\u62cd\u4e91\u7ba1\u7406\u63a7\u5236\u53f0 \uff0c\u4f9d\u6b21\u8fdb\u5165\uff1a\u670d\u52a1 > \u529f\u80fd\u914d\u7f6e > \u57fa\u7840\u914d\u7f6e > \u53c2\u6570\u8ddf\u968f\uff0c\u70b9\u51fb\u7ba1\u7406\u5373\u53ef\u5f00\u59cb\u914d\u7f6e\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u6ce8\u610f\uff1a\u53c2\u6570\u8ddf\u968f\u529f\u80fd\uff0c\u53ef\u4ee5\u914d\u5408\u7f13\u5b58\u914d\u7f6e\u529f\u80fd\u6765\u4f7f\u7528\u3002 \u91cd\u5b9a\u5411\u4f18\u5316 \u5f53 CDN \u8282\u70b9\u56de\u6e90\u7ad9\u65f6\uff0c\u82e5\u6e90\u7ad9\u54cd\u5e94\u7684\u72b6\u6001\u7801\u4e3a 301/302\uff0cCDN \u8282\u70b9\u5bf9\u91cd\u5b9a\u5411\u4e4b\u540e\u7684\u76ee\u6807 URL \uff08\u4e5f\u5373 301/302 \u54cd\u5e94\u5934 Location \u5b57\u6bb5\u5bf9\u5e94\u7684\u4fe1\u606f\uff09\u53d1\u8d77\u8bf7\u6c42\uff0c\u5c06\u83b7\u53d6\u540e\u7684\u5185\u5bb9\u54cd\u5e94\u7ed9\u6700\u7ec8\u7528\u6237\uff0c\u5e76\u5728 CDN \u8282\u70b9\u8fdb\u884c\u7f13\u5b58\u3002\u8fd9\u6837\u5411\u6700\u7ec8\u7528\u6237\u5c4f\u853d\u4e86\u91cd\u5b9a\u5411\u8fc7\u7a0b\uff0c\u514d\u53bb\u4e86\u6700\u7ec8\u7528\u6237\u518d\u6b21\u5411\u91cd\u5b9a\u5411\u540e\u7684 URL \u91cd\u65b0\u53d1\u8d77\u8bf7\u6c42\u7684\u8fde\u63a5\u65f6\u95f4\uff0c\u4ece\u800c\u52a0\u5feb\u4e86\u8bbf\u95ee\u901f\u5ea6\u3002 \u539f\u7406\u4ecb\u7ecd \u4e00\u822c\u60c5\u51b5\u4e0b\uff0c\u5f53 CDN \u8282\u70b9\u56de\u6e90\u7ad9\u8bf7\u6c42\u6587\u4ef6\u65f6\uff0c\u82e5\u6e90\u7ad9\u8fd4\u56de\u7684\u662f HTTP 301/302 \u7684\u54cd\u5e94\uff0cCDN \u8282\u70b9\u4f1a\u5c06\u8be5\u54cd\u5e94\u8fd4\u56de\u7ed9\u5ba2\u6237\u7aef\uff0c\u5ba2\u6237\u7aef\u6839\u636e\u54cd\u5e94\u5934\u4e2d\u7684 Location \u5934\u4fe1\u606f\u8fdb\u884c\u518d\u6b21\u8bf7\u6c42\u3002\u914d\u7f6e\u4e86\u91cd\u5b9a\u5411\u4f18\u5316\u529f\u80fd\u4e4b\u540e\uff0c\u8bbf\u95ee\u6d41\u7a0b\u5982\u4e0b\u56fe\u6240\u793a\uff1a 1\uff09\u5ba2\u6237\u7aef\u5411 CDN \u8282\u70b9\u53d1\u8d77\u8bf7\u6c42\u5e76\u4f20\u9012\u81f3\u6e90\u7ad9\uff0c\u4f8b\u5982\uff1a http://example.com/123.html \uff1b 2\uff09\u6e90\u7ad9\u7ed9 CDN \u8282\u70b9\u54cd\u5e94 301/302 \u72b6\u6001\u7801\uff0c\u5e76\u6307\u660e\u91cd\u5b9a\u5411\u540e\u7684 URL \u4e3a http://example.com/456.html 3\uff09CDN \u8282\u70b9\u5bf9\u91cd\u5b9a\u5411\u4e4b\u540e\u5bf9\u76ee\u6807 URL \u53d1\u8d77\u8bf7\u6c42\uff1b 4\uff09\u6e90\u7ad9\u54cd\u5e94\u5185\u5bb9\u7ed9\u6700\u7ec8\u7528\u6237\uff0c\u5e76\u5c06\u5185\u5bb9\u5728 CDN \u8282\u70b9\u8fdb\u884c\u7f13\u5b58\uff1b \u914d\u7f6e\u5f15\u5bfc \u767b\u9646 \u53c8\u62cd\u4e91\u7ba1\u7406\u63a7\u5236\u53f0 \uff0c\u4f9d\u6b21\u8fdb\u5165\uff1a\u670d\u52a1 > \u529f\u80fd\u914d\u7f6e > \u9ad8\u7ea7\u529f\u80fd > \u91cd\u5b9a\u5411\u4f18\u5316\uff0c\u6ed1\u52a8\u5f00\u5173\u5373\u53ef\u5f00\u542f\u8be5\u529f\u80fd\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u6587\u4ef6\u5408\u5e76 \u53c8\u62cd\u4e91\u5b58\u50a8 \u548c \u81ea\u4e3b\u6e90\u7ad9 CDN \u52a0\u901f\u670d\u52a1\u5747\u652f\u6301 JS\uff0cCSS Combo\uff08\u7ec4\u5408\u7279\u6027\uff09\uff0c\u5373\u53ef\u4ee5\u628a\u591a\u4e2a JS, CSS \u8bf7\u6c42\u5408\u5e76\u6210\u4e00\u4e2a\u3002 \u5982\u4f55\u4f7f\u7528 \u7279\u522b\u5730\uff0c\u6211\u4eec\u4ee5 !! \u4f5c\u4e3a\u5206\u9694\u7b26\u3002 http://upyun-assets.b0.upaiyun.com/foo/!!a.js,b.js \u4e00\u4e2a\u5f15\u7528\u4e86\u5982\u4e0a URL \u7684 Demo: http://upyun-assets.b0.upaiyun.com/jscombo.html \u5206\u6bb5\u7f13\u5b58 \u00b6 \u53c8\u62cd\u4e91 CDN \u670d\u52a1\u53ef\u63d0\u4f9b\u5206\u6bb5\u7f13\u5b58\u529f\u80fd\u914d\u7f6e\uff0c\u5f00\u542f\u8be5\u529f\u80fd\u53ef\u6709\u6548\u964d\u4f4e\u5927\u6587\u4ef6\u56de\u6e90\u7387\uff0c\u63d0\u5347\u54cd\u5e94\u901f\u5ea6\uff0c\u4e0e\u6b64\u540c\u65f6\uff0c\u53ef\u4ee5\u63d0\u9ad8\u6587\u4ef6\u5728 CDN \u8282\u70b9\u7684\u7f13\u5b58\u547d\u4e2d\u7387\u3002\u7279\u522b\u5730\uff0c\u5f00\u542f\u8be5\u7279\u6027\u4e4b\u540e\uff0cCDN \u8282\u70b9\u4f1a\u4ee5 Range \u8bf7\u6c42\u56de\u6e90\u3002 \u914d\u7f6e\u5f15\u5bfc \u767b\u9646 \u53c8\u62cd\u4e91\u7ba1\u7406\u63a7\u5236\u53f0 \uff0c\u4f9d\u6b21\u8fdb\u5165\uff1a\u670d\u52a1 > \u529f\u80fd\u914d\u7f6e > \u9ad8\u7ea7\u670d\u52a1 > \u5206\u6bb5\u7f13\u5b58\uff0c\u70b9\u51fb\u300c\u7ba1\u7406\u300d\u6309\u94ae\u5373\u53ef\u5f00\u59cb\u914d\u7f6e\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u9ed8\u8ba4\u914d\u7f6e\uff1a\u8be5\u7279\u6027\u4f1a\u9ed8\u8ba4\u5173\u95ed\uff0c\u60a8\u53ef\u4ee5\u6709\u9009\u62e9\u6027\u7684\u5f00\u542f\u8be5\u7279\u6027\u3002\u7279\u522b\u5730\uff0c\u6211\u4eec\u9488\u5bf9\u5206\u6bb5\u7f13\u5b58\u9884\u7f6e\u4e86\u6587\u4ef6\u540e\u7f00\u6a21\u677f\uff0c\u4e5f\u5373\u53ef\u4ee5\u6839\u636e\u6587\u4ef6\u540e\u7f00\u6216\u8005\u901a\u914d\u7b26\u89c4\u5219\u6765\u914d\u7f6e\u662f\u5426\u5f00\u542f\u5206\u6bb5\u7f13\u5b58\u529f\u80fd\u3002\u9ed8\u8ba4\u9884\u7f6e\u540e\u7f00\u5982\u4e0b\uff1a \u89c6\u9891\uff1aAVI\u3001MP4\u3001FLV\u3001MOV\u30013GP\u3001ASF\u3001WMV\u3001MPG\u3001F4V\u3001M4V\u3001MKV\u3001VOB\u3001M3U8\u3001TS \u3001RMVB\u3001DAT\u3001RM \u97f3\u9891\uff1aMP3\u3001OGG\u3001M4A\u3001WMA\u3001AIF\u3001AU \u5b89\u88c5\u5305\uff1aAPK\u3001ZIP\u3001EXE\u3001RAR\u3001IPA\u3001PXL\u3001DEB\u3001SIS\u3001SISX\u3001JAR\u3001XAP \u6e38\u620f\u4e0b\u8f7d\uff1aSO\u3001CUE\u3001CCD\u3001MDS\u3001IMG\u30017Z \u5176\u5b83\uff1aCAB\u3001DHP\u3001GZ\u3001ISO\u3001MPQ\u3001PBCV\u3001PXL\u3001QNP\u3001R00\u3001XY\u3001XY2 \u914d\u7f6e\u6548\u679c \u5047\u8bbe\u6700\u7ec8\u7528\u6237\u53d1\u8d77\u4e86\u8d44\u6e90\u8bf7\u6c42\uff0c\u8bf7\u6c42\u7684 URL \u4e3a\uff1a http://www.example.com/download/game.zip \uff0cCDN \u8282\u70b9\u6536\u5230\u8bf7\u6c42\u540e\uff0c\u82e5\u547d\u4e2d\u5219\u54cd\u5e94\u5bf9\u5e94\u5206\u6bb5\u6587\u4ef6\u7ed9\u6700\u7ec8\u7528\u6237\uff0c\u672a\u547d\u4e2d\u7684\u5206\u6bb5 CDN \u8282\u70b9\u5219\u56de\u6e90\u53d1\u8d77 Range \u8bf7\u6c42\u83b7\u53d6\u8d44\u6e90\u6587\u4ef6\u3002 \u5f00\u542f\u5206\u6bb5\u7f13\u5b58\uff1a \u82e5\u6700\u7ec8\u7528\u6237\u53d1\u8d77\u8d44\u6e90\u8bf7\u6c42\uff0cCDN \u8282\u70b9\u4e0a\u5df2\u7ecf\u547d\u4e2d\u8be5\u5206\u6bb5\uff0c\u5219\u76f4\u63a5\u54cd\u5e94\u7ed9\u6700\u7ec8\u7528\u6237 \u82e5 CDN \u8282\u70b9\u672a\u547d\u4e2d\u7f13\u5b58\uff0c\u5219 CDN \u8282\u70b9\u56de\u6e90\u4f7f\u7528 Range \u8bf7\u6c42\uff0c\u5206\u6bb5\u83b7\u53d6\u8d44\u6e90\u6587\u4ef6 \u5173\u95ed\u5206\u6bb5\u7f13\u5b58\uff1a \u8282\u70b9\u6587\u4ef6\u7f13\u5b58\u8fc7\u671f\u4e4b\u540e\uff0c\u4f1a\u5411\u6e90\u7ad9\u83b7\u53d6\u6574\u4e2a\u8d44\u6e90\u6587\u4ef6 \u5206\u6bb5\u9884\u52a0\u8f7d\uff1a \u5f00\u542f\u5206\u6bb5\u7f13\u5b58\u529f\u80fd\u4e4b\u540e\uff0c\u8be5\u7279\u6027\u4f1a\u9ed8\u8ba4\u5f00\u542f\u3002\u5f53\u6700\u7ec8\u7528\u6237\u8bf7\u6c42\u7b2c\u4e00\u4e2a\u5206\u6bb5\u6587\u4ef6\u65f6\uff0c\u6211\u4eec\u4f1a\u63d0\u524d\u53bb\u4e0b\u8f7d\u540e\u9762\u51e0\u4e2a\u5206\u6bb5\u6587\u4ef6\uff0c\u8fdb\u800c\u63d0\u9ad8\u6587\u4ef6\u4e0b\u8f7d\u901f\u5ea6 \u6ce8\u610f\u4e8b\u9879 1\u3001\u6e90\u7ad9\u9700\u8981\u652f\u6301 Range \u8bf7\u6c42\uff0c\u5426\u5219\u4f1a\u5bfc\u81f4\u56de\u6e90\u5931\u8d25\uff1b\u4e25\u683c\u6765\u8bf4\uff0c\u6211\u4eec\u53ea\u901a\u8fc7 Accept-Ranges: bytes \u8fd9\u4e2a\u5934\u6765\u5224\u65ad\u6e90\u652f\u4e0d\u652f\u6301 Range \u8bf7\u6c42 \uff0c\u5426\u5219\u5373\u4f7f\u5f00\u542f\u4e86\u5206\u6bb5\u7f13\u5b58\u7279\u6027\uff0c\u4e5f\u4e0d\u4f1a\u751f\u6548\uff1b 2\u3001\u8be5\u529f\u80fd\u914d\u7f6e\u540e\u4e0d\u4f1a\u7acb\u5373\u751f\u6548\uff0c\u9700\u5728\u6587\u4ef6\u7f13\u5b58\u8fc7\u671f\u6216\u8005\u6587\u4ef6\u7f13\u5b58\u88ab\u4e3b\u52a8\u5237\u65b0\u4e4b\u540e\u65b9\u53ef\u751f\u6548\uff1b 3\u3001\u8be5\u529f\u80fd\u4ec5\u9488\u5bf9\u9759\u6001\u6587\u4ef6\uff0c\u52a8\u6001\u5185\u5bb9\u5f00\u542f\u5206\u6bb5\u7f13\u5b58\u4f1a\u53ef\u80fd\u4f1a\u53d1\u751f\u9519\u8bef\uff0c\u8bf7\u8c28\u614e\u4f7f\u7528\uff1b 4\u3001\u8be5\u529f\u80fd\u5f00\u542f\u540e\uff0c\u8d44\u6e90\u5728 CDN \u8282\u70b9\u4e0a\u4f1a\u8fdb\u884c\u5206\u6bb5\u7f13\u5b58\uff0c\u5982\u679c\u8981\u7acb\u9a6c\u5173\u95ed\u8be5\u7279\u6027\uff0c\u53ef\u901a\u8fc7\u624b\u52a8\u5237\u65b0\u6587\u4ef6\u6765\u89e3\u51b3\uff1b 5\u3001\u5982\u679c\u60a8\u5df2\u7ecf\u4f7f\u7528\u53c8\u62cd\u4e91\u5bf9\u8c61\u5b58\u50a8\u670d\u52a1\uff0c\u8be5\u7279\u6027\u5df2\u7ecf\u9ed8\u8ba4\u5f00\u542f\uff0c\u65e0\u9700\u505a\u4efb\u4f55\u914d\u7f6e\uff1b \u89c6\u9891\u62d6\u62c9 \u00b6 \u89c6\u9891\u62d6\u62c9\u529f\u80fd\u7528\u4e8e\u89c6\u9891\u70b9\u64ad\u7684\u589e\u5f3a\u4f53\u9a8c\uff0c\u65b9\u4fbf\u6700\u7ec8\u7528\u6237\u901a\u8fc7\u62d6\u62c9\u64ad\u653e\u5668\u7684\u8fdb\u5ea6\u6761\uff0c\u89c2\u770b\u4efb\u610f\u8d77\u59cb\u4f4d\u7f6e\u7684\u89c6\u9891\uff0c\u800c\u65e0\u9700\u4ece\u5934\u89c2\u770b\u3002\u8be5\u529f\u80fd\u8fd8\u53ef\u4ee5\u6269\u5c55\u4e3a\u8df3\u8fc7\u7247\u5934\u3001\u7eed\u64ad\u3001\u9884\u64ad\u653e\u7b49\u529f\u80fd\u3002\u53d1\u9001\u62d6\u62c9\u64ad\u653e\u8fdb\u5ea6\u65f6\uff0c\u5ba2\u6237\u7aef\u53d1\u8d77\u7684\u8bf7\u6c42\u7c7b\u4f3c http://video.upyun.com/test.mp4?start=100 \u8fd9\u6837\u7684 URL \u8bf7\u6c42\u3002 \u914d\u7f6e\u5f15\u5bfc \u767b\u9646 \u53c8\u62cd\u4e91\u7ba1\u7406\u63a7\u5236\u53f0 \uff0c\u4f9d\u6b21\u8fdb\u5165\uff1a\u670d\u52a1 > \u529f\u80fd\u914d\u7f6e > \u9ad8\u7ea7\u529f\u80fd > \u89c6\u9891\u62d6\u62c9\uff0c\u70b9\u51fb\u7ba1\u7406\u5373\u53ef\u5f00\u59cb\u914d\u7f6e\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u8be6\u7ec6\u914d\u7f6e\u8bf7\u53c2\u89c1 \u300c\u652f\u6301\u4ece\u4efb\u610f\u8d77\u70b9\u89c2\u770b\u300d\u89c6\u9891\u62d6\u62c9\u7528\u6237\u6307\u5357 \u6ce8\u610f\u4e8b\u9879\uff1a 1.\u4e3a\u4e86\u4fdd\u8bc1\u6b63\u5e38\u62d6\u62c9\uff0c\u64ad\u653e\u5668\u53ef\u4ee5\u53d1\u8d77\u7ea6\u5b9a\u683c\u5f0f\u7684\u8bf7\u6c42\uff0c\u4f8b\u5982\uff1a http://example.com/video/test.mp4?start=xxx&end=xxx 2.\u89c6\u9891\u6587\u4ef6\u9700\u542b\u6709\u5173\u952e\u5e27\uff0c\u8fd9\u662f\u5b9e\u73b0\u62d6\u62c9\u7684\u524d\u63d0\u6761\u4ef6\uff0c\u5173\u952e\u5e27\u592a\u5c11\u6216\u8005\u6ca1\u6709\u5173\u952e\u5e27\uff0c\u89c6\u9891\u6587\u4ef6\u9700\u8981\u91cd\u65b0\u7f16\u7801 3.\u89c6\u9891\u6587\u4ef6 metedata \u4e2d\u7f3a\u5c11\u5173\u952e\u5e27\u7684\u7d22\u5f15\u4fe1\u606f\uff0c\u5982 FLV \u7f3a\u5c11 keyframes \u4fe1\u606f\uff0cMP4 \u7f3a\u5c11 seekpoint \u4fe1\u606f\uff0c\u6216\u7f3a\u5931 moov box \uff0c\u90fd\u4f1a\u5bfc\u81f4\u62d6\u62c9\u5931\u8d25 4.\u652f\u6301\u6839\u636e\u4e0d\u540c\u8d44\u6e90\u8def\u5f84\u6dfb\u52a0\u914d\u7f6e\uff0c\u6700\u591a\u4ec5\u652f\u6301 20 \u6761 5.\u76ee\u524d\u652f\u6301\u6587\u4ef6\u683c\u5f0f\u6709\uff1aMP4 \u548c FLV\uff0cMP4 \u652f\u6301\u6309\u65f6\u95f4\u62d6\u62c9\uff0cFLV \u652f\u6301\u6309\u5b57\u8282\u62d6\u62c9 \u955c\u50cf\u5b58\u50a8 \u00b6 \u4f7f\u7528\u53c8\u62cd\u4e91 CDN \u670d\u52a1\u65f6\uff0c\u6e90\u7ad9\u7c7b\u578b\u9009\u62e9\u7684\u662f \u81ea\u4e3b\u6e90 \u6a21\u5f0f\uff08\u4e5f\u5373\u5ba2\u6237\u7684\u7f51\u7ad9\u8d44\u6e90\u90fd\u6258\u7ba1\u5728\u81ea\u5df1\u7684\u670d\u52a1\u5668\u6216\u8005\u7b2c\u4e09\u65b9\u5b58\u50a8\u5e73\u53f0\u4e0a\uff09\u7684\u8bdd\uff0c\u53ef\u4ee5\u5f00\u542f\u955c\u50cf\u5b58\u50a8\u529f\u80fd\uff0c\u53ef\u4ee5\u5c06\u7f51\u7ad9\u6570\u636e\u5e73\u6ed1\u8fc1\u79fb\u81f3\u53c8\u62cd\u4e91\u5b58\u50a8\u5e73\u53f0\uff0c\u5e76\u51cf\u5c0f\u7f51\u7ad9\u56de\u6e90\u6bd4\u4f8b\u3002 \u5b9e\u73b0\u6d41\u7a0b \u5b9e\u73b0\u673a\u5236\u53ef\u4ee5\u53c2\u7167\u5982\u4e0b\u6d41\u7a0b\uff1a \u7ec8\u7aef\u7528\u6237\u8bbf\u95ee\u8d44\u6e90\uff1b \u53c8\u62cd\u4e91 CDN \u8282\u70b9\u4ece\u7528\u6237\u81ea\u4e3b\u6e90\u7ad9\u83b7\u53d6\u8d44\u6e90\uff1b \u8fd4\u56de\u8d44\u6e90\u7ed9\u7ec8\u7aef\uff0c\u5e76\u6301\u4e45\u5316\u5b58\u50a8\u5230\u53c8\u62cd\u4e91\u5b58\u50a8\u5e73\u53f0\uff1b \u7ec8\u7aef\u7528\u6237\u518d\u6b21\u8bbf\u95ee\u65f6\uff0c\u5c06\u76f4\u63a5\u4ece\u53c8\u62cd\u4e91\u83b7\u53d6\u8d44\u6e90\uff0c\u4e0d\u518d\u56de\u6e90\u83b7\u53d6\uff1b \u968f\u7740\u7ec8\u7aef\u7528\u6237\u7684\u4e0d\u65ad\u8bbf\u95ee\uff0c\u6e90\u7ad9\u7684\u8d44\u6e90\u9010\u6b65\u81ea\u52a8\u5b58\u50a8\u5230\u53c8\u62cd\u4e91\u5b58\u50a8\u5e73\u53f0\u3002 \u914d\u7f6e\u5f15\u5bfc \u767b\u9646 \u53c8\u62cd\u4e91\u7ba1\u7406\u63a7\u5236\u53f0 \uff0c\u4f9d\u6b21\u8fdb\u5165\uff1a\u670d\u52a1 > \u529f\u80fd\u914d\u7f6e > \u9ad8\u7ea7\u529f\u80fd > \u955c\u50cf\u5b58\u50a8\uff0c\u70b9\u51fb\u5f00\u542f\u5373\u53ef\u5f00\u59cb\u914d\u7f6e\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u53c8\u62cd\u4e91\u955c\u50cf\u5b58\u50a8\u529f\u80fd\u5305\u62ec\u4e09\u79cd\u72b6\u6001\uff0c\u5206\u522b\u662f\u5f00\u542f\u3001\u6682\u505c\u3001\u5173\u95ed\uff0c\u8be6\u7ec6\u63cf\u8ff0\u5982\u4e0b\uff1a \u5f00\u542f\u72b6\u6001 \u5f00\u542f\u4e4b\u540e\uff0c\u5f53 CDN \u8282\u70b9\u7f13\u5b58\u5931\u6548\u65f6\uff0c\u4f1a\u4f18\u5148\u56de\u53c8\u62cd\u4e91\u5b58\u50a8\u83b7\u53d6\u8d44\u6e90\uff0c\u5982\u679c\u53c8\u62cd\u4e91\u5b58\u50a8\u6ca1\u6709\u547d\u4e2d\u8d44\u6e90\uff0c\u5219\u76f4\u63a5\u56de\u81ea\u6709\u6e90\u7ad9\u83b7\u53d6\u8d44\u6e90\u5e76\u54cd\u5e94\u7ed9\u6700\u7ec8\u7528\u6237\uff0c\u4e0e\u6b64\u540c\u65f6\uff0c\u8d44\u6e90\u4f1a\u88ab\u6254\u8fdb\u955c\u50cf\u5b58\u50a8\u961f\u5217\u5e76\u8fdb\u884c\u5b58\u50a8\uff0c\u4e0b\u4e00\u4e2a\u76f8\u540c\u7684\u8d44\u6e90\u8bf7\u6c42\u8fc7\u6765\u65f6\u5219\u4f1a\u76f4\u63a5\u7531\u5b58\u50a8\u547d\u4e2d\u7684\u8d44\u6e90\u76f4\u63a5\u63d0\u4f9b\u670d\u52a1\u3002 \u6682\u505c\u72b6\u6001 \u76f4\u63a5\u5173\u95ed\u955c\u50cf\u5b58\u50a8\u529f\u80fd\uff0c\u53ef\u80fd\u4f1a\u5bfc\u81f4\u56de\u6e90\u538b\u529b\u8fc7\u5927\uff0c\u6211\u4eec\u4f1a\u5148\u8fdb\u5165\u6682\u505c\u72b6\u6001\uff0c\u8be5\u72b6\u6001\u4e0b\u4e0d\u4f1a\u8fdb\u884c\u8d44\u6e90\u8fc1\u79fb\u52a8\u4f5c\uff0c\u8bbf\u95ee\u8d44\u6e90\u65f6\uff0c\u4ecd\u7136\u5148\u8bbf\u95ee\u53c8\u62cd\u4e91\u5b58\u50a8\uff0c\u5982\u679c\u5b58\u50a8\u4e0a\u6ca1\u6709\u547d\u4e2d\u8d44\u6e90\uff0c\u5219\u4f1a\u8bbf\u95ee\u81ea\u4e3b\u6e90\u7ad9\u3002 \u5173\u95ed\u72b6\u6001 \u8be5\u529f\u80fd\u5173\u95ed\u4e4b\u540e\uff0c\u65b0\u7684\u8bf7\u6c42\u8fc7\u6765\u7684\u8bdd\uff0cCDN \u8282\u70b9\u4e0d\u4f1a\u56de\u53c8\u62cd\u4e91\u5b58\u50a8\u5e73\u53f0\u83b7\u53d6\u8d44\u6e90\uff0c\u5219\u4f1a\u76f4\u63a5\u56de\u5ba2\u6237\u6e90\u7ad9\u83b7\u53d6\u8d44\u6e90\u3002 \u6ce8\u610f\u4e8b\u9879 1.\u5f53\u7528\u6237\u66f4\u65b0\u4e86\u6e90\u7ad9\u8d44\u6e90\u65f6\uff0c\u4e3a\u4e86\u4fdd\u8bc1\u8bf7\u6c42\u8bbf\u95ee\u5230\u7684\u8d44\u6e90\u662f\u6700\u65b0\u7684\uff0c\u6b64\u65f6\u9700\u8981\u901a\u8fc7 API \u6216 FTP \u7684\u65b9\u5f0f\u5bf9\u5df2\u7ecf\u5b58\u50a8\u5728\u53c8\u62cd\u4e91\u5b58\u50a8\u4e0a\u7684\u6587\u4ef6\u8fdb\u884c\u5220\u9664\u548c\u66ff\u6362\u64cd\u4f5c 2.\u5f53\u955c\u50cf\u5b58\u50a8\u529f\u80fd\u5904\u4e8e\u6682\u505c\u72b6\u6001\u65f6\uff0c\u60a8\u53ef\u4ee5\u901a\u8fc7 API \u63a5\u53e3\u9010\u6b65\u5220\u9664\u53c8\u62cd\u4e91\u4e0a\u5bf9\u5e94\u7684\u6587\u4ef6\uff0c\u5c06\u56de\u6e90\u6d41\u91cf\u5e73\u6ed1\u8fc1\u79fb\u81f3\u6e90\u7ad9\uff0c\u6216\u8c03\u6574\u6e90\u7ad9\u5e26\u5bbd\uff0c\u6700\u540e\u518d\u6267\u884c\u5173\u95ed\u64cd\u4f5c \u8de8\u57df\u914d\u7f6e \u00b6 \u8de8\u57df\u8d44\u6e90\u5171\u4eab \uff08 Cross-Origin Resource Sharing\uff09\u662f\u4e00\u79cd\u7f51\u7edc\u6d4f\u89c8\u5668\u7684\u6280\u672f\u89c4\u8303\uff0c\u4ed6\u4e3a Web \u670d\u52a1\u5668\u5b9a\u4e49\u4e86\u4e00\u79cd\u65b9\u5f0f\uff0c\u5141\u8bb8\u7f51\u9875\u4ece\u4e0d\u540c\u7684\u57df\u8bbf\u95ee\u5176\u8d44\u6e90\u3002\u8de8\u6e90\u8d44\u6e90\u5171\u4eab\u6807\u51c6\u901a\u8fc7\u65b0\u589e\u4e00\u7cfb\u5217 HTTP \u5934\uff0c\u8ba9\u670d\u52a1\u5668\u80fd\u58f0\u660e\u90a3\u4e9b\u6765\u6e90\u53ef\u4ee5\u901a\u8fc7\u6d4f\u89c8\u5668\u8bbf\u95ee\u8be5\u670d\u52a1\u5668\u4e0a\u7684\u8d44\u6e90\u3002\u6b64\u65f6\u9700\u8981\u5728 Response Header \u4e2d\u589e\u52a0\u8de8\u57df\u76f8\u5173\u914d\u7f6e\uff0c\u8fd9\u6837\u5c31\u53ef\u4ee5\u4f7f\u5f97\u8d44\u6e90\u7684\u5b89\u5168\u8bbf\u95ee\u6210\u4e3a\u53ef\u80fd\u3002 \u914d\u7f6e\u5f15\u5bfc \u767b\u9646 \u53c8\u62cd\u4e91\u7ba1\u7406\u63a7\u5236\u53f0 \uff0c\u4f9d\u6b21\u8fdb\u5165\uff1a\u670d\u52a1 > \u529f\u80fd\u914d\u7f6e > \u9ad8\u7ea7\u529f\u80fd > CORS \u8de8\u57df\u5171\u4eab\uff0c\u70b9\u51fb\u7ba1\u7406\u5373\u53ef\u5f00\u59cb\u914d\u7f6e\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff1a Access-Control-Allow-Origin \u8fd4\u56de\u7684\u8d44\u6e90\u9700\u8981\u6709\u4e00\u4e2a Access-Control-Allow-Origin \u5934\u4fe1\u606f\uff0c\u4e5f\u53ef\u4ee5\u8bbe\u7f6e\u901a\u914d\u7b26\uff0a\uff0c\u5141\u8bb8\u88ab\u6240\u6709\u57df\u4f7f\u7528\u3002\u8bed\u6cd5\u5982\u4e0b: Access-Control-Allow-Origin: | * \u4e3e\u4e2a\u6817\u5b50\uff0c\u5141\u8bb8\u6765\u81ea http://www.upyun.com \u7684\u8bf7\u6c42\uff0c\u4f60\u53ef\u4ee5\u8fd9\u6837\u6307\u5b9a: Access-Control-Allow-Origin: http://www.upyun.com Access-Control-Allow-Methods \u8868\u793a\u5141\u8bb8\u7684\u8de8\u57df\u8bf7\u6c42\u7684\u65b9\u6cd5\uff0c\u5728\u5f53\u524d\u8bf7\u6c42\u7684\u57df\u88ab\u5141\u8bb8\u540e\uff0c\u8fd8\u8981\u68c0\u67e5\u5f53\u524d\u8bf7\u6c42\u7684\u65b9\u6cd5\u662f\u5426\u88ab\u5141\u8bb8\uff0c\u793a\u4f8b\u5982\u4e0b\uff1a Access-Control-Allow-Methods: POST, GET, OPTIONS Access-Control-Allow-Headers \u4e5f\u662f\u5728\u54cd\u5e94\u9884\u68c0\u8bf7\u6c42\u7684\u65f6\u5019\u4f7f\u7528\uff0c\u7528\u6765\u6307\u660e\u5728\u5b9e\u9645\u7684\u8bf7\u6c42\u4e2d\uff0c\u53ef\u4ee5\u4f7f\u7528\u54ea\u4e9b\u81ea\u5b9a\u4e49 HTTP \u8bf7\u6c42\u5934\uff0c\u6bd4\u5982\uff1a Access-Control-Allow-Headers: X-PINGOTHER\uff0cX-UPYUN \u8fd9\u6837\u5728\u5b9e\u9645\u7684\u8bf7\u6c42\u91cc,\u8bf7\u6c42\u5934\u4fe1\u606f\u91cc\u5c31\u53ef\u4ee5\u6709\u8fd9\u4e48\u4e00\u6761\uff1a X-PINGOTHER: hello Access-Control-Expose-Headers \u8bbe\u7f6e\u6d4f\u89c8\u5668\u5141\u8bb8\u8bbf\u95ee\u7684\u670d\u52a1\u5668\u7684\u5934\u4fe1\u606f\u7684\u767d\u540d\u5355\uff0c\u793a\u4f8b\u5982\u4e0b\uff1a Access-Control-Expose-Headers: X-My-Custom-Header, X-Another-Custom-Header \u8fd9\u6837\uff0c X-My-Custom-Header \u548c X-Another-Custom-Header \u8fd9\u4e24\u4e2a\u5934\u4fe1\u606f\uff0c\u90fd\u53ef\u4ee5\u88ab\u6d4f\u89c8\u5668\u5f97\u5230\u3002 Access-Control-Max-Age \u8fd9\u4e2a\u5934\u544a\u8bc9\u6211\u4eec\u8fd9\u6b21\u9884\u8bf7\u6c42\u7684\u7ed3\u679c\u7684\u6709\u6548\u671f\u662f\u591a\u4e45\uff0c\u5355\u4f4d\u4e3a\u79d2\uff0c\u8bbe\u7f6e\u793a\u4f8b\u5982\u4e0b\uff1a Access-Control-Max-Age: 864000 \u8868\u660e\u5728 86400s\uff0810\u5929\uff09\u5185\uff0c\u5bf9\u8be5\u8d44\u6e90\u7684\u8de8\u57df\u8bbf\u95ee\u4e0d\u518d\u53d1\u9001\u53e6\u5916\u4e00\u6761\u9884\u8bf7\u6c42\u3002 \u6ce8\u610f\u4e8b\u9879\uff1a 1\uff09\u6700\u591a\u652f\u6301\u6dfb\u52a0 10 \u6761\u89c4\u5219\uff0c\u5339\u914d\u65f6\u4ece\u7b2c\u4e00\u6761\u5f00\u59cb\u9010\u6761\u5339\u914d\uff0c\u4ee5\u6700\u65e9\u5339\u914d\u4e0a\u7684\u89c4\u5219\u4e3a\u51c6 2\uff09 \u5141\u8bb8\u7684\u57df \u3001 Allow Header \u3001 Expose Header \u6700\u591a\u5141\u8bb8 20 \u884c 3\uff09 \u5141\u8bb8\u7684\u57df \u53ca Methods \u5efa\u8bae\u6839\u636e\u9700\u8981\u4f7f\u7528\u6700\u5c0f\u7684\u914d\u7f6e\u6765\u4fdd\u8bc1\u5b89\u5168\u6027\uff0c\u591a\u6761\u89c4\u5219\u95f4\u4e0d\u8981\u6709\u8986\u76d6\u548c\u51b2\u7a81 4\uff09 \u5141\u8bb8\u7684\u57df \u9700\u5e26\u4e0a\u5b8c\u6574\u7684\u57df\u4fe1\u606f\uff0c\u5373\u6307\u5b9a https \u6216\u8005 http\uff0c\u6216\u8005 *://foo.com \u8fd9\u6837\u7684\u5f62\u5f0f 5\uff09 Allow Header \u3001 Expose Header \u4e0d\u5141\u8bb8\u4f7f\u7528\u901a\u914d\u7b26\uff0c\u5927\u5c0f\u5199\u4e0d\u654f\u611f 6\uff09 \u7f13\u5b58\u65f6\u95f4 \u5982\u679c\u6ca1\u6709\u7279\u6b8a\u60c5\u51b5\u53ef\u4ee5\u914c\u60c5\u8bbe\u7f6e\u5f97\u5927\u4e00\u70b9\uff0c\u9ed8\u8ba4\u4e3a 86400 \u79d2\uff0c\u6700\u5927\u4e3a 604800 \u79d2 \u6587\u4ef6\u53e6\u5b58\u4e3a \u00b6 \u53c8\u62cd\u4e91 CDN \u670d\u52a1\u652f\u6301\u5bf9\u54cd\u5e94\u5934 Content-Disposition \u5b57\u6bb5\u7684\u7279\u6b8a\u8bbe\u7f6e\uff0c\u4e5f\u5373\u5728\u8bf7\u6c42 URL \u4e2d\u52a0\u5165 _upd \u53c2\u6570\u53ef\u5bf9 Content-Disposition \u8fdb\u884c\u7279\u6b8a\u5316\u914d\u7f6e\u3002\u901a\u8fc7\u5bf9\u8be5\u53c2\u6570\u7684\u914d\u7f6e\u5c31\u53ef\u4ee5\u5f3a\u5236\u6d4f\u89c8\u5668\u89e6\u53d1\u4e0b\u8f7d\u884c\u4e3a\uff0c\u540c\u65f6\u8be5\u53c2\u6570\u7684\u503c\u4f1a\u4f5c\u4e3a\u6587\u4ef6\u4e0b\u8f7d\u540e\u4fdd\u5b58\u5230\u672c\u5730\u7684\u6587\u4ef6\u540d\u3002\u7279\u522b\u5730\uff0c\u5f53\u5176\u503c\u4e3a true \u65f6\uff0c\u4fdd\u6301\u539f\u6587\u4ef6\u540d\u4e0d\u53d8\u3002 \u914d\u7f6e\u5f15\u5bfc \u793a\u4f8b\u4e00\uff1a \u8bf7\u6c42\u53c2\u6570\u4e2d\u52a0\u5165 \u201c_upd=true\u201d \uff0c\u4ee3\u8868\u6dfb\u52a0\u54cd\u5e94\u5934\u4e3a\uff1a Content-Disposition: attachment $ curl http://upyun-assets.b0.upaiyun.com/docs/cdn/upyun-cdn-architecture.png?_upd=true -I > HTTP/1.1 200 OK > Content-Type: image/png > Content-Length: 57371 > ... > Accept-Ranges: bytes > Content-Disposition: attachment; \u793a\u4f8b\u4e00\uff1a \u8bf7\u6c42\u53c2\u6570\u4e2d\u52a0\u5165 \u201c_upd=abc.png\u201d\uff0c\u4ee3\u8868\u6dfb\u52a0\u54cd\u5e94\u5934\u4e3a\uff1a Content-Disposition: attachment; filename=\"abc.png\" $ curl http://upyun-assets.b0.upaiyun.com/docs/cdn/upyun-cdn-architecture.png?_upd=abc.png -I > HTTP/1.1 200 OK > Content-Type: image/png > Content-Length: 57371 > ... > Accept-Ranges: bytes > Content-Disposition: attachment; filename=\"abc.png\" \u6ce8\u610f\u4e8b\u9879 \u7279\u522b\u5730\uff0c \u53c2\u6570\u8ddf\u968f \u5f00\u542f\u7684\u60c5\u51b5\u4e0b\uff0c\u6b64\u53c2\u6570\u65e0\u6548\u3002 \u4f20\u9012\u6700\u7ec8\u7528\u6237 IP \u00b6 \u53c8\u62cd\u4e91 CDN \u56de\u5ba2\u6237\u6e90\u7684\u65f6\u5019\u4f1a\u5e26\u4e0a X-Real-IP \u548c X-Forwarded-For \u7684\u8bf7\u6c42\u5934\u4e0b\u53bb\uff0c\u503c\u4e3a\u7528\u6237\u5b9e\u9645\u8bbf\u95ee CDN \u7684\u6765\u6e90 IP \u5730\u5740\u3002\u7279\u522b\u5730\uff0c\u4e3a\u4e86\u517c\u5bb9\u90e8\u5206\u670d\u52a1\u7aef\u7a0b\u5e8f\uff0c\u6211\u4eec\u989d\u5916\u8fd8\u63d0\u4f9b\u4e86 Client-IP \u8bf7\u6c42\u5934\u7684\u652f\u6301\uff0c\u5176\u503c\u548c X-Real-IP \u3001 X-Forwarded-For \u76f8\u540c\u3002 \u5982\u4f55\u4f7f\u7528 1\u3001X-Real-IP \u4f20\u9012\u7528\u6237 IP \u4f7f\u7528\u8be5\u65b9\u5f0f\u4f20\u9012\u6700\u7ec8\u7528\u6237 IP \uff0c\u9700\u8981\u670d\u52a1\u7aef\u4ee3\u7801\u8fdb\u884c\u4e00\u4e9b\u6539\u9020\uff0c\u7f51\u7ad9\u9700\u8981\u6839\u636e\u4f7f\u7528\u7f16\u7a0b\u8bed\u8a00\u7684\u4e0d\u540c\uff0c\u4fee\u6539\u76f8\u5e94\u7684\u4ee3\u7801\u6a21\u5757\uff0c\u624d\u53ef\u4ee5\u4f20\u9012\u6700\u7ec8\u7528\u6237 IP\u3002\u4ee3\u7801\u793a\u4f8b\u5982\u4e0b\uff1a \u793a\u4f8b\u4e00\uff1aPHP \u4ee3\u7801\u00b6 <?php $ip = $_SERVER[\"HTTP_X_REAL_IP\"]; echo $ip; ?> \u793a\u4f8b\u4e8c\uff1a Nginx \u914d\u7f6e\u00b6 server { listen 80; add_header X-Real-IP $http_x_real_ip; } 2\u3001X-Forward-For \u4f20\u9012\u7528\u6237 IP \u56de\u6e90\u8bf7\u6c42\u5934\u4f1a\u9ed8\u8ba4\u4f20\u9012 X-Forwarded-For \u7684\u503c\uff0c\u7528\u6237\u7f51\u7ad9\u65e0\u9700\u4efb\u4f55\u6539\u9020\u3002 \u6ce8\u610f\u4e8b\u9879 1\u3001\u65b0\u589e\u52a0\u901f\u670d\u52a1\u65f6\u6211\u4eec\u4f1a\u9ed8\u8ba4\u4f7f\u7528 X-Real-IP \u548c X-Forwarded-For \u65b9\u5f0f\uff0c\u7f51\u7ad9\u53ea\u9700\u8981\u6309\u7167 \u201c\u5982\u4f55\u4f7f\u7528\u201d \u7ae0\u8282\u4e2d\uff0c\u5bf9\u539f\u5148\u7684\u7528\u6237 IP \u83b7\u53d6\u4ee3\u7801\u8fdb\u884c\u66ff\u6362\u5373\u53ef\uff1b 2\u3001\u7531\u4e8e X-Real-IP \u662f\u53c8\u62cd\u4e91 CDN \u670d\u52a1\u7279\u6709\u7684\u56de\u6e90\u8bf7\u6c42\u5934 \uff0c\u6545\u7ec8\u6b62 CDN \u540e\uff0c\u7f51\u7ad9\u9700\u5c06\u83b7\u53d6\u7528\u6237 IP \u7684\u4ee3\u7801\u4fee\u6539\u4e3a\u539f\u59cb\u4ee3\u7801\uff1b 3\u3001\u5728\u9009\u62e9\u4f7f\u7528 X-Forwarded-For \u8fdb\u884c\u6700\u7ec8\u7528\u6237 IP \u4f20\u9012\u65f6 \uff0c X-Real-IP \u3001 Client-IP \u4e5f\u662f\u540c\u65f6\u4f20\u9012\u7684\uff1b \u81ea\u5b9a\u4e49\u63d0\u793a\u56fe \u00b6 \u652f\u6301\u81ea\u5b9a\u4e49\u9519\u8bef\u72b6\u6001\u8bbe\u7f6e\uff0c\u76ee\u524d\u652f\u6301 403\u3001404\u3001405 \u9519\u8bef\u7801\u81ea\u5b9a\u4e49\u63d0\u793a\u56fe\u7684\u8bbe\u7f6e\u3002\u5982\u672a\u8bbe\u7f6e\uff0c\u5219\u9ed8\u8ba4\u9075\u5faa\u53c8\u62cd\u4e91 CDN \u670d\u52a1\u9ed8\u8ba4\u9519\u8bef\u72b6\u6001\u63d0\u793a\u56fe\u3002 \u914d\u7f6e\u5f15\u5bfc \u767b\u9646 \u53c8\u62cd\u4e91\u7ba1\u7406\u63a7\u5236\u53f0 \uff0c\u4f9d\u6b21\u8fdb\u5165\uff1a\u670d\u52a1 > \u529f\u80fd\u914d\u7f6e > \u9ad8\u7ea7\u670d\u52a1 > \u81ea\u5b9a\u4e49\u63d0\u793a\u56fe\uff0c\u5728\u6b64\u680f\u76ee\u4e0b\u8fdb\u884c\u76f8\u5e94\u56fe\u7247\u7684\u63d0\u793a\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff1a 403 \u63d0\u793a\u56fe \u5f53\u7528\u6237\u8bbe\u7f6e\u4e86\u4f8b\u5982 IP \u7981\u7528\u3001Referer \u7b49\u9632\u76d7\u94fe\u914d\u7f6e\u5e76\u4e14\u5f53\u524d\u7684\u8bf7\u6c42\u4e0e\u89c4\u5219\u4e0d\u5339\u914d\u65f6\uff0c\u5373\u4f1a\u54cd\u5e94 403 \u7ed9\u5ba2\u6237\u7aef\uff0c\u8868\u793a\u8be5\u6b21\u8bf7\u6c42\u88ab\u7981\u6b62\u3002\u53e6\u5916\uff0c\u82e5\u8be5\u670d\u52a1\u8bbe\u7f6e\u4e86\u81ea\u5b9a\u4e49 403 \u63d0\u793a\u56fe\uff0c\u90a3\u4e48\u6b64\u7c7b\u60c5\u51b5\u4e0b\u5c31\u4f1a\u54cd\u5e94\u4e00\u4e2a 302 \u8df3\u8f6c\u5230\u76f8\u5e94\u7684\u56fe\u7247\u3002 404 \u63d0\u793a\u56fe \u5f53\u8bf7\u6c42\u7684\u6587\u4ef6\u4e0d\u5b58\u5728\u65f6\uff0c\u4f1a\u54cd\u5e94 404 \u72b6\u6001\u7801\uff0c\u53ef\u901a\u8fc7\u81ea\u5b9a\u4e49\u63d0\u793a\u56fe\u6765\u5c55\u793a\u3002 405 \u63d0\u793a\u56fe \u6b63\u5e38\u4f7f\u7528\u4e2d\u7684\u670d\u52a1\uff0c\u82e5\u88ab\u4eba\u4e3a\u5730\u8bbe\u7f6e\u4e3a\u7981\u6b62\u5916\u94fe\uff0c\u6b64\u65f6\u8bbf\u95ee\u5c31\u4f1a\u54cd\u5e94 405 \u72b6\u6001\u7801\u3002\u540c\u6837\uff0c405 \u4e5f\u652f\u6301\u81ea\u5b9a\u4e49\u63d0\u793a\u56fe\u8bbe\u7f6e\u3002 \u6ce8\u610f\u4e8b\u9879 1\u3001\u82e5\u6b64\u5904\u672a\u8bbe\u7f6e\u4efb\u4f55\u81ea\u5b9a\u4e49\u63d0\u793a\u56fe\uff0cCDN \u670d\u52a1\u4f1a\u9ed8\u8ba4\u54cd\u5e94\u4e00\u4e2a\u9519\u8bef\u72b6\u6001\u7801\u63d0\u793a\u56fe\uff1b 2\u3001\u6b64\u5904\u81ea\u5b9a\u4e49\u63d0\u793a\u56fe\u7684\u6587\u4ef6\u5927\u5c0f\u9650\u5236\u5728 30KB \u4ee5\u5185\uff1b \u81ea\u5b9a\u4e49 Rewrite \u00b6 \u529f\u80fd\u7b80\u4ecb \u00b6 \u81ea\u5b9a\u4e49 rewrite \u662f\u57fa\u4e8e DSL ( Domain Specific Language ) \u7406\u5ff5\u6765\u8bbe\u8ba1\u7684\uff0c\u4e3b\u8981\u9762\u5411\u5f00\u53d1\u8005\u4f7f\u7528\u3002\u5145\u5206\u5229\u7528\u53c8\u62cd\u4e91 CDN ( Content Delivery Network )\u5206\u5e03\u5f0f\u8fb9\u7f18\u7f51\u7edc\u7684\u6027\u80fd\u53ca\u89c4\u6a21\uff0c\u901a\u8fc7\u53c8\u62cd\u4e91\u7ba1\u7406\u63a7\u5236\u53f0\u53ef\u8f7b\u677e\u521b\u5efa rewrite \u89c4\u5219\uff0c\u89c4\u5219\u652f\u6301\u51fd\u6570\u3001\u53d8\u91cf\u3001\u5b57\u7b26\u4e32\u5e38\u91cf\uff0c\u7528\u6237\u53ef\u4ee5\u5c06\u8fd9\u4e9b\u81ea\u7531\u7ec4\u5408\uff0c\u53ef\u4ee5\u5b9e\u73b0\u5bf9 URL \u7684\u6539\u5199\u3001\u91cd\u5b9a\u5411\u3001\u81ea\u5b9a\u4e49 HTTP \u5934\u3001\u8bf7\u6c42\u7981\u6b62\u7b49\u5904\u7406\u903b\u8f91\u3002 \u5e94\u7528\u573a\u666f \u00b6 \u63d0\u9ad8\u5b89\u5168\u6027\uff1a\u53ef\u4ee5\u6709\u6548\u7684\u907f\u514d\u4e00\u4e9b\u53c2\u6570\u540d\u3001ID \u7b49\u5b8c\u5168\u66b4\u9732\u5728\u7528\u6237\u9762\u524d\uff1b URL \u7f8e\u5316\uff1a\u53bb\u9664\u4e86\u90a3\u4e9b\u6bd4\u5982 *.do \u4e4b\u7c7b\u7684\u540e\u7f00\u540d\u3001\u957f\u957f\u7684\u53c2\u6570\u4e32\u7b49\uff0c\u53ef\u4ee5\u81ea\u5df1\u7ec4\u7ec7\u7cbe\u7b80\u66f4\u80fd\u53cd\u6620\u8bbf\u95ee\u6a21\u5757\u5185\u5bb9\u7684 URL\uff1b \u63d0\u9ad8\u7f51\u7ad9 SEO\uff1a\u901a\u8fc7 URL Rewrite \u4e4b\u540e\uff0c\u66f4\u6709\u5229\u4e8e\u641c\u7d22\u5f15\u64ce\u7684\u6536\u5165\uff0c\u901a\u8fc7\u5bf9 URL \u7684\u4e00\u4e9b\u4f18\u5316\uff0c\u53ef\u4ee5\u4f7f\u641c\u7d22\u5f15\u64ce\u66f4\u597d\u7684\u8bc6\u522b\u4e0e\u6536\u5f55\u7f51\u7ad9\u7684\u4fe1\u606f\uff1b HTTP \u5934\u6539\u5199\uff1a\u65b0\u589e\u3001\u5220\u9664 HTTP \u8bf7\u6c42\u5934\uff0c\u65b0\u589e\u3001\u5220\u9664 HTTP \u54cd\u5e94\u5934\u7b49\u5904\u7406\u903b\u8f91\uff1b \u9632\u76d7\u94fe\u8bbe\u7f6e\uff1a\u53ef\u4ee5\u5f88\u7075\u6d3b\u3001\u9ad8\u6548\u7684\u7f16\u5199\u9632\u76d7\u94fe\u89c4\u5219\u548c\u5904\u7406\u903b\u8f91\uff0c\u53ef\u4ee5\u5b9e\u73b0\u9ad8\u5f3a\u5ea6\u7684\u9632\u76d7\u94fe\u89c4\u5219\uff1b \u8fb9\u7f18\u91cd\u5b9a\u5411\uff1a\u53ef\u4ee5\u6839\u636e\u7279\u6b8a\u7684\u4e1a\u52a1\u903b\u8f91\uff0c\u89e6\u53d1\u67d0\u4e2a\u6761\u4ef6\u4e4b\u540e\uff0c\u53ef\u5c06\u8bf7\u6c42\u91cd\u5b9a\u5411\u5230\u7279\u5b9a\u7684\u5730\u5740\u7b49\u7b49\uff1b \u89c4\u5219\u8bf4\u660e \u00b6 \u4e3a\u4e86\u66f4\u597d\u7684\u7406\u89e3 rewrite \u89c4\u5219\uff0c\u672c\u8282\u56f4\u7ed5 rewrite \u89c4\u5219\u914d\u7f6e\u9879\u548c\u89c4\u5219\u793a\u4f8b\u6765\u8fdb\u884c\u8be6\u7ec6\u8bf4\u660e\uff0c\u5148\u6765\u4e86\u89e3\u4e0b\u914d\u7f6e\u622a\u56fe\uff0c\u5982\u4e0b\u622a\u56fe\u6240\u793a\uff1a \u5982\u4e0a\u6240\u793a\uff0c\u914d\u7f6e\u4e00\u6761\u5b8c\u6574\u7684 rewrite \u89c4\u5219\u9700\u8981\u5b8c\u6210 Rewrite \u89c4\u5219 \u3001 URI \u63d0\u53d6\u6b63\u5219 \u3001 break \u3001 \u8c03\u8bd5\u6a21\u5f0f \u3001 \u5907\u6ce8 \u8fd9 5 \u4e2a\u9009\u9879\u7684\u914d\u7f6e\uff0c\u5176\u4e2d Rewrite \u89c4\u5219 \u4e3a\u5fc5\u586b\u9879\uff0c URI \u63d0\u53d6\u6b63\u5219 \u548c \u5907\u6ce8 \u4e3a\u53ef\u586b\u9879\uff0c break \u548c \u8c03\u8bd5\u6a21\u5f0f \u4e3a\u63a7\u5236\u5f00\u5173\uff0c\u53ef\u6839\u636e\u9700\u8981\u6765\u8fdb\u884c\u5f00\u542f\u548c\u5173\u95ed\u3002 \u4e0b\u9762\u6211\u4eec\u6765\u7ed3\u5408\u914d\u7f6e\u597d\u7684\u89c4\u5219\u793a\u4f8b\u6765\u8bf4\u660e\u4e0b\u6bcf\u4e2a\u914d\u7f6e\u9879\u7684\u4f5c\u7528\uff0c\u5982\u4e0b\u4e3a\u4e00\u7ec4 rewrite \u89c4\u5219\u96c6\uff0c\u5305\u62ec\u4e24\u6761 rewrite \u89c4\u5219\uff1a -- JSON [ rules[ { rule : $WHEN($EQ($_HOST, 'images.foo.com'))/$1, pattern : ^/images/(.*)$ break : true, debug : true, description : URL\u6539\u5199, }, { rule : /movies/$1, pattern : /download/(.*)$ break : true, debug : true, description : \u76ee\u5f55\u6539\u5199, }, ] \u901a\u8fc7\u4ee5\u4e0a\u89c4\u5219\u96c6\u7684\u4e86\u89e3\uff0c\u4e0b\u9762\u6211\u4eec\u9488\u5bf9\u89c4\u5219\u96c6\u91cc\u9762\u7684\u6bcf\u4e2a\u90e8\u5206\u505a\u76f8\u5e94\u7684\u4ecb\u7ecd\u548c\u89e3\u91ca\uff1a pattern \u4e3a\u5bf9\u5f53\u524d\u8bf7\u6c42 URI \u8fdb\u884c\u5339\u914d\u7684 PCRE \u6b63\u5219\u8868\u8fbe\u5f0f\uff0c\u5339\u914d\u540e\uff0c\u4ea7\u751f $1, $2 ... \u8fd9\u6837\u7684\u53d8\u91cf\uff0c\u5bf9\u5e94\u914d\u7f6e\u9879\u91cc\u9762\u7684 URI \u63d0\u53d6\u6b63\u5219 \uff1b rule rewrite \u89c4\u5219\u4e3b\u8981\u7ec4\u6210\u90e8\u5206\uff0c\u4ee3\u8868\u6700\u7ec8\u7684\u5904\u7406\u903b\u8f91\uff0c\u8be6\u7ec6\u8bf7\u770b\u8bed\u6cd5\u89c4\u5219\u90e8\u5206\uff0c\u5bf9\u5e94\u914d\u7f6e\u9879\u91cc\u9762\u7684 rewrite \u89c4\u5219 \uff1b break \u8868\u793a\u5982\u679c\u6b64\u6b21 rewrite \u6210\u529f\u540e\u662f\u5426\u8981\u7ec8\u6b62\u5269\u4e0b\u7684\u7684 rewrite \u8fc7\u7a0b\uff1b debug \u662f\u4e00\u4e2a\u8c03\u8bd5\u5f00\u5173\uff0c\u9ed8\u8ba4\u5f00\u542f\uff0c\u5bf9\u5e94\u914d\u7f6e\u622a\u56fe\u91cc\u9762\u7684 \u8c03\u8bd5\u6a21\u5f0f \uff1b description \u7528\u6765\u63cf\u8ff0\u8be5\u89c4\u5219\u7684\u7528\u9014\uff1b \u5bf9\u5e94\u914d\u7f6e\u9879\u91cc\u9762\u7684 \u5907\u6ce8 \u3002 \u8c03\u8bd5\u6a21\u5f0f \u7531\u4e8e rewrite \u8fc7\u7a0b\u4f1a\u5bf9\u5f53\u524d\u8bf7\u6c42\u4ea7\u751f\u526f\u4f5c\u7528\uff0c\u8fd9\u662f\u975e\u5e38\u5371\u9669\u7684\uff0c\u4f8b\u5982\u968f\u610f\u7684\u586b\u5199\u4e00\u6761 rewrite \u89c4\u5219\uff1a /foo \u6b64\u89c4\u5219\u4f1a\u5c06\u6240\u6709\u8bf7\u6c42\u7684 URI \u6539\u5199\u6210 /foo \uff0c\u8fd9\u6837\u5ba2\u6237\u7aef\u6240\u6709\u8bf7\u6c42\u7684\u54cd\u5e94\u5c31\u53d8\u6210 404 \u4e86\uff0c \u8fd9\u662f\u60a8\u6781\u4e0d\u613f\u610f\u770b\u5230\u7684\u7ed3\u679c\u3002\u6211\u4eec\u5141\u8bb8\u5bf9 rewrite \u89c4\u5219\u8fdb\u884c\u8c03\u8bd5\uff0c\u5373\u65b0\u589e\u52a0\u4e00\u6761\u89c4\u5219\u65f6\uff0c \u8c03\u8bd5\u6a21\u5f0f \u5f00\u5173\u4f1a\u9ed8\u8ba4\u6253\u5f00\uff0c\u8fd9\u6837\u6dfb\u52a0\u89c4\u5219\u540e\uff0c\u5373\u4f7f\u5f53\u524d\u8bf7\u6c42\u547d\u4e2d\u8be5 rewrite \u89c4\u5219\uff0c rewrite \u8fc7\u7a0b\u4e5f\u4e0d\u4f1a\u751f\u6548\uff0c\u53ea\u6709\u5f53\u5305\u542b\u4ee5\u4e0b\u8bf7\u6c42\u5934\u65f6\uff0crewrite \u8fc7\u7a0b\u624d\u4f1a\u751f\u6548\uff1a X-Upyun-Rewrite-Preview: true \u4f7f\u7528\u547d\u4ee4\u884c\u5de5\u5177 curl \u5373\u53ef\u5bf9\u89c4\u5219\u8c03\u8bd5\uff1a curl -H \"X-Upyun-Rewrite-Preview: true\" http://your-domain/foo/bar.html -v \u8fd9\u6837\u7ecf\u8fc7\u8c03\u8bd5\uff0c\u786e\u5b9a\u8be5 rewrite \u8fc7\u7a0b\u7b26\u5408\u9884\u671f\u540e\uff0c\u5373\u53ef\u5c06 \u8c03\u8bd5\u6a21\u5f0f \u5173\u95ed\uff0c\u6b64\u65f6\u8be5 rewrite \u8fc7\u7a0b\u4f1a\u5bf9\u6240\u6709\u547d\u4e2d\u7684\u8bf7\u6c42\u751f\u6548\u3002 \u6ce8\u610f\uff1a\u7279\u522b\u5730\uff0c\u8c03\u8bd5\u6a21\u5f0f\u76ee\u524d\u4ec5\u9488\u5bf9 URI \u548c ARGS \u4fee\u6539\u4ee5\u53ca\u4e00\u4e9b\u51fd\u6570\u6709\u6548\uff0c\u53d7 \u8c03\u8bd5\u6a21\u5f0f \u5f00\u5173\u5f71\u54cd\u7684 rewrite \u64cd\u4f5c\u6709\uff1a - $LIMIT_RATE_AFTER() - $LIMIT_RATE - $DEL_REQ_HEADER(E) - $REDIRECT(E1,E2) - $DEL_ARG(E) - $EXIT(E1,E2) - $ADD_REQ_HEADER - \u4fee\u6539 URI \u548c ARGS \u7684\u64cd\u4f5c \u8bed\u6cd5\u89c4\u5219 \u00b6 \u51fd\u6570 \u51fd\u6570\u8c03\u7528\u4ee5 $ \u5f00\u5934\uff0c\u540e\u8ddf\u4e00\u7ec4\u5927\u5199\u5b57\u6bcd\uff0c\u5b57\u6bcd\u4e4b\u95f4\u53ef\u4ee5\u5305\u542b\u4e0b\u5212\u7ebf _ \uff0c\u51fd\u6570\u9700\u8981\u7684\u53c2 \u6570\u653e\u5728 () \u4e2d\uff0c\u4ee5 , \u5206\u9694\u3002\u5982\u679c\u6ca1\u6709\u7279\u522b\u8bf4\u660e\uff0crewrite \u4e2d\u7684\u51fd\u6570\u53c2\u6570\u4e2a\u6570\u4e0d\u80fd\u5c11\u4e8e\u8981\u6c42\u7684\u53c2\u6570\u4e2a\u6570\uff0c\u5426\u5219\u89c6\u4e3a\u8bed\u6cd5\u9519\u8bef\uff0c\u7136\u540e\u7ec8\u6b62 rewrite \u8fc7\u7a0b\uff0c\u591a\u4f59\u7684\u53c2\u6570\u4f1a\u88ab\u6c42\u503c\uff0c\u4f46\u4e0d\u5f71\u54cd\u8c03\u7528\u3002\u51fd\u6570\u8c03\u7528\u662f\u6709\u4e0a\u4e0b\u6587\u7684\uff0c\u8b6c\u5982 $WHEN \u8fd9\u4e2a\u51fd\u6570\uff0c\u53c2\u6570\u662f bool \u7c7b \u578b\uff0c\u53c2\u6570\u4e2d\u6709\u4e0d\u6210\u7acb\u7684\u6761\u4ef6 false \u65f6\uff0c\u4f1a\u7ec8\u6b62 rewrite \u8fc7\u7a0b\u3002\u652f\u6301\u7684\u51fd\u6570\u6709\uff1a \u6761\u4ef6\u9009\u62e9\u548c\u5224\u65ad \u51fd\u6570 \u542b\u4e49 $WHEN(E1, E2, ...) \u6240\u6709\u6761\u4ef6\u90fd\u6210\u7acb\u65f6\u624d\u8fdb\u884c rewrite \uff0c\u5e76\u8fd4\u56de\u7a7a\u5b57\u7b26\u4e32 $NOT(E) E \u4e0d\u6210\u7acb\u65f6\u8fd4\u56de true \uff0c \u5426\u5219\u8fd4\u56de false $ALL(E1, E2, ...) \u6240\u6709\u6761\u4ef6\u90fd\u6210\u7acb\u65f6\u8fd4\u56de true \uff0c\u5426\u5219\u8fd4\u56de false \uff0c\u53c2\u6570\u4e2a\u6570\u4e0d\u9650 $ANY(E1, E2, ...) \u5176\u4e2d\u4e00\u4e2a\u6761\u4ef6\u6210\u7acb\u65f6\u8fd4\u56de true \uff0c\u5426\u5219\u8fd4\u56de false \uff0c\u53c2\u6570\u4e2a\u6570\u4e0d\u9650 $OR(E1, E2, ...) \u503c\u4e3a\u7b2c\u4e00\u4e2a\u4e3a\u771f\u7684\u8868\u8fbe\u5f0f $SELECT(E1, E2, E3) E1 \u4e3a\u771f\u65f6\u503c\u4e3a E2 \uff0c\u5426\u5219\u4e3a E3 $PCALL(E) \u4fdd\u62a4\u6a21\u5f0f\u4e0b\u89e3\u6790 E \uff0c\u5931\u8d25\u65f6\u8fd4\u56de\u7a7a\u5b57\u7b26\u4e32 \u5b57\u7b26\u5339\u914d\u548c\u6355\u83b7 \u51fd\u6570 \u542b\u4e49 $MATCH(E1, E2) PCRE \u5339\u914d\uff0c E2 \u4e3a\u8981\u5339\u914d\u7684 pattern\uff0c\u8fd4\u56de true \u6216\u8005 false $CAPTURE(E1, E2, E3) \u6309 E2 pattern \u5bf9 E1 \u8fdb\u884c\u6355\u83b7\uff0c E3 \u8868\u793a\u662f\u5426\u5ffd\u7565\u5927\u5c0f\u5199\uff0c\u6355\u83b7\u540e\u751f\u6210 $n.m \u5f62\u5f0f\u7684\u53d8\u91cf\uff0c n \u4e3a\u5f53\u524d CAPTURE \u51fa\u73b0\u7684\u6b21\u5e8f\uff0c m \u8868\u793a\u5339\u914d\u5206\u7ec4\uff1b E2 \u4e3a\u7a7a\u65f6\uff0c\u8868\u793a\u5bf9 E1 \u8fdb\u884c\u6355\u83b7\uff0c\u6b64\u65f6 E1 \u5bf9\u5e94 $n.0 \u8bf7\u6c42/\u54cd\u5e94\u4fee\u6539 \u51fd\u6570 \u542b\u4e49 $ADD_REQ_HEADER(E1, E2) \u6dfb\u52a0\u8bf7\u6c42\u5934 E1 \u4e3a E2 $DEL_REQ_HEADER(E) \u5220\u9664\u8bf7\u6c42\u5934 E $ADD_RSP_HEADER(E1, E2) \u6dfb\u52a0\u54cd\u5e94\u5934 E1 \u4e3a E2 $DEL_ARG(E) \u5220\u9664\u8bf7\u6c42\u53c2\u6570\u9879 E $SET_METHOD(E) \u4fee\u6539\u5f53\u524d HTTP \u8bf7\u6c42\u65b9\u6cd5\u4e3a E \uff0c E \u53ef\u9009\u503c\u6709\uff1a GET , HEAD , PUT , POST , DELETE , OPTIONS , PATCH ; \u6ce8 1 $SET_BODY(E) \u4fee\u6539\u5f53\u524d HTTP \u8bf7\u6c42\u4f53\u7684\u5185\u5bb9\u4e3a E \uff0c\u4ec5\u5728 PUT \u6216 POST \u8bf7\u6c42\u4e0b\u6709\u6548 $REDIRECT(E1, E2) \u91cd\u5b9a\u5411\u5730\u5740\u5230 E1 \uff0c\u72b6\u6001\u7801\u4e3a E2(301, 302) $EXIT(E1, E2) \u4ee5\u72b6\u6001\u7801 E1 \u9000\u51fa\uff0c\u54cd\u5e94\u4f53\u4e3a E2 \u6570\u503c\u8ba1\u7b97 \u51fd\u6570 \u542b\u4e49 $ADD(E1, E2) \u6570\u5b57\u76f8\u52a0\uff0c\u8fd4\u56de E1 + E2 \u7ed3\u679c\u6570\u503c $MOD(E1, E2) \u6570\u5b57\u53d6\u4f59\uff0c\u8fd4\u56de E1 % E2 \u7ed3\u679c\u6570\u503c\uff0c\u5176\u4e2d E2 \u4e0d\u80fd\u4e3a 0 $MSUB(E1, E2) \u6570\u5b57\u76f8\u51cf\uff0c\u8fd4\u56de E1 - E2 \u7ed3\u679c\u6570\u503c $MULTIPLY(E1, E2) \u6570\u5b57\u76f8\u4e58\uff0c\u8fd4\u56de E1 * E2 \u7ed3\u679c\u6570\u503c $DIVIDE(E1, E2) \u6570\u5b57\u76f8\u9664\uff0c\u8fd4\u56de E1 / E2 \u7ed3\u679c\u6570\u503c\uff0c\u5176\u4e2d E2 \u4e0d\u80fd\u4e3a 0 $BYTE(E) \u8fd4\u56de\u5b57\u7b26 E \u7684 ASCII \u7f16\u7801\u503c $FLOOR(E) \u8fd4\u56de\u5c0f\u4e8e\u6216\u7b49\u4e8e\u6570\u5b57 E \u7684\u6700\u5927\u6574\u6570 $CEIL(E) \u8fd4\u56de\u5927\u4e8e\u6216\u7b49\u4e8e\u6570\u5b57 E \u7684\u6700\u5c0f\u6574\u6570 $GT(E1, E2) \u6570\u5b57\u6bd4\u8f83\uff0c\u662f\u5426\u5927\u4e8e\uff0c\u8fd4\u56de true \u6216\u8005 false $GE(E1, E2) \u6570\u5b57\u6bd4\u8f83\uff0c\u662f\u5426\u5927\u4e8e\u7b49\u4e8e\uff0c\u8fd4\u56de true \u6216\u8005 false \u5b57\u7b26\u4e32\u64cd\u4f5c \u51fd\u6570 \u542b\u4e49 $SUB(E1, from, to) \u5b57\u7b26\u4e32\u622a\u53d6\uff0c\u4ece from \u5230 to $EQ(E1, E2) \u5b57\u7b26\u4e32\u662f\u5426\u76f8\u7b49\uff0c\u8fd4\u56de true \u6216\u8005 false $UPPER(E) \u5c06 E \u8f6c\u6362\u4e3a\u5927\u5199 $LOWER(E) \u5c06 E \u8f6c\u6362\u4e3a\u5c0f\u5199 $LEN(E) \u8fd4\u56de\u5b57\u7b26\u4e32 E \u7684\u957f\u5ea6 \u901a\u7528\u529f\u80fd\u7c7b\u51fd\u6570 \u51fd\u6570 \u542b\u4e49 $ENCODE_BASE64(E) \u5c06\u5b57\u7b26\u4e32 E \u6309 base64 \u7f16\u7801\u538b\u7f29 $DECODE_BASE64(E) \u5c06\u5b57\u7b26\u4e32 E \u6309 base64 \u7f16\u7801\u89e3\u538b $MD5(E) \u8ba1\u7b97 E \u7684 md5 \u503c $RANDI(E1, E2) \u8fd4\u56de\u5927\u4e8e E1 \u5e76\u5c0f\u4e8e E2 \u7684\u968f\u673a\u6570\u503c $UNIXT(y, m, d, h, min, sec) \u6307\u5b9a\u5e74\uff0c\u6708\uff0c\u65e5\uff0c\u5c0f\u65f6\uff0c\u5206\u949f\uff0c\u79d2\uff0c\u8fd4\u56de\u76f8\u5e94\u7684 UNIX TIME $INT(E1, E2, E3) \u8fdb\u5236\u8f6c\u6362\uff0c\u5c06 E2 \u8fdb\u5236\u7684\u6570\u5b57\uff08\u5b57\u7b26\u4e32\u5f62\u5f0f\uff09 E1 \u8f6c\u6362\u6210 E3 \u8fdb\u5236\u5e76\u8fd4\u56de\uff0c E2 , E3 \u53ef\u9009\uff0c E2 \u9ed8\u8ba4\u4e3a 10 \u9650\u901f\u76f8\u5173 \u51fd\u6570 \u542b\u4e49 $LIMIT_RATE_AFTER(E1, E2) \u9650\u901f\u7b56\u7565\u8bbe\u7f6e\uff0c\u53d1\u9001 E1 \u5927\u5c0f\u5355\u4f4d\u4e3a E2 \u5b57\u8282\u6570\u636e\u540e\uff0c\u8fdb\u884c\u9650\u901f\uff0c E2 \u53ef\u9009\u503c\u6709\uff1a k \uff08KB)\uff0c m \uff08MB\uff09 $LIMIT_RATE(E1, E2) \u9650\u901f\u7b56\u7565\u8bbe\u7f6e\uff0c\u6309 E1 \u5927\u5c0f\u6bcf\u79d2\u8fdb\u884c\u9650\u901f\uff0c\u5355\u4f4d\u4e3a E2 \uff0c E2 \u53ef\u9009\u503c\u6709\uff1a k \uff08KB)\uff0c m \uff08MB\uff09 \u6ce8 1\uff1a\u82e5\u5f53\u524d\u8bf7\u6c42\u5e26\u6709\u8bf7\u6c42\u4f53\u7684\u60c5\u51b5\u4e0b\uff0c $SET_METHOD(E) \u4e0d\u5141\u8bb8\u8bbe\u7f6e\u4e3a\u9664 PUT \u548c POST \u4ee5\u5916\u7684\u65b9\u6cd5\u3002 \u5176\u4e2d E[n] \u4ee3\u8868\u5408\u6cd5\u7684\u8868\u8fbe\u5f0f\uff0c\u4e5f\u5c31\u662f\u8bf4\u51fd\u6570\u53ef\u4ee5\u76f8\u4e92\u5d4c\u5957\uff0c\u4f8b\u5982\u89c4\u5219\u53ef\u4ee5\u4e3a\uff1a /$SUB($DECODE_BASE64($_HEADER_foo), $_GET_from, $_GET_to)/ \uff1b\u5e03\u5c14\u51fd\u6570\u5305\u62ec WHEN , ALL, ANY \u90fd\u662f\u77ed\u8def\u7684\uff0c\u8b6c\u5982 $WHEN($ALL(), $EXIT(403)) \u4e0d\u4f1a\u8fd4\u56de 403 \uff0c\u56e0\u4e3a $ALL() \u7684\u503c\u4e3a false \u4f7f\u7528 '' \u80fd\u5bf9\u53d8\u91cf\u8fdb\u884c\u8f6c\u4e49\uff0c\u4f7f\u5176\u4e0d\u88ab\u89e3\u91ca\uff0c\u4f8b\u5982\u4ee5\u4e0b\u89c4\u5219\uff1a /foo/'$_HOST' \u4f1a\u88ab\u8f6c\u6362\u4e3a: /foo/$_HOST \u5bf9\u4e8e\u542b\u6709\u8bf7\u6c42\u53c2\u6570\u7684\u89c4\u5219\uff0c\u539f\u5148\u7684\u8bf7\u6c42\u53c2\u6570\u4f1a\u9644\u52a0\u5230\u540e\u9762\uff0c\u5982\u679c\u4e0d\u5e0c\u671b\u8fd9\u6837\uff0c\u53ef\u4ee5\u653e\u7f6e\u4e00\u4e2a '?' \u5728\u89c4\u5219\u7684\u6700\u540e\u9762\uff0c\u4f8b\u5982\u8fd9\u6837\uff1a /foo?bar=$1? \u7279\u522b\u5730\uff0c\u5982\u679c\u91cd\u5199\u540e\u7684 URL \u6ca1\u6709\u53c2\u6570\uff0c\u90a3\u4e48\u6b64\u65f6\u9700\u8981\u5728\u6700\u540e\u52a0\u4e24\u4e2a ? \uff0c\u4f8b\u5982\u8fd9\u6837\uff1a /foo?? \u53d8\u91cf \u53d8\u91cf\u4ee5 $_ \u5f00\u5934\uff0c\u8fd9\u4e9b\u53d8\u91cf\u90fd\u662f\u5bf9\u6b64\u6b21\u8bf7\u6c42\u4e0a\u4e0b\u6587\u4e2d\u4e00\u4e9b\u53c2\u6570\u7684\u6620\u5c04\uff0c\u8b6c\u5982 $_HOST \u5bf9\u5e94\u6b64\u6b21\u8bf7\u6c42\u5934\u4e2d\u7684 Host \u5b57\u6bb5\uff0c $_GET_foo \u5bf9\u5e94\u6b64\u6b21\u8bf7\u6c42 URL \u53c2\u6570 foo \u7684\u503c\uff0c\u7b49\u7b49\u3002\u82e5\u5c06\u53d8\u91cf\u5185\u63d2\u5230\u91cd\u5199\u540e\u7684 URL \u4e2d\uff0c\u8b6c\u5982 rewrite /$_GET_foo/bar \uff0c\u5982\u679c\u8bf7\u6c42\u53c2\u6570\u4e2d\u6ca1\u6709 foo \u5219\u89c6\u4e3a\u6b64\u6b21 rewrite \u5931\u8d25\uff1b\u82e5\u5c06\u53d8\u91cf\u653e\u5728\u51fd\u6570\u4e2d\uff0c\u5219\u7531\u8be5\u51fd\u6570\u786e\u5b9a\u8fd4\u56de\u7684\u503c\uff0c\u4f8b\u5982 $NOT($_GET_foo) \uff0c\u5982\u679c\u53c2\u6570\u4e2d\u5305\u542b foo \uff0c\u5219\u8fd4\u56de false \uff0c\u5426\u5219\u8fd4\u56de true \u3002\u76ee\u524d\u652f\u6301\u7684\u53d8\u91cf\u6709\uff1a \u53d8\u91cf \u542b\u4e49 $_IP \u5ba2\u6237\u7aef IP $_HOST \u8bf7\u6c42\u5934\u4e2d\u7684 Host \u5b57\u6bb5 $_HOST_n $_HOST_n \u6307 Host \u4e2d\u7684\u7b2c n \u4e2a\u5b50\u57df\uff0c\u4f8b\u5982\u5bf9\u4e8e foo.bar.baz.com\uff1a $_HOST_1 = foo\uff0c$_HOST_2 = bar\uff0c$_HOST_3 = baz $_GET_name \u4f7f\u7528 Query String \u4e2d\u7684\u53d8\u91cf\uff08\u65e0\u9700 urldecode\uff09 $_POST_name \u4f7f\u7528 POST \u8868\u5355\u4e2d\u7684\u53d8\u91cf\uff08\u53ea\u652f\u6301 www form \uff09 $_HEADER_name \u4f7f\u7528 Header \u4e2d\u7684\u503c\uff0c\u6ce8\u610f name \u5168\u4e3a\u5c0f\u5199 $_COOKIE_name \u4f7f\u7528 Cookie \u4e2d\u7684\u5b57\u6bb5\u503c $_RANDOM \u968f\u673a\u5b57\u7b26\u4e32\uff0c\u5b57\u7b26\u96c6\u4e3a [a-zA-Z0-9] \uff0c\u9ed8\u8ba4 8 \u4f4d $_RANDOM_n n \u4f4d\u968f\u673a\u5b57\u7b26\u4e32\uff0c\u5176\u4e2d 1 <= n <= 32 $_URI \u8bf7\u6c42\u7684 URI\uff0c\u4e0d\u5305\u542b\u53c2\u6570 $_QUERY Query String\uff0c\u4e0d\u5e26\u524d\u7f00 '?' $_METHOD GET/POST/PUT/POST/DELETE/OPTIONS/PATCH $_SCHEME HTTP/HTTPS $_TIME \u83b7\u53d6\u5f53\u524d\u670d\u52a1\u5668\u65f6\u95f4\uff0c\u683c\u5f0f\u4e3a UNIX TIME $_BODY \u83b7\u53d6\u5f53\u524d\u8bf7\u6c42\u7684 BODY\uff08\u8bf7\u6c42\u4f53\uff09\u5185\u5bb9\uff0c\u5927\u5c0f\u9650\u5236\u4e3a 16KB \u5b57\u7b26\u4e32\u5e38\u91cf \u5b57\u7b26\u4e32\u5e38\u91cf\u6709\u4e24\u79cd\u5f62\u5f0f\uff0c\u7b2c\u4e00\u79cd\u5c31\u662f\u666e\u901a\u7684\u5b57\u7b26\u4e32\u4f8b\u5982 /foo/bar \uff0c\u4f46\u662f\u5982\u679c\u5b57\u7b26\u4e32\u4e2d\u5305\u542b\u4e86\u4e00\u4e9b\u7279\u6b8a\u5b57\u7b26\uff0c\u4f8b\u5982\u7a7a\u767d\u5b57\u7b26\u5c06\u88ab\u7701\u7565\uff0c\u4f8b\u5982 $(),' \u8fd9\u4e9b\u5b57\u7b26\u6709\u7279\u6b8a\u7684\u7528\u9014\uff0c\u4e0d\u80fd\u88ab\u76f4\u63a5\u4f7f\u7528\uff0c\u8981\u4f7f\u7528\u8fd9\u4e9b\u7279\u6b8a\u7684\u5b57\u7b26\uff0c\u8981\u52a0 \\ \u524d\u7f00\u5bf9\u5176\u8f6c\u4e49\uff0c\u4f8b\u5982 /foo/bar\\, \uff1b\u7b2c\u4e8c\u79cd\u662f\u52a0\u5355\u5f15\u53f7\u7684\u5b57\u7b26\u4e32 '' \uff0c\u5355\u5f15\u53f7\u4e2d\u7684\u5b57\u7b26\u53ea\u6709 \\ \u662f\u7279\u6b8a\u8f6c\u4e49\u5b57\u7b26\u524d\u7f00\uff0c\u5176\u4ed6\u7684\u90fd\u89c6\u4e3a\u666e\u901a\u5b57\u7b26\uff0c\u4f8b\u5982\u8fd9\u6837\u4e00\u6761 rewrite \u89c4\u5219 /foo/'$\\\\,\\'' \uff0crewrite \u8fc7\u540e\u5bf9\u5e94 /foo/$\\,' \u3002 break \u9664\u4e86\u80fd\u52fe\u9009 break \u9009\u9879 \u6307\u5b9a\u662f\u5426 break \uff0c\u4e5f\u53ef\u4ee5\u76f4\u63a5\u5728 rewrite \u89c4\u5219\u6700\u540e\u52a0\u4e0a $$ \u8868\u793a break \u3002 \u914d\u7f6e\u5f15\u5bfc \u00b6 \u767b\u9646 \u7ba1\u7406\u63a7\u5236\u53f0 \uff0c\u4f9d\u6b21\u8fdb\u5165\uff1a\u670d\u52a1 > \u529f\u80fd\u914d\u7f6e > \u9ad8\u7ea7\u529f\u80fd > \u81ea\u5b9a\u4e49 Rewrite\uff0c\u70b9\u51fb\u7ba1\u7406\u5373\u53ef\u5f00\u59cb\u914d\u7f6e\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u7ecf\u5178\u6848\u4f8b \u00b6 1\u3001\u81ea\u5b9a\u4e49\u9632\u76d7\u94fe \u9700\u6c42\u63cf\u8ff0\uff1a\u5c06\u8bf7\u6c42 URL \u6309\u7167\u4e00\u5b9a\u7684\u7b97\u6cd5\u89c4\u5219\u5b9e\u73b0 token \u9632\u76d7\u94fe\uff0c\u4f7f\u7528\u81ea\u5b9a\u4e49 rewrite \u6765\u5b9e\u73b0\uff0c\u4f1a\u66f4\u52a0\u7075\u6d3b\u548c\u9ad8\u6548\u3002token \u9632\u76d7\u94fe\u8be6\u89e3\u8bf7\u53c2\u89c1\uff1ahttps://blog.upyun.com/?p=1177 \u8bf7\u6c42 URL \u793a\u4f8b\uff1a /test.ts?key=68ddbe535557d6630a19cebde0cb9252&t=1481106349 \u4ee5\u4e0a\u8bf7\u6c42 URL \u662f\u6309\u7167\u5982\u4e0b\u7b97\u6cd5\u751f\u6210\u7684\uff0c\u53c2\u89c1\u5982\u4e0b\u7b97\u6cd5\u8bf4\u660e\uff1a <?php $etime = time() + 600; // \u6388\u6743 10 \u5206\u949f\u540e\u8fc7\u671f $key = 'abc'; // token \u9632\u76d7\u94fe\u5bc6\u94a5 $path = '/test.ts'; // \u6587\u4ef6\u76f8\u5bf9\u8def\u5f84 $url = $path.'?key='.md5($key.$etime.$path).'&t='.$etime; echo $url; ?> CDN \u8282\u70b9\u9700\u8981\u8fdb\u884c\u4e24\u5c42\u5224\u65ad\uff0c\u4e00\u5c42\u5c31\u662f\u5bf9\u65f6\u95f4\u6233\u8fdb\u884c\u6bd4\u8f83\uff0c\u53e6\u5916\u4e00\u5c42\u5c31\u662f\u6309\u7167\u7ea6\u5b9a\u7684\u89c4\u5219\u751f\u6210\u9a8c\u8bc1\u4fe1\u606f\u5e76\u8fdb\u884c\u6bd4\u8f83\uff0c\u770b\u662f\u5426\u4e00\u81f4\u3002\u6309\u7167\u8981\u6c42\uff0c\u53ef\u7f16\u5199\u5982\u4e0b\u89c4\u5219\u96c6\u6765\u5b9e\u73b0\u4ee5\u4e0a\u8981\u6c42\uff1a rules: { \"rule\": \"$WHEN($MATCH($_URI, '.ts$'),$OR($NOT($_GET_t),$NOT($_GET_key)))$EXIT(403)\", \"pattern\": \"\" }, { \"rule\": \"$WHEN($MATCH($_URI, '.ts$'),$GT($_TIME, $_GET_t))$EXIT(401)\", \"pattern\": \"\" }, { \"rule\": \"$WHEN(($MATCH($_URI, '.ts$'),$NOT($EQ($MD5('abc'$_GET_t$_URI),$LOWER($_GET_key))))$EXIT(403)\", \"pattern\": \"\" } \u89c4\u5219\u91ca\u4e49\uff1a \u7b2c\u4e00\u6761\uff1a\u5f53\u6587\u4ef6\u540e\u7f00\u4e3a ts \u65f6\uff0c\u5224\u65ad\u8bf7\u6c42 URL \u91cc\u9762\u662f\u5426\u5b58\u5728 t \u548c key \u53c2\u6570\uff0c\u5982\u679c\u5176\u4e2d\u4e00\u4e2a\u4e0d\u5b58\u5728\uff0c\u5219\u8fd4\u56de 403\uff1b \u7b2c\u4e8c\u6761\uff1a\u5f53\u6587\u4ef6\u540e\u7f00\u4e3a ts \u65f6\uff0c\u5224\u65ad\u5f53\u524d CDN \u8282\u70b9 UNIX \u65f6\u95f4\u662f\u5426\u5927\u4e8e\u8bf7\u6c42\u53c2\u6570\u91cc\u9762\u7684\u65f6\u95f4\u6233\uff08\u4e5f\u5373\u53c2\u6570 t \u7684\u503c\uff09\uff0c\u5426\u5219\u8fd4\u56de 401\uff1b \u7b2c\u4e09\u6761\uff1a\u5f53\u6587\u4ef6\u540e\u7f00\u4e3a ts \u65f6\uff0cCDN \u8282\u70b9\u6309\u7167\u7ea6\u5b9a\u7684\u7b97\u6cd5\u89c4\u5219\u751f\u6210\u9a8c\u8bc1\u4fe1\u606f\uff08\u4e5f\u5373 MD5 \u503c\uff09\uff0c\u5224\u65ad\u751f\u6210\u7684 MD5 \u503c\u548c\u8bf7\u6c42\u53c2\u6570 key \u7684\u503c\u662f\u5426\u4e00\u81f4\uff0c\u4e0d\u4e00\u81f4\u5219\u8fd4\u56de 403\uff1b 2\u3001\u8fb9\u7f18\u91cd\u5b9a\u5411 \u793a\u4f8b\u4e00\uff1a\u5339\u914d cookie \u8fdb\u884c\u8df3\u8f6c \"rule\": \"$WHEN($NOT($EQ($_URI, /live.html)), $NOT($_COOKIE_token))$REDIRECT(http://test.example.com/no_token.html)\", \"pattern\": \"\" \u89c4\u5219\u91ca\u4e49\uff1a\u9996\u5148\u5339\u914d\u8bf7\u6c42 URI \u662f\u5426\u4e3a /live.html ,\u5f53 cookie \u4e2d token \u503c\u4e3a\u7a7a\u65f6\uff0c\u5219\u8df3\u8f6c\u5230\u6307\u5b9a\u5230\u5730\u5740 http://test.example.com/no_token.html \u3002 3\u3001URL \u6539\u5199 \u793a\u4f8b\u4e00\uff1a\u76ee\u5f55\u53ca\u53c2\u6570\u6539\u5199 \u5c06\u8bf7\u6c42 URL \u8f6c\u6362\u4e3a\u5e26\u53c2\u6570\u7684\u52a8\u6001 URL\uff0c\u4f8b\u5982\u8bf7\u6c42\u7684 URL \u4e3a\uff1a http://example.com/pay/25/8/... \u9700\u8981 CDN \u8fb9\u7f18\u8282\u70b9\u8f6c\u6362\u4e3a\u5982\u4e0b\u8bf7\u6c42\uff1a http://example.com/pay.php?payid=25&categoryid=8... \u8fd9\u4e2a\u65f6\u5019\uff0c pattern \u90e8\u5206\u9700\u8981\u63d0\u53d6\u76ee\u5f55\u6570\u5b57\uff0c\u9700\u8981\u751f\u6210 $1 \u548c $2 \u8fd9\u6837\u7684\u53d8\u91cf\uff0c\u5982\u4e0b\u89c4\u5219\u6240\u793a\uff1a \"rule\": \"/product.php?productid=$1&categoryid=$2\", \"pattern\": \"^product/([0-9]+)/([0-9]+)/(.*?).html$\" \u89c4\u5219\u91ca\u4e49\uff1a\u5f53\u89e3\u6790\u7684 url \u7b26\u5408\u89c4\u5219 ^product/([0-9]+)/([0-9]+)/(.*?).html$ \uff0c\u90a3\u4e48\u5c06\u8bf7\u6c42\u5bfc\u5411\u5230 /product.php?productid=$1&categoryid=$2 \u3002 \u4e5f\u5373\u5c06 http://example.com/pay/25/8/... \u8f6c\u6362\u4e3a http://example.com/pay.php?payid=25&categoryid=8... \u793a\u4f8b\u4e8c\uff1a\u6587\u4ef6\u540d\u6539\u5199 pattern: /(.*)/playlist\\.m3u8$ rule: /$1'.m3u8' \u89c4\u5219\u91ca\u4e49\uff1a\u5f53\u8bbf\u95ee\u5730\u5740\u4e3a http://domain/app/stream/playlist.m3u8 \u65f6\uff0c\u5c06\u8bbf\u95ee\u5730\u5740\u6539\u5199\u4e3a http://domain/app/stream.m3u8 \u3002 \u5e94\u7528\u573a\u666f\uff1a\u5728\u76f4\u64ad\u5e94\u7528\u573a\u666f\u4e2d\uff0c\u56e0\u4e3a\u5ba2\u6237\u7aef\u673a\u5236\u65e0\u6cd5\u6216\u8005\u4e0d\u65b9\u4fbf\u5347\u7ea7\u7684\u60c5\u51b5\uff0c\u53ef\u4ee5\u901a\u8fc7 URL \u6539\u5199\uff0c\u5c06 /stream/playlist.m3u8 \u6539\u4e3a /stream.m3u8 \uff0c\u5176\u4e2d app \u4ee3\u8868\u53d1\u5e03\u70b9\uff0c stream \u4ee3\u8868\u6d41\u540d\u3002 4\u3001\u8bf7\u6c42/\u54cd\u5e94\u5934\u4fee\u6539 \u793a\u4f8b\u4e00\uff1a\u6dfb\u52a0\u3001\u5220\u9664\u8bf7\u6c42\u5934 \"rule\": \"$ADD_REQ_HEADER(X-From-Cdn, upyun)\", \"pattern\": \"\" \u89c4\u5219\u91ca\u4e49\uff1a\u6dfb\u52a0\u8bf7\u6c42\u5934 X-From-Cdn:upyun \uff0c\u8bc6\u522b CDN \u5382\u5546\u3002 \"rule\": \"$DEL_REQ_HEADER(Accept-Encoding) \", \"pattern\": \"\" \u89c4\u5219\u91ca\u4e49\uff1a\u5220\u9664\u8bf7\u6c42\u5934 Accept-Encoding \uff0c\u65e0\u8bba\u7ec8\u7aef\u662f\u5426\u53d1\u8d77 gzip \u7684\u8bf7\u6c42\uff0c\u90fd\u8fdb\u884c ungzip \u7684\u8fd4\u56de\u3002 \u793a\u4f8b\u4e8c\uff1a\u6dfb\u52a0\u54cd\u5e94\u5934 \"rule\": \"$ADD_RSP_HEADER(CDN, UPYUN, 1) \", \"pattern\": \"\" \u89c4\u5219\u91ca\u4e49\uff1a\u6dfb\u52a0\u54cd\u5e94\u5934 CDN \u4e3a UPYUN , 1 \u8868\u793a\u4f1a\u8986\u76d6\u6389\u5df2\u6709\u7684\u54cd\u5e94\u5934\uff0c\u901a\u8fc7\u54cd\u5e94\u5934\u4e5f\u53ef\u4ee5\u8bc6\u522b CDN \u5382\u5546\u3002 5\u3001URL \u9650\u901f \u5047\u5982\u8bf7\u6c42\u7684 URL \u4e3a\uff1a http://test.example.com/mp4/4E10F356C0FEAD359C33DC5901307461-10.mp4 \uff0c\u9700\u8981\u5bf9\u8be5\u7c7b\u578b\u6587\u4ef6\u8fdb\u884c\u9650\u901f\uff0c\u9650\u901f\u8981\u6c42\u4e3a\uff1a\u524d 20MB \u4e0d\u9650\u901f\uff0c20MB \u4e4b\u540e\u9650\u901f 800 KB/s\uff0c\u89c4\u5219\u53ef\u8fd9\u6837\u7f16\u5199\uff1a \"rule\": \"$WHEN($1, $EQ($_HOST, 'test.example.com'))$LIMIT_RATE_AFTER(20, m)$LIMIT_RATE(800, k)\", \"pattern\": \"^(/).+-10\\.mp4$\" \u89c4\u5219\u91ca\u4e49\uff1a\u5f53 $1 \u4e3a\u771f\uff0c\u4e14\u6ee1\u8db3\u8bf7\u6c42 HOST \u4e3a test.example.com \u65f6 \uff0c\u5f00\u59cb 20MB \u4e0d\u9650\u901f\uff0c\u540e\u9762\u9650\u5236\u5230 800KB/s \u3002 6\u3001\u5927\u5c0f\u5199\u8f6c\u6362 \u8be5\u90e8\u5206\u4f1a\u4f7f\u7528\u5230 $LOWER(E) \u51fd\u6570\uff0c\u76f4\u63a5\u770b\u89c4\u5219\uff1a \"rule\": \"$WHEN($MATCH($LOWER($_URI), /uptest.png)) /UPtest.png\", \"pattern\": \"\" \u89c4\u5219\u91ca\u4e49\uff1a\u9996\u5148\u662f\u83b7\u53d6\u8bf7\u6c42 URI \uff0c\u4f7f\u7528 $LOWER(E) \u51fd\u6570\u5c06 URI \u8f6c\u6362\u4e3a\u5c0f\u5199\uff0c\u548c /uptest.png \u8fdb\u884c\u5339\u914d\uff0c\u5339\u914d\u6210\u529f\uff0c\u5219\u76f4\u63a5\u5c06 URI \u6539\u5199\u4e3a /UPtest.png \u3002\u5982\u679c\u9700\u8981\u5c06\u5b57\u7b26\u4e32\u8f6c\u6362\u4e3a\u5927\u5199\uff0c\u4f7f\u7528 $UPPER(E) \u51fd\u6570\u3002 7\u3001\u6570\u503c\u6bd4\u8f83 \u4e5f\u5373\u5c06\u5b57\u7b26\u4e32\u6216\u8005\u6570\u5b57\u8fdb\u884c\u6bd4\u8f83\u3002\u4f8b\u5982\uff1a A \u548c B \u8fdb\u884c\u6bd4\u8f83\uff0c\u662f\u5426\u5927\u4e8e\u3001\u5927\u4e8e\u7b49\u4e8e\u3001\u76f8\u7b49\u7b49\u903b\u8f91\uff0c\u53c2\u89c1\u5982\u4e0b\u89c4\u5219\u793a\u4f8b\uff1a \"rule\": \"$GT($_TIME,$ADD($INT($_GET_t,16,10),3600))\", \"pattern\": \"\" \u89c4\u5219\u91ca\u4e49\uff1a\u5c06\u8bf7\u6c42 URL \u4e2d\u7684 t \u53c2\u6570 \u7531 16 \u8fdb\u5236\u8f6c\u6362\u4e3a 10 \u8fdb\u5236\uff0c\u7136\u540e\u52a0\u4e0a 3600 \uff0c\u5c06\u76f8\u52a0\u5f97\u5230\u7684\u503c\u548c\u5f53\u524d\u7cfb\u7edf\u65f6\u95f4\u8fdb\u884c\u6bd4\u8f83\u3002\u8fd9\u91cc\u4f7f\u7528\u5230\u4e86 $GT(E1\uff0cE2\uff09 \u51fd\u6570\uff0c\u4e5f\u5373 E1 \u662f\u5426\u5927\u4e8e E2 \uff0c\u5927\u4e8e\u5373\u8fd4\u56de true \u3002\u53e6\u5916\uff0c\u7b49\u4e8e\u4f7f\u7528 $EQ(E1\uff0cE2\uff09 \u51fd\u6570\uff0c\u5927\u4e8e\u7b49\u4e8e\u4f7f\u7528 $GE(E1\uff0cE2\uff09 \u51fd\u6570\u3002 \u5982\u6709\u7591\u95ee\u8bf7 \u8054\u7cfb\u6211\u4eec","title":"Advanced"},{"location":"cdn/advanced/#_1","text":"IP \u7981\u7528 \u5047\u5982\u9700\u8981\u7981\u7528\u67d0\u4e2a IP \u6216\u8005\u67d0\u4e2a IP \u6bb5\uff0c\u5219\u9700\u8981\u8fdb\u884c\u8be5\u529f\u80fd\u914d\u7f6e\u3002\u7279\u522b\u5730\uff0cIP \u9632\u76d7\u94fe\u76ee\u524d\u6682\u65f6\u53ea\u652f\u6301\u9ed1\u540d\u5355\u903b\u8f91\u3002 \u914d\u7f6e\u5f15\u5bfc \u767b\u9646 \u53c8\u62cd\u4e91\u7ba1\u7406\u63a7\u5236\u53f0 \uff0c\u4f9d\u6b21\u8fdb\u5165\uff1a\u670d\u52a1 > \u529f\u80fd\u914d\u7f6e > \u9632\u76d7\u94fe > IP \u7981\u7528\uff0c\u70b9\u51fb\u300c\u7ba1\u7406\u300d\u6309\u94ae\u5373\u53ef\u5f00\u59cb\u914d\u7f6e\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u6ce8\u610f\u4e8b\u9879\uff1a 1.\u652f\u6301 * \u901a\u914d\u7b26\uff0c\u5982 10.11.12.* \u5c06\u7981\u6b62 10.11.12.0~10.11.12.255 \u7684 IP \u8bbf\u95ee 2.\u7981\u7528 IP \u4e0a\u9650 100 \u6761\uff0c\u88ab\u7981\u6b62\u7684 IP \u8bbf\u95ee\u8d44\u6e90\u65f6\uff0c\u5c06\u63d0\u793a 403 \u5730\u533a\u8bbf\u95ee\u9650\u5236 \u5730\u533a\u8bbf\u95ee\u9650\u5236\u662f\u6307\u6839\u636e\u52a0\u901f\u7f51\u7ad9\u7684\u9700\u6c42\uff0c\u5141\u8bb8\u6216\u7981\u6b62\u7279\u5b9a\u533a\u57df\u7684\u7ec8\u7aef\u7528\u6237\u5bf9\u7f51\u7ad9\u8d44\u6e90\u7684\u8bbf\u95ee\u3002\u5373\u7f51\u7ad9\u6307\u5b9a\u5730\u533a\uff0c\u5141\u8bb8\u8be5\u5730\u533a\u7ec8\u7aef\u7528\u6237\u8bbf\u95ee\uff0c\u800c\u9650\u5236\u5176\u4ed6\u5730\u533a\u7528\u6237\u8bbf\u95ee\uff0c\u6216\u8005\u76f8\u53cd\u3002 \u914d\u7f6e\u5f15\u5bfc \u767b\u9646 \u53c8\u62cd\u4e91\u7ba1\u7406\u63a7\u5236\u53f0 \uff0c\u4f9d\u6b21\u8fdb\u5165\uff1a\u670d\u52a1 > \u529f\u80fd\u914d\u7f6e > \u9632\u76d7\u94fe > \u5730\u533a\u8bbf\u95ee\u9650\u5236\uff0c\u70b9\u51fb\u300c\u7ba1\u7406\u300d\u6309\u94ae\u5373\u53ef\u5f00\u59cb\u914d\u7f6e\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u8be6\u7ec6\u914d\u7f6e\u8bf7\u53c2\u89c1 \u5730\u533a\u8bbf\u95ee\u9650\u5236\u7528\u6237\u6307\u5357 \u3002 Referer \u9632\u76d7\u94fe \u5f53\u8bf7\u6c42\u53d1\u9001\u5230 CDN \u670d\u52a1\u5668\u540e\uff0cCDN \u670d\u52a1\u5668\u68c0\u67e5 HTTP \u8bf7\u6c42\u5934\u4e2d\u7684 Referer \u5b57\u6bb5\u7684\u4fe1\u606f\uff0c\u7981\u6b62\u6216\u8005\u5141\u8bb8\u7b26\u5408\u7279\u5b9a\u89c4\u5219\u7684 Referer \u7684\u8bf7\u6c42\u3002 \u914d\u7f6e\u5f15\u5bfc \u767b\u9646 \u53c8\u62cd\u4e91\u7ba1\u7406\u63a7\u5236\u53f0 \uff0c\u4f9d\u6b21\u8fdb\u5165\uff1a\u670d\u52a1 > \u529f\u80fd\u914d\u7f6e > \u9632\u76d7\u94fe > \u57df\u540d\u9632\u76d7\u94fe\uff0c\u70b9\u51fb\u300c\u7ba1\u7406\u300d\u6309\u94ae\u5373\u53ef\u5f00\u59cb\u914d\u7f6e\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u6ce8\u610f\u4e8b\u9879\uff1a 1.\u767d\u540d\u5355\uff1a\u4ec5\u5141\u8bb8\u540d\u5355\u4e2d\u7684\u57df\u540d\u7f51\u7ad9\u8bbf\u95ee\u6587\u4ef6\uff0c\u5176\u4ed6\u57df\u540d\u7f51\u7ad9\u90fd\u4e0d\u5141\u8bb8\u8bbf\u95ee 2.\u9ed1\u540d\u5355\uff1a\u4ec5\u7981\u6b62\u540d\u5355\u4e2d\u7684\u57df\u540d\u7f51\u7ad9\u8bbf\u95ee\u6587\u4ef6\uff0c\u5176\u4ed6\u57df\u540d\u7f51\u7ad9\u90fd\u5141\u8bb8\u8bbf\u95ee 3.\u652f\u6301 * \u901a\u914d\u7b26\uff0c\u6bd4\u5982\u767d\u540d\u5355\u7684 *upyun.com \u5c06\u5141\u8bb8 www.upyun.com \u3001 abcupyun.com \u7b49\u7f51\u7ad9\u8bbf\u95ee 4.\u7279\u522b\u5730\uff0c\u9ed8\u8ba4 \u5141\u8bb8 Referer \u4e3a\u7a7a \u8fd9\u79cd\u60c5\u51b5\u4f1a\u7ed5\u8fc7\u9632\u76d7\u94fe\u7684\u903b\u8f91\uff0c\u82e5\u8fd9\u91cc\u542f\u7528 \u7981\u6b62 Referer \u4e3a\u7a7a \uff0c\u90a3\u4e48\u8fd9\u7c7b\u8bf7\u6c42\u5c31\u76f4\u63a5\u88ab\u7981\u6b62\u8bbf\u95ee\u4e86 User-Agent \u9632\u76d7\u94fe \u53ea\u5141\u8bb8\u7279\u5b9a\u7684\u6d4f\u89c8\u5668\u6216\u8005\u5e26\u6709\u7279\u6b8a User-Agent \u6807\u8bc6\u7684\u4e13\u5c5e\u7684\u5ba2\u6237\u7aef\u8fdb\u884c\u8bbf\u95ee\u3002\u76ee\u524d\u6682\u65f6\u53ea\u652f\u6301\u767d\u540d\u5355\u903b\u8f91\u3002 \u914d\u7f6e\u5f15\u5bfc \u767b\u9646 \u53c8\u62cd\u4e91\u7ba1\u7406\u63a7\u5236\u53f0 \uff0c\u4f9d\u6b21\u8fdb\u5165\uff1a\u670d\u52a1 > \u529f\u80fd\u914d\u7f6e > \u9632\u76d7\u94fe > \u5ba2\u6237\u7aef\u9632\u76d7\u94fe\uff0c\u70b9\u51fb\u300c\u7ba1\u7406\u300d\u6309\u94ae\u5373\u53ef\u5f00\u59cb\u914d\u7f6e\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u6ce8\u610f\u4e8b\u9879\uff1a 1.\u6dfb\u52a0\u6570\u91cf\u4e0a\u9650 50 \u6761 2. User-Agent \u4e0d\u533a\u5206\u5927\u5c0f\u5199\uff0c\u4e14\u652f\u6301 * \u901a\u914d\u7b26 3. User-Agent \u9632\u76d7\u94fe\u7684\u4f18\u5148\u7ea7\u9ad8\u4e8e Referer \u9632\u76d7\u94fe Token \u9632\u76d7\u94fe \u53ef\u8bbe\u7f6e\u7b7e\u540d\u8fc7\u671f\u65f6\u95f4\u6765\u63a7\u5236\u6587\u4ef6\u7684\u8bbf\u95ee\u65f6\u9650\u3002Token \u9632\u76d7\u94fe\u7684\u76ee\u7684\u662f\u4f7f\u5f97\u6bcf\u4e2a\u8bf7\u6c42\u7684 URL \u90fd\u5177\u6709\u4e00\u5b9a\u7684\u201c\u65f6\u6548\u6027\u201d\uff0c\u56e0\u6b64 URL \u672c\u8eab\u9700\u8981\u643a\u5e26\u8fc7\u671f\u65f6\u95f4\u76f8\u5173\u7684\u4fe1\u606f\uff0c\u540c\u65f6\u8fd8\u9700\u8981\u786e\u4fdd\u8fd9\u4e2a\u8fc7\u671f\u65f6\u95f4\uff0c\u4e0d\u80fd\u88ab\u6076\u610f\u4fee\u6539\uff0c\u56e0\u6b64\u91c7\u7528 md5 \u7b97\u6cd5\uff0c\u5c06\u5bc6\u6587\uff08\u901a\u5e38\u662f\u4e00\u4e2a\u666e\u901a\u5b57\u7b26\u4e32\uff09\u3001\u8fc7\u671f\u65f6\u95f4\u3001\u6587\u4ef6\u8def\u5f84\uff08\u8fc7\u671f\u65f6\u95f4\u548c\u6587\u4ef6\u8def\u5f84\u901a\u5e38\u662f\u6709\u5bf9\u5e94\u5173\u7cfb\u7684\uff0c\u56e0\u6b64\u4e5f\u53c2\u4e0e md5 \u7684\u8ba1\u7b97\uff09\u7b49\u4fe1\u606f\u6240\u8ba1\u7b97\u7684 md5 \u503c\u4e5f\u52a0\u5165\u5230 URL \u4e2d\uff0cCDN \u8282\u70b9\u5728\u9a8c\u8bc1\u8bf7\u6c42\u65f6\uff0c\u9664\u4e86\u9a8c\u8bc1\u8fc7\u671f\u65f6\u95f4\uff0c\u540c\u65f6\u8fd8\u4f1a\u9a8c\u8bc1\u8be5 md5 \u503c\u662f\u5426\u5339\u914d\uff0c\u5bf9\u4e8e\u4e0d\u5339\u914d\u7684 md5\uff0c\u8bf4\u660e URL \u88ab\u7be1\u6539\uff0c\u5373\u4f7f\u8bf7\u6c42\u672a\u8fc7\u671f\u4e5f\u9700\u8981\u7981\u6b62\u670d\u52a1\u3002 \u5b9e\u73b0\u539f\u7406 \u914d\u7f6e\u5f15\u5bfc \u767b\u9646 \u53c8\u62cd\u4e91\u7ba1\u7406\u63a7\u5236\u53f0 \uff0c\u4f9d\u6b21\u8fdb\u5165\uff1a\u670d\u52a1 > \u529f\u80fd\u914d\u7f6e > \u9632\u76d7\u94fe > Token \u9632\u76d7\u94fe\uff0c\u70b9\u51fb\u300c\u7ba1\u7406\u300d\u6309\u94ae\u5373\u53ef\u5f00\u59cb\u914d\u7f6e\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u7b7e\u540d\u65b9\u5f0f \u7b7e\u540d\uff1a _upt = MD5(token \u5bc6\u94a5 & etime & URI){\u4e2d\u95f4 8 \u4f4d} + etime \u53c2\u6570\uff1a token \u5bc6\u94a5\uff1a\u7528\u6237\u6240\u586b\u7684\u5bc6\u94a5 etime\uff1a\u8fc7\u671f\u65f6\u95f4\uff0c\u5fc5\u987b\u662f UNIX TIME \u683c\u5f0f\uff0c\u5982\uff1a 1378092990 URI\uff1a\u8bf7\u6c42\u5730\u5740\uff08\u4e0d\u5305\u542b?\u53ca\u540e\u9762\u7684 Query String\uff09\uff0c\u5982\uff1a /dir/pic.jpg \u793a\u4f8b \u8bbe\u7f6e\u56fe\u7247\u94fe\u63a5 http://<bucket>/dir/pic.jpg 10 \u5206\u949f\u6709\u6548 \u5f53\u524d Unix \u65f6\u95f4 = 1370000000 etime = 1370000000 + 600 = 1370000600 URI = '/dir/pic.jpg' sign = MD5(token \u5bc6\u94a5&etime&URI) = xxxxxxxxxxxxabcdefghyyyyyyyyyyyy _upt = MD5(token \u5bc6\u94a5&etime&URI){\u4e2d\u95f4 8 \u4f4d} + etime = abcdefgh1370000600 \u8be5\u7b7e\u540d\u62fc\u63a5\u5728 URL \u5730\u5740\u6216\u7528\u6237 Cookie \u4e2d\uff0c\u5747\u53ef\u8d77\u5230\u9632\u76d7\u94fe\u4f5c\u7528: URL: http://<bucket>/dir/pic.jpg?_upt=abcdefgh1370000600 Cookie: _upt=abcdefgh1370000600; \u4ee3\u7801\u5b9e\u4f8b (PHP) <?php $etime = time() + 600; // \u6388\u6743\u5341\u5206\u949f\u540e\u8fc7\u671f $key = 'token \u5bc6\u94a5'; // token \u9632\u76d7\u94fe\u5bc6\u94a5 $path = '/dir/pic.jpg'; // \u56fe\u7247\u76f8\u5bf9\u8def\u5f84 $sign = substr(md5($key.'&'.$etime.'&'.$path), 12,8).$etime; ?> \u56de\u6e90\u9274\u6743 \u56de\u6e90\u9274\u6743\u662f\u4e00\u79cd\u9ad8\u7ea7\u7684\u9632\u76d7\u94fe\u65b9\u5f0f\uff0c\u9002\u7528\u4e8e\u5bf9\u9632\u76d7\u94fe\u6709\u5f88\u9ad8\u5b9e\u65f6\u6027\u8981\u6c42\u7684\u573a\u666f\u3002\u5927\u6982\u539f\u7406\u662f CDN \u8fb9\u7f18\u8282\u70b9\u6bcf\u6b21\u63a5\u53d7\u5230\u8bf7\u6c42\u4e4b\u540e\uff0c\u90fd\u9700\u8981\u56de\u5ba2\u6237\u6e90\u7ad9\u8fdb\u884c\u9a8c\u8bc1\uff0c\u9a8c\u8bc1\u901a\u8fc7\u4e4b\u540e\u624d\u8ba4\u4e3a\u662f\u5408\u6cd5\u8bf7\u6c42\uff0c\u8fd9\u6837 CDN \u53ef\u4ee5\u7ee7\u7eed\u63d0\u4f9b\u670d\u52a1\u3002 \u914d\u7f6e\u5f15\u5bfc \u767b\u9646 \u53c8\u62cd\u4e91\u7ba1\u7406\u63a7\u5236\u53f0 \uff0c\u4f9d\u6b21\u8fdb\u5165\uff1a\u670d\u52a1 > \u529f\u80fd\u914d\u7f6e > \u9632\u76d7\u94fe > \u56de\u6e90\u9274\u6743\uff0c\u70b9\u51fb\u300c\u7ba1\u7406\u300d\u6309\u94ae\u5373\u53ef\u5f00\u59cb\u914d\u7f6e\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u8be6\u7ec6\u914d\u7f6e\u8bf7\u53c2\u89c1 \u56de\u6e90\u9274\u6743\u7528\u6237\u6307\u5357 \u3002 \u5916\u94fe\u529f\u80fd \u901a\u8fc7\u7ba1\u7406\u540e\u53f0\uff0c\u53ef\u4ee5\u4e00\u952e\u7981\u6b62\u6574\u4e2a\u670d\u52a1\u57df\u540d\u4e0b\u6240\u6709\u8d44\u6e90\u7684\u8bbf\u95ee\uff0c\u7279\u522b\u5730\uff0c\u6b64\u65f6\u4f1a\u54cd\u5e94 405 \u72b6\u6001\u7801\u7ed9\u5ba2\u6237\u7aef\u3002 \u914d\u7f6e\u5f15\u5bfc \u767b\u9646 \u53c8\u62cd\u4e91\u7ba1\u7406\u63a7\u5236\u53f0 \uff0c\u4f9d\u6b21\u8fdb\u5165\uff1a\u670d\u52a1 > \u529f\u80fd\u914d\u7f6e > \u57fa\u7840\u914d\u7f6e > \u5916\u94fe\u529f\u80fd\uff0c\u5173\u95ed\u5916\u94fe\u529f\u80fd\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u6ce8\u610f\u4e8b\u9879\uff1a 1.\u670d\u52a1\u521b\u5efa\u5b8c\u6bd5\u4e4b\u540e\uff0c\u5916\u94fe\u529f\u80fd\u9ed8\u8ba4\u5f00\u542f 2.\u5173\u95ed\u5916\u94fe\u529f\u80fd\uff0c\u4f1a\u5bfc\u81f4\u8d44\u6e90\u65e0\u6cd5\u8bbf\u95ee\uff0c\u8bf7\u8c28\u614e\u64cd\u4f5c","title":"\u8bbf\u95ee\u63a7\u5236"},{"location":"cdn/advanced/#_2","text":"WAF \u9632\u62a4 WAF \u9632\u62a4\u4e3b\u8981\u9632\u62a4\u7684\u662f\u6765\u81ea\u5bf9\u7f51\u7ad9\u6e90\u7ad9\u7684\u52a8\u6001\u6570\u636e\u653b\u51fb\uff0c\u53ef\u9632\u62a4\u7684\u653b\u51fb\u7c7b\u578b\u5305\u62ec SQL \u6ce8\u5165\u3001XSS \u653b\u51fb\u3001CSRF \u653b\u51fb\u3001\u6076\u610f\u722c\u866b\u3001\u626b\u63cf\u5668\u3001\u8fdc\u7a0b\u6587\u4ef6\u5305\u542b\u7b49\u653b\u51fb\u3002 \u914d\u7f6e\u5f15\u5bfc \u767b\u9646 \u53c8\u62cd\u4e91\u7ba1\u7406\u63a7\u5236\u53f0 \uff0c\u4f9d\u6b21\u8fdb\u5165\uff1a\u670d\u52a1 > \u529f\u80fd\u914d\u7f6e > \u4e91\u5b89\u5168 > WAF \u9632\u62a4\uff0c\u5f00\u542f WAF \u4fdd\u62a4\u5373\u53ef\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u6ce8\u610f\u4e8b\u9879\uff1a\u9002\u7528\u4e8e\u52a8\u6001\u8d44\u6e90\u52a0\u901f\uff0c\u5168\u9759\u6001\u8d44\u6e90\u52a0\u901f\u5efa\u8bae\u4e0d\u542f\u7528\u8be5\u529f\u80fd CC \u9632\u62a4 CC \u9632\u62a4\u4e3b\u8981\u662f\u9488\u5bf9\u7f51\u7edc\u5b89\u5168\u9886\u57df\u4e2d\u7684 CC \u653b\u51fb\u800c\u8fdb\u884c\u7684\u4e00\u79cd\u5e94\u7528\u5c42\u653b\u51fb\u9632\u62a4\uff0c\u8be5\u529f\u80fd\u901a\u8fc7\u81ea\u5b9a\u4e49\u5339\u914d\u89c4\u5219\u5bf9\u76ee\u6807\u8d44\u6e90\u8fdb\u884c\u76d1\u63a7\uff0c\u5f53\u8bf7\u6c42\u9891\u7387\u8fbe\u5230\u89e6\u53d1\u9891\u7387\u65f6\u5bf9\u7591\u4f3c\u653b\u51fb\u8bf7\u6c42\u8fdb\u884c\u6821\u9a8c\uff0c\u6821\u9a8c\u901a\u8fc7\u5219\u5141\u8bb8\u8bbf\u95ee\uff1b\u6821\u9a8c\u4e0d\u901a\u8fc7\uff0c\u5219\u76f4\u63a5\u7981\u6b62\u8bbf\u95ee\u3002 \u914d\u7f6e\u5f15\u5bfc \u767b\u9646 \u53c8\u62cd\u4e91\u7ba1\u7406\u63a7\u5236\u53f0 \uff0c\u4f9d\u6b21\u8fdb\u5165\uff1a\u670d\u52a1 > \u529f\u80fd\u914d\u7f6e > \u4e91\u5b89\u5168 > CC \u9632\u62a4\uff0c\u70b9\u51fb\u300c\u7ba1\u7406\u300d\u6309\u94ae\u5373\u53ef\u5f00\u59cb\u914d\u7f6e\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u5177\u4f53\u914d\u7f6e\u53ef\u4ee5\u8d70\u5982\u4e0b\u56db\u4e2a\u6b65\u9aa4\uff1a \u7b2c\u4e00\u6b65\uff1a\u6dfb\u52a0\u9632\u62a4\u7b56\u7565\uff0c\u8bbe\u7f6e URI \u5339\u914d\u89c4\u5219\uff0c\u4f8b\u5982\uff1a/image/*.jpg \u7b2c\u4e8c\u6b65\uff1a\u586b\u5199\u8bbf\u95ee\u9891\u7387\u9608\u503c\uff0c\u4f8b\u5982\uff1a500\u6b21/\u5206\u949f\uff0c\u5728\u667a\u80fd\u9632\u62a4\u6a21\u5f0f\u4e0b\u624d\u6709\u6548 \u7b2c\u4e09\u6b65\uff1a\u8bbe\u7f6e IP \u767d\u540d\u5355\uff0c\u5982\u679c\u8981\u7ed5\u8fc7 CC \u9632\u62a4\u7b56\u7565\uff0c\u6b64\u5904\u53ef\u8fdb\u884c\u8bbe\u7f6e \u7b2c\u56db\u6b65\uff1a\u9009\u62e9 CC \u9632\u62a4\u6a21\u5f0f\uff0c\u5305\u62ec\u5f3a\u5236\u9632\u62a4\u3001\u667a\u80fd\u9632\u62a4\u3001\u6682\u505c\u9632\u62a4\uff0c\u5f53\u6b63\u5728\u906d\u53d7\u653b\u51fb\u65f6\uff0c\u5efa\u8bae\u9009\u62e9\u5f3a\u5236\u9632\u62a4\u6a21\u5f0f \u6ce8\u610f\u4e8b\u9879\uff1a 1.CC \u9632\u62a4\u5206\u4e3a\u5f3a\u5236\u9632\u62a4\u548c\u667a\u80fd\u9632\u62a4\u4e24\u79cd\u6a21\u5f0f\uff0c\u5728\u667a\u80fd\u9632\u62a4\u6a21\u5f0f\u4e0b\uff0c\u5219\u4f1a\u5339\u914d URI \u89c4\u5219\uff0c\u8bf7\u6c42\u4e00\u65e6\u8fbe\u5230\u8bbf\u95ee\u9891\u7387\u9608\u503c\uff0c\u5219\u4f1a\u89e6\u53d1 JavaScript \u6821\u9a8c\uff0c\u6821\u9a8c\u901a\u8fc7\u5219\u53ef\u6b63\u5e38\u8bbf\u95ee\uff0c\u6821\u9a8c\u4e0d\u901a\u8fc7\u5219\u76f4\u63a5\u62d2\u7edd\u3002\u5728\u5f3a\u5236\u9632\u62a4\u6a21\u5f0f\u4e0b\uff0c\u5219\u4f1a\u5ffd\u7565\u8bbf\u95ee\u9891\u7387\u9608\u503c\uff0c\u76f4\u63a5\u89e6\u53d1 JavaScript \u6821\u9a8c\uff0c\u4ee5\u6b64\u7c7b\u63a8 2.\u5728\u667a\u80fd\u9632\u62a4\u6a21\u5f0f\u4e0b\uff0c\u8bbf\u95ee\u9608\u503c\u8bbe\u7f6e\u5f97\u8fc7\u4f4e\uff0c\u53ef\u80fd\u4e0d\u4f1a\u89e6\u53d1 JavaScript \u6821\u9a8c\uff0c\u5efa\u8bae\u9608\u503c\u8bbe\u7f6e\u9ad8\u4e00\u4e9b HTTP \u8bf7\u6c42\u5927\u5c0f\u9650\u5236 \u53ef\u9650\u5236\u5355\u6b21\u8bf7\u6c42\u4f53\u7684\u5185\u5bb9\u5927\u5c0f\uff0c\u80fd\u6709\u6548\u4fdd\u8bc1\u8bf7\u6c42\u7684\u5b89\u5168\u6027\uff0c\u9ed8\u8ba4\u662f 512M \u3002 \u914d\u7f6e\u5f15\u5bfc \u767b\u9646 \u53c8\u62cd\u4e91\u7ba1\u7406\u63a7\u5236\u53f0 \uff0c\u4f9d\u6b21\u8fdb\u5165\uff1a\u670d\u52a1 > \u529f\u80fd\u914d\u7f6e > \u4e91\u5b89\u5168 > HTTP \u8bf7\u6c42\u5927\u5c0f\u9650\u5236\uff0c\u70b9\u51fb\u300c\u7ba1\u7406\u300d\u6309\u94ae\u5373\u53ef\u5f00\u59cb\u914d\u7f6e\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff1a IP \u8bbf\u95ee\u9650\u5236 \u53ef\u6839\u636e\u5355\u4e2a IP \u7684\u8bbf\u95ee\u9891\u7387\u6765\u8fdb\u884c\u9632\u5fa1\uff0c\u5728\u6b63\u5e38\u7684\u60c5\u51b5\u4e0b\uff0c\u7528\u6237\u8bbf\u95ee\u7f51\u7ad9\u662f\u6709\u4e00\u5b9a\u9891\u7387\u7684\uff0c\u53ef\u901a\u8fc7\u5339\u914d\u81ea\u5b9a\u4e49\u7684\u9650\u5236\u89c4\u5219\u5bf9\u5355\u4e2a IP \u8fdb\u884c\u76d1\u63a7\uff0c\u5c06\u8d85\u8fc7\u8bbe\u5b9a\u9608\u503c\u7684 IP \u7684\u8bbf\u95ee\u8fdb\u884c\u62e6\u622a\u6216\u8005\u5ef6\u8fdf\u54cd\u5e94\uff0c\u4ece\u800c\u8fbe\u5230\u5b89\u5168\u9632\u62a4\u6548\u679c\u3002 \u914d\u7f6e\u5f15\u5bfc \u767b\u9646 \u53c8\u62cd\u4e91\u7ba1\u7406\u63a7\u5236\u53f0 \uff0c\u4f9d\u6b21\u8fdb\u5165\uff1a\u670d\u52a1 > \u529f\u80fd\u914d\u7f6e > \u4e91\u5b89\u5168 > IP \u8bbf\u95ee\u9650\u5236\uff0c\u70b9\u51fb\u300c\u7ba1\u7406\u300d\u6309\u94ae\u5373\u53ef\u5f00\u59cb\u914d\u7f6e\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u914d\u7f6e\u6b65\u9aa4\u5982\u4e0b\uff1a \u7b2c\u4e00\u6b65\uff1a\u586b\u5199\u8bbf\u95ee\u7684\u8d44\u6e90\u8def\u5f84\u89c4\u5219\uff0c\u652f\u6301 \uff0a \u901a\u914d\u7b26\uff0c\u5982\uff1a /a/*.mp4 \u3001 /b/*.flv \u7b2c\u4e8c\u6b65\uff1a\u9009\u62e9\u9650\u5236\u65b9\u5f0f\uff1a \u76f4\u63a5\u7981\u6b62 \u6216 \u5ef6\u8fdf\u54cd\u5e94 \u7b2c\u4e09\u6b65\uff1a\u8bbe\u7f6e\u8bbf\u95ee\u9891\u7387\u53ca\u76f8\u5e94\u7684\u65f6\u95f4\u9650\u5236 \u6ce8\u610f\u4e8b\u9879\uff1a 1.\u76f4\u63a5\u7981\u6b62\u3001\u5ef6\u65f6\u54cd\u5e94\u90fd\u662f\u4ee5 60s \u4e3a\u4e00\u4e2a\u8ba1\u6570\u5468\u671f\uff0c\u5373\u4e0a\u4e00\u4e2a 60s \u7684\u8ba1\u6570\u4e0d\u4f1a\u7d2f\u8ba1\u53e0\u52a0\u5230\u4e0b\u4e00\u4e2a 60s \u5185 2.\u7981\u6b62\u8bbf\u95ee\u65f6\u95f4\u7684\u8bbe\u7f6e\u9700\u5927\u4e8e\u7b49\u4e8e 60s\uff0c\u5ef6\u8fdf\u54cd\u5e94\u65f6\u95f4\u7684\u8bbe\u7f6e\u9700\u5c0f\u4e8e\u7b49\u4e8e 30s 3.\u8bf7\u52ff\u5c06\u8bbf\u95ee\u9891\u7387\u503c\u8bbe\u7f6e\u8fc7\u4f4e\uff0c\u4ee5\u514d\u5f71\u54cd\u6b63\u5e38\u7528\u6237\u7684\u8bbf\u95ee\u8bf7\u6c42 \u8be6\u7ec6\u914d\u7f6e\u8bf7\u53c2\u89c1 IP \u8bbf\u95ee\u9650\u5236\u7528\u6237\u6307\u5357 \u3002","title":"\u5b89\u5168\u9632\u62a4"},{"location":"cdn/advanced/#https","text":"\u53c8\u62cd\u4e91 HTTPS \u52a0\u901f\u670d\u52a1\u5efa\u7acb\u5728\u81ea\u4e3b\u7814\u53d1\u7684\u5185\u5bb9\u5206\u53d1\u7f51\u7edc\u57fa\u7840\u4e4b\u4e0a\uff0c\u5168\u9762\u652f\u6301\u4e86 HTTPS \u534f\u8bae\u52a0\u901f\u3002\u901a\u8fc7\u4f1a\u8bdd\u91cd\u7528\u53ca\u4f1a\u8bdd\u4fdd\u6301\u3001\u5728\u7ebf\u8bc1\u4e66\u72b6\u6001\u68c0\u67e5\u3001\u534f\u8bae\u4f18\u5316\u3001SSL \u534f\u8bae\u63e1\u624b\u4f18\u5316\u3001HTTP/2 \u7b49\u6280\u672f\u624b\u6bb5\uff0c\u5168\u9762\u63d0\u5347\u4e86 HTTPS \u534f\u8bae\u52a0\u901f\u6027\u80fd\u3002","title":"HTTPS \u914d\u7f6e"},{"location":"cdn/advanced/#_3","text":"\u7b2c\u4e00\u6b65\uff1a\u4f9d\u6b21\u8fdb\u5165 \u670d\u52a1 > \u529f\u80fd\u914d\u7f6e > HTTPS, \u70b9\u51fb \u7ba1\u7406 \u5373\u53ef\u5f00\u59cb\u914d\u7f6e\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u7b2c\u4e8c\u6b65\uff1a\u53ef\u9488\u5bf9\u5355\u4e2a\u57df\u540d\u9009\u62e9\u76f8\u5e94\u7684\u8bc1\u4e66\uff0c\u7136\u540e\u4fdd\u5b58\u3002\u5982\u679c\u65e0\u8bc1\u4e66\u53ef\u9009\uff0c\u53ef\u524d\u5f80 SSL \u8bc1\u4e66\u670d\u52a1 \u5e73\u53f0\u6dfb\u52a0\u57df\u540d\u7684\u81ea\u6709\u8bc1\u4e66\uff1b\u7528\u6237\u4e5f\u53ef\u76f4\u63a5\u5728 SSL \u8bc1\u4e66\u7533\u8d2d \u5e73\u53f0\u7533\u8d2d Symantec\u3001GeoTrust\u3001TrustAsia\u3001Let\u2019s Encrypt \u7684\u5404\u7c7b SSL \u8bc1\u4e66\uff0c\u5176\u4e2d TrustAsia\u3001Let\u2019s Encrypt \u7684 DV SSL \u5355\u57df\u540d\u8bc1\u4e66\u53ef\u514d\u8d39\u7533\u8bf7\u3002 \u7b2c\u4e09\u6b65\uff1a\u53ef\u9009\u62e9\u662f\u5426\u5f00\u542f HTTPS \u8bbf\u95ee\u548c\u5f3a\u5236 HTTPS \u529f\u80fd\u3002\u5728\u5f00\u542f HTTPS \u8bbf\u95ee\u540e\uff0c\u53ef\u901a\u8fc7\u70b9\u51fb \u4fee\u6539 \u5207\u6362\u57df\u540d\u6240\u5bf9\u5e94\u7684\u8bc1\u4e66\uff0c\u70b9\u51fb \u8be6\u60c5 \u53ef\u67e5\u770b\u76f8\u5e94\u8bc1\u4e66\u7684\u8be6\u7ec6\u4fe1\u606f\uff1b \u201c HTTPS \u8bbf\u95ee\u201d\uff1a\u5f00\u542f\u8be5\u529f\u80fd\u540e\uff0c\u5ba2\u6237\u7aef\u624d\u80fd\u4f7f\u7528 HTTPS \u534f\u8bae\u8fdb\u884c\u8bbf\u95ee\uff0c\u9ed8\u8ba4\u5173\u95ed\u3002 \u201c\u5f3a\u5236 HTTPS \u201d\uff1a\u52fe\u9009\u6b64\u529f\u80fd\u540e\uff0c\u53c8\u62cd\u4e91\u8fb9\u7f18\u8282\u70b9\u6536\u5230\u7528\u6237\u7684 HTTP \u8bf7\u6c42\u540e\u4f1a\u5c06\u5176\u5f3a\u5236\u8df3\u8f6c\u5230 HTTPS \u8fdb\u884c\u8bbf\u95ee\u3002\u9ed8\u8ba4\uff1a\u517c\u5bb9\u7528\u6237\u7684 HTTP \u548c HTTPS \u8bf7\u6c42\u3002 \u5907\u6ce8\uff1a\u5176\u4e2d HTTPS \u914d\u7f6e \u4e5f\u53ef\u4ee5\u5728 SSL \u8bc1\u4e66\u7ba1\u7406 \u91cc\u9762\u914d\u7f6e\uff0c\u53c2\u89c1\u4e0b\u6587 SSL \u8bc1\u4e66\u7ba1\u7406 \u90e8\u5206\u3002","title":"\u914d\u7f6e\u5f15\u5bfc"},{"location":"cdn/advanced/#_4","text":"\u5982\u679c\u57df\u540d\u5f53\u524d\u5df2\u6709\u8bc1\u4e66\uff0c\u53c8\u62cd\u4e91\u63d0\u4f9b\u4e86\u81ea\u6709\u8bc1\u4e66\u7684\u4e0a\u4f20\u65b9\u5f0f\uff0c\u65e0\u9700\u4eba\u5de5\u534f\u52a9\uff0c\u5b89\u5168\u4fbf\u6377\u3002 \u7b2c\u4e00\u6b65\uff1a\u8fdb\u5165 SSL \u8bc1\u4e66\u670d\u52a1\uff0c\u5de5\u5177\u7bb1 -> SSL \u8bc1\u4e66\u670d\u52a1 -> \u8bc1\u4e66\u7ba1\u7406 -> \u6dfb\u52a0\u81ea\u6709\u8bc1\u4e66 \u7b2c\u4e8c\u6b65\uff1a\u7c98\u8d34\u8bc1\u4e66\u5185\u5bb9: \u70b9\u51fb \u4fdd\u5b58 \u4e4b\u540e\uff0c\u53ef\u67e5\u770b SSL \u8bc1\u4e66\u4fe1\u606f\u5982\u4e0b\u56fe\u6240\u793a\uff1a","title":"\u81ea\u6709\u8bc1\u4e66\u4e0a\u4f20"},{"location":"cdn/advanced/#ssl","text":"\u5728 \u8bc1\u4e66\u7ba1\u7406 \u5217\u8868\u4e2d\uff0c\u53ef\u6839\u636e\u9700\u6c42\u9009\u62e9\u7533\u8d2d\u6210\u529f\u5e76\u5df2\u90e8\u7f72\u4e8e CDN \u5e73\u53f0\u7684\u8bc1\u4e66\u6216\u5df2\u4e0a\u4f20\u7684\u81ea\u6709\u8bc1\u4e66\uff0c\u70b9\u51fb HTTPS \u914d\u7f6e \u8fdb\u884c\u64cd\u4f5c \uff0c\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u201cHTTPS \u8bbf\u95ee\u201d\uff1a\u5f00\u542f\u8be5\u529f\u80fd\u540e\uff0c\u5ba2\u6237\u7aef\u4f7f\u7528 HTTPS \u534f\u8bae\u8bbf\u95ee\u65f6\u624d\u80fd\u6210\u529f\uff0c\u9ed8\u8ba4\u5173\u95ed\u3002 \u201c\u5f3a\u5236 HTTPS\u201d\uff1a\u52fe\u9009\u6b64\u529f\u80fd\u540e\uff0c\u53c8\u62cd\u4e91\u8fb9\u7f18\u8282\u70b9\u6536\u5230\u7528\u6237\u7684 HTTP \u8bf7\u6c42\u540e\u4f1a\u5c06\u5176\u5f3a\u5236\u8df3\u8f6c\u5230 HTTPS \u8fdb\u884c\u8bbf\u95ee\u3002\u9ed8\u8ba4\uff1a\u517c\u5bb9\u7528\u6237\u7684 HTTP \u548c HTTPS \u8bf7\u6c42\u3002","title":"SSL \u8bc1\u4e66\u7ba1\u7406"},{"location":"cdn/advanced/#http2","text":"HTTP/2 \u5373\u8d85\u6587\u672c\u4f20\u8f93\u534f\u8bae 2.0\uff0c\u662f\u4e0b\u4e00\u4ee3 HTTP \u534f\u8bae\u3002\u5b83\u7531\u56fd\u9645\u4e92\u8054\u7f51\u5de5\u7a0b\u4efb\u52a1\u7ec4 \uff08IETF\uff09\u7684 Hypertext Transfer Protocol Bis (httpbis) \u5de5\u4f5c\u5c0f\u7ec4\u8fdb\u884c\u5f00\u53d1\uff0c\u4ee5 SPDY \u4e3a\u539f\u578b\uff0c\u7ecf\u8fc7\u4e24\u5e74\u591a\u7684\u8ba8\u8bba\u548c\u5b8c\u5584\u6700\u7ec8\u786e\u5b9a\u3002 HTTP/2 \u4f18\u52bf\u5982\u4e0b\uff1a 1\uff09HTTP/2 \u91c7\u7528\u4e8c\u8fdb\u5236\u683c\u5f0f\u4f20\u8f93\u6570\u636e\uff0c\u5176\u5728\u534f\u8bae\u7684\u89e3\u6790\u548c\u4f18\u5316\u6269\u5c55\u4e0a\u5e26\u6765\u66f4\u591a\u7684\u4f18\u52bf\u548c\u53ef\u80fd\u3002 2\uff09HTTP/2 \u5bf9\u6d88\u606f\u5934\u91c7\u7528 HPACK \u8fdb\u884c\u538b\u7f29\u4f20\u8f93\uff0c\u80fd\u591f\u8282\u7701\u6d88\u606f\u5934\u5360\u7528\u7684\u7f51\u7edc\u7684\u6d41\u91cf\u3002 3\uff09\u591a\u8def\u590d\u7528\uff0c\u7b80\u5355\u8bf4\u5c31\u662f\u6240\u6709\u7684\u8bf7\u6c42\u53ef\u4ee5\u901a\u8fc7\u4e00\u4e2a TCP \u8fde\u63a5\u5e76\u53d1\u5b8c\u6210\u3002 4\uff09Server Push\uff1a\u670d\u52a1\u7aef\u80fd\u591f\u66f4\u5feb\u7684\u628a\u8d44\u6e90\u63a8\u9001\u7ed9\u5ba2\u6237\u7aef\u3002 \u53c8\u62cd\u4e91 CDN \u5f53\u524d\u5df2\u5168\u5e73\u53f0\u652f\u6301 HTTP/2\uff0c\u5e76\u5df2\u9ed8\u8ba4\u5f00\u542f\u3002\u53c8\u56e0 HTTP/2 \u662f\u5728 HTTPS \u534f\u8bae\u7684\u57fa\u7840\u4e0a\u5b9e\u73b0\u7684\uff0c\u6240\u4ee5\u53ea\u8981\u4f7f\u7528\u53c8\u62cd\u4e91 HTTPS \u52a0\u901f\u670d\u52a1\u7684\u57df\u540d\uff0c\u90fd\u53ef\u514d\u8d39\u4eab\u53d7 HTTP/2 \u670d\u52a1\uff0c\u65e0\u9700\u505a\u4efb\u4f55\u7279\u6b8a\u914d\u7f6e\uff0c\u5982\u4e0b\u56fe\u6240\u793a\uff1a","title":"HTTP/2"},{"location":"cdn/advanced/#_5","text":"\u53c8\u62cd\u4e91 HTTPS \u52a0\u901f\u670d\u52a1\u662f\u57fa\u4e8e SNI \u6280\u672f\u5b9e\u73b0\u7684\uff0c\u56e0\u6b64\u67d0\u4e9b\u4e0d\u652f\u6301 SNI \u7684\u6d4f\u89c8\u5668\u6216\u5ba2\u6237\u7aef\u8bbf\u95ee\u53ef\u80fd\u51fa\u73b0\u95ee\u9898\u3002\u652f\u6301 SNI \u7684\u5ba2\u6237\u7aef\u5217\u8868\u5982\u4e0b\uff1a \u58f0\u660e\uff1a\u8fd0\u884c\u5728 Windows XP \u4e0a\u7684\u6240\u6709\u7248\u672c\u7684 Internet Explorer \u90fd\u4e0d\u652f\u6301 SNI \uff0c\u8be6\u7ec6\u8bf7\u53c2\u8003 \u8fd9\u91cc \u3002","title":"\u6ce8\u610f\u4e8b\u9879"},{"location":"cdn/advanced/#_6","text":"GZIP \u538b\u7f29 \u76ee\u524d\u53c8\u62cd\u4e91 CDN \u5f00\u542f\u4e86 GZIP \u538b\u7f29\u7684\u76f8\u5173\u7279\u6027\uff0c\u5177\u4f53\u5bf9\u5e94\u7684 NGINX \u914d\u7f6e\u5982\u4e0b\uff1a gzip on; gzip_min_length 256; gzip_types <\u89c1\u4e0b\u9762\u7684\u5217\u8868>; gzip_disable \"MSIE [1-6]\\.\"; gzip_vary on; \u89e6\u53d1\u5b9e\u9645\u7684 GZIP \u538b\u7f29\u884c\u4e3a\u9700\u8981\u540c\u65f6\u6ee1\u8db3\u5982\u4e0b\u6761\u4ef6\uff1a Content-Type \u6ee1\u8db3\u4ee5\u4e0b\u5217\u8868\u5176\u4e2d\u4e4b\u4e00\uff1a text/plain text/javascript text/css text/xml text/x-component application/javascript application/x-javascript application/xml application/json application/xhtml+xml application/rss+xml application/atom+xml application/x-font-ttf application/vnd.ms-fontobject image/svg+xml image/x-icon font/opentype text/html -- default Content-Length \u5927\u4e8e 256 \u5b57\u8282 \u5ba2\u6237\u7aef\u8bf7\u6c42\u5934\u5e26\u4e86 Accept-Encoding: gzip \u4ee3\u7801\u538b\u7f29 \u5f00\u542f\u540e\uff0c\u4f1a\u81ea\u52a8\u53bb\u9664 HTML \u6587\u4ef6\u4e2d\u975e\u5fc5\u8981\u7684\u5b57\u7b26\uff08\u7a7a\u767d\u3001\u6ce8\u91ca\u7b49\uff09\uff0c\u81ea\u52a8\u538b\u7f29\u6587\u4ef6\u5927\u5c0f\uff0c\u63d0\u5347\u8bbf\u95ee\u901f\u5ea6\u3002\u7279\u522b\u5730\uff0c\u76ee\u524d\u4ec5\u652f\u6301 HTML \u4ee3\u7801\u7684\u4f18\u5316\u3002 \u914d\u7f6e\u5f15\u5bfc \u767b\u9646 \u53c8\u62cd\u4e91\u7ba1\u7406\u63a7\u5236\u53f0 \uff0c\u4f9d\u6b21\u8fdb\u5165\uff1a\u670d\u52a1 > \u529f\u80fd\u914d\u7f6e > \u9ad8\u7ea7\u529f\u80fd > \u4ee3\u7801\u538b\u7f29\uff0c\u5f00\u542f\u5f00\u5173\u5373\u53ef\uff0c\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u53c2\u6570\u8ddf\u968f \u53c2\u6570\u8ddf\u968f\u529f\u80fd\u5305\u62ec\u4e09\u79cd\u6a21\u5f0f\uff0c\u5206\u522b\u662f \u53c2\u6570\u4e0d\u8ddf\u968f \u3001 \u5168\u7a0b\u8ddf\u968f \u3001 \u56de\u6e90\u8ddf\u968f \uff0c\u7cfb\u7edf\u9ed8\u8ba4\u4e3a \u5168\u7a0b\u8ddf\u968f \u6a21\u5f0f\u3002\u4e00\u822c\u60c5\u51b5\u4e0b\uff0c\u6839\u636e\u4e1a\u52a1\u60c5\u51b5\uff0c\u5efa\u8bae\u9009\u62e9 \u53c2\u6570\u4e0d\u8ddf\u968f \u6765\u63d0\u9ad8\u8d44\u6e90\u6587\u4ef6\u7f13\u5b58\u547d\u4e2d\u7387\u3002\u8be6\u7ec6\u4ecb\u7ecd\u5982\u4e0b\uff1a \u53c2\u6570\u4e0d\u8ddf\u968f\uff1a \u5f00\u542f\u540e\uff0c\u7cfb\u7edf\u4f1a\u8fc7\u6ee4\u8bf7\u6c42\u4e2d\u7684\u67e5\u8be2\u5b57\u7b26\u4e32\uff0c\u5e76\u4e14\u67e5\u8be2\u5b57\u7b26\u4e32\u4e0d\u4f1a\u4f20\u9012\u7ed9\u6e90\u7ad9 \u5168\u7a0b\u8ddf\u968f\uff1a \u5f00\u542f\u540e\uff0c\u5c06\u4e0d\u518d\u8fc7\u6ee4\u8bf7\u6c42\u4e2d\u7684\u67e5\u8be2\u5b57\u7b26\u4e32\uff0c\u5e76\u5c06\u67e5\u8be2\u5b57\u7b26\u4e32\u4f20\u9012\u7ed9\u6e90\u7ad9 \u56de\u6e90\u8ddf\u968f\uff1a \u5f00\u542f\u540e\uff0c\u4f1a\u8fc7\u6ee4\u8bf7\u6c42\u4e2d\u7684\u67e5\u8be2\u5b57\u7b26\u4e32\uff0c\u5728\u8bbf\u95ee\u56de\u6e90\u9636\u6bb5\u4f1a\u5c06\u67e5\u8be2\u5b57\u7b26\u4e32\u4f20\u9012\u7ed9\u6e90\u7ad9 \u914d\u7f6e\u5f15\u5bfc \u767b\u9646 \u53c8\u62cd\u4e91\u7ba1\u7406\u63a7\u5236\u53f0 \uff0c\u4f9d\u6b21\u8fdb\u5165\uff1a\u670d\u52a1 > \u529f\u80fd\u914d\u7f6e > \u57fa\u7840\u914d\u7f6e > \u53c2\u6570\u8ddf\u968f\uff0c\u70b9\u51fb\u7ba1\u7406\u5373\u53ef\u5f00\u59cb\u914d\u7f6e\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u6ce8\u610f\uff1a\u53c2\u6570\u8ddf\u968f\u529f\u80fd\uff0c\u53ef\u4ee5\u914d\u5408\u7f13\u5b58\u914d\u7f6e\u529f\u80fd\u6765\u4f7f\u7528\u3002 \u91cd\u5b9a\u5411\u4f18\u5316 \u5f53 CDN \u8282\u70b9\u56de\u6e90\u7ad9\u65f6\uff0c\u82e5\u6e90\u7ad9\u54cd\u5e94\u7684\u72b6\u6001\u7801\u4e3a 301/302\uff0cCDN \u8282\u70b9\u5bf9\u91cd\u5b9a\u5411\u4e4b\u540e\u7684\u76ee\u6807 URL \uff08\u4e5f\u5373 301/302 \u54cd\u5e94\u5934 Location \u5b57\u6bb5\u5bf9\u5e94\u7684\u4fe1\u606f\uff09\u53d1\u8d77\u8bf7\u6c42\uff0c\u5c06\u83b7\u53d6\u540e\u7684\u5185\u5bb9\u54cd\u5e94\u7ed9\u6700\u7ec8\u7528\u6237\uff0c\u5e76\u5728 CDN \u8282\u70b9\u8fdb\u884c\u7f13\u5b58\u3002\u8fd9\u6837\u5411\u6700\u7ec8\u7528\u6237\u5c4f\u853d\u4e86\u91cd\u5b9a\u5411\u8fc7\u7a0b\uff0c\u514d\u53bb\u4e86\u6700\u7ec8\u7528\u6237\u518d\u6b21\u5411\u91cd\u5b9a\u5411\u540e\u7684 URL \u91cd\u65b0\u53d1\u8d77\u8bf7\u6c42\u7684\u8fde\u63a5\u65f6\u95f4\uff0c\u4ece\u800c\u52a0\u5feb\u4e86\u8bbf\u95ee\u901f\u5ea6\u3002 \u539f\u7406\u4ecb\u7ecd \u4e00\u822c\u60c5\u51b5\u4e0b\uff0c\u5f53 CDN \u8282\u70b9\u56de\u6e90\u7ad9\u8bf7\u6c42\u6587\u4ef6\u65f6\uff0c\u82e5\u6e90\u7ad9\u8fd4\u56de\u7684\u662f HTTP 301/302 \u7684\u54cd\u5e94\uff0cCDN \u8282\u70b9\u4f1a\u5c06\u8be5\u54cd\u5e94\u8fd4\u56de\u7ed9\u5ba2\u6237\u7aef\uff0c\u5ba2\u6237\u7aef\u6839\u636e\u54cd\u5e94\u5934\u4e2d\u7684 Location \u5934\u4fe1\u606f\u8fdb\u884c\u518d\u6b21\u8bf7\u6c42\u3002\u914d\u7f6e\u4e86\u91cd\u5b9a\u5411\u4f18\u5316\u529f\u80fd\u4e4b\u540e\uff0c\u8bbf\u95ee\u6d41\u7a0b\u5982\u4e0b\u56fe\u6240\u793a\uff1a 1\uff09\u5ba2\u6237\u7aef\u5411 CDN \u8282\u70b9\u53d1\u8d77\u8bf7\u6c42\u5e76\u4f20\u9012\u81f3\u6e90\u7ad9\uff0c\u4f8b\u5982\uff1a http://example.com/123.html \uff1b 2\uff09\u6e90\u7ad9\u7ed9 CDN \u8282\u70b9\u54cd\u5e94 301/302 \u72b6\u6001\u7801\uff0c\u5e76\u6307\u660e\u91cd\u5b9a\u5411\u540e\u7684 URL \u4e3a http://example.com/456.html 3\uff09CDN \u8282\u70b9\u5bf9\u91cd\u5b9a\u5411\u4e4b\u540e\u5bf9\u76ee\u6807 URL \u53d1\u8d77\u8bf7\u6c42\uff1b 4\uff09\u6e90\u7ad9\u54cd\u5e94\u5185\u5bb9\u7ed9\u6700\u7ec8\u7528\u6237\uff0c\u5e76\u5c06\u5185\u5bb9\u5728 CDN \u8282\u70b9\u8fdb\u884c\u7f13\u5b58\uff1b \u914d\u7f6e\u5f15\u5bfc \u767b\u9646 \u53c8\u62cd\u4e91\u7ba1\u7406\u63a7\u5236\u53f0 \uff0c\u4f9d\u6b21\u8fdb\u5165\uff1a\u670d\u52a1 > \u529f\u80fd\u914d\u7f6e > \u9ad8\u7ea7\u529f\u80fd > \u91cd\u5b9a\u5411\u4f18\u5316\uff0c\u6ed1\u52a8\u5f00\u5173\u5373\u53ef\u5f00\u542f\u8be5\u529f\u80fd\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u6587\u4ef6\u5408\u5e76 \u53c8\u62cd\u4e91\u5b58\u50a8 \u548c \u81ea\u4e3b\u6e90\u7ad9 CDN \u52a0\u901f\u670d\u52a1\u5747\u652f\u6301 JS\uff0cCSS Combo\uff08\u7ec4\u5408\u7279\u6027\uff09\uff0c\u5373\u53ef\u4ee5\u628a\u591a\u4e2a JS, CSS \u8bf7\u6c42\u5408\u5e76\u6210\u4e00\u4e2a\u3002 \u5982\u4f55\u4f7f\u7528 \u7279\u522b\u5730\uff0c\u6211\u4eec\u4ee5 !! \u4f5c\u4e3a\u5206\u9694\u7b26\u3002 http://upyun-assets.b0.upaiyun.com/foo/!!a.js,b.js \u4e00\u4e2a\u5f15\u7528\u4e86\u5982\u4e0a URL \u7684 Demo: http://upyun-assets.b0.upaiyun.com/jscombo.html","title":"\u6027\u80fd\u4f18\u5316"},{"location":"cdn/advanced/#_7","text":"\u53c8\u62cd\u4e91 CDN \u670d\u52a1\u53ef\u63d0\u4f9b\u5206\u6bb5\u7f13\u5b58\u529f\u80fd\u914d\u7f6e\uff0c\u5f00\u542f\u8be5\u529f\u80fd\u53ef\u6709\u6548\u964d\u4f4e\u5927\u6587\u4ef6\u56de\u6e90\u7387\uff0c\u63d0\u5347\u54cd\u5e94\u901f\u5ea6\uff0c\u4e0e\u6b64\u540c\u65f6\uff0c\u53ef\u4ee5\u63d0\u9ad8\u6587\u4ef6\u5728 CDN \u8282\u70b9\u7684\u7f13\u5b58\u547d\u4e2d\u7387\u3002\u7279\u522b\u5730\uff0c\u5f00\u542f\u8be5\u7279\u6027\u4e4b\u540e\uff0cCDN \u8282\u70b9\u4f1a\u4ee5 Range \u8bf7\u6c42\u56de\u6e90\u3002 \u914d\u7f6e\u5f15\u5bfc \u767b\u9646 \u53c8\u62cd\u4e91\u7ba1\u7406\u63a7\u5236\u53f0 \uff0c\u4f9d\u6b21\u8fdb\u5165\uff1a\u670d\u52a1 > \u529f\u80fd\u914d\u7f6e > \u9ad8\u7ea7\u670d\u52a1 > \u5206\u6bb5\u7f13\u5b58\uff0c\u70b9\u51fb\u300c\u7ba1\u7406\u300d\u6309\u94ae\u5373\u53ef\u5f00\u59cb\u914d\u7f6e\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u9ed8\u8ba4\u914d\u7f6e\uff1a\u8be5\u7279\u6027\u4f1a\u9ed8\u8ba4\u5173\u95ed\uff0c\u60a8\u53ef\u4ee5\u6709\u9009\u62e9\u6027\u7684\u5f00\u542f\u8be5\u7279\u6027\u3002\u7279\u522b\u5730\uff0c\u6211\u4eec\u9488\u5bf9\u5206\u6bb5\u7f13\u5b58\u9884\u7f6e\u4e86\u6587\u4ef6\u540e\u7f00\u6a21\u677f\uff0c\u4e5f\u5373\u53ef\u4ee5\u6839\u636e\u6587\u4ef6\u540e\u7f00\u6216\u8005\u901a\u914d\u7b26\u89c4\u5219\u6765\u914d\u7f6e\u662f\u5426\u5f00\u542f\u5206\u6bb5\u7f13\u5b58\u529f\u80fd\u3002\u9ed8\u8ba4\u9884\u7f6e\u540e\u7f00\u5982\u4e0b\uff1a \u89c6\u9891\uff1aAVI\u3001MP4\u3001FLV\u3001MOV\u30013GP\u3001ASF\u3001WMV\u3001MPG\u3001F4V\u3001M4V\u3001MKV\u3001VOB\u3001M3U8\u3001TS \u3001RMVB\u3001DAT\u3001RM \u97f3\u9891\uff1aMP3\u3001OGG\u3001M4A\u3001WMA\u3001AIF\u3001AU \u5b89\u88c5\u5305\uff1aAPK\u3001ZIP\u3001EXE\u3001RAR\u3001IPA\u3001PXL\u3001DEB\u3001SIS\u3001SISX\u3001JAR\u3001XAP \u6e38\u620f\u4e0b\u8f7d\uff1aSO\u3001CUE\u3001CCD\u3001MDS\u3001IMG\u30017Z \u5176\u5b83\uff1aCAB\u3001DHP\u3001GZ\u3001ISO\u3001MPQ\u3001PBCV\u3001PXL\u3001QNP\u3001R00\u3001XY\u3001XY2 \u914d\u7f6e\u6548\u679c \u5047\u8bbe\u6700\u7ec8\u7528\u6237\u53d1\u8d77\u4e86\u8d44\u6e90\u8bf7\u6c42\uff0c\u8bf7\u6c42\u7684 URL \u4e3a\uff1a http://www.example.com/download/game.zip \uff0cCDN \u8282\u70b9\u6536\u5230\u8bf7\u6c42\u540e\uff0c\u82e5\u547d\u4e2d\u5219\u54cd\u5e94\u5bf9\u5e94\u5206\u6bb5\u6587\u4ef6\u7ed9\u6700\u7ec8\u7528\u6237\uff0c\u672a\u547d\u4e2d\u7684\u5206\u6bb5 CDN \u8282\u70b9\u5219\u56de\u6e90\u53d1\u8d77 Range \u8bf7\u6c42\u83b7\u53d6\u8d44\u6e90\u6587\u4ef6\u3002 \u5f00\u542f\u5206\u6bb5\u7f13\u5b58\uff1a \u82e5\u6700\u7ec8\u7528\u6237\u53d1\u8d77\u8d44\u6e90\u8bf7\u6c42\uff0cCDN \u8282\u70b9\u4e0a\u5df2\u7ecf\u547d\u4e2d\u8be5\u5206\u6bb5\uff0c\u5219\u76f4\u63a5\u54cd\u5e94\u7ed9\u6700\u7ec8\u7528\u6237 \u82e5 CDN \u8282\u70b9\u672a\u547d\u4e2d\u7f13\u5b58\uff0c\u5219 CDN \u8282\u70b9\u56de\u6e90\u4f7f\u7528 Range \u8bf7\u6c42\uff0c\u5206\u6bb5\u83b7\u53d6\u8d44\u6e90\u6587\u4ef6 \u5173\u95ed\u5206\u6bb5\u7f13\u5b58\uff1a \u8282\u70b9\u6587\u4ef6\u7f13\u5b58\u8fc7\u671f\u4e4b\u540e\uff0c\u4f1a\u5411\u6e90\u7ad9\u83b7\u53d6\u6574\u4e2a\u8d44\u6e90\u6587\u4ef6 \u5206\u6bb5\u9884\u52a0\u8f7d\uff1a \u5f00\u542f\u5206\u6bb5\u7f13\u5b58\u529f\u80fd\u4e4b\u540e\uff0c\u8be5\u7279\u6027\u4f1a\u9ed8\u8ba4\u5f00\u542f\u3002\u5f53\u6700\u7ec8\u7528\u6237\u8bf7\u6c42\u7b2c\u4e00\u4e2a\u5206\u6bb5\u6587\u4ef6\u65f6\uff0c\u6211\u4eec\u4f1a\u63d0\u524d\u53bb\u4e0b\u8f7d\u540e\u9762\u51e0\u4e2a\u5206\u6bb5\u6587\u4ef6\uff0c\u8fdb\u800c\u63d0\u9ad8\u6587\u4ef6\u4e0b\u8f7d\u901f\u5ea6 \u6ce8\u610f\u4e8b\u9879 1\u3001\u6e90\u7ad9\u9700\u8981\u652f\u6301 Range \u8bf7\u6c42\uff0c\u5426\u5219\u4f1a\u5bfc\u81f4\u56de\u6e90\u5931\u8d25\uff1b\u4e25\u683c\u6765\u8bf4\uff0c\u6211\u4eec\u53ea\u901a\u8fc7 Accept-Ranges: bytes \u8fd9\u4e2a\u5934\u6765\u5224\u65ad\u6e90\u652f\u4e0d\u652f\u6301 Range \u8bf7\u6c42 \uff0c\u5426\u5219\u5373\u4f7f\u5f00\u542f\u4e86\u5206\u6bb5\u7f13\u5b58\u7279\u6027\uff0c\u4e5f\u4e0d\u4f1a\u751f\u6548\uff1b 2\u3001\u8be5\u529f\u80fd\u914d\u7f6e\u540e\u4e0d\u4f1a\u7acb\u5373\u751f\u6548\uff0c\u9700\u5728\u6587\u4ef6\u7f13\u5b58\u8fc7\u671f\u6216\u8005\u6587\u4ef6\u7f13\u5b58\u88ab\u4e3b\u52a8\u5237\u65b0\u4e4b\u540e\u65b9\u53ef\u751f\u6548\uff1b 3\u3001\u8be5\u529f\u80fd\u4ec5\u9488\u5bf9\u9759\u6001\u6587\u4ef6\uff0c\u52a8\u6001\u5185\u5bb9\u5f00\u542f\u5206\u6bb5\u7f13\u5b58\u4f1a\u53ef\u80fd\u4f1a\u53d1\u751f\u9519\u8bef\uff0c\u8bf7\u8c28\u614e\u4f7f\u7528\uff1b 4\u3001\u8be5\u529f\u80fd\u5f00\u542f\u540e\uff0c\u8d44\u6e90\u5728 CDN \u8282\u70b9\u4e0a\u4f1a\u8fdb\u884c\u5206\u6bb5\u7f13\u5b58\uff0c\u5982\u679c\u8981\u7acb\u9a6c\u5173\u95ed\u8be5\u7279\u6027\uff0c\u53ef\u901a\u8fc7\u624b\u52a8\u5237\u65b0\u6587\u4ef6\u6765\u89e3\u51b3\uff1b 5\u3001\u5982\u679c\u60a8\u5df2\u7ecf\u4f7f\u7528\u53c8\u62cd\u4e91\u5bf9\u8c61\u5b58\u50a8\u670d\u52a1\uff0c\u8be5\u7279\u6027\u5df2\u7ecf\u9ed8\u8ba4\u5f00\u542f\uff0c\u65e0\u9700\u505a\u4efb\u4f55\u914d\u7f6e\uff1b","title":"\u5206\u6bb5\u7f13\u5b58"},{"location":"cdn/advanced/#_8","text":"\u89c6\u9891\u62d6\u62c9\u529f\u80fd\u7528\u4e8e\u89c6\u9891\u70b9\u64ad\u7684\u589e\u5f3a\u4f53\u9a8c\uff0c\u65b9\u4fbf\u6700\u7ec8\u7528\u6237\u901a\u8fc7\u62d6\u62c9\u64ad\u653e\u5668\u7684\u8fdb\u5ea6\u6761\uff0c\u89c2\u770b\u4efb\u610f\u8d77\u59cb\u4f4d\u7f6e\u7684\u89c6\u9891\uff0c\u800c\u65e0\u9700\u4ece\u5934\u89c2\u770b\u3002\u8be5\u529f\u80fd\u8fd8\u53ef\u4ee5\u6269\u5c55\u4e3a\u8df3\u8fc7\u7247\u5934\u3001\u7eed\u64ad\u3001\u9884\u64ad\u653e\u7b49\u529f\u80fd\u3002\u53d1\u9001\u62d6\u62c9\u64ad\u653e\u8fdb\u5ea6\u65f6\uff0c\u5ba2\u6237\u7aef\u53d1\u8d77\u7684\u8bf7\u6c42\u7c7b\u4f3c http://video.upyun.com/test.mp4?start=100 \u8fd9\u6837\u7684 URL \u8bf7\u6c42\u3002 \u914d\u7f6e\u5f15\u5bfc \u767b\u9646 \u53c8\u62cd\u4e91\u7ba1\u7406\u63a7\u5236\u53f0 \uff0c\u4f9d\u6b21\u8fdb\u5165\uff1a\u670d\u52a1 > \u529f\u80fd\u914d\u7f6e > \u9ad8\u7ea7\u529f\u80fd > \u89c6\u9891\u62d6\u62c9\uff0c\u70b9\u51fb\u7ba1\u7406\u5373\u53ef\u5f00\u59cb\u914d\u7f6e\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u8be6\u7ec6\u914d\u7f6e\u8bf7\u53c2\u89c1 \u300c\u652f\u6301\u4ece\u4efb\u610f\u8d77\u70b9\u89c2\u770b\u300d\u89c6\u9891\u62d6\u62c9\u7528\u6237\u6307\u5357 \u6ce8\u610f\u4e8b\u9879\uff1a 1.\u4e3a\u4e86\u4fdd\u8bc1\u6b63\u5e38\u62d6\u62c9\uff0c\u64ad\u653e\u5668\u53ef\u4ee5\u53d1\u8d77\u7ea6\u5b9a\u683c\u5f0f\u7684\u8bf7\u6c42\uff0c\u4f8b\u5982\uff1a http://example.com/video/test.mp4?start=xxx&end=xxx 2.\u89c6\u9891\u6587\u4ef6\u9700\u542b\u6709\u5173\u952e\u5e27\uff0c\u8fd9\u662f\u5b9e\u73b0\u62d6\u62c9\u7684\u524d\u63d0\u6761\u4ef6\uff0c\u5173\u952e\u5e27\u592a\u5c11\u6216\u8005\u6ca1\u6709\u5173\u952e\u5e27\uff0c\u89c6\u9891\u6587\u4ef6\u9700\u8981\u91cd\u65b0\u7f16\u7801 3.\u89c6\u9891\u6587\u4ef6 metedata \u4e2d\u7f3a\u5c11\u5173\u952e\u5e27\u7684\u7d22\u5f15\u4fe1\u606f\uff0c\u5982 FLV \u7f3a\u5c11 keyframes \u4fe1\u606f\uff0cMP4 \u7f3a\u5c11 seekpoint \u4fe1\u606f\uff0c\u6216\u7f3a\u5931 moov box \uff0c\u90fd\u4f1a\u5bfc\u81f4\u62d6\u62c9\u5931\u8d25 4.\u652f\u6301\u6839\u636e\u4e0d\u540c\u8d44\u6e90\u8def\u5f84\u6dfb\u52a0\u914d\u7f6e\uff0c\u6700\u591a\u4ec5\u652f\u6301 20 \u6761 5.\u76ee\u524d\u652f\u6301\u6587\u4ef6\u683c\u5f0f\u6709\uff1aMP4 \u548c FLV\uff0cMP4 \u652f\u6301\u6309\u65f6\u95f4\u62d6\u62c9\uff0cFLV \u652f\u6301\u6309\u5b57\u8282\u62d6\u62c9","title":"\u89c6\u9891\u62d6\u62c9"},{"location":"cdn/advanced/#_9","text":"\u4f7f\u7528\u53c8\u62cd\u4e91 CDN \u670d\u52a1\u65f6\uff0c\u6e90\u7ad9\u7c7b\u578b\u9009\u62e9\u7684\u662f \u81ea\u4e3b\u6e90 \u6a21\u5f0f\uff08\u4e5f\u5373\u5ba2\u6237\u7684\u7f51\u7ad9\u8d44\u6e90\u90fd\u6258\u7ba1\u5728\u81ea\u5df1\u7684\u670d\u52a1\u5668\u6216\u8005\u7b2c\u4e09\u65b9\u5b58\u50a8\u5e73\u53f0\u4e0a\uff09\u7684\u8bdd\uff0c\u53ef\u4ee5\u5f00\u542f\u955c\u50cf\u5b58\u50a8\u529f\u80fd\uff0c\u53ef\u4ee5\u5c06\u7f51\u7ad9\u6570\u636e\u5e73\u6ed1\u8fc1\u79fb\u81f3\u53c8\u62cd\u4e91\u5b58\u50a8\u5e73\u53f0\uff0c\u5e76\u51cf\u5c0f\u7f51\u7ad9\u56de\u6e90\u6bd4\u4f8b\u3002 \u5b9e\u73b0\u6d41\u7a0b \u5b9e\u73b0\u673a\u5236\u53ef\u4ee5\u53c2\u7167\u5982\u4e0b\u6d41\u7a0b\uff1a \u7ec8\u7aef\u7528\u6237\u8bbf\u95ee\u8d44\u6e90\uff1b \u53c8\u62cd\u4e91 CDN \u8282\u70b9\u4ece\u7528\u6237\u81ea\u4e3b\u6e90\u7ad9\u83b7\u53d6\u8d44\u6e90\uff1b \u8fd4\u56de\u8d44\u6e90\u7ed9\u7ec8\u7aef\uff0c\u5e76\u6301\u4e45\u5316\u5b58\u50a8\u5230\u53c8\u62cd\u4e91\u5b58\u50a8\u5e73\u53f0\uff1b \u7ec8\u7aef\u7528\u6237\u518d\u6b21\u8bbf\u95ee\u65f6\uff0c\u5c06\u76f4\u63a5\u4ece\u53c8\u62cd\u4e91\u83b7\u53d6\u8d44\u6e90\uff0c\u4e0d\u518d\u56de\u6e90\u83b7\u53d6\uff1b \u968f\u7740\u7ec8\u7aef\u7528\u6237\u7684\u4e0d\u65ad\u8bbf\u95ee\uff0c\u6e90\u7ad9\u7684\u8d44\u6e90\u9010\u6b65\u81ea\u52a8\u5b58\u50a8\u5230\u53c8\u62cd\u4e91\u5b58\u50a8\u5e73\u53f0\u3002 \u914d\u7f6e\u5f15\u5bfc \u767b\u9646 \u53c8\u62cd\u4e91\u7ba1\u7406\u63a7\u5236\u53f0 \uff0c\u4f9d\u6b21\u8fdb\u5165\uff1a\u670d\u52a1 > \u529f\u80fd\u914d\u7f6e > \u9ad8\u7ea7\u529f\u80fd > \u955c\u50cf\u5b58\u50a8\uff0c\u70b9\u51fb\u5f00\u542f\u5373\u53ef\u5f00\u59cb\u914d\u7f6e\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u53c8\u62cd\u4e91\u955c\u50cf\u5b58\u50a8\u529f\u80fd\u5305\u62ec\u4e09\u79cd\u72b6\u6001\uff0c\u5206\u522b\u662f\u5f00\u542f\u3001\u6682\u505c\u3001\u5173\u95ed\uff0c\u8be6\u7ec6\u63cf\u8ff0\u5982\u4e0b\uff1a \u5f00\u542f\u72b6\u6001 \u5f00\u542f\u4e4b\u540e\uff0c\u5f53 CDN \u8282\u70b9\u7f13\u5b58\u5931\u6548\u65f6\uff0c\u4f1a\u4f18\u5148\u56de\u53c8\u62cd\u4e91\u5b58\u50a8\u83b7\u53d6\u8d44\u6e90\uff0c\u5982\u679c\u53c8\u62cd\u4e91\u5b58\u50a8\u6ca1\u6709\u547d\u4e2d\u8d44\u6e90\uff0c\u5219\u76f4\u63a5\u56de\u81ea\u6709\u6e90\u7ad9\u83b7\u53d6\u8d44\u6e90\u5e76\u54cd\u5e94\u7ed9\u6700\u7ec8\u7528\u6237\uff0c\u4e0e\u6b64\u540c\u65f6\uff0c\u8d44\u6e90\u4f1a\u88ab\u6254\u8fdb\u955c\u50cf\u5b58\u50a8\u961f\u5217\u5e76\u8fdb\u884c\u5b58\u50a8\uff0c\u4e0b\u4e00\u4e2a\u76f8\u540c\u7684\u8d44\u6e90\u8bf7\u6c42\u8fc7\u6765\u65f6\u5219\u4f1a\u76f4\u63a5\u7531\u5b58\u50a8\u547d\u4e2d\u7684\u8d44\u6e90\u76f4\u63a5\u63d0\u4f9b\u670d\u52a1\u3002 \u6682\u505c\u72b6\u6001 \u76f4\u63a5\u5173\u95ed\u955c\u50cf\u5b58\u50a8\u529f\u80fd\uff0c\u53ef\u80fd\u4f1a\u5bfc\u81f4\u56de\u6e90\u538b\u529b\u8fc7\u5927\uff0c\u6211\u4eec\u4f1a\u5148\u8fdb\u5165\u6682\u505c\u72b6\u6001\uff0c\u8be5\u72b6\u6001\u4e0b\u4e0d\u4f1a\u8fdb\u884c\u8d44\u6e90\u8fc1\u79fb\u52a8\u4f5c\uff0c\u8bbf\u95ee\u8d44\u6e90\u65f6\uff0c\u4ecd\u7136\u5148\u8bbf\u95ee\u53c8\u62cd\u4e91\u5b58\u50a8\uff0c\u5982\u679c\u5b58\u50a8\u4e0a\u6ca1\u6709\u547d\u4e2d\u8d44\u6e90\uff0c\u5219\u4f1a\u8bbf\u95ee\u81ea\u4e3b\u6e90\u7ad9\u3002 \u5173\u95ed\u72b6\u6001 \u8be5\u529f\u80fd\u5173\u95ed\u4e4b\u540e\uff0c\u65b0\u7684\u8bf7\u6c42\u8fc7\u6765\u7684\u8bdd\uff0cCDN \u8282\u70b9\u4e0d\u4f1a\u56de\u53c8\u62cd\u4e91\u5b58\u50a8\u5e73\u53f0\u83b7\u53d6\u8d44\u6e90\uff0c\u5219\u4f1a\u76f4\u63a5\u56de\u5ba2\u6237\u6e90\u7ad9\u83b7\u53d6\u8d44\u6e90\u3002 \u6ce8\u610f\u4e8b\u9879 1.\u5f53\u7528\u6237\u66f4\u65b0\u4e86\u6e90\u7ad9\u8d44\u6e90\u65f6\uff0c\u4e3a\u4e86\u4fdd\u8bc1\u8bf7\u6c42\u8bbf\u95ee\u5230\u7684\u8d44\u6e90\u662f\u6700\u65b0\u7684\uff0c\u6b64\u65f6\u9700\u8981\u901a\u8fc7 API \u6216 FTP \u7684\u65b9\u5f0f\u5bf9\u5df2\u7ecf\u5b58\u50a8\u5728\u53c8\u62cd\u4e91\u5b58\u50a8\u4e0a\u7684\u6587\u4ef6\u8fdb\u884c\u5220\u9664\u548c\u66ff\u6362\u64cd\u4f5c 2.\u5f53\u955c\u50cf\u5b58\u50a8\u529f\u80fd\u5904\u4e8e\u6682\u505c\u72b6\u6001\u65f6\uff0c\u60a8\u53ef\u4ee5\u901a\u8fc7 API \u63a5\u53e3\u9010\u6b65\u5220\u9664\u53c8\u62cd\u4e91\u4e0a\u5bf9\u5e94\u7684\u6587\u4ef6\uff0c\u5c06\u56de\u6e90\u6d41\u91cf\u5e73\u6ed1\u8fc1\u79fb\u81f3\u6e90\u7ad9\uff0c\u6216\u8c03\u6574\u6e90\u7ad9\u5e26\u5bbd\uff0c\u6700\u540e\u518d\u6267\u884c\u5173\u95ed\u64cd\u4f5c","title":"\u955c\u50cf\u5b58\u50a8"},{"location":"cdn/advanced/#_10","text":"\u8de8\u57df\u8d44\u6e90\u5171\u4eab \uff08 Cross-Origin Resource Sharing\uff09\u662f\u4e00\u79cd\u7f51\u7edc\u6d4f\u89c8\u5668\u7684\u6280\u672f\u89c4\u8303\uff0c\u4ed6\u4e3a Web \u670d\u52a1\u5668\u5b9a\u4e49\u4e86\u4e00\u79cd\u65b9\u5f0f\uff0c\u5141\u8bb8\u7f51\u9875\u4ece\u4e0d\u540c\u7684\u57df\u8bbf\u95ee\u5176\u8d44\u6e90\u3002\u8de8\u6e90\u8d44\u6e90\u5171\u4eab\u6807\u51c6\u901a\u8fc7\u65b0\u589e\u4e00\u7cfb\u5217 HTTP \u5934\uff0c\u8ba9\u670d\u52a1\u5668\u80fd\u58f0\u660e\u90a3\u4e9b\u6765\u6e90\u53ef\u4ee5\u901a\u8fc7\u6d4f\u89c8\u5668\u8bbf\u95ee\u8be5\u670d\u52a1\u5668\u4e0a\u7684\u8d44\u6e90\u3002\u6b64\u65f6\u9700\u8981\u5728 Response Header \u4e2d\u589e\u52a0\u8de8\u57df\u76f8\u5173\u914d\u7f6e\uff0c\u8fd9\u6837\u5c31\u53ef\u4ee5\u4f7f\u5f97\u8d44\u6e90\u7684\u5b89\u5168\u8bbf\u95ee\u6210\u4e3a\u53ef\u80fd\u3002 \u914d\u7f6e\u5f15\u5bfc \u767b\u9646 \u53c8\u62cd\u4e91\u7ba1\u7406\u63a7\u5236\u53f0 \uff0c\u4f9d\u6b21\u8fdb\u5165\uff1a\u670d\u52a1 > \u529f\u80fd\u914d\u7f6e > \u9ad8\u7ea7\u529f\u80fd > CORS \u8de8\u57df\u5171\u4eab\uff0c\u70b9\u51fb\u7ba1\u7406\u5373\u53ef\u5f00\u59cb\u914d\u7f6e\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff1a Access-Control-Allow-Origin \u8fd4\u56de\u7684\u8d44\u6e90\u9700\u8981\u6709\u4e00\u4e2a Access-Control-Allow-Origin \u5934\u4fe1\u606f\uff0c\u4e5f\u53ef\u4ee5\u8bbe\u7f6e\u901a\u914d\u7b26\uff0a\uff0c\u5141\u8bb8\u88ab\u6240\u6709\u57df\u4f7f\u7528\u3002\u8bed\u6cd5\u5982\u4e0b: Access-Control-Allow-Origin: | * \u4e3e\u4e2a\u6817\u5b50\uff0c\u5141\u8bb8\u6765\u81ea http://www.upyun.com \u7684\u8bf7\u6c42\uff0c\u4f60\u53ef\u4ee5\u8fd9\u6837\u6307\u5b9a: Access-Control-Allow-Origin: http://www.upyun.com Access-Control-Allow-Methods \u8868\u793a\u5141\u8bb8\u7684\u8de8\u57df\u8bf7\u6c42\u7684\u65b9\u6cd5\uff0c\u5728\u5f53\u524d\u8bf7\u6c42\u7684\u57df\u88ab\u5141\u8bb8\u540e\uff0c\u8fd8\u8981\u68c0\u67e5\u5f53\u524d\u8bf7\u6c42\u7684\u65b9\u6cd5\u662f\u5426\u88ab\u5141\u8bb8\uff0c\u793a\u4f8b\u5982\u4e0b\uff1a Access-Control-Allow-Methods: POST, GET, OPTIONS Access-Control-Allow-Headers \u4e5f\u662f\u5728\u54cd\u5e94\u9884\u68c0\u8bf7\u6c42\u7684\u65f6\u5019\u4f7f\u7528\uff0c\u7528\u6765\u6307\u660e\u5728\u5b9e\u9645\u7684\u8bf7\u6c42\u4e2d\uff0c\u53ef\u4ee5\u4f7f\u7528\u54ea\u4e9b\u81ea\u5b9a\u4e49 HTTP \u8bf7\u6c42\u5934\uff0c\u6bd4\u5982\uff1a Access-Control-Allow-Headers: X-PINGOTHER\uff0cX-UPYUN \u8fd9\u6837\u5728\u5b9e\u9645\u7684\u8bf7\u6c42\u91cc,\u8bf7\u6c42\u5934\u4fe1\u606f\u91cc\u5c31\u53ef\u4ee5\u6709\u8fd9\u4e48\u4e00\u6761\uff1a X-PINGOTHER: hello Access-Control-Expose-Headers \u8bbe\u7f6e\u6d4f\u89c8\u5668\u5141\u8bb8\u8bbf\u95ee\u7684\u670d\u52a1\u5668\u7684\u5934\u4fe1\u606f\u7684\u767d\u540d\u5355\uff0c\u793a\u4f8b\u5982\u4e0b\uff1a Access-Control-Expose-Headers: X-My-Custom-Header, X-Another-Custom-Header \u8fd9\u6837\uff0c X-My-Custom-Header \u548c X-Another-Custom-Header \u8fd9\u4e24\u4e2a\u5934\u4fe1\u606f\uff0c\u90fd\u53ef\u4ee5\u88ab\u6d4f\u89c8\u5668\u5f97\u5230\u3002 Access-Control-Max-Age \u8fd9\u4e2a\u5934\u544a\u8bc9\u6211\u4eec\u8fd9\u6b21\u9884\u8bf7\u6c42\u7684\u7ed3\u679c\u7684\u6709\u6548\u671f\u662f\u591a\u4e45\uff0c\u5355\u4f4d\u4e3a\u79d2\uff0c\u8bbe\u7f6e\u793a\u4f8b\u5982\u4e0b\uff1a Access-Control-Max-Age: 864000 \u8868\u660e\u5728 86400s\uff0810\u5929\uff09\u5185\uff0c\u5bf9\u8be5\u8d44\u6e90\u7684\u8de8\u57df\u8bbf\u95ee\u4e0d\u518d\u53d1\u9001\u53e6\u5916\u4e00\u6761\u9884\u8bf7\u6c42\u3002 \u6ce8\u610f\u4e8b\u9879\uff1a 1\uff09\u6700\u591a\u652f\u6301\u6dfb\u52a0 10 \u6761\u89c4\u5219\uff0c\u5339\u914d\u65f6\u4ece\u7b2c\u4e00\u6761\u5f00\u59cb\u9010\u6761\u5339\u914d\uff0c\u4ee5\u6700\u65e9\u5339\u914d\u4e0a\u7684\u89c4\u5219\u4e3a\u51c6 2\uff09 \u5141\u8bb8\u7684\u57df \u3001 Allow Header \u3001 Expose Header \u6700\u591a\u5141\u8bb8 20 \u884c 3\uff09 \u5141\u8bb8\u7684\u57df \u53ca Methods \u5efa\u8bae\u6839\u636e\u9700\u8981\u4f7f\u7528\u6700\u5c0f\u7684\u914d\u7f6e\u6765\u4fdd\u8bc1\u5b89\u5168\u6027\uff0c\u591a\u6761\u89c4\u5219\u95f4\u4e0d\u8981\u6709\u8986\u76d6\u548c\u51b2\u7a81 4\uff09 \u5141\u8bb8\u7684\u57df \u9700\u5e26\u4e0a\u5b8c\u6574\u7684\u57df\u4fe1\u606f\uff0c\u5373\u6307\u5b9a https \u6216\u8005 http\uff0c\u6216\u8005 *://foo.com \u8fd9\u6837\u7684\u5f62\u5f0f 5\uff09 Allow Header \u3001 Expose Header \u4e0d\u5141\u8bb8\u4f7f\u7528\u901a\u914d\u7b26\uff0c\u5927\u5c0f\u5199\u4e0d\u654f\u611f 6\uff09 \u7f13\u5b58\u65f6\u95f4 \u5982\u679c\u6ca1\u6709\u7279\u6b8a\u60c5\u51b5\u53ef\u4ee5\u914c\u60c5\u8bbe\u7f6e\u5f97\u5927\u4e00\u70b9\uff0c\u9ed8\u8ba4\u4e3a 86400 \u79d2\uff0c\u6700\u5927\u4e3a 604800 \u79d2","title":"\u8de8\u57df\u914d\u7f6e"},{"location":"cdn/advanced/#_11","text":"\u53c8\u62cd\u4e91 CDN \u670d\u52a1\u652f\u6301\u5bf9\u54cd\u5e94\u5934 Content-Disposition \u5b57\u6bb5\u7684\u7279\u6b8a\u8bbe\u7f6e\uff0c\u4e5f\u5373\u5728\u8bf7\u6c42 URL \u4e2d\u52a0\u5165 _upd \u53c2\u6570\u53ef\u5bf9 Content-Disposition \u8fdb\u884c\u7279\u6b8a\u5316\u914d\u7f6e\u3002\u901a\u8fc7\u5bf9\u8be5\u53c2\u6570\u7684\u914d\u7f6e\u5c31\u53ef\u4ee5\u5f3a\u5236\u6d4f\u89c8\u5668\u89e6\u53d1\u4e0b\u8f7d\u884c\u4e3a\uff0c\u540c\u65f6\u8be5\u53c2\u6570\u7684\u503c\u4f1a\u4f5c\u4e3a\u6587\u4ef6\u4e0b\u8f7d\u540e\u4fdd\u5b58\u5230\u672c\u5730\u7684\u6587\u4ef6\u540d\u3002\u7279\u522b\u5730\uff0c\u5f53\u5176\u503c\u4e3a true \u65f6\uff0c\u4fdd\u6301\u539f\u6587\u4ef6\u540d\u4e0d\u53d8\u3002 \u914d\u7f6e\u5f15\u5bfc \u793a\u4f8b\u4e00\uff1a \u8bf7\u6c42\u53c2\u6570\u4e2d\u52a0\u5165 \u201c_upd=true\u201d \uff0c\u4ee3\u8868\u6dfb\u52a0\u54cd\u5e94\u5934\u4e3a\uff1a Content-Disposition: attachment $ curl http://upyun-assets.b0.upaiyun.com/docs/cdn/upyun-cdn-architecture.png?_upd=true -I > HTTP/1.1 200 OK > Content-Type: image/png > Content-Length: 57371 > ... > Accept-Ranges: bytes > Content-Disposition: attachment; \u793a\u4f8b\u4e00\uff1a \u8bf7\u6c42\u53c2\u6570\u4e2d\u52a0\u5165 \u201c_upd=abc.png\u201d\uff0c\u4ee3\u8868\u6dfb\u52a0\u54cd\u5e94\u5934\u4e3a\uff1a Content-Disposition: attachment; filename=\"abc.png\" $ curl http://upyun-assets.b0.upaiyun.com/docs/cdn/upyun-cdn-architecture.png?_upd=abc.png -I > HTTP/1.1 200 OK > Content-Type: image/png > Content-Length: 57371 > ... > Accept-Ranges: bytes > Content-Disposition: attachment; filename=\"abc.png\" \u6ce8\u610f\u4e8b\u9879 \u7279\u522b\u5730\uff0c \u53c2\u6570\u8ddf\u968f \u5f00\u542f\u7684\u60c5\u51b5\u4e0b\uff0c\u6b64\u53c2\u6570\u65e0\u6548\u3002","title":"\u6587\u4ef6\u53e6\u5b58\u4e3a"},{"location":"cdn/advanced/#ip","text":"\u53c8\u62cd\u4e91 CDN \u56de\u5ba2\u6237\u6e90\u7684\u65f6\u5019\u4f1a\u5e26\u4e0a X-Real-IP \u548c X-Forwarded-For \u7684\u8bf7\u6c42\u5934\u4e0b\u53bb\uff0c\u503c\u4e3a\u7528\u6237\u5b9e\u9645\u8bbf\u95ee CDN \u7684\u6765\u6e90 IP \u5730\u5740\u3002\u7279\u522b\u5730\uff0c\u4e3a\u4e86\u517c\u5bb9\u90e8\u5206\u670d\u52a1\u7aef\u7a0b\u5e8f\uff0c\u6211\u4eec\u989d\u5916\u8fd8\u63d0\u4f9b\u4e86 Client-IP \u8bf7\u6c42\u5934\u7684\u652f\u6301\uff0c\u5176\u503c\u548c X-Real-IP \u3001 X-Forwarded-For \u76f8\u540c\u3002 \u5982\u4f55\u4f7f\u7528 1\u3001X-Real-IP \u4f20\u9012\u7528\u6237 IP \u4f7f\u7528\u8be5\u65b9\u5f0f\u4f20\u9012\u6700\u7ec8\u7528\u6237 IP \uff0c\u9700\u8981\u670d\u52a1\u7aef\u4ee3\u7801\u8fdb\u884c\u4e00\u4e9b\u6539\u9020\uff0c\u7f51\u7ad9\u9700\u8981\u6839\u636e\u4f7f\u7528\u7f16\u7a0b\u8bed\u8a00\u7684\u4e0d\u540c\uff0c\u4fee\u6539\u76f8\u5e94\u7684\u4ee3\u7801\u6a21\u5757\uff0c\u624d\u53ef\u4ee5\u4f20\u9012\u6700\u7ec8\u7528\u6237 IP\u3002\u4ee3\u7801\u793a\u4f8b\u5982\u4e0b\uff1a \u793a\u4f8b\u4e00\uff1aPHP \u4ee3\u7801\u00b6 <?php $ip = $_SERVER[\"HTTP_X_REAL_IP\"]; echo $ip; ?> \u793a\u4f8b\u4e8c\uff1a Nginx \u914d\u7f6e\u00b6 server { listen 80; add_header X-Real-IP $http_x_real_ip; } 2\u3001X-Forward-For \u4f20\u9012\u7528\u6237 IP \u56de\u6e90\u8bf7\u6c42\u5934\u4f1a\u9ed8\u8ba4\u4f20\u9012 X-Forwarded-For \u7684\u503c\uff0c\u7528\u6237\u7f51\u7ad9\u65e0\u9700\u4efb\u4f55\u6539\u9020\u3002 \u6ce8\u610f\u4e8b\u9879 1\u3001\u65b0\u589e\u52a0\u901f\u670d\u52a1\u65f6\u6211\u4eec\u4f1a\u9ed8\u8ba4\u4f7f\u7528 X-Real-IP \u548c X-Forwarded-For \u65b9\u5f0f\uff0c\u7f51\u7ad9\u53ea\u9700\u8981\u6309\u7167 \u201c\u5982\u4f55\u4f7f\u7528\u201d \u7ae0\u8282\u4e2d\uff0c\u5bf9\u539f\u5148\u7684\u7528\u6237 IP \u83b7\u53d6\u4ee3\u7801\u8fdb\u884c\u66ff\u6362\u5373\u53ef\uff1b 2\u3001\u7531\u4e8e X-Real-IP \u662f\u53c8\u62cd\u4e91 CDN \u670d\u52a1\u7279\u6709\u7684\u56de\u6e90\u8bf7\u6c42\u5934 \uff0c\u6545\u7ec8\u6b62 CDN \u540e\uff0c\u7f51\u7ad9\u9700\u5c06\u83b7\u53d6\u7528\u6237 IP \u7684\u4ee3\u7801\u4fee\u6539\u4e3a\u539f\u59cb\u4ee3\u7801\uff1b 3\u3001\u5728\u9009\u62e9\u4f7f\u7528 X-Forwarded-For \u8fdb\u884c\u6700\u7ec8\u7528\u6237 IP \u4f20\u9012\u65f6 \uff0c X-Real-IP \u3001 Client-IP \u4e5f\u662f\u540c\u65f6\u4f20\u9012\u7684\uff1b","title":"\u4f20\u9012\u6700\u7ec8\u7528\u6237 IP"},{"location":"cdn/advanced/#_12","text":"\u652f\u6301\u81ea\u5b9a\u4e49\u9519\u8bef\u72b6\u6001\u8bbe\u7f6e\uff0c\u76ee\u524d\u652f\u6301 403\u3001404\u3001405 \u9519\u8bef\u7801\u81ea\u5b9a\u4e49\u63d0\u793a\u56fe\u7684\u8bbe\u7f6e\u3002\u5982\u672a\u8bbe\u7f6e\uff0c\u5219\u9ed8\u8ba4\u9075\u5faa\u53c8\u62cd\u4e91 CDN \u670d\u52a1\u9ed8\u8ba4\u9519\u8bef\u72b6\u6001\u63d0\u793a\u56fe\u3002 \u914d\u7f6e\u5f15\u5bfc \u767b\u9646 \u53c8\u62cd\u4e91\u7ba1\u7406\u63a7\u5236\u53f0 \uff0c\u4f9d\u6b21\u8fdb\u5165\uff1a\u670d\u52a1 > \u529f\u80fd\u914d\u7f6e > \u9ad8\u7ea7\u670d\u52a1 > \u81ea\u5b9a\u4e49\u63d0\u793a\u56fe\uff0c\u5728\u6b64\u680f\u76ee\u4e0b\u8fdb\u884c\u76f8\u5e94\u56fe\u7247\u7684\u63d0\u793a\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff1a 403 \u63d0\u793a\u56fe \u5f53\u7528\u6237\u8bbe\u7f6e\u4e86\u4f8b\u5982 IP \u7981\u7528\u3001Referer \u7b49\u9632\u76d7\u94fe\u914d\u7f6e\u5e76\u4e14\u5f53\u524d\u7684\u8bf7\u6c42\u4e0e\u89c4\u5219\u4e0d\u5339\u914d\u65f6\uff0c\u5373\u4f1a\u54cd\u5e94 403 \u7ed9\u5ba2\u6237\u7aef\uff0c\u8868\u793a\u8be5\u6b21\u8bf7\u6c42\u88ab\u7981\u6b62\u3002\u53e6\u5916\uff0c\u82e5\u8be5\u670d\u52a1\u8bbe\u7f6e\u4e86\u81ea\u5b9a\u4e49 403 \u63d0\u793a\u56fe\uff0c\u90a3\u4e48\u6b64\u7c7b\u60c5\u51b5\u4e0b\u5c31\u4f1a\u54cd\u5e94\u4e00\u4e2a 302 \u8df3\u8f6c\u5230\u76f8\u5e94\u7684\u56fe\u7247\u3002 404 \u63d0\u793a\u56fe \u5f53\u8bf7\u6c42\u7684\u6587\u4ef6\u4e0d\u5b58\u5728\u65f6\uff0c\u4f1a\u54cd\u5e94 404 \u72b6\u6001\u7801\uff0c\u53ef\u901a\u8fc7\u81ea\u5b9a\u4e49\u63d0\u793a\u56fe\u6765\u5c55\u793a\u3002 405 \u63d0\u793a\u56fe \u6b63\u5e38\u4f7f\u7528\u4e2d\u7684\u670d\u52a1\uff0c\u82e5\u88ab\u4eba\u4e3a\u5730\u8bbe\u7f6e\u4e3a\u7981\u6b62\u5916\u94fe\uff0c\u6b64\u65f6\u8bbf\u95ee\u5c31\u4f1a\u54cd\u5e94 405 \u72b6\u6001\u7801\u3002\u540c\u6837\uff0c405 \u4e5f\u652f\u6301\u81ea\u5b9a\u4e49\u63d0\u793a\u56fe\u8bbe\u7f6e\u3002 \u6ce8\u610f\u4e8b\u9879 1\u3001\u82e5\u6b64\u5904\u672a\u8bbe\u7f6e\u4efb\u4f55\u81ea\u5b9a\u4e49\u63d0\u793a\u56fe\uff0cCDN \u670d\u52a1\u4f1a\u9ed8\u8ba4\u54cd\u5e94\u4e00\u4e2a\u9519\u8bef\u72b6\u6001\u7801\u63d0\u793a\u56fe\uff1b 2\u3001\u6b64\u5904\u81ea\u5b9a\u4e49\u63d0\u793a\u56fe\u7684\u6587\u4ef6\u5927\u5c0f\u9650\u5236\u5728 30KB \u4ee5\u5185\uff1b","title":"\u81ea\u5b9a\u4e49\u63d0\u793a\u56fe"},{"location":"cdn/advanced/#rewrite","text":"","title":"\u81ea\u5b9a\u4e49 Rewrite"},{"location":"cdn/advanced/#_13","text":"\u81ea\u5b9a\u4e49 rewrite \u662f\u57fa\u4e8e DSL ( Domain Specific Language ) \u7406\u5ff5\u6765\u8bbe\u8ba1\u7684\uff0c\u4e3b\u8981\u9762\u5411\u5f00\u53d1\u8005\u4f7f\u7528\u3002\u5145\u5206\u5229\u7528\u53c8\u62cd\u4e91 CDN ( Content Delivery Network )\u5206\u5e03\u5f0f\u8fb9\u7f18\u7f51\u7edc\u7684\u6027\u80fd\u53ca\u89c4\u6a21\uff0c\u901a\u8fc7\u53c8\u62cd\u4e91\u7ba1\u7406\u63a7\u5236\u53f0\u53ef\u8f7b\u677e\u521b\u5efa rewrite \u89c4\u5219\uff0c\u89c4\u5219\u652f\u6301\u51fd\u6570\u3001\u53d8\u91cf\u3001\u5b57\u7b26\u4e32\u5e38\u91cf\uff0c\u7528\u6237\u53ef\u4ee5\u5c06\u8fd9\u4e9b\u81ea\u7531\u7ec4\u5408\uff0c\u53ef\u4ee5\u5b9e\u73b0\u5bf9 URL \u7684\u6539\u5199\u3001\u91cd\u5b9a\u5411\u3001\u81ea\u5b9a\u4e49 HTTP \u5934\u3001\u8bf7\u6c42\u7981\u6b62\u7b49\u5904\u7406\u903b\u8f91\u3002","title":"\u529f\u80fd\u7b80\u4ecb"},{"location":"cdn/advanced/#_14","text":"\u63d0\u9ad8\u5b89\u5168\u6027\uff1a\u53ef\u4ee5\u6709\u6548\u7684\u907f\u514d\u4e00\u4e9b\u53c2\u6570\u540d\u3001ID \u7b49\u5b8c\u5168\u66b4\u9732\u5728\u7528\u6237\u9762\u524d\uff1b URL \u7f8e\u5316\uff1a\u53bb\u9664\u4e86\u90a3\u4e9b\u6bd4\u5982 *.do \u4e4b\u7c7b\u7684\u540e\u7f00\u540d\u3001\u957f\u957f\u7684\u53c2\u6570\u4e32\u7b49\uff0c\u53ef\u4ee5\u81ea\u5df1\u7ec4\u7ec7\u7cbe\u7b80\u66f4\u80fd\u53cd\u6620\u8bbf\u95ee\u6a21\u5757\u5185\u5bb9\u7684 URL\uff1b \u63d0\u9ad8\u7f51\u7ad9 SEO\uff1a\u901a\u8fc7 URL Rewrite \u4e4b\u540e\uff0c\u66f4\u6709\u5229\u4e8e\u641c\u7d22\u5f15\u64ce\u7684\u6536\u5165\uff0c\u901a\u8fc7\u5bf9 URL \u7684\u4e00\u4e9b\u4f18\u5316\uff0c\u53ef\u4ee5\u4f7f\u641c\u7d22\u5f15\u64ce\u66f4\u597d\u7684\u8bc6\u522b\u4e0e\u6536\u5f55\u7f51\u7ad9\u7684\u4fe1\u606f\uff1b HTTP \u5934\u6539\u5199\uff1a\u65b0\u589e\u3001\u5220\u9664 HTTP \u8bf7\u6c42\u5934\uff0c\u65b0\u589e\u3001\u5220\u9664 HTTP \u54cd\u5e94\u5934\u7b49\u5904\u7406\u903b\u8f91\uff1b \u9632\u76d7\u94fe\u8bbe\u7f6e\uff1a\u53ef\u4ee5\u5f88\u7075\u6d3b\u3001\u9ad8\u6548\u7684\u7f16\u5199\u9632\u76d7\u94fe\u89c4\u5219\u548c\u5904\u7406\u903b\u8f91\uff0c\u53ef\u4ee5\u5b9e\u73b0\u9ad8\u5f3a\u5ea6\u7684\u9632\u76d7\u94fe\u89c4\u5219\uff1b \u8fb9\u7f18\u91cd\u5b9a\u5411\uff1a\u53ef\u4ee5\u6839\u636e\u7279\u6b8a\u7684\u4e1a\u52a1\u903b\u8f91\uff0c\u89e6\u53d1\u67d0\u4e2a\u6761\u4ef6\u4e4b\u540e\uff0c\u53ef\u5c06\u8bf7\u6c42\u91cd\u5b9a\u5411\u5230\u7279\u5b9a\u7684\u5730\u5740\u7b49\u7b49\uff1b","title":"\u5e94\u7528\u573a\u666f"},{"location":"cdn/advanced/#_15","text":"\u4e3a\u4e86\u66f4\u597d\u7684\u7406\u89e3 rewrite \u89c4\u5219\uff0c\u672c\u8282\u56f4\u7ed5 rewrite \u89c4\u5219\u914d\u7f6e\u9879\u548c\u89c4\u5219\u793a\u4f8b\u6765\u8fdb\u884c\u8be6\u7ec6\u8bf4\u660e\uff0c\u5148\u6765\u4e86\u89e3\u4e0b\u914d\u7f6e\u622a\u56fe\uff0c\u5982\u4e0b\u622a\u56fe\u6240\u793a\uff1a \u5982\u4e0a\u6240\u793a\uff0c\u914d\u7f6e\u4e00\u6761\u5b8c\u6574\u7684 rewrite \u89c4\u5219\u9700\u8981\u5b8c\u6210 Rewrite \u89c4\u5219 \u3001 URI \u63d0\u53d6\u6b63\u5219 \u3001 break \u3001 \u8c03\u8bd5\u6a21\u5f0f \u3001 \u5907\u6ce8 \u8fd9 5 \u4e2a\u9009\u9879\u7684\u914d\u7f6e\uff0c\u5176\u4e2d Rewrite \u89c4\u5219 \u4e3a\u5fc5\u586b\u9879\uff0c URI \u63d0\u53d6\u6b63\u5219 \u548c \u5907\u6ce8 \u4e3a\u53ef\u586b\u9879\uff0c break \u548c \u8c03\u8bd5\u6a21\u5f0f \u4e3a\u63a7\u5236\u5f00\u5173\uff0c\u53ef\u6839\u636e\u9700\u8981\u6765\u8fdb\u884c\u5f00\u542f\u548c\u5173\u95ed\u3002 \u4e0b\u9762\u6211\u4eec\u6765\u7ed3\u5408\u914d\u7f6e\u597d\u7684\u89c4\u5219\u793a\u4f8b\u6765\u8bf4\u660e\u4e0b\u6bcf\u4e2a\u914d\u7f6e\u9879\u7684\u4f5c\u7528\uff0c\u5982\u4e0b\u4e3a\u4e00\u7ec4 rewrite \u89c4\u5219\u96c6\uff0c\u5305\u62ec\u4e24\u6761 rewrite \u89c4\u5219\uff1a -- JSON [ rules[ { rule : $WHEN($EQ($_HOST, 'images.foo.com'))/$1, pattern : ^/images/(.*)$ break : true, debug : true, description : URL\u6539\u5199, }, { rule : /movies/$1, pattern : /download/(.*)$ break : true, debug : true, description : \u76ee\u5f55\u6539\u5199, }, ] \u901a\u8fc7\u4ee5\u4e0a\u89c4\u5219\u96c6\u7684\u4e86\u89e3\uff0c\u4e0b\u9762\u6211\u4eec\u9488\u5bf9\u89c4\u5219\u96c6\u91cc\u9762\u7684\u6bcf\u4e2a\u90e8\u5206\u505a\u76f8\u5e94\u7684\u4ecb\u7ecd\u548c\u89e3\u91ca\uff1a pattern \u4e3a\u5bf9\u5f53\u524d\u8bf7\u6c42 URI \u8fdb\u884c\u5339\u914d\u7684 PCRE \u6b63\u5219\u8868\u8fbe\u5f0f\uff0c\u5339\u914d\u540e\uff0c\u4ea7\u751f $1, $2 ... \u8fd9\u6837\u7684\u53d8\u91cf\uff0c\u5bf9\u5e94\u914d\u7f6e\u9879\u91cc\u9762\u7684 URI \u63d0\u53d6\u6b63\u5219 \uff1b rule rewrite \u89c4\u5219\u4e3b\u8981\u7ec4\u6210\u90e8\u5206\uff0c\u4ee3\u8868\u6700\u7ec8\u7684\u5904\u7406\u903b\u8f91\uff0c\u8be6\u7ec6\u8bf7\u770b\u8bed\u6cd5\u89c4\u5219\u90e8\u5206\uff0c\u5bf9\u5e94\u914d\u7f6e\u9879\u91cc\u9762\u7684 rewrite \u89c4\u5219 \uff1b break \u8868\u793a\u5982\u679c\u6b64\u6b21 rewrite \u6210\u529f\u540e\u662f\u5426\u8981\u7ec8\u6b62\u5269\u4e0b\u7684\u7684 rewrite \u8fc7\u7a0b\uff1b debug \u662f\u4e00\u4e2a\u8c03\u8bd5\u5f00\u5173\uff0c\u9ed8\u8ba4\u5f00\u542f\uff0c\u5bf9\u5e94\u914d\u7f6e\u622a\u56fe\u91cc\u9762\u7684 \u8c03\u8bd5\u6a21\u5f0f \uff1b description \u7528\u6765\u63cf\u8ff0\u8be5\u89c4\u5219\u7684\u7528\u9014\uff1b \u5bf9\u5e94\u914d\u7f6e\u9879\u91cc\u9762\u7684 \u5907\u6ce8 \u3002 \u8c03\u8bd5\u6a21\u5f0f \u7531\u4e8e rewrite \u8fc7\u7a0b\u4f1a\u5bf9\u5f53\u524d\u8bf7\u6c42\u4ea7\u751f\u526f\u4f5c\u7528\uff0c\u8fd9\u662f\u975e\u5e38\u5371\u9669\u7684\uff0c\u4f8b\u5982\u968f\u610f\u7684\u586b\u5199\u4e00\u6761 rewrite \u89c4\u5219\uff1a /foo \u6b64\u89c4\u5219\u4f1a\u5c06\u6240\u6709\u8bf7\u6c42\u7684 URI \u6539\u5199\u6210 /foo \uff0c\u8fd9\u6837\u5ba2\u6237\u7aef\u6240\u6709\u8bf7\u6c42\u7684\u54cd\u5e94\u5c31\u53d8\u6210 404 \u4e86\uff0c \u8fd9\u662f\u60a8\u6781\u4e0d\u613f\u610f\u770b\u5230\u7684\u7ed3\u679c\u3002\u6211\u4eec\u5141\u8bb8\u5bf9 rewrite \u89c4\u5219\u8fdb\u884c\u8c03\u8bd5\uff0c\u5373\u65b0\u589e\u52a0\u4e00\u6761\u89c4\u5219\u65f6\uff0c \u8c03\u8bd5\u6a21\u5f0f \u5f00\u5173\u4f1a\u9ed8\u8ba4\u6253\u5f00\uff0c\u8fd9\u6837\u6dfb\u52a0\u89c4\u5219\u540e\uff0c\u5373\u4f7f\u5f53\u524d\u8bf7\u6c42\u547d\u4e2d\u8be5 rewrite \u89c4\u5219\uff0c rewrite \u8fc7\u7a0b\u4e5f\u4e0d\u4f1a\u751f\u6548\uff0c\u53ea\u6709\u5f53\u5305\u542b\u4ee5\u4e0b\u8bf7\u6c42\u5934\u65f6\uff0crewrite \u8fc7\u7a0b\u624d\u4f1a\u751f\u6548\uff1a X-Upyun-Rewrite-Preview: true \u4f7f\u7528\u547d\u4ee4\u884c\u5de5\u5177 curl \u5373\u53ef\u5bf9\u89c4\u5219\u8c03\u8bd5\uff1a curl -H \"X-Upyun-Rewrite-Preview: true\" http://your-domain/foo/bar.html -v \u8fd9\u6837\u7ecf\u8fc7\u8c03\u8bd5\uff0c\u786e\u5b9a\u8be5 rewrite \u8fc7\u7a0b\u7b26\u5408\u9884\u671f\u540e\uff0c\u5373\u53ef\u5c06 \u8c03\u8bd5\u6a21\u5f0f \u5173\u95ed\uff0c\u6b64\u65f6\u8be5 rewrite \u8fc7\u7a0b\u4f1a\u5bf9\u6240\u6709\u547d\u4e2d\u7684\u8bf7\u6c42\u751f\u6548\u3002 \u6ce8\u610f\uff1a\u7279\u522b\u5730\uff0c\u8c03\u8bd5\u6a21\u5f0f\u76ee\u524d\u4ec5\u9488\u5bf9 URI \u548c ARGS \u4fee\u6539\u4ee5\u53ca\u4e00\u4e9b\u51fd\u6570\u6709\u6548\uff0c\u53d7 \u8c03\u8bd5\u6a21\u5f0f \u5f00\u5173\u5f71\u54cd\u7684 rewrite \u64cd\u4f5c\u6709\uff1a - $LIMIT_RATE_AFTER() - $LIMIT_RATE - $DEL_REQ_HEADER(E) - $REDIRECT(E1,E2) - $DEL_ARG(E) - $EXIT(E1,E2) - $ADD_REQ_HEADER - \u4fee\u6539 URI \u548c ARGS \u7684\u64cd\u4f5c","title":"\u89c4\u5219\u8bf4\u660e"},{"location":"cdn/advanced/#_16","text":"\u51fd\u6570 \u51fd\u6570\u8c03\u7528\u4ee5 $ \u5f00\u5934\uff0c\u540e\u8ddf\u4e00\u7ec4\u5927\u5199\u5b57\u6bcd\uff0c\u5b57\u6bcd\u4e4b\u95f4\u53ef\u4ee5\u5305\u542b\u4e0b\u5212\u7ebf _ \uff0c\u51fd\u6570\u9700\u8981\u7684\u53c2 \u6570\u653e\u5728 () \u4e2d\uff0c\u4ee5 , \u5206\u9694\u3002\u5982\u679c\u6ca1\u6709\u7279\u522b\u8bf4\u660e\uff0crewrite \u4e2d\u7684\u51fd\u6570\u53c2\u6570\u4e2a\u6570\u4e0d\u80fd\u5c11\u4e8e\u8981\u6c42\u7684\u53c2\u6570\u4e2a\u6570\uff0c\u5426\u5219\u89c6\u4e3a\u8bed\u6cd5\u9519\u8bef\uff0c\u7136\u540e\u7ec8\u6b62 rewrite \u8fc7\u7a0b\uff0c\u591a\u4f59\u7684\u53c2\u6570\u4f1a\u88ab\u6c42\u503c\uff0c\u4f46\u4e0d\u5f71\u54cd\u8c03\u7528\u3002\u51fd\u6570\u8c03\u7528\u662f\u6709\u4e0a\u4e0b\u6587\u7684\uff0c\u8b6c\u5982 $WHEN \u8fd9\u4e2a\u51fd\u6570\uff0c\u53c2\u6570\u662f bool \u7c7b \u578b\uff0c\u53c2\u6570\u4e2d\u6709\u4e0d\u6210\u7acb\u7684\u6761\u4ef6 false \u65f6\uff0c\u4f1a\u7ec8\u6b62 rewrite \u8fc7\u7a0b\u3002\u652f\u6301\u7684\u51fd\u6570\u6709\uff1a \u6761\u4ef6\u9009\u62e9\u548c\u5224\u65ad \u51fd\u6570 \u542b\u4e49 $WHEN(E1, E2, ...) \u6240\u6709\u6761\u4ef6\u90fd\u6210\u7acb\u65f6\u624d\u8fdb\u884c rewrite \uff0c\u5e76\u8fd4\u56de\u7a7a\u5b57\u7b26\u4e32 $NOT(E) E \u4e0d\u6210\u7acb\u65f6\u8fd4\u56de true \uff0c \u5426\u5219\u8fd4\u56de false $ALL(E1, E2, ...) \u6240\u6709\u6761\u4ef6\u90fd\u6210\u7acb\u65f6\u8fd4\u56de true \uff0c\u5426\u5219\u8fd4\u56de false \uff0c\u53c2\u6570\u4e2a\u6570\u4e0d\u9650 $ANY(E1, E2, ...) \u5176\u4e2d\u4e00\u4e2a\u6761\u4ef6\u6210\u7acb\u65f6\u8fd4\u56de true \uff0c\u5426\u5219\u8fd4\u56de false \uff0c\u53c2\u6570\u4e2a\u6570\u4e0d\u9650 $OR(E1, E2, ...) \u503c\u4e3a\u7b2c\u4e00\u4e2a\u4e3a\u771f\u7684\u8868\u8fbe\u5f0f $SELECT(E1, E2, E3) E1 \u4e3a\u771f\u65f6\u503c\u4e3a E2 \uff0c\u5426\u5219\u4e3a E3 $PCALL(E) \u4fdd\u62a4\u6a21\u5f0f\u4e0b\u89e3\u6790 E \uff0c\u5931\u8d25\u65f6\u8fd4\u56de\u7a7a\u5b57\u7b26\u4e32 \u5b57\u7b26\u5339\u914d\u548c\u6355\u83b7 \u51fd\u6570 \u542b\u4e49 $MATCH(E1, E2) PCRE \u5339\u914d\uff0c E2 \u4e3a\u8981\u5339\u914d\u7684 pattern\uff0c\u8fd4\u56de true \u6216\u8005 false $CAPTURE(E1, E2, E3) \u6309 E2 pattern \u5bf9 E1 \u8fdb\u884c\u6355\u83b7\uff0c E3 \u8868\u793a\u662f\u5426\u5ffd\u7565\u5927\u5c0f\u5199\uff0c\u6355\u83b7\u540e\u751f\u6210 $n.m \u5f62\u5f0f\u7684\u53d8\u91cf\uff0c n \u4e3a\u5f53\u524d CAPTURE \u51fa\u73b0\u7684\u6b21\u5e8f\uff0c m \u8868\u793a\u5339\u914d\u5206\u7ec4\uff1b E2 \u4e3a\u7a7a\u65f6\uff0c\u8868\u793a\u5bf9 E1 \u8fdb\u884c\u6355\u83b7\uff0c\u6b64\u65f6 E1 \u5bf9\u5e94 $n.0 \u8bf7\u6c42/\u54cd\u5e94\u4fee\u6539 \u51fd\u6570 \u542b\u4e49 $ADD_REQ_HEADER(E1, E2) \u6dfb\u52a0\u8bf7\u6c42\u5934 E1 \u4e3a E2 $DEL_REQ_HEADER(E) \u5220\u9664\u8bf7\u6c42\u5934 E $ADD_RSP_HEADER(E1, E2) \u6dfb\u52a0\u54cd\u5e94\u5934 E1 \u4e3a E2 $DEL_ARG(E) \u5220\u9664\u8bf7\u6c42\u53c2\u6570\u9879 E $SET_METHOD(E) \u4fee\u6539\u5f53\u524d HTTP \u8bf7\u6c42\u65b9\u6cd5\u4e3a E \uff0c E \u53ef\u9009\u503c\u6709\uff1a GET , HEAD , PUT , POST , DELETE , OPTIONS , PATCH ; \u6ce8 1 $SET_BODY(E) \u4fee\u6539\u5f53\u524d HTTP \u8bf7\u6c42\u4f53\u7684\u5185\u5bb9\u4e3a E \uff0c\u4ec5\u5728 PUT \u6216 POST \u8bf7\u6c42\u4e0b\u6709\u6548 $REDIRECT(E1, E2) \u91cd\u5b9a\u5411\u5730\u5740\u5230 E1 \uff0c\u72b6\u6001\u7801\u4e3a E2(301, 302) $EXIT(E1, E2) \u4ee5\u72b6\u6001\u7801 E1 \u9000\u51fa\uff0c\u54cd\u5e94\u4f53\u4e3a E2 \u6570\u503c\u8ba1\u7b97 \u51fd\u6570 \u542b\u4e49 $ADD(E1, E2) \u6570\u5b57\u76f8\u52a0\uff0c\u8fd4\u56de E1 + E2 \u7ed3\u679c\u6570\u503c $MOD(E1, E2) \u6570\u5b57\u53d6\u4f59\uff0c\u8fd4\u56de E1 % E2 \u7ed3\u679c\u6570\u503c\uff0c\u5176\u4e2d E2 \u4e0d\u80fd\u4e3a 0 $MSUB(E1, E2) \u6570\u5b57\u76f8\u51cf\uff0c\u8fd4\u56de E1 - E2 \u7ed3\u679c\u6570\u503c $MULTIPLY(E1, E2) \u6570\u5b57\u76f8\u4e58\uff0c\u8fd4\u56de E1 * E2 \u7ed3\u679c\u6570\u503c $DIVIDE(E1, E2) \u6570\u5b57\u76f8\u9664\uff0c\u8fd4\u56de E1 / E2 \u7ed3\u679c\u6570\u503c\uff0c\u5176\u4e2d E2 \u4e0d\u80fd\u4e3a 0 $BYTE(E) \u8fd4\u56de\u5b57\u7b26 E \u7684 ASCII \u7f16\u7801\u503c $FLOOR(E) \u8fd4\u56de\u5c0f\u4e8e\u6216\u7b49\u4e8e\u6570\u5b57 E \u7684\u6700\u5927\u6574\u6570 $CEIL(E) \u8fd4\u56de\u5927\u4e8e\u6216\u7b49\u4e8e\u6570\u5b57 E \u7684\u6700\u5c0f\u6574\u6570 $GT(E1, E2) \u6570\u5b57\u6bd4\u8f83\uff0c\u662f\u5426\u5927\u4e8e\uff0c\u8fd4\u56de true \u6216\u8005 false $GE(E1, E2) \u6570\u5b57\u6bd4\u8f83\uff0c\u662f\u5426\u5927\u4e8e\u7b49\u4e8e\uff0c\u8fd4\u56de true \u6216\u8005 false \u5b57\u7b26\u4e32\u64cd\u4f5c \u51fd\u6570 \u542b\u4e49 $SUB(E1, from, to) \u5b57\u7b26\u4e32\u622a\u53d6\uff0c\u4ece from \u5230 to $EQ(E1, E2) \u5b57\u7b26\u4e32\u662f\u5426\u76f8\u7b49\uff0c\u8fd4\u56de true \u6216\u8005 false $UPPER(E) \u5c06 E \u8f6c\u6362\u4e3a\u5927\u5199 $LOWER(E) \u5c06 E \u8f6c\u6362\u4e3a\u5c0f\u5199 $LEN(E) \u8fd4\u56de\u5b57\u7b26\u4e32 E \u7684\u957f\u5ea6 \u901a\u7528\u529f\u80fd\u7c7b\u51fd\u6570 \u51fd\u6570 \u542b\u4e49 $ENCODE_BASE64(E) \u5c06\u5b57\u7b26\u4e32 E \u6309 base64 \u7f16\u7801\u538b\u7f29 $DECODE_BASE64(E) \u5c06\u5b57\u7b26\u4e32 E \u6309 base64 \u7f16\u7801\u89e3\u538b $MD5(E) \u8ba1\u7b97 E \u7684 md5 \u503c $RANDI(E1, E2) \u8fd4\u56de\u5927\u4e8e E1 \u5e76\u5c0f\u4e8e E2 \u7684\u968f\u673a\u6570\u503c $UNIXT(y, m, d, h, min, sec) \u6307\u5b9a\u5e74\uff0c\u6708\uff0c\u65e5\uff0c\u5c0f\u65f6\uff0c\u5206\u949f\uff0c\u79d2\uff0c\u8fd4\u56de\u76f8\u5e94\u7684 UNIX TIME $INT(E1, E2, E3) \u8fdb\u5236\u8f6c\u6362\uff0c\u5c06 E2 \u8fdb\u5236\u7684\u6570\u5b57\uff08\u5b57\u7b26\u4e32\u5f62\u5f0f\uff09 E1 \u8f6c\u6362\u6210 E3 \u8fdb\u5236\u5e76\u8fd4\u56de\uff0c E2 , E3 \u53ef\u9009\uff0c E2 \u9ed8\u8ba4\u4e3a 10 \u9650\u901f\u76f8\u5173 \u51fd\u6570 \u542b\u4e49 $LIMIT_RATE_AFTER(E1, E2) \u9650\u901f\u7b56\u7565\u8bbe\u7f6e\uff0c\u53d1\u9001 E1 \u5927\u5c0f\u5355\u4f4d\u4e3a E2 \u5b57\u8282\u6570\u636e\u540e\uff0c\u8fdb\u884c\u9650\u901f\uff0c E2 \u53ef\u9009\u503c\u6709\uff1a k \uff08KB)\uff0c m \uff08MB\uff09 $LIMIT_RATE(E1, E2) \u9650\u901f\u7b56\u7565\u8bbe\u7f6e\uff0c\u6309 E1 \u5927\u5c0f\u6bcf\u79d2\u8fdb\u884c\u9650\u901f\uff0c\u5355\u4f4d\u4e3a E2 \uff0c E2 \u53ef\u9009\u503c\u6709\uff1a k \uff08KB)\uff0c m \uff08MB\uff09 \u6ce8 1\uff1a\u82e5\u5f53\u524d\u8bf7\u6c42\u5e26\u6709\u8bf7\u6c42\u4f53\u7684\u60c5\u51b5\u4e0b\uff0c $SET_METHOD(E) \u4e0d\u5141\u8bb8\u8bbe\u7f6e\u4e3a\u9664 PUT \u548c POST \u4ee5\u5916\u7684\u65b9\u6cd5\u3002 \u5176\u4e2d E[n] \u4ee3\u8868\u5408\u6cd5\u7684\u8868\u8fbe\u5f0f\uff0c\u4e5f\u5c31\u662f\u8bf4\u51fd\u6570\u53ef\u4ee5\u76f8\u4e92\u5d4c\u5957\uff0c\u4f8b\u5982\u89c4\u5219\u53ef\u4ee5\u4e3a\uff1a /$SUB($DECODE_BASE64($_HEADER_foo), $_GET_from, $_GET_to)/ \uff1b\u5e03\u5c14\u51fd\u6570\u5305\u62ec WHEN , ALL, ANY \u90fd\u662f\u77ed\u8def\u7684\uff0c\u8b6c\u5982 $WHEN($ALL(), $EXIT(403)) \u4e0d\u4f1a\u8fd4\u56de 403 \uff0c\u56e0\u4e3a $ALL() \u7684\u503c\u4e3a false \u4f7f\u7528 '' \u80fd\u5bf9\u53d8\u91cf\u8fdb\u884c\u8f6c\u4e49\uff0c\u4f7f\u5176\u4e0d\u88ab\u89e3\u91ca\uff0c\u4f8b\u5982\u4ee5\u4e0b\u89c4\u5219\uff1a /foo/'$_HOST' \u4f1a\u88ab\u8f6c\u6362\u4e3a: /foo/$_HOST \u5bf9\u4e8e\u542b\u6709\u8bf7\u6c42\u53c2\u6570\u7684\u89c4\u5219\uff0c\u539f\u5148\u7684\u8bf7\u6c42\u53c2\u6570\u4f1a\u9644\u52a0\u5230\u540e\u9762\uff0c\u5982\u679c\u4e0d\u5e0c\u671b\u8fd9\u6837\uff0c\u53ef\u4ee5\u653e\u7f6e\u4e00\u4e2a '?' \u5728\u89c4\u5219\u7684\u6700\u540e\u9762\uff0c\u4f8b\u5982\u8fd9\u6837\uff1a /foo?bar=$1? \u7279\u522b\u5730\uff0c\u5982\u679c\u91cd\u5199\u540e\u7684 URL \u6ca1\u6709\u53c2\u6570\uff0c\u90a3\u4e48\u6b64\u65f6\u9700\u8981\u5728\u6700\u540e\u52a0\u4e24\u4e2a ? \uff0c\u4f8b\u5982\u8fd9\u6837\uff1a /foo?? \u53d8\u91cf \u53d8\u91cf\u4ee5 $_ \u5f00\u5934\uff0c\u8fd9\u4e9b\u53d8\u91cf\u90fd\u662f\u5bf9\u6b64\u6b21\u8bf7\u6c42\u4e0a\u4e0b\u6587\u4e2d\u4e00\u4e9b\u53c2\u6570\u7684\u6620\u5c04\uff0c\u8b6c\u5982 $_HOST \u5bf9\u5e94\u6b64\u6b21\u8bf7\u6c42\u5934\u4e2d\u7684 Host \u5b57\u6bb5\uff0c $_GET_foo \u5bf9\u5e94\u6b64\u6b21\u8bf7\u6c42 URL \u53c2\u6570 foo \u7684\u503c\uff0c\u7b49\u7b49\u3002\u82e5\u5c06\u53d8\u91cf\u5185\u63d2\u5230\u91cd\u5199\u540e\u7684 URL \u4e2d\uff0c\u8b6c\u5982 rewrite /$_GET_foo/bar \uff0c\u5982\u679c\u8bf7\u6c42\u53c2\u6570\u4e2d\u6ca1\u6709 foo \u5219\u89c6\u4e3a\u6b64\u6b21 rewrite \u5931\u8d25\uff1b\u82e5\u5c06\u53d8\u91cf\u653e\u5728\u51fd\u6570\u4e2d\uff0c\u5219\u7531\u8be5\u51fd\u6570\u786e\u5b9a\u8fd4\u56de\u7684\u503c\uff0c\u4f8b\u5982 $NOT($_GET_foo) \uff0c\u5982\u679c\u53c2\u6570\u4e2d\u5305\u542b foo \uff0c\u5219\u8fd4\u56de false \uff0c\u5426\u5219\u8fd4\u56de true \u3002\u76ee\u524d\u652f\u6301\u7684\u53d8\u91cf\u6709\uff1a \u53d8\u91cf \u542b\u4e49 $_IP \u5ba2\u6237\u7aef IP $_HOST \u8bf7\u6c42\u5934\u4e2d\u7684 Host \u5b57\u6bb5 $_HOST_n $_HOST_n \u6307 Host \u4e2d\u7684\u7b2c n \u4e2a\u5b50\u57df\uff0c\u4f8b\u5982\u5bf9\u4e8e foo.bar.baz.com\uff1a $_HOST_1 = foo\uff0c$_HOST_2 = bar\uff0c$_HOST_3 = baz $_GET_name \u4f7f\u7528 Query String \u4e2d\u7684\u53d8\u91cf\uff08\u65e0\u9700 urldecode\uff09 $_POST_name \u4f7f\u7528 POST \u8868\u5355\u4e2d\u7684\u53d8\u91cf\uff08\u53ea\u652f\u6301 www form \uff09 $_HEADER_name \u4f7f\u7528 Header \u4e2d\u7684\u503c\uff0c\u6ce8\u610f name \u5168\u4e3a\u5c0f\u5199 $_COOKIE_name \u4f7f\u7528 Cookie \u4e2d\u7684\u5b57\u6bb5\u503c $_RANDOM \u968f\u673a\u5b57\u7b26\u4e32\uff0c\u5b57\u7b26\u96c6\u4e3a [a-zA-Z0-9] \uff0c\u9ed8\u8ba4 8 \u4f4d $_RANDOM_n n \u4f4d\u968f\u673a\u5b57\u7b26\u4e32\uff0c\u5176\u4e2d 1 <= n <= 32 $_URI \u8bf7\u6c42\u7684 URI\uff0c\u4e0d\u5305\u542b\u53c2\u6570 $_QUERY Query String\uff0c\u4e0d\u5e26\u524d\u7f00 '?' $_METHOD GET/POST/PUT/POST/DELETE/OPTIONS/PATCH $_SCHEME HTTP/HTTPS $_TIME \u83b7\u53d6\u5f53\u524d\u670d\u52a1\u5668\u65f6\u95f4\uff0c\u683c\u5f0f\u4e3a UNIX TIME $_BODY \u83b7\u53d6\u5f53\u524d\u8bf7\u6c42\u7684 BODY\uff08\u8bf7\u6c42\u4f53\uff09\u5185\u5bb9\uff0c\u5927\u5c0f\u9650\u5236\u4e3a 16KB \u5b57\u7b26\u4e32\u5e38\u91cf \u5b57\u7b26\u4e32\u5e38\u91cf\u6709\u4e24\u79cd\u5f62\u5f0f\uff0c\u7b2c\u4e00\u79cd\u5c31\u662f\u666e\u901a\u7684\u5b57\u7b26\u4e32\u4f8b\u5982 /foo/bar \uff0c\u4f46\u662f\u5982\u679c\u5b57\u7b26\u4e32\u4e2d\u5305\u542b\u4e86\u4e00\u4e9b\u7279\u6b8a\u5b57\u7b26\uff0c\u4f8b\u5982\u7a7a\u767d\u5b57\u7b26\u5c06\u88ab\u7701\u7565\uff0c\u4f8b\u5982 $(),' \u8fd9\u4e9b\u5b57\u7b26\u6709\u7279\u6b8a\u7684\u7528\u9014\uff0c\u4e0d\u80fd\u88ab\u76f4\u63a5\u4f7f\u7528\uff0c\u8981\u4f7f\u7528\u8fd9\u4e9b\u7279\u6b8a\u7684\u5b57\u7b26\uff0c\u8981\u52a0 \\ \u524d\u7f00\u5bf9\u5176\u8f6c\u4e49\uff0c\u4f8b\u5982 /foo/bar\\, \uff1b\u7b2c\u4e8c\u79cd\u662f\u52a0\u5355\u5f15\u53f7\u7684\u5b57\u7b26\u4e32 '' \uff0c\u5355\u5f15\u53f7\u4e2d\u7684\u5b57\u7b26\u53ea\u6709 \\ \u662f\u7279\u6b8a\u8f6c\u4e49\u5b57\u7b26\u524d\u7f00\uff0c\u5176\u4ed6\u7684\u90fd\u89c6\u4e3a\u666e\u901a\u5b57\u7b26\uff0c\u4f8b\u5982\u8fd9\u6837\u4e00\u6761 rewrite \u89c4\u5219 /foo/'$\\\\,\\'' \uff0crewrite \u8fc7\u540e\u5bf9\u5e94 /foo/$\\,' \u3002 break \u9664\u4e86\u80fd\u52fe\u9009 break \u9009\u9879 \u6307\u5b9a\u662f\u5426 break \uff0c\u4e5f\u53ef\u4ee5\u76f4\u63a5\u5728 rewrite \u89c4\u5219\u6700\u540e\u52a0\u4e0a $$ \u8868\u793a break \u3002","title":"\u8bed\u6cd5\u89c4\u5219"},{"location":"cdn/advanced/#_17","text":"\u767b\u9646 \u7ba1\u7406\u63a7\u5236\u53f0 \uff0c\u4f9d\u6b21\u8fdb\u5165\uff1a\u670d\u52a1 > \u529f\u80fd\u914d\u7f6e > \u9ad8\u7ea7\u529f\u80fd > \u81ea\u5b9a\u4e49 Rewrite\uff0c\u70b9\u51fb\u7ba1\u7406\u5373\u53ef\u5f00\u59cb\u914d\u7f6e\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff1a","title":"\u914d\u7f6e\u5f15\u5bfc"},{"location":"cdn/advanced/#_18","text":"1\u3001\u81ea\u5b9a\u4e49\u9632\u76d7\u94fe \u9700\u6c42\u63cf\u8ff0\uff1a\u5c06\u8bf7\u6c42 URL \u6309\u7167\u4e00\u5b9a\u7684\u7b97\u6cd5\u89c4\u5219\u5b9e\u73b0 token \u9632\u76d7\u94fe\uff0c\u4f7f\u7528\u81ea\u5b9a\u4e49 rewrite \u6765\u5b9e\u73b0\uff0c\u4f1a\u66f4\u52a0\u7075\u6d3b\u548c\u9ad8\u6548\u3002token \u9632\u76d7\u94fe\u8be6\u89e3\u8bf7\u53c2\u89c1\uff1ahttps://blog.upyun.com/?p=1177 \u8bf7\u6c42 URL \u793a\u4f8b\uff1a /test.ts?key=68ddbe535557d6630a19cebde0cb9252&t=1481106349 \u4ee5\u4e0a\u8bf7\u6c42 URL \u662f\u6309\u7167\u5982\u4e0b\u7b97\u6cd5\u751f\u6210\u7684\uff0c\u53c2\u89c1\u5982\u4e0b\u7b97\u6cd5\u8bf4\u660e\uff1a <?php $etime = time() + 600; // \u6388\u6743 10 \u5206\u949f\u540e\u8fc7\u671f $key = 'abc'; // token \u9632\u76d7\u94fe\u5bc6\u94a5 $path = '/test.ts'; // \u6587\u4ef6\u76f8\u5bf9\u8def\u5f84 $url = $path.'?key='.md5($key.$etime.$path).'&t='.$etime; echo $url; ?> CDN \u8282\u70b9\u9700\u8981\u8fdb\u884c\u4e24\u5c42\u5224\u65ad\uff0c\u4e00\u5c42\u5c31\u662f\u5bf9\u65f6\u95f4\u6233\u8fdb\u884c\u6bd4\u8f83\uff0c\u53e6\u5916\u4e00\u5c42\u5c31\u662f\u6309\u7167\u7ea6\u5b9a\u7684\u89c4\u5219\u751f\u6210\u9a8c\u8bc1\u4fe1\u606f\u5e76\u8fdb\u884c\u6bd4\u8f83\uff0c\u770b\u662f\u5426\u4e00\u81f4\u3002\u6309\u7167\u8981\u6c42\uff0c\u53ef\u7f16\u5199\u5982\u4e0b\u89c4\u5219\u96c6\u6765\u5b9e\u73b0\u4ee5\u4e0a\u8981\u6c42\uff1a rules: { \"rule\": \"$WHEN($MATCH($_URI, '.ts$'),$OR($NOT($_GET_t),$NOT($_GET_key)))$EXIT(403)\", \"pattern\": \"\" }, { \"rule\": \"$WHEN($MATCH($_URI, '.ts$'),$GT($_TIME, $_GET_t))$EXIT(401)\", \"pattern\": \"\" }, { \"rule\": \"$WHEN(($MATCH($_URI, '.ts$'),$NOT($EQ($MD5('abc'$_GET_t$_URI),$LOWER($_GET_key))))$EXIT(403)\", \"pattern\": \"\" } \u89c4\u5219\u91ca\u4e49\uff1a \u7b2c\u4e00\u6761\uff1a\u5f53\u6587\u4ef6\u540e\u7f00\u4e3a ts \u65f6\uff0c\u5224\u65ad\u8bf7\u6c42 URL \u91cc\u9762\u662f\u5426\u5b58\u5728 t \u548c key \u53c2\u6570\uff0c\u5982\u679c\u5176\u4e2d\u4e00\u4e2a\u4e0d\u5b58\u5728\uff0c\u5219\u8fd4\u56de 403\uff1b \u7b2c\u4e8c\u6761\uff1a\u5f53\u6587\u4ef6\u540e\u7f00\u4e3a ts \u65f6\uff0c\u5224\u65ad\u5f53\u524d CDN \u8282\u70b9 UNIX \u65f6\u95f4\u662f\u5426\u5927\u4e8e\u8bf7\u6c42\u53c2\u6570\u91cc\u9762\u7684\u65f6\u95f4\u6233\uff08\u4e5f\u5373\u53c2\u6570 t \u7684\u503c\uff09\uff0c\u5426\u5219\u8fd4\u56de 401\uff1b \u7b2c\u4e09\u6761\uff1a\u5f53\u6587\u4ef6\u540e\u7f00\u4e3a ts \u65f6\uff0cCDN \u8282\u70b9\u6309\u7167\u7ea6\u5b9a\u7684\u7b97\u6cd5\u89c4\u5219\u751f\u6210\u9a8c\u8bc1\u4fe1\u606f\uff08\u4e5f\u5373 MD5 \u503c\uff09\uff0c\u5224\u65ad\u751f\u6210\u7684 MD5 \u503c\u548c\u8bf7\u6c42\u53c2\u6570 key \u7684\u503c\u662f\u5426\u4e00\u81f4\uff0c\u4e0d\u4e00\u81f4\u5219\u8fd4\u56de 403\uff1b 2\u3001\u8fb9\u7f18\u91cd\u5b9a\u5411 \u793a\u4f8b\u4e00\uff1a\u5339\u914d cookie \u8fdb\u884c\u8df3\u8f6c \"rule\": \"$WHEN($NOT($EQ($_URI, /live.html)), $NOT($_COOKIE_token))$REDIRECT(http://test.example.com/no_token.html)\", \"pattern\": \"\" \u89c4\u5219\u91ca\u4e49\uff1a\u9996\u5148\u5339\u914d\u8bf7\u6c42 URI \u662f\u5426\u4e3a /live.html ,\u5f53 cookie \u4e2d token \u503c\u4e3a\u7a7a\u65f6\uff0c\u5219\u8df3\u8f6c\u5230\u6307\u5b9a\u5230\u5730\u5740 http://test.example.com/no_token.html \u3002 3\u3001URL \u6539\u5199 \u793a\u4f8b\u4e00\uff1a\u76ee\u5f55\u53ca\u53c2\u6570\u6539\u5199 \u5c06\u8bf7\u6c42 URL \u8f6c\u6362\u4e3a\u5e26\u53c2\u6570\u7684\u52a8\u6001 URL\uff0c\u4f8b\u5982\u8bf7\u6c42\u7684 URL \u4e3a\uff1a http://example.com/pay/25/8/... \u9700\u8981 CDN \u8fb9\u7f18\u8282\u70b9\u8f6c\u6362\u4e3a\u5982\u4e0b\u8bf7\u6c42\uff1a http://example.com/pay.php?payid=25&categoryid=8... \u8fd9\u4e2a\u65f6\u5019\uff0c pattern \u90e8\u5206\u9700\u8981\u63d0\u53d6\u76ee\u5f55\u6570\u5b57\uff0c\u9700\u8981\u751f\u6210 $1 \u548c $2 \u8fd9\u6837\u7684\u53d8\u91cf\uff0c\u5982\u4e0b\u89c4\u5219\u6240\u793a\uff1a \"rule\": \"/product.php?productid=$1&categoryid=$2\", \"pattern\": \"^product/([0-9]+)/([0-9]+)/(.*?).html$\" \u89c4\u5219\u91ca\u4e49\uff1a\u5f53\u89e3\u6790\u7684 url \u7b26\u5408\u89c4\u5219 ^product/([0-9]+)/([0-9]+)/(.*?).html$ \uff0c\u90a3\u4e48\u5c06\u8bf7\u6c42\u5bfc\u5411\u5230 /product.php?productid=$1&categoryid=$2 \u3002 \u4e5f\u5373\u5c06 http://example.com/pay/25/8/... \u8f6c\u6362\u4e3a http://example.com/pay.php?payid=25&categoryid=8... \u793a\u4f8b\u4e8c\uff1a\u6587\u4ef6\u540d\u6539\u5199 pattern: /(.*)/playlist\\.m3u8$ rule: /$1'.m3u8' \u89c4\u5219\u91ca\u4e49\uff1a\u5f53\u8bbf\u95ee\u5730\u5740\u4e3a http://domain/app/stream/playlist.m3u8 \u65f6\uff0c\u5c06\u8bbf\u95ee\u5730\u5740\u6539\u5199\u4e3a http://domain/app/stream.m3u8 \u3002 \u5e94\u7528\u573a\u666f\uff1a\u5728\u76f4\u64ad\u5e94\u7528\u573a\u666f\u4e2d\uff0c\u56e0\u4e3a\u5ba2\u6237\u7aef\u673a\u5236\u65e0\u6cd5\u6216\u8005\u4e0d\u65b9\u4fbf\u5347\u7ea7\u7684\u60c5\u51b5\uff0c\u53ef\u4ee5\u901a\u8fc7 URL \u6539\u5199\uff0c\u5c06 /stream/playlist.m3u8 \u6539\u4e3a /stream.m3u8 \uff0c\u5176\u4e2d app \u4ee3\u8868\u53d1\u5e03\u70b9\uff0c stream \u4ee3\u8868\u6d41\u540d\u3002 4\u3001\u8bf7\u6c42/\u54cd\u5e94\u5934\u4fee\u6539 \u793a\u4f8b\u4e00\uff1a\u6dfb\u52a0\u3001\u5220\u9664\u8bf7\u6c42\u5934 \"rule\": \"$ADD_REQ_HEADER(X-From-Cdn, upyun)\", \"pattern\": \"\" \u89c4\u5219\u91ca\u4e49\uff1a\u6dfb\u52a0\u8bf7\u6c42\u5934 X-From-Cdn:upyun \uff0c\u8bc6\u522b CDN \u5382\u5546\u3002 \"rule\": \"$DEL_REQ_HEADER(Accept-Encoding) \", \"pattern\": \"\" \u89c4\u5219\u91ca\u4e49\uff1a\u5220\u9664\u8bf7\u6c42\u5934 Accept-Encoding \uff0c\u65e0\u8bba\u7ec8\u7aef\u662f\u5426\u53d1\u8d77 gzip \u7684\u8bf7\u6c42\uff0c\u90fd\u8fdb\u884c ungzip \u7684\u8fd4\u56de\u3002 \u793a\u4f8b\u4e8c\uff1a\u6dfb\u52a0\u54cd\u5e94\u5934 \"rule\": \"$ADD_RSP_HEADER(CDN, UPYUN, 1) \", \"pattern\": \"\" \u89c4\u5219\u91ca\u4e49\uff1a\u6dfb\u52a0\u54cd\u5e94\u5934 CDN \u4e3a UPYUN , 1 \u8868\u793a\u4f1a\u8986\u76d6\u6389\u5df2\u6709\u7684\u54cd\u5e94\u5934\uff0c\u901a\u8fc7\u54cd\u5e94\u5934\u4e5f\u53ef\u4ee5\u8bc6\u522b CDN \u5382\u5546\u3002 5\u3001URL \u9650\u901f \u5047\u5982\u8bf7\u6c42\u7684 URL \u4e3a\uff1a http://test.example.com/mp4/4E10F356C0FEAD359C33DC5901307461-10.mp4 \uff0c\u9700\u8981\u5bf9\u8be5\u7c7b\u578b\u6587\u4ef6\u8fdb\u884c\u9650\u901f\uff0c\u9650\u901f\u8981\u6c42\u4e3a\uff1a\u524d 20MB \u4e0d\u9650\u901f\uff0c20MB \u4e4b\u540e\u9650\u901f 800 KB/s\uff0c\u89c4\u5219\u53ef\u8fd9\u6837\u7f16\u5199\uff1a \"rule\": \"$WHEN($1, $EQ($_HOST, 'test.example.com'))$LIMIT_RATE_AFTER(20, m)$LIMIT_RATE(800, k)\", \"pattern\": \"^(/).+-10\\.mp4$\" \u89c4\u5219\u91ca\u4e49\uff1a\u5f53 $1 \u4e3a\u771f\uff0c\u4e14\u6ee1\u8db3\u8bf7\u6c42 HOST \u4e3a test.example.com \u65f6 \uff0c\u5f00\u59cb 20MB \u4e0d\u9650\u901f\uff0c\u540e\u9762\u9650\u5236\u5230 800KB/s \u3002 6\u3001\u5927\u5c0f\u5199\u8f6c\u6362 \u8be5\u90e8\u5206\u4f1a\u4f7f\u7528\u5230 $LOWER(E) \u51fd\u6570\uff0c\u76f4\u63a5\u770b\u89c4\u5219\uff1a \"rule\": \"$WHEN($MATCH($LOWER($_URI), /uptest.png)) /UPtest.png\", \"pattern\": \"\" \u89c4\u5219\u91ca\u4e49\uff1a\u9996\u5148\u662f\u83b7\u53d6\u8bf7\u6c42 URI \uff0c\u4f7f\u7528 $LOWER(E) \u51fd\u6570\u5c06 URI \u8f6c\u6362\u4e3a\u5c0f\u5199\uff0c\u548c /uptest.png \u8fdb\u884c\u5339\u914d\uff0c\u5339\u914d\u6210\u529f\uff0c\u5219\u76f4\u63a5\u5c06 URI \u6539\u5199\u4e3a /UPtest.png \u3002\u5982\u679c\u9700\u8981\u5c06\u5b57\u7b26\u4e32\u8f6c\u6362\u4e3a\u5927\u5199\uff0c\u4f7f\u7528 $UPPER(E) \u51fd\u6570\u3002 7\u3001\u6570\u503c\u6bd4\u8f83 \u4e5f\u5373\u5c06\u5b57\u7b26\u4e32\u6216\u8005\u6570\u5b57\u8fdb\u884c\u6bd4\u8f83\u3002\u4f8b\u5982\uff1a A \u548c B \u8fdb\u884c\u6bd4\u8f83\uff0c\u662f\u5426\u5927\u4e8e\u3001\u5927\u4e8e\u7b49\u4e8e\u3001\u76f8\u7b49\u7b49\u903b\u8f91\uff0c\u53c2\u89c1\u5982\u4e0b\u89c4\u5219\u793a\u4f8b\uff1a \"rule\": \"$GT($_TIME,$ADD($INT($_GET_t,16,10),3600))\", \"pattern\": \"\" \u89c4\u5219\u91ca\u4e49\uff1a\u5c06\u8bf7\u6c42 URL \u4e2d\u7684 t \u53c2\u6570 \u7531 16 \u8fdb\u5236\u8f6c\u6362\u4e3a 10 \u8fdb\u5236\uff0c\u7136\u540e\u52a0\u4e0a 3600 \uff0c\u5c06\u76f8\u52a0\u5f97\u5230\u7684\u503c\u548c\u5f53\u524d\u7cfb\u7edf\u65f6\u95f4\u8fdb\u884c\u6bd4\u8f83\u3002\u8fd9\u91cc\u4f7f\u7528\u5230\u4e86 $GT(E1\uff0cE2\uff09 \u51fd\u6570\uff0c\u4e5f\u5373 E1 \u662f\u5426\u5927\u4e8e E2 \uff0c\u5927\u4e8e\u5373\u8fd4\u56de true \u3002\u53e6\u5916\uff0c\u7b49\u4e8e\u4f7f\u7528 $EQ(E1\uff0cE2\uff09 \u51fd\u6570\uff0c\u5927\u4e8e\u7b49\u4e8e\u4f7f\u7528 $GE(E1\uff0cE2\uff09 \u51fd\u6570\u3002 \u5982\u6709\u7591\u95ee\u8bf7 \u8054\u7cfb\u6211\u4eec","title":"\u7ecf\u5178\u6848\u4f8b"},{"location":"cdn/analysis/","text":"\u7edf\u8ba1\u5206\u6790 \u00b6 \u4e3a\u4e86\u66f4\u52a0\u900f\u660e\u7684\u5c55\u793a\u7ec8\u7aef\u7528\u6237\u8bbf\u95ee CDN \u4ee5\u53ca CDN \u56de\u6e90\u7684\u8bbf\u95ee\u60c5\u51b5\uff0c\u53c8\u62cd\u4e91 CDN \u670d\u52a1\u4ece\u5e26\u5bbd\u3001\u6d41\u91cf\u3001\u8bf7\u6c42\u6570\u7b49\u7ef4\u5ea6\u8fdb\u884c\u4e86\u6570\u636e\u7edf\u8ba1\u548c\u5206\u6790\uff0c\u65b9\u4fbf\u7528\u6237\u67e5\u770b\u548c\u5206\u6790\uff0c\u5177\u4f53\u529f\u80fd\u9879\u53c2\u89c1\u5982\u4e0b\u63cf\u8ff0\uff1a \u5e26\u5bbd\u53ca\u6d41\u91cf\u67e5\u8be2 \u60a8\u53ef\u4ee5\u67e5\u8be2\u6307\u5b9a\u65f6\u95f4\u533a\u95f4\u3001\u57df\u540d\u3001\u670d\u52a1\u540d\u3001\u5730\u533a\u3001\u8fd0\u8425\u5546\u7b49\u6761\u4ef6\u4e0b\uff0c\u5e26\u5bbd\u53ca\u6d41\u91cf\u7684\u66f2\u7ebf\u56fe\uff0c\u4ee5\u53ca\u8fd0\u8425\u5546\u3001\u5730\u533a\u5206\u5e03\u53ca\u6392\u540d\u60c5\u51b5\uff1b \u8bf7\u6c42\u6570\u67e5\u8be2\uff1a\u60a8\u53ef\u4ee5\u67e5\u8be2\u6307\u5b9a\u65f6\u95f4\u533a\u95f4\u3001\u57df\u540d\u3001\u670d\u52a1\u540d\u3001\u5730\u533a\u3001\u8fd0\u8425\u5546\u7b49\u6761\u4ef6\u4e0b\uff0c\u7528\u6237\u8bf7\u6c42\u6570\u7684\u66f2\u7ebf\u56fe\uff1b \u56de\u6e90\u7edf\u8ba1\uff1a\u60a8\u53ef\u4ee5\u67e5\u770b\u6307\u5b9a\u65f6\u95f4\u533a\u95f4\u3001\u57df\u540d\u3001\u670d\u52a1\u540d\u7b49\u6761\u4ef6\u4e0b\uff0c\u5e26\u5bbd\u53ca\u6d41\u91cf\u66f2\u7ebf\u4ee5\u53ca\u6e90\u7ad9\u6d41\u91cf\u5206\u5e03\uff1b \u67e5\u8be2\u660e\u7ec6\u6570\u636e\uff1a\u60a8\u53ef\u4ee5\u67e5\u8be2\u6307\u5b9a\u65f6\u95f4\u533a\u95f4\u3001\u57df\u540d\u3001\u670d\u52a1\u540d\u3001\u5730\u533a\u3001\u8fd0\u8425\u5546\u7b49\u6761\u4ef6\u4e0b\uff0c\u67e5\u8be2\u6bcf\u65e5\u7684\u6d41\u91cf\u3001\u8bf7\u6c42\u91cf\u3001\u9759\u6001\u8bf7\u6c42\u3001\u52a8\u6001\u8bf7\u6c42\u3001HTTPS \u8bf7\u6c42\u3001\u5cf0\u503c\u5e26\u5bbd\u3001\u5cf0\u503c\u5e26\u5bbd\u65f6\u95f4\u7b49\u660e\u7ec6\u6570\u636e\u3002 \u5bfc\u51fa Excel \u62a5\u8868\uff1a\u60a8\u53ef\u4ee5\u67e5\u8be2\u6307\u5b9a\u65f6\u95f4\u533a\u95f4\u3001\u57df\u540d\u3001\u670d\u52a1\u540d\u3001\u5730\u533a\u3001\u8fd0\u8425\u5546\u7b49\u6761\u4ef6\u4e0b\uff0c\u53ef\u4ee5\u5bfc\u51fa 5 \u5206\u949f\u7c92\u5ea6\u8be6\u7ec6\u7684\u8bf7\u6c42\u6570\u3001\u6d41\u91cf\u3001\u5e26\u5bbd\u3001\u5cf0\u503c\u5e26\u5bbd\u65f6\u95f4\u7b49\u8be6\u7ec6\u6570\u636e\u3002 \u914d\u7f6e\u5f15\u5bfc \u767b\u9646 CDN \u63a7\u5236\u53f0 \uff0c\u5728\u7f6e\u9876\u83dc\u5355\u8fdb\u5165 \u7edf\u8ba1 \u680f\u76ee\uff0c\u53ef\u67e5\u8be2\u5982\u4e0a\u7edf\u8ba1\u5206\u6790\u6570\u636e\uff1a \u67e5\u8be2\u793a\u4f8b\u4e00\uff1a\u67e5\u8be2\u5e26\u5bbd\u53ca\u8bf7\u6c42\u6570\u66f2\u7ebf\u56fe \u67e5\u8be2\u793a\u4f8b\u4e8c\uff1a\u67e5\u8be2\u6d41\u91cf\u5730\u533a\u53ca\u8fd0\u8425\u5546\u5206\u5e03\u53ca\u6392\u884c \u67e5\u8be2\u793a\u4f8b\u4e09\uff1a\u67e5\u8be2\u660e\u7ec6\u6570\u636e \u67e5\u8be2\u793a\u4f8b\u56db\uff1a\u56de\u6e90\u5e26\u5bbd\u53ca\u8bf7\u6c42 \u76f8\u5173\u8bf4\u660e\uff1a 1.\u4ee5\u5929\u4e3a\u5355\u4f4d\u67e5\u8be2\u6570\u636e\u65f6\uff0c\u60a8\u53ef\u4ee5\u67e5\u8be2 5 \u5206\u949f\u65f6\u95f4\u7c92\u5ea6\u7684\u6570\u636e 2.\u65f6\u95f4\u533a\u95f4\u4e3a\u5927\u4e8e\u7b49\u4e8e 2 \u5929\u65f6\uff0c\u60a8\u53ef\u4ee5\u67e5\u8be2 1 \u5c0f\u65f6\u65f6\u95f4\u7c92\u5ea6\u7684\u6570\u636e \u6027\u80fd\u76d1\u63a7 \u00b6 \u901a\u8fc7\u6027\u80fd\u76d1\u63a7\uff0c\u53ef\u4ee5\u7b80\u5355\u3001\u76f4\u89c2\u5730\u4e86\u89e3\u5230 CDN \u670d\u52a1\u8d28\u91cf\u60c5\u51b5\uff0c\u53ca\u65f6\u53d1\u73b0\u548c\u5b9a\u4f4d\u95ee\u9898\uff0c\u5e76\u534f\u52a9\u89e3\u51b3\u95ee\u9898\u3002\u5728\u754c\u9762\u7684\u4e3b\u7a97\u53e3\u4e2d\uff0c\u60a8\u53ef\u4ee5\u67e5\u8be2\u6307\u5b9a\u65f6\u95f4\u533a\u95f4\u3001\u57df\u540d\u3001\u670d\u52a1\u540d\u3001\u5730\u533a\u3001\u8fd0\u8425\u5546\u7b49\u6761\u4ef6\u4e0b\uff0c\u5bf9\u5e94\u670d\u52a1\u7684\u5065\u5eb7\u5ea6\u3001\u7f13\u5b58\u547d\u4e2d\u7387\u3001\u5e73\u5747\u4e0b\u8f7d\u901f\u5ea6\u7b49\u6570\u636e\u3002\u5177\u4f53\u529f\u80fd\u9879\u63cf\u8ff0\u5982\u4e0b\uff1a \u5065\u5eb7\u5ea6\uff1a\u7edf\u8ba1\u6240\u6709\u8bf7\u6c42\u7684 HTTP \u72b6\u6001\u7801\uff0c\u8ba1\u7b97 2xx \u548c 3xx \u8bf7\u6c42\u6b21\u6570\u6240\u5360\u7684\u6bd4\u4f8b \u7f13\u5b58\u547d\u4e2d\u7387\uff1a\u7edf\u8ba1\u6240\u6709\u8bf7\u6c42\u6570\u4e2d\uff0c\u547d\u4e2d\u7f13\u5b58\u7684\u8bf7\u6c42\u6570\u6240\u5360\u7684\u6bd4\u4f8b \u5e73\u5747\u4e0b\u8f7d\u901f\u5ea6\uff1a\u53ef\u4ee5\u6839\u636e\u5730\u533a\u548c\u8fd0\u8425\u5546\u6765\u533a\u5206\u8d44\u6e90\u6587\u4ef6\u4e0b\u8f7d\u901f\u5ea6\u548c\u8bf7\u6c42\u8017\u65f6 \u62e6\u622a\u653b\u51fb\u6b21\u6570\uff1a\u62e6\u622a\u7684\u8de8\u7ad9\u653b\u51fb\u3001SQL \u6ce8\u5165\u548c\u5176\u4ed6\u4ee3\u7801\u6267\u884c\u7b49\u591a\u79cd\u653b\u51fb\u7684\u6570\u91cf\uff08\u4ec5\u9650\u5f00\u542f WAF \u529f\u80fd\uff09 \u914d\u7f6e\u5f15\u5bfc \u767b\u9646 CDN \u63a7\u5236\u53f0 \uff0c\u5728\u7f6e\u9876\u83dc\u5355\u8fdb\u5165 \u76d1\u63a7 \u680f\u76ee\uff0c\u53ef\u67e5\u8be2\u5982\u4e0a\u6027\u80fd\u76d1\u6d4b\u6570\u636e\uff0c\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u67e5\u8be2\u793a\u4f8b\u4e00\uff1a\u670d\u52a1\u72b6\u51b5\u5386\u53f2\u6570\u636e\uff08\u5065\u5eb7\u5ea6\uff09 \u67e5\u8be2\u793a\u4f8b\u4e8c\uff1a\u5065\u5eb7\u5ea6\u8be6\u60c5\uff08\u56de\u6e90\u8bbf\u95ee\uff09 \u67e5\u8be2\u793a\u4f8b\u4e09\uff1a\u670d\u52a1\u72b6\u51b5\u5386\u53f2\u6570\u636e\uff08\u7f13\u5b58\u547d\u4e2d\u7387\uff09 \u67e5\u8be2\u793a\u4f8b\u56db\uff1a\u5730\u533a\u5e73\u5747\u4e0b\u8f7d\u901f\u5ea6","title":"\u7edf\u8ba1\u5206\u6790"},{"location":"cdn/analysis/#_1","text":"\u4e3a\u4e86\u66f4\u52a0\u900f\u660e\u7684\u5c55\u793a\u7ec8\u7aef\u7528\u6237\u8bbf\u95ee CDN \u4ee5\u53ca CDN \u56de\u6e90\u7684\u8bbf\u95ee\u60c5\u51b5\uff0c\u53c8\u62cd\u4e91 CDN \u670d\u52a1\u4ece\u5e26\u5bbd\u3001\u6d41\u91cf\u3001\u8bf7\u6c42\u6570\u7b49\u7ef4\u5ea6\u8fdb\u884c\u4e86\u6570\u636e\u7edf\u8ba1\u548c\u5206\u6790\uff0c\u65b9\u4fbf\u7528\u6237\u67e5\u770b\u548c\u5206\u6790\uff0c\u5177\u4f53\u529f\u80fd\u9879\u53c2\u89c1\u5982\u4e0b\u63cf\u8ff0\uff1a \u5e26\u5bbd\u53ca\u6d41\u91cf\u67e5\u8be2 \u60a8\u53ef\u4ee5\u67e5\u8be2\u6307\u5b9a\u65f6\u95f4\u533a\u95f4\u3001\u57df\u540d\u3001\u670d\u52a1\u540d\u3001\u5730\u533a\u3001\u8fd0\u8425\u5546\u7b49\u6761\u4ef6\u4e0b\uff0c\u5e26\u5bbd\u53ca\u6d41\u91cf\u7684\u66f2\u7ebf\u56fe\uff0c\u4ee5\u53ca\u8fd0\u8425\u5546\u3001\u5730\u533a\u5206\u5e03\u53ca\u6392\u540d\u60c5\u51b5\uff1b \u8bf7\u6c42\u6570\u67e5\u8be2\uff1a\u60a8\u53ef\u4ee5\u67e5\u8be2\u6307\u5b9a\u65f6\u95f4\u533a\u95f4\u3001\u57df\u540d\u3001\u670d\u52a1\u540d\u3001\u5730\u533a\u3001\u8fd0\u8425\u5546\u7b49\u6761\u4ef6\u4e0b\uff0c\u7528\u6237\u8bf7\u6c42\u6570\u7684\u66f2\u7ebf\u56fe\uff1b \u56de\u6e90\u7edf\u8ba1\uff1a\u60a8\u53ef\u4ee5\u67e5\u770b\u6307\u5b9a\u65f6\u95f4\u533a\u95f4\u3001\u57df\u540d\u3001\u670d\u52a1\u540d\u7b49\u6761\u4ef6\u4e0b\uff0c\u5e26\u5bbd\u53ca\u6d41\u91cf\u66f2\u7ebf\u4ee5\u53ca\u6e90\u7ad9\u6d41\u91cf\u5206\u5e03\uff1b \u67e5\u8be2\u660e\u7ec6\u6570\u636e\uff1a\u60a8\u53ef\u4ee5\u67e5\u8be2\u6307\u5b9a\u65f6\u95f4\u533a\u95f4\u3001\u57df\u540d\u3001\u670d\u52a1\u540d\u3001\u5730\u533a\u3001\u8fd0\u8425\u5546\u7b49\u6761\u4ef6\u4e0b\uff0c\u67e5\u8be2\u6bcf\u65e5\u7684\u6d41\u91cf\u3001\u8bf7\u6c42\u91cf\u3001\u9759\u6001\u8bf7\u6c42\u3001\u52a8\u6001\u8bf7\u6c42\u3001HTTPS \u8bf7\u6c42\u3001\u5cf0\u503c\u5e26\u5bbd\u3001\u5cf0\u503c\u5e26\u5bbd\u65f6\u95f4\u7b49\u660e\u7ec6\u6570\u636e\u3002 \u5bfc\u51fa Excel \u62a5\u8868\uff1a\u60a8\u53ef\u4ee5\u67e5\u8be2\u6307\u5b9a\u65f6\u95f4\u533a\u95f4\u3001\u57df\u540d\u3001\u670d\u52a1\u540d\u3001\u5730\u533a\u3001\u8fd0\u8425\u5546\u7b49\u6761\u4ef6\u4e0b\uff0c\u53ef\u4ee5\u5bfc\u51fa 5 \u5206\u949f\u7c92\u5ea6\u8be6\u7ec6\u7684\u8bf7\u6c42\u6570\u3001\u6d41\u91cf\u3001\u5e26\u5bbd\u3001\u5cf0\u503c\u5e26\u5bbd\u65f6\u95f4\u7b49\u8be6\u7ec6\u6570\u636e\u3002 \u914d\u7f6e\u5f15\u5bfc \u767b\u9646 CDN \u63a7\u5236\u53f0 \uff0c\u5728\u7f6e\u9876\u83dc\u5355\u8fdb\u5165 \u7edf\u8ba1 \u680f\u76ee\uff0c\u53ef\u67e5\u8be2\u5982\u4e0a\u7edf\u8ba1\u5206\u6790\u6570\u636e\uff1a \u67e5\u8be2\u793a\u4f8b\u4e00\uff1a\u67e5\u8be2\u5e26\u5bbd\u53ca\u8bf7\u6c42\u6570\u66f2\u7ebf\u56fe \u67e5\u8be2\u793a\u4f8b\u4e8c\uff1a\u67e5\u8be2\u6d41\u91cf\u5730\u533a\u53ca\u8fd0\u8425\u5546\u5206\u5e03\u53ca\u6392\u884c \u67e5\u8be2\u793a\u4f8b\u4e09\uff1a\u67e5\u8be2\u660e\u7ec6\u6570\u636e \u67e5\u8be2\u793a\u4f8b\u56db\uff1a\u56de\u6e90\u5e26\u5bbd\u53ca\u8bf7\u6c42 \u76f8\u5173\u8bf4\u660e\uff1a 1.\u4ee5\u5929\u4e3a\u5355\u4f4d\u67e5\u8be2\u6570\u636e\u65f6\uff0c\u60a8\u53ef\u4ee5\u67e5\u8be2 5 \u5206\u949f\u65f6\u95f4\u7c92\u5ea6\u7684\u6570\u636e 2.\u65f6\u95f4\u533a\u95f4\u4e3a\u5927\u4e8e\u7b49\u4e8e 2 \u5929\u65f6\uff0c\u60a8\u53ef\u4ee5\u67e5\u8be2 1 \u5c0f\u65f6\u65f6\u95f4\u7c92\u5ea6\u7684\u6570\u636e","title":"\u7edf\u8ba1\u5206\u6790"},{"location":"cdn/analysis/#_2","text":"\u901a\u8fc7\u6027\u80fd\u76d1\u63a7\uff0c\u53ef\u4ee5\u7b80\u5355\u3001\u76f4\u89c2\u5730\u4e86\u89e3\u5230 CDN \u670d\u52a1\u8d28\u91cf\u60c5\u51b5\uff0c\u53ca\u65f6\u53d1\u73b0\u548c\u5b9a\u4f4d\u95ee\u9898\uff0c\u5e76\u534f\u52a9\u89e3\u51b3\u95ee\u9898\u3002\u5728\u754c\u9762\u7684\u4e3b\u7a97\u53e3\u4e2d\uff0c\u60a8\u53ef\u4ee5\u67e5\u8be2\u6307\u5b9a\u65f6\u95f4\u533a\u95f4\u3001\u57df\u540d\u3001\u670d\u52a1\u540d\u3001\u5730\u533a\u3001\u8fd0\u8425\u5546\u7b49\u6761\u4ef6\u4e0b\uff0c\u5bf9\u5e94\u670d\u52a1\u7684\u5065\u5eb7\u5ea6\u3001\u7f13\u5b58\u547d\u4e2d\u7387\u3001\u5e73\u5747\u4e0b\u8f7d\u901f\u5ea6\u7b49\u6570\u636e\u3002\u5177\u4f53\u529f\u80fd\u9879\u63cf\u8ff0\u5982\u4e0b\uff1a \u5065\u5eb7\u5ea6\uff1a\u7edf\u8ba1\u6240\u6709\u8bf7\u6c42\u7684 HTTP \u72b6\u6001\u7801\uff0c\u8ba1\u7b97 2xx \u548c 3xx \u8bf7\u6c42\u6b21\u6570\u6240\u5360\u7684\u6bd4\u4f8b \u7f13\u5b58\u547d\u4e2d\u7387\uff1a\u7edf\u8ba1\u6240\u6709\u8bf7\u6c42\u6570\u4e2d\uff0c\u547d\u4e2d\u7f13\u5b58\u7684\u8bf7\u6c42\u6570\u6240\u5360\u7684\u6bd4\u4f8b \u5e73\u5747\u4e0b\u8f7d\u901f\u5ea6\uff1a\u53ef\u4ee5\u6839\u636e\u5730\u533a\u548c\u8fd0\u8425\u5546\u6765\u533a\u5206\u8d44\u6e90\u6587\u4ef6\u4e0b\u8f7d\u901f\u5ea6\u548c\u8bf7\u6c42\u8017\u65f6 \u62e6\u622a\u653b\u51fb\u6b21\u6570\uff1a\u62e6\u622a\u7684\u8de8\u7ad9\u653b\u51fb\u3001SQL \u6ce8\u5165\u548c\u5176\u4ed6\u4ee3\u7801\u6267\u884c\u7b49\u591a\u79cd\u653b\u51fb\u7684\u6570\u91cf\uff08\u4ec5\u9650\u5f00\u542f WAF \u529f\u80fd\uff09 \u914d\u7f6e\u5f15\u5bfc \u767b\u9646 CDN \u63a7\u5236\u53f0 \uff0c\u5728\u7f6e\u9876\u83dc\u5355\u8fdb\u5165 \u76d1\u63a7 \u680f\u76ee\uff0c\u53ef\u67e5\u8be2\u5982\u4e0a\u6027\u80fd\u76d1\u6d4b\u6570\u636e\uff0c\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u67e5\u8be2\u793a\u4f8b\u4e00\uff1a\u670d\u52a1\u72b6\u51b5\u5386\u53f2\u6570\u636e\uff08\u5065\u5eb7\u5ea6\uff09 \u67e5\u8be2\u793a\u4f8b\u4e8c\uff1a\u5065\u5eb7\u5ea6\u8be6\u60c5\uff08\u56de\u6e90\u8bbf\u95ee\uff09 \u67e5\u8be2\u793a\u4f8b\u4e09\uff1a\u670d\u52a1\u72b6\u51b5\u5386\u53f2\u6570\u636e\uff08\u7f13\u5b58\u547d\u4e2d\u7387\uff09 \u67e5\u8be2\u793a\u4f8b\u56db\uff1a\u5730\u533a\u5e73\u5747\u4e0b\u8f7d\u901f\u5ea6","title":"\u6027\u80fd\u76d1\u63a7"},{"location":"cdn/basic/","text":"\u521b\u5efa\u670d\u52a1 \u00b6 \u7b2c\u4e00\u6b65\uff1a\u9009\u62e9\u670d\u52a1\u7c7b\u578b \u767b\u5f55 \u53c8\u62cd\u4e91\u7ba1\u7406\u63a7\u5236\u53f0 \uff0c\u5728\u63a7\u5236\u53f0\u9875\u9762\uff0c\u5206\u522b\u70b9\u51fb\u53f3\u4e0a\u89d2\u7684 \u670d\u52a1 \u3001 \u521b\u5efa\u670d\u52a1 \u7b49\u6309\u94ae\uff0c\u9009\u62e9\u670d\u52a1\u7c7b\u578b\u3002\u6839\u636e\u4e1a\u52a1\u60c5\u51b5\uff0c\u53ef\u9009\u62e9 \u5168\u7f51\u52a0\u901f\u670d\u52a1 \u6216 \u76f4\u64ad\u52a0\u901f\u670d\u52a1 \u3002\u5177\u4f53\u64cd\u4f5c\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u7b2c\u4e8c\u6b65\uff1a\u586b\u5199\u914d\u7f6e\u4fe1\u606f \u9009\u62e9\u670d\u52a1\u7c7b\u578b\u4e4b\u540e\uff0c\u5219\u8fdb\u5165\u670d\u52a1\u521b\u5efa\u9636\u6bb5\uff0c\u9700\u8981\u8fdb\u884c\u6e90\u7ad9\u7c7b\u578b\u3001\u56de\u6e90\u914d\u7f6e\u3001\u64cd\u4f5c\u5458\u8bbe\u7f6e\u7b49\u6b65\u9aa4\u3002\u5177\u4f53\u914d\u7f6e\u754c\u9762\u53ef\u53c2\u89c1\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u521b\u5efa\u670d\u52a1\uff1a \u521b\u5efa\u64cd\u4f5c\u5458\uff1a \u6e90\u7ad9\u7c7b\u578b \u76ee\u524d\u6e90\u7ad9\u7c7b\u578b\u5305\u62ec \u53c8\u62cd\u4e91 \u548c \u81ea\u4e3b\u6e90 \u3002\u5176\u4e2d \u53c8\u62cd\u4e91 \u8868\u793a\u8d44\u6e90\u90fd\u5b58\u653e\u5728\u53c8\u62cd\u4e91\u5206\u5e03\u5f0f\u5bf9\u8c61\u5b58\u50a8\u670d\u52a1\u4e0a\uff0c\u540c\u65f6\u9644\u52a0\u4e86 CDN \u670d\u52a1\u7684\u652f\u6301\uff0c\u56e0\u6b64\u4e5f\u62e5\u6709\u7edd\u5927\u591a\u6570\u53c8\u62cd\u4e91 CDN \u7684\u529f\u80fd\uff1b\u800c \u81ea\u4e3b\u6e90 \u5219\u8868\u793a\u8d44\u6e90\u90fd\u5b58\u653e\u5728\u5ba2\u6237\u81ea\u5df1\u7684\u6e90\u7ad9\u6216\u7b2c\u4e09\u65b9\u4e91\u5b58\u50a8\u670d\u52a1\u4e0a\uff0c\u4ec5\u4f7f\u7528\u53c8\u62cd\u4e91 CDN \u670d\u52a1\u3002 \u914d\u7f6e\u5f15\u5bfc \u7cfb\u7edf\u9ed8\u8ba4\u4f1a\u9009\u62e9 \u81ea\u4e3b\u6e90 \uff0c\u8bf7\u6839\u636e\u5177\u4f53\u4e1a\u52a1\u9700\u6c42\u8fdb\u884c\u9009\u62e9\u3002\u914d\u7f6e\u754c\u9762\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u5982\u679c\u60a8\u7684\u8d44\u6e90\u90fd\u6258\u7ba1\u5728\u7b2c\u4e09\u65b9\u4e91\u5b58\u50a8\u5e73\u53f0\u6216\u8005\u81ea\u6709\u6e90\u4e0a\uff0c\u8bf7\u9009\u62e9 \u81ea\u4e3b\u6e90 \u5982\u679c\u60a8\u51c6\u5907\u628a\u9759\u6001\u8d44\u6e90\u90fd\u6258\u7ba1\u5728\u53c8\u62cd\u4e91\u5bf9\u8c61\u5b58\u50a8\u5e73\u53f0\u4e0a\uff0c\u8bf7\u9009\u62e9 \u53c8\u62cd\u4e91 \u56de\u6e90\u914d\u7f6e \u56de\u6e90\u914d\u7f6e\u662f CDN \u670d\u52a1\u521b\u5efa\u6700\u91cd\u8981\u7684\u73af\u8282\uff0c\u8bf7\u8c28\u614e\u914d\u7f6e\u3002\u4e5f\u53ef\u53bb\u529f\u80fd\u914d\u7f6e\u754c\u9762\u8fdb\u884c\u8bbe\u7f6e\uff0c\u4f9d\u6b21\u8fdb\u5165\uff1a\u670d\u52a1 > \u529f\u80fd\u914d\u7f6e > \u57fa\u7840\u914d\u7f6e > \u56de\u6e90\u914d\u7f6e\uff0c\u70b9\u51fb\u7ba1\u7406\u6309\u94ae\u5373\u53ef\u914d\u7f6e\u3002\u5982\u4e0b\u622a\u56fe\u6240\u793a\uff1a \u56de\u6e90 Host \u8be5\u914d\u7f6e\u662f\u6307 CDN \u8282\u70b9\u56de\u6e90\u8fc7\u7a0b\u4e2d\u6240\u9700\u8bbf\u95ee\u7684\u6e90\u7ad9\u670d\u52a1\u5668\u4e0a\u7684\u57df\u540d\u3002CDN \u8282\u70b9\u56de\u6e90\u65f6\u4f1a\u5728 HTTP \u8bf7\u6c42\u5934\u4e2d Host \u5b57\u6bb5\u91cc\u586b\u5199\u8be5\u57df\u540d\uff0c\u4ee5\u652f\u6301\u6e90\u670d\u52a1\u5668\u53ef\u901a\u8fc7\u6b64 Host \u505a\u7684\u7279\u6b8a\u5904\u7406\u903b\u8f91\uff0c\u4e00\u822c\u662f\u57df\u540d\u5f62\u5f0f\u7684\u5b57\u7b26\u4e32\uff0c\u5f53\u7136\u4e5f\u652f\u6301\u4efb\u610f\u5b57\u7b26\u4e32\u5f62\u5f0f\u3002 \u914d\u7f6e\u5f15\u5bfc 1.\u56de\u6e90 Host \u4e3a\u53ef\u9009\u914d\u7f6e\u9879\uff0c\u7279\u522b\u5730\uff0c\u5982\u679c\u8be5\u81ea\u5b9a\u4e49\u503c\u4e3a\u7a7a\uff0c\u5219\u8be5\u670d\u52a1\u4e0b\u7684\u52a0\u901f\u57df\u540d\u5c31\u4f1a\u4f5c\u4e3a\u56de\u6e90HOST 2.\u81ea\u5b9a\u4e49\uff1a\u53ef\u4ee5\u6839\u636e\u9700\u8981\u4fee\u6539\u56de\u6e90 Host\uff0c\u8bf7\u4fdd\u8bc1\u8be5\u57df\u540d\u53ef\u4ee5\u6b63\u786e\u8bbf\u95ee\uff0c\u5426\u5219\u4f1a\u51fa\u73b0\u56de\u6e90\u5931\u8d25\u7684\u60c5\u51b5 \u56de\u6e90\u534f\u8bae \u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u6211\u4eec\u90fd\u4f1a\u4ee5 HTTP \u534f\u8bae\u56de\u6e90\uff0c\u60a8\u4e5f\u53ef\u4ee5\u91c7\u7528 HTTPS \u534f\u8bae\u56de\u6e90\u3002\u53e6\u5916\u4e00\u4e2a\u7279\u522b\u7684\u9009\u9879\u662f\u534f\u8bae\u8ddf\u968f\uff0c\u5f53\u542f\u7528\u8be5\u7279\u6027\u65f6\uff0c\u56de\u6e90\u534f\u8bae\u59cb\u7ec8\u4f1a\u548c\u5ba2\u6237\u7aef\u8bbf\u95ee CDN \u7684\u534f\u8bae\u4fdd\u6301\u4e00\u81f4\uff0c\u5373\u5ba2\u6237\u7aef\u7528 HTTP \u534f\u8bae\u8bbf\u95ee\u6211\u4eec CDN\uff0c\u90a3\u4e48\u56de\u6e90\u65f6\u6211\u4eec\u4e5f\u4f1a\u7528 HTTP \u534f\u8bae\u8fdb\u884c\u56de\u6e90\uff0c\u540c\u6837\uff0c\u82e5\u91c7\u7528 HTTPS \u8bbf\u95ee\uff0c\u90a3\u4e48\u56de\u6e90\u4e5f\u662f HTTPS\u3002 \u914d\u7f6e\u5f15\u5bfc \u5f53\u6211\u4eec\u9009\u62e9 HTTP \u534f\u8bae\u56de\u6e90\u65f6\uff0c\u56de\u6e90\u5730\u5740\u7684\u7aef\u53e3\u53f7\u9ed8\u8ba4\u4e3a 80\uff0c\u800c\u9009\u62e9 HTTPS \u534f\u8bae\u56de\u6e90\u65f6\uff0c\u7aef\u53e3\u53f7\u9ed8\u8ba4\u4e3a 443\u3002\u5f53\u7136\uff0c\u4f60\u4e5f\u53ef\u4ee5\u624b\u52a8\u6307\u5b9a\u7279\u6b8a\u7684\u7aef\u53e3\u53f7\uff0c\u4f8b\u5982 8080 \u6216 8443\u3002 \u6ce8\u610f\u4e8b\u9879 \u9009\u62e9 \u534f\u8bae\u8ddf\u968f \u540e\uff0c\u56de\u6e90\u5730\u5740\u7684\u7aef\u53e3\u53f7\u914d\u7f6e\u5c06\u4ec5\u4f5c\u7528\u4e8e\u56de\u6e90\u534f\u8bae\u4e3a HTTP \u7684\u60c5\u51b5\uff0c\u9ed8\u8ba4 80\uff0c\u5f53\u7136\u4f60\u4e5f\u53ef\u4ee5\u81ea\u5b9a\u4e49\u4e3a\u5176\u4ed6\u503c\uff0c\u800c\u56de\u6e90\u534f\u8bae\u4e3a HTTPS \u65f6\u7aef\u53e3\u53f7\u5219\u59cb\u7ec8\u56fa\u5b9a\u4e3a 443\uff0c\u4e14\u76ee\u524d\u6682\u65f6\u4e0d\u652f\u6301\u4fee\u6539\u6b64\u56fa\u5b9a\u503c\u3002\u56e0\u6b64\uff0c\u82e5\u4e4b\u524d\u9009\u62e9 HTTPS \u534f\u8bae\u56de\u6e90 \u4e14\u81ea\u5b9a\u4e49\u8bbe\u7f6e\u8fc7\u7aef\u53e3\u53f7\u7684\u7528\u6237\u9700\u8981\u6ce8\u610f\uff0c\u5207\u6362\u5230 \u534f\u8bae\u8ddf\u968f \u6a21\u5f0f\u4e0b\u65f6\uff0c\u81ea\u5b9a\u4e49\u7684\u7aef\u53e3\u53f7\u5c06\u4ec5\u4f5c\u7528\u4e8e\u56de\u6e90\u534f\u8bae\u4e3a HTTP \u7684\u60c5\u51b5\u3002 \u7ebf\u8def\u914d\u7f6e \u7ebf\u8def\u914d\u7f6e\u5305\u62ec\u56de\u6e90\u5730\u5740\u3001\u7aef\u53e3\u53f7\u3001\u4e3b\u5907\u7ebf\u8def\u3001\u8f6e\u8be2\u6743\u91cd\u3001\u6700\u5927\u5931\u8d25\u6b21\u6570\u3001\u9759\u9ed8\u65f6\u95f4\u7b49\u9ad8\u7ea7\u8bbe\u7f6e\u3002\u5176\u4e2d\u56de\u6e90\u5730\u5740\u5219\u8868\u793a\u6e90\u7ad9\u5b9e\u9645\u53ef\u8bbf\u95ee\u7684\u7f51\u7edc\u5730\u5740\uff0c\u53ef\u586b IP \u5730\u5740\u6216\u57df\u540d\u5730\u5740\uff0c\u5982\u679c\u662f\u57df\u540d\u5730\u5740\uff0c\u90a3\u4e48 CDN \u5728\u56de\u6e90\u65f6\u4f1a\u5bf9\u8be5\u57df\u540d\u5730\u5740\u8fdb\u884c DNS \u89e3\u6790\uff0c\u7136\u540e\u9488\u5bf9\u89e3\u6790\u51fa\u6765\u7684 IP \u5730\u5740\u8fdb\u884c\u8bbf\u95ee\uff0c\u56e0\u6b64\u82e5\u89e3\u6790\u5931\u8d25\u5c06\u4f1a\u5bfc\u81f4\u56de\u6e90\u5f02\u5e38\u3002 \u914d\u7f6e\u5f15\u5bfc \u914d\u7f6e\u754c\u9762\u5982\u4e0b\u622a\u56fe\u6240\u793a\uff0c\u4ee5\u4e0b\u5c06\u91cd\u70b9\u4ecb\u7ecd\u4e3b\u5907\u7ebf\u8def\u3001\u8f6e\u8be2\u6743\u91cd\u3001\u6700\u5927\u5931\u8d25\u6b21\u6570\u548c\u9759\u9ed8\u65f6\u95f4\u3002 \u4e3b\u3001\u5907\u7ebf\u8def \u56de\u6e90\u5730\u5740\u914d\u7f6e\u4e2d\u9664\u4e86\u9ed8\u8ba4\u7684 \u4e3b\u7ebf\u8def \u5916\uff0c\u6211\u4eec\u8fd8\u652f\u6301 \u5907\u4efd\u7ebf\u8def \u7684\u914d\u7f6e\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c \u4e3b\u7ebf\u8def \u591a\u4e2a\u56de\u6e90\u5730\u5740\u4f1a\u4ee5 RR \u8f6e\u8be2\u65b9\u5f0f\u8fdb\u884c\u8c03\u5ea6\uff0c\u5f53\u4e14\u4ec5\u5f53\u6240\u6709 \u4e3b\u7ebf\u8def \u56de\u6e90\u5730\u5740\u5747\u4e0d\u53ef\u8fbe\u65f6\uff0c\u6b64\u65f6\u6211\u4eec\u5c06\u4f7f\u7528 \u5907\u4efd\u7ebf\u8def \u8fdb\u884c\u8f6c\u53d1\uff0c\u82e5 \u5907\u4efd\u7ebf\u8def \u6709\u591a\u4e2a\u56de\u6e90\u5730\u5740\uff0c\u90a3\u4e48\u8d1f\u8f7d\u5747\u8861\u65b9\u5f0f\u4e5f\u548c \u4e3b\u7ebf\u8def \u4e00\u6837\uff0c\u4ee5 Round-Robin \u8f6e\u8be2\uff08\u8be6\u60c5\u8bf7\u70b9\u51fb \u94fe\u63a5 \uff09\u65b9\u5f0f\u8fdb\u884c\u8c03\u5ea6\u3002 \u8f6e\u8be2\u6743\u91cd \u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u8f6e\u8be2\u6743\u91cd\u90fd\u4e3a 1\uff0c\u8868\u793a\u6240\u6709\u56de\u6e90\u5730\u5740\u8f6e\u8be2\u5230\u7684\u6982\u7387\u5747\u7b49\u3002\u5f53\u7136\u4e5f\u53ef\u4ee5\u5982\u4e0a\u56fe\u90a3\u6837\u81ea\u5b9a\u4e49\u8f6e\u8be2\u6743\u91cd\uff0c\u6211\u4eec\u770b\u5230\u4e3b\u7ebf\u8def\u4e24\u4e2a\u56de\u6e90\u5730\u5740\u6743\u91cd\u5206\u522b\u662f 1 \u548c 2\uff0c\u6b64\u65f6\u4e3b\u7ebf\u8def\u96c6\u7fa4\u5728\u8f6e\u8be2\u8c03\u5ea6\u4e2d\u4f1a\u6709 1/3 \u7684\u6982\u7387\u56de 192.168.11.1:80 \u8fd9\u4e2a\u5730\u5740\uff0c\u800c\u56de 192.168.11.2:80 \u8fd9\u4e2a\u5730\u5740\u7684\u6982\u7387\u5219\u4e3a 2/3\u3002\u5373\u5f53\u524d\u56de\u6e90\u5730\u5740\u8f6e\u8be2\u5230\u7684\u6982\u7387\u53ef\u6309\uff08\u5f53\u524d\u8282\u70b9\u6743\u91cd/\u96c6\u7fa4\u6240\u6709\u8282\u70b9\u6743\u91cd\u4e4b\u548c\uff09\u8fd9\u4e2a\u516c\u5f0f\u8ba1\u7b97\u3002 \u6700\u5927\u5931\u8d25\u6b21\u6570\u548c\u9759\u9ed8\u65f6\u95f4 \u8868\u793a\u5728\u4e00\u4e2a \u9759\u9ed8\u65f6\u95f4 (fail_timeout) \u5185\u5982\u679c\u5bf9\u5e94\u6e90\u7ad9\u7684\u5f02\u5e38\u6b21\u6570\u7d2f\u8ba1\u8fbe\u5230\u5f53\u524d\u8bbe\u7f6e\u7684 \u6700\u5927\u5931\u8d25\u6b21\u6570 (max_fails) \uff0c\u90a3\u4e48\u5728\u4e0b\u4e00\u4e2a \u9759\u9ed8\u65f6\u95f4 (fail_timeout) \u5185\uff0cCDN \u5c31\u4f1a\u8ba4\u4e3a\u8fd9\u4e2a\u6e90\u7ad9\u5b95\u673a\u4e86\uff0c\u5373\u5728\u8fd9\u6bb5\u65f6\u95f4\u5185\u4e0d\u4f1a\u518d\u5c06\u8bf7\u6c42\u8f6c\u53d1\u7ed9\u5b83\u3002\u7279\u522b\u5730\uff0c\u5f53 \u6700\u5927\u5931\u8d25\u6b21\u6570 (max_fails) \u5176\u503c\u4e3a 0 \u65f6\uff0c\u8868\u793a\u4e0d\u4f1a\u8fdb\u884c\u5931\u8d25\u7d2f\u8ba1\uff0c \u9759\u9ed8\u65f6\u95f4 (fails_timeout) \u4e5f\u540c\u65f6\u5931\u6548\u3002 \u5408\u7406\u8bbe\u7f6e\u6700\u5927\u5931\u8d25\u6b21\u6570\u548c\u9759\u9ed8\u65f6\u95f4\uff0c\u6709\u52a9\u4e8e\u5728\u6e90\u7ad9\u5f02\u5e38\u7684\u60c5\u51b5\u4e0b\u6700\u5927\u7a0b\u5ea6\u51cf\u5c11\u5bf9\u7ebf\u4e0a\u8bf7\u6c42\u7684\u5f71\u54cd\u3002\u8fd9\u91cc\u5b9e\u9645\u4e0a\u8ddf Nginx \u6838\u5fc3\u7684 upstream \u6a21\u5757\u5b9e\u73b0\u673a\u5236\u7c7b\u4f3c\uff0c\u8fdb\u4e00\u6b65\u4e86\u89e3\u53ef\u53c2\u8003 \u94fe\u63a5 \u3002 \u521b\u5efa\u64cd\u4f5c\u5458 \u5f53\u60a8\u5728\u521b\u5efa\u670d\u52a1\u7684\u8fc7\u7a0b\u4e2d\uff0c\u6e90\u7ad9\u7c7b\u578b\u9009\u62e9\u4e3a \u53c8\u62cd\u4e91 \u65f6 \uff0c\u5219\u521b\u5efa\u548c\u6388\u6743\u64cd\u4f5c\u5458\u662f\u4e00\u4e2a\u5fc5\u987b\u7684\u6b65\u9aa4\u3002\u60a8\u53ef\u4ee5\u521b\u5efa\u4e00\u5230\u591a\u4e2a\u64cd\u4f5c\u5458\uff0c\u6ee1\u8db3\u4e0d\u540c\u7684\u7ba1\u7406\u9700\u6c42\uff0c\u53ef\u7528\u4e8e\u5bf9\u5b58\u50a8\u5728\u53c8\u62cd\u4e91\u7684\u8d44\u6e90\u8fdb\u884c API \u4e0a\u4f20\u3001\u5220\u9664\u65f6\u7684\u8ba4\u8bc1\u6388\u6743\u548c FTP \u767b\u5f55\u7b49\u3002 \u914d\u7f6e\u5f15\u5bfc \u60a8\u53ef\u4ee5\u9009\u62e9\u65b0\u521b\u5efa\u4e00\u4e2a\u64cd\u4f5c\u5458\uff0c\u4e5f\u53ef\u4ee5\u6388\u6743\u5df2\u6709\u64cd\u4f5c\u5458\uff0c\u5e76\u4e14\u53ef\u4ee5\u9488\u5bf9\u6743\u9650\u8fdb\u884c\u8bbe\u7f6e\uff0c\u5305\u62ec\u53ef\u8bfb\u53d6\u3001\u53ef\u5199\u5165\u3001\u53ef\u5220\u9664\u3002\u914d\u7f6e\u754c\u9762\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u4f60\u4e5f\u53ef\u4ee5\u5728\u7ba1\u7406\u540e\u53f0\u53f3\u4e0a\u89d2\u7684\u5e10\u53f7\u4e0b\u62c9\u83dc\u5355\u4e2d\u9009\u62e9 \u8d26\u6237\u7ba1\u7406\uff0d> \u64cd\u4f5c\u5458\u7ba1\u7406 -> \u7f16\u8f91 \u8fdb\u884c\u8bbe\u7f6e\u3002 \u57df\u540d\u7ed1\u5b9a \u9488\u5bf9\u4e00\u4e2a CDN \u670d\u52a1\uff0c\u5047\u5982\u56de\u6e90\u5730\u5740\u76f8\u540c\uff0c\u53ef\u4ee5\u7ed1\u5b9a\u591a\u4e2a\u81ea\u5b9a\u4e49\u57df\u540d( \u76ee\u524d\u6700\u591a\u53ef\u7ed1\u5b9a 10 \u4e2a\u57df\u540d )\u3002\u7279\u522b\u5730\uff0c\u9700\u8981\u786e\u4fdd\u8be5\u57df\u540d\u5df2\u7ecf\u5907\u6848\u6210\u529f\uff0c\u5426\u5219\u65e0\u6cd5\u901a\u8fc7\u57df\u540d\u7ed1\u5b9a\u5ba1\u6838\u3002\u53e6\u5916\uff0c\u5ba1\u6838\u6210\u529f\u540e\u4f1a\u4ee5\u90ae\u4ef6\u5f62\u5f0f\u8fdb\u884c\u901a\u77e5\u3002 \u914d\u7f6e\u5f15\u5bfc 1.\u8fdb\u5165\u529f\u80fd\u914d\u7f6e\u754c\u9762\uff0c\u9009\u62e9 \u52a0\u901f\u57df\u540d \u6a21\u5757\uff0c\u70b9\u51fb \u57df\u540d\u7ed1\u5b9a \u6309\u94ae\uff0c\u6dfb\u52a0\u57df\u540d\u7ed1\u5b9a\u3002 2.\u9664\u5e38\u89c4\u5f62\u5f0f\u7684\u57df\u540d\u5916\uff08\u5305\u62ec\u9876\u7ea7\u57df\u540d\uff09\uff0c\u6211\u4eec\u8fd8\u652f\u6301\u6cdb\u57df\u540d\u7ed1\u5b9a\uff0c\u6bd4\u5982 *.yourdomain.com \uff1b\u7279\u522b\u5730\uff0c\u5176\u4e2d * \u6700\u591a\u652f\u6301\u5339\u914d 4 \u5c42\uff1a [v] *.yourdomain.com => foo.yourdomain.com [v] *.yourdomain.com => bar.yourdomain.com [v] *.yourdomain.com => foo.bar.yourdomain.com [v] *.yourdomain.com => foo.bar.baz.yourdomain.com [v] *.yourdomain.com => foo.bar.baz.qux.yourdomain.com [x] *.yourdomain.com => foo.bar.baz.qux.quxx.yourdomain.com [v] *.bar.yourdomain.com => foo.bar.yourdomain.com [v] *.bar.yourdomain.com => baz.foo.bar.yourdomain.com [x] *.bar.yourdomain.com => foo.bar.baz.yourdomain.com 3.\u6dfb\u52a0\u57df\u540d\u7ed1\u5b9a\u540e\uff0c\u9700\u8981\u5230\u57df\u540d\u670d\u52a1\u5546\u7684 DNS \u89e3\u6790\u7ba1\u7406\u4e2d\uff0c\u5c06\u57df\u540d\u7684 CNAME \u89e3\u6790\u5230 <bucket>.b0.aicdn.com \u3002 \u7b2c\u4e09\u6b65\uff1a\u67e5\u770b\u670d\u52a1\u72b6\u6001 \u4ee5\u4e0a\u6b65\u9aa4\u90fd\u914d\u7f6e\u5b8c\u6210\u4e4b\u540e\uff0c\u9700\u8981\u67e5\u770b\u6240\u521b\u5efa\u7684\u670d\u52a1\u4ee5\u53ca\u7ed1\u5b9a\u7684\u57df\u540d\u662f\u5426\u5904\u4e8e\u6b63\u5e38\u72b6\u6001\uff0c\u5426\u5219\u65e0\u6cd5\u6b63\u5e38\u63d0\u4f9b\u670d\u52a1\u3002 \u914d\u7f6e\u5f15\u5bfc 1.\u9996\u5148\u8fdb\u5165\u670d\u52a1\u7ba1\u7406\u5217\u8868\uff0c\u786e\u4fdd\u6240\u9009\u670d\u52a1\u5904\u4e8e \u670d\u52a1\u4e2d \u72b6\u6001\uff0c\u5982\u4e0b\u56fe\u6240\u793a\uff1a 2.\u9009\u62e9\u76f8\u5e94\u670d\u52a1\uff0c\u5728\u7ba1\u7406\u754c\u9762\uff0c\u70b9\u51fb \u914d\u7f6e \u6309\u94ae\u8fdb\u5165 \u52a0\u901f\u57df\u540d \u9009\u9879\uff0c\u67e5\u770b\u7ed1\u5b9a\u7684\u57df\u540d\u662f\u5426\u662f \u6b63\u5e38 \u72b6\u6001\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u7f13\u5b58\u914d\u7f6e \u00b6 \u7f13\u5b58\u914d\u7f6e\u662f\u6307\u53c8\u62cd\u4e91 CDN \u52a0\u901f\u8282\u70b9\uff08\u5305\u62ec\u8fb9\u7f18\u8282\u70b9\u548c\u4e2d\u5fc3\u8282\u70b9\uff09\u5728\u7f13\u5b58\u60a8\u7684\u8d44\u6e90\u6587\u4ef6\u65f6\u9075\u5faa\u7684\u4e00\u5957\u8fc7\u671f\u89c4\u5219\u3002\u5f53\u8d44\u6e90\u6587\u4ef6\u5904\u4e8e\u8fc7\u671f\u72b6\u6001\u65f6\uff0c\u6b64\u65f6\u7528\u6237\u8bf7\u6c42\u4f1a\u7531\u8282\u70b9\u53d1\u9001\u81f3\u6e90\u7ad9\uff0c\u91cd\u65b0\u83b7\u53d6\u8d44\u6e90\u5185\u5bb9\u5e76\u7f13\u5b58\u81f3\u8282\u70b9\uff0c\u540c\u65f6\u8fd4\u56de\u7ed9\u6700\u7ec8\u7528\u6237\uff1b\u5f53\u8d44\u6e90\u5185\u5bb9\u5904\u4e8e\u672a\u8fc7\u671f\u72b6\u6001\u65f6\uff0c\u60a8\u7684\u7528\u6237\u8bf7\u6c42\u5230\u8fbe\u8282\u70b9\u540e\uff0c\u4f1a\u7531\u8282\u70b9\u76f4\u63a5\u54cd\u5e94\u6700\u7ec8\u7528\u6237\u7684\u8bf7\u6c42\u3002\u5408\u7406\u7684\u914d\u7f6e\u8d44\u6e90\u6587\u4ef6\u7f13\u5b58\u65f6\u95f4\uff0c\u80fd\u591f\u6709\u6548\u7684\u63d0\u5347\u7f13\u5b58\u547d\u4e2d\u7387\uff0c\u964d\u4f4e\u56de\u6e90\u7387\uff0c\u8282\u7701\u60a8\u7684\u6e90\u7ad9\u5e26\u5bbd\u3002 \u914d\u7f6e\u5f15\u5bfc \u767b\u5f55 \u53c8\u62cd\u4e91\u7ba1\u7406\u63a7\u5236\u53f0 \uff0c\u9009\u62e9\u9700\u8981\u914d\u7f6e\u7684\u670d\u52a1\uff0c\u4f9d\u6b21\u8fdb\u5165\uff1a\u670d\u52a1 > \u529f\u80fd\u914d\u7f6e > \u57fa\u7840\u914d\u7f6e > \u7f13\u5b58\u914d\u7f6e\uff0c\u70b9\u51fb\u7ba1\u7406\u5373\u53ef\u5f00\u59cb\u914d\u7f6e\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u81ea\u5b9a\u4e49\u914d\u7f6e \u60a8\u53ef\u4ee5\u6839\u636e\u81ea\u8eab\u4e1a\u52a1\u9700\u6c42\uff0c\u5728\u914d\u7f6e\u754c\u9762\u7684\u53f3\u4e0a\u89d2\uff0c\u70b9\u51fb\u53f3\u4e0a\u89d2\u7684 \u6dfb\u52a0 \u6309\u94ae\u8fdb\u884c\u8d44\u6e90\u6587\u4ef6\u7f13\u5b58\u65f6\u95f4\u7684\u914d\u7f6e\uff0cCDN \u652f\u6301\u4e09\u79cd\u7ef4\u5ea6\u7684\u7f13\u5b58\u65f6\u95f4\u914d\u7f6e\u89c4\u5219\uff1a \u6839\u636e\u6587\u4ef6\u7c7b\u578b\u8bbe\u7f6e\u7f13\u5b58\u7b56\u7565 \u60a8\u53ef\u4ee5\u6839\u636e\u6a21\u677f\u586b\u5145\u6587\u4ef6\u7c7b\u578b\u540e\u7f00\uff0c\u6839\u636e\u6587\u4ef6\u7c7b\u578b\u6765\u8bbe\u7f6e\u7f13\u5b58\u65f6\u95f4\uff0c\u5982\u4e0b\u793a\u4f8b\u6240\u793a\uff1a /*.(txt,doc,wri,docs) \u7f13\u5b58\u65f6\u95f4 1 \u5929\uff1b \u8bbe\u7f6e\u5b8c\u6210\u540e\uff0c\u57df\u540d\u4e0b\u6240\u6709\u5339\u914d .txt .doc .wri .docs \u7684\u6587\u672c\u8d44\u6e90\uff0c\u5728\u8282\u70b9\u7684\u7f13\u5b58\u6709\u6548\u65f6\u95f4\u5747\u4e3a 1 \u5929\u3002 \u6839\u636e\u6587\u4ef6\u76ee\u5f55\u8bbe\u7f6e\u7f13\u5b58\u7b56\u7565 \u60a8\u53ef\u4ee5\u81ea\u5b9a\u4e49\u914d\u7f6e\u6587\u4ef6\u8def\u5f84\uff0c\u6839\u636e\u6587\u4ef6\u8def\u5f84\u6765\u8bbe\u7f6e\u7f13\u5b58\u65f6\u95f4\uff0c\u5982\u4e0b\u793a\u4f8b\u6240\u793a\uff1a /dir/* \u7f13\u5b58\u65f6\u95f4 12 \u5c0f\u65f6 \u5168\u5c40\u914d\u7f6e \u5168\u5c40\u7f13\u5b58\u7b56\u7565\u9002\u5408\u6e90\u7ad9\u5168\u662f\u9759\u6001\u8d44\u6e90\u7684\u5ba2\u6237\uff0c\u53ef\u4ee5\u9488\u5bf9\u8be5\u670d\u52a1\u4e00\u952e\u5f00\u542f\u914d\u7f6e\u7f13\u5b58\u65f6\u95f4\uff0c\u5f00\u542f\u8bf7\u8c28\u614e\u3002\u8be6\u7ec6\u914d\u7f6e\u53ef\u53c2\u7167\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u8bbe\u7f6e\u5b8c\u6210\u540e\uff0c\u8be5\u670d\u52a1\u4e0b\u6240\u6709\u57df\u540d\u5339\u914d\u7684\u8d44\u6e90\uff0c\u5728\u8282\u70b9\u7684\u7f13\u5b58\u6709\u6548\u65f6\u95f4\u5747\u4e3a 7 \u5929\u3002 \u6ce8\u610f\u4e8b\u9879\uff1a 1.\u5168\u5c40\u7f13\u5b58\u5728\u81ea\u5b9a\u4e49\u7f13\u5b58\u914d\u7f6e\u91cc\u9762\u7684\u4f18\u5148\u7ea7\u662f\u6700\u4f4e\u7684\uff0c\u4e14\u4f18\u5148\u7ea7\u4e0d\u53ef\u8c03\u8282\uff0c\u5982\u4e0b\u56fe\u6240\u793a\uff1a 2.\u5168\u5c40\u7f13\u5b58\u8bbe\u7f6e\u6709\u4e00\u4e2a\u5355\u72ec\u7684\u5f00\u5173\uff0c\u9700\u8981\u5f00\u542f\u4e4b\u540e\uff0c\u624d\u53ef\u4ee5\u8fdb\u884c\u914d\u7f6e \u9ed8\u8ba4\u6a21\u677f \u7279\u522b\u5730\uff0c\u6211\u4eec\u9488\u5bf9\u81ea\u5b9a\u4e49\u7f13\u5b58\u914d\u7f6e\uff0c\u9ed8\u8ba4\u89c4\u5212\u4e86\u6a21\u677f\uff0c\u5e76\u4e14\u9884\u8bbe\u4e86\u7f13\u5b58\u65f6\u95f4\uff0c\u60a8\u53ef\u4ee5\u6839\u636e\u5177\u4f53\u60c5\u51b5\u8fdb\u884c\u4fee\u6539\u3002\u5177\u4f53\u6a21\u677f\u5982\u4e0b\uff1a \u9996\u9875\uff1a/ \u7f13\u5b58 12 \u5c0f\u65f6\uff1b \u76ee\u5f55\u9875\uff1a/*/ \u7f13\u5b58 12 \u5c0f\u65f6\uff1b \u56fe\u7247\u6587\u4ef6\uff1a/*.(jpg,jpeg,png,bmp,gif,psd,ico,tga,imb,tiff) \u7f13\u5b58 7 \u5929\uff1b \u6587\u672c\u6587\u4ef6\uff1a/*.(txt,doc,wri,docs,css,js,dot,xml,log,bat,csv) \u7f13\u5b58 1 \u5929\uff1b \u97f3\u89c6\u9891\u6587\u4ef6\uff1a/*.(wav,mp3,wmv,rmi,aac,mp4,rmvb,mkv,avi,flv,swf,rm,mov,movie,qt) \u7f13\u5b58 7 \u5929\uff1b \u4e0b\u8f7d\u7c7b\u6587\u4ef6\uff1a/*.(exe,ios,apk,ipa,pxl,sis,cab,deb,rar,zip,gzip,tar,7z,bzip2,dmg,gz,wim,tbz,tpz,z,jar) \u7f13\u5b58 7 \u5929\uff1b \u4e0d\u7f13\u5b58\u914d\u7f6e \u6839\u636e\u4e1a\u52a1\u60c5\u51b5\uff0c\u53ef\u4ee5\u9488\u5bf9\u4e00\u4e9b\u52a8\u6001\u8d44\u6e90\u6587\u4ef6\uff08 \u4f8b\u5982\uff1aphp\u3001jsp\u3001asp\u3001do\u3001cgi\u3001action\u3001json\u7b49\uff09\u5f3a\u5236\u914d\u7f6e\u4e0d\u7f13\u5b58\uff0c \u8be6\u7ec6\u914d\u7f6e\u53ef\u53c2\u7167\u5982\u4e0b\u6240\u793a\uff1a /*.(asp,php,jsp,do,json) \u914d\u7f6e\u4e0d\u7f13\u5b58 \u9ed8\u8ba4\u7f13\u5b58\u7b56\u7565 \u5728\u6ca1\u6709\u5339\u914d\u5230\u81ea\u5b9a\u4e49\u7f13\u5b58\u89c4\u5219\u4e14\u6e90\u7ad9\u4e5f\u6ca1\u6709\u8fd4\u56de\u4efb\u4f55\u6709\u6548\u7f13\u5b58\u5934\u7684\u60c5\u51b5\u4e0b\uff0c\u6211\u4eec\u7684\u9ed8\u8ba4\u914d\u7f6e\u7b56\u7565\u5982\u4e0b\uff1a \u9488\u5bf9\u9759\u6001\u8d44\u6e90\uff0c\u6240\u6709\u6b63\u5e38\u72b6\u6001\u7801\uff08\u5927\u4e8e\u7b49\u4e8e 200 \u5c0f\u4e8e 400\uff09\u5747\u7f13\u5b58 8 \u5929\u3002\u7279\u522b\u5730\uff0c301 \u54cd\u5e94\u7f13\u5b58 2 \u5c0f\u65f6\uff0c302 \u54cd\u5e94\u7f13\u5b58 20 \u5206\u949f \u9488\u5bf9\u52a8\u6001\u8d44\u6e90\uff0c\u7a0b\u5e8f\u4f1a\u81ea\u52a8\u8bc6\u522b\uff0c\u5219\u4e0d\u8fdb\u884c\u7f13\u5b58 \u5bf9\u4e8e\u5176\u4ed6\u5927\u4e8e\u7b49\u4e8e 400 \u7684\u4e0d\u6b63\u5e38\u54cd\u5e94\uff0c\u5219\u4e0d\u8fdb\u884c\u7f13\u5b58 \u7f13\u5b58\u4f18\u5148\u7ea7 \u8bf7\u6839\u636e\u5177\u4f53\u7f13\u5b58\u4f18\u5148\u7ea7\u60c5\u51b5\u5408\u7406\u914d\u7f6e\u7f13\u5b58\u7b56\u7565\uff0c\u53c8\u62cd\u4e91 CDN \u52a0\u901f\u5e73\u53f0\u76ee\u524d\u7684\u7f13\u5b58\u4f18\u5148\u7ea7\u5982\u4e0b\uff1a \u4e0d\u7f13\u5b58\u914d\u7f6e\uff08\u540e\u53f0\u8bbe\u7f6e\uff09 > \u81ea\u5b9a\u4e49\u7f13\u5b58\u914d\u7f6e\uff08\u540e\u53f0\u914d\u7f6e\uff09 > \u6e90\u7ad9\u7f13\u5b58\u914d\u7f6e > \u9ed8\u8ba4\u7f13\u5b58\u7b56\u7565\u3002 \u6ce8\u610f\u4e8b\u9879\uff1a 1.\u6e90\u7ad9\u7f13\u5b58\u914d\u7f6e\uff0c\u6307 Cache-Control \u548c Expires \u8bf7\u6c42\u5934\u7684\u8bbe\u7f6e 2.\u4ee5\u4e0a\u7f13\u5b58\u914d\u7f6e\u4f18\u5148\u7ea7\u76ee\u524d\u4e0d\u652f\u6301\u987a\u5e8f\u8c03\u8282\uff0c\u540e\u7eed\u6211\u4eec\u4f1a\u8003\u8651\u652f\u6301 \u7279\u522b\u58f0\u660e \u9488\u5bf9\u4f7f\u7528\u53c8\u62cd\u4e91\u5b58\u50a8\u670d\u52a1\u7684\u5ba2\u6237\uff0c\u6211\u4eec\u6682\u65f6\u4e0d\u652f\u6301\u7f13\u5b58\u914d\u7f6e\u7684\u81ea\u5b9a\u4e49\u8bbe\u7f6e\uff0c\u6211\u4eec\u9ed8\u8ba4\u7ed9\u51fa\u4e86\u4e00\u4e2a\u9ed8\u8ba4\u7684\u7f13\u5b58\u914d\u7f6e\u89c4\u5219\uff0c\u5177\u4f53\u5982\u4e0b\uff1a \u5bf9\u4e8e\u6b63\u5e38\u7684\u72b6\u6001\u7801\uff08\u5927\u4e8e\u7b49\u4e8e 200 \u5c0f\u4e8e 400\uff09\uff1a8 \u5929 \u5bf9\u4e8e\u5176\u4ed6\u5927\u4e8e\u7b49\u4e8e 400 \u7684\u4e0d\u6b63\u5e38\u54cd\u5e94\u7f13\u5b58 5 \u5206\u949f \u52a8\u9759\u81ea\u52a8\u5206\u79bb \u9488\u5bf9 \u81ea\u4e3b\u6e90 \u7684 CDN \u670d\u52a1\u800c\u8a00\uff0c\u5f53\u6ca1\u6709\u5339\u914d\u5230\u81ea\u5b9a\u4e49\u7f13\u5b58\u89c4\u5219\u4e14\u6e90\u7ad9\u4e5f\u6ca1\u6709\u8fd4\u56de\u4efb\u4f55\u6709\u6548\u7684\u7f13\u5b58\u5934\u65f6\uff0c\u6211\u4eec\u5c31\u4f1a\u5bf9\u56de\u6e90\u5185\u5bb9\u8fdb\u884c\u52a8\u9759\u8bc6\u522b\u3002\u7279\u522b\u5730\uff0c\u6211\u4eec\u4f1a\u6839\u636e\u54cd\u5e94\u5934\u4e2d\u7684 Content-Type \u5b57\u6bb5\u548c URL \u4e2d\u7684\u6587\u4ef6\u540e\u7f00\u540d\u6765\u5224\u65ad\u662f\u5426\u662f\u9759\u6001\u5185\u5bb9\uff0c\u5176\u4e2d Content-Type \u5339\u914d\u4f18\u5148\u7ea7\u9ad8\u4e8e\u6587\u4ef6\u540e\u7f00\u540d\u3002 \u53c2\u8003\u5217\u8868 \u4ee5\u4e0b\u662f\u6211\u4eec\u7ef4\u62a4\u7684\u4e00\u4efd Content-Type \u548c\u6587\u4ef6\u540e\u7f00\u540d\u5217\u8868\uff0c\u82e5\u6ee1\u8db3\u5339\u914d\u6211\u4eec\u5c31\u8ba4\u4e3a\u662f\u9759\u6001\u5185\u5bb9\uff1a Content-Type \u5217\u8868 text/css text/javascript application/javascript application/x-javascript image/gif image/png image/jpeg image/webp image/tiff image/x-icon image/x-ms-bmp image/svg+xml application/font-woff application/java-archive application/msword application/pdf application/postscript application/zip application/octet-stream application/vnd.openxmlformats-officedocument.wordprocessingml.document application/vnd.openxmlformats-officedocument.spreadsheetml.sheet application/vnd.openxmlformats-officedocument.presentationml.presentation audio/mpeg audio/ogg audio/x-m4a video/mp4 video/x-flv video/x-m4v \u6587\u4ef6\u540e\u7f00\u540d\u5217\u8868 css js jpg jpeg gif ico png bmp pict csv doc pdf pls ppt tif tiff eps ejs swf midi mida ttf eot woff otf svg svgz webp docx xlsx xls pptx ps class jar bz2 bzip exe flv gzip rar rtf tgz gz txt zip mp3 mp4 ogg m4a m4v apk \u7f13\u5b58\u5237\u65b0 \u00b6 \u4e0a\u4e00\u4e2a\u7ae0\u8282\u6211\u4eec\u4ecb\u7ecd\u4e86\u7f13\u5b58\u914d\u7f6e\uff0c\u5f53 CDN \u7684\u8d44\u6e90\u6587\u4ef6\u7f13\u5b58\u8fc7\u671f\u4e4b\u540e\u4f1a\u56de\u6e90\u83b7\u53d6\u6587\u4ef6\u5e76\u7f13\u5b58\uff0c\u4f46\u662f\u8fd9\u662f\u4e00\u4e2a\u88ab\u52a8\u66f4\u65b0\u7684\u8fc7\u7a0b\uff0c\u8d44\u6e90\u66f4\u65b0\u53d7\u9650\u4e8e\u7f13\u5b58\u8fc7\u671f\u65f6\u95f4\u3002\u5f53\u6e90\u7ad9\u8d44\u6e90\u66f4\u65b0\u4e4b\u540e\u9700\u8981\u5feb\u901f\u56de\u6e90\u4e0b\u53d1\u5230 CDN \u8282\u70b9\u65f6\uff0c\u53ef\u4ee5\u4f7f\u7528\u7f13\u5b58\u5237\u65b0\u529f\u80fd\u6765\u5b9e\u73b0\uff0c\u8fd9\u662f\u4e00\u79cd\u4e3b\u52a8\u66f4\u65b0\u7684\u65b9\u5f0f\u3002 \u914d\u7f6e\u5f15\u5bfc \u767b\u5f55 \u53c8\u62cd\u4e91\u7ba1\u7406\u63a7\u5236\u53f0 \uff0c\u8fdb\u5165 \u5237\u65b0 \u680f\u76ee\uff0c\u60a8\u53ef\u4ee5\u9009\u62e9 URL \u5237\u65b0 \u3001 \u89c4\u5219\u5237\u65b0 \u6765\u5f3a\u5236\u56de\u6e90\u66f4\u65b0\u6587\u4ef6\u53ca\u76ee\u5f55\u3002\u60a8\u4e5f\u53ef\u4ee5\u5728 \u64cd\u4f5c\u8bb0\u5f55 \u9009\u9879\u67e5\u8be2\u5237\u65b0\u8fdb\u5ea6\u53ca\u76f8\u5173\u72b6\u6001\u3002 URL \u5237\u65b0 \u5f53\u6e90\u7ad9\u6709\u5c11\u91cf\u6587\u4ef6\u66f4\u65b0\u65f6\uff0c\u53ef\u4ee5\u4f7f\u7528 URL \u5237\u65b0 \u6765\u4e3b\u52a8\u5220\u9664 CDN \u8282\u70b9\u4e0a\u7684\u8d44\u6e90\u6587\u4ef6\u3002\u65b0\u7684\u8bf7\u6c42\u8fdb\u6765\u65f6\uff0cCDN \u8282\u70b9\u4f1a\u56de\u6e90\u83b7\u53d6\u6587\u4ef6\u5e76\u5c06\u65b0\u7684\u8d44\u6e90\u6587\u4ef6\u7f13\u5b58\u81f3 CDN \u8282\u70b9\uff0c\u6240\u4ee5\u8fd9\u662f\u4e00\u4e2a\u4e3b\u52a8\u66f4\u65b0\u7684\u8fc7\u7a0b\u3002\u64cd\u4f5c\u754c\u9762\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u6ce8\u610f\u4e8b\u9879\uff1a 1.\u6bcf\u884c\u4e00\u4e2aURL\u5730\u5740\uff0c\u6bcf\u4e2a URL \u5730\u5740\u4ee5 http://\u6216https://\u5f00\u5934\uff0c\u4f8b\u5982\uff1a http://example.com/image/test.jpg 2.\u6bcf\u6b21\u8f93\u5165\u4e0d\u8d85\u8fc7 50 \u4e2a\uff0c\u5237\u65b0\u4efb\u52a1\u5168\u7f51\u751f\u6548\u65f6\u95f4\u5927\u7ea6 5 \u5230 10 \u5206\u949f \u89c4\u5219\u5237\u65b0 \u5f53\u6e90\u7ad9\u6709\u9488\u5bf9\u8d44\u6e90\u8fdb\u884c\u6279\u91cf\u66f4\u65b0\u65f6\uff0c\u53ef\u4ee5\u901a\u8fc7 \u89c4\u5219\u5237\u65b0 \u6765\u5237\u65b0\u8282\u70b9\u7f13\u5b58\u6587\u4ef6\u3002\u5b9e\u9645\u4e0a\uff0c\u89c4\u5219\u5237\u65b0\u5e76\u6ca1\u6709\u5220\u9664\u8282\u70b9\u8d44\u6e90\u6587\u4ef6\uff0c\u89c4\u5219\u4e00\u65e6\u751f\u6548\u4e4b\u540e\uff0c\u7f13\u5b58\u5728 CDN \u8282\u70b9\u7684\u6587\u4ef6\u4f1a\u88ab\u81f4\u8fc7\u671f\uff0c\u65b0\u7684\u8bf7\u6c42\u4f1a\u56de\u6e90\u6821\u9a8c\u4e00\u6b21\uff0c\u5982\u679c\u6e90\u7ad9\u6587\u4ef6\u6709\u66f4\u65b0\uff0c\u5219\u5c06\u65b0\u7684\u6587\u4ef6\u54cd\u5e94\u7ed9\u6700\u7ec8\u7528\u6237\u5e76\u66ff\u6362\u8282\u70b9\u4e0a\u7684\u65e7\u6587\u4ef6\u3002\u64cd\u4f5c\u754c\u9762\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u89c4\u5219\u793a\u4f8b\uff1a http://example.com/image/\uff0a http://example.com/image/\uff0a.jpg http://example.com/image/\uff0a!upyun\uff08 \u9002\u7528\u4e8e\u81ea\u5b9a\u4e49\u7f29\u7565\u56fe\u7248\u672c \uff09 \u6ce8\u610f\u4e8b\u9879\uff1a 1.\u6bcf\u884c\u4e00\u4e2a\u8def\u5f84\u89c4\u5219\uff0c\u6bcf\u4e2a\u8def\u5f84\u89c4\u5219\u4ee5 http:// \u6216 https:// \u5f00\u5934\uff0c\u6bcf\u6b21\u8f93\u5165\u4e0d\u8d85\u8fc7 10 \u4e2a\uff0c\u4f8b\u5982\uff1a http://example.com/image/\uff0a 2.\u89c4\u5219\u5237\u65b0\u4e3b\u8981\u7528\u4e8e\u5bf9\u4f7f\u7528\u5ba2\u6237\u81ea\u4e3b\u6e90\u7ad9\u7684 CDN \u670d\u52a1\uff0c\u6267\u884c\u540e\u4f1a\u5728 10 \u5206\u949f\u5185\u751f\u6548 \u7279\u522b\u58f0\u660e\uff1a 1.\u5982\u60a8\u4f7f\u7528\u4e86\u53c8\u62cd\u4e91\u5bf9\u8c61\u5b58\u50a8\u670d\u52a1\u65f6\uff0c\u5982\u679c\u60a8\u901a\u8fc7 \u89c4\u5219\u5237\u65b0 \u6765\u5237\u65b0\u7f13\u5b58\u7684\u8bdd\uff0c\u57fa\u4e8e\u5e73\u53f0\u4fdd\u62a4\uff0c \u89c4\u5219\u5237\u65b0 \u751f\u6548\u65f6\u95f4\u662f 1 \u4e2a\u5c0f\u65f6\uff0c\u8bf7\u8c28\u614e\u64cd\u4f5c 2.\u7279\u522b\u5730\uff0c\u4f7f\u7528\u4e86\u53c8\u62cd\u4e91\u5bf9\u8c61\u5b58\u50a8\u670d\u52a1\u65f6\uff0c\u5b58\u50a8\u4e2d\u8d44\u6e90\u66f4\u65b0\uff08\u66ff\u6362\u6216\u5220\u9664\uff09\u65f6\u4f1a\u81ea\u52a8\u89e6\u53d1 CDN \u8282\u70b9\u5237\u65b0\u7f13\u5b58\uff0c\u4f1a\u5728 5 \u5206\u949f\u5185\u751f\u6548\uff0c\u6240\u4ee5\u60a8\u65e0\u9700\u8fdb\u884c\u624b\u52a8\u5237\u65b0\u64cd\u4f5c URL \u9884\u70ed \u5f53\u6e90\u7ad9\u6709\u65b0\u589e\u65b0\u7684\u8d44\u6e90\u6587\u4ef6\u65f6\uff0c\u53ef\u5c06\u8fd9\u4e9b\u65b0\u6587\u4ef6\u63d0\u524d\u7f13\u5b58\u81f3 CDN \u8282\u70b9\uff0c\u6700\u7ec8\u7528\u6237\u7b2c\u4e00\u6b21\u8bbf\u95ee\u8fd9\u4e9b\u8d44\u6e90\u6587\u4ef6\u65f6\uff0c CDN \u8282\u70b9\u4e0d\u9700\u8981\u56de\u6e90\u7ad9\u8bf7\u6c42\u6587\u4ef6\u8d44\u6e90\u4e86\u3002\u4e00\u65b9\u9762\u53ef\u51cf\u5c11\u7528\u6237\u7a81\u53d1\u8bbf\u95ee\u65f6\u7684\u56de\u6e90\u91cf\uff0c\u53e6\u4e00\u65b9\u9762\u53ef\u4ee5\u52a0\u5feb\u8d44\u6e90\u6587\u4ef6\u7684\u9996\u6b21\u8bbf\u95ee\u901f\u5ea6\u3002\u64cd\u4f5c\u754c\u9762\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u6ce8\u610f\u4e8b\u9879\uff1a\u5efa\u8bae\u4e0d\u8981\u540c\u65f6\u9884\u70ed\u592a\u591a\u8d44\u6e90\u6587\u4ef6\uff0c\u5426\u5219\u4f1a\u5bf9\u6e90\u7ad9\u9020\u6210\u56de\u6e90\u538b\u529b \u64cd\u4f5c\u8bb0\u5f55 \u8fdb\u884c URL \u5237\u65b0 \u3001 \u89c4\u5219\u5237\u65b0 \u3001 URL \u9884\u70ed \u64cd\u4f5c\u4e4b\u540e\uff0c\u754c\u9762\u7a97\u53e3\u4f1a\u7acb\u9a6c\u8df3\u81f3\u64cd\u4f5c\u8bb0\u5f55\u754c\u9762\uff0c\u60a8\u53ef\u4ee5\u5b9e\u65f6\u67e5\u770b\u5f53\u524d\u64cd\u4f5c\u7684\u8fdb\u5ea6\u53cd\u9988\u53ca\u76f8\u5173\u72b6\u6001\u3002\u60a8\u4e5f\u53ef\u4ee5\u67e5\u770b\u5386\u53f2\u64cd\u4f5c\u8bb0\u5f55\uff0c\u6211\u4eec\u9ed8\u8ba4\u4fdd\u7559\u4e86 3 \u5929\u7684\u6570\u636e\u3002 \u7edf\u8ba1\u5206\u6790 \u00b6 \u4e3a\u4e86\u66f4\u52a0\u900f\u660e\u7684\u5c55\u793a\u7ec8\u7aef\u7528\u6237\u8bbf\u95ee CDN \u4ee5\u53ca CDN \u56de\u6e90\u7684\u8bbf\u95ee\u60c5\u51b5\uff0c\u53c8\u62cd\u4e91 CDN \u670d\u52a1\u4ece\u5e26\u5bbd\u3001\u6d41\u91cf\u3001\u8bf7\u6c42\u6570\u7b49\u7ef4\u5ea6\u8fdb\u884c\u4e86\u6570\u636e\u7edf\u8ba1\u548c\u5206\u6790\uff0c\u65b9\u4fbf\u7528\u6237\u67e5\u770b\u548c\u5206\u6790\uff0c\u5177\u4f53\u529f\u80fd\u9879\u53c2\u89c1\u5982\u4e0b\u63cf\u8ff0\uff1a \u5e26\u5bbd\u53ca\u6d41\u91cf\u67e5\u8be2\uff1a\u60a8\u53ef\u4ee5\u67e5\u8be2\u6307\u5b9a\u65f6\u95f4\u533a\u95f4\u3001\u57df\u540d\u3001\u670d\u52a1\u540d\u3001\u5730\u533a\u3001\u8fd0\u8425\u5546\u7b49\u6761\u4ef6\u4e0b\uff0c\u5e26\u5bbd\u53ca\u6d41\u91cf\u7684\u66f2\u7ebf\u56fe\uff0c\u4ee5\u53ca\u8fd0\u8425\u5546\u3001\u5730\u533a\u5206\u5e03\u53ca\u6392\u540d\u60c5\u51b5\uff1b \u8bf7\u6c42\u6570\u67e5\u8be2\uff1a\u60a8\u53ef\u4ee5\u67e5\u8be2\u6307\u5b9a\u65f6\u95f4\u533a\u95f4\u3001\u57df\u540d\u3001\u670d\u52a1\u540d\u3001\u5730\u533a\u3001\u8fd0\u8425\u5546\u7b49\u6761\u4ef6\u4e0b\uff0c\u7528\u6237\u8bf7\u6c42\u6570\u7684\u66f2\u7ebf\u56fe\uff1b \u56de\u6e90\u7edf\u8ba1\uff1a\u60a8\u53ef\u4ee5\u67e5\u770b\u6307\u5b9a\u65f6\u95f4\u533a\u95f4\u3001\u57df\u540d\u3001\u670d\u52a1\u540d\u7b49\u6761\u4ef6\u4e0b\uff0c\u5e26\u5bbd\u53ca\u6d41\u91cf\u66f2\u7ebf\u4ee5\u53ca\u6e90\u7ad9\u6d41\u91cf\u5206\u5e03\uff1b \u67e5\u8be2\u660e\u7ec6\u6570\u636e\uff1a\u60a8\u53ef\u4ee5\u67e5\u8be2\u6307\u5b9a\u65f6\u95f4\u533a\u95f4\u3001\u57df\u540d\u3001\u670d\u52a1\u540d\u3001\u5730\u533a\u3001\u8fd0\u8425\u5546\u7b49\u6761\u4ef6\u4e0b\uff0c\u67e5\u8be2\u6bcf\u65e5\u7684\u6d41\u91cf\u3001\u8bf7\u6c42\u91cf\u3001\u9759\u6001\u8bf7\u6c42\u3001\u52a8\u6001\u8bf7\u6c42\u3001HTTPS \u8bf7\u6c42\u3001\u5cf0\u503c\u5e26\u5bbd\u3001\u5cf0\u503c\u5e26\u5bbd\u65f6\u95f4\u7b49\u660e\u7ec6\u6570\u636e\u3002 \u5bfc\u51fa Excel \u62a5\u8868\uff1a\u60a8\u53ef\u4ee5\u67e5\u8be2\u6307\u5b9a\u65f6\u95f4\u533a\u95f4\u3001\u57df\u540d\u3001\u670d\u52a1\u540d\u3001\u5730\u533a\u3001\u8fd0\u8425\u5546\u7b49\u6761\u4ef6\u4e0b\uff0c\u53ef\u4ee5\u5bfc\u51fa 5 \u5206\u949f\u7c92\u5ea6\u8be6\u7ec6\u7684\u8bf7\u6c42\u6570\u3001\u6d41\u91cf\u3001\u5e26\u5bbd\u3001\u5cf0\u503c\u5e26\u5bbd\u65f6\u95f4\u7b49\u8be6\u7ec6\u6570\u636e\u3002 \u914d\u7f6e\u5f15\u5bfc \u767b\u9646 \u53c8\u62cd\u4e91\u7ba1\u7406\u63a7\u5236\u53f0 \uff0c\u5728\u7f6e\u9876\u83dc\u5355\u8fdb\u5165 \u7edf\u8ba1 \u680f\u76ee\uff0c\u53ef\u67e5\u8be2\u5982\u4e0a\u7edf\u8ba1\u5206\u6790\u6570\u636e\uff1a \u67e5\u8be2\u793a\u4f8b\u4e00\uff1a\u67e5\u8be2\u5e26\u5bbd\u53ca\u8bf7\u6c42\u6570\u66f2\u7ebf\u56fe \u67e5\u8be2\u793a\u4f8b\u4e8c\uff1a\u67e5\u8be2\u6d41\u91cf\u5730\u533a\u53ca\u8fd0\u8425\u5546\u5206\u5e03\u53ca\u6392\u884c \u67e5\u8be2\u793a\u4f8b\u4e09\uff1a\u67e5\u8be2\u660e\u7ec6\u6570\u636e \u67e5\u8be2\u793a\u4f8b\u56db\uff1a\u56de\u6e90\u5e26\u5bbd\u53ca\u8bf7\u6c42 \u76f8\u5173\u8bf4\u660e\uff1a 1.\u4ee5\u5929\u4e3a\u5355\u4f4d\u67e5\u8be2\u6570\u636e\u65f6\uff0c\u60a8\u53ef\u4ee5\u67e5\u8be2 5 \u5206\u949f\u65f6\u95f4\u7c92\u5ea6\u7684\u6570\u636e 2.\u65f6\u95f4\u533a\u95f4\u4e3a\u5927\u4e8e\u7b49\u4e8e 2 \u5929\u65f6\uff0c\u60a8\u53ef\u4ee5\u67e5\u8be2 1 \u5c0f\u65f6\u65f6\u95f4\u7c92\u5ea6\u7684\u6570\u636e \u6027\u80fd\u76d1\u63a7 \u00b6 \u901a\u8fc7\u6027\u80fd\u76d1\u63a7\uff0c\u53ef\u4ee5\u7b80\u5355\u3001\u76f4\u89c2\u5730\u4e86\u89e3\u5230 CDN \u670d\u52a1\u8d28\u91cf\u60c5\u51b5\uff0c\u53ca\u65f6\u53d1\u73b0\u548c\u5b9a\u4f4d\u95ee\u9898\uff0c\u5e76\u534f\u52a9\u89e3\u51b3\u95ee\u9898\u3002\u5728\u754c\u9762\u7684\u4e3b\u7a97\u53e3\u4e2d\uff0c\u60a8\u53ef\u4ee5\u67e5\u8be2\u6307\u5b9a\u65f6\u95f4\u533a\u95f4\u3001\u57df\u540d\u3001\u670d\u52a1\u540d\u3001\u5730\u533a\u3001\u8fd0\u8425\u5546\u7b49\u6761\u4ef6\u4e0b\uff0c\u5bf9\u5e94\u670d\u52a1\u7684\u5065\u5eb7\u5ea6\u3001\u7f13\u5b58\u547d\u4e2d\u7387\u3001\u5e73\u5747\u4e0b\u8f7d\u901f\u5ea6\u7b49\u6570\u636e\u3002\u5177\u4f53\u529f\u80fd\u9879\u63cf\u8ff0\u5982\u4e0b\uff1a \u5065\u5eb7\u5ea6\uff1a\u7edf\u8ba1\u6240\u6709\u8bf7\u6c42\u7684 HTTP \u72b6\u6001\u7801\uff0c\u8ba1\u7b97 2xx \u548c 3xx \u8bf7\u6c42\u6b21\u6570\u6240\u5360\u7684\u6bd4\u4f8b \u7f13\u5b58\u547d\u4e2d\u7387\uff1a\u7edf\u8ba1\u6240\u6709\u8bf7\u6c42\u6570\u4e2d\uff0c\u547d\u4e2d\u7f13\u5b58\u7684\u8bf7\u6c42\u6570\u6240\u5360\u7684\u6bd4\u4f8b \u5e73\u5747\u4e0b\u8f7d\u901f\u5ea6\uff1a\u53ef\u4ee5\u6839\u636e\u5730\u533a\u548c\u8fd0\u8425\u5546\u6765\u533a\u5206\u8d44\u6e90\u6587\u4ef6\u4e0b\u8f7d\u901f\u5ea6\u548c\u8bf7\u6c42\u8017\u65f6 \u62e6\u622a\u653b\u51fb\u6b21\u6570\uff1a\u62e6\u622a\u7684\u8de8\u7ad9\u653b\u51fb\u3001SQL \u6ce8\u5165\u548c\u5176\u4ed6\u4ee3\u7801\u6267\u884c\u7b49\u591a\u79cd\u653b\u51fb\u7684\u6570\u91cf\uff08\u4ec5\u9650\u5f00\u542f WAF \u529f\u80fd\uff09 \u914d\u7f6e\u5f15\u5bfc \u767b\u9646 \u53c8\u62cd\u4e91\u7ba1\u7406\u63a7\u5236\u53f0 \uff0c\u5728\u7f6e\u9876\u83dc\u5355\u8fdb\u5165 \u76d1\u63a7 \u680f\u76ee\uff0c\u53ef\u67e5\u8be2\u5982\u4e0a\u6027\u80fd\u76d1\u6d4b\u6570\u636e\uff0c\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u67e5\u8be2\u793a\u4f8b\u4e00\uff1a\u670d\u52a1\u72b6\u51b5\u5386\u53f2\u6570\u636e\uff08\u5065\u5eb7\u5ea6\uff09 \u67e5\u8be2\u793a\u4f8b\u4e8c\uff1a\u5065\u5eb7\u5ea6\u8be6\u60c5\uff08\u56de\u6e90\u8bbf\u95ee\uff09 \u67e5\u8be2\u793a\u4f8b\u4e09\uff1a\u670d\u52a1\u72b6\u51b5\u5386\u53f2\u6570\u636e\uff08\u7f13\u5b58\u547d\u4e2d\u7387\uff09 \u67e5\u8be2\u793a\u4f8b\u56db\uff1a\u5730\u533a\u5e73\u5747\u4e0b\u8f7d\u901f\u5ea6 \u65e5\u5fd7\u5206\u6790 \u00b6 \u53ef\u6839\u636e\u65f6\u95f4\u7c92\u5ea6\uff0c\u67e5\u770b\u76f8\u5e94\u8bbf\u95ee\u57df\u540d\u4e0b\u70ed\u95e8\u6587\u4ef6\u3001\u70ed\u95e8\u5ba2\u6237\u7aef\u3001\u70ed\u95e8\u5f15\u7528\u6587\u4ef6\u3001\u8d44\u6e90\u72b6\u6001\u7801\u3001\u6587\u4ef6\u5927\u5c0f\u3001\u70ed\u95e8 IP \u7b49\u7ef4\u5ea6 top1000 \u7684\u7edf\u8ba1\u5206\u6790\u6570\u636e\u3002\u65e5\u5fd7\u5206\u6790\u662f\u4ee5\u5929\u4e3a\u7c92\u5ea6\u8fdb\u884c\u5206\u6790\u7684\uff0c\u7b2c\u4e8c\u5929\u51cc\u6668\u4f1a\u5f00\u59cb\u8fdb\u884c\u65e5\u5fd7\u5206\u6790\u5de5\u4f5c\uff0c\u6b63\u5e38\u60c5\u51b5\u4e0b\uff0c\u7b2c\u4e8c\u5929\u65e9\u6668 09:00:00 \u4e4b\u524d\u4f1a\u7edf\u8ba1\u8ba1\u7b97\u5b8c\u6bd5\u3002 \u914d\u7f6e\u5f15\u5bfc \u767b\u9646 \u53c8\u62cd\u4e91\u7ba1\u7406\u63a7\u5236\u53f0 \uff0c\u5728\u7f6e\u9876\u83dc\u5355\u8fdb\u5165 \u5de5\u5177\u7bb1 \uff0c\u627e\u5230 \u65e5\u5fd7\u7ba1\u7406 \u680f\u76ee\uff0c\u9009\u62e9 \u65e5\u5fd7\u5206\u6790 \u9009\u9879\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u65e5\u5fd7\u4e0b\u8f7d \u00b6 \u652f\u6301\u4ee5\u5c0f\u65f6\u7c92\u5ea6\u7684\u65e5\u5fd7\u4e0b\u8f7d\uff0c\u53ef\u6536\u96c6\u8be6\u7ec6\u7684\u7ec8\u7aef\u8bbf\u95ee\u65e5\u5fd7\uff1b\u65e5\u5fd7\u6587\u4ef6\u5ef6\u8fdf 1 \u5c0f\u65f6\uff0c\u53ef\u4ee5\u5728\u65e5\u5fd7\u7ba1\u7406\u6a21\u5757\u67e5\u8be2\u5230 1 \u5c0f\u65f6\u4e4b\u524d\u7684\u65e5\u5fd7\u6587\u4ef6\u3002 \u65e5\u5fd7\u547d\u540d\u89c4\u5219\uff1a\u65f6\u95f4\u6bb5-\u8bbf\u95ee\u57df\u540d-\u968f\u673a\u6570.gz\uff0c\u65e5\u5fd7\u547d\u540d\u793a\u4f8b\uff1a 10_00-impress-demo.b0.upaiyun.com-9571272666104702574.gz \u65e5\u5fd7\u6837\u4f8b 122.96.42.186 - - [13/Dec/2016:00:00:02 +0800] \"GET http://impress-demo.b0.upaiyun.com/kphone/icons/weihui_icon3.png?v=1.0 HTTP/1.1\" 200 1851 \"-\" \"Mozilla/4.0\" \"image/png\" 0 Hit \"C/200\" Static \"max-age=900\" 0.014 153.101.64.13 \u5b57\u6bb5\u8bf4\u660e \u5e8f\u53f7 \u5b57\u6bb5 \u793a\u4f8b\u503c 1 \u5ba2\u6237\u7aef IP \u5730\u5740 122.96.42.186 2 \u5ba2\u6237\u7aef\u7528\u6237\u540d - 3 \u8bbf\u95ee\u65f6\u95f4\u4e0e\u65f6\u533a [13/Dec/2016:00:00:02 +0800] 4 \u5ba2\u6237\u7aef\u8bf7\u6c42\u65b9\u6cd5 GET 5 \u8bf7\u6c42\u534f\u8bae HTTP 6 \u8bbf\u95ee\u57df\u540d impress-demo.b0.upaiyun.com 7 \u5ba2\u6237\u7aef\u8bf7\u6c42 URI /kphone/icons/weihui_icon3.png 8 \u8bf7\u6c42\u53c2\u6570 v=1.0 9 \u8bf7\u6c42\u534f\u8bae\u7248\u672c\u4fe1\u606f HTTP/1.1 10 \u54cd\u5e94\u72b6\u6001\u7801 200 11 \u53d1\u9001\u7ed9\u5ba2\u6237\u7aef\u7684\u5b57\u8282\u6570 1851 12 Referer \u8bf7\u6c42\u5934 - 13 User-Agent \u5934 Mozilla/4.0 14 \u5185\u5bb9\u7c7b\u578b image/png 15 \u8bf7\u6c42\u5185\u5bb9\u5927\u5c0f 0 16 \u7f13\u5b58\u547d\u4e2d\u72b6\u6001 Hit 17 \u6e90\u7ad9\u7c7b\u578b (U: \u4e91\u5b58\u50a8 C\uff1a\u81ea\u4e3b\u6e90)/\u72b6\u6001\u7801 C/200 18 \u52a8\u6001\u8bf7\u6c42\u6807\u8bb0 Static 19 \u7f13\u5b58\u65f6\u95f4 max-age=900 20 \u8bf7\u6c42\u5904\u7406\u65f6\u95f4\uff08\u5355\u4f4ds\uff09 0.014 21 CDN \u8fb9\u7f18\u8282\u70b9 IP 153.101.64.13 \u914d\u7f6e\u5f15\u5bfc \u767b\u9646 \u53c8\u62cd\u4e91\u7ba1\u7406\u63a7\u5236\u53f0 \uff0c\u5728\u7f6e\u9876\u83dc\u5355\u8fdb\u5165 \u5de5\u5177\u7bb1 \uff0c\u627e\u5230 \u65e5\u5fd7\u7ba1\u7406 \u680f\u76ee\uff0c\u9009\u62e9 \u65e5\u5fd7\u4e0b\u8f7d \u9009\u9879\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u5173\u4e8e\u65e5\u5fd7\u5206\u6790\u548c\u4e0b\u8f7d\u89c6\u9891\u6559\u7a0b\u8bf7\u70b9\u51fb \u65e5\u5fd7\u7ba1\u7406\u89c6\u9891\u6559\u7a0b \u3002 \u5982\u6709\u7591\u95ee\u8bf7 \u8054\u7cfb\u6211\u4eec","title":"Basic"},{"location":"cdn/basic/#_1","text":"\u7b2c\u4e00\u6b65\uff1a\u9009\u62e9\u670d\u52a1\u7c7b\u578b \u767b\u5f55 \u53c8\u62cd\u4e91\u7ba1\u7406\u63a7\u5236\u53f0 \uff0c\u5728\u63a7\u5236\u53f0\u9875\u9762\uff0c\u5206\u522b\u70b9\u51fb\u53f3\u4e0a\u89d2\u7684 \u670d\u52a1 \u3001 \u521b\u5efa\u670d\u52a1 \u7b49\u6309\u94ae\uff0c\u9009\u62e9\u670d\u52a1\u7c7b\u578b\u3002\u6839\u636e\u4e1a\u52a1\u60c5\u51b5\uff0c\u53ef\u9009\u62e9 \u5168\u7f51\u52a0\u901f\u670d\u52a1 \u6216 \u76f4\u64ad\u52a0\u901f\u670d\u52a1 \u3002\u5177\u4f53\u64cd\u4f5c\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u7b2c\u4e8c\u6b65\uff1a\u586b\u5199\u914d\u7f6e\u4fe1\u606f \u9009\u62e9\u670d\u52a1\u7c7b\u578b\u4e4b\u540e\uff0c\u5219\u8fdb\u5165\u670d\u52a1\u521b\u5efa\u9636\u6bb5\uff0c\u9700\u8981\u8fdb\u884c\u6e90\u7ad9\u7c7b\u578b\u3001\u56de\u6e90\u914d\u7f6e\u3001\u64cd\u4f5c\u5458\u8bbe\u7f6e\u7b49\u6b65\u9aa4\u3002\u5177\u4f53\u914d\u7f6e\u754c\u9762\u53ef\u53c2\u89c1\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u521b\u5efa\u670d\u52a1\uff1a \u521b\u5efa\u64cd\u4f5c\u5458\uff1a \u6e90\u7ad9\u7c7b\u578b \u76ee\u524d\u6e90\u7ad9\u7c7b\u578b\u5305\u62ec \u53c8\u62cd\u4e91 \u548c \u81ea\u4e3b\u6e90 \u3002\u5176\u4e2d \u53c8\u62cd\u4e91 \u8868\u793a\u8d44\u6e90\u90fd\u5b58\u653e\u5728\u53c8\u62cd\u4e91\u5206\u5e03\u5f0f\u5bf9\u8c61\u5b58\u50a8\u670d\u52a1\u4e0a\uff0c\u540c\u65f6\u9644\u52a0\u4e86 CDN \u670d\u52a1\u7684\u652f\u6301\uff0c\u56e0\u6b64\u4e5f\u62e5\u6709\u7edd\u5927\u591a\u6570\u53c8\u62cd\u4e91 CDN \u7684\u529f\u80fd\uff1b\u800c \u81ea\u4e3b\u6e90 \u5219\u8868\u793a\u8d44\u6e90\u90fd\u5b58\u653e\u5728\u5ba2\u6237\u81ea\u5df1\u7684\u6e90\u7ad9\u6216\u7b2c\u4e09\u65b9\u4e91\u5b58\u50a8\u670d\u52a1\u4e0a\uff0c\u4ec5\u4f7f\u7528\u53c8\u62cd\u4e91 CDN \u670d\u52a1\u3002 \u914d\u7f6e\u5f15\u5bfc \u7cfb\u7edf\u9ed8\u8ba4\u4f1a\u9009\u62e9 \u81ea\u4e3b\u6e90 \uff0c\u8bf7\u6839\u636e\u5177\u4f53\u4e1a\u52a1\u9700\u6c42\u8fdb\u884c\u9009\u62e9\u3002\u914d\u7f6e\u754c\u9762\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u5982\u679c\u60a8\u7684\u8d44\u6e90\u90fd\u6258\u7ba1\u5728\u7b2c\u4e09\u65b9\u4e91\u5b58\u50a8\u5e73\u53f0\u6216\u8005\u81ea\u6709\u6e90\u4e0a\uff0c\u8bf7\u9009\u62e9 \u81ea\u4e3b\u6e90 \u5982\u679c\u60a8\u51c6\u5907\u628a\u9759\u6001\u8d44\u6e90\u90fd\u6258\u7ba1\u5728\u53c8\u62cd\u4e91\u5bf9\u8c61\u5b58\u50a8\u5e73\u53f0\u4e0a\uff0c\u8bf7\u9009\u62e9 \u53c8\u62cd\u4e91 \u56de\u6e90\u914d\u7f6e \u56de\u6e90\u914d\u7f6e\u662f CDN \u670d\u52a1\u521b\u5efa\u6700\u91cd\u8981\u7684\u73af\u8282\uff0c\u8bf7\u8c28\u614e\u914d\u7f6e\u3002\u4e5f\u53ef\u53bb\u529f\u80fd\u914d\u7f6e\u754c\u9762\u8fdb\u884c\u8bbe\u7f6e\uff0c\u4f9d\u6b21\u8fdb\u5165\uff1a\u670d\u52a1 > \u529f\u80fd\u914d\u7f6e > \u57fa\u7840\u914d\u7f6e > \u56de\u6e90\u914d\u7f6e\uff0c\u70b9\u51fb\u7ba1\u7406\u6309\u94ae\u5373\u53ef\u914d\u7f6e\u3002\u5982\u4e0b\u622a\u56fe\u6240\u793a\uff1a \u56de\u6e90 Host \u8be5\u914d\u7f6e\u662f\u6307 CDN \u8282\u70b9\u56de\u6e90\u8fc7\u7a0b\u4e2d\u6240\u9700\u8bbf\u95ee\u7684\u6e90\u7ad9\u670d\u52a1\u5668\u4e0a\u7684\u57df\u540d\u3002CDN \u8282\u70b9\u56de\u6e90\u65f6\u4f1a\u5728 HTTP \u8bf7\u6c42\u5934\u4e2d Host \u5b57\u6bb5\u91cc\u586b\u5199\u8be5\u57df\u540d\uff0c\u4ee5\u652f\u6301\u6e90\u670d\u52a1\u5668\u53ef\u901a\u8fc7\u6b64 Host \u505a\u7684\u7279\u6b8a\u5904\u7406\u903b\u8f91\uff0c\u4e00\u822c\u662f\u57df\u540d\u5f62\u5f0f\u7684\u5b57\u7b26\u4e32\uff0c\u5f53\u7136\u4e5f\u652f\u6301\u4efb\u610f\u5b57\u7b26\u4e32\u5f62\u5f0f\u3002 \u914d\u7f6e\u5f15\u5bfc 1.\u56de\u6e90 Host \u4e3a\u53ef\u9009\u914d\u7f6e\u9879\uff0c\u7279\u522b\u5730\uff0c\u5982\u679c\u8be5\u81ea\u5b9a\u4e49\u503c\u4e3a\u7a7a\uff0c\u5219\u8be5\u670d\u52a1\u4e0b\u7684\u52a0\u901f\u57df\u540d\u5c31\u4f1a\u4f5c\u4e3a\u56de\u6e90HOST 2.\u81ea\u5b9a\u4e49\uff1a\u53ef\u4ee5\u6839\u636e\u9700\u8981\u4fee\u6539\u56de\u6e90 Host\uff0c\u8bf7\u4fdd\u8bc1\u8be5\u57df\u540d\u53ef\u4ee5\u6b63\u786e\u8bbf\u95ee\uff0c\u5426\u5219\u4f1a\u51fa\u73b0\u56de\u6e90\u5931\u8d25\u7684\u60c5\u51b5 \u56de\u6e90\u534f\u8bae \u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u6211\u4eec\u90fd\u4f1a\u4ee5 HTTP \u534f\u8bae\u56de\u6e90\uff0c\u60a8\u4e5f\u53ef\u4ee5\u91c7\u7528 HTTPS \u534f\u8bae\u56de\u6e90\u3002\u53e6\u5916\u4e00\u4e2a\u7279\u522b\u7684\u9009\u9879\u662f\u534f\u8bae\u8ddf\u968f\uff0c\u5f53\u542f\u7528\u8be5\u7279\u6027\u65f6\uff0c\u56de\u6e90\u534f\u8bae\u59cb\u7ec8\u4f1a\u548c\u5ba2\u6237\u7aef\u8bbf\u95ee CDN \u7684\u534f\u8bae\u4fdd\u6301\u4e00\u81f4\uff0c\u5373\u5ba2\u6237\u7aef\u7528 HTTP \u534f\u8bae\u8bbf\u95ee\u6211\u4eec CDN\uff0c\u90a3\u4e48\u56de\u6e90\u65f6\u6211\u4eec\u4e5f\u4f1a\u7528 HTTP \u534f\u8bae\u8fdb\u884c\u56de\u6e90\uff0c\u540c\u6837\uff0c\u82e5\u91c7\u7528 HTTPS \u8bbf\u95ee\uff0c\u90a3\u4e48\u56de\u6e90\u4e5f\u662f HTTPS\u3002 \u914d\u7f6e\u5f15\u5bfc \u5f53\u6211\u4eec\u9009\u62e9 HTTP \u534f\u8bae\u56de\u6e90\u65f6\uff0c\u56de\u6e90\u5730\u5740\u7684\u7aef\u53e3\u53f7\u9ed8\u8ba4\u4e3a 80\uff0c\u800c\u9009\u62e9 HTTPS \u534f\u8bae\u56de\u6e90\u65f6\uff0c\u7aef\u53e3\u53f7\u9ed8\u8ba4\u4e3a 443\u3002\u5f53\u7136\uff0c\u4f60\u4e5f\u53ef\u4ee5\u624b\u52a8\u6307\u5b9a\u7279\u6b8a\u7684\u7aef\u53e3\u53f7\uff0c\u4f8b\u5982 8080 \u6216 8443\u3002 \u6ce8\u610f\u4e8b\u9879 \u9009\u62e9 \u534f\u8bae\u8ddf\u968f \u540e\uff0c\u56de\u6e90\u5730\u5740\u7684\u7aef\u53e3\u53f7\u914d\u7f6e\u5c06\u4ec5\u4f5c\u7528\u4e8e\u56de\u6e90\u534f\u8bae\u4e3a HTTP \u7684\u60c5\u51b5\uff0c\u9ed8\u8ba4 80\uff0c\u5f53\u7136\u4f60\u4e5f\u53ef\u4ee5\u81ea\u5b9a\u4e49\u4e3a\u5176\u4ed6\u503c\uff0c\u800c\u56de\u6e90\u534f\u8bae\u4e3a HTTPS \u65f6\u7aef\u53e3\u53f7\u5219\u59cb\u7ec8\u56fa\u5b9a\u4e3a 443\uff0c\u4e14\u76ee\u524d\u6682\u65f6\u4e0d\u652f\u6301\u4fee\u6539\u6b64\u56fa\u5b9a\u503c\u3002\u56e0\u6b64\uff0c\u82e5\u4e4b\u524d\u9009\u62e9 HTTPS \u534f\u8bae\u56de\u6e90 \u4e14\u81ea\u5b9a\u4e49\u8bbe\u7f6e\u8fc7\u7aef\u53e3\u53f7\u7684\u7528\u6237\u9700\u8981\u6ce8\u610f\uff0c\u5207\u6362\u5230 \u534f\u8bae\u8ddf\u968f \u6a21\u5f0f\u4e0b\u65f6\uff0c\u81ea\u5b9a\u4e49\u7684\u7aef\u53e3\u53f7\u5c06\u4ec5\u4f5c\u7528\u4e8e\u56de\u6e90\u534f\u8bae\u4e3a HTTP \u7684\u60c5\u51b5\u3002 \u7ebf\u8def\u914d\u7f6e \u7ebf\u8def\u914d\u7f6e\u5305\u62ec\u56de\u6e90\u5730\u5740\u3001\u7aef\u53e3\u53f7\u3001\u4e3b\u5907\u7ebf\u8def\u3001\u8f6e\u8be2\u6743\u91cd\u3001\u6700\u5927\u5931\u8d25\u6b21\u6570\u3001\u9759\u9ed8\u65f6\u95f4\u7b49\u9ad8\u7ea7\u8bbe\u7f6e\u3002\u5176\u4e2d\u56de\u6e90\u5730\u5740\u5219\u8868\u793a\u6e90\u7ad9\u5b9e\u9645\u53ef\u8bbf\u95ee\u7684\u7f51\u7edc\u5730\u5740\uff0c\u53ef\u586b IP \u5730\u5740\u6216\u57df\u540d\u5730\u5740\uff0c\u5982\u679c\u662f\u57df\u540d\u5730\u5740\uff0c\u90a3\u4e48 CDN \u5728\u56de\u6e90\u65f6\u4f1a\u5bf9\u8be5\u57df\u540d\u5730\u5740\u8fdb\u884c DNS \u89e3\u6790\uff0c\u7136\u540e\u9488\u5bf9\u89e3\u6790\u51fa\u6765\u7684 IP \u5730\u5740\u8fdb\u884c\u8bbf\u95ee\uff0c\u56e0\u6b64\u82e5\u89e3\u6790\u5931\u8d25\u5c06\u4f1a\u5bfc\u81f4\u56de\u6e90\u5f02\u5e38\u3002 \u914d\u7f6e\u5f15\u5bfc \u914d\u7f6e\u754c\u9762\u5982\u4e0b\u622a\u56fe\u6240\u793a\uff0c\u4ee5\u4e0b\u5c06\u91cd\u70b9\u4ecb\u7ecd\u4e3b\u5907\u7ebf\u8def\u3001\u8f6e\u8be2\u6743\u91cd\u3001\u6700\u5927\u5931\u8d25\u6b21\u6570\u548c\u9759\u9ed8\u65f6\u95f4\u3002 \u4e3b\u3001\u5907\u7ebf\u8def \u56de\u6e90\u5730\u5740\u914d\u7f6e\u4e2d\u9664\u4e86\u9ed8\u8ba4\u7684 \u4e3b\u7ebf\u8def \u5916\uff0c\u6211\u4eec\u8fd8\u652f\u6301 \u5907\u4efd\u7ebf\u8def \u7684\u914d\u7f6e\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c \u4e3b\u7ebf\u8def \u591a\u4e2a\u56de\u6e90\u5730\u5740\u4f1a\u4ee5 RR \u8f6e\u8be2\u65b9\u5f0f\u8fdb\u884c\u8c03\u5ea6\uff0c\u5f53\u4e14\u4ec5\u5f53\u6240\u6709 \u4e3b\u7ebf\u8def \u56de\u6e90\u5730\u5740\u5747\u4e0d\u53ef\u8fbe\u65f6\uff0c\u6b64\u65f6\u6211\u4eec\u5c06\u4f7f\u7528 \u5907\u4efd\u7ebf\u8def \u8fdb\u884c\u8f6c\u53d1\uff0c\u82e5 \u5907\u4efd\u7ebf\u8def \u6709\u591a\u4e2a\u56de\u6e90\u5730\u5740\uff0c\u90a3\u4e48\u8d1f\u8f7d\u5747\u8861\u65b9\u5f0f\u4e5f\u548c \u4e3b\u7ebf\u8def \u4e00\u6837\uff0c\u4ee5 Round-Robin \u8f6e\u8be2\uff08\u8be6\u60c5\u8bf7\u70b9\u51fb \u94fe\u63a5 \uff09\u65b9\u5f0f\u8fdb\u884c\u8c03\u5ea6\u3002 \u8f6e\u8be2\u6743\u91cd \u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u8f6e\u8be2\u6743\u91cd\u90fd\u4e3a 1\uff0c\u8868\u793a\u6240\u6709\u56de\u6e90\u5730\u5740\u8f6e\u8be2\u5230\u7684\u6982\u7387\u5747\u7b49\u3002\u5f53\u7136\u4e5f\u53ef\u4ee5\u5982\u4e0a\u56fe\u90a3\u6837\u81ea\u5b9a\u4e49\u8f6e\u8be2\u6743\u91cd\uff0c\u6211\u4eec\u770b\u5230\u4e3b\u7ebf\u8def\u4e24\u4e2a\u56de\u6e90\u5730\u5740\u6743\u91cd\u5206\u522b\u662f 1 \u548c 2\uff0c\u6b64\u65f6\u4e3b\u7ebf\u8def\u96c6\u7fa4\u5728\u8f6e\u8be2\u8c03\u5ea6\u4e2d\u4f1a\u6709 1/3 \u7684\u6982\u7387\u56de 192.168.11.1:80 \u8fd9\u4e2a\u5730\u5740\uff0c\u800c\u56de 192.168.11.2:80 \u8fd9\u4e2a\u5730\u5740\u7684\u6982\u7387\u5219\u4e3a 2/3\u3002\u5373\u5f53\u524d\u56de\u6e90\u5730\u5740\u8f6e\u8be2\u5230\u7684\u6982\u7387\u53ef\u6309\uff08\u5f53\u524d\u8282\u70b9\u6743\u91cd/\u96c6\u7fa4\u6240\u6709\u8282\u70b9\u6743\u91cd\u4e4b\u548c\uff09\u8fd9\u4e2a\u516c\u5f0f\u8ba1\u7b97\u3002 \u6700\u5927\u5931\u8d25\u6b21\u6570\u548c\u9759\u9ed8\u65f6\u95f4 \u8868\u793a\u5728\u4e00\u4e2a \u9759\u9ed8\u65f6\u95f4 (fail_timeout) \u5185\u5982\u679c\u5bf9\u5e94\u6e90\u7ad9\u7684\u5f02\u5e38\u6b21\u6570\u7d2f\u8ba1\u8fbe\u5230\u5f53\u524d\u8bbe\u7f6e\u7684 \u6700\u5927\u5931\u8d25\u6b21\u6570 (max_fails) \uff0c\u90a3\u4e48\u5728\u4e0b\u4e00\u4e2a \u9759\u9ed8\u65f6\u95f4 (fail_timeout) \u5185\uff0cCDN \u5c31\u4f1a\u8ba4\u4e3a\u8fd9\u4e2a\u6e90\u7ad9\u5b95\u673a\u4e86\uff0c\u5373\u5728\u8fd9\u6bb5\u65f6\u95f4\u5185\u4e0d\u4f1a\u518d\u5c06\u8bf7\u6c42\u8f6c\u53d1\u7ed9\u5b83\u3002\u7279\u522b\u5730\uff0c\u5f53 \u6700\u5927\u5931\u8d25\u6b21\u6570 (max_fails) \u5176\u503c\u4e3a 0 \u65f6\uff0c\u8868\u793a\u4e0d\u4f1a\u8fdb\u884c\u5931\u8d25\u7d2f\u8ba1\uff0c \u9759\u9ed8\u65f6\u95f4 (fails_timeout) \u4e5f\u540c\u65f6\u5931\u6548\u3002 \u5408\u7406\u8bbe\u7f6e\u6700\u5927\u5931\u8d25\u6b21\u6570\u548c\u9759\u9ed8\u65f6\u95f4\uff0c\u6709\u52a9\u4e8e\u5728\u6e90\u7ad9\u5f02\u5e38\u7684\u60c5\u51b5\u4e0b\u6700\u5927\u7a0b\u5ea6\u51cf\u5c11\u5bf9\u7ebf\u4e0a\u8bf7\u6c42\u7684\u5f71\u54cd\u3002\u8fd9\u91cc\u5b9e\u9645\u4e0a\u8ddf Nginx \u6838\u5fc3\u7684 upstream \u6a21\u5757\u5b9e\u73b0\u673a\u5236\u7c7b\u4f3c\uff0c\u8fdb\u4e00\u6b65\u4e86\u89e3\u53ef\u53c2\u8003 \u94fe\u63a5 \u3002 \u521b\u5efa\u64cd\u4f5c\u5458 \u5f53\u60a8\u5728\u521b\u5efa\u670d\u52a1\u7684\u8fc7\u7a0b\u4e2d\uff0c\u6e90\u7ad9\u7c7b\u578b\u9009\u62e9\u4e3a \u53c8\u62cd\u4e91 \u65f6 \uff0c\u5219\u521b\u5efa\u548c\u6388\u6743\u64cd\u4f5c\u5458\u662f\u4e00\u4e2a\u5fc5\u987b\u7684\u6b65\u9aa4\u3002\u60a8\u53ef\u4ee5\u521b\u5efa\u4e00\u5230\u591a\u4e2a\u64cd\u4f5c\u5458\uff0c\u6ee1\u8db3\u4e0d\u540c\u7684\u7ba1\u7406\u9700\u6c42\uff0c\u53ef\u7528\u4e8e\u5bf9\u5b58\u50a8\u5728\u53c8\u62cd\u4e91\u7684\u8d44\u6e90\u8fdb\u884c API \u4e0a\u4f20\u3001\u5220\u9664\u65f6\u7684\u8ba4\u8bc1\u6388\u6743\u548c FTP \u767b\u5f55\u7b49\u3002 \u914d\u7f6e\u5f15\u5bfc \u60a8\u53ef\u4ee5\u9009\u62e9\u65b0\u521b\u5efa\u4e00\u4e2a\u64cd\u4f5c\u5458\uff0c\u4e5f\u53ef\u4ee5\u6388\u6743\u5df2\u6709\u64cd\u4f5c\u5458\uff0c\u5e76\u4e14\u53ef\u4ee5\u9488\u5bf9\u6743\u9650\u8fdb\u884c\u8bbe\u7f6e\uff0c\u5305\u62ec\u53ef\u8bfb\u53d6\u3001\u53ef\u5199\u5165\u3001\u53ef\u5220\u9664\u3002\u914d\u7f6e\u754c\u9762\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u4f60\u4e5f\u53ef\u4ee5\u5728\u7ba1\u7406\u540e\u53f0\u53f3\u4e0a\u89d2\u7684\u5e10\u53f7\u4e0b\u62c9\u83dc\u5355\u4e2d\u9009\u62e9 \u8d26\u6237\u7ba1\u7406\uff0d> \u64cd\u4f5c\u5458\u7ba1\u7406 -> \u7f16\u8f91 \u8fdb\u884c\u8bbe\u7f6e\u3002 \u57df\u540d\u7ed1\u5b9a \u9488\u5bf9\u4e00\u4e2a CDN \u670d\u52a1\uff0c\u5047\u5982\u56de\u6e90\u5730\u5740\u76f8\u540c\uff0c\u53ef\u4ee5\u7ed1\u5b9a\u591a\u4e2a\u81ea\u5b9a\u4e49\u57df\u540d( \u76ee\u524d\u6700\u591a\u53ef\u7ed1\u5b9a 10 \u4e2a\u57df\u540d )\u3002\u7279\u522b\u5730\uff0c\u9700\u8981\u786e\u4fdd\u8be5\u57df\u540d\u5df2\u7ecf\u5907\u6848\u6210\u529f\uff0c\u5426\u5219\u65e0\u6cd5\u901a\u8fc7\u57df\u540d\u7ed1\u5b9a\u5ba1\u6838\u3002\u53e6\u5916\uff0c\u5ba1\u6838\u6210\u529f\u540e\u4f1a\u4ee5\u90ae\u4ef6\u5f62\u5f0f\u8fdb\u884c\u901a\u77e5\u3002 \u914d\u7f6e\u5f15\u5bfc 1.\u8fdb\u5165\u529f\u80fd\u914d\u7f6e\u754c\u9762\uff0c\u9009\u62e9 \u52a0\u901f\u57df\u540d \u6a21\u5757\uff0c\u70b9\u51fb \u57df\u540d\u7ed1\u5b9a \u6309\u94ae\uff0c\u6dfb\u52a0\u57df\u540d\u7ed1\u5b9a\u3002 2.\u9664\u5e38\u89c4\u5f62\u5f0f\u7684\u57df\u540d\u5916\uff08\u5305\u62ec\u9876\u7ea7\u57df\u540d\uff09\uff0c\u6211\u4eec\u8fd8\u652f\u6301\u6cdb\u57df\u540d\u7ed1\u5b9a\uff0c\u6bd4\u5982 *.yourdomain.com \uff1b\u7279\u522b\u5730\uff0c\u5176\u4e2d * \u6700\u591a\u652f\u6301\u5339\u914d 4 \u5c42\uff1a [v] *.yourdomain.com => foo.yourdomain.com [v] *.yourdomain.com => bar.yourdomain.com [v] *.yourdomain.com => foo.bar.yourdomain.com [v] *.yourdomain.com => foo.bar.baz.yourdomain.com [v] *.yourdomain.com => foo.bar.baz.qux.yourdomain.com [x] *.yourdomain.com => foo.bar.baz.qux.quxx.yourdomain.com [v] *.bar.yourdomain.com => foo.bar.yourdomain.com [v] *.bar.yourdomain.com => baz.foo.bar.yourdomain.com [x] *.bar.yourdomain.com => foo.bar.baz.yourdomain.com 3.\u6dfb\u52a0\u57df\u540d\u7ed1\u5b9a\u540e\uff0c\u9700\u8981\u5230\u57df\u540d\u670d\u52a1\u5546\u7684 DNS \u89e3\u6790\u7ba1\u7406\u4e2d\uff0c\u5c06\u57df\u540d\u7684 CNAME \u89e3\u6790\u5230 <bucket>.b0.aicdn.com \u3002 \u7b2c\u4e09\u6b65\uff1a\u67e5\u770b\u670d\u52a1\u72b6\u6001 \u4ee5\u4e0a\u6b65\u9aa4\u90fd\u914d\u7f6e\u5b8c\u6210\u4e4b\u540e\uff0c\u9700\u8981\u67e5\u770b\u6240\u521b\u5efa\u7684\u670d\u52a1\u4ee5\u53ca\u7ed1\u5b9a\u7684\u57df\u540d\u662f\u5426\u5904\u4e8e\u6b63\u5e38\u72b6\u6001\uff0c\u5426\u5219\u65e0\u6cd5\u6b63\u5e38\u63d0\u4f9b\u670d\u52a1\u3002 \u914d\u7f6e\u5f15\u5bfc 1.\u9996\u5148\u8fdb\u5165\u670d\u52a1\u7ba1\u7406\u5217\u8868\uff0c\u786e\u4fdd\u6240\u9009\u670d\u52a1\u5904\u4e8e \u670d\u52a1\u4e2d \u72b6\u6001\uff0c\u5982\u4e0b\u56fe\u6240\u793a\uff1a 2.\u9009\u62e9\u76f8\u5e94\u670d\u52a1\uff0c\u5728\u7ba1\u7406\u754c\u9762\uff0c\u70b9\u51fb \u914d\u7f6e \u6309\u94ae\u8fdb\u5165 \u52a0\u901f\u57df\u540d \u9009\u9879\uff0c\u67e5\u770b\u7ed1\u5b9a\u7684\u57df\u540d\u662f\u5426\u662f \u6b63\u5e38 \u72b6\u6001\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff1a","title":"\u521b\u5efa\u670d\u52a1"},{"location":"cdn/basic/#_2","text":"\u7f13\u5b58\u914d\u7f6e\u662f\u6307\u53c8\u62cd\u4e91 CDN \u52a0\u901f\u8282\u70b9\uff08\u5305\u62ec\u8fb9\u7f18\u8282\u70b9\u548c\u4e2d\u5fc3\u8282\u70b9\uff09\u5728\u7f13\u5b58\u60a8\u7684\u8d44\u6e90\u6587\u4ef6\u65f6\u9075\u5faa\u7684\u4e00\u5957\u8fc7\u671f\u89c4\u5219\u3002\u5f53\u8d44\u6e90\u6587\u4ef6\u5904\u4e8e\u8fc7\u671f\u72b6\u6001\u65f6\uff0c\u6b64\u65f6\u7528\u6237\u8bf7\u6c42\u4f1a\u7531\u8282\u70b9\u53d1\u9001\u81f3\u6e90\u7ad9\uff0c\u91cd\u65b0\u83b7\u53d6\u8d44\u6e90\u5185\u5bb9\u5e76\u7f13\u5b58\u81f3\u8282\u70b9\uff0c\u540c\u65f6\u8fd4\u56de\u7ed9\u6700\u7ec8\u7528\u6237\uff1b\u5f53\u8d44\u6e90\u5185\u5bb9\u5904\u4e8e\u672a\u8fc7\u671f\u72b6\u6001\u65f6\uff0c\u60a8\u7684\u7528\u6237\u8bf7\u6c42\u5230\u8fbe\u8282\u70b9\u540e\uff0c\u4f1a\u7531\u8282\u70b9\u76f4\u63a5\u54cd\u5e94\u6700\u7ec8\u7528\u6237\u7684\u8bf7\u6c42\u3002\u5408\u7406\u7684\u914d\u7f6e\u8d44\u6e90\u6587\u4ef6\u7f13\u5b58\u65f6\u95f4\uff0c\u80fd\u591f\u6709\u6548\u7684\u63d0\u5347\u7f13\u5b58\u547d\u4e2d\u7387\uff0c\u964d\u4f4e\u56de\u6e90\u7387\uff0c\u8282\u7701\u60a8\u7684\u6e90\u7ad9\u5e26\u5bbd\u3002 \u914d\u7f6e\u5f15\u5bfc \u767b\u5f55 \u53c8\u62cd\u4e91\u7ba1\u7406\u63a7\u5236\u53f0 \uff0c\u9009\u62e9\u9700\u8981\u914d\u7f6e\u7684\u670d\u52a1\uff0c\u4f9d\u6b21\u8fdb\u5165\uff1a\u670d\u52a1 > \u529f\u80fd\u914d\u7f6e > \u57fa\u7840\u914d\u7f6e > \u7f13\u5b58\u914d\u7f6e\uff0c\u70b9\u51fb\u7ba1\u7406\u5373\u53ef\u5f00\u59cb\u914d\u7f6e\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u81ea\u5b9a\u4e49\u914d\u7f6e \u60a8\u53ef\u4ee5\u6839\u636e\u81ea\u8eab\u4e1a\u52a1\u9700\u6c42\uff0c\u5728\u914d\u7f6e\u754c\u9762\u7684\u53f3\u4e0a\u89d2\uff0c\u70b9\u51fb\u53f3\u4e0a\u89d2\u7684 \u6dfb\u52a0 \u6309\u94ae\u8fdb\u884c\u8d44\u6e90\u6587\u4ef6\u7f13\u5b58\u65f6\u95f4\u7684\u914d\u7f6e\uff0cCDN \u652f\u6301\u4e09\u79cd\u7ef4\u5ea6\u7684\u7f13\u5b58\u65f6\u95f4\u914d\u7f6e\u89c4\u5219\uff1a \u6839\u636e\u6587\u4ef6\u7c7b\u578b\u8bbe\u7f6e\u7f13\u5b58\u7b56\u7565 \u60a8\u53ef\u4ee5\u6839\u636e\u6a21\u677f\u586b\u5145\u6587\u4ef6\u7c7b\u578b\u540e\u7f00\uff0c\u6839\u636e\u6587\u4ef6\u7c7b\u578b\u6765\u8bbe\u7f6e\u7f13\u5b58\u65f6\u95f4\uff0c\u5982\u4e0b\u793a\u4f8b\u6240\u793a\uff1a /*.(txt,doc,wri,docs) \u7f13\u5b58\u65f6\u95f4 1 \u5929\uff1b \u8bbe\u7f6e\u5b8c\u6210\u540e\uff0c\u57df\u540d\u4e0b\u6240\u6709\u5339\u914d .txt .doc .wri .docs \u7684\u6587\u672c\u8d44\u6e90\uff0c\u5728\u8282\u70b9\u7684\u7f13\u5b58\u6709\u6548\u65f6\u95f4\u5747\u4e3a 1 \u5929\u3002 \u6839\u636e\u6587\u4ef6\u76ee\u5f55\u8bbe\u7f6e\u7f13\u5b58\u7b56\u7565 \u60a8\u53ef\u4ee5\u81ea\u5b9a\u4e49\u914d\u7f6e\u6587\u4ef6\u8def\u5f84\uff0c\u6839\u636e\u6587\u4ef6\u8def\u5f84\u6765\u8bbe\u7f6e\u7f13\u5b58\u65f6\u95f4\uff0c\u5982\u4e0b\u793a\u4f8b\u6240\u793a\uff1a /dir/* \u7f13\u5b58\u65f6\u95f4 12 \u5c0f\u65f6 \u5168\u5c40\u914d\u7f6e \u5168\u5c40\u7f13\u5b58\u7b56\u7565\u9002\u5408\u6e90\u7ad9\u5168\u662f\u9759\u6001\u8d44\u6e90\u7684\u5ba2\u6237\uff0c\u53ef\u4ee5\u9488\u5bf9\u8be5\u670d\u52a1\u4e00\u952e\u5f00\u542f\u914d\u7f6e\u7f13\u5b58\u65f6\u95f4\uff0c\u5f00\u542f\u8bf7\u8c28\u614e\u3002\u8be6\u7ec6\u914d\u7f6e\u53ef\u53c2\u7167\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u8bbe\u7f6e\u5b8c\u6210\u540e\uff0c\u8be5\u670d\u52a1\u4e0b\u6240\u6709\u57df\u540d\u5339\u914d\u7684\u8d44\u6e90\uff0c\u5728\u8282\u70b9\u7684\u7f13\u5b58\u6709\u6548\u65f6\u95f4\u5747\u4e3a 7 \u5929\u3002 \u6ce8\u610f\u4e8b\u9879\uff1a 1.\u5168\u5c40\u7f13\u5b58\u5728\u81ea\u5b9a\u4e49\u7f13\u5b58\u914d\u7f6e\u91cc\u9762\u7684\u4f18\u5148\u7ea7\u662f\u6700\u4f4e\u7684\uff0c\u4e14\u4f18\u5148\u7ea7\u4e0d\u53ef\u8c03\u8282\uff0c\u5982\u4e0b\u56fe\u6240\u793a\uff1a 2.\u5168\u5c40\u7f13\u5b58\u8bbe\u7f6e\u6709\u4e00\u4e2a\u5355\u72ec\u7684\u5f00\u5173\uff0c\u9700\u8981\u5f00\u542f\u4e4b\u540e\uff0c\u624d\u53ef\u4ee5\u8fdb\u884c\u914d\u7f6e \u9ed8\u8ba4\u6a21\u677f \u7279\u522b\u5730\uff0c\u6211\u4eec\u9488\u5bf9\u81ea\u5b9a\u4e49\u7f13\u5b58\u914d\u7f6e\uff0c\u9ed8\u8ba4\u89c4\u5212\u4e86\u6a21\u677f\uff0c\u5e76\u4e14\u9884\u8bbe\u4e86\u7f13\u5b58\u65f6\u95f4\uff0c\u60a8\u53ef\u4ee5\u6839\u636e\u5177\u4f53\u60c5\u51b5\u8fdb\u884c\u4fee\u6539\u3002\u5177\u4f53\u6a21\u677f\u5982\u4e0b\uff1a \u9996\u9875\uff1a/ \u7f13\u5b58 12 \u5c0f\u65f6\uff1b \u76ee\u5f55\u9875\uff1a/*/ \u7f13\u5b58 12 \u5c0f\u65f6\uff1b \u56fe\u7247\u6587\u4ef6\uff1a/*.(jpg,jpeg,png,bmp,gif,psd,ico,tga,imb,tiff) \u7f13\u5b58 7 \u5929\uff1b \u6587\u672c\u6587\u4ef6\uff1a/*.(txt,doc,wri,docs,css,js,dot,xml,log,bat,csv) \u7f13\u5b58 1 \u5929\uff1b \u97f3\u89c6\u9891\u6587\u4ef6\uff1a/*.(wav,mp3,wmv,rmi,aac,mp4,rmvb,mkv,avi,flv,swf,rm,mov,movie,qt) \u7f13\u5b58 7 \u5929\uff1b \u4e0b\u8f7d\u7c7b\u6587\u4ef6\uff1a/*.(exe,ios,apk,ipa,pxl,sis,cab,deb,rar,zip,gzip,tar,7z,bzip2,dmg,gz,wim,tbz,tpz,z,jar) \u7f13\u5b58 7 \u5929\uff1b \u4e0d\u7f13\u5b58\u914d\u7f6e \u6839\u636e\u4e1a\u52a1\u60c5\u51b5\uff0c\u53ef\u4ee5\u9488\u5bf9\u4e00\u4e9b\u52a8\u6001\u8d44\u6e90\u6587\u4ef6\uff08 \u4f8b\u5982\uff1aphp\u3001jsp\u3001asp\u3001do\u3001cgi\u3001action\u3001json\u7b49\uff09\u5f3a\u5236\u914d\u7f6e\u4e0d\u7f13\u5b58\uff0c \u8be6\u7ec6\u914d\u7f6e\u53ef\u53c2\u7167\u5982\u4e0b\u6240\u793a\uff1a /*.(asp,php,jsp,do,json) \u914d\u7f6e\u4e0d\u7f13\u5b58 \u9ed8\u8ba4\u7f13\u5b58\u7b56\u7565 \u5728\u6ca1\u6709\u5339\u914d\u5230\u81ea\u5b9a\u4e49\u7f13\u5b58\u89c4\u5219\u4e14\u6e90\u7ad9\u4e5f\u6ca1\u6709\u8fd4\u56de\u4efb\u4f55\u6709\u6548\u7f13\u5b58\u5934\u7684\u60c5\u51b5\u4e0b\uff0c\u6211\u4eec\u7684\u9ed8\u8ba4\u914d\u7f6e\u7b56\u7565\u5982\u4e0b\uff1a \u9488\u5bf9\u9759\u6001\u8d44\u6e90\uff0c\u6240\u6709\u6b63\u5e38\u72b6\u6001\u7801\uff08\u5927\u4e8e\u7b49\u4e8e 200 \u5c0f\u4e8e 400\uff09\u5747\u7f13\u5b58 8 \u5929\u3002\u7279\u522b\u5730\uff0c301 \u54cd\u5e94\u7f13\u5b58 2 \u5c0f\u65f6\uff0c302 \u54cd\u5e94\u7f13\u5b58 20 \u5206\u949f \u9488\u5bf9\u52a8\u6001\u8d44\u6e90\uff0c\u7a0b\u5e8f\u4f1a\u81ea\u52a8\u8bc6\u522b\uff0c\u5219\u4e0d\u8fdb\u884c\u7f13\u5b58 \u5bf9\u4e8e\u5176\u4ed6\u5927\u4e8e\u7b49\u4e8e 400 \u7684\u4e0d\u6b63\u5e38\u54cd\u5e94\uff0c\u5219\u4e0d\u8fdb\u884c\u7f13\u5b58 \u7f13\u5b58\u4f18\u5148\u7ea7 \u8bf7\u6839\u636e\u5177\u4f53\u7f13\u5b58\u4f18\u5148\u7ea7\u60c5\u51b5\u5408\u7406\u914d\u7f6e\u7f13\u5b58\u7b56\u7565\uff0c\u53c8\u62cd\u4e91 CDN \u52a0\u901f\u5e73\u53f0\u76ee\u524d\u7684\u7f13\u5b58\u4f18\u5148\u7ea7\u5982\u4e0b\uff1a \u4e0d\u7f13\u5b58\u914d\u7f6e\uff08\u540e\u53f0\u8bbe\u7f6e\uff09 > \u81ea\u5b9a\u4e49\u7f13\u5b58\u914d\u7f6e\uff08\u540e\u53f0\u914d\u7f6e\uff09 > \u6e90\u7ad9\u7f13\u5b58\u914d\u7f6e > \u9ed8\u8ba4\u7f13\u5b58\u7b56\u7565\u3002 \u6ce8\u610f\u4e8b\u9879\uff1a 1.\u6e90\u7ad9\u7f13\u5b58\u914d\u7f6e\uff0c\u6307 Cache-Control \u548c Expires \u8bf7\u6c42\u5934\u7684\u8bbe\u7f6e 2.\u4ee5\u4e0a\u7f13\u5b58\u914d\u7f6e\u4f18\u5148\u7ea7\u76ee\u524d\u4e0d\u652f\u6301\u987a\u5e8f\u8c03\u8282\uff0c\u540e\u7eed\u6211\u4eec\u4f1a\u8003\u8651\u652f\u6301 \u7279\u522b\u58f0\u660e \u9488\u5bf9\u4f7f\u7528\u53c8\u62cd\u4e91\u5b58\u50a8\u670d\u52a1\u7684\u5ba2\u6237\uff0c\u6211\u4eec\u6682\u65f6\u4e0d\u652f\u6301\u7f13\u5b58\u914d\u7f6e\u7684\u81ea\u5b9a\u4e49\u8bbe\u7f6e\uff0c\u6211\u4eec\u9ed8\u8ba4\u7ed9\u51fa\u4e86\u4e00\u4e2a\u9ed8\u8ba4\u7684\u7f13\u5b58\u914d\u7f6e\u89c4\u5219\uff0c\u5177\u4f53\u5982\u4e0b\uff1a \u5bf9\u4e8e\u6b63\u5e38\u7684\u72b6\u6001\u7801\uff08\u5927\u4e8e\u7b49\u4e8e 200 \u5c0f\u4e8e 400\uff09\uff1a8 \u5929 \u5bf9\u4e8e\u5176\u4ed6\u5927\u4e8e\u7b49\u4e8e 400 \u7684\u4e0d\u6b63\u5e38\u54cd\u5e94\u7f13\u5b58 5 \u5206\u949f \u52a8\u9759\u81ea\u52a8\u5206\u79bb \u9488\u5bf9 \u81ea\u4e3b\u6e90 \u7684 CDN \u670d\u52a1\u800c\u8a00\uff0c\u5f53\u6ca1\u6709\u5339\u914d\u5230\u81ea\u5b9a\u4e49\u7f13\u5b58\u89c4\u5219\u4e14\u6e90\u7ad9\u4e5f\u6ca1\u6709\u8fd4\u56de\u4efb\u4f55\u6709\u6548\u7684\u7f13\u5b58\u5934\u65f6\uff0c\u6211\u4eec\u5c31\u4f1a\u5bf9\u56de\u6e90\u5185\u5bb9\u8fdb\u884c\u52a8\u9759\u8bc6\u522b\u3002\u7279\u522b\u5730\uff0c\u6211\u4eec\u4f1a\u6839\u636e\u54cd\u5e94\u5934\u4e2d\u7684 Content-Type \u5b57\u6bb5\u548c URL \u4e2d\u7684\u6587\u4ef6\u540e\u7f00\u540d\u6765\u5224\u65ad\u662f\u5426\u662f\u9759\u6001\u5185\u5bb9\uff0c\u5176\u4e2d Content-Type \u5339\u914d\u4f18\u5148\u7ea7\u9ad8\u4e8e\u6587\u4ef6\u540e\u7f00\u540d\u3002 \u53c2\u8003\u5217\u8868 \u4ee5\u4e0b\u662f\u6211\u4eec\u7ef4\u62a4\u7684\u4e00\u4efd Content-Type \u548c\u6587\u4ef6\u540e\u7f00\u540d\u5217\u8868\uff0c\u82e5\u6ee1\u8db3\u5339\u914d\u6211\u4eec\u5c31\u8ba4\u4e3a\u662f\u9759\u6001\u5185\u5bb9\uff1a Content-Type \u5217\u8868 text/css text/javascript application/javascript application/x-javascript image/gif image/png image/jpeg image/webp image/tiff image/x-icon image/x-ms-bmp image/svg+xml application/font-woff application/java-archive application/msword application/pdf application/postscript application/zip application/octet-stream application/vnd.openxmlformats-officedocument.wordprocessingml.document application/vnd.openxmlformats-officedocument.spreadsheetml.sheet application/vnd.openxmlformats-officedocument.presentationml.presentation audio/mpeg audio/ogg audio/x-m4a video/mp4 video/x-flv video/x-m4v \u6587\u4ef6\u540e\u7f00\u540d\u5217\u8868 css js jpg jpeg gif ico png bmp pict csv doc pdf pls ppt tif tiff eps ejs swf midi mida ttf eot woff otf svg svgz webp docx xlsx xls pptx ps class jar bz2 bzip exe flv gzip rar rtf tgz gz txt zip mp3 mp4 ogg m4a m4v apk","title":"\u7f13\u5b58\u914d\u7f6e"},{"location":"cdn/basic/#_3","text":"\u4e0a\u4e00\u4e2a\u7ae0\u8282\u6211\u4eec\u4ecb\u7ecd\u4e86\u7f13\u5b58\u914d\u7f6e\uff0c\u5f53 CDN \u7684\u8d44\u6e90\u6587\u4ef6\u7f13\u5b58\u8fc7\u671f\u4e4b\u540e\u4f1a\u56de\u6e90\u83b7\u53d6\u6587\u4ef6\u5e76\u7f13\u5b58\uff0c\u4f46\u662f\u8fd9\u662f\u4e00\u4e2a\u88ab\u52a8\u66f4\u65b0\u7684\u8fc7\u7a0b\uff0c\u8d44\u6e90\u66f4\u65b0\u53d7\u9650\u4e8e\u7f13\u5b58\u8fc7\u671f\u65f6\u95f4\u3002\u5f53\u6e90\u7ad9\u8d44\u6e90\u66f4\u65b0\u4e4b\u540e\u9700\u8981\u5feb\u901f\u56de\u6e90\u4e0b\u53d1\u5230 CDN \u8282\u70b9\u65f6\uff0c\u53ef\u4ee5\u4f7f\u7528\u7f13\u5b58\u5237\u65b0\u529f\u80fd\u6765\u5b9e\u73b0\uff0c\u8fd9\u662f\u4e00\u79cd\u4e3b\u52a8\u66f4\u65b0\u7684\u65b9\u5f0f\u3002 \u914d\u7f6e\u5f15\u5bfc \u767b\u5f55 \u53c8\u62cd\u4e91\u7ba1\u7406\u63a7\u5236\u53f0 \uff0c\u8fdb\u5165 \u5237\u65b0 \u680f\u76ee\uff0c\u60a8\u53ef\u4ee5\u9009\u62e9 URL \u5237\u65b0 \u3001 \u89c4\u5219\u5237\u65b0 \u6765\u5f3a\u5236\u56de\u6e90\u66f4\u65b0\u6587\u4ef6\u53ca\u76ee\u5f55\u3002\u60a8\u4e5f\u53ef\u4ee5\u5728 \u64cd\u4f5c\u8bb0\u5f55 \u9009\u9879\u67e5\u8be2\u5237\u65b0\u8fdb\u5ea6\u53ca\u76f8\u5173\u72b6\u6001\u3002 URL \u5237\u65b0 \u5f53\u6e90\u7ad9\u6709\u5c11\u91cf\u6587\u4ef6\u66f4\u65b0\u65f6\uff0c\u53ef\u4ee5\u4f7f\u7528 URL \u5237\u65b0 \u6765\u4e3b\u52a8\u5220\u9664 CDN \u8282\u70b9\u4e0a\u7684\u8d44\u6e90\u6587\u4ef6\u3002\u65b0\u7684\u8bf7\u6c42\u8fdb\u6765\u65f6\uff0cCDN \u8282\u70b9\u4f1a\u56de\u6e90\u83b7\u53d6\u6587\u4ef6\u5e76\u5c06\u65b0\u7684\u8d44\u6e90\u6587\u4ef6\u7f13\u5b58\u81f3 CDN \u8282\u70b9\uff0c\u6240\u4ee5\u8fd9\u662f\u4e00\u4e2a\u4e3b\u52a8\u66f4\u65b0\u7684\u8fc7\u7a0b\u3002\u64cd\u4f5c\u754c\u9762\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u6ce8\u610f\u4e8b\u9879\uff1a 1.\u6bcf\u884c\u4e00\u4e2aURL\u5730\u5740\uff0c\u6bcf\u4e2a URL \u5730\u5740\u4ee5 http://\u6216https://\u5f00\u5934\uff0c\u4f8b\u5982\uff1a http://example.com/image/test.jpg 2.\u6bcf\u6b21\u8f93\u5165\u4e0d\u8d85\u8fc7 50 \u4e2a\uff0c\u5237\u65b0\u4efb\u52a1\u5168\u7f51\u751f\u6548\u65f6\u95f4\u5927\u7ea6 5 \u5230 10 \u5206\u949f \u89c4\u5219\u5237\u65b0 \u5f53\u6e90\u7ad9\u6709\u9488\u5bf9\u8d44\u6e90\u8fdb\u884c\u6279\u91cf\u66f4\u65b0\u65f6\uff0c\u53ef\u4ee5\u901a\u8fc7 \u89c4\u5219\u5237\u65b0 \u6765\u5237\u65b0\u8282\u70b9\u7f13\u5b58\u6587\u4ef6\u3002\u5b9e\u9645\u4e0a\uff0c\u89c4\u5219\u5237\u65b0\u5e76\u6ca1\u6709\u5220\u9664\u8282\u70b9\u8d44\u6e90\u6587\u4ef6\uff0c\u89c4\u5219\u4e00\u65e6\u751f\u6548\u4e4b\u540e\uff0c\u7f13\u5b58\u5728 CDN \u8282\u70b9\u7684\u6587\u4ef6\u4f1a\u88ab\u81f4\u8fc7\u671f\uff0c\u65b0\u7684\u8bf7\u6c42\u4f1a\u56de\u6e90\u6821\u9a8c\u4e00\u6b21\uff0c\u5982\u679c\u6e90\u7ad9\u6587\u4ef6\u6709\u66f4\u65b0\uff0c\u5219\u5c06\u65b0\u7684\u6587\u4ef6\u54cd\u5e94\u7ed9\u6700\u7ec8\u7528\u6237\u5e76\u66ff\u6362\u8282\u70b9\u4e0a\u7684\u65e7\u6587\u4ef6\u3002\u64cd\u4f5c\u754c\u9762\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u89c4\u5219\u793a\u4f8b\uff1a http://example.com/image/\uff0a http://example.com/image/\uff0a.jpg http://example.com/image/\uff0a!upyun\uff08 \u9002\u7528\u4e8e\u81ea\u5b9a\u4e49\u7f29\u7565\u56fe\u7248\u672c \uff09 \u6ce8\u610f\u4e8b\u9879\uff1a 1.\u6bcf\u884c\u4e00\u4e2a\u8def\u5f84\u89c4\u5219\uff0c\u6bcf\u4e2a\u8def\u5f84\u89c4\u5219\u4ee5 http:// \u6216 https:// \u5f00\u5934\uff0c\u6bcf\u6b21\u8f93\u5165\u4e0d\u8d85\u8fc7 10 \u4e2a\uff0c\u4f8b\u5982\uff1a http://example.com/image/\uff0a 2.\u89c4\u5219\u5237\u65b0\u4e3b\u8981\u7528\u4e8e\u5bf9\u4f7f\u7528\u5ba2\u6237\u81ea\u4e3b\u6e90\u7ad9\u7684 CDN \u670d\u52a1\uff0c\u6267\u884c\u540e\u4f1a\u5728 10 \u5206\u949f\u5185\u751f\u6548 \u7279\u522b\u58f0\u660e\uff1a 1.\u5982\u60a8\u4f7f\u7528\u4e86\u53c8\u62cd\u4e91\u5bf9\u8c61\u5b58\u50a8\u670d\u52a1\u65f6\uff0c\u5982\u679c\u60a8\u901a\u8fc7 \u89c4\u5219\u5237\u65b0 \u6765\u5237\u65b0\u7f13\u5b58\u7684\u8bdd\uff0c\u57fa\u4e8e\u5e73\u53f0\u4fdd\u62a4\uff0c \u89c4\u5219\u5237\u65b0 \u751f\u6548\u65f6\u95f4\u662f 1 \u4e2a\u5c0f\u65f6\uff0c\u8bf7\u8c28\u614e\u64cd\u4f5c 2.\u7279\u522b\u5730\uff0c\u4f7f\u7528\u4e86\u53c8\u62cd\u4e91\u5bf9\u8c61\u5b58\u50a8\u670d\u52a1\u65f6\uff0c\u5b58\u50a8\u4e2d\u8d44\u6e90\u66f4\u65b0\uff08\u66ff\u6362\u6216\u5220\u9664\uff09\u65f6\u4f1a\u81ea\u52a8\u89e6\u53d1 CDN \u8282\u70b9\u5237\u65b0\u7f13\u5b58\uff0c\u4f1a\u5728 5 \u5206\u949f\u5185\u751f\u6548\uff0c\u6240\u4ee5\u60a8\u65e0\u9700\u8fdb\u884c\u624b\u52a8\u5237\u65b0\u64cd\u4f5c URL \u9884\u70ed \u5f53\u6e90\u7ad9\u6709\u65b0\u589e\u65b0\u7684\u8d44\u6e90\u6587\u4ef6\u65f6\uff0c\u53ef\u5c06\u8fd9\u4e9b\u65b0\u6587\u4ef6\u63d0\u524d\u7f13\u5b58\u81f3 CDN \u8282\u70b9\uff0c\u6700\u7ec8\u7528\u6237\u7b2c\u4e00\u6b21\u8bbf\u95ee\u8fd9\u4e9b\u8d44\u6e90\u6587\u4ef6\u65f6\uff0c CDN \u8282\u70b9\u4e0d\u9700\u8981\u56de\u6e90\u7ad9\u8bf7\u6c42\u6587\u4ef6\u8d44\u6e90\u4e86\u3002\u4e00\u65b9\u9762\u53ef\u51cf\u5c11\u7528\u6237\u7a81\u53d1\u8bbf\u95ee\u65f6\u7684\u56de\u6e90\u91cf\uff0c\u53e6\u4e00\u65b9\u9762\u53ef\u4ee5\u52a0\u5feb\u8d44\u6e90\u6587\u4ef6\u7684\u9996\u6b21\u8bbf\u95ee\u901f\u5ea6\u3002\u64cd\u4f5c\u754c\u9762\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u6ce8\u610f\u4e8b\u9879\uff1a\u5efa\u8bae\u4e0d\u8981\u540c\u65f6\u9884\u70ed\u592a\u591a\u8d44\u6e90\u6587\u4ef6\uff0c\u5426\u5219\u4f1a\u5bf9\u6e90\u7ad9\u9020\u6210\u56de\u6e90\u538b\u529b \u64cd\u4f5c\u8bb0\u5f55 \u8fdb\u884c URL \u5237\u65b0 \u3001 \u89c4\u5219\u5237\u65b0 \u3001 URL \u9884\u70ed \u64cd\u4f5c\u4e4b\u540e\uff0c\u754c\u9762\u7a97\u53e3\u4f1a\u7acb\u9a6c\u8df3\u81f3\u64cd\u4f5c\u8bb0\u5f55\u754c\u9762\uff0c\u60a8\u53ef\u4ee5\u5b9e\u65f6\u67e5\u770b\u5f53\u524d\u64cd\u4f5c\u7684\u8fdb\u5ea6\u53cd\u9988\u53ca\u76f8\u5173\u72b6\u6001\u3002\u60a8\u4e5f\u53ef\u4ee5\u67e5\u770b\u5386\u53f2\u64cd\u4f5c\u8bb0\u5f55\uff0c\u6211\u4eec\u9ed8\u8ba4\u4fdd\u7559\u4e86 3 \u5929\u7684\u6570\u636e\u3002","title":"\u7f13\u5b58\u5237\u65b0"},{"location":"cdn/basic/#_4","text":"\u4e3a\u4e86\u66f4\u52a0\u900f\u660e\u7684\u5c55\u793a\u7ec8\u7aef\u7528\u6237\u8bbf\u95ee CDN \u4ee5\u53ca CDN \u56de\u6e90\u7684\u8bbf\u95ee\u60c5\u51b5\uff0c\u53c8\u62cd\u4e91 CDN \u670d\u52a1\u4ece\u5e26\u5bbd\u3001\u6d41\u91cf\u3001\u8bf7\u6c42\u6570\u7b49\u7ef4\u5ea6\u8fdb\u884c\u4e86\u6570\u636e\u7edf\u8ba1\u548c\u5206\u6790\uff0c\u65b9\u4fbf\u7528\u6237\u67e5\u770b\u548c\u5206\u6790\uff0c\u5177\u4f53\u529f\u80fd\u9879\u53c2\u89c1\u5982\u4e0b\u63cf\u8ff0\uff1a \u5e26\u5bbd\u53ca\u6d41\u91cf\u67e5\u8be2\uff1a\u60a8\u53ef\u4ee5\u67e5\u8be2\u6307\u5b9a\u65f6\u95f4\u533a\u95f4\u3001\u57df\u540d\u3001\u670d\u52a1\u540d\u3001\u5730\u533a\u3001\u8fd0\u8425\u5546\u7b49\u6761\u4ef6\u4e0b\uff0c\u5e26\u5bbd\u53ca\u6d41\u91cf\u7684\u66f2\u7ebf\u56fe\uff0c\u4ee5\u53ca\u8fd0\u8425\u5546\u3001\u5730\u533a\u5206\u5e03\u53ca\u6392\u540d\u60c5\u51b5\uff1b \u8bf7\u6c42\u6570\u67e5\u8be2\uff1a\u60a8\u53ef\u4ee5\u67e5\u8be2\u6307\u5b9a\u65f6\u95f4\u533a\u95f4\u3001\u57df\u540d\u3001\u670d\u52a1\u540d\u3001\u5730\u533a\u3001\u8fd0\u8425\u5546\u7b49\u6761\u4ef6\u4e0b\uff0c\u7528\u6237\u8bf7\u6c42\u6570\u7684\u66f2\u7ebf\u56fe\uff1b \u56de\u6e90\u7edf\u8ba1\uff1a\u60a8\u53ef\u4ee5\u67e5\u770b\u6307\u5b9a\u65f6\u95f4\u533a\u95f4\u3001\u57df\u540d\u3001\u670d\u52a1\u540d\u7b49\u6761\u4ef6\u4e0b\uff0c\u5e26\u5bbd\u53ca\u6d41\u91cf\u66f2\u7ebf\u4ee5\u53ca\u6e90\u7ad9\u6d41\u91cf\u5206\u5e03\uff1b \u67e5\u8be2\u660e\u7ec6\u6570\u636e\uff1a\u60a8\u53ef\u4ee5\u67e5\u8be2\u6307\u5b9a\u65f6\u95f4\u533a\u95f4\u3001\u57df\u540d\u3001\u670d\u52a1\u540d\u3001\u5730\u533a\u3001\u8fd0\u8425\u5546\u7b49\u6761\u4ef6\u4e0b\uff0c\u67e5\u8be2\u6bcf\u65e5\u7684\u6d41\u91cf\u3001\u8bf7\u6c42\u91cf\u3001\u9759\u6001\u8bf7\u6c42\u3001\u52a8\u6001\u8bf7\u6c42\u3001HTTPS \u8bf7\u6c42\u3001\u5cf0\u503c\u5e26\u5bbd\u3001\u5cf0\u503c\u5e26\u5bbd\u65f6\u95f4\u7b49\u660e\u7ec6\u6570\u636e\u3002 \u5bfc\u51fa Excel \u62a5\u8868\uff1a\u60a8\u53ef\u4ee5\u67e5\u8be2\u6307\u5b9a\u65f6\u95f4\u533a\u95f4\u3001\u57df\u540d\u3001\u670d\u52a1\u540d\u3001\u5730\u533a\u3001\u8fd0\u8425\u5546\u7b49\u6761\u4ef6\u4e0b\uff0c\u53ef\u4ee5\u5bfc\u51fa 5 \u5206\u949f\u7c92\u5ea6\u8be6\u7ec6\u7684\u8bf7\u6c42\u6570\u3001\u6d41\u91cf\u3001\u5e26\u5bbd\u3001\u5cf0\u503c\u5e26\u5bbd\u65f6\u95f4\u7b49\u8be6\u7ec6\u6570\u636e\u3002 \u914d\u7f6e\u5f15\u5bfc \u767b\u9646 \u53c8\u62cd\u4e91\u7ba1\u7406\u63a7\u5236\u53f0 \uff0c\u5728\u7f6e\u9876\u83dc\u5355\u8fdb\u5165 \u7edf\u8ba1 \u680f\u76ee\uff0c\u53ef\u67e5\u8be2\u5982\u4e0a\u7edf\u8ba1\u5206\u6790\u6570\u636e\uff1a \u67e5\u8be2\u793a\u4f8b\u4e00\uff1a\u67e5\u8be2\u5e26\u5bbd\u53ca\u8bf7\u6c42\u6570\u66f2\u7ebf\u56fe \u67e5\u8be2\u793a\u4f8b\u4e8c\uff1a\u67e5\u8be2\u6d41\u91cf\u5730\u533a\u53ca\u8fd0\u8425\u5546\u5206\u5e03\u53ca\u6392\u884c \u67e5\u8be2\u793a\u4f8b\u4e09\uff1a\u67e5\u8be2\u660e\u7ec6\u6570\u636e \u67e5\u8be2\u793a\u4f8b\u56db\uff1a\u56de\u6e90\u5e26\u5bbd\u53ca\u8bf7\u6c42 \u76f8\u5173\u8bf4\u660e\uff1a 1.\u4ee5\u5929\u4e3a\u5355\u4f4d\u67e5\u8be2\u6570\u636e\u65f6\uff0c\u60a8\u53ef\u4ee5\u67e5\u8be2 5 \u5206\u949f\u65f6\u95f4\u7c92\u5ea6\u7684\u6570\u636e 2.\u65f6\u95f4\u533a\u95f4\u4e3a\u5927\u4e8e\u7b49\u4e8e 2 \u5929\u65f6\uff0c\u60a8\u53ef\u4ee5\u67e5\u8be2 1 \u5c0f\u65f6\u65f6\u95f4\u7c92\u5ea6\u7684\u6570\u636e","title":"\u7edf\u8ba1\u5206\u6790"},{"location":"cdn/basic/#_5","text":"\u901a\u8fc7\u6027\u80fd\u76d1\u63a7\uff0c\u53ef\u4ee5\u7b80\u5355\u3001\u76f4\u89c2\u5730\u4e86\u89e3\u5230 CDN \u670d\u52a1\u8d28\u91cf\u60c5\u51b5\uff0c\u53ca\u65f6\u53d1\u73b0\u548c\u5b9a\u4f4d\u95ee\u9898\uff0c\u5e76\u534f\u52a9\u89e3\u51b3\u95ee\u9898\u3002\u5728\u754c\u9762\u7684\u4e3b\u7a97\u53e3\u4e2d\uff0c\u60a8\u53ef\u4ee5\u67e5\u8be2\u6307\u5b9a\u65f6\u95f4\u533a\u95f4\u3001\u57df\u540d\u3001\u670d\u52a1\u540d\u3001\u5730\u533a\u3001\u8fd0\u8425\u5546\u7b49\u6761\u4ef6\u4e0b\uff0c\u5bf9\u5e94\u670d\u52a1\u7684\u5065\u5eb7\u5ea6\u3001\u7f13\u5b58\u547d\u4e2d\u7387\u3001\u5e73\u5747\u4e0b\u8f7d\u901f\u5ea6\u7b49\u6570\u636e\u3002\u5177\u4f53\u529f\u80fd\u9879\u63cf\u8ff0\u5982\u4e0b\uff1a \u5065\u5eb7\u5ea6\uff1a\u7edf\u8ba1\u6240\u6709\u8bf7\u6c42\u7684 HTTP \u72b6\u6001\u7801\uff0c\u8ba1\u7b97 2xx \u548c 3xx \u8bf7\u6c42\u6b21\u6570\u6240\u5360\u7684\u6bd4\u4f8b \u7f13\u5b58\u547d\u4e2d\u7387\uff1a\u7edf\u8ba1\u6240\u6709\u8bf7\u6c42\u6570\u4e2d\uff0c\u547d\u4e2d\u7f13\u5b58\u7684\u8bf7\u6c42\u6570\u6240\u5360\u7684\u6bd4\u4f8b \u5e73\u5747\u4e0b\u8f7d\u901f\u5ea6\uff1a\u53ef\u4ee5\u6839\u636e\u5730\u533a\u548c\u8fd0\u8425\u5546\u6765\u533a\u5206\u8d44\u6e90\u6587\u4ef6\u4e0b\u8f7d\u901f\u5ea6\u548c\u8bf7\u6c42\u8017\u65f6 \u62e6\u622a\u653b\u51fb\u6b21\u6570\uff1a\u62e6\u622a\u7684\u8de8\u7ad9\u653b\u51fb\u3001SQL \u6ce8\u5165\u548c\u5176\u4ed6\u4ee3\u7801\u6267\u884c\u7b49\u591a\u79cd\u653b\u51fb\u7684\u6570\u91cf\uff08\u4ec5\u9650\u5f00\u542f WAF \u529f\u80fd\uff09 \u914d\u7f6e\u5f15\u5bfc \u767b\u9646 \u53c8\u62cd\u4e91\u7ba1\u7406\u63a7\u5236\u53f0 \uff0c\u5728\u7f6e\u9876\u83dc\u5355\u8fdb\u5165 \u76d1\u63a7 \u680f\u76ee\uff0c\u53ef\u67e5\u8be2\u5982\u4e0a\u6027\u80fd\u76d1\u6d4b\u6570\u636e\uff0c\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u67e5\u8be2\u793a\u4f8b\u4e00\uff1a\u670d\u52a1\u72b6\u51b5\u5386\u53f2\u6570\u636e\uff08\u5065\u5eb7\u5ea6\uff09 \u67e5\u8be2\u793a\u4f8b\u4e8c\uff1a\u5065\u5eb7\u5ea6\u8be6\u60c5\uff08\u56de\u6e90\u8bbf\u95ee\uff09 \u67e5\u8be2\u793a\u4f8b\u4e09\uff1a\u670d\u52a1\u72b6\u51b5\u5386\u53f2\u6570\u636e\uff08\u7f13\u5b58\u547d\u4e2d\u7387\uff09 \u67e5\u8be2\u793a\u4f8b\u56db\uff1a\u5730\u533a\u5e73\u5747\u4e0b\u8f7d\u901f\u5ea6","title":"\u6027\u80fd\u76d1\u63a7"},{"location":"cdn/basic/#_6","text":"\u53ef\u6839\u636e\u65f6\u95f4\u7c92\u5ea6\uff0c\u67e5\u770b\u76f8\u5e94\u8bbf\u95ee\u57df\u540d\u4e0b\u70ed\u95e8\u6587\u4ef6\u3001\u70ed\u95e8\u5ba2\u6237\u7aef\u3001\u70ed\u95e8\u5f15\u7528\u6587\u4ef6\u3001\u8d44\u6e90\u72b6\u6001\u7801\u3001\u6587\u4ef6\u5927\u5c0f\u3001\u70ed\u95e8 IP \u7b49\u7ef4\u5ea6 top1000 \u7684\u7edf\u8ba1\u5206\u6790\u6570\u636e\u3002\u65e5\u5fd7\u5206\u6790\u662f\u4ee5\u5929\u4e3a\u7c92\u5ea6\u8fdb\u884c\u5206\u6790\u7684\uff0c\u7b2c\u4e8c\u5929\u51cc\u6668\u4f1a\u5f00\u59cb\u8fdb\u884c\u65e5\u5fd7\u5206\u6790\u5de5\u4f5c\uff0c\u6b63\u5e38\u60c5\u51b5\u4e0b\uff0c\u7b2c\u4e8c\u5929\u65e9\u6668 09:00:00 \u4e4b\u524d\u4f1a\u7edf\u8ba1\u8ba1\u7b97\u5b8c\u6bd5\u3002 \u914d\u7f6e\u5f15\u5bfc \u767b\u9646 \u53c8\u62cd\u4e91\u7ba1\u7406\u63a7\u5236\u53f0 \uff0c\u5728\u7f6e\u9876\u83dc\u5355\u8fdb\u5165 \u5de5\u5177\u7bb1 \uff0c\u627e\u5230 \u65e5\u5fd7\u7ba1\u7406 \u680f\u76ee\uff0c\u9009\u62e9 \u65e5\u5fd7\u5206\u6790 \u9009\u9879\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff1a","title":"\u65e5\u5fd7\u5206\u6790"},{"location":"cdn/basic/#_7","text":"\u652f\u6301\u4ee5\u5c0f\u65f6\u7c92\u5ea6\u7684\u65e5\u5fd7\u4e0b\u8f7d\uff0c\u53ef\u6536\u96c6\u8be6\u7ec6\u7684\u7ec8\u7aef\u8bbf\u95ee\u65e5\u5fd7\uff1b\u65e5\u5fd7\u6587\u4ef6\u5ef6\u8fdf 1 \u5c0f\u65f6\uff0c\u53ef\u4ee5\u5728\u65e5\u5fd7\u7ba1\u7406\u6a21\u5757\u67e5\u8be2\u5230 1 \u5c0f\u65f6\u4e4b\u524d\u7684\u65e5\u5fd7\u6587\u4ef6\u3002 \u65e5\u5fd7\u547d\u540d\u89c4\u5219\uff1a\u65f6\u95f4\u6bb5-\u8bbf\u95ee\u57df\u540d-\u968f\u673a\u6570.gz\uff0c\u65e5\u5fd7\u547d\u540d\u793a\u4f8b\uff1a 10_00-impress-demo.b0.upaiyun.com-9571272666104702574.gz \u65e5\u5fd7\u6837\u4f8b 122.96.42.186 - - [13/Dec/2016:00:00:02 +0800] \"GET http://impress-demo.b0.upaiyun.com/kphone/icons/weihui_icon3.png?v=1.0 HTTP/1.1\" 200 1851 \"-\" \"Mozilla/4.0\" \"image/png\" 0 Hit \"C/200\" Static \"max-age=900\" 0.014 153.101.64.13 \u5b57\u6bb5\u8bf4\u660e \u5e8f\u53f7 \u5b57\u6bb5 \u793a\u4f8b\u503c 1 \u5ba2\u6237\u7aef IP \u5730\u5740 122.96.42.186 2 \u5ba2\u6237\u7aef\u7528\u6237\u540d - 3 \u8bbf\u95ee\u65f6\u95f4\u4e0e\u65f6\u533a [13/Dec/2016:00:00:02 +0800] 4 \u5ba2\u6237\u7aef\u8bf7\u6c42\u65b9\u6cd5 GET 5 \u8bf7\u6c42\u534f\u8bae HTTP 6 \u8bbf\u95ee\u57df\u540d impress-demo.b0.upaiyun.com 7 \u5ba2\u6237\u7aef\u8bf7\u6c42 URI /kphone/icons/weihui_icon3.png 8 \u8bf7\u6c42\u53c2\u6570 v=1.0 9 \u8bf7\u6c42\u534f\u8bae\u7248\u672c\u4fe1\u606f HTTP/1.1 10 \u54cd\u5e94\u72b6\u6001\u7801 200 11 \u53d1\u9001\u7ed9\u5ba2\u6237\u7aef\u7684\u5b57\u8282\u6570 1851 12 Referer \u8bf7\u6c42\u5934 - 13 User-Agent \u5934 Mozilla/4.0 14 \u5185\u5bb9\u7c7b\u578b image/png 15 \u8bf7\u6c42\u5185\u5bb9\u5927\u5c0f 0 16 \u7f13\u5b58\u547d\u4e2d\u72b6\u6001 Hit 17 \u6e90\u7ad9\u7c7b\u578b (U: \u4e91\u5b58\u50a8 C\uff1a\u81ea\u4e3b\u6e90)/\u72b6\u6001\u7801 C/200 18 \u52a8\u6001\u8bf7\u6c42\u6807\u8bb0 Static 19 \u7f13\u5b58\u65f6\u95f4 max-age=900 20 \u8bf7\u6c42\u5904\u7406\u65f6\u95f4\uff08\u5355\u4f4ds\uff09 0.014 21 CDN \u8fb9\u7f18\u8282\u70b9 IP 153.101.64.13 \u914d\u7f6e\u5f15\u5bfc \u767b\u9646 \u53c8\u62cd\u4e91\u7ba1\u7406\u63a7\u5236\u53f0 \uff0c\u5728\u7f6e\u9876\u83dc\u5355\u8fdb\u5165 \u5de5\u5177\u7bb1 \uff0c\u627e\u5230 \u65e5\u5fd7\u7ba1\u7406 \u680f\u76ee\uff0c\u9009\u62e9 \u65e5\u5fd7\u4e0b\u8f7d \u9009\u9879\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u5173\u4e8e\u65e5\u5fd7\u5206\u6790\u548c\u4e0b\u8f7d\u89c6\u9891\u6559\u7a0b\u8bf7\u70b9\u51fb \u65e5\u5fd7\u7ba1\u7406\u89c6\u9891\u6559\u7a0b \u3002 \u5982\u6709\u7591\u95ee\u8bf7 \u8054\u7cfb\u6211\u4eec","title":"\u65e5\u5fd7\u4e0b\u8f7d"},{"location":"cdn/buy/","text":"\u4ef7\u683c\u603b\u89c8 \u00b6 \u53c8\u62cd\u4e91 CDN \u4ef7\u683c\u5206\u4e3a\u4e24\u4e2a\u90e8\u5206\uff0c\u5206\u522b\u662f\u57fa\u7840\u670d\u52a1\u8d39\u7528\u548c\u589e\u503c\u670d\u52a1\u8bf7\u6c42\u8d39\u7528\u3002\u5176\u4e2d\u57fa\u7840\u670d\u52a1\u8d39\u7528\u5305\u62ec\u6309\u6d41\u91cf\u8ba1\u8d39\u548c\u6309\u5e26\u5bbd\u8ba1\u8d39\uff0c\u589e\u503c\u670d\u52a1\u5305\u62ec\u52a8\u6001\u8bf7\u6c42\u6570\u8ba1\u8d39\u548c HTTPS \u8bf7\u6c42\u6570\u8ba1\u8d39\u3002 \u666e\u901a\u8ba1\u8d39\u65b9\u5f0f \u8be6\u7ec6\u4ecb\u7ecd\u53c2\u89c1\uff1a \u53c8\u62cd\u4e91\u8ba1\u8d39\u8bf4\u660e \u5728 CDN \u63a7\u5236\u53f0\u4e0a\uff0c\u9488\u5bf9\u5e38\u89c4\u7528\u6237\u76ee\u524d\u53ea\u652f\u6301\u6309\u6d41\u91cf\u8ba1\u8d39\uff0c\u6682\u65f6\u4e0d\u652f\u6301\u6309\u5e26\u5bbd\u8ba1\u8d39\uff0c\u6309\u5e26\u5bbd\u8ba1\u8d39\u8bf7\u53c2\u89c1\u3010\u5927\u5ba2\u6237\u8ba1\u8d39\u65b9\u5f0f\u3011\u3002\u5177\u4f53\u8ba1\u8d39\u8be6\u60c5\u65b9\u5f0f\uff0c\u53c2\u89c1\u5982\u4e0b\u8868\u683c\u6240\u793a\uff1a 1.\u57fa\u7840\u670d\u52a1 \u6309\u6d41\u91cf\u8ba1\u8d39 \u8ba1\u8d39\u9879 \u56fd\u5185\uff08\u5143/GB\uff09 \u4e9a\u592a\uff08\u5143/GB\uff09 \u6b27\u7f8e\uff08\u5143/GB\uff09 \u6d41\u5165\u6d41\u91cf 0 0 0 \u6d41\u51fa\u6d41\u91cf 0.29 0.89 0.39 2.\u589e\u503c\u670d\u52a1 \u52a8\u6001\u8bf7\u6c42\u8ba1\u8d39 \u8ba1\u8d39\u9879 \u56fd\u5185\uff08\u5143/\u5343\u6b21\uff09 \u4e9a\u592a\uff08\u5143/\u5343\u6b21 \u6b27\u7f8e\uff08\u5143/\u5343\u6b21\uff09 \u9759\u6001\u8bf7\u6c42 0 0 0 \u52a8\u6001\u8bf7\u6c42 0.02 0.06 0.03 HTTPS \u8bf7\u6c42\u8ba1\u8d39 \u8ba1\u8d39\u9879 \u56fd\u5185\uff08\u5143/\u4e07\u6b21\uff09 \u4e9a\u592a\uff08\u5143/\u4e07\u6b21\uff09 \u6b27\u7f8e\uff08\u5143/\u4e07\u6b21\uff09 \u7ed1\u5b9a\u57df\u540d\u4e2a\u6570 0 0 0 HTTPS \u8bf7\u6c42 0.05 0.15 0.07 \u5927\u5ba2\u6237\u8ba1\u8d39\u65b9\u5f0f \u82e5\u60a8\u5df2\u7ecf\u5728\u53c8\u62cd\u4e91\uff0c\u6216\u672a\u6765\u9884\u671f\u5728\u53c8\u62cd\u4e91\u7684\u6708\u6d88\u8017\u91d1\u989d\u5927\u4e8e 3 \u4e07\u5143\uff0c\u60a8\u53ef\u4ee5\u901a\u8fc7\u5546\u52a1\u6d3d\u8c08\u7684\u65b9\u5f0f\u83b7\u5f97\u66f4\u4f18\u60e0\u7684\u4ef7\u683c\u53ca\u6708\u7ed3\u7b49\u66f4\u52a0\u7075\u6d3b\u7684\u8ba1\u8d39\u65b9\u5f0f\u3002\u9488\u5bf9\u5927\u5ba2\u6237\uff0c\u53c8\u62cd\u4e91 CDN \u670d\u52a1 \u53ef\u4ee5\u9009\u62e9\u6309\u6708 95 \u8ba1\u8d39\u3001\u7b2c 4 \u5cf0\u503c\u8ba1\u8d39\uff0c\u8ba1\u8d39\u65b9\u5f0f\u9700\u8981\u72ec\u7acb\u914d\u7f6e\u3002\u5982\u9700\u5347\u7ea7\u4e3a\u5927\u5ba2\u6237\uff0c\u8bf7\u8054\u7cfb\u60a8\u7684\u5ba2\u6237\u7ecf\u7406\u3002 \u6708 95 \u5e26\u5bbd\u8ba1\u8d39 CDN \u6bcf 5 \u5206\u949f\u7edf\u8ba1\u4e00\u4e2a\u5e26\u5bbd\u5cf0\u503c\uff08\u5355\u4f4d\uff1aMbps\uff09\uff0c\u4e00\u4e2a\u6708\u6309 30 \u5929\u7b97\uff0c\u6709 288 \uff0a 30 \u4e2a\u70b9\uff0c\u6bcf\u4e00\u4e2a\u6709\u6548\u65e5\uff08\u4ea7\u751f\u6d88\u8017\uff09\u7684\u6240\u6709\u7edf\u8ba1\u70b9\u8fdb\u884c\u6392\u5e8f\uff0c\u628a\u6570\u503c\u6700\u9ad8\u7684 5% \u53bb\u6389\uff0c\u5269\u4e0b\u7684\u6700\u9ad8\u7684\u70b9\u5c31\u662f\u6708 95 \u5cf0\u503c\u8ba1\u8d39\u3002 \u7b2c 4 \u5cf0\u503c\u8ba1\u8d39 \u6bcf\u6708\u6309\u7b2c\u56db\u5cf0\u503c\u5e26\u5bbd\u8ba1\u8d39\u4ee5\u81ea\u7136\u6708\u4e3a\u8ba1\u8d39\u5468\u671f\uff0c\u4ee5\u65e5\u4e3a\u5355\u4f4d\u8fdb\u884c\u5cf0\u503c\u7531\u9ad8\u5230\u4f4e\u6392\u5e8f\uff0c\u53d6\u7b2c\u56db\u9ad8\u5cf0\u503c\u4e3a\u8be5\u81ea\u7136\u6708\u5e26\u5bbd\u503c\u8fdb\u884c\u8ba1\u8d39\u3002 \u6708\u6d41\u91cf\u8ba1\u8d39 \u6708\u5ea6\u7d2f\u8ba1\u4f7f\u7528\u7684\u6240\u6709\u6d41\u91cf\u548c\uff0c\u6839\u636e\u5408\u540c\u4ef7\u683c\u8ba1\u7b97\u8d39\u7528\uff0c\u6d41\u91cf\u8ba1\u8d39\u5355\u4ef7\u8bf7\u53c2\u89c1\uff3b\u666e\u901a\u8ba1\u8d39\u65b9\u5f0f\uff3d\u91cc\u9762\u7684\u6d41\u91cf\u5355\u4ef7\u3002 \u8be6\u7ec6\u62a5\u4ef7\u4ee5\u53ca\u8ba1\u8d39\u914d\u7f6e\uff0c\u8bf7\u54a8\u8be2\u60a8\u7684\u5ba2\u6237\u7ecf\u7406\u3002 CDN\u6d41\u91cf\u5305 \u00b6 \u6d41\u91cf\u5305\u8bf4\u660e \u91c7\u7528\u3010\u6d41\u91cf\u8ba1\u8d39\u3011\u6a21\u5f0f\u7684\u5ba2\u6237\uff0c\u53ef\u4ee5\u8d2d\u4e70\u6d41\u91cf\u5305\u8fdb\u884c\u62b5\u6263\u3002\u7cfb\u7edf\u5728\u8ba1\u8d39\u65f6\u4f1a\u4f18\u5148\u62b5\u6263\u6d41\u91cf\u5305\uff0c\u8d85\u51fa\u90e8\u5206\u518d\u7ee7\u7eed\u6309\u7167\u9636\u68af\u4ef7\u683c\u8fdb\u884c\u8ba1\u8d39\u3002\u6d41\u91cf\u5305\u89c4\u683c\u5982\u4e0b\u8868\u6240\u793a\uff1a \u6d41\u91cf\u5305\u89c4\u683c \u4ef7\u683c\uff08\u5143/\u4e2a\uff09 \u6298\u6263\u6bd4\u4f8b \u6709\u6548\u671f 100GB 20.00 69\u6298 3\u4e2a\u6708 500GB 100.00 69\u6298 3\u4e2a\u6708 1TB 270.00 91\u6298 3\u4e2a\u6708 2TB 540.00 91\u6298 3\u4e2a\u6708 5TB 1335.00 90\u6298 3\u4e2a\u6708 10TB 2670.00 90\u6298 3\u4e2a\u6708 \u6d41\u91cf\u5305\u4f18\u60e0\u6d3b\u52a8\u706b\u70ed\u8fdb\u884c\u4e2d\uff0c \u70b9\u51fb\u8d2d\u4e70 \u3002 \u6298\u6263\u8bf4\u660e \u6d41\u91cf\u5305\u8d2d\u4e70\u5f53\u65e5\u751f\u6548\uff0c\u666e\u901a\u6d41\u91cf\u5305\u7684\u6709\u6548\u671f\u4e3a\u81ea\u8d2d\u4e70\u65e5\u8d77 3 \u4e2a\u6708\uff0c\u6d41\u91cf\u4e00\u65e6\u8fc7\u671f\u5219\u65e0\u6cd5\u8fdb\u884c\u62b5\u6263\uff1b 100GB\u3001500GB \u5c5e\u4e8e\u7279\u60e0\u6d41\u91cf\u5305\uff0c\u53ea\u80fd\u4e8c\u9009\u4e00\uff0c\u4e14\u5728\u6709\u6548\u671f\u4e09\u4e2a\u6708\u5185\u4ec5\u53ef\u8d2d\u4e70\u4e00\u6b21\uff1b \u8d2d\u4e70\u6307\u5f15 \u6d41\u91cf\u5305\u4f18\u60e0\u6d3b\u52a8\u706b\u70ed\u8fdb\u884c\u4e2d\uff0c\u53ef \u70b9\u51fb\u8d2d\u4e70 \u3002 \u7b2c\u4e00\u6b65\uff1a\u767b\u9646 CDN \u63a7\u5236\u53f0 \uff0c\u8fdb\u5165\u300c\u8d39\u7528\u4e2d\u5fc3\u300d\u529f\u80fd\u6a21\u5757\uff0c\u9009\u62e9\u300c\u6d41\u91cf\u5305\u7ba1\u7406\u300d\u6a21\u5757\uff0c\u70b9\u51fb\u3010\u8d2d\u4e70\u6d41\u91cf\u5305\u3011\u6309\u94ae\u5373\u53ef\u5f00\u59cb\u8d2d\u4e70\uff0c\u5982\u622a\u56fe\u6240\u793a\uff1a \u7b2c\u4e8c\u6b65\uff1a\u8fdb\u5165\u3010\u6d41\u91cf\u5305\u3011\u8d2d\u4e70\u754c\u9762\uff0c\u9009\u62e9\u9700\u8981\u8d2d\u4e70\u7684\u6d41\u91cf\u5305\u89c4\u683c\uff1a \u7b2c\u4e09\u6b65\uff1a\u8fdb\u5165\u4ea7\u54c1\u8d2d\u4e70\u4fe1\u606f\u6838\u5bf9\u9875\u9762\uff0c\u70b9\u51fb\u3010\u786e\u8ba4\u8d2d\u4e70\u3011\u5373\u53ef\u3002 \u4f9d\u6b21\u8d70\u5b8c\u63a5\u4e0b\u6765\u7684\u8d2d\u4e70\u6d41\u7a0b\u5373\u53ef\u3002","title":"\u8d2d\u4e70\u6307\u5357"},{"location":"cdn/buy/#_1","text":"\u53c8\u62cd\u4e91 CDN \u4ef7\u683c\u5206\u4e3a\u4e24\u4e2a\u90e8\u5206\uff0c\u5206\u522b\u662f\u57fa\u7840\u670d\u52a1\u8d39\u7528\u548c\u589e\u503c\u670d\u52a1\u8bf7\u6c42\u8d39\u7528\u3002\u5176\u4e2d\u57fa\u7840\u670d\u52a1\u8d39\u7528\u5305\u62ec\u6309\u6d41\u91cf\u8ba1\u8d39\u548c\u6309\u5e26\u5bbd\u8ba1\u8d39\uff0c\u589e\u503c\u670d\u52a1\u5305\u62ec\u52a8\u6001\u8bf7\u6c42\u6570\u8ba1\u8d39\u548c HTTPS \u8bf7\u6c42\u6570\u8ba1\u8d39\u3002 \u666e\u901a\u8ba1\u8d39\u65b9\u5f0f \u8be6\u7ec6\u4ecb\u7ecd\u53c2\u89c1\uff1a \u53c8\u62cd\u4e91\u8ba1\u8d39\u8bf4\u660e \u5728 CDN \u63a7\u5236\u53f0\u4e0a\uff0c\u9488\u5bf9\u5e38\u89c4\u7528\u6237\u76ee\u524d\u53ea\u652f\u6301\u6309\u6d41\u91cf\u8ba1\u8d39\uff0c\u6682\u65f6\u4e0d\u652f\u6301\u6309\u5e26\u5bbd\u8ba1\u8d39\uff0c\u6309\u5e26\u5bbd\u8ba1\u8d39\u8bf7\u53c2\u89c1\u3010\u5927\u5ba2\u6237\u8ba1\u8d39\u65b9\u5f0f\u3011\u3002\u5177\u4f53\u8ba1\u8d39\u8be6\u60c5\u65b9\u5f0f\uff0c\u53c2\u89c1\u5982\u4e0b\u8868\u683c\u6240\u793a\uff1a 1.\u57fa\u7840\u670d\u52a1 \u6309\u6d41\u91cf\u8ba1\u8d39 \u8ba1\u8d39\u9879 \u56fd\u5185\uff08\u5143/GB\uff09 \u4e9a\u592a\uff08\u5143/GB\uff09 \u6b27\u7f8e\uff08\u5143/GB\uff09 \u6d41\u5165\u6d41\u91cf 0 0 0 \u6d41\u51fa\u6d41\u91cf 0.29 0.89 0.39 2.\u589e\u503c\u670d\u52a1 \u52a8\u6001\u8bf7\u6c42\u8ba1\u8d39 \u8ba1\u8d39\u9879 \u56fd\u5185\uff08\u5143/\u5343\u6b21\uff09 \u4e9a\u592a\uff08\u5143/\u5343\u6b21 \u6b27\u7f8e\uff08\u5143/\u5343\u6b21\uff09 \u9759\u6001\u8bf7\u6c42 0 0 0 \u52a8\u6001\u8bf7\u6c42 0.02 0.06 0.03 HTTPS \u8bf7\u6c42\u8ba1\u8d39 \u8ba1\u8d39\u9879 \u56fd\u5185\uff08\u5143/\u4e07\u6b21\uff09 \u4e9a\u592a\uff08\u5143/\u4e07\u6b21\uff09 \u6b27\u7f8e\uff08\u5143/\u4e07\u6b21\uff09 \u7ed1\u5b9a\u57df\u540d\u4e2a\u6570 0 0 0 HTTPS \u8bf7\u6c42 0.05 0.15 0.07 \u5927\u5ba2\u6237\u8ba1\u8d39\u65b9\u5f0f \u82e5\u60a8\u5df2\u7ecf\u5728\u53c8\u62cd\u4e91\uff0c\u6216\u672a\u6765\u9884\u671f\u5728\u53c8\u62cd\u4e91\u7684\u6708\u6d88\u8017\u91d1\u989d\u5927\u4e8e 3 \u4e07\u5143\uff0c\u60a8\u53ef\u4ee5\u901a\u8fc7\u5546\u52a1\u6d3d\u8c08\u7684\u65b9\u5f0f\u83b7\u5f97\u66f4\u4f18\u60e0\u7684\u4ef7\u683c\u53ca\u6708\u7ed3\u7b49\u66f4\u52a0\u7075\u6d3b\u7684\u8ba1\u8d39\u65b9\u5f0f\u3002\u9488\u5bf9\u5927\u5ba2\u6237\uff0c\u53c8\u62cd\u4e91 CDN \u670d\u52a1 \u53ef\u4ee5\u9009\u62e9\u6309\u6708 95 \u8ba1\u8d39\u3001\u7b2c 4 \u5cf0\u503c\u8ba1\u8d39\uff0c\u8ba1\u8d39\u65b9\u5f0f\u9700\u8981\u72ec\u7acb\u914d\u7f6e\u3002\u5982\u9700\u5347\u7ea7\u4e3a\u5927\u5ba2\u6237\uff0c\u8bf7\u8054\u7cfb\u60a8\u7684\u5ba2\u6237\u7ecf\u7406\u3002 \u6708 95 \u5e26\u5bbd\u8ba1\u8d39 CDN \u6bcf 5 \u5206\u949f\u7edf\u8ba1\u4e00\u4e2a\u5e26\u5bbd\u5cf0\u503c\uff08\u5355\u4f4d\uff1aMbps\uff09\uff0c\u4e00\u4e2a\u6708\u6309 30 \u5929\u7b97\uff0c\u6709 288 \uff0a 30 \u4e2a\u70b9\uff0c\u6bcf\u4e00\u4e2a\u6709\u6548\u65e5\uff08\u4ea7\u751f\u6d88\u8017\uff09\u7684\u6240\u6709\u7edf\u8ba1\u70b9\u8fdb\u884c\u6392\u5e8f\uff0c\u628a\u6570\u503c\u6700\u9ad8\u7684 5% \u53bb\u6389\uff0c\u5269\u4e0b\u7684\u6700\u9ad8\u7684\u70b9\u5c31\u662f\u6708 95 \u5cf0\u503c\u8ba1\u8d39\u3002 \u7b2c 4 \u5cf0\u503c\u8ba1\u8d39 \u6bcf\u6708\u6309\u7b2c\u56db\u5cf0\u503c\u5e26\u5bbd\u8ba1\u8d39\u4ee5\u81ea\u7136\u6708\u4e3a\u8ba1\u8d39\u5468\u671f\uff0c\u4ee5\u65e5\u4e3a\u5355\u4f4d\u8fdb\u884c\u5cf0\u503c\u7531\u9ad8\u5230\u4f4e\u6392\u5e8f\uff0c\u53d6\u7b2c\u56db\u9ad8\u5cf0\u503c\u4e3a\u8be5\u81ea\u7136\u6708\u5e26\u5bbd\u503c\u8fdb\u884c\u8ba1\u8d39\u3002 \u6708\u6d41\u91cf\u8ba1\u8d39 \u6708\u5ea6\u7d2f\u8ba1\u4f7f\u7528\u7684\u6240\u6709\u6d41\u91cf\u548c\uff0c\u6839\u636e\u5408\u540c\u4ef7\u683c\u8ba1\u7b97\u8d39\u7528\uff0c\u6d41\u91cf\u8ba1\u8d39\u5355\u4ef7\u8bf7\u53c2\u89c1\uff3b\u666e\u901a\u8ba1\u8d39\u65b9\u5f0f\uff3d\u91cc\u9762\u7684\u6d41\u91cf\u5355\u4ef7\u3002 \u8be6\u7ec6\u62a5\u4ef7\u4ee5\u53ca\u8ba1\u8d39\u914d\u7f6e\uff0c\u8bf7\u54a8\u8be2\u60a8\u7684\u5ba2\u6237\u7ecf\u7406\u3002","title":"\u4ef7\u683c\u603b\u89c8"},{"location":"cdn/buy/#cdn","text":"\u6d41\u91cf\u5305\u8bf4\u660e \u91c7\u7528\u3010\u6d41\u91cf\u8ba1\u8d39\u3011\u6a21\u5f0f\u7684\u5ba2\u6237\uff0c\u53ef\u4ee5\u8d2d\u4e70\u6d41\u91cf\u5305\u8fdb\u884c\u62b5\u6263\u3002\u7cfb\u7edf\u5728\u8ba1\u8d39\u65f6\u4f1a\u4f18\u5148\u62b5\u6263\u6d41\u91cf\u5305\uff0c\u8d85\u51fa\u90e8\u5206\u518d\u7ee7\u7eed\u6309\u7167\u9636\u68af\u4ef7\u683c\u8fdb\u884c\u8ba1\u8d39\u3002\u6d41\u91cf\u5305\u89c4\u683c\u5982\u4e0b\u8868\u6240\u793a\uff1a \u6d41\u91cf\u5305\u89c4\u683c \u4ef7\u683c\uff08\u5143/\u4e2a\uff09 \u6298\u6263\u6bd4\u4f8b \u6709\u6548\u671f 100GB 20.00 69\u6298 3\u4e2a\u6708 500GB 100.00 69\u6298 3\u4e2a\u6708 1TB 270.00 91\u6298 3\u4e2a\u6708 2TB 540.00 91\u6298 3\u4e2a\u6708 5TB 1335.00 90\u6298 3\u4e2a\u6708 10TB 2670.00 90\u6298 3\u4e2a\u6708 \u6d41\u91cf\u5305\u4f18\u60e0\u6d3b\u52a8\u706b\u70ed\u8fdb\u884c\u4e2d\uff0c \u70b9\u51fb\u8d2d\u4e70 \u3002 \u6298\u6263\u8bf4\u660e \u6d41\u91cf\u5305\u8d2d\u4e70\u5f53\u65e5\u751f\u6548\uff0c\u666e\u901a\u6d41\u91cf\u5305\u7684\u6709\u6548\u671f\u4e3a\u81ea\u8d2d\u4e70\u65e5\u8d77 3 \u4e2a\u6708\uff0c\u6d41\u91cf\u4e00\u65e6\u8fc7\u671f\u5219\u65e0\u6cd5\u8fdb\u884c\u62b5\u6263\uff1b 100GB\u3001500GB \u5c5e\u4e8e\u7279\u60e0\u6d41\u91cf\u5305\uff0c\u53ea\u80fd\u4e8c\u9009\u4e00\uff0c\u4e14\u5728\u6709\u6548\u671f\u4e09\u4e2a\u6708\u5185\u4ec5\u53ef\u8d2d\u4e70\u4e00\u6b21\uff1b \u8d2d\u4e70\u6307\u5f15 \u6d41\u91cf\u5305\u4f18\u60e0\u6d3b\u52a8\u706b\u70ed\u8fdb\u884c\u4e2d\uff0c\u53ef \u70b9\u51fb\u8d2d\u4e70 \u3002 \u7b2c\u4e00\u6b65\uff1a\u767b\u9646 CDN \u63a7\u5236\u53f0 \uff0c\u8fdb\u5165\u300c\u8d39\u7528\u4e2d\u5fc3\u300d\u529f\u80fd\u6a21\u5757\uff0c\u9009\u62e9\u300c\u6d41\u91cf\u5305\u7ba1\u7406\u300d\u6a21\u5757\uff0c\u70b9\u51fb\u3010\u8d2d\u4e70\u6d41\u91cf\u5305\u3011\u6309\u94ae\u5373\u53ef\u5f00\u59cb\u8d2d\u4e70\uff0c\u5982\u622a\u56fe\u6240\u793a\uff1a \u7b2c\u4e8c\u6b65\uff1a\u8fdb\u5165\u3010\u6d41\u91cf\u5305\u3011\u8d2d\u4e70\u754c\u9762\uff0c\u9009\u62e9\u9700\u8981\u8d2d\u4e70\u7684\u6d41\u91cf\u5305\u89c4\u683c\uff1a \u7b2c\u4e09\u6b65\uff1a\u8fdb\u5165\u4ea7\u54c1\u8d2d\u4e70\u4fe1\u606f\u6838\u5bf9\u9875\u9762\uff0c\u70b9\u51fb\u3010\u786e\u8ba4\u8d2d\u4e70\u3011\u5373\u53ef\u3002 \u4f9d\u6b21\u8d70\u5b8c\u63a5\u4e0b\u6765\u7684\u8d2d\u4e70\u6d41\u7a0b\u5373\u53ef\u3002","title":"CDN\u6d41\u91cf\u5305"},{"location":"cdn/config/","text":"\u53c8\u62cd\u4e91 CDN \u670d\u52a1\u652f\u6301\u591a\u9879\u529f\u80fd\u81ea\u5b9a\u4e49\u914d\u7f6e\uff0c\u60a8\u53ef\u4ee5\u6839\u636e\u81ea\u8eab\u4e1a\u52a1\u9700\u8981\u8fdb\u884c\u8bbe\u7f6e\uff0c\u4f18\u5316\u60a8\u7684 CDN \u52a0\u901f\u6548\u679c\u6216\u914d\u5408\u5b9e\u73b0\u67d0\u4e9b\u4e1a\u52a1\u903b\u8f91\u3002 1.\u57df\u540d\u7ba1\u7406 \u00b6 1.1 \u57fa\u672c\u4fe1\u606f \u00b6 \u529f\u80fd\u8bf4\u660e \u901a\u8fc7\u8be5\u6a21\u5757\uff0c\u53ef\u4ee5\u67e5\u770b\u670d\u52a1\u7684\u57fa\u672c\u4fe1\u606f\uff0c\u5305\u62ec\uff1a\u670d\u52a1\u540d\u79f0\u3001\u521b\u5efa\u65f6\u95f4\u3001\u670d\u52a1\u72b6\u6001\u3001\u5e94\u7528\u573a\u666f\u7b49\u76f8\u5173\u4fe1\u606f\u3002\u6b64\u5904\u53ef\u4ee5\u5feb\u901f\u83b7\u53d6\u670d\u52a1\u7684 CNAME \u5730\u5740\uff0c\u65b9\u4fbf\u8fdb\u884c CDN \u5207\u6362\u3002 \u67e5\u770b\u5f15\u5bfc \u767b\u9646 CDN \u63a7\u5236\u53f0 \uff0c\u8fdb\u5165\u300c\u57df\u540d\u7ba1\u7406\u300d\u529f\u80fd\u6a21\u5757\uff0c\u627e\u5230\u300c\u57fa\u672c\u4fe1\u606f\u300d\u4e00\u680f\uff0c\u5373\u53ef\u67e5\u8be2\u670d\u52a1\u57fa\u672c\u4fe1\u606f\uff0c\u5982\u4e0b\u56fe\u6240\u793a\uff1a 1.2 \u52a0\u901f\u57df\u540d \u00b6 \u529f\u80fd\u8bf4\u660e \u5728\u540c\u4e00\u4e2a\u670d\u52a1\u4e0b\u9762\uff0c\u5982\u679c\u56de\u6e90\u5730\u5740\u76f8\u540c\uff08 \u4e5f\u5373\u5171\u7528\u540c\u4e00\u4e2a\u6e90\u7ad9 \uff09\uff0c\u6b64\u65f6\u53ef\u4ee5\u7ed1\u5b9a\u591a\u4e2a\u81ea\u6709\u57df\u540d\u3002\u9664\u5e38\u89c4\u5f62\u5f0f\u7684\u57df\u540d\u5916\uff0c\u8fd8\u652f\u6301\u7ed1\u5b9a\u591a\u4e2a\u6cdb\u57df\u540d\uff0c\u6bd4\u5982\uff1a*.yourdomain.com\u3002\u7279\u522b\u5730\uff0c\u5176\u4e2d * \u6700\u591a\u652f\u6301\u5339\u914d 4 \u5c42\uff1a [\u221a] *.yourdomain.com => foo.yourdomain.com [\u221a] *.yourdomain.com => bar.yourdomain.com [\u221a] *.yourdomain.com => foo.bar.yourdomain.com [\u221a] *.yourdomain.com => foo.bar.baz.yourdomain.com [\u221a] *.yourdomain.com => foo.bar.baz.qux.yourdomain.com [x] *.yourdomain.com => foo.bar.baz.qux.quxx.yourdomain.com [\u221a] *.bar.yourdomain.com => foo.bar.yourdomain.com [\u221a] *.bar.yourdomain.com => baz.foo.bar.yourdomain.com [x] *.bar.yourdomain.com => foo.bar.baz.yourdomain.com \u63d0\u793a\uff1a\u4ee5\u4e0a [\u221a] \u7279\u6307\u6cdb\u57df\u540d\u5bf9\u5e94\u7684\u6b63\u786e\u793a\u4f8b\uff0c\u53cd\u4e4b [x] \u4e3a\u4e0d\u6b63\u786e\u7684\u3002 \u64cd\u4f5c\u5f15\u5bfc \u52a0\u901f\u57df\u540d\u7684\u7ba1\u7406\u6709\u57df\u540d\u7ed1\u5b9a\u3001\u5220\u9664\u57df\u540d\u7b49\u64cd\u4f5c\uff0c\u60a8\u53ef\u4ee5\u901a\u8fc7\u8be5\u6a21\u5757\u6765\u7ba1\u7406\u60a8\u7684\u57df\u540d\u3002\u60a8\u53ef\u767b\u9646 CDN \u63a7\u5236\u53f0 \uff0c\u8fdb\u5165\u300c\u57df\u540d\u7ba1\u7406\u300d\u529f\u80fd\u6a21\u5757\uff0c\u627e\u5230\u300c\u52a0\u901f\u57df\u540d\u300d\u4e00\u680f\uff0c\u5373\u53ef\u8fdb\u884c\u5982\u4e0b\u64cd\u4f5c\uff1a 1.\u7ed1\u5b9a\u57df\u540d \u7b2c\u4e00\u6b65\uff1a\u70b9\u51fb\u3010\u57df\u540d\u7ed1\u5b9a\u3011\u6309\u94ae \u7b2c\u4e8c\u6b65\uff1a\u586b\u5199\u5f85\u6dfb\u52a0\u7684\u57df\u540d \u70b9\u51fb\u3010\u6dfb\u52a0\u3011\u6309\u94ae\uff0c\u5373\u53ef\u6dfb\u52a0\u5f85\u7ed1\u5b9a\u7684\u57df\u540d\u3002 \u7b2c\u4e09\u6b65\uff1a\u67e5\u770b\u5df2\u6dfb\u52a0\u57df\u540d\u7684\u72b6\u6001 \u5982\u679c\u6b64\u65f6\u5df2\u7ecf\u6dfb\u52a0\u7684\u57df\u540d\u4e3a\u3010\u6b63\u5e38\u3011\u72b6\u6001\uff0c\u5219\u5df2\u5ba1\u6838\u901a\u8fc7\uff0c\u5982\u679c\u4e3a\u3010\u62d2\u7edd\u3011\u72b6\u6001\uff0c\u5219\u6b64\u65f6\u57df\u540d\u53ef\u80fd\u672a\u5907\u6848\uff0c\u672a\u88ab\u5ba1\u6838\u901a\u8fc7\u3002 2.\u5220\u9664\u57df\u540d \u7b2c\u4e00\u6b65\uff1a\u70b9\u51fb\u3010\u5220\u9664\u3011\u6309\u94ae \u7b2c\u4e8c\u6b65\uff1a\u5f85\u5220\u9664\u57df\u540d\u786e\u8ba4 \u70b9\u51fb\u3010\u5220\u9664\u3011\u6309\u94ae\u5373\u53ef\u5c06\u8be5\u57df\u540d\u8fdb\u884c\u5220\u9664\u3002 \u6ce8\u610f\u4e8b\u9879 \u4e00\u4e2a\u670d\u52a1\u53ef\u4ee5\u7ed1\u5b9a\u591a\u4e2a\u57df\u540d\uff0c\u4e14\u6700\u591a\u652f\u6301\u7ed1\u5b9a 10 \u4e2a\u81ea\u6709\u57df\u540d\uff0c\u5f85\u7ed1\u5b9a\u7684\u57df\u540d\u9700\u8981\u5df2\u5907\u6848\uff0c\u5426\u5219\u4f1a\u65e0\u6cd5\u901a\u8fc7\u5ba1\u6838\uff1b \u57df\u540d\u5ba1\u6838\u901a\u5e38\u5728 1 \u5c0f\u65f6\u4ee5\u5185\u5b8c\u6210\uff0c\u5ba1\u6838\u901a\u8fc7\u4e4b\u540e\u7684\u72b6\u6001\u4e3a\u201c\u6b63\u5e38\u201d\uff0c\u8bf7\u5728\u5ba1\u6838\u901a\u8fc7\u4e4b\u540e\u518d\u8fdb\u884c CNAME \u5207\u6362\uff1b \u65b0\u5907\u6848\u57df\u540d\u7531\u4e8e\u4fe1\u606f\u540c\u6b65\u6709\u5ef6\u65f6\uff0c\u8bf7\u5728\u5907\u6848 1-2 \u5929\u540e\u518d\u8fdb\u884c\u7ed1\u5b9a\uff0c\u5426\u5219\u4f1a\u5bfc\u81f4\u57df\u540d\u5ba1\u6838\u65f6\u65e0\u6cd5\u67e5\u8be2\u5907\u6848\u4fe1\u606f\u800c\u88ab\u62d2\u7edd\uff1b \u5e73\u53f0\u5c06\u5b9a\u671f\u68c0\u67e5\u57df\u540d\u662f\u5426\u5907\u6848\uff0c\u5f53\u6709\u4e00\u4e2a\u57df\u540d\u5907\u6848\u8fc7\u671f\u6216\u5931\u6548\u65f6\uff0c\u4e3a\u786e\u4fdd\u6b63\u5e38\u8bbf\u95ee\uff0c\u57df\u540d\u6240\u5728\u670d\u52a1\u5c06\u4e34\u65f6\u89e3\u6790\u5230\u53c8\u62cd\u4e91\u6d77\u5916\u52a0\u901f\u8282\u70b9\uff0c\u671f\u95f4\u6240\u4ea7\u751f\u7684\u8bbf\u95ee\u6d41\u91cf\u5c06\u6309\u6d77\u5916\u5b9a\u4ef7\u8ba1\u8d39\uff1b7 \u5929\u4e4b\u540e\uff0c\u5982\u679c\u5907\u6848\u4ecd\u4e3a\u5931\u6548\uff0c\u8be5\u57df\u540d\u7ed1\u5b9a\u72b6\u6001\u5c06\u53d8\u4e3a\u201c\u62d2\u7edd\u201d\u72b6\u6001\uff0cCDN \u4f1a\u8fd4\u56de 400 \u72b6\u6001\u7801\uff1b 1.3 \u6d4b\u8bd5\u57df\u540d \u00b6 \u529f\u80fd\u8bf4\u660e \u4e3a\u4e86\u914d\u5408\u53c8\u62cd\u4e91\u5b58\u50a8\u4ee5\u53ca CDN \u670d\u52a1\u4f7f\u7528\uff0c\u53c8\u62cd\u4e91\u63d0\u4f9b\u4e86\u6d4b\u8bd5\u57df\u540d\uff0c\u4ec5\u7528\u4e8e\u6d4b\u8bd5\u670d\u52a1\u7684\u53ef\u7528\u6027\u3002\u5173\u4e8e\u6d4b\u8bd5\u57df\u540d\u7684\u4f7f\u7528\u89c4\u8303\u53ca\u6ce8\u610f\u4e8b\u9879\uff0c\u8fd9\u91cc\u8bf4\u660e\u5982\u4e0b\uff1a \u65b0\u521b\u5efa\u7684\u670d\u52a1\u542f\u7528\u65b0\u7684\u6d4b\u8bd5\u57df\u540d\uff08\u547d\u540d\u89c4\u5219\u4e3a\uff1a\u670d\u52a1\u540d\u79f0.test.upcdn.net\uff09\uff1b \u8001\u7684\u5b58\u50a8\u53ca CDN \u670d\u52a1\uff0c\u6d4b\u8bd5\u57df\u540d\u7684\u683c\u5f0f\u4e3a\uff1a\u670d\u52a1\u540d\u79f0.b0.upaiyun.com\uff0c\u4ecd\u53ef\u7ee7\u7eed\u4f7f\u7528\uff0c\u4f46\u662f\u9650\u4e8e\u6d4b\u8bd5\u57df\u540d\u662f\u516c\u5171\u8d44\u6e90\uff0c\u53ef\u80fd\u4f1a\u53d7\u5230\u5176\u4ed6\u7528\u6237\u5f71\u54cd\uff0c\u5df2\u7ecf\u7528\u4e8e\u6b63\u5f0f\u751f\u4ea7\u73af\u5883\u7684\u7528\u6237\uff0c\u8bf7\u5c3d\u5feb\u5c06\u4e1a\u52a1\u5207\u6362\u5230\u81ea\u6709\u7ed1\u5b9a\u7684\u57df\u540d\uff1b \u6d4b\u8bd5\u57df\u540d\u6709\u8bf8\u591a\u9650\u5236\uff08\u4f8b\u5982\uff1a\u9650\u901f\u3001\u9650\u5236 CDN \u8282\u70b9\u6570\u91cf\uff09\uff0c\u4e0d\u80fd\u7528\u4e8e\u6b63\u5f0f\u7684\u751f\u4ea7\u73af\u5883\uff0c\u4ec5\u4f9b\u6d4b\u8bd5\u4f7f\u7528\uff0c\u5b9e\u9645\u7ebf\u4e0a\u4e1a\u52a1\u8bf7\u7ed1\u5b9a\u81ea\u6709\u57df\u540d\u3002 \u67e5\u770b\u5f15\u5bfc \u60a8\u53ef\u767b\u9646 CDN \u63a7\u5236\u53f0 \uff0c\u8fdb\u5165\u300c\u57df\u540d\u7ba1\u7406\u300d\u529f\u80fd\u6a21\u5757\uff0c\u627e\u5230\u300c\u52a0\u901f\u57df\u540d\u300d\u4e00\u680f\uff0c\u5373\u53ef\u67e5\u770b\uff1a 2.\u56de\u6e90\u7ba1\u7406 \u00b6 2.1 \u6e90\u7ad9\u8bbe\u7f6e \u00b6 \u6e90\u7ad9\u8bbe\u7f6e\u4e3b\u8981\u662f\u5bf9\u8d44\u6e90\u6587\u4ef6\u7684\u56de\u6e90\u5730\u5740\u8fdb\u884c\u7ba1\u7406\u4ee5\u53ca\u914d\u5408\u6e90\u7ad9\u5b9e\u9645\u8d44\u6e90\u60c5\u51b5\u8fdb\u884c\u4e00\u4e9b\u66f4\u9ad8\u7ea7\u7684\u8bbe\u7f6e\uff0c\u5305\u62ec\u4e3b\u5907\u7ebf\u8def\u3001\u7aef\u53e3\u53f7\u3001\u8f6e\u8be2\u6743\u91cd\u7b49\u3002\u5176\u4e2d\uff0c\u56de\u6e90\u5730\u5740\u652f\u6301 IP \u6e90\u7ad9\u548c\u57df\u540d\u6e90\u7ad9\uff0c\u4f8b\u5982\uff1a IP\uff1a1.1.1.1 \u57df\u540d\uff1asrc.example.com \u9488\u5bf9\u56de\u6e90\u5730\u5740\u4e3a\u57df\u540d\u6e90\u7ad9\u7684\u60c5\u51b5\uff0cCDN \u8282\u70b9\u4f1a\u8fdb\u884c\u4e00\u6b21 DNS \u89e3\u6790\uff0c\u89e3\u6790\u5230\u7684 IP \u5373\u4e3a\u771f\u5b9e\u7684\u56de\u6e90\u5730\u5740\u3002 \u56de\u6e90\u534f\u8bae \u56de\u6e90\u534f\u8bae\u987e\u540d\u601d\u4e49\u4e5f\u5c31\u662f CDN \u8282\u70b9\u56de\u6e90\u4f7f\u7528\u7684\u534f\u8bae\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0cCDN \u4f1a\u4ee5 HTTP \u534f\u8bae\u56de\u6e90\uff0c\u60a8\u4e5f\u53ef\u4ee5\u91c7\u7528 HTTPS \u534f\u8bae\u56de\u6e90\u3002 \u914d\u7f6e\u5f15\u5bfc \u767b\u9646 CDN \u63a7\u5236\u53f0 \uff0c\u8fdb\u5165 \u300c\u56de\u6e90\u7ba1\u7406\u300d\u9875\u9762\uff0c\u627e\u5230\u300c\u6e90\u7ad9\u8bbe\u7f6e\u300d\u914d\u7f6e\u9879\uff0c\u70b9\u51fb\u3010\u7ba1\u7406\u3011\u6309\u94ae\u8fdb\u5165\u7ba1\u7406\u9875\u9762\uff1a \u901a\u8fc7\u914d\u7f6e\u9879\u53ef\u4ee5\u770b\u5230\uff0cCDN \u6709\u4e09\u79cd\u56de\u6e90\u65b9\u5f0f\uff0c\u5206\u522b\u4e3a\uff1a 1\u3001HTTP \u56de\u6e90 \u9ed8\u8ba4\u91c7\u7528 HTTP \u534f\u8bae\u56de\u6e90\uff0c\u6b64\u65f6\u56de\u6e90\u5730\u5740\u7684\u7aef\u53e3\u53f7\u9ed8\u8ba4\u4e3a 80\u3002 2\u3001HTTPS \u56de\u6e90 \u4e5f\u53ef\u4ee5\u9009\u62e9 HTTPS \u534f\u8bae\u56de\u6e90\uff0c\u9009\u62e9 HTTPS \u534f\u8bae\u56de\u6e90\u65f6\uff0c\u7aef\u53e3\u53f7\u4f1a\u53d8\u4e3a 443 \u7aef\u53e3\u3002 3\u3001\u534f\u8bae\u8ddf\u968f\uff08following\uff09 \u5f53\u542f\u7528\u8be5\u7279\u6027\u65f6\uff0c\u56de\u6e90\u534f\u8bae\u59cb\u7ec8\u4f1a\u548c\u5ba2\u6237\u7aef\u8bbf\u95ee CDN \u7684\u534f\u8bae\u4fdd\u6301\u4e00\u81f4\uff0c\u5373\u5ba2\u6237\u7aef\u7528 HTTP \u534f\u8bae\u8bbf\u95ee CDN\uff0c\u90a3\u4e48 CDN \u56de\u6e90\u65f6\u4e5f\u4f1a\u7528 HTTP \u534f\u8bae\u8fdb\u884c\u56de\u6e90\uff0c\u540c\u6837\uff0c\u82e5\u91c7\u7528 HTTPS \u8bbf\u95ee\uff0c\u90a3\u4e48\u56de\u6e90\u4e5f\u662f HTTPS\u3002 \u8865\u5145: \u56de\u6e90\u8ddf\u968f 301/302 \u914d\u7f6e \u82e5\u57df\u540dcloud.tencent.com\uff0c\u5f00\u542f\u56de\u6e90\u8ddf\u968f\uff1a \u7528\u6237 A \u8bf7\u6c42\u8d44\u6e90\uff1ahttp://cloud.tencent.com/1.jpg\uff0c\u5728\u8282\u70b9\u672a\u547d\u4e2d\u7f13\u5b58\uff0c\u5219\u8282\u70b9\u4f1a\u8bf7\u6c42\u6e90\u7ad9\u83b7\u53d6\u6240\u9700\u8d44\u6e90\uff0c\u82e5\u6e90\u7ad9\u8fd4\u56de\u7684 HTTP Response \u72b6\u6001\u7801\u4e3a302\uff0c\u8df3\u8f6c\u6307\u5411\u5730\u5740\u4e3a http://cloud.tencent.com/2.jpg \uff0c\u5219\uff1a 1. \u5f00\u542f\u56de\u6e90\u8ddf\u968f301/302\u914d\u7f6e\u540e\uff0c\u8282\u70b9\u6536\u5230\u72b6\u6001\u7801\u4e3a301/302\u7684 HTTP Response \u540e\uff0c\u4f1a\u76f4\u63a5\u5411\u8df3\u8f6c\u6307\u5411\u7684\u5730\u5740\u53d1\u8d77\u8bf7\u6c42\u3002 2. \u83b7\u53d6\u5230\u6240\u9700\u8d44\u6e90\u540e\uff0c\u7f13\u5b58\u81f3\u8282\u70b9\uff0c\u5e76\u8fd4\u56de\u7ed9\u7528\u6237\u3002 3. \u6b64\u65f6\u7528\u6237 B \u4e5f\u5411http://cloud.tencent.com/1.jpg\u53d1\u8d77\u8bf7\u6c42\uff0c\u5219\u4f1a\u5728\u8282\u70b9\u76f4\u63a5\u547d\u4e2d\u5e76\u8fd4\u56de\u7ed9\u7528\u6237\u3002 4. \u5f00\u542f\u56de\u6e90\u8ddf\u968f301/302\u914d\u7f6e\u540e\uff0c\u6700\u591a\u4ec5\u8ddf\u968f3\u6b21\u8df3\u8f6c\uff0c\u8d85\u51fa\u9650\u5236\u5219\u4f1a\u76f4\u63a5\u8fd4\u56de301/302\u7ed9\u5ba2\u6237\u3002 \u82e5\u57df\u540dcloud.tencent.com\uff0c\u672a\u5f00\u542f\u56de\u6e90\u8ddf\u968f\uff1a \u7528\u6237 A \u8bf7\u6c42\u8d44\u6e90\uff1ahttp://cloud.tencent.com/1.jpg\uff0c\u5728\u8282\u70b9\u672a\u547d\u4e2d\u7f13\u5b58\uff0c\u5219\u8282\u70b9\u4f1a\u8bf7\u6c42\u6e90\u7ad9\u83b7\u53d6\u6240\u9700\u8d44\u6e90\uff0c\u82e5\u6e90\u7ad9\u8fd4\u56de\u7684 HTTP Response \u72b6\u6001\u7801\u4e3a301/302\uff0c\u8df3\u8f6c\u6307\u5411\u5730\u5740\u4e3ahttp://xxx.tencent.com/1.jpg\uff0c\u5219\uff1a 1. \u8282\u70b9\u5c06\u8be5 HTTP Response \u76f4\u63a5\u8fd4\u56de\u7ed9\u7528\u6237\u3002 2. \u7528\u6237\u5411http://xxx.tencent.com/1.jpg\u53d1\u8d77\u8bf7\u6c42\uff0c\u82e5\u8be5\u57df\u540d\u672a\u63a5\u5165 CDN\uff0c\u5219\u4e0d\u4f1a\u6709\u52a0\u901f\u6548\u679c\u3002 3. \u82e5\u6b64\u65f6\u7528\u6237 B \u4e5f\u5411http://cloud.tencent.com/1.jpg \u53d1\u8d77\u8bf7\u6c42\uff0c\u5219\u4f1a\u91cd\u590d\u4e0a\u8ff0\u6d41\u7a0b\u3002 \u6ce8\u610f\u4e8b\u9879 \u7279\u522b\u5730\uff0c\u56de\u6e90\u5730\u5740\u7684\u7aef\u53e3\u53f7\u914d\u7f6e\u5c06\u4ec5\u4f5c\u7528\u4e8e\u56de\u6e90\u534f\u8bae\u4e3a HTTP \u7684\u60c5\u51b5\uff0c\u9ed8\u8ba4 \u4e3a 80 \u7aef\u53e3\uff1b\u5f53\u7136\u4f60\u4e5f\u53ef\u4ee5\u81ea\u5b9a\u4e49\u4e3a\u5176\u4ed6\u503c\uff0c\u4f8b\u5982 8080 \u6216 8443\u3002 \u5f53\u56de\u6e90\u534f\u8bae\u4e3a HTTPS \u65f6\uff0c\u7aef\u53e3\u53f7\u5219\u59cb\u7ec8\u56fa\u5b9a\u4e3a 443\uff0c\u4e14\u76ee\u524d\u6682\u65f6\u4e0d\u652f\u6301\u4fee\u6539\u6b64\u56fa\u5b9a\u503c\uff1b \u82e5\u4e4b\u524d\u9009\u62e9 HTTPS \u534f\u8bae\u56de\u6e90 \u4e14\u81ea\u5b9a\u4e49\u8bbe\u7f6e\u8fc7\u7aef\u53e3\u53f7\u7684\u7528\u6237\u9700\u8981\u6ce8\u610f\uff0c\u5207\u6362\u5230 \u534f\u8bae\u8ddf\u968f \u6a21\u5f0f\u4e0b\u65f6\uff0c\u81ea\u5b9a\u4e49\u7684\u7aef\u53e3\u53f7\u5c06\u4ec5\u4f5c\u7528\u4e8e\u56de\u6e90\u534f\u8bae\u4e3a HTTP \u7684\u60c5\u51b5\u3002 \u5206\u7247\u56de\u6e90 \u5206\u7247\u56de\u6e90\u4f7f\u7528\u573a\u666f\uff1a\u5927\u6587\u4ef6 \u5f00\u542f\uff1a\u5f53\u5f00\u542f\u5206\u7247\u56de\u6e90\u65f6\uff0c\u56de\u6e90\u8bf7\u6c42\u65f6\u5c06\u4f7f\u7528 range \u56de\u6e90\u8bf7\u6c42\u3002\u5f00\u542f\u540e\uff0c\u5f53\u7528\u6237\u8bf7\u6c42\u672a\u643a\u5e26 range \u8bf7\u6c42\u65f6\uff0c\u5982\u679c\u8bf7\u6c42\u6587\u4ef6\u5927\u4e8e4M\uff0c CDN \u8282\u70b9\u5c06\u6309\u71671M\u7684\u5206\u7247\u5927\u5c0f\u56de\u6e90\u5206\u7247\u8bf7\u6c42\uff0c\u5982\u679c\u6587\u4ef6\u5c0f\u4e8e4M\uff0c\u5219CDN\u8282\u70b9\u5c06\u56de\u6e90\u62c9\u53d6\u5b8c\u6574\u6587\u4ef6\u3002\u5f53\u7528\u6237\u8bf7\u6c42\u643a\u5e26 range \u8bf7\u6c42\u65f6\uff0c \u5c06\u6309\u7167\u643a\u5e26\u7684 range \u8bf7\u6c42\u8fdb\u884c\u56de\u6e90\u8bf7\u6c42\u3002 \u5173\u95ed\uff1a\u5f53\u5173\u95ed\u5206\u7247\u56de\u6e90\u65f6\uff0c\u5f53\u7528\u6237\u8bf7\u6c42\u643a\u5e26 range \u8bf7\u6c42\u65f6\uff0c\u5728 CDN \u6ca1\u6709\u7f13\u5b58\u7684\u60c5\u51b5\u4e0b\uff0c\u56de\u6e90\u8bf7\u6c42\u4ecd\u4f1a\u4f7f\u7528 range \u56de\u6e90\u8bf7\u6c42\u3002 \u6e90\u7ad9\u8bc1\u4e66\u6821\u9a8c \u8868\u793a\u56de\u6e90\u4f1a\u6821\u9a8c\u6e90\u7ad9 SSL \u8bc1\u4e66\u7684\u5408\u6cd5\u6027\uff0c\u4f1a\u6821\u9a8c\u8bc1\u4e66\u662f\u5426\u8fc7\u671f\u3001\u8bc1\u4e66\u57df\u540d\u662f\u5426\u5339\u914d\u3001\u662f\u5426\u662f\u81ea\u7b7e\u540d\u8bc1\u4e66\uff0c\u5982\u679c\u6821\u9a8c\u4e0d\u901a\u8fc7\uff0c\u5219\u4f1a\u62d2\u7edd\u8bbf\u95ee\uff0c\u8fd9\u6837\u6781\u5927\u7684\u4fdd\u969c\u4e86\u56de\u6e90\u5b89\u5168\u6027\u3002 \u7ebf\u8def\u914d\u7f6e \u7ebf\u8def\u914d\u7f6e\u5305\u62ec\u56de\u6e90\u5730\u5740\u3001\u7aef\u53e3\u53f7\u3001\u4e3b\u5907\u7ebf\u8def\u3001\u8f6e\u8be2\u6743\u91cd\u3001\u6700\u5927\u5931\u8d25\u6b21\u6570\u3001\u9759\u9ed8\u65f6\u95f4\u7b49\u9ad8\u7ea7\u8bbe\u7f6e\u3002\u5176\u4e2d\u56de\u6e90\u5730\u5740\u5219\u8868\u793a\u6e90\u7ad9\u5b9e\u9645\u53ef\u8bbf\u95ee\u7684\u7f51\u7edc\u5730\u5740\uff0c\u53ef\u586b IP \u5730\u5740\u6216\u57df\u540d\uff0c\u5982\u679c\u662f\u57df\u540d\u5730\u5740\uff0c\u90a3\u4e48 CDN \u5728\u56de\u6e90\u65f6\u4f1a\u5bf9\u8be5\u57df\u540d\u5730\u5740\u8fdb\u884c DNS \u89e3\u6790\uff0c\u7136\u540e\u9488\u5bf9\u89e3\u6790\u51fa\u6765\u7684 IP \u5730\u5740\u8fdb\u884c\u8bbf\u95ee\uff0c\u56e0\u6b64\u82e5\u89e3\u6790\u5931\u8d25\u5c06\u4f1a\u5bfc\u81f4\u56de\u6e90\u5f02\u5e38\u3002 Tips: \u901a\u5e38\u60c5\u51b5\u4e0b\uff0c\u76f4\u63a5\u4f7f\u7528 IP \u8fdb\u884c\u56de\u6e90\uff0c\u4f46\u662f\u5982\u679c\u5ba2\u6237\u6709\u591a\u4e2a IP\uff0c\u5e76\u4e14 IP \u5730\u5740\u4f1a\u7ecf\u5e38\u53d8\u5316\uff0c\u5bf9\u4e8e CDN \u5382\u5546\u6765\u8bf4\uff0c\u4e3a\u4e86\u907f\u514d\u7ecf\u5e38\u66f4\u6539\u914d\u7f6e\uff08\u56de\u6e90IP\uff09\uff0c\u4f1a\u91c7\u53d6\u56de\u6e90\u57df\u540d\u65b9\u5f0f\u8fdb\u884c\u56de\u6e90\u3002 \u914d\u7f6e\u5f15\u5bfc \u767b\u9646 CDN \u63a7\u5236\u53f0 \uff0c\u8fdb\u5165 \u300c\u56de\u6e90\u7ba1\u7406\u300d\u9875\u9762\uff0c\u627e\u5230\u300c\u6e90\u7ad9\u8bbe\u7f6e\u300d\u914d\u7f6e\u9879\uff0c\u70b9\u51fb\u3010\u7ba1\u7406\u3011\u6309\u94ae\u8fdb\u5165\u7ba1\u7406\u9875\u9762\uff1a \u4ee5\u4e0b\u5c06\u91cd\u70b9\u4ecb\u7ecd\u4e3b\u5907\u7ebf\u8def\u3001\u8f6e\u8be2\u6743\u91cd\u3001\u6700\u5927\u5931\u8d25\u6b21\u6570\u548c\u9759\u9ed8\u65f6\u95f4\uff1a \u4e3b\u3001\u5907\u7ebf\u8def (backup) \u56de\u6e90\u5730\u5740\u914d\u7f6e\u4e2d\u9664\u4e86\u9ed8\u8ba4\u7684 \u4e3b\u7ebf\u8def \u5916\uff0c\u6211\u4eec\u8fd8\u652f\u6301 \u5907\u4efd\u7ebf\u8def \u7684\u914d\u7f6e\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c \u4e3b\u7ebf\u8def \u591a\u4e2a\u56de\u6e90\u5730\u5740\u4f1a\u4ee5 RR \u8f6e\u8be2\u65b9\u5f0f\u8fdb\u884c\u8c03\u5ea6\uff0c\u5f53\u4e14\u4ec5\u5f53\u6240\u6709 \u4e3b\u7ebf\u8def \u56de\u6e90\u5730\u5740\u5747\u4e0d\u53ef\u8fbe\u65f6\uff0c\u6b64\u65f6\u6211\u4eec\u5c06\u4f7f\u7528 \u5907\u4efd\u7ebf\u8def \u8fdb\u884c\u8f6c\u53d1\uff0c\u82e5 \u5907\u4efd\u7ebf\u8def \u6709\u591a\u4e2a\u56de\u6e90\u5730\u5740\uff0c\u90a3\u4e48\u8d1f\u8f7d\u5747\u8861\u65b9\u5f0f\u4e5f\u548c \u4e3b\u7ebf\u8def \u4e00\u6837\uff0c\u4ee5 Round-Robin \u8f6e\u8be2\uff08\u8be6\u60c5\u8bf7\u70b9\u51fb \u94fe\u63a5 \uff09\u65b9\u5f0f\u8fdb\u884c\u8c03\u5ea6\u3002 \u8f6e\u8be2\u6743\u91cd (weight) \u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u8f6e\u8be2\u6743\u91cd\u90fd\u4e3a 1\uff0c\u8868\u793a\u6240\u6709\u56de\u6e90\u5730\u5740\u8f6e\u8be2\u5230\u7684\u6982\u7387\u5747\u7b49\u3002\u5f53\u7136\u4e5f\u53ef\u4ee5\u5982\u4e0a\u56fe\u90a3\u6837\u81ea\u5b9a\u4e49\u8f6e\u8be2\u6743\u91cd\uff0c\u6211\u4eec\u770b\u5230\u4e3b\u7ebf\u8def\u4e24\u4e2a\u56de\u6e90\u5730\u5740\u6743\u91cd\u5206\u522b\u662f 1 \u548c 2\uff0c\u6b64\u65f6\u4e3b\u7ebf\u8def\u96c6\u7fa4\u5728\u8f6e\u8be2\u8c03\u5ea6\u4e2d\u4f1a\u6709 1/3 \u7684\u6982\u7387\u56de 192.168.11.1:80 \u8fd9\u4e2a\u5730\u5740\uff0c\u800c\u56de 192.168.11.2:80 \u8fd9\u4e2a\u5730\u5740\u7684\u6982\u7387\u5219\u4e3a 2/3\u3002\u5373\u5f53\u524d\u56de\u6e90\u5730\u5740\u8f6e\u8be2\u5230\u7684\u6982\u7387\u53ef\u6309\uff08\u5f53\u524d\u8282\u70b9\u6743\u91cd/\u96c6\u7fa4\u6240\u6709\u8282\u70b9\u6743\u91cd\u4e4b\u548c\uff09\u8fd9\u4e2a\u516c\u5f0f\u8ba1\u7b97\u3002 \u6700\u5927\u5931\u8d25\u6b21\u6570\u548c\u9759\u9ed8\u65f6\u95f4 \u8868\u793a\u5728\u4e00\u4e2a \u9759\u9ed8\u65f6\u95f4 \u5185\u5982\u679c\u5bf9\u5e94\u6e90\u7ad9\u7684\u5f02\u5e38\u6b21\u6570\u7d2f\u8ba1\u8fbe\u5230\u5f53\u524d\u8bbe\u7f6e\u7684 \u6700\u5927\u5931\u8d25\u6b21\u6570 \uff0c\u90a3\u4e48\u5728\u4e0b\u4e00\u4e2a \u9759\u9ed8\u65f6\u95f4 \u5185\uff0cCDN \u5c31\u4f1a\u8ba4\u4e3a\u8fd9\u4e2a\u6e90\u7ad9\u5b95\u673a\u4e86\uff0c\u5373\u5728\u8fd9\u6bb5\u65f6\u95f4\u5185\u4e0d\u4f1a\u518d\u5c06\u8bf7\u6c42\u8f6c\u53d1\u7ed9\u5b83\u3002\u7279\u522b\u5730\uff0c\u5f53 \u6700\u5927\u5931\u8d25\u6b21\u6570 \u5176\u503c\u4e3a 0 \u65f6\uff0c\u8868\u793a\u4e0d\u4f1a\u8fdb\u884c\u5931\u8d25\u7d2f\u8ba1\uff0c \u9759\u9ed8\u65f6\u95f4 \u4e5f\u540c\u65f6\u5931\u6548\u3002 \u5408\u7406\u8bbe\u7f6e\u6700\u5927\u5931\u8d25\u6b21\u6570\u548c\u9759\u9ed8\u65f6\u95f4\uff0c\u6709\u52a9\u4e8e\u5728\u6e90\u7ad9\u5f02\u5e38\u7684\u60c5\u51b5\u4e0b\u6700\u5927\u7a0b\u5ea6\u51cf\u5c11\u5bf9\u7ebf\u4e0a\u8bf7\u6c42\u7684\u5f71\u54cd\u3002\u8fd9\u91cc\u5b9e\u9645\u4e0a\u8ddf Nginx \u6838\u5fc3\u7684 upstream \u6a21\u5757\u5b9e\u73b0\u673a\u5236\u7c7b\u4f3c\uff0c\u8fdb\u4e00\u6b65\u4e86\u89e3\u53ef\u53c2\u8003 \u94fe\u63a5 \u3002 \u6ce8\u610f\u4e8b\u9879 \u5173\u4e8e\u4e3b\u3001\u5907\u56de\u6e90\uff0c\u5f53\u4e3b\u6e90\u51fa\u73b0\u9519\u8bef\u65f6\uff0cPOST \u4ee5\u53ca\u5e26 BODY \u7684 GET \u65b9\u6cd5\u7684\u8bf7\u6c42\u4e0d\u4f1a\u56de\u5907\u6e90\u8fdb\u884c\u91cd\u8bd5\u64cd\u4f5c\u3002 2.2 \u56de\u6e90 Host \u00b6 \u529f\u80fd\u8bf4\u660e \u8be5\u914d\u7f6e\u662f\u6307 CDN \u8282\u70b9\u56de\u6e90\u8fc7\u7a0b\u4e2d\u6240\u9700\u8bbf\u95ee\u7684\u6e90\u7ad9\u670d\u52a1\u5668 Web \u7ad9\u70b9\u8d44\u6e90\u7684\u8bbf\u95ee\u57df\u540d\u3002CDN \u8282\u70b9\u56de\u6e90\u65f6\u4f1a\u5728 HTTP \u8bf7\u6c42\u5934 Host \u5b57\u6bb5\u91cc\u66ff\u6362\u8be5\u57df\u540d\uff0c\u4ee5\u652f\u6301\u6e90\u670d\u52a1\u5668\u53ef\u901a\u8fc7\u6b64 Host \u505a\u7684\u7279\u6b8a\u5904\u7406\u903b\u8f91\uff0c\u4e00\u822c\u662f\u57df\u540d\u5f62\u5f0f\u7684\u5b57\u7b26\u4e32\uff0c\u5f53\u7136\u4e5f\u652f\u6301\u4efb\u610f\u5b57\u7b26\u4e32\u5f62\u5f0f\u3002 \u914d\u7f6e\u5f15\u5bfc \u767b\u9646 CDN \u63a7\u5236\u53f0 \uff0c\u8fdb\u5165 \u300c\u56de\u6e90\u7ba1\u7406\u300d\u914d\u7f6e\u9875\u9762\uff0c\u627e\u5230\u300c\u56de\u6e90 Host\u300d\u914d\u7f6e\u9879\uff0c\u70b9\u51fb\u3010\u7ba1\u7406\u3011\u6309\u94ae\u8fdb\u5165\u7ba1\u7406\u9875\u9762\uff1a \u5982\u4e0a\u622a\u56fe\u6240\u793a\uff0c\u56de\u6e90 Host \u914d\u7f6e\u4e3a\uff1a src.image.upyun.com 1.\u56de\u6e90 Host \u4e3a\u53ef\u9009\u914d\u7f6e\u9879\uff0c\u9ed8\u8ba4\u4e3a\u7a7a\u3002\u7279\u522b\u5730\uff0c\u5982\u679c\u8be5\u81ea\u5b9a\u4e49\u503c\u4e3a\u7a7a\uff0c\u5b50\u57df\u540d\u7684\u56de\u6e90 Host \u4e3a\u6240\u914d\u7f6e\u7684\u52a0\u901f\u57df\u540d\uff0c\u6cdb\u57df\u540d\u56de\u6e90 Host \u4e3a\u8bbf\u95ee\u57df\u540d\uff1b 2.\u81ea\u5b9a\u4e49\u914d\u7f6e\uff1a\u60a8\u53ef\u4ee5\u6839\u636e\u4e1a\u52a1\u60c5\u51b5\u914d\u7f6e\u56de\u6e90 Host\uff0c\u6ee1\u8db3\u7279\u5b9a\u4e1a\u52a1\u9700\u6c42\uff1b \u6ce8\u610f\u4e8b\u9879 \u56de\u6e90 Host \u914d\u7f6e\u76ee\u524d\u4ec5\u652f\u6301\u4f7f\u7528\u81ea\u6709\u6e90\u63a5\u5165\u7684 CDN \u670d\u52a1\uff1b \u914d\u7f6e\u81ea\u5b9a\u4e49\u56de\u6e90 Host \u4e4b\u540e\uff0c\u8bf7\u4fdd\u8bc1\u8be5\u57df\u540d\u53ef\u4ee5\u6b63\u5e38\u8bbf\u95ee\uff0c\u5426\u5219\u4f1a\u51fa\u73b0\u56de\u6e90\u5931\u8d25\u7684\u60c5\u51b5\uff1b \u56de\u6e90\u5730\u5740\u548c\u56de\u6e90 Host \u7684\u533a\u522b\uff1a\u56de\u6e90\u5730\u5740\u662f CDN \u8282\u70b9\u56de\u6e90\u65f6\u80fd\u591f\u627e\u5230\u5bf9\u5e94\u7684\u6e90\u7ad9\u670d\u52a1\u5668\uff0c\u6e90\u7ad9\u53ef\u80fd\u6709\u591a\u4e2a Web \u7ad9\u70b9\uff0c\u56de\u6e90 Host \u5219\u6307\u660e\u4e86\u8d44\u6e90\u6240\u5728\u7684\u7ad9\u70b9\u3002 2.3 \u6e90\u7ad9\u8d44\u6e90\u8fc1\u79fb \u00b6 \u529f\u80fd\u8bf4\u660e \u6e90\u7ad9\u8d44\u6e90\u8fc1\u79fb\u529f\u80fd\u7684\u573a\u666f\u662f\u65e0\u7f1d\u5c06\u7528\u6237\u6e90\u7ad9\u9759\u6001\u8d44\u6e90\u8fc1\u79fb\u5230\u53c8\u62cd\u4e91\u5b58\u50a8\u4e0a\u6765\uff0c\u5f53\u4e0b\u6b21\u7ec8\u7aef\u7528\u6237\u8bbf\u95ee\u76f8\u540c\u8d44\u6e90\u65f6\uff0cCDN \u5c06\u76f4\u63a5\u8fd4\u56de\u5df2\u7ecf\u8fc1\u79fb\u5230\u4e91\u5b58\u50a8\u4e0a\u7684\u8d44\u6e90\u6587\u4ef6\uff0c\u800c\u65e0\u9700\u56de\u7528\u6237\u81ea\u4e3b\u6e90\uff0c\u53ef\u51cf\u5c0f\u81ea\u4e3b\u6e90\u538b\u529b\uff0c\u4e5f\u65b9\u4fbf\u8fdb\u884c\u8d44\u6e90\u6587\u4ef6\u7684\u65e0\u7f1d\u8fc1\u79fb\u3002 \u5b9e\u73b0\u673a\u5236 \u8fdb\u884c\u8d44\u6e90\u8fc1\u79fb\u9700\u8981\u8003\u8651\u5982\u4e0b\u4e24\u79cd\u573a\u666f\uff1a 1\uff09\u67d0\u4e2a\u8d44\u6e90\u672a\u8fc1\u79fb\u4e4b\u524d\uff0c\u4f1a\u4f18\u5148\u56de\u5b58\u50a8\uff0c\u5176\u6b21\u56de\u81ea\u4e3b\u6e90\uff0c\u6700\u7ec8\u8fdb\u884c\u8d44\u6e90\u8fc1\u79fb\uff0c\u8be6\u7ec6\u8bbf\u95ee\u6d41\u7a0b\u53c2\u89c1\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u5927\u81f4\u7684\u8bbf\u95ee\u6d41\u7a0b\u4e3a\uff1a \u7ec8\u7aef\u7528\u6237\u5411 CDN \u8bf7\u6c42\u8d44\u6e90\u6587\u4ef6\uff0cCDN \u4f1a\u4f18\u5148\u56de\u53c8\u62cd\u4e91\u5b58\u50a8\u83b7\u53d6\u8d44\u6e90\uff1b \u6b64\u65f6\u53c8\u62cd\u4e91\u5b58\u50a8\u6ca1\u6709\u8be5\u8d44\u6e90\uff0cCDN \u8282\u70b9\u4f1a\u4ece\u7528\u6237\u81ea\u4e3b\u6e90\u7ad9\u83b7\u53d6\u8d44\u6e90\u6587\u4ef6\uff1b \u6700\u7ec8 CDN \u8fd4\u56de\u8d44\u6e90\u6587\u4ef6\u7ed9\u7ec8\u7aef\u7528\u6237\uff0c\u5e76\u5c06\u8d44\u6e90\u6587\u4ef6\u6301\u4e45\u5316\u5b58\u50a8\u5230\u53c8\u62cd\u4e91\u5bf9\u8c61\u5b58\u50a8\u4e0a\uff1b 2\uff09\u67d0\u4e2a\u8d44\u6e90\u8fc1\u79fb\u6210\u529f\u4e4b\u540e\uff0c\u76f4\u63a5\u8bbf\u95ee\u4e91\u5b58\u50a8\uff0c\u4e0d\u518d\u8fdb\u884c\u8d44\u6e90\u8fc1\u79fb\uff0c\u8bbf\u95ee\u6d41\u7a0b\u53c2\u89c1\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u5927\u81f4\u7684\u8bbf\u95ee\u6d41\u7a0b\u662f\uff1a \u7ec8\u7aef\u7528\u6237\u518d\u6b21\u8bbf\u95ee\u76f8\u540c\u8d44\u6e90\u6587\u4ef6\u65f6\uff0c\u5c06\u76f4\u63a5\u4ece\u53c8\u62cd\u4e91\u5b58\u50a8\u83b7\u53d6\u8d44\u6e90\uff0c\u4e0d\u518d\u56de\u7528\u6237\u81ea\u4e3b\u6e90\u83b7\u53d6\u8d44\u6e90\uff1b \u968f\u7740\u7ec8\u7aef\u7528\u6237\u7684\u4e0d\u65ad\u8bbf\u95ee\uff0c\u6e90\u7ad9\u7684\u9759\u6001\u8d44\u6e90\u5c06\u9010\u6b65\u8fc1\u79fb\u5230\u53c8\u62cd\u4e91\u5b58\u50a8\u6e90\u4e0a\u6765\u3002 \u914d\u7f6e\u5f15\u5bfc \u767b\u9646 CDN \u63a7\u5236\u53f0 \uff0c\u8fdb\u5165 \u300c\u56de\u6e90\u7ba1\u7406\u300d\u914d\u7f6e\u9875\u9762\uff0c\u627e\u5230\u300c\u6e90\u7ad9\u8d44\u6e90\u8fc1\u79fb\u300d\u914d\u7f6e\u9879\uff0c\u70b9\u51fb\u3010\u7ba1\u7406\u3011\u6309\u94ae\uff0c\u8fdb\u5165\u5982\u4e0b\u914d\u7f6e\u754c\u9762\uff1a \u7b2c\u4e00\u6b65\uff1a\u914d\u7f6e\u8d44\u6e90\u8fc1\u79fb\u72b6\u6001 \u6e90\u7ad9\u8d44\u6e90\u8fc1\u79fb\u529f\u80fd\u5305\u62ec\u4e09\u79cd\u72b6\u6001\uff0c\u5206\u522b\u662f\u5f00\u542f\u3001\u6682\u505c\u3001\u5173\u95ed\uff0c\u9ed8\u8ba4\u4e3a\u5173\u95ed\u72b6\u6001\u3002\u8be6\u7ec6\u63cf\u8ff0\u5982\u4e0b\uff1a \u5f00\u542f\u72b6\u6001 \u5f00\u542f\u4e4b\u540e\uff0c\u5f53 CDN \u8282\u70b9\u7f13\u5b58\u5931\u6548\u6216\u672a\u547d\u4e2d\u65f6\uff0c\u4f1a\u4f18\u5148\u56de\u53c8\u62cd\u4e91\u5b58\u50a8\u83b7\u53d6\u8d44\u6e90\uff0c\u5982\u679c\u53c8\u62cd\u4e91\u5b58\u50a8\u8fd4\u56de 4XX\u30015XX \u72b6\u6001\u7801\u65f6\uff0c\u5219\u76f4\u63a5\u56de\u81ea\u6709\u6e90\u7ad9\u83b7\u53d6\u8d44\u6e90\u5e76\u54cd\u5e94\u7ed9\u6700\u7ec8\u7528\u6237\u3002\u4e0e\u6b64\u540c\u65f6\uff0c\u8d44\u6e90\u4f1a\u88ab\u6254\u8fdb\u8d44\u6e90\u8fc1\u79fb\u961f\u5217\u5e76\u8fdb\u884c\u5b58\u50a8\uff0c\u4e0b\u4e00\u4e2a\u76f8\u540c\u7684\u8d44\u6e90\u8bf7\u6c42\u8fc7\u6765\u65f6\u5219\u4f1a\u76f4\u63a5\u7531\u5b58\u50a8\u547d\u4e2d\u7684\u8d44\u6e90\u76f4\u63a5\u63d0\u4f9b\u670d\u52a1\u3002 \u6682\u505c\u72b6\u6001 \u76f4\u63a5\u5173\u95ed\u6e90\u7ad9\u8d44\u6e90\u8fc1\u79fb\u529f\u80fd\uff0c\u53ef\u80fd\u4f1a\u5bfc\u81f4\u56de\u81ea\u4e3b\u6e90\u538b\u529b\u8fc7\u5927\uff0c\u5728\u6682\u505c\u72b6\u6001\u4e0b\uff0c\u4e0d\u4f1a\u8fdb\u884c\u8d44\u6e90\u8fc1\u79fb\u52a8\u4f5c\uff0c\u8bbf\u95ee\u8d44\u6e90\u65f6\uff0c\u4ecd\u7136\u5148\u8bbf\u95ee\u53c8\u62cd\u4e91\u5b58\u50a8\uff0c\u5982\u679c\u53c8\u62cd\u4e91\u5b58\u50a8\u8fd4\u56de 4XX\u30015XX \u72b6\u6001\u7801\u65f6\uff0c\u5219\u4f1a\u8bbf\u95ee\u81ea\u4e3b\u6e90\u7ad9\u3002\u4e5f\u5373\u8d44\u6e90\u8bbf\u95ee\u7684\u6d41\u7a0b\u4e0d\u53d8\uff0c\u53ea\u4e0d\u8fc7\u4e0d\u4f1a\u8fdb\u884c\u8d44\u6e90\u7684\u8fc1\u79fb\u64cd\u4f5c\uff0c\u8d77\u5230\u4e86\u4e00\u4e2a\u7f13\u51b2\u7684\u4f5c\u7528\u3002 \u5173\u95ed\u72b6\u6001 \u8be5\u529f\u80fd\u5173\u95ed\u4e4b\u540e\uff0c\u65b0\u7684\u8bf7\u6c42\u8fc7\u6765\u7684\u8bdd\uff0cCDN \u8282\u70b9\u4e0d\u4f1a\u56de\u53c8\u62cd\u4e91\u5b58\u50a8\u5e73\u53f0\u83b7\u53d6\u8d44\u6e90\uff0c\u800c\u4f1a\u76f4\u63a5\u56de\u5ba2\u6237\u6e90\u7ad9\u83b7\u53d6\u8d44\u6e90\u3002 \u7b2c\u4e8c\u6b65\uff1a\u914d\u7f6e\u8d44\u6e90\u8def\u5f84 \u5728\u914d\u7f6e\u7684\u8fc7\u7a0b\u4e2d\uff0c\u60a8\u9700\u8981\u914d\u7f6e\u8d44\u6e90\u8def\u5f84\uff0c\u6307\u5b9a\u67d0\u4e9b\u8d44\u6e90\u8fdb\u884c\u8fc1\u79fb\uff0c\u4f8b\u5982\u9700\u8981\u6307\u5b9a html \u3001 mp4 \u3001 flv \u3001 jpg \u3001 png \u7b49\u8d44\u6e90\u8fdb\u884c\u8fc1\u79fb\u3002\u5982\u622a\u56fe\u6240\u793a\uff1a \u914d\u7f6e\u793a\u4f8b\u4e3a\uff1a /*.html /*.mp4 /*.flv /*.jpg /*.png \u503c\u5f97\u6ce8\u610f\u7684\u662f\uff0c\u8be5\u9879\u5982\u672a\u914d\u7f6e\uff0c\u5219\u9ed8\u8ba4\u8fc1\u79fb\u670d\u52a1\u4e0b\u9762\u7684\u6240\u6709\u9759\u6001\u8d44\u6e90\u6587\u4ef6\u3002 \u7b2c\u4e09\u6b65\uff1a\u9009\u62e9\u4e91\u5b58\u50a8\u670d\u52a1 \u8be5\u6b65\u9aa4\u9700\u8981\u786e\u4fdd\u60a8\u5df2\u7ecf\u521b\u5efa\u4e86\u4e00\u4e2a\u4e91\u5b58\u50a8\u670d\u52a1\uff0c\u5426\u5219\u65e0\u6cd5\u914d\u7f6e\u6210\u529f\u3002\u6211\u4eec\u4f1a\u901a\u8fc7\u4e0b\u62c9\u5217\u8868\u7684\u5f62\u5f0f\u5c55\u793a\u5f53\u524d\u8d26\u53f7\u4e0b\u5df2\u521b\u5efa\u7684\u4e91\u5b58\u50a8\u670d\u52a1\uff0c\u4ee5\u4f9b\u9009\u62e9\u3002\u5982\u622a\u56fe\u6240\u793a\uff1a \u786e\u4fdd\u4ee5\u4e0a\u914d\u7f6e\u6b63\u786e\u4e4b\u540e\uff0c\u70b9\u51fb\u914d\u7f6e\u754c\u9762\u53f3\u4e0b\u89d2\u7684\u3010\u786e\u5b9a\u3011\u6309\u94ae\u5373\u53ef\u3002 \u6ce8\u610f\u4e8b\u9879 \u5f53\u7528\u6237\u66f4\u65b0\u4e86\u6e90\u7ad9\u8d44\u6e90\u65f6\uff0c\u4e3a\u4e86\u4fdd\u8bc1\u8bf7\u6c42\u8bbf\u95ee\u5230\u7684\u8d44\u6e90\u662f\u6700\u65b0\u7684\uff0c\u6b64\u65f6\u9700\u8981\u901a\u8fc7 API \u6216 FTP \u7684\u65b9\u5f0f\u5bf9\u5df2\u7ecf\u5b58\u50a8\u5728\u53c8\u62cd\u4e91\u5b58\u50a8\u4e0a\u7684\u6587\u4ef6\u8fdb\u884c\u5220\u9664\u548c\u66ff\u6362\u64cd\u4f5c\uff1b \u5f53\u6e90\u7ad9\u8d44\u6e90\u8fc1\u79fb\u529f\u80fd\u5904\u4e8e\u6682\u505c\u72b6\u6001\u65f6\uff0c\u60a8\u53ef\u4ee5\u901a\u8fc7 API \u63a5\u53e3\u9010\u6b65\u5220\u9664\u53c8\u62cd\u4e91\u4e0a\u5bf9\u5e94\u7684\u6587\u4ef6\uff0c\u5c06\u56de\u6e90\u6d41\u91cf\u5e73\u6ed1\u8fc1\u79fb\u81f3\u6e90\u7ad9\uff0c\u6216\u8c03\u6574\u6e90\u7ad9\u5e26\u5bbd\uff0c\u6700\u540e\u518d\u6267\u884c\u5173\u95ed\u64cd\u4f5c\u3002 \u8d44\u6e90\u8fc1\u79fb\u7684\u751f\u6548\u6709\u4e00\u4e2a\u524d\u63d0\u6761\u4ef6\uff0c\u90a3\u5c31\u662f\u8d44\u6e90\u6587\u4ef6\u5728 CDN \u7684\u7f13\u5b58\u8fc7\u671f\u65f6\u95f4\u5fc5\u987b\u5927\u4e8e 24 \u5c0f\u65f6\uff0c\u624d\u4f1a\u6267\u884c\u8fc1\u79fb\u52a8\u4f5c\uff1b 2.4 \u79bb\u7ebf\u6a21\u5f0f \u00b6 \u529f\u80fd\u8bf4\u660e \u79bb\u7ebf\u6a21\u5f0f\u662f\u6307\u5728\u7f51\u7ad9\u6e90\u670d\u52a1\u5668\u672a\u80fd\u6b63\u5e38\u63d0\u4f9b\u670d\u52a1\u671f\u95f4\uff0c\u4e5f\u5373\u5f53\u6e90\u7ad9\u51fa\u73b0\u5b95\u673a\u3001\u7f51\u7edc\u4e2d\u65ad\u7b49\u60c5\u51b5\u65f6\uff0cCDN \u8282\u70b9\u5728\u8be5\u65f6\u95f4\u6bb5\u5185\u4e0d\u518d\u56de\u6e90\u8bf7\u6c42\u8d44\u6e90\u6587\u4ef6\uff0c\u800c\u7531 CDN \u8282\u70b9\u76f4\u63a5\u8fd4\u56de\u8282\u70b9\u4e0a\u5df2\u7f13\u5b58\u8d44\u6e90\u5185\u5bb9\uff0c\u8be5\u529f\u80fd\u80fd\u591f\u6709\u6548\u964d\u4f4e\u6e90\u6545\u969c\u671f\u95f4\u5e26\u6765\u7684\u635f\u5931\uff0c\u63d0\u5347\u7f51\u7ad9\u7684\u7528\u6237\u4f53\u9a8c\u3002 \u914d\u7f6e\u5f15\u5bfc \u767b\u9646 CDN \u63a7\u5236\u53f0 \uff0c\u9009\u62e9\u9700\u8981\u914d\u7f6e\u7684\u670d\u52a1\uff0c\u4f9d\u6b21\u8fdb\u5165\u300c\u529f\u80fd\u914d\u7f6e\u300d\u548c\u300c\u56de\u6e90\u7ba1\u7406\u300d\u914d\u7f6e\u754c\u9762\uff0c\u627e\u5230\u300c\u79bb\u7ebf\u6a21\u5f0f\u300d\u914d\u7f6e\u9879\uff0c\u5982\u4e0b\u622a\u56fe\u6240\u793a\uff1a \u7b2c\u4e00\u6b65\uff1a\u4f9d\u6b21\u8fdb\u5165\u914d\u7f6e\u7ba1\u7406\u3001\u56de\u6e90\u7ba1\u7406\u9875\u9762 \u8fdb\u5165\u529f\u80fd\u914d\u7f6e\u9875\u9762\uff1a \u8fdb\u5165\u56de\u6e90\u7ba1\u7406\u914d\u7f6e\u9875\u9762\uff1a \u7b2c\u4e8c\u6b65\uff1a\u5728\u56de\u6e90\u7ba1\u7406\u6a21\u5757\uff0c\u627e\u5230\u3010\u79bb\u7ebf\u6a21\u5f0f\u3011\u914d\u7f6e\u9879 \u70b9\u51fb\u3010\u786e\u5b9a\u3011\u6309\u94ae\uff0c\u5373\u53ef\u5f00\u542f\u79bb\u7ebf\u6a21\u5f0f\u529f\u80fd\u3002 \u6ce8\u610f\u4e8b\u9879 \u6e90\u7ad9\u8fd4\u56de 502\u3001504 \u72b6\u6001\u7801\u65f6\u3001CDN \u8282\u70b9\u56de\u6e90\u8fde\u63a5\u51fa\u9519\u6216\u8005\u54cd\u5e94\u4f53\u8d85\u65f6\u65f6\uff0c\u90fd\u4f1a\u89e6\u53d1\u79bb\u7ebf\u6a21\u5f0f\uff1b \u79bb\u7ebf\u6a21\u5f0f\u7684\u65f6\u95f4\u5468\u671f\u4e3a\u8d44\u6e90\u5185\u5bb9\u5728 CDN \u8282\u70b9\u7684\u7f13\u5b58\u8fc7\u671f\u65f6\u95f4\uff0c\u5728\u8be5\u671f\u95f4\u5185\u4e0d\u518d\u56de\u6e90\u8bf7\u6c42\u8d44\u6e90\u5185\u5bb9\uff1b \u79bb\u7ebf\u6a21\u5f0f\u53ea\u6709\u8d44\u6e90\u5185\u5bb9\u5728 CDN \u8282\u70b9\u7f13\u5b58\u7684\u60c5\u51b5\u4e0b\u624d\u4f1a\u51d1\u6548\uff0c\u5426\u5219\u4e5f\u4f1a\u51fa\u73b0\u8d44\u6e90\u6587\u4ef6\u8bbf\u95ee\u5931\u8d25\u3002 2.5 \u64cd\u4f5c\u5458\u6388\u6743 \u00b6 \u529f\u80fd\u8bf4\u660e \u9488\u5bf9\u5177\u5907\u5b58\u50a8\u7279\u6027\u7684 CDN \u670d\u52a1\uff0c\u53ef\u4ee5\u521b\u5efa\u64cd\u4f5c\u5458\uff0c\u5e76\u6388\u6743\u67d0\u4e9b\u64cd\u4f5c\u5458\u5bf9\u5728\u53c8\u62cd\u5bf9\u8c61\u5b58\u50a8\u670d\u52a1\u4e0a\u9762\u7684\u975e\u7ed3\u6784\u5316\u6570\u636e\u8fdb\u884c\u8bfb\u53d6\u3001\u5199\u5165\u3001\u5220\u9664\u7b49\u64cd\u4f5c\u3002\u529f\u80fd\u8bf4\u660e\u5982\u4e0b\uff1a \u53ef\u8bfb\u53d6\uff1a\u62e5\u6709\u4e0b\u8f7d\u6587\u4ef6\u3001\u83b7\u53d6\u6587\u4ef6\u3001\u76ee\u5f55\u4fe1\u606f\u53ca\u7a7a\u95f4\u4f7f\u7528\u60c5\u51b5\u7684\u6743\u9650\uff1b \u53ef\u5199\u5165\uff1a\u62e5\u6709\u4e0a\u4f20\u6587\u4ef6\u3001\u521b\u5efa\u76ee\u5f55\u3001\u64cd\u4f5c\u7f13\u5b58\u5237\u65b0\u7684\u6743\u9650\uff1b \u53ef\u5220\u9664\uff1a\u62e5\u6709\u5220\u9664\u6587\u4ef6\u3001\u5220\u9664\u76ee\u5f55\u7684\u6743\u9650\u3002 \u6ce8\u610f\uff1a\u9488\u5bf9\u4f7f\u7528\u81ea\u4e3b\u6e90\u7684 CDN \u670d\u52a1\uff0c\u53ea\u6709\u5f53\u5f00\u542f\u3010\u6e90\u7ad9\u8d44\u6e90\u8fc1\u79fb\u3011\u529f\u80fd\u65f6\uff0c\u624d\u4f1a\u4f7f\u7528\u5230\u64cd\u4f5c\u5458\u6388\u6743\u529f\u80fd\u3002 \u914d\u7f6e\u5f15\u5bfc \u767b\u9646 CDN \u63a7\u5236\u53f0 \uff0c\u9009\u62e9\u9700\u8981\u914d\u7f6e\u7684\u670d\u52a1\uff0c\u4f9d\u6b21\u8fdb\u5165\u300c\u529f\u80fd\u914d\u7f6e\u300d\u548c\u300c\u56de\u6e90\u7ba1\u7406\u300d\u914d\u7f6e\u754c\u9762\uff0c\u627e\u5230\u300c\u64cd\u4f5c\u5458\u6388\u6743\u300d\u914d\u7f6e\u9879\uff0c\u5982\u4e0b\u622a\u56fe\u6240\u793a\uff1a \u7b2c\u4e00\u6b65\uff1a\u4f9d\u6b21\u8fdb\u5165\u914d\u7f6e\u7ba1\u7406\u3001\u56de\u6e90\u7ba1\u7406\u9875\u9762 \u8fdb\u5165\u3010\u529f\u80fd\u914d\u7f6e\u3011\u9875\u9762 \u8fdb\u5165\u3010\u56de\u6e90\u7ba1\u7406\u3011\u914d\u7f6e\u9875\u9762 \u7b2c\u4e8c\u6b65\uff1a\u5728\u3010\u56de\u6e90\u7ba1\u7406\u3011\u6a21\u5757\uff0c\u627e\u5230\u3010\u64cd\u4f5c\u5458\u6388\u6743\u3011\u914d\u7f6e\u9879 \u672a\u521b\u5efa\u64cd\u4f5c\u5458\uff0c\u9700\u8981\u521b\u5efa\u64cd\u4f5c\u5458\u5e76\u6388\u6743 \u586b\u5199\u57fa\u672c\u4fe1\u606f\u5e76\u9009\u62e9\u64cd\u4f5c\u6743\u9650\uff0c\u70b9\u51fb\u3010\u521b\u5efa\u5e76\u6388\u6743\u3011\u6309\u94ae\uff0c\u5373\u53ef\u521b\u5efa\u64cd\u4f5c\u5458\u5e76\u5bf9\u670d\u52a1\u8fdb\u884c\u6388\u6743\u3002 \u5df2\u521b\u5efa\u64cd\u4f5c\u5458\uff0c\u9700\u8981\u5bf9\u64cd\u4f5c\u5458\u8fdb\u884c\u6388\u6743 \u5728\u64cd\u4f5c\u5458\u53ef\u9009\u5217\u8868\u4e2d\uff0c\u6839\u636e\u4e1a\u52a1\u8981\u6c42\uff0c\u9009\u62e9\u5df2\u7ecf\u521b\u5efa\u597d\u7684\u64cd\u4f5c\u5458\u5373\u53ef\uff0c\u70b9\u51fb\u3010\u6388\u6743\u3011\u6309\u94ae\uff0c\u5373\u53ef\u6388\u6743\u3002 \u6ce8\u610f\u4e8b\u9879 \u64cd\u4f5c\u5458\u6743\u9650\u5177\u5907\u53ef\u8bfb\u53d6\u3001\u53ef\u5199\u5165\u3001\u53ef\u5220\u9664\u7b49\u529f\u80fd\uff0c\u8bf7\u8c28\u614e\u5206\u914d\u6743\u9650\uff1b \u64cd\u4f5c\u5458\u8d26\u53f7\u548c\u5bc6\u7801\u8bf7\u8c28\u614e\u4fdd\u7ba1\uff0c\u4e00\u65e6\u6cc4\u9732\uff0c\u8bf7\u53ca\u65f6\u66f4\u6362\u3002 3.\u7f13\u5b58\u914d\u7f6e \u00b6 3.1 \u7f13\u5b58\u8fc7\u671f\u914d\u7f6e \u00b6 \u529f\u80fd\u8bf4\u660e \u7f13\u5b58\u914d\u7f6e\u662f\u6307\u53c8\u62cd\u4e91 CDN \u52a0\u901f\u8282\u70b9\uff08\u5305\u62ec\u8fb9\u7f18\u8282\u70b9\u548c\u4e2d\u5fc3\u8282\u70b9\uff09\u5728\u7f13\u5b58\u60a8\u7684\u8d44\u6e90\u6587\u4ef6\u65f6\u9075\u5faa\u7684\u4e00\u5957\u8fc7\u671f\u89c4\u5219\u3002\u5f53\u8d44\u6e90\u6587\u4ef6\u5904\u4e8e\u8fc7\u671f\u72b6\u6001\u65f6\uff0c\u6b64\u65f6\u7528\u6237\u8bf7\u6c42\u4f1a\u7531\u8282\u70b9\u53d1\u9001\u81f3\u6e90\u7ad9\uff0c\u91cd\u65b0\u83b7\u53d6\u8d44\u6e90\u5185\u5bb9\u5e76\u7f13\u5b58\u81f3\u8282\u70b9\uff0c\u540c\u65f6\u8fd4\u56de\u7ed9\u6700\u7ec8\u7528\u6237\uff1b\u5f53\u8d44\u6e90\u5185\u5bb9\u5904\u4e8e\u672a\u8fc7\u671f\u72b6\u6001\u65f6\uff0c\u60a8\u7684\u7528\u6237\u8bf7\u6c42\u5230\u8fbe\u8282\u70b9\u540e\uff0c\u4f1a\u7531\u8282\u70b9\u76f4\u63a5\u54cd\u5e94\u6700\u7ec8\u7528\u6237\u7684\u8bf7\u6c42\u3002\u5408\u7406\u7684\u914d\u7f6e\u8d44\u6e90\u6587\u4ef6\u7f13\u5b58\u65f6\u95f4\uff0c\u80fd\u591f\u6709\u6548\u7684\u63d0\u5347\u7f13\u5b58\u547d\u4e2d\u7387\uff0c\u964d\u4f4e\u56de\u6e90\u7387\uff0c\u8282\u7701\u60a8\u7684\u6e90\u7ad9\u5e26\u5bbd\u3002 \u914d\u7f6e\u5f15\u5bfc \u767b\u5f55 CDN\u63a7\u5236\u53f0 \uff0c\u9009\u62e9\u9700\u8981\u914d\u7f6e\u7684\u670d\u52a1\uff0c\u4f9d\u6b21\u8fdb\u5165\uff1a\u670d\u52a1\u7ba1\u7406 > \u529f\u80fd\u914d\u7f6e > \u7f13\u5b58\u914d\u7f6e > \u7f13\u5b58\u8fc7\u671f\u914d\u7f6e\uff0c\u70b9\u51fb\u3010\u7ba1\u7406\u3011\u6309\u94ae\u5373\u53ef\u5f00\u59cb\u914d\u7f6e\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u81ea\u5b9a\u4e49\u7f13\u5b58\u914d\u7f6e \u60a8\u53ef\u4ee5\u6839\u636e\u81ea\u8eab\u4e1a\u52a1\u9700\u6c42\uff0c\u5728\u914d\u7f6e\u754c\u9762\u7684\u53f3\u4e0a\u89d2\uff0c\u70b9\u51fb\u53f3\u4e0a\u89d2\u7684\u3010\u6dfb\u52a0\u3011 \u6309\u94ae\u8fdb\u884c\u8d44\u6e90\u6587\u4ef6\u7f13\u5b58\u8fc7\u671f\u65f6\u95f4\u7684\u914d\u7f6e\uff0c\u5982\u622a\u56fe\u6240\u793a\uff1a \u8fdb\u5165\u7f13\u5b58\u8fc7\u671f\u7ba1\u7406\u914d\u7f6e\u754c\u9762 \u8fdb\u5165\u81ea\u5b9a\u4e49\u7f13\u5b58\u8fc7\u671f\u914d\u7f6e\u754c\u9762 \u5728\u8be5\u914d\u7f6e\u754c\u9762\uff0c\u60a8\u53ef\u4ee5\u9488\u5bf9\u6a21\u677f\u3001\u7f13\u5b58\u65f6\u95f4\u3001\u8d44\u6e90\u8def\u5f84\u3001\u72b6\u6001\u7801\u7b49\u8fdb\u884c\u9009\u62e9\u548c\u914d\u7f6e\u3002CDN \u652f\u6301\u4e09\u79cd\u7ef4\u5ea6\u7684\u7f13\u5b58\u8fc7\u671f\u89c4\u5219\u914d\u7f6e\uff0c\u5206\u522b\u4e3a\uff1a 1.\u6839\u636e\u6587\u4ef6\u7c7b\u578b\u8bbe\u7f6e\u7f13\u5b58\u8fc7\u671f\u7b56\u7565 \u60a8\u53ef\u4ee5\u6839\u636e\u6a21\u677f\u586b\u5145\u6587\u4ef6\u7c7b\u578b\u540e\u7f00\uff0c\u6839\u636e\u6587\u4ef6\u7c7b\u578b\u6765\u8bbe\u7f6e\u7f13\u5b58\u65f6\u95f4\uff0c\u5982\u4e0b\u793a\u4f8b\u6240\u793a\uff1a /*.(txt,doc,wri,docs) \u7f13\u5b58\u65f6\u95f4 1 \u5929\uff1b \u8bbe\u7f6e\u5b8c\u6210\u540e\uff0c\u57df\u540d\u4e0b\u6240\u6709\u5339\u914d .txt .doc .wri .docs \u7684\u6587\u672c\u8d44\u6e90\uff0c\u5728\u8282\u70b9\u7684\u7f13\u5b58\u6709\u6548\u65f6\u95f4\u5747\u4e3a 1 \u5929\u3002 2.\u6839\u636e\u6587\u4ef6\u76ee\u5f55\u8bbe\u7f6e\u7f13\u5b58\u8fc7\u671f\u7b56\u7565 \u60a8\u53ef\u4ee5\u81ea\u5b9a\u4e49\u914d\u7f6e\u6587\u4ef6\u8def\u5f84\uff0c\u6839\u636e\u6587\u4ef6\u8def\u5f84\u6765\u8bbe\u7f6e\u7f13\u5b58\u65f6\u95f4\uff0c\u5982\u4e0b\u793a\u4f8b\u6240\u793a\uff1a /dir/* \u7f13\u5b58\u65f6\u95f4 12 \u5c0f\u65f6 3.\u5168\u5c40\u7f13\u5b58\u8fc7\u671f\u7b56\u7565\u914d\u7f6e \u5168\u5c40\u7f13\u5b58\u7b56\u7565\u9002\u5408\u6e90\u7ad9\u5168\u662f\u9759\u6001\u8d44\u6e90\u7684\u5ba2\u6237\uff0c\u53ef\u4ee5\u9488\u5bf9\u8be5\u670d\u52a1\u4e00\u952e\u5f00\u542f\u914d\u7f6e\u7f13\u5b58\u8fc7\u671f\u65f6\u95f4\uff0c\u5f00\u542f\u8bf7\u8c28\u614e\u3002\u8be6\u7ec6\u914d\u7f6e\u53ef\u53c2\u7167\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u8bbe\u7f6e\u5b8c\u6210\u540e\uff0c\u8be5\u670d\u52a1\u4e0b\u6240\u6709\u57df\u540d\u5339\u914d\u7684\u8d44\u6e90\uff0c\u5728\u8282\u70b9\u7684\u7f13\u5b58\u6709\u6548\u65f6\u95f4\u5747\u4e3a 7 \u5929\u3002 \u6ce8\u610f\u4e8b\u9879\uff1a \u5168\u5c40\u7f13\u5b58\u5728\u81ea\u5b9a\u4e49\u7f13\u5b58\u914d\u7f6e\u91cc\u9762\u7684\u4f18\u5148\u7ea7\u662f\u6700\u4f4e\u7684\uff0c\u4e14\u4f18\u5148\u7ea7\u4e0d\u53ef\u8c03\u8282\uff0c\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u5168\u5c40\u7f13\u5b58\u8bbe\u7f6e\u6709\u4e00\u4e2a\u5355\u72ec\u7684\u5f00\u5173\uff0c\u9700\u8981\u5f00\u542f\u4e4b\u540e\uff0c\u624d\u53ef\u4ee5\u8fdb\u884c\u914d\u7f6e\u3002 \u9ed8\u8ba4\u914d\u7f6e\u6a21\u677f \u7279\u522b\u5730\uff0c\u6211\u4eec\u9488\u5bf9\u81ea\u5b9a\u4e49\u7f13\u5b58\u914d\u7f6e\uff0c\u9ed8\u8ba4\u89c4\u5212\u4e86\u6a21\u677f\uff0c\u5e76\u4e14\u9884\u8bbe\u4e86\u7f13\u5b58\u65f6\u95f4\uff0c\u60a8\u53ef\u4ee5\u6839\u636e\u5177\u4f53\u60c5\u51b5\u8fdb\u884c\u4fee\u6539\u3002\u5177\u4f53\u6a21\u677f\u5982\u4e0b\uff1a \u9996\u9875\uff1a/ \u7f13\u5b58 12 \u5c0f\u65f6\uff1b \u76ee\u5f55\u9875\uff1a/*/ \u7f13\u5b58 12 \u5c0f\u65f6\uff1b \u56fe\u7247\u6587\u4ef6\uff1a/*.(jpg,jpeg,png,bmp,gif,psd,ico,tga,imb,tiff) \u7f13\u5b58 7 \u5929\uff1b \u6587\u672c\u6587\u4ef6\uff1a/*.(txt,doc,wri,docs,css,js,dot,xml,log,bat,csv) \u7f13\u5b58 1 \u5929\uff1b \u97f3\u89c6\u9891\u6587\u4ef6\uff1a/*.(wav,mp3,wmv,rmi,aac,mp4,rmvb,mkv,avi,flv,swf,rm,mov,movie,qt) \u7f13\u5b58 7 \u5929\uff1b \u4e0b\u8f7d\u7c7b\u6587\u4ef6\uff1a/*.(exe,ios,apk,ipa,pxl,sis,cab,deb,rar,zip,gzip,tar,7z,bzip2,dmg,gz,wim,tbz,tpz,z,jar) \u7f13\u5b58 7 \u5929\uff1b 4.URI \u5e26\u53c2\u6570\u914d\u7f6e\u7f13\u5b58\u8fc7\u671f\u7b56\u7565 \u9664\u4e86\u6309\u7167\u6587\u4ef6\u7c7b\u578b\uff08\u6587\u4ef6\u6269\u5c55\u540d\uff09\u3001\u6587\u4ef6\u76ee\u5f55\u4ee5\u53ca\u5168\u5c40\u7f13\u5b58\u6765\u914d\u7f6e\u7f13\u5b58\u8fc7\u671f\u65f6\u95f4\uff0c\u60a8\u8fd8\u53ef\u4ee5\u6839\u636e URI \u5e26\u53c2\u6570\u6765\u914d\u7f6e\u7f13\u5b58\u8fc7\u671f\u65f6\u95f4\uff0c\u5177\u4f53\u683c\u5f0f\u5982\u4e0b\uff1a /dir/*?foo&bar=123 \u7f13\u5b58\u65f6\u95f4 1 \u5c0f\u65f6 \u4ee5\u4e0a\u89c4\u5219\u4e2d\uff0c ? \u540e\u9762\u8ddf\u968f\u7684\u5c31\u662f\u53c2\u6570\u7b5b\u9009\u89c4\u5219\uff1b * \u7279\u6307\u901a\u914d\u7b26\uff0c\u5982\u4e0d\u9700\u914d\u7f6e\u901a\u914d\u7b26\uff0c\u53ef\u4ee5\u4f7f\u7528\u5177\u4f53\u8d44\u6e90\u8def\u5f84\uff0c\u5982\u4e0b\u89c4\u5219\u6240\u793a\uff1a /dir/index.html?foo&bar=123 \u7f13\u5b58\u65f6\u95f4 1 \u5c0f\u65f6 \u5173\u4e8e ? \u540e\u9762\u7684\u53c2\u6570\u7b5b\u9009\u89c4\u5219\u914d\u7f6e\u8bf7\u53c2\u8003\u5982\u4e0b\u5206\u7c7b\uff1a \u5206\u7c7b \u8bf4\u660e \u793a\u4f8b \u53ea\u6709 KEY \u6ca1\u6709 VALUE \u5339\u914d\u8be5\u53c2\u6570 KEY \u6240\u6709\u5bf9\u5e94\u7684\u503c\u4ee5\u53ca\u503c\u4e3a\u7a7a\u8fd9\u79cd\u7279\u6b8a\u7684\u60c5\u51b5 /dir/*?bar&foo \u65e2\u6709 KEY \u4e5f\u6709 VALUE \uff08\u683c\u5f0f\uff1aK=V\uff09 \u4f1a\u7cbe\u786e\u5339\u914d KEY \u548c VALUE /dir/*?foo=123&bar=456 \u53ea\u6709 \uff1f \uff0c\u4e0d\u5e26\u4efb\u4f55\u53c2\u6570 \u8868\u793a\u53c2\u6570\u4e3a\u7a7a /dir/*? \u4e0d\u5e26 \uff1f \u8868\u793a\u4e0d\u9a8c\u8bc1\u53c2\u6570 /dir/* \u6ce8\u610f\uff1a \u53c2\u6570\u89c4\u5219\u914d\u7f6e\u987a\u5e8f\u4e0d\u654f\u611f\uff0c\u53c2\u6570\u4e4b\u95f4\u901a\u8fc7 & \u8fdb\u884c\u8fde\u63a5\uff1b URI \u4ec5\u9650 PATH\uff08\u8def\u5f84\uff09\u4ee5\u53ca ARGS\uff08\u53c2\u6570\uff09\u90e8\u5206\uff0c\u4f8b\u5982\uff1a /m/n/*?bar&foo=123 \u3002 \u4e0d\u7f13\u5b58\u914d\u7f6e \u6839\u636e\u4e1a\u52a1\u60c5\u51b5\uff0c\u53ef\u4ee5\u9488\u5bf9\u4e00\u4e9b\u52a8\u6001\u8d44\u6e90\u6587\u4ef6\uff08 \u4f8b\u5982\uff1aphp\u3001jsp\u3001asp\u3001do\u3001cgi\u3001action\u3001json \u7b49\uff09\u5f3a\u5236\u914d\u7f6e\u4e0d\u7f13\u5b58\uff0c \u8be6\u7ec6\u914d\u7f6e\u53ef\u53c2\u7167\u5982\u4e0b\u6240\u793a\uff1a /*.(asp,php,jsp,do,json) \u914d\u7f6e\u4e0d\u7f13\u5b58 \u9ed8\u8ba4\u7f13\u5b58\u7b56\u7565 \u5728\u6ca1\u6709\u5339\u914d\u5230\u81ea\u5b9a\u4e49\u7f13\u5b58\u89c4\u5219\u4e14\u6e90\u7ad9\u4e5f\u6ca1\u6709\u8fd4\u56de\u4efb\u4f55\u6709\u6548\u7f13\u5b58\u5934\u7684\u60c5\u51b5\u4e0b\uff0c\u6211\u4eec\u7684\u9ed8\u8ba4\u914d\u7f6e\u7b56\u7565\u5982\u4e0b\uff1a 1.\u9488\u5bf9\u9759\u6001\u8d44\u6e90\uff0c\u6240\u6709\u6b63\u5e38\u72b6\u6001\u7801\uff08\u5927\u4e8e\u7b49\u4e8e 200 \u5c0f\u4e8e 400\uff09\u5747\u7f13\u5b58 8 \u5929\u3002\u7279\u522b\u5730\uff0c301 \u54cd\u5e94\u7f13\u5b58 2 \u5c0f\u65f6\uff0c302 \u54cd\u5e94\u7f13\u5b58 20 \u5206\u949f 2.\u9488\u5bf9\u52a8\u6001\u8d44\u6e90\uff0c\u7a0b\u5e8f\u4f1a\u81ea\u52a8\u8bc6\u522b\uff0c\u5219\u4e0d\u8fdb\u884c\u7f13\u5b58 3.\u5bf9\u4e8e\u5176\u4ed6\u5927\u4e8e\u7b49\u4e8e 400 \u7684\u4e0d\u6b63\u5e38\u54cd\u5e94\uff0c\u5219\u4e0d\u8fdb\u884c\u7f13\u5b58 \u7f13\u5b58\u4f18\u5148\u7ea7 \u8bf7\u6839\u636e\u5177\u4f53\u7f13\u5b58\u4f18\u5148\u7ea7\u60c5\u51b5\u5408\u7406\u914d\u7f6e\u7f13\u5b58\u7b56\u7565\uff0c\u53c8\u62cd\u4e91 CDN \u52a0\u901f\u5e73\u53f0\u76ee\u524d\u7684\u7f13\u5b58\u4f18\u5148\u7ea7\u5982\u4e0b\uff1a \u4e0d\u7f13\u5b58\u914d\u7f6e\uff08\u540e\u53f0\u8bbe\u7f6e\uff09 > \u81ea\u5b9a\u4e49\u7f13\u5b58\u914d\u7f6e\uff08\u540e\u53f0\u914d\u7f6e\uff09 > \u6e90\u7ad9\u7f13\u5b58\u914d\u7f6e > \u9ed8\u8ba4\u7f13\u5b58\u7b56\u7565\u3002 \u6ce8\u610f\u4e8b\u9879\uff1a \u6e90\u7ad9\u7f13\u5b58\u914d\u7f6e\uff0c\u6307 Cache-Control \u548c Expires \u8bf7\u6c42\u5934\u7684\u8bbe\u7f6e \u4ee5\u4e0a\u7f13\u5b58\u914d\u7f6e\u4f18\u5148\u7ea7\u76ee\u524d\u4e0d\u652f\u6301\u987a\u5e8f\u8c03\u8282\uff0c\u540e\u7eed\u6211\u4eec\u4f1a\u8003\u8651\u652f\u6301 \u7279\u522b\u58f0\u660e \u9488\u5bf9\u4f7f\u7528\u53c8\u62cd\u4e91\u5b58\u50a8\u670d\u52a1\u7684\u5ba2\u6237\uff0c\u6211\u4eec\u6682\u65f6\u4e0d\u652f\u6301\u7f13\u5b58\u914d\u7f6e\u7684\u81ea\u5b9a\u4e49\u8bbe\u7f6e\uff0c\u6211\u4eec\u9ed8\u8ba4\u7ed9\u51fa\u4e86\u4e00\u4e2a\u9ed8\u8ba4\u7684\u7f13\u5b58\u914d\u7f6e\u89c4\u5219\uff0c\u5177\u4f53\u5982\u4e0b\uff1a \u5bf9\u4e8e\u6b63\u5e38\u7684\u72b6\u6001\u7801\uff08\u5927\u4e8e\u7b49\u4e8e 200 \u5c0f\u4e8e 400\uff09\uff1a8 \u5929 \u5bf9\u4e8e\u5176\u4ed6\u5927\u4e8e\u7b49\u4e8e 400 \u7684\u4e0d\u6b63\u5e38\u54cd\u5e94\u7f13\u5b58 5 \u5206\u949f \u52a8\u9759\u81ea\u52a8\u5206\u79bb \u9488\u5bf9\u4f7f\u7528 \u81ea\u6709\u6e90 \u7684 CDN \u670d\u52a1\u800c\u8a00\uff0c\u5f53\u6ca1\u6709\u5339\u914d\u5230\u81ea\u5b9a\u4e49\u7f13\u5b58\u89c4\u5219\u4e14\u6e90\u7ad9\u4e5f\u6ca1\u6709\u8fd4\u56de\u4efb\u4f55\u6709\u6548\u7684\u7f13\u5b58\u5934\u65f6\uff0c\u6211\u4eec\u5c31\u4f1a\u5bf9\u56de\u6e90\u5185\u5bb9\u8fdb\u884c\u52a8\u9759\u5185\u5bb9\u8bc6\u522b\u3002\u7279\u522b\u5730\uff0c\u6211\u4eec\u4f1a\u6839\u636e\u54cd\u5e94\u5934\u4e2d\u7684 Content-Type \u5b57\u6bb5\u548c URL \u4e2d\u7684\u6587\u4ef6\u540e\u7f00\u540d\u6765\u5224\u65ad\u662f\u5426\u662f\u9759\u6001\u5185\u5bb9\uff0c\u5176\u4e2d Content-Type \u5339\u914d\u4f18\u5148\u7ea7\u9ad8\u4e8e\u6587\u4ef6\u540e\u7f00\u540d\u3002 \u53c2\u8003\u5217\u8868 \u4ee5\u4e0b\u662f\u6211\u4eec\u7ef4\u62a4\u7684\u4e00\u4efd Content-Type \u548c\u6587\u4ef6\u540e\u7f00\u540d\u5217\u8868\uff0c\u82e5\u6ee1\u8db3\u5339\u914d\u6211\u4eec\u5c31\u8ba4\u4e3a\u662f\u9759\u6001\u5185\u5bb9\uff1a Content-Type \u5217\u8868 text/css text/javascript application/javascript application/x-javascript image/gif image/png image/jpeg image/webp image/tiff image/x-icon image/x-ms-bmp image/svg+xml application/font-woff application/java-archive application/msword application/pdf application/postscript application/zip application/octet-stream application/vnd.openxmlformats-officedocument.wordprocessingml.document application/vnd.openxmlformats-officedocument.spreadsheetml.sheet application/vnd.openxmlformats-officedocument.presentationml.presentation audio/mpeg audio/ogg audio/x-m4a video/mp4 video/x-flv video/x-m4v \u6587\u4ef6\u540e\u7f00\u540d\u5217\u8868 css js jpg jpeg gif ico png bmp pict csv doc pdf pls ppt tif tiff eps ejs swf midi mida ttf eot woff otf svg svgz webp docx xlsx xls pptx ps class jar bz2 bzip exe flv gzip rar rtf tgz gz txt zip mp3 mp4 ogg m4a m4v apk 3.2 \u53c2\u6570\u8ddf\u968f \u00b6 \u529f\u80fd\u8bf4\u660e CDN \u63d0\u4f9b\u53c2\u6570\u8fc7\u6ee4\u914d\u7f6e\u7b49\u9009\u9879\uff0c\u60a8\u53ef\u4ee5\u6839\u636e\u5b9e\u9645\u4e1a\u52a1\u60c5\u51b5\uff0c\u63a7\u5236\u662f\u5426\u5bf9\u8bbf\u95ee\u6216\u8005\u56de\u6e90 URL \u4e2d\u7684\u5e26 \u201c\uff1f\u201d \u540e\u7684\u53c2\u6570\u8fdb\u884c\u8fc7\u6ee4\u64cd\u4f5c\u3002\u53c2\u6570\u8ddf\u968f\u529f\u80fd\u5305\u62ec\u4e09\u79cd\u6a21\u5f0f\uff0c\u5206\u522b\u662f \u53c2\u6570\u4e0d\u8ddf\u968f \u3001 \u5168\u7a0b\u8ddf\u968f \u3001 \u56de\u6e90\u8ddf\u968f \uff0c\u7cfb\u7edf\u9ed8\u8ba4\u4e3a \u5168\u7a0b\u8ddf\u968f \u6a21\u5f0f\u3002\u4e00\u822c\u60c5\u51b5\u4e0b\uff0c\u6839\u636e\u4e1a\u52a1\u60c5\u51b5\uff0c\u5efa\u8bae\u9009\u62e9 \u53c2\u6570\u4e0d\u8ddf\u968f \u6765\u63d0\u9ad8\u8d44\u6e90\u6587\u4ef6\u7f13\u5b58\u547d\u4e2d\u7387\u3002\u8be6\u7ec6\u4ecb\u7ecd\u5982\u4e0b\uff1a \u53c2\u6570\u4e0d\u8ddf\u968f \u8bf4\u660e\uff1a\u5f00\u542f\u540e\uff0c\u7cfb\u7edf\u4f1a\u8fc7\u6ee4\u8bf7\u6c42\u4e2d\u7684\u67e5\u8be2\u5b57\u7b26\u4e32\uff0c\u5e76\u4e14\u67e5\u8be2\u5b57\u7b26\u4e32\u4e0d\u4f1a\u4f20\u9012\u7ed9\u6e90\u7ad9 \u793a\u4f8b\uff1a\uff08\u8bbf\u95ee\uff09/foo.js?a=1&b=2 => \uff08\u7f13\u5b58\uff09/foo.js => \uff08\u56de\u6e90\uff09/foo.js \u5168\u7a0b\u8ddf\u968f \u8bf4\u660e\uff1a\u5f00\u542f\u540e\uff0c\u5c06\u4e0d\u518d\u8fc7\u6ee4\u8bf7\u6c42\u4e2d\u7684\u67e5\u8be2\u5b57\u7b26\u4e32\uff0c\u5e76\u5c06\u67e5\u8be2\u5b57\u7b26\u4e32\u4f20\u9012\u7ed9\u6e90\u7ad9 \u793a\u4f8b\uff1a\uff08\u8bbf\u95ee\uff09/foo.js?a=1&b=2 => \uff08\u7f13\u5b58\uff09/foo.js?a=1&b=2 => \uff08\u56de\u6e90\uff09/foo.js?a=1&b=2 \u56de\u6e90\u8ddf\u968f \u8bf4\u660e\uff1a\u5f00\u542f\u540e\uff0c\u4f1a\u8fc7\u6ee4\u8bf7\u6c42\u4e2d\u7684\u67e5\u8be2\u5b57\u7b26\u4e32\uff0c\u5728\u8bbf\u95ee\u56de\u6e90\u9636\u6bb5\u4f1a\u5c06\u67e5\u8be2\u5b57\u7b26\u4e32\u4f20\u9012\u7ed9\u6e90\u7ad9 \u793a\u4f8b\uff1a\uff08\u8bbf\u95ee\uff09/foo.js?a=1&b=2 => \uff08\u7f13\u5b58\uff09/foo.js => \uff08\u56de\u6e90\uff09/foo.js?a=1&b=2 \u914d\u7f6e\u5f15\u5bfc \u767b\u5f55 CDN\u63a7\u5236\u53f0 \uff0c\u9009\u62e9\u9700\u8981\u914d\u7f6e\u7684\u670d\u52a1\uff0c\u4f9d\u6b21\u8fdb\u5165\uff1a\u670d\u52a1\u7ba1\u7406 > \u529f\u80fd\u914d\u7f6e > \u7f13\u5b58\u914d\u7f6e > \u53c2\u6570\u8ddf\u968f\uff0c\u70b9\u51fb\u3010\u7ba1\u7406\u3011\u6309\u94ae\u5373\u53ef\u5f00\u59cb\u914d\u7f6e\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u5982\u4e0a\u56fe\u6240\u793a\uff0c\u7528\u6237\u53ef\u4ee5\u6839\u636e\u4e1a\u52a1\u60c5\u51b5\u6765\u5408\u7406\u9009\u9879\u3002 \u6ce8\u610f\uff1a\u53c2\u6570\u8ddf\u968f\u529f\u80fd\uff0c\u53ef\u4ee5\u914d\u5408\u7f13\u5b58\u8fc7\u671f\u914d\u7f6e\u529f\u80fd\u6765\u4f7f\u7528\u3002 3.3 \u53c2\u6570\u987a\u5e8f\u8bc6\u522b \u00b6 \u529f\u80fd\u8bf4\u660e \u901a\u5e38 CDN \u8282\u70b9\u662f\u4ee5\u6574\u6761 URL \u4e3a\u7c92\u5ea6\u5bf9\u6587\u4ef6\u8fdb\u884c\u7f13\u5b58\u7684\uff0c\u7136\u800c URL \u4e2d\u53c2\u6570\u7684\u4e0d\u540c\u6392\u5217\u7ec4\u5408\u4f7f\u5f97 CDN \u8282\u70b9\u4f1a\u5c06\u540c\u4e00\u4efd\u6587\u4ef6\u7f13\u5b58\u591a\u4efd\uff0c\u5f00\u542f\u53c2\u6570\u987a\u5e8f\u8bc6\u522b\u529f\u80fd\u4e4b\u540e\uff0c\u53ef\u4ee5\u4f7f\u5f97\u8d44\u6e90\u6587\u4ef6\u53ea\u7f13\u5b58\u4e00\u4efd\uff0c\u4ece\u800c\u63d0\u9ad8\u8d44\u6e90\u6587\u4ef6\u7684\u7f13\u5b58\u547d\u4e2d\u7387\u3002 \u5b9e\u73b0\u539f\u7406 \u4f8b\u5982\u4e0b\u65b9\u4e24\u6761 URL\uff0c\u5bf9\u5e94\u7684\u8d44\u6e90\u6587\u4ef6\u662f\u76f8\u540c\u7684\uff0cCDN \u8282\u70b9\u662f\u5206\u5f00\u7f13\u5b58\u7684\uff1a https://www.upyun.com/test.jpg?a=1&b=2&c=3 https://www.upyun.com/test.jpg?c=3&b=2&a=1 \u529f\u80fd\u5f00\u542f\u540e\uff0cCDN \u8282\u70b9\u6536\u5230\u7528\u6237\u8bf7\u6c42\uff0c\u9996\u5148\u5bf9 URL \u4e2d\u7684\u53c2\u6570\u6309\u7279\u6709\u7684\u89c4\u5219\u8fdb\u884c\u6392\u5e8f\uff0c\u7136\u540e\u518d\u67e5\u627e\u5339\u914d\u8282\u70b9\u7f13\u5b58\u6216\u76f4\u63a5\u56de\u6e90\u83b7\u53d6\u6587\u4ef6\uff0c\u4e5f\u5c31\u662f\u8bf4\u4e0b\u65b9\u8fd9\u4e9b URL\uff1a https://www.upyun.com/test.jpg?a=1&b=2&c=3 https://www.upyun.com/test.jpg?a=1&c=3&b=2 https://www.upyun.com/test.jpg?b=2&a=1&c=3 https://www.upyun.com/test.jpg?b=2&c=3&a=1 https://www.upyun.com/test.jpg?c=3&a=1&b=2 https://www.upyun.com/test.jpg?c=3&b=2&a=1 \u6700\u540e\u7684\u7ed3\u679c\u662f\uff0cCDN \u8282\u70b9\u5c06\u53ea\u7f13\u5b58\u4e00\u4efd\uff1a https://www.upyun.com/test.jpg?a=1&b=2&c=3 \u914d\u7f6e\u5f15\u5bfc \u767b\u5f55 CDN\u63a7\u5236\u53f0 \uff0c\u9009\u62e9\u9700\u8981\u914d\u7f6e\u7684\u670d\u52a1\uff0c\u4f9d\u6b21\u8fdb\u5165\uff1a\u670d\u52a1\u7ba1\u7406 > \u529f\u80fd\u914d\u7f6e > \u7f13\u5b58\u914d\u7f6e > \u53c2\u6570\u987a\u5e8f\u8bc6\u522b\uff0c\u6ed1\u52a8\u53f3\u8fb9\u7684\u6309\u94ae\u5373\u53ef\u5f00\u542f\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u5982\u4e0a\u56fe\u6240\u793a\uff0c\u70b9\u51fb\u3010\u786e\u5b9a\u3011\u5373\u53ef\u5f00\u542f\u3002 \u6ce8\u610f\u4e8b\u9879 \u5f00\u542f\u6b64\u529f\u80fd\u540e\uff0c\u56e0 CDN \u8282\u70b9\u4f1a\u5c06\u7528\u6237\u8bbf\u95ee URL \u4e2d\u7684\u53c2\u6570\u91cd\u65b0\u6392\u5e8f\u540e\u8fdb\u884c\u7f13\u5b58\u5339\u914d\uff0c\u6240\u4ee5\u5c06\u6709\u53ef\u80fd\u65e0\u6cd5\u5339\u914d\u4e4b\u524d\u5df2\u7f13\u5b58\u7684\u6587\u4ef6\uff0c\u5bfc\u81f4\u56de\u6e90\u5e26\u5bbd\u589e\u5927\uff0c\u6240\u4ee5\u8bf7\u8c28\u614e\u5f00\u542f\uff0c\u5efa\u8bae\u5728\u521a\u521b\u5efa\u65b0\u670d\u52a1\u65f6\u5f00\u542f\uff1b \u8be5\u7279\u6027\u4f9d\u8d56\u4e8e\u53c2\u6570\u8ddf\u968f\u7279\u6027\uff0c\u4e5f\u5373\u8fc7\u6ee4\u53c2\u6570\u5728\u5173\u95ed\u7684\u72b6\u6001\u4e0b\u624d\u4f1a\u6709\u6548\u3002 3.4 \u5206\u6bb5\u7f13\u5b58 \u00b6 \u529f\u80fd\u8bf4\u660e \u5206\u6bb5\u7f13\u5b58\u529f\u80fd\u4f7f\u5f97\u7f13\u5b58\u7684\u57fa\u672c\u5355\u4f4d\u53d8\u6210\u4e86\u5757\uff0c\u5e76\u4e14\u5728\u7f13\u5b58\u5757\u5927\u5c0f\u4ee5\u53ca\u56de\u6e90\u8bf7\u6c42\u5927\u5c0f\u4e0a\u53ef\u4ee5\u91c7\u7528\u4e0d\u540c\u7c92\u5ea6\u8fdb\u884c\u63a7\u5236\uff0c\u6700\u7ec8\u5b9e\u73b0\u6309\u5757\u7f13\u5b58\uff0c\u6309\u9700\u56de\u6e90\u3002 \u5f00\u542f\u8be5\u529f\u80fd\u53ef\u6709\u6548\u964d\u4f4e\u5927\u6587\u4ef6\u56de\u6e90\u7387\uff0c\u4e5f\u53ef\u4ee5\u63d0\u9ad8\u6587\u4ef6\u5728 CDN \u8282\u70b9\u7684\u7f13\u5b58\u547d\u4e2d\u7387\uff0c\u540c\u65f6\u907f\u514d\u4e86\u62c9\u53d6\u5b8c\u6574\u6587\u4ef6\u5bfc\u81f4\u7684\u6e90\u7ad9\u5e26\u5bbd\u6d6a\u8d39\u3002\u7279\u522b\u5730\uff0c\u5f00\u542f\u8be5\u7279\u6027\u4e4b\u540e\uff0cCDN \u8282\u70b9\u4f1a\u4ee5 Range \u8bf7\u6c42\u56de\u6e90\u3002 \u914d\u7f6e\u5f15\u5bfc \u767b\u9646 CDN \u63a7\u5236\u53f0 \uff0c\u4f9d\u6b21\u8fdb\u5165\uff1a\u670d\u52a1 > \u529f\u80fd\u914d\u7f6e > \u7f13\u5b58\u914d\u7f6e > \u5206\u6bb5\u7f13\u5b58\uff0c\u70b9\u51fb\u300c\u7ba1\u7406\u300d\u6309\u94ae\u5373\u53ef\u5f00\u59cb\u914d\u7f6e\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u9ed8\u8ba4\u914d\u7f6e\uff1a\u8be5\u7279\u6027\u4f1a\u9ed8\u8ba4\u5f00\u542f\uff0c\u60a8\u53ef\u4ee5\u6709\u9009\u62e9\u6027\u7684\u5173\u95ed\u8be5\u7279\u6027\u3002\u7279\u522b\u5730\uff0c\u6211\u4eec\u9488\u5bf9\u5206\u6bb5\u7f13\u5b58\u9884\u7f6e\u4e86\u6587\u4ef6\u540e\u7f00\u6a21\u677f\uff0c\u9ed8\u8ba4\u9884\u7f6e\u540e\u7f00\u5982\u4e0b\uff1a \u89c6\u9891\uff1aAVI\u3001MP4\u3001FLV\u3001MOV\u30013GP\u3001ASF\u3001WMV\u3001MPG\u3001F4V\u3001M4V\u3001MKV\u3001VOB\u3001M3U8\u3001TS \u3001RMVB\u3001DAT\u3001RM \u97f3\u9891\uff1aMP3\u3001OGG\u3001M4A\u3001WMA\u3001AIF\u3001AU \u5b89\u88c5\u5305\uff1aAPK\u3001ZIP\u3001EXE\u3001RAR\u3001IPA\u3001PXL\u3001DEB\u3001SIS\u3001SISX\u3001JAR\u3001XAP \u6e38\u620f\u4e0b\u8f7d\uff1aSO\u3001CUE\u3001CCD\u3001MDS\u3001IMG\u30017Z \u5176\u5b83\uff1aCAB\u3001DHP\u3001GZ\u3001ISO\u3001MPQ\u3001PBCV\u3001PXL\u3001QNP\u3001R00\u3001XY\u3001XY2 \u8ffd\u52a0\u81ea\u5b9a\u4e49\uff1a\u4e3a\u4e86\u65b9\u4fbf\u7075\u6d3b\u914d\u7f6e\uff0c\u4e5f\u5373\u53ef\u4ee5\u6839\u636e\u6587\u4ef6\u540e\u7f00\u6216\u8005\u901a\u914d\u7b26\u89c4\u5219\u6765\u914d\u7f6e\u662f\u5426\u5f00\u542f\u5206\u6bb5\u7f13\u5b58\u529f\u80fd\uff0c\u5982\u622a\u56fe\u6240\u793a\uff1a \u5728\u8be5\u914d\u7f6e\u754c\u9762\uff0c\u60a8\u53ef\u4ee5\u586b\u5199\u8d44\u6e90\u8def\u5f84\uff0c\u7136\u540e\u70b9\u51fb\u3010\u6dfb\u52a0\u3011\u6309\u94ae\uff0c\u4fdd\u5b58\u5373\u53ef\u3002\u8def\u5f84\u89c4\u5219\u652f\u6301 * \u901a\u914d\u7b26\uff0c\u4f8b\u5982\uff1a /a/*.mp4 /b/*.apk /* /123/* \u914d\u7f6e\u6548\u679c \u5047\u8bbe\u6700\u7ec8\u7528\u6237\u53d1\u8d77\u4e86\u8d44\u6e90\u8bf7\u6c42\uff0c\u8bf7\u6c42\u7684 URL \u4e3a\uff1a http://www.example.com/download/game.zip \uff0cCDN \u8282\u70b9\u6536\u5230\u8bf7\u6c42\u540e\uff0c\u82e5\u547d\u4e2d\u5219\u54cd\u5e94\u5bf9\u5e94\u5206\u6bb5\u6587\u4ef6\u7ed9\u6700\u7ec8\u7528\u6237\uff0c\u672a\u547d\u4e2d\u7684\u5206\u6bb5 CDN \u8282\u70b9\u5219\u56de\u6e90\u53d1\u8d77 Range \u8bf7\u6c42\u83b7\u53d6\u8d44\u6e90\u6587\u4ef6\u3002 1.\u5f00\u542f\u5206\u6bb5\u7f13\u5b58 \u82e5\u6700\u7ec8\u7528\u6237\u53d1\u8d77\u8d44\u6e90\u8bf7\u6c42\uff0cCDN \u8282\u70b9\u4e0a\u5df2\u7ecf\u547d\u4e2d\u8be5\u5206\u6bb5\uff0c\u5219\u76f4\u63a5\u54cd\u5e94\u7ed9\u6700\u7ec8\u7528\u6237 \u82e5 CDN \u8282\u70b9\u672a\u547d\u4e2d\u7f13\u5b58\uff0c\u5219 CDN \u8282\u70b9\u56de\u6e90\u4f7f\u7528 Range \u8bf7\u6c42\uff0c\u5206\u6bb5\u83b7\u53d6\u8d44\u6e90\u6587\u4ef6 2.\u5173\u95ed\u5206\u6bb5\u7f13\u5b58 \u8282\u70b9\u6587\u4ef6\u7f13\u5b58\u8fc7\u671f\u4e4b\u540e\uff0c\u4f1a\u5411\u6e90\u7ad9\u83b7\u53d6\u6574\u4e2a\u8d44\u6e90\u6587\u4ef6 3.\u5206\u6bb5\u7f13\u5b58\u9884\u52a0\u8f7d \u5f00\u542f\u5206\u6bb5\u7f13\u5b58\u529f\u80fd\u4e4b\u540e\uff0c\u8be5\u7279\u6027\u4f1a\u9ed8\u8ba4\u5f00\u542f\u3002\u5f53\u6700\u7ec8\u7528\u6237\u8bf7\u6c42\u7b2c\u4e00\u4e2a\u5206\u6bb5\u6587\u4ef6\u65f6\uff0cCDN \u4f1a\u63d0\u524d\u53bb\u4e0b\u8f7d\u540e\u9762\u51e0\u4e2a\u5206\u6bb5\u6587\u4ef6\uff0c\u8fdb\u800c\u63d0\u9ad8\u6587\u4ef6\u4e0b\u8f7d\u901f\u5ea6\u3002 \u6ce8\u610f\u4e8b\u9879 \u6e90\u7ad9\u9700\u8981\u652f\u6301 Range \u8bf7\u6c42\uff0c\u5426\u5219\u4f1a\u5bfc\u81f4\u56de\u6e90\u5931\u8d25\uff1b\u4e25\u683c\u6765\u8bf4\uff0c\u6211\u4eec\u53ea\u901a\u8fc7 Accept-Ranges: bytes \u8fd9\u4e2a\u5934\u6765\u5224\u65ad\u6e90\u652f\u4e0d\u652f\u6301 Range \u8bf7\u6c42 \uff0c\u5426\u5219\u5373\u4f7f\u5f00\u542f\u4e86\u5206\u6bb5\u7f13\u5b58\u7279\u6027\uff0c\u4e5f\u4e0d\u4f1a\u751f\u6548\uff1b \u8be5\u529f\u80fd\u914d\u7f6e\u540e\u4e0d\u4f1a\u7acb\u5373\u751f\u6548\uff0c\u9700\u5728\u6587\u4ef6\u7f13\u5b58\u8fc7\u671f\u6216\u8005\u6587\u4ef6\u7f13\u5b58\u88ab\u4e3b\u52a8\u5237\u65b0\u4e4b\u540e\u65b9\u53ef\u751f\u6548 \u8be5\u529f\u80fd\u4ec5\u9488\u5bf9\u9759\u6001\u6587\u4ef6\uff0c\u52a8\u6001\u5185\u5bb9\u5f00\u542f\u5206\u6bb5\u7f13\u5b58\u4f1a\u53ef\u80fd\u4f1a\u53d1\u751f\u9519\u8bef\uff0c\u8bf7\u8c28\u614e\u4f7f\u7528\uff1b \u8be5\u529f\u80fd\u5f00\u542f\u540e\uff0c\u8d44\u6e90\u5728 CDN \u8282\u70b9\u4e0a\u4f1a\u8fdb\u884c\u5206\u6bb5\u7f13\u5b58\uff0c\u5982\u679c\u8981\u7acb\u9a6c\u5173\u95ed\u8be5\u7279\u6027\uff0c\u53ef\u901a\u8fc7\u624b\u52a8\u5237\u65b0\u6587\u4ef6\u6765\u89e3\u51b3\uff1b \u5982\u679c\u60a8\u5df2\u7ecf\u4f7f\u7528\u53c8\u62cd\u4e91\u5bf9\u8c61\u5b58\u50a8\u670d\u52a1\uff0c\u8be5\u7279\u6027\u5df2\u7ecf\u9ed8\u8ba4\u5f00\u542f\uff0c\u65e0\u9700\u505a\u4efb\u4f55\u914d\u7f6e\uff1b 3.5 \u6d4f\u89c8\u5668\u7f13\u5b58 \u00b6 \u529f\u80fd\u8bf4\u660e \u6d4f\u89c8\u5668\u7f13\u5b58\u7528\u4e8e\u8bbe\u7f6e\u8d44\u6e90\u6587\u4ef6\u5728\u5ba2\u6237\u7aef\uff08\u6d4f\u89c8\u5668\uff09\u7684\u7f13\u5b58\u8fc7\u671f\u65f6\u95f4\u8bbe\u7f6e\uff0c\u53ef\u81ea\u5b9a\u4e49\u9700\u8981\u5728\u6d4f\u89c8\u5668\u8fdb\u884c\u7279\u6b8a\u7f13\u5b58\u7684\u8d44\u6e90\u8def\u5f84\u53ca\u7f13\u5b58\u65f6\u95f4\u3002\u8d44\u6e90\u8def\u5f84\u7684\u8bbe\u7f6e\u652f\u6301\u6309\u6587\u4ef6\u8def\u5f84\u548c\u6587\u4ef6\u6269\u5c55\u540d\u8bbe\u7f6e\u3002 \u914d\u7f6e\u5f15\u5bfc \u767b\u5f55 CDN\u63a7\u5236\u53f0 \uff0c\u9009\u62e9\u9700\u8981\u914d\u7f6e\u7684\u670d\u52a1\uff0c\u4f9d\u6b21\u8fdb\u5165\uff1a\u670d\u52a1\u7ba1\u7406 > \u529f\u80fd\u914d\u7f6e > \u7f13\u5b58\u914d\u7f6e > \u3010\u6d4f\u89c8\u5668\u7f13\u5b58\u3011\uff0c\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u70b9\u51fb\u754c\u9762\u53f3\u8fb9\u7684\u3010\u7ba1\u7406\u3011\u6309\u94ae\u5373\u53ef\u5f00\u59cb\u914d\u7f6e\uff1a \u5728\u6b64\u914d\u7f6e\u754c\u9762\uff0c\u53ef\u4ee5\u5bf9\u5df2\u914d\u7f6e\u7684\u7f13\u5b58\u7b56\u7565\u8fdb\u884c\u7ba1\u7406\u64cd\u4f5c\uff0c\u4e5f\u53ef\u4ee5\u70b9\u51fb\u53f3\u4e0a\u89d2\u7684\u3010\u6dfb\u52a0\u914d\u7f6e\u3011\u6309\u94ae\uff0c\u65b0\u589e\u914d\u7f6e\u7b56\u7565\uff0c\u5982\u56fe\uff1a \u6839\u636e\u81ea\u8eab\u8981\u6c42\uff0c\u6dfb\u52a0\u8d44\u6e90\u8def\u5f84\u4ee5\u53ca\u7f13\u5b58\u65f6\u95f4\uff0c\u70b9\u51fb\u3010\u4fdd\u5b58\u3011\u6309\u94ae\u5373\u53ef\uff0c\u5176\u4e2d\u8d44\u6e90\u8def\u5f84\u652f\u6301 * \u901a\u914d\u7b26\uff0c\u4f8b\u5982\uff1a /a/*.mp4 /b/*.apk /* /123/* \u4e5f\u53ef\u4ee5\u4e3a\u6587\u4ef6\u540e\u7f00\u683c\u5f0f\uff0c\u4f8b\u5982\uff1a /*.(txt,doc,wri,docs,css,js,dot,xml,log,bat,csv) /*.(wav,mp3,wmv,rmi,aac,mp4,rmvb,mkv,avi,flv,swf,rm,mov,movie,qt) \u6ce8\u610f\u4e8b\u9879 \u5982\u679c\u8bbe\u7f6e\u7684\u6d4f\u89c8\u5668\u7f13\u5b58\u65f6\u95f4\u5927\u4e8e\u6587\u4ef6\u5728 CDN \u8282\u70b9\u4e0a\u7684\u7f13\u5b58\u8fc7\u671f\u65f6\u95f4\uff0c\u5219\u6b64\u5904\u8bbe\u7f6e\u7684\u6d4f\u89c8\u5668\u7f13\u5b58\u8fc7\u671f\u65f6\u95f4\u4f1a\u5931\u6548\uff0c\u4ecd\u4ee5 CDN \u8282\u70b9\u8bbe\u7f6e\u7684\u7f13\u5b58\u8fc7\u671f\u65f6\u95f4\u4e3a\u51c6\uff1b \u6d4f\u89c8\u5668\u7f13\u5b58\u8bbe\u7f6e\u9ed8\u8ba4\u5339\u914d\u7684\u72b6\u6001\u7801\u8303\u56f4\u4e3a\uff1a\u5927\u4e8e\u7b49\u4e8e 200 \u5c0f\u4e8e 400\uff0c\u8be5\u9879\u914d\u7f6e\u4e0d\u4f1a\u5f71\u54cd CDN \u7f13\u5b58\u670d\u52a1\u5668\u7684\u884c\u4e3a\u3002 4. \u6027\u80fd\u4f18\u5316 \u00b6 4.1 WebP \u81ea\u9002\u5e94 \u00b6 \u529f\u80fd\u8bf4\u660e WebP \u81ea\u9002\u5e94\u529f\u80fd\u662f CDN \u5e73\u53f0\u667a\u80fd\u5224\u65ad\u5ba2\u6237\u7aef\u6d4f\u89c8\u5668\u662f\u5426\u652f\u6301 WebP \u89e3\u7801\uff0c\u5982\u652f\u6301\u5219\u8fd4\u56de WebP \u683c\u5f0f\u56fe\u7247\uff0c\u5426\u5219\u8fd4\u56de\u539f\u56fe\uff0c\u5ba2\u6237\u7aef\u4ee5\u53ca\u6e90\u7ad9\u65e0\u9700\u4efb\u4f55\u6539\u52a8\u3002\u5f00\u542f\u8be5\u7279\u6027\uff0c\u53ef\u4ee5\u6709\u6548\u8282\u7701 CDN \u4f20\u8f93\u5e26\u5bbd\uff0c\u52a0\u901f\u56fe\u7247\u6e32\u67d3\u901f\u5ea6\u3002 \u5982\u4f55\u5b9e\u73b0\uff1f WebP \u81ea\u9002\u5e94\u5927\u81f4\u7684\u5904\u7406\u6d41\u7a0b\u5982\u4e0b\uff1a 1.CDN \u5982\u4f55\u5224\u65ad\u5ba2\u6237\u7aef\u662f\u5426\u652f\u6301 WebP ? CDN \u662f\u901a\u8fc7 HTTP Accept \u5934\u6765\u5224\u65ad\u7684\uff0c\u5982\u679c\u652f\u6301\uff0c\u5219\u8fd4\u56de WebP \u526f\u672c\u5e76\u8fdb\u884c\u7f13\u5b58\uff1b\u5982\u679c\u4e0d\u652f\u6301\uff0c\u5219\u8fd4\u56de\u539f\u56fe\u3002\u4ee5 Chrome \u6d4f\u89c8\u5668\u4e3a\u4f8b\uff1a accept:image/webp,image/apng,image/*,*/*;q=0.8 \u5982\u4e0a\u5217\u8868\u53ef\u4ee5\u770b\u51fa\uff0c\u5f53 Accept \u8bf7\u6c42\u5934\u91cc\u9762\u5982\u679c\u6709 image/webp \u5b57\u6bb5\uff0c\u5219\u8bf4\u660e\u5ba2\u6237\u7aef\u652f\u6301 WebP \u89e3\u7801\u3002 2.CDN \u5982\u4f55\u5b9e\u73b0\u5b9e\u65f6\u56fe\u7247\u683c\u5f0f\u8f6c\u6362\uff1f \u9488\u5bf9\u7528\u6237\u6e90\u7ad9\u5e76\u975e WebP \u683c\u5f0f\u56fe\u7247\u7684\u65f6\uff0cCDN \u5c42\u9700\u8981\u652f\u6301\u5c06\u539f\u56fe\u56fe\u7247\u7684\u5b9e\u65f6\u8f6c\u6362\u4e3a WebP \u683c\u5f0f\u526f\u672c\uff0c\u8fd9\u4e2a\u5728 CDN \u5c42\u9762\u662f\u65e0\u7f1d\u652f\u6301\u7684\u3002\u6d41\u7a0b\u662f\u8fd9\u6837\u7684\uff1a \u5ba2\u6237\u7aef\u6d4f\u89c8\u5668\u8bf7\u6c42\u4e00\u4e2a\u56fe\u7247\u8d44\u6e90\uff0c\u4f8b\u5982\uff1ahttp://webp.example.com/test.png; CDN \u901a\u8fc7 Accept \u5934\u5df2\u7ecf\u5224\u65ad\u5ba2\u6237\u7aef\u6d4f\u89c8\u5668\u652f\u6301 WebP \u683c\u5f0f\u7684\u56fe\u7247\uff1b CDN \u56de\u7528\u6237\u6e90\u7ad9\u53d6\u56de\u539f\u56fe\u5e76\u5c06\u539f\u56fe\u5b9e\u65f6\u8f6c\u4e3a WebP \u683c\u5f0f\u7684\u56fe\u7247\uff0c\u5e76\u54cd\u5e94\u7ed9\u5ba2\u6237\u7aef\u6d4f\u89c8\u5668\u3002 \u8fd9\u91cc\u503c\u5f97\u5f3a\u8c03\u7684\u662f\uff0c\u53c8\u62cd\u4e91 CDN \u5df2\u7ecf\u65e0\u7f1d\u517c\u5bb9\u4e86\u5404\u79cd\u4f5c\u56fe\u573a\u666f\u548c\u8bbf\u95ee\u65b9\u5f0f\uff0c\u5177\u4f53\u5305\u62ec\uff1a \u539f\u56fe\u8bbf\u95ee \uff0c\u793a\u4f8b\uff1a/a.jpg \u81ea\u5b9a\u4e49\u7248\u672c\u53f7\u4f5c\u56fe\uff0c\u793a\u4f8b\uff1a/a.jpg!123 URL \u4f5c\u56fe \uff0c\u793a\u4f8b\uff1a/a.jpg!/format/webp \u81ea\u5b9a\u4e49\u7248\u672c\u53f7 + URL \u4f5c\u56fe\uff1a/a.jpg!123/format/webp \u914d\u7f6e\u5f15\u5bfc \u767b\u9646 CDN \u63a7\u5236\u53f0 \uff0c\u4f9d\u6b21\u8fdb\u5165\uff1a\u670d\u52a1\u7ba1\u7406 > \u529f\u80fd\u914d\u7f6e > \u6027\u80fd\u4f18\u5316 > WebP \u81ea\u9002\u5e94\uff0c\u5f00\u542f\u5373\u53ef\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff1a\uff1a \u5728\u914d\u7f6e\u754c\u9762\uff0c\u6ed1\u52a8\u53f3\u8fb9\u7684\u6309\u94ae\uff0c\u5728\u786e\u5b9a\u5bf9\u8bdd\u6846\u4e0b\uff0c\u70b9\u51fb\u3010\u786e\u5b9a\u3011\u6309\u94ae\u5373\u53ef\u4e00\u952e\u5f00\u542f\u3002 \u6ce8\u610f\u4e8b\u9879 CDN \u5e73\u53f0\u4f1a\u6839\u636e\u8bf7\u6c42\u5934 Accept: image/webp \u6765\u667a\u80fd\u5224\u65ad\u5ba2\u6237\u7aef\u662f\u5426\u652f\u6301 WebP \u89e3\u7801\uff0c\u4e0d\u652f\u6301\u7684\u5ba2\u6237\u7aef\uff0c\u4f1a\u9ed8\u8ba4\u8fd4\u56de\u539f\u59cb\u56fe\u7247\uff0c\u53ef\u4ee5\u65e0\u7f1d\u5207\u6362\uff1b \u5df2\u7ecf\u4f7f\u7528\u4e86\u53c8\u62cd\u4e91\u81ea\u5b9a\u4e49\u7248\u672c\u4f5c\u56fe\u3001URL \u4f5c\u56fe\u3001\u81ea\u5b9a\u4e49\u7248\u672c\u4f5c\u56fe\uff0bURL \u4f5c\u56fe\u7684\u8bf7\u6c42\u4e5f\u65e0\u7f1d\u652f\u6301\u8be5\u7279\u6027\uff1b \u5728 CDN \u8282\u70b9\u672a\u7f13\u5b58 WebP \u526f\u672c\u7684\u60c5\u51b5\u4e0b\uff0cCDN \u5e73\u53f0\u4f1a\u5b9e\u65f6\u751f\u6210 WebP \u526f\u672c\u5e76\u8fd4\u56de\u3002 \u66f4\u591a\u4e86\u89e3\uff0c\u8bf7\u53c2\u7167\uff1a \u5982\u4f55\u901a\u8fc7 WebP \u81ea\u9002\u5e94\u65b9\u6848\u51cf\u5c11\u56fe\u7247\u8d44\u6e90\u5927\u5c0f \uff0c \u79fb\u52a8\u7aef\u5982\u4f55\u4f7f\u7528 WebP\uff08\u4e0a\uff09 \u3001 \u79fb\u52a8\u7aef\u5982\u4f55\u4f7f\u7528 WebP\uff08\u4e0b\uff09 \u3002 4.2 H.265 \u81ea\u9002\u5e94 \u00b6 \u529f\u80fd\u8bf4\u660e H.265 \u81ea\u9002\u5e94\u529f\u80fd\u662f CDN \u5e73\u53f0\u667a\u80fd\u5224\u65ad\u5ba2\u6237\u7aef\u662f\u5426\u652f\u6301 H.265 \u89e3\u7801\uff0c\u5982\u652f\u6301\u5219\u8fd4\u56de H.265 \u683c\u5f0f\u89c6\u9891\uff0c\u5426\u5219\u8fd4\u56de\u539f\u59cb\u89c6\u9891\u3002\u901a\u8fc7\u90e8\u7f72 H.265 \u89c6\u9891\uff0c\u53ef\u63d0\u5347\u7ec8\u7aef\u7528\u6237\u89c2\u770b\u4f53\u9a8c\uff0c\u51cf\u5c11\u7f51\u7edc\u4f20\u8f93\u5e26\u5bbd\u3002 \u5982\u4f55\u5b9e\u73b0\uff1f H.265 \u81ea\u9002\u5e94\u5927\u81f4\u7684\u5904\u7406\u6d41\u7a0b\u5982\u4e0b\uff1a 1.\u5ba2\u6237\u7aef\u53d1\u8d77 H.265 \u89c6\u9891\u8d44\u6e90\u8bf7\u6c42\uff0c\u4f8b\u5982\uff1ahttp://h265.example.com/test.mp4\uff1b 2.CDN \u8282\u70b9\u5224\u65ad\u662f\u5426\u6709 H.265 \u7f13\u5b58\u526f\u672c\uff0c\u5982\u6709\u5219\u76f4\u63a5\u54cd\u5e94\u7ed9\u5ba2\u6237\u7aef\uff1b 3.\u8282\u70b9\u5982\u679c\u6ca1\u6709\u7f13\u5b58\u526f\u672c\uff0c\u5219\u56de\u6e90\u7ad9\u83b7\u53d6\u8d44\u6e90\uff0c\u5982\u6709\uff0c\u5219\u8fd4\u56de H.265 \u89c6\u9891\u8d44\u6e90\u5e76\u5728 CDN \u8282\u70b9\u7f13\u5b58\uff1b 4.\u5982\u679c\u6ca1\u6709\uff0c\u5219\u8fd4\u56de\u539f\u59cb\u89c6\u9891\u8d44\u6e90\uff0c\u5e76\u7f13\u5b58 6 \u5206\u949f\uff0c\u7f13\u5b58\u8fc7\u671f\u4e4b\u540e\u4f1a\u56de\u6e90\u63a2\u6d4b\u3002 CDN \u5982\u4f55\u5224\u65ad\u5ba2\u6237\u7aef\u662f\u5426\u652f\u6301 H.265 \u89e3\u7801 ? CDN \u5f53\u524d\u8bc6\u522b\u5ba2\u6237\u7aef\u662f\u5426\u652f\u6301 H.265 \u89e3\u7801\u662f\u901a\u8fc7 HTTP \u8bf7\u6c42\u5934\uff1aAccept-Encoding: h265 \u6765\u5224\u65ad\u7684\uff0cCDN \u6536\u5230\u8be5\u8bf7\u6c42\u4e4b\u540e\uff0c\u518d\u53bb\u5224\u65ad CDN \u8282\u70b9\u662f\u5426\u6709 H.265 \u7f13\u5b58\u526f\u672c\uff0c\u5426\u5219\u76f4\u63a5\u8fd4\u56de\u539f\u59cb\u89c6\u9891\u8d44\u6e90\u3002\u8bf7\u6c42\u8bc6\u522b\u6d41\u7a0b\u5982\u4e0b\u622a\u56fe\u6240\u793a\uff1a \u914d\u7f6e\u5f15\u5bfc \u767b\u9646 CDN \u63a7\u5236\u53f0 \uff0c\u4f9d\u6b21\u8fdb\u5165\uff1a\u670d\u52a1\u7ba1\u7406 > \u529f\u80fd\u914d\u7f6e > \u6027\u80fd\u4f18\u5316 > H.265 \u81ea\u9002\u5e94\uff0c\u5f00\u542f\u5373\u53ef\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff1a\uff1a \u5728\u914d\u7f6e\u754c\u9762\uff0c\u6ed1\u52a8\u53f3\u8fb9\u7684\u6309\u94ae\uff0c\u5728\u786e\u5b9a\u5bf9\u8bdd\u6846\u4e0b\uff0c\u70b9\u51fb\u3010\u786e\u5b9a\u3011\u6309\u94ae\u5373\u53ef\u4e00\u952e\u5f00\u542f\u3002 \u6ce8\u610f\u4e8b\u9879 \u5ba2\u6237\u7aef\u9700\u8981\u6839\u636e\u7ea6\u5b9a\u89c4\u8303\u53d1\u8d77 Accept-Encoding: h265 \u7684\u8bf7\u6c42\u5934\uff0cCDN \u8282\u70b9\u4f1a\u6839\u636e\u6b64\u8bf7\u6c42\u5934\u6765\u5224\u65ad\u5ba2\u6237\u7aef\u662f\u5426\u652f\u6301 H.265 \u89e3\u7801\uff1b CDN \u5f00\u542f H.265 \u81ea\u9002\u5e94\u4e4b\u540e\uff0c\u662f\u7981\u6b62\u5ba2\u6237\u7aef\u7f13\u5b58\u7684\uff08\u4ee5\u907f\u514d\u5916\u90e8\u7684\u4ee3\u7406\u670d\u52a1\u5668\u7f13\u5b58\u5185\u5bb9\uff0c\u4ece\u800c\u5bfc\u81f4\u540e\u9762\u5176\u4ed6\u4e0d\u652f\u6301 H.265 \u683c\u5f0f\u7684\u64ad\u653e\u5668\u4e0b\u8f7d\u5230 H.265 \u683c\u5f0f\u7684\u8d44\u6e90\uff09\uff1b \u6e90\u7ad9\u4e3a\u4e86\u533a\u5206\u539f\u59cb\u89c6\u9891\u548c H.265 \u683c\u5f0f\u89c6\u9891\uff0cH.265 \u89c6\u9891\u5b58\u50a8\u8def\u5f84\u9700\u8981\u7ea6\u5b9a\u89c4\u8303\u4e3a\uff1a{URL}.h265\uff0c \u4ee5\u6b64\u6765\u533a\u5206\u539f\u59cb\u89c6\u9891\u548c H.265 \u89c6\u9891\u3002\u4e5f\u5373\u5728 CDN \u8282\u70b9\u672a\u7f13\u5b58 H.265 \u89c6\u9891\u526f\u672c\u7684\u60c5\u51b5\u4e0b\uff0cCDN \u56de\u6e90\u4f1a\u5e26\u7740\u76f8\u5e94\u7684\u540e\u7f00\u56de\u6e90\u83b7\u53d6 H.265 \u683c\u5f0f\u526f\u672c\u6587\u4ef6\uff1b \u5728 CDN \u56de\u6e90\u672a\u83b7\u53d6\u5230 H.265 \u89c6\u9891\u526f\u672c\u65f6\uff0c\u4f1a\u81ea\u52a8\u8bf7\u6c42\u539f\u59cb\u89c6\u9891\u6587\u4ef6\uff0c\u5e76\u4e14\u5728 CDN \u8282\u70b9\u7f13\u5b58\u8f83\u77ed\u7684\u65f6\u95f4\uff0c\u9ed8\u8ba4\u4e3a 6 \u5206\u949f\u3002 4.3 \u7801\u7387\u9002\u914d\u9650\u901f \u00b6 \u529f\u80fd\u8bf4\u660e \u53c8\u62cd\u4e91 CDN \u5e73\u53f0\u652f\u6301\u89c6\u9891\u6587\u4ef6\u7684\u7801\u7387\u9002\u914d\u9650\u901f\u529f\u80fd\uff0c\u901a\u8fc7\u81ea\u52a8\u5206\u6790\u5f53\u524d\u89c6\u9891\u6587\u4ef6\u4f20\u8f93\u7684\u7801\u7387\uff0c\u5c06\u89c6\u9891\u6587\u4ef6\u7684\u4f20\u8f93\u901f\u5ea6\u63a7\u5236\u5728\u89c6\u9891\u7801\u7387\u8303\u56f4\u4e4b\u5185\uff0c\u53ef\u4ee5\u5728\u4e00\u5b9a\u7a0b\u5ea6\u4e0a\u9632\u6b62\u9ad8\u5cf0\u671f\u65f6\u5e26\u5bbd\u5360\u7528\uff0c\u8282\u7701\u6210\u672c\u3002\u9650\u901f\u4e3e\u4f8b\uff1a\u4e00\u5f00\u59cb\u4e0d\u9650\u901f\uff0c\u5f53\u64ad\u653e\u65f6\u957f\u8d85\u8fc7 3 \u79d2\u65f6\uff0c\u8fdb\u884c 1.1 \u500d\u7801\u7387\u9650\u901f\u3002\u8be5\u529f\u80fd\u53ef\u652f\u6301\u7684\u914d\u7f6e\u5305\u62ec\uff1a \u8d44\u6e90\u8def\u5f84\uff1a\u652f\u6301 * \u4f5c\u4e3a\u901a\u914d\u7b26\uff0c\u5982\uff1a /a/*.mp4 \u3001 /*.mp4 \uff1b \u9650\u901f\u7b56\u7565\uff1a\u6307\u5b9a\u5230\u8fbe\u8bbe\u7f6e\u7684\u65f6\u95f4\u4e4b\u540e\u5f00\u59cb\u9650\u5236\u89c6\u9891\u6587\u4ef6\u7684\u4e0b\u8f7d\u901f\u5ea6\uff0c\u652f\u6301\u7684\u5355\u4f4d\u5305\u62ec\u79d2\u3001\u5206\u949f\uff0c\u63a8\u8350\u503c\u4e3a 3 \u79d2\uff1b \u9650\u901f\u56e0\u5b50\uff1a\u6307\u5b9a\u4e0b\u8f7d\u901f\u5ea6\u4e3a\u89c6\u9891\u7801\u7387\u7684\u591a\u5c11\u500d\uff0c\u63a8\u8350\u503c\u4e3a 1.1\uff1b \u914d\u7f6e\u5f15\u5bfc \u767b\u9646 CDN \u63a7\u5236\u53f0 \uff0c\u4f9d\u6b21\u8fdb\u5165\uff1a\u670d\u52a1\u7ba1\u7406 > \u529f\u80fd\u914d\u7f6e > \u6027\u80fd\u4f18\u5316 > \u7801\u7387\u9002\u914d\u9650\u901f\uff0c\u70b9\u51fb\u3010\u7ba1\u7406\u3011\u6309\u94ae\uff0c\u8fdb\u5165\u529f\u80fd\u914d\u7f6e\u754c\u9762\uff1a 1) \u6dfb\u52a0\u89c4\u5219 \u4f9d\u6b21\u8fdb\u884c\u5982\u4e0b\u64cd\u4f5c\uff1a \u6ed1\u52a8\u5f00\u5173\uff1a\u5c06\u914d\u7f6e\u754c\u9762\u5de6\u4e0a\u89d2\u7684\u5f00\u5173\u7531\u5173\u95ed\u72b6\u6001\u8c03\u6574\u4e3a\u5f00\u542f\u72b6\u6001\uff1b \u6dfb\u52a0\u89c4\u5219\uff1a\u70b9\u51fb\u914d\u7f6e\u754c\u9762\u53f3\u4e0a\u89d2\u7684\u3010\u6dfb\u52a0\u89c4\u5219\u3011\u6309\u94ae\u5373\u53ef\u6dfb\u52a0\u9002\u914d\u9650\u901f\u89c4\u5219\uff0c\u914d\u7f6e\u754c\u9762\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u5728\u914d\u7f6e\u754c\u9762\uff0c\u4f9d\u6b21\u9700\u8981\u8fdb\u884c\u8d44\u6e90\u8def\u5f84\u3001\u9650\u901f\u7b56\u7565\u3001\u9650\u901f\u56e0\u5b50\u7684\u914d\u7f6e\u3002 \u8d44\u6e90\u8def\u5f84\uff1a\u4e5f\u5373\u5bf9\u8bf7\u6c42\u7684 URI \u8fdb\u884c\u5339\u914d\uff0c\u5339\u914d\u6210\u529f\u5219\u8fdb\u5165\u9650\u901f\u903b\u8f91\uff0c\u652f\u6301 * \u901a\u914d\u7b26\uff0c\u4f8b\u5982\uff1a /mnt/download/*.mp4 \u9650\u901f\u7b56\u7565\uff1a\u8868\u793a\u4ece\u67d0\u4e2a\u65f6\u523b\uff08\u4e0b\u8f7d\u65f6\u95f4\uff0c\u4e0d\u662f\u64ad\u653e\u65f6\u95f4\uff09\u5f00\u59cb\u6267\u884c\u9650\u901f\u7b56\u7565\uff0c\u652f\u6301\u79d2\u548c\u5206\u949f\u914d\u7f6e\uff0c\u9ed8\u8ba4\u63a8\u8350 3 \u79d2\uff1b \u9650\u901f\u56e0\u5b50\uff1a\u7528\u6765\u63a7\u5236 mp4 \u6587\u4ef6\u4e0b\u8f7d\u9650\u901f\u7684\u56e0\u5b50\uff0c\u6307\u5b9a\u4e0b\u8f7d\u901f\u5ea6\u4e3a\u89c6\u9891\u7801\u7387\u7684\u591a\u5c11\u500d\uff0c\u63a8\u8350\u503c\u4e3a 1.1\uff1b \u4e3e\u4f8b\uff1a \u5047\u5982\u67d0\u89c6\u9891\u7801\u7387\u4e3a 1337 Kbps\uff0c\u5219\u89c6\u9891\u7684\u4e0b\u8f7d\u901f\u5ea6\u4e3a : (1337/8)*1.1 = 183 KB/s \u914d\u7f6e\u5b8c\u6240\u6709\u914d\u7f6e\u9879\u4e4b\u540e\uff0c\u70b9\u51fb\u5de6\u4e0b\u89d2\u7684\u3010\u4fdd\u5b58\u3011\u6309\u94ae\u5373\u53ef\u3002 2) \u7f16\u8f91\u3001\u5220\u9664\u89c4\u5219 \u5982\u4e0b\u56fe\u6240\u793a\uff0c\u53ef\u4ee5\u5728\u64cd\u4f5c\u533a\u57df\u70b9\u51fb\u3010\u7f16\u8f91\u3011\u3001\u3010\u5220\u9664\u3011\u6309\u94ae\u5373\u53ef\u7f16\u8f91\u548c\u5220\u9664\u89c4\u5219\u3002 \u6ce8\u610f\u4e8b\u9879 \u5f53\u524d\u4ec5\u652f\u6301 mp4 \u6587\u4ef6\u683c\u5f0f\u89c6\u9891\u6587\u4ef6\u7684\u7801\u7387\u81ea\u9002\u5e94\uff1b \u9700\u8981\u786e\u4fdd mp4 \u6587\u4ef6\u7684 moov\uff08 Movie box \uff09\u5728\u89c6\u9891\u6587\u4ef6\u7684\u5934\u90e8\uff0c\u5426\u5219\u4f1a\u5bfc\u81f4\u81ea\u52a8\u9650\u901f\u529f\u80fd\u5931\u6548\uff0c\u4e00\u822c\u60c5\u51b5\u4e0b\uff0cmoov \u4f1a\u7d27\u968f ftyp\uff08File type box\uff09 \u51fa\u73b0\uff1b \u89c6\u9891\u6587\u4ef6\u7684\u5143\u6570\u636e\uff08 metadata \uff09\u8fc7\u5927\u4f1a\u5bfc\u81f4\u9650\u901f\u5931\u8d25\uff0c\u57fa\u4e8e\u7528\u6237\u4f53\u9a8c\u8003\u8651\uff0c\u5f53\u524d\u8bbe\u7f6e\u7684\u9600\u503c\u662f 512 KB\uff1b \u5f53\u914d\u7f6e\u7684\u9650\u901f\u7b56\u7565\u4e3a\u67d0\u65f6\u95f4\u65f6\uff08\u4f8b\u5982\uff1a3 \u79d2\uff09\uff0c\u5219\u5728 3 \u79d2\u4e4b\u540e\u4e0d\u4f1a\u7acb\u9a6c\u628a\u4e0b\u8f7d\u901f\u5ea6\u964d\u4e3a\u671f\u671b\u7684\u4e0b\u8f7d\u901f\u5ea6\uff0c\u5982\u679c\u4ece\u9650\u901f\u5f00\u59cb\u5230\u5230\u76ee\u524d\u4e3a\u6b62\u6709\u53d1\u9001\u591a\u4f59\u7684\u6570\u636e\uff0c\u5219\u67d0\u4e00\u6bb5\u65f6\u95f4\u5185\u4f1a\u505c\u6b62\u53d1\u9001\u6570\u636e\uff0c\u76f4\u5230\u6700\u7ec8\u7684\u4e0b\u8f7d\u901f\u5ea6\u4fdd\u6301\u5728\u8bbe\u5b9a\u7684\u8303\u56f4\u4e4b\u5185\u3002 4.4 \u9875\u9762\u538b\u7f29 \u00b6 \u529f\u80fd\u8bf4\u660e \u5f00\u542f\u540e\uff0c\u4f1a\u81ea\u52a8\u53bb\u9664 HTML \u6587\u4ef6\u4e2d\u975e\u5fc5\u8981\u7684\u5b57\u7b26\uff08\u7a7a\u767d\u3001\u6ce8\u91ca\u7b49\uff09\uff0c\u81ea\u52a8\u538b\u7f29\u6587\u4ef6\u5927\u5c0f\uff0c\u63d0\u5347\u8bbf\u95ee\u901f\u5ea6\u3002 \u914d\u7f6e\u5f15\u5bfc \u767b\u9646 CDN \u63a7\u5236\u53f0 \uff0c\u4f9d\u6b21\u8fdb\u5165\uff1a\u670d\u52a1\u7ba1\u7406 > \u529f\u80fd\u914d\u7f6e > \u6027\u80fd\u4f18\u5316 > \u9875\u9762\u538b\u7f29\uff0c\u5f00\u542f\u5f00\u5173\u5373\u53ef\uff0c\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u5728\u914d\u7f6e\u754c\u9762\uff0c\u6ed1\u52a8\u53f3\u8fb9\u7684\u6309\u94ae\uff0c\u5728\u786e\u5b9a\u5bf9\u8bdd\u6846\u4e0b\uff0c\u70b9\u51fb\u3010\u786e\u5b9a\u3011\u6309\u94ae\u5373\u53ef\u4e00\u952e\u5f00\u542f\u3002 \u6ce8\u610f\u4e8b\u9879 \u7279\u522b\u5730\uff0c\u76ee\u524d\u4ec5\u652f\u6301 HTML \u9875\u9762\u7684\u4f18\u5316\u3002 4.5 HTTP 302 \u8c03\u5ea6 \u00b6 \u529f\u80fd\u8bf4\u660e \u914d\u5408 DNS \u8c03\u5ea6\uff0c\u57fa\u4e8e\u5185\u5bb9\u548c\u7cbe\u51c6 IP \u7684\u7cbe\u786e\u8c03\u5ea6\u65b9\u6848\uff0c\u8be5\u8c03\u5ea6\u6a21\u5757\u53ef\u4ee5\u83b7\u53d6\u6700\u7ec8\u7528\u6237\u771f\u5b9e\u7684 IP \u5730\u5740\u548c\u5185\u5bb9\u5730\u5740\uff0c\u4f7f\u7528 HTTP \u534f\u8bae\u91cc\u9762\u7684 302 \u8df3\u8f6c\u529f\u80fd\uff0c\u5206\u914d\u6700\u4f18\u7684 CDN \u8fb9\u7f18\u52a0\u901f\u8282\u70b9\u7ed9\u6700\u7ec8\u7528\u6237\u3002 \u5b9e\u73b0\u673a\u5236 \u7ecf\u8fc7 HTTP 302 \u8c03\u5ea6 \u4e4b\u540e\u7684\u8d44\u6e90\u8bf7\u6c42\u5730\u5740\u7684\u53d8\u5316\u53c2\u7167\u5982\u4e0b\u793a\u4f8b\uff1a \u539f\u59cb\u8bbf\u95ee\u5730\u5740\uff1a http://test.example.com/image/1.png \u7ecf\u8fc7 HTTP 302 \u8c03\u5ea6\u540e\u7684 Location \u5730\u5740\uff1a http://60.211.204.130/test.example.com/image/1.png?_marco_sum=XXX&_marco_id=XXX&_marco_from=58.222.18.5 \u5176\u4e2d\uff0c Location \u5730\u5740\u91cc\u9762\u7684\u53c2\u6570 macro_from \u7684\u503c\u662f\u7b2c\u4e00\u6b21 DNS \u8c03\u5ea6\u89e3\u6790\u5230\u7684 CDN \u8fb9\u7f18\u8282\u70b9 IP \u5730\u5740\uff0c 60.211.204.130 \u662f\u7ecf\u8fc7 HTTP 302 \u8c03\u5ea6\u4e4b\u540e\u6700\u4f18\u7684 CDN \u8fb9\u7f18\u52a0\u901f\u8282\u70b9 IP\u3002 \u914d\u7f6e\u5f15\u5bfc \u767b\u9646 CDN \u63a7\u5236\u53f0 \uff0c\u4f9d\u6b21\u8fdb\u5165\uff1a\u670d\u52a1 > \u529f\u80fd\u914d\u7f6e > \u6027\u80fd\u4f18\u5316 > HTTP 302 \u8c03\u5ea6\uff0c\u70b9\u51fb\u300c\u7ba1\u7406\u300d\u6309\u94ae\u5373\u53ef\u5f00\u59cb\u914d\u7f6e\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u9ed8\u8ba4\u914d\u7f6e\uff1a\u8be5\u7279\u6027\u4f1a\u9ed8\u8ba4\u5f00\u542f\uff0c\u60a8\u53ef\u4ee5\u6709\u9009\u62e9\u6027\u7684\u5173\u95ed\u8be5\u7279\u6027\u3002\u7279\u522b\u5730\uff0c\u6211\u4eec\u9488\u5bf9 HTTP 302 \u8c03\u5ea6\u529f\u80fd\u9884\u7f6e\u4e86\u6587\u4ef6\u540e\u7f00\u6a21\u677f\uff0c\u9ed8\u8ba4\u9884\u7f6e\u540e\u7f00\u5982\u4e0b\uff1a \u89c6\u9891\uff1aAVI\u3001MP4\u3001FLV\u3001MOV\u30013GP\u3001ASF\u3001WMV\u3001MPG\u3001F4V\u3001M4V\u3001MKV\u3001VOB\u3001M3U8\u3001TS \u3001RMVB\u3001DAT\u3001RM \u97f3\u9891\uff1aMP3\u3001OGG\u3001M4A\u3001WMA\u3001AIF\u3001AU \u5b89\u88c5\u5305\uff1aAPK\u3001ZIP\u3001EXE\u3001RAR\u3001IPA\u3001PXL\u3001DEB\u3001SIS\u3001SISX\u3001JAR\u3001XAP \u6e38\u620f\u4e0b\u8f7d\uff1aSO\u3001CUE\u3001CCD\u3001MDS\u3001IMG\u30017Z \u5176\u5b83\uff1aCAB\u3001DHP\u3001GZ\u3001ISO\u3001MPQ\u3001PBCV\u3001PXL\u3001QNP\u3001R00\u3001XY\u3001XY2 \u8ffd\u52a0\u81ea\u5b9a\u4e49\uff1a\u4e3a\u4e86\u65b9\u4fbf\u7075\u6d3b\u914d\u7f6e\uff0c\u4e5f\u5373\u53ef\u4ee5\u6839\u636e\u6587\u4ef6\u540e\u7f00\u6216\u8005\u901a\u914d\u7b26\u89c4\u5219\u6765\u914d\u7f6e\u662f\u5426\u5f00\u542f\u8be5\u529f\u80fd\uff0c\u5982\u622a\u56fe\u6240\u793a\uff1a \u5728\u8be5\u914d\u7f6e\u754c\u9762\uff0c\u60a8\u53ef\u4ee5\u586b\u5199\u8d44\u6e90\u8def\u5f84\uff0c\u7136\u540e\u70b9\u51fb\u3010\u6dfb\u52a0\u3011\u6309\u94ae\uff0c\u4fdd\u5b58\u5373\u53ef\u3002\u8def\u5f84\u89c4\u5219\u652f\u6301 * \u901a\u914d\u7b26\uff0c\u4f8b\u5982\uff1a /a/*.mp4 /b/*.apk /* /123/* \u6ce8\u610f\u4e8b\u9879 \u5982\u679c\u8be5\u670d\u52a1\u4e0b\u7684\u57df\u540d\u591a\u4e3a\u5c0f\u6587\u4ef6\u52a0\u901f\u573a\u666f\uff0c\u4e3a\u4e86\u907f\u514d 302 \u8df3\u8f6c\u9020\u6210\u7684\u989d\u5916\u6d88\u8017\uff0c\u4e0d\u5b9c\u5f00\u542f\u8be5\u529f\u80fd\uff1b \u4f7f\u7528\u8be5\u529f\u80fd\uff0c\u9700\u8981\u786e\u8ba4\u5ba2\u6237\u7aef\u6216\u8005\u64ad\u653e\u5668\u662f\u5426\u652f\u6301 302 \u8df3\u8f6c\uff1b HTTP 302 \u8c03\u5ea6\u4f1a\u4f7f\u5f97 URL \u7684\u5730\u5740\u53d1\u751f\u53d8\u5316\uff0c\u67d0\u4e9b\u5e94\u7528\u5bf9 URL \u7684\u53d8\u5316\u654f\u611f\uff0c\u8bf7\u8c28\u614e\u4f7f\u7528\u3002 4.6 \u91cd\u5b9a\u5411\u8ddf\u968f \u00b6 \u529f\u80fd\u8bf4\u660e \u5f53 CDN \u8282\u70b9\u56de\u6e90\u7ad9\u65f6\uff0c\u82e5\u6e90\u7ad9\u54cd\u5e94\u7684\u72b6\u6001\u7801\u4e3a 301/302\uff0cCDN \u8282\u70b9\u5bf9\u91cd\u5b9a\u5411\u4e4b\u540e\u7684\u76ee\u6807 URL \uff08\u4e5f\u5373 301/302 \u54cd\u5e94\u5934 Location \u5b57\u6bb5\u5bf9\u5e94\u7684\u4fe1\u606f\uff09\u53d1\u8d77\u8bf7\u6c42\uff0c\u5c06\u83b7\u53d6\u540e\u7684\u5185\u5bb9\u54cd\u5e94\u7ed9\u6700\u7ec8\u7528\u6237\uff0c\u5e76\u5728 CDN \u8282\u70b9\u8fdb\u884c\u7f13\u5b58\u3002\u8fd9\u6837\u5411\u6700\u7ec8\u7528\u6237\u5c4f\u853d\u4e86\u91cd\u5b9a\u5411\u8fc7\u7a0b\uff0c\u514d\u53bb\u4e86\u6700\u7ec8\u7528\u6237\u518d\u6b21\u5411\u91cd\u5b9a\u5411\u540e\u7684 URL \u91cd\u65b0\u53d1\u8d77\u8bf7\u6c42\u7684\u8fde\u63a5\u65f6\u95f4\uff0c\u4ece\u800c\u52a0\u5feb\u4e86\u8bbf\u95ee\u901f\u5ea6\u3002 \u539f\u7406\u4ecb\u7ecd \u4e00\u822c\u60c5\u51b5\u4e0b\uff0c\u5f53 CDN \u8282\u70b9\u56de\u6e90\u7ad9\u8bf7\u6c42\u6587\u4ef6\u65f6\uff0c\u82e5\u6e90\u7ad9\u8fd4\u56de\u7684\u662f HTTP 301/302 \u7684\u54cd\u5e94\uff0cCDN \u8282\u70b9\u4f1a\u5c06\u8be5\u54cd\u5e94\u8fd4\u56de\u7ed9\u5ba2\u6237\u7aef\uff0c\u5ba2\u6237\u7aef\u6839\u636e\u54cd\u5e94\u5934\u4e2d\u7684 Location \u5934\u4fe1\u606f\u8fdb\u884c\u518d\u6b21\u8bf7\u6c42\u3002\u914d\u7f6e\u4e86\u3010\u91cd\u5b9a\u5411\u8ddf\u968f\u3011\u529f\u80fd\u4e4b\u540e\uff0c\u8bbf\u95ee\u6d41\u7a0b\u5982\u4e0b\u56fe\u6240\u793a\uff1a 1\uff09\u5ba2\u6237\u7aef\u5411 CDN \u8282\u70b9\u53d1\u8d77\u8bf7\u6c42\u5e76\u4f20\u9012\u81f3\u6e90\u7ad9\uff0c\u4f8b\u5982\uff1a http://example.com/123.html \uff1b 2\uff09\u6e90\u7ad9\u7ed9 CDN \u8282\u70b9\u54cd\u5e94 301/302 \u72b6\u6001\u7801\uff0c\u5e76\u6307\u660e\u91cd\u5b9a\u5411\u540e\u7684 URL \u4e3a http://example.com/456.html 3\uff09CDN \u8282\u70b9\u5bf9\u91cd\u5b9a\u5411\u4e4b\u540e\u5bf9\u76ee\u6807 URL \u53d1\u8d77\u8bf7\u6c42\uff1b 4\uff09\u6e90\u7ad9\u54cd\u5e94\u5185\u5bb9\u7ed9\u6700\u7ec8\u7528\u6237\uff0c\u5e76\u5c06\u5185\u5bb9\u5728 CDN \u8282\u70b9\u8fdb\u884c\u7f13\u5b58\uff1b \u914d\u7f6e\u5f15\u5bfc \u767b\u9646 CDN \u63a7\u5236\u53f0 \uff0c\u4f9d\u6b21\u8fdb\u5165\uff1a\u670d\u52a1\u7ba1\u7406 > \u529f\u80fd\u914d\u7f6e > \u6027\u80fd\u4f18\u5316 > \u91cd\u5b9a\u5411\u8ddf\u968f\uff0c\u6ed1\u52a8\u5f00\u5173\u5373\u53ef\u5f00\u542f\u8be5\u529f\u80fd\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u5728\u914d\u7f6e\u754c\u9762\uff0c\u6ed1\u52a8\u53f3\u8fb9\u7684\u6309\u94ae\uff0c\u5728\u786e\u5b9a\u5bf9\u8bdd\u6846\u4e0b\uff0c\u70b9\u51fb\u3010\u786e\u5b9a\u3011\u6309\u94ae\u5373\u53ef\u4e00\u952e\u5f00\u542f\u3002 \u6ce8\u610f\u4e8b\u9879 \u5f00\u542f\u91cd\u5b9a\u5411\u8ddf\u968f\u540e\uff0c\u6700\u591a\u4ec5\u8ddf\u968f 3 \u8df3\uff0c\u8d85\u51fa\u9650\u5236\u5219\u4f1a\u76f4\u63a5\u8fd4\u56de 301/302 \u7ed9\u6700\u7ec8\u7528\u6237\uff1b \u5982\u91cd\u5b9a\u5411\u540e\u7684 Location \u5730\u5740\u4e5f\u5728\u53c8\u62cd\u4e91 CDN \u52a0\u901f\uff0c\u6211\u4eec\u9ed8\u8ba4\u4f1a\u5141\u8bb8\u4e00\u6b21\u8bbf\u95ee\uff0c\u8d85\u8fc7\u4e00\u6b21\uff0c\u5219\u4f1a\u76f4\u63a5\u54cd\u5e94 403\uff0c\u8bf7\u8c28\u614e\u4f7f\u7528\u3002 4.7 \u89c6\u9891\u62d6\u62c9 \u00b6 \u529f\u80fd\u8bf4\u660e \u89c6\u9891\u62d6\u62c9\u529f\u80fd\u7528\u4e8e\u89c6\u9891\u70b9\u64ad\u7684\u589e\u5f3a\u4f53\u9a8c\uff0c\u65b9\u4fbf\u6700\u7ec8\u7528\u6237\u901a\u8fc7\u62d6\u62c9\u64ad\u653e\u5668\u7684\u8fdb\u5ea6\u6761\uff0c\u89c2\u770b\u4efb\u610f\u8d77\u59cb\u4f4d\u7f6e\u7684\u89c6\u9891\uff0c\u800c\u65e0\u9700\u4ece\u5934\u89c2\u770b\u3002\u8be5\u529f\u80fd\u8fd8\u53ef\u4ee5\u6269\u5c55\u4e3a\u8df3\u8fc7\u7247\u5934\u3001\u7eed\u64ad\u3001\u9884\u64ad\u653e\u7b49\u529f\u80fd\u3002\u53d1\u9001\u62d6\u62c9\u64ad\u653e\u8fdb\u5ea6\u65f6\uff0c\u5ba2\u6237\u7aef\u53d1\u8d77\u7684\u8bf7\u6c42\u7c7b\u4f3c http://video.upyun.com/test.mp4?start=100 \u8fd9\u6837\u7684 URL \u8bf7\u6c42\u3002 \u76ee\u524d\u4ec5\u652f\u6301 MP4 \u548c FLV \u683c\u5f0f\u7684\u6587\u4ef6\u6309\u89c6\u9891\u5934\u62d6\u62c9\uff0c\u5e76\u4e14 FLV \u652f\u6301\u6309\u5b57\u8282\u62d6\u62c9\uff0cMP4 \u6309\u7167\u65f6\u95f4\u62d6\u62c9\u3002 \u914d\u7f6e\u5f15\u5bfc \u767b\u9646 CDN \u63a7\u5236\u53f0 \uff0c\u4f9d\u6b21\u8fdb\u5165\uff1a\u670d\u52a1\u7ba1\u7406 > \u529f\u80fd\u914d\u7f6e > \u6027\u80fd\u4f18\u5316 > \u89c6\u9891\u62d6\u62c9\uff0c\u70b9\u51fb\u3010\u7ba1\u7406\u3011\u6309\u94ae\u5373\u53ef\u5f00\u59cb\u914d\u7f6e\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u8be6\u7ec6\u914d\u7f6e\u8bf7\u53c2\u89c1 \u300c\u652f\u6301\u4ece\u4efb\u610f\u8d77\u70b9\u89c2\u770b\u300d\u89c6\u9891\u62d6\u62c9\u7528\u6237\u6307\u5357 \u6ce8\u610f\u4e8b\u9879 \u64ad\u653e\u5668\u53ef\u4ee5\u53d1\u8d77\u7ea6\u5b9a\u683c\u5f0f\u7684\u8bf7\u6c42\uff0c\u4f8b\u5982\uff1ahttp://example.com/video/test.mp4?start=xxx&end=xxx\uff1b \u6587\u4ef6\u9700\u542b\u6709\u5173\u952e\u5e27\uff0c\u8fd9\u662f\u5b9e\u73b0\u62d6\u62c9\u7684\u524d\u63d0\u6761\u4ef6\uff1b\u5173\u952e\u5e27\u592a\u5c11\u6216\u8005\u6ca1\u6709\u5173\u952e\u5e27\uff0c\u89c6\u9891\u6587\u4ef6\u9700\u8981\u91cd\u65b0\u7f16\u7801\uff1b \u89c6\u9891\u6587\u4ef6 metedata \u4e2d\u7f3a\u5c11\u5173\u952e\u5e27\u7684\u7d22\u5f15\u4fe1\u606f\uff0c\u5982 flv \u7f3a\u5c11 keyframes \u4fe1\u606f\uff0cmp4 \u7f3a\u5c11 seekpoints \u4fe1\u606f\uff0c\u6216\u7f3a\u5931 moov box\uff0c\u90fd\u4f1a\u5bfc\u81f4\u62d6\u62c9\u5931\u8d25\uff1b \u6e90\u7ad9\u9700\u8981\u652f\u6301 range \u8bf7\u6c42\uff0c\u4e5f\u5373\u9488\u5bf9\u5ba2\u6237\u7aef\u53d1\u8d77\u7684 range \u8bf7\u6c42\uff0c\u6e90\u7ad9\u53ef\u4ee5\u6b63\u5e38\u54cd\u5e94 206 \u6587\u4ef6\u5206\u7247\uff1b \u652f\u6301\u6839\u636e\u4e0d\u540c\u8d44\u6e90\u8def\u5f84\u6dfb\u52a0\u914d\u7f6e\uff0c\u6700\u591a\u4ec5\u652f\u6301 20 \u6761\u3002 4.8 \u6d77\u5916\u52a0\u901f \u00b6 \u529f\u80fd\u8bf4\u660e \u6839\u636e\u670d\u52a1\u4e0b\u5177\u4f53\u4e1a\u52a1\u60c5\u51b5\uff0c\u53ef\u4ee5\u6709\u9009\u62e9\u6027\u7684\u5173\u95ed\u548c\u5f00\u542f\u6d77\u5916\u52a0\u901f\uff0c\u9ed8\u8ba4\u4e3a\u5f00\u542f\u72b6\u6001\u3002\u6d77\u5916\u5730\u533a\u7279\u6307\u9664\u4e2d\u56fd\u5927\u9646\u4ee5\u5916\u7684\u5730\u533a\uff0c\u5305\u62ec\u6e2f\u6fb3\u53f0\u5730\u533a\u3002 \u5f00\u542f\u72b6\u6001\u4e0b\uff0c\u6d77\u5916\u8bf7\u6c42\u4f1a\u9ed8\u8ba4\u89e3\u6790\u5230\u53c8\u62cd\u4e91\u6d77\u5916 CDN \u8282\u70b9\uff0c\u8ba1\u8d39\u6309\u6d77\u5916\u5730\u533a\u5b9a\u4ef7\u8ba1\u7b97\uff1b \u5173\u95ed\u72b6\u6001\u4e0b\uff0c\u6d77\u5916\u8bf7\u6c42\u4f1a\u9ed8\u8ba4\u89e3\u6790\u5230\u53c8\u62cd\u4e91\u56fd\u5185 CDN \u8282\u70b9\uff0c\u8ba1\u8d39\u6309\u56fd\u5185\u5730\u533a\u5b9a\u4ef7\u8ba1\u7b97\u3002 \u914d\u7f6e\u5f15\u5bfc \u767b\u9646 CDN \u63a7\u5236\u53f0 \uff0c\u4f9d\u6b21\u8fdb\u5165\uff1a\u670d\u52a1\u7ba1\u7406 > \u529f\u80fd\u914d\u7f6e > \u6027\u80fd\u4f18\u5316 > \u6d77\u5916\u52a0\u901f\uff0c\u6ed1\u52a8\u5f00\u5173\u5373\u53ef\u5f00\u542f\u8be5\u529f\u80fd\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u5728\u914d\u7f6e\u754c\u9762\uff0c\u6ed1\u52a8\u53f3\u8fb9\u7684\u6309\u94ae\uff0c\u5728\u786e\u5b9a\u5bf9\u8bdd\u6846\u4e0b\uff0c\u70b9\u51fb\u3010\u786e\u5b9a\u3011\u6309\u94ae\u5373\u53ef\u4e00\u952e\u5f00\u542f\u3002 \u6ce8\u610f\u4e8b\u9879 \u5173\u95ed\u72b6\u6001\u4e0b\uff0c\u6d77\u5916\u8bf7\u6c42\u4f1a\u89e3\u6790\u5230\u56fd\u5185 CDN \u8282\u70b9\uff0c\u53ef\u80fd\u4f1a\u5f71\u54cd\u5230\u6d77\u5916\u5730\u533a\u7ec8\u7aef\u7528\u6237\u7684\u8bbf\u95ee\u4f53\u9a8c\u3002 4.9 \u667a\u80fd\u538b\u7f29 \u00b6 \u529f\u80fd\u8bf4\u660e \u53c8\u62cd\u4e91 CDN \u667a\u80fd\u538b\u7f29\u529f\u80fd\u5305\u62ec Gzip \u548c Brotli \u538b\u7f29\u7b97\u6cd5\u3002\u5f00\u542f\u8be5\u529f\u80fd\uff0c\u53ef\u5bf9\u9759\u6001\u6587\u4ef6\u7c7b\u578b\u8fdb\u884c\u538b\u7f29\uff0c\u6709\u6548\u51cf\u5c11\u7528\u6237\u4f20\u8f93\u5185\u5bb9\u5927\u5c0f\uff0c\u52a0\u901f\u5206\u53d1\u6548\u679c\u3002\u4e3a\u4e86\u914d\u7f6e\u7684\u7075\u6d3b\u6027\uff0c\u652f\u6301\u538b\u7f29\u7b49\u7ea7\u7684\u8bbe\u7f6e\uff0c\u5173\u4e8e\u538b\u7f29\u7b49\u7ea7\u7684\u8bf4\u660e\u5982\u4e0b\uff1a \u4e24\u79cd\u538b\u7f29\u7b97\u6cd5\u7684\u538b\u7f29\u7b49\u7ea7\u9ed8\u8ba4\u4e3a 1\uff0c\u7b49\u7ea7\u8d8a\u9ad8\uff0c\u538b\u7f29\u7387\u8d8a\u5927\uff1b \u8003\u8651\u5230\u538b\u7f29\u7b49\u7ea7\u8d8a\u9ad8\uff0c\u538b\u7f29\u901f\u5ea6\u4f1a\u964d\u4f4e\uff0c\u5b9e\u9645\u751f\u4ea7\u73af\u5883\uff0c\u5efa\u8bae\u538b\u7f29\u7b49\u7ea7\u63a7\u5236\u5728 3 \u4ee5\u5185\uff0c\u5177\u4f53\u4ee5\u7ebf\u4e0a\u73af\u5883\u5b9e\u6d4b\u4e3a\u51c6\uff1b \u6ee1\u8db3\u6761\u4ef6 \u89e6\u53d1\u5b9e\u9645\u7684 Gzip \u53ca Brotli \u538b\u7f29\u884c\u4e3a\u9700\u8981\u540c\u65f6\u6ee1\u8db3\u5982\u4e0b\u6761\u4ef6\uff1a 1\u3001Content-Type \u6ee1\u8db3\u4ee5\u4e0b\u5217\u8868\u5176\u4e2d\u4e4b\u4e00\uff1a text/plain text/javascript text/css text/xml text/x-component application/javascript application/x-javascript application/xml application/json application/xhtml+xml application/rss+xml application/atom+xml application/x-font-ttf application/vnd.ms-fontobject image/svg+xml image/x-icon font/opentype 2\u3001Content-Length \u5927\u4e8e 256 \u5b57\u8282\uff1b 3\u3001\u5ba2\u6237\u7aef\u8bf7\u6c42\u5934\u5e26\u4e86 Accept-Encoding: gzip, br \u3002 \u914d\u7f6e\u5f15\u5bfc \u767b\u9646 CDN \u63a7\u5236\u53f0 \uff0c\u8fdb\u5165 \u300c\u6027\u80fd\u4f18\u5316\u300d\u914d\u7f6e\u9875\u9762\uff0c\u627e\u5230\u300c\u667a\u80fd\u538b\u7f29\u300d\u914d\u7f6e\u9879\uff0c\u70b9\u51fb\u3010\u7ba1\u7406\u3011\u6309\u94ae\uff0c\u8fdb\u5165\u5982\u4e0b\u914d\u7f6e\u754c\u9762\uff1a \u7ed3\u5408\u4e24\u79cd\u538b\u7f29\u7b97\u6cd5\uff0c\u5728 CDN \u63a7\u5236\u53f0\u7684\u914d\u7f6e\u6709 4 \u79cd\u72b6\u6001\uff0c\u76f8\u5173\u914d\u7f6e\u8bf7\u53c2\u8003\u5982\u4e0b\u622a\u56fe\u548c\u8bf4\u660e\uff1a \u72b6\u6001\u4e00\uff1a\u540c\u65f6\u5173\u95ed Gzip \u548c Brotli \u8be5\u72b6\u6001\u4e0b\uff0cCDN \u4e0d\u652f\u6301 Gzip \u548c Brotli \u3002 \u72b6\u6001\u4e8c\uff1a\u53ea\u5f00\u542f Gzip \u8be5\u72b6\u6001\u4e0b\uff0cCDN \u4ec5\u652f\u6301 Gzip \u538b\u7f29\u3002 \u72b6\u6001\u4e09\uff1a\u53ea\u5f00\u542f Brotli \u8be5\u72b6\u6001\u4e0b\uff0cCDN \u4ec5\u652f\u6301 Brotli \u538b\u7f29\u3002 \u72b6\u6001\u56db\uff1a\u540c\u65f6\u5f00\u542f Gzip \u548c Brotli \u5982\u679c\u5ba2\u6237\u7aef\u540c\u65f6\u90fd\u652f\u6301 Gzip \u548c Brotli \uff0cCDN \u4f1a\u4f18\u5148\u4f7f\u7528 Brotli \u538b\u7f29\u7b97\u6cd5\u3002 \u5173\u4e8e\u538b\u7f29\u7b49\u7ea7 Gzip \u548c Brotli \u9ed8\u8ba4\u7684\u538b\u7f29\u7b49\u7ea7\u4e3a 1\uff0c\u538b\u7f29\u7b49\u7ea7\u7684\u8303\u56f4\u4e3a 1 ~ 5\uff0c\u538b\u7f29\u7b49\u7ea7\u8d8a\u9ad8\uff0c\u538b\u7f29\u7387\u8d8a\u5927\uff0c\u4f46\u662f\u538b\u7f29\u901f\u5ea6\u4f1a\u76f8\u5bf9\u964d\u4f4e\uff0c\u60a8\u53ef\u4ee5\u6839\u636e\u8981\u6c42\u8fdb\u884c\u81ea\u5b9a\u4e49\u8bbe\u7f6e\uff0c\u539f\u5219\u4e0a\uff0c\u6211\u4eec\u5efa\u8bae\u5728\u751f\u4ea7\u73af\u5883\uff0c\u538b\u7f29\u7b49\u7ea7\u4e0d\u8981\u9ad8\u4e8e 3 \u3002\u66f4\u591a\u5173\u4e8e\u538b\u7f29\u7b49\u7ea7\u7684\u4ecb\u7ecd\u8bf7\u53c2\u8003 \u8fd9\u91cc \u3002 \u6ce8\u610f\u4e8b\u9879 \u5f53\u5ba2\u6237\u7aef\u540c\u65f6\u652f\u6301 Gzip \u548c Brotli \u7b97\u6cd5\u7684\u60c5\u51b5\u4e0b\uff0cBrotli \u7684\u4f18\u5148\u7ea7\u9ad8\u4e8e Gzip\u3002 4.10 \u6587\u4ef6\u5408\u5e76 \u00b6 \u53c8\u62cd\u4e91\u5b58\u50a8 \u548c \u81ea\u4e3b\u6e90\u7ad9 CDN \u52a0\u901f\u670d\u52a1\u5747\u652f\u6301 JS\uff0cCSS Combo\uff08\u7ec4\u5408\u7279\u6027\uff09\uff0c\u5373\u53ef\u4ee5\u628a\u591a\u4e2a JS, CSS \u8bf7\u6c42\u5408\u5e76\u6210\u4e00\u4e2a\u3002 \u5982\u4f55\u4f7f\u7528 \u7279\u522b\u5730\uff0c\u6211\u4eec\u4ee5 !! \u4f5c\u4e3a\u5206\u9694\u7b26\u3002 http://upyun-assets.b0.upaiyun.com/foo/!!a.js,b.js \u4e00\u4e2a\u5f15\u7528\u4e86\u5982\u4e0a URL \u7684 Demo: http://upyun-assets.b0.upaiyun.com/jscombo.html 5.HTTPS \u00b6 5.1 HTTPS \u914d\u7f6e \u00b6 \u529f\u80fd\u8bf4\u660e \u53c8\u62cd\u4e91 HTTPS \u52a0\u901f\u670d\u52a1\u5efa\u7acb\u5728\u81ea\u4e3b\u7814\u53d1\u7684\u5185\u5bb9\u5206\u53d1\u7f51\u7edc\u57fa\u7840\u4e4b\u4e0a\uff0c\u5168\u9762\u652f\u6301\u4e86 HTTPS \u534f\u8bae\u52a0\u901f\u3002\u901a\u8fc7\u4f1a\u8bdd\u91cd\u7528\u53ca\u4f1a\u8bdd\u4fdd\u6301\u3001\u5728\u7ebf\u8bc1\u4e66\u72b6\u6001\u68c0\u67e5\u3001\u534f\u8bae\u4f18\u5316\u3001SSL \u534f\u8bae\u63e1\u624b\u4f18\u5316\u3001HTTP/2 \u7b49\u6280\u672f\u624b\u6bb5\uff0c\u5168\u9762\u63d0\u5347\u4e86 HTTPS \u534f\u8bae\u52a0\u901f\u6027\u80fd\u3002 \u914d\u7f6e\u5f15\u5bfc \u7b2c\u4e00\u6b65\uff1a\u4f9d\u6b21\u8fdb\u5165\uff1a\u670d\u52a1\u7ba1\u7406 > \u529f\u80fd\u914d\u7f6e > HTTPS, \u70b9\u51fb \u7ba1\u7406 \u5373\u53ef\u5f00\u59cb\u914d\u7f6e\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u7b2c\u4e8c\u6b65\uff1a\u53ef\u9488\u5bf9\u5355\u4e2a\u57df\u540d\u9009\u62e9\u76f8\u5e94\u7684\u8bc1\u4e66\uff0c\u7136\u540e\u4fdd\u5b58\u3002\u5982\u679c\u65e0\u8bc1\u4e66\u53ef\u9009\uff0c\u53ef\u524d\u5f80 SSL \u8bc1\u4e66\u670d\u52a1 \u5e73\u53f0\u6dfb\u52a0\u57df\u540d\u7684\u81ea\u6709\u8bc1\u4e66\uff1b\u7528\u6237\u4e5f\u53ef\u76f4\u63a5\u5728 SSL \u8bc1\u4e66\u7533\u8d2d \u5e73\u53f0\u7533\u8d2d Symantec\u3001GeoTrust\u3001TrustAsia\u3001Let\u2019s Encrypt \u7684\u5404\u7c7b SSL \u8bc1\u4e66\uff0c\u5176\u4e2d TrustAsia\u3001Let\u2019s Encrypt \u7684 DV SSL \u5355\u57df\u540d\u8bc1\u4e66\u53ef\u514d\u8d39\u7533\u8bf7\u3002 \u7b2c\u4e09\u6b65\uff1a\u53ef\u9009\u62e9\u662f\u5426\u5f00\u542f HTTPS \u8bbf\u95ee\u548c\u5f3a\u5236 HTTPS \u529f\u80fd\u3002\u5728\u5f00\u542f HTTPS \u8bbf\u95ee\u540e\uff0c\u53ef\u901a\u8fc7\u70b9\u51fb \u4fee\u6539 \u5207\u6362\u57df\u540d\u6240\u5bf9\u5e94\u7684\u8bc1\u4e66\uff0c\u70b9\u51fb \u8be6\u60c5 \u53ef\u67e5\u770b\u76f8\u5e94\u8bc1\u4e66\u7684\u8be6\u7ec6\u4fe1\u606f\uff1b \u201c HTTPS \u8bbf\u95ee\u201d\uff1a\u5f00\u542f\u8be5\u529f\u80fd\u540e\uff0c\u5ba2\u6237\u7aef\u624d\u80fd\u4f7f\u7528 HTTPS \u534f\u8bae\u8fdb\u884c\u8bbf\u95ee\uff0c\u9ed8\u8ba4\u5173\u95ed\u3002 \u201c\u5f3a\u5236 HTTPS \u201d\uff1a\u52fe\u9009\u6b64\u529f\u80fd\u540e\uff0c\u53c8\u62cd\u4e91\u8fb9\u7f18\u8282\u70b9\u6536\u5230\u7528\u6237\u7684 HTTP \u8bf7\u6c42\u540e\u4f1a\u5c06\u5176\u5f3a\u5236\u8df3\u8f6c\u5230 HTTPS \u8fdb\u884c\u8bbf\u95ee\u3002\u9ed8\u8ba4\uff1a\u517c\u5bb9\u7528\u6237\u7684 HTTP \u548c HTTPS \u8bf7\u6c42\u3002 \u5907\u6ce8\uff1a\u5176\u4e2d HTTPS \u914d\u7f6e \u4e5f\u53ef\u4ee5\u5728 SSL \u8bc1\u4e66\u7ba1\u7406 \u91cc\u9762\u914d\u7f6e\uff0c\u53c2\u89c1\u4e0b\u6587 SSL \u8bc1\u4e66\u7ba1\u7406 \u90e8\u5206\u3002 \u81ea\u6709\u8bc1\u4e66\u6dfb\u52a0 \u5982\u679c\u57df\u540d\u5f53\u524d\u5df2\u6709\u8bc1\u4e66\uff0c\u53c8\u62cd\u4e91\u63d0\u4f9b\u4e86\u81ea\u6709\u8bc1\u4e66\u7684\u4e0a\u4f20\u65b9\u5f0f\uff0c\u65e0\u9700\u4eba\u5de5\u534f\u52a9\uff0c\u5b89\u5168\u4fbf\u6377\u3002 \u7b2c\u4e00\u6b65\uff1a\u8fdb\u5165 SSL \u8bc1\u4e66\u670d\u52a1\uff0c\u5de5\u5177\u7bb1 -> SSL \u8bc1\u4e66\u670d\u52a1 -> \u8bc1\u4e66\u7ba1\u7406 -> \u6dfb\u52a0\u81ea\u6709\u8bc1\u4e66 \u7b2c\u4e8c\u6b65\uff1a\u7c98\u8d34\u8bc1\u4e66\u5185\u5bb9: \u70b9\u51fb \u4fdd\u5b58 \u4e4b\u540e\uff0c\u53ef\u67e5\u770b SSL \u8bc1\u4e66\u4fe1\u606f\u5982\u4e0b\u56fe\u6240\u793a\uff1a SSL \u8bc1\u4e66\u7ba1\u7406 \u5728 \u8bc1\u4e66\u7ba1\u7406 \u5217\u8868\u4e2d\uff0c\u53ef\u6839\u636e\u9700\u6c42\u9009\u62e9\u7533\u8d2d\u6210\u529f\u5e76\u5df2\u90e8\u7f72\u4e8e CDN \u5e73\u53f0\u7684\u8bc1\u4e66\u6216\u5df2\u4e0a\u4f20\u7684\u81ea\u6709\u8bc1\u4e66\uff0c\u70b9\u51fb HTTPS \u914d\u7f6e \u8fdb\u884c\u64cd\u4f5c \uff0c\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u201cHTTPS \u8bbf\u95ee\u201d\uff1a\u5f00\u542f\u8be5\u529f\u80fd\u540e\uff0c\u5ba2\u6237\u7aef\u4f7f\u7528 HTTPS \u534f\u8bae\u8bbf\u95ee\u65f6\u624d\u80fd\u6210\u529f\uff0c\u9ed8\u8ba4\u5173\u95ed\u3002 \u201c\u5f3a\u5236 HTTPS\u201d\uff1a\u52fe\u9009\u6b64\u529f\u80fd\u540e\uff0c\u53c8\u62cd\u4e91\u8fb9\u7f18\u8282\u70b9\u6536\u5230\u7528\u6237\u7684 HTTP \u8bf7\u6c42\u540e\u4f1a\u5c06\u5176\u5f3a\u5236\u8df3\u8f6c\u5230 HTTPS \u8fdb\u884c\u8bbf\u95ee\u3002\u9ed8\u8ba4\uff1a\u517c\u5bb9\u7528\u6237\u7684 HTTP \u548c HTTPS \u8bf7\u6c42\u3002 5.2 HSTS \u914d\u7f6e \u00b6 \u529f\u80fd\u8bf4\u660e HSTS\uff08HTTP Strict Transport Security\uff0cHTTP \u4e25\u683c\u4f20\u8f93\u5b89\u5168)\uff0c\u662f\u4e00\u5957\u7531\u4e92\u8054\u7f51\u5de5\u7a0b\u4efb\u52a1\u7ec4\u53d1\u5e03\u7684\u4e92\u8054\u7f51\u5b89\u5168\u7b56\u7565\u673a\u5236\u3002\u7f51\u7ad9\u53ef\u4ee5\u901a\u8fc7\u914d\u7f6e HSTS\uff0c\u6765\u5f3a\u5236\u6d4f\u89c8\u5668\u4f7f\u7528 HTTPS \u4e0e\u7f51\u7ad9\u901a\u4fe1\uff0c\u4fdd\u969c\u7f51\u7ad9\u66f4\u52a0\u5b89\u5168\u3002 \u914d\u7f6e\u5f15\u5bfc \u767b\u9646 CDN \u63a7\u5236\u53f0 \uff0c\u4f9d\u6b21\u8fdb\u5165\uff1a\u670d\u52a1\u7ba1\u7406 > \u529f\u80fd\u914d\u7f6e > HTTPS, \u70b9\u51fb \u7ba1\u7406 \u6309\u94ae\u5373\u53ef\u5f00\u59cb\u914d\u7f6e\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u8fdb\u5165\u89c4\u5219\u7ba1\u7406\u9875\u9762\uff0c\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u70b9\u51fb\u3010\u6dfb\u52a0\u89c4\u5219\u3011\u6309\u94ae\uff0c\u5373\u53ef\u5f00\u59cb\u914d\u7f6e\u89c4\u5219\uff1a \u6839\u636e\u8981\u6c42\u586b\u5199\u597d\u914d\u7f6e\u89c4\u5219\uff0c\u70b9\u51fb\u3010\u4fdd\u6301\u3011\u6309\u94ae\u5373\u53ef\u3002\u66f4\u591a\u5173\u4e8e HSTS \u914d\u7f6e\u9879\u4fe1\u606f\uff0c\u8bf7\u53c2\u89c1 HSTS \u52a9\u529b\u7f51\u7ad9\u66f4\u5b89\u5168 \u3002 5.3 HTTP/2 \u914d\u7f6e \u00b6 \u529f\u80fd\u8bf4\u660e HTTP/2 \u5373\u8d85\u6587\u672c\u4f20\u8f93\u534f\u8bae 2.0\uff0c\u662f\u4e0b\u4e00\u4ee3 HTTP \u534f\u8bae\uff0c\u5728 CDN \u63a7\u5236\u53f0\u60a8\u53ef\u4ee5\u7075\u6d3b\u8fdb\u884c HTTP/2 \u7279\u6027\u7684\u5f00\u542f\u548c\u5173\u95ed\u3002 \u53c8\u62cd\u4e91 CDN \u670d\u52a1\u5f53\u524d\u5df2\u5168\u5e73\u53f0\u652f\u6301 HTTP/2\u3002HTTP/2 \u662f\u5728 HTTPS \u534f\u8bae\u7684\u57fa\u7840\u4e0a\u5b9e\u73b0\u7684\uff0c\u53ea\u8981\u4f7f\u7528\u53c8\u62cd\u4e91 HTTPS \u52a0\u901f\u670d\u52a1\u7684\u57df\u540d\uff0c\u90fd\u53ef\u514d\u8d39\u4eab\u53d7 HTTP/2 \u670d\u52a1\u3002\u53c8\u62cd\u4e91\u63a7\u5236\u53f0\u5173\u4e8e HTTP/2 \u7684\u914d\u7f6e\u652f\u6301\u4e09\u79cd\u6a21\u5f0f\u7684\u8bbe\u7f6e\uff0c\u5206\u522b\u662f\uff1a \u5f00\u542f HTTP/2 \u9ed8\u8ba4\u5f00\u542f HTTP/2 \u7279\u6027\uff0c\u5305\u62ec\u91c7\u7528\u4e8c\u8fdb\u5236\u683c\u5f0f\u4f20\u8f93\u6570\u636e\u3001\u5bf9\u6d88\u606f\u5934\u91c7\u7528 HPACK \u8fdb\u884c\u538b\u7f29\u4f20\u8f93\u3001\u591a\u8def\u590d\u7528 \u7b49\u7279\u6027\uff0c\u4f46\u4e0d\u5305\u62ec Server Push \u7279\u6027\u3002 \u5173\u95ed HTTP/2 \u5982\u9700\u5173\u95ed HTTP/2 \u7279\u6027\uff0c\u53ef\u4ee5\u9009\u62e9\u5173\u95ed\uff0c\u8bf7\u6839\u636e\u8981\u6c42\u5408\u7406\u5173\u95ed\u3002 \u5f00\u542f HTTP/2 + Server Push \u8be5\u6a21\u5f0f\u4e0b\uff0c\u652f\u6301 HTTP/2 \u7684\u6240\u6709\u7279\u6027\uff0c\u5176\u4e2d Server Push \u7279\u6027\u9700\u8981\u6839\u636e\u4e1a\u52a1\u9700\u6c42\u5408\u7406\u914d\u7f6e\u3002 \u7279\u522b\u5f3a\u8c03\u7684\u662f\uff0cServer Push \u662f HTTP/2 \u89c4\u8303\u4e2d\u5f15\u5165\u7684\u4e00\u79cd\u65b0\u6280\u672f\uff0c\u4e5f\u5373\u670d\u52a1\u7aef\u5728\u6ca1\u6709\u88ab\u5ba2\u6237\u7aef\u660e\u786e\u7684\u8be2\u95ee\u4e0b\uff0c\u62a2\u5148\u7684 \u201c\u63a8\u9001\u201d \u4e00\u4e9b\u7f51\u7ad9\u8d44\u6e90\u7ed9\u5ba2\u6237\u7aef\u3002\u8be5\u7279\u6027\u53ea\u8981\u88ab\u6b63\u786e\u7684\u4f7f\u7528\uff0c\u53ef\u4ee5\u8fbe\u5230\u5f88\u597d\u7684\u9875\u9762\u8bbf\u95ee\u6548\u679c\u3002 \u914d\u7f6e\u5f15\u5bfc \u767b\u9646 CDN \u63a7\u5236\u53f0 \uff0c\u4f9d\u6b21\u8fdb\u5165\uff1a\u670d\u52a1\u7ba1\u7406 > \u529f\u80fd\u914d\u7f6e > HTTPS > HTTP/2 \u914d\u7f6e\uff0c\u70b9\u51fb\u3010\u7ba1\u7406\u3011\u6309\u94ae\u5373\u53ef\u5f00\u59cb\u914d\u7f6e\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff1a 1\uff09\u5f00\u542f HTTP/2 \u9ed8\u8ba4\u5df2\u7ecf\u5f00\u542f\uff0c\u5982\u622a\u56fe\u6240\u793a\uff1a \u6ce8\u610f\uff1a\u5f53\u4e14\u4ec5\u5f53\u5f00\u542f HTTPS \u52a0\u901f\u65f6\uff0cHTTP/2 \u7279\u6027\u624d\u4f1a\u751f\u6548\u3002 2\uff09\u5173\u95ed HTTP/2 \u5982\u9700\u5173\u95ed HTTP/2 \u7279\u6027\uff0c\u53ef\u4ee5\u5728\u63a7\u5236\u53f0\u5173\u95ed\uff0c\u70b9\u51fb\u3010\u5173\u95ed HTTP/2\u3011\u6309\u94ae\uff0c\u7136\u540e\u70b9\u51fb\u3010\u786e\u5b9a\u3011\u5373\u53ef\u4fdd\u5b58\u914d\u7f6e\u3002\u5982\u622a\u56fe\u6240\u793a\uff1a 3\uff09\u5f00\u542f HTTP/2 + Server Push \u5982\u4e0b\u622a\u56fe\u6240\u793a\uff0c\u70b9\u51fb\u3010 \u5f00\u542f HTTP/2 + Server Push \u3011\u6309\u94ae\uff0c\u914d\u7f6e\u5339\u914d\u8def\u5f84\u4ee5\u53ca\u63a8\u9001\u8d44\u6e90\uff0c\u7136\u540e\u70b9\u51fb\u3010\u786e\u5b9a\u3011\u5373\u53ef\u4fdd\u5b58\u914d\u7f6e\u3002 \u5176\u4e2d\uff0c\u5728\u914d\u7f6e\u9879\u91cc\u9762\uff0c\u3010\u5339\u914d\u8def\u5f84\u3011\u662f\u5fc5\u586b\u9879\uff0c\u3010\u63a8\u9001\u8d44\u6e90\u3011\u662f\u975e\u5fc5\u586b\u9879\u3002 \u5339\u914d\u8def\u5f84\uff1a\u4e5f\u5373 Server Push \u7279\u6027\u4ec5\u9488\u5bf9\u5339\u914d\u7684 URI \u751f\u6548\uff0c\u793a\u4f8b\u4e3a\uff1a /index.html /admin.html \u63a8\u9001\u8d44\u6e90\uff1a\u8868\u793a\u5339\u914d URI \u540e\u5c06\u8981\u63a8\u9001\u7684\u8d44\u6e90\u7684 PATH\uff08\u4e0d\u5305\u62ec HOST \u90e8\u5206\uff09\uff0c\u793a\u4f8b\u4e3a\uff1a /style/index.css /dyn/index.js \u9700\u8981\u6ce8\u610f\u7684\u662f\u5f53\u6e90\u7ad9\u6709\u8bbe\u7f6e Link \u9996\u90e8 \u65f6\uff0c\u5373\u4f7f\u3010\u63a8\u9001\u8d44\u6e90\u3011\u5728 CDN \u7aef\u6ca1\u6709\u8fdb\u884c\u81ea\u5b9a\u4e49\u8bbe\u7f6e\uff0c\u4e5f\u4f1a\u751f\u6548\uff0c\u5176\u4e2d Link \u9996\u90e8\u7684\u793a\u4f8b\u4e3a\uff1a Link: </css/styles.css>; rel=preload; as=style \u6ce8\u610f\u4e8b\u9879 HTTP/2 \u7279\u6027\u662f\u5728 HTTPS \u534f\u8bae\u7684\u57fa\u7840\u4e0a\u5b9e\u73b0\uff0c\u9700\u8981\u52a0\u901f\u57df\u540d\u652f\u6301 HTTPS \u8bbf\u95ee\u65b9\u53ef\u652f\u6301\u8be5\u7279\u6027\uff1b \u4f7f\u7528 Server Push \u7279\u6027\uff0c\u901a\u5e38\u4f1a\u5728\u6e90\u7ad9\u8bbe\u7f6e Link \u9996\u90e8\uff0c\u4f8b\u5982\uff1a Link: </css/styles.css>; rel=preload; as=style \u5982\u679c\u5728 CDN \u7aef\u8fdb\u884c\u81ea\u5b9a\u4e49 Server Push \u914d\u7f6e\uff0c\u4f18\u5148\u7ea7\u4f1a\u9ad8\u4e8e\u6e90\u7ad9\u8bbe\u7f6e\u7684 Link \u9996\u90e8\u3002 5.4 \u517c\u5bb9\u6027\u8bf4\u660e \u00b6 \u53c8\u62cd\u4e91 HTTPS \u52a0\u901f\u670d\u52a1\u662f\u57fa\u4e8e SNI \u6280\u672f\u5b9e\u73b0\u7684\uff0c\u56e0\u6b64\u67d0\u4e9b\u4e0d\u652f\u6301 SNI \u7684\u6d4f\u89c8\u5668\u6216\u5ba2\u6237\u7aef\u8bbf\u95ee\u53ef\u80fd\u51fa\u73b0\u95ee\u9898\u3002\u652f\u6301 SNI \u7684\u5ba2\u6237\u7aef\u5217\u8868\u5982\u4e0b\uff1a \u58f0\u660e\uff1a\u8fd0\u884c\u5728 Windows XP \u4e0a\u7684\u6240\u6709\u7248\u672c\u7684 Internet Explorer \u90fd\u4e0d\u652f\u6301 SNI \uff0c\u8be6\u7ec6\u8bf7\u53c2\u8003 \u8fd9\u91cc \u3002 5.5 TLS 1.3 \u00b6 \u529f\u80fd\u8bf4\u660e TLS 1.3 \u662f TLS \u534f\u8bae\u4e2d\u6700\u65b0\u3001\u6700\u5feb\u548c\u6700\u5b89\u5168\u7684\u7248\u672c\uff0c\u76f8\u6bd4\u65e7\u7248\u7684 TLS \u534f\u8bae\u589e\u52a0\u4e86\u591a\u9879\u65b0\u529f\u80fd\u3002\u901a\u8fc7\u7b80\u5316 SSL \u63e1\u624b\uff0c\u63d0\u9ad8\u4e86\u5efa\u8fde\u901f\u5ea6\uff0c\u51cf\u5c11\u4e86\u5ef6\u8fdf\u3002\u5e76\u901a\u8fc7\u79fb\u9664\u6709\u5b89\u5168\u9690\u60a3\u7684\u52a0\u5bc6\u7b97\u6cd5\uff0c\u63d0\u9ad8\u4e86\u7528\u6237\u8bbf\u95ee\u7684\u6027\u80fd\u3001\u6548\u7387\u548c\u5b89\u5168\u6027\u7b49\u7b49\u3002\u76ee\u524d TLS 1.3 \u5df2\u5728 CDN \u5168\u5e73\u53f0\u652f\u6301\uff0c\u60a8\u53ef\u4ee5\u6839\u636e\u4e1a\u52a1\u9700\u6c42\u5408\u7406\u5173\u95ed\u548c\u5f00\u542f\u3002 \u5982\u4f55\u4f7f\u7528\uff1f 1\u3001\u5982\u4f55\u5728\u6d4f\u89c8\u5668\uff08\u5ba2\u6237\u7aef\uff09\u4e2d\u5f00\u542f TLS 1.3 \uff1f \u76ee\u524d\u6700\u65b0\u7248\u672c\u7684 Chrome \u548c Firefox \u90fd\u652f\u6301 TLS 1.3 \uff0c\u4f46\u662f\u90fd\u9700\u8981\u624b\u52a8\u5f00\u542f\uff0c\u4e3b\u8981\u539f\u56e0\u662f TLS 1.3 \u8fd8\u5728\u8349\u6848\u9636\u6bb5\u3002 1) \u5982\u4f55\u5728 Firefox \u4e2d\u624b\u52a8\u542f\u7528 TLS 1.3 \uff1f Mozilla Firefox \u7528\u6237\u53ef\u4ee5\u901a\u8fc7\u4ee5\u4e0b\u65b9\u5f0f\u5728 Firefox \u4e2d\u542f\u7528 TLS 1.3 \u652f\u6301\uff08 \u8bf7\u6ce8\u610f\uff0cNightly \u9ed8\u8ba4\u652f\u6301 TLS 1.3 \uff0c\u800c Firefox Stable \u9700\u8981\u4e13\u95e8\u914d\u7f6e\u4ee5\u652f\u6301 TLS 1.3 \uff09\u3002 \u5728 Firefox \u5730\u5740\u680f\u4e2d\u52a0\u8f7d about:config \u3002\u5982\u679c\u663e\u793a\u8b66\u544a\u5c4f\u5e55\uff0c\u8bf7\u786e\u8ba4\u60a8\u8981\u5c0f\u5fc3\uff0c\u8bf7\u5ffd\u7565\u5b89\u5168\u63d0\u793a\uff1b \u5728\u641c\u7d22\u533a\u57df\u641c\u7d22 security.tls.version.max \uff1b \u901a\u8fc7\u53cc\u51fb\u5b83\u5c06\u9996\u9009\u9879\u7684\u503c\u66f4\u6539\u4e3a 4\uff0c\u9ed8\u8ba4\u4e3a 3\uff0c\u5982\u4e0a\u56fe\u6240\u793a\u3002 2\uff09\u5982\u4f55\u5728 Chrome \u4e2d\u624b\u52a8\u542f\u52a8 TLS 1.3 \uff1f Google Chrome \u7528\u6237\u53ef\u4ee5\u901a\u8fc7\u4ee5\u4e0b\u65b9\u5f0f\u5728 Chrome \u4e2d\u542f\u7528 TLS 1.3 \u652f\u6301\uff08 \u6ce8\u610f\uff1a Chrome 62 \u4e4b\u524d\u7684\u7248\u672c\u9700\u8981\u5c06 Maximum TLS version enabled \u6539\u4e3a TLS 1.3 \uff09 \u5728\u6d4f\u89c8\u5668\u7684\u5730\u5740\u680f\u4e2d\u52a0\u8f7d chrome://flags/ \u3002\u8fd9\u5c06\u6253\u5f00 Web \u6d4f\u89c8\u5668\u7684\u5b9e\u9a8c\u9875\u9762\uff1b \u5728\u641c\u7d22\u533a\u57df\u641c\u7d22 TLS \u6216\u8005 tls \uff0c\u627e\u5230 TLS 1.3 \u9009\u9879\uff0c\u9ed8\u8ba4\u4e3a Default\uff1b \u9700\u8981\u5c06 TLS 1.3 \u6539\u4e3a Enabled (Draft) \uff1b \u91cd\u65b0\u542f\u52a8 Web \u6d4f\u89c8\u5668\u3002 2\u3001\u5982\u4f55\u5728\u53c8\u62cd\u4e91 CDN \uff08\u670d\u52a1\u7aef\uff09\u63a7\u5236\u53f0\u5f00\u542f TLS 1.3 \uff1f \u767b\u9646 CDN \u63a7\u5236\u53f0 \uff0c\u4f9d\u6b21\u8fdb\u5165\uff1a\u670d\u52a1\u7ba1\u7406 > \u529f\u80fd\u914d\u7f6e > HTTPS > TLS 1.3, \u6ed1\u52a8\u5f00\u5173\u5373\u53ef\u5f00\u542f\u529f\u80fd\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff1a 5.6 \u6700\u4f4e TLS \u7248\u672c \u00b6 \u529f\u80fd\u8bf4\u660e \u6700\u4f4e TLS \u7248\u672c\u4e5f\u5373\u5f53\u8bbf\u95ee\u8005\u901a\u8fc7 TLS \u8bbf\u95ee\u57df\u540d\u65f6\uff0c\u88ab\u5141\u8bb8\u8bbf\u95ee\u7684\u6700\u4f4e TLS \u7248\u672c\u3002\u5f53\u524d\u9ed8\u8ba4\u914d\u7f6e\u4e3a TLSv1.0\uff0c\u57fa\u4e8e PCI DSS \u5b89\u5168\u6807\u51c6\uff0c\u53ef\u4ee5\u9009\u62e9\u6700\u4f4e TLS \u7248\u672c\u4e3a TLSv1.1\u3002 \u5e94\u7528\u573a\u666f PCI DSS \u6700\u65b0\u5408\u89c4\u6807\u51c6\u5df2\u4e8e 2018 \u5e74 6 \u6708 30 \u65e5\u751f\u6548\uff0c\u8be5\u6807\u51c6\u8981\u6c42\u7981\u7528\u4f4e\u7248\u672c TLS \u534f\u8bae\uff08\u4f8b\u5982\uff1aTLSv1.0\uff09\uff0cHTTPS \u914d\u7f6e\u5e94\u5b9e\u65bd\u66f4\u5b89\u5168\u7684\u52a0\u5bc6\u534f\u8bae\uff08TLSv1.1 \u6216\u66f4\u9ad8\u7248\u672c\uff0c\u5f3a\u70c8\u5efa\u8bae\u4f7f\u7528 TLS v1.2 \uff09\uff0c\u4ee5\u6ee1\u8db3 PCI DSS \u6700\u65b0\u5408\u89c4\u6807\u51c6\u7684\u8981\u6c42\uff0c\u4ece\u800c\u4fdd\u62a4\u652f\u4ed8\u6570\u636e\u3002 \u914d\u7f6e\u5f15\u5bfc \u767b\u9646 CDN \u63a7\u5236\u53f0 \uff0c\u8fdb\u5165 \u300cHTTPS\u300d\u914d\u7f6e\u9875\u9762\uff0c\u627e\u5230\u300c\u6700\u4f4e TLS \u7248\u672c\u300d\u914d\u7f6e\u9879\uff0c\u70b9\u51fb\u3010\u7ba1\u7406\u3011\u6309\u94ae\u5373\u53ef\u8fdb\u5165\u914d\u7f6e\u754c\u9762\u3002 \u6a21\u5f0f\u4e00\uff1aTLSv1.0 \u914d\u7f6e\u754c\u9762\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u9009\u62e9\u8be5\u6a21\u5f0f\u65f6, TLS \u8bbf\u95ee\u53ef\u4ee5\u652f\u6301 TLSv1.0\u3001TLSv1.1\u3001TLSv1.2\u3001TLSv1.3\uff08\u5982\u679c\u8be5\u529f\u80fd\u5df2\u5f00\u542f\uff09\uff0c\u8be5\u9009\u9879\u4e3a\u9ed8\u8ba4\u914d\u7f6e\u9879\u3002 \u6a21\u5f0f\u4e8c\uff1aTLSv1.1 \u914d\u7f6e\u754c\u9762\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u9009\u62e9\u8be5\u6a21\u5f0f\u65f6, \u5219\u4f7f\u7528 TLSv1.0 \u8fde\u63a5\u7684\u8bbf\u95ee\u8005\u5c06\u88ab\u62d2\u7edd\uff0c\u4ec5\u652f\u6301\u4f7f\u7528 TLSv1.1\u3001TLSv1.2\u3001TLSv1.3\uff08\u5982\u679c\u8be5\u529f\u80fd\u5df2\u5f00\u542f) \u8fde\u63a5\uff0c\u8bf7\u8c28\u614e\u5f00\u542f\uff01 \u6a21\u5f0f\u4e09\uff1aTLSv1.2 \u914d\u7f6e\u754c\u9762\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u9009\u62e9\u8be5\u6a21\u5f0f\u65f6, \u5219\u4f7f\u7528 TLSv1.0\u3001TLSv1.1 \u8fde\u63a5\u7684\u8bbf\u95ee\u8005\u5c06\u88ab\u62d2\u7edd\uff0c\u4ec5\u652f\u6301\u4f7f\u7528 TLSv1.2\u3001TLSv1.3\uff08\u5982\u679c\u8be5\u529f\u80fd\u5df2\u5f00\u542f) \u8fde\u63a5\uff0c\u8bf7\u8c28\u614e\u5f00\u542f\uff01 \u6a21\u5f0f\u56db\uff1aTLSv1.3 \u914d\u7f6e\u754c\u9762\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u9009\u62e9\u8be5\u6a21\u5f0f\u65f6, \u5219\u4f7f\u7528 TLSv1.0\u3001TLSv1.1\u3001TLSv1.2 \u8fde\u63a5\u7684\u8bbf\u95ee\u8005\u5c06\u88ab\u62d2\u7edd\uff0c\u4ec5\u652f\u6301\u4f7f\u7528 TLSv1.3\uff08\u5982\u679c\u8be5\u529f\u80fd\u5df2\u5f00\u542f) \u8fde\u63a5\uff0c\u8bf7\u8c28\u614e\u5f00\u542f\uff01 \u6ce8\u610f\u4e8b\u9879 \u9ed8\u8ba4\u7684\u6700\u4f4e TLS \u7248\u672c\u4e3a TLSv1.0\uff0c\u5982\u9009\u62e9\u66f4\u9ad8\u7248\u672c\u7684 TLS \u534f\u8bae\uff0c\u9700\u8981\u8bc4\u4f30\u517c\u5bb9\u6027\u95ee\u9898\uff08\u4e5f\u5373\u67d0\u4e9b\u8001\u7684\u6d4f\u89c8\u5668\u4e0d\u652f\u6301\u8f83\u65b0\u7684 TLS \u7248\u672c\uff09\u3002 \u4e3a\u4e86\u6ee1\u8db3\u67d0\u4e9b\u6d4b\u8bd5\u8981\u6c42\uff0c\u5982\u9700\u8bbe\u7f6e\u6700\u4f4e TLS \u7248\u672c\u4e3a TLSv1.3\uff0c\u9700\u8981\u63d0\u524d\u5f00\u542f TLS 1.3 \u529f\u80fd\u3002 6.\u8bbf\u95ee\u63a7\u5236 \u00b6 6.1 IP \u9ed1\u767d\u540d\u5355 \u00b6 \u529f\u80fd\u8bf4\u660e \u82e5\u9700\u8981\u7981\u6b62\u67d0\u4e9b IP \u6216\u53ea\u5141\u8bb8\u67d0\u4e9b IP \u8bbf\u95ee\uff0c\u5219\u53ef\u4ee5\u4f7f\u7528 IP \u9ed1\u767d\u540d\u5355\u529f\u80fd\uff1b \u914d\u7f6e\u5f15\u5bfc \u767b\u9646 CDN \u63a7\u5236\u53f0 \uff0c\u4f9d\u6b21\u8fdb\u5165\uff1a\u670d\u52a1\u7ba1\u7406 > \u529f\u80fd\u914d\u7f6e > \u8bbf\u95ee\u63a7\u5236 > IP \u9ed1\u767d\u540d\u5355\uff0c\u70b9\u51fb\u300c\u7ba1\u7406\u300d\u6309\u94ae\u5373\u53ef\u5f00\u59cb\u914d\u7f6e\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff1a 1.\u914d\u7f6e IP \u9ed1\u540d\u5355 \u70b9\u51fb\u3010\u5f00\u542f IP \u9ed1\u540d\u5355\u3011\u6309\u94ae\uff0c\u586b\u5199\u5f85\u52a0\u5165\u9ed1\u540d\u5355\u7684\u5355\u4e2a IP \u6216\u8005 IP \u6bb5\uff0c\u4f8b\u5982\uff1a 192.168.1.1 192.168.2.* 192.168.3.* \u5982\u4e0b\u622a\u56fe\u6240\u793a\uff1a \u914d\u7f6e\u5b8c\u6bd5\uff0c\u70b9\u51fb\u53f3\u4e0b\u89d2\u7684\u3010\u786e\u5b9a\u3011\u6309\u94ae\uff0c\u5373\u53ef\u4fdd\u5b58\u751f\u6548\u3002 1.\u914d\u7f6e IP \u767d\u540d\u5355 \u70b9\u51fb\u3010\u5f00\u542f IP \u767d\u540d\u5355\u3011\u6309\u94ae\uff0c\u586b\u5199\u5f85\u52a0\u5165\u767d\u540d\u5355\u7684\u5355\u4e2a IP \u6216\u8005 IP \u6bb5\uff0c\u4f8b\u5982\uff1a 193.168.5.1 193.168.6.* 193.168.7.* \u5982\u4e0b\u622a\u56fe\u6240\u793a\uff1a \u914d\u7f6e\u5b8c\u6bd5\uff0c\u70b9\u51fb\u53f3\u4e0b\u89d2\u7684\u3010\u786e\u5b9a\u3011\u6309\u94ae\uff0c\u5373\u53ef\u4fdd\u5b58\u751f\u6548\u3002 \u6ce8\u610f\u4e8b\u9879 1.\u652f\u6301 * \u901a\u914d\u7b26\uff0c\u5982 10.11.12.* \uff0c\u5c06\u7981\u6b62\u6216\u5141\u8bb8 10.11.12.0 ~ 10.11.12.255 \u7684 IP \u8bbf\u95ee\uff1b 2.IP \u9ed1\u767d\u540d\u5355\u4e0a\u9650 100 \u6761\uff0c\u88ab\u7981\u6b62\u7684 IP \u8bbf\u95ee\u8d44\u6e90\u65f6\uff0c\u5c06\u63d0\u793a 403\uff1b 3.IP \u9ed1\u540d\u5355\u548c IP \u767d\u540d\u5355\u4e0d\u80fd\u591f\u540c\u65f6\u914d\u7f6e\uff0c\u7279\u522b\u5730\uff0c\u914d\u7f6e\u5b8c\u767d\u540d\u5355\u4e4b\u540e\uff0c\u5176\u4ed6\u90fd\u4e3a IP \u9ed1\u540d\u5355\uff0c\u8bf7\u8c28\u614e\u64cd\u4f5c\u3002 6.2 \u5730\u533a\u8bbf\u95ee\u9650\u5236 \u00b6 \u529f\u80fd\u8bf4\u660e \u5730\u533a\u8bbf\u95ee\u9650\u5236\u662f\u6307\u6839\u636e\u52a0\u901f\u7f51\u7ad9\u7684\u9700\u6c42\uff0c\u5141\u8bb8\u6216\u7981\u6b62\u7279\u5b9a\u533a\u57df\u7684\u7ec8\u7aef\u7528\u6237\u5bf9\u7f51\u7ad9\u8d44\u6e90\u7684\u8bbf\u95ee\u3002\u5373\u7f51\u7ad9\u6307\u5b9a\u5730\u533a\uff0c\u5141\u8bb8\u8be5\u5730\u533a\u7ec8\u7aef\u7528\u6237\u8bbf\u95ee\uff0c\u800c\u9650\u5236\u5176\u4ed6\u5730\u533a\u7528\u6237\u8bbf\u95ee\uff0c\u6216\u8005\u76f8\u53cd\u3002 \u914d\u7f6e\u5f15\u5bfc \u767b\u9646 CDN \u63a7\u5236\u53f0 \uff0c\u4f9d\u6b21\u8fdb\u5165\uff1a\u670d\u52a1\u7ba1\u7406 > \u529f\u80fd\u914d\u7f6e > \u8bbf\u95ee\u63a7\u5236 > \u5730\u533a\u8bbf\u95ee\u9650\u5236\uff0c\u70b9\u51fb\u300c\u7ba1\u7406\u300d\u6309\u94ae\u5373\u53ef\u5f00\u59cb\u914d\u7f6e\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff1a 1.\u914d\u7f6e\u5730\u533a\u9ed1\u540d\u5355 \u70b9\u51fb\u3010\u542f\u7528\u9ed1\u540d\u5355\u3011\u6309\u94ae\uff0c\u586b\u5199\u5f85\u52a0\u5165\u9ed1\u540d\u5355\u7684\u56fd\u5bb6\u3001\u5730\u533a\u3001\u8fd0\u8425\u5546\u4fe1\u606f\uff0c\u4f8b\u5982\uff1a 1 \u97e9\u56fd 2 \u6cf0\u56fd 3 \u6fb3\u5927\u5229\u4e9a \u5982\u4e0b\u622a\u56fe\u6240\u793a\uff1a \u914d\u7f6e\u5b8c\u6bd5\uff0c\u70b9\u51fb\u53f3\u4e0b\u89d2\u7684\u3010\u786e\u5b9a\u3011\u6309\u94ae\uff0c\u5373\u53ef\u4fdd\u5b58\u751f\u6548\u3002 2.\u914d\u7f6e\u5730\u533a\u767d\u540d\u5355 \u70b9\u51fb\u3010\u542f\u7528\u767d\u540d\u5355\u3011\u6309\u94ae\uff0c\u586b\u5199\u5f85\u52a0\u5165\u767d\u540d\u5355\u7684\u56fd\u5bb6\u3001\u5730\u533a\u3001\u8fd0\u8425\u5546\u4fe1\u606f\uff0c\u4f8b\u5982\uff1a 1 \u4e2d\u56fd \u8fbd\u5b81 \u7535\u4fe1 2 \u4e2d\u56fd \u9999\u6e2f 3 \u4e2d\u56fd \u5317\u4eac 4 \u4e2d\u56fd \u5e7f\u4e1c \u7535\u4fe1 \u5982\u4e0b\u622a\u56fe\u6240\u793a\uff1a \u914d\u7f6e\u5b8c\u6bd5\uff0c\u70b9\u51fb\u53f3\u4e0b\u89d2\u7684\u3010\u786e\u5b9a\u3011\u6309\u94ae\uff0c\u5373\u53ef\u4fdd\u5b58\u751f\u6548\u3002\u66f4\u591a\u8be6\u7ec6\u914d\u7f6e\u8bf7\u53c2\u89c1 \u5730\u533a\u8bbf\u95ee\u9650\u5236\u7528\u6237\u6307\u5357 \u3002 \u6ce8\u610f\u4e8b\u9879 \u5730\u533a\u8bbf\u95ee\u9650\u5236\u914d\u7f6e\u7c92\u5ea6\uff0c\u4e2d\u56fd\u5730\u533a\u652f\u6301\u7701\u4efd\u3001\u8fd0\u8425\u5546\uff08\u5305\u62ec\uff1a\u7535\u4fe1\u3001\u94c1\u901a\u3001\u79fb\u52a8\u3001\u8054\u901a\u3001\u9e4f\u535a\u58eb\u3001\u6559\u80b2\u7f51\u3001\u79d1\u6280\u7f51\uff09\uff0c\u6d77\u5916\u5730\u533a\u652f\u6301\u5230\u8fd0\u8425\u5546\uff1b \u5730\u533a\u767d\u540d\u5355\u548c\u9ed1\u540d\u5355\u4e0d\u80fd\u540c\u65f6\u914d\u7f6e\uff0c\u7279\u522b\u5730\uff0c\u914d\u7f6e\u5b8c\u767d\u540d\u5355\u540e\uff0c\u5176\u4ed6\u5730\u533a\u90fd\u4e3a\u9ed1\u540d\u5355\uff0c\u8bf7\u8c28\u614e\u64cd\u4f5c\u3002 6.3 Referer \u9632\u76d7\u94fe \u00b6 \u529f\u80fd\u8bf4\u660e \u57fa\u4e8e HTTP \u534f\u8bae\u7684 referer \u673a\u5236\uff0c\u901a\u8fc7 referer \u8ddf\u8e2a\u6765\u6e90\uff0c\u5bf9\u6765\u6e90\u8fdb\u884c\u8bc6\u522b\u548c\u5224\u65ad\uff0c\u5b9e\u73b0\u539f\u7406\u5c31\u662f\u901a\u8fc7 HTTP \u8bf7\u6c42 Header \u4e2d\u7684 referer \u5b57\u6bb5\u7684\u503c\u6765\u8bbe\u7f6e\u8fc7\u6ee4\u7b56\u7565\uff0c\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u9632\u76d7\u94fe\u672a\u542f\u7528\uff0c\u65e0\u9ed1/\u767d\u540d\u5355\u3002\u9664\u6b64\u4e4b\u5916\uff0c\u652f\u6301\u5141\u8bb8 referer \u4e3a\u7a7a\u548c\u7981\u6b62 referer \u4e3a\u7a7a\u7684\u8bbe\u7f6e\uff0c\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u5141\u8bb8 referer \u4e3a\u7a7a\u3002 \u767d\u540d\u5355\uff1a\u4ec5\u5141\u8bb8\u540d\u5355\u4e2d\u7684\u57df\u540d\u7f51\u7ad9\u8bbf\u95ee\u6587\u4ef6\uff0c\u5176\u4ed6\u57df\u540d\u7f51\u7ad9\u90fd\u4e0d\u5141\u8bb8\u8bbf\u95ee\u3002 \u9ed1\u540d\u5355\uff1a\u4ec5\u7981\u6b62\u540d\u5355\u4e2d\u7684\u57df\u540d\u7f51\u7ad9\u8bbf\u95ee\u6587\u4ef6\uff0c\u5176\u4ed6\u57df\u540d\u7f51\u7ad9\u90fd\u5141\u8bb8\u8bbf\u95ee\u3002 \u7279\u522b\u5730\uff0c\u9ed8\u8ba4\u3010\u5141\u8bb8 Referer \u4e3a\u7a7a\u3011 \u8fd9\u79cd\u60c5\u51b5\u4f1a\u7ed5\u8fc7\u9632\u76d7\u94fe\u7684\u903b\u8f91\uff1b\u82e5\u542f\u7528\u3010\u7981\u6b62 Referer \u4e3a\u7a7a\u3011\uff0c\u90a3\u4e48\u8fd9\u7c7b\u8bf7\u6c42\u5c31\u76f4\u63a5\u88ab\u7981\u6b62\u8bbf\u95ee\u3002 \u914d\u7f6e\u5f15\u5bfc \u767b\u9646 CDN \u63a7\u5236\u53f0 \uff0c\u4f9d\u6b21\u8fdb\u5165\uff1a\u670d\u52a1\u7ba1\u7406 > \u529f\u80fd\u914d\u7f6e > \u8bbf\u95ee\u63a7\u5236 > Referer \u9632\u76d7\u94fe\uff0c\u70b9\u51fb\u300c\u7ba1\u7406\u300d\u6309\u94ae\u5373\u53ef\u5f00\u59cb\u914d\u7f6e\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff1a 1.\u914d\u7f6e referer \u9ed1\u540d\u5355 \u70b9\u51fb\u3010\u542f\u7528\u9ed1\u540d\u5355\u3011\u6309\u94ae\uff0c\u586b\u5199\u5f85\u52a0\u5165\u9ed1\u540d\u5355\u57df\u540d\u6216\u8005\u57df\u540d\u6bb5\uff0c\u4f8b\u5982\uff1a www.upyun.com image.upyun.com *.upyun.com \u5982\u4e0b\u622a\u56fe\u6240\u793a\uff1a \u914d\u7f6e\u5b8c\u6bd5\uff0c\u70b9\u51fb\u53f3\u4e0b\u89d2\u7684\u3010\u786e\u5b9a\u3011\u6309\u94ae\uff0c\u5373\u53ef\u4fdd\u5b58\u751f\u6548\u3002 2.\u914d\u7f6e referer \u767d\u540d\u5355 \u70b9\u51fb\u3010\u542f\u7528\u767d\u540d\u5355\u3011\u6309\u94ae\uff0c\u586b\u5199\u5f85\u52a0\u5165\u767d\u540d\u5355\u57df\u540d\u6216\u8005\u57df\u540d\u6bb5\uff0c\u4f8b\u5982\uff1a www.baidu.com www.taobao.com www.163.com \u5982\u4e0b\u622a\u56fe\u6240\u793a\uff1a \u914d\u7f6e\u5b8c\u6bd5\uff0c\u70b9\u51fb\u53f3\u4e0b\u89d2\u7684\u3010\u786e\u5b9a\u3011\u6309\u94ae\uff0c\u5373\u53ef\u4fdd\u5b58\u751f\u6548\u3002 \u6ce8\u610f\u4e8b\u9879 \u767d\u540d\u5355\uff1a\u4ec5\u5141\u8bb8\u540d\u5355\u4e2d\u7684\u57df\u540d\u7f51\u7ad9\u8bbf\u95ee\u6587\u4ef6\uff0c\u5176\u4ed6\u57df\u540d\u7f51\u7ad9\u90fd\u4e0d\u5141\u8bb8\u8bbf\u95ee; \u9ed1\u540d\u5355\uff1a\u4ec5\u7981\u6b62\u540d\u5355\u4e2d\u7684\u57df\u540d\u7f51\u7ad9\u8bbf\u95ee\u6587\u4ef6\uff0c\u5176\u4ed6\u57df\u540d\u7f51\u7ad9\u90fd\u5141\u8bb8\u8bbf\u95ee; \u652f\u6301 * \u901a\u914d\u7b26\uff0c\u6bd4\u5982\u767d\u540d\u5355\u7684 *upyun.com \u5c06\u5141\u8bb8 www.upyun.com \u3001 abcupyun.com \u7b49\u7f51\u7ad9\u8bbf\u95ee; \u7279\u522b\u5730\uff0c\u9ed8\u8ba4 \u5141\u8bb8 Referer \u4e3a\u7a7a \u8fd9\u79cd\u60c5\u51b5\u4f1a\u7ed5\u8fc7\u9632\u76d7\u94fe\u7684\u903b\u8f91\uff0c\u82e5\u8fd9\u91cc\u542f\u7528 \u7981\u6b62 Referer \u4e3a\u7a7a \uff0c\u90a3\u4e48\u8fd9\u7c7b\u8bf7\u6c42\u5c31\u76f4\u63a5\u88ab\u7981\u6b62\u8bbf\u95ee\u4e86\u3002 6.4 User-Agent \u9632\u76d7\u94fe \u00b6 \u529f\u80fd\u8bf4\u660e CDN \u652f\u6301\u9488\u5bf9 HTTP \u8bf7\u6c42\u5934\u4e2d\u7684 User-Agent \u4fe1\u606f\uff0c\u7981\u6b62\u6216\u8005\u5141\u8bb8\u7b26\u5408\u7279\u5b9a User-Agent \u89c4\u5219\u7684\u8bf7\u6c42\u3002\u5177\u4f53\u4f7f\u7528\u7684\u573a\u666f\uff0c\u4e3e\u4e2a\u4f8b\u5b50\uff1a 1\uff09\u67d0\u4e2a\u8d44\u6e90\u6216\u8005\u9875\u9762\u4e0d\u5e0c\u671b\u88ab IE \u6216\u8005 Chrome \u6d4f\u89c8\u5668\u8bbf\u95ee\uff0c\u6b64\u65f6\u60a8\u53ef\u4ee5\u914d\u7f6e User-Agent \u9ed1\u540d\u5355\u5c31\u53ef\u4ee5\u5b9e\u73b0\uff1b 2\uff09\u67d0\u5ba2\u6237\u7aef\u62e5\u6709\u81ea\u5df1\u4e13\u5c5e\u7684\u5ba2\u6237\u7aef\u5bf9\u8d44\u6e90\u8fdb\u884c\u4e0b\u8f7d\uff0c\u8be5\u4e0b\u8f7d\u5de5\u5177\u5728\u8bf7\u6c42\u65f6\uff0c\u4f7f\u7528\u4e86\u5b9a\u5236\u7684 User-Agent \u540d\u79f0\uff0c\u6216\u53ea\u5141\u8bb8\u6b64\u7c7b User-Agent \u8bf7\u6c42\u8d44\u6e90\uff0c\u6b64\u65f6\u53ef\u4ee5\u914d\u7f6e User-Agent \u767d\u540d\u5355\u5c31\u53ef\u4ee5\u5b9e\u73b0\u3002 \u914d\u7f6e\u5f15\u5bfc \u767b\u9646 CDN \u63a7\u5236\u53f0 \uff0c\u4f9d\u6b21\u8fdb\u5165\uff1a\u670d\u52a1\u7ba1\u7406 > \u529f\u80fd\u914d\u7f6e > \u8bbf\u95ee\u63a7\u5236 > User-Agent \u9632\u76d7\u94fe\uff0c\u70b9\u51fb\u300c\u7ba1\u7406\u300d\u6309\u94ae\u5373\u53ef\u5f00\u59cb\u914d\u7f6e\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff1a 1.User-Agent \u767d\u540d\u5355\u914d\u7f6e \u9009\u62e9\u3010\u5f00\u542f\u767d\u540d\u5355\u3011\u6309\u94ae\uff0c\u586b\u5199\u5f85\u914d\u7f6e\u7684\u767d\u540d\u5355\u5217\u8868\uff0c\u5982\u4e0b\u6240\u793a\uff1a Mozilla/4.0 (Windows; MSIE 6.0; Windows NT 5.2) Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 6.0) Mozilla/4.0 (compatible; MSIE 8.0; Windows NT 6.0; Trident/4.0) Mozilla/5.0 (compatible; MSIE 9.0; Windows NT 6.1; Trident/5.0) Mozilla/5.0 (compatible; WOW64; MSIE 10.0; Windows NT 6.2) \u914d\u7f6e\u622a\u56fe\u5982\u4e0b\uff1a \u914d\u7f6e\u5b8c\u6bd5\uff0c\u70b9\u51fb\u53f3\u4e0b\u89d2\u7684\u3010\u786e\u5b9a\u3011\u6309\u94ae\u5373\u53ef\u3002 2.User-Agent \u9ed1\u540d\u5355\u914d\u7f6e \u9009\u62e9\u3010\u5f00\u542f\u9ed1\u540d\u5355\u3011\u6309\u94ae\uff0c\u586b\u5199\u5f85\u914d\u7f6e\u7684\u9ed1\u540d\u5355\u5217\u8868\uff0c\u5982\u4e0b\u6240\u793a\uff1a Mozilla/5.0 (Android; Mobile; rv:14.0) Gecko/14.0 Firefox/14.0 Mozilla/5.0 (Android; Tablet; rv:14.0) Gecko/14.0 Firefox/14.0 Mozilla/5.0 (Windows NT 6.2; WOW64; rv:21.0) Gecko/20100101 Firefox/21.0 Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:21.0) Gecko/20130331 Firefox/21.0 \u914d\u7f6e\u622a\u56fe\u5982\u4e0b\uff1a \u914d\u7f6e\u5b8c\u6bd5\uff0c\u70b9\u51fb\u53f3\u4e0b\u89d2\u7684\u3010\u786e\u5b9a\u3011\u6309\u94ae\u5373\u53ef\u3002 \u6ce8\u610f\u4e8b\u9879 \u6dfb\u52a0 User-Agent \u9ed1\u767d\u540d\u5355\u89c4\u5219\u6570\u91cf\u4e0a\u9650\u5404\u4e3a 50 \u6761\uff0c\u8bf7\u5408\u7406\u5206\u914d\uff1b User-Agent \u4e0d\u533a\u5206\u5927\u5c0f\u5199\uff0c\u4e14\u652f\u6301 * \u901a\u914d\u7b26\uff1b User-Agent \u9632\u76d7\u94fe\u7684\u4f18\u5148\u7ea7\u9ad8\u4e8e Referer \u9632\u76d7\u94fe; User-Agent \u5f88\u5bb9\u6613\u4f2a\u9020\uff0c\u56e0\u6b64 User-Agent \u9632\u76d7\u94fe\u5b89\u5168\u6027\u8f83\u4f4e\uff0c\u5efa\u8bae\u7ed3\u5408\u5176\u4ed6\u9632\u76d7\u94fe\u529f\u80fd\u914d\u5408\u4f7f\u7528\u3002 6.5 Token \u9632\u76d7\u94fe \u00b6 \u529f\u80fd\u8bf4\u660e Token \u9632\u76d7\u94fe\u662f\u901a\u8fc7\u5bf9\u65f6\u95f4\u6709\u5173\u7684\u5b57\u7b26\u4e32\u8fdb\u884c\u7b7e\u540d\uff0c\u5c06\u65f6\u95f4\u3001\u7b7e\u540d\u4fe1\u606f\u901a\u8fc7\u4e00\u5b9a\u7684\u65b9\u5f0f\u4f20\u9012\u7ed9 CDN \u8282\u70b9\u670d\u52a1\u5668\u4f5c\u4e3a\u5224\u5b9a\u4f9d\u636e\uff0cCDN \u8fb9\u7f18\u8282\u70b9\u4f9d\u636e\u7ea6\u5b9a\u7684\u7b97\u6cd5\u5224\u65ad\u6765\u8bbf\u7684 URL \u662f\u5426\u6709\u8bbf\u95ee\u6743\u9650\u3002\u5982\u679c\u901a\u8fc7\uff0c\u6267\u884c\u4e0b\u4e00\u6b65\uff1b\u5982\u679c\u4e0d\u901a\u8fc7\uff0c\u54cd\u5e94 HTTP 403 \u72b6\u6001\u7801\u6216\u8005\u901a\u8fc7 302 \u8df3\u8f6c\u5230\u5176\u4ed6 URL\u3002 \u5b9e\u73b0\u539f\u7406 Token \u9632\u76d7\u94fe\u7684\u5b9e\u73b0\u539f\u7406\u53ef\u53c2\u89c1\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u5982\u4e0a\u56fe\u6240\u793a\uff0c\u6574\u4e2a token \u9632\u76d7\u94fe\u7684\u5b9e\u73b0\u9700\u8981\u5982\u4e0b\u51e0\u4e2a\u90e8\u5206\u6765\u914d\u5408\uff1a 1\uff09\u5ba2\u6237\u7aef\uff1a\u8d1f\u8d23\u53d1\u9001\u539f\u59cb\u8bf7\u6c42\u7ed9\u5ba2\u6237\u7aef\u4e1a\u52a1\u670d\u52a1\u5668\u4ee5\u53ca\u53d1\u9001\u5e26\u7b7e\u540d\u7684 URL \u7ed9 CDN \u8282\u70b9\u8fdb\u884c\u9a8c\u8bc1\uff1b 2\uff09\u4e1a\u52a1\u670d\u52a1\u5668\uff1a\u6839\u636e\u7ea6\u5b9a\u7684\u7b97\u6cd5\u751f\u6210\u5e26 _upt \u53c2\u6570\u7684 URL \u8fd4\u56de\u7ed9\u5ba2\u6237\u7aef\uff1b 3\uff09CDN \u8282\u70b9\uff1a\u8d1f\u8d23\u548c\u5ba2\u6237\u7aef\u8fdb\u884c\u65f6\u95f4\u3001\u7b7e\u540d\u6821\u9a8c\uff1b 1\u3001\u7b7e\u540d\u53c2\u6570 etime: URL \u8fc7\u671f\u7684\u65f6\u95f4\uff0c\u5fc5\u987b\u662f UNIX TIME \u683c\u5f0f\uff0c\u5982\uff1a2017/3/9 9:19:0 -> 1489022340 secret: \u548c CDN \u5e73\u53f0\u7ea6\u5b9a\u7684\u7b7e\u540d\u5bc6\u94a5\uff0c\u9700\u8981\u5728 CDN \u7ba1\u7406\u63a7\u5236\u53f0\u914d\u7f6e URI\uff1a\u8bf7\u6c42 URL \u7684\u8def\u5f84\u90e8\u5206\uff08\u4e0d\u5305\u542b ? \u53ca\u540e\u9762\u7684 Query String\uff09\uff0c\u5982\u5ba2\u6237\u7aef\u8bbf\u95ee\u7684\u5916\u94fe\u5730\u5740\u4e3a http://xxx.b0.upaiyun.com/path/to/a.jpg?version=1.0\uff0c\u90a3\u4e48 URI \u90e8\u5206\u5219\u4e3a\uff1a/path/to/a.jpg 2.\u7b97\u6cd5\u8bf4\u660e sign = MD5( secret & etime & URI ) _upt = sign { \u4e2d\u95f4 8 \u4f4d }\uff0betime _upt = MD5( secret & etime & URI ){ \u4e2d\u95f4 8 \u4f4d } + etime \u4e3e\u4e2a\u4f8b\u5b50\uff1a\u5047\u8bbe\u5f53\u524d\u7684 UNIX TIME \u65f6\u95f4\u4e3a\uff1a1370000000\uff0c\u67d0\u56fe\u7247\u8d44\u6e90\uff08\u4f8b\u5982\uff1ahttp://test.example.com/dir/pic.jpg\uff0910 \u5206\u949f\u6709\u6548\uff0c\u5219\uff1a etime = 1370000000 + 600 = 1370000600 URI = '/dir/pic.jpg' sign = MD5( secret & etime & URI ) = xxxxxxxxxxxxabcdefghyyyyyyyyyyyy _upt = MD5( secret & etime & URI ){ \u4e2d\u95f4 8 \u4f4d } + etime \uff1d abcdefgh1370000600 \u6700\u540e\u7ecf\u8fc7\u5ba2\u6237\u7aef\u4e1a\u52a1\u670d\u52a1\u5668\u751f\u6210\u7684 URL \u4e3a\uff1a http://test.example.com/dir/pic.jpg\uff1f_upt=abcdefgh137000060 \u5b9e\u73b0\u65b9\u5f0f 1.\u5ba2\u6237\u7aef\u4e1a\u52a1\u670d\u52a1\u5668\u751f\u6210\u9a8c\u8bc1\u4fe1\u606f \u9a8c\u8bc1\u4fe1\u606f\u7684\u751f\u6210\u7531\u4e1a\u52a1\u670d\u52a1\u5668\u8d1f\u8d23\uff0c\u5177\u4f53\u7684\u52a0\u5bc6\u8fc7\u7a0b\u9700\u8981\u786e\u8ba4\u5982\u4e0b\u4e8b\u9879\uff1a \u786e\u8ba4\u8fc7\u671f\u65f6\u95f4\u7684\u683c\u5f0f\uff0c\u9ed8\u8ba4\u91c7\u7528 UNIX \u65f6\u95f4\u6233\u683c\u5f0f \u786e\u8ba4\u9a8c\u8bc1\u4fe1\u606f\u4e2d\u7684\u5bc6\u6587\uff0c\u7528\u6237\u8ba1\u7b97\u9a8c\u8bc1\u4fe1\u606f\uff0c\u9700\u8981\u548c CDN \u5e73\u53f0\u7ea6\u5b9a \u786e\u8ba4\u9a8c\u8bc1\u4fe1\u606f\u65f6\u52a0\u5165\u7684\u53c2\u6570\uff0c\u9ed8\u8ba4\u4e3a URL \u7684\u8def\u5f84\u90e8\u5206 \u6839\u636e\u4e0a\u6587\u7684\u7b97\u6cd5\u8bf4\u660e\u8ba1\u7b97\u9a8c\u8bc1\u4fe1\u606f\uff0c\u5176\u4e2d\u8bf7\u6c42 URL \u4e2d\u7684\u9a8c\u8bc1\u53c2\u6570\u4e3a _upt 2.\u53c8\u62cd\u4e91 CDN \u8282\u70b9\u9a8c\u8bc1\u8fc7\u7a0b \u6839\u636e\u7ea6\u5b9a\u89e3\u6790\u53d6\u51fa\u8fc7\u671f\u65f6\u95f4\uff0c\u548c\u5f53\u524d CDN \u8282\u70b9\u670d\u52a1\u5668\u65f6\u95f4\u8fdb\u884c\u6bd4\u8f83\uff0c\u786e\u8ba4\u8bf7\u6c42\u662f\u5426\u8fc7\u671f \u6839\u636e\u4e0a\u6587\u7ea6\u5b9a\u597d\u7684\u7b97\u6cd5\u8ba1\u7b97\u65b9\u5f0f\uff0c\u8ba1\u7b97\u51fa MD5 \u52a0\u5bc6\u4e32\u540e\uff0c\u548c URL \u4e2d\u7684\u52a0\u5bc6\u4e32\u8fdb\u884c\u6bd4\u8f83\uff0c\u9a8c\u8bc1\u52a0\u5bc6\u4e32\u662f\u5426\u4e00\u81f4 \u5982\u679c\u4ee5\u4e0a\u4e24\u4e2a\u6b65\u9aa4\u90fd\u9a8c\u8bc1\u901a\u8fc7\uff0c\u8bf7\u6c42\u624d\u4f1a\u88ab\u8ba4\u4e3a\u662f\u5408\u6cd5\u7684\uff0c\u8fd9\u65f6 CDN \u4f1a\u8bf7\u6c42\u8d44\u6e90\u54cd\u5e94\u7ed9\u5ba2\u6237\u7aef\uff0c\u5426\u5219\u4f1a\u88ab\u8ba4\u4e3a\u662f\u975e\u6cd5\u8bf7\u6c42\uff0c\u76f4\u63a5\u54cd\u5e94 HTTP status code 403 \u914d\u7f6e\u5f15\u5bfc \u767b\u9646 CDN \u63a7\u5236\u53f0 \uff0c\u4f9d\u6b21\u8fdb\u5165\uff1a\u670d\u52a1 \u7ba1\u7406 > \u529f\u80fd\u914d\u7f6e > \u8bbf\u95ee\u63a7\u5236 > Token \u9632\u76d7\u94fe\uff0c\u70b9\u51fb\u300c\u7ba1\u7406\u300d\u6309\u94ae\u5373\u53ef\u5f00\u59cb\u914d\u7f6e\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u5982\u4e0a\u622a\u56fe\u6240\u793a\uff0c\u6b64\u5904\u586b\u5199\u7684\u5bc6\u94a5\u4e5f\u5373\u4e0e CDN \u5e73\u53f0\u7ea6\u5b9a\u7684\u7b7e\u540d\u5bc6\u94a5\u3002 \u6ce8\u610f\u4e8b\u9879 \u5f53\u9632\u76d7\u94fe\u6d89\u53ca\u7684\u53c2\u6570\uff08\u6bd4\u5982\uff1a\u5bc6\u94a5\u3001\u8fc7\u671f\u65f6\u95f4\uff09\u53d1\u751f\u53d8\u66f4\u65f6\uff0c\u9700\u8981\u5728 CDN \u63a7\u5236\u540e\u53f0\u53ca\u65f6\u8c03\u6574\uff1b \u65f6\u95f4\u6233\u9632\u76d7\u94fe\u7684\u76f8\u5173\u53c2\u6570\u662f\u7ecf\u5e38\u53d1\u751f\u53d8\u66f4\u7684\uff0c\u7531\u4e8e\u690d\u5165\u5230\u4e86 URL \u4e2d\uff0c\u4f1a\u5f71\u54cd\u5230\u8282\u70b9\u7684\u7f13\u5b58\uff0c\u53ef\u80fd\u4f1a\u5bfc\u81f4\u4e00\u4efd\u76f8\u540c\u7684\u6587\u4ef6\uff0c\u4f1a\u56e0\u4e3a URL \u91cc\u9762\u7684\u9632\u76d7\u94fe\u53c2\u6570\u7684\u4e0d\u540c\u800c\u7f13\u5b58\u591a\u4efd\uff0c\u4e00\u822c\u60c5\u51b5\u4e0b\uff0c\u5efa\u8bae\u53bb\u5ffd\u7565\u53c2\u6570\u8fdb\u884c\u7f13\u5b58\u3002 6.6 \u56de\u6e90\u9274\u6743 \u00b6 \u529f\u80fd\u8bf4\u660e \u56de\u6e90\u9274\u6743\u662f\u4e00\u79cd\u9ad8\u7ea7\u7684\u9632\u76d7\u94fe\u65b9\u5f0f\uff0c\u9002\u7528\u4e8e\u5bf9\u9632\u76d7\u94fe\u6709\u5f88\u9ad8\u5b9e\u65f6\u6027\u8981\u6c42\u7684\u573a\u666f\u3002\u5927\u6982\u539f\u7406\u662f CDN \u8fb9\u7f18\u8282\u70b9\u6bcf\u6b21\u63a5\u53d7\u5230\u8bf7\u6c42\u4e4b\u540e\uff0c\u90fd\u9700\u8981\u56de\u5ba2\u6237\u6e90\u7ad9\u8fdb\u884c\u9a8c\u8bc1\uff0c\u9a8c\u8bc1\u901a\u8fc7\u4e4b\u540e\u624d\u8ba4\u4e3a\u662f\u5408\u6cd5\u8bf7\u6c42\uff0c\u8fd9\u6837 CDN \u53ef\u4ee5\u7ee7\u7eed\u63d0\u4f9b\u670d\u52a1\u3002 \u914d\u7f6e\u5f15\u5bfc \u767b\u9646 CDN \u63a7\u5236\u53f0 \uff0c\u4f9d\u6b21\u8fdb\u5165\uff1a\u670d\u52a1\u7ba1\u7406 > \u529f\u80fd\u914d\u7f6e > \u8bbf\u95ee\u63a7\u5236 > \u56de\u6e90\u9274\u6743\uff0c\u70b9\u51fb\u300c\u7ba1\u7406\u300d\u6309\u94ae\u5373\u53ef\u5f00\u59cb\u914d\u7f6e\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u70b9\u51fb\u53f3\u4e0a\u89d2\u7684\u3010\u6dfb\u52a0\u9274\u6743\u914d\u7f6e\u3011\uff0c\u5373\u53ef\u8fdb\u5165\u914d\u7f6e\u754c\u9762\uff0c\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u8d44\u6e90\u5730\u5740 \u9700\u8981\u8fdb\u884c\u9274\u6743\u7684\u5339\u914d\u89c4\u5219\u96c6\uff0c\u652f\u6301\u57df\u540d\u7ea7\u522b\u914d\u7f6e\uff0c\u793a\u4f8b\u5982\u4e0b\uff1a test123.upyun.com/video/* \u670d\u52a1\u5668\u5730\u5740 \u4e5f\u5373\u9274\u6743 URL \uff0c\u9274\u6743\u4e1a\u52a1\u670d\u52a1\u5668\u5730\u5740\uff0c\u683c\u5f0f\u4e3a\uff1a scheme://host:port/path \u793a\u4f8b\u5982\u4e0b\uff1a http://validate.example.com/app/cdnValidate \u8bf7\u6c42\u65b9\u6cd5 \u5411\u9274\u6743\u670d\u52a1\u5668\u53d1\u8d77\u8bf7\u6c42\u7684\u65b9\u6cd5\u3002\u76ee\u524d\u4ec5\u652f\u6301 GET \u548c POST \uff0c\u622a\u56fe\u9009\u62e9 GET \u65b9\u6cd5\u3002 \u9274\u6743\u53c2\u6570 \u9274\u6743\u6240\u9700\u53c2\u6570\uff0c\u4e5f\u5373\u8bf7\u6c42 URL \u91cc\u9762\u7684\u53c2\u6570\uff0c\u5047\u5982\u8bf7\u6c42 URL \u4e3a\uff1a http://test123.upyun.com/video/cdnValidate?accountID=2345&userTD=kadkf&token=fjdkadkf&sign=dfskjdk123 \u5219\uff0c\u9274\u6743\u53c2\u6570\u53ef\u4e3a\uff1a accountIDD userTD token sign \u5177\u4f53\u53c2\u6570\u4e2a\u6570\uff0c\u6839\u636e\u4e1a\u52a1\u60c5\u51b5\u8fdb\u884c\u914d\u7f6e\u3002 \u9274\u6743\u65b9\u5f0f \u7ea6\u5b9a\u7684\u9274\u6743\u901a\u8fc7\u7684\u72b6\u6001\u7801\u6216\u8005\u54cd\u5e94\u4f53\u5185\u5bb9\uff0c\u5176\u4e2d\u72b6\u6001\u7801\u4e0d\u80fd\u4e3a 5XX\uff0c\u54cd\u5e94\u4f53\u5185\u5bb9\u4e0d\u80fd\u4e3a\u7a7a\u3002\u4f8b\u5982\uff1a\u793a\u4f8b\u9274\u6743\u901a\u8fc7\u7684\u72b6\u6001\u7801\u4e3a 200\u3002 \u8d85\u65f6\u7b49\u5f85\u65f6\u95f4 \u9274\u6743\u8bf7\u6c42\u7684\u8d85\u65f6\u65f6\u95f4\uff0c\u9ed8\u8ba4\u4e3a 10 \u79d2\u949f\u3002 \u9274\u6743\u670d\u52a1\u5668\u8fde\u63a5\u8d85\u65f6 \u5f53\u670d\u52a1\u5668\u5931\u53bb\u54cd\u5e94\u65f6\uff0c\u6b64\u5b57\u6bb5\u751f\u6548\u3002\u4e3a true \u65f6\u8ba4\u4e3a\u6240\u6709\u8bf7\u6c42\u90fd\u901a\u8fc7\u9274\u6743\uff0c\u9ed8\u8ba4\u662f\u9274\u6743\u901a\u8fc7\u3002 \u6ce8\u610f\u4e8b\u9879 \u4f7f\u7528\u8be5\u529f\u80fd\uff0c\u9700\u8003\u8651\u8bbf\u95ee\u91cf\u8fc7\u5927\u65f6\u9274\u6743\u670d\u52a1\u5668\u7684\u538b\u529b\uff1b \u5408\u6cd5\u8bf7\u6c42\u65f6\uff0c\u9700\u5728\u9274\u6743\u670d\u52a1\u5668\u54cd\u5e94\u5408\u6cd5\u7684\u9274\u6743\u72b6\u6001\u7801\u548c\u54cd\u5e94\u4f53\uff0c\u5426\u5219\u4f1a\u9274\u6743\u5931\u8d25\uff1b CDN \u8282\u70b9\u5230\u9274\u6743\u670d\u52a1\u5668\u51fa\u73b0\u7f51\u7edc\u5f02\u5e38\u6216\u8005\u7f51\u7edc\u8d85\u65f6\u7b49\u60c5\u51b5\u65f6\uff0c\u4f1a\u9ed8\u8ba4\u9274\u6743\u901a\u8fc7\uff1b 6.7 HTTP \u8bf7\u6c42\u5927\u5c0f\u9650\u5236 \u00b6 \u529f\u80fd\u8bf4\u660e \u8be5\u529f\u80fd\u8868\u793a\u80fd\u591f\u63d0\u4ea4\u7684\u6700\u5927\u8bf7\u6c42 body \u9650\u5236\uff0c\u9002\u7528\u4e8e POST \u548c PUT \u8bf7\u6c42\u3002\u9ed8\u8ba4\u4e3a 512 M\uff0c\u7528\u6237\u53ef\u4ee5\u6839\u636e\u4e1a\u52a1\u5b9e\u9645\u60c5\u51b5\u5c06\u6b64\u503c\u8c03\u5c0f\uff0c\u4f8b\u5982\u8bbe\u7f6e\u4e3a 1M\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u7f51\u7ad9\u670d\u52a1\u5668\u662f\u4e0d\u9650\u5236\u8bf7\u6c42 body \u5927\u5c0f\u7684\uff0c\u8fd9\u6837\u5f88\u5bb9\u6613\u4f1a\u88ab\u9ed1\u5ba2\u5229\u7528\u5e76\u8fdb\u884c DDoS \u653b\u51fb\uff0c\u9ed1\u5ba2\u53ef\u4ee5\u5229\u7528\u8fd9\u4e00\u70b9\u5f80 HTTP POST \u7684 body \u4e2d\u4f20\u9012\u975e\u5e38\u5927\uff08\u6bd4\u5982\u51e0\u5341M\uff09\u7684\u8bf7\u6c42\uff0c\u53ef\u80fd\u5bfc\u81f4\u670d\u52a1\u7aef\u65e0\u6cd5\u5bf9\u5916\u63d0\u4f9b\u670d\u52a1\u3002 \u914d\u7f6e\u5f15\u5bfc \u767b\u9646 CDN \u63a7\u5236\u53f0 \uff0c\u4f9d\u6b21\u8fdb\u5165\uff1a\u670d\u52a1\u7ba1\u7406 > \u529f\u80fd\u914d\u7f6e > \u8bbf\u95ee\u63a7\u5236 > HTTP \u8bf7\u6c42\u5927\u5c0f\u9650\u5236\uff0c\u70b9\u51fb\u300c\u7ba1\u7406\u300d\u6309\u94ae\u5373\u53ef\u5f00\u59cb\u914d\u7f6e\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u5728\u914d\u7f6e\u754c\u9762\uff0c\u6839\u636e\u4e1a\u52a1\u8981\u6c42\uff0c\u586b\u5199\u914d\u7f6e\u5185\u5bb9\uff0c\u7136\u540e\u70b9\u51fb\u3010\u786e\u5b9a\u3011\u6309\u94ae\u5373\u53ef\u3002 \u6ce8\u610f\u4e8b\u9879 \u9002\u7528\u4e8e\u52a8\u6001\u8d44\u6e90\u52a0\u901f\uff0c\u5168\u9759\u6001\u8d44\u6e90\u52a0\u901f\u5efa\u8bae\u4e0d\u542f\u7528\u8be5\u529f\u80fd\u3002 6.8 IP \u8bbf\u95ee\u9650\u5236 \u00b6 \u529f\u80fd\u8bf4\u660e IP \u8bbf\u95ee\u9650\u5236\u4e5f\u5373 CDN \u8fb9\u7f18\u8282\u70b9\u5bf9\u7ec8\u7aef\u7528\u6237\u7684\u8bbf\u95ee IP \u7684\u8bbf\u95ee\u9891\u7387\u8fdb\u884c\u7edf\u8ba1\uff0c\u5728\u5355\u4f4d\u65f6\u95f4\u5468\u671f\u5185\uff08\u76ee\u524d\u56fa\u5b9a\u7684\u65f6\u95f4\u4e3a 60 \u79d2\uff09\uff0c\u5982\u679c\u8bbf\u95ee\u9891\u7387\u8fbe\u5230\u8bbe\u5b9a\u7684\u9608\u503c\uff0c\u5c06\u4e3b\u52a8\u62e6\u622a\u8be5 IP \u5bf9\u57df\u540d\u7684\u8bbf\u95ee\uff0c\u4ece\u800c\u8fbe\u5230\u8bbf\u95ee\u9650\u5236\u7684\u76ee\u7684\u3002 \u5f53\u524d\u7684\u5355 IP \u8bbf\u95ee\u9891\u7387\u53ea\u652f\u6301\u9488\u5bf9 CDN \u5355\u4e2a\u8fb9\u7f18\u8282\u70b9\u751f\u6548\uff0c\u5f53\u8fbe\u5230\u8bbe\u5b9a\u7684\u9608\u503c\u65f6\uff0c\u5f02\u5e38\u8bbf\u95ee\u7684\u5ba2\u6237\u7aef IP \u5c06\u52a0\u5165\u9ed1\u540d\u5355\u4e2d\uff0c\u5e76\u53ef\u4ee5\u8bbe\u5b9a\u751f\u6548\u65f6\u95f4\uff0c\u5728\u8be5\u65f6\u95f4\u5468\u671f\u5185\uff0c\u6240\u6709\u8be5 IP \u7684\u8bbf\u95ee\u90fd\u4f1a\u88ab\u62e6\u622a\u3002 \u914d\u7f6e\u5f15\u5bfc \u767b\u9646 CDN \u63a7\u5236\u53f0 \uff0c\u4f9d\u6b21\u8fdb\u5165\uff1a\u670d\u52a1 \u7ba1\u7406 > \u529f\u80fd\u914d\u7f6e > \u8bbf\u95ee\u63a7\u5236 > IP \u8bbf\u95ee\u9650\u5236\uff0c\u70b9\u51fb\u300c\u7ba1\u7406\u300d\u6309\u94ae\u5373\u53ef\u5f00\u59cb\u914d\u7f6e\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u914d\u7f6e\u6b65\u9aa4\u5982\u4e0b\uff1a \u7b2c\u4e00\u6b65\uff1a\u586b\u5199\u8bbf\u95ee\u7684\u8d44\u6e90\u8def\u5f84\u89c4\u5219\uff0c\u652f\u6301 \uff0a \u901a\u914d\u7b26\uff0c\u5982\uff1a /a/*.mp4 \u3001 /b/*.flv \u7b2c\u4e8c\u6b65\uff1a\u9009\u62e9\u9650\u5236\u65b9\u5f0f\uff1a \u76f4\u63a5\u7981\u6b62 \u7b2c\u4e09\u6b65\uff1a\u8bbe\u7f6e\u8bbf\u95ee\u9891\u7387\u53ca\u76f8\u5e94\u7684\u65f6\u95f4\u9650\u5236 \u8be6\u7ec6\u914d\u7f6e\u8bf7\u53c2\u89c1 IP \u8bbf\u95ee\u9650\u5236\u7528\u6237\u6307\u5357 \u3002 \u6ce8\u610f\u4e8b\u9879 \u76f4\u63a5\u7981\u6b62\u662f\u4ee5 60s \u4e3a\u4e00\u4e2a\u8ba1\u6570\u5468\u671f\uff0c\u5373\u4e0a\u4e00\u4e2a 60s \u7684\u8ba1\u6570\u4e0d\u4f1a\u7d2f\u8ba1\u53e0\u52a0\u5230\u4e0b\u4e00\u4e2a 60s \u5185\uff1b \u300c\u8bbf\u95ee\u9891\u7387\u9608\u503c\u300d\u9700\u6839\u636e\u4e1a\u52a1\u60c5\u51b5\u614e\u91cd\u8bbe\u7f6e\uff0c\u8fc7\u4f4e\u53ef\u80fd\u5f15\u8d77\u6b63\u5e38\u7528\u6237\u7684\u8bbf\u95ee\u53d7\u9650\uff0c\u8fc7\u9ad8\u5219\u65e0\u6cd5\u6709\u6548\u9650\u5236\u975e\u6cd5\u8bbf\u95ee\uff1b \u8bf7\u52ff\u5c06\u8bbf\u95ee\u9891\u7387\u503c\u8bbe\u7f6e\u8fc7\u4f4e\uff0c\u4ee5\u514d\u5f71\u54cd\u6b63\u5e38\u7528\u6237\u7684\u8bbf\u95ee\u8bf7\u6c42\u3002 6.9 CC \u9632\u62a4 \u00b6 \u529f\u80fd\u8bf4\u660e CC \u9632\u62a4\u4e3b\u8981\u662f\u9488\u5bf9\u7f51\u7edc\u5b89\u5168\u9886\u57df\u4e2d\u7684 CC \u653b\u51fb\u800c\u8fdb\u884c\u7684\u4e00\u79cd\u5e94\u7528\u5c42\u653b\u51fb\u9632\u62a4\uff0c\u8be5\u529f\u80fd\u901a\u8fc7\u81ea\u5b9a\u4e49\u5339\u914d\u89c4\u5219\u5bf9\u76ee\u6807\u8d44\u6e90\u8fdb\u884c\u76d1\u63a7\uff0c\u5f53\u8bf7\u6c42\u9891\u7387\u8fbe\u5230\u89e6\u53d1\u9891\u7387\u65f6\u5bf9\u7591\u4f3c\u653b\u51fb\u8bf7\u6c42\u8fdb\u884c\u6821\u9a8c\uff0c\u6821\u9a8c\u901a\u8fc7\u5219\u5141\u8bb8\u8bbf\u95ee\uff1b\u6821\u9a8c\u4e0d\u901a\u8fc7\uff0c\u5219\u76f4\u63a5\u7981\u6b62\u8bbf\u95ee\u3002 \u914d\u7f6e\u5f15\u5bfc \u767b\u9646 CDN \u63a7\u5236\u53f0 \uff0c\u4f9d\u6b21\u8fdb\u5165\uff1a\u670d\u52a1\u7ba1\u7406 > \u529f\u80fd\u914d\u7f6e > \u8bbf\u95ee\u63a7\u5236 > CC \u9632\u62a4\uff0c\u70b9\u51fb\u300c\u7ba1\u7406\u300d\u6309\u94ae\u5373\u53ef\u5f00\u59cb\u914d\u7f6e\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u70b9\u51fb\u53f3\u4e0a\u89d2\u7684\u3010\u6dfb\u52a0\u9632\u62a4\u7b56\u7565\u3011\uff0c\u51fa\u73b0\u5982\u4e0b\u914d\u7f6e\u754c\u9762\uff1a \u5177\u4f53\u914d\u7f6e\u53ef\u4ee5\u8d70\u5982\u4e0b\u56db\u4e2a\u6b65\u9aa4\uff1a \u7b2c\u4e00\u6b65\uff1a\u6dfb\u52a0\u9632\u62a4\u7b56\u7565\uff0c\u8bbe\u7f6e URI \u5339\u914d\u89c4\u5219\uff0c\u4f8b\u5982\uff1a/video/* \u7b2c\u4e8c\u6b65\uff1a\u586b\u5199\u8bbf\u95ee\u9891\u7387\u9608\u503c\uff0c\u4f8b\u5982\uff1a500\u6b21/\u5206\u949f\uff0c\u5728\u667a\u80fd\u9632\u62a4\u6a21\u5f0f\u4e0b\u624d\u6709\u6548 \u7b2c\u4e09\u6b65\uff1a\u8bbe\u7f6e IP \u767d\u540d\u5355\uff0c\u5982\u679c\u8981\u7ed5\u8fc7 CC \u9632\u62a4\u7b56\u7565\uff0c\u6b64\u5904\u53ef\u8fdb\u884c\u8bbe\u7f6e \u7b2c\u56db\u6b65\uff1a\u9009\u62e9 CC \u9632\u62a4\u6a21\u5f0f\uff0c\u5305\u62ec\u5f3a\u5236\u9632\u62a4\u3001\u667a\u80fd\u9632\u62a4\u3001\u6682\u505c\u9632\u62a4\uff0c\u5f53\u6b63\u5728\u906d\u53d7\u653b\u51fb\u65f6\uff0c\u5efa\u8bae\u9009\u62e9\u5f3a\u5236\u9632\u62a4\u6a21\u5f0f \u5f3a\u5236\u9632\u62a4 \u4e5f\u5c31\u662f\u5ffd\u7565\u9891\u7387\u9608\u503c\uff0c\u9488\u5bf9\u5339\u914d\u7684 URI \u76f4\u63a5\u8fdb\u884c\u6821\u9a8c\uff0c\u6821\u9a8c\u901a\u8fc7\u5219\u653e\u884c\u68c0\u9a8c\u4e0d\u901a\u8fc7\u5219\u62d2\u7edd\u8bbf\u95ee\uff1b \u667a\u80fd\u9632\u62a4 \u9488\u5bf9\u5339\u914d\u5230\u7684 URI \u8fdb\u884c\u8bbf\u95ee\u9891\u7387\u9608\u503c\u7684\u5224\u65ad\uff0c\u8fbe\u5230\u9608\u503c\u5219\u8fdb\u884c\u6821\u9a8c\uff0c\u6821\u9a8c\u901a\u8fc7\u5219\u653e\u884c\uff0c\u6821\u9a8c\u4e0d\u901a\u8fc7\u5219\u62d2\u7edd\u8bbf\u95ee\u3002 \u6682\u505c\u9632\u62a4 \u9632\u62a4\u89c4\u5219\u5931\u6548\uff0c\u4e0d\u8fdb\u884c\u9891\u7387\u7edf\u8ba1\u548c\u8bf7\u6c42\u6821\u9a8c\u3002 \u6ce8\u610f\u4e8b\u9879 1.CC \u9632\u62a4\u5206\u4e3a\u5f3a\u5236\u9632\u62a4\u548c\u667a\u80fd\u9632\u62a4\u4e24\u79cd\u6a21\u5f0f\uff0c\u5728\u667a\u80fd\u9632\u62a4\u6a21\u5f0f\u4e0b\uff0c\u5219\u4f1a\u5339\u914d URI \u89c4\u5219\uff0c\u8bf7\u6c42\u4e00\u65e6\u8fbe\u5230\u8bbf\u95ee\u9891\u7387\u9608\u503c\uff0c\u5219\u4f1a\u89e6\u53d1 JavaScript \u6821\u9a8c\uff0c\u6821\u9a8c\u901a\u8fc7\u5219\u53ef\u6b63\u5e38\u8bbf\u95ee\uff0c\u6821\u9a8c\u4e0d\u901a\u8fc7\u5219\u76f4\u63a5\u62d2\u7edd\u3002\u5728\u5f3a\u5236\u9632\u62a4\u6a21\u5f0f\u4e0b\uff0c\u5219\u4f1a\u5ffd\u7565\u8bbf\u95ee\u9891\u7387\u9608\u503c\uff0c\u76f4\u63a5\u89e6\u53d1 JavaScript \u6821\u9a8c\uff0c\u4ee5\u6b64\u7c7b\u63a8; 2.\u5728\u667a\u80fd\u9632\u62a4\u6a21\u5f0f\u4e0b\uff0c\u8bbf\u95ee\u9608\u503c\u8bbe\u7f6e\u5f97\u8fc7\u4f4e\uff0c\u53ef\u80fd\u4e0d\u4f1a\u89e6\u53d1 JavaScript \u6821\u9a8c\uff0c\u5efa\u8bae\u9608\u503c\u8bbe\u7f6e\u9ad8\u4e00\u4e9b\u3002 6.10 WAF \u9632\u62a4 \u00b6 \u529f\u80fd\u8bf4\u660e WAF\uff08Web Application Firewall\uff09\u7684\u4e2d\u6587\u540d\u79f0\u53eb\u505a Web \u5e94\u7528\u9632\u706b\u5899 \uff0c\u662f\u901a\u8fc7\u6267\u884c\u4e00\u7cfb\u5217\u9488\u5bf9 HTTP/HTTPS \u7684\u5b89\u5168\u7b56\u7565\u6765\u4e13\u95e8\u4e3a Web \u5e94\u7528\u63d0\u4f9b\u4fdd\u62a4\u7684\u4e00\u9879\u529f\u80fd\u3002\u4e3b\u8981\u9632\u62a4\u7684\u662f\u6765\u81ea\u5bf9\u7f51\u7ad9\u6e90\u7ad9\u7684\u52a8\u6001\u6570\u636e\u653b\u51fb\uff0c\u53ef\u9632\u62a4\u7684\u653b\u51fb\u7c7b\u578b\u5305\u62ec SQL \u6ce8\u5165\u3001XSS \u653b\u51fb\u3001CSRF \u653b\u51fb\u3001\u6076\u610f\u722c\u866b\u3001\u626b\u63cf\u5668\u3001\u8fdc\u7a0b\u6587\u4ef6\u5305\u542b\u7b49\u3002 \u914d\u7f6e\u5f15\u5bfc \u767b\u9646 CDN \u63a7\u5236\u53f0 \uff0c\u4f9d\u6b21\u8fdb\u5165\uff1a\u670d\u52a1 \u7ba1\u7406 > \u529f\u80fd\u914d\u7f6e > \u8bbf\u95ee\u63a7\u5236 > WAF \u9632\u62a4\uff0c\u5f00\u542f WAF \u4fdd\u62a4\u5373\u53ef\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u5982\u4e0a\u914d\u7f6e\u754c\u9762\uff0c\u70b9\u51fb\u3010\u786e\u5b9a\u3011\u6309\u94ae\u5373\u53ef\u5f00\u542f\u3002 \u6ce8\u610f\u4e8b\u9879 \u5f53\u524d\u7248\u672c\u7684 WAF \u529f\u80fd\u5c5e\u4e8e\u514d\u8d39\u529f\u80fd\uff0c\u6682\u65e0\u7edf\u8ba1\u5206\u6790\u7c7b\u6570\u636e\uff0c\u5f85\u540e\u7eed\u89c4\u5212\uff1b \u5e73\u53f0\u9ed8\u8ba4\u89c4\u5219\u6709\u9650\uff0cWAF \u529f\u80fd\u4e0d\u786e\u4fdd\u9632\u62a4\u6240\u6709\u7684\u653b\u51fb\u8bf7\u6c42\uff1b \u9002\u7528\u4e8e\u52a8\u6001\u8d44\u6e90\u52a0\u901f\uff0c\u5168\u9759\u6001\u8d44\u6e90\u52a0\u901f\u5efa\u8bae\u4e0d\u542f\u7528\u8be5\u529f\u80fd\u3002 6.11 \u8de8\u57df\u914d\u7f6e \u00b6 \u529f\u80fd\u8bf4\u660e \u8de8\u57df\u8d44\u6e90\u5171\u4eab \uff08 Cross-Origin Resource Sharing\uff09\u662f\u4e00\u79cd\u7f51\u7edc\u6d4f\u89c8\u5668\u7684\u6280\u672f\u89c4\u8303\uff0c\u4ed6\u4e3a Web \u670d\u52a1\u5668\u5b9a\u4e49\u4e86\u4e00\u79cd\u65b9\u5f0f\uff0c\u5141\u8bb8\u7f51\u9875\u4ece\u4e0d\u540c\u7684\u57df\u8bbf\u95ee\u5176\u8d44\u6e90\u3002\u8de8\u6e90\u8d44\u6e90\u5171\u4eab\u6807\u51c6\u901a\u8fc7\u65b0\u589e\u4e00\u7cfb\u5217 HTTP \u5934\uff0c\u8ba9\u670d\u52a1\u5668\u80fd\u58f0\u660e\u90a3\u4e9b\u6765\u6e90\u53ef\u4ee5\u901a\u8fc7\u6d4f\u89c8\u5668\u8bbf\u95ee\u8be5\u670d\u52a1\u5668\u4e0a\u7684\u8d44\u6e90\u3002\u6b64\u65f6\u9700\u8981\u5728 Response Header \u4e2d\u589e\u52a0\u8de8\u57df\u76f8\u5173\u914d\u7f6e\uff0c\u8fd9\u6837\u5c31\u53ef\u4ee5\u4f7f\u5f97\u8d44\u6e90\u7684\u5b89\u5168\u8bbf\u95ee\u6210\u4e3a\u53ef\u80fd\u3002 \u914d\u7f6e\u5f15\u5bfc \u767b\u9646 CDN \u63a7\u5236\u53f0 \uff0c\u4f9d\u6b21\u8fdb\u5165\uff1a\u670d\u52a1 \u7ba1\u7406 > \u529f\u80fd\u914d\u7f6e > \u8bbf\u95ee\u63a7\u5236 > CORS \u8de8\u57df\u5171\u4eab\uff0c\u70b9\u51fb\u3010\u7ba1\u7406\u3011\u6309\u94ae\u5373\u53ef\u5f00\u59cb\u914d\u7f6e\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u5177\u4f53\u914d\u7f6e\u5b57\u6bb5\u505a\u5982\u4e0b\u8bf4\u660e\uff1a Access-Control-Allow-Origin \u8fd4\u56de\u7684\u8d44\u6e90\u9700\u8981\u6709\u4e00\u4e2a Access-Control-Allow-Origin \u5934\u4fe1\u606f\uff0c\u4e5f\u53ef\u4ee5\u8bbe\u7f6e\u901a\u914d\u7b26\uff0a\uff0c\u5141\u8bb8\u88ab\u6240\u6709\u57df\u4f7f\u7528\u3002\u8bed\u6cd5\u5982\u4e0b: Access-Control-Allow-Origin: | * \u4e3e\u4e2a\u6817\u5b50\uff0c\u5141\u8bb8\u6765\u81ea http://www.upyun.com \u7684\u8bf7\u6c42\uff0c\u4f60\u53ef\u4ee5\u8fd9\u6837\u6307\u5b9a: Access-Control-Allow-Origin: http://www.upyun.com Access-Control-Allow-Methods \u8868\u793a\u5141\u8bb8\u7684\u8de8\u57df\u8bf7\u6c42\u7684\u65b9\u6cd5\uff0c\u5728\u5f53\u524d\u8bf7\u6c42\u7684\u57df\u88ab\u5141\u8bb8\u540e\uff0c\u8fd8\u8981\u68c0\u67e5\u5f53\u524d\u8bf7\u6c42\u7684\u65b9\u6cd5\u662f\u5426\u88ab\u5141\u8bb8\uff0c\u793a\u4f8b\u5982\u4e0b\uff1a Access-Control-Allow-Methods: POST, GET, OPTIONS Access-Control-Allow-Headers \u4e5f\u662f\u5728\u54cd\u5e94\u9884\u68c0\u8bf7\u6c42\u7684\u65f6\u5019\u4f7f\u7528\uff0c\u7528\u6765\u6307\u660e\u5728\u5b9e\u9645\u7684\u8bf7\u6c42\u4e2d\uff0c\u53ef\u4ee5\u4f7f\u7528\u54ea\u4e9b\u81ea\u5b9a\u4e49 HTTP \u8bf7\u6c42\u5934\uff0c\u6bd4\u5982\uff1a Access-Control-Allow-Headers: X-PINGOTHER\uff0cX-UPYUN \u8fd9\u6837\u5728\u5b9e\u9645\u7684\u8bf7\u6c42\u91cc,\u8bf7\u6c42\u5934\u4fe1\u606f\u91cc\u5c31\u53ef\u4ee5\u6709\u8fd9\u4e48\u4e00\u6761\uff1a X-PINGOTHER: hello Access-Control-Expose-Headers \u8bbe\u7f6e\u6d4f\u89c8\u5668\u5141\u8bb8\u8bbf\u95ee\u7684\u670d\u52a1\u5668\u7684\u5934\u4fe1\u606f\u7684\u767d\u540d\u5355\uff0c\u793a\u4f8b\u5982\u4e0b\uff1a Access-Control-Expose-Headers: X-My-Custom-Header, X-Another-Custom-Header \u8fd9\u6837\uff0c X-My-Custom-Header \u548c X-Another-Custom-Header \u8fd9\u4e24\u4e2a\u5934\u4fe1\u606f\uff0c\u90fd\u53ef\u4ee5\u88ab\u6d4f\u89c8\u5668\u5f97\u5230\u3002 Access-Control-Max-Age \u8fd9\u4e2a\u5934\u544a\u8bc9\u6211\u4eec\u8fd9\u6b21\u9884\u8bf7\u6c42\u7684\u7ed3\u679c\u7684\u6709\u6548\u671f\u662f\u591a\u4e45\uff0c\u5355\u4f4d\u4e3a\u79d2\uff0c\u8bbe\u7f6e\u793a\u4f8b\u5982\u4e0b\uff1a Access-Control-Max-Age: 864000 \u8868\u660e\u5728 864000s\uff0810\u5929\uff09\u5185\uff0c\u5bf9\u8be5\u8d44\u6e90\u7684\u8de8\u57df\u8bbf\u95ee\u4e0d\u518d\u53d1\u9001\u53e6\u5916\u4e00\u6761\u9884\u8bf7\u6c42\u3002 \u6ce8\u610f\u4e8b\u9879 1.\u6700\u591a\u652f\u6301\u6dfb\u52a0 10 \u6761\u89c4\u5219\uff0c\u5339\u914d\u65f6\u4ece\u7b2c\u4e00\u6761\u5f00\u59cb\u9010\u6761\u5339\u914d\uff0c\u4ee5\u6700\u65e9\u5339\u914d\u4e0a\u7684\u89c4\u5219\u4e3a\u51c6 2. \u5141\u8bb8\u7684\u57df \u3001 Allow Header \u3001 Expose Header \u6700\u591a\u5141\u8bb8 20 \u884c 3. \u5141\u8bb8\u7684\u57df \u53ca Methods \u5efa\u8bae\u6839\u636e\u9700\u8981\u4f7f\u7528\u6700\u5c0f\u7684\u914d\u7f6e\u6765\u4fdd\u8bc1\u5b89\u5168\u6027\uff0c\u591a\u6761\u89c4\u5219\u95f4\u4e0d\u8981\u6709\u8986\u76d6\u548c\u51b2\u7a81 4. \u5141\u8bb8\u7684\u57df \u9700\u5e26\u4e0a\u5b8c\u6574\u7684\u57df\u4fe1\u606f\uff0c\u5373\u6307\u5b9a https \u6216\u8005 http\uff0c\u6216\u8005 *://foo.com \u8fd9\u6837\u7684\u5f62\u5f0f 5. Allow Header \u3001 Expose Header \u4e0d\u5141\u8bb8\u4f7f\u7528\u901a\u914d\u7b26\uff0c\u5927\u5c0f\u5199\u4e0d\u654f\u611f 6. \u7f13\u5b58\u65f6\u95f4 \u5982\u679c\u6ca1\u6709\u7279\u6b8a\u60c5\u51b5\u53ef\u4ee5\u914c\u60c5\u8bbe\u7f6e\u5f97\u5927\u4e00\u70b9\uff0c\u9ed8\u8ba4\u4e3a 86400 \u79d2\uff0c\u6700\u5927\u4e3a 604800 \u79d2 6.12 \u81ea\u5b9a\u4e49\u9875\u9762 \u00b6 \u529f\u80fd\u8bf4\u660e \u81ea\u5b9a\u4e49\u9875\u9762\u529f\u80fd\u4e3b\u8981\u9488\u5bf9 CDN \u8fd4\u56de\u7684 \u9ed8\u8ba4\u9519\u8bef\u7801 \u4ee5\u53ca\u6e90\u7ad9\u8fd4\u56de\u7684\u9519\u8bef\u72b6\u6001\u8fdb\u884c\u81ea\u5b9a\u4e49\u9875\u9762\u7684\u8bbe\u8ba1\u548c\u7f16\u8f91\uff0c\u53ef\u4ee5\u8fdb\u4e00\u6b65\u63d0\u5347\u7ec8\u7aef\u7528\u6237\u4f53\u9a8c\u3002\u5982\u672a\u914d\u7f6e\uff0c\u5219\u9ed8\u8ba4\u9075\u5faa\u53c8\u62cd\u4e91 CDN \u670d\u52a1\u9ed8\u8ba4\u9519\u8bef\u9875\u9762\u6216\u6e90\u7ad9\u9ed8\u8ba4\u7684\u9519\u8bef\u9875\u9762\u3002CDN \u76ee\u524d\u63d0\u4f9b\u4e09\u79cd\u9009\u9879\u7684\u8bbe\u7f6e\uff1a\u9ed8\u8ba4\u9875\u9762\u3001\u81ea\u5b9a\u4e49\u9875\u9762\u3001\u7f8e\u5316\u9875\u9762\uff08\u6682\u672a\u5f00\u653e\uff09\u3002\u4ee5\u5730\u533a\u8bbf\u95ee\u9650\u5236\u4e3a\u4f8b\uff1a \u9ed8\u8ba4\uff1aCDN \u4f1a\u9ed8\u8ba4\u8fd4\u56de\u5982\u4e0b JSON \u4e32\u683c\u5f0f { \"code\": \"40310002\", \"msg\": \"region is forbidden\" } \u81ea\u5b9a\u4e49\u9875\u9762\uff1a\u5f53\u89e6\u53d1 CDN \u9632\u76d7\u94fe\u89c4\u5219\u65f6\uff0cCDN \u4f1a\u76f4\u63a5\u8fd4\u56de\u81ea\u884c\u8bbe\u8ba1\u548c\u7f16\u8f91\u7684\u9875\u9762\u3002\u5f53\u89e6\u53d1\u6e90\u7ad9\u9519\u8bef\u7801\u65f6\uff0c\u4f1a 302 \u8df3\u8f6c\u5230\u81ea\u884c\u8bbe\u8ba1\u7684\u9875\u9762\u3002 \u7f8e\u5316\u9875\u9762\uff1a\u53c8\u62cd\u4e91\u7ed3\u5408\u4e1a\u52a1\u573a\u666f\uff0c\u81ea\u884c\u8bbe\u8ba1\u7684\u7f8e\u5316\u9875\u9762\uff08\u6682\u672a\u5f00\u653e\uff09\u3002 1\u3001CDN \u4e1a\u52a1\u7aef\u652f\u6301\u7684\u914d\u7f6e\u9879\u5305\u62ec\uff1a IP/\u5730\u533a\u9650\u5236 \u5f53\u5728\u53c8\u62cd\u4e91\u63a7\u5236\u53f0\u914d\u7f6e\u4e86 IP \u9ed1\u767d\u540d\u5355\u3001\u5730\u533a\u8bbf\u95ee\u9650\u5236\u529f\u80fd\uff0c\u89e6\u53d1\u8be5\u89c4\u5219\u65f6\u4f1a\u76f4\u63a5\u8fd4\u56de\u81ea\u5b9a\u4e49\u7684\u9875\u9762\u3002 \u9632\u76d7\u94fe \u5f53\u5728\u53c8\u62cd\u4e91\u63a7\u5236\u53f0\u914d\u7f6e\u4e86 User-Agent \u9632\u76d7\u94fe\u3001Referer \u9632\u76d7\u94fe\u3001Token \u9632\u76d7\u94fe\u529f\u80fd\uff0c\u89e6\u53d1\u8be5\u89c4\u5219\u65f6\u4f1a\u76f4\u63a5\u8fd4\u56de\u81ea\u5b9a\u4e49\u7684\u9875\u9762\u3002 \u56de\u6e90\u9274\u6743 \u5f53\u5728\u53c8\u62cd\u4e91\u63a7\u5236\u53f0\u914d\u7f6e\u4e86\u56de\u6e90\u9274\u6743\u529f\u80fd\uff0c\u89e6\u53d1\u89c4\u5219\uff08\u5305\u62ec\u9274\u6743\u5931\u8d25\u3001\u9274\u6743\u9519\u8bef\uff09\u65f6\u4f1a\u76f4\u63a5\u8fd4\u56de\u81ea\u5b9a\u4e49\u7684\u9875\u9762\u3002 \u5b89\u5168\u9632\u62a4 \u5f53\u5728\u53c8\u62cd\u4e91\u63a7\u5236\u53f0\u914d\u7f6e\u4e86 IP \u8bbf\u95ee\u9650\u5236\u3001WAF \u9632\u62a4\u3001HTTP \u8bf7\u6c42\u5927\u5c0f\u9650\u5236\u529f\u80fd\uff0c\u89e6\u53d1\u89c4\u5219\u65f6\u4f1a\u4f1a\u76f4\u63a5\u8fd4\u56de\u81ea\u5b9a\u4e49\u7684\u9875\u9762\u3002 \u8fb9\u7f18\u89c4\u5219 \u5f53\u5728\u53c8\u62cd\u4e91\u63a7\u5236\u53f0\u914d\u7f6e\u4e86\u8fb9\u7f18\u89c4\u5219\u8bbf\u95ee\u63a7\u5236\u529f\u80fd\uff0c\u89e6\u53d1\u89c4\u5219\u65f6\u4f1a\u76f4\u63a5\u8fd4\u56de\u81ea\u5b9a\u4e49\u7684\u9875\u9762\uff0c\u5f53\u524d\u4ec5\u9488\u5bf9 403\u3001404 \u72b6\u6001\u7801\u6709\u6548\u3002 \u5173\u95ed\u670d\u52a1 CDN \u670d\u52a1\u88ab\u5173\u95ed\u65f6\uff0c\u53ef\u4ee5\u6839\u636e\u8981\u6c42\u81ea\u5b9a\u4e49\u9875\u9762\u3002 2\u3001\u6e90\u7ad9\u5339\u914d\u7684\u72b6\u6001\u7801\u5305\u62ec\uff1a 400 \u8868\u793a\u8be5\u8bf7\u6c42\u62a5\u6587\u4e2d\u5b58\u5728\u8bed\u6cd5\u9519\u8bef\uff0c\u5bfc\u81f4\u6e90\u7ad9\u65e0\u6cd5\u7406\u89e3\u8be5\u8bf7\u6c42\u3002 403 \u8be5\u72b6\u6001\u7801\u8868\u660e\u5bf9\u8bf7\u6c42\u8d44\u6e90\u7684\u8bbf\u95ee\u88ab\u6e90\u7ad9\u62d2\u7edd\u4e86\u3002 404 \u8be5\u72b6\u6001\u7801\u8868\u660e\u6e90\u7ad9\u4e0a\u65e0\u6cd5\u627e\u5230\u6307\u5b9a\u7684\u8d44\u6e90\u3002 405 \u6307\u51fa\u8bf7\u6c42\u65b9\u6cd5\u5bf9\u67d0\u4e9b\u7279\u5b9a\u7684\u8d44\u6e90\u4e0d\u5141\u8bb8\u4f7f\u7528\uff0c\u4e5f\u5373\u5ba2\u6237\u7aef\u7684\u8bf7\u6c42\u88ab\u6e90\u7ad9\u62d2\u7edd\u4e86\u3002 414 \u8868\u793a\u8bf7\u6c42\u7684 URI \u8fc7\u957f\uff0c\u6e90\u7ad9\u65e0\u6cd5\u5904\u7406\u65f6\u8fd4\u56de\u6b64\u4ee3\u7801\u3002 416 \u5ba2\u6237\u7aef\u5305\u542b\u4e86\u4e00\u4e2a\u6e90\u7ad9\u65e0\u6cd5\u6ee1\u8db3\u7684 Range \u5934\u4fe1\u606f\u7684\u8bf7\u6c42\u3002 500 \u6e90\u7ad9\u9047\u5230\u4e86\u4e00\u4e2a\u672a\u66fe\u9047\u5230\u7684\u9519\u8bef\uff08\u5185\u90e8\u670d\u52a1\u5668\u9519\u8bef\uff09\uff0c\u5bfc\u81f4\u65e0\u6cd5\u5b8c\u6210\u5bf9\u8bf7\u6c42\u7684\u5904\u7406\u3002 501 \u6e90\u7ad9\u4e0d\u652f\u6301\u5ba2\u6237\u7aef\u8bf7\u6c42\u4e2d\u6240\u8981\u6c42\u7684\u529f\u80fd\u65f6\u8fd4\u56de\u6b64\u4ee3\u7801\u3002 502 \u6e90\u7ad9\u4f5c\u4e3a\u7f51\u5173\u6216\u8005\u4ee3\u7406\u670d\u52a1\u5668\u5c1d\u8bd5\u6267\u884c\u8bf7\u6c42\u65f6\uff0c\u4ece\u8fdc\u7aef\u670d\u52a1\u5668\u63a5\u6536\u5230\u9519\u8bef\u6216\u8005\u65e0\u6548\u7684\u8bf7\u6c42\u3002\u4e5f\u5373\u9519\u8bef\u7684\u7f51\u5173\u3002 503 \u7531\u4e8e\u4e34\u65f6\u7684\u670d\u52a1\u5668\u7ef4\u62a4\u6216\u8005\u8fc7\u8f7d\uff0c\u6e90\u7ad9\u5f53\u524d\u65e0\u6cd5\u5904\u7406\u8bf7\u6c42\u3002 504 \u6e90\u7ad9\u4f5c\u4e3a\u7f51\u5173\u6216\u8005\u4ee3\u7406\u670d\u52a1\u5668\u5c1d\u8bd5\u6267\u884c\u8bf7\u6c42\u65f6\uff0c\u672a\u80fd\u53ca\u65f6\u4ece\u8fdc\u7aef\u670d\u52a1\u7f51\u6536\u5230\u54cd\u5e94\u3002\u4e5f\u5373\u7f51\u5173\u8d85\u65f6\u3002 \u914d\u7f6e\u5f15\u5bfc \u767b\u9646 CDN \u63a7\u5236\u53f0 \uff0c\u4f9d\u6b21\u8fdb\u5165\uff1a\u670d\u52a1\u7ba1\u7406 > \u529f\u80fd\u914d\u7f6e > \u8bbf\u95ee\u63a7\u5236 > \u81ea\u5b9a\u4e49\u9875\u9762\uff0c\u5728\u6b64\u680f\u76ee\u4e0b\u53ef\u8fdb\u884c\u76f8\u5e94\u8bbe\u7f6e\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u7b2c\u4e00\u6b65 \u70b9\u51fb\u3010\u7ba1\u7406\u3011\u6309\u94ae\u8fdb\u5165\u914d\u7f6e\u9762\u677f\uff1a \u7b2c\u4e8c\u6b65 \u70b9\u51fb\u53f3\u4e0a\u89d2\u7684\u3010\u6dfb\u52a0\u89c4\u5219\u3011\uff0c\u8fdb\u5165\u89c4\u5219\u914d\u7f6e\u754c\u9762\uff1a \u5728\u89c4\u5219\u914d\u7f6e\u9875\u9762\uff0c\u914d\u7f6e\u9879\u5305\u62ec\uff1a\u9519\u8bef\u6765\u6e90\u3001\u5339\u914d\u7c7b\u578b\u3001\u54cd\u5e94\u5730\u5740\u3002\u9700\u8981\u6ce8\u610f\u7684\u662f\uff1a\u54cd\u5e94\u5730\u5740\u5fc5\u987b\u8981\u586b\u5199 URI\uff0c\u4f8b\u5982\uff1a /custom/error-page.html \u81ea\u5b9a\u4e49\u9875\u9762\u7684\u8d44\u6e90\u6240\u7ed1\u5b9a\u7684\u57df\u540d\u5fc5\u987b\u662f\u8bbf\u95ee\u57df\u540d\uff0c\u5426\u5219\u4f1a\u8bbf\u95ee\u5230\u9519\u8bef\u7684\u4f4d\u7f6e\uff0c\u4e5f\u5373\uff1a\u5f53\u5ba2\u6237\u7aef\u8bf7\u6c42\u4e3a\uff1a https://www.example.com/index.html \u5f53\u89e6\u53d1\u9632\u76d7\u94fe\u89c4\u5219\u4e4b\u540e\uff0c\u4f1a 302 \u8df3\u8f6c\uff08\u4ec5\u652f\u6301\u9519\u8bef\u6765\u6e90\u4e3a\u6e90\u7ad9\u7684\u60c5\u51b5\uff0c\u9519\u8bef\u6765\u6e90\u4e8e CDN \u65f6\uff0c\u4f1a\u76f4\u63a5\u53bb\u8bf7\u6c42\u9519\u8bef\u9875\u9762\uff0c\u4e0d\u4f1a\u6709 302 \u8df3\u8f6c\u8fc7\u7a0b\uff09\u5230\uff1a https://www.example.com/custom/error-page.html \u4e5f\u5373\u8bf7\u6c42\u7684\u8d44\u6e90\u548c\u81ea\u5b9a\u4e49\u9519\u8bef\u9875\u9762\u5fc5\u987b\u5c5e\u4e8e\u540c\u4e00\u6e90\u7ad9\uff0c\u5e76\u4e14\u5c5e\u4e8e\u540c\u4e00\u52a0\u901f\u57df\u540d\u3002 \u7b2c\u4e09\u6b65 \u5728\u914d\u7f6e\u7ba1\u7406\u754c\u9762\uff0c\u53ef\u4ee5\u7f16\u8f91\u3001\u5220\u9664\u548c\u67e5\u770b\u914d\u7f6e\u89c4\u5219\uff0c\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u786e\u4fdd\u914d\u7f6e\u7684\u89c4\u5219\u6ca1\u6709\u95ee\u9898\u4e4b\u540e\uff0c\u70b9\u51fb\u3010\u786e\u5b9a\u3011\u6309\u94ae\u5373\u53ef\u4fdd\u5b58\u914d\u7f6e\u3002 \u6ce8\u610f\u4e8b\u9879 \u81ea\u5b9a\u4e49\u9875\u9762\u5c5e\u4e8e\u7528\u6237\u6e90\u7ad9\u6258\u7ba1\u7684\u8d44\u6e90\uff0c\u540c\u5e38\u89c4\u9875\u9762\u548c\u8d44\u6e90\u4e00\u6837\uff0c\u4f1a\u6309\u7167\u6b63\u5e38\u7684 CDN \u52a0\u901f\u5206\u53d1\u8ba1\u8d39\u3002 \u81ea\u5b9a\u4e49\u9875\u9762\u7684\u8d44\u6e90\u6240\u7ed1\u5b9a\u7684\u57df\u540d\u5fc5\u987b\u662f\u8bbf\u95ee\u57df\u540d\uff0c\u5426\u5219\u4e0d\u4f1a\u751f\u6548\uff0c\u4e5f\u5373\uff1a\u5f53\u5ba2\u6237\u7aef\u8bf7\u6c42\u4e3a\uff1ahttps://www.example.com/index.html \uff1b\u5f53\u89e6\u53d1\u9632\u76d7\u94fe\u89c4\u5219\u4e4b\u540e\uff0cCDN \u4f1a\u76f4\u63a5\u8fd4\u56de\u8be5\u9875\u9762\uff1ahttps://www.example.com/custom/403.html\u3002\u6b64\u65f6\u5728 CDN \u81ea\u5b9a\u4e49\u9875\u9762\u89c4\u5219\u7684\u54cd\u5e94\u5730\u5740\u9879\u586b\u5199 /custom/403.html \u5373\u53ef\u3002 \u5728\u4f18\u5148\u7ea7\u65b9\u9762\uff0c\u81ea\u5b9a\u4e49\u9875\u9762\u7684\u4f18\u5148\u7ea7\u4f1a\u9ad8\u4e8e\u81ea\u5b9a\u4e49\u63d0\u793a\u56fe\u529f\u80fd\u3002 \u5f53\u9519\u8bef\u6765\u6e90\u662f CDN \u65f6\uff0c\u6b64\u65f6\u60a8\u7684\u81ea\u5b9a\u4e49\u9875\u9762\u662f HTML \u9875\u9762\uff0c\u9700\u8981\u786e\u4fdd\u8be5\u9875\u9762\u4e3a\u5355\u9875\u9762\uff0c\u5982\u679c\u9700\u8981\u5d4c\u5165\u56fe\u7247\uff0c\u6211\u4eec\u5efa\u8bae\u5c06\u56fe\u7247\u901a\u8fc7 base64 \u7684\u65b9\u5f0f\u5c06 SVG \u56fe\u7247\u5d4c\u5165\u5230 HTML \u7f51\u9875\u4e2d\u3002\u5f53\u7136\uff0c\u60a8\u4e5f\u53ef\u4ee5\u5c06\u56fe\u7247\u7b49\u8d44\u6e90\u4f7f\u7528\u5916\u94fe\u7684\u65b9\u5f0f\u6765\u5d4c\u5165\u3002 6.13 \u81ea\u5b9a\u4e49\u63d0\u793a\u56fe \u00b6 \u652f\u6301\u81ea\u5b9a\u4e49\u9519\u8bef\u72b6\u6001\u8bbe\u7f6e\uff0c\u76ee\u524d\u652f\u6301 403\u3001404\u3001405 \u9519\u8bef\u7801\u81ea\u5b9a\u4e49\u63d0\u793a\u56fe\u7684\u8bbe\u7f6e\u3002\u5982\u672a\u8bbe\u7f6e\uff0c\u5219\u9ed8\u8ba4\u9075\u5faa\u53c8\u62cd\u4e91 CDN \u670d\u52a1\u9ed8\u8ba4\u9519\u8bef\u72b6\u6001\u63d0\u793a\u56fe\u3002 \u914d\u7f6e\u5f15\u5bfc \u767b\u9646 CDN \u63a7\u5236\u53f0 \uff0c\u4f9d\u6b21\u8fdb\u5165\uff1a\u670d\u52a1\u7ba1\u7406 > \u529f\u80fd\u914d\u7f6e > \u8bbf\u95ee\u63a7\u5236 > \u81ea\u5b9a\u4e49\u63d0\u793a\u56fe\uff0c\u5728\u6b64\u680f\u76ee\u4e0b\u53ef\u8fdb\u884c\u76f8\u5e94\u8bbe\u7f6e\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff1a 403 \u63d0\u793a\u56fe \u5f53\u7528\u6237\u8bbe\u7f6e\u4e86\u4f8b\u5982 IP \u7981\u7528\u3001Referer \u7b49\u9632\u76d7\u94fe\u914d\u7f6e\u5e76\u4e14\u5f53\u524d\u7684\u8bf7\u6c42\u4e0e\u89c4\u5219\u4e0d\u5339\u914d\u65f6\uff0c\u5373\u4f1a\u54cd\u5e94 403 \u7ed9\u5ba2\u6237\u7aef\uff0c\u8868\u793a\u8be5\u6b21\u8bf7\u6c42\u88ab\u7981\u6b62\u3002\u53e6\u5916\uff0c\u82e5\u8be5\u670d\u52a1\u8bbe\u7f6e\u4e86\u81ea\u5b9a\u4e49 403 \u63d0\u793a\u56fe\uff0c\u90a3\u4e48\u6b64\u7c7b\u60c5\u51b5\u4e0b\u5c31\u4f1a\u54cd\u5e94\u4e00\u4e2a 302 \u8df3\u8f6c\u5230\u76f8\u5e94\u7684\u56fe\u7247\u3002 404 \u63d0\u793a\u56fe \u5f53\u8bf7\u6c42\u7684\u6587\u4ef6\u4e0d\u5b58\u5728\u65f6\uff0c\u4f1a\u54cd\u5e94 404 \u72b6\u6001\u7801\uff0c\u53ef\u901a\u8fc7\u81ea\u5b9a\u4e49\u63d0\u793a\u56fe\u6765\u5c55\u793a\u3002 405 \u63d0\u793a\u56fe \u6b63\u5e38\u4f7f\u7528\u4e2d\u7684\u670d\u52a1\uff0c\u82e5\u88ab\u4eba\u4e3a\u5730\u8bbe\u7f6e\u4e3a\u7981\u6b62\u5916\u94fe\uff0c\u6b64\u65f6\u8bbf\u95ee\u5c31\u4f1a\u54cd\u5e94 405 \u72b6\u6001\u7801\u3002\u540c\u6837\uff0c405 \u4e5f\u652f\u6301\u81ea\u5b9a\u4e49\u63d0\u793a\u56fe\u8bbe\u7f6e\u3002 \u6ce8\u610f\u4e8b\u9879 \u82e5\u6b64\u5904\u672a\u8bbe\u7f6e\u4efb\u4f55\u81ea\u5b9a\u4e49\u63d0\u793a\u56fe\uff0cCDN \u670d\u52a1\u4f1a\u9ed8\u8ba4\u54cd\u5e94\u4e00\u4e2a\u9519\u8bef\u72b6\u6001\u7801\u63d0\u793a\u56fe\uff1b \u6b64\u5904\u81ea\u5b9a\u4e49\u63d0\u793a\u56fe\u7684\u6587\u4ef6\u5927\u5c0f\u9650\u5236\u5728 30KB \u4ee5\u5185\uff1b 7.\u56fe\u7247\u5904\u7406 \u00b6 7.1 \u95f4\u9694\u6807\u8bc6\u7b26 \u00b6 \u529f\u80fd\u8bf4\u660e \u7528\u4e8e\u5206\u9694\u8bbf\u95ee\u5730\u5740\u4e2d\u7684\u6587\u4ef6\u8def\u5f84\u4e0e\u5904\u7406\u53c2\u6570\u3001\u7248\u672c\u540d\u79f0\u3002\u5982\uff1ahttp://abc.b0.upaiyun.com/pic.jpg!hi\uff0c pic.jpg \u4e3a\u6587\u4ef6\u8def\u5f84\uff0c hi \u4e3a\u7248\u672c\u540d\u79f0\uff0c\u6807\u8bc6\u7b26\u53ef\u4e3a\u534a\u89d2\u5b57\u7b26\uff1a\u201c!\u201d\uff0c\u201c-\u201d\uff0c\u201c_\u201d \u4e09\u79cd\uff0c\u53ef\u4ee5\u5728\u7ba1\u7406\u754c\u9762\u4e2d\u8fdb\u884c\u66f4\u6539\u3002 \u914d\u7f6e\u5f15\u5bfc \u767b\u9646 CDN \u63a7\u5236\u53f0 \uff0c\u4f9d\u6b21\u8fdb\u5165\uff1a\u670d\u52a1\u7ba1\u7406 > \u529f\u80fd\u914d\u7f6e > \u56fe\u7247\u5904\u7406 > \u95f4\u9694\u6807\u8bc6\u7b26\uff0c\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u70b9\u51fb\u754c\u9762\u53f3\u8fb9\u7684\u3010\u7ba1\u7406\u3011\u6309\u94ae\u5373\u53ef\u8bbe\u7f6e\uff0c\u8bbe\u7f6e\u754c\u9762\u5982\u4e0b\uff1a \u5728\u8be5\u914d\u7f6e\u754c\u9762\uff0c\u53ef\u4ee5\u9009\u62e9\u611f\u53f9\u53f7\uff08!\uff09\u3001\u4e2d\u5212\u7ebf\uff08-\uff09\u3001\u4e0b\u5212\u7ebf\uff08_\uff09\u4f5c\u4e3a\u95f4\u9694\u6807\u8bc6\u7b26\uff0c\u9ed8\u8ba4\u4e3a\u611f\u53f9\u53f7\uff08!\uff09\u3002 \u6ce8\u610f\u4e8b\u9879 \u66f4\u6362\u95f4\u9694\u6807\u5fd7\u7b26\u540e\uff0c\u4e4b\u524d\u81ea\u5b9a\u4e49\u7248\u672c\u7684\u8bbf\u95ee\u5730\u5740\u90fd\u5c06\u5931\u6548\uff0c\u9700\u8981\u4f7f\u7528\u65b0\u8bbe\u7f6e\u7684\u95f4\u9694\u6807\u5fd7\u7b26\u624d\u80fd\u4fdd\u8bc1\u6b63\u5e38\u8bbf\u95ee\uff1b \u4e3a\u907f\u514d\u81ea\u5b9a\u4e49\u7248\u672c\u8bbf\u95ee\u51fa\u9519\uff0c\u9009\u62e9\u7684\u95f4\u9694\u6807\u8bc6\u7b26\u4e0d\u80fd\u7528\u4e8e\u6587\u4ef6\u6216\u76ee\u5f55\u540d\u4e2d\u3002 7.2 \u81ea\u5b9a\u4e49\u7248\u672c \u00b6 \u529f\u80fd\u8bf4\u660e \u9488\u5bf9\u4f7f\u7528 CDN \u670d\u52a1\u6216\u8005\u4e91\u5b58\u50a8\u670d\u52a1\u7684\u7528\u6237\uff0c\u53ef\u4ee5\u4f7f\u7528\u81ea\u5b9a\u4e49\u7248\u672c\u4f5c\u56fe\uff0c\u5177\u4f53\u4f7f\u7528\u683c\u5f0f\u53c2\u89c1\u5982\u4e0b\u8868\u683c\u3002 \u9ed8\u8ba4\u7ed1\u5b9a\u57df\u540d\uff1aimage.upyun.com \u539f\u56fe\u8def\u5f84\uff1a/pic.jpg \u95f4\u9694\u6807\u8bc6\u7b26\uff1a! \u7f29\u7565\u56fe\u7248\u672c\u540d\u79f0\uff1asmall \u56fe\u7247\u4fe1\u606f\u7248\u672c\u540d\u79f0\uff1aexif \u7f29\u7565\u56fe\u8bbf\u95ee\u5730\u5740\uff1ahttp://image.upyun.com/pic.jpg!small \u539f\u56fe EXIF \u4fe1\u606f\u8bbf\u95ee\u5730\u5740\uff1ahttp://image.upyun.com/pic.jpg!exif \u81ea\u5b9a\u4e49\u7248\u672c\u4f7f\u7528\u683c\u5f0f\uff1a http://\u7ed1\u5b9a\u57df\u540d/\u539f\u56fe\u8def\u5f84+\u95f4\u9694\u6807\u8bc6\u7b26+\u81ea\u5b9a\u4e49\u7248\u672c\u540d\u79f0\u3002 \u8be6\u7ec6\u4ecb\u7ecd\u53c2\u89c1 \u56fe\u7247\u5904\u7406 \u3002 \u914d\u7f6e\u5f15\u5bfc \u767b\u9646 CDN \u63a7\u5236\u53f0 \uff0c\u4f9d\u6b21\u8fdb\u5165\uff1a\u670d\u52a1\u7ba1\u7406 > \u529f\u80fd\u914d\u7f6e > \u56fe\u7247\u5904\u7406 > \u81ea\u5b9a\u4e49\u7248\u672c\uff0c\u5728\u6b64\u680f\u76ee\u4e0b\u53ef\u8fdb\u884c\u76f8\u5e94\u8bbe\u7f6e\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff1a 1.\u521b\u5efa\u7f29\u7565\u56fe\u7248\u672c \u521b\u5efa\u7f29\u7565\u56fe\u7248\u672c\uff0c\u586b\u5199\u57fa\u672c\u4fe1\u606f\u3002 \u6839\u636e\u8981\u6c42\uff0c\u8bbe\u7f6e\u6c34\u5370\u53c2\u6570\uff0c\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u6839\u636e\u8981\u6c42\uff0c\u8bbe\u7f6e\u8f93\u51fa\u4fe1\u606f\uff0c\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u6700\u7ec8\u7684\u8bbf\u95ee URL \u53ef\u4e3a\uff1a http://test.example.com/test.jpg!upyun123 \u5176\u4e2d upyun123 \u4e3a\u81ea\u5b9a\u4e49\u7248\u672c\u3002 2.\u521b\u5efa\u56fe\u7247\u4fe1\u606f\u7248\u672c \u56fe\u7247\u4fe1\u606f\u7248\u672c\u5185\u5bb9\u5305\u62ec\uff1a\u56fe\u7247\u57fa\u672c\u4fe1\u606f\uff08\u56fe\u7247\u5bbd\u5ea6\u3001\u9ad8\u5ea6\u3001\u5e27\u6570\u3001\u683c\u5f0f\uff09\u548c EXIF \u4fe1\u606f\uff0c\u5177\u4f53\u8bbe\u7f6e\u53c2\u89c1\u4e0b\u56fe\uff1a \u586b\u5199\u7248\u672c\u540d\u79f0\uff0c\u70b9\u51fb\u53f3\u4e0b\u89d2\u7684\u3010\u786e\u5b9a\u3011\u6309\u94ae\u5373\u53ef\u3002 8.\u5176\u4ed6\u529f\u80fd \u00b6 8.1 \u6587\u4ef6\u53e6\u5b58\u4e3a \u00b6 \u529f\u80fd\u8bf4\u660e \u53c8\u62cd\u4e91 CDN \u670d\u52a1\u652f\u6301\u5bf9\u54cd\u5e94\u5934 Content-Disposition \u5b57\u6bb5\u7684\u7279\u6b8a\u8bbe\u7f6e\uff0c\u4e5f\u5373\u5728\u8bf7\u6c42 URL \u4e2d\u52a0\u5165 _upd \u53c2\u6570\u53ef\u5bf9 Content-Disposition \u8fdb\u884c\u7279\u6b8a\u5316\u914d\u7f6e\u3002\u901a\u8fc7\u5bf9\u8be5\u53c2\u6570\u7684\u914d\u7f6e\u5c31\u53ef\u4ee5\u5f3a\u5236\u6d4f\u89c8\u5668\u89e6\u53d1\u4e0b\u8f7d\u884c\u4e3a\uff0c\u540c\u65f6\u8be5\u53c2\u6570\u7684\u503c\u4f1a\u4f5c\u4e3a\u6587\u4ef6\u4e0b\u8f7d\u540e\u4fdd\u5b58\u5230\u672c\u5730\u7684\u6587\u4ef6\u540d\u3002\u7279\u522b\u5730\uff0c\u5f53\u5176\u503c\u4e3a true \u65f6\uff0c\u4fdd\u6301\u539f\u6587\u4ef6\u540d\u4e0d\u53d8\u3002 \u5982\u4f55\u4f7f\u7528 \u793a\u4f8b\u4e00\uff1a \u8bf7\u6c42\u53c2\u6570\u4e2d\u52a0\u5165 \u201c_upd=true\u201d \uff0c\u4ee3\u8868\u6dfb\u52a0\u54cd\u5e94\u5934\u4e3a\uff1a Content-Disposition: attachment $ curl http://upyun-assets.b0.upaiyun.com/docs/cdn/upyun-cdn-architecture.png?_upd=true -I > HTTP/1.1 200 OK > Content-Type: image/png > Content-Length: 57371 > ... > Accept-Ranges: bytes > Content-Disposition: attachment; \u793a\u4f8b\u4e00\uff1a \u8bf7\u6c42\u53c2\u6570\u4e2d\u52a0\u5165 \u201c_upd=abc.png\u201d\uff0c\u4ee3\u8868\u6dfb\u52a0\u54cd\u5e94\u5934\u4e3a\uff1a Content-Disposition: attachment; filename=\"abc.png\" $ curl http://upyun-assets.b0.upaiyun.com/docs/cdn/upyun-cdn-architecture.png?_upd=abc.png -I > HTTP/1.1 200 OK > Content-Type: image/png > Content-Length: 57371 > ... > Accept-Ranges: bytes > Content-Disposition: attachment; filename=\"abc.png\" \u6ce8\u610f\u4e8b\u9879 \u7279\u522b\u5730\uff0c \u53c2\u6570\u8ddf\u968f \u5f00\u542f\u7684\u60c5\u51b5\u4e0b\uff0c\u6b64\u53c2\u6570\u65e0\u6548\u3002 8.2 \u4f20\u9012\u6700\u7ec8\u7528\u6237 IP \u00b6 \u529f\u80fd\u8bf4\u660e \u53c8\u62cd\u4e91 CDN \u56de\u5ba2\u6237\u6e90\u7684\u65f6\u5019\u4f1a\u5e26\u4e0a X-Real-IP \u548c X-Forwarded-For \u7684\u8bf7\u6c42\u5934\u4e0b\u53bb\uff0c\u503c\u4e3a\u7528\u6237\u5b9e\u9645\u8bbf\u95ee CDN \u7684\u6765\u6e90 IP \u5730\u5740\u3002\u7279\u522b\u5730\uff0c\u4e3a\u4e86\u517c\u5bb9\u90e8\u5206\u670d\u52a1\u7aef\u7a0b\u5e8f\uff0c\u6211\u4eec\u989d\u5916\u8fd8\u63d0\u4f9b\u4e86 Client-IP \u8bf7\u6c42\u5934\u7684\u652f\u6301\uff0c\u5176\u503c\u548c X-Real-IP \u3001 X-Forwarded-For \u76f8\u540c\u3002 \u5982\u4f55\u4f7f\u7528 1\u3001X-Real-IP \u4f20\u9012\u7528\u6237 IP \u4f7f\u7528\u8be5\u65b9\u5f0f\u4f20\u9012\u6700\u7ec8\u7528\u6237 IP \uff0c\u9700\u8981\u670d\u52a1\u7aef\u4ee3\u7801\u8fdb\u884c\u4e00\u4e9b\u6539\u9020\uff0c\u7f51\u7ad9\u9700\u8981\u6839\u636e\u4f7f\u7528\u7f16\u7a0b\u8bed\u8a00\u7684\u4e0d\u540c\uff0c\u4fee\u6539\u76f8\u5e94\u7684\u4ee3\u7801\u6a21\u5757\uff0c\u624d\u53ef\u4ee5\u4f20\u9012\u6700\u7ec8\u7528\u6237 IP\u3002\u4ee3\u7801\u793a\u4f8b\u5982\u4e0b\uff1a \u793a\u4f8b\u4e00\uff1aPHP \u4ee3\u7801\u00b6 <?php $ip = $_SERVER[\"HTTP_X_REAL_IP\"]; echo $ip; ?> \u793a\u4f8b\u4e8c\uff1a Nginx \u914d\u7f6e\u00b6 server { listen 80; add_header X-Real-IP $http_x_real_ip; } 2\u3001X-Forward-For \u4f20\u9012\u7528\u6237 IP \u56de\u6e90\u8bf7\u6c42\u5934\u4f1a\u9ed8\u8ba4\u4f20\u9012 X-Forwarded-For \u7684\u503c\uff0c\u7528\u6237\u7f51\u7ad9\u65e0\u9700\u4efb\u4f55\u6539\u9020\u3002 \u6ce8\u610f\u4e8b\u9879 1\u3001\u65b0\u589e\u52a0\u901f\u670d\u52a1\u65f6\u6211\u4eec\u4f1a\u9ed8\u8ba4\u4f7f\u7528 X-Real-IP \u548c X-Forwarded-For \u65b9\u5f0f\uff0c\u7f51\u7ad9\u53ea\u9700\u8981\u6309\u7167 \u201c\u5982\u4f55\u4f7f\u7528\u201d \u7ae0\u8282\u4e2d\uff0c\u5bf9\u539f\u5148\u7684\u7528\u6237 IP \u83b7\u53d6\u4ee3\u7801\u8fdb\u884c\u66ff\u6362\u5373\u53ef\uff1b 2\u3001\u7531\u4e8e X-Real-IP \u662f\u53c8\u62cd\u4e91 CDN \u670d\u52a1\u7279\u6709\u7684\u56de\u6e90\u8bf7\u6c42\u5934 \uff0c\u6545\u7ec8\u6b62 CDN \u540e\uff0c\u7f51\u7ad9\u9700\u5c06\u83b7\u53d6\u7528\u6237 IP \u7684\u4ee3\u7801\u4fee\u6539\u4e3a\u539f\u59cb\u4ee3\u7801\uff1b 3\u3001\u5728\u9009\u62e9\u4f7f\u7528 X-Forwarded-For \u8fdb\u884c\u6700\u7ec8\u7528\u6237 IP \u4f20\u9012\u65f6 \uff0c X-Real-IP \u3001 Client-IP \u4e5f\u662f\u540c\u65f6\u4f20\u9012\u7684\uff1b 9.\u9ed8\u8ba4\u9519\u8bef\u7801 \u00b6 \u9ed8\u8ba4\u9519\u8bef\u7801\u4ecb\u7ecd \u9488\u5bf9\u9519\u8bef\u72b6\u6001\uff08\u8fd9\u91cc\u7279\u6307 CDN \u4e1a\u52a1\u7aef\u4ee5\u53ca\u56de\u6e90\u7ad9\u76f8\u5173\u9519\u8bef\uff09\uff0cCDN \u9ed8\u8ba4\u8fd4\u56de JSON \u4e32\u7684\u5f62\u5f0f\uff0c\u683c\u5f0f\u4e3a\uff1a { \"code\": \"xxxxxxxx\", \"msg\": \"xxxxxxxxxxxxxxx\" } \u5176\u4e2d code \u4ee3\u8868\u9519\u8bef\u7801\uff0c\u4e3a 8 \u4f4d\u6570\u5b57\u7ec4\u6210\uff0c\u4f8b\u5982\uff1a 40310012 \u4ee3\u8868\u89e6\u53d1\u4e86 IP \u9ed1\u540d\u5355\u89c4\u5219\uff1b msg \u4ee3\u8868\u9519\u8bef\u63cf\u8ff0\uff0c\u4f8b\u5982\uff1a remote address is forbidden \uff0c\u4e5f\u5373\u5ba2\u6237\u7aef IP \u88ab\u7981\u6b62\u8bbf\u95ee\u3002\u60a8\u53ef\u4ee5\u6839\u636e CDN \u8fd4\u56de\u7684\u9519\u8bef\u7801\u548c\u63cf\u8ff0\u6765\u5224\u65ad\u89e6\u53d1\u4e86\u4f55\u79cd\u89c4\u5219\uff0c\u8fdb\u800c\u66f4\u65b9\u4fbf\u7684\u5b9a\u4f4d\u95ee\u9898\u3002 \u9ed8\u8ba4\u9519\u8bef\u7801\u4e00\u89c8\u8868 \u73b0\u5c06 CDN \u5e73\u53f0\u90e8\u5206\u53ef\u5f00\u653e\u7684\u9519\u8bef\u7801\u8fdb\u884c\u5982\u4e0b\u5f52\u7c7b\uff1a 1.\u8bbf\u95ee\u63a7\u5236\u76f8\u5173 \u5e8f\u53f7 \u9519\u8bef\u7801\uff08code\uff09 \u9519\u8bef\u63cf\u8ff0(msg) \u53d1\u751f\u4e86\u4ec0\u4e48 1 40310001 invalid url URL \u88ab\u7981\u6b62\u8bbf\u95ee 2 40310002 region is forbidden \u89e6\u53d1\u4e86\u5730\u533a\u8bbf\u95ee\u9650\u5236\u89c4\u5219 3 40310003 too many requests \u89e6\u53d1\u4e86 IP \u9891\u7387\u9650\u5236\u89c4\u5219 4 40310011 invalid User-Agent header \u89e6\u53d1\u4e86 User-Agent \u9632\u76d7\u94fe\u89c4\u5219 5 40310012 remote address is forbidden \u89e6\u53d1\u4e86 IP \u9ed1\u767d\u540d\u5355\u89c4\u5219 6 40310013 invalid user token \u89e6\u53d1\u4e86 Token \u9632\u76d7\u94fe\u89c4\u5219 7 40310014 invalid Referer header \u89e6\u53d1\u4e86 Referer \u9632\u76d7\u94fe\u89c4\u5219 8 40310015 referer uri is forbidden \u89e6\u53d1\u4e86 Referer URI \u9632\u76d7\u94fe\u89c4\u5219 9 40310020 invalid authentication response body \u9274\u6743\u670d\u52a1\u5668\u8fd4\u56de\u7684 body \u5185\u5bb9\u4e0d\u5408\u6cd5\uff0c\u5bfc\u81f4\u9274\u6743\u5931\u8d25 10 40310021 invalid authentication response status \u9274\u6743\u670d\u52a1\u5668\u8fd4\u56de\u7684\u72b6\u6001\u7801\u4e0d\u5408\u6cd5\uff0c\u5bfc\u81f4\u9274\u6743\u5931\u8d25 11 40310022 cyclic authentication requests \u9274\u6743\u670d\u52a1\u5668\u5730\u5740\u5728\u53c8\u62cd\u4e91\u8fdb\u884c\u4e86 CDN \u52a0\u901f\uff0c\u5bfc\u81f4\u4e86\u5faa\u73af\u8bf7\u6c42 12 50310020 authentication service unavailable \u9274\u6743\u670d\u52a1\u5668\u4e0d\u53ef\u7528 13 40110910 authentication fails \u56de\u6e90\u9274\u6743\u5931\u8d25 14 40310006 (api) request body too large \u901a\u8fc7 API \u63a5\u53e3\u4e0a\u4f20\u7684\u6587\u4ef6 body \u592a\u5927 15 41310001 request body too large \u8bf7\u6c42\u7684 body \u5927\u5c0f\u8d85\u8fc7\u9650\u5236 16 40010030 multiple Content-Type header \u89e6\u53d1\u4e86 WAF \u89c4\u5219\uff0c\u8bf7\u6c42\u5934\u4e2d\u542b\u6709\u591a\u4e2a Content-Type \u5934\u90e8 17 40310031 too large form \u89e6\u53d1\u4e86 WAF \u89c4\u5219\uff0cform \u8868\u5355\u592a\u5927 18 40310032 waf protection rules triggered \u89e6\u53d1\u4e86 WAF \u89c4\u5219 19 xxx10999 edge rule triggered \u89e6\u53d1\u8fb9\u7f18\u89c4\u5219\uff0cxxx \u7279\u6307\u72b6\u6001\u7801 20 40510004 invisible domain \u57df\u540d\u89e6\u53d1\u4e86\u654f\u611f\u4fe1\u606f\u88ab\u7981\u6b62\u8bbf\u95ee 2.HTTP \u53ca\u5e73\u53f0\u89c4\u8303\u76f8\u5173 \u5e8f\u53f7 \u9519\u8bef\u7801\uff08code\uff09 \u9519\u8bef\u63cf\u8ff0(msg) \u53d1\u751f 1 41610001 multiple Range header \u591a\u4e2a Range \u5934 2 41610002 multiple sections in Range header Range \u8bf7\u6c42\u4e2d\u5b58\u5728\u591a\u6bb5\u8bf7\u6c42\u8303\u56f4 3 41610003 illegal range portion Range \u8bf7\u6c42\u8303\u56f4\u975e\u6cd5 4 40010040 absent Host header \u8bf7\u6c42\u4e2d\u7f3a\u5c11 Host \u5934\u90e8\uff0c\u8fd4\u56de\u5de5\u4fe1\u90e8\u9519\u8bef\u9875\u9762 5 40010041 bucket not found \u672a\u7ed1\u5b9a\u52a0\u901f\u57df\u540d\u6216\u8005\u670d\u52a1\u4e0d\u5b58\u5728\uff0c\u8fd4\u56de\u5de5\u4fe1\u90e8\u9519\u8bef\u9875\u9762 6 40510001 invisible bucket \u670d\u52a1\uff08\u7a7a\u95f4\uff09\u4e3a\u5173\u95ed\u72b6\u6001 7 41210001 last-modified or Etag illegal Last-Modified \u5934\u90e8\u6216\u8005 ETag \u5934\u90e8\u975e\u6cd5 8 40310007 cyclic request \u89e6\u53d1\u4e86\u5faa\u73af\u8bf7\u6c42\u9650\u5236\u7b56\u7565 9 50310000 unknown error \u5176\u4ed6\u672a\u77e5\u7684\u9519\u8bef 3.\u5e38\u89c1\u56de\u6e90\u9519\u8bef \u5e8f\u53f7 \u9519\u8bef\u7801\uff08code\uff09 \u9519\u8bef\u63cf\u8ff0(msg) \u53d1\u751f\u4e86\u4ec0\u4e48 1 403xx002 response body too large \u56de\u6e90\u54cd\u5e94\u4f53\u592a\u5927 2 502xx001 no valid source address \u6ca1\u6709\u5408\u6cd5\u7684\u56de\u6e90\u5730\u5740 3 502xx002 can't connect to upyun fs \u65e0\u6cd5\u8fde\u63a5 upyun \u5b58\u50a8 4 503xx001 resolve domain failed \u57df\u540d\u89e3\u6790\u9519\u8bef 5 503xx002 resolve domain timeout \u57df\u540d\u89e3\u6790\u8d85\u65f6 6 503xx004 connection refused \u8fde\u63a5\u88ab\u62d2\u7edd 7 503xx005 connection reset by peer \u8fde\u63a5\u88ab\u6e90\u7ad9\u91cd\u7f6e 8 503xx006 handshake failed \u63e1\u624b\u5931\u8d25 9 503xx007 client abort \u5ba2\u6237\u7aef\u53d6\u6d88\u8fde\u63a5 10 503xx008 closed \u8fde\u63a5\u88ab\u5173\u95ed 11 503xx009 broken pipe \u8bfb\u53d6\u6570\u636e\u51fa\u73b0\u95ee\u9898 12 503xx010 unexpect end of stream \u672a\u77e5\u7684\u6e90\u7ad9\u54cd\u5e94\u7ed3\u675f 13 503xx015 certificate host mismatch SSL \u8bc1\u4e66\u5934\u4e0d\u5339\u914d 14 503xx016 self signed certificate SSL \u8bc1\u4e66\u4e3a\u81ea\u7b7e\u540d\u8bc1\u4e66 15 503xx017 certificate has expired SSL \u8bc1\u4e66\u8fc7\u671f 16 504xx001 connection timed out \u56de\u6e90\u8fde\u63a5\u8d85\u65f6 17 504xx002 connection timeout \u8fde\u63a5\u8d85\u65f6 18 504xx003 read timeout \u8bfb\u53d6\u6570\u636e\u8d85\u65f6 19 504xx004 send timeout \u53d1\u9001\u8bf7\u6c42\u8d85\u65f6 \u5176\u4e2d xx \u53ef\u80fd\u662f 00 \u3001 01 \u3001 02 \u3001 03 \u3001 04 \u3002 00 \u8868\u793a UNKNOWN \uff0c 01 \u8868\u793a\u53c8\u62cd\u4e91\u5b58\u50a8\uff0c 02 \u8868\u793a\u7528\u6237\u81ea\u4e3b\u6e90\uff0c 03 \u8868\u793a CDN \u4ee3\u7406\u5c42 \uff0c 04 \u8868\u793a \u4f5c\u56fe\u670d\u52a1 \u3002 \u5982\u4f55\u8fa8\u522b \u65b9\u5f0f\u4e00 \u5982\u679c\u60a8\u901a\u8fc7\u6d4f\u89c8\u5668\u8bbf\u95ee\uff0c\u60a8\u53ef\u4ee5\u901a\u8fc7\u6d4f\u89c8\u5668\u9875\u9762\u67e5\u770b\u5230\u4e00\u6bb5\u9519\u8bef\u4ee3\u7801\uff0c\u4f8b\u5982\uff1a {\"code\":\"40310002\",\"msg\":\"region is forbidden\"} \u5982\u4e0a\u9519\u8bef\u4ee3\u7801\u53ca\u63cf\u8ff0\u5219\u8bf4\u660e\u7528\u6237\u5728 CDN \u4fa7\u914d\u7f6e\u4e86\u5730\u533a\u8bbf\u95ee\u9650\u5236\u7b56\u7565\u3002 \u65b9\u5f0f\u4e8c \u901a\u8fc7 curl \u547d\u4ee4\u53ef\u4ee5\u770b\u5230 X-Error-Code \u54cd\u5e94\u5b57\u6bb5\uff0c\u5219\u53ef\u4ee5\u770b\u51fa\u89e6\u53d1\u4e86\u4f55\u79cd\u9519\u8bef\u3002 < HTTP/1.1 403 Forbidden < Server: marco/2.2 < Date: Fri, 18 May 2018 06:39:47 GMT < Content-Type: application/json < Connection: keep-alive < X-Error-Code: 40310002 < X-Request-Id: 6b947a5e14a252909acab1e55df121c2 < Content-Length: 47 < Via: M.pcw-cn-hkg-166 \u901a\u8fc7\u67e5\u770b X-Error-Code: 40310002 \uff0c\u53ef\u4ee5\u770b\u51fa\u89e6\u53d1\u4e86\u5730\u533a\u8bbf\u95ee\u9650\u5236\u89c4\u5219\u3002","title":"\u529f\u80fd\u914d\u7f6e"},{"location":"cdn/config/#1","text":"","title":"1.\u57df\u540d\u7ba1\u7406"},{"location":"cdn/config/#11","text":"\u529f\u80fd\u8bf4\u660e \u901a\u8fc7\u8be5\u6a21\u5757\uff0c\u53ef\u4ee5\u67e5\u770b\u670d\u52a1\u7684\u57fa\u672c\u4fe1\u606f\uff0c\u5305\u62ec\uff1a\u670d\u52a1\u540d\u79f0\u3001\u521b\u5efa\u65f6\u95f4\u3001\u670d\u52a1\u72b6\u6001\u3001\u5e94\u7528\u573a\u666f\u7b49\u76f8\u5173\u4fe1\u606f\u3002\u6b64\u5904\u53ef\u4ee5\u5feb\u901f\u83b7\u53d6\u670d\u52a1\u7684 CNAME \u5730\u5740\uff0c\u65b9\u4fbf\u8fdb\u884c CDN \u5207\u6362\u3002 \u67e5\u770b\u5f15\u5bfc \u767b\u9646 CDN \u63a7\u5236\u53f0 \uff0c\u8fdb\u5165\u300c\u57df\u540d\u7ba1\u7406\u300d\u529f\u80fd\u6a21\u5757\uff0c\u627e\u5230\u300c\u57fa\u672c\u4fe1\u606f\u300d\u4e00\u680f\uff0c\u5373\u53ef\u67e5\u8be2\u670d\u52a1\u57fa\u672c\u4fe1\u606f\uff0c\u5982\u4e0b\u56fe\u6240\u793a\uff1a","title":"1.1 \u57fa\u672c\u4fe1\u606f"},{"location":"cdn/config/#12","text":"\u529f\u80fd\u8bf4\u660e \u5728\u540c\u4e00\u4e2a\u670d\u52a1\u4e0b\u9762\uff0c\u5982\u679c\u56de\u6e90\u5730\u5740\u76f8\u540c\uff08 \u4e5f\u5373\u5171\u7528\u540c\u4e00\u4e2a\u6e90\u7ad9 \uff09\uff0c\u6b64\u65f6\u53ef\u4ee5\u7ed1\u5b9a\u591a\u4e2a\u81ea\u6709\u57df\u540d\u3002\u9664\u5e38\u89c4\u5f62\u5f0f\u7684\u57df\u540d\u5916\uff0c\u8fd8\u652f\u6301\u7ed1\u5b9a\u591a\u4e2a\u6cdb\u57df\u540d\uff0c\u6bd4\u5982\uff1a*.yourdomain.com\u3002\u7279\u522b\u5730\uff0c\u5176\u4e2d * \u6700\u591a\u652f\u6301\u5339\u914d 4 \u5c42\uff1a [\u221a] *.yourdomain.com => foo.yourdomain.com [\u221a] *.yourdomain.com => bar.yourdomain.com [\u221a] *.yourdomain.com => foo.bar.yourdomain.com [\u221a] *.yourdomain.com => foo.bar.baz.yourdomain.com [\u221a] *.yourdomain.com => foo.bar.baz.qux.yourdomain.com [x] *.yourdomain.com => foo.bar.baz.qux.quxx.yourdomain.com [\u221a] *.bar.yourdomain.com => foo.bar.yourdomain.com [\u221a] *.bar.yourdomain.com => baz.foo.bar.yourdomain.com [x] *.bar.yourdomain.com => foo.bar.baz.yourdomain.com \u63d0\u793a\uff1a\u4ee5\u4e0a [\u221a] \u7279\u6307\u6cdb\u57df\u540d\u5bf9\u5e94\u7684\u6b63\u786e\u793a\u4f8b\uff0c\u53cd\u4e4b [x] \u4e3a\u4e0d\u6b63\u786e\u7684\u3002 \u64cd\u4f5c\u5f15\u5bfc \u52a0\u901f\u57df\u540d\u7684\u7ba1\u7406\u6709\u57df\u540d\u7ed1\u5b9a\u3001\u5220\u9664\u57df\u540d\u7b49\u64cd\u4f5c\uff0c\u60a8\u53ef\u4ee5\u901a\u8fc7\u8be5\u6a21\u5757\u6765\u7ba1\u7406\u60a8\u7684\u57df\u540d\u3002\u60a8\u53ef\u767b\u9646 CDN \u63a7\u5236\u53f0 \uff0c\u8fdb\u5165\u300c\u57df\u540d\u7ba1\u7406\u300d\u529f\u80fd\u6a21\u5757\uff0c\u627e\u5230\u300c\u52a0\u901f\u57df\u540d\u300d\u4e00\u680f\uff0c\u5373\u53ef\u8fdb\u884c\u5982\u4e0b\u64cd\u4f5c\uff1a 1.\u7ed1\u5b9a\u57df\u540d \u7b2c\u4e00\u6b65\uff1a\u70b9\u51fb\u3010\u57df\u540d\u7ed1\u5b9a\u3011\u6309\u94ae \u7b2c\u4e8c\u6b65\uff1a\u586b\u5199\u5f85\u6dfb\u52a0\u7684\u57df\u540d \u70b9\u51fb\u3010\u6dfb\u52a0\u3011\u6309\u94ae\uff0c\u5373\u53ef\u6dfb\u52a0\u5f85\u7ed1\u5b9a\u7684\u57df\u540d\u3002 \u7b2c\u4e09\u6b65\uff1a\u67e5\u770b\u5df2\u6dfb\u52a0\u57df\u540d\u7684\u72b6\u6001 \u5982\u679c\u6b64\u65f6\u5df2\u7ecf\u6dfb\u52a0\u7684\u57df\u540d\u4e3a\u3010\u6b63\u5e38\u3011\u72b6\u6001\uff0c\u5219\u5df2\u5ba1\u6838\u901a\u8fc7\uff0c\u5982\u679c\u4e3a\u3010\u62d2\u7edd\u3011\u72b6\u6001\uff0c\u5219\u6b64\u65f6\u57df\u540d\u53ef\u80fd\u672a\u5907\u6848\uff0c\u672a\u88ab\u5ba1\u6838\u901a\u8fc7\u3002 2.\u5220\u9664\u57df\u540d \u7b2c\u4e00\u6b65\uff1a\u70b9\u51fb\u3010\u5220\u9664\u3011\u6309\u94ae \u7b2c\u4e8c\u6b65\uff1a\u5f85\u5220\u9664\u57df\u540d\u786e\u8ba4 \u70b9\u51fb\u3010\u5220\u9664\u3011\u6309\u94ae\u5373\u53ef\u5c06\u8be5\u57df\u540d\u8fdb\u884c\u5220\u9664\u3002 \u6ce8\u610f\u4e8b\u9879 \u4e00\u4e2a\u670d\u52a1\u53ef\u4ee5\u7ed1\u5b9a\u591a\u4e2a\u57df\u540d\uff0c\u4e14\u6700\u591a\u652f\u6301\u7ed1\u5b9a 10 \u4e2a\u81ea\u6709\u57df\u540d\uff0c\u5f85\u7ed1\u5b9a\u7684\u57df\u540d\u9700\u8981\u5df2\u5907\u6848\uff0c\u5426\u5219\u4f1a\u65e0\u6cd5\u901a\u8fc7\u5ba1\u6838\uff1b \u57df\u540d\u5ba1\u6838\u901a\u5e38\u5728 1 \u5c0f\u65f6\u4ee5\u5185\u5b8c\u6210\uff0c\u5ba1\u6838\u901a\u8fc7\u4e4b\u540e\u7684\u72b6\u6001\u4e3a\u201c\u6b63\u5e38\u201d\uff0c\u8bf7\u5728\u5ba1\u6838\u901a\u8fc7\u4e4b\u540e\u518d\u8fdb\u884c CNAME \u5207\u6362\uff1b \u65b0\u5907\u6848\u57df\u540d\u7531\u4e8e\u4fe1\u606f\u540c\u6b65\u6709\u5ef6\u65f6\uff0c\u8bf7\u5728\u5907\u6848 1-2 \u5929\u540e\u518d\u8fdb\u884c\u7ed1\u5b9a\uff0c\u5426\u5219\u4f1a\u5bfc\u81f4\u57df\u540d\u5ba1\u6838\u65f6\u65e0\u6cd5\u67e5\u8be2\u5907\u6848\u4fe1\u606f\u800c\u88ab\u62d2\u7edd\uff1b \u5e73\u53f0\u5c06\u5b9a\u671f\u68c0\u67e5\u57df\u540d\u662f\u5426\u5907\u6848\uff0c\u5f53\u6709\u4e00\u4e2a\u57df\u540d\u5907\u6848\u8fc7\u671f\u6216\u5931\u6548\u65f6\uff0c\u4e3a\u786e\u4fdd\u6b63\u5e38\u8bbf\u95ee\uff0c\u57df\u540d\u6240\u5728\u670d\u52a1\u5c06\u4e34\u65f6\u89e3\u6790\u5230\u53c8\u62cd\u4e91\u6d77\u5916\u52a0\u901f\u8282\u70b9\uff0c\u671f\u95f4\u6240\u4ea7\u751f\u7684\u8bbf\u95ee\u6d41\u91cf\u5c06\u6309\u6d77\u5916\u5b9a\u4ef7\u8ba1\u8d39\uff1b7 \u5929\u4e4b\u540e\uff0c\u5982\u679c\u5907\u6848\u4ecd\u4e3a\u5931\u6548\uff0c\u8be5\u57df\u540d\u7ed1\u5b9a\u72b6\u6001\u5c06\u53d8\u4e3a\u201c\u62d2\u7edd\u201d\u72b6\u6001\uff0cCDN \u4f1a\u8fd4\u56de 400 \u72b6\u6001\u7801\uff1b","title":"1.2 \u52a0\u901f\u57df\u540d"},{"location":"cdn/config/#13","text":"\u529f\u80fd\u8bf4\u660e \u4e3a\u4e86\u914d\u5408\u53c8\u62cd\u4e91\u5b58\u50a8\u4ee5\u53ca CDN \u670d\u52a1\u4f7f\u7528\uff0c\u53c8\u62cd\u4e91\u63d0\u4f9b\u4e86\u6d4b\u8bd5\u57df\u540d\uff0c\u4ec5\u7528\u4e8e\u6d4b\u8bd5\u670d\u52a1\u7684\u53ef\u7528\u6027\u3002\u5173\u4e8e\u6d4b\u8bd5\u57df\u540d\u7684\u4f7f\u7528\u89c4\u8303\u53ca\u6ce8\u610f\u4e8b\u9879\uff0c\u8fd9\u91cc\u8bf4\u660e\u5982\u4e0b\uff1a \u65b0\u521b\u5efa\u7684\u670d\u52a1\u542f\u7528\u65b0\u7684\u6d4b\u8bd5\u57df\u540d\uff08\u547d\u540d\u89c4\u5219\u4e3a\uff1a\u670d\u52a1\u540d\u79f0.test.upcdn.net\uff09\uff1b \u8001\u7684\u5b58\u50a8\u53ca CDN \u670d\u52a1\uff0c\u6d4b\u8bd5\u57df\u540d\u7684\u683c\u5f0f\u4e3a\uff1a\u670d\u52a1\u540d\u79f0.b0.upaiyun.com\uff0c\u4ecd\u53ef\u7ee7\u7eed\u4f7f\u7528\uff0c\u4f46\u662f\u9650\u4e8e\u6d4b\u8bd5\u57df\u540d\u662f\u516c\u5171\u8d44\u6e90\uff0c\u53ef\u80fd\u4f1a\u53d7\u5230\u5176\u4ed6\u7528\u6237\u5f71\u54cd\uff0c\u5df2\u7ecf\u7528\u4e8e\u6b63\u5f0f\u751f\u4ea7\u73af\u5883\u7684\u7528\u6237\uff0c\u8bf7\u5c3d\u5feb\u5c06\u4e1a\u52a1\u5207\u6362\u5230\u81ea\u6709\u7ed1\u5b9a\u7684\u57df\u540d\uff1b \u6d4b\u8bd5\u57df\u540d\u6709\u8bf8\u591a\u9650\u5236\uff08\u4f8b\u5982\uff1a\u9650\u901f\u3001\u9650\u5236 CDN \u8282\u70b9\u6570\u91cf\uff09\uff0c\u4e0d\u80fd\u7528\u4e8e\u6b63\u5f0f\u7684\u751f\u4ea7\u73af\u5883\uff0c\u4ec5\u4f9b\u6d4b\u8bd5\u4f7f\u7528\uff0c\u5b9e\u9645\u7ebf\u4e0a\u4e1a\u52a1\u8bf7\u7ed1\u5b9a\u81ea\u6709\u57df\u540d\u3002 \u67e5\u770b\u5f15\u5bfc \u60a8\u53ef\u767b\u9646 CDN \u63a7\u5236\u53f0 \uff0c\u8fdb\u5165\u300c\u57df\u540d\u7ba1\u7406\u300d\u529f\u80fd\u6a21\u5757\uff0c\u627e\u5230\u300c\u52a0\u901f\u57df\u540d\u300d\u4e00\u680f\uff0c\u5373\u53ef\u67e5\u770b\uff1a","title":"1.3 \u6d4b\u8bd5\u57df\u540d"},{"location":"cdn/config/#2","text":"","title":"2.\u56de\u6e90\u7ba1\u7406"},{"location":"cdn/config/#21","text":"\u6e90\u7ad9\u8bbe\u7f6e\u4e3b\u8981\u662f\u5bf9\u8d44\u6e90\u6587\u4ef6\u7684\u56de\u6e90\u5730\u5740\u8fdb\u884c\u7ba1\u7406\u4ee5\u53ca\u914d\u5408\u6e90\u7ad9\u5b9e\u9645\u8d44\u6e90\u60c5\u51b5\u8fdb\u884c\u4e00\u4e9b\u66f4\u9ad8\u7ea7\u7684\u8bbe\u7f6e\uff0c\u5305\u62ec\u4e3b\u5907\u7ebf\u8def\u3001\u7aef\u53e3\u53f7\u3001\u8f6e\u8be2\u6743\u91cd\u7b49\u3002\u5176\u4e2d\uff0c\u56de\u6e90\u5730\u5740\u652f\u6301 IP \u6e90\u7ad9\u548c\u57df\u540d\u6e90\u7ad9\uff0c\u4f8b\u5982\uff1a IP\uff1a1.1.1.1 \u57df\u540d\uff1asrc.example.com \u9488\u5bf9\u56de\u6e90\u5730\u5740\u4e3a\u57df\u540d\u6e90\u7ad9\u7684\u60c5\u51b5\uff0cCDN \u8282\u70b9\u4f1a\u8fdb\u884c\u4e00\u6b21 DNS \u89e3\u6790\uff0c\u89e3\u6790\u5230\u7684 IP \u5373\u4e3a\u771f\u5b9e\u7684\u56de\u6e90\u5730\u5740\u3002 \u56de\u6e90\u534f\u8bae \u56de\u6e90\u534f\u8bae\u987e\u540d\u601d\u4e49\u4e5f\u5c31\u662f CDN \u8282\u70b9\u56de\u6e90\u4f7f\u7528\u7684\u534f\u8bae\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0cCDN \u4f1a\u4ee5 HTTP \u534f\u8bae\u56de\u6e90\uff0c\u60a8\u4e5f\u53ef\u4ee5\u91c7\u7528 HTTPS \u534f\u8bae\u56de\u6e90\u3002 \u914d\u7f6e\u5f15\u5bfc \u767b\u9646 CDN \u63a7\u5236\u53f0 \uff0c\u8fdb\u5165 \u300c\u56de\u6e90\u7ba1\u7406\u300d\u9875\u9762\uff0c\u627e\u5230\u300c\u6e90\u7ad9\u8bbe\u7f6e\u300d\u914d\u7f6e\u9879\uff0c\u70b9\u51fb\u3010\u7ba1\u7406\u3011\u6309\u94ae\u8fdb\u5165\u7ba1\u7406\u9875\u9762\uff1a \u901a\u8fc7\u914d\u7f6e\u9879\u53ef\u4ee5\u770b\u5230\uff0cCDN \u6709\u4e09\u79cd\u56de\u6e90\u65b9\u5f0f\uff0c\u5206\u522b\u4e3a\uff1a 1\u3001HTTP \u56de\u6e90 \u9ed8\u8ba4\u91c7\u7528 HTTP \u534f\u8bae\u56de\u6e90\uff0c\u6b64\u65f6\u56de\u6e90\u5730\u5740\u7684\u7aef\u53e3\u53f7\u9ed8\u8ba4\u4e3a 80\u3002 2\u3001HTTPS \u56de\u6e90 \u4e5f\u53ef\u4ee5\u9009\u62e9 HTTPS \u534f\u8bae\u56de\u6e90\uff0c\u9009\u62e9 HTTPS \u534f\u8bae\u56de\u6e90\u65f6\uff0c\u7aef\u53e3\u53f7\u4f1a\u53d8\u4e3a 443 \u7aef\u53e3\u3002 3\u3001\u534f\u8bae\u8ddf\u968f\uff08following\uff09 \u5f53\u542f\u7528\u8be5\u7279\u6027\u65f6\uff0c\u56de\u6e90\u534f\u8bae\u59cb\u7ec8\u4f1a\u548c\u5ba2\u6237\u7aef\u8bbf\u95ee CDN \u7684\u534f\u8bae\u4fdd\u6301\u4e00\u81f4\uff0c\u5373\u5ba2\u6237\u7aef\u7528 HTTP \u534f\u8bae\u8bbf\u95ee CDN\uff0c\u90a3\u4e48 CDN \u56de\u6e90\u65f6\u4e5f\u4f1a\u7528 HTTP \u534f\u8bae\u8fdb\u884c\u56de\u6e90\uff0c\u540c\u6837\uff0c\u82e5\u91c7\u7528 HTTPS \u8bbf\u95ee\uff0c\u90a3\u4e48\u56de\u6e90\u4e5f\u662f HTTPS\u3002 \u8865\u5145: \u56de\u6e90\u8ddf\u968f 301/302 \u914d\u7f6e \u82e5\u57df\u540dcloud.tencent.com\uff0c\u5f00\u542f\u56de\u6e90\u8ddf\u968f\uff1a \u7528\u6237 A \u8bf7\u6c42\u8d44\u6e90\uff1ahttp://cloud.tencent.com/1.jpg\uff0c\u5728\u8282\u70b9\u672a\u547d\u4e2d\u7f13\u5b58\uff0c\u5219\u8282\u70b9\u4f1a\u8bf7\u6c42\u6e90\u7ad9\u83b7\u53d6\u6240\u9700\u8d44\u6e90\uff0c\u82e5\u6e90\u7ad9\u8fd4\u56de\u7684 HTTP Response \u72b6\u6001\u7801\u4e3a302\uff0c\u8df3\u8f6c\u6307\u5411\u5730\u5740\u4e3a http://cloud.tencent.com/2.jpg \uff0c\u5219\uff1a 1. \u5f00\u542f\u56de\u6e90\u8ddf\u968f301/302\u914d\u7f6e\u540e\uff0c\u8282\u70b9\u6536\u5230\u72b6\u6001\u7801\u4e3a301/302\u7684 HTTP Response \u540e\uff0c\u4f1a\u76f4\u63a5\u5411\u8df3\u8f6c\u6307\u5411\u7684\u5730\u5740\u53d1\u8d77\u8bf7\u6c42\u3002 2. \u83b7\u53d6\u5230\u6240\u9700\u8d44\u6e90\u540e\uff0c\u7f13\u5b58\u81f3\u8282\u70b9\uff0c\u5e76\u8fd4\u56de\u7ed9\u7528\u6237\u3002 3. \u6b64\u65f6\u7528\u6237 B \u4e5f\u5411http://cloud.tencent.com/1.jpg\u53d1\u8d77\u8bf7\u6c42\uff0c\u5219\u4f1a\u5728\u8282\u70b9\u76f4\u63a5\u547d\u4e2d\u5e76\u8fd4\u56de\u7ed9\u7528\u6237\u3002 4. \u5f00\u542f\u56de\u6e90\u8ddf\u968f301/302\u914d\u7f6e\u540e\uff0c\u6700\u591a\u4ec5\u8ddf\u968f3\u6b21\u8df3\u8f6c\uff0c\u8d85\u51fa\u9650\u5236\u5219\u4f1a\u76f4\u63a5\u8fd4\u56de301/302\u7ed9\u5ba2\u6237\u3002 \u82e5\u57df\u540dcloud.tencent.com\uff0c\u672a\u5f00\u542f\u56de\u6e90\u8ddf\u968f\uff1a \u7528\u6237 A \u8bf7\u6c42\u8d44\u6e90\uff1ahttp://cloud.tencent.com/1.jpg\uff0c\u5728\u8282\u70b9\u672a\u547d\u4e2d\u7f13\u5b58\uff0c\u5219\u8282\u70b9\u4f1a\u8bf7\u6c42\u6e90\u7ad9\u83b7\u53d6\u6240\u9700\u8d44\u6e90\uff0c\u82e5\u6e90\u7ad9\u8fd4\u56de\u7684 HTTP Response \u72b6\u6001\u7801\u4e3a301/302\uff0c\u8df3\u8f6c\u6307\u5411\u5730\u5740\u4e3ahttp://xxx.tencent.com/1.jpg\uff0c\u5219\uff1a 1. \u8282\u70b9\u5c06\u8be5 HTTP Response \u76f4\u63a5\u8fd4\u56de\u7ed9\u7528\u6237\u3002 2. \u7528\u6237\u5411http://xxx.tencent.com/1.jpg\u53d1\u8d77\u8bf7\u6c42\uff0c\u82e5\u8be5\u57df\u540d\u672a\u63a5\u5165 CDN\uff0c\u5219\u4e0d\u4f1a\u6709\u52a0\u901f\u6548\u679c\u3002 3. \u82e5\u6b64\u65f6\u7528\u6237 B \u4e5f\u5411http://cloud.tencent.com/1.jpg \u53d1\u8d77\u8bf7\u6c42\uff0c\u5219\u4f1a\u91cd\u590d\u4e0a\u8ff0\u6d41\u7a0b\u3002 \u6ce8\u610f\u4e8b\u9879 \u7279\u522b\u5730\uff0c\u56de\u6e90\u5730\u5740\u7684\u7aef\u53e3\u53f7\u914d\u7f6e\u5c06\u4ec5\u4f5c\u7528\u4e8e\u56de\u6e90\u534f\u8bae\u4e3a HTTP \u7684\u60c5\u51b5\uff0c\u9ed8\u8ba4 \u4e3a 80 \u7aef\u53e3\uff1b\u5f53\u7136\u4f60\u4e5f\u53ef\u4ee5\u81ea\u5b9a\u4e49\u4e3a\u5176\u4ed6\u503c\uff0c\u4f8b\u5982 8080 \u6216 8443\u3002 \u5f53\u56de\u6e90\u534f\u8bae\u4e3a HTTPS \u65f6\uff0c\u7aef\u53e3\u53f7\u5219\u59cb\u7ec8\u56fa\u5b9a\u4e3a 443\uff0c\u4e14\u76ee\u524d\u6682\u65f6\u4e0d\u652f\u6301\u4fee\u6539\u6b64\u56fa\u5b9a\u503c\uff1b \u82e5\u4e4b\u524d\u9009\u62e9 HTTPS \u534f\u8bae\u56de\u6e90 \u4e14\u81ea\u5b9a\u4e49\u8bbe\u7f6e\u8fc7\u7aef\u53e3\u53f7\u7684\u7528\u6237\u9700\u8981\u6ce8\u610f\uff0c\u5207\u6362\u5230 \u534f\u8bae\u8ddf\u968f \u6a21\u5f0f\u4e0b\u65f6\uff0c\u81ea\u5b9a\u4e49\u7684\u7aef\u53e3\u53f7\u5c06\u4ec5\u4f5c\u7528\u4e8e\u56de\u6e90\u534f\u8bae\u4e3a HTTP \u7684\u60c5\u51b5\u3002 \u5206\u7247\u56de\u6e90 \u5206\u7247\u56de\u6e90\u4f7f\u7528\u573a\u666f\uff1a\u5927\u6587\u4ef6 \u5f00\u542f\uff1a\u5f53\u5f00\u542f\u5206\u7247\u56de\u6e90\u65f6\uff0c\u56de\u6e90\u8bf7\u6c42\u65f6\u5c06\u4f7f\u7528 range \u56de\u6e90\u8bf7\u6c42\u3002\u5f00\u542f\u540e\uff0c\u5f53\u7528\u6237\u8bf7\u6c42\u672a\u643a\u5e26 range \u8bf7\u6c42\u65f6\uff0c\u5982\u679c\u8bf7\u6c42\u6587\u4ef6\u5927\u4e8e4M\uff0c CDN \u8282\u70b9\u5c06\u6309\u71671M\u7684\u5206\u7247\u5927\u5c0f\u56de\u6e90\u5206\u7247\u8bf7\u6c42\uff0c\u5982\u679c\u6587\u4ef6\u5c0f\u4e8e4M\uff0c\u5219CDN\u8282\u70b9\u5c06\u56de\u6e90\u62c9\u53d6\u5b8c\u6574\u6587\u4ef6\u3002\u5f53\u7528\u6237\u8bf7\u6c42\u643a\u5e26 range \u8bf7\u6c42\u65f6\uff0c \u5c06\u6309\u7167\u643a\u5e26\u7684 range \u8bf7\u6c42\u8fdb\u884c\u56de\u6e90\u8bf7\u6c42\u3002 \u5173\u95ed\uff1a\u5f53\u5173\u95ed\u5206\u7247\u56de\u6e90\u65f6\uff0c\u5f53\u7528\u6237\u8bf7\u6c42\u643a\u5e26 range \u8bf7\u6c42\u65f6\uff0c\u5728 CDN \u6ca1\u6709\u7f13\u5b58\u7684\u60c5\u51b5\u4e0b\uff0c\u56de\u6e90\u8bf7\u6c42\u4ecd\u4f1a\u4f7f\u7528 range \u56de\u6e90\u8bf7\u6c42\u3002 \u6e90\u7ad9\u8bc1\u4e66\u6821\u9a8c \u8868\u793a\u56de\u6e90\u4f1a\u6821\u9a8c\u6e90\u7ad9 SSL \u8bc1\u4e66\u7684\u5408\u6cd5\u6027\uff0c\u4f1a\u6821\u9a8c\u8bc1\u4e66\u662f\u5426\u8fc7\u671f\u3001\u8bc1\u4e66\u57df\u540d\u662f\u5426\u5339\u914d\u3001\u662f\u5426\u662f\u81ea\u7b7e\u540d\u8bc1\u4e66\uff0c\u5982\u679c\u6821\u9a8c\u4e0d\u901a\u8fc7\uff0c\u5219\u4f1a\u62d2\u7edd\u8bbf\u95ee\uff0c\u8fd9\u6837\u6781\u5927\u7684\u4fdd\u969c\u4e86\u56de\u6e90\u5b89\u5168\u6027\u3002 \u7ebf\u8def\u914d\u7f6e \u7ebf\u8def\u914d\u7f6e\u5305\u62ec\u56de\u6e90\u5730\u5740\u3001\u7aef\u53e3\u53f7\u3001\u4e3b\u5907\u7ebf\u8def\u3001\u8f6e\u8be2\u6743\u91cd\u3001\u6700\u5927\u5931\u8d25\u6b21\u6570\u3001\u9759\u9ed8\u65f6\u95f4\u7b49\u9ad8\u7ea7\u8bbe\u7f6e\u3002\u5176\u4e2d\u56de\u6e90\u5730\u5740\u5219\u8868\u793a\u6e90\u7ad9\u5b9e\u9645\u53ef\u8bbf\u95ee\u7684\u7f51\u7edc\u5730\u5740\uff0c\u53ef\u586b IP \u5730\u5740\u6216\u57df\u540d\uff0c\u5982\u679c\u662f\u57df\u540d\u5730\u5740\uff0c\u90a3\u4e48 CDN \u5728\u56de\u6e90\u65f6\u4f1a\u5bf9\u8be5\u57df\u540d\u5730\u5740\u8fdb\u884c DNS \u89e3\u6790\uff0c\u7136\u540e\u9488\u5bf9\u89e3\u6790\u51fa\u6765\u7684 IP \u5730\u5740\u8fdb\u884c\u8bbf\u95ee\uff0c\u56e0\u6b64\u82e5\u89e3\u6790\u5931\u8d25\u5c06\u4f1a\u5bfc\u81f4\u56de\u6e90\u5f02\u5e38\u3002 Tips: \u901a\u5e38\u60c5\u51b5\u4e0b\uff0c\u76f4\u63a5\u4f7f\u7528 IP \u8fdb\u884c\u56de\u6e90\uff0c\u4f46\u662f\u5982\u679c\u5ba2\u6237\u6709\u591a\u4e2a IP\uff0c\u5e76\u4e14 IP \u5730\u5740\u4f1a\u7ecf\u5e38\u53d8\u5316\uff0c\u5bf9\u4e8e CDN \u5382\u5546\u6765\u8bf4\uff0c\u4e3a\u4e86\u907f\u514d\u7ecf\u5e38\u66f4\u6539\u914d\u7f6e\uff08\u56de\u6e90IP\uff09\uff0c\u4f1a\u91c7\u53d6\u56de\u6e90\u57df\u540d\u65b9\u5f0f\u8fdb\u884c\u56de\u6e90\u3002 \u914d\u7f6e\u5f15\u5bfc \u767b\u9646 CDN \u63a7\u5236\u53f0 \uff0c\u8fdb\u5165 \u300c\u56de\u6e90\u7ba1\u7406\u300d\u9875\u9762\uff0c\u627e\u5230\u300c\u6e90\u7ad9\u8bbe\u7f6e\u300d\u914d\u7f6e\u9879\uff0c\u70b9\u51fb\u3010\u7ba1\u7406\u3011\u6309\u94ae\u8fdb\u5165\u7ba1\u7406\u9875\u9762\uff1a \u4ee5\u4e0b\u5c06\u91cd\u70b9\u4ecb\u7ecd\u4e3b\u5907\u7ebf\u8def\u3001\u8f6e\u8be2\u6743\u91cd\u3001\u6700\u5927\u5931\u8d25\u6b21\u6570\u548c\u9759\u9ed8\u65f6\u95f4\uff1a \u4e3b\u3001\u5907\u7ebf\u8def (backup) \u56de\u6e90\u5730\u5740\u914d\u7f6e\u4e2d\u9664\u4e86\u9ed8\u8ba4\u7684 \u4e3b\u7ebf\u8def \u5916\uff0c\u6211\u4eec\u8fd8\u652f\u6301 \u5907\u4efd\u7ebf\u8def \u7684\u914d\u7f6e\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c \u4e3b\u7ebf\u8def \u591a\u4e2a\u56de\u6e90\u5730\u5740\u4f1a\u4ee5 RR \u8f6e\u8be2\u65b9\u5f0f\u8fdb\u884c\u8c03\u5ea6\uff0c\u5f53\u4e14\u4ec5\u5f53\u6240\u6709 \u4e3b\u7ebf\u8def \u56de\u6e90\u5730\u5740\u5747\u4e0d\u53ef\u8fbe\u65f6\uff0c\u6b64\u65f6\u6211\u4eec\u5c06\u4f7f\u7528 \u5907\u4efd\u7ebf\u8def \u8fdb\u884c\u8f6c\u53d1\uff0c\u82e5 \u5907\u4efd\u7ebf\u8def \u6709\u591a\u4e2a\u56de\u6e90\u5730\u5740\uff0c\u90a3\u4e48\u8d1f\u8f7d\u5747\u8861\u65b9\u5f0f\u4e5f\u548c \u4e3b\u7ebf\u8def \u4e00\u6837\uff0c\u4ee5 Round-Robin \u8f6e\u8be2\uff08\u8be6\u60c5\u8bf7\u70b9\u51fb \u94fe\u63a5 \uff09\u65b9\u5f0f\u8fdb\u884c\u8c03\u5ea6\u3002 \u8f6e\u8be2\u6743\u91cd (weight) \u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u8f6e\u8be2\u6743\u91cd\u90fd\u4e3a 1\uff0c\u8868\u793a\u6240\u6709\u56de\u6e90\u5730\u5740\u8f6e\u8be2\u5230\u7684\u6982\u7387\u5747\u7b49\u3002\u5f53\u7136\u4e5f\u53ef\u4ee5\u5982\u4e0a\u56fe\u90a3\u6837\u81ea\u5b9a\u4e49\u8f6e\u8be2\u6743\u91cd\uff0c\u6211\u4eec\u770b\u5230\u4e3b\u7ebf\u8def\u4e24\u4e2a\u56de\u6e90\u5730\u5740\u6743\u91cd\u5206\u522b\u662f 1 \u548c 2\uff0c\u6b64\u65f6\u4e3b\u7ebf\u8def\u96c6\u7fa4\u5728\u8f6e\u8be2\u8c03\u5ea6\u4e2d\u4f1a\u6709 1/3 \u7684\u6982\u7387\u56de 192.168.11.1:80 \u8fd9\u4e2a\u5730\u5740\uff0c\u800c\u56de 192.168.11.2:80 \u8fd9\u4e2a\u5730\u5740\u7684\u6982\u7387\u5219\u4e3a 2/3\u3002\u5373\u5f53\u524d\u56de\u6e90\u5730\u5740\u8f6e\u8be2\u5230\u7684\u6982\u7387\u53ef\u6309\uff08\u5f53\u524d\u8282\u70b9\u6743\u91cd/\u96c6\u7fa4\u6240\u6709\u8282\u70b9\u6743\u91cd\u4e4b\u548c\uff09\u8fd9\u4e2a\u516c\u5f0f\u8ba1\u7b97\u3002 \u6700\u5927\u5931\u8d25\u6b21\u6570\u548c\u9759\u9ed8\u65f6\u95f4 \u8868\u793a\u5728\u4e00\u4e2a \u9759\u9ed8\u65f6\u95f4 \u5185\u5982\u679c\u5bf9\u5e94\u6e90\u7ad9\u7684\u5f02\u5e38\u6b21\u6570\u7d2f\u8ba1\u8fbe\u5230\u5f53\u524d\u8bbe\u7f6e\u7684 \u6700\u5927\u5931\u8d25\u6b21\u6570 \uff0c\u90a3\u4e48\u5728\u4e0b\u4e00\u4e2a \u9759\u9ed8\u65f6\u95f4 \u5185\uff0cCDN \u5c31\u4f1a\u8ba4\u4e3a\u8fd9\u4e2a\u6e90\u7ad9\u5b95\u673a\u4e86\uff0c\u5373\u5728\u8fd9\u6bb5\u65f6\u95f4\u5185\u4e0d\u4f1a\u518d\u5c06\u8bf7\u6c42\u8f6c\u53d1\u7ed9\u5b83\u3002\u7279\u522b\u5730\uff0c\u5f53 \u6700\u5927\u5931\u8d25\u6b21\u6570 \u5176\u503c\u4e3a 0 \u65f6\uff0c\u8868\u793a\u4e0d\u4f1a\u8fdb\u884c\u5931\u8d25\u7d2f\u8ba1\uff0c \u9759\u9ed8\u65f6\u95f4 \u4e5f\u540c\u65f6\u5931\u6548\u3002 \u5408\u7406\u8bbe\u7f6e\u6700\u5927\u5931\u8d25\u6b21\u6570\u548c\u9759\u9ed8\u65f6\u95f4\uff0c\u6709\u52a9\u4e8e\u5728\u6e90\u7ad9\u5f02\u5e38\u7684\u60c5\u51b5\u4e0b\u6700\u5927\u7a0b\u5ea6\u51cf\u5c11\u5bf9\u7ebf\u4e0a\u8bf7\u6c42\u7684\u5f71\u54cd\u3002\u8fd9\u91cc\u5b9e\u9645\u4e0a\u8ddf Nginx \u6838\u5fc3\u7684 upstream \u6a21\u5757\u5b9e\u73b0\u673a\u5236\u7c7b\u4f3c\uff0c\u8fdb\u4e00\u6b65\u4e86\u89e3\u53ef\u53c2\u8003 \u94fe\u63a5 \u3002 \u6ce8\u610f\u4e8b\u9879 \u5173\u4e8e\u4e3b\u3001\u5907\u56de\u6e90\uff0c\u5f53\u4e3b\u6e90\u51fa\u73b0\u9519\u8bef\u65f6\uff0cPOST \u4ee5\u53ca\u5e26 BODY \u7684 GET \u65b9\u6cd5\u7684\u8bf7\u6c42\u4e0d\u4f1a\u56de\u5907\u6e90\u8fdb\u884c\u91cd\u8bd5\u64cd\u4f5c\u3002","title":"2.1 \u6e90\u7ad9\u8bbe\u7f6e"},{"location":"cdn/config/#22-host","text":"\u529f\u80fd\u8bf4\u660e \u8be5\u914d\u7f6e\u662f\u6307 CDN \u8282\u70b9\u56de\u6e90\u8fc7\u7a0b\u4e2d\u6240\u9700\u8bbf\u95ee\u7684\u6e90\u7ad9\u670d\u52a1\u5668 Web \u7ad9\u70b9\u8d44\u6e90\u7684\u8bbf\u95ee\u57df\u540d\u3002CDN \u8282\u70b9\u56de\u6e90\u65f6\u4f1a\u5728 HTTP \u8bf7\u6c42\u5934 Host \u5b57\u6bb5\u91cc\u66ff\u6362\u8be5\u57df\u540d\uff0c\u4ee5\u652f\u6301\u6e90\u670d\u52a1\u5668\u53ef\u901a\u8fc7\u6b64 Host \u505a\u7684\u7279\u6b8a\u5904\u7406\u903b\u8f91\uff0c\u4e00\u822c\u662f\u57df\u540d\u5f62\u5f0f\u7684\u5b57\u7b26\u4e32\uff0c\u5f53\u7136\u4e5f\u652f\u6301\u4efb\u610f\u5b57\u7b26\u4e32\u5f62\u5f0f\u3002 \u914d\u7f6e\u5f15\u5bfc \u767b\u9646 CDN \u63a7\u5236\u53f0 \uff0c\u8fdb\u5165 \u300c\u56de\u6e90\u7ba1\u7406\u300d\u914d\u7f6e\u9875\u9762\uff0c\u627e\u5230\u300c\u56de\u6e90 Host\u300d\u914d\u7f6e\u9879\uff0c\u70b9\u51fb\u3010\u7ba1\u7406\u3011\u6309\u94ae\u8fdb\u5165\u7ba1\u7406\u9875\u9762\uff1a \u5982\u4e0a\u622a\u56fe\u6240\u793a\uff0c\u56de\u6e90 Host \u914d\u7f6e\u4e3a\uff1a src.image.upyun.com 1.\u56de\u6e90 Host \u4e3a\u53ef\u9009\u914d\u7f6e\u9879\uff0c\u9ed8\u8ba4\u4e3a\u7a7a\u3002\u7279\u522b\u5730\uff0c\u5982\u679c\u8be5\u81ea\u5b9a\u4e49\u503c\u4e3a\u7a7a\uff0c\u5b50\u57df\u540d\u7684\u56de\u6e90 Host \u4e3a\u6240\u914d\u7f6e\u7684\u52a0\u901f\u57df\u540d\uff0c\u6cdb\u57df\u540d\u56de\u6e90 Host \u4e3a\u8bbf\u95ee\u57df\u540d\uff1b 2.\u81ea\u5b9a\u4e49\u914d\u7f6e\uff1a\u60a8\u53ef\u4ee5\u6839\u636e\u4e1a\u52a1\u60c5\u51b5\u914d\u7f6e\u56de\u6e90 Host\uff0c\u6ee1\u8db3\u7279\u5b9a\u4e1a\u52a1\u9700\u6c42\uff1b \u6ce8\u610f\u4e8b\u9879 \u56de\u6e90 Host \u914d\u7f6e\u76ee\u524d\u4ec5\u652f\u6301\u4f7f\u7528\u81ea\u6709\u6e90\u63a5\u5165\u7684 CDN \u670d\u52a1\uff1b \u914d\u7f6e\u81ea\u5b9a\u4e49\u56de\u6e90 Host \u4e4b\u540e\uff0c\u8bf7\u4fdd\u8bc1\u8be5\u57df\u540d\u53ef\u4ee5\u6b63\u5e38\u8bbf\u95ee\uff0c\u5426\u5219\u4f1a\u51fa\u73b0\u56de\u6e90\u5931\u8d25\u7684\u60c5\u51b5\uff1b \u56de\u6e90\u5730\u5740\u548c\u56de\u6e90 Host \u7684\u533a\u522b\uff1a\u56de\u6e90\u5730\u5740\u662f CDN \u8282\u70b9\u56de\u6e90\u65f6\u80fd\u591f\u627e\u5230\u5bf9\u5e94\u7684\u6e90\u7ad9\u670d\u52a1\u5668\uff0c\u6e90\u7ad9\u53ef\u80fd\u6709\u591a\u4e2a Web \u7ad9\u70b9\uff0c\u56de\u6e90 Host \u5219\u6307\u660e\u4e86\u8d44\u6e90\u6240\u5728\u7684\u7ad9\u70b9\u3002","title":"2.2 \u56de\u6e90 Host"},{"location":"cdn/config/#23","text":"\u529f\u80fd\u8bf4\u660e \u6e90\u7ad9\u8d44\u6e90\u8fc1\u79fb\u529f\u80fd\u7684\u573a\u666f\u662f\u65e0\u7f1d\u5c06\u7528\u6237\u6e90\u7ad9\u9759\u6001\u8d44\u6e90\u8fc1\u79fb\u5230\u53c8\u62cd\u4e91\u5b58\u50a8\u4e0a\u6765\uff0c\u5f53\u4e0b\u6b21\u7ec8\u7aef\u7528\u6237\u8bbf\u95ee\u76f8\u540c\u8d44\u6e90\u65f6\uff0cCDN \u5c06\u76f4\u63a5\u8fd4\u56de\u5df2\u7ecf\u8fc1\u79fb\u5230\u4e91\u5b58\u50a8\u4e0a\u7684\u8d44\u6e90\u6587\u4ef6\uff0c\u800c\u65e0\u9700\u56de\u7528\u6237\u81ea\u4e3b\u6e90\uff0c\u53ef\u51cf\u5c0f\u81ea\u4e3b\u6e90\u538b\u529b\uff0c\u4e5f\u65b9\u4fbf\u8fdb\u884c\u8d44\u6e90\u6587\u4ef6\u7684\u65e0\u7f1d\u8fc1\u79fb\u3002 \u5b9e\u73b0\u673a\u5236 \u8fdb\u884c\u8d44\u6e90\u8fc1\u79fb\u9700\u8981\u8003\u8651\u5982\u4e0b\u4e24\u79cd\u573a\u666f\uff1a 1\uff09\u67d0\u4e2a\u8d44\u6e90\u672a\u8fc1\u79fb\u4e4b\u524d\uff0c\u4f1a\u4f18\u5148\u56de\u5b58\u50a8\uff0c\u5176\u6b21\u56de\u81ea\u4e3b\u6e90\uff0c\u6700\u7ec8\u8fdb\u884c\u8d44\u6e90\u8fc1\u79fb\uff0c\u8be6\u7ec6\u8bbf\u95ee\u6d41\u7a0b\u53c2\u89c1\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u5927\u81f4\u7684\u8bbf\u95ee\u6d41\u7a0b\u4e3a\uff1a \u7ec8\u7aef\u7528\u6237\u5411 CDN \u8bf7\u6c42\u8d44\u6e90\u6587\u4ef6\uff0cCDN \u4f1a\u4f18\u5148\u56de\u53c8\u62cd\u4e91\u5b58\u50a8\u83b7\u53d6\u8d44\u6e90\uff1b \u6b64\u65f6\u53c8\u62cd\u4e91\u5b58\u50a8\u6ca1\u6709\u8be5\u8d44\u6e90\uff0cCDN \u8282\u70b9\u4f1a\u4ece\u7528\u6237\u81ea\u4e3b\u6e90\u7ad9\u83b7\u53d6\u8d44\u6e90\u6587\u4ef6\uff1b \u6700\u7ec8 CDN \u8fd4\u56de\u8d44\u6e90\u6587\u4ef6\u7ed9\u7ec8\u7aef\u7528\u6237\uff0c\u5e76\u5c06\u8d44\u6e90\u6587\u4ef6\u6301\u4e45\u5316\u5b58\u50a8\u5230\u53c8\u62cd\u4e91\u5bf9\u8c61\u5b58\u50a8\u4e0a\uff1b 2\uff09\u67d0\u4e2a\u8d44\u6e90\u8fc1\u79fb\u6210\u529f\u4e4b\u540e\uff0c\u76f4\u63a5\u8bbf\u95ee\u4e91\u5b58\u50a8\uff0c\u4e0d\u518d\u8fdb\u884c\u8d44\u6e90\u8fc1\u79fb\uff0c\u8bbf\u95ee\u6d41\u7a0b\u53c2\u89c1\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u5927\u81f4\u7684\u8bbf\u95ee\u6d41\u7a0b\u662f\uff1a \u7ec8\u7aef\u7528\u6237\u518d\u6b21\u8bbf\u95ee\u76f8\u540c\u8d44\u6e90\u6587\u4ef6\u65f6\uff0c\u5c06\u76f4\u63a5\u4ece\u53c8\u62cd\u4e91\u5b58\u50a8\u83b7\u53d6\u8d44\u6e90\uff0c\u4e0d\u518d\u56de\u7528\u6237\u81ea\u4e3b\u6e90\u83b7\u53d6\u8d44\u6e90\uff1b \u968f\u7740\u7ec8\u7aef\u7528\u6237\u7684\u4e0d\u65ad\u8bbf\u95ee\uff0c\u6e90\u7ad9\u7684\u9759\u6001\u8d44\u6e90\u5c06\u9010\u6b65\u8fc1\u79fb\u5230\u53c8\u62cd\u4e91\u5b58\u50a8\u6e90\u4e0a\u6765\u3002 \u914d\u7f6e\u5f15\u5bfc \u767b\u9646 CDN \u63a7\u5236\u53f0 \uff0c\u8fdb\u5165 \u300c\u56de\u6e90\u7ba1\u7406\u300d\u914d\u7f6e\u9875\u9762\uff0c\u627e\u5230\u300c\u6e90\u7ad9\u8d44\u6e90\u8fc1\u79fb\u300d\u914d\u7f6e\u9879\uff0c\u70b9\u51fb\u3010\u7ba1\u7406\u3011\u6309\u94ae\uff0c\u8fdb\u5165\u5982\u4e0b\u914d\u7f6e\u754c\u9762\uff1a \u7b2c\u4e00\u6b65\uff1a\u914d\u7f6e\u8d44\u6e90\u8fc1\u79fb\u72b6\u6001 \u6e90\u7ad9\u8d44\u6e90\u8fc1\u79fb\u529f\u80fd\u5305\u62ec\u4e09\u79cd\u72b6\u6001\uff0c\u5206\u522b\u662f\u5f00\u542f\u3001\u6682\u505c\u3001\u5173\u95ed\uff0c\u9ed8\u8ba4\u4e3a\u5173\u95ed\u72b6\u6001\u3002\u8be6\u7ec6\u63cf\u8ff0\u5982\u4e0b\uff1a \u5f00\u542f\u72b6\u6001 \u5f00\u542f\u4e4b\u540e\uff0c\u5f53 CDN \u8282\u70b9\u7f13\u5b58\u5931\u6548\u6216\u672a\u547d\u4e2d\u65f6\uff0c\u4f1a\u4f18\u5148\u56de\u53c8\u62cd\u4e91\u5b58\u50a8\u83b7\u53d6\u8d44\u6e90\uff0c\u5982\u679c\u53c8\u62cd\u4e91\u5b58\u50a8\u8fd4\u56de 4XX\u30015XX \u72b6\u6001\u7801\u65f6\uff0c\u5219\u76f4\u63a5\u56de\u81ea\u6709\u6e90\u7ad9\u83b7\u53d6\u8d44\u6e90\u5e76\u54cd\u5e94\u7ed9\u6700\u7ec8\u7528\u6237\u3002\u4e0e\u6b64\u540c\u65f6\uff0c\u8d44\u6e90\u4f1a\u88ab\u6254\u8fdb\u8d44\u6e90\u8fc1\u79fb\u961f\u5217\u5e76\u8fdb\u884c\u5b58\u50a8\uff0c\u4e0b\u4e00\u4e2a\u76f8\u540c\u7684\u8d44\u6e90\u8bf7\u6c42\u8fc7\u6765\u65f6\u5219\u4f1a\u76f4\u63a5\u7531\u5b58\u50a8\u547d\u4e2d\u7684\u8d44\u6e90\u76f4\u63a5\u63d0\u4f9b\u670d\u52a1\u3002 \u6682\u505c\u72b6\u6001 \u76f4\u63a5\u5173\u95ed\u6e90\u7ad9\u8d44\u6e90\u8fc1\u79fb\u529f\u80fd\uff0c\u53ef\u80fd\u4f1a\u5bfc\u81f4\u56de\u81ea\u4e3b\u6e90\u538b\u529b\u8fc7\u5927\uff0c\u5728\u6682\u505c\u72b6\u6001\u4e0b\uff0c\u4e0d\u4f1a\u8fdb\u884c\u8d44\u6e90\u8fc1\u79fb\u52a8\u4f5c\uff0c\u8bbf\u95ee\u8d44\u6e90\u65f6\uff0c\u4ecd\u7136\u5148\u8bbf\u95ee\u53c8\u62cd\u4e91\u5b58\u50a8\uff0c\u5982\u679c\u53c8\u62cd\u4e91\u5b58\u50a8\u8fd4\u56de 4XX\u30015XX \u72b6\u6001\u7801\u65f6\uff0c\u5219\u4f1a\u8bbf\u95ee\u81ea\u4e3b\u6e90\u7ad9\u3002\u4e5f\u5373\u8d44\u6e90\u8bbf\u95ee\u7684\u6d41\u7a0b\u4e0d\u53d8\uff0c\u53ea\u4e0d\u8fc7\u4e0d\u4f1a\u8fdb\u884c\u8d44\u6e90\u7684\u8fc1\u79fb\u64cd\u4f5c\uff0c\u8d77\u5230\u4e86\u4e00\u4e2a\u7f13\u51b2\u7684\u4f5c\u7528\u3002 \u5173\u95ed\u72b6\u6001 \u8be5\u529f\u80fd\u5173\u95ed\u4e4b\u540e\uff0c\u65b0\u7684\u8bf7\u6c42\u8fc7\u6765\u7684\u8bdd\uff0cCDN \u8282\u70b9\u4e0d\u4f1a\u56de\u53c8\u62cd\u4e91\u5b58\u50a8\u5e73\u53f0\u83b7\u53d6\u8d44\u6e90\uff0c\u800c\u4f1a\u76f4\u63a5\u56de\u5ba2\u6237\u6e90\u7ad9\u83b7\u53d6\u8d44\u6e90\u3002 \u7b2c\u4e8c\u6b65\uff1a\u914d\u7f6e\u8d44\u6e90\u8def\u5f84 \u5728\u914d\u7f6e\u7684\u8fc7\u7a0b\u4e2d\uff0c\u60a8\u9700\u8981\u914d\u7f6e\u8d44\u6e90\u8def\u5f84\uff0c\u6307\u5b9a\u67d0\u4e9b\u8d44\u6e90\u8fdb\u884c\u8fc1\u79fb\uff0c\u4f8b\u5982\u9700\u8981\u6307\u5b9a html \u3001 mp4 \u3001 flv \u3001 jpg \u3001 png \u7b49\u8d44\u6e90\u8fdb\u884c\u8fc1\u79fb\u3002\u5982\u622a\u56fe\u6240\u793a\uff1a \u914d\u7f6e\u793a\u4f8b\u4e3a\uff1a /*.html /*.mp4 /*.flv /*.jpg /*.png \u503c\u5f97\u6ce8\u610f\u7684\u662f\uff0c\u8be5\u9879\u5982\u672a\u914d\u7f6e\uff0c\u5219\u9ed8\u8ba4\u8fc1\u79fb\u670d\u52a1\u4e0b\u9762\u7684\u6240\u6709\u9759\u6001\u8d44\u6e90\u6587\u4ef6\u3002 \u7b2c\u4e09\u6b65\uff1a\u9009\u62e9\u4e91\u5b58\u50a8\u670d\u52a1 \u8be5\u6b65\u9aa4\u9700\u8981\u786e\u4fdd\u60a8\u5df2\u7ecf\u521b\u5efa\u4e86\u4e00\u4e2a\u4e91\u5b58\u50a8\u670d\u52a1\uff0c\u5426\u5219\u65e0\u6cd5\u914d\u7f6e\u6210\u529f\u3002\u6211\u4eec\u4f1a\u901a\u8fc7\u4e0b\u62c9\u5217\u8868\u7684\u5f62\u5f0f\u5c55\u793a\u5f53\u524d\u8d26\u53f7\u4e0b\u5df2\u521b\u5efa\u7684\u4e91\u5b58\u50a8\u670d\u52a1\uff0c\u4ee5\u4f9b\u9009\u62e9\u3002\u5982\u622a\u56fe\u6240\u793a\uff1a \u786e\u4fdd\u4ee5\u4e0a\u914d\u7f6e\u6b63\u786e\u4e4b\u540e\uff0c\u70b9\u51fb\u914d\u7f6e\u754c\u9762\u53f3\u4e0b\u89d2\u7684\u3010\u786e\u5b9a\u3011\u6309\u94ae\u5373\u53ef\u3002 \u6ce8\u610f\u4e8b\u9879 \u5f53\u7528\u6237\u66f4\u65b0\u4e86\u6e90\u7ad9\u8d44\u6e90\u65f6\uff0c\u4e3a\u4e86\u4fdd\u8bc1\u8bf7\u6c42\u8bbf\u95ee\u5230\u7684\u8d44\u6e90\u662f\u6700\u65b0\u7684\uff0c\u6b64\u65f6\u9700\u8981\u901a\u8fc7 API \u6216 FTP \u7684\u65b9\u5f0f\u5bf9\u5df2\u7ecf\u5b58\u50a8\u5728\u53c8\u62cd\u4e91\u5b58\u50a8\u4e0a\u7684\u6587\u4ef6\u8fdb\u884c\u5220\u9664\u548c\u66ff\u6362\u64cd\u4f5c\uff1b \u5f53\u6e90\u7ad9\u8d44\u6e90\u8fc1\u79fb\u529f\u80fd\u5904\u4e8e\u6682\u505c\u72b6\u6001\u65f6\uff0c\u60a8\u53ef\u4ee5\u901a\u8fc7 API \u63a5\u53e3\u9010\u6b65\u5220\u9664\u53c8\u62cd\u4e91\u4e0a\u5bf9\u5e94\u7684\u6587\u4ef6\uff0c\u5c06\u56de\u6e90\u6d41\u91cf\u5e73\u6ed1\u8fc1\u79fb\u81f3\u6e90\u7ad9\uff0c\u6216\u8c03\u6574\u6e90\u7ad9\u5e26\u5bbd\uff0c\u6700\u540e\u518d\u6267\u884c\u5173\u95ed\u64cd\u4f5c\u3002 \u8d44\u6e90\u8fc1\u79fb\u7684\u751f\u6548\u6709\u4e00\u4e2a\u524d\u63d0\u6761\u4ef6\uff0c\u90a3\u5c31\u662f\u8d44\u6e90\u6587\u4ef6\u5728 CDN \u7684\u7f13\u5b58\u8fc7\u671f\u65f6\u95f4\u5fc5\u987b\u5927\u4e8e 24 \u5c0f\u65f6\uff0c\u624d\u4f1a\u6267\u884c\u8fc1\u79fb\u52a8\u4f5c\uff1b","title":"2.3 \u6e90\u7ad9\u8d44\u6e90\u8fc1\u79fb"},{"location":"cdn/config/#24","text":"\u529f\u80fd\u8bf4\u660e \u79bb\u7ebf\u6a21\u5f0f\u662f\u6307\u5728\u7f51\u7ad9\u6e90\u670d\u52a1\u5668\u672a\u80fd\u6b63\u5e38\u63d0\u4f9b\u670d\u52a1\u671f\u95f4\uff0c\u4e5f\u5373\u5f53\u6e90\u7ad9\u51fa\u73b0\u5b95\u673a\u3001\u7f51\u7edc\u4e2d\u65ad\u7b49\u60c5\u51b5\u65f6\uff0cCDN \u8282\u70b9\u5728\u8be5\u65f6\u95f4\u6bb5\u5185\u4e0d\u518d\u56de\u6e90\u8bf7\u6c42\u8d44\u6e90\u6587\u4ef6\uff0c\u800c\u7531 CDN \u8282\u70b9\u76f4\u63a5\u8fd4\u56de\u8282\u70b9\u4e0a\u5df2\u7f13\u5b58\u8d44\u6e90\u5185\u5bb9\uff0c\u8be5\u529f\u80fd\u80fd\u591f\u6709\u6548\u964d\u4f4e\u6e90\u6545\u969c\u671f\u95f4\u5e26\u6765\u7684\u635f\u5931\uff0c\u63d0\u5347\u7f51\u7ad9\u7684\u7528\u6237\u4f53\u9a8c\u3002 \u914d\u7f6e\u5f15\u5bfc \u767b\u9646 CDN \u63a7\u5236\u53f0 \uff0c\u9009\u62e9\u9700\u8981\u914d\u7f6e\u7684\u670d\u52a1\uff0c\u4f9d\u6b21\u8fdb\u5165\u300c\u529f\u80fd\u914d\u7f6e\u300d\u548c\u300c\u56de\u6e90\u7ba1\u7406\u300d\u914d\u7f6e\u754c\u9762\uff0c\u627e\u5230\u300c\u79bb\u7ebf\u6a21\u5f0f\u300d\u914d\u7f6e\u9879\uff0c\u5982\u4e0b\u622a\u56fe\u6240\u793a\uff1a \u7b2c\u4e00\u6b65\uff1a\u4f9d\u6b21\u8fdb\u5165\u914d\u7f6e\u7ba1\u7406\u3001\u56de\u6e90\u7ba1\u7406\u9875\u9762 \u8fdb\u5165\u529f\u80fd\u914d\u7f6e\u9875\u9762\uff1a \u8fdb\u5165\u56de\u6e90\u7ba1\u7406\u914d\u7f6e\u9875\u9762\uff1a \u7b2c\u4e8c\u6b65\uff1a\u5728\u56de\u6e90\u7ba1\u7406\u6a21\u5757\uff0c\u627e\u5230\u3010\u79bb\u7ebf\u6a21\u5f0f\u3011\u914d\u7f6e\u9879 \u70b9\u51fb\u3010\u786e\u5b9a\u3011\u6309\u94ae\uff0c\u5373\u53ef\u5f00\u542f\u79bb\u7ebf\u6a21\u5f0f\u529f\u80fd\u3002 \u6ce8\u610f\u4e8b\u9879 \u6e90\u7ad9\u8fd4\u56de 502\u3001504 \u72b6\u6001\u7801\u65f6\u3001CDN \u8282\u70b9\u56de\u6e90\u8fde\u63a5\u51fa\u9519\u6216\u8005\u54cd\u5e94\u4f53\u8d85\u65f6\u65f6\uff0c\u90fd\u4f1a\u89e6\u53d1\u79bb\u7ebf\u6a21\u5f0f\uff1b \u79bb\u7ebf\u6a21\u5f0f\u7684\u65f6\u95f4\u5468\u671f\u4e3a\u8d44\u6e90\u5185\u5bb9\u5728 CDN \u8282\u70b9\u7684\u7f13\u5b58\u8fc7\u671f\u65f6\u95f4\uff0c\u5728\u8be5\u671f\u95f4\u5185\u4e0d\u518d\u56de\u6e90\u8bf7\u6c42\u8d44\u6e90\u5185\u5bb9\uff1b \u79bb\u7ebf\u6a21\u5f0f\u53ea\u6709\u8d44\u6e90\u5185\u5bb9\u5728 CDN \u8282\u70b9\u7f13\u5b58\u7684\u60c5\u51b5\u4e0b\u624d\u4f1a\u51d1\u6548\uff0c\u5426\u5219\u4e5f\u4f1a\u51fa\u73b0\u8d44\u6e90\u6587\u4ef6\u8bbf\u95ee\u5931\u8d25\u3002","title":"2.4 \u79bb\u7ebf\u6a21\u5f0f"},{"location":"cdn/config/#25","text":"\u529f\u80fd\u8bf4\u660e \u9488\u5bf9\u5177\u5907\u5b58\u50a8\u7279\u6027\u7684 CDN \u670d\u52a1\uff0c\u53ef\u4ee5\u521b\u5efa\u64cd\u4f5c\u5458\uff0c\u5e76\u6388\u6743\u67d0\u4e9b\u64cd\u4f5c\u5458\u5bf9\u5728\u53c8\u62cd\u5bf9\u8c61\u5b58\u50a8\u670d\u52a1\u4e0a\u9762\u7684\u975e\u7ed3\u6784\u5316\u6570\u636e\u8fdb\u884c\u8bfb\u53d6\u3001\u5199\u5165\u3001\u5220\u9664\u7b49\u64cd\u4f5c\u3002\u529f\u80fd\u8bf4\u660e\u5982\u4e0b\uff1a \u53ef\u8bfb\u53d6\uff1a\u62e5\u6709\u4e0b\u8f7d\u6587\u4ef6\u3001\u83b7\u53d6\u6587\u4ef6\u3001\u76ee\u5f55\u4fe1\u606f\u53ca\u7a7a\u95f4\u4f7f\u7528\u60c5\u51b5\u7684\u6743\u9650\uff1b \u53ef\u5199\u5165\uff1a\u62e5\u6709\u4e0a\u4f20\u6587\u4ef6\u3001\u521b\u5efa\u76ee\u5f55\u3001\u64cd\u4f5c\u7f13\u5b58\u5237\u65b0\u7684\u6743\u9650\uff1b \u53ef\u5220\u9664\uff1a\u62e5\u6709\u5220\u9664\u6587\u4ef6\u3001\u5220\u9664\u76ee\u5f55\u7684\u6743\u9650\u3002 \u6ce8\u610f\uff1a\u9488\u5bf9\u4f7f\u7528\u81ea\u4e3b\u6e90\u7684 CDN \u670d\u52a1\uff0c\u53ea\u6709\u5f53\u5f00\u542f\u3010\u6e90\u7ad9\u8d44\u6e90\u8fc1\u79fb\u3011\u529f\u80fd\u65f6\uff0c\u624d\u4f1a\u4f7f\u7528\u5230\u64cd\u4f5c\u5458\u6388\u6743\u529f\u80fd\u3002 \u914d\u7f6e\u5f15\u5bfc \u767b\u9646 CDN \u63a7\u5236\u53f0 \uff0c\u9009\u62e9\u9700\u8981\u914d\u7f6e\u7684\u670d\u52a1\uff0c\u4f9d\u6b21\u8fdb\u5165\u300c\u529f\u80fd\u914d\u7f6e\u300d\u548c\u300c\u56de\u6e90\u7ba1\u7406\u300d\u914d\u7f6e\u754c\u9762\uff0c\u627e\u5230\u300c\u64cd\u4f5c\u5458\u6388\u6743\u300d\u914d\u7f6e\u9879\uff0c\u5982\u4e0b\u622a\u56fe\u6240\u793a\uff1a \u7b2c\u4e00\u6b65\uff1a\u4f9d\u6b21\u8fdb\u5165\u914d\u7f6e\u7ba1\u7406\u3001\u56de\u6e90\u7ba1\u7406\u9875\u9762 \u8fdb\u5165\u3010\u529f\u80fd\u914d\u7f6e\u3011\u9875\u9762 \u8fdb\u5165\u3010\u56de\u6e90\u7ba1\u7406\u3011\u914d\u7f6e\u9875\u9762 \u7b2c\u4e8c\u6b65\uff1a\u5728\u3010\u56de\u6e90\u7ba1\u7406\u3011\u6a21\u5757\uff0c\u627e\u5230\u3010\u64cd\u4f5c\u5458\u6388\u6743\u3011\u914d\u7f6e\u9879 \u672a\u521b\u5efa\u64cd\u4f5c\u5458\uff0c\u9700\u8981\u521b\u5efa\u64cd\u4f5c\u5458\u5e76\u6388\u6743 \u586b\u5199\u57fa\u672c\u4fe1\u606f\u5e76\u9009\u62e9\u64cd\u4f5c\u6743\u9650\uff0c\u70b9\u51fb\u3010\u521b\u5efa\u5e76\u6388\u6743\u3011\u6309\u94ae\uff0c\u5373\u53ef\u521b\u5efa\u64cd\u4f5c\u5458\u5e76\u5bf9\u670d\u52a1\u8fdb\u884c\u6388\u6743\u3002 \u5df2\u521b\u5efa\u64cd\u4f5c\u5458\uff0c\u9700\u8981\u5bf9\u64cd\u4f5c\u5458\u8fdb\u884c\u6388\u6743 \u5728\u64cd\u4f5c\u5458\u53ef\u9009\u5217\u8868\u4e2d\uff0c\u6839\u636e\u4e1a\u52a1\u8981\u6c42\uff0c\u9009\u62e9\u5df2\u7ecf\u521b\u5efa\u597d\u7684\u64cd\u4f5c\u5458\u5373\u53ef\uff0c\u70b9\u51fb\u3010\u6388\u6743\u3011\u6309\u94ae\uff0c\u5373\u53ef\u6388\u6743\u3002 \u6ce8\u610f\u4e8b\u9879 \u64cd\u4f5c\u5458\u6743\u9650\u5177\u5907\u53ef\u8bfb\u53d6\u3001\u53ef\u5199\u5165\u3001\u53ef\u5220\u9664\u7b49\u529f\u80fd\uff0c\u8bf7\u8c28\u614e\u5206\u914d\u6743\u9650\uff1b \u64cd\u4f5c\u5458\u8d26\u53f7\u548c\u5bc6\u7801\u8bf7\u8c28\u614e\u4fdd\u7ba1\uff0c\u4e00\u65e6\u6cc4\u9732\uff0c\u8bf7\u53ca\u65f6\u66f4\u6362\u3002","title":"2.5 \u64cd\u4f5c\u5458\u6388\u6743"},{"location":"cdn/config/#3","text":"","title":"3.\u7f13\u5b58\u914d\u7f6e"},{"location":"cdn/config/#31","text":"\u529f\u80fd\u8bf4\u660e \u7f13\u5b58\u914d\u7f6e\u662f\u6307\u53c8\u62cd\u4e91 CDN \u52a0\u901f\u8282\u70b9\uff08\u5305\u62ec\u8fb9\u7f18\u8282\u70b9\u548c\u4e2d\u5fc3\u8282\u70b9\uff09\u5728\u7f13\u5b58\u60a8\u7684\u8d44\u6e90\u6587\u4ef6\u65f6\u9075\u5faa\u7684\u4e00\u5957\u8fc7\u671f\u89c4\u5219\u3002\u5f53\u8d44\u6e90\u6587\u4ef6\u5904\u4e8e\u8fc7\u671f\u72b6\u6001\u65f6\uff0c\u6b64\u65f6\u7528\u6237\u8bf7\u6c42\u4f1a\u7531\u8282\u70b9\u53d1\u9001\u81f3\u6e90\u7ad9\uff0c\u91cd\u65b0\u83b7\u53d6\u8d44\u6e90\u5185\u5bb9\u5e76\u7f13\u5b58\u81f3\u8282\u70b9\uff0c\u540c\u65f6\u8fd4\u56de\u7ed9\u6700\u7ec8\u7528\u6237\uff1b\u5f53\u8d44\u6e90\u5185\u5bb9\u5904\u4e8e\u672a\u8fc7\u671f\u72b6\u6001\u65f6\uff0c\u60a8\u7684\u7528\u6237\u8bf7\u6c42\u5230\u8fbe\u8282\u70b9\u540e\uff0c\u4f1a\u7531\u8282\u70b9\u76f4\u63a5\u54cd\u5e94\u6700\u7ec8\u7528\u6237\u7684\u8bf7\u6c42\u3002\u5408\u7406\u7684\u914d\u7f6e\u8d44\u6e90\u6587\u4ef6\u7f13\u5b58\u65f6\u95f4\uff0c\u80fd\u591f\u6709\u6548\u7684\u63d0\u5347\u7f13\u5b58\u547d\u4e2d\u7387\uff0c\u964d\u4f4e\u56de\u6e90\u7387\uff0c\u8282\u7701\u60a8\u7684\u6e90\u7ad9\u5e26\u5bbd\u3002 \u914d\u7f6e\u5f15\u5bfc \u767b\u5f55 CDN\u63a7\u5236\u53f0 \uff0c\u9009\u62e9\u9700\u8981\u914d\u7f6e\u7684\u670d\u52a1\uff0c\u4f9d\u6b21\u8fdb\u5165\uff1a\u670d\u52a1\u7ba1\u7406 > \u529f\u80fd\u914d\u7f6e > \u7f13\u5b58\u914d\u7f6e > \u7f13\u5b58\u8fc7\u671f\u914d\u7f6e\uff0c\u70b9\u51fb\u3010\u7ba1\u7406\u3011\u6309\u94ae\u5373\u53ef\u5f00\u59cb\u914d\u7f6e\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u81ea\u5b9a\u4e49\u7f13\u5b58\u914d\u7f6e \u60a8\u53ef\u4ee5\u6839\u636e\u81ea\u8eab\u4e1a\u52a1\u9700\u6c42\uff0c\u5728\u914d\u7f6e\u754c\u9762\u7684\u53f3\u4e0a\u89d2\uff0c\u70b9\u51fb\u53f3\u4e0a\u89d2\u7684\u3010\u6dfb\u52a0\u3011 \u6309\u94ae\u8fdb\u884c\u8d44\u6e90\u6587\u4ef6\u7f13\u5b58\u8fc7\u671f\u65f6\u95f4\u7684\u914d\u7f6e\uff0c\u5982\u622a\u56fe\u6240\u793a\uff1a \u8fdb\u5165\u7f13\u5b58\u8fc7\u671f\u7ba1\u7406\u914d\u7f6e\u754c\u9762 \u8fdb\u5165\u81ea\u5b9a\u4e49\u7f13\u5b58\u8fc7\u671f\u914d\u7f6e\u754c\u9762 \u5728\u8be5\u914d\u7f6e\u754c\u9762\uff0c\u60a8\u53ef\u4ee5\u9488\u5bf9\u6a21\u677f\u3001\u7f13\u5b58\u65f6\u95f4\u3001\u8d44\u6e90\u8def\u5f84\u3001\u72b6\u6001\u7801\u7b49\u8fdb\u884c\u9009\u62e9\u548c\u914d\u7f6e\u3002CDN \u652f\u6301\u4e09\u79cd\u7ef4\u5ea6\u7684\u7f13\u5b58\u8fc7\u671f\u89c4\u5219\u914d\u7f6e\uff0c\u5206\u522b\u4e3a\uff1a 1.\u6839\u636e\u6587\u4ef6\u7c7b\u578b\u8bbe\u7f6e\u7f13\u5b58\u8fc7\u671f\u7b56\u7565 \u60a8\u53ef\u4ee5\u6839\u636e\u6a21\u677f\u586b\u5145\u6587\u4ef6\u7c7b\u578b\u540e\u7f00\uff0c\u6839\u636e\u6587\u4ef6\u7c7b\u578b\u6765\u8bbe\u7f6e\u7f13\u5b58\u65f6\u95f4\uff0c\u5982\u4e0b\u793a\u4f8b\u6240\u793a\uff1a /*.(txt,doc,wri,docs) \u7f13\u5b58\u65f6\u95f4 1 \u5929\uff1b \u8bbe\u7f6e\u5b8c\u6210\u540e\uff0c\u57df\u540d\u4e0b\u6240\u6709\u5339\u914d .txt .doc .wri .docs \u7684\u6587\u672c\u8d44\u6e90\uff0c\u5728\u8282\u70b9\u7684\u7f13\u5b58\u6709\u6548\u65f6\u95f4\u5747\u4e3a 1 \u5929\u3002 2.\u6839\u636e\u6587\u4ef6\u76ee\u5f55\u8bbe\u7f6e\u7f13\u5b58\u8fc7\u671f\u7b56\u7565 \u60a8\u53ef\u4ee5\u81ea\u5b9a\u4e49\u914d\u7f6e\u6587\u4ef6\u8def\u5f84\uff0c\u6839\u636e\u6587\u4ef6\u8def\u5f84\u6765\u8bbe\u7f6e\u7f13\u5b58\u65f6\u95f4\uff0c\u5982\u4e0b\u793a\u4f8b\u6240\u793a\uff1a /dir/* \u7f13\u5b58\u65f6\u95f4 12 \u5c0f\u65f6 3.\u5168\u5c40\u7f13\u5b58\u8fc7\u671f\u7b56\u7565\u914d\u7f6e \u5168\u5c40\u7f13\u5b58\u7b56\u7565\u9002\u5408\u6e90\u7ad9\u5168\u662f\u9759\u6001\u8d44\u6e90\u7684\u5ba2\u6237\uff0c\u53ef\u4ee5\u9488\u5bf9\u8be5\u670d\u52a1\u4e00\u952e\u5f00\u542f\u914d\u7f6e\u7f13\u5b58\u8fc7\u671f\u65f6\u95f4\uff0c\u5f00\u542f\u8bf7\u8c28\u614e\u3002\u8be6\u7ec6\u914d\u7f6e\u53ef\u53c2\u7167\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u8bbe\u7f6e\u5b8c\u6210\u540e\uff0c\u8be5\u670d\u52a1\u4e0b\u6240\u6709\u57df\u540d\u5339\u914d\u7684\u8d44\u6e90\uff0c\u5728\u8282\u70b9\u7684\u7f13\u5b58\u6709\u6548\u65f6\u95f4\u5747\u4e3a 7 \u5929\u3002 \u6ce8\u610f\u4e8b\u9879\uff1a \u5168\u5c40\u7f13\u5b58\u5728\u81ea\u5b9a\u4e49\u7f13\u5b58\u914d\u7f6e\u91cc\u9762\u7684\u4f18\u5148\u7ea7\u662f\u6700\u4f4e\u7684\uff0c\u4e14\u4f18\u5148\u7ea7\u4e0d\u53ef\u8c03\u8282\uff0c\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u5168\u5c40\u7f13\u5b58\u8bbe\u7f6e\u6709\u4e00\u4e2a\u5355\u72ec\u7684\u5f00\u5173\uff0c\u9700\u8981\u5f00\u542f\u4e4b\u540e\uff0c\u624d\u53ef\u4ee5\u8fdb\u884c\u914d\u7f6e\u3002 \u9ed8\u8ba4\u914d\u7f6e\u6a21\u677f \u7279\u522b\u5730\uff0c\u6211\u4eec\u9488\u5bf9\u81ea\u5b9a\u4e49\u7f13\u5b58\u914d\u7f6e\uff0c\u9ed8\u8ba4\u89c4\u5212\u4e86\u6a21\u677f\uff0c\u5e76\u4e14\u9884\u8bbe\u4e86\u7f13\u5b58\u65f6\u95f4\uff0c\u60a8\u53ef\u4ee5\u6839\u636e\u5177\u4f53\u60c5\u51b5\u8fdb\u884c\u4fee\u6539\u3002\u5177\u4f53\u6a21\u677f\u5982\u4e0b\uff1a \u9996\u9875\uff1a/ \u7f13\u5b58 12 \u5c0f\u65f6\uff1b \u76ee\u5f55\u9875\uff1a/*/ \u7f13\u5b58 12 \u5c0f\u65f6\uff1b \u56fe\u7247\u6587\u4ef6\uff1a/*.(jpg,jpeg,png,bmp,gif,psd,ico,tga,imb,tiff) \u7f13\u5b58 7 \u5929\uff1b \u6587\u672c\u6587\u4ef6\uff1a/*.(txt,doc,wri,docs,css,js,dot,xml,log,bat,csv) \u7f13\u5b58 1 \u5929\uff1b \u97f3\u89c6\u9891\u6587\u4ef6\uff1a/*.(wav,mp3,wmv,rmi,aac,mp4,rmvb,mkv,avi,flv,swf,rm,mov,movie,qt) \u7f13\u5b58 7 \u5929\uff1b \u4e0b\u8f7d\u7c7b\u6587\u4ef6\uff1a/*.(exe,ios,apk,ipa,pxl,sis,cab,deb,rar,zip,gzip,tar,7z,bzip2,dmg,gz,wim,tbz,tpz,z,jar) \u7f13\u5b58 7 \u5929\uff1b 4.URI \u5e26\u53c2\u6570\u914d\u7f6e\u7f13\u5b58\u8fc7\u671f\u7b56\u7565 \u9664\u4e86\u6309\u7167\u6587\u4ef6\u7c7b\u578b\uff08\u6587\u4ef6\u6269\u5c55\u540d\uff09\u3001\u6587\u4ef6\u76ee\u5f55\u4ee5\u53ca\u5168\u5c40\u7f13\u5b58\u6765\u914d\u7f6e\u7f13\u5b58\u8fc7\u671f\u65f6\u95f4\uff0c\u60a8\u8fd8\u53ef\u4ee5\u6839\u636e URI \u5e26\u53c2\u6570\u6765\u914d\u7f6e\u7f13\u5b58\u8fc7\u671f\u65f6\u95f4\uff0c\u5177\u4f53\u683c\u5f0f\u5982\u4e0b\uff1a /dir/*?foo&bar=123 \u7f13\u5b58\u65f6\u95f4 1 \u5c0f\u65f6 \u4ee5\u4e0a\u89c4\u5219\u4e2d\uff0c ? \u540e\u9762\u8ddf\u968f\u7684\u5c31\u662f\u53c2\u6570\u7b5b\u9009\u89c4\u5219\uff1b * \u7279\u6307\u901a\u914d\u7b26\uff0c\u5982\u4e0d\u9700\u914d\u7f6e\u901a\u914d\u7b26\uff0c\u53ef\u4ee5\u4f7f\u7528\u5177\u4f53\u8d44\u6e90\u8def\u5f84\uff0c\u5982\u4e0b\u89c4\u5219\u6240\u793a\uff1a /dir/index.html?foo&bar=123 \u7f13\u5b58\u65f6\u95f4 1 \u5c0f\u65f6 \u5173\u4e8e ? \u540e\u9762\u7684\u53c2\u6570\u7b5b\u9009\u89c4\u5219\u914d\u7f6e\u8bf7\u53c2\u8003\u5982\u4e0b\u5206\u7c7b\uff1a \u5206\u7c7b \u8bf4\u660e \u793a\u4f8b \u53ea\u6709 KEY \u6ca1\u6709 VALUE \u5339\u914d\u8be5\u53c2\u6570 KEY \u6240\u6709\u5bf9\u5e94\u7684\u503c\u4ee5\u53ca\u503c\u4e3a\u7a7a\u8fd9\u79cd\u7279\u6b8a\u7684\u60c5\u51b5 /dir/*?bar&foo \u65e2\u6709 KEY \u4e5f\u6709 VALUE \uff08\u683c\u5f0f\uff1aK=V\uff09 \u4f1a\u7cbe\u786e\u5339\u914d KEY \u548c VALUE /dir/*?foo=123&bar=456 \u53ea\u6709 \uff1f \uff0c\u4e0d\u5e26\u4efb\u4f55\u53c2\u6570 \u8868\u793a\u53c2\u6570\u4e3a\u7a7a /dir/*? \u4e0d\u5e26 \uff1f \u8868\u793a\u4e0d\u9a8c\u8bc1\u53c2\u6570 /dir/* \u6ce8\u610f\uff1a \u53c2\u6570\u89c4\u5219\u914d\u7f6e\u987a\u5e8f\u4e0d\u654f\u611f\uff0c\u53c2\u6570\u4e4b\u95f4\u901a\u8fc7 & \u8fdb\u884c\u8fde\u63a5\uff1b URI \u4ec5\u9650 PATH\uff08\u8def\u5f84\uff09\u4ee5\u53ca ARGS\uff08\u53c2\u6570\uff09\u90e8\u5206\uff0c\u4f8b\u5982\uff1a /m/n/*?bar&foo=123 \u3002 \u4e0d\u7f13\u5b58\u914d\u7f6e \u6839\u636e\u4e1a\u52a1\u60c5\u51b5\uff0c\u53ef\u4ee5\u9488\u5bf9\u4e00\u4e9b\u52a8\u6001\u8d44\u6e90\u6587\u4ef6\uff08 \u4f8b\u5982\uff1aphp\u3001jsp\u3001asp\u3001do\u3001cgi\u3001action\u3001json \u7b49\uff09\u5f3a\u5236\u914d\u7f6e\u4e0d\u7f13\u5b58\uff0c \u8be6\u7ec6\u914d\u7f6e\u53ef\u53c2\u7167\u5982\u4e0b\u6240\u793a\uff1a /*.(asp,php,jsp,do,json) \u914d\u7f6e\u4e0d\u7f13\u5b58 \u9ed8\u8ba4\u7f13\u5b58\u7b56\u7565 \u5728\u6ca1\u6709\u5339\u914d\u5230\u81ea\u5b9a\u4e49\u7f13\u5b58\u89c4\u5219\u4e14\u6e90\u7ad9\u4e5f\u6ca1\u6709\u8fd4\u56de\u4efb\u4f55\u6709\u6548\u7f13\u5b58\u5934\u7684\u60c5\u51b5\u4e0b\uff0c\u6211\u4eec\u7684\u9ed8\u8ba4\u914d\u7f6e\u7b56\u7565\u5982\u4e0b\uff1a 1.\u9488\u5bf9\u9759\u6001\u8d44\u6e90\uff0c\u6240\u6709\u6b63\u5e38\u72b6\u6001\u7801\uff08\u5927\u4e8e\u7b49\u4e8e 200 \u5c0f\u4e8e 400\uff09\u5747\u7f13\u5b58 8 \u5929\u3002\u7279\u522b\u5730\uff0c301 \u54cd\u5e94\u7f13\u5b58 2 \u5c0f\u65f6\uff0c302 \u54cd\u5e94\u7f13\u5b58 20 \u5206\u949f 2.\u9488\u5bf9\u52a8\u6001\u8d44\u6e90\uff0c\u7a0b\u5e8f\u4f1a\u81ea\u52a8\u8bc6\u522b\uff0c\u5219\u4e0d\u8fdb\u884c\u7f13\u5b58 3.\u5bf9\u4e8e\u5176\u4ed6\u5927\u4e8e\u7b49\u4e8e 400 \u7684\u4e0d\u6b63\u5e38\u54cd\u5e94\uff0c\u5219\u4e0d\u8fdb\u884c\u7f13\u5b58 \u7f13\u5b58\u4f18\u5148\u7ea7 \u8bf7\u6839\u636e\u5177\u4f53\u7f13\u5b58\u4f18\u5148\u7ea7\u60c5\u51b5\u5408\u7406\u914d\u7f6e\u7f13\u5b58\u7b56\u7565\uff0c\u53c8\u62cd\u4e91 CDN \u52a0\u901f\u5e73\u53f0\u76ee\u524d\u7684\u7f13\u5b58\u4f18\u5148\u7ea7\u5982\u4e0b\uff1a \u4e0d\u7f13\u5b58\u914d\u7f6e\uff08\u540e\u53f0\u8bbe\u7f6e\uff09 > \u81ea\u5b9a\u4e49\u7f13\u5b58\u914d\u7f6e\uff08\u540e\u53f0\u914d\u7f6e\uff09 > \u6e90\u7ad9\u7f13\u5b58\u914d\u7f6e > \u9ed8\u8ba4\u7f13\u5b58\u7b56\u7565\u3002 \u6ce8\u610f\u4e8b\u9879\uff1a \u6e90\u7ad9\u7f13\u5b58\u914d\u7f6e\uff0c\u6307 Cache-Control \u548c Expires \u8bf7\u6c42\u5934\u7684\u8bbe\u7f6e \u4ee5\u4e0a\u7f13\u5b58\u914d\u7f6e\u4f18\u5148\u7ea7\u76ee\u524d\u4e0d\u652f\u6301\u987a\u5e8f\u8c03\u8282\uff0c\u540e\u7eed\u6211\u4eec\u4f1a\u8003\u8651\u652f\u6301 \u7279\u522b\u58f0\u660e \u9488\u5bf9\u4f7f\u7528\u53c8\u62cd\u4e91\u5b58\u50a8\u670d\u52a1\u7684\u5ba2\u6237\uff0c\u6211\u4eec\u6682\u65f6\u4e0d\u652f\u6301\u7f13\u5b58\u914d\u7f6e\u7684\u81ea\u5b9a\u4e49\u8bbe\u7f6e\uff0c\u6211\u4eec\u9ed8\u8ba4\u7ed9\u51fa\u4e86\u4e00\u4e2a\u9ed8\u8ba4\u7684\u7f13\u5b58\u914d\u7f6e\u89c4\u5219\uff0c\u5177\u4f53\u5982\u4e0b\uff1a \u5bf9\u4e8e\u6b63\u5e38\u7684\u72b6\u6001\u7801\uff08\u5927\u4e8e\u7b49\u4e8e 200 \u5c0f\u4e8e 400\uff09\uff1a8 \u5929 \u5bf9\u4e8e\u5176\u4ed6\u5927\u4e8e\u7b49\u4e8e 400 \u7684\u4e0d\u6b63\u5e38\u54cd\u5e94\u7f13\u5b58 5 \u5206\u949f \u52a8\u9759\u81ea\u52a8\u5206\u79bb \u9488\u5bf9\u4f7f\u7528 \u81ea\u6709\u6e90 \u7684 CDN \u670d\u52a1\u800c\u8a00\uff0c\u5f53\u6ca1\u6709\u5339\u914d\u5230\u81ea\u5b9a\u4e49\u7f13\u5b58\u89c4\u5219\u4e14\u6e90\u7ad9\u4e5f\u6ca1\u6709\u8fd4\u56de\u4efb\u4f55\u6709\u6548\u7684\u7f13\u5b58\u5934\u65f6\uff0c\u6211\u4eec\u5c31\u4f1a\u5bf9\u56de\u6e90\u5185\u5bb9\u8fdb\u884c\u52a8\u9759\u5185\u5bb9\u8bc6\u522b\u3002\u7279\u522b\u5730\uff0c\u6211\u4eec\u4f1a\u6839\u636e\u54cd\u5e94\u5934\u4e2d\u7684 Content-Type \u5b57\u6bb5\u548c URL \u4e2d\u7684\u6587\u4ef6\u540e\u7f00\u540d\u6765\u5224\u65ad\u662f\u5426\u662f\u9759\u6001\u5185\u5bb9\uff0c\u5176\u4e2d Content-Type \u5339\u914d\u4f18\u5148\u7ea7\u9ad8\u4e8e\u6587\u4ef6\u540e\u7f00\u540d\u3002 \u53c2\u8003\u5217\u8868 \u4ee5\u4e0b\u662f\u6211\u4eec\u7ef4\u62a4\u7684\u4e00\u4efd Content-Type \u548c\u6587\u4ef6\u540e\u7f00\u540d\u5217\u8868\uff0c\u82e5\u6ee1\u8db3\u5339\u914d\u6211\u4eec\u5c31\u8ba4\u4e3a\u662f\u9759\u6001\u5185\u5bb9\uff1a Content-Type \u5217\u8868 text/css text/javascript application/javascript application/x-javascript image/gif image/png image/jpeg image/webp image/tiff image/x-icon image/x-ms-bmp image/svg+xml application/font-woff application/java-archive application/msword application/pdf application/postscript application/zip application/octet-stream application/vnd.openxmlformats-officedocument.wordprocessingml.document application/vnd.openxmlformats-officedocument.spreadsheetml.sheet application/vnd.openxmlformats-officedocument.presentationml.presentation audio/mpeg audio/ogg audio/x-m4a video/mp4 video/x-flv video/x-m4v \u6587\u4ef6\u540e\u7f00\u540d\u5217\u8868 css js jpg jpeg gif ico png bmp pict csv doc pdf pls ppt tif tiff eps ejs swf midi mida ttf eot woff otf svg svgz webp docx xlsx xls pptx ps class jar bz2 bzip exe flv gzip rar rtf tgz gz txt zip mp3 mp4 ogg m4a m4v apk","title":"3.1 \u7f13\u5b58\u8fc7\u671f\u914d\u7f6e"},{"location":"cdn/config/#32","text":"\u529f\u80fd\u8bf4\u660e CDN \u63d0\u4f9b\u53c2\u6570\u8fc7\u6ee4\u914d\u7f6e\u7b49\u9009\u9879\uff0c\u60a8\u53ef\u4ee5\u6839\u636e\u5b9e\u9645\u4e1a\u52a1\u60c5\u51b5\uff0c\u63a7\u5236\u662f\u5426\u5bf9\u8bbf\u95ee\u6216\u8005\u56de\u6e90 URL \u4e2d\u7684\u5e26 \u201c\uff1f\u201d \u540e\u7684\u53c2\u6570\u8fdb\u884c\u8fc7\u6ee4\u64cd\u4f5c\u3002\u53c2\u6570\u8ddf\u968f\u529f\u80fd\u5305\u62ec\u4e09\u79cd\u6a21\u5f0f\uff0c\u5206\u522b\u662f \u53c2\u6570\u4e0d\u8ddf\u968f \u3001 \u5168\u7a0b\u8ddf\u968f \u3001 \u56de\u6e90\u8ddf\u968f \uff0c\u7cfb\u7edf\u9ed8\u8ba4\u4e3a \u5168\u7a0b\u8ddf\u968f \u6a21\u5f0f\u3002\u4e00\u822c\u60c5\u51b5\u4e0b\uff0c\u6839\u636e\u4e1a\u52a1\u60c5\u51b5\uff0c\u5efa\u8bae\u9009\u62e9 \u53c2\u6570\u4e0d\u8ddf\u968f \u6765\u63d0\u9ad8\u8d44\u6e90\u6587\u4ef6\u7f13\u5b58\u547d\u4e2d\u7387\u3002\u8be6\u7ec6\u4ecb\u7ecd\u5982\u4e0b\uff1a \u53c2\u6570\u4e0d\u8ddf\u968f \u8bf4\u660e\uff1a\u5f00\u542f\u540e\uff0c\u7cfb\u7edf\u4f1a\u8fc7\u6ee4\u8bf7\u6c42\u4e2d\u7684\u67e5\u8be2\u5b57\u7b26\u4e32\uff0c\u5e76\u4e14\u67e5\u8be2\u5b57\u7b26\u4e32\u4e0d\u4f1a\u4f20\u9012\u7ed9\u6e90\u7ad9 \u793a\u4f8b\uff1a\uff08\u8bbf\u95ee\uff09/foo.js?a=1&b=2 => \uff08\u7f13\u5b58\uff09/foo.js => \uff08\u56de\u6e90\uff09/foo.js \u5168\u7a0b\u8ddf\u968f \u8bf4\u660e\uff1a\u5f00\u542f\u540e\uff0c\u5c06\u4e0d\u518d\u8fc7\u6ee4\u8bf7\u6c42\u4e2d\u7684\u67e5\u8be2\u5b57\u7b26\u4e32\uff0c\u5e76\u5c06\u67e5\u8be2\u5b57\u7b26\u4e32\u4f20\u9012\u7ed9\u6e90\u7ad9 \u793a\u4f8b\uff1a\uff08\u8bbf\u95ee\uff09/foo.js?a=1&b=2 => \uff08\u7f13\u5b58\uff09/foo.js?a=1&b=2 => \uff08\u56de\u6e90\uff09/foo.js?a=1&b=2 \u56de\u6e90\u8ddf\u968f \u8bf4\u660e\uff1a\u5f00\u542f\u540e\uff0c\u4f1a\u8fc7\u6ee4\u8bf7\u6c42\u4e2d\u7684\u67e5\u8be2\u5b57\u7b26\u4e32\uff0c\u5728\u8bbf\u95ee\u56de\u6e90\u9636\u6bb5\u4f1a\u5c06\u67e5\u8be2\u5b57\u7b26\u4e32\u4f20\u9012\u7ed9\u6e90\u7ad9 \u793a\u4f8b\uff1a\uff08\u8bbf\u95ee\uff09/foo.js?a=1&b=2 => \uff08\u7f13\u5b58\uff09/foo.js => \uff08\u56de\u6e90\uff09/foo.js?a=1&b=2 \u914d\u7f6e\u5f15\u5bfc \u767b\u5f55 CDN\u63a7\u5236\u53f0 \uff0c\u9009\u62e9\u9700\u8981\u914d\u7f6e\u7684\u670d\u52a1\uff0c\u4f9d\u6b21\u8fdb\u5165\uff1a\u670d\u52a1\u7ba1\u7406 > \u529f\u80fd\u914d\u7f6e > \u7f13\u5b58\u914d\u7f6e > \u53c2\u6570\u8ddf\u968f\uff0c\u70b9\u51fb\u3010\u7ba1\u7406\u3011\u6309\u94ae\u5373\u53ef\u5f00\u59cb\u914d\u7f6e\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u5982\u4e0a\u56fe\u6240\u793a\uff0c\u7528\u6237\u53ef\u4ee5\u6839\u636e\u4e1a\u52a1\u60c5\u51b5\u6765\u5408\u7406\u9009\u9879\u3002 \u6ce8\u610f\uff1a\u53c2\u6570\u8ddf\u968f\u529f\u80fd\uff0c\u53ef\u4ee5\u914d\u5408\u7f13\u5b58\u8fc7\u671f\u914d\u7f6e\u529f\u80fd\u6765\u4f7f\u7528\u3002","title":"3.2 \u53c2\u6570\u8ddf\u968f"},{"location":"cdn/config/#33","text":"\u529f\u80fd\u8bf4\u660e \u901a\u5e38 CDN \u8282\u70b9\u662f\u4ee5\u6574\u6761 URL \u4e3a\u7c92\u5ea6\u5bf9\u6587\u4ef6\u8fdb\u884c\u7f13\u5b58\u7684\uff0c\u7136\u800c URL \u4e2d\u53c2\u6570\u7684\u4e0d\u540c\u6392\u5217\u7ec4\u5408\u4f7f\u5f97 CDN \u8282\u70b9\u4f1a\u5c06\u540c\u4e00\u4efd\u6587\u4ef6\u7f13\u5b58\u591a\u4efd\uff0c\u5f00\u542f\u53c2\u6570\u987a\u5e8f\u8bc6\u522b\u529f\u80fd\u4e4b\u540e\uff0c\u53ef\u4ee5\u4f7f\u5f97\u8d44\u6e90\u6587\u4ef6\u53ea\u7f13\u5b58\u4e00\u4efd\uff0c\u4ece\u800c\u63d0\u9ad8\u8d44\u6e90\u6587\u4ef6\u7684\u7f13\u5b58\u547d\u4e2d\u7387\u3002 \u5b9e\u73b0\u539f\u7406 \u4f8b\u5982\u4e0b\u65b9\u4e24\u6761 URL\uff0c\u5bf9\u5e94\u7684\u8d44\u6e90\u6587\u4ef6\u662f\u76f8\u540c\u7684\uff0cCDN \u8282\u70b9\u662f\u5206\u5f00\u7f13\u5b58\u7684\uff1a https://www.upyun.com/test.jpg?a=1&b=2&c=3 https://www.upyun.com/test.jpg?c=3&b=2&a=1 \u529f\u80fd\u5f00\u542f\u540e\uff0cCDN \u8282\u70b9\u6536\u5230\u7528\u6237\u8bf7\u6c42\uff0c\u9996\u5148\u5bf9 URL \u4e2d\u7684\u53c2\u6570\u6309\u7279\u6709\u7684\u89c4\u5219\u8fdb\u884c\u6392\u5e8f\uff0c\u7136\u540e\u518d\u67e5\u627e\u5339\u914d\u8282\u70b9\u7f13\u5b58\u6216\u76f4\u63a5\u56de\u6e90\u83b7\u53d6\u6587\u4ef6\uff0c\u4e5f\u5c31\u662f\u8bf4\u4e0b\u65b9\u8fd9\u4e9b URL\uff1a https://www.upyun.com/test.jpg?a=1&b=2&c=3 https://www.upyun.com/test.jpg?a=1&c=3&b=2 https://www.upyun.com/test.jpg?b=2&a=1&c=3 https://www.upyun.com/test.jpg?b=2&c=3&a=1 https://www.upyun.com/test.jpg?c=3&a=1&b=2 https://www.upyun.com/test.jpg?c=3&b=2&a=1 \u6700\u540e\u7684\u7ed3\u679c\u662f\uff0cCDN \u8282\u70b9\u5c06\u53ea\u7f13\u5b58\u4e00\u4efd\uff1a https://www.upyun.com/test.jpg?a=1&b=2&c=3 \u914d\u7f6e\u5f15\u5bfc \u767b\u5f55 CDN\u63a7\u5236\u53f0 \uff0c\u9009\u62e9\u9700\u8981\u914d\u7f6e\u7684\u670d\u52a1\uff0c\u4f9d\u6b21\u8fdb\u5165\uff1a\u670d\u52a1\u7ba1\u7406 > \u529f\u80fd\u914d\u7f6e > \u7f13\u5b58\u914d\u7f6e > \u53c2\u6570\u987a\u5e8f\u8bc6\u522b\uff0c\u6ed1\u52a8\u53f3\u8fb9\u7684\u6309\u94ae\u5373\u53ef\u5f00\u542f\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u5982\u4e0a\u56fe\u6240\u793a\uff0c\u70b9\u51fb\u3010\u786e\u5b9a\u3011\u5373\u53ef\u5f00\u542f\u3002 \u6ce8\u610f\u4e8b\u9879 \u5f00\u542f\u6b64\u529f\u80fd\u540e\uff0c\u56e0 CDN \u8282\u70b9\u4f1a\u5c06\u7528\u6237\u8bbf\u95ee URL \u4e2d\u7684\u53c2\u6570\u91cd\u65b0\u6392\u5e8f\u540e\u8fdb\u884c\u7f13\u5b58\u5339\u914d\uff0c\u6240\u4ee5\u5c06\u6709\u53ef\u80fd\u65e0\u6cd5\u5339\u914d\u4e4b\u524d\u5df2\u7f13\u5b58\u7684\u6587\u4ef6\uff0c\u5bfc\u81f4\u56de\u6e90\u5e26\u5bbd\u589e\u5927\uff0c\u6240\u4ee5\u8bf7\u8c28\u614e\u5f00\u542f\uff0c\u5efa\u8bae\u5728\u521a\u521b\u5efa\u65b0\u670d\u52a1\u65f6\u5f00\u542f\uff1b \u8be5\u7279\u6027\u4f9d\u8d56\u4e8e\u53c2\u6570\u8ddf\u968f\u7279\u6027\uff0c\u4e5f\u5373\u8fc7\u6ee4\u53c2\u6570\u5728\u5173\u95ed\u7684\u72b6\u6001\u4e0b\u624d\u4f1a\u6709\u6548\u3002","title":"3.3 \u53c2\u6570\u987a\u5e8f\u8bc6\u522b"},{"location":"cdn/config/#34","text":"\u529f\u80fd\u8bf4\u660e \u5206\u6bb5\u7f13\u5b58\u529f\u80fd\u4f7f\u5f97\u7f13\u5b58\u7684\u57fa\u672c\u5355\u4f4d\u53d8\u6210\u4e86\u5757\uff0c\u5e76\u4e14\u5728\u7f13\u5b58\u5757\u5927\u5c0f\u4ee5\u53ca\u56de\u6e90\u8bf7\u6c42\u5927\u5c0f\u4e0a\u53ef\u4ee5\u91c7\u7528\u4e0d\u540c\u7c92\u5ea6\u8fdb\u884c\u63a7\u5236\uff0c\u6700\u7ec8\u5b9e\u73b0\u6309\u5757\u7f13\u5b58\uff0c\u6309\u9700\u56de\u6e90\u3002 \u5f00\u542f\u8be5\u529f\u80fd\u53ef\u6709\u6548\u964d\u4f4e\u5927\u6587\u4ef6\u56de\u6e90\u7387\uff0c\u4e5f\u53ef\u4ee5\u63d0\u9ad8\u6587\u4ef6\u5728 CDN \u8282\u70b9\u7684\u7f13\u5b58\u547d\u4e2d\u7387\uff0c\u540c\u65f6\u907f\u514d\u4e86\u62c9\u53d6\u5b8c\u6574\u6587\u4ef6\u5bfc\u81f4\u7684\u6e90\u7ad9\u5e26\u5bbd\u6d6a\u8d39\u3002\u7279\u522b\u5730\uff0c\u5f00\u542f\u8be5\u7279\u6027\u4e4b\u540e\uff0cCDN \u8282\u70b9\u4f1a\u4ee5 Range \u8bf7\u6c42\u56de\u6e90\u3002 \u914d\u7f6e\u5f15\u5bfc \u767b\u9646 CDN \u63a7\u5236\u53f0 \uff0c\u4f9d\u6b21\u8fdb\u5165\uff1a\u670d\u52a1 > \u529f\u80fd\u914d\u7f6e > \u7f13\u5b58\u914d\u7f6e > \u5206\u6bb5\u7f13\u5b58\uff0c\u70b9\u51fb\u300c\u7ba1\u7406\u300d\u6309\u94ae\u5373\u53ef\u5f00\u59cb\u914d\u7f6e\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u9ed8\u8ba4\u914d\u7f6e\uff1a\u8be5\u7279\u6027\u4f1a\u9ed8\u8ba4\u5f00\u542f\uff0c\u60a8\u53ef\u4ee5\u6709\u9009\u62e9\u6027\u7684\u5173\u95ed\u8be5\u7279\u6027\u3002\u7279\u522b\u5730\uff0c\u6211\u4eec\u9488\u5bf9\u5206\u6bb5\u7f13\u5b58\u9884\u7f6e\u4e86\u6587\u4ef6\u540e\u7f00\u6a21\u677f\uff0c\u9ed8\u8ba4\u9884\u7f6e\u540e\u7f00\u5982\u4e0b\uff1a \u89c6\u9891\uff1aAVI\u3001MP4\u3001FLV\u3001MOV\u30013GP\u3001ASF\u3001WMV\u3001MPG\u3001F4V\u3001M4V\u3001MKV\u3001VOB\u3001M3U8\u3001TS \u3001RMVB\u3001DAT\u3001RM \u97f3\u9891\uff1aMP3\u3001OGG\u3001M4A\u3001WMA\u3001AIF\u3001AU \u5b89\u88c5\u5305\uff1aAPK\u3001ZIP\u3001EXE\u3001RAR\u3001IPA\u3001PXL\u3001DEB\u3001SIS\u3001SISX\u3001JAR\u3001XAP \u6e38\u620f\u4e0b\u8f7d\uff1aSO\u3001CUE\u3001CCD\u3001MDS\u3001IMG\u30017Z \u5176\u5b83\uff1aCAB\u3001DHP\u3001GZ\u3001ISO\u3001MPQ\u3001PBCV\u3001PXL\u3001QNP\u3001R00\u3001XY\u3001XY2 \u8ffd\u52a0\u81ea\u5b9a\u4e49\uff1a\u4e3a\u4e86\u65b9\u4fbf\u7075\u6d3b\u914d\u7f6e\uff0c\u4e5f\u5373\u53ef\u4ee5\u6839\u636e\u6587\u4ef6\u540e\u7f00\u6216\u8005\u901a\u914d\u7b26\u89c4\u5219\u6765\u914d\u7f6e\u662f\u5426\u5f00\u542f\u5206\u6bb5\u7f13\u5b58\u529f\u80fd\uff0c\u5982\u622a\u56fe\u6240\u793a\uff1a \u5728\u8be5\u914d\u7f6e\u754c\u9762\uff0c\u60a8\u53ef\u4ee5\u586b\u5199\u8d44\u6e90\u8def\u5f84\uff0c\u7136\u540e\u70b9\u51fb\u3010\u6dfb\u52a0\u3011\u6309\u94ae\uff0c\u4fdd\u5b58\u5373\u53ef\u3002\u8def\u5f84\u89c4\u5219\u652f\u6301 * \u901a\u914d\u7b26\uff0c\u4f8b\u5982\uff1a /a/*.mp4 /b/*.apk /* /123/* \u914d\u7f6e\u6548\u679c \u5047\u8bbe\u6700\u7ec8\u7528\u6237\u53d1\u8d77\u4e86\u8d44\u6e90\u8bf7\u6c42\uff0c\u8bf7\u6c42\u7684 URL \u4e3a\uff1a http://www.example.com/download/game.zip \uff0cCDN \u8282\u70b9\u6536\u5230\u8bf7\u6c42\u540e\uff0c\u82e5\u547d\u4e2d\u5219\u54cd\u5e94\u5bf9\u5e94\u5206\u6bb5\u6587\u4ef6\u7ed9\u6700\u7ec8\u7528\u6237\uff0c\u672a\u547d\u4e2d\u7684\u5206\u6bb5 CDN \u8282\u70b9\u5219\u56de\u6e90\u53d1\u8d77 Range \u8bf7\u6c42\u83b7\u53d6\u8d44\u6e90\u6587\u4ef6\u3002 1.\u5f00\u542f\u5206\u6bb5\u7f13\u5b58 \u82e5\u6700\u7ec8\u7528\u6237\u53d1\u8d77\u8d44\u6e90\u8bf7\u6c42\uff0cCDN \u8282\u70b9\u4e0a\u5df2\u7ecf\u547d\u4e2d\u8be5\u5206\u6bb5\uff0c\u5219\u76f4\u63a5\u54cd\u5e94\u7ed9\u6700\u7ec8\u7528\u6237 \u82e5 CDN \u8282\u70b9\u672a\u547d\u4e2d\u7f13\u5b58\uff0c\u5219 CDN \u8282\u70b9\u56de\u6e90\u4f7f\u7528 Range \u8bf7\u6c42\uff0c\u5206\u6bb5\u83b7\u53d6\u8d44\u6e90\u6587\u4ef6 2.\u5173\u95ed\u5206\u6bb5\u7f13\u5b58 \u8282\u70b9\u6587\u4ef6\u7f13\u5b58\u8fc7\u671f\u4e4b\u540e\uff0c\u4f1a\u5411\u6e90\u7ad9\u83b7\u53d6\u6574\u4e2a\u8d44\u6e90\u6587\u4ef6 3.\u5206\u6bb5\u7f13\u5b58\u9884\u52a0\u8f7d \u5f00\u542f\u5206\u6bb5\u7f13\u5b58\u529f\u80fd\u4e4b\u540e\uff0c\u8be5\u7279\u6027\u4f1a\u9ed8\u8ba4\u5f00\u542f\u3002\u5f53\u6700\u7ec8\u7528\u6237\u8bf7\u6c42\u7b2c\u4e00\u4e2a\u5206\u6bb5\u6587\u4ef6\u65f6\uff0cCDN \u4f1a\u63d0\u524d\u53bb\u4e0b\u8f7d\u540e\u9762\u51e0\u4e2a\u5206\u6bb5\u6587\u4ef6\uff0c\u8fdb\u800c\u63d0\u9ad8\u6587\u4ef6\u4e0b\u8f7d\u901f\u5ea6\u3002 \u6ce8\u610f\u4e8b\u9879 \u6e90\u7ad9\u9700\u8981\u652f\u6301 Range \u8bf7\u6c42\uff0c\u5426\u5219\u4f1a\u5bfc\u81f4\u56de\u6e90\u5931\u8d25\uff1b\u4e25\u683c\u6765\u8bf4\uff0c\u6211\u4eec\u53ea\u901a\u8fc7 Accept-Ranges: bytes \u8fd9\u4e2a\u5934\u6765\u5224\u65ad\u6e90\u652f\u4e0d\u652f\u6301 Range \u8bf7\u6c42 \uff0c\u5426\u5219\u5373\u4f7f\u5f00\u542f\u4e86\u5206\u6bb5\u7f13\u5b58\u7279\u6027\uff0c\u4e5f\u4e0d\u4f1a\u751f\u6548\uff1b \u8be5\u529f\u80fd\u914d\u7f6e\u540e\u4e0d\u4f1a\u7acb\u5373\u751f\u6548\uff0c\u9700\u5728\u6587\u4ef6\u7f13\u5b58\u8fc7\u671f\u6216\u8005\u6587\u4ef6\u7f13\u5b58\u88ab\u4e3b\u52a8\u5237\u65b0\u4e4b\u540e\u65b9\u53ef\u751f\u6548 \u8be5\u529f\u80fd\u4ec5\u9488\u5bf9\u9759\u6001\u6587\u4ef6\uff0c\u52a8\u6001\u5185\u5bb9\u5f00\u542f\u5206\u6bb5\u7f13\u5b58\u4f1a\u53ef\u80fd\u4f1a\u53d1\u751f\u9519\u8bef\uff0c\u8bf7\u8c28\u614e\u4f7f\u7528\uff1b \u8be5\u529f\u80fd\u5f00\u542f\u540e\uff0c\u8d44\u6e90\u5728 CDN \u8282\u70b9\u4e0a\u4f1a\u8fdb\u884c\u5206\u6bb5\u7f13\u5b58\uff0c\u5982\u679c\u8981\u7acb\u9a6c\u5173\u95ed\u8be5\u7279\u6027\uff0c\u53ef\u901a\u8fc7\u624b\u52a8\u5237\u65b0\u6587\u4ef6\u6765\u89e3\u51b3\uff1b \u5982\u679c\u60a8\u5df2\u7ecf\u4f7f\u7528\u53c8\u62cd\u4e91\u5bf9\u8c61\u5b58\u50a8\u670d\u52a1\uff0c\u8be5\u7279\u6027\u5df2\u7ecf\u9ed8\u8ba4\u5f00\u542f\uff0c\u65e0\u9700\u505a\u4efb\u4f55\u914d\u7f6e\uff1b","title":"3.4 \u5206\u6bb5\u7f13\u5b58"},{"location":"cdn/config/#35","text":"\u529f\u80fd\u8bf4\u660e \u6d4f\u89c8\u5668\u7f13\u5b58\u7528\u4e8e\u8bbe\u7f6e\u8d44\u6e90\u6587\u4ef6\u5728\u5ba2\u6237\u7aef\uff08\u6d4f\u89c8\u5668\uff09\u7684\u7f13\u5b58\u8fc7\u671f\u65f6\u95f4\u8bbe\u7f6e\uff0c\u53ef\u81ea\u5b9a\u4e49\u9700\u8981\u5728\u6d4f\u89c8\u5668\u8fdb\u884c\u7279\u6b8a\u7f13\u5b58\u7684\u8d44\u6e90\u8def\u5f84\u53ca\u7f13\u5b58\u65f6\u95f4\u3002\u8d44\u6e90\u8def\u5f84\u7684\u8bbe\u7f6e\u652f\u6301\u6309\u6587\u4ef6\u8def\u5f84\u548c\u6587\u4ef6\u6269\u5c55\u540d\u8bbe\u7f6e\u3002 \u914d\u7f6e\u5f15\u5bfc \u767b\u5f55 CDN\u63a7\u5236\u53f0 \uff0c\u9009\u62e9\u9700\u8981\u914d\u7f6e\u7684\u670d\u52a1\uff0c\u4f9d\u6b21\u8fdb\u5165\uff1a\u670d\u52a1\u7ba1\u7406 > \u529f\u80fd\u914d\u7f6e > \u7f13\u5b58\u914d\u7f6e > \u3010\u6d4f\u89c8\u5668\u7f13\u5b58\u3011\uff0c\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u70b9\u51fb\u754c\u9762\u53f3\u8fb9\u7684\u3010\u7ba1\u7406\u3011\u6309\u94ae\u5373\u53ef\u5f00\u59cb\u914d\u7f6e\uff1a \u5728\u6b64\u914d\u7f6e\u754c\u9762\uff0c\u53ef\u4ee5\u5bf9\u5df2\u914d\u7f6e\u7684\u7f13\u5b58\u7b56\u7565\u8fdb\u884c\u7ba1\u7406\u64cd\u4f5c\uff0c\u4e5f\u53ef\u4ee5\u70b9\u51fb\u53f3\u4e0a\u89d2\u7684\u3010\u6dfb\u52a0\u914d\u7f6e\u3011\u6309\u94ae\uff0c\u65b0\u589e\u914d\u7f6e\u7b56\u7565\uff0c\u5982\u56fe\uff1a \u6839\u636e\u81ea\u8eab\u8981\u6c42\uff0c\u6dfb\u52a0\u8d44\u6e90\u8def\u5f84\u4ee5\u53ca\u7f13\u5b58\u65f6\u95f4\uff0c\u70b9\u51fb\u3010\u4fdd\u5b58\u3011\u6309\u94ae\u5373\u53ef\uff0c\u5176\u4e2d\u8d44\u6e90\u8def\u5f84\u652f\u6301 * \u901a\u914d\u7b26\uff0c\u4f8b\u5982\uff1a /a/*.mp4 /b/*.apk /* /123/* \u4e5f\u53ef\u4ee5\u4e3a\u6587\u4ef6\u540e\u7f00\u683c\u5f0f\uff0c\u4f8b\u5982\uff1a /*.(txt,doc,wri,docs,css,js,dot,xml,log,bat,csv) /*.(wav,mp3,wmv,rmi,aac,mp4,rmvb,mkv,avi,flv,swf,rm,mov,movie,qt) \u6ce8\u610f\u4e8b\u9879 \u5982\u679c\u8bbe\u7f6e\u7684\u6d4f\u89c8\u5668\u7f13\u5b58\u65f6\u95f4\u5927\u4e8e\u6587\u4ef6\u5728 CDN \u8282\u70b9\u4e0a\u7684\u7f13\u5b58\u8fc7\u671f\u65f6\u95f4\uff0c\u5219\u6b64\u5904\u8bbe\u7f6e\u7684\u6d4f\u89c8\u5668\u7f13\u5b58\u8fc7\u671f\u65f6\u95f4\u4f1a\u5931\u6548\uff0c\u4ecd\u4ee5 CDN \u8282\u70b9\u8bbe\u7f6e\u7684\u7f13\u5b58\u8fc7\u671f\u65f6\u95f4\u4e3a\u51c6\uff1b \u6d4f\u89c8\u5668\u7f13\u5b58\u8bbe\u7f6e\u9ed8\u8ba4\u5339\u914d\u7684\u72b6\u6001\u7801\u8303\u56f4\u4e3a\uff1a\u5927\u4e8e\u7b49\u4e8e 200 \u5c0f\u4e8e 400\uff0c\u8be5\u9879\u914d\u7f6e\u4e0d\u4f1a\u5f71\u54cd CDN \u7f13\u5b58\u670d\u52a1\u5668\u7684\u884c\u4e3a\u3002","title":"3.5 \u6d4f\u89c8\u5668\u7f13\u5b58"},{"location":"cdn/config/#4","text":"","title":"4. \u6027\u80fd\u4f18\u5316"},{"location":"cdn/config/#41-webp","text":"\u529f\u80fd\u8bf4\u660e WebP \u81ea\u9002\u5e94\u529f\u80fd\u662f CDN \u5e73\u53f0\u667a\u80fd\u5224\u65ad\u5ba2\u6237\u7aef\u6d4f\u89c8\u5668\u662f\u5426\u652f\u6301 WebP \u89e3\u7801\uff0c\u5982\u652f\u6301\u5219\u8fd4\u56de WebP \u683c\u5f0f\u56fe\u7247\uff0c\u5426\u5219\u8fd4\u56de\u539f\u56fe\uff0c\u5ba2\u6237\u7aef\u4ee5\u53ca\u6e90\u7ad9\u65e0\u9700\u4efb\u4f55\u6539\u52a8\u3002\u5f00\u542f\u8be5\u7279\u6027\uff0c\u53ef\u4ee5\u6709\u6548\u8282\u7701 CDN \u4f20\u8f93\u5e26\u5bbd\uff0c\u52a0\u901f\u56fe\u7247\u6e32\u67d3\u901f\u5ea6\u3002 \u5982\u4f55\u5b9e\u73b0\uff1f WebP \u81ea\u9002\u5e94\u5927\u81f4\u7684\u5904\u7406\u6d41\u7a0b\u5982\u4e0b\uff1a 1.CDN \u5982\u4f55\u5224\u65ad\u5ba2\u6237\u7aef\u662f\u5426\u652f\u6301 WebP ? CDN \u662f\u901a\u8fc7 HTTP Accept \u5934\u6765\u5224\u65ad\u7684\uff0c\u5982\u679c\u652f\u6301\uff0c\u5219\u8fd4\u56de WebP \u526f\u672c\u5e76\u8fdb\u884c\u7f13\u5b58\uff1b\u5982\u679c\u4e0d\u652f\u6301\uff0c\u5219\u8fd4\u56de\u539f\u56fe\u3002\u4ee5 Chrome \u6d4f\u89c8\u5668\u4e3a\u4f8b\uff1a accept:image/webp,image/apng,image/*,*/*;q=0.8 \u5982\u4e0a\u5217\u8868\u53ef\u4ee5\u770b\u51fa\uff0c\u5f53 Accept \u8bf7\u6c42\u5934\u91cc\u9762\u5982\u679c\u6709 image/webp \u5b57\u6bb5\uff0c\u5219\u8bf4\u660e\u5ba2\u6237\u7aef\u652f\u6301 WebP \u89e3\u7801\u3002 2.CDN \u5982\u4f55\u5b9e\u73b0\u5b9e\u65f6\u56fe\u7247\u683c\u5f0f\u8f6c\u6362\uff1f \u9488\u5bf9\u7528\u6237\u6e90\u7ad9\u5e76\u975e WebP \u683c\u5f0f\u56fe\u7247\u7684\u65f6\uff0cCDN \u5c42\u9700\u8981\u652f\u6301\u5c06\u539f\u56fe\u56fe\u7247\u7684\u5b9e\u65f6\u8f6c\u6362\u4e3a WebP \u683c\u5f0f\u526f\u672c\uff0c\u8fd9\u4e2a\u5728 CDN \u5c42\u9762\u662f\u65e0\u7f1d\u652f\u6301\u7684\u3002\u6d41\u7a0b\u662f\u8fd9\u6837\u7684\uff1a \u5ba2\u6237\u7aef\u6d4f\u89c8\u5668\u8bf7\u6c42\u4e00\u4e2a\u56fe\u7247\u8d44\u6e90\uff0c\u4f8b\u5982\uff1ahttp://webp.example.com/test.png; CDN \u901a\u8fc7 Accept \u5934\u5df2\u7ecf\u5224\u65ad\u5ba2\u6237\u7aef\u6d4f\u89c8\u5668\u652f\u6301 WebP \u683c\u5f0f\u7684\u56fe\u7247\uff1b CDN \u56de\u7528\u6237\u6e90\u7ad9\u53d6\u56de\u539f\u56fe\u5e76\u5c06\u539f\u56fe\u5b9e\u65f6\u8f6c\u4e3a WebP \u683c\u5f0f\u7684\u56fe\u7247\uff0c\u5e76\u54cd\u5e94\u7ed9\u5ba2\u6237\u7aef\u6d4f\u89c8\u5668\u3002 \u8fd9\u91cc\u503c\u5f97\u5f3a\u8c03\u7684\u662f\uff0c\u53c8\u62cd\u4e91 CDN \u5df2\u7ecf\u65e0\u7f1d\u517c\u5bb9\u4e86\u5404\u79cd\u4f5c\u56fe\u573a\u666f\u548c\u8bbf\u95ee\u65b9\u5f0f\uff0c\u5177\u4f53\u5305\u62ec\uff1a \u539f\u56fe\u8bbf\u95ee \uff0c\u793a\u4f8b\uff1a/a.jpg \u81ea\u5b9a\u4e49\u7248\u672c\u53f7\u4f5c\u56fe\uff0c\u793a\u4f8b\uff1a/a.jpg!123 URL \u4f5c\u56fe \uff0c\u793a\u4f8b\uff1a/a.jpg!/format/webp \u81ea\u5b9a\u4e49\u7248\u672c\u53f7 + URL \u4f5c\u56fe\uff1a/a.jpg!123/format/webp \u914d\u7f6e\u5f15\u5bfc \u767b\u9646 CDN \u63a7\u5236\u53f0 \uff0c\u4f9d\u6b21\u8fdb\u5165\uff1a\u670d\u52a1\u7ba1\u7406 > \u529f\u80fd\u914d\u7f6e > \u6027\u80fd\u4f18\u5316 > WebP \u81ea\u9002\u5e94\uff0c\u5f00\u542f\u5373\u53ef\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff1a\uff1a \u5728\u914d\u7f6e\u754c\u9762\uff0c\u6ed1\u52a8\u53f3\u8fb9\u7684\u6309\u94ae\uff0c\u5728\u786e\u5b9a\u5bf9\u8bdd\u6846\u4e0b\uff0c\u70b9\u51fb\u3010\u786e\u5b9a\u3011\u6309\u94ae\u5373\u53ef\u4e00\u952e\u5f00\u542f\u3002 \u6ce8\u610f\u4e8b\u9879 CDN \u5e73\u53f0\u4f1a\u6839\u636e\u8bf7\u6c42\u5934 Accept: image/webp \u6765\u667a\u80fd\u5224\u65ad\u5ba2\u6237\u7aef\u662f\u5426\u652f\u6301 WebP \u89e3\u7801\uff0c\u4e0d\u652f\u6301\u7684\u5ba2\u6237\u7aef\uff0c\u4f1a\u9ed8\u8ba4\u8fd4\u56de\u539f\u59cb\u56fe\u7247\uff0c\u53ef\u4ee5\u65e0\u7f1d\u5207\u6362\uff1b \u5df2\u7ecf\u4f7f\u7528\u4e86\u53c8\u62cd\u4e91\u81ea\u5b9a\u4e49\u7248\u672c\u4f5c\u56fe\u3001URL \u4f5c\u56fe\u3001\u81ea\u5b9a\u4e49\u7248\u672c\u4f5c\u56fe\uff0bURL \u4f5c\u56fe\u7684\u8bf7\u6c42\u4e5f\u65e0\u7f1d\u652f\u6301\u8be5\u7279\u6027\uff1b \u5728 CDN \u8282\u70b9\u672a\u7f13\u5b58 WebP \u526f\u672c\u7684\u60c5\u51b5\u4e0b\uff0cCDN \u5e73\u53f0\u4f1a\u5b9e\u65f6\u751f\u6210 WebP \u526f\u672c\u5e76\u8fd4\u56de\u3002 \u66f4\u591a\u4e86\u89e3\uff0c\u8bf7\u53c2\u7167\uff1a \u5982\u4f55\u901a\u8fc7 WebP \u81ea\u9002\u5e94\u65b9\u6848\u51cf\u5c11\u56fe\u7247\u8d44\u6e90\u5927\u5c0f \uff0c \u79fb\u52a8\u7aef\u5982\u4f55\u4f7f\u7528 WebP\uff08\u4e0a\uff09 \u3001 \u79fb\u52a8\u7aef\u5982\u4f55\u4f7f\u7528 WebP\uff08\u4e0b\uff09 \u3002","title":"4.1 WebP \u81ea\u9002\u5e94"},{"location":"cdn/config/#42-h265","text":"\u529f\u80fd\u8bf4\u660e H.265 \u81ea\u9002\u5e94\u529f\u80fd\u662f CDN \u5e73\u53f0\u667a\u80fd\u5224\u65ad\u5ba2\u6237\u7aef\u662f\u5426\u652f\u6301 H.265 \u89e3\u7801\uff0c\u5982\u652f\u6301\u5219\u8fd4\u56de H.265 \u683c\u5f0f\u89c6\u9891\uff0c\u5426\u5219\u8fd4\u56de\u539f\u59cb\u89c6\u9891\u3002\u901a\u8fc7\u90e8\u7f72 H.265 \u89c6\u9891\uff0c\u53ef\u63d0\u5347\u7ec8\u7aef\u7528\u6237\u89c2\u770b\u4f53\u9a8c\uff0c\u51cf\u5c11\u7f51\u7edc\u4f20\u8f93\u5e26\u5bbd\u3002 \u5982\u4f55\u5b9e\u73b0\uff1f H.265 \u81ea\u9002\u5e94\u5927\u81f4\u7684\u5904\u7406\u6d41\u7a0b\u5982\u4e0b\uff1a 1.\u5ba2\u6237\u7aef\u53d1\u8d77 H.265 \u89c6\u9891\u8d44\u6e90\u8bf7\u6c42\uff0c\u4f8b\u5982\uff1ahttp://h265.example.com/test.mp4\uff1b 2.CDN \u8282\u70b9\u5224\u65ad\u662f\u5426\u6709 H.265 \u7f13\u5b58\u526f\u672c\uff0c\u5982\u6709\u5219\u76f4\u63a5\u54cd\u5e94\u7ed9\u5ba2\u6237\u7aef\uff1b 3.\u8282\u70b9\u5982\u679c\u6ca1\u6709\u7f13\u5b58\u526f\u672c\uff0c\u5219\u56de\u6e90\u7ad9\u83b7\u53d6\u8d44\u6e90\uff0c\u5982\u6709\uff0c\u5219\u8fd4\u56de H.265 \u89c6\u9891\u8d44\u6e90\u5e76\u5728 CDN \u8282\u70b9\u7f13\u5b58\uff1b 4.\u5982\u679c\u6ca1\u6709\uff0c\u5219\u8fd4\u56de\u539f\u59cb\u89c6\u9891\u8d44\u6e90\uff0c\u5e76\u7f13\u5b58 6 \u5206\u949f\uff0c\u7f13\u5b58\u8fc7\u671f\u4e4b\u540e\u4f1a\u56de\u6e90\u63a2\u6d4b\u3002 CDN \u5982\u4f55\u5224\u65ad\u5ba2\u6237\u7aef\u662f\u5426\u652f\u6301 H.265 \u89e3\u7801 ? CDN \u5f53\u524d\u8bc6\u522b\u5ba2\u6237\u7aef\u662f\u5426\u652f\u6301 H.265 \u89e3\u7801\u662f\u901a\u8fc7 HTTP \u8bf7\u6c42\u5934\uff1aAccept-Encoding: h265 \u6765\u5224\u65ad\u7684\uff0cCDN \u6536\u5230\u8be5\u8bf7\u6c42\u4e4b\u540e\uff0c\u518d\u53bb\u5224\u65ad CDN \u8282\u70b9\u662f\u5426\u6709 H.265 \u7f13\u5b58\u526f\u672c\uff0c\u5426\u5219\u76f4\u63a5\u8fd4\u56de\u539f\u59cb\u89c6\u9891\u8d44\u6e90\u3002\u8bf7\u6c42\u8bc6\u522b\u6d41\u7a0b\u5982\u4e0b\u622a\u56fe\u6240\u793a\uff1a \u914d\u7f6e\u5f15\u5bfc \u767b\u9646 CDN \u63a7\u5236\u53f0 \uff0c\u4f9d\u6b21\u8fdb\u5165\uff1a\u670d\u52a1\u7ba1\u7406 > \u529f\u80fd\u914d\u7f6e > \u6027\u80fd\u4f18\u5316 > H.265 \u81ea\u9002\u5e94\uff0c\u5f00\u542f\u5373\u53ef\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff1a\uff1a \u5728\u914d\u7f6e\u754c\u9762\uff0c\u6ed1\u52a8\u53f3\u8fb9\u7684\u6309\u94ae\uff0c\u5728\u786e\u5b9a\u5bf9\u8bdd\u6846\u4e0b\uff0c\u70b9\u51fb\u3010\u786e\u5b9a\u3011\u6309\u94ae\u5373\u53ef\u4e00\u952e\u5f00\u542f\u3002 \u6ce8\u610f\u4e8b\u9879 \u5ba2\u6237\u7aef\u9700\u8981\u6839\u636e\u7ea6\u5b9a\u89c4\u8303\u53d1\u8d77 Accept-Encoding: h265 \u7684\u8bf7\u6c42\u5934\uff0cCDN \u8282\u70b9\u4f1a\u6839\u636e\u6b64\u8bf7\u6c42\u5934\u6765\u5224\u65ad\u5ba2\u6237\u7aef\u662f\u5426\u652f\u6301 H.265 \u89e3\u7801\uff1b CDN \u5f00\u542f H.265 \u81ea\u9002\u5e94\u4e4b\u540e\uff0c\u662f\u7981\u6b62\u5ba2\u6237\u7aef\u7f13\u5b58\u7684\uff08\u4ee5\u907f\u514d\u5916\u90e8\u7684\u4ee3\u7406\u670d\u52a1\u5668\u7f13\u5b58\u5185\u5bb9\uff0c\u4ece\u800c\u5bfc\u81f4\u540e\u9762\u5176\u4ed6\u4e0d\u652f\u6301 H.265 \u683c\u5f0f\u7684\u64ad\u653e\u5668\u4e0b\u8f7d\u5230 H.265 \u683c\u5f0f\u7684\u8d44\u6e90\uff09\uff1b \u6e90\u7ad9\u4e3a\u4e86\u533a\u5206\u539f\u59cb\u89c6\u9891\u548c H.265 \u683c\u5f0f\u89c6\u9891\uff0cH.265 \u89c6\u9891\u5b58\u50a8\u8def\u5f84\u9700\u8981\u7ea6\u5b9a\u89c4\u8303\u4e3a\uff1a{URL}.h265\uff0c \u4ee5\u6b64\u6765\u533a\u5206\u539f\u59cb\u89c6\u9891\u548c H.265 \u89c6\u9891\u3002\u4e5f\u5373\u5728 CDN \u8282\u70b9\u672a\u7f13\u5b58 H.265 \u89c6\u9891\u526f\u672c\u7684\u60c5\u51b5\u4e0b\uff0cCDN \u56de\u6e90\u4f1a\u5e26\u7740\u76f8\u5e94\u7684\u540e\u7f00\u56de\u6e90\u83b7\u53d6 H.265 \u683c\u5f0f\u526f\u672c\u6587\u4ef6\uff1b \u5728 CDN \u56de\u6e90\u672a\u83b7\u53d6\u5230 H.265 \u89c6\u9891\u526f\u672c\u65f6\uff0c\u4f1a\u81ea\u52a8\u8bf7\u6c42\u539f\u59cb\u89c6\u9891\u6587\u4ef6\uff0c\u5e76\u4e14\u5728 CDN \u8282\u70b9\u7f13\u5b58\u8f83\u77ed\u7684\u65f6\u95f4\uff0c\u9ed8\u8ba4\u4e3a 6 \u5206\u949f\u3002","title":"4.2 H.265 \u81ea\u9002\u5e94"},{"location":"cdn/config/#43","text":"\u529f\u80fd\u8bf4\u660e \u53c8\u62cd\u4e91 CDN \u5e73\u53f0\u652f\u6301\u89c6\u9891\u6587\u4ef6\u7684\u7801\u7387\u9002\u914d\u9650\u901f\u529f\u80fd\uff0c\u901a\u8fc7\u81ea\u52a8\u5206\u6790\u5f53\u524d\u89c6\u9891\u6587\u4ef6\u4f20\u8f93\u7684\u7801\u7387\uff0c\u5c06\u89c6\u9891\u6587\u4ef6\u7684\u4f20\u8f93\u901f\u5ea6\u63a7\u5236\u5728\u89c6\u9891\u7801\u7387\u8303\u56f4\u4e4b\u5185\uff0c\u53ef\u4ee5\u5728\u4e00\u5b9a\u7a0b\u5ea6\u4e0a\u9632\u6b62\u9ad8\u5cf0\u671f\u65f6\u5e26\u5bbd\u5360\u7528\uff0c\u8282\u7701\u6210\u672c\u3002\u9650\u901f\u4e3e\u4f8b\uff1a\u4e00\u5f00\u59cb\u4e0d\u9650\u901f\uff0c\u5f53\u64ad\u653e\u65f6\u957f\u8d85\u8fc7 3 \u79d2\u65f6\uff0c\u8fdb\u884c 1.1 \u500d\u7801\u7387\u9650\u901f\u3002\u8be5\u529f\u80fd\u53ef\u652f\u6301\u7684\u914d\u7f6e\u5305\u62ec\uff1a \u8d44\u6e90\u8def\u5f84\uff1a\u652f\u6301 * \u4f5c\u4e3a\u901a\u914d\u7b26\uff0c\u5982\uff1a /a/*.mp4 \u3001 /*.mp4 \uff1b \u9650\u901f\u7b56\u7565\uff1a\u6307\u5b9a\u5230\u8fbe\u8bbe\u7f6e\u7684\u65f6\u95f4\u4e4b\u540e\u5f00\u59cb\u9650\u5236\u89c6\u9891\u6587\u4ef6\u7684\u4e0b\u8f7d\u901f\u5ea6\uff0c\u652f\u6301\u7684\u5355\u4f4d\u5305\u62ec\u79d2\u3001\u5206\u949f\uff0c\u63a8\u8350\u503c\u4e3a 3 \u79d2\uff1b \u9650\u901f\u56e0\u5b50\uff1a\u6307\u5b9a\u4e0b\u8f7d\u901f\u5ea6\u4e3a\u89c6\u9891\u7801\u7387\u7684\u591a\u5c11\u500d\uff0c\u63a8\u8350\u503c\u4e3a 1.1\uff1b \u914d\u7f6e\u5f15\u5bfc \u767b\u9646 CDN \u63a7\u5236\u53f0 \uff0c\u4f9d\u6b21\u8fdb\u5165\uff1a\u670d\u52a1\u7ba1\u7406 > \u529f\u80fd\u914d\u7f6e > \u6027\u80fd\u4f18\u5316 > \u7801\u7387\u9002\u914d\u9650\u901f\uff0c\u70b9\u51fb\u3010\u7ba1\u7406\u3011\u6309\u94ae\uff0c\u8fdb\u5165\u529f\u80fd\u914d\u7f6e\u754c\u9762\uff1a 1) \u6dfb\u52a0\u89c4\u5219 \u4f9d\u6b21\u8fdb\u884c\u5982\u4e0b\u64cd\u4f5c\uff1a \u6ed1\u52a8\u5f00\u5173\uff1a\u5c06\u914d\u7f6e\u754c\u9762\u5de6\u4e0a\u89d2\u7684\u5f00\u5173\u7531\u5173\u95ed\u72b6\u6001\u8c03\u6574\u4e3a\u5f00\u542f\u72b6\u6001\uff1b \u6dfb\u52a0\u89c4\u5219\uff1a\u70b9\u51fb\u914d\u7f6e\u754c\u9762\u53f3\u4e0a\u89d2\u7684\u3010\u6dfb\u52a0\u89c4\u5219\u3011\u6309\u94ae\u5373\u53ef\u6dfb\u52a0\u9002\u914d\u9650\u901f\u89c4\u5219\uff0c\u914d\u7f6e\u754c\u9762\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u5728\u914d\u7f6e\u754c\u9762\uff0c\u4f9d\u6b21\u9700\u8981\u8fdb\u884c\u8d44\u6e90\u8def\u5f84\u3001\u9650\u901f\u7b56\u7565\u3001\u9650\u901f\u56e0\u5b50\u7684\u914d\u7f6e\u3002 \u8d44\u6e90\u8def\u5f84\uff1a\u4e5f\u5373\u5bf9\u8bf7\u6c42\u7684 URI \u8fdb\u884c\u5339\u914d\uff0c\u5339\u914d\u6210\u529f\u5219\u8fdb\u5165\u9650\u901f\u903b\u8f91\uff0c\u652f\u6301 * \u901a\u914d\u7b26\uff0c\u4f8b\u5982\uff1a /mnt/download/*.mp4 \u9650\u901f\u7b56\u7565\uff1a\u8868\u793a\u4ece\u67d0\u4e2a\u65f6\u523b\uff08\u4e0b\u8f7d\u65f6\u95f4\uff0c\u4e0d\u662f\u64ad\u653e\u65f6\u95f4\uff09\u5f00\u59cb\u6267\u884c\u9650\u901f\u7b56\u7565\uff0c\u652f\u6301\u79d2\u548c\u5206\u949f\u914d\u7f6e\uff0c\u9ed8\u8ba4\u63a8\u8350 3 \u79d2\uff1b \u9650\u901f\u56e0\u5b50\uff1a\u7528\u6765\u63a7\u5236 mp4 \u6587\u4ef6\u4e0b\u8f7d\u9650\u901f\u7684\u56e0\u5b50\uff0c\u6307\u5b9a\u4e0b\u8f7d\u901f\u5ea6\u4e3a\u89c6\u9891\u7801\u7387\u7684\u591a\u5c11\u500d\uff0c\u63a8\u8350\u503c\u4e3a 1.1\uff1b \u4e3e\u4f8b\uff1a \u5047\u5982\u67d0\u89c6\u9891\u7801\u7387\u4e3a 1337 Kbps\uff0c\u5219\u89c6\u9891\u7684\u4e0b\u8f7d\u901f\u5ea6\u4e3a : (1337/8)*1.1 = 183 KB/s \u914d\u7f6e\u5b8c\u6240\u6709\u914d\u7f6e\u9879\u4e4b\u540e\uff0c\u70b9\u51fb\u5de6\u4e0b\u89d2\u7684\u3010\u4fdd\u5b58\u3011\u6309\u94ae\u5373\u53ef\u3002 2) \u7f16\u8f91\u3001\u5220\u9664\u89c4\u5219 \u5982\u4e0b\u56fe\u6240\u793a\uff0c\u53ef\u4ee5\u5728\u64cd\u4f5c\u533a\u57df\u70b9\u51fb\u3010\u7f16\u8f91\u3011\u3001\u3010\u5220\u9664\u3011\u6309\u94ae\u5373\u53ef\u7f16\u8f91\u548c\u5220\u9664\u89c4\u5219\u3002 \u6ce8\u610f\u4e8b\u9879 \u5f53\u524d\u4ec5\u652f\u6301 mp4 \u6587\u4ef6\u683c\u5f0f\u89c6\u9891\u6587\u4ef6\u7684\u7801\u7387\u81ea\u9002\u5e94\uff1b \u9700\u8981\u786e\u4fdd mp4 \u6587\u4ef6\u7684 moov\uff08 Movie box \uff09\u5728\u89c6\u9891\u6587\u4ef6\u7684\u5934\u90e8\uff0c\u5426\u5219\u4f1a\u5bfc\u81f4\u81ea\u52a8\u9650\u901f\u529f\u80fd\u5931\u6548\uff0c\u4e00\u822c\u60c5\u51b5\u4e0b\uff0cmoov \u4f1a\u7d27\u968f ftyp\uff08File type box\uff09 \u51fa\u73b0\uff1b \u89c6\u9891\u6587\u4ef6\u7684\u5143\u6570\u636e\uff08 metadata \uff09\u8fc7\u5927\u4f1a\u5bfc\u81f4\u9650\u901f\u5931\u8d25\uff0c\u57fa\u4e8e\u7528\u6237\u4f53\u9a8c\u8003\u8651\uff0c\u5f53\u524d\u8bbe\u7f6e\u7684\u9600\u503c\u662f 512 KB\uff1b \u5f53\u914d\u7f6e\u7684\u9650\u901f\u7b56\u7565\u4e3a\u67d0\u65f6\u95f4\u65f6\uff08\u4f8b\u5982\uff1a3 \u79d2\uff09\uff0c\u5219\u5728 3 \u79d2\u4e4b\u540e\u4e0d\u4f1a\u7acb\u9a6c\u628a\u4e0b\u8f7d\u901f\u5ea6\u964d\u4e3a\u671f\u671b\u7684\u4e0b\u8f7d\u901f\u5ea6\uff0c\u5982\u679c\u4ece\u9650\u901f\u5f00\u59cb\u5230\u5230\u76ee\u524d\u4e3a\u6b62\u6709\u53d1\u9001\u591a\u4f59\u7684\u6570\u636e\uff0c\u5219\u67d0\u4e00\u6bb5\u65f6\u95f4\u5185\u4f1a\u505c\u6b62\u53d1\u9001\u6570\u636e\uff0c\u76f4\u5230\u6700\u7ec8\u7684\u4e0b\u8f7d\u901f\u5ea6\u4fdd\u6301\u5728\u8bbe\u5b9a\u7684\u8303\u56f4\u4e4b\u5185\u3002","title":"4.3 \u7801\u7387\u9002\u914d\u9650\u901f"},{"location":"cdn/config/#44","text":"\u529f\u80fd\u8bf4\u660e \u5f00\u542f\u540e\uff0c\u4f1a\u81ea\u52a8\u53bb\u9664 HTML \u6587\u4ef6\u4e2d\u975e\u5fc5\u8981\u7684\u5b57\u7b26\uff08\u7a7a\u767d\u3001\u6ce8\u91ca\u7b49\uff09\uff0c\u81ea\u52a8\u538b\u7f29\u6587\u4ef6\u5927\u5c0f\uff0c\u63d0\u5347\u8bbf\u95ee\u901f\u5ea6\u3002 \u914d\u7f6e\u5f15\u5bfc \u767b\u9646 CDN \u63a7\u5236\u53f0 \uff0c\u4f9d\u6b21\u8fdb\u5165\uff1a\u670d\u52a1\u7ba1\u7406 > \u529f\u80fd\u914d\u7f6e > \u6027\u80fd\u4f18\u5316 > \u9875\u9762\u538b\u7f29\uff0c\u5f00\u542f\u5f00\u5173\u5373\u53ef\uff0c\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u5728\u914d\u7f6e\u754c\u9762\uff0c\u6ed1\u52a8\u53f3\u8fb9\u7684\u6309\u94ae\uff0c\u5728\u786e\u5b9a\u5bf9\u8bdd\u6846\u4e0b\uff0c\u70b9\u51fb\u3010\u786e\u5b9a\u3011\u6309\u94ae\u5373\u53ef\u4e00\u952e\u5f00\u542f\u3002 \u6ce8\u610f\u4e8b\u9879 \u7279\u522b\u5730\uff0c\u76ee\u524d\u4ec5\u652f\u6301 HTML \u9875\u9762\u7684\u4f18\u5316\u3002","title":"4.4 \u9875\u9762\u538b\u7f29"},{"location":"cdn/config/#45-http-302","text":"\u529f\u80fd\u8bf4\u660e \u914d\u5408 DNS \u8c03\u5ea6\uff0c\u57fa\u4e8e\u5185\u5bb9\u548c\u7cbe\u51c6 IP \u7684\u7cbe\u786e\u8c03\u5ea6\u65b9\u6848\uff0c\u8be5\u8c03\u5ea6\u6a21\u5757\u53ef\u4ee5\u83b7\u53d6\u6700\u7ec8\u7528\u6237\u771f\u5b9e\u7684 IP \u5730\u5740\u548c\u5185\u5bb9\u5730\u5740\uff0c\u4f7f\u7528 HTTP \u534f\u8bae\u91cc\u9762\u7684 302 \u8df3\u8f6c\u529f\u80fd\uff0c\u5206\u914d\u6700\u4f18\u7684 CDN \u8fb9\u7f18\u52a0\u901f\u8282\u70b9\u7ed9\u6700\u7ec8\u7528\u6237\u3002 \u5b9e\u73b0\u673a\u5236 \u7ecf\u8fc7 HTTP 302 \u8c03\u5ea6 \u4e4b\u540e\u7684\u8d44\u6e90\u8bf7\u6c42\u5730\u5740\u7684\u53d8\u5316\u53c2\u7167\u5982\u4e0b\u793a\u4f8b\uff1a \u539f\u59cb\u8bbf\u95ee\u5730\u5740\uff1a http://test.example.com/image/1.png \u7ecf\u8fc7 HTTP 302 \u8c03\u5ea6\u540e\u7684 Location \u5730\u5740\uff1a http://60.211.204.130/test.example.com/image/1.png?_marco_sum=XXX&_marco_id=XXX&_marco_from=58.222.18.5 \u5176\u4e2d\uff0c Location \u5730\u5740\u91cc\u9762\u7684\u53c2\u6570 macro_from \u7684\u503c\u662f\u7b2c\u4e00\u6b21 DNS \u8c03\u5ea6\u89e3\u6790\u5230\u7684 CDN \u8fb9\u7f18\u8282\u70b9 IP \u5730\u5740\uff0c 60.211.204.130 \u662f\u7ecf\u8fc7 HTTP 302 \u8c03\u5ea6\u4e4b\u540e\u6700\u4f18\u7684 CDN \u8fb9\u7f18\u52a0\u901f\u8282\u70b9 IP\u3002 \u914d\u7f6e\u5f15\u5bfc \u767b\u9646 CDN \u63a7\u5236\u53f0 \uff0c\u4f9d\u6b21\u8fdb\u5165\uff1a\u670d\u52a1 > \u529f\u80fd\u914d\u7f6e > \u6027\u80fd\u4f18\u5316 > HTTP 302 \u8c03\u5ea6\uff0c\u70b9\u51fb\u300c\u7ba1\u7406\u300d\u6309\u94ae\u5373\u53ef\u5f00\u59cb\u914d\u7f6e\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u9ed8\u8ba4\u914d\u7f6e\uff1a\u8be5\u7279\u6027\u4f1a\u9ed8\u8ba4\u5f00\u542f\uff0c\u60a8\u53ef\u4ee5\u6709\u9009\u62e9\u6027\u7684\u5173\u95ed\u8be5\u7279\u6027\u3002\u7279\u522b\u5730\uff0c\u6211\u4eec\u9488\u5bf9 HTTP 302 \u8c03\u5ea6\u529f\u80fd\u9884\u7f6e\u4e86\u6587\u4ef6\u540e\u7f00\u6a21\u677f\uff0c\u9ed8\u8ba4\u9884\u7f6e\u540e\u7f00\u5982\u4e0b\uff1a \u89c6\u9891\uff1aAVI\u3001MP4\u3001FLV\u3001MOV\u30013GP\u3001ASF\u3001WMV\u3001MPG\u3001F4V\u3001M4V\u3001MKV\u3001VOB\u3001M3U8\u3001TS \u3001RMVB\u3001DAT\u3001RM \u97f3\u9891\uff1aMP3\u3001OGG\u3001M4A\u3001WMA\u3001AIF\u3001AU \u5b89\u88c5\u5305\uff1aAPK\u3001ZIP\u3001EXE\u3001RAR\u3001IPA\u3001PXL\u3001DEB\u3001SIS\u3001SISX\u3001JAR\u3001XAP \u6e38\u620f\u4e0b\u8f7d\uff1aSO\u3001CUE\u3001CCD\u3001MDS\u3001IMG\u30017Z \u5176\u5b83\uff1aCAB\u3001DHP\u3001GZ\u3001ISO\u3001MPQ\u3001PBCV\u3001PXL\u3001QNP\u3001R00\u3001XY\u3001XY2 \u8ffd\u52a0\u81ea\u5b9a\u4e49\uff1a\u4e3a\u4e86\u65b9\u4fbf\u7075\u6d3b\u914d\u7f6e\uff0c\u4e5f\u5373\u53ef\u4ee5\u6839\u636e\u6587\u4ef6\u540e\u7f00\u6216\u8005\u901a\u914d\u7b26\u89c4\u5219\u6765\u914d\u7f6e\u662f\u5426\u5f00\u542f\u8be5\u529f\u80fd\uff0c\u5982\u622a\u56fe\u6240\u793a\uff1a \u5728\u8be5\u914d\u7f6e\u754c\u9762\uff0c\u60a8\u53ef\u4ee5\u586b\u5199\u8d44\u6e90\u8def\u5f84\uff0c\u7136\u540e\u70b9\u51fb\u3010\u6dfb\u52a0\u3011\u6309\u94ae\uff0c\u4fdd\u5b58\u5373\u53ef\u3002\u8def\u5f84\u89c4\u5219\u652f\u6301 * \u901a\u914d\u7b26\uff0c\u4f8b\u5982\uff1a /a/*.mp4 /b/*.apk /* /123/* \u6ce8\u610f\u4e8b\u9879 \u5982\u679c\u8be5\u670d\u52a1\u4e0b\u7684\u57df\u540d\u591a\u4e3a\u5c0f\u6587\u4ef6\u52a0\u901f\u573a\u666f\uff0c\u4e3a\u4e86\u907f\u514d 302 \u8df3\u8f6c\u9020\u6210\u7684\u989d\u5916\u6d88\u8017\uff0c\u4e0d\u5b9c\u5f00\u542f\u8be5\u529f\u80fd\uff1b \u4f7f\u7528\u8be5\u529f\u80fd\uff0c\u9700\u8981\u786e\u8ba4\u5ba2\u6237\u7aef\u6216\u8005\u64ad\u653e\u5668\u662f\u5426\u652f\u6301 302 \u8df3\u8f6c\uff1b HTTP 302 \u8c03\u5ea6\u4f1a\u4f7f\u5f97 URL \u7684\u5730\u5740\u53d1\u751f\u53d8\u5316\uff0c\u67d0\u4e9b\u5e94\u7528\u5bf9 URL \u7684\u53d8\u5316\u654f\u611f\uff0c\u8bf7\u8c28\u614e\u4f7f\u7528\u3002","title":"4.5 HTTP 302 \u8c03\u5ea6"},{"location":"cdn/config/#46","text":"\u529f\u80fd\u8bf4\u660e \u5f53 CDN \u8282\u70b9\u56de\u6e90\u7ad9\u65f6\uff0c\u82e5\u6e90\u7ad9\u54cd\u5e94\u7684\u72b6\u6001\u7801\u4e3a 301/302\uff0cCDN \u8282\u70b9\u5bf9\u91cd\u5b9a\u5411\u4e4b\u540e\u7684\u76ee\u6807 URL \uff08\u4e5f\u5373 301/302 \u54cd\u5e94\u5934 Location \u5b57\u6bb5\u5bf9\u5e94\u7684\u4fe1\u606f\uff09\u53d1\u8d77\u8bf7\u6c42\uff0c\u5c06\u83b7\u53d6\u540e\u7684\u5185\u5bb9\u54cd\u5e94\u7ed9\u6700\u7ec8\u7528\u6237\uff0c\u5e76\u5728 CDN \u8282\u70b9\u8fdb\u884c\u7f13\u5b58\u3002\u8fd9\u6837\u5411\u6700\u7ec8\u7528\u6237\u5c4f\u853d\u4e86\u91cd\u5b9a\u5411\u8fc7\u7a0b\uff0c\u514d\u53bb\u4e86\u6700\u7ec8\u7528\u6237\u518d\u6b21\u5411\u91cd\u5b9a\u5411\u540e\u7684 URL \u91cd\u65b0\u53d1\u8d77\u8bf7\u6c42\u7684\u8fde\u63a5\u65f6\u95f4\uff0c\u4ece\u800c\u52a0\u5feb\u4e86\u8bbf\u95ee\u901f\u5ea6\u3002 \u539f\u7406\u4ecb\u7ecd \u4e00\u822c\u60c5\u51b5\u4e0b\uff0c\u5f53 CDN \u8282\u70b9\u56de\u6e90\u7ad9\u8bf7\u6c42\u6587\u4ef6\u65f6\uff0c\u82e5\u6e90\u7ad9\u8fd4\u56de\u7684\u662f HTTP 301/302 \u7684\u54cd\u5e94\uff0cCDN \u8282\u70b9\u4f1a\u5c06\u8be5\u54cd\u5e94\u8fd4\u56de\u7ed9\u5ba2\u6237\u7aef\uff0c\u5ba2\u6237\u7aef\u6839\u636e\u54cd\u5e94\u5934\u4e2d\u7684 Location \u5934\u4fe1\u606f\u8fdb\u884c\u518d\u6b21\u8bf7\u6c42\u3002\u914d\u7f6e\u4e86\u3010\u91cd\u5b9a\u5411\u8ddf\u968f\u3011\u529f\u80fd\u4e4b\u540e\uff0c\u8bbf\u95ee\u6d41\u7a0b\u5982\u4e0b\u56fe\u6240\u793a\uff1a 1\uff09\u5ba2\u6237\u7aef\u5411 CDN \u8282\u70b9\u53d1\u8d77\u8bf7\u6c42\u5e76\u4f20\u9012\u81f3\u6e90\u7ad9\uff0c\u4f8b\u5982\uff1a http://example.com/123.html \uff1b 2\uff09\u6e90\u7ad9\u7ed9 CDN \u8282\u70b9\u54cd\u5e94 301/302 \u72b6\u6001\u7801\uff0c\u5e76\u6307\u660e\u91cd\u5b9a\u5411\u540e\u7684 URL \u4e3a http://example.com/456.html 3\uff09CDN \u8282\u70b9\u5bf9\u91cd\u5b9a\u5411\u4e4b\u540e\u5bf9\u76ee\u6807 URL \u53d1\u8d77\u8bf7\u6c42\uff1b 4\uff09\u6e90\u7ad9\u54cd\u5e94\u5185\u5bb9\u7ed9\u6700\u7ec8\u7528\u6237\uff0c\u5e76\u5c06\u5185\u5bb9\u5728 CDN \u8282\u70b9\u8fdb\u884c\u7f13\u5b58\uff1b \u914d\u7f6e\u5f15\u5bfc \u767b\u9646 CDN \u63a7\u5236\u53f0 \uff0c\u4f9d\u6b21\u8fdb\u5165\uff1a\u670d\u52a1\u7ba1\u7406 > \u529f\u80fd\u914d\u7f6e > \u6027\u80fd\u4f18\u5316 > \u91cd\u5b9a\u5411\u8ddf\u968f\uff0c\u6ed1\u52a8\u5f00\u5173\u5373\u53ef\u5f00\u542f\u8be5\u529f\u80fd\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u5728\u914d\u7f6e\u754c\u9762\uff0c\u6ed1\u52a8\u53f3\u8fb9\u7684\u6309\u94ae\uff0c\u5728\u786e\u5b9a\u5bf9\u8bdd\u6846\u4e0b\uff0c\u70b9\u51fb\u3010\u786e\u5b9a\u3011\u6309\u94ae\u5373\u53ef\u4e00\u952e\u5f00\u542f\u3002 \u6ce8\u610f\u4e8b\u9879 \u5f00\u542f\u91cd\u5b9a\u5411\u8ddf\u968f\u540e\uff0c\u6700\u591a\u4ec5\u8ddf\u968f 3 \u8df3\uff0c\u8d85\u51fa\u9650\u5236\u5219\u4f1a\u76f4\u63a5\u8fd4\u56de 301/302 \u7ed9\u6700\u7ec8\u7528\u6237\uff1b \u5982\u91cd\u5b9a\u5411\u540e\u7684 Location \u5730\u5740\u4e5f\u5728\u53c8\u62cd\u4e91 CDN \u52a0\u901f\uff0c\u6211\u4eec\u9ed8\u8ba4\u4f1a\u5141\u8bb8\u4e00\u6b21\u8bbf\u95ee\uff0c\u8d85\u8fc7\u4e00\u6b21\uff0c\u5219\u4f1a\u76f4\u63a5\u54cd\u5e94 403\uff0c\u8bf7\u8c28\u614e\u4f7f\u7528\u3002","title":"4.6 \u91cd\u5b9a\u5411\u8ddf\u968f"},{"location":"cdn/config/#47","text":"\u529f\u80fd\u8bf4\u660e \u89c6\u9891\u62d6\u62c9\u529f\u80fd\u7528\u4e8e\u89c6\u9891\u70b9\u64ad\u7684\u589e\u5f3a\u4f53\u9a8c\uff0c\u65b9\u4fbf\u6700\u7ec8\u7528\u6237\u901a\u8fc7\u62d6\u62c9\u64ad\u653e\u5668\u7684\u8fdb\u5ea6\u6761\uff0c\u89c2\u770b\u4efb\u610f\u8d77\u59cb\u4f4d\u7f6e\u7684\u89c6\u9891\uff0c\u800c\u65e0\u9700\u4ece\u5934\u89c2\u770b\u3002\u8be5\u529f\u80fd\u8fd8\u53ef\u4ee5\u6269\u5c55\u4e3a\u8df3\u8fc7\u7247\u5934\u3001\u7eed\u64ad\u3001\u9884\u64ad\u653e\u7b49\u529f\u80fd\u3002\u53d1\u9001\u62d6\u62c9\u64ad\u653e\u8fdb\u5ea6\u65f6\uff0c\u5ba2\u6237\u7aef\u53d1\u8d77\u7684\u8bf7\u6c42\u7c7b\u4f3c http://video.upyun.com/test.mp4?start=100 \u8fd9\u6837\u7684 URL \u8bf7\u6c42\u3002 \u76ee\u524d\u4ec5\u652f\u6301 MP4 \u548c FLV \u683c\u5f0f\u7684\u6587\u4ef6\u6309\u89c6\u9891\u5934\u62d6\u62c9\uff0c\u5e76\u4e14 FLV \u652f\u6301\u6309\u5b57\u8282\u62d6\u62c9\uff0cMP4 \u6309\u7167\u65f6\u95f4\u62d6\u62c9\u3002 \u914d\u7f6e\u5f15\u5bfc \u767b\u9646 CDN \u63a7\u5236\u53f0 \uff0c\u4f9d\u6b21\u8fdb\u5165\uff1a\u670d\u52a1\u7ba1\u7406 > \u529f\u80fd\u914d\u7f6e > \u6027\u80fd\u4f18\u5316 > \u89c6\u9891\u62d6\u62c9\uff0c\u70b9\u51fb\u3010\u7ba1\u7406\u3011\u6309\u94ae\u5373\u53ef\u5f00\u59cb\u914d\u7f6e\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u8be6\u7ec6\u914d\u7f6e\u8bf7\u53c2\u89c1 \u300c\u652f\u6301\u4ece\u4efb\u610f\u8d77\u70b9\u89c2\u770b\u300d\u89c6\u9891\u62d6\u62c9\u7528\u6237\u6307\u5357 \u6ce8\u610f\u4e8b\u9879 \u64ad\u653e\u5668\u53ef\u4ee5\u53d1\u8d77\u7ea6\u5b9a\u683c\u5f0f\u7684\u8bf7\u6c42\uff0c\u4f8b\u5982\uff1ahttp://example.com/video/test.mp4?start=xxx&end=xxx\uff1b \u6587\u4ef6\u9700\u542b\u6709\u5173\u952e\u5e27\uff0c\u8fd9\u662f\u5b9e\u73b0\u62d6\u62c9\u7684\u524d\u63d0\u6761\u4ef6\uff1b\u5173\u952e\u5e27\u592a\u5c11\u6216\u8005\u6ca1\u6709\u5173\u952e\u5e27\uff0c\u89c6\u9891\u6587\u4ef6\u9700\u8981\u91cd\u65b0\u7f16\u7801\uff1b \u89c6\u9891\u6587\u4ef6 metedata \u4e2d\u7f3a\u5c11\u5173\u952e\u5e27\u7684\u7d22\u5f15\u4fe1\u606f\uff0c\u5982 flv \u7f3a\u5c11 keyframes \u4fe1\u606f\uff0cmp4 \u7f3a\u5c11 seekpoints \u4fe1\u606f\uff0c\u6216\u7f3a\u5931 moov box\uff0c\u90fd\u4f1a\u5bfc\u81f4\u62d6\u62c9\u5931\u8d25\uff1b \u6e90\u7ad9\u9700\u8981\u652f\u6301 range \u8bf7\u6c42\uff0c\u4e5f\u5373\u9488\u5bf9\u5ba2\u6237\u7aef\u53d1\u8d77\u7684 range \u8bf7\u6c42\uff0c\u6e90\u7ad9\u53ef\u4ee5\u6b63\u5e38\u54cd\u5e94 206 \u6587\u4ef6\u5206\u7247\uff1b \u652f\u6301\u6839\u636e\u4e0d\u540c\u8d44\u6e90\u8def\u5f84\u6dfb\u52a0\u914d\u7f6e\uff0c\u6700\u591a\u4ec5\u652f\u6301 20 \u6761\u3002","title":"4.7 \u89c6\u9891\u62d6\u62c9"},{"location":"cdn/config/#48","text":"\u529f\u80fd\u8bf4\u660e \u6839\u636e\u670d\u52a1\u4e0b\u5177\u4f53\u4e1a\u52a1\u60c5\u51b5\uff0c\u53ef\u4ee5\u6709\u9009\u62e9\u6027\u7684\u5173\u95ed\u548c\u5f00\u542f\u6d77\u5916\u52a0\u901f\uff0c\u9ed8\u8ba4\u4e3a\u5f00\u542f\u72b6\u6001\u3002\u6d77\u5916\u5730\u533a\u7279\u6307\u9664\u4e2d\u56fd\u5927\u9646\u4ee5\u5916\u7684\u5730\u533a\uff0c\u5305\u62ec\u6e2f\u6fb3\u53f0\u5730\u533a\u3002 \u5f00\u542f\u72b6\u6001\u4e0b\uff0c\u6d77\u5916\u8bf7\u6c42\u4f1a\u9ed8\u8ba4\u89e3\u6790\u5230\u53c8\u62cd\u4e91\u6d77\u5916 CDN \u8282\u70b9\uff0c\u8ba1\u8d39\u6309\u6d77\u5916\u5730\u533a\u5b9a\u4ef7\u8ba1\u7b97\uff1b \u5173\u95ed\u72b6\u6001\u4e0b\uff0c\u6d77\u5916\u8bf7\u6c42\u4f1a\u9ed8\u8ba4\u89e3\u6790\u5230\u53c8\u62cd\u4e91\u56fd\u5185 CDN \u8282\u70b9\uff0c\u8ba1\u8d39\u6309\u56fd\u5185\u5730\u533a\u5b9a\u4ef7\u8ba1\u7b97\u3002 \u914d\u7f6e\u5f15\u5bfc \u767b\u9646 CDN \u63a7\u5236\u53f0 \uff0c\u4f9d\u6b21\u8fdb\u5165\uff1a\u670d\u52a1\u7ba1\u7406 > \u529f\u80fd\u914d\u7f6e > \u6027\u80fd\u4f18\u5316 > \u6d77\u5916\u52a0\u901f\uff0c\u6ed1\u52a8\u5f00\u5173\u5373\u53ef\u5f00\u542f\u8be5\u529f\u80fd\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u5728\u914d\u7f6e\u754c\u9762\uff0c\u6ed1\u52a8\u53f3\u8fb9\u7684\u6309\u94ae\uff0c\u5728\u786e\u5b9a\u5bf9\u8bdd\u6846\u4e0b\uff0c\u70b9\u51fb\u3010\u786e\u5b9a\u3011\u6309\u94ae\u5373\u53ef\u4e00\u952e\u5f00\u542f\u3002 \u6ce8\u610f\u4e8b\u9879 \u5173\u95ed\u72b6\u6001\u4e0b\uff0c\u6d77\u5916\u8bf7\u6c42\u4f1a\u89e3\u6790\u5230\u56fd\u5185 CDN \u8282\u70b9\uff0c\u53ef\u80fd\u4f1a\u5f71\u54cd\u5230\u6d77\u5916\u5730\u533a\u7ec8\u7aef\u7528\u6237\u7684\u8bbf\u95ee\u4f53\u9a8c\u3002","title":"4.8 \u6d77\u5916\u52a0\u901f"},{"location":"cdn/config/#49","text":"\u529f\u80fd\u8bf4\u660e \u53c8\u62cd\u4e91 CDN \u667a\u80fd\u538b\u7f29\u529f\u80fd\u5305\u62ec Gzip \u548c Brotli \u538b\u7f29\u7b97\u6cd5\u3002\u5f00\u542f\u8be5\u529f\u80fd\uff0c\u53ef\u5bf9\u9759\u6001\u6587\u4ef6\u7c7b\u578b\u8fdb\u884c\u538b\u7f29\uff0c\u6709\u6548\u51cf\u5c11\u7528\u6237\u4f20\u8f93\u5185\u5bb9\u5927\u5c0f\uff0c\u52a0\u901f\u5206\u53d1\u6548\u679c\u3002\u4e3a\u4e86\u914d\u7f6e\u7684\u7075\u6d3b\u6027\uff0c\u652f\u6301\u538b\u7f29\u7b49\u7ea7\u7684\u8bbe\u7f6e\uff0c\u5173\u4e8e\u538b\u7f29\u7b49\u7ea7\u7684\u8bf4\u660e\u5982\u4e0b\uff1a \u4e24\u79cd\u538b\u7f29\u7b97\u6cd5\u7684\u538b\u7f29\u7b49\u7ea7\u9ed8\u8ba4\u4e3a 1\uff0c\u7b49\u7ea7\u8d8a\u9ad8\uff0c\u538b\u7f29\u7387\u8d8a\u5927\uff1b \u8003\u8651\u5230\u538b\u7f29\u7b49\u7ea7\u8d8a\u9ad8\uff0c\u538b\u7f29\u901f\u5ea6\u4f1a\u964d\u4f4e\uff0c\u5b9e\u9645\u751f\u4ea7\u73af\u5883\uff0c\u5efa\u8bae\u538b\u7f29\u7b49\u7ea7\u63a7\u5236\u5728 3 \u4ee5\u5185\uff0c\u5177\u4f53\u4ee5\u7ebf\u4e0a\u73af\u5883\u5b9e\u6d4b\u4e3a\u51c6\uff1b \u6ee1\u8db3\u6761\u4ef6 \u89e6\u53d1\u5b9e\u9645\u7684 Gzip \u53ca Brotli \u538b\u7f29\u884c\u4e3a\u9700\u8981\u540c\u65f6\u6ee1\u8db3\u5982\u4e0b\u6761\u4ef6\uff1a 1\u3001Content-Type \u6ee1\u8db3\u4ee5\u4e0b\u5217\u8868\u5176\u4e2d\u4e4b\u4e00\uff1a text/plain text/javascript text/css text/xml text/x-component application/javascript application/x-javascript application/xml application/json application/xhtml+xml application/rss+xml application/atom+xml application/x-font-ttf application/vnd.ms-fontobject image/svg+xml image/x-icon font/opentype 2\u3001Content-Length \u5927\u4e8e 256 \u5b57\u8282\uff1b 3\u3001\u5ba2\u6237\u7aef\u8bf7\u6c42\u5934\u5e26\u4e86 Accept-Encoding: gzip, br \u3002 \u914d\u7f6e\u5f15\u5bfc \u767b\u9646 CDN \u63a7\u5236\u53f0 \uff0c\u8fdb\u5165 \u300c\u6027\u80fd\u4f18\u5316\u300d\u914d\u7f6e\u9875\u9762\uff0c\u627e\u5230\u300c\u667a\u80fd\u538b\u7f29\u300d\u914d\u7f6e\u9879\uff0c\u70b9\u51fb\u3010\u7ba1\u7406\u3011\u6309\u94ae\uff0c\u8fdb\u5165\u5982\u4e0b\u914d\u7f6e\u754c\u9762\uff1a \u7ed3\u5408\u4e24\u79cd\u538b\u7f29\u7b97\u6cd5\uff0c\u5728 CDN \u63a7\u5236\u53f0\u7684\u914d\u7f6e\u6709 4 \u79cd\u72b6\u6001\uff0c\u76f8\u5173\u914d\u7f6e\u8bf7\u53c2\u8003\u5982\u4e0b\u622a\u56fe\u548c\u8bf4\u660e\uff1a \u72b6\u6001\u4e00\uff1a\u540c\u65f6\u5173\u95ed Gzip \u548c Brotli \u8be5\u72b6\u6001\u4e0b\uff0cCDN \u4e0d\u652f\u6301 Gzip \u548c Brotli \u3002 \u72b6\u6001\u4e8c\uff1a\u53ea\u5f00\u542f Gzip \u8be5\u72b6\u6001\u4e0b\uff0cCDN \u4ec5\u652f\u6301 Gzip \u538b\u7f29\u3002 \u72b6\u6001\u4e09\uff1a\u53ea\u5f00\u542f Brotli \u8be5\u72b6\u6001\u4e0b\uff0cCDN \u4ec5\u652f\u6301 Brotli \u538b\u7f29\u3002 \u72b6\u6001\u56db\uff1a\u540c\u65f6\u5f00\u542f Gzip \u548c Brotli \u5982\u679c\u5ba2\u6237\u7aef\u540c\u65f6\u90fd\u652f\u6301 Gzip \u548c Brotli \uff0cCDN \u4f1a\u4f18\u5148\u4f7f\u7528 Brotli \u538b\u7f29\u7b97\u6cd5\u3002 \u5173\u4e8e\u538b\u7f29\u7b49\u7ea7 Gzip \u548c Brotli \u9ed8\u8ba4\u7684\u538b\u7f29\u7b49\u7ea7\u4e3a 1\uff0c\u538b\u7f29\u7b49\u7ea7\u7684\u8303\u56f4\u4e3a 1 ~ 5\uff0c\u538b\u7f29\u7b49\u7ea7\u8d8a\u9ad8\uff0c\u538b\u7f29\u7387\u8d8a\u5927\uff0c\u4f46\u662f\u538b\u7f29\u901f\u5ea6\u4f1a\u76f8\u5bf9\u964d\u4f4e\uff0c\u60a8\u53ef\u4ee5\u6839\u636e\u8981\u6c42\u8fdb\u884c\u81ea\u5b9a\u4e49\u8bbe\u7f6e\uff0c\u539f\u5219\u4e0a\uff0c\u6211\u4eec\u5efa\u8bae\u5728\u751f\u4ea7\u73af\u5883\uff0c\u538b\u7f29\u7b49\u7ea7\u4e0d\u8981\u9ad8\u4e8e 3 \u3002\u66f4\u591a\u5173\u4e8e\u538b\u7f29\u7b49\u7ea7\u7684\u4ecb\u7ecd\u8bf7\u53c2\u8003 \u8fd9\u91cc \u3002 \u6ce8\u610f\u4e8b\u9879 \u5f53\u5ba2\u6237\u7aef\u540c\u65f6\u652f\u6301 Gzip \u548c Brotli \u7b97\u6cd5\u7684\u60c5\u51b5\u4e0b\uff0cBrotli \u7684\u4f18\u5148\u7ea7\u9ad8\u4e8e Gzip\u3002","title":"4.9 \u667a\u80fd\u538b\u7f29"},{"location":"cdn/config/#410","text":"\u53c8\u62cd\u4e91\u5b58\u50a8 \u548c \u81ea\u4e3b\u6e90\u7ad9 CDN \u52a0\u901f\u670d\u52a1\u5747\u652f\u6301 JS\uff0cCSS Combo\uff08\u7ec4\u5408\u7279\u6027\uff09\uff0c\u5373\u53ef\u4ee5\u628a\u591a\u4e2a JS, CSS \u8bf7\u6c42\u5408\u5e76\u6210\u4e00\u4e2a\u3002 \u5982\u4f55\u4f7f\u7528 \u7279\u522b\u5730\uff0c\u6211\u4eec\u4ee5 !! \u4f5c\u4e3a\u5206\u9694\u7b26\u3002 http://upyun-assets.b0.upaiyun.com/foo/!!a.js,b.js \u4e00\u4e2a\u5f15\u7528\u4e86\u5982\u4e0a URL \u7684 Demo: http://upyun-assets.b0.upaiyun.com/jscombo.html","title":"4.10 \u6587\u4ef6\u5408\u5e76"},{"location":"cdn/config/#5https","text":"","title":"5.HTTPS"},{"location":"cdn/config/#51-https","text":"\u529f\u80fd\u8bf4\u660e \u53c8\u62cd\u4e91 HTTPS \u52a0\u901f\u670d\u52a1\u5efa\u7acb\u5728\u81ea\u4e3b\u7814\u53d1\u7684\u5185\u5bb9\u5206\u53d1\u7f51\u7edc\u57fa\u7840\u4e4b\u4e0a\uff0c\u5168\u9762\u652f\u6301\u4e86 HTTPS \u534f\u8bae\u52a0\u901f\u3002\u901a\u8fc7\u4f1a\u8bdd\u91cd\u7528\u53ca\u4f1a\u8bdd\u4fdd\u6301\u3001\u5728\u7ebf\u8bc1\u4e66\u72b6\u6001\u68c0\u67e5\u3001\u534f\u8bae\u4f18\u5316\u3001SSL \u534f\u8bae\u63e1\u624b\u4f18\u5316\u3001HTTP/2 \u7b49\u6280\u672f\u624b\u6bb5\uff0c\u5168\u9762\u63d0\u5347\u4e86 HTTPS \u534f\u8bae\u52a0\u901f\u6027\u80fd\u3002 \u914d\u7f6e\u5f15\u5bfc \u7b2c\u4e00\u6b65\uff1a\u4f9d\u6b21\u8fdb\u5165\uff1a\u670d\u52a1\u7ba1\u7406 > \u529f\u80fd\u914d\u7f6e > HTTPS, \u70b9\u51fb \u7ba1\u7406 \u5373\u53ef\u5f00\u59cb\u914d\u7f6e\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u7b2c\u4e8c\u6b65\uff1a\u53ef\u9488\u5bf9\u5355\u4e2a\u57df\u540d\u9009\u62e9\u76f8\u5e94\u7684\u8bc1\u4e66\uff0c\u7136\u540e\u4fdd\u5b58\u3002\u5982\u679c\u65e0\u8bc1\u4e66\u53ef\u9009\uff0c\u53ef\u524d\u5f80 SSL \u8bc1\u4e66\u670d\u52a1 \u5e73\u53f0\u6dfb\u52a0\u57df\u540d\u7684\u81ea\u6709\u8bc1\u4e66\uff1b\u7528\u6237\u4e5f\u53ef\u76f4\u63a5\u5728 SSL \u8bc1\u4e66\u7533\u8d2d \u5e73\u53f0\u7533\u8d2d Symantec\u3001GeoTrust\u3001TrustAsia\u3001Let\u2019s Encrypt \u7684\u5404\u7c7b SSL \u8bc1\u4e66\uff0c\u5176\u4e2d TrustAsia\u3001Let\u2019s Encrypt \u7684 DV SSL \u5355\u57df\u540d\u8bc1\u4e66\u53ef\u514d\u8d39\u7533\u8bf7\u3002 \u7b2c\u4e09\u6b65\uff1a\u53ef\u9009\u62e9\u662f\u5426\u5f00\u542f HTTPS \u8bbf\u95ee\u548c\u5f3a\u5236 HTTPS \u529f\u80fd\u3002\u5728\u5f00\u542f HTTPS \u8bbf\u95ee\u540e\uff0c\u53ef\u901a\u8fc7\u70b9\u51fb \u4fee\u6539 \u5207\u6362\u57df\u540d\u6240\u5bf9\u5e94\u7684\u8bc1\u4e66\uff0c\u70b9\u51fb \u8be6\u60c5 \u53ef\u67e5\u770b\u76f8\u5e94\u8bc1\u4e66\u7684\u8be6\u7ec6\u4fe1\u606f\uff1b \u201c HTTPS \u8bbf\u95ee\u201d\uff1a\u5f00\u542f\u8be5\u529f\u80fd\u540e\uff0c\u5ba2\u6237\u7aef\u624d\u80fd\u4f7f\u7528 HTTPS \u534f\u8bae\u8fdb\u884c\u8bbf\u95ee\uff0c\u9ed8\u8ba4\u5173\u95ed\u3002 \u201c\u5f3a\u5236 HTTPS \u201d\uff1a\u52fe\u9009\u6b64\u529f\u80fd\u540e\uff0c\u53c8\u62cd\u4e91\u8fb9\u7f18\u8282\u70b9\u6536\u5230\u7528\u6237\u7684 HTTP \u8bf7\u6c42\u540e\u4f1a\u5c06\u5176\u5f3a\u5236\u8df3\u8f6c\u5230 HTTPS \u8fdb\u884c\u8bbf\u95ee\u3002\u9ed8\u8ba4\uff1a\u517c\u5bb9\u7528\u6237\u7684 HTTP \u548c HTTPS \u8bf7\u6c42\u3002 \u5907\u6ce8\uff1a\u5176\u4e2d HTTPS \u914d\u7f6e \u4e5f\u53ef\u4ee5\u5728 SSL \u8bc1\u4e66\u7ba1\u7406 \u91cc\u9762\u914d\u7f6e\uff0c\u53c2\u89c1\u4e0b\u6587 SSL \u8bc1\u4e66\u7ba1\u7406 \u90e8\u5206\u3002 \u81ea\u6709\u8bc1\u4e66\u6dfb\u52a0 \u5982\u679c\u57df\u540d\u5f53\u524d\u5df2\u6709\u8bc1\u4e66\uff0c\u53c8\u62cd\u4e91\u63d0\u4f9b\u4e86\u81ea\u6709\u8bc1\u4e66\u7684\u4e0a\u4f20\u65b9\u5f0f\uff0c\u65e0\u9700\u4eba\u5de5\u534f\u52a9\uff0c\u5b89\u5168\u4fbf\u6377\u3002 \u7b2c\u4e00\u6b65\uff1a\u8fdb\u5165 SSL \u8bc1\u4e66\u670d\u52a1\uff0c\u5de5\u5177\u7bb1 -> SSL \u8bc1\u4e66\u670d\u52a1 -> \u8bc1\u4e66\u7ba1\u7406 -> \u6dfb\u52a0\u81ea\u6709\u8bc1\u4e66 \u7b2c\u4e8c\u6b65\uff1a\u7c98\u8d34\u8bc1\u4e66\u5185\u5bb9: \u70b9\u51fb \u4fdd\u5b58 \u4e4b\u540e\uff0c\u53ef\u67e5\u770b SSL \u8bc1\u4e66\u4fe1\u606f\u5982\u4e0b\u56fe\u6240\u793a\uff1a SSL \u8bc1\u4e66\u7ba1\u7406 \u5728 \u8bc1\u4e66\u7ba1\u7406 \u5217\u8868\u4e2d\uff0c\u53ef\u6839\u636e\u9700\u6c42\u9009\u62e9\u7533\u8d2d\u6210\u529f\u5e76\u5df2\u90e8\u7f72\u4e8e CDN \u5e73\u53f0\u7684\u8bc1\u4e66\u6216\u5df2\u4e0a\u4f20\u7684\u81ea\u6709\u8bc1\u4e66\uff0c\u70b9\u51fb HTTPS \u914d\u7f6e \u8fdb\u884c\u64cd\u4f5c \uff0c\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u201cHTTPS \u8bbf\u95ee\u201d\uff1a\u5f00\u542f\u8be5\u529f\u80fd\u540e\uff0c\u5ba2\u6237\u7aef\u4f7f\u7528 HTTPS \u534f\u8bae\u8bbf\u95ee\u65f6\u624d\u80fd\u6210\u529f\uff0c\u9ed8\u8ba4\u5173\u95ed\u3002 \u201c\u5f3a\u5236 HTTPS\u201d\uff1a\u52fe\u9009\u6b64\u529f\u80fd\u540e\uff0c\u53c8\u62cd\u4e91\u8fb9\u7f18\u8282\u70b9\u6536\u5230\u7528\u6237\u7684 HTTP \u8bf7\u6c42\u540e\u4f1a\u5c06\u5176\u5f3a\u5236\u8df3\u8f6c\u5230 HTTPS \u8fdb\u884c\u8bbf\u95ee\u3002\u9ed8\u8ba4\uff1a\u517c\u5bb9\u7528\u6237\u7684 HTTP \u548c HTTPS \u8bf7\u6c42\u3002","title":"5.1 HTTPS \u914d\u7f6e"},{"location":"cdn/config/#52-hsts","text":"\u529f\u80fd\u8bf4\u660e HSTS\uff08HTTP Strict Transport Security\uff0cHTTP \u4e25\u683c\u4f20\u8f93\u5b89\u5168)\uff0c\u662f\u4e00\u5957\u7531\u4e92\u8054\u7f51\u5de5\u7a0b\u4efb\u52a1\u7ec4\u53d1\u5e03\u7684\u4e92\u8054\u7f51\u5b89\u5168\u7b56\u7565\u673a\u5236\u3002\u7f51\u7ad9\u53ef\u4ee5\u901a\u8fc7\u914d\u7f6e HSTS\uff0c\u6765\u5f3a\u5236\u6d4f\u89c8\u5668\u4f7f\u7528 HTTPS \u4e0e\u7f51\u7ad9\u901a\u4fe1\uff0c\u4fdd\u969c\u7f51\u7ad9\u66f4\u52a0\u5b89\u5168\u3002 \u914d\u7f6e\u5f15\u5bfc \u767b\u9646 CDN \u63a7\u5236\u53f0 \uff0c\u4f9d\u6b21\u8fdb\u5165\uff1a\u670d\u52a1\u7ba1\u7406 > \u529f\u80fd\u914d\u7f6e > HTTPS, \u70b9\u51fb \u7ba1\u7406 \u6309\u94ae\u5373\u53ef\u5f00\u59cb\u914d\u7f6e\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u8fdb\u5165\u89c4\u5219\u7ba1\u7406\u9875\u9762\uff0c\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u70b9\u51fb\u3010\u6dfb\u52a0\u89c4\u5219\u3011\u6309\u94ae\uff0c\u5373\u53ef\u5f00\u59cb\u914d\u7f6e\u89c4\u5219\uff1a \u6839\u636e\u8981\u6c42\u586b\u5199\u597d\u914d\u7f6e\u89c4\u5219\uff0c\u70b9\u51fb\u3010\u4fdd\u6301\u3011\u6309\u94ae\u5373\u53ef\u3002\u66f4\u591a\u5173\u4e8e HSTS \u914d\u7f6e\u9879\u4fe1\u606f\uff0c\u8bf7\u53c2\u89c1 HSTS \u52a9\u529b\u7f51\u7ad9\u66f4\u5b89\u5168 \u3002","title":"5.2 HSTS \u914d\u7f6e"},{"location":"cdn/config/#53-http2","text":"\u529f\u80fd\u8bf4\u660e HTTP/2 \u5373\u8d85\u6587\u672c\u4f20\u8f93\u534f\u8bae 2.0\uff0c\u662f\u4e0b\u4e00\u4ee3 HTTP \u534f\u8bae\uff0c\u5728 CDN \u63a7\u5236\u53f0\u60a8\u53ef\u4ee5\u7075\u6d3b\u8fdb\u884c HTTP/2 \u7279\u6027\u7684\u5f00\u542f\u548c\u5173\u95ed\u3002 \u53c8\u62cd\u4e91 CDN \u670d\u52a1\u5f53\u524d\u5df2\u5168\u5e73\u53f0\u652f\u6301 HTTP/2\u3002HTTP/2 \u662f\u5728 HTTPS \u534f\u8bae\u7684\u57fa\u7840\u4e0a\u5b9e\u73b0\u7684\uff0c\u53ea\u8981\u4f7f\u7528\u53c8\u62cd\u4e91 HTTPS \u52a0\u901f\u670d\u52a1\u7684\u57df\u540d\uff0c\u90fd\u53ef\u514d\u8d39\u4eab\u53d7 HTTP/2 \u670d\u52a1\u3002\u53c8\u62cd\u4e91\u63a7\u5236\u53f0\u5173\u4e8e HTTP/2 \u7684\u914d\u7f6e\u652f\u6301\u4e09\u79cd\u6a21\u5f0f\u7684\u8bbe\u7f6e\uff0c\u5206\u522b\u662f\uff1a \u5f00\u542f HTTP/2 \u9ed8\u8ba4\u5f00\u542f HTTP/2 \u7279\u6027\uff0c\u5305\u62ec\u91c7\u7528\u4e8c\u8fdb\u5236\u683c\u5f0f\u4f20\u8f93\u6570\u636e\u3001\u5bf9\u6d88\u606f\u5934\u91c7\u7528 HPACK \u8fdb\u884c\u538b\u7f29\u4f20\u8f93\u3001\u591a\u8def\u590d\u7528 \u7b49\u7279\u6027\uff0c\u4f46\u4e0d\u5305\u62ec Server Push \u7279\u6027\u3002 \u5173\u95ed HTTP/2 \u5982\u9700\u5173\u95ed HTTP/2 \u7279\u6027\uff0c\u53ef\u4ee5\u9009\u62e9\u5173\u95ed\uff0c\u8bf7\u6839\u636e\u8981\u6c42\u5408\u7406\u5173\u95ed\u3002 \u5f00\u542f HTTP/2 + Server Push \u8be5\u6a21\u5f0f\u4e0b\uff0c\u652f\u6301 HTTP/2 \u7684\u6240\u6709\u7279\u6027\uff0c\u5176\u4e2d Server Push \u7279\u6027\u9700\u8981\u6839\u636e\u4e1a\u52a1\u9700\u6c42\u5408\u7406\u914d\u7f6e\u3002 \u7279\u522b\u5f3a\u8c03\u7684\u662f\uff0cServer Push \u662f HTTP/2 \u89c4\u8303\u4e2d\u5f15\u5165\u7684\u4e00\u79cd\u65b0\u6280\u672f\uff0c\u4e5f\u5373\u670d\u52a1\u7aef\u5728\u6ca1\u6709\u88ab\u5ba2\u6237\u7aef\u660e\u786e\u7684\u8be2\u95ee\u4e0b\uff0c\u62a2\u5148\u7684 \u201c\u63a8\u9001\u201d \u4e00\u4e9b\u7f51\u7ad9\u8d44\u6e90\u7ed9\u5ba2\u6237\u7aef\u3002\u8be5\u7279\u6027\u53ea\u8981\u88ab\u6b63\u786e\u7684\u4f7f\u7528\uff0c\u53ef\u4ee5\u8fbe\u5230\u5f88\u597d\u7684\u9875\u9762\u8bbf\u95ee\u6548\u679c\u3002 \u914d\u7f6e\u5f15\u5bfc \u767b\u9646 CDN \u63a7\u5236\u53f0 \uff0c\u4f9d\u6b21\u8fdb\u5165\uff1a\u670d\u52a1\u7ba1\u7406 > \u529f\u80fd\u914d\u7f6e > HTTPS > HTTP/2 \u914d\u7f6e\uff0c\u70b9\u51fb\u3010\u7ba1\u7406\u3011\u6309\u94ae\u5373\u53ef\u5f00\u59cb\u914d\u7f6e\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff1a 1\uff09\u5f00\u542f HTTP/2 \u9ed8\u8ba4\u5df2\u7ecf\u5f00\u542f\uff0c\u5982\u622a\u56fe\u6240\u793a\uff1a \u6ce8\u610f\uff1a\u5f53\u4e14\u4ec5\u5f53\u5f00\u542f HTTPS \u52a0\u901f\u65f6\uff0cHTTP/2 \u7279\u6027\u624d\u4f1a\u751f\u6548\u3002 2\uff09\u5173\u95ed HTTP/2 \u5982\u9700\u5173\u95ed HTTP/2 \u7279\u6027\uff0c\u53ef\u4ee5\u5728\u63a7\u5236\u53f0\u5173\u95ed\uff0c\u70b9\u51fb\u3010\u5173\u95ed HTTP/2\u3011\u6309\u94ae\uff0c\u7136\u540e\u70b9\u51fb\u3010\u786e\u5b9a\u3011\u5373\u53ef\u4fdd\u5b58\u914d\u7f6e\u3002\u5982\u622a\u56fe\u6240\u793a\uff1a 3\uff09\u5f00\u542f HTTP/2 + Server Push \u5982\u4e0b\u622a\u56fe\u6240\u793a\uff0c\u70b9\u51fb\u3010 \u5f00\u542f HTTP/2 + Server Push \u3011\u6309\u94ae\uff0c\u914d\u7f6e\u5339\u914d\u8def\u5f84\u4ee5\u53ca\u63a8\u9001\u8d44\u6e90\uff0c\u7136\u540e\u70b9\u51fb\u3010\u786e\u5b9a\u3011\u5373\u53ef\u4fdd\u5b58\u914d\u7f6e\u3002 \u5176\u4e2d\uff0c\u5728\u914d\u7f6e\u9879\u91cc\u9762\uff0c\u3010\u5339\u914d\u8def\u5f84\u3011\u662f\u5fc5\u586b\u9879\uff0c\u3010\u63a8\u9001\u8d44\u6e90\u3011\u662f\u975e\u5fc5\u586b\u9879\u3002 \u5339\u914d\u8def\u5f84\uff1a\u4e5f\u5373 Server Push \u7279\u6027\u4ec5\u9488\u5bf9\u5339\u914d\u7684 URI \u751f\u6548\uff0c\u793a\u4f8b\u4e3a\uff1a /index.html /admin.html \u63a8\u9001\u8d44\u6e90\uff1a\u8868\u793a\u5339\u914d URI \u540e\u5c06\u8981\u63a8\u9001\u7684\u8d44\u6e90\u7684 PATH\uff08\u4e0d\u5305\u62ec HOST \u90e8\u5206\uff09\uff0c\u793a\u4f8b\u4e3a\uff1a /style/index.css /dyn/index.js \u9700\u8981\u6ce8\u610f\u7684\u662f\u5f53\u6e90\u7ad9\u6709\u8bbe\u7f6e Link \u9996\u90e8 \u65f6\uff0c\u5373\u4f7f\u3010\u63a8\u9001\u8d44\u6e90\u3011\u5728 CDN \u7aef\u6ca1\u6709\u8fdb\u884c\u81ea\u5b9a\u4e49\u8bbe\u7f6e\uff0c\u4e5f\u4f1a\u751f\u6548\uff0c\u5176\u4e2d Link \u9996\u90e8\u7684\u793a\u4f8b\u4e3a\uff1a Link: </css/styles.css>; rel=preload; as=style \u6ce8\u610f\u4e8b\u9879 HTTP/2 \u7279\u6027\u662f\u5728 HTTPS \u534f\u8bae\u7684\u57fa\u7840\u4e0a\u5b9e\u73b0\uff0c\u9700\u8981\u52a0\u901f\u57df\u540d\u652f\u6301 HTTPS \u8bbf\u95ee\u65b9\u53ef\u652f\u6301\u8be5\u7279\u6027\uff1b \u4f7f\u7528 Server Push \u7279\u6027\uff0c\u901a\u5e38\u4f1a\u5728\u6e90\u7ad9\u8bbe\u7f6e Link \u9996\u90e8\uff0c\u4f8b\u5982\uff1a Link: </css/styles.css>; rel=preload; as=style \u5982\u679c\u5728 CDN \u7aef\u8fdb\u884c\u81ea\u5b9a\u4e49 Server Push \u914d\u7f6e\uff0c\u4f18\u5148\u7ea7\u4f1a\u9ad8\u4e8e\u6e90\u7ad9\u8bbe\u7f6e\u7684 Link \u9996\u90e8\u3002","title":"5.3 HTTP/2 \u914d\u7f6e"},{"location":"cdn/config/#54","text":"\u53c8\u62cd\u4e91 HTTPS \u52a0\u901f\u670d\u52a1\u662f\u57fa\u4e8e SNI \u6280\u672f\u5b9e\u73b0\u7684\uff0c\u56e0\u6b64\u67d0\u4e9b\u4e0d\u652f\u6301 SNI \u7684\u6d4f\u89c8\u5668\u6216\u5ba2\u6237\u7aef\u8bbf\u95ee\u53ef\u80fd\u51fa\u73b0\u95ee\u9898\u3002\u652f\u6301 SNI \u7684\u5ba2\u6237\u7aef\u5217\u8868\u5982\u4e0b\uff1a \u58f0\u660e\uff1a\u8fd0\u884c\u5728 Windows XP \u4e0a\u7684\u6240\u6709\u7248\u672c\u7684 Internet Explorer \u90fd\u4e0d\u652f\u6301 SNI \uff0c\u8be6\u7ec6\u8bf7\u53c2\u8003 \u8fd9\u91cc \u3002","title":"5.4 \u517c\u5bb9\u6027\u8bf4\u660e"},{"location":"cdn/config/#55-tls-13","text":"\u529f\u80fd\u8bf4\u660e TLS 1.3 \u662f TLS \u534f\u8bae\u4e2d\u6700\u65b0\u3001\u6700\u5feb\u548c\u6700\u5b89\u5168\u7684\u7248\u672c\uff0c\u76f8\u6bd4\u65e7\u7248\u7684 TLS \u534f\u8bae\u589e\u52a0\u4e86\u591a\u9879\u65b0\u529f\u80fd\u3002\u901a\u8fc7\u7b80\u5316 SSL \u63e1\u624b\uff0c\u63d0\u9ad8\u4e86\u5efa\u8fde\u901f\u5ea6\uff0c\u51cf\u5c11\u4e86\u5ef6\u8fdf\u3002\u5e76\u901a\u8fc7\u79fb\u9664\u6709\u5b89\u5168\u9690\u60a3\u7684\u52a0\u5bc6\u7b97\u6cd5\uff0c\u63d0\u9ad8\u4e86\u7528\u6237\u8bbf\u95ee\u7684\u6027\u80fd\u3001\u6548\u7387\u548c\u5b89\u5168\u6027\u7b49\u7b49\u3002\u76ee\u524d TLS 1.3 \u5df2\u5728 CDN \u5168\u5e73\u53f0\u652f\u6301\uff0c\u60a8\u53ef\u4ee5\u6839\u636e\u4e1a\u52a1\u9700\u6c42\u5408\u7406\u5173\u95ed\u548c\u5f00\u542f\u3002 \u5982\u4f55\u4f7f\u7528\uff1f 1\u3001\u5982\u4f55\u5728\u6d4f\u89c8\u5668\uff08\u5ba2\u6237\u7aef\uff09\u4e2d\u5f00\u542f TLS 1.3 \uff1f \u76ee\u524d\u6700\u65b0\u7248\u672c\u7684 Chrome \u548c Firefox \u90fd\u652f\u6301 TLS 1.3 \uff0c\u4f46\u662f\u90fd\u9700\u8981\u624b\u52a8\u5f00\u542f\uff0c\u4e3b\u8981\u539f\u56e0\u662f TLS 1.3 \u8fd8\u5728\u8349\u6848\u9636\u6bb5\u3002 1) \u5982\u4f55\u5728 Firefox \u4e2d\u624b\u52a8\u542f\u7528 TLS 1.3 \uff1f Mozilla Firefox \u7528\u6237\u53ef\u4ee5\u901a\u8fc7\u4ee5\u4e0b\u65b9\u5f0f\u5728 Firefox \u4e2d\u542f\u7528 TLS 1.3 \u652f\u6301\uff08 \u8bf7\u6ce8\u610f\uff0cNightly \u9ed8\u8ba4\u652f\u6301 TLS 1.3 \uff0c\u800c Firefox Stable \u9700\u8981\u4e13\u95e8\u914d\u7f6e\u4ee5\u652f\u6301 TLS 1.3 \uff09\u3002 \u5728 Firefox \u5730\u5740\u680f\u4e2d\u52a0\u8f7d about:config \u3002\u5982\u679c\u663e\u793a\u8b66\u544a\u5c4f\u5e55\uff0c\u8bf7\u786e\u8ba4\u60a8\u8981\u5c0f\u5fc3\uff0c\u8bf7\u5ffd\u7565\u5b89\u5168\u63d0\u793a\uff1b \u5728\u641c\u7d22\u533a\u57df\u641c\u7d22 security.tls.version.max \uff1b \u901a\u8fc7\u53cc\u51fb\u5b83\u5c06\u9996\u9009\u9879\u7684\u503c\u66f4\u6539\u4e3a 4\uff0c\u9ed8\u8ba4\u4e3a 3\uff0c\u5982\u4e0a\u56fe\u6240\u793a\u3002 2\uff09\u5982\u4f55\u5728 Chrome \u4e2d\u624b\u52a8\u542f\u52a8 TLS 1.3 \uff1f Google Chrome \u7528\u6237\u53ef\u4ee5\u901a\u8fc7\u4ee5\u4e0b\u65b9\u5f0f\u5728 Chrome \u4e2d\u542f\u7528 TLS 1.3 \u652f\u6301\uff08 \u6ce8\u610f\uff1a Chrome 62 \u4e4b\u524d\u7684\u7248\u672c\u9700\u8981\u5c06 Maximum TLS version enabled \u6539\u4e3a TLS 1.3 \uff09 \u5728\u6d4f\u89c8\u5668\u7684\u5730\u5740\u680f\u4e2d\u52a0\u8f7d chrome://flags/ \u3002\u8fd9\u5c06\u6253\u5f00 Web \u6d4f\u89c8\u5668\u7684\u5b9e\u9a8c\u9875\u9762\uff1b \u5728\u641c\u7d22\u533a\u57df\u641c\u7d22 TLS \u6216\u8005 tls \uff0c\u627e\u5230 TLS 1.3 \u9009\u9879\uff0c\u9ed8\u8ba4\u4e3a Default\uff1b \u9700\u8981\u5c06 TLS 1.3 \u6539\u4e3a Enabled (Draft) \uff1b \u91cd\u65b0\u542f\u52a8 Web \u6d4f\u89c8\u5668\u3002 2\u3001\u5982\u4f55\u5728\u53c8\u62cd\u4e91 CDN \uff08\u670d\u52a1\u7aef\uff09\u63a7\u5236\u53f0\u5f00\u542f TLS 1.3 \uff1f \u767b\u9646 CDN \u63a7\u5236\u53f0 \uff0c\u4f9d\u6b21\u8fdb\u5165\uff1a\u670d\u52a1\u7ba1\u7406 > \u529f\u80fd\u914d\u7f6e > HTTPS > TLS 1.3, \u6ed1\u52a8\u5f00\u5173\u5373\u53ef\u5f00\u542f\u529f\u80fd\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff1a","title":"5.5 TLS 1.3"},{"location":"cdn/config/#56-tls","text":"\u529f\u80fd\u8bf4\u660e \u6700\u4f4e TLS \u7248\u672c\u4e5f\u5373\u5f53\u8bbf\u95ee\u8005\u901a\u8fc7 TLS \u8bbf\u95ee\u57df\u540d\u65f6\uff0c\u88ab\u5141\u8bb8\u8bbf\u95ee\u7684\u6700\u4f4e TLS \u7248\u672c\u3002\u5f53\u524d\u9ed8\u8ba4\u914d\u7f6e\u4e3a TLSv1.0\uff0c\u57fa\u4e8e PCI DSS \u5b89\u5168\u6807\u51c6\uff0c\u53ef\u4ee5\u9009\u62e9\u6700\u4f4e TLS \u7248\u672c\u4e3a TLSv1.1\u3002 \u5e94\u7528\u573a\u666f PCI DSS \u6700\u65b0\u5408\u89c4\u6807\u51c6\u5df2\u4e8e 2018 \u5e74 6 \u6708 30 \u65e5\u751f\u6548\uff0c\u8be5\u6807\u51c6\u8981\u6c42\u7981\u7528\u4f4e\u7248\u672c TLS \u534f\u8bae\uff08\u4f8b\u5982\uff1aTLSv1.0\uff09\uff0cHTTPS \u914d\u7f6e\u5e94\u5b9e\u65bd\u66f4\u5b89\u5168\u7684\u52a0\u5bc6\u534f\u8bae\uff08TLSv1.1 \u6216\u66f4\u9ad8\u7248\u672c\uff0c\u5f3a\u70c8\u5efa\u8bae\u4f7f\u7528 TLS v1.2 \uff09\uff0c\u4ee5\u6ee1\u8db3 PCI DSS \u6700\u65b0\u5408\u89c4\u6807\u51c6\u7684\u8981\u6c42\uff0c\u4ece\u800c\u4fdd\u62a4\u652f\u4ed8\u6570\u636e\u3002 \u914d\u7f6e\u5f15\u5bfc \u767b\u9646 CDN \u63a7\u5236\u53f0 \uff0c\u8fdb\u5165 \u300cHTTPS\u300d\u914d\u7f6e\u9875\u9762\uff0c\u627e\u5230\u300c\u6700\u4f4e TLS \u7248\u672c\u300d\u914d\u7f6e\u9879\uff0c\u70b9\u51fb\u3010\u7ba1\u7406\u3011\u6309\u94ae\u5373\u53ef\u8fdb\u5165\u914d\u7f6e\u754c\u9762\u3002 \u6a21\u5f0f\u4e00\uff1aTLSv1.0 \u914d\u7f6e\u754c\u9762\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u9009\u62e9\u8be5\u6a21\u5f0f\u65f6, TLS \u8bbf\u95ee\u53ef\u4ee5\u652f\u6301 TLSv1.0\u3001TLSv1.1\u3001TLSv1.2\u3001TLSv1.3\uff08\u5982\u679c\u8be5\u529f\u80fd\u5df2\u5f00\u542f\uff09\uff0c\u8be5\u9009\u9879\u4e3a\u9ed8\u8ba4\u914d\u7f6e\u9879\u3002 \u6a21\u5f0f\u4e8c\uff1aTLSv1.1 \u914d\u7f6e\u754c\u9762\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u9009\u62e9\u8be5\u6a21\u5f0f\u65f6, \u5219\u4f7f\u7528 TLSv1.0 \u8fde\u63a5\u7684\u8bbf\u95ee\u8005\u5c06\u88ab\u62d2\u7edd\uff0c\u4ec5\u652f\u6301\u4f7f\u7528 TLSv1.1\u3001TLSv1.2\u3001TLSv1.3\uff08\u5982\u679c\u8be5\u529f\u80fd\u5df2\u5f00\u542f) \u8fde\u63a5\uff0c\u8bf7\u8c28\u614e\u5f00\u542f\uff01 \u6a21\u5f0f\u4e09\uff1aTLSv1.2 \u914d\u7f6e\u754c\u9762\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u9009\u62e9\u8be5\u6a21\u5f0f\u65f6, \u5219\u4f7f\u7528 TLSv1.0\u3001TLSv1.1 \u8fde\u63a5\u7684\u8bbf\u95ee\u8005\u5c06\u88ab\u62d2\u7edd\uff0c\u4ec5\u652f\u6301\u4f7f\u7528 TLSv1.2\u3001TLSv1.3\uff08\u5982\u679c\u8be5\u529f\u80fd\u5df2\u5f00\u542f) \u8fde\u63a5\uff0c\u8bf7\u8c28\u614e\u5f00\u542f\uff01 \u6a21\u5f0f\u56db\uff1aTLSv1.3 \u914d\u7f6e\u754c\u9762\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u9009\u62e9\u8be5\u6a21\u5f0f\u65f6, \u5219\u4f7f\u7528 TLSv1.0\u3001TLSv1.1\u3001TLSv1.2 \u8fde\u63a5\u7684\u8bbf\u95ee\u8005\u5c06\u88ab\u62d2\u7edd\uff0c\u4ec5\u652f\u6301\u4f7f\u7528 TLSv1.3\uff08\u5982\u679c\u8be5\u529f\u80fd\u5df2\u5f00\u542f) \u8fde\u63a5\uff0c\u8bf7\u8c28\u614e\u5f00\u542f\uff01 \u6ce8\u610f\u4e8b\u9879 \u9ed8\u8ba4\u7684\u6700\u4f4e TLS \u7248\u672c\u4e3a TLSv1.0\uff0c\u5982\u9009\u62e9\u66f4\u9ad8\u7248\u672c\u7684 TLS \u534f\u8bae\uff0c\u9700\u8981\u8bc4\u4f30\u517c\u5bb9\u6027\u95ee\u9898\uff08\u4e5f\u5373\u67d0\u4e9b\u8001\u7684\u6d4f\u89c8\u5668\u4e0d\u652f\u6301\u8f83\u65b0\u7684 TLS \u7248\u672c\uff09\u3002 \u4e3a\u4e86\u6ee1\u8db3\u67d0\u4e9b\u6d4b\u8bd5\u8981\u6c42\uff0c\u5982\u9700\u8bbe\u7f6e\u6700\u4f4e TLS \u7248\u672c\u4e3a TLSv1.3\uff0c\u9700\u8981\u63d0\u524d\u5f00\u542f TLS 1.3 \u529f\u80fd\u3002","title":"5.6 \u6700\u4f4e TLS \u7248\u672c"},{"location":"cdn/config/#6","text":"","title":"6.\u8bbf\u95ee\u63a7\u5236"},{"location":"cdn/config/#61-ip","text":"\u529f\u80fd\u8bf4\u660e \u82e5\u9700\u8981\u7981\u6b62\u67d0\u4e9b IP \u6216\u53ea\u5141\u8bb8\u67d0\u4e9b IP \u8bbf\u95ee\uff0c\u5219\u53ef\u4ee5\u4f7f\u7528 IP \u9ed1\u767d\u540d\u5355\u529f\u80fd\uff1b \u914d\u7f6e\u5f15\u5bfc \u767b\u9646 CDN \u63a7\u5236\u53f0 \uff0c\u4f9d\u6b21\u8fdb\u5165\uff1a\u670d\u52a1\u7ba1\u7406 > \u529f\u80fd\u914d\u7f6e > \u8bbf\u95ee\u63a7\u5236 > IP \u9ed1\u767d\u540d\u5355\uff0c\u70b9\u51fb\u300c\u7ba1\u7406\u300d\u6309\u94ae\u5373\u53ef\u5f00\u59cb\u914d\u7f6e\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff1a 1.\u914d\u7f6e IP \u9ed1\u540d\u5355 \u70b9\u51fb\u3010\u5f00\u542f IP \u9ed1\u540d\u5355\u3011\u6309\u94ae\uff0c\u586b\u5199\u5f85\u52a0\u5165\u9ed1\u540d\u5355\u7684\u5355\u4e2a IP \u6216\u8005 IP \u6bb5\uff0c\u4f8b\u5982\uff1a 192.168.1.1 192.168.2.* 192.168.3.* \u5982\u4e0b\u622a\u56fe\u6240\u793a\uff1a \u914d\u7f6e\u5b8c\u6bd5\uff0c\u70b9\u51fb\u53f3\u4e0b\u89d2\u7684\u3010\u786e\u5b9a\u3011\u6309\u94ae\uff0c\u5373\u53ef\u4fdd\u5b58\u751f\u6548\u3002 1.\u914d\u7f6e IP \u767d\u540d\u5355 \u70b9\u51fb\u3010\u5f00\u542f IP \u767d\u540d\u5355\u3011\u6309\u94ae\uff0c\u586b\u5199\u5f85\u52a0\u5165\u767d\u540d\u5355\u7684\u5355\u4e2a IP \u6216\u8005 IP \u6bb5\uff0c\u4f8b\u5982\uff1a 193.168.5.1 193.168.6.* 193.168.7.* \u5982\u4e0b\u622a\u56fe\u6240\u793a\uff1a \u914d\u7f6e\u5b8c\u6bd5\uff0c\u70b9\u51fb\u53f3\u4e0b\u89d2\u7684\u3010\u786e\u5b9a\u3011\u6309\u94ae\uff0c\u5373\u53ef\u4fdd\u5b58\u751f\u6548\u3002 \u6ce8\u610f\u4e8b\u9879 1.\u652f\u6301 * \u901a\u914d\u7b26\uff0c\u5982 10.11.12.* \uff0c\u5c06\u7981\u6b62\u6216\u5141\u8bb8 10.11.12.0 ~ 10.11.12.255 \u7684 IP \u8bbf\u95ee\uff1b 2.IP \u9ed1\u767d\u540d\u5355\u4e0a\u9650 100 \u6761\uff0c\u88ab\u7981\u6b62\u7684 IP \u8bbf\u95ee\u8d44\u6e90\u65f6\uff0c\u5c06\u63d0\u793a 403\uff1b 3.IP \u9ed1\u540d\u5355\u548c IP \u767d\u540d\u5355\u4e0d\u80fd\u591f\u540c\u65f6\u914d\u7f6e\uff0c\u7279\u522b\u5730\uff0c\u914d\u7f6e\u5b8c\u767d\u540d\u5355\u4e4b\u540e\uff0c\u5176\u4ed6\u90fd\u4e3a IP \u9ed1\u540d\u5355\uff0c\u8bf7\u8c28\u614e\u64cd\u4f5c\u3002","title":"6.1 IP \u9ed1\u767d\u540d\u5355"},{"location":"cdn/config/#62","text":"\u529f\u80fd\u8bf4\u660e \u5730\u533a\u8bbf\u95ee\u9650\u5236\u662f\u6307\u6839\u636e\u52a0\u901f\u7f51\u7ad9\u7684\u9700\u6c42\uff0c\u5141\u8bb8\u6216\u7981\u6b62\u7279\u5b9a\u533a\u57df\u7684\u7ec8\u7aef\u7528\u6237\u5bf9\u7f51\u7ad9\u8d44\u6e90\u7684\u8bbf\u95ee\u3002\u5373\u7f51\u7ad9\u6307\u5b9a\u5730\u533a\uff0c\u5141\u8bb8\u8be5\u5730\u533a\u7ec8\u7aef\u7528\u6237\u8bbf\u95ee\uff0c\u800c\u9650\u5236\u5176\u4ed6\u5730\u533a\u7528\u6237\u8bbf\u95ee\uff0c\u6216\u8005\u76f8\u53cd\u3002 \u914d\u7f6e\u5f15\u5bfc \u767b\u9646 CDN \u63a7\u5236\u53f0 \uff0c\u4f9d\u6b21\u8fdb\u5165\uff1a\u670d\u52a1\u7ba1\u7406 > \u529f\u80fd\u914d\u7f6e > \u8bbf\u95ee\u63a7\u5236 > \u5730\u533a\u8bbf\u95ee\u9650\u5236\uff0c\u70b9\u51fb\u300c\u7ba1\u7406\u300d\u6309\u94ae\u5373\u53ef\u5f00\u59cb\u914d\u7f6e\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff1a 1.\u914d\u7f6e\u5730\u533a\u9ed1\u540d\u5355 \u70b9\u51fb\u3010\u542f\u7528\u9ed1\u540d\u5355\u3011\u6309\u94ae\uff0c\u586b\u5199\u5f85\u52a0\u5165\u9ed1\u540d\u5355\u7684\u56fd\u5bb6\u3001\u5730\u533a\u3001\u8fd0\u8425\u5546\u4fe1\u606f\uff0c\u4f8b\u5982\uff1a 1 \u97e9\u56fd 2 \u6cf0\u56fd 3 \u6fb3\u5927\u5229\u4e9a \u5982\u4e0b\u622a\u56fe\u6240\u793a\uff1a \u914d\u7f6e\u5b8c\u6bd5\uff0c\u70b9\u51fb\u53f3\u4e0b\u89d2\u7684\u3010\u786e\u5b9a\u3011\u6309\u94ae\uff0c\u5373\u53ef\u4fdd\u5b58\u751f\u6548\u3002 2.\u914d\u7f6e\u5730\u533a\u767d\u540d\u5355 \u70b9\u51fb\u3010\u542f\u7528\u767d\u540d\u5355\u3011\u6309\u94ae\uff0c\u586b\u5199\u5f85\u52a0\u5165\u767d\u540d\u5355\u7684\u56fd\u5bb6\u3001\u5730\u533a\u3001\u8fd0\u8425\u5546\u4fe1\u606f\uff0c\u4f8b\u5982\uff1a 1 \u4e2d\u56fd \u8fbd\u5b81 \u7535\u4fe1 2 \u4e2d\u56fd \u9999\u6e2f 3 \u4e2d\u56fd \u5317\u4eac 4 \u4e2d\u56fd \u5e7f\u4e1c \u7535\u4fe1 \u5982\u4e0b\u622a\u56fe\u6240\u793a\uff1a \u914d\u7f6e\u5b8c\u6bd5\uff0c\u70b9\u51fb\u53f3\u4e0b\u89d2\u7684\u3010\u786e\u5b9a\u3011\u6309\u94ae\uff0c\u5373\u53ef\u4fdd\u5b58\u751f\u6548\u3002\u66f4\u591a\u8be6\u7ec6\u914d\u7f6e\u8bf7\u53c2\u89c1 \u5730\u533a\u8bbf\u95ee\u9650\u5236\u7528\u6237\u6307\u5357 \u3002 \u6ce8\u610f\u4e8b\u9879 \u5730\u533a\u8bbf\u95ee\u9650\u5236\u914d\u7f6e\u7c92\u5ea6\uff0c\u4e2d\u56fd\u5730\u533a\u652f\u6301\u7701\u4efd\u3001\u8fd0\u8425\u5546\uff08\u5305\u62ec\uff1a\u7535\u4fe1\u3001\u94c1\u901a\u3001\u79fb\u52a8\u3001\u8054\u901a\u3001\u9e4f\u535a\u58eb\u3001\u6559\u80b2\u7f51\u3001\u79d1\u6280\u7f51\uff09\uff0c\u6d77\u5916\u5730\u533a\u652f\u6301\u5230\u8fd0\u8425\u5546\uff1b \u5730\u533a\u767d\u540d\u5355\u548c\u9ed1\u540d\u5355\u4e0d\u80fd\u540c\u65f6\u914d\u7f6e\uff0c\u7279\u522b\u5730\uff0c\u914d\u7f6e\u5b8c\u767d\u540d\u5355\u540e\uff0c\u5176\u4ed6\u5730\u533a\u90fd\u4e3a\u9ed1\u540d\u5355\uff0c\u8bf7\u8c28\u614e\u64cd\u4f5c\u3002","title":"6.2 \u5730\u533a\u8bbf\u95ee\u9650\u5236"},{"location":"cdn/config/#63-referer","text":"\u529f\u80fd\u8bf4\u660e \u57fa\u4e8e HTTP \u534f\u8bae\u7684 referer \u673a\u5236\uff0c\u901a\u8fc7 referer \u8ddf\u8e2a\u6765\u6e90\uff0c\u5bf9\u6765\u6e90\u8fdb\u884c\u8bc6\u522b\u548c\u5224\u65ad\uff0c\u5b9e\u73b0\u539f\u7406\u5c31\u662f\u901a\u8fc7 HTTP \u8bf7\u6c42 Header \u4e2d\u7684 referer \u5b57\u6bb5\u7684\u503c\u6765\u8bbe\u7f6e\u8fc7\u6ee4\u7b56\u7565\uff0c\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u9632\u76d7\u94fe\u672a\u542f\u7528\uff0c\u65e0\u9ed1/\u767d\u540d\u5355\u3002\u9664\u6b64\u4e4b\u5916\uff0c\u652f\u6301\u5141\u8bb8 referer \u4e3a\u7a7a\u548c\u7981\u6b62 referer \u4e3a\u7a7a\u7684\u8bbe\u7f6e\uff0c\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u5141\u8bb8 referer \u4e3a\u7a7a\u3002 \u767d\u540d\u5355\uff1a\u4ec5\u5141\u8bb8\u540d\u5355\u4e2d\u7684\u57df\u540d\u7f51\u7ad9\u8bbf\u95ee\u6587\u4ef6\uff0c\u5176\u4ed6\u57df\u540d\u7f51\u7ad9\u90fd\u4e0d\u5141\u8bb8\u8bbf\u95ee\u3002 \u9ed1\u540d\u5355\uff1a\u4ec5\u7981\u6b62\u540d\u5355\u4e2d\u7684\u57df\u540d\u7f51\u7ad9\u8bbf\u95ee\u6587\u4ef6\uff0c\u5176\u4ed6\u57df\u540d\u7f51\u7ad9\u90fd\u5141\u8bb8\u8bbf\u95ee\u3002 \u7279\u522b\u5730\uff0c\u9ed8\u8ba4\u3010\u5141\u8bb8 Referer \u4e3a\u7a7a\u3011 \u8fd9\u79cd\u60c5\u51b5\u4f1a\u7ed5\u8fc7\u9632\u76d7\u94fe\u7684\u903b\u8f91\uff1b\u82e5\u542f\u7528\u3010\u7981\u6b62 Referer \u4e3a\u7a7a\u3011\uff0c\u90a3\u4e48\u8fd9\u7c7b\u8bf7\u6c42\u5c31\u76f4\u63a5\u88ab\u7981\u6b62\u8bbf\u95ee\u3002 \u914d\u7f6e\u5f15\u5bfc \u767b\u9646 CDN \u63a7\u5236\u53f0 \uff0c\u4f9d\u6b21\u8fdb\u5165\uff1a\u670d\u52a1\u7ba1\u7406 > \u529f\u80fd\u914d\u7f6e > \u8bbf\u95ee\u63a7\u5236 > Referer \u9632\u76d7\u94fe\uff0c\u70b9\u51fb\u300c\u7ba1\u7406\u300d\u6309\u94ae\u5373\u53ef\u5f00\u59cb\u914d\u7f6e\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff1a 1.\u914d\u7f6e referer \u9ed1\u540d\u5355 \u70b9\u51fb\u3010\u542f\u7528\u9ed1\u540d\u5355\u3011\u6309\u94ae\uff0c\u586b\u5199\u5f85\u52a0\u5165\u9ed1\u540d\u5355\u57df\u540d\u6216\u8005\u57df\u540d\u6bb5\uff0c\u4f8b\u5982\uff1a www.upyun.com image.upyun.com *.upyun.com \u5982\u4e0b\u622a\u56fe\u6240\u793a\uff1a \u914d\u7f6e\u5b8c\u6bd5\uff0c\u70b9\u51fb\u53f3\u4e0b\u89d2\u7684\u3010\u786e\u5b9a\u3011\u6309\u94ae\uff0c\u5373\u53ef\u4fdd\u5b58\u751f\u6548\u3002 2.\u914d\u7f6e referer \u767d\u540d\u5355 \u70b9\u51fb\u3010\u542f\u7528\u767d\u540d\u5355\u3011\u6309\u94ae\uff0c\u586b\u5199\u5f85\u52a0\u5165\u767d\u540d\u5355\u57df\u540d\u6216\u8005\u57df\u540d\u6bb5\uff0c\u4f8b\u5982\uff1a www.baidu.com www.taobao.com www.163.com \u5982\u4e0b\u622a\u56fe\u6240\u793a\uff1a \u914d\u7f6e\u5b8c\u6bd5\uff0c\u70b9\u51fb\u53f3\u4e0b\u89d2\u7684\u3010\u786e\u5b9a\u3011\u6309\u94ae\uff0c\u5373\u53ef\u4fdd\u5b58\u751f\u6548\u3002 \u6ce8\u610f\u4e8b\u9879 \u767d\u540d\u5355\uff1a\u4ec5\u5141\u8bb8\u540d\u5355\u4e2d\u7684\u57df\u540d\u7f51\u7ad9\u8bbf\u95ee\u6587\u4ef6\uff0c\u5176\u4ed6\u57df\u540d\u7f51\u7ad9\u90fd\u4e0d\u5141\u8bb8\u8bbf\u95ee; \u9ed1\u540d\u5355\uff1a\u4ec5\u7981\u6b62\u540d\u5355\u4e2d\u7684\u57df\u540d\u7f51\u7ad9\u8bbf\u95ee\u6587\u4ef6\uff0c\u5176\u4ed6\u57df\u540d\u7f51\u7ad9\u90fd\u5141\u8bb8\u8bbf\u95ee; \u652f\u6301 * \u901a\u914d\u7b26\uff0c\u6bd4\u5982\u767d\u540d\u5355\u7684 *upyun.com \u5c06\u5141\u8bb8 www.upyun.com \u3001 abcupyun.com \u7b49\u7f51\u7ad9\u8bbf\u95ee; \u7279\u522b\u5730\uff0c\u9ed8\u8ba4 \u5141\u8bb8 Referer \u4e3a\u7a7a \u8fd9\u79cd\u60c5\u51b5\u4f1a\u7ed5\u8fc7\u9632\u76d7\u94fe\u7684\u903b\u8f91\uff0c\u82e5\u8fd9\u91cc\u542f\u7528 \u7981\u6b62 Referer \u4e3a\u7a7a \uff0c\u90a3\u4e48\u8fd9\u7c7b\u8bf7\u6c42\u5c31\u76f4\u63a5\u88ab\u7981\u6b62\u8bbf\u95ee\u4e86\u3002","title":"6.3 Referer \u9632\u76d7\u94fe"},{"location":"cdn/config/#64-user-agent","text":"\u529f\u80fd\u8bf4\u660e CDN \u652f\u6301\u9488\u5bf9 HTTP \u8bf7\u6c42\u5934\u4e2d\u7684 User-Agent \u4fe1\u606f\uff0c\u7981\u6b62\u6216\u8005\u5141\u8bb8\u7b26\u5408\u7279\u5b9a User-Agent \u89c4\u5219\u7684\u8bf7\u6c42\u3002\u5177\u4f53\u4f7f\u7528\u7684\u573a\u666f\uff0c\u4e3e\u4e2a\u4f8b\u5b50\uff1a 1\uff09\u67d0\u4e2a\u8d44\u6e90\u6216\u8005\u9875\u9762\u4e0d\u5e0c\u671b\u88ab IE \u6216\u8005 Chrome \u6d4f\u89c8\u5668\u8bbf\u95ee\uff0c\u6b64\u65f6\u60a8\u53ef\u4ee5\u914d\u7f6e User-Agent \u9ed1\u540d\u5355\u5c31\u53ef\u4ee5\u5b9e\u73b0\uff1b 2\uff09\u67d0\u5ba2\u6237\u7aef\u62e5\u6709\u81ea\u5df1\u4e13\u5c5e\u7684\u5ba2\u6237\u7aef\u5bf9\u8d44\u6e90\u8fdb\u884c\u4e0b\u8f7d\uff0c\u8be5\u4e0b\u8f7d\u5de5\u5177\u5728\u8bf7\u6c42\u65f6\uff0c\u4f7f\u7528\u4e86\u5b9a\u5236\u7684 User-Agent \u540d\u79f0\uff0c\u6216\u53ea\u5141\u8bb8\u6b64\u7c7b User-Agent \u8bf7\u6c42\u8d44\u6e90\uff0c\u6b64\u65f6\u53ef\u4ee5\u914d\u7f6e User-Agent \u767d\u540d\u5355\u5c31\u53ef\u4ee5\u5b9e\u73b0\u3002 \u914d\u7f6e\u5f15\u5bfc \u767b\u9646 CDN \u63a7\u5236\u53f0 \uff0c\u4f9d\u6b21\u8fdb\u5165\uff1a\u670d\u52a1\u7ba1\u7406 > \u529f\u80fd\u914d\u7f6e > \u8bbf\u95ee\u63a7\u5236 > User-Agent \u9632\u76d7\u94fe\uff0c\u70b9\u51fb\u300c\u7ba1\u7406\u300d\u6309\u94ae\u5373\u53ef\u5f00\u59cb\u914d\u7f6e\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff1a 1.User-Agent \u767d\u540d\u5355\u914d\u7f6e \u9009\u62e9\u3010\u5f00\u542f\u767d\u540d\u5355\u3011\u6309\u94ae\uff0c\u586b\u5199\u5f85\u914d\u7f6e\u7684\u767d\u540d\u5355\u5217\u8868\uff0c\u5982\u4e0b\u6240\u793a\uff1a Mozilla/4.0 (Windows; MSIE 6.0; Windows NT 5.2) Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 6.0) Mozilla/4.0 (compatible; MSIE 8.0; Windows NT 6.0; Trident/4.0) Mozilla/5.0 (compatible; MSIE 9.0; Windows NT 6.1; Trident/5.0) Mozilla/5.0 (compatible; WOW64; MSIE 10.0; Windows NT 6.2) \u914d\u7f6e\u622a\u56fe\u5982\u4e0b\uff1a \u914d\u7f6e\u5b8c\u6bd5\uff0c\u70b9\u51fb\u53f3\u4e0b\u89d2\u7684\u3010\u786e\u5b9a\u3011\u6309\u94ae\u5373\u53ef\u3002 2.User-Agent \u9ed1\u540d\u5355\u914d\u7f6e \u9009\u62e9\u3010\u5f00\u542f\u9ed1\u540d\u5355\u3011\u6309\u94ae\uff0c\u586b\u5199\u5f85\u914d\u7f6e\u7684\u9ed1\u540d\u5355\u5217\u8868\uff0c\u5982\u4e0b\u6240\u793a\uff1a Mozilla/5.0 (Android; Mobile; rv:14.0) Gecko/14.0 Firefox/14.0 Mozilla/5.0 (Android; Tablet; rv:14.0) Gecko/14.0 Firefox/14.0 Mozilla/5.0 (Windows NT 6.2; WOW64; rv:21.0) Gecko/20100101 Firefox/21.0 Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:21.0) Gecko/20130331 Firefox/21.0 \u914d\u7f6e\u622a\u56fe\u5982\u4e0b\uff1a \u914d\u7f6e\u5b8c\u6bd5\uff0c\u70b9\u51fb\u53f3\u4e0b\u89d2\u7684\u3010\u786e\u5b9a\u3011\u6309\u94ae\u5373\u53ef\u3002 \u6ce8\u610f\u4e8b\u9879 \u6dfb\u52a0 User-Agent \u9ed1\u767d\u540d\u5355\u89c4\u5219\u6570\u91cf\u4e0a\u9650\u5404\u4e3a 50 \u6761\uff0c\u8bf7\u5408\u7406\u5206\u914d\uff1b User-Agent \u4e0d\u533a\u5206\u5927\u5c0f\u5199\uff0c\u4e14\u652f\u6301 * \u901a\u914d\u7b26\uff1b User-Agent \u9632\u76d7\u94fe\u7684\u4f18\u5148\u7ea7\u9ad8\u4e8e Referer \u9632\u76d7\u94fe; User-Agent \u5f88\u5bb9\u6613\u4f2a\u9020\uff0c\u56e0\u6b64 User-Agent \u9632\u76d7\u94fe\u5b89\u5168\u6027\u8f83\u4f4e\uff0c\u5efa\u8bae\u7ed3\u5408\u5176\u4ed6\u9632\u76d7\u94fe\u529f\u80fd\u914d\u5408\u4f7f\u7528\u3002","title":"6.4 User-Agent \u9632\u76d7\u94fe"},{"location":"cdn/config/#65-token","text":"\u529f\u80fd\u8bf4\u660e Token \u9632\u76d7\u94fe\u662f\u901a\u8fc7\u5bf9\u65f6\u95f4\u6709\u5173\u7684\u5b57\u7b26\u4e32\u8fdb\u884c\u7b7e\u540d\uff0c\u5c06\u65f6\u95f4\u3001\u7b7e\u540d\u4fe1\u606f\u901a\u8fc7\u4e00\u5b9a\u7684\u65b9\u5f0f\u4f20\u9012\u7ed9 CDN \u8282\u70b9\u670d\u52a1\u5668\u4f5c\u4e3a\u5224\u5b9a\u4f9d\u636e\uff0cCDN \u8fb9\u7f18\u8282\u70b9\u4f9d\u636e\u7ea6\u5b9a\u7684\u7b97\u6cd5\u5224\u65ad\u6765\u8bbf\u7684 URL \u662f\u5426\u6709\u8bbf\u95ee\u6743\u9650\u3002\u5982\u679c\u901a\u8fc7\uff0c\u6267\u884c\u4e0b\u4e00\u6b65\uff1b\u5982\u679c\u4e0d\u901a\u8fc7\uff0c\u54cd\u5e94 HTTP 403 \u72b6\u6001\u7801\u6216\u8005\u901a\u8fc7 302 \u8df3\u8f6c\u5230\u5176\u4ed6 URL\u3002 \u5b9e\u73b0\u539f\u7406 Token \u9632\u76d7\u94fe\u7684\u5b9e\u73b0\u539f\u7406\u53ef\u53c2\u89c1\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u5982\u4e0a\u56fe\u6240\u793a\uff0c\u6574\u4e2a token \u9632\u76d7\u94fe\u7684\u5b9e\u73b0\u9700\u8981\u5982\u4e0b\u51e0\u4e2a\u90e8\u5206\u6765\u914d\u5408\uff1a 1\uff09\u5ba2\u6237\u7aef\uff1a\u8d1f\u8d23\u53d1\u9001\u539f\u59cb\u8bf7\u6c42\u7ed9\u5ba2\u6237\u7aef\u4e1a\u52a1\u670d\u52a1\u5668\u4ee5\u53ca\u53d1\u9001\u5e26\u7b7e\u540d\u7684 URL \u7ed9 CDN \u8282\u70b9\u8fdb\u884c\u9a8c\u8bc1\uff1b 2\uff09\u4e1a\u52a1\u670d\u52a1\u5668\uff1a\u6839\u636e\u7ea6\u5b9a\u7684\u7b97\u6cd5\u751f\u6210\u5e26 _upt \u53c2\u6570\u7684 URL \u8fd4\u56de\u7ed9\u5ba2\u6237\u7aef\uff1b 3\uff09CDN \u8282\u70b9\uff1a\u8d1f\u8d23\u548c\u5ba2\u6237\u7aef\u8fdb\u884c\u65f6\u95f4\u3001\u7b7e\u540d\u6821\u9a8c\uff1b 1\u3001\u7b7e\u540d\u53c2\u6570 etime: URL \u8fc7\u671f\u7684\u65f6\u95f4\uff0c\u5fc5\u987b\u662f UNIX TIME \u683c\u5f0f\uff0c\u5982\uff1a2017/3/9 9:19:0 -> 1489022340 secret: \u548c CDN \u5e73\u53f0\u7ea6\u5b9a\u7684\u7b7e\u540d\u5bc6\u94a5\uff0c\u9700\u8981\u5728 CDN \u7ba1\u7406\u63a7\u5236\u53f0\u914d\u7f6e URI\uff1a\u8bf7\u6c42 URL \u7684\u8def\u5f84\u90e8\u5206\uff08\u4e0d\u5305\u542b ? \u53ca\u540e\u9762\u7684 Query String\uff09\uff0c\u5982\u5ba2\u6237\u7aef\u8bbf\u95ee\u7684\u5916\u94fe\u5730\u5740\u4e3a http://xxx.b0.upaiyun.com/path/to/a.jpg?version=1.0\uff0c\u90a3\u4e48 URI \u90e8\u5206\u5219\u4e3a\uff1a/path/to/a.jpg 2.\u7b97\u6cd5\u8bf4\u660e sign = MD5( secret & etime & URI ) _upt = sign { \u4e2d\u95f4 8 \u4f4d }\uff0betime _upt = MD5( secret & etime & URI ){ \u4e2d\u95f4 8 \u4f4d } + etime \u4e3e\u4e2a\u4f8b\u5b50\uff1a\u5047\u8bbe\u5f53\u524d\u7684 UNIX TIME \u65f6\u95f4\u4e3a\uff1a1370000000\uff0c\u67d0\u56fe\u7247\u8d44\u6e90\uff08\u4f8b\u5982\uff1ahttp://test.example.com/dir/pic.jpg\uff0910 \u5206\u949f\u6709\u6548\uff0c\u5219\uff1a etime = 1370000000 + 600 = 1370000600 URI = '/dir/pic.jpg' sign = MD5( secret & etime & URI ) = xxxxxxxxxxxxabcdefghyyyyyyyyyyyy _upt = MD5( secret & etime & URI ){ \u4e2d\u95f4 8 \u4f4d } + etime \uff1d abcdefgh1370000600 \u6700\u540e\u7ecf\u8fc7\u5ba2\u6237\u7aef\u4e1a\u52a1\u670d\u52a1\u5668\u751f\u6210\u7684 URL \u4e3a\uff1a http://test.example.com/dir/pic.jpg\uff1f_upt=abcdefgh137000060 \u5b9e\u73b0\u65b9\u5f0f 1.\u5ba2\u6237\u7aef\u4e1a\u52a1\u670d\u52a1\u5668\u751f\u6210\u9a8c\u8bc1\u4fe1\u606f \u9a8c\u8bc1\u4fe1\u606f\u7684\u751f\u6210\u7531\u4e1a\u52a1\u670d\u52a1\u5668\u8d1f\u8d23\uff0c\u5177\u4f53\u7684\u52a0\u5bc6\u8fc7\u7a0b\u9700\u8981\u786e\u8ba4\u5982\u4e0b\u4e8b\u9879\uff1a \u786e\u8ba4\u8fc7\u671f\u65f6\u95f4\u7684\u683c\u5f0f\uff0c\u9ed8\u8ba4\u91c7\u7528 UNIX \u65f6\u95f4\u6233\u683c\u5f0f \u786e\u8ba4\u9a8c\u8bc1\u4fe1\u606f\u4e2d\u7684\u5bc6\u6587\uff0c\u7528\u6237\u8ba1\u7b97\u9a8c\u8bc1\u4fe1\u606f\uff0c\u9700\u8981\u548c CDN \u5e73\u53f0\u7ea6\u5b9a \u786e\u8ba4\u9a8c\u8bc1\u4fe1\u606f\u65f6\u52a0\u5165\u7684\u53c2\u6570\uff0c\u9ed8\u8ba4\u4e3a URL \u7684\u8def\u5f84\u90e8\u5206 \u6839\u636e\u4e0a\u6587\u7684\u7b97\u6cd5\u8bf4\u660e\u8ba1\u7b97\u9a8c\u8bc1\u4fe1\u606f\uff0c\u5176\u4e2d\u8bf7\u6c42 URL \u4e2d\u7684\u9a8c\u8bc1\u53c2\u6570\u4e3a _upt 2.\u53c8\u62cd\u4e91 CDN \u8282\u70b9\u9a8c\u8bc1\u8fc7\u7a0b \u6839\u636e\u7ea6\u5b9a\u89e3\u6790\u53d6\u51fa\u8fc7\u671f\u65f6\u95f4\uff0c\u548c\u5f53\u524d CDN \u8282\u70b9\u670d\u52a1\u5668\u65f6\u95f4\u8fdb\u884c\u6bd4\u8f83\uff0c\u786e\u8ba4\u8bf7\u6c42\u662f\u5426\u8fc7\u671f \u6839\u636e\u4e0a\u6587\u7ea6\u5b9a\u597d\u7684\u7b97\u6cd5\u8ba1\u7b97\u65b9\u5f0f\uff0c\u8ba1\u7b97\u51fa MD5 \u52a0\u5bc6\u4e32\u540e\uff0c\u548c URL \u4e2d\u7684\u52a0\u5bc6\u4e32\u8fdb\u884c\u6bd4\u8f83\uff0c\u9a8c\u8bc1\u52a0\u5bc6\u4e32\u662f\u5426\u4e00\u81f4 \u5982\u679c\u4ee5\u4e0a\u4e24\u4e2a\u6b65\u9aa4\u90fd\u9a8c\u8bc1\u901a\u8fc7\uff0c\u8bf7\u6c42\u624d\u4f1a\u88ab\u8ba4\u4e3a\u662f\u5408\u6cd5\u7684\uff0c\u8fd9\u65f6 CDN \u4f1a\u8bf7\u6c42\u8d44\u6e90\u54cd\u5e94\u7ed9\u5ba2\u6237\u7aef\uff0c\u5426\u5219\u4f1a\u88ab\u8ba4\u4e3a\u662f\u975e\u6cd5\u8bf7\u6c42\uff0c\u76f4\u63a5\u54cd\u5e94 HTTP status code 403 \u914d\u7f6e\u5f15\u5bfc \u767b\u9646 CDN \u63a7\u5236\u53f0 \uff0c\u4f9d\u6b21\u8fdb\u5165\uff1a\u670d\u52a1 \u7ba1\u7406 > \u529f\u80fd\u914d\u7f6e > \u8bbf\u95ee\u63a7\u5236 > Token \u9632\u76d7\u94fe\uff0c\u70b9\u51fb\u300c\u7ba1\u7406\u300d\u6309\u94ae\u5373\u53ef\u5f00\u59cb\u914d\u7f6e\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u5982\u4e0a\u622a\u56fe\u6240\u793a\uff0c\u6b64\u5904\u586b\u5199\u7684\u5bc6\u94a5\u4e5f\u5373\u4e0e CDN \u5e73\u53f0\u7ea6\u5b9a\u7684\u7b7e\u540d\u5bc6\u94a5\u3002 \u6ce8\u610f\u4e8b\u9879 \u5f53\u9632\u76d7\u94fe\u6d89\u53ca\u7684\u53c2\u6570\uff08\u6bd4\u5982\uff1a\u5bc6\u94a5\u3001\u8fc7\u671f\u65f6\u95f4\uff09\u53d1\u751f\u53d8\u66f4\u65f6\uff0c\u9700\u8981\u5728 CDN \u63a7\u5236\u540e\u53f0\u53ca\u65f6\u8c03\u6574\uff1b \u65f6\u95f4\u6233\u9632\u76d7\u94fe\u7684\u76f8\u5173\u53c2\u6570\u662f\u7ecf\u5e38\u53d1\u751f\u53d8\u66f4\u7684\uff0c\u7531\u4e8e\u690d\u5165\u5230\u4e86 URL \u4e2d\uff0c\u4f1a\u5f71\u54cd\u5230\u8282\u70b9\u7684\u7f13\u5b58\uff0c\u53ef\u80fd\u4f1a\u5bfc\u81f4\u4e00\u4efd\u76f8\u540c\u7684\u6587\u4ef6\uff0c\u4f1a\u56e0\u4e3a URL \u91cc\u9762\u7684\u9632\u76d7\u94fe\u53c2\u6570\u7684\u4e0d\u540c\u800c\u7f13\u5b58\u591a\u4efd\uff0c\u4e00\u822c\u60c5\u51b5\u4e0b\uff0c\u5efa\u8bae\u53bb\u5ffd\u7565\u53c2\u6570\u8fdb\u884c\u7f13\u5b58\u3002","title":"6.5 Token \u9632\u76d7\u94fe"},{"location":"cdn/config/#66","text":"\u529f\u80fd\u8bf4\u660e \u56de\u6e90\u9274\u6743\u662f\u4e00\u79cd\u9ad8\u7ea7\u7684\u9632\u76d7\u94fe\u65b9\u5f0f\uff0c\u9002\u7528\u4e8e\u5bf9\u9632\u76d7\u94fe\u6709\u5f88\u9ad8\u5b9e\u65f6\u6027\u8981\u6c42\u7684\u573a\u666f\u3002\u5927\u6982\u539f\u7406\u662f CDN \u8fb9\u7f18\u8282\u70b9\u6bcf\u6b21\u63a5\u53d7\u5230\u8bf7\u6c42\u4e4b\u540e\uff0c\u90fd\u9700\u8981\u56de\u5ba2\u6237\u6e90\u7ad9\u8fdb\u884c\u9a8c\u8bc1\uff0c\u9a8c\u8bc1\u901a\u8fc7\u4e4b\u540e\u624d\u8ba4\u4e3a\u662f\u5408\u6cd5\u8bf7\u6c42\uff0c\u8fd9\u6837 CDN \u53ef\u4ee5\u7ee7\u7eed\u63d0\u4f9b\u670d\u52a1\u3002 \u914d\u7f6e\u5f15\u5bfc \u767b\u9646 CDN \u63a7\u5236\u53f0 \uff0c\u4f9d\u6b21\u8fdb\u5165\uff1a\u670d\u52a1\u7ba1\u7406 > \u529f\u80fd\u914d\u7f6e > \u8bbf\u95ee\u63a7\u5236 > \u56de\u6e90\u9274\u6743\uff0c\u70b9\u51fb\u300c\u7ba1\u7406\u300d\u6309\u94ae\u5373\u53ef\u5f00\u59cb\u914d\u7f6e\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u70b9\u51fb\u53f3\u4e0a\u89d2\u7684\u3010\u6dfb\u52a0\u9274\u6743\u914d\u7f6e\u3011\uff0c\u5373\u53ef\u8fdb\u5165\u914d\u7f6e\u754c\u9762\uff0c\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u8d44\u6e90\u5730\u5740 \u9700\u8981\u8fdb\u884c\u9274\u6743\u7684\u5339\u914d\u89c4\u5219\u96c6\uff0c\u652f\u6301\u57df\u540d\u7ea7\u522b\u914d\u7f6e\uff0c\u793a\u4f8b\u5982\u4e0b\uff1a test123.upyun.com/video/* \u670d\u52a1\u5668\u5730\u5740 \u4e5f\u5373\u9274\u6743 URL \uff0c\u9274\u6743\u4e1a\u52a1\u670d\u52a1\u5668\u5730\u5740\uff0c\u683c\u5f0f\u4e3a\uff1a scheme://host:port/path \u793a\u4f8b\u5982\u4e0b\uff1a http://validate.example.com/app/cdnValidate \u8bf7\u6c42\u65b9\u6cd5 \u5411\u9274\u6743\u670d\u52a1\u5668\u53d1\u8d77\u8bf7\u6c42\u7684\u65b9\u6cd5\u3002\u76ee\u524d\u4ec5\u652f\u6301 GET \u548c POST \uff0c\u622a\u56fe\u9009\u62e9 GET \u65b9\u6cd5\u3002 \u9274\u6743\u53c2\u6570 \u9274\u6743\u6240\u9700\u53c2\u6570\uff0c\u4e5f\u5373\u8bf7\u6c42 URL \u91cc\u9762\u7684\u53c2\u6570\uff0c\u5047\u5982\u8bf7\u6c42 URL \u4e3a\uff1a http://test123.upyun.com/video/cdnValidate?accountID=2345&userTD=kadkf&token=fjdkadkf&sign=dfskjdk123 \u5219\uff0c\u9274\u6743\u53c2\u6570\u53ef\u4e3a\uff1a accountIDD userTD token sign \u5177\u4f53\u53c2\u6570\u4e2a\u6570\uff0c\u6839\u636e\u4e1a\u52a1\u60c5\u51b5\u8fdb\u884c\u914d\u7f6e\u3002 \u9274\u6743\u65b9\u5f0f \u7ea6\u5b9a\u7684\u9274\u6743\u901a\u8fc7\u7684\u72b6\u6001\u7801\u6216\u8005\u54cd\u5e94\u4f53\u5185\u5bb9\uff0c\u5176\u4e2d\u72b6\u6001\u7801\u4e0d\u80fd\u4e3a 5XX\uff0c\u54cd\u5e94\u4f53\u5185\u5bb9\u4e0d\u80fd\u4e3a\u7a7a\u3002\u4f8b\u5982\uff1a\u793a\u4f8b\u9274\u6743\u901a\u8fc7\u7684\u72b6\u6001\u7801\u4e3a 200\u3002 \u8d85\u65f6\u7b49\u5f85\u65f6\u95f4 \u9274\u6743\u8bf7\u6c42\u7684\u8d85\u65f6\u65f6\u95f4\uff0c\u9ed8\u8ba4\u4e3a 10 \u79d2\u949f\u3002 \u9274\u6743\u670d\u52a1\u5668\u8fde\u63a5\u8d85\u65f6 \u5f53\u670d\u52a1\u5668\u5931\u53bb\u54cd\u5e94\u65f6\uff0c\u6b64\u5b57\u6bb5\u751f\u6548\u3002\u4e3a true \u65f6\u8ba4\u4e3a\u6240\u6709\u8bf7\u6c42\u90fd\u901a\u8fc7\u9274\u6743\uff0c\u9ed8\u8ba4\u662f\u9274\u6743\u901a\u8fc7\u3002 \u6ce8\u610f\u4e8b\u9879 \u4f7f\u7528\u8be5\u529f\u80fd\uff0c\u9700\u8003\u8651\u8bbf\u95ee\u91cf\u8fc7\u5927\u65f6\u9274\u6743\u670d\u52a1\u5668\u7684\u538b\u529b\uff1b \u5408\u6cd5\u8bf7\u6c42\u65f6\uff0c\u9700\u5728\u9274\u6743\u670d\u52a1\u5668\u54cd\u5e94\u5408\u6cd5\u7684\u9274\u6743\u72b6\u6001\u7801\u548c\u54cd\u5e94\u4f53\uff0c\u5426\u5219\u4f1a\u9274\u6743\u5931\u8d25\uff1b CDN \u8282\u70b9\u5230\u9274\u6743\u670d\u52a1\u5668\u51fa\u73b0\u7f51\u7edc\u5f02\u5e38\u6216\u8005\u7f51\u7edc\u8d85\u65f6\u7b49\u60c5\u51b5\u65f6\uff0c\u4f1a\u9ed8\u8ba4\u9274\u6743\u901a\u8fc7\uff1b","title":"6.6 \u56de\u6e90\u9274\u6743"},{"location":"cdn/config/#67-http","text":"\u529f\u80fd\u8bf4\u660e \u8be5\u529f\u80fd\u8868\u793a\u80fd\u591f\u63d0\u4ea4\u7684\u6700\u5927\u8bf7\u6c42 body \u9650\u5236\uff0c\u9002\u7528\u4e8e POST \u548c PUT \u8bf7\u6c42\u3002\u9ed8\u8ba4\u4e3a 512 M\uff0c\u7528\u6237\u53ef\u4ee5\u6839\u636e\u4e1a\u52a1\u5b9e\u9645\u60c5\u51b5\u5c06\u6b64\u503c\u8c03\u5c0f\uff0c\u4f8b\u5982\u8bbe\u7f6e\u4e3a 1M\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u7f51\u7ad9\u670d\u52a1\u5668\u662f\u4e0d\u9650\u5236\u8bf7\u6c42 body \u5927\u5c0f\u7684\uff0c\u8fd9\u6837\u5f88\u5bb9\u6613\u4f1a\u88ab\u9ed1\u5ba2\u5229\u7528\u5e76\u8fdb\u884c DDoS \u653b\u51fb\uff0c\u9ed1\u5ba2\u53ef\u4ee5\u5229\u7528\u8fd9\u4e00\u70b9\u5f80 HTTP POST \u7684 body \u4e2d\u4f20\u9012\u975e\u5e38\u5927\uff08\u6bd4\u5982\u51e0\u5341M\uff09\u7684\u8bf7\u6c42\uff0c\u53ef\u80fd\u5bfc\u81f4\u670d\u52a1\u7aef\u65e0\u6cd5\u5bf9\u5916\u63d0\u4f9b\u670d\u52a1\u3002 \u914d\u7f6e\u5f15\u5bfc \u767b\u9646 CDN \u63a7\u5236\u53f0 \uff0c\u4f9d\u6b21\u8fdb\u5165\uff1a\u670d\u52a1\u7ba1\u7406 > \u529f\u80fd\u914d\u7f6e > \u8bbf\u95ee\u63a7\u5236 > HTTP \u8bf7\u6c42\u5927\u5c0f\u9650\u5236\uff0c\u70b9\u51fb\u300c\u7ba1\u7406\u300d\u6309\u94ae\u5373\u53ef\u5f00\u59cb\u914d\u7f6e\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u5728\u914d\u7f6e\u754c\u9762\uff0c\u6839\u636e\u4e1a\u52a1\u8981\u6c42\uff0c\u586b\u5199\u914d\u7f6e\u5185\u5bb9\uff0c\u7136\u540e\u70b9\u51fb\u3010\u786e\u5b9a\u3011\u6309\u94ae\u5373\u53ef\u3002 \u6ce8\u610f\u4e8b\u9879 \u9002\u7528\u4e8e\u52a8\u6001\u8d44\u6e90\u52a0\u901f\uff0c\u5168\u9759\u6001\u8d44\u6e90\u52a0\u901f\u5efa\u8bae\u4e0d\u542f\u7528\u8be5\u529f\u80fd\u3002","title":"6.7 HTTP \u8bf7\u6c42\u5927\u5c0f\u9650\u5236"},{"location":"cdn/config/#68-ip","text":"\u529f\u80fd\u8bf4\u660e IP \u8bbf\u95ee\u9650\u5236\u4e5f\u5373 CDN \u8fb9\u7f18\u8282\u70b9\u5bf9\u7ec8\u7aef\u7528\u6237\u7684\u8bbf\u95ee IP \u7684\u8bbf\u95ee\u9891\u7387\u8fdb\u884c\u7edf\u8ba1\uff0c\u5728\u5355\u4f4d\u65f6\u95f4\u5468\u671f\u5185\uff08\u76ee\u524d\u56fa\u5b9a\u7684\u65f6\u95f4\u4e3a 60 \u79d2\uff09\uff0c\u5982\u679c\u8bbf\u95ee\u9891\u7387\u8fbe\u5230\u8bbe\u5b9a\u7684\u9608\u503c\uff0c\u5c06\u4e3b\u52a8\u62e6\u622a\u8be5 IP \u5bf9\u57df\u540d\u7684\u8bbf\u95ee\uff0c\u4ece\u800c\u8fbe\u5230\u8bbf\u95ee\u9650\u5236\u7684\u76ee\u7684\u3002 \u5f53\u524d\u7684\u5355 IP \u8bbf\u95ee\u9891\u7387\u53ea\u652f\u6301\u9488\u5bf9 CDN \u5355\u4e2a\u8fb9\u7f18\u8282\u70b9\u751f\u6548\uff0c\u5f53\u8fbe\u5230\u8bbe\u5b9a\u7684\u9608\u503c\u65f6\uff0c\u5f02\u5e38\u8bbf\u95ee\u7684\u5ba2\u6237\u7aef IP \u5c06\u52a0\u5165\u9ed1\u540d\u5355\u4e2d\uff0c\u5e76\u53ef\u4ee5\u8bbe\u5b9a\u751f\u6548\u65f6\u95f4\uff0c\u5728\u8be5\u65f6\u95f4\u5468\u671f\u5185\uff0c\u6240\u6709\u8be5 IP \u7684\u8bbf\u95ee\u90fd\u4f1a\u88ab\u62e6\u622a\u3002 \u914d\u7f6e\u5f15\u5bfc \u767b\u9646 CDN \u63a7\u5236\u53f0 \uff0c\u4f9d\u6b21\u8fdb\u5165\uff1a\u670d\u52a1 \u7ba1\u7406 > \u529f\u80fd\u914d\u7f6e > \u8bbf\u95ee\u63a7\u5236 > IP \u8bbf\u95ee\u9650\u5236\uff0c\u70b9\u51fb\u300c\u7ba1\u7406\u300d\u6309\u94ae\u5373\u53ef\u5f00\u59cb\u914d\u7f6e\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u914d\u7f6e\u6b65\u9aa4\u5982\u4e0b\uff1a \u7b2c\u4e00\u6b65\uff1a\u586b\u5199\u8bbf\u95ee\u7684\u8d44\u6e90\u8def\u5f84\u89c4\u5219\uff0c\u652f\u6301 \uff0a \u901a\u914d\u7b26\uff0c\u5982\uff1a /a/*.mp4 \u3001 /b/*.flv \u7b2c\u4e8c\u6b65\uff1a\u9009\u62e9\u9650\u5236\u65b9\u5f0f\uff1a \u76f4\u63a5\u7981\u6b62 \u7b2c\u4e09\u6b65\uff1a\u8bbe\u7f6e\u8bbf\u95ee\u9891\u7387\u53ca\u76f8\u5e94\u7684\u65f6\u95f4\u9650\u5236 \u8be6\u7ec6\u914d\u7f6e\u8bf7\u53c2\u89c1 IP \u8bbf\u95ee\u9650\u5236\u7528\u6237\u6307\u5357 \u3002 \u6ce8\u610f\u4e8b\u9879 \u76f4\u63a5\u7981\u6b62\u662f\u4ee5 60s \u4e3a\u4e00\u4e2a\u8ba1\u6570\u5468\u671f\uff0c\u5373\u4e0a\u4e00\u4e2a 60s \u7684\u8ba1\u6570\u4e0d\u4f1a\u7d2f\u8ba1\u53e0\u52a0\u5230\u4e0b\u4e00\u4e2a 60s \u5185\uff1b \u300c\u8bbf\u95ee\u9891\u7387\u9608\u503c\u300d\u9700\u6839\u636e\u4e1a\u52a1\u60c5\u51b5\u614e\u91cd\u8bbe\u7f6e\uff0c\u8fc7\u4f4e\u53ef\u80fd\u5f15\u8d77\u6b63\u5e38\u7528\u6237\u7684\u8bbf\u95ee\u53d7\u9650\uff0c\u8fc7\u9ad8\u5219\u65e0\u6cd5\u6709\u6548\u9650\u5236\u975e\u6cd5\u8bbf\u95ee\uff1b \u8bf7\u52ff\u5c06\u8bbf\u95ee\u9891\u7387\u503c\u8bbe\u7f6e\u8fc7\u4f4e\uff0c\u4ee5\u514d\u5f71\u54cd\u6b63\u5e38\u7528\u6237\u7684\u8bbf\u95ee\u8bf7\u6c42\u3002","title":"6.8 IP \u8bbf\u95ee\u9650\u5236"},{"location":"cdn/config/#69-cc","text":"\u529f\u80fd\u8bf4\u660e CC \u9632\u62a4\u4e3b\u8981\u662f\u9488\u5bf9\u7f51\u7edc\u5b89\u5168\u9886\u57df\u4e2d\u7684 CC \u653b\u51fb\u800c\u8fdb\u884c\u7684\u4e00\u79cd\u5e94\u7528\u5c42\u653b\u51fb\u9632\u62a4\uff0c\u8be5\u529f\u80fd\u901a\u8fc7\u81ea\u5b9a\u4e49\u5339\u914d\u89c4\u5219\u5bf9\u76ee\u6807\u8d44\u6e90\u8fdb\u884c\u76d1\u63a7\uff0c\u5f53\u8bf7\u6c42\u9891\u7387\u8fbe\u5230\u89e6\u53d1\u9891\u7387\u65f6\u5bf9\u7591\u4f3c\u653b\u51fb\u8bf7\u6c42\u8fdb\u884c\u6821\u9a8c\uff0c\u6821\u9a8c\u901a\u8fc7\u5219\u5141\u8bb8\u8bbf\u95ee\uff1b\u6821\u9a8c\u4e0d\u901a\u8fc7\uff0c\u5219\u76f4\u63a5\u7981\u6b62\u8bbf\u95ee\u3002 \u914d\u7f6e\u5f15\u5bfc \u767b\u9646 CDN \u63a7\u5236\u53f0 \uff0c\u4f9d\u6b21\u8fdb\u5165\uff1a\u670d\u52a1\u7ba1\u7406 > \u529f\u80fd\u914d\u7f6e > \u8bbf\u95ee\u63a7\u5236 > CC \u9632\u62a4\uff0c\u70b9\u51fb\u300c\u7ba1\u7406\u300d\u6309\u94ae\u5373\u53ef\u5f00\u59cb\u914d\u7f6e\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u70b9\u51fb\u53f3\u4e0a\u89d2\u7684\u3010\u6dfb\u52a0\u9632\u62a4\u7b56\u7565\u3011\uff0c\u51fa\u73b0\u5982\u4e0b\u914d\u7f6e\u754c\u9762\uff1a \u5177\u4f53\u914d\u7f6e\u53ef\u4ee5\u8d70\u5982\u4e0b\u56db\u4e2a\u6b65\u9aa4\uff1a \u7b2c\u4e00\u6b65\uff1a\u6dfb\u52a0\u9632\u62a4\u7b56\u7565\uff0c\u8bbe\u7f6e URI \u5339\u914d\u89c4\u5219\uff0c\u4f8b\u5982\uff1a/video/* \u7b2c\u4e8c\u6b65\uff1a\u586b\u5199\u8bbf\u95ee\u9891\u7387\u9608\u503c\uff0c\u4f8b\u5982\uff1a500\u6b21/\u5206\u949f\uff0c\u5728\u667a\u80fd\u9632\u62a4\u6a21\u5f0f\u4e0b\u624d\u6709\u6548 \u7b2c\u4e09\u6b65\uff1a\u8bbe\u7f6e IP \u767d\u540d\u5355\uff0c\u5982\u679c\u8981\u7ed5\u8fc7 CC \u9632\u62a4\u7b56\u7565\uff0c\u6b64\u5904\u53ef\u8fdb\u884c\u8bbe\u7f6e \u7b2c\u56db\u6b65\uff1a\u9009\u62e9 CC \u9632\u62a4\u6a21\u5f0f\uff0c\u5305\u62ec\u5f3a\u5236\u9632\u62a4\u3001\u667a\u80fd\u9632\u62a4\u3001\u6682\u505c\u9632\u62a4\uff0c\u5f53\u6b63\u5728\u906d\u53d7\u653b\u51fb\u65f6\uff0c\u5efa\u8bae\u9009\u62e9\u5f3a\u5236\u9632\u62a4\u6a21\u5f0f \u5f3a\u5236\u9632\u62a4 \u4e5f\u5c31\u662f\u5ffd\u7565\u9891\u7387\u9608\u503c\uff0c\u9488\u5bf9\u5339\u914d\u7684 URI \u76f4\u63a5\u8fdb\u884c\u6821\u9a8c\uff0c\u6821\u9a8c\u901a\u8fc7\u5219\u653e\u884c\u68c0\u9a8c\u4e0d\u901a\u8fc7\u5219\u62d2\u7edd\u8bbf\u95ee\uff1b \u667a\u80fd\u9632\u62a4 \u9488\u5bf9\u5339\u914d\u5230\u7684 URI \u8fdb\u884c\u8bbf\u95ee\u9891\u7387\u9608\u503c\u7684\u5224\u65ad\uff0c\u8fbe\u5230\u9608\u503c\u5219\u8fdb\u884c\u6821\u9a8c\uff0c\u6821\u9a8c\u901a\u8fc7\u5219\u653e\u884c\uff0c\u6821\u9a8c\u4e0d\u901a\u8fc7\u5219\u62d2\u7edd\u8bbf\u95ee\u3002 \u6682\u505c\u9632\u62a4 \u9632\u62a4\u89c4\u5219\u5931\u6548\uff0c\u4e0d\u8fdb\u884c\u9891\u7387\u7edf\u8ba1\u548c\u8bf7\u6c42\u6821\u9a8c\u3002 \u6ce8\u610f\u4e8b\u9879 1.CC \u9632\u62a4\u5206\u4e3a\u5f3a\u5236\u9632\u62a4\u548c\u667a\u80fd\u9632\u62a4\u4e24\u79cd\u6a21\u5f0f\uff0c\u5728\u667a\u80fd\u9632\u62a4\u6a21\u5f0f\u4e0b\uff0c\u5219\u4f1a\u5339\u914d URI \u89c4\u5219\uff0c\u8bf7\u6c42\u4e00\u65e6\u8fbe\u5230\u8bbf\u95ee\u9891\u7387\u9608\u503c\uff0c\u5219\u4f1a\u89e6\u53d1 JavaScript \u6821\u9a8c\uff0c\u6821\u9a8c\u901a\u8fc7\u5219\u53ef\u6b63\u5e38\u8bbf\u95ee\uff0c\u6821\u9a8c\u4e0d\u901a\u8fc7\u5219\u76f4\u63a5\u62d2\u7edd\u3002\u5728\u5f3a\u5236\u9632\u62a4\u6a21\u5f0f\u4e0b\uff0c\u5219\u4f1a\u5ffd\u7565\u8bbf\u95ee\u9891\u7387\u9608\u503c\uff0c\u76f4\u63a5\u89e6\u53d1 JavaScript \u6821\u9a8c\uff0c\u4ee5\u6b64\u7c7b\u63a8; 2.\u5728\u667a\u80fd\u9632\u62a4\u6a21\u5f0f\u4e0b\uff0c\u8bbf\u95ee\u9608\u503c\u8bbe\u7f6e\u5f97\u8fc7\u4f4e\uff0c\u53ef\u80fd\u4e0d\u4f1a\u89e6\u53d1 JavaScript \u6821\u9a8c\uff0c\u5efa\u8bae\u9608\u503c\u8bbe\u7f6e\u9ad8\u4e00\u4e9b\u3002","title":"6.9 CC \u9632\u62a4"},{"location":"cdn/config/#610-waf","text":"\u529f\u80fd\u8bf4\u660e WAF\uff08Web Application Firewall\uff09\u7684\u4e2d\u6587\u540d\u79f0\u53eb\u505a Web \u5e94\u7528\u9632\u706b\u5899 \uff0c\u662f\u901a\u8fc7\u6267\u884c\u4e00\u7cfb\u5217\u9488\u5bf9 HTTP/HTTPS \u7684\u5b89\u5168\u7b56\u7565\u6765\u4e13\u95e8\u4e3a Web \u5e94\u7528\u63d0\u4f9b\u4fdd\u62a4\u7684\u4e00\u9879\u529f\u80fd\u3002\u4e3b\u8981\u9632\u62a4\u7684\u662f\u6765\u81ea\u5bf9\u7f51\u7ad9\u6e90\u7ad9\u7684\u52a8\u6001\u6570\u636e\u653b\u51fb\uff0c\u53ef\u9632\u62a4\u7684\u653b\u51fb\u7c7b\u578b\u5305\u62ec SQL \u6ce8\u5165\u3001XSS \u653b\u51fb\u3001CSRF \u653b\u51fb\u3001\u6076\u610f\u722c\u866b\u3001\u626b\u63cf\u5668\u3001\u8fdc\u7a0b\u6587\u4ef6\u5305\u542b\u7b49\u3002 \u914d\u7f6e\u5f15\u5bfc \u767b\u9646 CDN \u63a7\u5236\u53f0 \uff0c\u4f9d\u6b21\u8fdb\u5165\uff1a\u670d\u52a1 \u7ba1\u7406 > \u529f\u80fd\u914d\u7f6e > \u8bbf\u95ee\u63a7\u5236 > WAF \u9632\u62a4\uff0c\u5f00\u542f WAF \u4fdd\u62a4\u5373\u53ef\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u5982\u4e0a\u914d\u7f6e\u754c\u9762\uff0c\u70b9\u51fb\u3010\u786e\u5b9a\u3011\u6309\u94ae\u5373\u53ef\u5f00\u542f\u3002 \u6ce8\u610f\u4e8b\u9879 \u5f53\u524d\u7248\u672c\u7684 WAF \u529f\u80fd\u5c5e\u4e8e\u514d\u8d39\u529f\u80fd\uff0c\u6682\u65e0\u7edf\u8ba1\u5206\u6790\u7c7b\u6570\u636e\uff0c\u5f85\u540e\u7eed\u89c4\u5212\uff1b \u5e73\u53f0\u9ed8\u8ba4\u89c4\u5219\u6709\u9650\uff0cWAF \u529f\u80fd\u4e0d\u786e\u4fdd\u9632\u62a4\u6240\u6709\u7684\u653b\u51fb\u8bf7\u6c42\uff1b \u9002\u7528\u4e8e\u52a8\u6001\u8d44\u6e90\u52a0\u901f\uff0c\u5168\u9759\u6001\u8d44\u6e90\u52a0\u901f\u5efa\u8bae\u4e0d\u542f\u7528\u8be5\u529f\u80fd\u3002","title":"6.10 WAF \u9632\u62a4"},{"location":"cdn/config/#611","text":"\u529f\u80fd\u8bf4\u660e \u8de8\u57df\u8d44\u6e90\u5171\u4eab \uff08 Cross-Origin Resource Sharing\uff09\u662f\u4e00\u79cd\u7f51\u7edc\u6d4f\u89c8\u5668\u7684\u6280\u672f\u89c4\u8303\uff0c\u4ed6\u4e3a Web \u670d\u52a1\u5668\u5b9a\u4e49\u4e86\u4e00\u79cd\u65b9\u5f0f\uff0c\u5141\u8bb8\u7f51\u9875\u4ece\u4e0d\u540c\u7684\u57df\u8bbf\u95ee\u5176\u8d44\u6e90\u3002\u8de8\u6e90\u8d44\u6e90\u5171\u4eab\u6807\u51c6\u901a\u8fc7\u65b0\u589e\u4e00\u7cfb\u5217 HTTP \u5934\uff0c\u8ba9\u670d\u52a1\u5668\u80fd\u58f0\u660e\u90a3\u4e9b\u6765\u6e90\u53ef\u4ee5\u901a\u8fc7\u6d4f\u89c8\u5668\u8bbf\u95ee\u8be5\u670d\u52a1\u5668\u4e0a\u7684\u8d44\u6e90\u3002\u6b64\u65f6\u9700\u8981\u5728 Response Header \u4e2d\u589e\u52a0\u8de8\u57df\u76f8\u5173\u914d\u7f6e\uff0c\u8fd9\u6837\u5c31\u53ef\u4ee5\u4f7f\u5f97\u8d44\u6e90\u7684\u5b89\u5168\u8bbf\u95ee\u6210\u4e3a\u53ef\u80fd\u3002 \u914d\u7f6e\u5f15\u5bfc \u767b\u9646 CDN \u63a7\u5236\u53f0 \uff0c\u4f9d\u6b21\u8fdb\u5165\uff1a\u670d\u52a1 \u7ba1\u7406 > \u529f\u80fd\u914d\u7f6e > \u8bbf\u95ee\u63a7\u5236 > CORS \u8de8\u57df\u5171\u4eab\uff0c\u70b9\u51fb\u3010\u7ba1\u7406\u3011\u6309\u94ae\u5373\u53ef\u5f00\u59cb\u914d\u7f6e\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u5177\u4f53\u914d\u7f6e\u5b57\u6bb5\u505a\u5982\u4e0b\u8bf4\u660e\uff1a Access-Control-Allow-Origin \u8fd4\u56de\u7684\u8d44\u6e90\u9700\u8981\u6709\u4e00\u4e2a Access-Control-Allow-Origin \u5934\u4fe1\u606f\uff0c\u4e5f\u53ef\u4ee5\u8bbe\u7f6e\u901a\u914d\u7b26\uff0a\uff0c\u5141\u8bb8\u88ab\u6240\u6709\u57df\u4f7f\u7528\u3002\u8bed\u6cd5\u5982\u4e0b: Access-Control-Allow-Origin: | * \u4e3e\u4e2a\u6817\u5b50\uff0c\u5141\u8bb8\u6765\u81ea http://www.upyun.com \u7684\u8bf7\u6c42\uff0c\u4f60\u53ef\u4ee5\u8fd9\u6837\u6307\u5b9a: Access-Control-Allow-Origin: http://www.upyun.com Access-Control-Allow-Methods \u8868\u793a\u5141\u8bb8\u7684\u8de8\u57df\u8bf7\u6c42\u7684\u65b9\u6cd5\uff0c\u5728\u5f53\u524d\u8bf7\u6c42\u7684\u57df\u88ab\u5141\u8bb8\u540e\uff0c\u8fd8\u8981\u68c0\u67e5\u5f53\u524d\u8bf7\u6c42\u7684\u65b9\u6cd5\u662f\u5426\u88ab\u5141\u8bb8\uff0c\u793a\u4f8b\u5982\u4e0b\uff1a Access-Control-Allow-Methods: POST, GET, OPTIONS Access-Control-Allow-Headers \u4e5f\u662f\u5728\u54cd\u5e94\u9884\u68c0\u8bf7\u6c42\u7684\u65f6\u5019\u4f7f\u7528\uff0c\u7528\u6765\u6307\u660e\u5728\u5b9e\u9645\u7684\u8bf7\u6c42\u4e2d\uff0c\u53ef\u4ee5\u4f7f\u7528\u54ea\u4e9b\u81ea\u5b9a\u4e49 HTTP \u8bf7\u6c42\u5934\uff0c\u6bd4\u5982\uff1a Access-Control-Allow-Headers: X-PINGOTHER\uff0cX-UPYUN \u8fd9\u6837\u5728\u5b9e\u9645\u7684\u8bf7\u6c42\u91cc,\u8bf7\u6c42\u5934\u4fe1\u606f\u91cc\u5c31\u53ef\u4ee5\u6709\u8fd9\u4e48\u4e00\u6761\uff1a X-PINGOTHER: hello Access-Control-Expose-Headers \u8bbe\u7f6e\u6d4f\u89c8\u5668\u5141\u8bb8\u8bbf\u95ee\u7684\u670d\u52a1\u5668\u7684\u5934\u4fe1\u606f\u7684\u767d\u540d\u5355\uff0c\u793a\u4f8b\u5982\u4e0b\uff1a Access-Control-Expose-Headers: X-My-Custom-Header, X-Another-Custom-Header \u8fd9\u6837\uff0c X-My-Custom-Header \u548c X-Another-Custom-Header \u8fd9\u4e24\u4e2a\u5934\u4fe1\u606f\uff0c\u90fd\u53ef\u4ee5\u88ab\u6d4f\u89c8\u5668\u5f97\u5230\u3002 Access-Control-Max-Age \u8fd9\u4e2a\u5934\u544a\u8bc9\u6211\u4eec\u8fd9\u6b21\u9884\u8bf7\u6c42\u7684\u7ed3\u679c\u7684\u6709\u6548\u671f\u662f\u591a\u4e45\uff0c\u5355\u4f4d\u4e3a\u79d2\uff0c\u8bbe\u7f6e\u793a\u4f8b\u5982\u4e0b\uff1a Access-Control-Max-Age: 864000 \u8868\u660e\u5728 864000s\uff0810\u5929\uff09\u5185\uff0c\u5bf9\u8be5\u8d44\u6e90\u7684\u8de8\u57df\u8bbf\u95ee\u4e0d\u518d\u53d1\u9001\u53e6\u5916\u4e00\u6761\u9884\u8bf7\u6c42\u3002 \u6ce8\u610f\u4e8b\u9879 1.\u6700\u591a\u652f\u6301\u6dfb\u52a0 10 \u6761\u89c4\u5219\uff0c\u5339\u914d\u65f6\u4ece\u7b2c\u4e00\u6761\u5f00\u59cb\u9010\u6761\u5339\u914d\uff0c\u4ee5\u6700\u65e9\u5339\u914d\u4e0a\u7684\u89c4\u5219\u4e3a\u51c6 2. \u5141\u8bb8\u7684\u57df \u3001 Allow Header \u3001 Expose Header \u6700\u591a\u5141\u8bb8 20 \u884c 3. \u5141\u8bb8\u7684\u57df \u53ca Methods \u5efa\u8bae\u6839\u636e\u9700\u8981\u4f7f\u7528\u6700\u5c0f\u7684\u914d\u7f6e\u6765\u4fdd\u8bc1\u5b89\u5168\u6027\uff0c\u591a\u6761\u89c4\u5219\u95f4\u4e0d\u8981\u6709\u8986\u76d6\u548c\u51b2\u7a81 4. \u5141\u8bb8\u7684\u57df \u9700\u5e26\u4e0a\u5b8c\u6574\u7684\u57df\u4fe1\u606f\uff0c\u5373\u6307\u5b9a https \u6216\u8005 http\uff0c\u6216\u8005 *://foo.com \u8fd9\u6837\u7684\u5f62\u5f0f 5. Allow Header \u3001 Expose Header \u4e0d\u5141\u8bb8\u4f7f\u7528\u901a\u914d\u7b26\uff0c\u5927\u5c0f\u5199\u4e0d\u654f\u611f 6. \u7f13\u5b58\u65f6\u95f4 \u5982\u679c\u6ca1\u6709\u7279\u6b8a\u60c5\u51b5\u53ef\u4ee5\u914c\u60c5\u8bbe\u7f6e\u5f97\u5927\u4e00\u70b9\uff0c\u9ed8\u8ba4\u4e3a 86400 \u79d2\uff0c\u6700\u5927\u4e3a 604800 \u79d2","title":"6.11 \u8de8\u57df\u914d\u7f6e"},{"location":"cdn/config/#612","text":"\u529f\u80fd\u8bf4\u660e \u81ea\u5b9a\u4e49\u9875\u9762\u529f\u80fd\u4e3b\u8981\u9488\u5bf9 CDN \u8fd4\u56de\u7684 \u9ed8\u8ba4\u9519\u8bef\u7801 \u4ee5\u53ca\u6e90\u7ad9\u8fd4\u56de\u7684\u9519\u8bef\u72b6\u6001\u8fdb\u884c\u81ea\u5b9a\u4e49\u9875\u9762\u7684\u8bbe\u8ba1\u548c\u7f16\u8f91\uff0c\u53ef\u4ee5\u8fdb\u4e00\u6b65\u63d0\u5347\u7ec8\u7aef\u7528\u6237\u4f53\u9a8c\u3002\u5982\u672a\u914d\u7f6e\uff0c\u5219\u9ed8\u8ba4\u9075\u5faa\u53c8\u62cd\u4e91 CDN \u670d\u52a1\u9ed8\u8ba4\u9519\u8bef\u9875\u9762\u6216\u6e90\u7ad9\u9ed8\u8ba4\u7684\u9519\u8bef\u9875\u9762\u3002CDN \u76ee\u524d\u63d0\u4f9b\u4e09\u79cd\u9009\u9879\u7684\u8bbe\u7f6e\uff1a\u9ed8\u8ba4\u9875\u9762\u3001\u81ea\u5b9a\u4e49\u9875\u9762\u3001\u7f8e\u5316\u9875\u9762\uff08\u6682\u672a\u5f00\u653e\uff09\u3002\u4ee5\u5730\u533a\u8bbf\u95ee\u9650\u5236\u4e3a\u4f8b\uff1a \u9ed8\u8ba4\uff1aCDN \u4f1a\u9ed8\u8ba4\u8fd4\u56de\u5982\u4e0b JSON \u4e32\u683c\u5f0f { \"code\": \"40310002\", \"msg\": \"region is forbidden\" } \u81ea\u5b9a\u4e49\u9875\u9762\uff1a\u5f53\u89e6\u53d1 CDN \u9632\u76d7\u94fe\u89c4\u5219\u65f6\uff0cCDN \u4f1a\u76f4\u63a5\u8fd4\u56de\u81ea\u884c\u8bbe\u8ba1\u548c\u7f16\u8f91\u7684\u9875\u9762\u3002\u5f53\u89e6\u53d1\u6e90\u7ad9\u9519\u8bef\u7801\u65f6\uff0c\u4f1a 302 \u8df3\u8f6c\u5230\u81ea\u884c\u8bbe\u8ba1\u7684\u9875\u9762\u3002 \u7f8e\u5316\u9875\u9762\uff1a\u53c8\u62cd\u4e91\u7ed3\u5408\u4e1a\u52a1\u573a\u666f\uff0c\u81ea\u884c\u8bbe\u8ba1\u7684\u7f8e\u5316\u9875\u9762\uff08\u6682\u672a\u5f00\u653e\uff09\u3002 1\u3001CDN \u4e1a\u52a1\u7aef\u652f\u6301\u7684\u914d\u7f6e\u9879\u5305\u62ec\uff1a IP/\u5730\u533a\u9650\u5236 \u5f53\u5728\u53c8\u62cd\u4e91\u63a7\u5236\u53f0\u914d\u7f6e\u4e86 IP \u9ed1\u767d\u540d\u5355\u3001\u5730\u533a\u8bbf\u95ee\u9650\u5236\u529f\u80fd\uff0c\u89e6\u53d1\u8be5\u89c4\u5219\u65f6\u4f1a\u76f4\u63a5\u8fd4\u56de\u81ea\u5b9a\u4e49\u7684\u9875\u9762\u3002 \u9632\u76d7\u94fe \u5f53\u5728\u53c8\u62cd\u4e91\u63a7\u5236\u53f0\u914d\u7f6e\u4e86 User-Agent \u9632\u76d7\u94fe\u3001Referer \u9632\u76d7\u94fe\u3001Token \u9632\u76d7\u94fe\u529f\u80fd\uff0c\u89e6\u53d1\u8be5\u89c4\u5219\u65f6\u4f1a\u76f4\u63a5\u8fd4\u56de\u81ea\u5b9a\u4e49\u7684\u9875\u9762\u3002 \u56de\u6e90\u9274\u6743 \u5f53\u5728\u53c8\u62cd\u4e91\u63a7\u5236\u53f0\u914d\u7f6e\u4e86\u56de\u6e90\u9274\u6743\u529f\u80fd\uff0c\u89e6\u53d1\u89c4\u5219\uff08\u5305\u62ec\u9274\u6743\u5931\u8d25\u3001\u9274\u6743\u9519\u8bef\uff09\u65f6\u4f1a\u76f4\u63a5\u8fd4\u56de\u81ea\u5b9a\u4e49\u7684\u9875\u9762\u3002 \u5b89\u5168\u9632\u62a4 \u5f53\u5728\u53c8\u62cd\u4e91\u63a7\u5236\u53f0\u914d\u7f6e\u4e86 IP \u8bbf\u95ee\u9650\u5236\u3001WAF \u9632\u62a4\u3001HTTP \u8bf7\u6c42\u5927\u5c0f\u9650\u5236\u529f\u80fd\uff0c\u89e6\u53d1\u89c4\u5219\u65f6\u4f1a\u4f1a\u76f4\u63a5\u8fd4\u56de\u81ea\u5b9a\u4e49\u7684\u9875\u9762\u3002 \u8fb9\u7f18\u89c4\u5219 \u5f53\u5728\u53c8\u62cd\u4e91\u63a7\u5236\u53f0\u914d\u7f6e\u4e86\u8fb9\u7f18\u89c4\u5219\u8bbf\u95ee\u63a7\u5236\u529f\u80fd\uff0c\u89e6\u53d1\u89c4\u5219\u65f6\u4f1a\u76f4\u63a5\u8fd4\u56de\u81ea\u5b9a\u4e49\u7684\u9875\u9762\uff0c\u5f53\u524d\u4ec5\u9488\u5bf9 403\u3001404 \u72b6\u6001\u7801\u6709\u6548\u3002 \u5173\u95ed\u670d\u52a1 CDN \u670d\u52a1\u88ab\u5173\u95ed\u65f6\uff0c\u53ef\u4ee5\u6839\u636e\u8981\u6c42\u81ea\u5b9a\u4e49\u9875\u9762\u3002 2\u3001\u6e90\u7ad9\u5339\u914d\u7684\u72b6\u6001\u7801\u5305\u62ec\uff1a 400 \u8868\u793a\u8be5\u8bf7\u6c42\u62a5\u6587\u4e2d\u5b58\u5728\u8bed\u6cd5\u9519\u8bef\uff0c\u5bfc\u81f4\u6e90\u7ad9\u65e0\u6cd5\u7406\u89e3\u8be5\u8bf7\u6c42\u3002 403 \u8be5\u72b6\u6001\u7801\u8868\u660e\u5bf9\u8bf7\u6c42\u8d44\u6e90\u7684\u8bbf\u95ee\u88ab\u6e90\u7ad9\u62d2\u7edd\u4e86\u3002 404 \u8be5\u72b6\u6001\u7801\u8868\u660e\u6e90\u7ad9\u4e0a\u65e0\u6cd5\u627e\u5230\u6307\u5b9a\u7684\u8d44\u6e90\u3002 405 \u6307\u51fa\u8bf7\u6c42\u65b9\u6cd5\u5bf9\u67d0\u4e9b\u7279\u5b9a\u7684\u8d44\u6e90\u4e0d\u5141\u8bb8\u4f7f\u7528\uff0c\u4e5f\u5373\u5ba2\u6237\u7aef\u7684\u8bf7\u6c42\u88ab\u6e90\u7ad9\u62d2\u7edd\u4e86\u3002 414 \u8868\u793a\u8bf7\u6c42\u7684 URI \u8fc7\u957f\uff0c\u6e90\u7ad9\u65e0\u6cd5\u5904\u7406\u65f6\u8fd4\u56de\u6b64\u4ee3\u7801\u3002 416 \u5ba2\u6237\u7aef\u5305\u542b\u4e86\u4e00\u4e2a\u6e90\u7ad9\u65e0\u6cd5\u6ee1\u8db3\u7684 Range \u5934\u4fe1\u606f\u7684\u8bf7\u6c42\u3002 500 \u6e90\u7ad9\u9047\u5230\u4e86\u4e00\u4e2a\u672a\u66fe\u9047\u5230\u7684\u9519\u8bef\uff08\u5185\u90e8\u670d\u52a1\u5668\u9519\u8bef\uff09\uff0c\u5bfc\u81f4\u65e0\u6cd5\u5b8c\u6210\u5bf9\u8bf7\u6c42\u7684\u5904\u7406\u3002 501 \u6e90\u7ad9\u4e0d\u652f\u6301\u5ba2\u6237\u7aef\u8bf7\u6c42\u4e2d\u6240\u8981\u6c42\u7684\u529f\u80fd\u65f6\u8fd4\u56de\u6b64\u4ee3\u7801\u3002 502 \u6e90\u7ad9\u4f5c\u4e3a\u7f51\u5173\u6216\u8005\u4ee3\u7406\u670d\u52a1\u5668\u5c1d\u8bd5\u6267\u884c\u8bf7\u6c42\u65f6\uff0c\u4ece\u8fdc\u7aef\u670d\u52a1\u5668\u63a5\u6536\u5230\u9519\u8bef\u6216\u8005\u65e0\u6548\u7684\u8bf7\u6c42\u3002\u4e5f\u5373\u9519\u8bef\u7684\u7f51\u5173\u3002 503 \u7531\u4e8e\u4e34\u65f6\u7684\u670d\u52a1\u5668\u7ef4\u62a4\u6216\u8005\u8fc7\u8f7d\uff0c\u6e90\u7ad9\u5f53\u524d\u65e0\u6cd5\u5904\u7406\u8bf7\u6c42\u3002 504 \u6e90\u7ad9\u4f5c\u4e3a\u7f51\u5173\u6216\u8005\u4ee3\u7406\u670d\u52a1\u5668\u5c1d\u8bd5\u6267\u884c\u8bf7\u6c42\u65f6\uff0c\u672a\u80fd\u53ca\u65f6\u4ece\u8fdc\u7aef\u670d\u52a1\u7f51\u6536\u5230\u54cd\u5e94\u3002\u4e5f\u5373\u7f51\u5173\u8d85\u65f6\u3002 \u914d\u7f6e\u5f15\u5bfc \u767b\u9646 CDN \u63a7\u5236\u53f0 \uff0c\u4f9d\u6b21\u8fdb\u5165\uff1a\u670d\u52a1\u7ba1\u7406 > \u529f\u80fd\u914d\u7f6e > \u8bbf\u95ee\u63a7\u5236 > \u81ea\u5b9a\u4e49\u9875\u9762\uff0c\u5728\u6b64\u680f\u76ee\u4e0b\u53ef\u8fdb\u884c\u76f8\u5e94\u8bbe\u7f6e\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u7b2c\u4e00\u6b65 \u70b9\u51fb\u3010\u7ba1\u7406\u3011\u6309\u94ae\u8fdb\u5165\u914d\u7f6e\u9762\u677f\uff1a \u7b2c\u4e8c\u6b65 \u70b9\u51fb\u53f3\u4e0a\u89d2\u7684\u3010\u6dfb\u52a0\u89c4\u5219\u3011\uff0c\u8fdb\u5165\u89c4\u5219\u914d\u7f6e\u754c\u9762\uff1a \u5728\u89c4\u5219\u914d\u7f6e\u9875\u9762\uff0c\u914d\u7f6e\u9879\u5305\u62ec\uff1a\u9519\u8bef\u6765\u6e90\u3001\u5339\u914d\u7c7b\u578b\u3001\u54cd\u5e94\u5730\u5740\u3002\u9700\u8981\u6ce8\u610f\u7684\u662f\uff1a\u54cd\u5e94\u5730\u5740\u5fc5\u987b\u8981\u586b\u5199 URI\uff0c\u4f8b\u5982\uff1a /custom/error-page.html \u81ea\u5b9a\u4e49\u9875\u9762\u7684\u8d44\u6e90\u6240\u7ed1\u5b9a\u7684\u57df\u540d\u5fc5\u987b\u662f\u8bbf\u95ee\u57df\u540d\uff0c\u5426\u5219\u4f1a\u8bbf\u95ee\u5230\u9519\u8bef\u7684\u4f4d\u7f6e\uff0c\u4e5f\u5373\uff1a\u5f53\u5ba2\u6237\u7aef\u8bf7\u6c42\u4e3a\uff1a https://www.example.com/index.html \u5f53\u89e6\u53d1\u9632\u76d7\u94fe\u89c4\u5219\u4e4b\u540e\uff0c\u4f1a 302 \u8df3\u8f6c\uff08\u4ec5\u652f\u6301\u9519\u8bef\u6765\u6e90\u4e3a\u6e90\u7ad9\u7684\u60c5\u51b5\uff0c\u9519\u8bef\u6765\u6e90\u4e8e CDN \u65f6\uff0c\u4f1a\u76f4\u63a5\u53bb\u8bf7\u6c42\u9519\u8bef\u9875\u9762\uff0c\u4e0d\u4f1a\u6709 302 \u8df3\u8f6c\u8fc7\u7a0b\uff09\u5230\uff1a https://www.example.com/custom/error-page.html \u4e5f\u5373\u8bf7\u6c42\u7684\u8d44\u6e90\u548c\u81ea\u5b9a\u4e49\u9519\u8bef\u9875\u9762\u5fc5\u987b\u5c5e\u4e8e\u540c\u4e00\u6e90\u7ad9\uff0c\u5e76\u4e14\u5c5e\u4e8e\u540c\u4e00\u52a0\u901f\u57df\u540d\u3002 \u7b2c\u4e09\u6b65 \u5728\u914d\u7f6e\u7ba1\u7406\u754c\u9762\uff0c\u53ef\u4ee5\u7f16\u8f91\u3001\u5220\u9664\u548c\u67e5\u770b\u914d\u7f6e\u89c4\u5219\uff0c\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u786e\u4fdd\u914d\u7f6e\u7684\u89c4\u5219\u6ca1\u6709\u95ee\u9898\u4e4b\u540e\uff0c\u70b9\u51fb\u3010\u786e\u5b9a\u3011\u6309\u94ae\u5373\u53ef\u4fdd\u5b58\u914d\u7f6e\u3002 \u6ce8\u610f\u4e8b\u9879 \u81ea\u5b9a\u4e49\u9875\u9762\u5c5e\u4e8e\u7528\u6237\u6e90\u7ad9\u6258\u7ba1\u7684\u8d44\u6e90\uff0c\u540c\u5e38\u89c4\u9875\u9762\u548c\u8d44\u6e90\u4e00\u6837\uff0c\u4f1a\u6309\u7167\u6b63\u5e38\u7684 CDN \u52a0\u901f\u5206\u53d1\u8ba1\u8d39\u3002 \u81ea\u5b9a\u4e49\u9875\u9762\u7684\u8d44\u6e90\u6240\u7ed1\u5b9a\u7684\u57df\u540d\u5fc5\u987b\u662f\u8bbf\u95ee\u57df\u540d\uff0c\u5426\u5219\u4e0d\u4f1a\u751f\u6548\uff0c\u4e5f\u5373\uff1a\u5f53\u5ba2\u6237\u7aef\u8bf7\u6c42\u4e3a\uff1ahttps://www.example.com/index.html \uff1b\u5f53\u89e6\u53d1\u9632\u76d7\u94fe\u89c4\u5219\u4e4b\u540e\uff0cCDN \u4f1a\u76f4\u63a5\u8fd4\u56de\u8be5\u9875\u9762\uff1ahttps://www.example.com/custom/403.html\u3002\u6b64\u65f6\u5728 CDN \u81ea\u5b9a\u4e49\u9875\u9762\u89c4\u5219\u7684\u54cd\u5e94\u5730\u5740\u9879\u586b\u5199 /custom/403.html \u5373\u53ef\u3002 \u5728\u4f18\u5148\u7ea7\u65b9\u9762\uff0c\u81ea\u5b9a\u4e49\u9875\u9762\u7684\u4f18\u5148\u7ea7\u4f1a\u9ad8\u4e8e\u81ea\u5b9a\u4e49\u63d0\u793a\u56fe\u529f\u80fd\u3002 \u5f53\u9519\u8bef\u6765\u6e90\u662f CDN \u65f6\uff0c\u6b64\u65f6\u60a8\u7684\u81ea\u5b9a\u4e49\u9875\u9762\u662f HTML \u9875\u9762\uff0c\u9700\u8981\u786e\u4fdd\u8be5\u9875\u9762\u4e3a\u5355\u9875\u9762\uff0c\u5982\u679c\u9700\u8981\u5d4c\u5165\u56fe\u7247\uff0c\u6211\u4eec\u5efa\u8bae\u5c06\u56fe\u7247\u901a\u8fc7 base64 \u7684\u65b9\u5f0f\u5c06 SVG \u56fe\u7247\u5d4c\u5165\u5230 HTML \u7f51\u9875\u4e2d\u3002\u5f53\u7136\uff0c\u60a8\u4e5f\u53ef\u4ee5\u5c06\u56fe\u7247\u7b49\u8d44\u6e90\u4f7f\u7528\u5916\u94fe\u7684\u65b9\u5f0f\u6765\u5d4c\u5165\u3002","title":"6.12 \u81ea\u5b9a\u4e49\u9875\u9762"},{"location":"cdn/config/#613","text":"\u652f\u6301\u81ea\u5b9a\u4e49\u9519\u8bef\u72b6\u6001\u8bbe\u7f6e\uff0c\u76ee\u524d\u652f\u6301 403\u3001404\u3001405 \u9519\u8bef\u7801\u81ea\u5b9a\u4e49\u63d0\u793a\u56fe\u7684\u8bbe\u7f6e\u3002\u5982\u672a\u8bbe\u7f6e\uff0c\u5219\u9ed8\u8ba4\u9075\u5faa\u53c8\u62cd\u4e91 CDN \u670d\u52a1\u9ed8\u8ba4\u9519\u8bef\u72b6\u6001\u63d0\u793a\u56fe\u3002 \u914d\u7f6e\u5f15\u5bfc \u767b\u9646 CDN \u63a7\u5236\u53f0 \uff0c\u4f9d\u6b21\u8fdb\u5165\uff1a\u670d\u52a1\u7ba1\u7406 > \u529f\u80fd\u914d\u7f6e > \u8bbf\u95ee\u63a7\u5236 > \u81ea\u5b9a\u4e49\u63d0\u793a\u56fe\uff0c\u5728\u6b64\u680f\u76ee\u4e0b\u53ef\u8fdb\u884c\u76f8\u5e94\u8bbe\u7f6e\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff1a 403 \u63d0\u793a\u56fe \u5f53\u7528\u6237\u8bbe\u7f6e\u4e86\u4f8b\u5982 IP \u7981\u7528\u3001Referer \u7b49\u9632\u76d7\u94fe\u914d\u7f6e\u5e76\u4e14\u5f53\u524d\u7684\u8bf7\u6c42\u4e0e\u89c4\u5219\u4e0d\u5339\u914d\u65f6\uff0c\u5373\u4f1a\u54cd\u5e94 403 \u7ed9\u5ba2\u6237\u7aef\uff0c\u8868\u793a\u8be5\u6b21\u8bf7\u6c42\u88ab\u7981\u6b62\u3002\u53e6\u5916\uff0c\u82e5\u8be5\u670d\u52a1\u8bbe\u7f6e\u4e86\u81ea\u5b9a\u4e49 403 \u63d0\u793a\u56fe\uff0c\u90a3\u4e48\u6b64\u7c7b\u60c5\u51b5\u4e0b\u5c31\u4f1a\u54cd\u5e94\u4e00\u4e2a 302 \u8df3\u8f6c\u5230\u76f8\u5e94\u7684\u56fe\u7247\u3002 404 \u63d0\u793a\u56fe \u5f53\u8bf7\u6c42\u7684\u6587\u4ef6\u4e0d\u5b58\u5728\u65f6\uff0c\u4f1a\u54cd\u5e94 404 \u72b6\u6001\u7801\uff0c\u53ef\u901a\u8fc7\u81ea\u5b9a\u4e49\u63d0\u793a\u56fe\u6765\u5c55\u793a\u3002 405 \u63d0\u793a\u56fe \u6b63\u5e38\u4f7f\u7528\u4e2d\u7684\u670d\u52a1\uff0c\u82e5\u88ab\u4eba\u4e3a\u5730\u8bbe\u7f6e\u4e3a\u7981\u6b62\u5916\u94fe\uff0c\u6b64\u65f6\u8bbf\u95ee\u5c31\u4f1a\u54cd\u5e94 405 \u72b6\u6001\u7801\u3002\u540c\u6837\uff0c405 \u4e5f\u652f\u6301\u81ea\u5b9a\u4e49\u63d0\u793a\u56fe\u8bbe\u7f6e\u3002 \u6ce8\u610f\u4e8b\u9879 \u82e5\u6b64\u5904\u672a\u8bbe\u7f6e\u4efb\u4f55\u81ea\u5b9a\u4e49\u63d0\u793a\u56fe\uff0cCDN \u670d\u52a1\u4f1a\u9ed8\u8ba4\u54cd\u5e94\u4e00\u4e2a\u9519\u8bef\u72b6\u6001\u7801\u63d0\u793a\u56fe\uff1b \u6b64\u5904\u81ea\u5b9a\u4e49\u63d0\u793a\u56fe\u7684\u6587\u4ef6\u5927\u5c0f\u9650\u5236\u5728 30KB \u4ee5\u5185\uff1b","title":"6.13 \u81ea\u5b9a\u4e49\u63d0\u793a\u56fe"},{"location":"cdn/config/#7","text":"","title":"7.\u56fe\u7247\u5904\u7406"},{"location":"cdn/config/#71","text":"\u529f\u80fd\u8bf4\u660e \u7528\u4e8e\u5206\u9694\u8bbf\u95ee\u5730\u5740\u4e2d\u7684\u6587\u4ef6\u8def\u5f84\u4e0e\u5904\u7406\u53c2\u6570\u3001\u7248\u672c\u540d\u79f0\u3002\u5982\uff1ahttp://abc.b0.upaiyun.com/pic.jpg!hi\uff0c pic.jpg \u4e3a\u6587\u4ef6\u8def\u5f84\uff0c hi \u4e3a\u7248\u672c\u540d\u79f0\uff0c\u6807\u8bc6\u7b26\u53ef\u4e3a\u534a\u89d2\u5b57\u7b26\uff1a\u201c!\u201d\uff0c\u201c-\u201d\uff0c\u201c_\u201d \u4e09\u79cd\uff0c\u53ef\u4ee5\u5728\u7ba1\u7406\u754c\u9762\u4e2d\u8fdb\u884c\u66f4\u6539\u3002 \u914d\u7f6e\u5f15\u5bfc \u767b\u9646 CDN \u63a7\u5236\u53f0 \uff0c\u4f9d\u6b21\u8fdb\u5165\uff1a\u670d\u52a1\u7ba1\u7406 > \u529f\u80fd\u914d\u7f6e > \u56fe\u7247\u5904\u7406 > \u95f4\u9694\u6807\u8bc6\u7b26\uff0c\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u70b9\u51fb\u754c\u9762\u53f3\u8fb9\u7684\u3010\u7ba1\u7406\u3011\u6309\u94ae\u5373\u53ef\u8bbe\u7f6e\uff0c\u8bbe\u7f6e\u754c\u9762\u5982\u4e0b\uff1a \u5728\u8be5\u914d\u7f6e\u754c\u9762\uff0c\u53ef\u4ee5\u9009\u62e9\u611f\u53f9\u53f7\uff08!\uff09\u3001\u4e2d\u5212\u7ebf\uff08-\uff09\u3001\u4e0b\u5212\u7ebf\uff08_\uff09\u4f5c\u4e3a\u95f4\u9694\u6807\u8bc6\u7b26\uff0c\u9ed8\u8ba4\u4e3a\u611f\u53f9\u53f7\uff08!\uff09\u3002 \u6ce8\u610f\u4e8b\u9879 \u66f4\u6362\u95f4\u9694\u6807\u5fd7\u7b26\u540e\uff0c\u4e4b\u524d\u81ea\u5b9a\u4e49\u7248\u672c\u7684\u8bbf\u95ee\u5730\u5740\u90fd\u5c06\u5931\u6548\uff0c\u9700\u8981\u4f7f\u7528\u65b0\u8bbe\u7f6e\u7684\u95f4\u9694\u6807\u5fd7\u7b26\u624d\u80fd\u4fdd\u8bc1\u6b63\u5e38\u8bbf\u95ee\uff1b \u4e3a\u907f\u514d\u81ea\u5b9a\u4e49\u7248\u672c\u8bbf\u95ee\u51fa\u9519\uff0c\u9009\u62e9\u7684\u95f4\u9694\u6807\u8bc6\u7b26\u4e0d\u80fd\u7528\u4e8e\u6587\u4ef6\u6216\u76ee\u5f55\u540d\u4e2d\u3002","title":"7.1 \u95f4\u9694\u6807\u8bc6\u7b26"},{"location":"cdn/config/#72","text":"\u529f\u80fd\u8bf4\u660e \u9488\u5bf9\u4f7f\u7528 CDN \u670d\u52a1\u6216\u8005\u4e91\u5b58\u50a8\u670d\u52a1\u7684\u7528\u6237\uff0c\u53ef\u4ee5\u4f7f\u7528\u81ea\u5b9a\u4e49\u7248\u672c\u4f5c\u56fe\uff0c\u5177\u4f53\u4f7f\u7528\u683c\u5f0f\u53c2\u89c1\u5982\u4e0b\u8868\u683c\u3002 \u9ed8\u8ba4\u7ed1\u5b9a\u57df\u540d\uff1aimage.upyun.com \u539f\u56fe\u8def\u5f84\uff1a/pic.jpg \u95f4\u9694\u6807\u8bc6\u7b26\uff1a! \u7f29\u7565\u56fe\u7248\u672c\u540d\u79f0\uff1asmall \u56fe\u7247\u4fe1\u606f\u7248\u672c\u540d\u79f0\uff1aexif \u7f29\u7565\u56fe\u8bbf\u95ee\u5730\u5740\uff1ahttp://image.upyun.com/pic.jpg!small \u539f\u56fe EXIF \u4fe1\u606f\u8bbf\u95ee\u5730\u5740\uff1ahttp://image.upyun.com/pic.jpg!exif \u81ea\u5b9a\u4e49\u7248\u672c\u4f7f\u7528\u683c\u5f0f\uff1a http://\u7ed1\u5b9a\u57df\u540d/\u539f\u56fe\u8def\u5f84+\u95f4\u9694\u6807\u8bc6\u7b26+\u81ea\u5b9a\u4e49\u7248\u672c\u540d\u79f0\u3002 \u8be6\u7ec6\u4ecb\u7ecd\u53c2\u89c1 \u56fe\u7247\u5904\u7406 \u3002 \u914d\u7f6e\u5f15\u5bfc \u767b\u9646 CDN \u63a7\u5236\u53f0 \uff0c\u4f9d\u6b21\u8fdb\u5165\uff1a\u670d\u52a1\u7ba1\u7406 > \u529f\u80fd\u914d\u7f6e > \u56fe\u7247\u5904\u7406 > \u81ea\u5b9a\u4e49\u7248\u672c\uff0c\u5728\u6b64\u680f\u76ee\u4e0b\u53ef\u8fdb\u884c\u76f8\u5e94\u8bbe\u7f6e\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff1a 1.\u521b\u5efa\u7f29\u7565\u56fe\u7248\u672c \u521b\u5efa\u7f29\u7565\u56fe\u7248\u672c\uff0c\u586b\u5199\u57fa\u672c\u4fe1\u606f\u3002 \u6839\u636e\u8981\u6c42\uff0c\u8bbe\u7f6e\u6c34\u5370\u53c2\u6570\uff0c\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u6839\u636e\u8981\u6c42\uff0c\u8bbe\u7f6e\u8f93\u51fa\u4fe1\u606f\uff0c\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u6700\u7ec8\u7684\u8bbf\u95ee URL \u53ef\u4e3a\uff1a http://test.example.com/test.jpg!upyun123 \u5176\u4e2d upyun123 \u4e3a\u81ea\u5b9a\u4e49\u7248\u672c\u3002 2.\u521b\u5efa\u56fe\u7247\u4fe1\u606f\u7248\u672c \u56fe\u7247\u4fe1\u606f\u7248\u672c\u5185\u5bb9\u5305\u62ec\uff1a\u56fe\u7247\u57fa\u672c\u4fe1\u606f\uff08\u56fe\u7247\u5bbd\u5ea6\u3001\u9ad8\u5ea6\u3001\u5e27\u6570\u3001\u683c\u5f0f\uff09\u548c EXIF \u4fe1\u606f\uff0c\u5177\u4f53\u8bbe\u7f6e\u53c2\u89c1\u4e0b\u56fe\uff1a \u586b\u5199\u7248\u672c\u540d\u79f0\uff0c\u70b9\u51fb\u53f3\u4e0b\u89d2\u7684\u3010\u786e\u5b9a\u3011\u6309\u94ae\u5373\u53ef\u3002","title":"7.2 \u81ea\u5b9a\u4e49\u7248\u672c"},{"location":"cdn/config/#8","text":"","title":"8.\u5176\u4ed6\u529f\u80fd"},{"location":"cdn/config/#81","text":"\u529f\u80fd\u8bf4\u660e \u53c8\u62cd\u4e91 CDN \u670d\u52a1\u652f\u6301\u5bf9\u54cd\u5e94\u5934 Content-Disposition \u5b57\u6bb5\u7684\u7279\u6b8a\u8bbe\u7f6e\uff0c\u4e5f\u5373\u5728\u8bf7\u6c42 URL \u4e2d\u52a0\u5165 _upd \u53c2\u6570\u53ef\u5bf9 Content-Disposition \u8fdb\u884c\u7279\u6b8a\u5316\u914d\u7f6e\u3002\u901a\u8fc7\u5bf9\u8be5\u53c2\u6570\u7684\u914d\u7f6e\u5c31\u53ef\u4ee5\u5f3a\u5236\u6d4f\u89c8\u5668\u89e6\u53d1\u4e0b\u8f7d\u884c\u4e3a\uff0c\u540c\u65f6\u8be5\u53c2\u6570\u7684\u503c\u4f1a\u4f5c\u4e3a\u6587\u4ef6\u4e0b\u8f7d\u540e\u4fdd\u5b58\u5230\u672c\u5730\u7684\u6587\u4ef6\u540d\u3002\u7279\u522b\u5730\uff0c\u5f53\u5176\u503c\u4e3a true \u65f6\uff0c\u4fdd\u6301\u539f\u6587\u4ef6\u540d\u4e0d\u53d8\u3002 \u5982\u4f55\u4f7f\u7528 \u793a\u4f8b\u4e00\uff1a \u8bf7\u6c42\u53c2\u6570\u4e2d\u52a0\u5165 \u201c_upd=true\u201d \uff0c\u4ee3\u8868\u6dfb\u52a0\u54cd\u5e94\u5934\u4e3a\uff1a Content-Disposition: attachment $ curl http://upyun-assets.b0.upaiyun.com/docs/cdn/upyun-cdn-architecture.png?_upd=true -I > HTTP/1.1 200 OK > Content-Type: image/png > Content-Length: 57371 > ... > Accept-Ranges: bytes > Content-Disposition: attachment; \u793a\u4f8b\u4e00\uff1a \u8bf7\u6c42\u53c2\u6570\u4e2d\u52a0\u5165 \u201c_upd=abc.png\u201d\uff0c\u4ee3\u8868\u6dfb\u52a0\u54cd\u5e94\u5934\u4e3a\uff1a Content-Disposition: attachment; filename=\"abc.png\" $ curl http://upyun-assets.b0.upaiyun.com/docs/cdn/upyun-cdn-architecture.png?_upd=abc.png -I > HTTP/1.1 200 OK > Content-Type: image/png > Content-Length: 57371 > ... > Accept-Ranges: bytes > Content-Disposition: attachment; filename=\"abc.png\" \u6ce8\u610f\u4e8b\u9879 \u7279\u522b\u5730\uff0c \u53c2\u6570\u8ddf\u968f \u5f00\u542f\u7684\u60c5\u51b5\u4e0b\uff0c\u6b64\u53c2\u6570\u65e0\u6548\u3002","title":"8.1 \u6587\u4ef6\u53e6\u5b58\u4e3a"},{"location":"cdn/config/#82-ip","text":"\u529f\u80fd\u8bf4\u660e \u53c8\u62cd\u4e91 CDN \u56de\u5ba2\u6237\u6e90\u7684\u65f6\u5019\u4f1a\u5e26\u4e0a X-Real-IP \u548c X-Forwarded-For \u7684\u8bf7\u6c42\u5934\u4e0b\u53bb\uff0c\u503c\u4e3a\u7528\u6237\u5b9e\u9645\u8bbf\u95ee CDN \u7684\u6765\u6e90 IP \u5730\u5740\u3002\u7279\u522b\u5730\uff0c\u4e3a\u4e86\u517c\u5bb9\u90e8\u5206\u670d\u52a1\u7aef\u7a0b\u5e8f\uff0c\u6211\u4eec\u989d\u5916\u8fd8\u63d0\u4f9b\u4e86 Client-IP \u8bf7\u6c42\u5934\u7684\u652f\u6301\uff0c\u5176\u503c\u548c X-Real-IP \u3001 X-Forwarded-For \u76f8\u540c\u3002 \u5982\u4f55\u4f7f\u7528 1\u3001X-Real-IP \u4f20\u9012\u7528\u6237 IP \u4f7f\u7528\u8be5\u65b9\u5f0f\u4f20\u9012\u6700\u7ec8\u7528\u6237 IP \uff0c\u9700\u8981\u670d\u52a1\u7aef\u4ee3\u7801\u8fdb\u884c\u4e00\u4e9b\u6539\u9020\uff0c\u7f51\u7ad9\u9700\u8981\u6839\u636e\u4f7f\u7528\u7f16\u7a0b\u8bed\u8a00\u7684\u4e0d\u540c\uff0c\u4fee\u6539\u76f8\u5e94\u7684\u4ee3\u7801\u6a21\u5757\uff0c\u624d\u53ef\u4ee5\u4f20\u9012\u6700\u7ec8\u7528\u6237 IP\u3002\u4ee3\u7801\u793a\u4f8b\u5982\u4e0b\uff1a \u793a\u4f8b\u4e00\uff1aPHP \u4ee3\u7801\u00b6 <?php $ip = $_SERVER[\"HTTP_X_REAL_IP\"]; echo $ip; ?> \u793a\u4f8b\u4e8c\uff1a Nginx \u914d\u7f6e\u00b6 server { listen 80; add_header X-Real-IP $http_x_real_ip; } 2\u3001X-Forward-For \u4f20\u9012\u7528\u6237 IP \u56de\u6e90\u8bf7\u6c42\u5934\u4f1a\u9ed8\u8ba4\u4f20\u9012 X-Forwarded-For \u7684\u503c\uff0c\u7528\u6237\u7f51\u7ad9\u65e0\u9700\u4efb\u4f55\u6539\u9020\u3002 \u6ce8\u610f\u4e8b\u9879 1\u3001\u65b0\u589e\u52a0\u901f\u670d\u52a1\u65f6\u6211\u4eec\u4f1a\u9ed8\u8ba4\u4f7f\u7528 X-Real-IP \u548c X-Forwarded-For \u65b9\u5f0f\uff0c\u7f51\u7ad9\u53ea\u9700\u8981\u6309\u7167 \u201c\u5982\u4f55\u4f7f\u7528\u201d \u7ae0\u8282\u4e2d\uff0c\u5bf9\u539f\u5148\u7684\u7528\u6237 IP \u83b7\u53d6\u4ee3\u7801\u8fdb\u884c\u66ff\u6362\u5373\u53ef\uff1b 2\u3001\u7531\u4e8e X-Real-IP \u662f\u53c8\u62cd\u4e91 CDN \u670d\u52a1\u7279\u6709\u7684\u56de\u6e90\u8bf7\u6c42\u5934 \uff0c\u6545\u7ec8\u6b62 CDN \u540e\uff0c\u7f51\u7ad9\u9700\u5c06\u83b7\u53d6\u7528\u6237 IP \u7684\u4ee3\u7801\u4fee\u6539\u4e3a\u539f\u59cb\u4ee3\u7801\uff1b 3\u3001\u5728\u9009\u62e9\u4f7f\u7528 X-Forwarded-For \u8fdb\u884c\u6700\u7ec8\u7528\u6237 IP \u4f20\u9012\u65f6 \uff0c X-Real-IP \u3001 Client-IP \u4e5f\u662f\u540c\u65f6\u4f20\u9012\u7684\uff1b","title":"8.2 \u4f20\u9012\u6700\u7ec8\u7528\u6237 IP"},{"location":"cdn/config/#9","text":"\u9ed8\u8ba4\u9519\u8bef\u7801\u4ecb\u7ecd \u9488\u5bf9\u9519\u8bef\u72b6\u6001\uff08\u8fd9\u91cc\u7279\u6307 CDN \u4e1a\u52a1\u7aef\u4ee5\u53ca\u56de\u6e90\u7ad9\u76f8\u5173\u9519\u8bef\uff09\uff0cCDN \u9ed8\u8ba4\u8fd4\u56de JSON \u4e32\u7684\u5f62\u5f0f\uff0c\u683c\u5f0f\u4e3a\uff1a { \"code\": \"xxxxxxxx\", \"msg\": \"xxxxxxxxxxxxxxx\" } \u5176\u4e2d code \u4ee3\u8868\u9519\u8bef\u7801\uff0c\u4e3a 8 \u4f4d\u6570\u5b57\u7ec4\u6210\uff0c\u4f8b\u5982\uff1a 40310012 \u4ee3\u8868\u89e6\u53d1\u4e86 IP \u9ed1\u540d\u5355\u89c4\u5219\uff1b msg \u4ee3\u8868\u9519\u8bef\u63cf\u8ff0\uff0c\u4f8b\u5982\uff1a remote address is forbidden \uff0c\u4e5f\u5373\u5ba2\u6237\u7aef IP \u88ab\u7981\u6b62\u8bbf\u95ee\u3002\u60a8\u53ef\u4ee5\u6839\u636e CDN \u8fd4\u56de\u7684\u9519\u8bef\u7801\u548c\u63cf\u8ff0\u6765\u5224\u65ad\u89e6\u53d1\u4e86\u4f55\u79cd\u89c4\u5219\uff0c\u8fdb\u800c\u66f4\u65b9\u4fbf\u7684\u5b9a\u4f4d\u95ee\u9898\u3002 \u9ed8\u8ba4\u9519\u8bef\u7801\u4e00\u89c8\u8868 \u73b0\u5c06 CDN \u5e73\u53f0\u90e8\u5206\u53ef\u5f00\u653e\u7684\u9519\u8bef\u7801\u8fdb\u884c\u5982\u4e0b\u5f52\u7c7b\uff1a 1.\u8bbf\u95ee\u63a7\u5236\u76f8\u5173 \u5e8f\u53f7 \u9519\u8bef\u7801\uff08code\uff09 \u9519\u8bef\u63cf\u8ff0(msg) \u53d1\u751f\u4e86\u4ec0\u4e48 1 40310001 invalid url URL \u88ab\u7981\u6b62\u8bbf\u95ee 2 40310002 region is forbidden \u89e6\u53d1\u4e86\u5730\u533a\u8bbf\u95ee\u9650\u5236\u89c4\u5219 3 40310003 too many requests \u89e6\u53d1\u4e86 IP \u9891\u7387\u9650\u5236\u89c4\u5219 4 40310011 invalid User-Agent header \u89e6\u53d1\u4e86 User-Agent \u9632\u76d7\u94fe\u89c4\u5219 5 40310012 remote address is forbidden \u89e6\u53d1\u4e86 IP \u9ed1\u767d\u540d\u5355\u89c4\u5219 6 40310013 invalid user token \u89e6\u53d1\u4e86 Token \u9632\u76d7\u94fe\u89c4\u5219 7 40310014 invalid Referer header \u89e6\u53d1\u4e86 Referer \u9632\u76d7\u94fe\u89c4\u5219 8 40310015 referer uri is forbidden \u89e6\u53d1\u4e86 Referer URI \u9632\u76d7\u94fe\u89c4\u5219 9 40310020 invalid authentication response body \u9274\u6743\u670d\u52a1\u5668\u8fd4\u56de\u7684 body \u5185\u5bb9\u4e0d\u5408\u6cd5\uff0c\u5bfc\u81f4\u9274\u6743\u5931\u8d25 10 40310021 invalid authentication response status \u9274\u6743\u670d\u52a1\u5668\u8fd4\u56de\u7684\u72b6\u6001\u7801\u4e0d\u5408\u6cd5\uff0c\u5bfc\u81f4\u9274\u6743\u5931\u8d25 11 40310022 cyclic authentication requests \u9274\u6743\u670d\u52a1\u5668\u5730\u5740\u5728\u53c8\u62cd\u4e91\u8fdb\u884c\u4e86 CDN \u52a0\u901f\uff0c\u5bfc\u81f4\u4e86\u5faa\u73af\u8bf7\u6c42 12 50310020 authentication service unavailable \u9274\u6743\u670d\u52a1\u5668\u4e0d\u53ef\u7528 13 40110910 authentication fails \u56de\u6e90\u9274\u6743\u5931\u8d25 14 40310006 (api) request body too large \u901a\u8fc7 API \u63a5\u53e3\u4e0a\u4f20\u7684\u6587\u4ef6 body \u592a\u5927 15 41310001 request body too large \u8bf7\u6c42\u7684 body \u5927\u5c0f\u8d85\u8fc7\u9650\u5236 16 40010030 multiple Content-Type header \u89e6\u53d1\u4e86 WAF \u89c4\u5219\uff0c\u8bf7\u6c42\u5934\u4e2d\u542b\u6709\u591a\u4e2a Content-Type \u5934\u90e8 17 40310031 too large form \u89e6\u53d1\u4e86 WAF \u89c4\u5219\uff0cform \u8868\u5355\u592a\u5927 18 40310032 waf protection rules triggered \u89e6\u53d1\u4e86 WAF \u89c4\u5219 19 xxx10999 edge rule triggered \u89e6\u53d1\u8fb9\u7f18\u89c4\u5219\uff0cxxx \u7279\u6307\u72b6\u6001\u7801 20 40510004 invisible domain \u57df\u540d\u89e6\u53d1\u4e86\u654f\u611f\u4fe1\u606f\u88ab\u7981\u6b62\u8bbf\u95ee 2.HTTP \u53ca\u5e73\u53f0\u89c4\u8303\u76f8\u5173 \u5e8f\u53f7 \u9519\u8bef\u7801\uff08code\uff09 \u9519\u8bef\u63cf\u8ff0(msg) \u53d1\u751f 1 41610001 multiple Range header \u591a\u4e2a Range \u5934 2 41610002 multiple sections in Range header Range \u8bf7\u6c42\u4e2d\u5b58\u5728\u591a\u6bb5\u8bf7\u6c42\u8303\u56f4 3 41610003 illegal range portion Range \u8bf7\u6c42\u8303\u56f4\u975e\u6cd5 4 40010040 absent Host header \u8bf7\u6c42\u4e2d\u7f3a\u5c11 Host \u5934\u90e8\uff0c\u8fd4\u56de\u5de5\u4fe1\u90e8\u9519\u8bef\u9875\u9762 5 40010041 bucket not found \u672a\u7ed1\u5b9a\u52a0\u901f\u57df\u540d\u6216\u8005\u670d\u52a1\u4e0d\u5b58\u5728\uff0c\u8fd4\u56de\u5de5\u4fe1\u90e8\u9519\u8bef\u9875\u9762 6 40510001 invisible bucket \u670d\u52a1\uff08\u7a7a\u95f4\uff09\u4e3a\u5173\u95ed\u72b6\u6001 7 41210001 last-modified or Etag illegal Last-Modified \u5934\u90e8\u6216\u8005 ETag \u5934\u90e8\u975e\u6cd5 8 40310007 cyclic request \u89e6\u53d1\u4e86\u5faa\u73af\u8bf7\u6c42\u9650\u5236\u7b56\u7565 9 50310000 unknown error \u5176\u4ed6\u672a\u77e5\u7684\u9519\u8bef 3.\u5e38\u89c1\u56de\u6e90\u9519\u8bef \u5e8f\u53f7 \u9519\u8bef\u7801\uff08code\uff09 \u9519\u8bef\u63cf\u8ff0(msg) \u53d1\u751f\u4e86\u4ec0\u4e48 1 403xx002 response body too large \u56de\u6e90\u54cd\u5e94\u4f53\u592a\u5927 2 502xx001 no valid source address \u6ca1\u6709\u5408\u6cd5\u7684\u56de\u6e90\u5730\u5740 3 502xx002 can't connect to upyun fs \u65e0\u6cd5\u8fde\u63a5 upyun \u5b58\u50a8 4 503xx001 resolve domain failed \u57df\u540d\u89e3\u6790\u9519\u8bef 5 503xx002 resolve domain timeout \u57df\u540d\u89e3\u6790\u8d85\u65f6 6 503xx004 connection refused \u8fde\u63a5\u88ab\u62d2\u7edd 7 503xx005 connection reset by peer \u8fde\u63a5\u88ab\u6e90\u7ad9\u91cd\u7f6e 8 503xx006 handshake failed \u63e1\u624b\u5931\u8d25 9 503xx007 client abort \u5ba2\u6237\u7aef\u53d6\u6d88\u8fde\u63a5 10 503xx008 closed \u8fde\u63a5\u88ab\u5173\u95ed 11 503xx009 broken pipe \u8bfb\u53d6\u6570\u636e\u51fa\u73b0\u95ee\u9898 12 503xx010 unexpect end of stream \u672a\u77e5\u7684\u6e90\u7ad9\u54cd\u5e94\u7ed3\u675f 13 503xx015 certificate host mismatch SSL \u8bc1\u4e66\u5934\u4e0d\u5339\u914d 14 503xx016 self signed certificate SSL \u8bc1\u4e66\u4e3a\u81ea\u7b7e\u540d\u8bc1\u4e66 15 503xx017 certificate has expired SSL \u8bc1\u4e66\u8fc7\u671f 16 504xx001 connection timed out \u56de\u6e90\u8fde\u63a5\u8d85\u65f6 17 504xx002 connection timeout \u8fde\u63a5\u8d85\u65f6 18 504xx003 read timeout \u8bfb\u53d6\u6570\u636e\u8d85\u65f6 19 504xx004 send timeout \u53d1\u9001\u8bf7\u6c42\u8d85\u65f6 \u5176\u4e2d xx \u53ef\u80fd\u662f 00 \u3001 01 \u3001 02 \u3001 03 \u3001 04 \u3002 00 \u8868\u793a UNKNOWN \uff0c 01 \u8868\u793a\u53c8\u62cd\u4e91\u5b58\u50a8\uff0c 02 \u8868\u793a\u7528\u6237\u81ea\u4e3b\u6e90\uff0c 03 \u8868\u793a CDN \u4ee3\u7406\u5c42 \uff0c 04 \u8868\u793a \u4f5c\u56fe\u670d\u52a1 \u3002 \u5982\u4f55\u8fa8\u522b \u65b9\u5f0f\u4e00 \u5982\u679c\u60a8\u901a\u8fc7\u6d4f\u89c8\u5668\u8bbf\u95ee\uff0c\u60a8\u53ef\u4ee5\u901a\u8fc7\u6d4f\u89c8\u5668\u9875\u9762\u67e5\u770b\u5230\u4e00\u6bb5\u9519\u8bef\u4ee3\u7801\uff0c\u4f8b\u5982\uff1a {\"code\":\"40310002\",\"msg\":\"region is forbidden\"} \u5982\u4e0a\u9519\u8bef\u4ee3\u7801\u53ca\u63cf\u8ff0\u5219\u8bf4\u660e\u7528\u6237\u5728 CDN \u4fa7\u914d\u7f6e\u4e86\u5730\u533a\u8bbf\u95ee\u9650\u5236\u7b56\u7565\u3002 \u65b9\u5f0f\u4e8c \u901a\u8fc7 curl \u547d\u4ee4\u53ef\u4ee5\u770b\u5230 X-Error-Code \u54cd\u5e94\u5b57\u6bb5\uff0c\u5219\u53ef\u4ee5\u770b\u51fa\u89e6\u53d1\u4e86\u4f55\u79cd\u9519\u8bef\u3002 < HTTP/1.1 403 Forbidden < Server: marco/2.2 < Date: Fri, 18 May 2018 06:39:47 GMT < Content-Type: application/json < Connection: keep-alive < X-Error-Code: 40310002 < X-Request-Id: 6b947a5e14a252909acab1e55df121c2 < Content-Length: 47 < Via: M.pcw-cn-hkg-166 \u901a\u8fc7\u67e5\u770b X-Error-Code: 40310002 \uff0c\u53ef\u4ee5\u770b\u51fa\u89e6\u53d1\u4e86\u5730\u533a\u8bbf\u95ee\u9650\u5236\u89c4\u5219\u3002","title":"9.\u9ed8\u8ba4\u9519\u8bef\u7801"},{"location":"cdn/edgerules/","text":"\u529f\u80fd\u6982\u8ff0 \u00b6 \u53c8\u62cd\u4e91 CDN \u8fb9\u7f18\u7f51\u7edc\u4e2d\u7684\u667a\u80fd\u53ef\u6269\u5c55\u5e94\u7528\u7a0b\u5e8f\u89c4\u5219\u53ef\u4ee5\u5e2e\u52a9\u60a8\u7b80\u5316\u5185\u5bb9\u5206\u53d1\u4e1a\u52a1\u903b\u8f91\uff0c\u5e76\u63d0\u5347\u7ec8\u7aef\u7528\u6237\u8bbf\u95ee\u4f53\u9a8c\u3002\u8be5\u89c4\u5219\u53ef\u4ee5\u5feb\u901f\u90e8\u7f72\u4e14\u914d\u7f6e\u7b80\u5355\uff0c\u53ef\u6781\u5927\u964d\u4f4e\u4e1a\u52a1\u5b9e\u73b0\u6210\u672c\u3002\u7f51\u7ad9\u53ca Web \u5e94\u7528\u5f00\u53d1\u8005\u6216\u8005\u5b89\u5168\u5de5\u7a0b\u5e08\u53ef\u4ee5\u5feb\u901f\u521b\u5efa\u8fb9\u7f18\u89c4\u5219\u96c6\u6765\u63d0\u5347\u7f51\u7ad9\u5b89\u5168\u53ca\u5206\u53d1\u6027\u80fd\u3002\u4f8b\u5982\uff0c\u8fd9\u4e9b\u573a\u666f\u53ef\u80fd\u5305\u62ec\uff1a \u901a\u8fc7 URL \u6539\u5199\uff0c\u53ef\u7f8e\u5316\u7f51\u7ad9 URL\uff0c\u63d0\u5347\u7f51\u7ad9 SEO \u4e3a\u4e86\u8282\u7701\u66f4\u591a\u8bbf\u95ee\u5e26\u5bbd\uff0c\u9650\u5236\u7f51\u7ad9\u8bf7\u6c42\u4e0b\u8f7d\u901f\u5ea6 \u63a7\u5236\u8bf7\u6c42 URL \u7684\u7ed3\u6784\u3001HTTP \u5934\u57df\u7b49 \u81ea\u5b9a\u4e49\u6e90\u7ad9\u9519\u8bef\u9875\u9762\uff0c\u63d0\u5347\u7ec8\u7aef\u7528\u6237\u4f53\u9a8c \u9650\u5236\u7279\u5b9a\u5ba2\u6237\u7aef\u7684\u8bbf\u95ee\u884c\u4e3a\uff0c\u5408\u7406\u8fdb\u884c\u8bbf\u95ee\u63a7\u5236\uff1b \u60a8\u53ef\u4ee5\u6839\u636e\u5b9e\u9645\u4f7f\u7528\u573a\u666f\uff0c\u5408\u7406\u9009\u62e9\u529f\u80fd\u9879\u3002 \u4f7f\u7528\u65b9\u5f0f \u00b6 EdgeRules \u6839\u636e\u4e0d\u540c\u7528\u6237\u80cc\u666f\u5212\u5206\u4e86\u4e24\u79cd\u4e0d\u540c\u7684\u4f7f\u7528\u65b9\u5f0f\uff0c\u4e00\u79cd\u662f\u901a\u7528\u6a21\u5f0f\uff0c\u4e00\u79cd\u662f\u7f16\u7a0b\u6a21\u5f0f\u3002 1\uff09\u901a\u7528\u6a21\u5f0f\uff1a\u9002\u7528\u4e8e\u6ca1\u6709\u5f00\u53d1\u57fa\u7840\u7684\u7528\u6237\u4e14\u5bf9\u53c8\u62cd\u4e91 EdgeRules \u8bed\u6cd5\u89c4\u5219\u4e0d\u719f\u6089\uff0c\u8be5\u6a21\u5f0f\u4f7f\u7528\u65b9\u4fbf\u5feb\u6377\uff0c\u7528\u6237\u4f53\u9a8c\u4f1a\u66f4\u597d\u4e00\u4e9b\uff0c\u53c2\u8003\u5982\u4e0b\u622a\u56fe\uff1a 2\uff09\u7f16\u7a0b\u6a21\u5f0f\uff1a\u9002\u7528\u4e8e\u5f00\u53d1\u8005\uff0c\u5bf9 EdgeRules \u8bed\u6cd5\u89c4\u5219\u6709\u5f88\u6df1\u4e86\u89e3\u7684\u7528\u6237\uff0c\u76f8\u5bf9\u901a\u7528\u6a21\u5f0f\u6765\u8bf4\uff0c\u7f16\u7a0b\u6a21\u5f0f\u4f1a\u66f4\u7075\u6d3b\uff0c\u529f\u80fd\u4f1a\u66f4\u5f3a\u5927\u4e00\u4e9b\u3002\u53c2\u7167\u5982\u4e0b\u622a\u56fe\uff1a \u6761\u4ef6\u5224\u65ad \u00b6 \u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0cEdgeRules \u662f\u6839\u636e\u670d\u52a1\u7ef4\u5ea6\u751f\u6548\u7684\uff0c\u60a8\u4e5f\u53ef\u4ee5\u6dfb\u52a0\u6761\u4ef6\u5224\u65ad\uff0c\u5f53\u6761\u4ef6\u6ee1\u8db3\u67d0\u4e9b\u7279\u5b9a\u8981\u6c42\u65f6\uff0c\u624d\u4f1a\u89e6\u53d1\u540e\u9762\u7684\u529f\u80fd\u9009\u9879\u3002\u4f8b\u5982\uff1a \u5f53\u8bf7\u6c42 HOST \u4e3a test.example.com \u65f6\uff0c\u6dfb\u52a0 HTTP \u54cd\u5e94\u5934 CDN \u4e3a UPYUN\u3002 \u8fd9\u4e9b\u6761\u4ef6\u8fc7\u6ee4\u5668\u5305\u62ec\uff1a \u8bf7\u6c42 URI HTTP \u8bf7\u6c42\u5934 \u8bf7\u6c42\u65b9\u6cd5 \u8bf7\u6c42\u534f\u8bae \u8bf7\u6c42\u53c2\u6570 \u67e5\u8be2\u5b57\u7b26\u4e32 POST \u53c2\u6570 Cookie \u53d8\u91cf \u5ba2\u6237\u7aef IP \u56fd\u5bb6 \u4e3a\u4e86\u914d\u5408\u6761\u4ef6\u5224\u65ad\u4f7f\u7528\uff0c\u652f\u6301\u7684\u8fd0\u7b97\u7b26\u5305\u62ec\uff1a \u7b49\u4e8e \u4e0d\u7b49\u4e8e \u6b63\u5219\u5339\u914d \u6b63\u5219\u4e0d\u5339\u914d \u6b63\u5219\u5339\u914d\uff08\u4e0d\u533a\u5206\u5927\u5c0f\u5199\uff09 \u6b63\u5219\u4e0d\u5339\u914d\uff08\u4e0d\u533a\u5206\u5927\u5c0f\u5199\uff09 \u5982\u5e0c\u671b\u901a\u8fc7\u7f16\u7a0b\u6a21\u5f0f\u6765\u4f7f\u7528\u53d8\u91cf\uff0c\u66f4\u591a\u4e86\u89e3\u8bf7\u53c2\u8003\u8bed\u6cd5\u89c4\u5219\u7ae0\u8282 \u53d8\u91cf \u53ca \u51fd\u6570 \u7684\u4ecb\u7ecd\u3002 \u529f\u80fd\u9009\u62e9 \u00b6 \u6839\u636e\u4f7f\u7528\u573a\u666f\uff0c\u6211\u4eec\u9488\u5bf9\u3010\u901a\u7528\u6a21\u5f0f\u3011\u914d\u5907\u4e86 7 \u5927\u529f\u80fd\uff0c\u5177\u4f53\u529f\u80fd\u5217\u8868\u5305\u62ec\uff1a \u6dfb\u52a0 HTTP \u5934\u90e8\uff08\u5305\u62ec\u8bf7\u6c42\u5934\u548c\u54cd\u5e94\u5934\uff09 \u5220\u9664 HTTP \u5934\u90e8\uff08\u5305\u62ec\u8bf7\u6c42\u5934\u548c\u54cd\u5e94\u5934\uff09 \u8fb9\u7f18\u91cd\u5b9a\u5411 URL \u6539\u5199 \u8bf7\u6c42\u9650\u901f \u8bbf\u95ee\u63a7\u5236 \u81ea\u5b9a\u4e49\u9519\u8bef\u9875\u9762 \u5176\u4ed6\u9009\u9879 \u00b6 \u4f18\u5148\u7ea7 \u53c8\u62cd\u4e91 EdgeRules \u9ed8\u8ba4\u662f\u6309\u7167\u5148\u540e\u987a\u5e8f\u6267\u884c\u7684\u3002\u7406\u8bba\u4e0a\u4f18\u5148\u7ea7\u5728\u524d\u9762\u7684\u89c4\u5219\u5c06\u4f1a\u4f18\u5148\u6267\u884c\uff0c\u60a8\u9700\u8981\u6839\u636e\u4e1a\u52a1\u9700\u6c42\u6765\u5408\u7406\u8c03\u6574\u89c4\u5219\u7684\u4f18\u5148\u7ea7\u3002\u66f4\u591a\u7ec6\u8282\u4e86\u89e3\u8bf7\u53c2\u8003\u3010\u914d\u7f6e\u6307\u5357\u3011\u7ae0\u8282\u7684 \u89c4\u5219\u4f18\u5148\u7ea7 \u4ecb\u7ecd\u3002 break \u8be5\u5f00\u5173\u9ed8\u8ba4\u4e3a\u5173\u95ed\u72b6\u6001\u3002\u5f00\u542f\u72b6\u6001\u4e0b\uff0c\u5982\u679c\u6b64\u6761\u89c4\u5219\u547d\u4e2d\u5219\u7ec8\u6b62\u5339\u914d\u5269\u4e0b\u7684\u89c4\u5219\uff0c\u4e5f\u5373\u4f1a\u8df3\u51fa\u6574\u4e2a\u89c4\u5219\u96c6\uff0c\u8bf7\u7ed3\u5408\u4e1a\u52a1\u9700\u6c42\u5408\u7406\u5f00\u542f\u548c\u5173\u95ed\u3002 \u72b6\u6001 1\uff09\u542f\u7528 \u542f\u7528\u72b6\u6001\u4e0b\uff0c\u89c4\u5219\u4f1a\u5728\u51e0\u79d2\u949f\u5185\u4e0b\u53d1\u90e8\u7f72\u5230\u5168\u7f51 CDN \u8282\u70b9\uff0c\u53ca\u65f6\u751f\u6548\u3002\u8bf7\u786e\u4fdd\u4e1a\u52a1\u6d4b\u8bd5\u6210\u529f\u4e4b\u540e\uff0c\u518d\u8c03\u6574\u4e3a\u542f\u7528\u72b6\u6001\u3002 2\uff09\u5173\u95ed \u5173\u95ed\u72b6\u6001\u4e0b\uff0c\u89c4\u5219\u4e0d\u4f1a\u5728\u5168\u7f51 CDN \u8282\u70b9\u8fdb\u884c\u90e8\u7f72\u3002\u8bf7\u6839\u636e\u4e1a\u52a1\u60c5\u51b5\uff0c\u6709\u9009\u62e9\u6027\u7684\u5173\u95ed\u89c4\u5219\u3002 3\uff09\u6d4b\u8bd5 \u89c4\u5219\u9ed8\u8ba4\u4e3a\u6d4b\u8bd5\u72b6\u6001\uff0c\u5e73\u53f0\u4f1a\u81ea\u52a8\u83b7\u53d6\u672c\u5730 IP \u5730\u5740\uff0c\u4e5f\u5373\u89c4\u5219\u53ea\u4f1a\u5bf9\u8be5\u5ba2\u6237\u7aef IP \u751f\u6548\uff0c\u60a8\u4e5f\u53ef\u4ee5\u6362\u6210\u5176\u4ed6 IP \u5730\u5740\u8fdb\u884c\u6d4b\u8bd5\u3002\u5f53\u4e14\u4ec5\u5f53\u6d4b\u8bd5\u6ee1\u8db3\u4e1a\u52a1\u8981\u6c42\u4e4b\u540e\uff0c\u4f60\u624d\u53ef\u4ee5\u5c06\u89c4\u5219\u8c03\u6574\u4e3a\u542f\u7528\u72b6\u6001\u3002 \u8bed\u6cd5\u89c4\u5219 \u00b6 \u5f53\u60a8\u5e0c\u671b\u901a\u8fc7\u7f16\u7a0b\u6a21\u5f0f\u6765\u81ea\u884c\u7f16\u5199\u8fb9\u7f18\u89c4\u5219\u65f6\uff0c\u4f60\u9700\u8981\u5bf9\u53c8\u62cd\u4e91\u8fb9\u7f18\u89c4\u5219\u7684\u8bed\u6cd5\u89c4\u5219\u8fdb\u884c\u8be6\u7ec6\u4e86\u89e3\uff0c\u65b9\u53ef\u81ea\u884c\u7f16\u5199\u89c4\u5219\u3002\u672c\u6587\u5c06\u56f4\u7ed5\u51fd\u6570\u3001\u53d8\u91cf\u3001\u5b57\u7b26\u4e32\u5e38\u91cf\u3001break \u8fdb\u884c\u8be6\u7ec6\u4ecb\u7ecd\u3002 \u51fd\u6570 \u00b6 \u51fd\u6570\u8c03\u7528\u4ee5 $ \u5f00\u5934\uff0c\u540e\u8ddf\u4e00\u7ec4\u5927\u5199\u5b57\u6bcd\uff0c\u5b57\u6bcd\u4e4b\u95f4\u53ef\u4ee5\u5305\u542b\u4e0b\u5212\u7ebf _ \uff0c\u51fd\u6570\u9700\u8981\u7684\u53c2\u6570\u653e\u5728 () \u4e2d\uff0c\u4ee5 , \u5206\u9694\u3002\u5982\u679c\u6ca1\u6709\u7279\u522b\u8bf4\u660e\uff0c\u8fb9\u7f18\u89c4\u5219 \u4e2d\u7684\u51fd\u6570\u53c2\u6570\u4e2a\u6570\u4e0d\u80fd\u5c11\u4e8e\u8981\u6c42\u7684\u53c2\u6570\u4e2a\u6570\uff0c\u5426\u5219\u89c6\u4e3a\u8bed\u6cd5\u9519\u8bef\uff0c\u7136\u540e\u7ec8\u6b62\u89c4\u5219\u6267\u884c\u8fc7\u7a0b\uff0c\u591a\u4f59\u7684\u53c2\u6570\u4f1a\u88ab\u6c42\u503c\uff0c\u4f46\u4e0d\u5f71\u54cd\u8c03\u7528\u3002\u51fd\u6570\u8c03\u7528\u662f\u6709\u4e0a\u4e0b\u6587\u7684\uff0c\u8b6c\u5982 $WHEN \u8fd9\u4e2a\u51fd\u6570\uff0c\u53c2\u6570\u662f bool \u7c7b \u578b\uff0c\u53c2\u6570\u4e2d\u6709\u4e0d\u6210\u7acb\u7684\u6761\u4ef6 false \u65f6\uff0c\u4f1a\u7ec8\u6b62\u672c\u6b21\u89c4\u5219\u6267\u884c\u8fc7\u7a0b\u3002\u652f\u6301\u7684\u51fd\u6570\u6709\uff1a \u6761\u4ef6\u9009\u62e9\u548c\u5224\u65ad \u51fd\u6570 \u542b\u4e49 $WHEN(E1, E2, ...) \u6240\u6709\u6761\u4ef6\u90fd\u6210\u7acb\u65f6\u624d\u4f1a\u6267\u884c\u89c4\u5219\uff0c\u5e76\u8fd4\u56de\u7a7a\u5b57\u7b26\u4e32 $NOT(E) E \u4e0d\u6210\u7acb\u65f6\u8fd4\u56de true \uff0c \u5426\u5219\u8fd4\u56de false $ALL(E1, E2, ...) \u6240\u6709\u6761\u4ef6\u90fd\u6210\u7acb\u65f6\u8fd4\u56de true \uff0c\u5426\u5219\u8fd4\u56de false \uff0c\u53c2\u6570\u4e2a\u6570\u4e0d\u9650 $ANY(E1, E2, ...) \u5176\u4e2d\u4e00\u4e2a\u6761\u4ef6\u6210\u7acb\u65f6\u8fd4\u56de true \uff0c\u5426\u5219\u8fd4\u56de false \uff0c\u53c2\u6570\u4e2a\u6570\u4e0d\u9650 $OR(E1, E2, ...) \u503c\u4e3a\u7b2c\u4e00\u4e2a\u4e3a\u771f\u7684\u8868\u8fbe\u5f0f $SELECT(E1, E2, E3) E1 \u4e3a\u771f\u65f6\u503c\u4e3a E2 \uff0c\u5426\u5219\u4e3a E3 $PCALL(E) \u4fdd\u62a4\u6a21\u5f0f\u4e0b\u89e3\u6790 E \uff0c\u5931\u8d25\u65f6\u8fd4\u56de\u7a7a\u5b57\u7b26\u4e32 \u5b57\u7b26\u5339\u914d\u548c\u6355\u83b7 \u51fd\u6570 \u542b\u4e49 $MATCH(E1, E2) PCRE \u5339\u914d\uff0c E2 \u4e3a\u8981\u5339\u914d\u7684 pattern\uff0c\u8fd4\u56de true \u6216\u8005 false $CAPTURE(E1, E2, E3) \u6309 E2 pattern \u5bf9 E1 \u8fdb\u884c\u6355\u83b7\uff0c E3 \u8868\u793a\u662f\u5426\u5ffd\u7565\u5927\u5c0f\u5199\uff0c\u6355\u83b7\u540e\u751f\u6210 $n.m \u5f62\u5f0f\u7684\u53d8\u91cf\uff0c n \u4e3a\u5f53\u524d CAPTURE \u51fa\u73b0\u7684\u6b21\u5e8f\uff0c m \u8868\u793a\u5339\u914d\u5206\u7ec4\uff1b E2 \u4e3a\u7a7a\u65f6\uff0c\u8868\u793a\u5bf9 E1 \u8fdb\u884c\u6355\u83b7\uff0c\u6b64\u65f6 E1 \u5bf9\u5e94 $n.0 \u8bf7\u6c42/\u54cd\u5e94\u4fee\u6539 \u51fd\u6570 \u542b\u4e49 $ADD_REQ_HEADER(E1, E2) \u6dfb\u52a0\u8bf7\u6c42\u5934 E1 \u4e3a E2 $DEL_REQ_HEADER(E) \u5220\u9664\u8bf7\u6c42\u5934 E $ADD_RSP_HEADER(E1, E2) \u6dfb\u52a0\u54cd\u5e94\u5934 E1 \u4e3a E2 $DEL_RSP_HEADER(E) \u5220\u9664\u54cd\u5e94\u5934 E $DEL_ARG(E) \u5220\u9664\u8bf7\u6c42\u53c2\u6570\u9879 E $SET_METHOD(E) \u4fee\u6539\u5f53\u524d HTTP \u8bf7\u6c42\u65b9\u6cd5\u4e3a E \uff0c E \u53ef\u9009\u503c\u6709\uff1a GET , HEAD , PUT , POST , DELETE , OPTIONS , PATCH ; \u6ce8 1 $SET_BODY(E) \u4fee\u6539\u5f53\u524d HTTP \u8bf7\u6c42\u4f53\u7684\u5185\u5bb9\u4e3a E \uff0c\u4ec5\u5728 PUT \u6216 POST \u8bf7\u6c42\u4e0b\u6709\u6548 $REDIRECT(E1, E2) \u91cd\u5b9a\u5411\u5730\u5740\u5230 E1 \uff0c\u72b6\u6001\u7801\u4e3a E2(301, 302) $EXIT(E1, E2) \u4ee5\u72b6\u6001\u7801 E1 \u9000\u51fa\uff0c\u54cd\u5e94\u4f53\u4e3a E2 \u6ce8: \u5220\u9664\u54cd\u5e94\u5934\u51fd\u6570\u4e0d\u80fd\u5220\u9664 CDN \u81ea\u5e26\u7684\u4e00\u4e9b\u5b57\u6bb5\uff0c\u6bd4\u5982 via\u3001age\u3001server\u3001connection\u3001x-cache\u3001x-request-id\u3001x-source\u3001content-length\u3001transfer-encoding\u7b49\u5b57\u6bb5\u662f\u6709\u4fdd\u62a4\u7684\u3002 \u6570\u503c\u8ba1\u7b97 \u51fd\u6570 \u542b\u4e49 $ADD(E1, E2) \u6570\u5b57\u76f8\u52a0\uff0c\u8fd4\u56de E1 + E2 \u7ed3\u679c\u6570\u503c $MOD(E1, E2) \u6570\u5b57\u53d6\u4f59\uff0c\u8fd4\u56de E1 % E2 \u7ed3\u679c\u6570\u503c\uff0c\u5176\u4e2d E2 \u4e0d\u80fd\u4e3a 0 $MSUB(E1, E2) \u6570\u5b57\u76f8\u51cf\uff0c\u8fd4\u56de E1 - E2 \u7ed3\u679c\u6570\u503c $MULTIPLY(E1, E2) \u6570\u5b57\u76f8\u4e58\uff0c\u8fd4\u56de E1 * E2 \u7ed3\u679c\u6570\u503c $DIVIDE(E1, E2) \u6570\u5b57\u76f8\u9664\uff0c\u8fd4\u56de E1 / E2 \u7ed3\u679c\u6570\u503c\uff0c\u5176\u4e2d E2 \u4e0d\u80fd\u4e3a 0 $BYTE(E) \u8fd4\u56de\u5b57\u7b26 E \u7684 ASCII \u7f16\u7801\u503c $FLOOR(E) \u8fd4\u56de\u5c0f\u4e8e\u6216\u7b49\u4e8e\u6570\u5b57 E \u7684\u6700\u5927\u6574\u6570 $CEIL(E) \u8fd4\u56de\u5927\u4e8e\u6216\u7b49\u4e8e\u6570\u5b57 E \u7684\u6700\u5c0f\u6574\u6570 $GT(E1, E2) \u6570\u5b57\u6bd4\u8f83\uff0c\u662f\u5426\u5927\u4e8e\uff0c\u8fd4\u56de true \u6216\u8005 false $GE(E1, E2) \u6570\u5b57\u6bd4\u8f83\uff0c\u662f\u5426\u5927\u4e8e\u7b49\u4e8e\uff0c\u8fd4\u56de true \u6216\u8005 false \u5b57\u7b26\u4e32\u64cd\u4f5c \u51fd\u6570 \u542b\u4e49 $SUB(E1, from, to) \u5b57\u7b26\u4e32\u622a\u53d6\uff0c\u4ece from \u5230 to $GSUB(E1,E2,E3,N) E1 \u4e3a\u8981\u5904\u7406\u7684\u5b57\u7b26\u4e32\uff0c E2 \u4e3a\u8981\u66ff\u6362\u7684\u5b57\u7b26\u4e32\uff0c E3 \u4e3a\u66ff\u6362\u6210\u7684\u5b57\u7b26\u4e32\uff08\u53ef\u4ee5\u4e3a\u7a7a\uff0c\u8868\u793a\u5220\u9664 E1 \uff09\uff0c N \u4e3a\u4ece\u5b57\u7b26\u4e32\u5f00\u59cb\u7684\u66ff\u6362 E1 \u7684\u4e2a\u6570\uff0c\u7a7a\u6216\u5c0f\u4e8e\u96f6\u8868\u793a\u6240\u6709\uff0c\u51fd\u6570\u8fd4\u56de\u5904\u7406\u540e\u7684\u5b57\u7b26\u4e32 $EQ(E1, E2) \u5b57\u7b26\u4e32\u662f\u5426\u76f8\u7b49\uff0c\u8fd4\u56de true \u6216\u8005 false $UPPER(E) \u5c06 E \u8f6c\u6362\u4e3a\u5927\u5199 $LOWER(E) \u5c06 E \u8f6c\u6362\u4e3a\u5c0f\u5199 $LEN(E) \u8fd4\u56de\u5b57\u7b26\u4e32 E \u7684\u957f\u5ea6 \u901a\u7528\u529f\u80fd\u7c7b\u51fd\u6570 \u51fd\u6570 \u542b\u4e49 $ENCODE_BASE64(E) \u5c06\u5b57\u7b26\u4e32 E \u6309 base64 \u7f16\u7801\u538b\u7f29 $DECODE_BASE64(E) \u5c06\u5b57\u7b26\u4e32 E \u6309 base64 \u7f16\u7801\u89e3\u538b $ESCAPE(E) \u5c06\u5b57\u7b26\u4e32 E \u6309 URL \u7f16\u7801\u5904\u7406\uff0c\u5177\u4f53\u5b9e\u73b0\u548c Chrome JS \u5b9e\u73b0\u7684 encodeURIComponent() \u4e00\u81f4 $UNESCAPE(E) \u5c06\u5b57\u7b26\u4e32 E \u6309 URL \u89e3\u7801\u5904\u7406\uff0c\u5177\u4f53\u5b9e\u73b0\u548c Chrome JS \u5b9e\u73b0\u7684 decodeURIComponent() \u4e00\u81f4 $MD5(E) \u8ba1\u7b97 E \u7684 md5 \u503c $MD5_BIN\uff08E\uff09 \u8ba1\u7b97 E \u7684 md5 \u503c\uff0c\u5e76\u4ee5\u4e8c\u8fdb\u5236\u6570\u636e\u8f93\u51fa $RANDI(E1, E2) \u8fd4\u56de\u5927\u4e8e E1 \u5e76\u5c0f\u4e8e E2 \u7684\u968f\u673a\u6570\u503c $UNIXT(y, m, d, h, min, sec) \u6307\u5b9a\u5e74\uff0c\u6708\uff0c\u65e5\uff0c\u5c0f\u65f6\uff0c\u5206\u949f\uff0c\u79d2\uff0c\u8fd4\u56de\u76f8\u5e94\u7684 UNIX TIME $INT(E1, E2, E3) \u8fdb\u5236\u8f6c\u6362\uff0c\u5c06 E2 \u8fdb\u5236\u7684\u6570\u5b57\uff08\u5b57\u7b26\u4e32\u5f62\u5f0f\uff09 E1 \u8f6c\u6362\u6210 E3 \u8fdb\u5236\u5e76\u8fd4\u56de\uff0c E2 , E3 \u53ef\u9009\uff0c E2 \u9ed8\u8ba4\u4e3a 10 $STRF_TIME(E1,E2 ) \u65f6\u95f4\u683c\u5f0f\u8f6c\u6362\uff0c\u8868\u793a\u628a\u65f6\u95f4\u8fdb\u884c\u683c\u5f0f\u5316\u6210\u5e74\u6708\u65e5\u65f6\u5206\uff0c E1 \u4ee3\u8868 UNIX \u65f6\u95f4\u6233\uff0c\u53ef\u4ee5\u4f7f\u7528\u53d8\u91cf $_TIME \u6765\u83b7\u53d6\u5f53\u524d\u65f6\u95f4\uff1b E2 \u4e3a\u95f4\u9694\u7b26\uff0c\u4e3a\u53ef\u9009\u9879\uff0c\u4e0d\u586b\u65f6\u683c\u5f0f\u4e3a 201802230955 \uff1b\u95f4\u9694\u7b26\u4e3a - \u65f6\uff0c\u683c\u5f0f\u4e3a 2018-02-23-09-55 \u9650\u901f\u76f8\u5173 \u51fd\u6570 \u542b\u4e49 $LIMIT_RATE_AFTER(E1, E2) \u9650\u901f\u7b56\u7565\u8bbe\u7f6e\uff0c\u53d1\u9001 E1 \u5927\u5c0f\u5355\u4f4d\u4e3a E2 \u5b57\u8282\u6570\u636e\u540e\uff0c\u8fdb\u884c\u9650\u901f\uff0c E2 \u53ef\u9009\u503c\u6709\uff1a k \uff08KB)\uff0c m \uff08MB\uff09 $LIMIT_RATE(E1, E2) \u9650\u901f\u7b56\u7565\u8bbe\u7f6e\uff0c\u6309 E1 \u5927\u5c0f\u6bcf\u79d2\u8fdb\u884c\u9650\u901f\uff0c\u5355\u4f4d\u4e3a E2 \uff0c E2 \u53ef\u9009\u503c\u6709\uff1a k \uff08KB)\uff0c m \uff08MB\uff09 \u6ce8 1\uff1a\u82e5\u5f53\u524d\u8bf7\u6c42\u5e26\u6709\u8bf7\u6c42\u4f53\u7684\u60c5\u51b5\u4e0b\uff0c $SET_METHOD(E) \u4e0d\u5141\u8bb8\u8bbe\u7f6e\u4e3a\u9664 PUT \u548c POST \u4ee5\u5916\u7684\u65b9\u6cd5\u3002 \u5176\u4e2d E[n] \u4ee3\u8868\u5408\u6cd5\u7684\u8868\u8fbe\u5f0f\uff0c\u4e5f\u5c31\u662f\u8bf4\u51fd\u6570\u53ef\u4ee5\u76f8\u4e92\u5d4c\u5957\uff0c\u4f8b\u5982\u89c4\u5219\u53ef\u4ee5\u4e3a\uff1a /$SUB($DECODE_BASE64($_HEADER_foo), $_GET_from, $_GET_to)/ \uff1b\u5e03\u5c14\u51fd\u6570\u5305\u62ec WHEN , ALL, ANY \u90fd\u662f\u77ed\u8def\u7684\uff0c\u8b6c\u5982 $WHEN($ALL(), $EXIT(403)) \u4e0d\u4f1a\u8fd4\u56de 403 \uff0c\u56e0\u4e3a $ALL() \u7684\u503c\u4e3a false \u4f7f\u7528 '' \u80fd\u5bf9\u53d8\u91cf\u8fdb\u884c\u8f6c\u4e49\uff0c\u4f7f\u5176\u4e0d\u88ab\u89e3\u91ca\uff0c\u4f8b\u5982\u4ee5\u4e0b\u89c4\u5219\uff1a /foo/'$_HOST' \u4f1a\u88ab\u8f6c\u6362\u4e3a: /foo/$_HOST \u5bf9\u4e8e\u542b\u6709\u8bf7\u6c42\u53c2\u6570\u7684\u89c4\u5219\uff0c\u539f\u5148\u7684\u8bf7\u6c42\u53c2\u6570\u4f1a\u9644\u52a0\u5230\u540e\u9762\uff0c\u5982\u679c\u4e0d\u5e0c\u671b\u8fd9\u6837\uff0c\u53ef\u4ee5\u653e\u7f6e\u4e00\u4e2a '?' \u5728\u89c4\u5219\u7684\u6700\u540e\u9762\uff0c\u4f8b\u5982\u8fd9\u6837\uff1a /foo?bar=$1? \u7279\u522b\u5730\uff0c\u5982\u679c\u91cd\u5199\u540e\u7684 URL \u6ca1\u6709\u53c2\u6570\uff0c\u90a3\u4e48\u6b64\u65f6\u9700\u8981\u5728\u6700\u540e\u52a0\u4e24\u4e2a ? \uff0c\u4f8b\u5982\u8fd9\u6837\uff1a /foo?? \u53d8\u91cf \u00b6 \u53d8\u91cf\u4ee5 $_ \u5f00\u5934\uff0c\u8fd9\u4e9b\u53d8\u91cf\u90fd\u662f\u5bf9\u6b64\u6b21\u8bf7\u6c42\u4e0a\u4e0b\u6587\u4e2d\u4e00\u4e9b\u53c2\u6570\u7684\u6620\u5c04\uff0c\u8b6c\u5982 $_HOST \u5bf9\u5e94\u6b64\u6b21\u8bf7\u6c42\u5934\u4e2d\u7684 Host \u5b57\u6bb5\uff0c $_GET_foo \u5bf9\u5e94\u6b64\u6b21\u8bf7\u6c42 URL \u53c2\u6570 foo \u7684\u503c\uff0c\u7b49\u7b49\u3002\u82e5\u5c06\u53d8\u91cf\u5185\u63d2\u5230\u91cd\u5199\u540e\u7684 URL \u4e2d\uff0c\u8b6c\u5982 URL \u6539\u5199 /$_GET_foo/bar \uff0c\u5982\u679c\u8bf7\u6c42\u53c2\u6570\u4e2d\u6ca1\u6709 foo \u5219\u89c6\u4e3a\u6b64\u6b21\u6539\u5199 \u5931\u8d25\uff1b \u82e5\u5c06\u53d8\u91cf\u653e\u5728\u51fd\u6570\u4e2d\uff0c\u5219\u7531\u8be5\u51fd\u6570\u786e\u5b9a\u8fd4\u56de\u7684\u503c\uff0c\u4f8b\u5982 $NOT($_GET_foo) \uff0c\u5982\u679c\u53c2\u6570\u4e2d\u5305\u542b foo \uff0c\u5219\u8fd4\u56de false \uff0c\u5426\u5219\u8fd4\u56de true \u3002\u76ee\u524d\u652f\u6301\u7684\u53d8\u91cf\u6709\uff1a \u53d8\u91cf \u542b\u4e49 $_IP \u5ba2\u6237\u7aef IP $_HOST \u8bf7\u6c42\u5934\u4e2d\u7684 Host \u5b57\u6bb5 $_HOST_n $_HOST_n \u6307 Host \u4e2d\u7684\u7b2c n \u4e2a\u5b50\u57df\uff0c\u4f8b\u5982\u5bf9\u4e8e foo.bar.baz.com\uff1a $_HOST_1 = foo\uff0c$_HOST_2 = bar\uff0c$_HOST_3 = baz $_GET_name \u4f7f\u7528 Query String \u4e2d\u7684\u53d8\u91cf\uff08\u65e0\u9700 urldecode\uff09 $_POST_name \u4f7f\u7528 POST \u8868\u5355\u4e2d\u7684\u53d8\u91cf\uff08\u53ea\u652f\u6301 www form \uff09 $_HEADER_name \u4f7f\u7528 Header \u4e2d\u7684\u503c\uff0c\u6ce8\u610f name \u5168\u4e3a\u5c0f\u5199 $_COOKIE_name \u4f7f\u7528 Cookie \u4e2d\u7684\u5b57\u6bb5\u503c $_RANDOM \u968f\u673a\u5b57\u7b26\u4e32\uff0c\u5b57\u7b26\u96c6\u4e3a [a-zA-Z0-9] \uff0c\u9ed8\u8ba4 8 \u4f4d $_RANDOM_n n \u4f4d\u968f\u673a\u5b57\u7b26\u4e32\uff0c\u5176\u4e2d 1 <= n <= 32 $_URI \u8bf7\u6c42\u7684 URI\uff0c\u4e0d\u5305\u542b\u53c2\u6570 $_QUERY Query String\uff0c\u4e0d\u5e26\u524d\u7f00 '?' $_METHOD GET/POST/PUT/POST/DELETE/OPTIONS/PATCH $_SCHEME http/https\uff0c\u6ce8\u610f\u6b64\u5904\u5168\u4e3a\u5c0f\u5199 $_TIME \u83b7\u53d6\u5f53\u524d\u670d\u52a1\u5668\u65f6\u95f4\uff0c\u683c\u5f0f\u4e3a UNIX TIME $_BODY \u83b7\u53d6\u5f53\u524d\u8bf7\u6c42\u7684 BODY\uff08\u8bf7\u6c42\u4f53\uff09\u5185\u5bb9\uff0c\u5927\u5c0f\u9650\u5236\u4e3a 16KB $_GEOIP_COUNTRY_CODE \u56fd\u5bb6\u4ee3\u7801\uff0c\u53ef\u53c2\u7167\u7ef4\u57fa\u767e\u79d1\uff1a https://en.wikipedia.org/wiki/ISO_3166-2 \u5b57\u7b26\u4e32\u5e38\u91cf \u00b6 \u5b57\u7b26\u4e32\u5e38\u91cf\u6709\u4e24\u79cd\u5f62\u5f0f\uff0c\u7b2c\u4e00\u79cd\u5c31\u662f\u666e\u901a\u7684\u5b57\u7b26\u4e32\u4f8b\u5982 /foo/bar \uff0c\u4f46\u662f\u5982\u679c\u5b57\u7b26\u4e32\u4e2d\u5305\u542b\u4e86\u4e00\u4e9b\u7279\u6b8a\u5b57\u7b26\uff0c\u4f8b\u5982\u7a7a\u767d\u5b57\u7b26\u5c06\u88ab\u7701\u7565\uff0c\u4f8b\u5982 $(),' \u8fd9\u4e9b\u5b57\u7b26\u6709\u7279\u6b8a\u7684\u7528\u9014\uff0c\u4e0d\u80fd\u88ab\u76f4\u63a5\u4f7f\u7528\uff0c\u8981\u4f7f\u7528\u8fd9\u4e9b\u7279\u6b8a\u7684\u5b57\u7b26\uff0c\u8981\u52a0 \\ \u524d\u7f00\u5bf9\u5176\u8f6c\u4e49\uff0c\u4f8b\u5982 /foo/bar\\, \uff1b\u7b2c\u4e8c\u79cd\u662f\u52a0\u5355\u5f15\u53f7\u7684\u5b57\u7b26\u4e32 '' \uff0c\u5355\u5f15\u53f7\u4e2d\u7684\u5b57\u7b26\u53ea\u6709 \\ \u662f\u7279\u6b8a\u8f6c\u4e49\u5b57\u7b26\u524d\u7f00\uff0c\u5176\u4ed6\u7684\u90fd\u89c6\u4e3a\u666e\u901a\u5b57\u7b26\uff0c\u4f8b\u5982\u8fd9\u6837\u4e00\u6761\u6539\u5199\u89c4\u5219 /foo/'$\\\\,\\'' \uff0c\u6539\u5199\u8fc7\u540e\u5bf9\u5e94 /foo/$\\,' \u3002 break \u00b6 \u9664\u4e86\u80fd\u52fe\u9009 break \u9009\u9879 \u6307\u5b9a\u662f\u5426 break \uff0c\u4e5f\u53ef\u4ee5\u76f4\u63a5\u5728\u8fb9\u7f18\u89c4\u5219\u6700\u540e\u52a0\u4e0a $$ \u8868\u793a break \u3002 \u914d\u7f6e\u6307\u5357 \u00b6 \u5728\u8fd9\u4e2a\u7ae0\u8282\uff0c\u6211\u4eec\u4f1a\u4ecb\u7ecd\u5982\u4f55\u6dfb\u52a0\u548c\u7f16\u8f91\u8fb9\u7f18\u89c4\u5219\u96c6\uff0c\u4e3b\u8981\u5927\u7eb2\u5305\u62ec\uff1a \u8ba4\u8bc6\u89c4\u5219\u7ba1\u7406\u754c\u9762 \u89c4\u5219\u4f18\u5148\u7ea7 URI \u5b57\u7b26\u4e32\u63d0\u53d6 \u53d8\u91cf\u4f7f\u7528 \u6267\u884c\u52a8\u4f5c \u89c4\u5219\u6d4b\u8bd5 \u8ba4\u8bc6\u89c4\u5219\u7ba1\u7406\u754c\u9762 \u00b6 \u767b\u9646 CDN \u63a7\u5236\u53f0 \uff0c\u4f9d\u6b21\u8fdb\u5165\uff1a\u670d\u52a1\u7ba1\u7406 > \u529f\u80fd\u914d\u7f6e > \u8fb9\u7f18\u89c4\u5219 > EdgeRules\uff0c\u5373\u53ef\u8fdb\u5165\u8fb9\u7f18\u89c4\u5219\u7ba1\u7406\u754c\u9762\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u5728\u89c4\u5219\u7ba1\u7406\u754c\u9762\uff0c\u9488\u5bf9\u6bcf\u4e00\u6761\u89c4\u5219\uff0c\u63a7\u5236\u53f0\u63d0\u4f9b\u4e86\u5982\u4e0b\u5b57\u6bb5\u4fe1\u606f\uff1a \u5b57\u6bb5 \u63cf\u8ff0 \u4f18\u5148\u7ea7 \u6307\u5b9a\u89c4\u5219\u6267\u884c\u7684\u5148\u540e\u987a\u5e8f \u89c4\u5219\u540d\u79f0 \u8be5\u6761\u89c4\u5219\u7684\u540d\u79f0\uff0c\u65b9\u4fbf\u7ba1\u7406\u6807\u8bc6 break \u89c4\u5219\u547d\u4e2d\u4e4b\u540e\uff0c\u662f\u5426\u8df3\u51fa\u6240\u6709\u7684\u89c4\u5219\u96c6 \u72b6\u6001 \u5305\u62ec\u542f\u7528\u3001\u5173\u95ed\u3001\u6d4b\u8bd5\u4e09\u79cd\u72b6\u6001 \u7f16\u8f91 \u7f16\u8f91\u89c4\u5219 \u5220\u9664 \u5220\u9664\u89c4\u5219 \u66f4\u591a \u5305\u62ec\u542f\u7528\u3001\u5173\u95ed\u3001\u6d4b\u8bd5\u4e09\u4e2a\u9009\u9879 \u89c4\u5219\u4f18\u5148\u7ea7 \u00b6 \u7406\u8bba\u4e0a\uff0c\u6240\u6709\u89c4\u5219\u7684\u4f18\u5148\u7ea7\u662f\u6309\u7167\u5148\u540e\u987a\u5e8f\u6765\u6267\u884c\u7684\uff0c\u4f18\u5148\u7ea7\u8d8a\u9760\u524d\u5219\u4f1a\u88ab\u4f18\u5148\u6267\u884c\uff0c\u8fd9\u4e2a\u4ec5\u9002\u7528\u4e8e\u6dfb\u52a0 HTTP \u5934\u90e8\u3001\u5220\u9664 HTTP \u5934\u90e8\u3001\u8bbf\u95ee\u63a7\u5236\u3001\u8bf7\u6c42\u9650\u901f\u3001\u81ea\u5b9a\u4e49\u9519\u8bef\u9875\u9762\u3001\u8fb9\u7f18\u91cd\u5b9a\u5411\u3002\u9488\u5bf9 URL \u6539\u5199\u52a8\u4f5c\uff0c\u5373\u4f7f URL \u6539\u5199\u7684\u89c4\u5219\u653e\u5728\u524d\u9762\uff0c \u8fd8\u662f\u4f1a\u7b49\u6267\u884c\u5b8c\u5176\u4ed6\u52a8\u4f5c\u4e4b\u540e\uff0c\u624d\u4f1a\u53bb\u6267\u884c URL \u6539\u5199\u52a8\u4f5c\u3002 \u8fd9\u91cc\u6839\u636e\u5177\u4f53\u793a\u4f8b\u8fdb\u884c\u8bf4\u660e\uff0c\u5982\u622a\u56fe\u6240\u793a\uff1a \u7279\u522b\u5730\uff1a\u5f53\u5339\u914d\u7684\u6761\u4ef6\u90fd\u76f8\u540c\u65f6\uff0c\u4f8b\u5982\uff1a\u5f53\u8bf7\u6c42 URI \u90fd\u4e3a /123.mp4 \u65f6\uff0c\u6309\u7167\u4f18\u5148\u7ea7\u987a\u5e8f\u51fa\u73b0\u4e86\u5982\u4e0b 5 \u6761\u89c4\u5219\uff1a \u7b2c 1 \u6761\u89c4\u5219\uff1a\u5f53\u8bf7\u6c42\u7684 URI \u4e3a /123.mp4 \u65f6\uff0c\u6539\u5199\u5230 /beibei.mp4 \u7b2c 2 \u6761\u89c4\u5219\uff1a\u5f53\u8bf7\u6c42\u7684 URI \u4e3a /123.mp4 \u65f6\uff0c\u6dfb\u52a0 HTTP \u54cd\u5e94\u5934 CDN \u7b2c 3 \u6761\u89c4\u5219\uff1a\u5f53\u8bf7\u6c42\u7684 URI \u4e3a /123.mp4 \u65f6\uff0c\u8fb9\u7f18\u91cd\u5b9a\u5411\u5230 https://www.upyun.com/ \u7b2c 4 \u6761\u89c4\u5219\uff1a\u5f53\u8bf7\u6c42\u7684 URI \u4e3a /123.mp4 \u65f6\uff0c\u8fdb\u884c\u8bbf\u95ee\u63a7\u5236\uff0c\u54cd\u5e94 403 \u72b6\u6001\u7801 \u7b2c 5 \u6761\u89c4\u5219\uff1a\u5f53\u8bf7\u6c42\u7684 URI \u4e3a /123.mp4 \u65f6\uff0c\u8fdb\u884c\u8bf7\u6c42\u9650\u901f\uff0c\u9650\u901f\u5230 200KB/s \u3002 \u6309\u7167\u5f53\u524d\u7684\u8bbe\u8ba1\u903b\u8f91\uff0c\u7b2c 1 \u6761\u89c4\u5219\u4e0d\u4f1a\u88ab\u7acb\u9a6c\u6267\u884c\uff0c\u4f1a\u7b49\u5f85\u540e\u9762\u6240\u6709\u7684\u89c4\u5219\u6267\u884c\u5b8c\u6bd5\u4e4b\u540e\uff0c\u624d\u4f1a\u8fdb\u884c URL \u6539\u5199\u7684\u52a8\u4f5c\u3002\u6309\u7167\u89c4\u5219\u4f18\u5148\u7ea7\uff0c\u4f1a\u4f9d\u6b21\u6267\u884c\u7b2c 2 \u6761\u89c4\u5219\uff0c\u7136\u540e\u518d\u6267\u884c\u7b2c 3 \u6761\u89c4\u5219\uff0c\u901a\u8fc7 curl \u53d1\u8d77\u547d\u4ee4\u6d4b\u8bd5\uff0c\u6d4b\u8bd5\u7ed3\u679c\u4e3a\uff1a GET /123.mp4 HTTP/1.1 Host: wuxuejun2018.b0.upaiyun.com User-Agent: curl/7.43.0 Accept: */* HTTP/1.1 302 Moved Temporarily Server: marco/1.10 Date: Wed, 20 Dec 2017 09:28:28 GMT Content-Type: text/html Content-Length: 159 Connection: keep-alive Location: https://www.upyun.com Via: M.ctn-zj-lna3-019 X-Request-Id: 32c1c154c192027be98887ad63c3b08c CDN: UPYUN \u6309\u7167\u6d4b\u8bd5\u7ed3\u679c\uff0c\u4f9d\u6b21\u547d\u4e2d\u4e86\u7b2c 2 \u6761\u548c \u7b2c 3 \u6761\u89c4\u5219\u3002 \u53ef\u4ee5\u770b\u51fa\uff0c\u7b2c 1 \u6761\u3001\u7b2c 4 \u6761\u3001\u7b2c 5 \u6761\u90fd\u6ca1\u6709\u88ab\u6267\u884c\uff0c\u90a3\u662f\u56e0\u4e3a\u7b2c 1 \u6761\u5c5e\u4e8e URL \u6539\u5199\uff0c\u4e0d\u4f1a\u7acb\u9a6c\u6267\u884c\uff1b\u7b2c 3 \u6761\u4e3a\u8fb9\u7f18\u91cd\u5b9a\u5411\uff0c\u76f4\u63a5 302 \u5230 https://www.upyun.com \u4e86\uff0c\u8df3\u51fa\u4e86\u6574\u4e2a\u89c4\u5219\u96c6\uff0c\u4ece\u800c\u63a5\u4e0b\u6765\u7684\u89c4\u5219\u4e0d\u4f1a\u88ab\u6267\u884c\uff0c\u5305\u62ec URL \u6539\u5199\u3002 \u7279\u522b\u6ce8\u610f\u7684\u662f\uff0c\u7c7b\u4f3c\u8fb9\u7f18\u91cd\u5b9a\u5411\u8fd9\u7c7b\u76f4\u63a5\u8df3\u51fa\u6240\u6709\u89c4\u5219\u96c6\u7684\u884c\u4e3a\uff0c\u8fd8\u5305\u62ec\uff1a \u81ea\u5b9a\u4e49\u9519\u8bef\u9875\u9762 \u8bbf\u95ee\u63a7\u5236 \u4e5f\u5c31\u662f\u8bf4\uff0c\u5f53\u6267\u884c\u5b8c\u8fb9\u7f18\u91cd\u5b9a\u5411\u3001\u81ea\u5b9a\u4e49\u9519\u8bef\u9875\u9762\u3001\u8bbf\u95ee\u63a7\u5236\u7b49\u52a8\u4f5c\u4e4b\u540e\uff0c\u4f1a\u76f4\u63a5\u8df3\u51fa\u6574\u4e2a\u89c4\u5219\u96c6\uff0c\u4e0d\u4f1a\u6267\u884c\u63a5\u4e0b\u6765\u7684\u5339\u914d\u52a8\u4f5c\u3002 URI \u5b57\u7b26\u4e32\u63d0\u53d6 \u00b6 \u6240\u8c13 URI \u5b57\u7b26\u4e32\u63d0\u53d6\uff0c\u4e5f\u5373\u5728\u6267\u884c\u8fb9\u7f18\u91cd\u5b9a\u5411\u4ee5\u53ca URL \u6539\u5199\u52a8\u4f5c\u65f6\uff0c\u6839\u636e\u4e1a\u52a1\u9700\u6c42\uff0c\u53ef\u80fd\u4f1a\u63d0\u53d6\u539f\u59cb\u8bf7\u6c42 URI \u4e2d\u7684\u5b57\u7b26\u4e32\u3002\u5176\u4e2d URI \u5b57\u7b26\u4e32\u63d0\u53d6\u652f\u6301 PCRE \u6b63\u5219\u8868\u8fbe\u5f0f\uff0c\u5339\u914d\u540e\uff0c\u4ea7\u751f $1 , $2 ... \u8fd9\u6837\u7684\u53d8\u91cf\u3002 URI \u5b57\u7b26\u4e32\u63d0\u53d6\u6b63\u5219\u8868\u8fbe\u5f0f\uff1a ^/pay/([0-9]+)/([0-9]+)/(.*?).html$ \u6839\u636e\u4ee5\u4e0a\u7684 PCRE \u6b63\u5219\u8868\u8fbe\u5f0f\uff0c\u5206\u522b\u4f1a\u4ea7\u751f 3 \u4e2a \u5b57\u7b26\u4e32\uff0c\u4e3a $1 \u3001 $2 \u3001 $3 \u3002\u5206\u522b\u5bf9\u5e94\u4e86\u4ee5\u4e0a\u6b63\u5219\u8868\u8fbe\u5f0f\u91cc\u9762\u7684\u4ece\u5de6\u5230\u53f3 () \u91cc\u9762\u7684\u5b57\u7b26\u4e32\u3002 URL \u6539\u5199\u89c4\u5219\uff1a /pay.php?payid=$1&categoryid=$2 \u914d\u7f6e\u622a\u56fe\u53ef\u53c2\u8003\uff1a 1\uff09\u901a\u7528\u6a21\u5f0f 2\uff09\u7f16\u7a0b\u6a21\u5f0f \u901a\u8fc7\u6267\u884c\u4ee5\u4e0a\u89c4\u5219\u4e4b\u540e\uff0c\u539f\u59cb\u8bf7\u6c42\u548c\u6539\u5199\u540e\u7684\u5730\u5740\u5206\u522b\u5982\u4e0b\uff1a \u539f\u59cb\u8bf7\u6c42\uff1a http://example.com/pay/25/8/... \u6539\u5199\u540e\u5730\u5740\uff1a http://example.com/pay.php?payid=25&categoryid=8... \u53d8\u91cf\u4f7f\u7528 \u00b6 \u5728\u8fdb\u884c URL \u6539\u5199\u548c\u8fb9\u7f18\u91cd\u5b9a\u5411\u52a8\u4f5c\u65f6\uff0c\u9664\u4e86\u53ef\u4ee5\u63d0\u53d6 URI \u4e2d\u7684 \u5b57\u7b26\u4e32\uff0c\u60a8\u8fd8\u53ef\u4ee5\u83b7\u53d6\u539f\u59cb\u8bf7\u6c42\u4e2d\u7684\u53d8\u91cf\u3002\u8fd9\u4e9b\u53d8\u91cf\u5305\u62ec\uff1a \u53d8\u91cf \u542b\u4e49 $_IP \u5ba2\u6237\u7aef IP $_HOST \u8bf7\u6c42\u5934\u4e2d\u7684 Host \u5b57\u6bb5 $_HOST_n $_HOST_n \u6307 Host \u4e2d\u7684\u7b2c n \u4e2a\u5b50\u57df\uff0c\u4f8b\u5982\u5bf9\u4e8e foo.bar.baz.com\uff1a $_HOST_1 = foo\uff0c$_HOST_2 = bar\uff0c$_HOST_3 = baz $_GET_name \u4f7f\u7528 Query String \u4e2d\u7684\u53d8\u91cf\uff08\u65e0\u9700 urldecode\uff09 $_POST_name \u4f7f\u7528 POST \u8868\u5355\u4e2d\u7684\u53d8\u91cf\uff08\u53ea\u652f\u6301 www form \uff09 $_HEADER_name \u4f7f\u7528 Header \u4e2d\u7684\u503c\uff0c\u6ce8\u610f name \u5168\u4e3a\u5c0f\u5199 $_COOKIE_name \u4f7f\u7528 Cookie \u4e2d\u7684\u5b57\u6bb5\u503c $_RANDOM \u968f\u673a\u5b57\u7b26\u4e32\uff0c\u5b57\u7b26\u96c6\u4e3a [a-zA-Z0-9] \uff0c\u9ed8\u8ba4 8 \u4f4d $_RANDOM_n n \u4f4d\u968f\u673a\u5b57\u7b26\u4e32\uff0c\u5176\u4e2d 1 <= n <= 32 $_URI \u8bf7\u6c42\u7684 URI\uff0c\u4e0d\u5305\u542b\u53c2\u6570 $_QUERY Query String\uff0c\u4e0d\u5e26\u524d\u7f00 '?' $_METHOD GET/POST/PUT/POST/DELETE/OPTIONS/PATCH $_SCHEME http/https\uff0c\u6ce8\u610f\u6b64\u5904\u5168\u4e3a\u5c0f\u5199 $_TIME \u83b7\u53d6\u5f53\u524d\u670d\u52a1\u5668\u65f6\u95f4\uff0c\u683c\u5f0f\u4e3a UNIX TIME $_BODY \u83b7\u53d6\u5f53\u524d\u8bf7\u6c42\u7684 BODY\uff08\u8bf7\u6c42\u4f53\uff09\u5185\u5bb9\uff0c\u5927\u5c0f\u9650\u5236\u4e3a 16KB $_GEOIP_COUNTRY_CODE \u56fd\u5bb6\u4ee3\u7801\uff0c\u53ef\u53c2\u7167\u7ef4\u57fa\u767e\u79d1\uff1a https://en.wikipedia.org/wiki/ISO_3166-2 \u4e3a\u4e86\u66f4\u52a0\u65b9\u4fbf\u7406\u89e3\uff0c\u4e0b\u9762\u5c06\u901a\u8fc7\u4e00\u4e2a\u5e94\u7528\u793a\u4f8b\u6765\u5c55\u5f00\u4ecb\u7ecd\uff1a \u793a\u4f8b\uff1aURL \u6539\u5199 \u4f8b\u5982\uff1a\u67d0\u4e2a URL \u4e3a https://www.example.com/index.htm \u9700\u6c42\uff1a\u5e0c\u671b\u901a\u8fc7 URL \u6539\u5199\u52a8\u4f5c\uff0c\u5c06\u5ba2\u6237\u7aef IP (\u8fd9\u91cc\u4ee5 192.168.1.1 \u4e3a\u4f8b) \u4ee5\u53ca\u8bf7\u6c42\u65b9\u6cd5\uff08\u5b9e\u9645\u7684\u8bf7\u6c42\u65b9\u6cd5\u4e3a GET\uff09\u901a\u8fc7\u67e5\u8be2\u5b57\u7b26\u4e32\u4f20\u9012\u5230\u6e90\u7ad9\u540e\u7aef\uff1b \u6539\u5199\u89c4\u5219\u53ef\u4ee5\u4e3a\uff1a /index.php?ip=$_IP&method=$_METHOD \u5219\u6539\u5199\u540e\u7684\u5b8c\u6574 URL \u4e3a\uff1a https://example.com/index.php?ip=192.168.1.1&method=GET \u914d\u7f6e\u622a\u56fe\u53ef\u53c2\u8003(\u901a\u7528\u6a21\u5f0f): \u6267\u884c\u52a8\u4f5c \u00b6 \u6dfb\u52a0 HTTP \u5934\u90e8 \u901a\u8fc7\u4f7f\u7528\u8fb9\u7f18\u89c4\u5219\u7684\u3010\u6dfb\u52a0 HTTP \u54cd\u5e94\u5934\u90e8\u3011\u529f\u80fd\uff0c\u5f53\u60a8\u7684\u7528\u6237\u8bf7\u6c42\u4e1a\u52a1\u8d44\u6e90\u65f6\uff0c\u53ef\u4ee5\u5728\u8fd4\u56de\u7684\u3010\u54cd\u5e94\u6d88\u606f\u3011\u4e2d\u6dfb\u52a0\u60a8\u914d\u7f6e\u7684\u5934\u90e8\uff0c\u8fd9\u4e9b\u5934\u90e8\u53ef\u80fd\u5305\u62ec\uff1a Cache-Control Content-Disposition Content-Language Access-Control-Allow-Origin Content-Type \u5f53\u7136\uff0c\u60a8\u4e5f\u53ef\u4ee5\u6839\u636e\u4e1a\u52a1\u8981\u6c42\uff0c\u81ea\u5b9a\u4e49\u54cd\u5e94\u5b57\u6bb5\u3002\u4f8b\u5982\uff1aCDN\uff1aUPYUN \u5177\u4f53\u4f7f\u7528\u622a\u56fe\u5982\u4e0b\u622a\u56fe\u6240\u793a\uff1a 1\uff09\u901a\u7528\u6a21\u5f0f 2\uff09\u7f16\u7a0b\u6a21\u5f0f \u4ece\u622a\u56fe\u53ef\u4ee5\u770b\u51fa\uff0c\u6dfb\u52a0 HTTP \u5934\u90e8\uff0c\u60a8\u9700\u8981\u5206\u522b\u586b\u5199\uff1a Header \u57df\u540d\uff1aAccess-Control-Allow-Origin Header \u57df\u503c\uff1a* \u53e6\u5916\uff0c\u6709\u3010\u8986\u76d6\u539f\u6709\u54cd\u5e94\u5934\u3011\u7684\u914d\u7f6e\uff0c\u9ed8\u8ba4\u4e3a\u5426\uff0c\u53ef\u4ee5\u6839\u636e\u5177\u4f53\u60c5\u51b5\u6765\u52fe\u9009\u3002\u5f53\u52fe\u9009\u65f6\uff0c\u4f1a\u8986\u76d6\u6389\u539f\u59cb\u7684\u54cd\u5e94\u5934\u4fe1\u606f\u3002 \u5220\u9664 HTTP \u5934\u90e8 \u901a\u8fc7\u4f7f\u7528\u8fb9\u7f18\u89c4\u5219\u7684\u3010\u5220\u9664 HTTP \u54cd\u5e94\u5934\u3011\u529f\u80fd\uff0c\u60a8\u53ef\u4ee5\u5220\u9664\u6389\u4e0d\u5fc5\u8981\u7684\u54cd\u5e94\u5b57\u6bb5\u3002\u5982\u9690\u85cf\u6389\u4e00\u4e9b\u5e76\u4e0d\u5b89\u5168\u7684\u54cd\u5e94\u5934\u90e8\u4fe1\u606f\u3002\u4f8b\u5982\uff1a X-Powered-By \u5177\u4f53\u914d\u7f6e\u53c2\u89c1\u5982\u4e0b\u622a\u56fe\u6240\u793a\uff1a \u6ce8\u610f\u4e8b\u9879\uff1a\u53c8\u62cd\u4e91 CDN \u5185\u90e8\u4e0d\u80fd\u5220\u9664\u7684\u54cd\u5e94\u5934\u5305\u62ec\uff1a Via Age Server connection X-cache x-source X-request-id Content-range Content-length Transfer-encoding \u8fb9\u7f18\u91cd\u5b9a\u5411 \u901a\u8fc7\u4f7f\u7528\u8fb9\u7f18\u89c4\u5219\u7684\u3010\u8fb9\u7f18\u91cd\u5b9a\u5411\u3011\u529f\u80fd\uff0c\u5f53\u5339\u914d\u5230\u6761\u4ef6\u65f6\uff0cCDN \u4f1a\u54cd\u5e94\u4e00\u4e2a 301/302 \u8bf7\u6c42\u7ed9\u5ba2\u6237\u7aef\uff0c\u91cd\u5b9a\u5411\u72b6\u6001\u7801\u652f\u6301 301 \u548c 302\u3002 \u5177\u4f53\u7684\u914d\u7f6e\u53ef\u53c2\u7167\u5982\u622a\u56fe\u6240\u793a\uff1a \u5f53\u6761\u4ef6\u6ee1\u8db3\uff1a\u8bf7\u6c42 HOST \u4e3a XXX \u5e76\u4e14\u5ba2\u6237\u7aef User-Agent \u6b63\u5219\u5339\u914d XXX \u65f6\uff0c\u5219\u6267\u884c\u91cd\u5b9a\u5411\u52a8\u4f5c\uff0c301 \u91cd\u5b9a\u5411\u5230\uff1a https://test.com/$1/123.html \u81ea\u5b9a\u4e49\u9519\u8bef\u9875\u9762 \u901a\u8fc7\u4f7f\u7528\u8fb9\u7f18\u89c4\u5219\u7684\u3010\u81ea\u52a8\u9519\u8bef\u9875\u9762\u3011\u529f\u80fd\u3002\u4f7f\u7528\u81ea\u5b9a\u4e49\u6e90\u7ad9\u9519\u8bef\u9875\u9762\uff0c\u800c\u975e CDN \u9ed8\u8ba4\u6307\u5b9a\u7684\u9519\u8bef\u9875\u9762\u3002\u5f53\u524d\u652f\u6301\u7684\u6e90\u7ad9\u9519\u8bef\u4fe1\u606f\u72b6\u6001\u7801\u5305\u62ec\uff1a 404 500 501 502 503 504 \u8fd9\u91cc\u4ee5 404 \u9519\u8bef\u9875\u9762\u4e3a\u4f8b\uff0c\u5f53\u6e90\u7ad9\u54cd\u5e94 404 \u72b6\u6001\u7801\u65f6\uff0c\u5219 302 \u91cd\u5b9a\u5411\u5230\u6307\u5b9a 404 \u9875\u9762\u3002\u5177\u4f53\u7684\u914d\u7f6e\u53ef\u53c2\u7167\u5982\u622a\u56fe\u6240\u793a\uff1a URL \u6539\u5199 \u914d\u5408\u7f51\u7ad9\u5c06\u52a8\u6001 URL \u8f6c\u6362\u4e3a\u8bed\u4e49 URL\uff0c\u6539\u5584\u641c\u7d22\u5f15\u64ce\u7d22\u5f15\u673a\u5236\uff0c\u63d0\u9ad8\u7f51\u7ad9 SEO \u6392\u540d\u3002\u5c06\u539f\u59cb\u8bf7\u6c42 http://www.example.com/pay/25/8/... \u8fdb\u884c URL \u6539\u5199\u3002 \u76f8\u5173\u914d\u7f6e\u5982\u622a\u56fe\u6240\u793a\uff1a \u8bf7\u6c42\u9650\u901f \u901a\u8fc7\u4f7f\u7528\u8fb9\u7f18\u89c4\u5219\u7684\u3010\u8bf7\u6c42\u9650\u901f\u3011\u529f\u80fd\uff0c\u5728\u4e0d\u5f71\u54cd\u7ec8\u7aef\u7528\u6237\u4f53\u9a8c\u7684\u60c5\u51b5\u4e0b\uff0c\u5c06\u8bf7\u6c42\u901f\u5ea6\u63a7\u5236\u5728\u5408\u7406\u8303\u56f4\u4e4b\u5185\uff0c\u8282\u7701 CDN \u5e26\u5bbd\u3002 \u5177\u4f53\u914d\u7f6e\u5982\u622a\u56fe\u6240\u793a\uff1a \u89c4\u5219\u91ca\u4e49\uff1a\u5f00\u59cb 20MB \u4e0d\u9650\u901f\uff0c\u540e\u9762\u9650\u5236\u5230 800KB/s \u3002 \u8bbf\u95ee\u63a7\u5236 \u7075\u6d3b\u9488\u5bf9\u8bf7\u6c42\u5185\u5bb9\u8fdb\u884c\u8bbf\u95ee\u63a7\u5236\uff0c\u53ef\u4ee5\u54cd\u5e94 403/404 \u72b6\u6001\u7801\u3002\u8fd9\u91cc\u9488\u5bf9 User-Agent \u8fdb\u884c\u8fc7\u6ee4\uff0c\u6bd4\u5982\uff1a\u6765\u81ea\u641c\u72d7\u7b49\u722c\u866b\u7684\u8bf7\u6c42\u76f4\u63a5\u54cd\u5e94 403 \u72b6\u6001\u7801\u3002\u5177\u4f53\u7684\u914d\u7f6e\u5982\u622a\u56fe\u6240\u793a\uff1a \u89c4\u5219\u6d4b\u8bd5 \u00b6 \u7531\u4e8e\u8fb9\u7f18\u89c4\u5219\u7684 URL \u6539\u5199\u3001\u8fb9\u7f18\u91cd\u5b9a\u5411\u3001\u8bbf\u95ee\u63a7\u5236\u7b49\u52a8\u4f5c\u662f\u6709\u526f\u4f5c\u7528\u7684\uff0c\u4e3a\u4e86\u5b89\u5168\u8d77\u89c1\uff0c \u6bcf\u4e00\u6761\u89c4\u5219\u9ed8\u8ba4\u90fd\u5728\u6d4b\u8bd5\u72b6\u6001\u4e0b\u3002\u6d4b\u8bd5\u72b6\u6001\u4e0b\uff0c\u5e73\u53f0\u4f1a\u81ea\u52a8\u83b7\u53d6\u5ba2\u6237\u7aef\u672c\u5730 IP \u5730\u5740\uff0c\u4e5f\u5373\u89c4\u5219\u4ec5\u9488\u5bf9\u8be5 IP \u5730\u5740\u751f\u6548\u3002\u60a8\u4e5f\u53ef\u4ee5\u66f4\u6362\u5176\u4ed6 IP \u5730\u5740\u8fdb\u884c\u6d4b\u8bd5\u3002\u5177\u4f53\u7684\u914d\u7f6e\u622a\u56fe\u5982\u56fe\u6240\u793a\uff1a \u7f16\u7a0b\u6a21\u5f0f\uff08\u6848\u4f8b\uff09 \u00b6 1\u3001\u81ea\u5b9a\u4e49\u9632\u76d7\u94fe \u00b6 \u9700\u6c42\u63cf\u8ff0\uff1a\u5c06\u8bf7\u6c42 URL \u6309\u7167\u4e00\u5b9a\u7684\u7b97\u6cd5\u89c4\u5219\u5b9e\u73b0 token \u9632\u76d7\u94fe\uff0c\u4f7f\u7528\u8fb9\u7f18\u89c4\u5219\u6765\u5b9e\u73b0\uff0c\u4f1a\u66f4\u52a0\u7075\u6d3b\u548c\u9ad8\u6548\u3002token \u9632\u76d7\u94fe\u8be6\u89e3\u8bf7\u53c2\u89c1\uff1a https://blog.upyun.com/?p=1177 \u8bf7\u6c42 URL \u793a\u4f8b\uff1a /test.ts?key=68ddbe535557d6630a19cebde0cb9252&t=1481106349 \u4ee5\u4e0a\u8bf7\u6c42 URL \u662f\u6309\u7167\u5982\u4e0b\u7b97\u6cd5\u751f\u6210\u7684\uff0c\u53c2\u89c1\u5982\u4e0b\u7b97\u6cd5\u8bf4\u660e\uff1a <?php $etime = time() + 600; // \u6388\u6743 10 \u5206\u949f\u540e\u8fc7\u671f $key = 'abc'; // token \u9632\u76d7\u94fe\u5bc6\u94a5 $path = '/test.ts'; // \u6587\u4ef6\u76f8\u5bf9\u8def\u5f84 $url = $path.'?key='.md5($key.$etime.$path).'&t='.$etime; echo $url; ?> CDN \u8282\u70b9\u9700\u8981\u8fdb\u884c\u4e24\u5c42\u5224\u65ad\uff0c\u4e00\u5c42\u5c31\u662f\u5bf9\u65f6\u95f4\u6233\u8fdb\u884c\u6bd4\u8f83\uff0c\u53e6\u5916\u4e00\u5c42\u5c31\u662f\u6309\u7167\u7ea6\u5b9a\u7684\u89c4\u5219\u751f\u6210\u9a8c\u8bc1\u4fe1\u606f\u5e76\u8fdb\u884c\u6bd4\u8f83\uff0c\u770b\u662f\u5426\u4e00\u81f4\u3002\u6309\u7167\u8981\u6c42\uff0c\u53ef\u7f16\u5199\u5982\u4e0b\u89c4\u5219\u96c6\u6765\u5b9e\u73b0\u4ee5\u4e0a\u8981\u6c42\uff1a rules: { \"rule\": \"$WHEN($MATCH($_URI, '.ts$'),$OR($NOT($_GET_t),$NOT($_GET_key)))$EXIT(403)\", \"pattern\": \"\" }, { \"rule\": \"$WHEN($MATCH($_URI, '.ts$'),$GT($_TIME, $_GET_t))$EXIT(401)\", \"pattern\": \"\" }, { \"rule\": \"$WHEN($MATCH($_URI, '.ts$'),$NOT($EQ($MD5('abc'$_GET_t$_URI),$LOWER($_GET_key))))$EXIT(403)\", \"pattern\": \"\" } \u89c4\u5219\u91ca\u4e49\uff1a \u7b2c\u4e00\u6761\uff1a\u5f53\u6587\u4ef6\u540e\u7f00\u4e3a ts \u65f6\uff0c\u5224\u65ad\u8bf7\u6c42 URL \u91cc\u9762\u662f\u5426\u5b58\u5728 t \u548c key \u53c2\u6570\uff0c\u5982\u679c\u5176\u4e2d\u4e00\u4e2a\u4e0d\u5b58\u5728\uff0c\u5219\u8fd4\u56de 403\uff1b \u7b2c\u4e8c\u6761\uff1a\u5f53\u6587\u4ef6\u540e\u7f00\u4e3a ts \u65f6\uff0c\u5224\u65ad\u5f53\u524d CDN \u8282\u70b9 UNIX \u65f6\u95f4\u662f\u5426\u5927\u4e8e\u8bf7\u6c42\u53c2\u6570\u91cc\u9762\u7684\u65f6\u95f4\u6233\uff08\u4e5f\u5373\u53c2\u6570 t \u7684\u503c\uff09\uff0c\u5426\u5219\u8fd4\u56de 401\uff1b \u7b2c\u4e09\u6761\uff1a\u5f53\u6587\u4ef6\u540e\u7f00\u4e3a ts \u65f6\uff0cCDN \u8282\u70b9\u6309\u7167\u7ea6\u5b9a\u7684\u7b97\u6cd5\u89c4\u5219\u751f\u6210\u9a8c\u8bc1\u4fe1\u606f\uff08\u4e5f\u5373 MD5 \u503c\uff09\uff0c\u5224\u65ad\u751f\u6210\u7684 MD5 \u503c\u548c\u8bf7\u6c42\u53c2\u6570 key \u7684\u503c\u662f\u5426\u4e00\u81f4\uff0c\u4e0d\u4e00\u81f4\u5219\u8fd4\u56de 403\uff1b 2\u3001\u8fb9\u7f18\u91cd\u5b9a\u5411 \u00b6 \u793a\u4f8b\u4e00\uff1a\u5339\u914d cookie \u8fdb\u884c\u8df3\u8f6c \"rule\": \"$WHEN($NOT($EQ($_URI, /live.html)), $NOT($_COOKIE_token))$REDIRECT(http://test.example.com/no_token.html,301)\", \"pattern\": \"\" \u89c4\u5219\u91ca\u4e49\uff1a\u9996\u5148\u5339\u914d\u8bf7\u6c42 URI \u662f\u5426\u4e3a /live.html ,\u5f53 cookie \u4e2d token \u503c\u4e3a\u7a7a\u65f6\uff0c\u5219\u8df3\u8f6c\u5230\u6307\u5b9a\u5230\u5730\u5740 http://test.example.com/no_token.html \u3002 3\u3001URL \u6539\u5199 \u00b6 \u793a\u4f8b\u4e00\uff1a\u76ee\u5f55\u53ca\u53c2\u6570\u6539\u5199 \u5c06\u8bf7\u6c42 URL \u8f6c\u6362\u4e3a\u5e26\u53c2\u6570\u7684\u52a8\u6001 URL\uff0c\u4f8b\u5982\u8bf7\u6c42\u7684 URL \u4e3a\uff1a http://example.com/pay/25/8/... \u9700\u8981 CDN \u8fb9\u7f18\u8282\u70b9\u8f6c\u6362\u4e3a\u5982\u4e0b\u8bf7\u6c42\uff1a http://example.com/pay.php?payid=25&categoryid=8... \u8fd9\u4e2a\u65f6\u5019\uff0c pattern \u90e8\u5206\u9700\u8981\u63d0\u53d6\u76ee\u5f55\u6570\u5b57\uff0c\u9700\u8981\u751f\u6210 $1 \u548c $2 \u8fd9\u6837\u7684\u53d8\u91cf\uff0c\u5982\u4e0b\u89c4\u5219\u6240\u793a\uff1a \"rule\": \"/pay.php?productid=$1&categoryid=$2\", \"pattern\": \"^pay/([0-9]+)/([0-9]+)/(.*?).html$\" \u89c4\u5219\u91ca\u4e49\uff1a\u5f53\u89e3\u6790\u7684 url \u7b26\u5408\u89c4\u5219 ^pay/([0-9]+)/([0-9]+)/(.*?).html$ \uff0c\u90a3\u4e48\u5c06\u8bf7\u6c42\u5bfc\u5411\u5230 /pay.php?productid=$1&categoryid=$2 \u3002 \u4e5f\u5373\u5c06 http://example.com/pay/25/8/... \u8f6c\u6362\u4e3a http://example.com/pay.php?payid=25&categoryid=8... \u793a\u4f8b\u4e8c\uff1a\u6587\u4ef6\u540d\u6539\u5199 pattern: /(.*)/playlist\\.m3u8$ rule: /$1'.m3u8' \u89c4\u5219\u91ca\u4e49\uff1a\u5f53\u8bbf\u95ee\u5730\u5740\u4e3a http://domain/app/stream/playlist.m3u8 \u65f6\uff0c\u5c06\u8bbf\u95ee\u5730\u5740\u6539\u5199\u4e3a http://domain/app/stream.m3u8 \u3002 \u5e94\u7528\u573a\u666f\uff1a\u5728\u76f4\u64ad\u5e94\u7528\u573a\u666f\u4e2d\uff0c\u56e0\u4e3a\u5ba2\u6237\u7aef\u673a\u5236\u65e0\u6cd5\u6216\u8005\u4e0d\u65b9\u4fbf\u5347\u7ea7\u7684\u60c5\u51b5\uff0c\u53ef\u4ee5\u901a\u8fc7 URL \u6539\u5199\uff0c\u5c06 /stream/playlist.m3u8 \u6539\u4e3a /stream.m3u8 \uff0c\u5176\u4e2d app \u4ee3\u8868\u53d1\u5e03\u70b9\uff0c stream \u4ee3\u8868\u6d41\u540d\u3002 4\u3001\u8bf7\u6c42/\u54cd\u5e94\u5934\u4fee\u6539 \u00b6 \u793a\u4f8b\u4e00\uff1a\u6dfb\u52a0\u3001\u5220\u9664\u8bf7\u6c42\u5934 \"rule\": \"$ADD_REQ_HEADER(X-From-Cdn, upyun)\", \"pattern\": \"\" \u89c4\u5219\u91ca\u4e49\uff1a\u6dfb\u52a0\u8bf7\u6c42\u5934 X-From-Cdn:upyun \uff0c\u8bc6\u522b CDN \u5382\u5546\u3002 \"rule\": \"$DEL_REQ_HEADER(Accept-Encoding) \", \"pattern\": \"\" \u89c4\u5219\u91ca\u4e49\uff1a\u5220\u9664\u8bf7\u6c42\u5934 Accept-Encoding \uff0c\u65e0\u8bba\u7ec8\u7aef\u662f\u5426\u53d1\u8d77 gzip \u7684\u8bf7\u6c42\uff0c\u90fd\u8fdb\u884c ungzip \u7684\u8fd4\u56de\u3002 \u793a\u4f8b\u4e8c\uff1a\u6dfb\u52a0\u54cd\u5e94\u5934 \"rule\": \"$ADD_RSP_HEADER(CDN, UPYUN, 1) \", \"pattern\": \"\" \u89c4\u5219\u91ca\u4e49\uff1a\u6dfb\u52a0\u54cd\u5e94\u5934 CDN \u4e3a UPYUN , 1 \u8868\u793a\u4f1a\u8986\u76d6\u6389\u5df2\u6709\u7684\u54cd\u5e94\u5934\uff0c\u901a\u8fc7\u54cd\u5e94\u5934\u4e5f\u53ef\u4ee5\u8bc6\u522b CDN \u5382\u5546\u3002 5\u3001URL \u9650\u901f \u00b6 \u5047\u5982\u8bf7\u6c42\u7684 URL \u4e3a\uff1a http://test.example.com/mp4/4E10F356C0FEAD359C33DC5901307461-10.mp4 \uff0c\u9700\u8981\u5bf9\u8be5\u7c7b\u578b\u6587\u4ef6\u8fdb\u884c\u9650\u901f\uff0c\u9650\u901f\u8981\u6c42\u4e3a\uff1a\u524d 20MB \u4e0d\u9650\u901f\uff0c20MB \u4e4b\u540e\u9650\u901f 800 KB/s\uff0c\u89c4\u5219\u53ef\u8fd9\u6837\u7f16\u5199\uff1a \"rule\": \"$WHEN($1, $EQ($_HOST, 'test.example.com'))$LIMIT_RATE_AFTER(20, m)$LIMIT_RATE(800, k)\", \"pattern\": \"^(/).+-10\\.mp4$\" \u89c4\u5219\u91ca\u4e49\uff1a\u5f53 $1 \u4e3a\u771f\uff0c\u4e14\u6ee1\u8db3\u8bf7\u6c42 HOST \u4e3a test.example.com \u65f6 \uff0c\u5f00\u59cb 20MB \u4e0d\u9650\u901f\uff0c\u540e\u9762\u9650\u5236\u5230 800KB/s \u3002 6\u3001\u5927\u5c0f\u5199\u8f6c\u6362 \u00b6 \u8be5\u90e8\u5206\u4f1a\u4f7f\u7528\u5230 $LOWER(E) \u51fd\u6570\uff0c\u76f4\u63a5\u770b\u89c4\u5219\uff1a \"rule\": \"$WHEN($MATCH($LOWER($_URI), /uptest.png)) /UPtest.png\", \"pattern\": \"\" \u89c4\u5219\u91ca\u4e49\uff1a\u9996\u5148\u662f\u83b7\u53d6\u8bf7\u6c42 URI \uff0c\u4f7f\u7528 $LOWER(E) \u51fd\u6570\u5c06 URI \u8f6c\u6362\u4e3a\u5c0f\u5199\uff0c\u548c /uptest.png \u8fdb\u884c\u5339\u914d\uff0c\u5339\u914d\u6210\u529f\uff0c\u5219\u76f4\u63a5\u5c06 URI \u6539\u5199\u4e3a /UPtest.png \u3002\u5982\u679c\u9700\u8981\u5c06\u5b57\u7b26\u4e32\u8f6c\u6362\u4e3a\u5927\u5199\uff0c\u4f7f\u7528 $UPPER(E) \u51fd\u6570\u3002 7\u3001\u6570\u503c\u6bd4\u8f83 \u00b6 \u4e5f\u5373\u5c06\u5b57\u7b26\u4e32\u6216\u8005\u6570\u5b57\u8fdb\u884c\u6bd4\u8f83\u3002\u4f8b\u5982\uff1a A \u548c B \u8fdb\u884c\u6bd4\u8f83\uff0c\u662f\u5426\u5927\u4e8e\u3001\u5927\u4e8e\u7b49\u4e8e\u3001\u76f8\u7b49\u7b49\u903b\u8f91\uff0c\u53c2\u89c1\u5982\u4e0b\u89c4\u5219\u793a\u4f8b\uff1a \"rule\": \"$GT($_TIME,$ADD($INT($_GET_t,16,10),3600))\", \"pattern\": \"\" \u89c4\u5219\u91ca\u4e49\uff1a\u5c06\u8bf7\u6c42 URL \u4e2d\u7684 t \u53c2\u6570 \u7531 16 \u8fdb\u5236\u8f6c\u6362\u4e3a 10 \u8fdb\u5236\uff0c\u7136\u540e\u52a0\u4e0a 3600 \uff0c\u5c06\u76f8\u52a0\u5f97\u5230\u7684\u503c\u548c\u5f53\u524d\u7cfb\u7edf\u65f6\u95f4\u8fdb\u884c\u6bd4\u8f83\u3002\u8fd9\u91cc\u4f7f\u7528\u5230\u4e86 $GT(E1\uff0cE2\uff09 \u51fd\u6570\uff0c\u4e5f\u5373 E1 \u662f\u5426\u5927\u4e8e E2 \uff0c\u5927\u4e8e\u5373\u8fd4\u56de true \u3002\u53e6\u5916\uff0c\u7b49\u4e8e\u4f7f\u7528 $EQ(E1\uff0cE2\uff09 \u51fd\u6570\uff0c\u5927\u4e8e\u7b49\u4e8e\u4f7f\u7528 $GE(E1\uff0cE2\uff09 \u51fd\u6570\u3002 \u5982\u6709\u7591\u95ee\u8bf7 \u8054\u7cfb\u6211\u4eec","title":"\u8fb9\u7f18\u89c4\u5219"},{"location":"cdn/edgerules/#_1","text":"\u53c8\u62cd\u4e91 CDN \u8fb9\u7f18\u7f51\u7edc\u4e2d\u7684\u667a\u80fd\u53ef\u6269\u5c55\u5e94\u7528\u7a0b\u5e8f\u89c4\u5219\u53ef\u4ee5\u5e2e\u52a9\u60a8\u7b80\u5316\u5185\u5bb9\u5206\u53d1\u4e1a\u52a1\u903b\u8f91\uff0c\u5e76\u63d0\u5347\u7ec8\u7aef\u7528\u6237\u8bbf\u95ee\u4f53\u9a8c\u3002\u8be5\u89c4\u5219\u53ef\u4ee5\u5feb\u901f\u90e8\u7f72\u4e14\u914d\u7f6e\u7b80\u5355\uff0c\u53ef\u6781\u5927\u964d\u4f4e\u4e1a\u52a1\u5b9e\u73b0\u6210\u672c\u3002\u7f51\u7ad9\u53ca Web \u5e94\u7528\u5f00\u53d1\u8005\u6216\u8005\u5b89\u5168\u5de5\u7a0b\u5e08\u53ef\u4ee5\u5feb\u901f\u521b\u5efa\u8fb9\u7f18\u89c4\u5219\u96c6\u6765\u63d0\u5347\u7f51\u7ad9\u5b89\u5168\u53ca\u5206\u53d1\u6027\u80fd\u3002\u4f8b\u5982\uff0c\u8fd9\u4e9b\u573a\u666f\u53ef\u80fd\u5305\u62ec\uff1a \u901a\u8fc7 URL \u6539\u5199\uff0c\u53ef\u7f8e\u5316\u7f51\u7ad9 URL\uff0c\u63d0\u5347\u7f51\u7ad9 SEO \u4e3a\u4e86\u8282\u7701\u66f4\u591a\u8bbf\u95ee\u5e26\u5bbd\uff0c\u9650\u5236\u7f51\u7ad9\u8bf7\u6c42\u4e0b\u8f7d\u901f\u5ea6 \u63a7\u5236\u8bf7\u6c42 URL \u7684\u7ed3\u6784\u3001HTTP \u5934\u57df\u7b49 \u81ea\u5b9a\u4e49\u6e90\u7ad9\u9519\u8bef\u9875\u9762\uff0c\u63d0\u5347\u7ec8\u7aef\u7528\u6237\u4f53\u9a8c \u9650\u5236\u7279\u5b9a\u5ba2\u6237\u7aef\u7684\u8bbf\u95ee\u884c\u4e3a\uff0c\u5408\u7406\u8fdb\u884c\u8bbf\u95ee\u63a7\u5236\uff1b \u60a8\u53ef\u4ee5\u6839\u636e\u5b9e\u9645\u4f7f\u7528\u573a\u666f\uff0c\u5408\u7406\u9009\u62e9\u529f\u80fd\u9879\u3002","title":"\u529f\u80fd\u6982\u8ff0"},{"location":"cdn/edgerules/#_2","text":"EdgeRules \u6839\u636e\u4e0d\u540c\u7528\u6237\u80cc\u666f\u5212\u5206\u4e86\u4e24\u79cd\u4e0d\u540c\u7684\u4f7f\u7528\u65b9\u5f0f\uff0c\u4e00\u79cd\u662f\u901a\u7528\u6a21\u5f0f\uff0c\u4e00\u79cd\u662f\u7f16\u7a0b\u6a21\u5f0f\u3002 1\uff09\u901a\u7528\u6a21\u5f0f\uff1a\u9002\u7528\u4e8e\u6ca1\u6709\u5f00\u53d1\u57fa\u7840\u7684\u7528\u6237\u4e14\u5bf9\u53c8\u62cd\u4e91 EdgeRules \u8bed\u6cd5\u89c4\u5219\u4e0d\u719f\u6089\uff0c\u8be5\u6a21\u5f0f\u4f7f\u7528\u65b9\u4fbf\u5feb\u6377\uff0c\u7528\u6237\u4f53\u9a8c\u4f1a\u66f4\u597d\u4e00\u4e9b\uff0c\u53c2\u8003\u5982\u4e0b\u622a\u56fe\uff1a 2\uff09\u7f16\u7a0b\u6a21\u5f0f\uff1a\u9002\u7528\u4e8e\u5f00\u53d1\u8005\uff0c\u5bf9 EdgeRules \u8bed\u6cd5\u89c4\u5219\u6709\u5f88\u6df1\u4e86\u89e3\u7684\u7528\u6237\uff0c\u76f8\u5bf9\u901a\u7528\u6a21\u5f0f\u6765\u8bf4\uff0c\u7f16\u7a0b\u6a21\u5f0f\u4f1a\u66f4\u7075\u6d3b\uff0c\u529f\u80fd\u4f1a\u66f4\u5f3a\u5927\u4e00\u4e9b\u3002\u53c2\u7167\u5982\u4e0b\u622a\u56fe\uff1a","title":"\u4f7f\u7528\u65b9\u5f0f"},{"location":"cdn/edgerules/#_3","text":"\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0cEdgeRules \u662f\u6839\u636e\u670d\u52a1\u7ef4\u5ea6\u751f\u6548\u7684\uff0c\u60a8\u4e5f\u53ef\u4ee5\u6dfb\u52a0\u6761\u4ef6\u5224\u65ad\uff0c\u5f53\u6761\u4ef6\u6ee1\u8db3\u67d0\u4e9b\u7279\u5b9a\u8981\u6c42\u65f6\uff0c\u624d\u4f1a\u89e6\u53d1\u540e\u9762\u7684\u529f\u80fd\u9009\u9879\u3002\u4f8b\u5982\uff1a \u5f53\u8bf7\u6c42 HOST \u4e3a test.example.com \u65f6\uff0c\u6dfb\u52a0 HTTP \u54cd\u5e94\u5934 CDN \u4e3a UPYUN\u3002 \u8fd9\u4e9b\u6761\u4ef6\u8fc7\u6ee4\u5668\u5305\u62ec\uff1a \u8bf7\u6c42 URI HTTP \u8bf7\u6c42\u5934 \u8bf7\u6c42\u65b9\u6cd5 \u8bf7\u6c42\u534f\u8bae \u8bf7\u6c42\u53c2\u6570 \u67e5\u8be2\u5b57\u7b26\u4e32 POST \u53c2\u6570 Cookie \u53d8\u91cf \u5ba2\u6237\u7aef IP \u56fd\u5bb6 \u4e3a\u4e86\u914d\u5408\u6761\u4ef6\u5224\u65ad\u4f7f\u7528\uff0c\u652f\u6301\u7684\u8fd0\u7b97\u7b26\u5305\u62ec\uff1a \u7b49\u4e8e \u4e0d\u7b49\u4e8e \u6b63\u5219\u5339\u914d \u6b63\u5219\u4e0d\u5339\u914d \u6b63\u5219\u5339\u914d\uff08\u4e0d\u533a\u5206\u5927\u5c0f\u5199\uff09 \u6b63\u5219\u4e0d\u5339\u914d\uff08\u4e0d\u533a\u5206\u5927\u5c0f\u5199\uff09 \u5982\u5e0c\u671b\u901a\u8fc7\u7f16\u7a0b\u6a21\u5f0f\u6765\u4f7f\u7528\u53d8\u91cf\uff0c\u66f4\u591a\u4e86\u89e3\u8bf7\u53c2\u8003\u8bed\u6cd5\u89c4\u5219\u7ae0\u8282 \u53d8\u91cf \u53ca \u51fd\u6570 \u7684\u4ecb\u7ecd\u3002","title":"\u6761\u4ef6\u5224\u65ad"},{"location":"cdn/edgerules/#_4","text":"\u6839\u636e\u4f7f\u7528\u573a\u666f\uff0c\u6211\u4eec\u9488\u5bf9\u3010\u901a\u7528\u6a21\u5f0f\u3011\u914d\u5907\u4e86 7 \u5927\u529f\u80fd\uff0c\u5177\u4f53\u529f\u80fd\u5217\u8868\u5305\u62ec\uff1a \u6dfb\u52a0 HTTP \u5934\u90e8\uff08\u5305\u62ec\u8bf7\u6c42\u5934\u548c\u54cd\u5e94\u5934\uff09 \u5220\u9664 HTTP \u5934\u90e8\uff08\u5305\u62ec\u8bf7\u6c42\u5934\u548c\u54cd\u5e94\u5934\uff09 \u8fb9\u7f18\u91cd\u5b9a\u5411 URL \u6539\u5199 \u8bf7\u6c42\u9650\u901f \u8bbf\u95ee\u63a7\u5236 \u81ea\u5b9a\u4e49\u9519\u8bef\u9875\u9762","title":"\u529f\u80fd\u9009\u62e9"},{"location":"cdn/edgerules/#_5","text":"\u4f18\u5148\u7ea7 \u53c8\u62cd\u4e91 EdgeRules \u9ed8\u8ba4\u662f\u6309\u7167\u5148\u540e\u987a\u5e8f\u6267\u884c\u7684\u3002\u7406\u8bba\u4e0a\u4f18\u5148\u7ea7\u5728\u524d\u9762\u7684\u89c4\u5219\u5c06\u4f1a\u4f18\u5148\u6267\u884c\uff0c\u60a8\u9700\u8981\u6839\u636e\u4e1a\u52a1\u9700\u6c42\u6765\u5408\u7406\u8c03\u6574\u89c4\u5219\u7684\u4f18\u5148\u7ea7\u3002\u66f4\u591a\u7ec6\u8282\u4e86\u89e3\u8bf7\u53c2\u8003\u3010\u914d\u7f6e\u6307\u5357\u3011\u7ae0\u8282\u7684 \u89c4\u5219\u4f18\u5148\u7ea7 \u4ecb\u7ecd\u3002 break \u8be5\u5f00\u5173\u9ed8\u8ba4\u4e3a\u5173\u95ed\u72b6\u6001\u3002\u5f00\u542f\u72b6\u6001\u4e0b\uff0c\u5982\u679c\u6b64\u6761\u89c4\u5219\u547d\u4e2d\u5219\u7ec8\u6b62\u5339\u914d\u5269\u4e0b\u7684\u89c4\u5219\uff0c\u4e5f\u5373\u4f1a\u8df3\u51fa\u6574\u4e2a\u89c4\u5219\u96c6\uff0c\u8bf7\u7ed3\u5408\u4e1a\u52a1\u9700\u6c42\u5408\u7406\u5f00\u542f\u548c\u5173\u95ed\u3002 \u72b6\u6001 1\uff09\u542f\u7528 \u542f\u7528\u72b6\u6001\u4e0b\uff0c\u89c4\u5219\u4f1a\u5728\u51e0\u79d2\u949f\u5185\u4e0b\u53d1\u90e8\u7f72\u5230\u5168\u7f51 CDN \u8282\u70b9\uff0c\u53ca\u65f6\u751f\u6548\u3002\u8bf7\u786e\u4fdd\u4e1a\u52a1\u6d4b\u8bd5\u6210\u529f\u4e4b\u540e\uff0c\u518d\u8c03\u6574\u4e3a\u542f\u7528\u72b6\u6001\u3002 2\uff09\u5173\u95ed \u5173\u95ed\u72b6\u6001\u4e0b\uff0c\u89c4\u5219\u4e0d\u4f1a\u5728\u5168\u7f51 CDN \u8282\u70b9\u8fdb\u884c\u90e8\u7f72\u3002\u8bf7\u6839\u636e\u4e1a\u52a1\u60c5\u51b5\uff0c\u6709\u9009\u62e9\u6027\u7684\u5173\u95ed\u89c4\u5219\u3002 3\uff09\u6d4b\u8bd5 \u89c4\u5219\u9ed8\u8ba4\u4e3a\u6d4b\u8bd5\u72b6\u6001\uff0c\u5e73\u53f0\u4f1a\u81ea\u52a8\u83b7\u53d6\u672c\u5730 IP \u5730\u5740\uff0c\u4e5f\u5373\u89c4\u5219\u53ea\u4f1a\u5bf9\u8be5\u5ba2\u6237\u7aef IP \u751f\u6548\uff0c\u60a8\u4e5f\u53ef\u4ee5\u6362\u6210\u5176\u4ed6 IP \u5730\u5740\u8fdb\u884c\u6d4b\u8bd5\u3002\u5f53\u4e14\u4ec5\u5f53\u6d4b\u8bd5\u6ee1\u8db3\u4e1a\u52a1\u8981\u6c42\u4e4b\u540e\uff0c\u4f60\u624d\u53ef\u4ee5\u5c06\u89c4\u5219\u8c03\u6574\u4e3a\u542f\u7528\u72b6\u6001\u3002","title":"\u5176\u4ed6\u9009\u9879"},{"location":"cdn/edgerules/#_6","text":"\u5f53\u60a8\u5e0c\u671b\u901a\u8fc7\u7f16\u7a0b\u6a21\u5f0f\u6765\u81ea\u884c\u7f16\u5199\u8fb9\u7f18\u89c4\u5219\u65f6\uff0c\u4f60\u9700\u8981\u5bf9\u53c8\u62cd\u4e91\u8fb9\u7f18\u89c4\u5219\u7684\u8bed\u6cd5\u89c4\u5219\u8fdb\u884c\u8be6\u7ec6\u4e86\u89e3\uff0c\u65b9\u53ef\u81ea\u884c\u7f16\u5199\u89c4\u5219\u3002\u672c\u6587\u5c06\u56f4\u7ed5\u51fd\u6570\u3001\u53d8\u91cf\u3001\u5b57\u7b26\u4e32\u5e38\u91cf\u3001break \u8fdb\u884c\u8be6\u7ec6\u4ecb\u7ecd\u3002","title":"\u8bed\u6cd5\u89c4\u5219"},{"location":"cdn/edgerules/#_7","text":"\u51fd\u6570\u8c03\u7528\u4ee5 $ \u5f00\u5934\uff0c\u540e\u8ddf\u4e00\u7ec4\u5927\u5199\u5b57\u6bcd\uff0c\u5b57\u6bcd\u4e4b\u95f4\u53ef\u4ee5\u5305\u542b\u4e0b\u5212\u7ebf _ \uff0c\u51fd\u6570\u9700\u8981\u7684\u53c2\u6570\u653e\u5728 () \u4e2d\uff0c\u4ee5 , \u5206\u9694\u3002\u5982\u679c\u6ca1\u6709\u7279\u522b\u8bf4\u660e\uff0c\u8fb9\u7f18\u89c4\u5219 \u4e2d\u7684\u51fd\u6570\u53c2\u6570\u4e2a\u6570\u4e0d\u80fd\u5c11\u4e8e\u8981\u6c42\u7684\u53c2\u6570\u4e2a\u6570\uff0c\u5426\u5219\u89c6\u4e3a\u8bed\u6cd5\u9519\u8bef\uff0c\u7136\u540e\u7ec8\u6b62\u89c4\u5219\u6267\u884c\u8fc7\u7a0b\uff0c\u591a\u4f59\u7684\u53c2\u6570\u4f1a\u88ab\u6c42\u503c\uff0c\u4f46\u4e0d\u5f71\u54cd\u8c03\u7528\u3002\u51fd\u6570\u8c03\u7528\u662f\u6709\u4e0a\u4e0b\u6587\u7684\uff0c\u8b6c\u5982 $WHEN \u8fd9\u4e2a\u51fd\u6570\uff0c\u53c2\u6570\u662f bool \u7c7b \u578b\uff0c\u53c2\u6570\u4e2d\u6709\u4e0d\u6210\u7acb\u7684\u6761\u4ef6 false \u65f6\uff0c\u4f1a\u7ec8\u6b62\u672c\u6b21\u89c4\u5219\u6267\u884c\u8fc7\u7a0b\u3002\u652f\u6301\u7684\u51fd\u6570\u6709\uff1a \u6761\u4ef6\u9009\u62e9\u548c\u5224\u65ad \u51fd\u6570 \u542b\u4e49 $WHEN(E1, E2, ...) \u6240\u6709\u6761\u4ef6\u90fd\u6210\u7acb\u65f6\u624d\u4f1a\u6267\u884c\u89c4\u5219\uff0c\u5e76\u8fd4\u56de\u7a7a\u5b57\u7b26\u4e32 $NOT(E) E \u4e0d\u6210\u7acb\u65f6\u8fd4\u56de true \uff0c \u5426\u5219\u8fd4\u56de false $ALL(E1, E2, ...) \u6240\u6709\u6761\u4ef6\u90fd\u6210\u7acb\u65f6\u8fd4\u56de true \uff0c\u5426\u5219\u8fd4\u56de false \uff0c\u53c2\u6570\u4e2a\u6570\u4e0d\u9650 $ANY(E1, E2, ...) \u5176\u4e2d\u4e00\u4e2a\u6761\u4ef6\u6210\u7acb\u65f6\u8fd4\u56de true \uff0c\u5426\u5219\u8fd4\u56de false \uff0c\u53c2\u6570\u4e2a\u6570\u4e0d\u9650 $OR(E1, E2, ...) \u503c\u4e3a\u7b2c\u4e00\u4e2a\u4e3a\u771f\u7684\u8868\u8fbe\u5f0f $SELECT(E1, E2, E3) E1 \u4e3a\u771f\u65f6\u503c\u4e3a E2 \uff0c\u5426\u5219\u4e3a E3 $PCALL(E) \u4fdd\u62a4\u6a21\u5f0f\u4e0b\u89e3\u6790 E \uff0c\u5931\u8d25\u65f6\u8fd4\u56de\u7a7a\u5b57\u7b26\u4e32 \u5b57\u7b26\u5339\u914d\u548c\u6355\u83b7 \u51fd\u6570 \u542b\u4e49 $MATCH(E1, E2) PCRE \u5339\u914d\uff0c E2 \u4e3a\u8981\u5339\u914d\u7684 pattern\uff0c\u8fd4\u56de true \u6216\u8005 false $CAPTURE(E1, E2, E3) \u6309 E2 pattern \u5bf9 E1 \u8fdb\u884c\u6355\u83b7\uff0c E3 \u8868\u793a\u662f\u5426\u5ffd\u7565\u5927\u5c0f\u5199\uff0c\u6355\u83b7\u540e\u751f\u6210 $n.m \u5f62\u5f0f\u7684\u53d8\u91cf\uff0c n \u4e3a\u5f53\u524d CAPTURE \u51fa\u73b0\u7684\u6b21\u5e8f\uff0c m \u8868\u793a\u5339\u914d\u5206\u7ec4\uff1b E2 \u4e3a\u7a7a\u65f6\uff0c\u8868\u793a\u5bf9 E1 \u8fdb\u884c\u6355\u83b7\uff0c\u6b64\u65f6 E1 \u5bf9\u5e94 $n.0 \u8bf7\u6c42/\u54cd\u5e94\u4fee\u6539 \u51fd\u6570 \u542b\u4e49 $ADD_REQ_HEADER(E1, E2) \u6dfb\u52a0\u8bf7\u6c42\u5934 E1 \u4e3a E2 $DEL_REQ_HEADER(E) \u5220\u9664\u8bf7\u6c42\u5934 E $ADD_RSP_HEADER(E1, E2) \u6dfb\u52a0\u54cd\u5e94\u5934 E1 \u4e3a E2 $DEL_RSP_HEADER(E) \u5220\u9664\u54cd\u5e94\u5934 E $DEL_ARG(E) \u5220\u9664\u8bf7\u6c42\u53c2\u6570\u9879 E $SET_METHOD(E) \u4fee\u6539\u5f53\u524d HTTP \u8bf7\u6c42\u65b9\u6cd5\u4e3a E \uff0c E \u53ef\u9009\u503c\u6709\uff1a GET , HEAD , PUT , POST , DELETE , OPTIONS , PATCH ; \u6ce8 1 $SET_BODY(E) \u4fee\u6539\u5f53\u524d HTTP \u8bf7\u6c42\u4f53\u7684\u5185\u5bb9\u4e3a E \uff0c\u4ec5\u5728 PUT \u6216 POST \u8bf7\u6c42\u4e0b\u6709\u6548 $REDIRECT(E1, E2) \u91cd\u5b9a\u5411\u5730\u5740\u5230 E1 \uff0c\u72b6\u6001\u7801\u4e3a E2(301, 302) $EXIT(E1, E2) \u4ee5\u72b6\u6001\u7801 E1 \u9000\u51fa\uff0c\u54cd\u5e94\u4f53\u4e3a E2 \u6ce8: \u5220\u9664\u54cd\u5e94\u5934\u51fd\u6570\u4e0d\u80fd\u5220\u9664 CDN \u81ea\u5e26\u7684\u4e00\u4e9b\u5b57\u6bb5\uff0c\u6bd4\u5982 via\u3001age\u3001server\u3001connection\u3001x-cache\u3001x-request-id\u3001x-source\u3001content-length\u3001transfer-encoding\u7b49\u5b57\u6bb5\u662f\u6709\u4fdd\u62a4\u7684\u3002 \u6570\u503c\u8ba1\u7b97 \u51fd\u6570 \u542b\u4e49 $ADD(E1, E2) \u6570\u5b57\u76f8\u52a0\uff0c\u8fd4\u56de E1 + E2 \u7ed3\u679c\u6570\u503c $MOD(E1, E2) \u6570\u5b57\u53d6\u4f59\uff0c\u8fd4\u56de E1 % E2 \u7ed3\u679c\u6570\u503c\uff0c\u5176\u4e2d E2 \u4e0d\u80fd\u4e3a 0 $MSUB(E1, E2) \u6570\u5b57\u76f8\u51cf\uff0c\u8fd4\u56de E1 - E2 \u7ed3\u679c\u6570\u503c $MULTIPLY(E1, E2) \u6570\u5b57\u76f8\u4e58\uff0c\u8fd4\u56de E1 * E2 \u7ed3\u679c\u6570\u503c $DIVIDE(E1, E2) \u6570\u5b57\u76f8\u9664\uff0c\u8fd4\u56de E1 / E2 \u7ed3\u679c\u6570\u503c\uff0c\u5176\u4e2d E2 \u4e0d\u80fd\u4e3a 0 $BYTE(E) \u8fd4\u56de\u5b57\u7b26 E \u7684 ASCII \u7f16\u7801\u503c $FLOOR(E) \u8fd4\u56de\u5c0f\u4e8e\u6216\u7b49\u4e8e\u6570\u5b57 E \u7684\u6700\u5927\u6574\u6570 $CEIL(E) \u8fd4\u56de\u5927\u4e8e\u6216\u7b49\u4e8e\u6570\u5b57 E \u7684\u6700\u5c0f\u6574\u6570 $GT(E1, E2) \u6570\u5b57\u6bd4\u8f83\uff0c\u662f\u5426\u5927\u4e8e\uff0c\u8fd4\u56de true \u6216\u8005 false $GE(E1, E2) \u6570\u5b57\u6bd4\u8f83\uff0c\u662f\u5426\u5927\u4e8e\u7b49\u4e8e\uff0c\u8fd4\u56de true \u6216\u8005 false \u5b57\u7b26\u4e32\u64cd\u4f5c \u51fd\u6570 \u542b\u4e49 $SUB(E1, from, to) \u5b57\u7b26\u4e32\u622a\u53d6\uff0c\u4ece from \u5230 to $GSUB(E1,E2,E3,N) E1 \u4e3a\u8981\u5904\u7406\u7684\u5b57\u7b26\u4e32\uff0c E2 \u4e3a\u8981\u66ff\u6362\u7684\u5b57\u7b26\u4e32\uff0c E3 \u4e3a\u66ff\u6362\u6210\u7684\u5b57\u7b26\u4e32\uff08\u53ef\u4ee5\u4e3a\u7a7a\uff0c\u8868\u793a\u5220\u9664 E1 \uff09\uff0c N \u4e3a\u4ece\u5b57\u7b26\u4e32\u5f00\u59cb\u7684\u66ff\u6362 E1 \u7684\u4e2a\u6570\uff0c\u7a7a\u6216\u5c0f\u4e8e\u96f6\u8868\u793a\u6240\u6709\uff0c\u51fd\u6570\u8fd4\u56de\u5904\u7406\u540e\u7684\u5b57\u7b26\u4e32 $EQ(E1, E2) \u5b57\u7b26\u4e32\u662f\u5426\u76f8\u7b49\uff0c\u8fd4\u56de true \u6216\u8005 false $UPPER(E) \u5c06 E \u8f6c\u6362\u4e3a\u5927\u5199 $LOWER(E) \u5c06 E \u8f6c\u6362\u4e3a\u5c0f\u5199 $LEN(E) \u8fd4\u56de\u5b57\u7b26\u4e32 E \u7684\u957f\u5ea6 \u901a\u7528\u529f\u80fd\u7c7b\u51fd\u6570 \u51fd\u6570 \u542b\u4e49 $ENCODE_BASE64(E) \u5c06\u5b57\u7b26\u4e32 E \u6309 base64 \u7f16\u7801\u538b\u7f29 $DECODE_BASE64(E) \u5c06\u5b57\u7b26\u4e32 E \u6309 base64 \u7f16\u7801\u89e3\u538b $ESCAPE(E) \u5c06\u5b57\u7b26\u4e32 E \u6309 URL \u7f16\u7801\u5904\u7406\uff0c\u5177\u4f53\u5b9e\u73b0\u548c Chrome JS \u5b9e\u73b0\u7684 encodeURIComponent() \u4e00\u81f4 $UNESCAPE(E) \u5c06\u5b57\u7b26\u4e32 E \u6309 URL \u89e3\u7801\u5904\u7406\uff0c\u5177\u4f53\u5b9e\u73b0\u548c Chrome JS \u5b9e\u73b0\u7684 decodeURIComponent() \u4e00\u81f4 $MD5(E) \u8ba1\u7b97 E \u7684 md5 \u503c $MD5_BIN\uff08E\uff09 \u8ba1\u7b97 E \u7684 md5 \u503c\uff0c\u5e76\u4ee5\u4e8c\u8fdb\u5236\u6570\u636e\u8f93\u51fa $RANDI(E1, E2) \u8fd4\u56de\u5927\u4e8e E1 \u5e76\u5c0f\u4e8e E2 \u7684\u968f\u673a\u6570\u503c $UNIXT(y, m, d, h, min, sec) \u6307\u5b9a\u5e74\uff0c\u6708\uff0c\u65e5\uff0c\u5c0f\u65f6\uff0c\u5206\u949f\uff0c\u79d2\uff0c\u8fd4\u56de\u76f8\u5e94\u7684 UNIX TIME $INT(E1, E2, E3) \u8fdb\u5236\u8f6c\u6362\uff0c\u5c06 E2 \u8fdb\u5236\u7684\u6570\u5b57\uff08\u5b57\u7b26\u4e32\u5f62\u5f0f\uff09 E1 \u8f6c\u6362\u6210 E3 \u8fdb\u5236\u5e76\u8fd4\u56de\uff0c E2 , E3 \u53ef\u9009\uff0c E2 \u9ed8\u8ba4\u4e3a 10 $STRF_TIME(E1,E2 ) \u65f6\u95f4\u683c\u5f0f\u8f6c\u6362\uff0c\u8868\u793a\u628a\u65f6\u95f4\u8fdb\u884c\u683c\u5f0f\u5316\u6210\u5e74\u6708\u65e5\u65f6\u5206\uff0c E1 \u4ee3\u8868 UNIX \u65f6\u95f4\u6233\uff0c\u53ef\u4ee5\u4f7f\u7528\u53d8\u91cf $_TIME \u6765\u83b7\u53d6\u5f53\u524d\u65f6\u95f4\uff1b E2 \u4e3a\u95f4\u9694\u7b26\uff0c\u4e3a\u53ef\u9009\u9879\uff0c\u4e0d\u586b\u65f6\u683c\u5f0f\u4e3a 201802230955 \uff1b\u95f4\u9694\u7b26\u4e3a - \u65f6\uff0c\u683c\u5f0f\u4e3a 2018-02-23-09-55 \u9650\u901f\u76f8\u5173 \u51fd\u6570 \u542b\u4e49 $LIMIT_RATE_AFTER(E1, E2) \u9650\u901f\u7b56\u7565\u8bbe\u7f6e\uff0c\u53d1\u9001 E1 \u5927\u5c0f\u5355\u4f4d\u4e3a E2 \u5b57\u8282\u6570\u636e\u540e\uff0c\u8fdb\u884c\u9650\u901f\uff0c E2 \u53ef\u9009\u503c\u6709\uff1a k \uff08KB)\uff0c m \uff08MB\uff09 $LIMIT_RATE(E1, E2) \u9650\u901f\u7b56\u7565\u8bbe\u7f6e\uff0c\u6309 E1 \u5927\u5c0f\u6bcf\u79d2\u8fdb\u884c\u9650\u901f\uff0c\u5355\u4f4d\u4e3a E2 \uff0c E2 \u53ef\u9009\u503c\u6709\uff1a k \uff08KB)\uff0c m \uff08MB\uff09 \u6ce8 1\uff1a\u82e5\u5f53\u524d\u8bf7\u6c42\u5e26\u6709\u8bf7\u6c42\u4f53\u7684\u60c5\u51b5\u4e0b\uff0c $SET_METHOD(E) \u4e0d\u5141\u8bb8\u8bbe\u7f6e\u4e3a\u9664 PUT \u548c POST \u4ee5\u5916\u7684\u65b9\u6cd5\u3002 \u5176\u4e2d E[n] \u4ee3\u8868\u5408\u6cd5\u7684\u8868\u8fbe\u5f0f\uff0c\u4e5f\u5c31\u662f\u8bf4\u51fd\u6570\u53ef\u4ee5\u76f8\u4e92\u5d4c\u5957\uff0c\u4f8b\u5982\u89c4\u5219\u53ef\u4ee5\u4e3a\uff1a /$SUB($DECODE_BASE64($_HEADER_foo), $_GET_from, $_GET_to)/ \uff1b\u5e03\u5c14\u51fd\u6570\u5305\u62ec WHEN , ALL, ANY \u90fd\u662f\u77ed\u8def\u7684\uff0c\u8b6c\u5982 $WHEN($ALL(), $EXIT(403)) \u4e0d\u4f1a\u8fd4\u56de 403 \uff0c\u56e0\u4e3a $ALL() \u7684\u503c\u4e3a false \u4f7f\u7528 '' \u80fd\u5bf9\u53d8\u91cf\u8fdb\u884c\u8f6c\u4e49\uff0c\u4f7f\u5176\u4e0d\u88ab\u89e3\u91ca\uff0c\u4f8b\u5982\u4ee5\u4e0b\u89c4\u5219\uff1a /foo/'$_HOST' \u4f1a\u88ab\u8f6c\u6362\u4e3a: /foo/$_HOST \u5bf9\u4e8e\u542b\u6709\u8bf7\u6c42\u53c2\u6570\u7684\u89c4\u5219\uff0c\u539f\u5148\u7684\u8bf7\u6c42\u53c2\u6570\u4f1a\u9644\u52a0\u5230\u540e\u9762\uff0c\u5982\u679c\u4e0d\u5e0c\u671b\u8fd9\u6837\uff0c\u53ef\u4ee5\u653e\u7f6e\u4e00\u4e2a '?' \u5728\u89c4\u5219\u7684\u6700\u540e\u9762\uff0c\u4f8b\u5982\u8fd9\u6837\uff1a /foo?bar=$1? \u7279\u522b\u5730\uff0c\u5982\u679c\u91cd\u5199\u540e\u7684 URL \u6ca1\u6709\u53c2\u6570\uff0c\u90a3\u4e48\u6b64\u65f6\u9700\u8981\u5728\u6700\u540e\u52a0\u4e24\u4e2a ? \uff0c\u4f8b\u5982\u8fd9\u6837\uff1a /foo??","title":"\u51fd\u6570"},{"location":"cdn/edgerules/#_8","text":"\u53d8\u91cf\u4ee5 $_ \u5f00\u5934\uff0c\u8fd9\u4e9b\u53d8\u91cf\u90fd\u662f\u5bf9\u6b64\u6b21\u8bf7\u6c42\u4e0a\u4e0b\u6587\u4e2d\u4e00\u4e9b\u53c2\u6570\u7684\u6620\u5c04\uff0c\u8b6c\u5982 $_HOST \u5bf9\u5e94\u6b64\u6b21\u8bf7\u6c42\u5934\u4e2d\u7684 Host \u5b57\u6bb5\uff0c $_GET_foo \u5bf9\u5e94\u6b64\u6b21\u8bf7\u6c42 URL \u53c2\u6570 foo \u7684\u503c\uff0c\u7b49\u7b49\u3002\u82e5\u5c06\u53d8\u91cf\u5185\u63d2\u5230\u91cd\u5199\u540e\u7684 URL \u4e2d\uff0c\u8b6c\u5982 URL \u6539\u5199 /$_GET_foo/bar \uff0c\u5982\u679c\u8bf7\u6c42\u53c2\u6570\u4e2d\u6ca1\u6709 foo \u5219\u89c6\u4e3a\u6b64\u6b21\u6539\u5199 \u5931\u8d25\uff1b \u82e5\u5c06\u53d8\u91cf\u653e\u5728\u51fd\u6570\u4e2d\uff0c\u5219\u7531\u8be5\u51fd\u6570\u786e\u5b9a\u8fd4\u56de\u7684\u503c\uff0c\u4f8b\u5982 $NOT($_GET_foo) \uff0c\u5982\u679c\u53c2\u6570\u4e2d\u5305\u542b foo \uff0c\u5219\u8fd4\u56de false \uff0c\u5426\u5219\u8fd4\u56de true \u3002\u76ee\u524d\u652f\u6301\u7684\u53d8\u91cf\u6709\uff1a \u53d8\u91cf \u542b\u4e49 $_IP \u5ba2\u6237\u7aef IP $_HOST \u8bf7\u6c42\u5934\u4e2d\u7684 Host \u5b57\u6bb5 $_HOST_n $_HOST_n \u6307 Host \u4e2d\u7684\u7b2c n \u4e2a\u5b50\u57df\uff0c\u4f8b\u5982\u5bf9\u4e8e foo.bar.baz.com\uff1a $_HOST_1 = foo\uff0c$_HOST_2 = bar\uff0c$_HOST_3 = baz $_GET_name \u4f7f\u7528 Query String \u4e2d\u7684\u53d8\u91cf\uff08\u65e0\u9700 urldecode\uff09 $_POST_name \u4f7f\u7528 POST \u8868\u5355\u4e2d\u7684\u53d8\u91cf\uff08\u53ea\u652f\u6301 www form \uff09 $_HEADER_name \u4f7f\u7528 Header \u4e2d\u7684\u503c\uff0c\u6ce8\u610f name \u5168\u4e3a\u5c0f\u5199 $_COOKIE_name \u4f7f\u7528 Cookie \u4e2d\u7684\u5b57\u6bb5\u503c $_RANDOM \u968f\u673a\u5b57\u7b26\u4e32\uff0c\u5b57\u7b26\u96c6\u4e3a [a-zA-Z0-9] \uff0c\u9ed8\u8ba4 8 \u4f4d $_RANDOM_n n \u4f4d\u968f\u673a\u5b57\u7b26\u4e32\uff0c\u5176\u4e2d 1 <= n <= 32 $_URI \u8bf7\u6c42\u7684 URI\uff0c\u4e0d\u5305\u542b\u53c2\u6570 $_QUERY Query String\uff0c\u4e0d\u5e26\u524d\u7f00 '?' $_METHOD GET/POST/PUT/POST/DELETE/OPTIONS/PATCH $_SCHEME http/https\uff0c\u6ce8\u610f\u6b64\u5904\u5168\u4e3a\u5c0f\u5199 $_TIME \u83b7\u53d6\u5f53\u524d\u670d\u52a1\u5668\u65f6\u95f4\uff0c\u683c\u5f0f\u4e3a UNIX TIME $_BODY \u83b7\u53d6\u5f53\u524d\u8bf7\u6c42\u7684 BODY\uff08\u8bf7\u6c42\u4f53\uff09\u5185\u5bb9\uff0c\u5927\u5c0f\u9650\u5236\u4e3a 16KB $_GEOIP_COUNTRY_CODE \u56fd\u5bb6\u4ee3\u7801\uff0c\u53ef\u53c2\u7167\u7ef4\u57fa\u767e\u79d1\uff1a https://en.wikipedia.org/wiki/ISO_3166-2","title":"\u53d8\u91cf"},{"location":"cdn/edgerules/#_9","text":"\u5b57\u7b26\u4e32\u5e38\u91cf\u6709\u4e24\u79cd\u5f62\u5f0f\uff0c\u7b2c\u4e00\u79cd\u5c31\u662f\u666e\u901a\u7684\u5b57\u7b26\u4e32\u4f8b\u5982 /foo/bar \uff0c\u4f46\u662f\u5982\u679c\u5b57\u7b26\u4e32\u4e2d\u5305\u542b\u4e86\u4e00\u4e9b\u7279\u6b8a\u5b57\u7b26\uff0c\u4f8b\u5982\u7a7a\u767d\u5b57\u7b26\u5c06\u88ab\u7701\u7565\uff0c\u4f8b\u5982 $(),' \u8fd9\u4e9b\u5b57\u7b26\u6709\u7279\u6b8a\u7684\u7528\u9014\uff0c\u4e0d\u80fd\u88ab\u76f4\u63a5\u4f7f\u7528\uff0c\u8981\u4f7f\u7528\u8fd9\u4e9b\u7279\u6b8a\u7684\u5b57\u7b26\uff0c\u8981\u52a0 \\ \u524d\u7f00\u5bf9\u5176\u8f6c\u4e49\uff0c\u4f8b\u5982 /foo/bar\\, \uff1b\u7b2c\u4e8c\u79cd\u662f\u52a0\u5355\u5f15\u53f7\u7684\u5b57\u7b26\u4e32 '' \uff0c\u5355\u5f15\u53f7\u4e2d\u7684\u5b57\u7b26\u53ea\u6709 \\ \u662f\u7279\u6b8a\u8f6c\u4e49\u5b57\u7b26\u524d\u7f00\uff0c\u5176\u4ed6\u7684\u90fd\u89c6\u4e3a\u666e\u901a\u5b57\u7b26\uff0c\u4f8b\u5982\u8fd9\u6837\u4e00\u6761\u6539\u5199\u89c4\u5219 /foo/'$\\\\,\\'' \uff0c\u6539\u5199\u8fc7\u540e\u5bf9\u5e94 /foo/$\\,' \u3002","title":"\u5b57\u7b26\u4e32\u5e38\u91cf"},{"location":"cdn/edgerules/#break","text":"\u9664\u4e86\u80fd\u52fe\u9009 break \u9009\u9879 \u6307\u5b9a\u662f\u5426 break \uff0c\u4e5f\u53ef\u4ee5\u76f4\u63a5\u5728\u8fb9\u7f18\u89c4\u5219\u6700\u540e\u52a0\u4e0a $$ \u8868\u793a break \u3002","title":"break"},{"location":"cdn/edgerules/#_10","text":"\u5728\u8fd9\u4e2a\u7ae0\u8282\uff0c\u6211\u4eec\u4f1a\u4ecb\u7ecd\u5982\u4f55\u6dfb\u52a0\u548c\u7f16\u8f91\u8fb9\u7f18\u89c4\u5219\u96c6\uff0c\u4e3b\u8981\u5927\u7eb2\u5305\u62ec\uff1a \u8ba4\u8bc6\u89c4\u5219\u7ba1\u7406\u754c\u9762 \u89c4\u5219\u4f18\u5148\u7ea7 URI \u5b57\u7b26\u4e32\u63d0\u53d6 \u53d8\u91cf\u4f7f\u7528 \u6267\u884c\u52a8\u4f5c \u89c4\u5219\u6d4b\u8bd5","title":"\u914d\u7f6e\u6307\u5357"},{"location":"cdn/edgerules/#_11","text":"\u767b\u9646 CDN \u63a7\u5236\u53f0 \uff0c\u4f9d\u6b21\u8fdb\u5165\uff1a\u670d\u52a1\u7ba1\u7406 > \u529f\u80fd\u914d\u7f6e > \u8fb9\u7f18\u89c4\u5219 > EdgeRules\uff0c\u5373\u53ef\u8fdb\u5165\u8fb9\u7f18\u89c4\u5219\u7ba1\u7406\u754c\u9762\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u5728\u89c4\u5219\u7ba1\u7406\u754c\u9762\uff0c\u9488\u5bf9\u6bcf\u4e00\u6761\u89c4\u5219\uff0c\u63a7\u5236\u53f0\u63d0\u4f9b\u4e86\u5982\u4e0b\u5b57\u6bb5\u4fe1\u606f\uff1a \u5b57\u6bb5 \u63cf\u8ff0 \u4f18\u5148\u7ea7 \u6307\u5b9a\u89c4\u5219\u6267\u884c\u7684\u5148\u540e\u987a\u5e8f \u89c4\u5219\u540d\u79f0 \u8be5\u6761\u89c4\u5219\u7684\u540d\u79f0\uff0c\u65b9\u4fbf\u7ba1\u7406\u6807\u8bc6 break \u89c4\u5219\u547d\u4e2d\u4e4b\u540e\uff0c\u662f\u5426\u8df3\u51fa\u6240\u6709\u7684\u89c4\u5219\u96c6 \u72b6\u6001 \u5305\u62ec\u542f\u7528\u3001\u5173\u95ed\u3001\u6d4b\u8bd5\u4e09\u79cd\u72b6\u6001 \u7f16\u8f91 \u7f16\u8f91\u89c4\u5219 \u5220\u9664 \u5220\u9664\u89c4\u5219 \u66f4\u591a \u5305\u62ec\u542f\u7528\u3001\u5173\u95ed\u3001\u6d4b\u8bd5\u4e09\u4e2a\u9009\u9879","title":"\u8ba4\u8bc6\u89c4\u5219\u7ba1\u7406\u754c\u9762"},{"location":"cdn/edgerules/#_12","text":"\u7406\u8bba\u4e0a\uff0c\u6240\u6709\u89c4\u5219\u7684\u4f18\u5148\u7ea7\u662f\u6309\u7167\u5148\u540e\u987a\u5e8f\u6765\u6267\u884c\u7684\uff0c\u4f18\u5148\u7ea7\u8d8a\u9760\u524d\u5219\u4f1a\u88ab\u4f18\u5148\u6267\u884c\uff0c\u8fd9\u4e2a\u4ec5\u9002\u7528\u4e8e\u6dfb\u52a0 HTTP \u5934\u90e8\u3001\u5220\u9664 HTTP \u5934\u90e8\u3001\u8bbf\u95ee\u63a7\u5236\u3001\u8bf7\u6c42\u9650\u901f\u3001\u81ea\u5b9a\u4e49\u9519\u8bef\u9875\u9762\u3001\u8fb9\u7f18\u91cd\u5b9a\u5411\u3002\u9488\u5bf9 URL \u6539\u5199\u52a8\u4f5c\uff0c\u5373\u4f7f URL \u6539\u5199\u7684\u89c4\u5219\u653e\u5728\u524d\u9762\uff0c \u8fd8\u662f\u4f1a\u7b49\u6267\u884c\u5b8c\u5176\u4ed6\u52a8\u4f5c\u4e4b\u540e\uff0c\u624d\u4f1a\u53bb\u6267\u884c URL \u6539\u5199\u52a8\u4f5c\u3002 \u8fd9\u91cc\u6839\u636e\u5177\u4f53\u793a\u4f8b\u8fdb\u884c\u8bf4\u660e\uff0c\u5982\u622a\u56fe\u6240\u793a\uff1a \u7279\u522b\u5730\uff1a\u5f53\u5339\u914d\u7684\u6761\u4ef6\u90fd\u76f8\u540c\u65f6\uff0c\u4f8b\u5982\uff1a\u5f53\u8bf7\u6c42 URI \u90fd\u4e3a /123.mp4 \u65f6\uff0c\u6309\u7167\u4f18\u5148\u7ea7\u987a\u5e8f\u51fa\u73b0\u4e86\u5982\u4e0b 5 \u6761\u89c4\u5219\uff1a \u7b2c 1 \u6761\u89c4\u5219\uff1a\u5f53\u8bf7\u6c42\u7684 URI \u4e3a /123.mp4 \u65f6\uff0c\u6539\u5199\u5230 /beibei.mp4 \u7b2c 2 \u6761\u89c4\u5219\uff1a\u5f53\u8bf7\u6c42\u7684 URI \u4e3a /123.mp4 \u65f6\uff0c\u6dfb\u52a0 HTTP \u54cd\u5e94\u5934 CDN \u7b2c 3 \u6761\u89c4\u5219\uff1a\u5f53\u8bf7\u6c42\u7684 URI \u4e3a /123.mp4 \u65f6\uff0c\u8fb9\u7f18\u91cd\u5b9a\u5411\u5230 https://www.upyun.com/ \u7b2c 4 \u6761\u89c4\u5219\uff1a\u5f53\u8bf7\u6c42\u7684 URI \u4e3a /123.mp4 \u65f6\uff0c\u8fdb\u884c\u8bbf\u95ee\u63a7\u5236\uff0c\u54cd\u5e94 403 \u72b6\u6001\u7801 \u7b2c 5 \u6761\u89c4\u5219\uff1a\u5f53\u8bf7\u6c42\u7684 URI \u4e3a /123.mp4 \u65f6\uff0c\u8fdb\u884c\u8bf7\u6c42\u9650\u901f\uff0c\u9650\u901f\u5230 200KB/s \u3002 \u6309\u7167\u5f53\u524d\u7684\u8bbe\u8ba1\u903b\u8f91\uff0c\u7b2c 1 \u6761\u89c4\u5219\u4e0d\u4f1a\u88ab\u7acb\u9a6c\u6267\u884c\uff0c\u4f1a\u7b49\u5f85\u540e\u9762\u6240\u6709\u7684\u89c4\u5219\u6267\u884c\u5b8c\u6bd5\u4e4b\u540e\uff0c\u624d\u4f1a\u8fdb\u884c URL \u6539\u5199\u7684\u52a8\u4f5c\u3002\u6309\u7167\u89c4\u5219\u4f18\u5148\u7ea7\uff0c\u4f1a\u4f9d\u6b21\u6267\u884c\u7b2c 2 \u6761\u89c4\u5219\uff0c\u7136\u540e\u518d\u6267\u884c\u7b2c 3 \u6761\u89c4\u5219\uff0c\u901a\u8fc7 curl \u53d1\u8d77\u547d\u4ee4\u6d4b\u8bd5\uff0c\u6d4b\u8bd5\u7ed3\u679c\u4e3a\uff1a GET /123.mp4 HTTP/1.1 Host: wuxuejun2018.b0.upaiyun.com User-Agent: curl/7.43.0 Accept: */* HTTP/1.1 302 Moved Temporarily Server: marco/1.10 Date: Wed, 20 Dec 2017 09:28:28 GMT Content-Type: text/html Content-Length: 159 Connection: keep-alive Location: https://www.upyun.com Via: M.ctn-zj-lna3-019 X-Request-Id: 32c1c154c192027be98887ad63c3b08c CDN: UPYUN \u6309\u7167\u6d4b\u8bd5\u7ed3\u679c\uff0c\u4f9d\u6b21\u547d\u4e2d\u4e86\u7b2c 2 \u6761\u548c \u7b2c 3 \u6761\u89c4\u5219\u3002 \u53ef\u4ee5\u770b\u51fa\uff0c\u7b2c 1 \u6761\u3001\u7b2c 4 \u6761\u3001\u7b2c 5 \u6761\u90fd\u6ca1\u6709\u88ab\u6267\u884c\uff0c\u90a3\u662f\u56e0\u4e3a\u7b2c 1 \u6761\u5c5e\u4e8e URL \u6539\u5199\uff0c\u4e0d\u4f1a\u7acb\u9a6c\u6267\u884c\uff1b\u7b2c 3 \u6761\u4e3a\u8fb9\u7f18\u91cd\u5b9a\u5411\uff0c\u76f4\u63a5 302 \u5230 https://www.upyun.com \u4e86\uff0c\u8df3\u51fa\u4e86\u6574\u4e2a\u89c4\u5219\u96c6\uff0c\u4ece\u800c\u63a5\u4e0b\u6765\u7684\u89c4\u5219\u4e0d\u4f1a\u88ab\u6267\u884c\uff0c\u5305\u62ec URL \u6539\u5199\u3002 \u7279\u522b\u6ce8\u610f\u7684\u662f\uff0c\u7c7b\u4f3c\u8fb9\u7f18\u91cd\u5b9a\u5411\u8fd9\u7c7b\u76f4\u63a5\u8df3\u51fa\u6240\u6709\u89c4\u5219\u96c6\u7684\u884c\u4e3a\uff0c\u8fd8\u5305\u62ec\uff1a \u81ea\u5b9a\u4e49\u9519\u8bef\u9875\u9762 \u8bbf\u95ee\u63a7\u5236 \u4e5f\u5c31\u662f\u8bf4\uff0c\u5f53\u6267\u884c\u5b8c\u8fb9\u7f18\u91cd\u5b9a\u5411\u3001\u81ea\u5b9a\u4e49\u9519\u8bef\u9875\u9762\u3001\u8bbf\u95ee\u63a7\u5236\u7b49\u52a8\u4f5c\u4e4b\u540e\uff0c\u4f1a\u76f4\u63a5\u8df3\u51fa\u6574\u4e2a\u89c4\u5219\u96c6\uff0c\u4e0d\u4f1a\u6267\u884c\u63a5\u4e0b\u6765\u7684\u5339\u914d\u52a8\u4f5c\u3002","title":"\u89c4\u5219\u4f18\u5148\u7ea7"},{"location":"cdn/edgerules/#uri","text":"\u6240\u8c13 URI \u5b57\u7b26\u4e32\u63d0\u53d6\uff0c\u4e5f\u5373\u5728\u6267\u884c\u8fb9\u7f18\u91cd\u5b9a\u5411\u4ee5\u53ca URL \u6539\u5199\u52a8\u4f5c\u65f6\uff0c\u6839\u636e\u4e1a\u52a1\u9700\u6c42\uff0c\u53ef\u80fd\u4f1a\u63d0\u53d6\u539f\u59cb\u8bf7\u6c42 URI \u4e2d\u7684\u5b57\u7b26\u4e32\u3002\u5176\u4e2d URI \u5b57\u7b26\u4e32\u63d0\u53d6\u652f\u6301 PCRE \u6b63\u5219\u8868\u8fbe\u5f0f\uff0c\u5339\u914d\u540e\uff0c\u4ea7\u751f $1 , $2 ... \u8fd9\u6837\u7684\u53d8\u91cf\u3002 URI \u5b57\u7b26\u4e32\u63d0\u53d6\u6b63\u5219\u8868\u8fbe\u5f0f\uff1a ^/pay/([0-9]+)/([0-9]+)/(.*?).html$ \u6839\u636e\u4ee5\u4e0a\u7684 PCRE \u6b63\u5219\u8868\u8fbe\u5f0f\uff0c\u5206\u522b\u4f1a\u4ea7\u751f 3 \u4e2a \u5b57\u7b26\u4e32\uff0c\u4e3a $1 \u3001 $2 \u3001 $3 \u3002\u5206\u522b\u5bf9\u5e94\u4e86\u4ee5\u4e0a\u6b63\u5219\u8868\u8fbe\u5f0f\u91cc\u9762\u7684\u4ece\u5de6\u5230\u53f3 () \u91cc\u9762\u7684\u5b57\u7b26\u4e32\u3002 URL \u6539\u5199\u89c4\u5219\uff1a /pay.php?payid=$1&categoryid=$2 \u914d\u7f6e\u622a\u56fe\u53ef\u53c2\u8003\uff1a 1\uff09\u901a\u7528\u6a21\u5f0f 2\uff09\u7f16\u7a0b\u6a21\u5f0f \u901a\u8fc7\u6267\u884c\u4ee5\u4e0a\u89c4\u5219\u4e4b\u540e\uff0c\u539f\u59cb\u8bf7\u6c42\u548c\u6539\u5199\u540e\u7684\u5730\u5740\u5206\u522b\u5982\u4e0b\uff1a \u539f\u59cb\u8bf7\u6c42\uff1a http://example.com/pay/25/8/... \u6539\u5199\u540e\u5730\u5740\uff1a http://example.com/pay.php?payid=25&categoryid=8...","title":"URI \u5b57\u7b26\u4e32\u63d0\u53d6"},{"location":"cdn/edgerules/#_13","text":"\u5728\u8fdb\u884c URL \u6539\u5199\u548c\u8fb9\u7f18\u91cd\u5b9a\u5411\u52a8\u4f5c\u65f6\uff0c\u9664\u4e86\u53ef\u4ee5\u63d0\u53d6 URI \u4e2d\u7684 \u5b57\u7b26\u4e32\uff0c\u60a8\u8fd8\u53ef\u4ee5\u83b7\u53d6\u539f\u59cb\u8bf7\u6c42\u4e2d\u7684\u53d8\u91cf\u3002\u8fd9\u4e9b\u53d8\u91cf\u5305\u62ec\uff1a \u53d8\u91cf \u542b\u4e49 $_IP \u5ba2\u6237\u7aef IP $_HOST \u8bf7\u6c42\u5934\u4e2d\u7684 Host \u5b57\u6bb5 $_HOST_n $_HOST_n \u6307 Host \u4e2d\u7684\u7b2c n \u4e2a\u5b50\u57df\uff0c\u4f8b\u5982\u5bf9\u4e8e foo.bar.baz.com\uff1a $_HOST_1 = foo\uff0c$_HOST_2 = bar\uff0c$_HOST_3 = baz $_GET_name \u4f7f\u7528 Query String \u4e2d\u7684\u53d8\u91cf\uff08\u65e0\u9700 urldecode\uff09 $_POST_name \u4f7f\u7528 POST \u8868\u5355\u4e2d\u7684\u53d8\u91cf\uff08\u53ea\u652f\u6301 www form \uff09 $_HEADER_name \u4f7f\u7528 Header \u4e2d\u7684\u503c\uff0c\u6ce8\u610f name \u5168\u4e3a\u5c0f\u5199 $_COOKIE_name \u4f7f\u7528 Cookie \u4e2d\u7684\u5b57\u6bb5\u503c $_RANDOM \u968f\u673a\u5b57\u7b26\u4e32\uff0c\u5b57\u7b26\u96c6\u4e3a [a-zA-Z0-9] \uff0c\u9ed8\u8ba4 8 \u4f4d $_RANDOM_n n \u4f4d\u968f\u673a\u5b57\u7b26\u4e32\uff0c\u5176\u4e2d 1 <= n <= 32 $_URI \u8bf7\u6c42\u7684 URI\uff0c\u4e0d\u5305\u542b\u53c2\u6570 $_QUERY Query String\uff0c\u4e0d\u5e26\u524d\u7f00 '?' $_METHOD GET/POST/PUT/POST/DELETE/OPTIONS/PATCH $_SCHEME http/https\uff0c\u6ce8\u610f\u6b64\u5904\u5168\u4e3a\u5c0f\u5199 $_TIME \u83b7\u53d6\u5f53\u524d\u670d\u52a1\u5668\u65f6\u95f4\uff0c\u683c\u5f0f\u4e3a UNIX TIME $_BODY \u83b7\u53d6\u5f53\u524d\u8bf7\u6c42\u7684 BODY\uff08\u8bf7\u6c42\u4f53\uff09\u5185\u5bb9\uff0c\u5927\u5c0f\u9650\u5236\u4e3a 16KB $_GEOIP_COUNTRY_CODE \u56fd\u5bb6\u4ee3\u7801\uff0c\u53ef\u53c2\u7167\u7ef4\u57fa\u767e\u79d1\uff1a https://en.wikipedia.org/wiki/ISO_3166-2 \u4e3a\u4e86\u66f4\u52a0\u65b9\u4fbf\u7406\u89e3\uff0c\u4e0b\u9762\u5c06\u901a\u8fc7\u4e00\u4e2a\u5e94\u7528\u793a\u4f8b\u6765\u5c55\u5f00\u4ecb\u7ecd\uff1a \u793a\u4f8b\uff1aURL \u6539\u5199 \u4f8b\u5982\uff1a\u67d0\u4e2a URL \u4e3a https://www.example.com/index.htm \u9700\u6c42\uff1a\u5e0c\u671b\u901a\u8fc7 URL \u6539\u5199\u52a8\u4f5c\uff0c\u5c06\u5ba2\u6237\u7aef IP (\u8fd9\u91cc\u4ee5 192.168.1.1 \u4e3a\u4f8b) \u4ee5\u53ca\u8bf7\u6c42\u65b9\u6cd5\uff08\u5b9e\u9645\u7684\u8bf7\u6c42\u65b9\u6cd5\u4e3a GET\uff09\u901a\u8fc7\u67e5\u8be2\u5b57\u7b26\u4e32\u4f20\u9012\u5230\u6e90\u7ad9\u540e\u7aef\uff1b \u6539\u5199\u89c4\u5219\u53ef\u4ee5\u4e3a\uff1a /index.php?ip=$_IP&method=$_METHOD \u5219\u6539\u5199\u540e\u7684\u5b8c\u6574 URL \u4e3a\uff1a https://example.com/index.php?ip=192.168.1.1&method=GET \u914d\u7f6e\u622a\u56fe\u53ef\u53c2\u8003(\u901a\u7528\u6a21\u5f0f):","title":"\u53d8\u91cf\u4f7f\u7528"},{"location":"cdn/edgerules/#_14","text":"\u6dfb\u52a0 HTTP \u5934\u90e8 \u901a\u8fc7\u4f7f\u7528\u8fb9\u7f18\u89c4\u5219\u7684\u3010\u6dfb\u52a0 HTTP \u54cd\u5e94\u5934\u90e8\u3011\u529f\u80fd\uff0c\u5f53\u60a8\u7684\u7528\u6237\u8bf7\u6c42\u4e1a\u52a1\u8d44\u6e90\u65f6\uff0c\u53ef\u4ee5\u5728\u8fd4\u56de\u7684\u3010\u54cd\u5e94\u6d88\u606f\u3011\u4e2d\u6dfb\u52a0\u60a8\u914d\u7f6e\u7684\u5934\u90e8\uff0c\u8fd9\u4e9b\u5934\u90e8\u53ef\u80fd\u5305\u62ec\uff1a Cache-Control Content-Disposition Content-Language Access-Control-Allow-Origin Content-Type \u5f53\u7136\uff0c\u60a8\u4e5f\u53ef\u4ee5\u6839\u636e\u4e1a\u52a1\u8981\u6c42\uff0c\u81ea\u5b9a\u4e49\u54cd\u5e94\u5b57\u6bb5\u3002\u4f8b\u5982\uff1aCDN\uff1aUPYUN \u5177\u4f53\u4f7f\u7528\u622a\u56fe\u5982\u4e0b\u622a\u56fe\u6240\u793a\uff1a 1\uff09\u901a\u7528\u6a21\u5f0f 2\uff09\u7f16\u7a0b\u6a21\u5f0f \u4ece\u622a\u56fe\u53ef\u4ee5\u770b\u51fa\uff0c\u6dfb\u52a0 HTTP \u5934\u90e8\uff0c\u60a8\u9700\u8981\u5206\u522b\u586b\u5199\uff1a Header \u57df\u540d\uff1aAccess-Control-Allow-Origin Header \u57df\u503c\uff1a* \u53e6\u5916\uff0c\u6709\u3010\u8986\u76d6\u539f\u6709\u54cd\u5e94\u5934\u3011\u7684\u914d\u7f6e\uff0c\u9ed8\u8ba4\u4e3a\u5426\uff0c\u53ef\u4ee5\u6839\u636e\u5177\u4f53\u60c5\u51b5\u6765\u52fe\u9009\u3002\u5f53\u52fe\u9009\u65f6\uff0c\u4f1a\u8986\u76d6\u6389\u539f\u59cb\u7684\u54cd\u5e94\u5934\u4fe1\u606f\u3002 \u5220\u9664 HTTP \u5934\u90e8 \u901a\u8fc7\u4f7f\u7528\u8fb9\u7f18\u89c4\u5219\u7684\u3010\u5220\u9664 HTTP \u54cd\u5e94\u5934\u3011\u529f\u80fd\uff0c\u60a8\u53ef\u4ee5\u5220\u9664\u6389\u4e0d\u5fc5\u8981\u7684\u54cd\u5e94\u5b57\u6bb5\u3002\u5982\u9690\u85cf\u6389\u4e00\u4e9b\u5e76\u4e0d\u5b89\u5168\u7684\u54cd\u5e94\u5934\u90e8\u4fe1\u606f\u3002\u4f8b\u5982\uff1a X-Powered-By \u5177\u4f53\u914d\u7f6e\u53c2\u89c1\u5982\u4e0b\u622a\u56fe\u6240\u793a\uff1a \u6ce8\u610f\u4e8b\u9879\uff1a\u53c8\u62cd\u4e91 CDN \u5185\u90e8\u4e0d\u80fd\u5220\u9664\u7684\u54cd\u5e94\u5934\u5305\u62ec\uff1a Via Age Server connection X-cache x-source X-request-id Content-range Content-length Transfer-encoding \u8fb9\u7f18\u91cd\u5b9a\u5411 \u901a\u8fc7\u4f7f\u7528\u8fb9\u7f18\u89c4\u5219\u7684\u3010\u8fb9\u7f18\u91cd\u5b9a\u5411\u3011\u529f\u80fd\uff0c\u5f53\u5339\u914d\u5230\u6761\u4ef6\u65f6\uff0cCDN \u4f1a\u54cd\u5e94\u4e00\u4e2a 301/302 \u8bf7\u6c42\u7ed9\u5ba2\u6237\u7aef\uff0c\u91cd\u5b9a\u5411\u72b6\u6001\u7801\u652f\u6301 301 \u548c 302\u3002 \u5177\u4f53\u7684\u914d\u7f6e\u53ef\u53c2\u7167\u5982\u622a\u56fe\u6240\u793a\uff1a \u5f53\u6761\u4ef6\u6ee1\u8db3\uff1a\u8bf7\u6c42 HOST \u4e3a XXX \u5e76\u4e14\u5ba2\u6237\u7aef User-Agent \u6b63\u5219\u5339\u914d XXX \u65f6\uff0c\u5219\u6267\u884c\u91cd\u5b9a\u5411\u52a8\u4f5c\uff0c301 \u91cd\u5b9a\u5411\u5230\uff1a https://test.com/$1/123.html \u81ea\u5b9a\u4e49\u9519\u8bef\u9875\u9762 \u901a\u8fc7\u4f7f\u7528\u8fb9\u7f18\u89c4\u5219\u7684\u3010\u81ea\u52a8\u9519\u8bef\u9875\u9762\u3011\u529f\u80fd\u3002\u4f7f\u7528\u81ea\u5b9a\u4e49\u6e90\u7ad9\u9519\u8bef\u9875\u9762\uff0c\u800c\u975e CDN \u9ed8\u8ba4\u6307\u5b9a\u7684\u9519\u8bef\u9875\u9762\u3002\u5f53\u524d\u652f\u6301\u7684\u6e90\u7ad9\u9519\u8bef\u4fe1\u606f\u72b6\u6001\u7801\u5305\u62ec\uff1a 404 500 501 502 503 504 \u8fd9\u91cc\u4ee5 404 \u9519\u8bef\u9875\u9762\u4e3a\u4f8b\uff0c\u5f53\u6e90\u7ad9\u54cd\u5e94 404 \u72b6\u6001\u7801\u65f6\uff0c\u5219 302 \u91cd\u5b9a\u5411\u5230\u6307\u5b9a 404 \u9875\u9762\u3002\u5177\u4f53\u7684\u914d\u7f6e\u53ef\u53c2\u7167\u5982\u622a\u56fe\u6240\u793a\uff1a URL \u6539\u5199 \u914d\u5408\u7f51\u7ad9\u5c06\u52a8\u6001 URL \u8f6c\u6362\u4e3a\u8bed\u4e49 URL\uff0c\u6539\u5584\u641c\u7d22\u5f15\u64ce\u7d22\u5f15\u673a\u5236\uff0c\u63d0\u9ad8\u7f51\u7ad9 SEO \u6392\u540d\u3002\u5c06\u539f\u59cb\u8bf7\u6c42 http://www.example.com/pay/25/8/... \u8fdb\u884c URL \u6539\u5199\u3002 \u76f8\u5173\u914d\u7f6e\u5982\u622a\u56fe\u6240\u793a\uff1a \u8bf7\u6c42\u9650\u901f \u901a\u8fc7\u4f7f\u7528\u8fb9\u7f18\u89c4\u5219\u7684\u3010\u8bf7\u6c42\u9650\u901f\u3011\u529f\u80fd\uff0c\u5728\u4e0d\u5f71\u54cd\u7ec8\u7aef\u7528\u6237\u4f53\u9a8c\u7684\u60c5\u51b5\u4e0b\uff0c\u5c06\u8bf7\u6c42\u901f\u5ea6\u63a7\u5236\u5728\u5408\u7406\u8303\u56f4\u4e4b\u5185\uff0c\u8282\u7701 CDN \u5e26\u5bbd\u3002 \u5177\u4f53\u914d\u7f6e\u5982\u622a\u56fe\u6240\u793a\uff1a \u89c4\u5219\u91ca\u4e49\uff1a\u5f00\u59cb 20MB \u4e0d\u9650\u901f\uff0c\u540e\u9762\u9650\u5236\u5230 800KB/s \u3002 \u8bbf\u95ee\u63a7\u5236 \u7075\u6d3b\u9488\u5bf9\u8bf7\u6c42\u5185\u5bb9\u8fdb\u884c\u8bbf\u95ee\u63a7\u5236\uff0c\u53ef\u4ee5\u54cd\u5e94 403/404 \u72b6\u6001\u7801\u3002\u8fd9\u91cc\u9488\u5bf9 User-Agent \u8fdb\u884c\u8fc7\u6ee4\uff0c\u6bd4\u5982\uff1a\u6765\u81ea\u641c\u72d7\u7b49\u722c\u866b\u7684\u8bf7\u6c42\u76f4\u63a5\u54cd\u5e94 403 \u72b6\u6001\u7801\u3002\u5177\u4f53\u7684\u914d\u7f6e\u5982\u622a\u56fe\u6240\u793a\uff1a","title":"\u6267\u884c\u52a8\u4f5c"},{"location":"cdn/edgerules/#_15","text":"\u7531\u4e8e\u8fb9\u7f18\u89c4\u5219\u7684 URL \u6539\u5199\u3001\u8fb9\u7f18\u91cd\u5b9a\u5411\u3001\u8bbf\u95ee\u63a7\u5236\u7b49\u52a8\u4f5c\u662f\u6709\u526f\u4f5c\u7528\u7684\uff0c\u4e3a\u4e86\u5b89\u5168\u8d77\u89c1\uff0c \u6bcf\u4e00\u6761\u89c4\u5219\u9ed8\u8ba4\u90fd\u5728\u6d4b\u8bd5\u72b6\u6001\u4e0b\u3002\u6d4b\u8bd5\u72b6\u6001\u4e0b\uff0c\u5e73\u53f0\u4f1a\u81ea\u52a8\u83b7\u53d6\u5ba2\u6237\u7aef\u672c\u5730 IP \u5730\u5740\uff0c\u4e5f\u5373\u89c4\u5219\u4ec5\u9488\u5bf9\u8be5 IP \u5730\u5740\u751f\u6548\u3002\u60a8\u4e5f\u53ef\u4ee5\u66f4\u6362\u5176\u4ed6 IP \u5730\u5740\u8fdb\u884c\u6d4b\u8bd5\u3002\u5177\u4f53\u7684\u914d\u7f6e\u622a\u56fe\u5982\u56fe\u6240\u793a\uff1a","title":"\u89c4\u5219\u6d4b\u8bd5"},{"location":"cdn/edgerules/#_16","text":"","title":"\u7f16\u7a0b\u6a21\u5f0f\uff08\u6848\u4f8b\uff09"},{"location":"cdn/edgerules/#1","text":"\u9700\u6c42\u63cf\u8ff0\uff1a\u5c06\u8bf7\u6c42 URL \u6309\u7167\u4e00\u5b9a\u7684\u7b97\u6cd5\u89c4\u5219\u5b9e\u73b0 token \u9632\u76d7\u94fe\uff0c\u4f7f\u7528\u8fb9\u7f18\u89c4\u5219\u6765\u5b9e\u73b0\uff0c\u4f1a\u66f4\u52a0\u7075\u6d3b\u548c\u9ad8\u6548\u3002token \u9632\u76d7\u94fe\u8be6\u89e3\u8bf7\u53c2\u89c1\uff1a https://blog.upyun.com/?p=1177 \u8bf7\u6c42 URL \u793a\u4f8b\uff1a /test.ts?key=68ddbe535557d6630a19cebde0cb9252&t=1481106349 \u4ee5\u4e0a\u8bf7\u6c42 URL \u662f\u6309\u7167\u5982\u4e0b\u7b97\u6cd5\u751f\u6210\u7684\uff0c\u53c2\u89c1\u5982\u4e0b\u7b97\u6cd5\u8bf4\u660e\uff1a <?php $etime = time() + 600; // \u6388\u6743 10 \u5206\u949f\u540e\u8fc7\u671f $key = 'abc'; // token \u9632\u76d7\u94fe\u5bc6\u94a5 $path = '/test.ts'; // \u6587\u4ef6\u76f8\u5bf9\u8def\u5f84 $url = $path.'?key='.md5($key.$etime.$path).'&t='.$etime; echo $url; ?> CDN \u8282\u70b9\u9700\u8981\u8fdb\u884c\u4e24\u5c42\u5224\u65ad\uff0c\u4e00\u5c42\u5c31\u662f\u5bf9\u65f6\u95f4\u6233\u8fdb\u884c\u6bd4\u8f83\uff0c\u53e6\u5916\u4e00\u5c42\u5c31\u662f\u6309\u7167\u7ea6\u5b9a\u7684\u89c4\u5219\u751f\u6210\u9a8c\u8bc1\u4fe1\u606f\u5e76\u8fdb\u884c\u6bd4\u8f83\uff0c\u770b\u662f\u5426\u4e00\u81f4\u3002\u6309\u7167\u8981\u6c42\uff0c\u53ef\u7f16\u5199\u5982\u4e0b\u89c4\u5219\u96c6\u6765\u5b9e\u73b0\u4ee5\u4e0a\u8981\u6c42\uff1a rules: { \"rule\": \"$WHEN($MATCH($_URI, '.ts$'),$OR($NOT($_GET_t),$NOT($_GET_key)))$EXIT(403)\", \"pattern\": \"\" }, { \"rule\": \"$WHEN($MATCH($_URI, '.ts$'),$GT($_TIME, $_GET_t))$EXIT(401)\", \"pattern\": \"\" }, { \"rule\": \"$WHEN($MATCH($_URI, '.ts$'),$NOT($EQ($MD5('abc'$_GET_t$_URI),$LOWER($_GET_key))))$EXIT(403)\", \"pattern\": \"\" } \u89c4\u5219\u91ca\u4e49\uff1a \u7b2c\u4e00\u6761\uff1a\u5f53\u6587\u4ef6\u540e\u7f00\u4e3a ts \u65f6\uff0c\u5224\u65ad\u8bf7\u6c42 URL \u91cc\u9762\u662f\u5426\u5b58\u5728 t \u548c key \u53c2\u6570\uff0c\u5982\u679c\u5176\u4e2d\u4e00\u4e2a\u4e0d\u5b58\u5728\uff0c\u5219\u8fd4\u56de 403\uff1b \u7b2c\u4e8c\u6761\uff1a\u5f53\u6587\u4ef6\u540e\u7f00\u4e3a ts \u65f6\uff0c\u5224\u65ad\u5f53\u524d CDN \u8282\u70b9 UNIX \u65f6\u95f4\u662f\u5426\u5927\u4e8e\u8bf7\u6c42\u53c2\u6570\u91cc\u9762\u7684\u65f6\u95f4\u6233\uff08\u4e5f\u5373\u53c2\u6570 t \u7684\u503c\uff09\uff0c\u5426\u5219\u8fd4\u56de 401\uff1b \u7b2c\u4e09\u6761\uff1a\u5f53\u6587\u4ef6\u540e\u7f00\u4e3a ts \u65f6\uff0cCDN \u8282\u70b9\u6309\u7167\u7ea6\u5b9a\u7684\u7b97\u6cd5\u89c4\u5219\u751f\u6210\u9a8c\u8bc1\u4fe1\u606f\uff08\u4e5f\u5373 MD5 \u503c\uff09\uff0c\u5224\u65ad\u751f\u6210\u7684 MD5 \u503c\u548c\u8bf7\u6c42\u53c2\u6570 key \u7684\u503c\u662f\u5426\u4e00\u81f4\uff0c\u4e0d\u4e00\u81f4\u5219\u8fd4\u56de 403\uff1b","title":"1\u3001\u81ea\u5b9a\u4e49\u9632\u76d7\u94fe"},{"location":"cdn/edgerules/#2","text":"\u793a\u4f8b\u4e00\uff1a\u5339\u914d cookie \u8fdb\u884c\u8df3\u8f6c \"rule\": \"$WHEN($NOT($EQ($_URI, /live.html)), $NOT($_COOKIE_token))$REDIRECT(http://test.example.com/no_token.html,301)\", \"pattern\": \"\" \u89c4\u5219\u91ca\u4e49\uff1a\u9996\u5148\u5339\u914d\u8bf7\u6c42 URI \u662f\u5426\u4e3a /live.html ,\u5f53 cookie \u4e2d token \u503c\u4e3a\u7a7a\u65f6\uff0c\u5219\u8df3\u8f6c\u5230\u6307\u5b9a\u5230\u5730\u5740 http://test.example.com/no_token.html \u3002","title":"2\u3001\u8fb9\u7f18\u91cd\u5b9a\u5411"},{"location":"cdn/edgerules/#3url","text":"\u793a\u4f8b\u4e00\uff1a\u76ee\u5f55\u53ca\u53c2\u6570\u6539\u5199 \u5c06\u8bf7\u6c42 URL \u8f6c\u6362\u4e3a\u5e26\u53c2\u6570\u7684\u52a8\u6001 URL\uff0c\u4f8b\u5982\u8bf7\u6c42\u7684 URL \u4e3a\uff1a http://example.com/pay/25/8/... \u9700\u8981 CDN \u8fb9\u7f18\u8282\u70b9\u8f6c\u6362\u4e3a\u5982\u4e0b\u8bf7\u6c42\uff1a http://example.com/pay.php?payid=25&categoryid=8... \u8fd9\u4e2a\u65f6\u5019\uff0c pattern \u90e8\u5206\u9700\u8981\u63d0\u53d6\u76ee\u5f55\u6570\u5b57\uff0c\u9700\u8981\u751f\u6210 $1 \u548c $2 \u8fd9\u6837\u7684\u53d8\u91cf\uff0c\u5982\u4e0b\u89c4\u5219\u6240\u793a\uff1a \"rule\": \"/pay.php?productid=$1&categoryid=$2\", \"pattern\": \"^pay/([0-9]+)/([0-9]+)/(.*?).html$\" \u89c4\u5219\u91ca\u4e49\uff1a\u5f53\u89e3\u6790\u7684 url \u7b26\u5408\u89c4\u5219 ^pay/([0-9]+)/([0-9]+)/(.*?).html$ \uff0c\u90a3\u4e48\u5c06\u8bf7\u6c42\u5bfc\u5411\u5230 /pay.php?productid=$1&categoryid=$2 \u3002 \u4e5f\u5373\u5c06 http://example.com/pay/25/8/... \u8f6c\u6362\u4e3a http://example.com/pay.php?payid=25&categoryid=8... \u793a\u4f8b\u4e8c\uff1a\u6587\u4ef6\u540d\u6539\u5199 pattern: /(.*)/playlist\\.m3u8$ rule: /$1'.m3u8' \u89c4\u5219\u91ca\u4e49\uff1a\u5f53\u8bbf\u95ee\u5730\u5740\u4e3a http://domain/app/stream/playlist.m3u8 \u65f6\uff0c\u5c06\u8bbf\u95ee\u5730\u5740\u6539\u5199\u4e3a http://domain/app/stream.m3u8 \u3002 \u5e94\u7528\u573a\u666f\uff1a\u5728\u76f4\u64ad\u5e94\u7528\u573a\u666f\u4e2d\uff0c\u56e0\u4e3a\u5ba2\u6237\u7aef\u673a\u5236\u65e0\u6cd5\u6216\u8005\u4e0d\u65b9\u4fbf\u5347\u7ea7\u7684\u60c5\u51b5\uff0c\u53ef\u4ee5\u901a\u8fc7 URL \u6539\u5199\uff0c\u5c06 /stream/playlist.m3u8 \u6539\u4e3a /stream.m3u8 \uff0c\u5176\u4e2d app \u4ee3\u8868\u53d1\u5e03\u70b9\uff0c stream \u4ee3\u8868\u6d41\u540d\u3002","title":"3\u3001URL \u6539\u5199"},{"location":"cdn/edgerules/#4","text":"\u793a\u4f8b\u4e00\uff1a\u6dfb\u52a0\u3001\u5220\u9664\u8bf7\u6c42\u5934 \"rule\": \"$ADD_REQ_HEADER(X-From-Cdn, upyun)\", \"pattern\": \"\" \u89c4\u5219\u91ca\u4e49\uff1a\u6dfb\u52a0\u8bf7\u6c42\u5934 X-From-Cdn:upyun \uff0c\u8bc6\u522b CDN \u5382\u5546\u3002 \"rule\": \"$DEL_REQ_HEADER(Accept-Encoding) \", \"pattern\": \"\" \u89c4\u5219\u91ca\u4e49\uff1a\u5220\u9664\u8bf7\u6c42\u5934 Accept-Encoding \uff0c\u65e0\u8bba\u7ec8\u7aef\u662f\u5426\u53d1\u8d77 gzip \u7684\u8bf7\u6c42\uff0c\u90fd\u8fdb\u884c ungzip \u7684\u8fd4\u56de\u3002 \u793a\u4f8b\u4e8c\uff1a\u6dfb\u52a0\u54cd\u5e94\u5934 \"rule\": \"$ADD_RSP_HEADER(CDN, UPYUN, 1) \", \"pattern\": \"\" \u89c4\u5219\u91ca\u4e49\uff1a\u6dfb\u52a0\u54cd\u5e94\u5934 CDN \u4e3a UPYUN , 1 \u8868\u793a\u4f1a\u8986\u76d6\u6389\u5df2\u6709\u7684\u54cd\u5e94\u5934\uff0c\u901a\u8fc7\u54cd\u5e94\u5934\u4e5f\u53ef\u4ee5\u8bc6\u522b CDN \u5382\u5546\u3002","title":"4\u3001\u8bf7\u6c42/\u54cd\u5e94\u5934\u4fee\u6539"},{"location":"cdn/edgerules/#5url","text":"\u5047\u5982\u8bf7\u6c42\u7684 URL \u4e3a\uff1a http://test.example.com/mp4/4E10F356C0FEAD359C33DC5901307461-10.mp4 \uff0c\u9700\u8981\u5bf9\u8be5\u7c7b\u578b\u6587\u4ef6\u8fdb\u884c\u9650\u901f\uff0c\u9650\u901f\u8981\u6c42\u4e3a\uff1a\u524d 20MB \u4e0d\u9650\u901f\uff0c20MB \u4e4b\u540e\u9650\u901f 800 KB/s\uff0c\u89c4\u5219\u53ef\u8fd9\u6837\u7f16\u5199\uff1a \"rule\": \"$WHEN($1, $EQ($_HOST, 'test.example.com'))$LIMIT_RATE_AFTER(20, m)$LIMIT_RATE(800, k)\", \"pattern\": \"^(/).+-10\\.mp4$\" \u89c4\u5219\u91ca\u4e49\uff1a\u5f53 $1 \u4e3a\u771f\uff0c\u4e14\u6ee1\u8db3\u8bf7\u6c42 HOST \u4e3a test.example.com \u65f6 \uff0c\u5f00\u59cb 20MB \u4e0d\u9650\u901f\uff0c\u540e\u9762\u9650\u5236\u5230 800KB/s \u3002","title":"5\u3001URL \u9650\u901f"},{"location":"cdn/edgerules/#6","text":"\u8be5\u90e8\u5206\u4f1a\u4f7f\u7528\u5230 $LOWER(E) \u51fd\u6570\uff0c\u76f4\u63a5\u770b\u89c4\u5219\uff1a \"rule\": \"$WHEN($MATCH($LOWER($_URI), /uptest.png)) /UPtest.png\", \"pattern\": \"\" \u89c4\u5219\u91ca\u4e49\uff1a\u9996\u5148\u662f\u83b7\u53d6\u8bf7\u6c42 URI \uff0c\u4f7f\u7528 $LOWER(E) \u51fd\u6570\u5c06 URI \u8f6c\u6362\u4e3a\u5c0f\u5199\uff0c\u548c /uptest.png \u8fdb\u884c\u5339\u914d\uff0c\u5339\u914d\u6210\u529f\uff0c\u5219\u76f4\u63a5\u5c06 URI \u6539\u5199\u4e3a /UPtest.png \u3002\u5982\u679c\u9700\u8981\u5c06\u5b57\u7b26\u4e32\u8f6c\u6362\u4e3a\u5927\u5199\uff0c\u4f7f\u7528 $UPPER(E) \u51fd\u6570\u3002","title":"6\u3001\u5927\u5c0f\u5199\u8f6c\u6362"},{"location":"cdn/edgerules/#7","text":"\u4e5f\u5373\u5c06\u5b57\u7b26\u4e32\u6216\u8005\u6570\u5b57\u8fdb\u884c\u6bd4\u8f83\u3002\u4f8b\u5982\uff1a A \u548c B \u8fdb\u884c\u6bd4\u8f83\uff0c\u662f\u5426\u5927\u4e8e\u3001\u5927\u4e8e\u7b49\u4e8e\u3001\u76f8\u7b49\u7b49\u903b\u8f91\uff0c\u53c2\u89c1\u5982\u4e0b\u89c4\u5219\u793a\u4f8b\uff1a \"rule\": \"$GT($_TIME,$ADD($INT($_GET_t,16,10),3600))\", \"pattern\": \"\" \u89c4\u5219\u91ca\u4e49\uff1a\u5c06\u8bf7\u6c42 URL \u4e2d\u7684 t \u53c2\u6570 \u7531 16 \u8fdb\u5236\u8f6c\u6362\u4e3a 10 \u8fdb\u5236\uff0c\u7136\u540e\u52a0\u4e0a 3600 \uff0c\u5c06\u76f8\u52a0\u5f97\u5230\u7684\u503c\u548c\u5f53\u524d\u7cfb\u7edf\u65f6\u95f4\u8fdb\u884c\u6bd4\u8f83\u3002\u8fd9\u91cc\u4f7f\u7528\u5230\u4e86 $GT(E1\uff0cE2\uff09 \u51fd\u6570\uff0c\u4e5f\u5373 E1 \u662f\u5426\u5927\u4e8e E2 \uff0c\u5927\u4e8e\u5373\u8fd4\u56de true \u3002\u53e6\u5916\uff0c\u7b49\u4e8e\u4f7f\u7528 $EQ(E1\uff0cE2\uff09 \u51fd\u6570\uff0c\u5927\u4e8e\u7b49\u4e8e\u4f7f\u7528 $GE(E1\uff0cE2\uff09 \u51fd\u6570\u3002 \u5982\u6709\u7591\u95ee\u8bf7 \u8054\u7cfb\u6211\u4eec","title":"7\u3001\u6570\u503c\u6bd4\u8f83"},{"location":"cdn/faq/","text":"\u7f13\u5b58\u76f8\u5173 \u00b6 CDN \u9ed8\u8ba4\u7684\u7f13\u5b58\u7b56\u7565\u662f\u600e\u6837\u7684\uff1f \u00b6 \u5728\u6ca1\u6709\u5339\u914d\u5230\u81ea\u5b9a\u4e49\u7f13\u5b58\u89c4\u5219\u4e14\u6e90\u7ad9\u4e5f\u6ca1\u6709\u8fd4\u56de\u4efb\u4f55\u6709\u6548\u7f13\u5b58\u5934\u7684\u60c5\u51b5\u4e0b\uff0c\u6211\u4eec\u7684\u9ed8\u8ba4\u914d\u7f6e\u7b56\u7565\u5982\u4e0b\uff1a 1\uff09\u9488\u5bf9\u9759\u6001\u8d44\u6e90\uff0c\u6240\u6709\u6b63\u5e38\u72b6\u6001\u7801\uff08\u5927\u4e8e\u7b49\u4e8e 200 \u5c0f\u4e8e 400\uff09\u5747\u7f13\u5b58 8 \u5929\u3002\u7279\u522b\u5730\uff0c301 \u54cd\u5e94\u7f13\u5b58 2 \u5c0f\u65f6\uff0c302 \u54cd\u5e94\u7f13\u5b58 20 \u5206\u949f 2\uff09\u9488\u5bf9\u52a8\u6001\u8d44\u6e90\uff0c\u7a0b\u5e8f\u4f1a\u81ea\u52a8\u8bc6\u522b\uff0c\u5219\u4e0d\u8fdb\u884c\u7f13\u5b58 3\uff09\u5bf9\u4e8e\u5176\u4ed6\u5927\u4e8e\u7b49\u4e8e 400 \u7684\u4e0d\u6b63\u5e38\u54cd\u5e94\uff0c\u5219\u4e0d\u8fdb\u884c\u7f13\u5b58 CDN \u8d44\u6e90\u662f\u5982\u4f55\u63a7\u5236\u7f13\u5b58\u8fc7\u671f\u65f6\u95f4\u7684\uff1f \u00b6 CDN \u7f13\u5b58\u7ec4\u4ef6\u4e25\u683c\u9075\u5b88 HTTP \u7684\u6807\u51c6\u534f\u8bae\uff0c\u5177\u4f53\u7684\u7f13\u5b58\u65f6\u95f4\u7531 HTTP \u54cd\u5e94\u5934\u91cc\u9762\u7684 Cache-Control \u548c Expires \u54cd\u5e94\u5934\u63a7\u5236\u3002 \u6ce8\u610f\uff1a\u7531\u4e8e Cache-Control \u4f7f\u7528\u7684\u662f\u76f8\u5bf9\u65f6\u95f4\u6765\u6307\u5b9a\u7684\u8fc7\u671f\u65f6\u95f4\uff0c\u6240\u4ee5\u4e00\u822c\u4f7f\u7528 Cache-Control \u6765\u6307\u5b9a\u8fc7\u671f\u65f6\u95f4\u3002 \u7f13\u5b58\u914d\u7f6e\u4f18\u5148\u7ea7\u662f\u600e\u6837\u7684\uff1f \u00b6 \u4e0d\u7f13\u5b58\u914d\u7f6e\uff08\u540e\u53f0\u8bbe\u7f6e\uff09 > \u81ea\u5b9a\u4e49\u7f13\u5b58\u914d\u7f6e\uff08\u540e\u53f0\u914d\u7f6e\uff09 > \u6e90\u7ad9\u7f13\u5b58\u914d\u7f6e > \u9ed8\u8ba4\u7f13\u5b58\u7b56\u7565\u3002\u4ee5\u4e0a\u7f13\u5b58\u914d\u7f6e\u4f18\u5148\u7ea7\u76ee\u524d\u4e0d\u652f\u6301\u987a\u5e8f\u8c03\u8282\uff0c\u540e\u7eed\u6211\u4eec\u4f1a\u8003\u8651\u652f\u6301\u3002 \u5982\u4f55\u5224\u65ad\u8bbe\u7f6e\u7684\u7f13\u5b58\u65f6\u95f4\u5df2\u7ecf\u751f\u6548\uff1f \u00b6 \u53ef\u4ee5\u901a\u8fc7 Cache-Control\uff1amax-age=xxxx \u4e2d max-age \u7684\u503c\u548c\u81ea\u5b9a\u4e49\u7f13\u5b58\u914d\u7f6e\u7684\u503c\u8fdb\u884c\u6bd4\u8f83\u5373\u53ef\uff0c\u5982\u679c\u4e00\u81f4\u5219\u8bf4\u660e\u5df2\u7ecf\u751f\u6548\u3002\u8be6\u60c5\u53ef\u53c2\u89c1 \u7f13\u5b58\u9a8c\u8bc1 \u3002 \u5df2\u7ecf\u7f13\u5b58\u5728 CDN \u8282\u70b9\u7684\u6587\u4ef6\u5982\u4f55\u66f4\u65b0\uff0c\u662f\u5b9e\u65f6\u7684\u4e48\uff1f\uff1f \u00b6 \u4e0d\u662f\u5b9e\u65f6\u7684\uff0c\u7f13\u5b58\u66f4\u65b0\u5206\u4e3a\u4e3b\u52a8\u66f4\u65b0\u548c\u88ab\u52a8\u66f4\u65b0\u4e24\u79cd\u65b9\u5f0f\u3002\u4e3b\u52a8\u66f4\u65b0\u4e3b\u8981\u662f\u6307\u540c\u540d\u6587\u4ef6\u5728\u6e90\u7ad9\u66f4\u65b0\u4e4b\u540e\uff0c\u9700\u8981\u5728\u7ba1\u7406\u63a7\u5236\u53f0\u624b\u52a8\u53bb\u5237\u65b0\u6587\u4ef6\uff0c\u6216\u8005\u901a\u8fc7 API \u63a5\u53e3\u5b8c\u6210\uff1b\u88ab\u52a8\u5237\u65b0\u662f\u7b49\u6587\u4ef6\u5728 CDN \u8282\u70b9\u7684\u7f13\u5b58\u8fc7\u671f\u4e4b\u540e\u56de\u6e90\u62c9\u53d6\u6700\u65b0\u7684\u6587\u4ef6\u3002 CDN \u53ef\u4ee5\u7f13\u5b58\u54ea\u4e9b\u6587\u4ef6\uff1f \u00b6 \u4e00\u822c\u60c5\u51b5\u4e0b\uff0cCDN \u9664\u4e86\u5bf9\u4e8e PHP\u3001JSP\u3001ASP \u7b49\u52a8\u6001\u6587\u4ef6\u4e0d\u80fd\u7f13\u5b58\u5916 \uff0c\u5176\u4ed6\u6587\u4ef6\u90fd\u53ef\u4ee5\u7f13\u5b58\u3002 \u52a8\u6001\u7f51\u9875\u6587\u4ef6\u53ef\u4ee5\u7f13\u5b58\u5417\uff1f \u00b6 \u4e0d\u53ef\u4ee5\u3002\u53c8\u62cd\u4e91 CDN \u4f1a\u9488\u5bf9\u6587\u4ef6\u81ea\u52a8\u8fdb\u884c\u52a8\u9759\u5206\u79bb\uff0c\u4e0d\u4f1a\u5bf9\u52a8\u6001\u7f51\u9875\u8fdb\u884c\u7f13\u5b58\u3002 HTTPS \u548c HTTP \u53ef\u4ee5\u5171\u4eab\u4e00\u4efd\u7f13\u5b58\u8d44\u6e90\u5417\uff1f \u00b6 \u5982\u679c\u5728\u7ba1\u7406\u63a7\u5236\u540e\u53f0\u56de\u6e90\u65b9\u5f0f\u9009\u62e9\uff3b\u534f\u8bae\u8ddf\u968f\uff3d\uff0c\u5c31\u4e0d\u5171\u4eab\u3002\u4e0d\u5f00\u542f\uff3b\u534f\u8bae\u8ddf\u968f\uff3d\uff0c\u5219\u5171\u4eab\u3002 \u5237\u65b0\u76f8\u5173 \u00b6 \u7f13\u5b58\u5237\u65b0\u548c\u6587\u4ef6\u9884\u70ed\u6709\u4f55\u533a\u522b\uff1f \u00b6 \u7f13\u5b58\u5237\u65b0\uff1a\u662f\u6307\u901a\u8fc7\u7ba1\u7406\u63a7\u5236\u53f0\u6216\u8005 API \u63a5\u53e3\u7684\u65b9\u5f0f\u5c06\u7f13\u5b58\u5728 CDN \u8282\u70b9\u7684\u8d44\u6e90\u6587\u4ef6\u5220\u9664\u6216\u81f4\u8fc7\u671f\u5904\u7406\uff0c\u65b0\u7684\u8bf7\u6c42\u8fc7\u6765\u4e4b\u540e\u4f1a\u56de\u6e90\u7ad9\u670d\u52a1\u5668\u83b7\u53d6\u65b0\u7684\u6587\u4ef6\u3002 \u6587\u4ef6\u9884\u70ed\uff1a\u662f\u63d0\u524d\u5c06\u8d44\u6e90\u6587\u4ef6\u7f13\u5b58\u81f3 CDN \u8fb9\u7f18\u8282\u70b9\uff0c\u65b0\u7684\u8bf7\u6c42\u8fc7\u6765\u4e4b\u540e\u53ef\u4ee5\u76f4\u63a5\u547d\u4e2d\uff0c\u65e0\u9700\u56de\u6e90\u670d\u52a1\u5668\u83b7\u53d6\u8d44\u6e90\u6587\u4ef6\uff0c\u53ef\u4ee5\u6709\u6548\u964d\u4f4e\u6e90\u7ad9\u538b\u529b\uff0c\u63d0\u5347\u6700\u7ec8\u7528\u6237\u9996\u6b21\u8bbf\u95ee\u4f53\u9a8c\u3002 \u89c4\u5219\u5237\u65b0\u548c URL \u5237\u65b0\u6709\u4ec0\u4e48\u533a\u522b\uff1f \u00b6 \u89c4\u5219\u5237\u65b0\uff1a\u662f\u6307\u6e90\u7ad9\u6279\u91cf\u66f4\u65b0\u6587\u4ef6\u65f6\uff0c\u4f8b\u5982\u67d0\u4e2a\u76ee\u5f55\u6216\u8005\u67d0\u79cd\u7c7b\u578b\u7684\u6587\u4ef6\uff0c\u9700\u8981\u6279\u91cf\u5237\u65b0\u6587\u4ef6\uff0c\u53ef\u4ee5\u901a\u8fc7\u89c4\u5219\u5237\u65b0\u6765\u8fdb\u884c\u3002\u89c4\u5219\u793a\u4f8b\uff1a http://example.com/video/* \u3001 http://example.com/image/*.png \u3002 URL \u5237\u65b0\uff1a\u662f\u6307\u6e90\u7ad9\u66f4\u65b0\u5c11\u91cf\u8d44\u6e90\u6587\u4ef6\u65f6\uff0c\u53ef\u4ee5\u901a\u8fc7 URL \u5237\u65b0\u6765\u8fdb\u884c\u5237\u65b0\u3002\u793a\u4f8b\uff1a http://example.com/image/logo.png \u3002 \u8be6\u7ec6\u4ecb\u7ecd\uff0c\u8bf7\u53c2\u89c1 \u5237\u65b0\u9884\u70ed \u3002 \u7f13\u5b58\u5237\u65b0\u7684\u751f\u6548\u65f6\u95f4\u662f\u591a\u5c11\uff1f \u00b6 \u7f13\u5b58\u5237\u65b0\u7684\u5168\u7f51\u751f\u6548\u65f6\u95f4\u4e00\u822c\u662f 10 \u5206\u949f\u5185\u5237\u65b0\u5b8c\u6210\u3002 \u4f7f\u7528\u4e86\u53c8\u62cd\u4e91\u5bf9\u8c61\u5b58\u50a8\u670d\u52a1\u65f6\uff0c\u6587\u4ef6\u66f4\u65b0\u9700\u8981\u624b\u52a8\u5237\u65b0\u5417\uff1f \u00b6 \u4e0d\u9700\u8981\u3002\u4f7f\u7528\u4e86\u53c8\u62cd\u4e91\u5bf9\u8c61\u5b58\u50a8\u670d\u52a1\u65f6\uff0c\u5b58\u50a8\u4e2d\u8d44\u6e90\u66f4\u65b0\uff08\u66ff\u6362\u6216\u5220\u9664\uff09\u65f6\u4f1a\u81ea\u52a8\u89e6\u53d1 CDN \u8282\u70b9\u5237\u65b0\u7f13\u5b58\uff0c\u4f1a\u5728 5 \u5206\u949f\u5185\u751f\u6548\uff0c\u6240\u4ee5\u60a8\u65e0\u9700\u8fdb\u884c\u624b\u52a8\u5237\u65b0\u64cd\u4f5c\u3002 \u53d1\u73b0\u4ece CDN \u8bbf\u95ee\u7684\u8d44\u6e90\u6587\u4ef6\u548c\u6e90\u7ad9\u8d44\u6e90\u4e0d\u4e00\u81f4\u600e\u4e48\u529e\uff1f \u00b6 \u901a\u8fc7\u7ba1\u7406\u63a7\u5236\u53f0\u6216 API \u63a5\u53e3\u6267\u884c\u624b\u52a8\u5237\u65b0\u7f13\u5b58\u3002 \u6027\u80fd\u76f8\u5173 \u00b6 \u7f13\u5b58\u547d\u4e2d\u7387\u4f4e\u7684\u539f\u56e0\u53ef\u80fd\u6709\u54ea\u4e9b\uff1f \u00b6 1\uff09\u7f13\u5b58\u914d\u7f6e\u95ee\u9898\uff0c\u5982\u7f13\u5b58\u8fc7\u671f\u65f6\u95f4\u8bbe\u7f6e\u5f97\u8f83\u77ed\uff1b 2\uff09 Http Header \u5bfc\u81f4\u65e0\u6cd5\u7f13\u5b58\uff0c\u8bf7\u68c0\u67e5\u6e90\u7ad9 Cache-Control \u6216 Expires \u7684\u8bbe\u7f6e; 3\uff09\u7f51\u7ad9\u5185\u5bb9\u57fa\u672c\u4e0a\u90fd\u662f\u52a8\u6001\u5185\u5bb9\uff0c\u53ef\u7f13\u5b58\u7684\u5185\u5bb9\u5c11; 4\uff09\u7f51\u7ad9\u8bbf\u95ee\u91cf\u4f4e\uff0c\u6587\u4ef6\u70ed\u5ea6\u8f83\u4f4e\uff0c\u5bfc\u81f4\u9891\u7e41\u56de\u6e90\u3002 \u5982\u4f55\u67e5\u770b\u670d\u52a1\u7684\u7f13\u5b58\u547d\u4e2d\u7387\uff1f \u00b6 \u53ef\u4ee5\u53bb\u53c8\u62cd\u4e91\u7ba1\u7406\u63a7\u5236\u53f0\u201c\u76d1\u63a7\u201d\u6a21\u5757\uff0c\u53ef\u4ee5\u6839\u636e\u670d\u52a1\u3001\u57df\u540d\u3001\u5730\u533a\u3001\u8fd0\u8425\u5546\u3001\u65f6\u95f4\u7b49\u7ef4\u5ea6\u67e5\u770b\u5386\u53f2\u7f13\u5b58\u547d\u4e2d\u7387\u3002\u8be6\u89c1\u6587\u6863 \u6027\u80fd\u76d1\u63a7 \u3002 \u5982\u4f55\u5224\u65ad\u8d44\u6e90\u6587\u4ef6\u5df2\u7ecf\u7f13\u5b58\u547d\u4e2d\uff1f \u00b6 \u53ef\u901a\u8fc7\u5de5\u5177\u67e5\u770b Response Headers \u4e2d X-Cache \u4fe1\u606f\uff0c\u5982\u679c\u5b57\u6bb5\u503c\u91cc\u6709\u81f3\u5c11\u6709\u4e00\u4e2a HIT \uff0c\u5219\u8868\u660e\u5df2\u7ecf\u547d\u4e2d\u7f13\u5b58\u3002\u4f8b\u5982 X-Cache:MISS from mix-hz-fdi-169; HIT(R) from ctn-zj-lna2-003 \uff0c\u8bf4\u660e\u5df2\u7ecf\u547d\u4e2d\u7f13\u5b58\u3002 \u5982\u4f55\u63d0\u9ad8\u6587\u4ef6\u7f13\u5b58\u547d\u4e2d\u7387\uff1f \u00b6 1\uff09\u5408\u7406\u7684\u914d\u7f6e\u7f13\u5b58\u8fc7\u671f\u65f6\u95f4\uff0c\u6839\u636e\u4e1a\u52a1\u60c5\u51b5\uff0c\u9002\u5f53\u63d0\u9ad8\u6587\u4ef6\u7684\u7f13\u5b58\u8fc7\u671f\u65f6\u95f4 2\uff09\u5728\u4e0d\u5f71\u54cd\u4e1a\u52a1\u8bbf\u95ee\u7684\u60c5\u51b5\u4e0b\uff0c\u53ef\u4ee5\u914d\u7f6e \u53c2\u6570\u4e0d\u8ddf\u968f \u7279\u6027 \u652f\u6301 GZIP \u538b\u7f29\u5417\uff1f \u00b6 \u53c8\u62cd\u4e91 CDN \u9ed8\u8ba4\u5f00\u542f\u4e86 GZIP \u538b\u7f29\u7279\u6027\u3002\u652f\u6301\u60c5\u51b5\u53ef\u53c2\u89c1\u6587\u6863 GZIP \u538b\u7f29 \u3002 \u56de\u6e90\u5e26\u5bbd\u8fc7\u5927\uff0c\u5982\u4f55\u6709\u6548\u964d\u4f4e\u56de\u6e90\u5e26\u5bbd\uff1f \u00b6 1\uff09\u68c0\u67e5\u7f13\u5b58\u8fc7\u671f\u65f6\u95f4\u914d\u7f6e\u662f\u5426\u751f\u6548 2\uff09\u9002\u5f53\u63d0\u9ad8\u6587\u4ef6\u7684\u7f13\u5b58\u8fc7\u671f\u65f6\u95f4\uff0c\u51cf\u5c11\u56de\u6e90\u9891\u5ea6 3\uff09\u9488\u5bf9\u70ed\u5ea6\u8f83\u9ad8\u7684\u8d44\u6e90\u6587\u4ef6\uff0c\u53ef\u4ee5\u63d0\u524d\u9488\u5bf9\u8fd9\u4e9b\u6587\u4ef6\u8fdb\u884c\u9884\u70ed\u64cd\u4f5c 4\uff09\u6839\u636e\u6e90\u7ad9\u60c5\u51b5\uff0c\u5408\u7406\u914d\u7f6e\u56de\u6e90\u7ebf\u8def\uff0c\u5177\u4f53\u9700\u8981\u8054\u7cfb\u6280\u672f\u652f\u6301 \u529f\u80fd\u76f8\u5173 \u00b6 \u4ec0\u4e48\u662f\u9759\u6001\u548c\u52a8\u6001\u7f51\u9875\uff1f \u00b6 \u9759\u6001\u7f51\u9875\uff1a\u7f51\u7ad9\u8bbe\u8ba1\u4e2d\uff0c\u7eaf\u7cb9 HTML \u683c\u5f0f\u7684\u7f51\u9875\u901a\u5e38\u88ab\u79f0\u4e3a\u201c\u9759\u6001\u7f51\u9875\u201d\u3002\u800c\u5bf9\u4e8e CDN \u6765\u8bf4\u9759\u6001\u7f51\u9875\u662f\u8fd0\u884c\u4e8e\u5ba2\u6237\u7aef\u7684\u7a0b\u5e8f\u3001\u7f51\u9875\u3001\u63d2\u4ef6\u3001\u7ec4\u4ef6\uff0c\u4f8b\u5982 HTML \u9875\u9762\u3001Flash\u3001JavaScript\u3001VBScript \u7b49\u7b49\uff0c\u4e0d\u4f1a\u968f\u7740\u5ba2\u6237\u7684\u6539\u53d8\u53d1\u751f\u53d8\u5316\u3002 \u52a8\u6001\u7f51\u9875\uff1a\u662f\u5728\u670d\u52a1\u5668\u7aef\u8fd0\u884c\u7684\u7a0b\u5e8f\u3001\u7f51\u9875\u3001\u7ec4\u4ef6\uff0c\u5b83\u4eec\u4f1a\u968f\u4e0d\u540c\u5ba2\u6237\u3001\u4e0d\u540c\u65f6\u95f4\u3001\u4e0d\u540c\u64cd\u4f5c\uff0c\u8fd4\u56de\u4e0d\u540c\u7684\u7f51\u9875\uff0c\u4f8b\u5982 ASP\u3001PHP\u3001JSP\u3001ASP\u3001CGI \u7b49\uff0c\u901a\u5e38\u52a8\u6001\u7f51\u9875\u8282\u70b9\u4e0d\u4f1a\u8fdb\u884c\u7f13\u5b58\u3002 \u652f\u6301\u7f51\u9875\u56fe\u7247\u3001\u52a8\u6001\u5185\u5bb9\u3001\u5927\u6587\u4ef6\u4e0b\u8f7d\u3001\u70b9\u64ad\u52a0\u901f\u5417\uff1f \u00b6 \u652f\u6301\u3002\u53c8\u62cd\u4e91\u5168\u7f51\u52a0\u901f\u9ed8\u8ba4\u652f\u6301\u7f51\u9875\u56fe\u7247\u3001\u52a8\u6001\u5185\u5bb9\u3001\u5927\u6587\u4ef6\u4e0b\u8f7d\u3001\u6d41\u5a92\u4f53\u70b9\u64ad\u52a0\u901f\u7b49\u5e94\u7528\u573a\u666f\u3002\u8be6\u7ec6\u4ecb\u7ecd\u8bf7\u53c2\u89c1 \u5e94\u7528\u573a\u666f \u3002 CDN \u652f\u6301\u6cdb\u57df\u540d\u52a0\u901f\u4e48\uff1f \u00b6 \u652f\u6301\u3002\u9664\u5e38\u89c4\u5f62\u5f0f\u7684\u57df\u540d\u5916\uff08\u5305\u62ec\u9876\u7ea7\u57df\u540d\uff09\uff0c\u6211\u4eec\u8fd8\u652f\u6301\u6cdb\u57df\u540d\u7ed1\u5b9a\uff0c\u6bd4\u5982 *.yourdomain.com \uff1b\u7279\u522b\u5730\uff0c\u5176\u4e2d * \u6700\u591a\u652f\u6301\u5339\u914d 4 \u5c42\uff1a [v] *.yourdomain.com => foo.yourdomain.com [v] *.yourdomain.com => bar.yourdomain.com [v] *.yourdomain.com => foo.bar.yourdomain.com [v] *.yourdomain.com => foo.bar.baz.yourdomain.com [v] *.yourdomain.com => foo.bar.baz.qux.yourdomain.com [x] *.yourdomain.com => foo.bar.baz.qux.quxx.yourdomain.com [v] *.bar.yourdomain.com => foo.bar.yourdomain.com [v] *.bar.yourdomain.com => baz.foo.bar.yourdomain.com [x] *.bar.yourdomain.com => foo.bar.baz.yourdomain.com CDN \u53ef\u4ee5\u9488\u5bf9\u5927\u6587\u4ef6\u8fdb\u884c\u5206\u6bb5\u7f13\u5b58\u5417\uff1f \u00b6 \u652f\u6301\u3002\u6211\u4eec\u9488\u5bf9\u5df2\u7ecf\u4f7f\u7528\u53c8\u62cd\u4e91\u5bf9\u8c61\u5b58\u50a8\u670d\u52a1\u7684\u5ba2\u6237\u5df2\u7ecf\u9ed8\u8ba4\u5f00\u542f\u4e86\u5206\u6bb5\u7f13\u5b58\u7279\u6027\uff1b\u9488\u5bf9\u4f7f\u7528\u81ea\u4e3b\u6e90\u7ad9\u7684 CDN \u670d\u52a1\uff0c\u7528\u6237\u53ef\u4ee5\u9488\u5bf9\u7279\u5b9a\u670d\u52a1\u6709\u9009\u62e9\u6027\u7684\u5f00\u542f\u548c\u5173\u95ed\u6b64\u7279\u6027\u3002 CDN \u8d44\u6e90\u76d1\u63a7\u7684\u7ef4\u5ea6\u5305\u62ec\u54ea\u4e9b\uff1f \u00b6 1\uff09\u5e26\u5bbd\u53ca\u6d41\u91cf\u67e5\u8be2\uff1a\u60a8\u53ef\u4ee5\u67e5\u8be2\u6307\u5b9a\u65f6\u95f4\u533a\u95f4\u3001\u57df\u540d\u3001\u670d\u52a1\u540d\u3001\u5730\u533a\u3001\u8fd0\u8425\u5546\u7b49\u6761\u4ef6\u4e0b\uff0c\u5e26\u5bbd\u53ca\u6d41\u91cf\u7684\u66f2\u7ebf\u56fe\uff0c\u4ee5\u53ca\u8fd0\u8425\u5546\u3001\u5730\u533a\u5206\u5e03\u53ca\u6392\u540d\u60c5\u51b5\uff1b 2\uff09\u8bf7\u6c42\u6570\u67e5\u8be2\uff1a\u60a8\u53ef\u4ee5\u67e5\u8be2\u6307\u5b9a\u65f6\u95f4\u533a\u95f4\u3001\u57df\u540d\u3001\u670d\u52a1\u540d\u3001\u5730\u533a\u3001\u8fd0\u8425\u5546\u7b49\u6761\u4ef6\u4e0b\uff0c\u7528\u6237\u8bf7\u6c42\u6570\u7684\u66f2\u7ebf\u56fe\uff1b 3\uff09\u56de\u6e90\u7edf\u8ba1\uff1a\u60a8\u53ef\u4ee5\u67e5\u770b\u6307\u5b9a\u65f6\u95f4\u533a\u95f4\u3001\u57df\u540d\u3001\u670d\u52a1\u540d\u7b49\u6761\u4ef6\u4e0b\uff0c\u5e26\u5bbd\u53ca\u6d41\u91cf\u66f2\u7ebf\u4ee5\u53ca\u6e90\u7ad9\u6d41\u91cf\u5206\u5e03\uff1b 4\uff09\u67e5\u8be2\u660e\u7ec6\u6570\u636e\uff1a\u60a8\u53ef\u4ee5\u67e5\u8be2\u6307\u5b9a\u65f6\u95f4\u533a\u95f4\u3001\u57df\u540d\u3001\u670d\u52a1\u540d\u3001\u5730\u533a\u3001\u8fd0\u8425\u5546\u7b49\u6761\u4ef6\u4e0b\uff0c\u67e5\u8be2\u6bcf\u65e5\u7684\u6d41\u91cf\u3001\u8bf7\u6c42\u91cf\u3001\u9759\u6001\u8bf7\u6c42\u3001\u52a8\u6001\u8bf7\u6c42\u3001HTTPS \u8bf7\u6c42\u3001\u5cf0\u503c\u5e26\u5bbd\u3001\u5cf0\u503c\u5e26\u5bbd\u65f6\u95f4\u7b49\u660e\u7ec6\u6570\u636e\uff1b 5\uff09\u5bfc\u51fa Excel \u62a5\u8868\uff1a\u60a8\u53ef\u4ee5\u67e5\u8be2\u6307\u5b9a\u65f6\u95f4\u533a\u95f4\u3001\u57df\u540d\u3001\u670d\u52a1\u540d\u3001\u5730\u533a\u3001\u8fd0\u8425\u5546\u7b49\u6761\u4ef6\u4e0b\uff0c\u53ef\u4ee5\u5bfc\u51fa 5 \u5206\u949f\u7c92\u5ea6\u8be6\u7ec6\u7684\u8bf7\u6c42\u6570\u3001\u6d41\u91cf\u3001\u5e26\u5bbd\u3001\u5cf0\u503c\u5e26\u5bbd\u65f6\u95f4\u7b49\u8be6\u7ec6\u6570\u636e\u3002 \u5982\u4f55\u83b7\u53d6\u6700\u7ec8\u7528\u6237 IP \uff1f \u00b6 \u53c8\u62cd\u4e91 CDN \u56de\u5ba2\u6237\u6e90\u7684\u65f6\u5019\u4f1a\u5e26\u4e0a X-Real-IP \u548c X-Forwarded-For \u7684\u8bf7\u6c42\u5934\u4e0b\u53bb\uff0c\u503c\u4e3a\u7528\u6237\u5b9e\u9645\u8bbf\u95ee CDN \u7684\u6765\u6e90 IP \u5730\u5740\u3002\u7279\u522b\u5730\uff0c\u4e3a\u4e86\u517c\u5bb9\u90e8\u5206\u670d\u52a1\u7aef\u7a0b\u5e8f\uff0c\u6211\u4eec\u989d\u5916\u8fd8\u63d0\u4f9b\u4e86 Client-IP \u8bf7\u6c42\u5934\u7684\u652f\u6301\uff0c\u5176\u503c\u548c X-Real-IP \u3001 X-Forwarded-For \u76f8\u540c\u3002 \u793a\u4f8b\u4e00\uff1aPHP \u4ee3\u7801\u00b6 <?php $ip = $_SERVER[\"HTTP_X_REAL_IP\"]; echo $ip; ?> \u793a\u4f8b\u4e8c\uff1a Nginx \u914d\u7f6e\u00b6 server { listen 80; add_header X-Real-IP $http_x_real_ip; } CDN \u56de\u6e90\u662f\u5426\u652f\u6301\u91cd\u5b9a\u5411\u8ddf\u968f\uff1f \u00b6 \u652f\u6301\u3002\u6e90\u7ad9\u54cd\u5e94 301/302\uff0cCDN\u4f1a\u81ea\u52a8\u8ddf\u968f 302 \u5230\u6307\u5b9a location \u5730\u5740\u83b7\u53d6\u6587\u4ef6\u5e76\u8fdb\u884c\u7f13\u5b58\uff0c\u52a0\u901f\u7528\u6237\u8bbf\u95ee\u4f53\u9a8c\u3002 \u652f\u6301\u89c6\u9891\u62d6\u62c9\u5417\uff1f \u00b6 \u652f\u6301\u3002\u76ee\u524d\u4ec5\u652f\u6301 FLV \u548c MP4 \u683c\u5f0f\u7684\u89c6\u9891\u5934\u62d6\u62c9\uff0c\u5176\u4e2d FLV \u6309\u5b57\u8282\u62d6\u62c9\uff0cMP4 \u6309\u65f6\u95f4\u62d6\u62c9\u3002\u66f4\u591a\u4e86\u89e3\u8bf7\u53c2\u89c1 \u89c6\u9891\u62d6\u62c9\u6587\u6863 \u3002 \u662f\u5426\u652f\u6301\u5ffd\u7565\u53c2\u6570\u7f13\u5b58\uff1f \u00b6 \u652f\u6301\u3002\u9ed8\u8ba4\u662f\u53c2\u6570\u8ddf\u968f\uff0c\u9700\u8981\u53bb\u7ba1\u7406\u63a7\u5236\u53f0\u5f00\u542f\u3002 \u662f\u5426\u652f\u6301\u8de8\u57df\u8bbf\u95ee\u914d\u7f6e\uff1f \u00b6 \u652f\u6301\u3002\u8be6\u7ec6\u914d\u7f6e\u53c2\u89c1 \u8de8\u57df\u914d\u7f6e\u6587\u6863 \u3002 \u5b89\u5168\u76f8\u5173 \u00b6 \u652f\u6301\u54ea\u4e9b\u9632\u76d7\u94fe\u65b9\u5f0f\uff1f \u00b6 \u521d\u7ea7\u7684\u9632\u76d7\u94fe\u65b9\u5f0f\u5305\u62ec IP \u7981\u7528\u3001\u5730\u533a\u8bbf\u95ee\u9650\u5236\u3001User-Agent \u9632\u76d7\u94fe\u3001Referer \u9632\u76d7\u94fe\uff1b\u9ad8\u7ea7\u7684\u9632\u76d7\u94fe\u65b9\u5f0f\u5305\u62ec Token \u9632\u76d7\u94fe\u3001\u56de\u6e90\u9274\u6743\u3002\u66f4\u591a\u4e86\u89e3\u8bf7\u53c2\u89c1 \u8bbf\u95ee\u63a7\u5236\u6587\u6863 \u3002 \u9632\u76d7\u94fe\u7684\u8bbe\u7f6e\uff0c\u5bf9\u7f51\u7ad9\u6709\u4ec0\u4e48\u5f71\u54cd\uff1f \u00b6 \u8bbe\u7f6e\u9632\u76d7\u94fe\u5373\u8bbe\u7f6e User-Agent\u3001Referer\u3001Token \u7b49\u9632\u76d7\u94fe\uff0c\u7f51\u7ad9\u8bbf\u95ee\u8005\u53ea\u6709\u5408\u6cd5\u7684 User-Agent\u3001Referer\u3001Token \u624d\u80fd\u8fdb\u884c\u8bbf\u95ee\uff0c\u907f\u514d\u6076\u610f\u8bf7\u6c42\u5bfc\u81f4\u7684\u6d41\u91cf\u7a81\u589e\u3002 \u652f\u6301\u54ea\u4e9b\u5b89\u5168\u9632\u62a4\u65b9\u5f0f\uff1f \u00b6 \u652f\u6301 WAF \u9632\u62a4\u3001CC \u9632\u62a4\u3001IP \u8bbf\u95ee\u9650\u5236\u7b49\u5e94\u7528\u5c42\u5b89\u5168\u9632\u62a4\u63aa\u65bd\u3002\u66f4\u591a\u4e86\u89e3\u8bf7\u53c2\u89c1 \u5b89\u5168\u9632\u62a4 \u3002 \u8d44\u6e90\u76f8\u5173 \u00b6 CDN \u670d\u52a1\u7684\u8282\u70b9\u5206\u5e03\u662f\u600e\u6837\u7684\uff1f \u00b6 \u622a\u81f3\u76ee\u524d\u4e3a\u6b62\uff0c\u76ee\u524d\u5728\u56fd\u5185 26 \u4e2a\u7701\u4efd\u90e8\u7f72\u6709 CDN \u8282\u70b9\uff0c\u8282\u70b9\u6570\u91cf\u8d85\u8fc7 150 \u4e2a\uff0c\u8986\u76d6\u7684\u8fd0\u8425\u5546\u5305\u62ec\u7535\u4fe1\u3001\u8054\u901a\u3001\u79fb\u52a8\u3001\u79d1\u6280\u7f51\u3001\u6559\u80b2\u7f51\u3001\u957f\u5bbd\u3001\u534e\u6570\u7b49\u3002 \u652f\u6301\u6d77\u5916\u52a0\u901f\u5417\uff1f \u00b6 \u652f\u6301\u3002\u76ee\u524d\u53c8\u62cd\u4e91 CDN \u670d\u52a1\u5728\u9999\u6e2f\u3001\u53f0\u6e7e\u3001\u65b0\u52a0\u5761\u3001\u7f8e\u56fd\u3001\u5fb7\u56fd\u7b49\u5730\u533a\u90e8\u7f72\u6709 CDN \u8282\u70b9\u3002 \u8bc1\u4e66\u76f8\u5173 \u00b6 \u652f\u6301 HTTPS \u52a0\u901f\u5417\uff1f \u00b6 \u652f\u6301\u3002\u8be6\u7ec6\u4ecb\u7ecd\u8bf7\u53c2\u89c1 \u81ea\u5b9a\u4e49 SSL \u670d\u52a1\u6587\u6863 \u3002 HTTPS \u52a0\u901f\u652f\u6301\u54ea\u4e9b\u7c7b\u578b\u7684\u8bc1\u4e66\uff1f \u00b6 \u76ee\u524d\u53c8\u62cd\u4e91 HTTPS \u52a0\u901f\u4ec5\u652f\u6301 PEM \u683c\u5f0f\u7684\u8bc1\u4e66\uff0c\u5982\u60a8\u7533\u8bf7\u7684\u662f\u5176\u4ed6\u683c\u5f0f\u7684\u8bc1\u4e66\uff0c\u9700\u8981\u5c06\u5176\u8f6c\u6362\u4e3a PEM \u683c\u5f0f\u3002\u5982\u4e0b\u5217\u4e3e\u51e0\u79cd\u6bd4\u8f83\u5e38\u89c1\u7684\u8f6c\u6362\u65b9\u5f0f\uff1a 1\uff09DER \u8f6c\u6362\u4e3a PEM \u8bc1\u4e66\u8f6c\u5316\uff1a opensslx509 -inform der -in your-certificate.cer -out upyun-certificate.pem \u79c1\u94a5\u8f6c\u5316\uff1a openssl rsa-inform DER -outform pem -in your-privatekey.der -out upyun-privatekey.pem 2\uff09P7B \u8f6c\u6362\u4e3a PEM \u8bc1\u4e66\u8f6c\u5316\uff1a openssl pkcs7-print_certs -in your-incertificat.p7b -out upyun-certificate.cer \u83b7\u53d6 upyun-certificat.cer \u91cc\u9762[-----BEGIN CERTIFICATE-----\uff0c -----ENDCERTIFICATE-----] \u7684\u5185\u5bb9\u4f5c\u4e3a\u8bc1\u4e66\u4e0a\u4f20\u3002 \u79c1\u94a5\u8f6c\u5316\uff1a\u65e0\u79c1\u94a5 3\uff09PFX \u8f6c\u6362\u4e3a PEM \u8bc1\u4e66\u8f6c\u5316\uff1a openssl pkcs12-in certname.pfx -nokeys -out upyun-cert.pem \u79c1\u94a5\u8f6c\u5316\uff1a openssl pkcs12-in certname.pfx -nocerts -out upyun-key.pem -nodes \u8bc1\u4e66\u4e0a\u4f20\u5931\u8d25\u5982\u4f55\u5904\u7406\uff1f \u00b6 1\uff09\u9996\u5148\u786e\u8ba4\u8bc1\u4e66\u683c\u5f0f\u662f\u5426\u4e3a PEM \u683c\u5f0f\uff0c\u5e76\u4e14\u662f\u5426\u7b26\u5408 [-----BEGINCERTIFICATE-----\uff0c-----ENDCERTIFICATE-----] \u5f00\u5934\u7ed3\u5c3e\u3001\u6bcf\u884c 64 \u4e2a\u5b57\u7b26\u3001\u6700\u540e\u4e00\u884c\u4e0d\u8d85\u8fc7 64 \u4e2a\u5b57\u7b26\u7684\u8bc1\u4e66\u89c4\u5219\u3002\u5982\u679c\u975e PEM \u683c\u5f0f\uff0c\u5219\u53ef\u6309\u4e0a\u6587\u4e2d\u7684\u65b9\u5f0f\u8fdb\u884c\u8f6c\u6362 2\uff09\u68c0\u67e5\u79c1\u94a5\u683c\u5f0f\u662f\u5426\u6b63\u786e\uff0c\u662f\u5426\u4ee5 -----BEGIN RSA PRIVATEKEY----- \u5f00\u5934\uff1b\u5982\u679c\u662f -----BEGIN PRIVATEKEY----- \u5f00\u5934\uff0c\u5219\u53ef\u6267\u884c openssl rsa -in your-old.key -out upyun-new.key \u5bf9\u79c1\u94a5\u8fdb\u884c\u8f6c\u6362 \u4ec0\u4e48\u662f SNI \u6280\u672f\uff1f \u00b6 SNI\uff08ServerName Indication\uff09\u5b9a\u4e49\u5728 RFC 4366\uff0c\u662f\u7528\u6765\u6539\u5584 SSL(Secure Socket Layer)\u548c TLS(Transport Layer Security) \u7684\u4e00\u9879\u7279\u6027\uff0c\u5728 SSLv3/TLSv1 \u4e2d\u88ab\u542f\u7528\u3002\u5b83\u5141\u8bb8\u5ba2\u6237\u7aef\u5728\u53d1\u8d77 SSL \u63e1\u624b\u8bf7\u6c42\u65f6\uff08\u5373\uff1a\u5ba2\u6237\u7aef\u53d1\u51fa SSL \u8bf7\u6c42\u4e2d\u7684 ClientHello \u9636\u6bb5\uff09\uff0c\u5c31\u63d0\u4ea4\u8bf7\u6c42\u7684 Host \u4fe1\u606f\uff0c\u4f7f\u5f97\u670d\u52a1\u5668\u80fd\u591f\u5207\u6362\u5230\u6b63\u786e\u7684\u57df\u5e76\u8fd4\u56de\u76f8\u5e94\u7684\u8bc1\u4e66\uff0c\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u5982\u679c\u8981\u4f7f\u7528 SNI \uff0c\u9700\u8981\u5ba2\u6237\u7aef\u548c\u670d\u52a1\u5668\u7aef\u540c\u65f6\u6ee1\u8db3\u6761\u4ef6\uff0c\u5bf9\u4e8e\u5f53\u524d\u5927\u591a\u6570\u6d4f\u89c8\u5668\u6765\u8bf4\u90fd\u4ee5\u652f\u6301\uff0c\u4e5f\u53ef\u53c2\u8003 \u8fd9\u91cc \u652f\u6301 HTTP/2 \u5417\uff1f \u00b6 \u53c8\u62cd\u4e91\u5f53\u524d\u5df2\u5168\u5e73\u53f0\u652f\u6301 HTTP/2\uff0c\u5e76\u5df2\u9ed8\u8ba4\u5f00\u542f\u3002 HTTP/2 \u5373\u8d85\u6587\u672c\u4f20\u8f93\u534f\u8bae 2.0 \uff0c\u662f\u4e0b\u4e00\u4ee3 HTTP \u534f\u8bae\u3002\u5b83\u7531\u4e92\u8054\u7f51\u5de5\u7a0b\u4efb\u52a1\u7ec4\uff08IETF\uff09\u7684 Hypertext Transfer Protocol Bis (httpbis) \u5de5\u4f5c\u5c0f\u7ec4\u8fdb\u884c\u5f00\u53d1\uff0c\u4ee5 SPDY \u4e3a\u539f\u578b\uff0c\u7ecf\u8fc7\u4e24\u5e74\u591a\u7684\u8ba8\u8bba\u548c\u5b8c\u5584\u6700\u7ec8\u786e\u5b9a\uff0c\u4f18\u52bf\u5982\u4e0b\uff1a 1\uff09HTTP/2 \u91c7\u7528\u4e8c\u8fdb\u5236\u683c\u5f0f\u4f20\u8f93\u6570\u636e\uff0c\u5176\u5728\u534f\u8bae\u7684\u89e3\u6790\u548c\u4f18\u5316\u6269\u5c55\u4e0a\u5e26\u6765\u66f4\u591a\u7684\u4f18\u52bf\u548c\u53ef\u80fd\u3002 2\uff09HTTP/2 \u5bf9\u6d88\u606f\u5934\u91c7\u7528 HPACK \u8fdb\u884c\u538b\u7f29\u4f20\u8f93\uff0c\u80fd\u591f\u8282\u7701\u6d88\u606f\u5934\u5360\u7528\u7684\u7f51\u7edc\u7684\u6d41\u91cf\u3002 3\uff09\u591a\u8def\u590d\u7528\uff0c\u7b80\u5355\u8bf4\u5c31\u662f\u6240\u6709\u7684\u8bf7\u6c42\u53ef\u4ee5\u901a\u8fc7\u4e00\u4e2a TCP \u8fde\u63a5\u5e76\u53d1\u5b8c\u6210\u3002 4\uff09Server Push\uff1a\u670d\u52a1\u7aef\u80fd\u591f\u66f4\u5feb\u7684\u628a\u8d44\u6e90\u63a8\u9001\u7ed9\u5ba2\u6237\u7aef\u3002 \u5982\u679c\u60f3\u4f7f\u7528 HTTP/2\uff0c\u9700\u8981\u505a\u7279\u6b8a\u914d\u7f6e\u5417\uff1f \u00b6 \u56e0 HTTP/2 \u662f\u5728 HTTPS \u7684\u57fa\u7840\u4e0a\u5b9e\u73b0\u7684\uff0c\u5982\u679c\u60f3\u4f7f\u7528 HTTP/2\uff0c\u5219\u57df\u540d\u5fc5\u987b\u652f\u6301 HTTPS \u8bbf\u95ee\uff0c\u6240\u4ee5\u53ea\u9700\u6309\u7167 \u81ea\u5b9a\u4e49 SSL \u670d\u52a1 \u4e2d\u7684\u6b65\u9aa4\u8fdb\u884c\u914d\u7f6e\u5373\u53ef\uff0c\u5176\u4ed6\u65e0\u9700\u505a\u4efb\u4f55\u7279\u6b8a\u914d\u7f6e\u3002","title":"\u5e38\u89c1\u95ee\u9898"},{"location":"cdn/faq/#_1","text":"","title":"\u7f13\u5b58\u76f8\u5173"},{"location":"cdn/faq/#cdn","text":"\u5728\u6ca1\u6709\u5339\u914d\u5230\u81ea\u5b9a\u4e49\u7f13\u5b58\u89c4\u5219\u4e14\u6e90\u7ad9\u4e5f\u6ca1\u6709\u8fd4\u56de\u4efb\u4f55\u6709\u6548\u7f13\u5b58\u5934\u7684\u60c5\u51b5\u4e0b\uff0c\u6211\u4eec\u7684\u9ed8\u8ba4\u914d\u7f6e\u7b56\u7565\u5982\u4e0b\uff1a 1\uff09\u9488\u5bf9\u9759\u6001\u8d44\u6e90\uff0c\u6240\u6709\u6b63\u5e38\u72b6\u6001\u7801\uff08\u5927\u4e8e\u7b49\u4e8e 200 \u5c0f\u4e8e 400\uff09\u5747\u7f13\u5b58 8 \u5929\u3002\u7279\u522b\u5730\uff0c301 \u54cd\u5e94\u7f13\u5b58 2 \u5c0f\u65f6\uff0c302 \u54cd\u5e94\u7f13\u5b58 20 \u5206\u949f 2\uff09\u9488\u5bf9\u52a8\u6001\u8d44\u6e90\uff0c\u7a0b\u5e8f\u4f1a\u81ea\u52a8\u8bc6\u522b\uff0c\u5219\u4e0d\u8fdb\u884c\u7f13\u5b58 3\uff09\u5bf9\u4e8e\u5176\u4ed6\u5927\u4e8e\u7b49\u4e8e 400 \u7684\u4e0d\u6b63\u5e38\u54cd\u5e94\uff0c\u5219\u4e0d\u8fdb\u884c\u7f13\u5b58","title":"CDN \u9ed8\u8ba4\u7684\u7f13\u5b58\u7b56\u7565\u662f\u600e\u6837\u7684\uff1f"},{"location":"cdn/faq/#cdn_1","text":"CDN \u7f13\u5b58\u7ec4\u4ef6\u4e25\u683c\u9075\u5b88 HTTP \u7684\u6807\u51c6\u534f\u8bae\uff0c\u5177\u4f53\u7684\u7f13\u5b58\u65f6\u95f4\u7531 HTTP \u54cd\u5e94\u5934\u91cc\u9762\u7684 Cache-Control \u548c Expires \u54cd\u5e94\u5934\u63a7\u5236\u3002 \u6ce8\u610f\uff1a\u7531\u4e8e Cache-Control \u4f7f\u7528\u7684\u662f\u76f8\u5bf9\u65f6\u95f4\u6765\u6307\u5b9a\u7684\u8fc7\u671f\u65f6\u95f4\uff0c\u6240\u4ee5\u4e00\u822c\u4f7f\u7528 Cache-Control \u6765\u6307\u5b9a\u8fc7\u671f\u65f6\u95f4\u3002","title":"CDN \u8d44\u6e90\u662f\u5982\u4f55\u63a7\u5236\u7f13\u5b58\u8fc7\u671f\u65f6\u95f4\u7684\uff1f"},{"location":"cdn/faq/#_2","text":"\u4e0d\u7f13\u5b58\u914d\u7f6e\uff08\u540e\u53f0\u8bbe\u7f6e\uff09 > \u81ea\u5b9a\u4e49\u7f13\u5b58\u914d\u7f6e\uff08\u540e\u53f0\u914d\u7f6e\uff09 > \u6e90\u7ad9\u7f13\u5b58\u914d\u7f6e > \u9ed8\u8ba4\u7f13\u5b58\u7b56\u7565\u3002\u4ee5\u4e0a\u7f13\u5b58\u914d\u7f6e\u4f18\u5148\u7ea7\u76ee\u524d\u4e0d\u652f\u6301\u987a\u5e8f\u8c03\u8282\uff0c\u540e\u7eed\u6211\u4eec\u4f1a\u8003\u8651\u652f\u6301\u3002","title":"\u7f13\u5b58\u914d\u7f6e\u4f18\u5148\u7ea7\u662f\u600e\u6837\u7684\uff1f"},{"location":"cdn/faq/#_3","text":"\u53ef\u4ee5\u901a\u8fc7 Cache-Control\uff1amax-age=xxxx \u4e2d max-age \u7684\u503c\u548c\u81ea\u5b9a\u4e49\u7f13\u5b58\u914d\u7f6e\u7684\u503c\u8fdb\u884c\u6bd4\u8f83\u5373\u53ef\uff0c\u5982\u679c\u4e00\u81f4\u5219\u8bf4\u660e\u5df2\u7ecf\u751f\u6548\u3002\u8be6\u60c5\u53ef\u53c2\u89c1 \u7f13\u5b58\u9a8c\u8bc1 \u3002","title":"\u5982\u4f55\u5224\u65ad\u8bbe\u7f6e\u7684\u7f13\u5b58\u65f6\u95f4\u5df2\u7ecf\u751f\u6548\uff1f"},{"location":"cdn/faq/#cdn_2","text":"\u4e0d\u662f\u5b9e\u65f6\u7684\uff0c\u7f13\u5b58\u66f4\u65b0\u5206\u4e3a\u4e3b\u52a8\u66f4\u65b0\u548c\u88ab\u52a8\u66f4\u65b0\u4e24\u79cd\u65b9\u5f0f\u3002\u4e3b\u52a8\u66f4\u65b0\u4e3b\u8981\u662f\u6307\u540c\u540d\u6587\u4ef6\u5728\u6e90\u7ad9\u66f4\u65b0\u4e4b\u540e\uff0c\u9700\u8981\u5728\u7ba1\u7406\u63a7\u5236\u53f0\u624b\u52a8\u53bb\u5237\u65b0\u6587\u4ef6\uff0c\u6216\u8005\u901a\u8fc7 API \u63a5\u53e3\u5b8c\u6210\uff1b\u88ab\u52a8\u5237\u65b0\u662f\u7b49\u6587\u4ef6\u5728 CDN \u8282\u70b9\u7684\u7f13\u5b58\u8fc7\u671f\u4e4b\u540e\u56de\u6e90\u62c9\u53d6\u6700\u65b0\u7684\u6587\u4ef6\u3002","title":"\u5df2\u7ecf\u7f13\u5b58\u5728 CDN \u8282\u70b9\u7684\u6587\u4ef6\u5982\u4f55\u66f4\u65b0\uff0c\u662f\u5b9e\u65f6\u7684\u4e48\uff1f\uff1f"},{"location":"cdn/faq/#cdn_3","text":"\u4e00\u822c\u60c5\u51b5\u4e0b\uff0cCDN \u9664\u4e86\u5bf9\u4e8e PHP\u3001JSP\u3001ASP \u7b49\u52a8\u6001\u6587\u4ef6\u4e0d\u80fd\u7f13\u5b58\u5916 \uff0c\u5176\u4ed6\u6587\u4ef6\u90fd\u53ef\u4ee5\u7f13\u5b58\u3002","title":"CDN \u53ef\u4ee5\u7f13\u5b58\u54ea\u4e9b\u6587\u4ef6\uff1f"},{"location":"cdn/faq/#_4","text":"\u4e0d\u53ef\u4ee5\u3002\u53c8\u62cd\u4e91 CDN \u4f1a\u9488\u5bf9\u6587\u4ef6\u81ea\u52a8\u8fdb\u884c\u52a8\u9759\u5206\u79bb\uff0c\u4e0d\u4f1a\u5bf9\u52a8\u6001\u7f51\u9875\u8fdb\u884c\u7f13\u5b58\u3002","title":"\u52a8\u6001\u7f51\u9875\u6587\u4ef6\u53ef\u4ee5\u7f13\u5b58\u5417\uff1f"},{"location":"cdn/faq/#https-http","text":"\u5982\u679c\u5728\u7ba1\u7406\u63a7\u5236\u540e\u53f0\u56de\u6e90\u65b9\u5f0f\u9009\u62e9\uff3b\u534f\u8bae\u8ddf\u968f\uff3d\uff0c\u5c31\u4e0d\u5171\u4eab\u3002\u4e0d\u5f00\u542f\uff3b\u534f\u8bae\u8ddf\u968f\uff3d\uff0c\u5219\u5171\u4eab\u3002","title":"HTTPS \u548c HTTP \u53ef\u4ee5\u5171\u4eab\u4e00\u4efd\u7f13\u5b58\u8d44\u6e90\u5417\uff1f"},{"location":"cdn/faq/#_5","text":"","title":"\u5237\u65b0\u76f8\u5173"},{"location":"cdn/faq/#_6","text":"\u7f13\u5b58\u5237\u65b0\uff1a\u662f\u6307\u901a\u8fc7\u7ba1\u7406\u63a7\u5236\u53f0\u6216\u8005 API \u63a5\u53e3\u7684\u65b9\u5f0f\u5c06\u7f13\u5b58\u5728 CDN \u8282\u70b9\u7684\u8d44\u6e90\u6587\u4ef6\u5220\u9664\u6216\u81f4\u8fc7\u671f\u5904\u7406\uff0c\u65b0\u7684\u8bf7\u6c42\u8fc7\u6765\u4e4b\u540e\u4f1a\u56de\u6e90\u7ad9\u670d\u52a1\u5668\u83b7\u53d6\u65b0\u7684\u6587\u4ef6\u3002 \u6587\u4ef6\u9884\u70ed\uff1a\u662f\u63d0\u524d\u5c06\u8d44\u6e90\u6587\u4ef6\u7f13\u5b58\u81f3 CDN \u8fb9\u7f18\u8282\u70b9\uff0c\u65b0\u7684\u8bf7\u6c42\u8fc7\u6765\u4e4b\u540e\u53ef\u4ee5\u76f4\u63a5\u547d\u4e2d\uff0c\u65e0\u9700\u56de\u6e90\u670d\u52a1\u5668\u83b7\u53d6\u8d44\u6e90\u6587\u4ef6\uff0c\u53ef\u4ee5\u6709\u6548\u964d\u4f4e\u6e90\u7ad9\u538b\u529b\uff0c\u63d0\u5347\u6700\u7ec8\u7528\u6237\u9996\u6b21\u8bbf\u95ee\u4f53\u9a8c\u3002","title":"\u7f13\u5b58\u5237\u65b0\u548c\u6587\u4ef6\u9884\u70ed\u6709\u4f55\u533a\u522b\uff1f"},{"location":"cdn/faq/#url","text":"\u89c4\u5219\u5237\u65b0\uff1a\u662f\u6307\u6e90\u7ad9\u6279\u91cf\u66f4\u65b0\u6587\u4ef6\u65f6\uff0c\u4f8b\u5982\u67d0\u4e2a\u76ee\u5f55\u6216\u8005\u67d0\u79cd\u7c7b\u578b\u7684\u6587\u4ef6\uff0c\u9700\u8981\u6279\u91cf\u5237\u65b0\u6587\u4ef6\uff0c\u53ef\u4ee5\u901a\u8fc7\u89c4\u5219\u5237\u65b0\u6765\u8fdb\u884c\u3002\u89c4\u5219\u793a\u4f8b\uff1a http://example.com/video/* \u3001 http://example.com/image/*.png \u3002 URL \u5237\u65b0\uff1a\u662f\u6307\u6e90\u7ad9\u66f4\u65b0\u5c11\u91cf\u8d44\u6e90\u6587\u4ef6\u65f6\uff0c\u53ef\u4ee5\u901a\u8fc7 URL \u5237\u65b0\u6765\u8fdb\u884c\u5237\u65b0\u3002\u793a\u4f8b\uff1a http://example.com/image/logo.png \u3002 \u8be6\u7ec6\u4ecb\u7ecd\uff0c\u8bf7\u53c2\u89c1 \u5237\u65b0\u9884\u70ed \u3002","title":"\u89c4\u5219\u5237\u65b0\u548c URL \u5237\u65b0\u6709\u4ec0\u4e48\u533a\u522b\uff1f"},{"location":"cdn/faq/#_7","text":"\u7f13\u5b58\u5237\u65b0\u7684\u5168\u7f51\u751f\u6548\u65f6\u95f4\u4e00\u822c\u662f 10 \u5206\u949f\u5185\u5237\u65b0\u5b8c\u6210\u3002","title":"\u7f13\u5b58\u5237\u65b0\u7684\u751f\u6548\u65f6\u95f4\u662f\u591a\u5c11\uff1f"},{"location":"cdn/faq/#_8","text":"\u4e0d\u9700\u8981\u3002\u4f7f\u7528\u4e86\u53c8\u62cd\u4e91\u5bf9\u8c61\u5b58\u50a8\u670d\u52a1\u65f6\uff0c\u5b58\u50a8\u4e2d\u8d44\u6e90\u66f4\u65b0\uff08\u66ff\u6362\u6216\u5220\u9664\uff09\u65f6\u4f1a\u81ea\u52a8\u89e6\u53d1 CDN \u8282\u70b9\u5237\u65b0\u7f13\u5b58\uff0c\u4f1a\u5728 5 \u5206\u949f\u5185\u751f\u6548\uff0c\u6240\u4ee5\u60a8\u65e0\u9700\u8fdb\u884c\u624b\u52a8\u5237\u65b0\u64cd\u4f5c\u3002","title":"\u4f7f\u7528\u4e86\u53c8\u62cd\u4e91\u5bf9\u8c61\u5b58\u50a8\u670d\u52a1\u65f6\uff0c\u6587\u4ef6\u66f4\u65b0\u9700\u8981\u624b\u52a8\u5237\u65b0\u5417\uff1f"},{"location":"cdn/faq/#cdn_4","text":"\u901a\u8fc7\u7ba1\u7406\u63a7\u5236\u53f0\u6216 API \u63a5\u53e3\u6267\u884c\u624b\u52a8\u5237\u65b0\u7f13\u5b58\u3002","title":"\u53d1\u73b0\u4ece CDN \u8bbf\u95ee\u7684\u8d44\u6e90\u6587\u4ef6\u548c\u6e90\u7ad9\u8d44\u6e90\u4e0d\u4e00\u81f4\u600e\u4e48\u529e\uff1f"},{"location":"cdn/faq/#_9","text":"","title":"\u6027\u80fd\u76f8\u5173"},{"location":"cdn/faq/#_10","text":"1\uff09\u7f13\u5b58\u914d\u7f6e\u95ee\u9898\uff0c\u5982\u7f13\u5b58\u8fc7\u671f\u65f6\u95f4\u8bbe\u7f6e\u5f97\u8f83\u77ed\uff1b 2\uff09 Http Header \u5bfc\u81f4\u65e0\u6cd5\u7f13\u5b58\uff0c\u8bf7\u68c0\u67e5\u6e90\u7ad9 Cache-Control \u6216 Expires \u7684\u8bbe\u7f6e; 3\uff09\u7f51\u7ad9\u5185\u5bb9\u57fa\u672c\u4e0a\u90fd\u662f\u52a8\u6001\u5185\u5bb9\uff0c\u53ef\u7f13\u5b58\u7684\u5185\u5bb9\u5c11; 4\uff09\u7f51\u7ad9\u8bbf\u95ee\u91cf\u4f4e\uff0c\u6587\u4ef6\u70ed\u5ea6\u8f83\u4f4e\uff0c\u5bfc\u81f4\u9891\u7e41\u56de\u6e90\u3002","title":"\u7f13\u5b58\u547d\u4e2d\u7387\u4f4e\u7684\u539f\u56e0\u53ef\u80fd\u6709\u54ea\u4e9b\uff1f"},{"location":"cdn/faq/#_11","text":"\u53ef\u4ee5\u53bb\u53c8\u62cd\u4e91\u7ba1\u7406\u63a7\u5236\u53f0\u201c\u76d1\u63a7\u201d\u6a21\u5757\uff0c\u53ef\u4ee5\u6839\u636e\u670d\u52a1\u3001\u57df\u540d\u3001\u5730\u533a\u3001\u8fd0\u8425\u5546\u3001\u65f6\u95f4\u7b49\u7ef4\u5ea6\u67e5\u770b\u5386\u53f2\u7f13\u5b58\u547d\u4e2d\u7387\u3002\u8be6\u89c1\u6587\u6863 \u6027\u80fd\u76d1\u63a7 \u3002","title":"\u5982\u4f55\u67e5\u770b\u670d\u52a1\u7684\u7f13\u5b58\u547d\u4e2d\u7387\uff1f"},{"location":"cdn/faq/#_12","text":"\u53ef\u901a\u8fc7\u5de5\u5177\u67e5\u770b Response Headers \u4e2d X-Cache \u4fe1\u606f\uff0c\u5982\u679c\u5b57\u6bb5\u503c\u91cc\u6709\u81f3\u5c11\u6709\u4e00\u4e2a HIT \uff0c\u5219\u8868\u660e\u5df2\u7ecf\u547d\u4e2d\u7f13\u5b58\u3002\u4f8b\u5982 X-Cache:MISS from mix-hz-fdi-169; HIT(R) from ctn-zj-lna2-003 \uff0c\u8bf4\u660e\u5df2\u7ecf\u547d\u4e2d\u7f13\u5b58\u3002","title":"\u5982\u4f55\u5224\u65ad\u8d44\u6e90\u6587\u4ef6\u5df2\u7ecf\u7f13\u5b58\u547d\u4e2d\uff1f"},{"location":"cdn/faq/#_13","text":"1\uff09\u5408\u7406\u7684\u914d\u7f6e\u7f13\u5b58\u8fc7\u671f\u65f6\u95f4\uff0c\u6839\u636e\u4e1a\u52a1\u60c5\u51b5\uff0c\u9002\u5f53\u63d0\u9ad8\u6587\u4ef6\u7684\u7f13\u5b58\u8fc7\u671f\u65f6\u95f4 2\uff09\u5728\u4e0d\u5f71\u54cd\u4e1a\u52a1\u8bbf\u95ee\u7684\u60c5\u51b5\u4e0b\uff0c\u53ef\u4ee5\u914d\u7f6e \u53c2\u6570\u4e0d\u8ddf\u968f \u7279\u6027","title":"\u5982\u4f55\u63d0\u9ad8\u6587\u4ef6\u7f13\u5b58\u547d\u4e2d\u7387\uff1f"},{"location":"cdn/faq/#gzip","text":"\u53c8\u62cd\u4e91 CDN \u9ed8\u8ba4\u5f00\u542f\u4e86 GZIP \u538b\u7f29\u7279\u6027\u3002\u652f\u6301\u60c5\u51b5\u53ef\u53c2\u89c1\u6587\u6863 GZIP \u538b\u7f29 \u3002","title":"\u652f\u6301 GZIP \u538b\u7f29\u5417\uff1f"},{"location":"cdn/faq/#_14","text":"1\uff09\u68c0\u67e5\u7f13\u5b58\u8fc7\u671f\u65f6\u95f4\u914d\u7f6e\u662f\u5426\u751f\u6548 2\uff09\u9002\u5f53\u63d0\u9ad8\u6587\u4ef6\u7684\u7f13\u5b58\u8fc7\u671f\u65f6\u95f4\uff0c\u51cf\u5c11\u56de\u6e90\u9891\u5ea6 3\uff09\u9488\u5bf9\u70ed\u5ea6\u8f83\u9ad8\u7684\u8d44\u6e90\u6587\u4ef6\uff0c\u53ef\u4ee5\u63d0\u524d\u9488\u5bf9\u8fd9\u4e9b\u6587\u4ef6\u8fdb\u884c\u9884\u70ed\u64cd\u4f5c 4\uff09\u6839\u636e\u6e90\u7ad9\u60c5\u51b5\uff0c\u5408\u7406\u914d\u7f6e\u56de\u6e90\u7ebf\u8def\uff0c\u5177\u4f53\u9700\u8981\u8054\u7cfb\u6280\u672f\u652f\u6301","title":"\u56de\u6e90\u5e26\u5bbd\u8fc7\u5927\uff0c\u5982\u4f55\u6709\u6548\u964d\u4f4e\u56de\u6e90\u5e26\u5bbd\uff1f"},{"location":"cdn/faq/#_15","text":"","title":"\u529f\u80fd\u76f8\u5173"},{"location":"cdn/faq/#_16","text":"\u9759\u6001\u7f51\u9875\uff1a\u7f51\u7ad9\u8bbe\u8ba1\u4e2d\uff0c\u7eaf\u7cb9 HTML \u683c\u5f0f\u7684\u7f51\u9875\u901a\u5e38\u88ab\u79f0\u4e3a\u201c\u9759\u6001\u7f51\u9875\u201d\u3002\u800c\u5bf9\u4e8e CDN \u6765\u8bf4\u9759\u6001\u7f51\u9875\u662f\u8fd0\u884c\u4e8e\u5ba2\u6237\u7aef\u7684\u7a0b\u5e8f\u3001\u7f51\u9875\u3001\u63d2\u4ef6\u3001\u7ec4\u4ef6\uff0c\u4f8b\u5982 HTML \u9875\u9762\u3001Flash\u3001JavaScript\u3001VBScript \u7b49\u7b49\uff0c\u4e0d\u4f1a\u968f\u7740\u5ba2\u6237\u7684\u6539\u53d8\u53d1\u751f\u53d8\u5316\u3002 \u52a8\u6001\u7f51\u9875\uff1a\u662f\u5728\u670d\u52a1\u5668\u7aef\u8fd0\u884c\u7684\u7a0b\u5e8f\u3001\u7f51\u9875\u3001\u7ec4\u4ef6\uff0c\u5b83\u4eec\u4f1a\u968f\u4e0d\u540c\u5ba2\u6237\u3001\u4e0d\u540c\u65f6\u95f4\u3001\u4e0d\u540c\u64cd\u4f5c\uff0c\u8fd4\u56de\u4e0d\u540c\u7684\u7f51\u9875\uff0c\u4f8b\u5982 ASP\u3001PHP\u3001JSP\u3001ASP\u3001CGI \u7b49\uff0c\u901a\u5e38\u52a8\u6001\u7f51\u9875\u8282\u70b9\u4e0d\u4f1a\u8fdb\u884c\u7f13\u5b58\u3002","title":"\u4ec0\u4e48\u662f\u9759\u6001\u548c\u52a8\u6001\u7f51\u9875\uff1f"},{"location":"cdn/faq/#_17","text":"\u652f\u6301\u3002\u53c8\u62cd\u4e91\u5168\u7f51\u52a0\u901f\u9ed8\u8ba4\u652f\u6301\u7f51\u9875\u56fe\u7247\u3001\u52a8\u6001\u5185\u5bb9\u3001\u5927\u6587\u4ef6\u4e0b\u8f7d\u3001\u6d41\u5a92\u4f53\u70b9\u64ad\u52a0\u901f\u7b49\u5e94\u7528\u573a\u666f\u3002\u8be6\u7ec6\u4ecb\u7ecd\u8bf7\u53c2\u89c1 \u5e94\u7528\u573a\u666f \u3002","title":"\u652f\u6301\u7f51\u9875\u56fe\u7247\u3001\u52a8\u6001\u5185\u5bb9\u3001\u5927\u6587\u4ef6\u4e0b\u8f7d\u3001\u70b9\u64ad\u52a0\u901f\u5417\uff1f"},{"location":"cdn/faq/#cdn_5","text":"\u652f\u6301\u3002\u9664\u5e38\u89c4\u5f62\u5f0f\u7684\u57df\u540d\u5916\uff08\u5305\u62ec\u9876\u7ea7\u57df\u540d\uff09\uff0c\u6211\u4eec\u8fd8\u652f\u6301\u6cdb\u57df\u540d\u7ed1\u5b9a\uff0c\u6bd4\u5982 *.yourdomain.com \uff1b\u7279\u522b\u5730\uff0c\u5176\u4e2d * \u6700\u591a\u652f\u6301\u5339\u914d 4 \u5c42\uff1a [v] *.yourdomain.com => foo.yourdomain.com [v] *.yourdomain.com => bar.yourdomain.com [v] *.yourdomain.com => foo.bar.yourdomain.com [v] *.yourdomain.com => foo.bar.baz.yourdomain.com [v] *.yourdomain.com => foo.bar.baz.qux.yourdomain.com [x] *.yourdomain.com => foo.bar.baz.qux.quxx.yourdomain.com [v] *.bar.yourdomain.com => foo.bar.yourdomain.com [v] *.bar.yourdomain.com => baz.foo.bar.yourdomain.com [x] *.bar.yourdomain.com => foo.bar.baz.yourdomain.com","title":"CDN \u652f\u6301\u6cdb\u57df\u540d\u52a0\u901f\u4e48\uff1f"},{"location":"cdn/faq/#cdn_6","text":"\u652f\u6301\u3002\u6211\u4eec\u9488\u5bf9\u5df2\u7ecf\u4f7f\u7528\u53c8\u62cd\u4e91\u5bf9\u8c61\u5b58\u50a8\u670d\u52a1\u7684\u5ba2\u6237\u5df2\u7ecf\u9ed8\u8ba4\u5f00\u542f\u4e86\u5206\u6bb5\u7f13\u5b58\u7279\u6027\uff1b\u9488\u5bf9\u4f7f\u7528\u81ea\u4e3b\u6e90\u7ad9\u7684 CDN \u670d\u52a1\uff0c\u7528\u6237\u53ef\u4ee5\u9488\u5bf9\u7279\u5b9a\u670d\u52a1\u6709\u9009\u62e9\u6027\u7684\u5f00\u542f\u548c\u5173\u95ed\u6b64\u7279\u6027\u3002","title":"CDN \u53ef\u4ee5\u9488\u5bf9\u5927\u6587\u4ef6\u8fdb\u884c\u5206\u6bb5\u7f13\u5b58\u5417\uff1f"},{"location":"cdn/faq/#cdn_7","text":"1\uff09\u5e26\u5bbd\u53ca\u6d41\u91cf\u67e5\u8be2\uff1a\u60a8\u53ef\u4ee5\u67e5\u8be2\u6307\u5b9a\u65f6\u95f4\u533a\u95f4\u3001\u57df\u540d\u3001\u670d\u52a1\u540d\u3001\u5730\u533a\u3001\u8fd0\u8425\u5546\u7b49\u6761\u4ef6\u4e0b\uff0c\u5e26\u5bbd\u53ca\u6d41\u91cf\u7684\u66f2\u7ebf\u56fe\uff0c\u4ee5\u53ca\u8fd0\u8425\u5546\u3001\u5730\u533a\u5206\u5e03\u53ca\u6392\u540d\u60c5\u51b5\uff1b 2\uff09\u8bf7\u6c42\u6570\u67e5\u8be2\uff1a\u60a8\u53ef\u4ee5\u67e5\u8be2\u6307\u5b9a\u65f6\u95f4\u533a\u95f4\u3001\u57df\u540d\u3001\u670d\u52a1\u540d\u3001\u5730\u533a\u3001\u8fd0\u8425\u5546\u7b49\u6761\u4ef6\u4e0b\uff0c\u7528\u6237\u8bf7\u6c42\u6570\u7684\u66f2\u7ebf\u56fe\uff1b 3\uff09\u56de\u6e90\u7edf\u8ba1\uff1a\u60a8\u53ef\u4ee5\u67e5\u770b\u6307\u5b9a\u65f6\u95f4\u533a\u95f4\u3001\u57df\u540d\u3001\u670d\u52a1\u540d\u7b49\u6761\u4ef6\u4e0b\uff0c\u5e26\u5bbd\u53ca\u6d41\u91cf\u66f2\u7ebf\u4ee5\u53ca\u6e90\u7ad9\u6d41\u91cf\u5206\u5e03\uff1b 4\uff09\u67e5\u8be2\u660e\u7ec6\u6570\u636e\uff1a\u60a8\u53ef\u4ee5\u67e5\u8be2\u6307\u5b9a\u65f6\u95f4\u533a\u95f4\u3001\u57df\u540d\u3001\u670d\u52a1\u540d\u3001\u5730\u533a\u3001\u8fd0\u8425\u5546\u7b49\u6761\u4ef6\u4e0b\uff0c\u67e5\u8be2\u6bcf\u65e5\u7684\u6d41\u91cf\u3001\u8bf7\u6c42\u91cf\u3001\u9759\u6001\u8bf7\u6c42\u3001\u52a8\u6001\u8bf7\u6c42\u3001HTTPS \u8bf7\u6c42\u3001\u5cf0\u503c\u5e26\u5bbd\u3001\u5cf0\u503c\u5e26\u5bbd\u65f6\u95f4\u7b49\u660e\u7ec6\u6570\u636e\uff1b 5\uff09\u5bfc\u51fa Excel \u62a5\u8868\uff1a\u60a8\u53ef\u4ee5\u67e5\u8be2\u6307\u5b9a\u65f6\u95f4\u533a\u95f4\u3001\u57df\u540d\u3001\u670d\u52a1\u540d\u3001\u5730\u533a\u3001\u8fd0\u8425\u5546\u7b49\u6761\u4ef6\u4e0b\uff0c\u53ef\u4ee5\u5bfc\u51fa 5 \u5206\u949f\u7c92\u5ea6\u8be6\u7ec6\u7684\u8bf7\u6c42\u6570\u3001\u6d41\u91cf\u3001\u5e26\u5bbd\u3001\u5cf0\u503c\u5e26\u5bbd\u65f6\u95f4\u7b49\u8be6\u7ec6\u6570\u636e\u3002","title":"CDN \u8d44\u6e90\u76d1\u63a7\u7684\u7ef4\u5ea6\u5305\u62ec\u54ea\u4e9b\uff1f"},{"location":"cdn/faq/#ip","text":"\u53c8\u62cd\u4e91 CDN \u56de\u5ba2\u6237\u6e90\u7684\u65f6\u5019\u4f1a\u5e26\u4e0a X-Real-IP \u548c X-Forwarded-For \u7684\u8bf7\u6c42\u5934\u4e0b\u53bb\uff0c\u503c\u4e3a\u7528\u6237\u5b9e\u9645\u8bbf\u95ee CDN \u7684\u6765\u6e90 IP \u5730\u5740\u3002\u7279\u522b\u5730\uff0c\u4e3a\u4e86\u517c\u5bb9\u90e8\u5206\u670d\u52a1\u7aef\u7a0b\u5e8f\uff0c\u6211\u4eec\u989d\u5916\u8fd8\u63d0\u4f9b\u4e86 Client-IP \u8bf7\u6c42\u5934\u7684\u652f\u6301\uff0c\u5176\u503c\u548c X-Real-IP \u3001 X-Forwarded-For \u76f8\u540c\u3002 \u793a\u4f8b\u4e00\uff1aPHP \u4ee3\u7801\u00b6 <?php $ip = $_SERVER[\"HTTP_X_REAL_IP\"]; echo $ip; ?> \u793a\u4f8b\u4e8c\uff1a Nginx \u914d\u7f6e\u00b6 server { listen 80; add_header X-Real-IP $http_x_real_ip; }","title":"\u5982\u4f55\u83b7\u53d6\u6700\u7ec8\u7528\u6237 IP \uff1f"},{"location":"cdn/faq/#cdn_8","text":"\u652f\u6301\u3002\u6e90\u7ad9\u54cd\u5e94 301/302\uff0cCDN\u4f1a\u81ea\u52a8\u8ddf\u968f 302 \u5230\u6307\u5b9a location \u5730\u5740\u83b7\u53d6\u6587\u4ef6\u5e76\u8fdb\u884c\u7f13\u5b58\uff0c\u52a0\u901f\u7528\u6237\u8bbf\u95ee\u4f53\u9a8c\u3002","title":"CDN \u56de\u6e90\u662f\u5426\u652f\u6301\u91cd\u5b9a\u5411\u8ddf\u968f\uff1f"},{"location":"cdn/faq/#_18","text":"\u652f\u6301\u3002\u76ee\u524d\u4ec5\u652f\u6301 FLV \u548c MP4 \u683c\u5f0f\u7684\u89c6\u9891\u5934\u62d6\u62c9\uff0c\u5176\u4e2d FLV \u6309\u5b57\u8282\u62d6\u62c9\uff0cMP4 \u6309\u65f6\u95f4\u62d6\u62c9\u3002\u66f4\u591a\u4e86\u89e3\u8bf7\u53c2\u89c1 \u89c6\u9891\u62d6\u62c9\u6587\u6863 \u3002","title":"\u652f\u6301\u89c6\u9891\u62d6\u62c9\u5417\uff1f"},{"location":"cdn/faq/#_19","text":"\u652f\u6301\u3002\u9ed8\u8ba4\u662f\u53c2\u6570\u8ddf\u968f\uff0c\u9700\u8981\u53bb\u7ba1\u7406\u63a7\u5236\u53f0\u5f00\u542f\u3002","title":"\u662f\u5426\u652f\u6301\u5ffd\u7565\u53c2\u6570\u7f13\u5b58\uff1f"},{"location":"cdn/faq/#_20","text":"\u652f\u6301\u3002\u8be6\u7ec6\u914d\u7f6e\u53c2\u89c1 \u8de8\u57df\u914d\u7f6e\u6587\u6863 \u3002","title":"\u662f\u5426\u652f\u6301\u8de8\u57df\u8bbf\u95ee\u914d\u7f6e\uff1f"},{"location":"cdn/faq/#_21","text":"","title":"\u5b89\u5168\u76f8\u5173"},{"location":"cdn/faq/#_22","text":"\u521d\u7ea7\u7684\u9632\u76d7\u94fe\u65b9\u5f0f\u5305\u62ec IP \u7981\u7528\u3001\u5730\u533a\u8bbf\u95ee\u9650\u5236\u3001User-Agent \u9632\u76d7\u94fe\u3001Referer \u9632\u76d7\u94fe\uff1b\u9ad8\u7ea7\u7684\u9632\u76d7\u94fe\u65b9\u5f0f\u5305\u62ec Token \u9632\u76d7\u94fe\u3001\u56de\u6e90\u9274\u6743\u3002\u66f4\u591a\u4e86\u89e3\u8bf7\u53c2\u89c1 \u8bbf\u95ee\u63a7\u5236\u6587\u6863 \u3002","title":"\u652f\u6301\u54ea\u4e9b\u9632\u76d7\u94fe\u65b9\u5f0f\uff1f"},{"location":"cdn/faq/#_23","text":"\u8bbe\u7f6e\u9632\u76d7\u94fe\u5373\u8bbe\u7f6e User-Agent\u3001Referer\u3001Token \u7b49\u9632\u76d7\u94fe\uff0c\u7f51\u7ad9\u8bbf\u95ee\u8005\u53ea\u6709\u5408\u6cd5\u7684 User-Agent\u3001Referer\u3001Token \u624d\u80fd\u8fdb\u884c\u8bbf\u95ee\uff0c\u907f\u514d\u6076\u610f\u8bf7\u6c42\u5bfc\u81f4\u7684\u6d41\u91cf\u7a81\u589e\u3002","title":"\u9632\u76d7\u94fe\u7684\u8bbe\u7f6e\uff0c\u5bf9\u7f51\u7ad9\u6709\u4ec0\u4e48\u5f71\u54cd\uff1f"},{"location":"cdn/faq/#_24","text":"\u652f\u6301 WAF \u9632\u62a4\u3001CC \u9632\u62a4\u3001IP \u8bbf\u95ee\u9650\u5236\u7b49\u5e94\u7528\u5c42\u5b89\u5168\u9632\u62a4\u63aa\u65bd\u3002\u66f4\u591a\u4e86\u89e3\u8bf7\u53c2\u89c1 \u5b89\u5168\u9632\u62a4 \u3002","title":"\u652f\u6301\u54ea\u4e9b\u5b89\u5168\u9632\u62a4\u65b9\u5f0f\uff1f"},{"location":"cdn/faq/#_25","text":"","title":"\u8d44\u6e90\u76f8\u5173"},{"location":"cdn/faq/#cdn_9","text":"\u622a\u81f3\u76ee\u524d\u4e3a\u6b62\uff0c\u76ee\u524d\u5728\u56fd\u5185 26 \u4e2a\u7701\u4efd\u90e8\u7f72\u6709 CDN \u8282\u70b9\uff0c\u8282\u70b9\u6570\u91cf\u8d85\u8fc7 150 \u4e2a\uff0c\u8986\u76d6\u7684\u8fd0\u8425\u5546\u5305\u62ec\u7535\u4fe1\u3001\u8054\u901a\u3001\u79fb\u52a8\u3001\u79d1\u6280\u7f51\u3001\u6559\u80b2\u7f51\u3001\u957f\u5bbd\u3001\u534e\u6570\u7b49\u3002","title":"CDN \u670d\u52a1\u7684\u8282\u70b9\u5206\u5e03\u662f\u600e\u6837\u7684\uff1f"},{"location":"cdn/faq/#_26","text":"\u652f\u6301\u3002\u76ee\u524d\u53c8\u62cd\u4e91 CDN \u670d\u52a1\u5728\u9999\u6e2f\u3001\u53f0\u6e7e\u3001\u65b0\u52a0\u5761\u3001\u7f8e\u56fd\u3001\u5fb7\u56fd\u7b49\u5730\u533a\u90e8\u7f72\u6709 CDN \u8282\u70b9\u3002","title":"\u652f\u6301\u6d77\u5916\u52a0\u901f\u5417\uff1f"},{"location":"cdn/faq/#_27","text":"","title":"\u8bc1\u4e66\u76f8\u5173"},{"location":"cdn/faq/#https","text":"\u652f\u6301\u3002\u8be6\u7ec6\u4ecb\u7ecd\u8bf7\u53c2\u89c1 \u81ea\u5b9a\u4e49 SSL \u670d\u52a1\u6587\u6863 \u3002","title":"\u652f\u6301 HTTPS \u52a0\u901f\u5417\uff1f"},{"location":"cdn/faq/#https_1","text":"\u76ee\u524d\u53c8\u62cd\u4e91 HTTPS \u52a0\u901f\u4ec5\u652f\u6301 PEM \u683c\u5f0f\u7684\u8bc1\u4e66\uff0c\u5982\u60a8\u7533\u8bf7\u7684\u662f\u5176\u4ed6\u683c\u5f0f\u7684\u8bc1\u4e66\uff0c\u9700\u8981\u5c06\u5176\u8f6c\u6362\u4e3a PEM \u683c\u5f0f\u3002\u5982\u4e0b\u5217\u4e3e\u51e0\u79cd\u6bd4\u8f83\u5e38\u89c1\u7684\u8f6c\u6362\u65b9\u5f0f\uff1a 1\uff09DER \u8f6c\u6362\u4e3a PEM \u8bc1\u4e66\u8f6c\u5316\uff1a opensslx509 -inform der -in your-certificate.cer -out upyun-certificate.pem \u79c1\u94a5\u8f6c\u5316\uff1a openssl rsa-inform DER -outform pem -in your-privatekey.der -out upyun-privatekey.pem 2\uff09P7B \u8f6c\u6362\u4e3a PEM \u8bc1\u4e66\u8f6c\u5316\uff1a openssl pkcs7-print_certs -in your-incertificat.p7b -out upyun-certificate.cer \u83b7\u53d6 upyun-certificat.cer \u91cc\u9762[-----BEGIN CERTIFICATE-----\uff0c -----ENDCERTIFICATE-----] \u7684\u5185\u5bb9\u4f5c\u4e3a\u8bc1\u4e66\u4e0a\u4f20\u3002 \u79c1\u94a5\u8f6c\u5316\uff1a\u65e0\u79c1\u94a5 3\uff09PFX \u8f6c\u6362\u4e3a PEM \u8bc1\u4e66\u8f6c\u5316\uff1a openssl pkcs12-in certname.pfx -nokeys -out upyun-cert.pem \u79c1\u94a5\u8f6c\u5316\uff1a openssl pkcs12-in certname.pfx -nocerts -out upyun-key.pem -nodes","title":"HTTPS \u52a0\u901f\u652f\u6301\u54ea\u4e9b\u7c7b\u578b\u7684\u8bc1\u4e66\uff1f"},{"location":"cdn/faq/#_28","text":"1\uff09\u9996\u5148\u786e\u8ba4\u8bc1\u4e66\u683c\u5f0f\u662f\u5426\u4e3a PEM \u683c\u5f0f\uff0c\u5e76\u4e14\u662f\u5426\u7b26\u5408 [-----BEGINCERTIFICATE-----\uff0c-----ENDCERTIFICATE-----] \u5f00\u5934\u7ed3\u5c3e\u3001\u6bcf\u884c 64 \u4e2a\u5b57\u7b26\u3001\u6700\u540e\u4e00\u884c\u4e0d\u8d85\u8fc7 64 \u4e2a\u5b57\u7b26\u7684\u8bc1\u4e66\u89c4\u5219\u3002\u5982\u679c\u975e PEM \u683c\u5f0f\uff0c\u5219\u53ef\u6309\u4e0a\u6587\u4e2d\u7684\u65b9\u5f0f\u8fdb\u884c\u8f6c\u6362 2\uff09\u68c0\u67e5\u79c1\u94a5\u683c\u5f0f\u662f\u5426\u6b63\u786e\uff0c\u662f\u5426\u4ee5 -----BEGIN RSA PRIVATEKEY----- \u5f00\u5934\uff1b\u5982\u679c\u662f -----BEGIN PRIVATEKEY----- \u5f00\u5934\uff0c\u5219\u53ef\u6267\u884c openssl rsa -in your-old.key -out upyun-new.key \u5bf9\u79c1\u94a5\u8fdb\u884c\u8f6c\u6362","title":"\u8bc1\u4e66\u4e0a\u4f20\u5931\u8d25\u5982\u4f55\u5904\u7406\uff1f"},{"location":"cdn/faq/#sni","text":"SNI\uff08ServerName Indication\uff09\u5b9a\u4e49\u5728 RFC 4366\uff0c\u662f\u7528\u6765\u6539\u5584 SSL(Secure Socket Layer)\u548c TLS(Transport Layer Security) \u7684\u4e00\u9879\u7279\u6027\uff0c\u5728 SSLv3/TLSv1 \u4e2d\u88ab\u542f\u7528\u3002\u5b83\u5141\u8bb8\u5ba2\u6237\u7aef\u5728\u53d1\u8d77 SSL \u63e1\u624b\u8bf7\u6c42\u65f6\uff08\u5373\uff1a\u5ba2\u6237\u7aef\u53d1\u51fa SSL \u8bf7\u6c42\u4e2d\u7684 ClientHello \u9636\u6bb5\uff09\uff0c\u5c31\u63d0\u4ea4\u8bf7\u6c42\u7684 Host \u4fe1\u606f\uff0c\u4f7f\u5f97\u670d\u52a1\u5668\u80fd\u591f\u5207\u6362\u5230\u6b63\u786e\u7684\u57df\u5e76\u8fd4\u56de\u76f8\u5e94\u7684\u8bc1\u4e66\uff0c\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u5982\u679c\u8981\u4f7f\u7528 SNI \uff0c\u9700\u8981\u5ba2\u6237\u7aef\u548c\u670d\u52a1\u5668\u7aef\u540c\u65f6\u6ee1\u8db3\u6761\u4ef6\uff0c\u5bf9\u4e8e\u5f53\u524d\u5927\u591a\u6570\u6d4f\u89c8\u5668\u6765\u8bf4\u90fd\u4ee5\u652f\u6301\uff0c\u4e5f\u53ef\u53c2\u8003 \u8fd9\u91cc","title":"\u4ec0\u4e48\u662f SNI \u6280\u672f\uff1f"},{"location":"cdn/faq/#http2","text":"\u53c8\u62cd\u4e91\u5f53\u524d\u5df2\u5168\u5e73\u53f0\u652f\u6301 HTTP/2\uff0c\u5e76\u5df2\u9ed8\u8ba4\u5f00\u542f\u3002 HTTP/2 \u5373\u8d85\u6587\u672c\u4f20\u8f93\u534f\u8bae 2.0 \uff0c\u662f\u4e0b\u4e00\u4ee3 HTTP \u534f\u8bae\u3002\u5b83\u7531\u4e92\u8054\u7f51\u5de5\u7a0b\u4efb\u52a1\u7ec4\uff08IETF\uff09\u7684 Hypertext Transfer Protocol Bis (httpbis) \u5de5\u4f5c\u5c0f\u7ec4\u8fdb\u884c\u5f00\u53d1\uff0c\u4ee5 SPDY \u4e3a\u539f\u578b\uff0c\u7ecf\u8fc7\u4e24\u5e74\u591a\u7684\u8ba8\u8bba\u548c\u5b8c\u5584\u6700\u7ec8\u786e\u5b9a\uff0c\u4f18\u52bf\u5982\u4e0b\uff1a 1\uff09HTTP/2 \u91c7\u7528\u4e8c\u8fdb\u5236\u683c\u5f0f\u4f20\u8f93\u6570\u636e\uff0c\u5176\u5728\u534f\u8bae\u7684\u89e3\u6790\u548c\u4f18\u5316\u6269\u5c55\u4e0a\u5e26\u6765\u66f4\u591a\u7684\u4f18\u52bf\u548c\u53ef\u80fd\u3002 2\uff09HTTP/2 \u5bf9\u6d88\u606f\u5934\u91c7\u7528 HPACK \u8fdb\u884c\u538b\u7f29\u4f20\u8f93\uff0c\u80fd\u591f\u8282\u7701\u6d88\u606f\u5934\u5360\u7528\u7684\u7f51\u7edc\u7684\u6d41\u91cf\u3002 3\uff09\u591a\u8def\u590d\u7528\uff0c\u7b80\u5355\u8bf4\u5c31\u662f\u6240\u6709\u7684\u8bf7\u6c42\u53ef\u4ee5\u901a\u8fc7\u4e00\u4e2a TCP \u8fde\u63a5\u5e76\u53d1\u5b8c\u6210\u3002 4\uff09Server Push\uff1a\u670d\u52a1\u7aef\u80fd\u591f\u66f4\u5feb\u7684\u628a\u8d44\u6e90\u63a8\u9001\u7ed9\u5ba2\u6237\u7aef\u3002","title":"\u652f\u6301 HTTP/2 \u5417\uff1f"},{"location":"cdn/faq/#http2_1","text":"\u56e0 HTTP/2 \u662f\u5728 HTTPS \u7684\u57fa\u7840\u4e0a\u5b9e\u73b0\u7684\uff0c\u5982\u679c\u60f3\u4f7f\u7528 HTTP/2\uff0c\u5219\u57df\u540d\u5fc5\u987b\u652f\u6301 HTTPS \u8bbf\u95ee\uff0c\u6240\u4ee5\u53ea\u9700\u6309\u7167 \u81ea\u5b9a\u4e49 SSL \u670d\u52a1 \u4e2d\u7684\u6b65\u9aa4\u8fdb\u884c\u914d\u7f6e\u5373\u53ef\uff0c\u5176\u4ed6\u65e0\u9700\u505a\u4efb\u4f55\u7279\u6b8a\u914d\u7f6e\u3002","title":"\u5982\u679c\u60f3\u4f7f\u7528 HTTP/2\uff0c\u9700\u8981\u505a\u7279\u6b8a\u914d\u7f6e\u5417\uff1f"},{"location":"cdn/guide/","text":"\u51c6\u5907\u5de5\u4f5c \u00b6 \u4e3a\u4e86\u5feb\u901f\u5b8c\u6210\u6ce8\u518c\u548c\u914d\u7f6e\u8fc7\u7a0b\uff0c\u60a8\u9700\u8981\u63d0\u524d\u51c6\u5907\u5982\u4e0b\u4e8b\u9879\uff1a 1.\u4e00\u4e2a\u6709\u6548\u7684\u90ae\u7bb1\u5730\u5740\uff0c\u4e3b\u8981\u7528\u4e8e\u5bc6\u7801\u91cd\u7f6e\u627e\u56de\u3001\u90ae\u7bb1\u5feb\u6377\u767b\u9646\u3001\u57df\u540d\u5ba1\u6838\u53cd\u9988\u7b49\uff0c\u60a8\u53ef\u4ee5\u5728\u540e\u671f\u8fdb\u884c\u66f4\u6362\u3002 2.\u4e00\u4e2a\u6709\u6548\u7684\u4e2a\u4eba\u624b\u673a\u53f7\u7801\uff0c\u4e3b\u8981\u7528\u4e8e\u5bc6\u7801\u91cd\u7f6e\u627e\u56de\u3001\u8d26\u53f7\u5feb\u6377\u767b\u9646\u3001\u83b7\u53d6\u670d\u52a1\u901a\u77e5\uff08\u5982\u4f59\u989d\u4e0d\u8db3\u63d0\u9192\u548c\u8d26\u6237\u6b20\u8d39\u63d0\u9192\uff09\uff0c\u60a8\u53ef\u4ee5\u5728\u540e\u671f\u8fdb\u884c\u66f4\u6362\u3002 3.\u81f3\u5c11\u9700\u8981\u51c6\u5907\u4e00\u4e2a\u56de\u6e90 IP \u5730\u5740\u6216\u8005\u57df\u540d\uff0c\u9700\u8981\u4fdd\u8bc1\u8be5\u6e90\u7ad9\u53ef\u4ee5\u6b63\u5e38\u63d0\u4f9b\u670d\u52a1\uff0c\u60a8\u53ef\u4ee5\u5728\u540e\u671f\u6dfb\u52a0\u66f4\u591a\u56de\u6e90\u5730\u5740\u3002 4.\u63d0\u4f9b\u9700\u8981\u52a0\u901f\u7684\u7f51\u7ad9\u8bbf\u95ee\u57df\u540d\uff0c\u9700\u8981\u4fdd\u8bc1\u8be5\u8bbf\u95ee\u57df\u540d\u53ef\u6b63\u5e38\u63d0\u4f9b\u670d\u52a1\uff0c\u5e76\u4e14\u5df2\u7ecf\u5907\u6848\uff08 \u672a\u5907\u6848\u5c06\u65e0\u6cd5\u914d\u7f6e\u6210\u529f \uff09\u3002 \u5e10\u53f7\u6ce8\u518c \u00b6 \u6253\u5f00 \u6ce8\u518c\u754c\u9762 \u6216\u8005\u5728 \u53c8\u62cd\u4e91\u5b98\u7f51 \u9875\u9762\u53f3\u4e0a\u89d2\u70b9\u51fb\u300c\u6ce8\u518c\u300d\u6309\u94ae\uff0c\u8fdb\u5165\u5982\u4e0b\u754c\u9762\uff1a \u60a8\u53ef\u6839\u636e\u81ea\u8eab\u7684\u60c5\u51b5\u9009\u62e9 \u201c\u4f01\u4e1a\u8d26\u53f7\u201d \u6216 \u201c\u4e2a\u4eba\u8d26\u53f7\u201d \uff0c\u8bf7\u586b\u5199\u5b8c\u6574\u7684\u6ce8\u518c\u4fe1\u606f\uff08 \u6ce8\u610f\u9605\u8bfb\u53c8\u62cd\u4e91\u670d\u52a1\u6761\u6b3e \uff09\uff0c\u5e76\u786e\u4fdd\u7535\u5b50\u90ae\u4ef6\u5730\u5740\u4ee5\u53ca\u624b\u673a\u53f7\u7801\u6b63\u786e\uff0c\u4ee5\u4fdd\u969c\u60a8\u80fd\u591f\u6b63\u5e38\u63a5\u6536\u5230\u670d\u52a1\u901a\u77e5\u3002 \u5e10\u53f7\u8ba4\u8bc1 \u00b6 \u6ce8\u518c\u5b8c\u6bd5\u540e\uff0c\u767b\u5f55 \u53c8\u62cd\u4e91\u7ba1\u7406\u63a7\u5236\u53f0 \uff0c\u60a8\u9700\u8981\u8fdb\u884c\u4f01\u4e1a\u6216\u4e2a\u4eba\u8ba4\u8bc1\uff0c\u8ba4\u8bc1\u5b8c\u6210\u540e\u65b9\u53ef\u521b\u5efa\u670d\u52a1\uff0c\u5426\u5219\u5c06\u65e0\u6cd5\u4f7f\u7528\u53c8\u62cd\u4e91\u670d\u52a1\u3002\u8d26\u6237\u8ba4\u8bc1\u53ef\u53c2\u89c1\u5982\u4e0b\u622a\u56fe\u6240\u793a\uff1a \u4f01\u4e1a\u8ba4\u8bc1 \u4e2a\u4eba\u8ba4\u8bc1 \u63d0\u4ea4\u540e\uff0c\u9700\u8981\u7b49\u5f85\u5ba1\u6838\u901a\u8fc7\uff0c\u5c4a\u65f6\u4f1a\u901a\u8fc7\u7ad9\u5185\u4fe1\u3001\u90ae\u4ef6\u8fdb\u884c\u901a\u77e5\u3002 \u521b\u5efa\u670d\u52a1 \u00b6 \u5e10\u6237\u8eab\u4efd\u8ba4\u8bc1\u5b8c\u6210\u4e4b\u540e\uff0c\u60a8\u5c31\u53ef\u4ee5\u5f00\u59cb\u521b\u5efa\u60a8\u7684\u521d\u59cb\u670d\u52a1\u4e86\uff0c\u5177\u4f53\u64cd\u4f5c\u5982\u4e0b\u6b65\u9aa4\u6240\u793a\uff1a \u57df\u540d\u63a5\u5165(\u81ea\u6709\u6e90) \u8fdb\u5165 \u3010 CDN \u3011 \u670d\u52a1\u5217\u8868\uff0c\u4f9d\u6b21\u8fdb\u5165\u670d\u52a1\u521b\u5efa\u548c\u57fa\u672c\u4fe1\u606f\u586b\u5199\u7b49\u6b65\u9aa4\uff1a \u7b2c\u4e00\u6b65\uff1a\u521b\u5efa\u670d\u52a1 \u7b2c\u4e8c\u6b65\uff1a\u57fa\u672c\u4fe1\u606f\u586b\u5199 \u66f4\u591a\u64cd\u4f5c\u6d41\u7a0b\u53c2\u89c1\u6587\u6863 \u57df\u540d\u63a5\u5165\uff08\u81ea\u6709\u6e90) \u6216\u8005\u89c6\u9891\u6559\u7a0b \u81ea\u4e3b\u6e90\u7ad9\u914d\u7f6e\u6559\u5b66\u89c6\u9891 \u3002 \u57df\u540d\u63a5\u5165(\u53c8\u62cd\u5b58\u50a8\u6e90) \u8fdb\u5165\u3010\u4e91\u5b58\u50a8\u3011\u670d\u52a1\u5217\u8868\uff0c\u4f9d\u6b21\u8fdb\u5165\u670d\u52a1\u521b\u5efa\u548c\u57fa\u672c\u4fe1\u606f\u586b\u5199\u7b49\u6b65\u9aa4\uff1a \u7b2c\u4e00\u6b65\uff1a\u521b\u5efa\u670d\u52a1 \u7b2c\u4e8c\u6b65\uff1a\u57fa\u672c\u4fe1\u606f\u586b\u5199 \u66f4\u591a\u64cd\u4f5c\u6d41\u7a0b\u53c2\u89c1 \u57df\u540d\u63a5\u5165\uff08\u53c8\u62cd\u5b58\u50a8\u6e90) \u6216\u8005\u89c6\u9891\u6559\u7a0b \u53c8\u62cd\u4e91\u5b58\u50a8\u914d\u7f6e\u6559\u5b66\u89c6\u9891 \u3002 \u914d\u7f6e\u6d4b\u8bd5 \u00b6 \u5047\u8bbe\u4e0a\u8ff0\u914d\u7f6e\u5df2\u5168\u90e8\u5b8c\u6210\uff0c\u60a8\u7684\u57df\u540d\u4e3a test1.upyun.com \uff0c\u914d\u7f6e\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u60a8\u53ef\u901a\u8fc7 ping \u52a0\u901f\u57df\u540d\u7684 CNAME \u5730\u5740 cptest123.b0.aicdn.com \uff0c\u83b7\u53d6 CDN \u8282\u70b9 IP \u4e3a 183.158.35.58 ( \u793a\u4f8b IP \u4e3a\u676d\u5dde\u7535\u4fe1\u8282\u70b9\u51fa\u53e3 IP )\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u7136\u540e\u6253\u5f00\u7ec8\u7aef\u7684 Hosts \u6587\u4ef6\uff0c\u5c06 183.158.35.58 test.yourdomain.com \u5199\u5165\u5176\u4e2d\u5e76\u4fdd\u5b58\uff08 \u6ce8\u610f\uff1a\u6d4b\u8bd5\u5b8c\u6210\u540e\uff0c\u8fdb\u884c\u5220\u9664 )\u3002 \u4fdd\u5b58\u4ee5\u540e\uff0c\u6253\u5f00 Chrome \u6d4f\u89c8\u5668\uff0c\u6309 F12 \u952e\u5f00\u59cb\u6293\u5305\uff0c\u8bbf\u95ee\u57df\u540d\u6d4b\u8bd5\u94fe\u63a5\uff0c\u4f8b\u5982 http:// test.yourdomain.com/image/123.png \uff0c\u5982\u679c\u6210\u529f\u8bbf\u95ee\u5373\u53ef\u8bc1\u660e\u4e0a\u8ff0\u52a0\u901f\u57df\u540d\u914d\u7f6e\u6b63\u786e\uff0c\u6293\u5305\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u7f13\u5b58\u9a8c\u8bc1 \u00b6 \u8be5\u6b65\u9aa4\u4e3b\u8981\u6d4b\u8bd5\u52a0\u901f\u57df\u540d\u5728 CDN \u52a0\u901f\u5e73\u53f0\u4e0a\u7684\u7f13\u5b58\u65f6\u95f4\u914d\u7f6e\u662f\u5426\u751f\u6548\uff0c\u5177\u4f53\u9a8c\u8bc1\u53ef\u4ee5\u53c2\u89c1\u5982\u4e0b\u65b9\u6cd5\uff1a \u5982\u4e0b\u56fe\u6240\u4ee5\uff0c\u540e\u7f00\u4e3a PNG \u7c7b\u578b\u7684\u56fe\u7247\uff0c\u914d\u7f6e\u7684\u7f13\u5b58\u65f6\u95f4\u4e3a 691200s\u3002 \u5728\u6b65\u9aa4\u4e09\u7684\u57fa\u7840\u4e0a\uff0c\u6253\u5f00 Chrome \u6d4f\u89c8\u5668\uff0c\u5c06\u8981\u8bbf\u95ee\u7684 URL \u8f93\u5165\u6d4f\u89c8\u5668\uff0c\u70b9\u51fb\u56de\u8f66\uff0c\u6293\u5305\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u53ef\u4ee5\u770b\u5230 max-age=691200 \uff0c\u8fdb\u800c\u8bc1\u660e\u7f13\u5b58\u914d\u7f6e\u7b56\u7565\u5df2\u7ecf\u751f\u6548\u3002 CNAME \u914d\u7f6e \u00b6 \u5982\u679c\u4ee5\u4e0a\u914d\u7f6e\u6d4b\u8bd5\u3001\u7f13\u5b58\u9a8c\u8bc1\u6d4b\u8bd5\u90fd\u6b63\u5e38\uff0c\u5219\u53ef\u8fdb\u884c\u52a0\u901f\u57df\u540d CNAME \u7684\u914d\u7f6e\uff0c\u5177\u4f53\u6b65\u9aa4\u5982\u4e0b\uff1a 1.\u83b7\u53d6 CNAME \u57df\u540d \u8fdb\u5165 CDN \u63a7\u5236\u53f0\uff0c\u9009\u62e9\u76f8\u5e94\u670d\u52a1\uff0c\u5728\u3010\u529f\u80fd\u914d\u7f6e\u3011\u754c\u9762\uff0c\u9009\u62e9\u300c\u57df\u540d\u7ba1\u7406\u300d\u6a21\u5757\uff0c\u76f8\u5e94\u533a\u57df\u53ef\u67e5\u770b CNAME \u5730\u5740\uff0c\u5982\u56fe\u6240\u793a\uff1a 2.\u4fee\u6539 CNAME \u8bb0\u5f55 \u767b\u5165\u57df\u540d\u7684 DNS \u670d\u52a1\u5546\u7f51\u7ad9\uff0c\u4fee\u6539 CNAME \u8bb0\u5f55\uff0c\u5177\u4f53\u914d\u7f6e\u65b9\u6cd5\u53ef\u53c2\u89c1\u5982\u4e0b\u94fe\u63a5\uff1a DNSPod CNAME \u63a5\u5165 CDN \u65b0\u7f51 CNAME \u63a5\u5165 CDN \u4e07\u7f51 CNAME \u63a5\u5165 CDN 3.\u9a8c\u8bc1 CNAME \u914d\u7f6e\u662f\u5426\u751f\u6548 \u56e0 DNS \u89e3\u6790\u8bb0\u5f55\u90fd\u6709\u7f13\u5b58\u65f6\u95f4\uff0cCNAME \u7684\u751f\u6548\u65f6\u95f4\u4e00\u822c\u662f 600s\uff0c\u53ef\u901a\u8fc7 ping \u6240\u914d\u7f6e\u7684\u52a0\u901f\u57df\u540d\uff0c\u68c0\u9a8c CNAME \u914d\u7f6e\u662f\u5426\u751f\u6548\uff0c\u5982\u679c\u540e\u7f00\u663e\u793a\u4e3a aicdn.com\uff0c\u5219\u8bc1\u660e CNAME \u914d\u7f6e\u5df2\u751f\u6548\uff0c\u5373\u52a0\u901f\u4e1a\u52a1\u6b63\u5f0f\u5f00\u59cb\u542f\u7528\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u5982\u6709\u7591\u95ee\u8bf7 \u8054\u7cfb\u6211\u4eec","title":"\u5feb\u901f\u5165\u95e8"},{"location":"cdn/guide/#_1","text":"\u4e3a\u4e86\u5feb\u901f\u5b8c\u6210\u6ce8\u518c\u548c\u914d\u7f6e\u8fc7\u7a0b\uff0c\u60a8\u9700\u8981\u63d0\u524d\u51c6\u5907\u5982\u4e0b\u4e8b\u9879\uff1a 1.\u4e00\u4e2a\u6709\u6548\u7684\u90ae\u7bb1\u5730\u5740\uff0c\u4e3b\u8981\u7528\u4e8e\u5bc6\u7801\u91cd\u7f6e\u627e\u56de\u3001\u90ae\u7bb1\u5feb\u6377\u767b\u9646\u3001\u57df\u540d\u5ba1\u6838\u53cd\u9988\u7b49\uff0c\u60a8\u53ef\u4ee5\u5728\u540e\u671f\u8fdb\u884c\u66f4\u6362\u3002 2.\u4e00\u4e2a\u6709\u6548\u7684\u4e2a\u4eba\u624b\u673a\u53f7\u7801\uff0c\u4e3b\u8981\u7528\u4e8e\u5bc6\u7801\u91cd\u7f6e\u627e\u56de\u3001\u8d26\u53f7\u5feb\u6377\u767b\u9646\u3001\u83b7\u53d6\u670d\u52a1\u901a\u77e5\uff08\u5982\u4f59\u989d\u4e0d\u8db3\u63d0\u9192\u548c\u8d26\u6237\u6b20\u8d39\u63d0\u9192\uff09\uff0c\u60a8\u53ef\u4ee5\u5728\u540e\u671f\u8fdb\u884c\u66f4\u6362\u3002 3.\u81f3\u5c11\u9700\u8981\u51c6\u5907\u4e00\u4e2a\u56de\u6e90 IP \u5730\u5740\u6216\u8005\u57df\u540d\uff0c\u9700\u8981\u4fdd\u8bc1\u8be5\u6e90\u7ad9\u53ef\u4ee5\u6b63\u5e38\u63d0\u4f9b\u670d\u52a1\uff0c\u60a8\u53ef\u4ee5\u5728\u540e\u671f\u6dfb\u52a0\u66f4\u591a\u56de\u6e90\u5730\u5740\u3002 4.\u63d0\u4f9b\u9700\u8981\u52a0\u901f\u7684\u7f51\u7ad9\u8bbf\u95ee\u57df\u540d\uff0c\u9700\u8981\u4fdd\u8bc1\u8be5\u8bbf\u95ee\u57df\u540d\u53ef\u6b63\u5e38\u63d0\u4f9b\u670d\u52a1\uff0c\u5e76\u4e14\u5df2\u7ecf\u5907\u6848\uff08 \u672a\u5907\u6848\u5c06\u65e0\u6cd5\u914d\u7f6e\u6210\u529f \uff09\u3002","title":"\u51c6\u5907\u5de5\u4f5c"},{"location":"cdn/guide/#_2","text":"\u6253\u5f00 \u6ce8\u518c\u754c\u9762 \u6216\u8005\u5728 \u53c8\u62cd\u4e91\u5b98\u7f51 \u9875\u9762\u53f3\u4e0a\u89d2\u70b9\u51fb\u300c\u6ce8\u518c\u300d\u6309\u94ae\uff0c\u8fdb\u5165\u5982\u4e0b\u754c\u9762\uff1a \u60a8\u53ef\u6839\u636e\u81ea\u8eab\u7684\u60c5\u51b5\u9009\u62e9 \u201c\u4f01\u4e1a\u8d26\u53f7\u201d \u6216 \u201c\u4e2a\u4eba\u8d26\u53f7\u201d \uff0c\u8bf7\u586b\u5199\u5b8c\u6574\u7684\u6ce8\u518c\u4fe1\u606f\uff08 \u6ce8\u610f\u9605\u8bfb\u53c8\u62cd\u4e91\u670d\u52a1\u6761\u6b3e \uff09\uff0c\u5e76\u786e\u4fdd\u7535\u5b50\u90ae\u4ef6\u5730\u5740\u4ee5\u53ca\u624b\u673a\u53f7\u7801\u6b63\u786e\uff0c\u4ee5\u4fdd\u969c\u60a8\u80fd\u591f\u6b63\u5e38\u63a5\u6536\u5230\u670d\u52a1\u901a\u77e5\u3002","title":"\u5e10\u53f7\u6ce8\u518c"},{"location":"cdn/guide/#_3","text":"\u6ce8\u518c\u5b8c\u6bd5\u540e\uff0c\u767b\u5f55 \u53c8\u62cd\u4e91\u7ba1\u7406\u63a7\u5236\u53f0 \uff0c\u60a8\u9700\u8981\u8fdb\u884c\u4f01\u4e1a\u6216\u4e2a\u4eba\u8ba4\u8bc1\uff0c\u8ba4\u8bc1\u5b8c\u6210\u540e\u65b9\u53ef\u521b\u5efa\u670d\u52a1\uff0c\u5426\u5219\u5c06\u65e0\u6cd5\u4f7f\u7528\u53c8\u62cd\u4e91\u670d\u52a1\u3002\u8d26\u6237\u8ba4\u8bc1\u53ef\u53c2\u89c1\u5982\u4e0b\u622a\u56fe\u6240\u793a\uff1a \u4f01\u4e1a\u8ba4\u8bc1 \u4e2a\u4eba\u8ba4\u8bc1 \u63d0\u4ea4\u540e\uff0c\u9700\u8981\u7b49\u5f85\u5ba1\u6838\u901a\u8fc7\uff0c\u5c4a\u65f6\u4f1a\u901a\u8fc7\u7ad9\u5185\u4fe1\u3001\u90ae\u4ef6\u8fdb\u884c\u901a\u77e5\u3002","title":"\u5e10\u53f7\u8ba4\u8bc1"},{"location":"cdn/guide/#_4","text":"\u5e10\u6237\u8eab\u4efd\u8ba4\u8bc1\u5b8c\u6210\u4e4b\u540e\uff0c\u60a8\u5c31\u53ef\u4ee5\u5f00\u59cb\u521b\u5efa\u60a8\u7684\u521d\u59cb\u670d\u52a1\u4e86\uff0c\u5177\u4f53\u64cd\u4f5c\u5982\u4e0b\u6b65\u9aa4\u6240\u793a\uff1a \u57df\u540d\u63a5\u5165(\u81ea\u6709\u6e90) \u8fdb\u5165 \u3010 CDN \u3011 \u670d\u52a1\u5217\u8868\uff0c\u4f9d\u6b21\u8fdb\u5165\u670d\u52a1\u521b\u5efa\u548c\u57fa\u672c\u4fe1\u606f\u586b\u5199\u7b49\u6b65\u9aa4\uff1a \u7b2c\u4e00\u6b65\uff1a\u521b\u5efa\u670d\u52a1 \u7b2c\u4e8c\u6b65\uff1a\u57fa\u672c\u4fe1\u606f\u586b\u5199 \u66f4\u591a\u64cd\u4f5c\u6d41\u7a0b\u53c2\u89c1\u6587\u6863 \u57df\u540d\u63a5\u5165\uff08\u81ea\u6709\u6e90) \u6216\u8005\u89c6\u9891\u6559\u7a0b \u81ea\u4e3b\u6e90\u7ad9\u914d\u7f6e\u6559\u5b66\u89c6\u9891 \u3002 \u57df\u540d\u63a5\u5165(\u53c8\u62cd\u5b58\u50a8\u6e90) \u8fdb\u5165\u3010\u4e91\u5b58\u50a8\u3011\u670d\u52a1\u5217\u8868\uff0c\u4f9d\u6b21\u8fdb\u5165\u670d\u52a1\u521b\u5efa\u548c\u57fa\u672c\u4fe1\u606f\u586b\u5199\u7b49\u6b65\u9aa4\uff1a \u7b2c\u4e00\u6b65\uff1a\u521b\u5efa\u670d\u52a1 \u7b2c\u4e8c\u6b65\uff1a\u57fa\u672c\u4fe1\u606f\u586b\u5199 \u66f4\u591a\u64cd\u4f5c\u6d41\u7a0b\u53c2\u89c1 \u57df\u540d\u63a5\u5165\uff08\u53c8\u62cd\u5b58\u50a8\u6e90) \u6216\u8005\u89c6\u9891\u6559\u7a0b \u53c8\u62cd\u4e91\u5b58\u50a8\u914d\u7f6e\u6559\u5b66\u89c6\u9891 \u3002","title":"\u521b\u5efa\u670d\u52a1"},{"location":"cdn/guide/#_5","text":"\u5047\u8bbe\u4e0a\u8ff0\u914d\u7f6e\u5df2\u5168\u90e8\u5b8c\u6210\uff0c\u60a8\u7684\u57df\u540d\u4e3a test1.upyun.com \uff0c\u914d\u7f6e\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u60a8\u53ef\u901a\u8fc7 ping \u52a0\u901f\u57df\u540d\u7684 CNAME \u5730\u5740 cptest123.b0.aicdn.com \uff0c\u83b7\u53d6 CDN \u8282\u70b9 IP \u4e3a 183.158.35.58 ( \u793a\u4f8b IP \u4e3a\u676d\u5dde\u7535\u4fe1\u8282\u70b9\u51fa\u53e3 IP )\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u7136\u540e\u6253\u5f00\u7ec8\u7aef\u7684 Hosts \u6587\u4ef6\uff0c\u5c06 183.158.35.58 test.yourdomain.com \u5199\u5165\u5176\u4e2d\u5e76\u4fdd\u5b58\uff08 \u6ce8\u610f\uff1a\u6d4b\u8bd5\u5b8c\u6210\u540e\uff0c\u8fdb\u884c\u5220\u9664 )\u3002 \u4fdd\u5b58\u4ee5\u540e\uff0c\u6253\u5f00 Chrome \u6d4f\u89c8\u5668\uff0c\u6309 F12 \u952e\u5f00\u59cb\u6293\u5305\uff0c\u8bbf\u95ee\u57df\u540d\u6d4b\u8bd5\u94fe\u63a5\uff0c\u4f8b\u5982 http:// test.yourdomain.com/image/123.png \uff0c\u5982\u679c\u6210\u529f\u8bbf\u95ee\u5373\u53ef\u8bc1\u660e\u4e0a\u8ff0\u52a0\u901f\u57df\u540d\u914d\u7f6e\u6b63\u786e\uff0c\u6293\u5305\u5982\u4e0b\u56fe\u6240\u793a\uff1a","title":"\u914d\u7f6e\u6d4b\u8bd5"},{"location":"cdn/guide/#_6","text":"\u8be5\u6b65\u9aa4\u4e3b\u8981\u6d4b\u8bd5\u52a0\u901f\u57df\u540d\u5728 CDN \u52a0\u901f\u5e73\u53f0\u4e0a\u7684\u7f13\u5b58\u65f6\u95f4\u914d\u7f6e\u662f\u5426\u751f\u6548\uff0c\u5177\u4f53\u9a8c\u8bc1\u53ef\u4ee5\u53c2\u89c1\u5982\u4e0b\u65b9\u6cd5\uff1a \u5982\u4e0b\u56fe\u6240\u4ee5\uff0c\u540e\u7f00\u4e3a PNG \u7c7b\u578b\u7684\u56fe\u7247\uff0c\u914d\u7f6e\u7684\u7f13\u5b58\u65f6\u95f4\u4e3a 691200s\u3002 \u5728\u6b65\u9aa4\u4e09\u7684\u57fa\u7840\u4e0a\uff0c\u6253\u5f00 Chrome \u6d4f\u89c8\u5668\uff0c\u5c06\u8981\u8bbf\u95ee\u7684 URL \u8f93\u5165\u6d4f\u89c8\u5668\uff0c\u70b9\u51fb\u56de\u8f66\uff0c\u6293\u5305\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u53ef\u4ee5\u770b\u5230 max-age=691200 \uff0c\u8fdb\u800c\u8bc1\u660e\u7f13\u5b58\u914d\u7f6e\u7b56\u7565\u5df2\u7ecf\u751f\u6548\u3002","title":"\u7f13\u5b58\u9a8c\u8bc1"},{"location":"cdn/guide/#cname","text":"\u5982\u679c\u4ee5\u4e0a\u914d\u7f6e\u6d4b\u8bd5\u3001\u7f13\u5b58\u9a8c\u8bc1\u6d4b\u8bd5\u90fd\u6b63\u5e38\uff0c\u5219\u53ef\u8fdb\u884c\u52a0\u901f\u57df\u540d CNAME \u7684\u914d\u7f6e\uff0c\u5177\u4f53\u6b65\u9aa4\u5982\u4e0b\uff1a 1.\u83b7\u53d6 CNAME \u57df\u540d \u8fdb\u5165 CDN \u63a7\u5236\u53f0\uff0c\u9009\u62e9\u76f8\u5e94\u670d\u52a1\uff0c\u5728\u3010\u529f\u80fd\u914d\u7f6e\u3011\u754c\u9762\uff0c\u9009\u62e9\u300c\u57df\u540d\u7ba1\u7406\u300d\u6a21\u5757\uff0c\u76f8\u5e94\u533a\u57df\u53ef\u67e5\u770b CNAME \u5730\u5740\uff0c\u5982\u56fe\u6240\u793a\uff1a 2.\u4fee\u6539 CNAME \u8bb0\u5f55 \u767b\u5165\u57df\u540d\u7684 DNS \u670d\u52a1\u5546\u7f51\u7ad9\uff0c\u4fee\u6539 CNAME \u8bb0\u5f55\uff0c\u5177\u4f53\u914d\u7f6e\u65b9\u6cd5\u53ef\u53c2\u89c1\u5982\u4e0b\u94fe\u63a5\uff1a DNSPod CNAME \u63a5\u5165 CDN \u65b0\u7f51 CNAME \u63a5\u5165 CDN \u4e07\u7f51 CNAME \u63a5\u5165 CDN 3.\u9a8c\u8bc1 CNAME \u914d\u7f6e\u662f\u5426\u751f\u6548 \u56e0 DNS \u89e3\u6790\u8bb0\u5f55\u90fd\u6709\u7f13\u5b58\u65f6\u95f4\uff0cCNAME \u7684\u751f\u6548\u65f6\u95f4\u4e00\u822c\u662f 600s\uff0c\u53ef\u901a\u8fc7 ping \u6240\u914d\u7f6e\u7684\u52a0\u901f\u57df\u540d\uff0c\u68c0\u9a8c CNAME \u914d\u7f6e\u662f\u5426\u751f\u6548\uff0c\u5982\u679c\u540e\u7f00\u663e\u793a\u4e3a aicdn.com\uff0c\u5219\u8bc1\u660e CNAME \u914d\u7f6e\u5df2\u751f\u6548\uff0c\u5373\u52a0\u901f\u4e1a\u52a1\u6b63\u5f0f\u5f00\u59cb\u542f\u7528\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u5982\u6709\u7591\u95ee\u8bf7 \u8054\u7cfb\u6211\u4eec","title":"CNAME \u914d\u7f6e"},{"location":"cdn/live/","text":"\u6982\u8ff0 \u00b6 \u53c8\u62cd\u76f4\u64ad\u4e91(UPLive)\uff0c\u57fa\u4e8e\u53c8\u62cd\u4e91\u5185\u5bb9\u5206\u53d1\u7f51\u7edc\u4e3a\u76f4\u64ad\u5e94\u7528\u63d0\u4f9b\u8d85\u4f4e\u5ef6\u8fdf\u3001\u9ad8\u7801\u7387\u3001\u9ad8\u5e76\u53d1\u7684\u6574\u5957\u4ece\u63a8\u6d41\u7aef\u5230\u64ad\u653e\u7aef\u7684\u4e00\u7ad9\u5f0f\u89e3\u51b3\u65b9\u6848\uff0c\u652f\u6301 RTMP\u3001HTTP-FLV \u548c HLS \u8f93\u51fa\uff0c\u5305\u62ec\u5f55\u5236\u3001\u8f6c\u7801\u7b49\u9644\u52a0\u529f\u80fd\u3002 \u670d\u52a1\u7c7b\u578b \u00b6 \u53c8\u62cd\u4e91\u76f4\u64ad\u7cfb\u7edf\u652f\u6301\u4e24\u79cd\u670d\u52a1\u7c7b\u578b\uff1a\u53c8\u62cd\u4e91\u6e90\u548c\u81ea\u4e3b\u6e90\u7ad9\u3002 \u53c8\u62cd\u4e91\u6e90\uff1a\u8868\u793a\u6d41\u5a92\u4f53\u5185\u5bb9\u76f4\u63a5\u63a8\u6d41\u5230\u53c8\u62cd\u4e91 CDN \uff0c\u5c06\u63a8\u6d41\u4e0e\u5206\u53d1\u90fd\u8fdb\u884c CDN \u52a0\u901f\u3002\u53c8\u62cd\u4e91\u6e90\u73b0\u4ec5\u652f\u6301 RTMP \u63a8\u6d41\u3002 \u7ba1\u7406\u540e\u53f0\uff1a\u76f4\u64ad\u52a0\u901f > \u521b\u5efa\u670d\u52a1 > \u53c8\u62cd\u4e91\u6e90 \u521b\u5efa\u53c8\u62cd\u4e91\u6e90\uff0c\u586b\u5199\u670d\u52a1\u540d\u3001\u5df2\u5907\u6848\u7684\u64ad\u653e\u57df\u540d\u548c\u63a8\u6d41\u57df\u540d\uff0c\u63a8\u6d41\u57df\u540d\u4e0e\u64ad\u653e\u57df\u540d\u4e0d\u80fd\u5171\u7528\u3002 \u53ef\u9009\u62e9\u6027\u586b\u5199\u63a5\u5165\u70b9\uff0c\u5982\u679c\u586b\u5199\u4e86\u5177\u4f53\u7684\u63a5\u5165\u70b9\uff0c\u5219\u53ea\u6709\u8be5\u63a5\u5165\u70b9\u7684 URL \u53ef\u8fdb\u884c\u63a8\u6d41\uff0c\u5176\u4ed6\u63a5\u5165\u70b9\u5747\u63a8\u6d41\u5931\u8d25\u3002\u82e5\u6ca1\u6709\u586b\u5199\u5177 \u4f53\u63a5\u5165\u70b9\uff0c\u5219\u4efb\u610f\u63a5\u5165\u70b9\u53ef\u8fdb\u884c\u63a8\u6d41\uff08\u672c\u9636\u6bb5\u65e0\u8bba\u586b\u4ec0\u4e48\u63a5\u5165\u70b9\uff0c\u5747\u65e0\u9650\u5236\u4f5c\u7528\uff0c\u90fd\u53ef\u4ee5\u6b63\u5e38\u63a8\u62c9\u6d41\uff0c\u5f85\u670d\u52a1\u7248\u672c\u66f4\u65b0\u518d\u52a0\u5165\u9650\u5236\uff09\u3002 \u5f53\u63a8\u6d41\u57df\u540d\u586b\u5199 push.domain.com \uff0c\u64ad\u653e\u57df\u540d\u586b\u5199 play.domain.com \uff0c\u63a5\u5165\u70b9\u586b\u5199 app \uff0c\u5982\u679c\u63a8\u6d41 URL \u4e3a rtmp://push.domain.com/app/stream \u65f6\uff0c\u5176 rtmp \u64ad\u653e URL \u4e3a rtmp://play.domain.com/app/stream \u5176\u4e2d\uff0cstream \u4e3a\u6d41\u540d\uff0c\u53c8\u79f0\u6d41\u5bc6\u94a5\uff0capp/stream \u53c8\u79f0\u4e3a\u9891\u9053\uff0c\u540c\u4e00\u6761\u6d41\u63a8\u62c9\u6d41\u57df\u540d\u4e0d\u540c\uff0c\u4f46\u9891\u9053\u540d\u4e00\u81f4\u3002 \u6ce8\uff1a\u4ee5\u4e0a\u57df\u540d\u3001\u63a5\u5165\u70b9\u53ca\u6d41\u540d\u7684\u547d\u540d\u4ec5\u4e3a\u4e3e\u4f8b\u7528\uff0c\u4e0b\u540c\u3002 \u81ea\u4e3b\u6e90\u7ad9\uff1a\u6d41\u5a92\u4f53\u5185\u5bb9\u5728\u5ba2\u6237\u6e90\u7ad9\uff0c\u53c8\u62cd\u4e91\u901a\u8fc7\u56de\u5ba2\u6237\u6e90\u62c9\u6d41\u7684\u65b9\u5f0f\u5bf9\u5176\u5185\u5bb9\u8fdb\u884c CDN \u5206\u53d1\u3002 \u7ba1\u7406\u540e\u53f0\uff1a\u76f4\u64ad\u52a0\u901f > \u521b\u5efa\u670d\u52a1 > \u81ea\u4e3b\u6e90\u7ad9 \u81ea\u4e3b\u6e90\u7ad9\u9700\u8981\u660e\u786e\u56de\u6e90\u534f\u8bae\u662f RTMP \u8fd8\u662f HTTP\uff0c\u5e76\u586b\u5199\u6e90\u7ad9 IP \u6216\u8005 \u57df\u540d\uff0c\u56de\u6e90 IP \u73b0\u4e0d\u652f\u6301\u591a\u4e2a\uff0c\u82e5\u56de\u6e90 IP \u4f1a\u7ecf\u5e38\u53d8\u66f4\uff0c\u5efa\u8bae\u6e90\u7ad9\u586b\u5199\u57df\u540d\u5f62\u5f0f\u3002\u5f53\u56de\u6e90\u534f\u8bae\u662f RTMP \u65f6\uff0c\u9ed8\u8ba4\u7aef\u53e3\u662f1935\uff0c\u5f53\u56de\u6e90\u534f\u8bae\u662f HTTP \u65f6\uff0c\u9ed8\u8ba4\u7aef\u53e3\u4e3a 80\uff0c\u652f\u6301\u7aef\u53e3\u81ea\u5b9a\u4e49\u3002\u56e0\u81ea\u4e3b\u6e90\u7ad9\u662f\u56de\u5ba2\u6237\u6e90\u62c9\u6d41\uff0c\u5219\u65e0\u63a8\u6d41\u57df\u540d\uff0c\u53ea\u9700\u8981\u8bbe\u7f6e\u64ad\u653e\u57df\u540d\u3002 HTTP \u534f\u8bae\u56de\u6e90\u65f6\uff0c\u4ee5 HTTP-FLV \u5f62\u5f0f\u56de\u6e90\uff0c\u82e5\u6e90\u4e3a HLS \u53ef\u901a\u8fc7\u6587\u4ef6\u52a0\u901f\u7cfb\u7edf\u521b\u5efa\u670d\u52a1\uff0c\u914d\u7f6e\u56de\u6e90\u4fe1\u606f\u3002 \u63a5\u5165\u70b9\u914d\u7f6e\u8bf4\u660e\u540c\u53c8\u62cd\u4e91\u6e90\u3002 \u4ee5\u4e0a\u4e24\u79cd\u4e1a\u52a1\u6a21\u5f0f\uff0c\u5747\u652f\u6301RTMP\u3001HTTP-FLV \u548cHLS \u64ad\u653e\uff0c\u540e\u7eed\u7ae0\u8282\u4f1a\u8be6\u7ec6\u4ecb\u7ecd\u3002 \u57fa\u7840\u914d\u7f6e \u00b6 \u76f4\u64ad\u57fa\u7840\u914d\u7f6e\u662f\u76f4\u64ad\u4e1a\u52a1\u573a\u666f\u4f7f\u7528\u975e\u5e38\u9891\u7e41\u7684\u529f\u80fd\u3002 \u57df\u540d\u7ed1\u5b9a \u00b6 \u76f4\u64ad\u7ba1\u7406\u540e\u53f0\uff1a\u670d\u52a1 > \u52a0\u901f\u57df\u540d > \u57df\u540d\u7ed1\u5b9a \u6e90\u7ad9\u7c7b\u578b\uff1a\u5168\u90e8 \u57df\u540d\u7ed1\u5b9a\u4ec5\u652f\u6301\u5df2\u5907\u6848\u6210\u529f\u7684\u81ea\u5b9a\u4e49\u57df\u540d\u8fdb\u884c\u7ed1\u5b9a\uff0c\u5982\u679c\u8be5\u57df\u540d\u672a\u5907\u6848\u6210\u529f\uff0c\u5219\u4e0d\u80fd\u901a\u8fc7\u57df\u540d\u7ed1\u5b9a\u5ba1\u6838\u3002 \u5ba1\u6838\u7ed3\u679c\u4f1a\u901a\u8fc7\u90ae\u4ef6\u8fdb\u884c\u901a\u77e5\uff0c\u6b63\u5e38\u5ba1\u6838\u65f6\u95f4\u4e3a\u4e00\u4e2a\u5de5\u4f5c\u65e5\u3002 \u4ee5\u4e0b\u662f\u5173\u4e8e\u57df\u540d\u7ed1\u5b9a\u7684\u4e00\u4e9b\u91cd\u8981\u8bf4\u660e\uff08\u540c\u6587\u4ef6\u52a0\u901f\uff09\uff1a \u9664\u5e38\u89c4\u5f62\u5f0f\u7684\u57df\u540d\u5916\uff08\u5305\u62ec\u9876\u7ea7\u57df\u540d\uff09\uff0c\u6211\u4eec\u8fd8\u652f\u6301\u6cdb\u57df\u540d\u7ed1\u5b9a\uff0c\u6bd4\u5982 .yourdomain.com\uff1b\u7279\u522b\u5730\uff0c\u5176\u4e2d \u6700\u591a\u652f\u6301\u5339\u914d 4 \u5c42\uff1a [v] *.yourdomain.com => foo.yourdomain.com [v] *.yourdomain.com => bar.yourdomain.com [v] *.yourdomain.com => foo.bar.yourdomain.com [v] *.yourdomain.com => foo.bar.baz.yourdomain.com [v] *.yourdomain.com => foo.bar.baz.qux.yourdomain.com [x] *.yourdomain.com => foo.bar.baz.qux.quxx.yourdomain.com [v] *.bar.yourdomain.com => foo.bar.yourdomain.com [v] *.bar.yourdomain.com => baz.foo.bar.yourdomain.com [x] *.bar.yourdomain.com => foo.bar.baz.yourdomain.com \u6dfb\u52a0\u57df\u540d\u7ed1\u5b9a\u540e\uff0c\u9700\u8981\u5230\u57df\u540d\u670d\u52a1\u5546\u7684 DNS \u89e3\u6790\u7ba1\u7406\u4e2d\uff0c\u5c06\u63a8\u6d41\u57df\u540d\u7684 CNAME \u89e3\u6790\u5230 <bucket>.s1.aicdn.com \uff0c\u5c06\u64ad\u653e\u57df\u540d\u7684 CNAME \u89e3\u6790\u5230 <bucket>.s0.aicdn.com \u3002 \u5f53\u4e1a\u52a1\u6a21\u5f0f\u4e3a\u53c8\u62cd\u4e91\u6e90\u65f6\uff0c\u7528\u6237\u9700\u8981\u5c06\u5176\u63a8\u6d41\u57df\u540d\u548c\u64ad\u653e\u57df\u540d\u5206\u522b CNAME \u5230\u5bf9\u5e94\u7684\u53c8\u62cd\u4e91\u5185\u90e8\u57df\u540d\u3002 \u63a8\u6d41\u5185\u90e8\u57df\u540d\u4e3a <bucket>.s1.aicdn.com \uff0c\u64ad\u653e\u5185\u90e8\u57df\u540d\u4e3a <bucket>.s0.aicdn.com \u3002 \u6ce8\uff1a <> \u5185\u7684 bucket \u9700\u8981\u66ff\u6362\u6210\u5bf9\u5e94\u7684\u670d\u52a1\u540d\uff0c\u4e0b\u540c\u3002 \u5f53\u4e1a\u52a1\u6a21\u5f0f\u4e3a\u81ea\u4e3b\u6e90\u7ad9\u65f6\uff0c\u7528\u6237\u53ea\u9700\u8981\u5c06\u5176\u64ad\u653e\u57df\u540d CNAME \u5230\u5bf9\u5e94\u7684\u53c8\u62cd\u4e91\u64ad\u653e\u5185\u90e8\u57df\u540d <bucket>.s0.aicdn.com \u3002 \u56de\u6e90\u914d\u7f6e \u00b6 \u7ba1\u7406\u540e\u53f0\uff1a\u670d\u52a1 > \u57fa\u7840\u914d\u7f6e > \u56de\u6e90\u914d\u7f6e \u6e90\u7ad9\u7c7b\u578b\uff1a\u5ba2\u6237\u6e90\u7ad9 \u56de\u6e90\u534f\u8bae \u00b6 \u56de\u6e90\u534f\u8bae\u652f\u6301 HTTP \u548c RTMP\uff0c\u5f53\u9009\u62e9 HTTP \u56de\u6e90\u65f6\uff0c\u9ed8\u8ba4\u7aef\u53e3\u53f7\u4e3a80\uff0c\u5f53\u9009\u62e9RTMP\u56de\u6e90\u65f6\uff0c\u9ed8\u8ba4\u7aef\u53e3\u53f7\u4e3a1935\uff0c\u5177\u4f53\u7aef\u53e3\u53f7\u53ef\u4ee5\u81ea\u5b9a\u4e49\uff0c\u901a\u8fc7\u540e\u53f0\u8bbe\u7f6e\u3002 \u6e90\u7ad9 \u00b6 \u8be5\u914d\u7f6e\u9879\u4e3a\u53ef\u8bbf\u95ee\u7684\u7f51\u7edc\u5730\u5740\uff0c\u53ef\u4ee5\u76f4\u63a5\u586b IP \u5730\u5740\u4e5f\u53ef\u4ee5\u586b\u5199\u57df\u540d\u5730\u5740\uff0c\u73b0\u4e0d\u652f\u6301\u591aIP \u3002\u5982\u679c\u662f\u57df\u540d\u5730\u5740\uff0c\u90a3\u4e48 CDN \u5728\u56de\u6e90\u65f6\u4f1a\u5bf9\u8be5\u57df\u540d\u5730\u5740\u8fdb\u884c DNS \u89e3\u6790\uff0c\u7136\u540e\u901a\u8fc7\u89e3\u6790\u51fa\u6765\u7684 IP \u5730\u5740\u518d\u8fdb\u884c\u8bbf\u95ee\uff0c\u56e0\u6b64\u82e5\u89e3\u6790\u5931\u8d25\u4e5f\u4f1a\u5bfc\u81f4\u65e0\u6cd5\u6b63\u5e38\u56de\u6e90\u3002 HTTP-FLV \u8f93\u51fa \u00b6 \u7ba1\u7406\u540e\u53f0\uff1a\u670d\u52a1 > \u57fa\u7840\u914d\u7f6e > HTTP-FLV \u8f93\u51fa \u6e90\u7ad9\u7c7b\u578b\uff1a\u5168\u90e8 \u901a\u8fc7\u7ba1\u7406\u540e\u53f0\uff0c\u53ef\u4ee5\u914d\u7f6e\u4efb\u4e00\u64ad\u653e\u57df\u540d\u4f5c\u4e3a HTTP-FLV \u7684\u8f93\u51fa\u57df\u540d\u3002 \u5f53\u63a8\u6d41 url \u4e3a rtmp://push.domain.com/app/stream \u65f6\uff0c\u5bf9\u57df\u540d\u64ad\u653e\u57df\u540d\u5f00\u542f HTTP-FLV \u8f93\u51fa\u914d\u7f6e\u540e\uff0c \u53ef\u4ee5\u901a\u8fc7 http://play.domain.com/app/stream.flv \u8fdb\u884c\u64ad\u653e\u3002 HLS+ \u8f93\u51fa \u00b6 \u7ba1\u7406\u540e\u53f0\uff1a\u670d\u52a1 > \u57fa\u7840\u914d\u7f6e > HLS \u8f93\u51fa \u6e90\u7ad9\u7c7b\u578b\uff1a\u5168\u90e8 \u901a\u8fc7\u7ba1\u7406\u540e\u53f0\uff0c\u53ef\u4ee5\u914d\u7f6e\u4efb\u4e00\u64ad\u653e\u57df\u540d\u4f5c\u4e3a HLS \u7684\u8f93\u51fa\u57df\u540d\u3002 \u5f00\u542f\u8be5\u914d\u7f6e\u540e\uff0c\u53ef\u901a\u8fc7 http://play.domain.com/app/stream.m3u8 \u5bf9 rtmp://push.domain.com/app/stream \u7684\u63a8\u6d41\u8fdb\u884c\u64ad\u653e\u3002 \u9ad8\u7ea7\u529f\u80fd \u00b6 Token \u9632\u76d7\u94fe \u00b6 Token \u9632\u76d7\u94fe\u53ef\u4ee5\u5bf9\u63a8\u6d41\u548c\u64ad\u653e\u7684\u8bf7\u6c42\u8fdb\u884c\u6821\u9a8c\uff0c\u53ef\u8bbe\u7f6e\u7b7e\u540d\u8fc7\u671f\u65f6\u95f4\u6765\u63a7\u5236\u6d41\u7684\u8bbf\u95ee\u65f6\u9650\u3002 \u63a8\u6d41\u9632\u76d7\u94fe \u00b6 \u4e00\u4e2a\u6700\u7b80\u7684\u63a8\u6d41\u5730\u5740\u683c\u5f0f\u5982\u4e0b\uff1a rtmp://push.domain.com/app/stream?domain={domain}&token={token}&expired_ts={expired_ts} \u53c2\u6570\u8bf4\u660e: push.domain.com: \u57df\u540d\uff0c\u7531\u4e1a\u52a1\u7cfb\u7edf\u5206\u914d\u3002 expire_ts: \u6709\u6548\u671f\uff0c\u5ba2\u6237\u81ea\u7531\u586b\u5199\uff0c\u8d85\u8fc7\u6709\u6548\u671f\u5c06\u505c\u6b62\u670d\u52a1\u3002 token: \u9700\u8ba1\u7b97\u5f97\u51fa\uff0c \u8ba1\u7b97\u516c\u5f0f\uff1atoken = MD5(domain + expire_ts + secret) \uff0c \u6bd4\u5982 domain = publish.bravo.com\uff0capp = live, stream = stream, expired_ts = 1465244082\uff0csecret = a1b2c3d4e53gxwb07 \u5219 token=MD5(push.domain.com/live/stream1465244082a1b2c3d4e53gxwb07) \u6ce8\uff1a\u8ba1\u7b97\u516c\u5f0f\u4e2d\u7684 secret\uff0c\u7531\u4e1a\u52a1\u7cfb\u7edf\u63d0\u4f9b\u5e76\u544a\u77e5\u5ba2\u6237\uff0c\u4f5c\u4e3a\u5ba2\u6237\u7684\u552f\u4e00\u6807\u8bc6\u3002\u5ba2\u6237\u9700\u59a5\u5584\u4fdd\u7ba1\uff0c\u8c28\u9632\u5916\u6cc4\u3002 \u62c9\u6d41\u9632\u76d7\u94fe \u00b6 \u8be6\u7ec6\u89c4\u5219\u89c1 CDNToken \u9632\u76d7\u94fe\u89c4\u8303:http://docs.upyun.com/cdn/feature/#token\u3002 \u589e\u503c\u670d\u52a1 \u00b6 \u5f55\u64ad \u00b6 \u5ba2\u6237\u9700\u63d0\u4f9b\u7684\u914d\u7f6e\u4fe1\u606f\uff1a\u9700\u8981\u5f55\u5236\u7684\u62c9\u6d41 URL\u3002 \u5f55\u5236\u65b9\u5f0f\uff1a\u89e6\u53d1 or \u5b9a\u65f6\u5f55\u5236\u3002 \u5f55\u64ad\u7684\u4e3b\u8981\u4f5c\u7528\u662f\u5c06\u63a8\u6d41\u5185\u5bb9\u5f55\u5236\u6210\u6587\u4ef6\uff0c\u6700\u7ec8\u7528\u4e8e\u70b9\u64ad\u3002 \u73b0\u9ed8\u8ba4\u5f55\u5236\u6210 mp4 \u683c\u5f0f\u6587\u4ef6\uff0c\u4e0a\u4f20\u5230\u53c8\u62cd\u4e91\u5b58\u50a8\uff0c\u5ba2\u6237\u53ef\u4ee5\u81ea\u5b9a\u4e49\u4e0a\u4f20\u5230\u54ea\u4e2a\u5b58\u50a8\u670d\u52a1\uff08\u6682\u4e0d\u652f\u6301\uff0c\u63a5\u53e3\u672a\u5f00\u653e\uff0c\u73b0\u5728\u662f\u9ed8\u8ba4\u4e91\u5b58\u50a8\u4e3alive-recorder\uff09\u3002 \u53c8\u62cd\u5f55\u5236\u7cfb\u7edf\u4f1a\u81ea\u52a8\u5c06\u5f55\u5236\u4e0b\u6765\u7684\u5185\u5bb9\u4e0a\u4f20\u5230\u53c8\u62cd\u4e91\u5b58\u50a8\u540e\uff0c\u53ef\u4ee5\u6839\u636e\u4e91\u5b58\u50a8\u83b7\u53d6\u76ee\u5f55\u6587\u4ef6\u5217\u8868 \u6765\u83b7\u53d6\u76f8\u5173\u5f55\u5236\u6587\u4ef6\u5217\u8868\u3002 \u5982\u679c\u5bf9\u5f55\u5236\u6587\u4ef6\u683c\u5f0f\u6709\u5176\u4ed6\u8981\u6c42\uff0c\u53ef\u5728\u53c8\u62cd\u4e91\u5904\u7406\u4e2d\u5fc3\u5bf9\u5176\u8fdb\u884c\u76f8\u5173\u5904\u7406\uff0c\u6bd4\u5982\u683c\u5f0f\u5904\u7406\uff0c\u89c6\u9891\u62fc\u63a5\uff0c\u8be6\u7ec6\u8bf7\u89c1 \u4e91\u5904\u7406\u6587\u6863 \u3002 \u5f55\u5236\u6587\u4ef6\u5177\u4f53\u8def\u5f84\u4e3a\uff1a live-recorder.b0.upaiyun.com/play.domain.com/live/stream/recorder20160604163702.mp4 \u5176\u4e2d live-recorder.b0.upaiyun.com \u4e3a\u53c8\u62cd\u4e91\u9ed8\u8ba4\u57df\u540d\uff0c\u53c8\u62cd\u4f1a\u5c06\u5f55\u5236\u6587\u4ef6\u9ed8\u8ba4\u4fdd\u5b58\u5728\u76f8\u5e94\u7a7a\u95f4\u4ee5\u8fd9\u6761\u6d41 URL \u4e3a\u8def\u5f84\u7684\u76ee\u5f55\u4e0b\uff0c\u5373 live-recorder.b0.upaiyun.com/play.domain.com/live/stream/\uff0c recorder20160604163702.mp4 \u4e3a\u5177\u4f53\u7684\u5f55\u5236\u6587\u4ef6\uff0crecorder \u4e3a\u56fa\u5b9a\u6807\u8bc6\u5b57\u7b26\uff0c20160604163702 \u4e3a\u5f55\u5236\u5b8c\u6210\u65f6\u95f4\uff0cmp4\u4e3a\u6587\u4ef6\u7c7b\u578b\u3002 \u5982\u679c\u7528\u53c8\u62cd cdn\uff0c\u76f4\u63a5\u53ef\u901a\u8fc7 http://\u7528\u6237\u52a0\u901f\u57df\u540d/play.domain.com/live/stream/recorder20160604163702.mp4 \u6765\u8bbf\u95ee\u3002 \u5f55\u5236\u652f\u6301\u89e6\u53d1\u5f55\u5236\u4e0e\u5b9a\u65f6\u5f55\u5236\u4e24\u79cd\u65b9\u5f0f\u3002 \u89e6\u53d1\u5f55\u5236 \u00b6 \u6307\u5b9a\u914d\u7f6e\u67d0\u4e00\u6761\u6d41\u4e3a\u89e6\u53d1\u5f55\u5236\u7684\u6d41\uff0c\u5219\u5728\u8fd9\u6761\u6d41\u63a8\u6d41\u5230\u53c8\u62cd CDN \u7684\u65f6\u5019\uff0c\u53c8\u62cd\u5f55\u5236\u7cfb\u7edf\u5c31\u5bf9\u5176\u5f00\u59cb\u5f55\u5236\uff0c\u5f53\u8fd9\u63a8\u6d41\u65ad\u5f00\u540e\u505c\u6b62\u5f55\u5236\uff0c\u518d\u63a8\u6d41\u540e\u53c8\u7ee7\u7eed\u5f00\u59cb\u5f55\uff0c\u4ee5\u6b64\u5faa\u73af\u3002\u63a8\u6d41\u65ad\u5f00\u65f6\uff0c\u5f55\u5236\u6587\u4ef6\u81ea\u52a8\u505c\u6b62\u5f55\u5236\uff0c\u4e0b\u6b21\u518d\u63a8\u6d41\u540e\uff0c\u5f55\u5236\u7684\u6587\u4ef6\u540d\u5c06\u4e0e\u524d\u4e00\u6587\u4ef6\u540d\u4e0d\u4e00\u6837\uff0c\u8fd9\u6837\u540c\u4e00\u6761\u6d41\u4f1a\u751f\u6210\u591a\u4e2a\u4e0d\u540c\u6587\u4ef6\uff0c\u5e76\u4ee5\u6587\u4ef6\u540d\u6700\u540e\u7684\u65f6\u95f4\u8868\u793a\u5176\u5148\u540e\u987a\u5e8f\u3002 \u5b9a\u65f6\u5f55\u5236 \u00b6 \u6307\u5b9a\u914d\u7f6e\u67d0\u4e00\u6761\u6d41\u4ece\u51e0\u70b9\u5f00\u59cb\u5f55\u5236\uff0c\u5e76\u5230\u51e0\u70b9\u7ed3\u675f\uff0c\u4e0d\u7ba1\u5728\u8fd9\u65f6\u95f4\u6bb5\u5185\u63a8\u6d41\u65ad\u5f00\u51e0\u6b21\uff0c\u5f55\u5236\u7cfb\u7edf\u5c06\u5728\u76f8\u5e94\u65f6\u95f4\u6bb5\u5185\u5bf9\u5176\u63a8\u6d41\u7684\u6240\u6709\u6d41\u5185\u5bb9\u8fdb\u884c\u5f55\u5236\u5728\u540c\u4e00\u6587\u4ef6\u540d\u4e0b\uff0c\u5b9a\u65f6\u4efb\u52a1\u53ea\u751f\u6210\u4e00\u4e2a\u6587\u4ef6\u3002 \u56de\u8c03 \u00b6 \u5ba2\u6237\u9700\u63d0\u4f9b\u63a5\u6536\u56de\u8c03\u7684\u5730\u5740\uff08\u5efa\u8bae\u4e3aURL\uff09\u3002 \u5f55\u5236\u6587\u4ef6\u6240\u5728\u7684\u8def\u5f84\u4ee5 post \u8bf7\u6c42\u8fd4\u56de\u7ed9\u5ba2\u6237\uff0c\u5177\u4f53\u7684 json \u683c\u5f0f\u4e3a {\"timestamp\": \"2016-06-04 16:38:45\", \"path\": [\"http://live-recorder.b0.upaiyun.com/play.domain.com/live/stream/recorder20160604163702.mp4\"]} \u5176\u4e2d\uff0ctimestamp \u4e3a\u53d1\u9001 json \u56de\u8c03\u4efb\u52a1\u65f6\u95f4\uff0cpath \u4e3a\u5f55\u5236\u6587\u4ef6\u5177\u4f53\u8def\u5f84\u3002 \u5b9e\u65f6\u8f6c\u7801 \u00b6 \u5ba2\u6237\u9700\u63d0\u4f9b\u9700\u8981\u8f6c\u7801\u7684\u6d41\u3001\u9700\u8981\u5339\u914d\u7684\u540e\u7f00\u53ca\u8f6c\u7801\u6a21\u677f\u3002 \u652f\u6301\u97f3\u89c6\u9891\u6d41\u5b9e\u65f6\u8f6c\u7801\u5904\u7406\uff0c\u901a\u8fc7\u8f6c\u7801\u6a21\u7248\u53ef\u914d\u7f6e\u7f16\u7801\u6807\u51c6\u3001\u5206\u8fa8\u7387\u3001\u7801\u7387\u3001\u8f93\u51fa\u6d41\u7c7b\u578b\u7b49\u6d41\u5904\u7406\u53c2\u6570\u3002 \u9ed8\u8ba4\u652f\u6301\u4f7f\u7528\u53c8\u62cd\u4e91\u76f4\u64ad\u670d\u52a1\u7684 RTMP\uff0cHTTP-FLV \u548cHLS \u534f\u8bae\u7684\u6d41\u8f6c\u7801 \u652f\u6301 12 \u79cd\u8f6c\u7801\u6a21\u677f\u548c\u5ba2\u6237\u81ea\u5b9a\u4e49\u8f6c\u7801\u914d\u7f6e\uff0c\u8be6\u7ec6\u6a21\u677f\u4fe1\u606f\uff1ahttp://docs.upyun.com/cloud/attachment/ \u652f\u6301\u81ea\u5b9a\u4e49\u8f6c\u7801\u540e\u7f00\uff0c\u5206\u9694\u7b26\u652f\u6301\u4e2d\u5212\u7ebf\uff08-\uff09\u3001\u4e0b\u5212\u7ebf\uff08_\uff09\u548c\u611f\u53f9\u53f7\uff08!\uff09\u3002 \u652f\u6301\u89e6\u53d1\u5f0f\u8f6c\u7801\uff0c\u9700\u63d0\u524d\u914d\u7f6e\u9700\u8981\u8f6c\u7801\u7684\u6d41\u5730\u5740\u4ee5\u53ca\u8f6c\u7801\u7684\u89e6\u53d1\u540e\u7f00\uff0c\u5982 \u9700\u8981\u8f6c\u7801\u7684\u539f\u59cb\u6d41\u4e3a\uff1ahttp://play.domain.com/live/stream \u89e6\u53d1\u8f6c\u7801\u7684\u540e\u7f00\u5339\u914d\u4e3a -small\uff0c\u5bf9\u5e94\u7684\u8f6c\u7801\u6a21\u677f\u4e3a 540p(16:9) \u5f53\u6709\u7528\u6237\u8bf7\u6c42 http://play.domain.com/live/stream-small \u65f6\u89e6\u53d1\u8f6c\u7801\uff0c\u5f53\u6700\u540e\u4e00\u4e2a\u8bf7\u6c42\u8be5\u8f6c\u7801\u6d41\u7684\u7528\u6237\u65ad\u5f00\u8fde\u63a5\u540e\uff0c\u505c\u6b62\u8f6c\u7801\u3002 \u7981\u64ad \u00b6 \u4e92\u52a8\u76f4\u64ad\u4e1a\u52a1\u7279\u6027\u4e3a:\u76f4\u64ad\u89c6\u9891\u5185\u5bb9\u7531\u4e3b\u64ad\u5b9e\u65f6\u63a8\u9001\u81f3\u670d\u52a1\u5668,\u82e5\u4e3b\u64ad\u4f20\u64ad\u975e\u6cd5\u5185\u5bb9,\u5219\u5f71\u54cd\u5de8\u5927\u3002\u56e0\u6b64\u5382\u5546\u9700\u8981\u5bf9\u76f4\u64ad\u89c6\u9891\u5185\u5bb9\u8fdb\u884c\u5b9e\u65f6\u76d1\u63a7,\u5f53\u51fa\u73b0\u975e\u6cd5\u5185\u5bb9\u65f6,\u53ca\u65f6\u7981\u6b62\u975e\u6cd5\u5185\u5bb9\u7684\u4f20\u64ad\u3002 \u79d2\u7ea7\u7981\u64ad\u5219\u662f\u9488\u5bf9\u8be5\u4e1a\u52a1\u573a\u666f\u800c\u7814\u53d1\u7684\u529f\u80fd,\u7531\u53c8\u62cd\u63d0\u4f9b\u4e00\u4e2a API\u3002 \u63a5\u53e3\u7ed9\u5ba2\u6237,\u5f53\u5ba2\u6237\u53d1\u73b0\u67d0\u76f4\u64ad\u89c6\u9891\u5185\u5bb9\u975e\u6cd5\u65f6,\u5b9e\u65f6\u65ad\u5f00\u4e3b\u64ad\u63a8\u6d41,\u4ece\u800c\u963b\u6b62\u975e\u6cd5\u5185\u5bb9\u7684\u4f20\u64ad\u3002 \u63a5\u53e3\u652f\u6301\u7acb\u5373\u7981\u64ad\uff0c\u6062\u590d\u7981\u64ad\uff0c\u7981\u64ad\u4e00\u6bb5\u65f6\u95f4\u3002 \u5982\u9700\u8f6c\u7801\u3001\u5f55\u5236\u548c\u7981\u64ad\u7b49\u529f\u80fd\u8bf7\u8054\u7cfb\u552e\u524d\uff0c\u5982\u6709\u4efb\u4f55\u95ee\u9898\u3001\u610f\u89c1\u6216\u5efa\u8bae\uff0c\u8bf7\u54a8\u8be2\u5ba2\u670d\u4eba\u5458\uff1a \u5ba2\u670d\u70ed\u7ebf\uff1a0571-81020203\uff08\u552e\u524d\uff09\u30010571-81020204\uff08\u5ba2\u670d\uff09 \u5ba2\u670d QQ\uff1a200576786 \u6280\u672f\u652f\u6301\uff1asupport@upyun.com \u5efa\u8bae\u53cd\u9988\uff1afeedback@upyun.com IOS \u63a8\u6d41 SDK \u00b6 \u7cfb\u7edf\u8bf4\u660e \u00b6 \u652f\u6301 iOS 8 \u53ca\u4ee5\u4e0a\u7cfb\u7edf\u7248\u672c \u652f\u6301 ARMv7\uff0cARM64\uff0cx86_64 \u67b6\u6784 \u529f\u80fd\u8bf4\u660e \u00b6 \u91c7\u96c6\u6a21\u5757\u6e90\u7801\u5f00\u653e\uff0c\u97f3\u89c6\u9891\u53ef\u4ee5\u81ea\u7531\u914d\u7f6e \u652f\u6301\u786c\u4ef6\u7f16\u7801 \u591a\u7801\u7387\u53ef\u9009 \u652f\u6301 H.264 \u89c6\u9891\u7f16\u7801 \u652f\u6301 AAC \u97f3\u9891\u7f16\u7801 \u652f\u6301\u524d\u540e\u6444\u50cf\u5934 \u652f\u6301\u81ea\u52a8\u5bf9\u7126 \u652f\u6301\u624b\u52a8\u8c03\u6574\u5bf9\u7126\u70b9 \u652f\u6301\u95ea\u5149\u706f\u64cd\u4f5c \u652f\u6301\u591a\u5206\u8fa8\u7387\u7f16\u7801 \u652f\u6301\u6784\u9020\u5e26\u5b89\u5168\u6388\u6743\u51ed\u8bc1\u7684 RTMP \u63a8\u6d41\u5730\u5740 \u652f\u6301 ARMv7, ARM64, x86_64 \u67b6\u6784 \u652f\u6301 RTMP \u534f\u8bae\u76f4\u64ad\u63a8\u6d41 \u652f\u6301\u63a8\u6d41\u65f6\u53ef\u53d8\u7801\u7387 \u63d0\u4f9b\u53d1\u9001 buffer \u652f\u6301\u89c6\u9891 Orientation \u64cd\u4f5c \u652f\u6301\u5f31\u7f51\u4e22\u5e27\u7b56\u7565 \u652f\u6301\u540e\u53f0\u97f3\u9891\u63a8\u6d41 \u652f\u6301\u6c34\u5370\u529f\u80fd \u652f\u6301\u7f8e\u989c\u529f\u80fd \u9879\u76ee\u5730\u5740\uff1ahttps://github.com/upyun/ios-live-sdk \u53cd\u9988\u53ca\u5efa\u8bae\uff1alivesdk@upai.com Android \u63a8\u6d41 SDK \u00b6 \u7cfb\u7edf\u8bf4\u660e \u00b6 Android 4.1(API 16) \u4ee5\u4e0a \u652f\u6301ARMv5\uff0cARMv7,ARMv8\u7248\u672c \u529f\u80fd\u8bf4\u660e \u00b6 \u652f\u6301 H.264 \u548c AAC \u786c\u7f16 \u786c\u7f16\u652f\u6301 Android Min API 18\uff08Android 4.3\uff09\u53ca\u5176\u4ee5\u4e0a\u7248\u672c \u652f\u6301 RTMP \u5c01\u5305\u53ca\u63a8\u6d41 \u652f\u6301 RTMP \u63a8\u6d41\u81ea\u9002\u5e94\u7f51\u7edc\u8d28\u91cf\u52a8\u6001\u5207\u6362\u7801\u7387\u6216\u81ea\u5b9a\u4e49\u7b56\u7565 \u652f\u6301\u7eaf\u97f3\u9891\u63a8\u6d41\uff0c\u4ee5\u53ca\u540e\u53f0\u8fd0\u884c \u652f\u6301\u52a8\u6001\u66f4\u6539 Encoding Orientation \u9879\u76ee\u5730\u5740\uff1ahttps://github.com/upyun/android-push-sdk \u53cd\u9988\u53ca\u5efa\u8bae\uff1alivesdk@upai.com IOS \u64ad\u653e\u5668 SDK \u00b6 \u7cfb\u7edf\u8bf4\u660e \u00b6 \u652f\u6301 iOS 8 \u53ca\u4ee5\u4e0a\u7cfb\u7edf\u7248\u672c \u652f\u6301 ARMv7\uff0cARM64\uff0cx86_64 \u67b6\u6784 \u529f\u80fd\u8bf4\u660e \u00b6 RTMP \u76f4\u64ad\u6d41\u64ad\u653e HTTP-FLV \u76f4\u64ad\u6d41\u64ad\u653e HLS \u64ad\u653e \u9ad8\u53ef\u5b9a\u5236:\u53ef\u81ea\u5b9a\u4e49\u5c3a\u5bf8\uff0c\u6309\u94ae\uff0c\u8fdb\u5ea6\u6761\uff0c\u5168\u5c4f\uff0c\u65cb\u8f6c\u7b49UI\u5c5e\u6027 \u5355\u97f3\u9891\u64ad\u653e RTMP \u76f4\u64ad\u9996\u5c4f\u79d2\u5f00\u652f\u6301 RTMP \u76f4\u64ad\u7d2f\u79ef\u5ef6\u8fdf\u6d88\u9664\u6280\u672f \u652f\u6301 speex \u89e3\u7801 \u97f3\u753b\u540c\u6b65\u8c03\u6574 \u4e00\u5c4f\u591a\u753b \u70b9\u64ad\u652f\u6301 \u652f\u6301 seek \u529f\u80fd \u89c6\u9891\u7f13\u51b2\u8bbe\u7f6e\uff0c\u7f13\u51b2\u8fdb\u5ea6 \u652f\u6301\u9884\u8fde\u63a5\uff0c\u540e\u64ad\u653e\u529f\u80fd \u96c6\u6210\u4eae\u5ea6\u8c03\u6574\u548c\u97f3\u91cf\u8c03\u6574 \u652f\u6301\u9759\u97f3\u64ad\u653e \u652f\u6301\u64ad\u653e\u5668\u72b6\u6001\u56de\u8c03 \u652f\u6301\u6d41\u4fe1\u606f\uff0c\u64ad\u653e\u5668\u4fe1\u606f\u5bdf\u770b\uff08Dashboard\uff09 \u652f\u6301\u64ad\u653e\u672c\u5730\u89c6\u9891\u6587\u4ef6 \u96c6\u6210\u64ad\u653e\u8d28\u91cf\u76d1\u63a7 \u9879\u76ee\u5730\u5740\uff1ahttps://github.com/upyun/ios-live-sdk \u53cd\u9988\u53ca\u5efa\u8bae\uff1alivesdk@upai.com Android \u64ad\u653e\u5668 SDK \u00b6 \u7cfb\u7edf\u8bf4\u660e \u00b6 Android 2.3 (API 9) \u53ca\u5176\u4ee5\u4e0a \u652f\u6301 ARMv5\uff0cARMv7,ARMv8 \u7248\u672c \u529f\u80fd\u8bf4\u660e \u00b6 Android Min API 9 \u57fa\u4e8e ijkplayer ( based on ffplay ) \u652f\u6301 RTMP \u548c HLS \u534f\u8bae\u7684\u76f4\u64ad\u6d41\u5a92\u4f53\u64ad\u653e \u652f\u6301\u5e38\u89c1\u7684\u97f3\u89c6\u9891\u6587\u4ef6\u64ad\u653e\uff08MP4\u3001M4A\u3001flv \u7b49\uff09 \u652f\u6301 MediaCodec \u786c\u4ef6\u89e3\u7801 \u63d0\u4f9b\u64ad\u653e\u5668\u6838\u5fc3\u7c7b PLMediaPlayer \u63d0\u4f9b PLVideoView \u63a7\u4ef6 \u652f\u6301\u64ad\u653e\u5668\u97f3\u91cf\u8bbe\u7f6e\uff0c\u53ef\u5b9e\u73b0\u9759\u97f3\u529f\u80fd \u652f\u6301\u7eaf\u97f3\u9891\u64ad\u653e \u652f\u6301\u76f4\u64ad\u7d2f\u79ef\u5ef6\u65f6\u4f18\u5316 \u652f\u6301 ARM, ARMv7a, ARM64v8a, X86 \u4e3b\u6d41\u82af\u7247\u4f53\u7cfb\u67b6\u6784 \u53ef\u9ad8\u5ea6\u5b9a\u5236\u5316\u7684 MediaController \u9ad8\u53ef\u5b9a\u5236:\u53ef\u81ea\u5b9a\u4e49\u5c3a\u5bf8\uff0c\u6309\u94ae\uff0c\u8fdb\u5ea6\u6761\uff0c\u5168\u5c4f\uff0c\u65cb\u8f6c\u7b49UI\u5c5e\u6027 \u5355\u97f3\u9891\u64ad\u653e RTMP \u76f4\u64ad\u9996\u5c4f\u79d2\u5f00\u652f\u6301 RTMP \u76f4\u64ad\u7d2f\u79ef\u5ef6\u8fdf\u6d88\u9664\u6280\u672f \u652f\u6301 speex \u89e3\u7801 \u97f3\u753b\u540c\u6b65\u8c03\u6574 \u70b9\u64ad\u652f\u6301 \u652f\u6301 seek \u529f\u80fd \u89c6\u9891\u7f13\u51b2\u8bbe\u7f6e\uff0c\u7f13\u51b2\u8fdb\u5ea6 \u652f\u6301\u9884\u8fde\u63a5\uff0c\u540e\u64ad\u653e\u529f\u80fd \u96c6\u6210\u4eae\u5ea6\u8c03\u6574\u548c\u97f3\u91cf\u8c03\u6574 \u652f\u6301\u9759\u97f3\u64ad\u653e \u652f\u6301\u64ad\u653e\u5668\u72b6\u6001\u56de\u8c03 \u652f\u6301\u6d41\u4fe1\u606f\uff0c\u64ad\u653e\u5668\u4fe1\u606f\u5bdf\u770b\uff08Dashboard\uff09 \u652f\u6301\u64ad\u653e\u672c\u5730\u89c6\u9891\u6587\u4ef6 \u9879\u76ee\u5730\u5740\uff1ahttps://github.com/upyun/android-player-sdk \u53cd\u9988\u53ca\u5efa\u8bae\uff1alivesdk@upai.com","title":"Live"},{"location":"cdn/live/#_1","text":"\u53c8\u62cd\u76f4\u64ad\u4e91(UPLive)\uff0c\u57fa\u4e8e\u53c8\u62cd\u4e91\u5185\u5bb9\u5206\u53d1\u7f51\u7edc\u4e3a\u76f4\u64ad\u5e94\u7528\u63d0\u4f9b\u8d85\u4f4e\u5ef6\u8fdf\u3001\u9ad8\u7801\u7387\u3001\u9ad8\u5e76\u53d1\u7684\u6574\u5957\u4ece\u63a8\u6d41\u7aef\u5230\u64ad\u653e\u7aef\u7684\u4e00\u7ad9\u5f0f\u89e3\u51b3\u65b9\u6848\uff0c\u652f\u6301 RTMP\u3001HTTP-FLV \u548c HLS \u8f93\u51fa\uff0c\u5305\u62ec\u5f55\u5236\u3001\u8f6c\u7801\u7b49\u9644\u52a0\u529f\u80fd\u3002","title":"\u6982\u8ff0"},{"location":"cdn/live/#_2","text":"\u53c8\u62cd\u4e91\u76f4\u64ad\u7cfb\u7edf\u652f\u6301\u4e24\u79cd\u670d\u52a1\u7c7b\u578b\uff1a\u53c8\u62cd\u4e91\u6e90\u548c\u81ea\u4e3b\u6e90\u7ad9\u3002 \u53c8\u62cd\u4e91\u6e90\uff1a\u8868\u793a\u6d41\u5a92\u4f53\u5185\u5bb9\u76f4\u63a5\u63a8\u6d41\u5230\u53c8\u62cd\u4e91 CDN \uff0c\u5c06\u63a8\u6d41\u4e0e\u5206\u53d1\u90fd\u8fdb\u884c CDN \u52a0\u901f\u3002\u53c8\u62cd\u4e91\u6e90\u73b0\u4ec5\u652f\u6301 RTMP \u63a8\u6d41\u3002 \u7ba1\u7406\u540e\u53f0\uff1a\u76f4\u64ad\u52a0\u901f > \u521b\u5efa\u670d\u52a1 > \u53c8\u62cd\u4e91\u6e90 \u521b\u5efa\u53c8\u62cd\u4e91\u6e90\uff0c\u586b\u5199\u670d\u52a1\u540d\u3001\u5df2\u5907\u6848\u7684\u64ad\u653e\u57df\u540d\u548c\u63a8\u6d41\u57df\u540d\uff0c\u63a8\u6d41\u57df\u540d\u4e0e\u64ad\u653e\u57df\u540d\u4e0d\u80fd\u5171\u7528\u3002 \u53ef\u9009\u62e9\u6027\u586b\u5199\u63a5\u5165\u70b9\uff0c\u5982\u679c\u586b\u5199\u4e86\u5177\u4f53\u7684\u63a5\u5165\u70b9\uff0c\u5219\u53ea\u6709\u8be5\u63a5\u5165\u70b9\u7684 URL \u53ef\u8fdb\u884c\u63a8\u6d41\uff0c\u5176\u4ed6\u63a5\u5165\u70b9\u5747\u63a8\u6d41\u5931\u8d25\u3002\u82e5\u6ca1\u6709\u586b\u5199\u5177 \u4f53\u63a5\u5165\u70b9\uff0c\u5219\u4efb\u610f\u63a5\u5165\u70b9\u53ef\u8fdb\u884c\u63a8\u6d41\uff08\u672c\u9636\u6bb5\u65e0\u8bba\u586b\u4ec0\u4e48\u63a5\u5165\u70b9\uff0c\u5747\u65e0\u9650\u5236\u4f5c\u7528\uff0c\u90fd\u53ef\u4ee5\u6b63\u5e38\u63a8\u62c9\u6d41\uff0c\u5f85\u670d\u52a1\u7248\u672c\u66f4\u65b0\u518d\u52a0\u5165\u9650\u5236\uff09\u3002 \u5f53\u63a8\u6d41\u57df\u540d\u586b\u5199 push.domain.com \uff0c\u64ad\u653e\u57df\u540d\u586b\u5199 play.domain.com \uff0c\u63a5\u5165\u70b9\u586b\u5199 app \uff0c\u5982\u679c\u63a8\u6d41 URL \u4e3a rtmp://push.domain.com/app/stream \u65f6\uff0c\u5176 rtmp \u64ad\u653e URL \u4e3a rtmp://play.domain.com/app/stream \u5176\u4e2d\uff0cstream \u4e3a\u6d41\u540d\uff0c\u53c8\u79f0\u6d41\u5bc6\u94a5\uff0capp/stream \u53c8\u79f0\u4e3a\u9891\u9053\uff0c\u540c\u4e00\u6761\u6d41\u63a8\u62c9\u6d41\u57df\u540d\u4e0d\u540c\uff0c\u4f46\u9891\u9053\u540d\u4e00\u81f4\u3002 \u6ce8\uff1a\u4ee5\u4e0a\u57df\u540d\u3001\u63a5\u5165\u70b9\u53ca\u6d41\u540d\u7684\u547d\u540d\u4ec5\u4e3a\u4e3e\u4f8b\u7528\uff0c\u4e0b\u540c\u3002 \u81ea\u4e3b\u6e90\u7ad9\uff1a\u6d41\u5a92\u4f53\u5185\u5bb9\u5728\u5ba2\u6237\u6e90\u7ad9\uff0c\u53c8\u62cd\u4e91\u901a\u8fc7\u56de\u5ba2\u6237\u6e90\u62c9\u6d41\u7684\u65b9\u5f0f\u5bf9\u5176\u5185\u5bb9\u8fdb\u884c CDN \u5206\u53d1\u3002 \u7ba1\u7406\u540e\u53f0\uff1a\u76f4\u64ad\u52a0\u901f > \u521b\u5efa\u670d\u52a1 > \u81ea\u4e3b\u6e90\u7ad9 \u81ea\u4e3b\u6e90\u7ad9\u9700\u8981\u660e\u786e\u56de\u6e90\u534f\u8bae\u662f RTMP \u8fd8\u662f HTTP\uff0c\u5e76\u586b\u5199\u6e90\u7ad9 IP \u6216\u8005 \u57df\u540d\uff0c\u56de\u6e90 IP \u73b0\u4e0d\u652f\u6301\u591a\u4e2a\uff0c\u82e5\u56de\u6e90 IP \u4f1a\u7ecf\u5e38\u53d8\u66f4\uff0c\u5efa\u8bae\u6e90\u7ad9\u586b\u5199\u57df\u540d\u5f62\u5f0f\u3002\u5f53\u56de\u6e90\u534f\u8bae\u662f RTMP \u65f6\uff0c\u9ed8\u8ba4\u7aef\u53e3\u662f1935\uff0c\u5f53\u56de\u6e90\u534f\u8bae\u662f HTTP \u65f6\uff0c\u9ed8\u8ba4\u7aef\u53e3\u4e3a 80\uff0c\u652f\u6301\u7aef\u53e3\u81ea\u5b9a\u4e49\u3002\u56e0\u81ea\u4e3b\u6e90\u7ad9\u662f\u56de\u5ba2\u6237\u6e90\u62c9\u6d41\uff0c\u5219\u65e0\u63a8\u6d41\u57df\u540d\uff0c\u53ea\u9700\u8981\u8bbe\u7f6e\u64ad\u653e\u57df\u540d\u3002 HTTP \u534f\u8bae\u56de\u6e90\u65f6\uff0c\u4ee5 HTTP-FLV \u5f62\u5f0f\u56de\u6e90\uff0c\u82e5\u6e90\u4e3a HLS \u53ef\u901a\u8fc7\u6587\u4ef6\u52a0\u901f\u7cfb\u7edf\u521b\u5efa\u670d\u52a1\uff0c\u914d\u7f6e\u56de\u6e90\u4fe1\u606f\u3002 \u63a5\u5165\u70b9\u914d\u7f6e\u8bf4\u660e\u540c\u53c8\u62cd\u4e91\u6e90\u3002 \u4ee5\u4e0a\u4e24\u79cd\u4e1a\u52a1\u6a21\u5f0f\uff0c\u5747\u652f\u6301RTMP\u3001HTTP-FLV \u548cHLS \u64ad\u653e\uff0c\u540e\u7eed\u7ae0\u8282\u4f1a\u8be6\u7ec6\u4ecb\u7ecd\u3002","title":"\u670d\u52a1\u7c7b\u578b"},{"location":"cdn/live/#_3","text":"\u76f4\u64ad\u57fa\u7840\u914d\u7f6e\u662f\u76f4\u64ad\u4e1a\u52a1\u573a\u666f\u4f7f\u7528\u975e\u5e38\u9891\u7e41\u7684\u529f\u80fd\u3002","title":"\u57fa\u7840\u914d\u7f6e"},{"location":"cdn/live/#_4","text":"\u76f4\u64ad\u7ba1\u7406\u540e\u53f0\uff1a\u670d\u52a1 > \u52a0\u901f\u57df\u540d > \u57df\u540d\u7ed1\u5b9a \u6e90\u7ad9\u7c7b\u578b\uff1a\u5168\u90e8 \u57df\u540d\u7ed1\u5b9a\u4ec5\u652f\u6301\u5df2\u5907\u6848\u6210\u529f\u7684\u81ea\u5b9a\u4e49\u57df\u540d\u8fdb\u884c\u7ed1\u5b9a\uff0c\u5982\u679c\u8be5\u57df\u540d\u672a\u5907\u6848\u6210\u529f\uff0c\u5219\u4e0d\u80fd\u901a\u8fc7\u57df\u540d\u7ed1\u5b9a\u5ba1\u6838\u3002 \u5ba1\u6838\u7ed3\u679c\u4f1a\u901a\u8fc7\u90ae\u4ef6\u8fdb\u884c\u901a\u77e5\uff0c\u6b63\u5e38\u5ba1\u6838\u65f6\u95f4\u4e3a\u4e00\u4e2a\u5de5\u4f5c\u65e5\u3002 \u4ee5\u4e0b\u662f\u5173\u4e8e\u57df\u540d\u7ed1\u5b9a\u7684\u4e00\u4e9b\u91cd\u8981\u8bf4\u660e\uff08\u540c\u6587\u4ef6\u52a0\u901f\uff09\uff1a \u9664\u5e38\u89c4\u5f62\u5f0f\u7684\u57df\u540d\u5916\uff08\u5305\u62ec\u9876\u7ea7\u57df\u540d\uff09\uff0c\u6211\u4eec\u8fd8\u652f\u6301\u6cdb\u57df\u540d\u7ed1\u5b9a\uff0c\u6bd4\u5982 .yourdomain.com\uff1b\u7279\u522b\u5730\uff0c\u5176\u4e2d \u6700\u591a\u652f\u6301\u5339\u914d 4 \u5c42\uff1a [v] *.yourdomain.com => foo.yourdomain.com [v] *.yourdomain.com => bar.yourdomain.com [v] *.yourdomain.com => foo.bar.yourdomain.com [v] *.yourdomain.com => foo.bar.baz.yourdomain.com [v] *.yourdomain.com => foo.bar.baz.qux.yourdomain.com [x] *.yourdomain.com => foo.bar.baz.qux.quxx.yourdomain.com [v] *.bar.yourdomain.com => foo.bar.yourdomain.com [v] *.bar.yourdomain.com => baz.foo.bar.yourdomain.com [x] *.bar.yourdomain.com => foo.bar.baz.yourdomain.com \u6dfb\u52a0\u57df\u540d\u7ed1\u5b9a\u540e\uff0c\u9700\u8981\u5230\u57df\u540d\u670d\u52a1\u5546\u7684 DNS \u89e3\u6790\u7ba1\u7406\u4e2d\uff0c\u5c06\u63a8\u6d41\u57df\u540d\u7684 CNAME \u89e3\u6790\u5230 <bucket>.s1.aicdn.com \uff0c\u5c06\u64ad\u653e\u57df\u540d\u7684 CNAME \u89e3\u6790\u5230 <bucket>.s0.aicdn.com \u3002 \u5f53\u4e1a\u52a1\u6a21\u5f0f\u4e3a\u53c8\u62cd\u4e91\u6e90\u65f6\uff0c\u7528\u6237\u9700\u8981\u5c06\u5176\u63a8\u6d41\u57df\u540d\u548c\u64ad\u653e\u57df\u540d\u5206\u522b CNAME \u5230\u5bf9\u5e94\u7684\u53c8\u62cd\u4e91\u5185\u90e8\u57df\u540d\u3002 \u63a8\u6d41\u5185\u90e8\u57df\u540d\u4e3a <bucket>.s1.aicdn.com \uff0c\u64ad\u653e\u5185\u90e8\u57df\u540d\u4e3a <bucket>.s0.aicdn.com \u3002 \u6ce8\uff1a <> \u5185\u7684 bucket \u9700\u8981\u66ff\u6362\u6210\u5bf9\u5e94\u7684\u670d\u52a1\u540d\uff0c\u4e0b\u540c\u3002 \u5f53\u4e1a\u52a1\u6a21\u5f0f\u4e3a\u81ea\u4e3b\u6e90\u7ad9\u65f6\uff0c\u7528\u6237\u53ea\u9700\u8981\u5c06\u5176\u64ad\u653e\u57df\u540d CNAME \u5230\u5bf9\u5e94\u7684\u53c8\u62cd\u4e91\u64ad\u653e\u5185\u90e8\u57df\u540d <bucket>.s0.aicdn.com \u3002","title":"\u57df\u540d\u7ed1\u5b9a"},{"location":"cdn/live/#_5","text":"\u7ba1\u7406\u540e\u53f0\uff1a\u670d\u52a1 > \u57fa\u7840\u914d\u7f6e > \u56de\u6e90\u914d\u7f6e \u6e90\u7ad9\u7c7b\u578b\uff1a\u5ba2\u6237\u6e90\u7ad9","title":"\u56de\u6e90\u914d\u7f6e"},{"location":"cdn/live/#_6","text":"\u56de\u6e90\u534f\u8bae\u652f\u6301 HTTP \u548c RTMP\uff0c\u5f53\u9009\u62e9 HTTP \u56de\u6e90\u65f6\uff0c\u9ed8\u8ba4\u7aef\u53e3\u53f7\u4e3a80\uff0c\u5f53\u9009\u62e9RTMP\u56de\u6e90\u65f6\uff0c\u9ed8\u8ba4\u7aef\u53e3\u53f7\u4e3a1935\uff0c\u5177\u4f53\u7aef\u53e3\u53f7\u53ef\u4ee5\u81ea\u5b9a\u4e49\uff0c\u901a\u8fc7\u540e\u53f0\u8bbe\u7f6e\u3002","title":"\u56de\u6e90\u534f\u8bae"},{"location":"cdn/live/#_7","text":"\u8be5\u914d\u7f6e\u9879\u4e3a\u53ef\u8bbf\u95ee\u7684\u7f51\u7edc\u5730\u5740\uff0c\u53ef\u4ee5\u76f4\u63a5\u586b IP \u5730\u5740\u4e5f\u53ef\u4ee5\u586b\u5199\u57df\u540d\u5730\u5740\uff0c\u73b0\u4e0d\u652f\u6301\u591aIP \u3002\u5982\u679c\u662f\u57df\u540d\u5730\u5740\uff0c\u90a3\u4e48 CDN \u5728\u56de\u6e90\u65f6\u4f1a\u5bf9\u8be5\u57df\u540d\u5730\u5740\u8fdb\u884c DNS \u89e3\u6790\uff0c\u7136\u540e\u901a\u8fc7\u89e3\u6790\u51fa\u6765\u7684 IP \u5730\u5740\u518d\u8fdb\u884c\u8bbf\u95ee\uff0c\u56e0\u6b64\u82e5\u89e3\u6790\u5931\u8d25\u4e5f\u4f1a\u5bfc\u81f4\u65e0\u6cd5\u6b63\u5e38\u56de\u6e90\u3002","title":"\u6e90\u7ad9"},{"location":"cdn/live/#http-flv","text":"\u7ba1\u7406\u540e\u53f0\uff1a\u670d\u52a1 > \u57fa\u7840\u914d\u7f6e > HTTP-FLV \u8f93\u51fa \u6e90\u7ad9\u7c7b\u578b\uff1a\u5168\u90e8 \u901a\u8fc7\u7ba1\u7406\u540e\u53f0\uff0c\u53ef\u4ee5\u914d\u7f6e\u4efb\u4e00\u64ad\u653e\u57df\u540d\u4f5c\u4e3a HTTP-FLV \u7684\u8f93\u51fa\u57df\u540d\u3002 \u5f53\u63a8\u6d41 url \u4e3a rtmp://push.domain.com/app/stream \u65f6\uff0c\u5bf9\u57df\u540d\u64ad\u653e\u57df\u540d\u5f00\u542f HTTP-FLV \u8f93\u51fa\u914d\u7f6e\u540e\uff0c \u53ef\u4ee5\u901a\u8fc7 http://play.domain.com/app/stream.flv \u8fdb\u884c\u64ad\u653e\u3002","title":"HTTP-FLV \u8f93\u51fa"},{"location":"cdn/live/#hls","text":"\u7ba1\u7406\u540e\u53f0\uff1a\u670d\u52a1 > \u57fa\u7840\u914d\u7f6e > HLS \u8f93\u51fa \u6e90\u7ad9\u7c7b\u578b\uff1a\u5168\u90e8 \u901a\u8fc7\u7ba1\u7406\u540e\u53f0\uff0c\u53ef\u4ee5\u914d\u7f6e\u4efb\u4e00\u64ad\u653e\u57df\u540d\u4f5c\u4e3a HLS \u7684\u8f93\u51fa\u57df\u540d\u3002 \u5f00\u542f\u8be5\u914d\u7f6e\u540e\uff0c\u53ef\u901a\u8fc7 http://play.domain.com/app/stream.m3u8 \u5bf9 rtmp://push.domain.com/app/stream \u7684\u63a8\u6d41\u8fdb\u884c\u64ad\u653e\u3002","title":"HLS+ \u8f93\u51fa"},{"location":"cdn/live/#_8","text":"","title":"\u9ad8\u7ea7\u529f\u80fd"},{"location":"cdn/live/#token","text":"Token \u9632\u76d7\u94fe\u53ef\u4ee5\u5bf9\u63a8\u6d41\u548c\u64ad\u653e\u7684\u8bf7\u6c42\u8fdb\u884c\u6821\u9a8c\uff0c\u53ef\u8bbe\u7f6e\u7b7e\u540d\u8fc7\u671f\u65f6\u95f4\u6765\u63a7\u5236\u6d41\u7684\u8bbf\u95ee\u65f6\u9650\u3002","title":"Token \u9632\u76d7\u94fe"},{"location":"cdn/live/#_9","text":"\u4e00\u4e2a\u6700\u7b80\u7684\u63a8\u6d41\u5730\u5740\u683c\u5f0f\u5982\u4e0b\uff1a rtmp://push.domain.com/app/stream?domain={domain}&token={token}&expired_ts={expired_ts} \u53c2\u6570\u8bf4\u660e: push.domain.com: \u57df\u540d\uff0c\u7531\u4e1a\u52a1\u7cfb\u7edf\u5206\u914d\u3002 expire_ts: \u6709\u6548\u671f\uff0c\u5ba2\u6237\u81ea\u7531\u586b\u5199\uff0c\u8d85\u8fc7\u6709\u6548\u671f\u5c06\u505c\u6b62\u670d\u52a1\u3002 token: \u9700\u8ba1\u7b97\u5f97\u51fa\uff0c \u8ba1\u7b97\u516c\u5f0f\uff1atoken = MD5(domain + expire_ts + secret) \uff0c \u6bd4\u5982 domain = publish.bravo.com\uff0capp = live, stream = stream, expired_ts = 1465244082\uff0csecret = a1b2c3d4e53gxwb07 \u5219 token=MD5(push.domain.com/live/stream1465244082a1b2c3d4e53gxwb07) \u6ce8\uff1a\u8ba1\u7b97\u516c\u5f0f\u4e2d\u7684 secret\uff0c\u7531\u4e1a\u52a1\u7cfb\u7edf\u63d0\u4f9b\u5e76\u544a\u77e5\u5ba2\u6237\uff0c\u4f5c\u4e3a\u5ba2\u6237\u7684\u552f\u4e00\u6807\u8bc6\u3002\u5ba2\u6237\u9700\u59a5\u5584\u4fdd\u7ba1\uff0c\u8c28\u9632\u5916\u6cc4\u3002","title":"\u63a8\u6d41\u9632\u76d7\u94fe"},{"location":"cdn/live/#_10","text":"\u8be6\u7ec6\u89c4\u5219\u89c1 CDNToken \u9632\u76d7\u94fe\u89c4\u8303:http://docs.upyun.com/cdn/feature/#token\u3002","title":"\u62c9\u6d41\u9632\u76d7\u94fe"},{"location":"cdn/live/#_11","text":"","title":"\u589e\u503c\u670d\u52a1"},{"location":"cdn/live/#_12","text":"\u5ba2\u6237\u9700\u63d0\u4f9b\u7684\u914d\u7f6e\u4fe1\u606f\uff1a\u9700\u8981\u5f55\u5236\u7684\u62c9\u6d41 URL\u3002 \u5f55\u5236\u65b9\u5f0f\uff1a\u89e6\u53d1 or \u5b9a\u65f6\u5f55\u5236\u3002 \u5f55\u64ad\u7684\u4e3b\u8981\u4f5c\u7528\u662f\u5c06\u63a8\u6d41\u5185\u5bb9\u5f55\u5236\u6210\u6587\u4ef6\uff0c\u6700\u7ec8\u7528\u4e8e\u70b9\u64ad\u3002 \u73b0\u9ed8\u8ba4\u5f55\u5236\u6210 mp4 \u683c\u5f0f\u6587\u4ef6\uff0c\u4e0a\u4f20\u5230\u53c8\u62cd\u4e91\u5b58\u50a8\uff0c\u5ba2\u6237\u53ef\u4ee5\u81ea\u5b9a\u4e49\u4e0a\u4f20\u5230\u54ea\u4e2a\u5b58\u50a8\u670d\u52a1\uff08\u6682\u4e0d\u652f\u6301\uff0c\u63a5\u53e3\u672a\u5f00\u653e\uff0c\u73b0\u5728\u662f\u9ed8\u8ba4\u4e91\u5b58\u50a8\u4e3alive-recorder\uff09\u3002 \u53c8\u62cd\u5f55\u5236\u7cfb\u7edf\u4f1a\u81ea\u52a8\u5c06\u5f55\u5236\u4e0b\u6765\u7684\u5185\u5bb9\u4e0a\u4f20\u5230\u53c8\u62cd\u4e91\u5b58\u50a8\u540e\uff0c\u53ef\u4ee5\u6839\u636e\u4e91\u5b58\u50a8\u83b7\u53d6\u76ee\u5f55\u6587\u4ef6\u5217\u8868 \u6765\u83b7\u53d6\u76f8\u5173\u5f55\u5236\u6587\u4ef6\u5217\u8868\u3002 \u5982\u679c\u5bf9\u5f55\u5236\u6587\u4ef6\u683c\u5f0f\u6709\u5176\u4ed6\u8981\u6c42\uff0c\u53ef\u5728\u53c8\u62cd\u4e91\u5904\u7406\u4e2d\u5fc3\u5bf9\u5176\u8fdb\u884c\u76f8\u5173\u5904\u7406\uff0c\u6bd4\u5982\u683c\u5f0f\u5904\u7406\uff0c\u89c6\u9891\u62fc\u63a5\uff0c\u8be6\u7ec6\u8bf7\u89c1 \u4e91\u5904\u7406\u6587\u6863 \u3002 \u5f55\u5236\u6587\u4ef6\u5177\u4f53\u8def\u5f84\u4e3a\uff1a live-recorder.b0.upaiyun.com/play.domain.com/live/stream/recorder20160604163702.mp4 \u5176\u4e2d live-recorder.b0.upaiyun.com \u4e3a\u53c8\u62cd\u4e91\u9ed8\u8ba4\u57df\u540d\uff0c\u53c8\u62cd\u4f1a\u5c06\u5f55\u5236\u6587\u4ef6\u9ed8\u8ba4\u4fdd\u5b58\u5728\u76f8\u5e94\u7a7a\u95f4\u4ee5\u8fd9\u6761\u6d41 URL \u4e3a\u8def\u5f84\u7684\u76ee\u5f55\u4e0b\uff0c\u5373 live-recorder.b0.upaiyun.com/play.domain.com/live/stream/\uff0c recorder20160604163702.mp4 \u4e3a\u5177\u4f53\u7684\u5f55\u5236\u6587\u4ef6\uff0crecorder \u4e3a\u56fa\u5b9a\u6807\u8bc6\u5b57\u7b26\uff0c20160604163702 \u4e3a\u5f55\u5236\u5b8c\u6210\u65f6\u95f4\uff0cmp4\u4e3a\u6587\u4ef6\u7c7b\u578b\u3002 \u5982\u679c\u7528\u53c8\u62cd cdn\uff0c\u76f4\u63a5\u53ef\u901a\u8fc7 http://\u7528\u6237\u52a0\u901f\u57df\u540d/play.domain.com/live/stream/recorder20160604163702.mp4 \u6765\u8bbf\u95ee\u3002 \u5f55\u5236\u652f\u6301\u89e6\u53d1\u5f55\u5236\u4e0e\u5b9a\u65f6\u5f55\u5236\u4e24\u79cd\u65b9\u5f0f\u3002","title":"\u5f55\u64ad"},{"location":"cdn/live/#_13","text":"\u6307\u5b9a\u914d\u7f6e\u67d0\u4e00\u6761\u6d41\u4e3a\u89e6\u53d1\u5f55\u5236\u7684\u6d41\uff0c\u5219\u5728\u8fd9\u6761\u6d41\u63a8\u6d41\u5230\u53c8\u62cd CDN \u7684\u65f6\u5019\uff0c\u53c8\u62cd\u5f55\u5236\u7cfb\u7edf\u5c31\u5bf9\u5176\u5f00\u59cb\u5f55\u5236\uff0c\u5f53\u8fd9\u63a8\u6d41\u65ad\u5f00\u540e\u505c\u6b62\u5f55\u5236\uff0c\u518d\u63a8\u6d41\u540e\u53c8\u7ee7\u7eed\u5f00\u59cb\u5f55\uff0c\u4ee5\u6b64\u5faa\u73af\u3002\u63a8\u6d41\u65ad\u5f00\u65f6\uff0c\u5f55\u5236\u6587\u4ef6\u81ea\u52a8\u505c\u6b62\u5f55\u5236\uff0c\u4e0b\u6b21\u518d\u63a8\u6d41\u540e\uff0c\u5f55\u5236\u7684\u6587\u4ef6\u540d\u5c06\u4e0e\u524d\u4e00\u6587\u4ef6\u540d\u4e0d\u4e00\u6837\uff0c\u8fd9\u6837\u540c\u4e00\u6761\u6d41\u4f1a\u751f\u6210\u591a\u4e2a\u4e0d\u540c\u6587\u4ef6\uff0c\u5e76\u4ee5\u6587\u4ef6\u540d\u6700\u540e\u7684\u65f6\u95f4\u8868\u793a\u5176\u5148\u540e\u987a\u5e8f\u3002","title":"\u89e6\u53d1\u5f55\u5236"},{"location":"cdn/live/#_14","text":"\u6307\u5b9a\u914d\u7f6e\u67d0\u4e00\u6761\u6d41\u4ece\u51e0\u70b9\u5f00\u59cb\u5f55\u5236\uff0c\u5e76\u5230\u51e0\u70b9\u7ed3\u675f\uff0c\u4e0d\u7ba1\u5728\u8fd9\u65f6\u95f4\u6bb5\u5185\u63a8\u6d41\u65ad\u5f00\u51e0\u6b21\uff0c\u5f55\u5236\u7cfb\u7edf\u5c06\u5728\u76f8\u5e94\u65f6\u95f4\u6bb5\u5185\u5bf9\u5176\u63a8\u6d41\u7684\u6240\u6709\u6d41\u5185\u5bb9\u8fdb\u884c\u5f55\u5236\u5728\u540c\u4e00\u6587\u4ef6\u540d\u4e0b\uff0c\u5b9a\u65f6\u4efb\u52a1\u53ea\u751f\u6210\u4e00\u4e2a\u6587\u4ef6\u3002","title":"\u5b9a\u65f6\u5f55\u5236"},{"location":"cdn/live/#_15","text":"\u5ba2\u6237\u9700\u63d0\u4f9b\u63a5\u6536\u56de\u8c03\u7684\u5730\u5740\uff08\u5efa\u8bae\u4e3aURL\uff09\u3002 \u5f55\u5236\u6587\u4ef6\u6240\u5728\u7684\u8def\u5f84\u4ee5 post \u8bf7\u6c42\u8fd4\u56de\u7ed9\u5ba2\u6237\uff0c\u5177\u4f53\u7684 json \u683c\u5f0f\u4e3a {\"timestamp\": \"2016-06-04 16:38:45\", \"path\": [\"http://live-recorder.b0.upaiyun.com/play.domain.com/live/stream/recorder20160604163702.mp4\"]} \u5176\u4e2d\uff0ctimestamp \u4e3a\u53d1\u9001 json \u56de\u8c03\u4efb\u52a1\u65f6\u95f4\uff0cpath \u4e3a\u5f55\u5236\u6587\u4ef6\u5177\u4f53\u8def\u5f84\u3002","title":"\u56de\u8c03"},{"location":"cdn/live/#_16","text":"\u5ba2\u6237\u9700\u63d0\u4f9b\u9700\u8981\u8f6c\u7801\u7684\u6d41\u3001\u9700\u8981\u5339\u914d\u7684\u540e\u7f00\u53ca\u8f6c\u7801\u6a21\u677f\u3002 \u652f\u6301\u97f3\u89c6\u9891\u6d41\u5b9e\u65f6\u8f6c\u7801\u5904\u7406\uff0c\u901a\u8fc7\u8f6c\u7801\u6a21\u7248\u53ef\u914d\u7f6e\u7f16\u7801\u6807\u51c6\u3001\u5206\u8fa8\u7387\u3001\u7801\u7387\u3001\u8f93\u51fa\u6d41\u7c7b\u578b\u7b49\u6d41\u5904\u7406\u53c2\u6570\u3002 \u9ed8\u8ba4\u652f\u6301\u4f7f\u7528\u53c8\u62cd\u4e91\u76f4\u64ad\u670d\u52a1\u7684 RTMP\uff0cHTTP-FLV \u548cHLS \u534f\u8bae\u7684\u6d41\u8f6c\u7801 \u652f\u6301 12 \u79cd\u8f6c\u7801\u6a21\u677f\u548c\u5ba2\u6237\u81ea\u5b9a\u4e49\u8f6c\u7801\u914d\u7f6e\uff0c\u8be6\u7ec6\u6a21\u677f\u4fe1\u606f\uff1ahttp://docs.upyun.com/cloud/attachment/ \u652f\u6301\u81ea\u5b9a\u4e49\u8f6c\u7801\u540e\u7f00\uff0c\u5206\u9694\u7b26\u652f\u6301\u4e2d\u5212\u7ebf\uff08-\uff09\u3001\u4e0b\u5212\u7ebf\uff08_\uff09\u548c\u611f\u53f9\u53f7\uff08!\uff09\u3002 \u652f\u6301\u89e6\u53d1\u5f0f\u8f6c\u7801\uff0c\u9700\u63d0\u524d\u914d\u7f6e\u9700\u8981\u8f6c\u7801\u7684\u6d41\u5730\u5740\u4ee5\u53ca\u8f6c\u7801\u7684\u89e6\u53d1\u540e\u7f00\uff0c\u5982 \u9700\u8981\u8f6c\u7801\u7684\u539f\u59cb\u6d41\u4e3a\uff1ahttp://play.domain.com/live/stream \u89e6\u53d1\u8f6c\u7801\u7684\u540e\u7f00\u5339\u914d\u4e3a -small\uff0c\u5bf9\u5e94\u7684\u8f6c\u7801\u6a21\u677f\u4e3a 540p(16:9) \u5f53\u6709\u7528\u6237\u8bf7\u6c42 http://play.domain.com/live/stream-small \u65f6\u89e6\u53d1\u8f6c\u7801\uff0c\u5f53\u6700\u540e\u4e00\u4e2a\u8bf7\u6c42\u8be5\u8f6c\u7801\u6d41\u7684\u7528\u6237\u65ad\u5f00\u8fde\u63a5\u540e\uff0c\u505c\u6b62\u8f6c\u7801\u3002","title":"\u5b9e\u65f6\u8f6c\u7801"},{"location":"cdn/live/#_17","text":"\u4e92\u52a8\u76f4\u64ad\u4e1a\u52a1\u7279\u6027\u4e3a:\u76f4\u64ad\u89c6\u9891\u5185\u5bb9\u7531\u4e3b\u64ad\u5b9e\u65f6\u63a8\u9001\u81f3\u670d\u52a1\u5668,\u82e5\u4e3b\u64ad\u4f20\u64ad\u975e\u6cd5\u5185\u5bb9,\u5219\u5f71\u54cd\u5de8\u5927\u3002\u56e0\u6b64\u5382\u5546\u9700\u8981\u5bf9\u76f4\u64ad\u89c6\u9891\u5185\u5bb9\u8fdb\u884c\u5b9e\u65f6\u76d1\u63a7,\u5f53\u51fa\u73b0\u975e\u6cd5\u5185\u5bb9\u65f6,\u53ca\u65f6\u7981\u6b62\u975e\u6cd5\u5185\u5bb9\u7684\u4f20\u64ad\u3002 \u79d2\u7ea7\u7981\u64ad\u5219\u662f\u9488\u5bf9\u8be5\u4e1a\u52a1\u573a\u666f\u800c\u7814\u53d1\u7684\u529f\u80fd,\u7531\u53c8\u62cd\u63d0\u4f9b\u4e00\u4e2a API\u3002 \u63a5\u53e3\u7ed9\u5ba2\u6237,\u5f53\u5ba2\u6237\u53d1\u73b0\u67d0\u76f4\u64ad\u89c6\u9891\u5185\u5bb9\u975e\u6cd5\u65f6,\u5b9e\u65f6\u65ad\u5f00\u4e3b\u64ad\u63a8\u6d41,\u4ece\u800c\u963b\u6b62\u975e\u6cd5\u5185\u5bb9\u7684\u4f20\u64ad\u3002 \u63a5\u53e3\u652f\u6301\u7acb\u5373\u7981\u64ad\uff0c\u6062\u590d\u7981\u64ad\uff0c\u7981\u64ad\u4e00\u6bb5\u65f6\u95f4\u3002 \u5982\u9700\u8f6c\u7801\u3001\u5f55\u5236\u548c\u7981\u64ad\u7b49\u529f\u80fd\u8bf7\u8054\u7cfb\u552e\u524d\uff0c\u5982\u6709\u4efb\u4f55\u95ee\u9898\u3001\u610f\u89c1\u6216\u5efa\u8bae\uff0c\u8bf7\u54a8\u8be2\u5ba2\u670d\u4eba\u5458\uff1a \u5ba2\u670d\u70ed\u7ebf\uff1a0571-81020203\uff08\u552e\u524d\uff09\u30010571-81020204\uff08\u5ba2\u670d\uff09 \u5ba2\u670d QQ\uff1a200576786 \u6280\u672f\u652f\u6301\uff1asupport@upyun.com \u5efa\u8bae\u53cd\u9988\uff1afeedback@upyun.com","title":"\u7981\u64ad"},{"location":"cdn/live/#ios-sdk","text":"","title":"IOS \u63a8\u6d41 SDK"},{"location":"cdn/live/#_18","text":"\u652f\u6301 iOS 8 \u53ca\u4ee5\u4e0a\u7cfb\u7edf\u7248\u672c \u652f\u6301 ARMv7\uff0cARM64\uff0cx86_64 \u67b6\u6784","title":"\u7cfb\u7edf\u8bf4\u660e"},{"location":"cdn/live/#_19","text":"\u91c7\u96c6\u6a21\u5757\u6e90\u7801\u5f00\u653e\uff0c\u97f3\u89c6\u9891\u53ef\u4ee5\u81ea\u7531\u914d\u7f6e \u652f\u6301\u786c\u4ef6\u7f16\u7801 \u591a\u7801\u7387\u53ef\u9009 \u652f\u6301 H.264 \u89c6\u9891\u7f16\u7801 \u652f\u6301 AAC \u97f3\u9891\u7f16\u7801 \u652f\u6301\u524d\u540e\u6444\u50cf\u5934 \u652f\u6301\u81ea\u52a8\u5bf9\u7126 \u652f\u6301\u624b\u52a8\u8c03\u6574\u5bf9\u7126\u70b9 \u652f\u6301\u95ea\u5149\u706f\u64cd\u4f5c \u652f\u6301\u591a\u5206\u8fa8\u7387\u7f16\u7801 \u652f\u6301\u6784\u9020\u5e26\u5b89\u5168\u6388\u6743\u51ed\u8bc1\u7684 RTMP \u63a8\u6d41\u5730\u5740 \u652f\u6301 ARMv7, ARM64, x86_64 \u67b6\u6784 \u652f\u6301 RTMP \u534f\u8bae\u76f4\u64ad\u63a8\u6d41 \u652f\u6301\u63a8\u6d41\u65f6\u53ef\u53d8\u7801\u7387 \u63d0\u4f9b\u53d1\u9001 buffer \u652f\u6301\u89c6\u9891 Orientation \u64cd\u4f5c \u652f\u6301\u5f31\u7f51\u4e22\u5e27\u7b56\u7565 \u652f\u6301\u540e\u53f0\u97f3\u9891\u63a8\u6d41 \u652f\u6301\u6c34\u5370\u529f\u80fd \u652f\u6301\u7f8e\u989c\u529f\u80fd \u9879\u76ee\u5730\u5740\uff1ahttps://github.com/upyun/ios-live-sdk \u53cd\u9988\u53ca\u5efa\u8bae\uff1alivesdk@upai.com","title":"\u529f\u80fd\u8bf4\u660e"},{"location":"cdn/live/#android-sdk","text":"","title":"Android \u63a8\u6d41 SDK"},{"location":"cdn/live/#_20","text":"Android 4.1(API 16) \u4ee5\u4e0a \u652f\u6301ARMv5\uff0cARMv7,ARMv8\u7248\u672c","title":"\u7cfb\u7edf\u8bf4\u660e"},{"location":"cdn/live/#_21","text":"\u652f\u6301 H.264 \u548c AAC \u786c\u7f16 \u786c\u7f16\u652f\u6301 Android Min API 18\uff08Android 4.3\uff09\u53ca\u5176\u4ee5\u4e0a\u7248\u672c \u652f\u6301 RTMP \u5c01\u5305\u53ca\u63a8\u6d41 \u652f\u6301 RTMP \u63a8\u6d41\u81ea\u9002\u5e94\u7f51\u7edc\u8d28\u91cf\u52a8\u6001\u5207\u6362\u7801\u7387\u6216\u81ea\u5b9a\u4e49\u7b56\u7565 \u652f\u6301\u7eaf\u97f3\u9891\u63a8\u6d41\uff0c\u4ee5\u53ca\u540e\u53f0\u8fd0\u884c \u652f\u6301\u52a8\u6001\u66f4\u6539 Encoding Orientation \u9879\u76ee\u5730\u5740\uff1ahttps://github.com/upyun/android-push-sdk \u53cd\u9988\u53ca\u5efa\u8bae\uff1alivesdk@upai.com","title":"\u529f\u80fd\u8bf4\u660e"},{"location":"cdn/live/#ios-sdk_1","text":"","title":"IOS \u64ad\u653e\u5668 SDK"},{"location":"cdn/live/#_22","text":"\u652f\u6301 iOS 8 \u53ca\u4ee5\u4e0a\u7cfb\u7edf\u7248\u672c \u652f\u6301 ARMv7\uff0cARM64\uff0cx86_64 \u67b6\u6784","title":"\u7cfb\u7edf\u8bf4\u660e"},{"location":"cdn/live/#_23","text":"RTMP \u76f4\u64ad\u6d41\u64ad\u653e HTTP-FLV \u76f4\u64ad\u6d41\u64ad\u653e HLS \u64ad\u653e \u9ad8\u53ef\u5b9a\u5236:\u53ef\u81ea\u5b9a\u4e49\u5c3a\u5bf8\uff0c\u6309\u94ae\uff0c\u8fdb\u5ea6\u6761\uff0c\u5168\u5c4f\uff0c\u65cb\u8f6c\u7b49UI\u5c5e\u6027 \u5355\u97f3\u9891\u64ad\u653e RTMP \u76f4\u64ad\u9996\u5c4f\u79d2\u5f00\u652f\u6301 RTMP \u76f4\u64ad\u7d2f\u79ef\u5ef6\u8fdf\u6d88\u9664\u6280\u672f \u652f\u6301 speex \u89e3\u7801 \u97f3\u753b\u540c\u6b65\u8c03\u6574 \u4e00\u5c4f\u591a\u753b \u70b9\u64ad\u652f\u6301 \u652f\u6301 seek \u529f\u80fd \u89c6\u9891\u7f13\u51b2\u8bbe\u7f6e\uff0c\u7f13\u51b2\u8fdb\u5ea6 \u652f\u6301\u9884\u8fde\u63a5\uff0c\u540e\u64ad\u653e\u529f\u80fd \u96c6\u6210\u4eae\u5ea6\u8c03\u6574\u548c\u97f3\u91cf\u8c03\u6574 \u652f\u6301\u9759\u97f3\u64ad\u653e \u652f\u6301\u64ad\u653e\u5668\u72b6\u6001\u56de\u8c03 \u652f\u6301\u6d41\u4fe1\u606f\uff0c\u64ad\u653e\u5668\u4fe1\u606f\u5bdf\u770b\uff08Dashboard\uff09 \u652f\u6301\u64ad\u653e\u672c\u5730\u89c6\u9891\u6587\u4ef6 \u96c6\u6210\u64ad\u653e\u8d28\u91cf\u76d1\u63a7 \u9879\u76ee\u5730\u5740\uff1ahttps://github.com/upyun/ios-live-sdk \u53cd\u9988\u53ca\u5efa\u8bae\uff1alivesdk@upai.com","title":"\u529f\u80fd\u8bf4\u660e"},{"location":"cdn/live/#android-sdk_1","text":"","title":"Android \u64ad\u653e\u5668 SDK"},{"location":"cdn/live/#_24","text":"Android 2.3 (API 9) \u53ca\u5176\u4ee5\u4e0a \u652f\u6301 ARMv5\uff0cARMv7,ARMv8 \u7248\u672c","title":"\u7cfb\u7edf\u8bf4\u660e"},{"location":"cdn/live/#_25","text":"Android Min API 9 \u57fa\u4e8e ijkplayer ( based on ffplay ) \u652f\u6301 RTMP \u548c HLS \u534f\u8bae\u7684\u76f4\u64ad\u6d41\u5a92\u4f53\u64ad\u653e \u652f\u6301\u5e38\u89c1\u7684\u97f3\u89c6\u9891\u6587\u4ef6\u64ad\u653e\uff08MP4\u3001M4A\u3001flv \u7b49\uff09 \u652f\u6301 MediaCodec \u786c\u4ef6\u89e3\u7801 \u63d0\u4f9b\u64ad\u653e\u5668\u6838\u5fc3\u7c7b PLMediaPlayer \u63d0\u4f9b PLVideoView \u63a7\u4ef6 \u652f\u6301\u64ad\u653e\u5668\u97f3\u91cf\u8bbe\u7f6e\uff0c\u53ef\u5b9e\u73b0\u9759\u97f3\u529f\u80fd \u652f\u6301\u7eaf\u97f3\u9891\u64ad\u653e \u652f\u6301\u76f4\u64ad\u7d2f\u79ef\u5ef6\u65f6\u4f18\u5316 \u652f\u6301 ARM, ARMv7a, ARM64v8a, X86 \u4e3b\u6d41\u82af\u7247\u4f53\u7cfb\u67b6\u6784 \u53ef\u9ad8\u5ea6\u5b9a\u5236\u5316\u7684 MediaController \u9ad8\u53ef\u5b9a\u5236:\u53ef\u81ea\u5b9a\u4e49\u5c3a\u5bf8\uff0c\u6309\u94ae\uff0c\u8fdb\u5ea6\u6761\uff0c\u5168\u5c4f\uff0c\u65cb\u8f6c\u7b49UI\u5c5e\u6027 \u5355\u97f3\u9891\u64ad\u653e RTMP \u76f4\u64ad\u9996\u5c4f\u79d2\u5f00\u652f\u6301 RTMP \u76f4\u64ad\u7d2f\u79ef\u5ef6\u8fdf\u6d88\u9664\u6280\u672f \u652f\u6301 speex \u89e3\u7801 \u97f3\u753b\u540c\u6b65\u8c03\u6574 \u70b9\u64ad\u652f\u6301 \u652f\u6301 seek \u529f\u80fd \u89c6\u9891\u7f13\u51b2\u8bbe\u7f6e\uff0c\u7f13\u51b2\u8fdb\u5ea6 \u652f\u6301\u9884\u8fde\u63a5\uff0c\u540e\u64ad\u653e\u529f\u80fd \u96c6\u6210\u4eae\u5ea6\u8c03\u6574\u548c\u97f3\u91cf\u8c03\u6574 \u652f\u6301\u9759\u97f3\u64ad\u653e \u652f\u6301\u64ad\u653e\u5668\u72b6\u6001\u56de\u8c03 \u652f\u6301\u6d41\u4fe1\u606f\uff0c\u64ad\u653e\u5668\u4fe1\u606f\u5bdf\u770b\uff08Dashboard\uff09 \u652f\u6301\u64ad\u653e\u672c\u5730\u89c6\u9891\u6587\u4ef6 \u9879\u76ee\u5730\u5740\uff1ahttps://github.com/upyun/android-player-sdk \u53cd\u9988\u53ca\u5efa\u8bae\uff1alivesdk@upai.com","title":"\u529f\u80fd\u8bf4\u660e"},{"location":"cdn/log/","text":"\u65e5\u5fd7\u5206\u6790 \u00b6 \u53ef\u6839\u636e\u65f6\u95f4\u7c92\u5ea6\uff0c\u67e5\u770b\u76f8\u5e94\u8bbf\u95ee\u57df\u540d\u4e0b\u70ed\u95e8\u6587\u4ef6\u3001\u70ed\u95e8\u5ba2\u6237\u7aef\u3001\u70ed\u95e8\u5f15\u7528\u6587\u4ef6\u3001\u8d44\u6e90\u72b6\u6001\u7801\u3001\u6587\u4ef6\u5927\u5c0f\u3001\u70ed\u95e8 IP \u7b49\u7ef4\u5ea6 top1000 \u7684\u7edf\u8ba1\u5206\u6790\u6570\u636e\u3002\u65e5\u5fd7\u5206\u6790\u662f\u4ee5\u5929\u4e3a\u7c92\u5ea6\u8fdb\u884c\u5206\u6790\u7684\uff0c\u7b2c\u4e8c\u5929\u51cc\u6668\u4f1a\u5f00\u59cb\u8fdb\u884c\u65e5\u5fd7\u5206\u6790\u5de5\u4f5c\uff0c\u6b63\u5e38\u60c5\u51b5\u4e0b\uff0c\u7b2c\u4e8c\u5929\u65e9\u6668 09:00:00 \u4e4b\u524d\u4f1a\u7edf\u8ba1\u8ba1\u7b97\u5b8c\u6bd5\u3002 \u914d\u7f6e\u5f15\u5bfc \u767b\u9646 CDN \u63a7\u5236\u53f0 \uff0c\u5728\u7f6e\u9876\u83dc\u5355\u8fdb\u5165 \u5de5\u5177\u7bb1 \uff0c\u627e\u5230 \u65e5\u5fd7\u7ba1\u7406 \u680f\u76ee\uff0c\u9009\u62e9 \u65e5\u5fd7\u5206\u6790 \u9009\u9879\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u65e5\u5fd7\u4e0b\u8f7d \u00b6 \u652f\u6301\u4ee5\u5c0f\u65f6\u7c92\u5ea6\u7684\u65e5\u5fd7\u4e0b\u8f7d\uff0c\u53ef\u6536\u96c6\u8be6\u7ec6\u7684\u7ec8\u7aef\u8bbf\u95ee\u65e5\u5fd7\uff1b\u65e5\u5fd7\u6587\u4ef6\u5ef6\u8fdf 1 \u5c0f\u65f6\uff0c\u53ef\u4ee5\u5728\u65e5\u5fd7\u7ba1\u7406\u6a21\u5757\u67e5\u8be2\u5230 1 \u5c0f\u65f6\u4e4b\u524d\u7684\u65e5\u5fd7\u6587\u4ef6\u3002 \u65e5\u5fd7\u547d\u540d\u89c4\u5219\uff1a\u65f6\u95f4\u6bb5-\u8bbf\u95ee\u57df\u540d-\u968f\u673a\u6570.gz\uff0c\u65e5\u5fd7\u547d\u540d\u793a\u4f8b\uff1a 10_00-impress-demo.b0.upaiyun.com-9571272666104702574.gz \u65e5\u5fd7\u683c\u5f0f\u8bf4\u660e $remote_addr - $remote_user [$time_local] \"$request_method $scheme://$http_host$uri$querystring $server_protocol\" $status $body_bytes_sent \"$http_referer\" \"$http_user_agent\" $content_type $request_content_length $cache_hit $source_code $is_dynamic $cache_control $request_time $edge_server_ip \u8be6\u7ec6\u53c2\u6570\u8bf4\u660e \u5e8f\u53f7 \u5b57\u6bb5 \u89e3\u91ca 1 $remote_addr \u5ba2\u6237\u7aef IP 2 $remote_user HTTP Auth \u7684\u7528\u6237\u540d 3 $time_local \u8bbf\u95ee\u65f6\u95f4 4 $request_method \u8bbf\u95ee\u7c7b\u578b GET 5 $scheme \u5e94\u7528\u534f\u8bae 6 $http_host \u8bbf\u95ee\u57df\u540d 7 $uri \u8bf7\u6c42 URI 8 $querystring \u8bf7\u6c42\u53c2\u6570 9 $server_protocol HTTP \u534f\u8bae\u7248\u672c 10 $status \u8fd4\u56de\u72b6\u6001\u7801 11 $body_bytes_sent \u53d1\u9001 body \u5b57\u8282\u6570 12 $http_referer \u8bf7\u6c42\u6765\u6e90 referer 13 $http_user_agent \u5ba2\u6237\u7aef\u4fe1\u606f 14 $content_type \u5185\u5bb9\u7c7b\u578b 15 $request_content_length \u5ba2\u6237\u7aef\u5411\u670d\u52a1\u7aef\u53d1\u8d77\u8bf7\u6c42\u7684\u5185\u5bb9\u5927\u5c0f 16 $cache_hit \u662f\u5426 CDN \u7f13\u5b58\u547d\u4e2d 17 $source_code \u6e90\u7ad9\u8fd4\u56de\u72b6\u6001\u7801 18 $is_dynamic \u662f\u5426\u52a8\u6001\u8bf7\u6c42 19 $cache_control \u7f13\u5b58\u63a7\u5236\u5934\u4fe1\u606f 20 $request_time \u8bf7\u6c42\u5904\u7406\u8017\u65f6 21 $edge_server_ip CDN \u8fb9\u7f18\u8282\u70b9 IP \u65e5\u5fd7\u6837\u4f8b 122.96.42.186 - - [13/Dec/2016:00:00:02 +0800] \"GET http://impress-demo.b0.upaiyun.com/kphone/icons/weihui_icon3.png?v=1.0 HTTP/1.1\" 200 1851 \"-\" \"Mozilla/4.0\" \"image/png\" 0 Hit \"C/200\" Static \"max-age=900\" 0.014 153.101.64.13 \u5b57\u6bb5\u8bf4\u660e \u5e8f\u53f7 \u5b57\u6bb5 \u793a\u4f8b\u503c 1 \u5ba2\u6237\u7aef IP 122.96.42.186 2 HTTP Auth \u7684\u7528\u6237\u540d - 3 \u8bbf\u95ee\u65f6\u95f4 [13/Dec/2016:00:00:02 +0800] 4 \u5ba2\u6237\u7aef\u8bf7\u6c42\u65b9\u6cd5 GET 5 \u8bf7\u6c42\u534f\u8bae HTTP 6 \u8bbf\u95ee\u57df\u540d impress-demo.b0.upaiyun.com 7 \u8bf7\u6c42 URI /kphone/icons/weihui_icon3.png 8 \u8bf7\u6c42\u53c2\u6570 v=1.0 9 HTTP \u534f\u8bae\u7248\u672c HTTP/1.1 10 \u8fd4\u56de\u72b6\u6001\u7801 200 11 \u53d1\u9001 body \u5b57\u8282\u6570 1851 12 Referer \u8bf7\u6c42\u5934 - 13 \u5ba2\u6237\u7aef\u4fe1\u606f Mozilla/4.0 14 \u5185\u5bb9\u7c7b\u578b image/png 15 \u5ba2\u6237\u7aef\u5411\u670d\u52a1\u7aef\u53d1\u8d77\u8bf7\u6c42\u7684\u5185\u5bb9\u5927\u5c0f 0 16 \u7f13\u5b58\u547d\u4e2d\u72b6\u6001 Hit 17 \u6e90\u7ad9\u8fd4\u56de\u72b6\u6001\u7801 C/200 18 \u52a8\u6001\u8bf7\u6c42\u6807\u8bb0 Static 19 \u7f13\u5b58\u63a7\u5236\u5934\u4fe1\u606f max-age=900 20 \u8bf7\u6c42\u5904\u7406\u8017\u65f6\uff08\u5355\u4f4ds\uff09 0.014 21 CDN \u8fb9\u7f18\u8282\u70b9 IP 153.101.64.13 \u914d\u7f6e\u5f15\u5bfc \u767b\u9646 CDN \u63a7\u5236\u53f0 \uff0c\u5728\u7f6e\u9876\u83dc\u5355\u8fdb\u5165 \u5de5\u5177\u7bb1 \uff0c\u627e\u5230 \u65e5\u5fd7\u7ba1\u7406 \u680f\u76ee\uff0c\u9009\u62e9 \u65e5\u5fd7\u4e0b\u8f7d \u9009\u9879\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u5173\u4e8e\u65e5\u5fd7\u5206\u6790\u548c\u4e0b\u8f7d\u89c6\u9891\u6559\u7a0b\u8bf7\u70b9\u51fb \u65e5\u5fd7\u7ba1\u7406\u89c6\u9891\u6559\u7a0b \u3002 \u5982\u6709\u7591\u95ee\u8bf7 \u8054\u7cfb\u6211\u4eec","title":"\u65e5\u5fd7\u7ba1\u7406"},{"location":"cdn/log/#_1","text":"\u53ef\u6839\u636e\u65f6\u95f4\u7c92\u5ea6\uff0c\u67e5\u770b\u76f8\u5e94\u8bbf\u95ee\u57df\u540d\u4e0b\u70ed\u95e8\u6587\u4ef6\u3001\u70ed\u95e8\u5ba2\u6237\u7aef\u3001\u70ed\u95e8\u5f15\u7528\u6587\u4ef6\u3001\u8d44\u6e90\u72b6\u6001\u7801\u3001\u6587\u4ef6\u5927\u5c0f\u3001\u70ed\u95e8 IP \u7b49\u7ef4\u5ea6 top1000 \u7684\u7edf\u8ba1\u5206\u6790\u6570\u636e\u3002\u65e5\u5fd7\u5206\u6790\u662f\u4ee5\u5929\u4e3a\u7c92\u5ea6\u8fdb\u884c\u5206\u6790\u7684\uff0c\u7b2c\u4e8c\u5929\u51cc\u6668\u4f1a\u5f00\u59cb\u8fdb\u884c\u65e5\u5fd7\u5206\u6790\u5de5\u4f5c\uff0c\u6b63\u5e38\u60c5\u51b5\u4e0b\uff0c\u7b2c\u4e8c\u5929\u65e9\u6668 09:00:00 \u4e4b\u524d\u4f1a\u7edf\u8ba1\u8ba1\u7b97\u5b8c\u6bd5\u3002 \u914d\u7f6e\u5f15\u5bfc \u767b\u9646 CDN \u63a7\u5236\u53f0 \uff0c\u5728\u7f6e\u9876\u83dc\u5355\u8fdb\u5165 \u5de5\u5177\u7bb1 \uff0c\u627e\u5230 \u65e5\u5fd7\u7ba1\u7406 \u680f\u76ee\uff0c\u9009\u62e9 \u65e5\u5fd7\u5206\u6790 \u9009\u9879\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff1a","title":"\u65e5\u5fd7\u5206\u6790"},{"location":"cdn/log/#_2","text":"\u652f\u6301\u4ee5\u5c0f\u65f6\u7c92\u5ea6\u7684\u65e5\u5fd7\u4e0b\u8f7d\uff0c\u53ef\u6536\u96c6\u8be6\u7ec6\u7684\u7ec8\u7aef\u8bbf\u95ee\u65e5\u5fd7\uff1b\u65e5\u5fd7\u6587\u4ef6\u5ef6\u8fdf 1 \u5c0f\u65f6\uff0c\u53ef\u4ee5\u5728\u65e5\u5fd7\u7ba1\u7406\u6a21\u5757\u67e5\u8be2\u5230 1 \u5c0f\u65f6\u4e4b\u524d\u7684\u65e5\u5fd7\u6587\u4ef6\u3002 \u65e5\u5fd7\u547d\u540d\u89c4\u5219\uff1a\u65f6\u95f4\u6bb5-\u8bbf\u95ee\u57df\u540d-\u968f\u673a\u6570.gz\uff0c\u65e5\u5fd7\u547d\u540d\u793a\u4f8b\uff1a 10_00-impress-demo.b0.upaiyun.com-9571272666104702574.gz \u65e5\u5fd7\u683c\u5f0f\u8bf4\u660e $remote_addr - $remote_user [$time_local] \"$request_method $scheme://$http_host$uri$querystring $server_protocol\" $status $body_bytes_sent \"$http_referer\" \"$http_user_agent\" $content_type $request_content_length $cache_hit $source_code $is_dynamic $cache_control $request_time $edge_server_ip \u8be6\u7ec6\u53c2\u6570\u8bf4\u660e \u5e8f\u53f7 \u5b57\u6bb5 \u89e3\u91ca 1 $remote_addr \u5ba2\u6237\u7aef IP 2 $remote_user HTTP Auth \u7684\u7528\u6237\u540d 3 $time_local \u8bbf\u95ee\u65f6\u95f4 4 $request_method \u8bbf\u95ee\u7c7b\u578b GET 5 $scheme \u5e94\u7528\u534f\u8bae 6 $http_host \u8bbf\u95ee\u57df\u540d 7 $uri \u8bf7\u6c42 URI 8 $querystring \u8bf7\u6c42\u53c2\u6570 9 $server_protocol HTTP \u534f\u8bae\u7248\u672c 10 $status \u8fd4\u56de\u72b6\u6001\u7801 11 $body_bytes_sent \u53d1\u9001 body \u5b57\u8282\u6570 12 $http_referer \u8bf7\u6c42\u6765\u6e90 referer 13 $http_user_agent \u5ba2\u6237\u7aef\u4fe1\u606f 14 $content_type \u5185\u5bb9\u7c7b\u578b 15 $request_content_length \u5ba2\u6237\u7aef\u5411\u670d\u52a1\u7aef\u53d1\u8d77\u8bf7\u6c42\u7684\u5185\u5bb9\u5927\u5c0f 16 $cache_hit \u662f\u5426 CDN \u7f13\u5b58\u547d\u4e2d 17 $source_code \u6e90\u7ad9\u8fd4\u56de\u72b6\u6001\u7801 18 $is_dynamic \u662f\u5426\u52a8\u6001\u8bf7\u6c42 19 $cache_control \u7f13\u5b58\u63a7\u5236\u5934\u4fe1\u606f 20 $request_time \u8bf7\u6c42\u5904\u7406\u8017\u65f6 21 $edge_server_ip CDN \u8fb9\u7f18\u8282\u70b9 IP \u65e5\u5fd7\u6837\u4f8b 122.96.42.186 - - [13/Dec/2016:00:00:02 +0800] \"GET http://impress-demo.b0.upaiyun.com/kphone/icons/weihui_icon3.png?v=1.0 HTTP/1.1\" 200 1851 \"-\" \"Mozilla/4.0\" \"image/png\" 0 Hit \"C/200\" Static \"max-age=900\" 0.014 153.101.64.13 \u5b57\u6bb5\u8bf4\u660e \u5e8f\u53f7 \u5b57\u6bb5 \u793a\u4f8b\u503c 1 \u5ba2\u6237\u7aef IP 122.96.42.186 2 HTTP Auth \u7684\u7528\u6237\u540d - 3 \u8bbf\u95ee\u65f6\u95f4 [13/Dec/2016:00:00:02 +0800] 4 \u5ba2\u6237\u7aef\u8bf7\u6c42\u65b9\u6cd5 GET 5 \u8bf7\u6c42\u534f\u8bae HTTP 6 \u8bbf\u95ee\u57df\u540d impress-demo.b0.upaiyun.com 7 \u8bf7\u6c42 URI /kphone/icons/weihui_icon3.png 8 \u8bf7\u6c42\u53c2\u6570 v=1.0 9 HTTP \u534f\u8bae\u7248\u672c HTTP/1.1 10 \u8fd4\u56de\u72b6\u6001\u7801 200 11 \u53d1\u9001 body \u5b57\u8282\u6570 1851 12 Referer \u8bf7\u6c42\u5934 - 13 \u5ba2\u6237\u7aef\u4fe1\u606f Mozilla/4.0 14 \u5185\u5bb9\u7c7b\u578b image/png 15 \u5ba2\u6237\u7aef\u5411\u670d\u52a1\u7aef\u53d1\u8d77\u8bf7\u6c42\u7684\u5185\u5bb9\u5927\u5c0f 0 16 \u7f13\u5b58\u547d\u4e2d\u72b6\u6001 Hit 17 \u6e90\u7ad9\u8fd4\u56de\u72b6\u6001\u7801 C/200 18 \u52a8\u6001\u8bf7\u6c42\u6807\u8bb0 Static 19 \u7f13\u5b58\u63a7\u5236\u5934\u4fe1\u606f max-age=900 20 \u8bf7\u6c42\u5904\u7406\u8017\u65f6\uff08\u5355\u4f4ds\uff09 0.014 21 CDN \u8fb9\u7f18\u8282\u70b9 IP 153.101.64.13 \u914d\u7f6e\u5f15\u5bfc \u767b\u9646 CDN \u63a7\u5236\u53f0 \uff0c\u5728\u7f6e\u9876\u83dc\u5355\u8fdb\u5165 \u5de5\u5177\u7bb1 \uff0c\u627e\u5230 \u65e5\u5fd7\u7ba1\u7406 \u680f\u76ee\uff0c\u9009\u62e9 \u65e5\u5fd7\u4e0b\u8f7d \u9009\u9879\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u5173\u4e8e\u65e5\u5fd7\u5206\u6790\u548c\u4e0b\u8f7d\u89c6\u9891\u6559\u7a0b\u8bf7\u70b9\u51fb \u65e5\u5fd7\u7ba1\u7406\u89c6\u9891\u6559\u7a0b \u3002 \u5982\u6709\u7591\u95ee\u8bf7 \u8054\u7cfb\u6211\u4eec","title":"\u65e5\u5fd7\u4e0b\u8f7d"},{"location":"cdn/product/","text":"\u4ea7\u54c1\u6982\u8ff0 \u00b6 CDN ( Content Delivery Network )\uff0c\u4e5f\u5373\u5185\u5bb9\u5206\u53d1\u7f51\u7edc\u3002\u901a\u8fc7\u5c06\u7f51\u7ad9\u5185\u5bb9\uff08\u5982\u56fe\u7247\u3001JavaScript \u3001CSS\u3001\u7f51\u9875\u7b49\uff09\u5206\u53d1\u81f3\u5168\u7f51\u52a0\u901f\u8282\u70b9\uff0c\u914d\u5408\u7cbe\u51c6\u667a\u80fd\u8c03\u5ea6\u7cfb\u7edf\u548c\u8fb9\u7f18\u7f13\u5b58\uff0c\u4f7f\u6700\u7ec8\u7528\u6237\u53ef\u4ee5\u5c31\u8fd1\u83b7\u53d6\u6240\u9700\u5185\u5bb9\uff0c\u6709\u6548\u89e3\u51b3\u4e92\u8054\u7f51\u7f51\u7edc\u62e5\u585e\u95ee\u9898\uff0c\u63d0\u9ad8\u7ec8\u7aef\u7528\u6237\u8bbf\u95ee\u7f51\u7ad9\u7684\u54cd\u5e94\u901f\u5ea6\u548c\u53ef\u7528\u6027\uff0c\u4e0e\u6b64\u540c\u65f6\uff0c\u53ef\u5927\u5e45\u964d\u4f4e\u6e90\u7ad9\u538b\u529b\u3002 \u53c8\u62cd\u4e91\u5185\u5bb9\u5206\u53d1\u7f51\u7edc\u7ed3\u5408\u4f18\u8d28\u7684\u7f51\u7edc\u8282\u70b9\u8d44\u6e90\u3001\u7f51\u7edc\u670d\u52a1\u5668\u6280\u672f\u4ee5\u53ca\u4f20\u8f93\u8def\u7531\u6280\u672f\u4f18\u52bf\uff0c\u6784\u5efa\u4e86\u4e0b\u4e00\u4ee3 CDN \u52a0\u901f\u5e73\u53f0\u3002\u6211\u4eec\u7684\u670d\u52a1\u5668\u8f6f\u4ef6\u53ef\u6709\u6548\u5904\u7406\u6bcf\u79d2\u767e\u4e07\u6b21\u7684\u8bf7\u6c42\uff0c\u6211\u4eec\u529b\u6c42\u8ba9 CDN \u670d\u52a1\u66f4\u52a0\u7b80\u5355\u3001\u9ad8\u6548\u3001\u5b89\u5168\uff0c\u5c3d\u4e00\u5207\u53ef\u80fd\u5e2e\u52a9\u7528\u6237\u89e3\u51b3\u4e92\u8054\u7f51\u4e0a\u53ef\u80fd\u5f71\u54cd\u6570\u636e\u4f20\u8f93\u901f\u5ea6\u548c\u7a33\u5b9a\u6027\u7684\u74f6\u9888\u548c\u73af\u8282\u3002 CDN\u52a0\u901f\u539f\u7406 \u5047\u8bbe\u60a8\u7684\u4e1a\u52a1\u8bbf\u95ee\u57df\u540d\u4e3a www.abc.com \uff0c\u5f53\u8be5\u57df\u540d\u63a5\u5165\u5230\u53c8\u62cd CDN \u670d\u52a1\u4e4b\u540e\uff0c\u60a8\u7684\u6700\u7ec8\u7528\u6237\u53d1\u8d77\u7684 HTTP \u8bf7\u6c42\uff0c\u5b9e\u9645\u7684\u8bbf\u95ee\u6d41\u7a0b\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u4ea7\u54c1\u67b6\u6784 \u00b6 \u6574\u4e2a\u4ea7\u54c1\u67b6\u6784\u7531\u5ba2\u6237\u7aef\u3001CDN \u7f51\u7edc\u3001\u4f01\u4e1a\u6e90\u7ad9\u3001\u7ba1\u7406\u63a7\u5236\u53f0\u3001CDN \u667a\u80fd\u8c03\u5ea6\u7cfb\u7edf\u7b49\u89d2\u8272\u53ca\u6a21\u5757\u7ec4\u6210\u3002\u4ea7\u54c1\u67b6\u6784\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u5ba2\u6237\u7aef \u5ba2\u6237\u7aef\u901a\u8fc7 DNS \u89e3\u6790\u53ef\u4ee5\u5feb\u901f\u63a5\u5165\u5230\u53c8\u62cd\u4e91 CDN \u7f51\u7edc\uff0cCDN \u667a\u80fd\u8c03\u5ea6\u7cfb\u7edf\u53ef\u4ee5\u54cd\u5e94\u4e00\u4e2a\u79bb\u7528\u6237\u6700\u8fd1\u7684 CDN \u8fb9\u7f18\u8282\u70b9 IP \u7ed9\u5ba2\u6237\u7aef\uff0c\u5ba2\u6237\u7aef\u53ef\u4ee5\u8fbe\u5230\u5c31\u8fd1\u8bbf\u95ee\u7684\u76ee\u7684\u3002 CDN \u7f51\u7edc \u53c8\u62cd\u4e91 CDN \u7f51\u7edc\u7531\u8fb9\u7f18\u8282\u70b9\u96c6\u7fa4\u3001\u4e2d\u5fc3\u8282\u70b9\u96c6\u7fa4\u3001\u667a\u80fd\u8c03\u5ea6\u7cfb\u7edf\u7b49\u6a21\u5757\u548c\u57fa\u7840\u8bbe\u65bd\u7ec4\u6210\u3002\u8282\u70b9\u96c6\u7fa4\u9664\u4e86\u5177\u5907\u9ad8\u6027\u80fd\u7684\u7f13\u5b58\u529f\u80fd\uff0c\u8fd8\u5177\u5907\u56db\u5c42\u548c\u4e03\u5c42\u7684\u8d1f\u8f7d\u5747\u8861\u529f\u80fd\u3002 \u4f01\u4e1a\u6e90\u7ad9 \u4f01\u4e1a\u6e90\u7ad9\u53ef\u4ee5\u662f\u4f01\u4e1a\u81ea\u5efa\u7684\u6e90\u7ad9\u6216\u8005\u6258\u7ba1\u5728\u7b2c\u4e09\u65b9\u5b58\u50a8\u7684\u9759\u6001\u8d44\u6e90\uff0cCDN \u7f51\u7edc\u4f5c\u4e3a\u53cd\u5411\u4ee3\u7406\u4f1a\u6839\u636e\u5ba2\u6237\u7aef\u7684\u8bf7\u6c42\u56de\u6e90\u7ad9\u8bf7\u6c42\u8d44\u6e90\u6587\u4ef6\u5e76\u5c06\u6570\u636e\u8d44\u6e90\u8fdb\u884c\u7f13\u5b58\u3002 \u7ba1\u7406\u63a7\u5236\u53f0 \u7528\u6237\u53ef\u901a\u8fc7\u53c8\u62cd\u4e91\u7ba1\u7406\u63a7\u5236\u53f0\u3001API \u7684\u65b9\u5f0f\uff0c\u7ba1\u7406\u6258\u7ba1\u5728\u53c8\u62cd\u4e91 CDN \u7f51\u7edc\u4e0a\u7684\u8d44\u6e90\u53ca\u670d\u52a1\uff0c\u901a\u8fc7\u66f4\u591a\u7684\u7edf\u8ba1\u6570\u636e\u5c55\u793a\uff0c\u4f7f\u5f97 CDN \u670d\u52a1\u66f4\u52a0\u65b9\u4fbf\u3001\u5feb\u6377\u3002 \u4e3b\u8981\u529f\u80fd \u00b6 \u529f\u80fd\u7c7b\u522b \u529f\u80fd\u540d\u79f0 \u8be6\u7ec6 \u662f\u5426\u652f\u6301 \u670d\u52a1\u7ba1\u7406 \u7ba1\u7406\u65b9\u5f0f \u652f\u6301\u7ba1\u7406\u63a7\u5236\u53f0\u56fe\u5f62\u5316\u7ba1\u7406\u3001API \u7ba1\u7406 \u221a API \u7ba1\u7406 \u652f\u6301\u521b\u5efa\u3001\u4fee\u6539\u3001\u5220\u9664\u3001\u542f\u7528\u3001\u505c\u6b62\u670d\u52a1\uff0c\u7edf\u8ba1\u5206\u6790\u53ca\u65e5\u5fd7\u4e0b\u8f7d\u7b49 \u221a \u57df\u540d\u7ed1\u5b9a \u4e00\u4e2a\u670d\u52a1\u4e0b\u6700\u591a\u53ef\u4ee5\u7ed1\u5b9a 10 \u4e2a\u57df\u540d\uff0c\u652f\u6301\u6cdb\u57df\u540d\uff0c\u4e0d\u652f\u6301\u672a\u5907\u6848\u57df\u540d \u221a \u5185\u5bb9\u7ba1\u7406 \u7f13\u5b58\u914d\u7f6e \u652f\u6301\u81ea\u5b9a\u4e49\u7f13\u5b58\u65f6\u95f4\u8bbe\u7f6e\uff0c\u53ef\u9488\u5bf9\u6587\u4ef6\u540e\u7f00\u3001\u76ee\u5f55\u7b49\u8fdb\u884c\u8d44\u6e90\u7f13\u5b58\u65f6\u95f4\u7684\u8bbe\u7f6e \u221a \u5185\u5bb9\u5237\u65b0 \u652f\u6301 URL \u5237\u65b0\u4ee5\u53ca\u89c4\u5219\u5237\u65b0\uff0c\u53ef\u5c06 CDN \u8282\u70b9\u7684\u6587\u4ef6\u8fdb\u884c\u5220\u9664\u6216\u81f4\u8fc7\u671f\u5904\u7406 \u221a URL \u9884\u70ed \u53ef\u5c06\u70ed\u95e8\u6587\u4ef6\u63d0\u524d\u7f13\u5b58\u81f3 CDN \u8282\u70b9\uff0c\u964d\u4f4e\u6e90\u7ad9\u538b\u529b \u221a \u53c2\u6570\u8ddf\u968f \u63a7\u5236\u662f\u5426\u8fc7\u6ee4\u8bf7\u6c42\u4e2d\u7684\u67e5\u8be2\u5b57\u7b26\u4e32\uff0c\u652f\u6301\u5ffd\u7565\u53c2\u6570\u3001\u5168\u7a0b\u8ddf\u968f\u3001\u56de\u6e90\u8ddf\u968f\u7b49\u6a21\u5f0f \u221a \u8bbf\u95ee\u63a7\u5236 \u9ed1\u767d\u540d\u5355 \u652f\u6301 IP\u3001URL \u9ed1\u767d\u540d\u5355\u8bbe\u7f6e\uff0c\u7981\u7528\u975e\u6cd5\u8d44\u6e90\u8bbf\u95ee \u221a \u9632\u76d7\u94fe \u652f\u6301\u5730\u533a\u8bbf\u95ee\u9650\u5236\u3001Token\u3001Referer\u3001\u56de\u6e90\u9274\u6743\u7b49\u591a\u79cd\u9632\u76d7\u94fe\u65b9\u5f0f \u221a WAF \u9632\u62a4 \u80fd\u6709\u6548\u62e6\u622a\u8de8\u7ad9\u653b\u51fb\u3001SQL \u6ce8\u5165\u548c\u5176\u4ed6\u4ee3\u7801\u6267\u884c\u7b49\u591a\u79cd\u653b\u51fb\u65b9\u5f0f \u221a CC \u9632\u62a4 \u53ef\u6709\u6548\u9632\u6b62 DDos \u653b\u51fb\u4e2d\u7684 CC \u653b\u51fb\uff0c\u652f\u6301\u667a\u80fd\u53ca\u5f3a\u5236\u9632\u62a4\u6a21\u5f0f \u221a HTTP\u8bf7\u6c42\u5927\u5c0f\u9650\u5236 \u53ef\u9650\u5236\u5355\u6b21\u8bf7\u6c42\u4f53\u7684\u5185\u5bb9\u5927\u5c0f\uff0c\u80fd\u6709\u6548\u4fdd\u8bc1\u8bf7\u6c42\u7684\u5b89\u5168\u6027 \u221a \u7edf\u8ba1\u5206\u6790 \u5e26\u5bbd\u7edf\u8ba1 \u53ef\u6839\u636e\u5730\u533a\u3001\u8fd0\u8425\u5546\u7b49\u7ef4\u5ea6\u67e5\u770b\u57df\u540d\u53ca\u670d\u52a1\u6700\u8fd1 30 \u5929\u7684\u5e26\u5bbd\u8d8b\u52bf\u53ca\u8be6\u7ec6\u7edf\u8ba1\u6570\u636e \u221a \u6d41\u91cf\u7edf\u8ba1 \u53ef\u6839\u636e\u5730\u533a\u3001\u8fd0\u8425\u5546\u7b49\u7ef4\u5ea6\u67e5\u770b\u57df\u540d\u53ca\u670d\u52a1\u6700\u8fd1 30 \u5929\u7684\u6d41\u91cf\u8d8b\u52bf\u53ca\u8be6\u7ec6\u7edf\u8ba1\u6570\u636e \u221a \u8bf7\u6c42\u6570\u7edf\u8ba1 \u53ef\u6839\u636e\u5730\u533a\u3001\u8fd0\u8425\u5546\u7b49\u7ef4\u5ea6\u67e5\u770b\u57df\u540d\u53ca\u670d\u52a1\u6700\u8fd1 30 \u5929\u7684\u8bf7\u6c42\u6570\u8d8b\u52bf\u53ca\u8be6\u7ec6\u7edf\u8ba1\u6570\u636e \u221a \u5bfc\u51fa\u5386\u53f2\u6570\u636e \u53ef\u6839\u636e\u5730\u533a\u3001\u8fd0\u8425\u5546\u7b49\u7ef4\u5ea6\u67e5\u770b\u57df\u540d\u53ca\u670d\u52a1\u6700\u8fd1 30\u5929 5\u5206\u949f\u7c92\u5ea6\u7684\u8be6\u7ec6\u5e26\u5bbd\u6570\u636e \u221a \u6027\u80fd\u76d1\u63a7 \u5065\u5eb7\u5ea6 \u7edf\u8ba1\u6240\u6709\u8bf7\u6c42\u7684 HTTP \u72b6\u6001\u7801\uff0c\u8ba1\u7b97 2xx \u548c 3xx \u8bf7\u6c42\u6b21\u6570\u6240\u5360\u7684\u6bd4\u4f8b \u221a \u7f13\u5b58\u547d\u4e2d\u7387 \u7edf\u8ba1\u6240\u6709\u8bf7\u6c42\u6570\u4e2d\uff0c\u547d\u4e2d\u7f13\u5b58\u7684\u8bf7\u6c42\u6570\u6240\u5360\u7684\u6bd4\u4f8b \u221a \u5e73\u5747\u4e0b\u8f7d\u901f\u5ea6 \u53ef\u4ee5\u6839\u636e\u5730\u533a\u548c\u8fd0\u8425\u5546\u6765\u533a\u5206\u8d44\u6e90\u6587\u4ef6\u4e0b\u8f7d\u901f\u5ea6\u548c\u8bf7\u6c42\u8017\u65f6 \u221a \u62e6\u622a\u653b\u51fb\u6b21\u6570 \u62e6\u622a\u7684\u8de8\u7ad9\u653b\u51fb\u3001SQL \u6ce8\u5165\u548c\u5176\u4ed6\u4ee3\u7801\u6267\u884c\u7b49\u591a\u79cd\u653b\u51fb\u7684\u6570\u91cf \u221a \u9ad8\u7ea7\u670d\u52a1 \u81ea\u5b9a\u4e49 SSL \u670d\u52a1 \u7528\u6237\u53ef\u4ee5\u4e0a\u4f20\u81ea\u5df1\u7684 SSL \u8bc1\u4e66\u5230\u53c8\u62cd\u4e91\uff0c\u5e76\u7ba1\u7406\u81ea\u5b9a\u4e49\u57df\u540d\u7684 HTTPS \u8bbf\u95ee \u221a \u89c6\u9891\u62d6\u62c9 \u652f\u6301 MP4\uff0cFLV \u6587 \u4ef6\u6839\u636e\u89c6\u9891\u5934\u8fdb\u884c\u62d6\u62c9\u64ad\u653e\uff0c\u9ed8\u8ba4 MP4 \u6309\u65f6\u95f4\u62d6\u62c9\uff0cFLV \u6309\u5b57\u8282\u62d6\u62c9 \u221a CORS \u8de8\u57df\u5171\u4eab \u7528\u6237\u53ef\u4ee5\u5728\u53c8\u62cd\u4e91\u63a7\u5236\u53f0\u914d\u7f6e\u7b26\u5408\u81ea\u5df1\u7ad9\u70b9\u7684\u8de8\u57df\u8bf7\u6c42\u7b56\u7565 \u221a \u81ea\u5b9a\u4e49 Rewrite \u7528\u6237\u53ef\u4ee5\u6839\u636e\u7cfb\u7edf\u9884\u8bbe\u51fd\u6570\u3001\u8bf7\u6c42\u53d8\u91cf\u53ca\u5b57\u7b26\u4e32\u5e38\u91cf\u7b49\u8fdb\u884c\u81ea\u7531\u7ec4\u5408\uff0c\u5b8c\u6210\u5bf9\u8bf7\u6c42\u7684\u91cd\u5199 \u221a \u81ea\u5b9a\u4e49\u63d0\u793a\u56fe \u53ef\u4ee5\u6839\u636e 403\u3001404\u3001405 \u7b49\u72b6\u6001\u7801\u8fdb\u884c\u81ea\u5b9a\u4e49\u63d0\u793a\u56fe\u7684\u8bbe\u7f6e \u221a \u955c\u50cf\u5b58\u50a8 \u652f\u6301\u5c06\u7b2c\u4e09\u65b9\u5b58\u50a8\u4ee5\u53ca\u4f01\u4e1a\u6e90\u7ad9\u7684\u9759\u6001\u8d44\u6e90\u901a\u8fc7\u955c\u50cf\u7684\u65b9\u5f0f\u9010\u6b65\u8fc1\u79fb\u5230\u53c8\u62cd\u4e91\u5b58\u50a8 \u221a \u65e5\u5fd7\u7ba1\u7406 \u65e5\u5fd7\u4e0b\u8f7d \u652f\u6301\u4ee5\u5c0f\u65f6\u7c92\u5ea6\u7684\u65e5\u5fd7\u4e0b\u8f7d\uff0c\u53ef\u6536\u96c6\u8be6\u7ec6\u7684\u7ec8\u7aef\u8bbf\u95ee\u65e5\u5fd7 \u221a \u65e5\u5fd7\u5206\u6790 \u53ef\u67e5\u770b\u70ed\u95e8\u6587\u4ef6\u3001\u70ed\u95e8\u5ba2\u6237\u7aef\u3001\u70ed\u95e8\u5f15\u7528\u3001\u72b6\u6001\u7801\u7b49\u7ef4\u5ea6\u5bf9\u6587\u4ef6 URL \u8fdb\u884c\u7edf\u8ba1\u5206\u6790 \u221a \u8f85\u52a9\u5de5\u5177 IP \u68c0\u6d4b\u5de5\u5177 \u53ef\u901a\u8fc7\u8be5\u529f\u80fd\u9a8c\u8bc1 IP \u5730\u5740\u662f\u5426\u5c5e\u4e8e\u53c8\u62cd\u4e91 CDN \u8282\u70b9 \u221a \u7f51\u7edc\u8bca\u65ad\u5de5\u5177 \u68c0\u6d4b\u5f53\u524d\u7f51\u7edc\u8fde\u63a5\u60c5\u51b5\u53ca\u57fa\u672c\u4fe1\u606f\uff0c\u65b9\u4fbf\u5b9a\u4f4d\u95ee\u9898 \u221a \u4ea7\u54c1\u4f18\u52bf \u00b6 \u81ea\u52a9\u64cd\u4f5c\uff0c\u63d0\u5347\u6548\u7387 \u76f8\u5bf9\u4f20\u7edf CDN \u5382\u5546\uff0c\u53c8\u62cd\u4e91 CDN \u670d\u52a1\u5b8c\u5168\u5b9e\u73b0\u5168\u81ea\u52a9\u5316\u914d\u7f6e\uff0c\u5ba2\u6237\u53ef\u81ea\u4e3b\u8fdb\u884c\u529f\u80fd\u7684\u914d\u7f6e\uff08 \u57df\u540d\u914d\u7f6e\u3001\u56de\u6e90\u7b56\u7565\u3001\u7f13\u5b58\u89c4\u5219\u7b49 \uff09\uff0c\u6781\u5927\u63d0\u5347\u4e86\u5de5\u4f5c\u6548\u7387\u3002 \u8d44\u6e90\u4e30\u5bcc\uff0c\u5168\u7f51\u8986\u76d6 \u53c8\u62cd\u4e91 CDN \u670d\u52a1\u8282\u70b9\u8d44\u6e90\u4e30\u5bcc\uff0c\u5b9e\u73b0\u65e0\u5dee\u5f02\u7684\u7f51\u7edc\u8986\u76d6\uff0c\u5168\u8282\u70b9\u5168\u8d44\u6e90\u63d0\u4f9b\u670d\u52a1\uff0c\u771f\u6b63\u5b9e\u73b0\u5168\u7f51\u52a0\u901f\uff1b\u7f51\u7edc\u8d44\u6e90\u5b9e\u73b0\u672c\u5730\u5316\u8fd0\u8425\u5546\u8986\u76d6\uff0c\u652f\u6301\u5e26\u5bbd\u3001\u5b58\u50a8\u3001\u8282\u70b9\u7684\u5f39\u6027\u6269\u5c55\uff0c\u907f\u514d\u7a81\u53d1\u8bbf\u95ee\u6fc0\u589e\uff0c\u6253\u9020\u4e86\u76ee\u524d\u56fd\u5185\u8986\u76d6\u7387\u6700\u9ad8\u7684\u5185\u5bb9\u5206\u53d1\u7f51\u7edc\uff0c\u8ba9\u7528\u6237\u968f\u65f6\u968f\u5730\u4eab\u53d7\u4e91\u52a0\u901f\u3002 \u8282\u7ea6\u6210\u672c\uff0c\u7b80\u5316\u8fd0\u8425 \u7528\u6237\u901a\u8fc7\u53c8\u62cd\u4e91 CDN \u7684\u5206\u53d1\u52a0\u901f\uff0c\u514d\u53bb\u4e86\u81ea\u8eab\u67b6\u8bbe\u5185\u5bb9\u5206\u53d1\u7f51\u7edc\u7684\u65f6\u95f4\u53ca\u8d44\u6e90\u6295\u5165\uff0c\u66f4\u80fd\u83b7\u5f97\u975e\u5e38\u4e13\u4e1a\u7684\u8fd0\u7ef4\u4fdd\u969c\u670d\u52a1\uff0c\u7b80\u5316\u4e86\u5ba2\u6237\u7f51\u7ad9\u7684\u7cfb\u7edf\u7ef4\u62a4\uff0c\u66f4\u4fbf\u6377\u7684\u5bf9\u5168\u7f51\u8fdb\u884c\u5206\u53d1\u3002 \u5206\u6790\u6570\u636e\uff0c\u7cbe\u7ec6\u76d1\u63a7 \u53c8\u62cd\u4e91\u9488\u5bf9\u6240\u6709\u5ba2\u6237\uff0c\u5b9e\u73b0\u5168\u900f\u660e\u5316\u76d1\u63a7\uff0c\u670d\u52a1\u8d28\u91cf\u53ef\u901a\u8fc7\u53c8\u62cd\u4e91\u7ba1\u7406\u63a7\u5236\u5e73\u53f0\u4e00\u89c8\u65e0\u4f59\uff0c\u4e3a\u5ba2\u6237\u4e1a\u52a1\u6838\u5fc3\u5bfc\u5411\u63d0\u4f9b\u91cd\u8981\u4f9d\u636e\u3002 \u8fd0\u8425\u7a33\u5b9a\uff0c\u670d\u52a1\u4e13\u4e1a \u53c8\u62cd\u4e91 CDN \u4f5c\u4e3a\u7f51\u7edc\u52a0\u901f\u670d\u52a1\u5546\uff0c\u62e5\u6709\u4e30\u5bcc\u7684 CDN \u8fd0\u8425\u7ecf\u9a8c\uff0c\u6df1\u523b\u7406\u89e3\u4e92\u8054\u7f51\u57fa\u7840\u67b6\u6784\uff0c\u5e76\u63d0\u4f9b\u4e86 7*24 \u5c0f\u65f6\u65e0\u95f4\u65ad\u7684\u8fd0\u8425\u670d\u52a1\uff0c\u4fdd\u8bc1\u4efb\u4f55\u65f6\u523b\u90fd\u53ef\u4ee5\u4e3a\u5ba2\u6237\u89e3\u7591\u7b54\u60d1\u3002 \u5e94\u7528\u573a\u666f \u00b6 \u53c8\u62cd\u4e91\u5168\u7f51\u52a0\u901f\u670d\u52a1\u5b8c\u7f8e\u878d\u5408\u4e86\u53c8\u62cd\u4e91\u5bf9\u8c61\u5b58\u50a8\u548c CDN \u670d\u52a1\uff0c\u53ef\u4ee5\u9488\u5bf9\u7f51\u9875\u56fe\u7247\u3001\u4e0b\u8f7d\u5b89\u88c5\u5305\u3001\u97f3\u89c6\u9891\u7b49\u6587\u4ef6\u63d0\u4f9b\u6570\u636e\u6258\u7ba1\u3001\u5206\u53d1\u52a0\u901f\u53ca\u5904\u7406\u4e8e\u4e00\u4f53\u7684\u4e00\u7ad9\u5f0f\u89e3\u51b3\u65b9\u6848\u3002\u4e1a\u52a1\u4f7f\u7528\u573a\u666f\u5982\u4e0b\uff1a \u7f51\u9875\u56fe\u7247\u52a0\u901f \u7f51\u9875\u53ca\u5c0f\u6587\u4ef6\u52a0\u901f\u670d\u52a1\u5e2e\u52a9\u5ba2\u6237\u63d0\u5347\u7f51\u7ad9\u7684\u7528\u6237\u8bbf\u95ee\u901f\u5ea6\u548c\u670d\u52a1\u53ef\u7528\u6027\uff0c\u901a\u8fc7\u5c06\u9700\u8981\u8bbf\u95ee\u7684\u9759\u6001\u5185\u5bb9\u5206\u53d1\u5230\u4f4d\u4e8e\u7f51\u7edc\u8fb9\u7f18\u7684\u5404\u4e2a\u7f13\u5b58\u670d\u52a1\u5668\u4e2d\uff0c\u5c06\u7528\u6237\u8bf7\u6c42\u81ea\u52a8\u5206\u914d\u5230\u8ddd\u79bb\u7528\u6237\u6700\u8fd1\u7684\u670d\u52a1\u5668\u4e0a\u3002\u5efa\u8bae\u7ed3\u5408\u53c8\u62cd\u4e91\u5bf9\u8c61\u5b58\u50a8\u670d\u52a1\uff0c\u53ef\u4ee5\u6709\u6548\u63d0\u5347\u5185\u5bb9\u52a0\u8f7d\u901f\u5ea6\uff0c\u8f7b\u677e\u641e\u5b9a\u7f51\u7ad9\u56fe\u7247\u3001\u77ed\u89c6\u9891\u7b49\u5185\u5bb9\u5206\u53d1\u3002 \u52a8\u6001\u5185\u5bb9\u52a0\u901f \u53c8\u62cd\u4e91\u52a8\u6001\u5185\u5bb9\u52a0\u901f\u878d\u5408\u5728\u5168\u7f51\u52a0\u901f\u670d\u52a1\u4e2d\uff0c\u53ef\u667a\u80fd\u5224\u65ad PHP\u3001JSP\u3001ASP \u7b49\u52a8\u6001\u8d44\u6e90\u6587\u4ef6\uff0c\u81ea\u52a8\u5b9e\u73b0\u52a8\u9759\u5206\u79bb\u3002\u901a\u8fc7\u667a\u80fd\u8def\u7531\u3001\u5185\u5bb9\u538b\u7f29\u3001\u534f\u8bae\u4f18\u5316\u7b49\u6280\u672f\u5b9e\u73b0\u52a8\u6001\u5185\u5bb9\u7684\u52a0\u901f\uff0c\u5b8c\u7f8e\u89e3\u51b3\u7535\u5546\u8d2d\u7269\u3001\u5728\u7ebf\u65c5\u6e38\u7b49\u7f51\u7ad9\u5728\u767b\u9646\u3001\u63d0\u4ea4\u8ba2\u5355\u7b49\u52a8\u6001\u8bf7\u6c42\u8bbf\u95ee\u901f\u5ea6\u6162\u7684\u95ee\u9898\uff0c\u53ef\u8fdb\u4e00\u6b65\u63d0\u9ad8\u5ba2\u6237\u4e1a\u52a1\u8f6c\u5316\u7387\u3002 \u5927\u6587\u4ef6\u4e0b\u8f7d\u52a0\u901f \u53c8\u62cd\u4e91\u5168\u7f51\u52a0\u901f\u670d\u52a1\u9488\u5bf9\u7f51\u7edc\u6e38\u620f\u3001\u8f6f\u4ef6\u4e0b\u8f7d\u7c7b\u7f51\u7ad9\u53ca\u5e94\u7528\u7b49\u5927\u6587\u4ef6\u5206\u53d1\u63d0\u4f9b\u4e86\u4e00\u7ad9\u5f0f\u89e3\u51b3\u65b9\u6848\u3002\u7531\u4e8e\u6b64\u7c7b\u7f51\u7ad9\u53ca\u5e94\u7528\u5b58\u5728\u5e26\u5bbd\u7a81\u53d1\u5e76\u4e14\u7531\u4e8e\u5927\u6587\u4ef6\u4e0b\u8f7d\u4f1a\u5bfc\u81f4\u6e90\u7ad9\u670d\u52a1\u5668\u627f\u53d7\u975e\u5e38\u5927\u7684\u538b\u529b\uff0c\u53c8\u62cd\u4e91\u4e30\u5bcc\u7684\u5e26\u5bbd\u8d44\u6e90\u5e76\u4e14\u7ed3\u5408\u53c8\u62cd\u4e91\u5bf9\u8c61\u5b58\u50a8\u670d\u52a1\uff0c\u53ef\u5b8c\u7f8e\u89e3\u51b3\u5927\u6587\u4ef6\u5e26\u5bbd\u7a81\u53d1\u5e26\u6765\u7684\u4e00\u7cfb\u5217\u95ee\u9898\u3002 \u89c6\u9891\u70b9\u64ad\u52a0\u901f \u53c8\u62cd\u4e91\u5168\u7f51\u52a0\u901f\u670d\u52a1\u878d\u5408\u4e86\u89c6\u9891\u70b9\u64ad\u52a0\u901f\u548c\u5f02\u6b65\u97f3\u89c6\u9891\u5904\u7406\u670d\u52a1\uff0c\u9488\u5bf9\u6d41\u5a92\u4f53\u70b9\u64ad\u3001\u97f3\u89c6\u9891\u7f51\u7ad9\u53ca\u5e94\u7528\uff0c\u53c8\u62cd\u4e91\u53ef\u4ee5\u63d0\u4f9b\u9ad8\u901f\u3001\u4f4e\u4ef7\u7684\u6570\u636e\u4f20\u8f93\u670d\u52a1\uff0c\u5e2e\u52a9\u5728\u7ebf\u89c6\u9891\u7f51\u7ad9\u3001\u5728\u7ebf\u6559\u80b2\u7f51\u7ad9\u7b49\u4ee5\u6d41\u5a92\u4f53\u4e3a\u4e3b\u7684\u4f01\u4e1a\u63d0\u4f9b\u7a33\u5b9a\u3001\u9ad8\u8d28\u91cf\u3001\u4f4e\u4ef7\u7684\u89c6\u9891\u5206\u53d1\u670d\u52a1\uff0c\u8ba9\u60a8\u7684\u7528\u6237\u5728\u5168\u56fd\u4efb\u4f55\u5730\u65b9\u90fd\u53ef\u4ee5\u4eab\u53d7\u5230\u4f18\u8d28\u7684\u89c6\u9891\u4f53\u9a8c\u3002 \u81ea\u5b9a\u4e49 SSL \u670d\u52a1 \u53c8\u62cd\u4e91\u81ea\u5b9a\u4e49 SSL \u52a0\u901f\u670d\u52a1\u53ef\u6ee1\u8db3\u7535\u5b50\u5546\u52a1\u3001\u5728\u7ebf\u6559\u80b2\u3001\u94f6\u884c\u4fdd\u9669\u7b49\u7f51\u7ad9\u5728 HTTPS \u52a0\u901f\u65b9\u9762\u7684\u9700\u6c42\uff0c\u5e76\u53ef\u4ee5\u5b8c\u5168\u6ee1\u8db3\u81ea\u4e3b\u5316\u914d\u7f6e\u3002SSL \u670d\u52a1\u5668\u6570\u5b57\u8bc1\u4e66\u53ef\u51ed\u501f\u9ad8\u5f3a\u5ea6\u7b7e\u540d\u7b97\u6cd5\uff0c\u7ed3\u5408\u670d\u52a1\u5668\u7aef\u7684\u52a0\u5bc6\u534f\u8bae\uff0c\u5b8c\u6210 Web \u8bbf\u95ee\u5ba2\u6237\u5230\u670d\u52a1\u5668\u95f4\u7684 HTTPS \u52a0\u5bc6\u4f20\u8f93\uff0c\u6709\u6548\u9632\u6b62 Web \u4f20\u8f93\u4e2d\u7684\u6570\u636e\u52ab\u6301\uff0c\u4e3a\u7f51\u7ad9\u8bbf\u95ee\u8005\u63d0\u4f9b\u771f\u5b9e\u3001\u6709\u6548\u3001\u5b89\u5168\u7684\u7f51\u7ad9\u5185\u5bb9\u63d0\u4f9b\u65b9\u8eab\u4efd\u4fe1\u606f\uff0c\u786e\u4fdd\u7528\u6237\u53ef\u653e\u5fc3\u7684\u6d4f\u89c8\u7f51\u7ad9\u76f8\u5173\u5185\u5bb9\u3002 \u8d44\u6e90\u5206\u5e03 \u00b6 \u622a\u81f3 2017 \u5e74 9 \u6708\uff0c\u53c8\u62cd\u4e91\u56fd\u5185 CDN \u8282\u70b9\u6570\u8fbe\u5230 200 \u591a\u4e2a\uff0c\u8986\u76d6 15 \u591a\u4e2a\u56fd\u5bb6\u548c\u5730\u533a\uff0c10 \u591a\u4e2a\u8fd0\u8425\u5546\uff0c\u5e26\u5bbd\u603b\u91cf\u8d85\u8fc7 3.5Tbps\u30022015 \u5e74\u5e95\uff0c\u53c8\u62cd\u4e91 CDN \u8282\u70b9\u8d44\u6e90\u5df2\u8986\u76d6\u65b0\u52a0\u5761\u3001\u53f0\u6e7e\u3001\u9999\u6e2f\u3001\u7f8e\u56fd\u3001\u5fb7\u56fd\u7b49\u6d77\u5916\u5730\u533a\uff0c\u5168\u9762\u652f\u6301\u6d77\u5916\u52a0\u901f\uff0c\u63a8\u8fdb\u5168\u7403\u5316\u5e03\u5c40\u3002 \u5982\u6709\u7591\u95ee\u8bf7 \u8054\u7cfb\u6211\u4eec","title":"\u4ea7\u54c1\u4ecb\u7ecd"},{"location":"cdn/product/#_1","text":"CDN ( Content Delivery Network )\uff0c\u4e5f\u5373\u5185\u5bb9\u5206\u53d1\u7f51\u7edc\u3002\u901a\u8fc7\u5c06\u7f51\u7ad9\u5185\u5bb9\uff08\u5982\u56fe\u7247\u3001JavaScript \u3001CSS\u3001\u7f51\u9875\u7b49\uff09\u5206\u53d1\u81f3\u5168\u7f51\u52a0\u901f\u8282\u70b9\uff0c\u914d\u5408\u7cbe\u51c6\u667a\u80fd\u8c03\u5ea6\u7cfb\u7edf\u548c\u8fb9\u7f18\u7f13\u5b58\uff0c\u4f7f\u6700\u7ec8\u7528\u6237\u53ef\u4ee5\u5c31\u8fd1\u83b7\u53d6\u6240\u9700\u5185\u5bb9\uff0c\u6709\u6548\u89e3\u51b3\u4e92\u8054\u7f51\u7f51\u7edc\u62e5\u585e\u95ee\u9898\uff0c\u63d0\u9ad8\u7ec8\u7aef\u7528\u6237\u8bbf\u95ee\u7f51\u7ad9\u7684\u54cd\u5e94\u901f\u5ea6\u548c\u53ef\u7528\u6027\uff0c\u4e0e\u6b64\u540c\u65f6\uff0c\u53ef\u5927\u5e45\u964d\u4f4e\u6e90\u7ad9\u538b\u529b\u3002 \u53c8\u62cd\u4e91\u5185\u5bb9\u5206\u53d1\u7f51\u7edc\u7ed3\u5408\u4f18\u8d28\u7684\u7f51\u7edc\u8282\u70b9\u8d44\u6e90\u3001\u7f51\u7edc\u670d\u52a1\u5668\u6280\u672f\u4ee5\u53ca\u4f20\u8f93\u8def\u7531\u6280\u672f\u4f18\u52bf\uff0c\u6784\u5efa\u4e86\u4e0b\u4e00\u4ee3 CDN \u52a0\u901f\u5e73\u53f0\u3002\u6211\u4eec\u7684\u670d\u52a1\u5668\u8f6f\u4ef6\u53ef\u6709\u6548\u5904\u7406\u6bcf\u79d2\u767e\u4e07\u6b21\u7684\u8bf7\u6c42\uff0c\u6211\u4eec\u529b\u6c42\u8ba9 CDN \u670d\u52a1\u66f4\u52a0\u7b80\u5355\u3001\u9ad8\u6548\u3001\u5b89\u5168\uff0c\u5c3d\u4e00\u5207\u53ef\u80fd\u5e2e\u52a9\u7528\u6237\u89e3\u51b3\u4e92\u8054\u7f51\u4e0a\u53ef\u80fd\u5f71\u54cd\u6570\u636e\u4f20\u8f93\u901f\u5ea6\u548c\u7a33\u5b9a\u6027\u7684\u74f6\u9888\u548c\u73af\u8282\u3002 CDN\u52a0\u901f\u539f\u7406 \u5047\u8bbe\u60a8\u7684\u4e1a\u52a1\u8bbf\u95ee\u57df\u540d\u4e3a www.abc.com \uff0c\u5f53\u8be5\u57df\u540d\u63a5\u5165\u5230\u53c8\u62cd CDN \u670d\u52a1\u4e4b\u540e\uff0c\u60a8\u7684\u6700\u7ec8\u7528\u6237\u53d1\u8d77\u7684 HTTP \u8bf7\u6c42\uff0c\u5b9e\u9645\u7684\u8bbf\u95ee\u6d41\u7a0b\u5982\u4e0b\u56fe\u6240\u793a\uff1a","title":"\u4ea7\u54c1\u6982\u8ff0"},{"location":"cdn/product/#_2","text":"\u6574\u4e2a\u4ea7\u54c1\u67b6\u6784\u7531\u5ba2\u6237\u7aef\u3001CDN \u7f51\u7edc\u3001\u4f01\u4e1a\u6e90\u7ad9\u3001\u7ba1\u7406\u63a7\u5236\u53f0\u3001CDN \u667a\u80fd\u8c03\u5ea6\u7cfb\u7edf\u7b49\u89d2\u8272\u53ca\u6a21\u5757\u7ec4\u6210\u3002\u4ea7\u54c1\u67b6\u6784\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u5ba2\u6237\u7aef \u5ba2\u6237\u7aef\u901a\u8fc7 DNS \u89e3\u6790\u53ef\u4ee5\u5feb\u901f\u63a5\u5165\u5230\u53c8\u62cd\u4e91 CDN \u7f51\u7edc\uff0cCDN \u667a\u80fd\u8c03\u5ea6\u7cfb\u7edf\u53ef\u4ee5\u54cd\u5e94\u4e00\u4e2a\u79bb\u7528\u6237\u6700\u8fd1\u7684 CDN \u8fb9\u7f18\u8282\u70b9 IP \u7ed9\u5ba2\u6237\u7aef\uff0c\u5ba2\u6237\u7aef\u53ef\u4ee5\u8fbe\u5230\u5c31\u8fd1\u8bbf\u95ee\u7684\u76ee\u7684\u3002 CDN \u7f51\u7edc \u53c8\u62cd\u4e91 CDN \u7f51\u7edc\u7531\u8fb9\u7f18\u8282\u70b9\u96c6\u7fa4\u3001\u4e2d\u5fc3\u8282\u70b9\u96c6\u7fa4\u3001\u667a\u80fd\u8c03\u5ea6\u7cfb\u7edf\u7b49\u6a21\u5757\u548c\u57fa\u7840\u8bbe\u65bd\u7ec4\u6210\u3002\u8282\u70b9\u96c6\u7fa4\u9664\u4e86\u5177\u5907\u9ad8\u6027\u80fd\u7684\u7f13\u5b58\u529f\u80fd\uff0c\u8fd8\u5177\u5907\u56db\u5c42\u548c\u4e03\u5c42\u7684\u8d1f\u8f7d\u5747\u8861\u529f\u80fd\u3002 \u4f01\u4e1a\u6e90\u7ad9 \u4f01\u4e1a\u6e90\u7ad9\u53ef\u4ee5\u662f\u4f01\u4e1a\u81ea\u5efa\u7684\u6e90\u7ad9\u6216\u8005\u6258\u7ba1\u5728\u7b2c\u4e09\u65b9\u5b58\u50a8\u7684\u9759\u6001\u8d44\u6e90\uff0cCDN \u7f51\u7edc\u4f5c\u4e3a\u53cd\u5411\u4ee3\u7406\u4f1a\u6839\u636e\u5ba2\u6237\u7aef\u7684\u8bf7\u6c42\u56de\u6e90\u7ad9\u8bf7\u6c42\u8d44\u6e90\u6587\u4ef6\u5e76\u5c06\u6570\u636e\u8d44\u6e90\u8fdb\u884c\u7f13\u5b58\u3002 \u7ba1\u7406\u63a7\u5236\u53f0 \u7528\u6237\u53ef\u901a\u8fc7\u53c8\u62cd\u4e91\u7ba1\u7406\u63a7\u5236\u53f0\u3001API \u7684\u65b9\u5f0f\uff0c\u7ba1\u7406\u6258\u7ba1\u5728\u53c8\u62cd\u4e91 CDN \u7f51\u7edc\u4e0a\u7684\u8d44\u6e90\u53ca\u670d\u52a1\uff0c\u901a\u8fc7\u66f4\u591a\u7684\u7edf\u8ba1\u6570\u636e\u5c55\u793a\uff0c\u4f7f\u5f97 CDN \u670d\u52a1\u66f4\u52a0\u65b9\u4fbf\u3001\u5feb\u6377\u3002","title":"\u4ea7\u54c1\u67b6\u6784"},{"location":"cdn/product/#_3","text":"\u529f\u80fd\u7c7b\u522b \u529f\u80fd\u540d\u79f0 \u8be6\u7ec6 \u662f\u5426\u652f\u6301 \u670d\u52a1\u7ba1\u7406 \u7ba1\u7406\u65b9\u5f0f \u652f\u6301\u7ba1\u7406\u63a7\u5236\u53f0\u56fe\u5f62\u5316\u7ba1\u7406\u3001API \u7ba1\u7406 \u221a API \u7ba1\u7406 \u652f\u6301\u521b\u5efa\u3001\u4fee\u6539\u3001\u5220\u9664\u3001\u542f\u7528\u3001\u505c\u6b62\u670d\u52a1\uff0c\u7edf\u8ba1\u5206\u6790\u53ca\u65e5\u5fd7\u4e0b\u8f7d\u7b49 \u221a \u57df\u540d\u7ed1\u5b9a \u4e00\u4e2a\u670d\u52a1\u4e0b\u6700\u591a\u53ef\u4ee5\u7ed1\u5b9a 10 \u4e2a\u57df\u540d\uff0c\u652f\u6301\u6cdb\u57df\u540d\uff0c\u4e0d\u652f\u6301\u672a\u5907\u6848\u57df\u540d \u221a \u5185\u5bb9\u7ba1\u7406 \u7f13\u5b58\u914d\u7f6e \u652f\u6301\u81ea\u5b9a\u4e49\u7f13\u5b58\u65f6\u95f4\u8bbe\u7f6e\uff0c\u53ef\u9488\u5bf9\u6587\u4ef6\u540e\u7f00\u3001\u76ee\u5f55\u7b49\u8fdb\u884c\u8d44\u6e90\u7f13\u5b58\u65f6\u95f4\u7684\u8bbe\u7f6e \u221a \u5185\u5bb9\u5237\u65b0 \u652f\u6301 URL \u5237\u65b0\u4ee5\u53ca\u89c4\u5219\u5237\u65b0\uff0c\u53ef\u5c06 CDN \u8282\u70b9\u7684\u6587\u4ef6\u8fdb\u884c\u5220\u9664\u6216\u81f4\u8fc7\u671f\u5904\u7406 \u221a URL \u9884\u70ed \u53ef\u5c06\u70ed\u95e8\u6587\u4ef6\u63d0\u524d\u7f13\u5b58\u81f3 CDN \u8282\u70b9\uff0c\u964d\u4f4e\u6e90\u7ad9\u538b\u529b \u221a \u53c2\u6570\u8ddf\u968f \u63a7\u5236\u662f\u5426\u8fc7\u6ee4\u8bf7\u6c42\u4e2d\u7684\u67e5\u8be2\u5b57\u7b26\u4e32\uff0c\u652f\u6301\u5ffd\u7565\u53c2\u6570\u3001\u5168\u7a0b\u8ddf\u968f\u3001\u56de\u6e90\u8ddf\u968f\u7b49\u6a21\u5f0f \u221a \u8bbf\u95ee\u63a7\u5236 \u9ed1\u767d\u540d\u5355 \u652f\u6301 IP\u3001URL \u9ed1\u767d\u540d\u5355\u8bbe\u7f6e\uff0c\u7981\u7528\u975e\u6cd5\u8d44\u6e90\u8bbf\u95ee \u221a \u9632\u76d7\u94fe \u652f\u6301\u5730\u533a\u8bbf\u95ee\u9650\u5236\u3001Token\u3001Referer\u3001\u56de\u6e90\u9274\u6743\u7b49\u591a\u79cd\u9632\u76d7\u94fe\u65b9\u5f0f \u221a WAF \u9632\u62a4 \u80fd\u6709\u6548\u62e6\u622a\u8de8\u7ad9\u653b\u51fb\u3001SQL \u6ce8\u5165\u548c\u5176\u4ed6\u4ee3\u7801\u6267\u884c\u7b49\u591a\u79cd\u653b\u51fb\u65b9\u5f0f \u221a CC \u9632\u62a4 \u53ef\u6709\u6548\u9632\u6b62 DDos \u653b\u51fb\u4e2d\u7684 CC \u653b\u51fb\uff0c\u652f\u6301\u667a\u80fd\u53ca\u5f3a\u5236\u9632\u62a4\u6a21\u5f0f \u221a HTTP\u8bf7\u6c42\u5927\u5c0f\u9650\u5236 \u53ef\u9650\u5236\u5355\u6b21\u8bf7\u6c42\u4f53\u7684\u5185\u5bb9\u5927\u5c0f\uff0c\u80fd\u6709\u6548\u4fdd\u8bc1\u8bf7\u6c42\u7684\u5b89\u5168\u6027 \u221a \u7edf\u8ba1\u5206\u6790 \u5e26\u5bbd\u7edf\u8ba1 \u53ef\u6839\u636e\u5730\u533a\u3001\u8fd0\u8425\u5546\u7b49\u7ef4\u5ea6\u67e5\u770b\u57df\u540d\u53ca\u670d\u52a1\u6700\u8fd1 30 \u5929\u7684\u5e26\u5bbd\u8d8b\u52bf\u53ca\u8be6\u7ec6\u7edf\u8ba1\u6570\u636e \u221a \u6d41\u91cf\u7edf\u8ba1 \u53ef\u6839\u636e\u5730\u533a\u3001\u8fd0\u8425\u5546\u7b49\u7ef4\u5ea6\u67e5\u770b\u57df\u540d\u53ca\u670d\u52a1\u6700\u8fd1 30 \u5929\u7684\u6d41\u91cf\u8d8b\u52bf\u53ca\u8be6\u7ec6\u7edf\u8ba1\u6570\u636e \u221a \u8bf7\u6c42\u6570\u7edf\u8ba1 \u53ef\u6839\u636e\u5730\u533a\u3001\u8fd0\u8425\u5546\u7b49\u7ef4\u5ea6\u67e5\u770b\u57df\u540d\u53ca\u670d\u52a1\u6700\u8fd1 30 \u5929\u7684\u8bf7\u6c42\u6570\u8d8b\u52bf\u53ca\u8be6\u7ec6\u7edf\u8ba1\u6570\u636e \u221a \u5bfc\u51fa\u5386\u53f2\u6570\u636e \u53ef\u6839\u636e\u5730\u533a\u3001\u8fd0\u8425\u5546\u7b49\u7ef4\u5ea6\u67e5\u770b\u57df\u540d\u53ca\u670d\u52a1\u6700\u8fd1 30\u5929 5\u5206\u949f\u7c92\u5ea6\u7684\u8be6\u7ec6\u5e26\u5bbd\u6570\u636e \u221a \u6027\u80fd\u76d1\u63a7 \u5065\u5eb7\u5ea6 \u7edf\u8ba1\u6240\u6709\u8bf7\u6c42\u7684 HTTP \u72b6\u6001\u7801\uff0c\u8ba1\u7b97 2xx \u548c 3xx \u8bf7\u6c42\u6b21\u6570\u6240\u5360\u7684\u6bd4\u4f8b \u221a \u7f13\u5b58\u547d\u4e2d\u7387 \u7edf\u8ba1\u6240\u6709\u8bf7\u6c42\u6570\u4e2d\uff0c\u547d\u4e2d\u7f13\u5b58\u7684\u8bf7\u6c42\u6570\u6240\u5360\u7684\u6bd4\u4f8b \u221a \u5e73\u5747\u4e0b\u8f7d\u901f\u5ea6 \u53ef\u4ee5\u6839\u636e\u5730\u533a\u548c\u8fd0\u8425\u5546\u6765\u533a\u5206\u8d44\u6e90\u6587\u4ef6\u4e0b\u8f7d\u901f\u5ea6\u548c\u8bf7\u6c42\u8017\u65f6 \u221a \u62e6\u622a\u653b\u51fb\u6b21\u6570 \u62e6\u622a\u7684\u8de8\u7ad9\u653b\u51fb\u3001SQL \u6ce8\u5165\u548c\u5176\u4ed6\u4ee3\u7801\u6267\u884c\u7b49\u591a\u79cd\u653b\u51fb\u7684\u6570\u91cf \u221a \u9ad8\u7ea7\u670d\u52a1 \u81ea\u5b9a\u4e49 SSL \u670d\u52a1 \u7528\u6237\u53ef\u4ee5\u4e0a\u4f20\u81ea\u5df1\u7684 SSL \u8bc1\u4e66\u5230\u53c8\u62cd\u4e91\uff0c\u5e76\u7ba1\u7406\u81ea\u5b9a\u4e49\u57df\u540d\u7684 HTTPS \u8bbf\u95ee \u221a \u89c6\u9891\u62d6\u62c9 \u652f\u6301 MP4\uff0cFLV \u6587 \u4ef6\u6839\u636e\u89c6\u9891\u5934\u8fdb\u884c\u62d6\u62c9\u64ad\u653e\uff0c\u9ed8\u8ba4 MP4 \u6309\u65f6\u95f4\u62d6\u62c9\uff0cFLV \u6309\u5b57\u8282\u62d6\u62c9 \u221a CORS \u8de8\u57df\u5171\u4eab \u7528\u6237\u53ef\u4ee5\u5728\u53c8\u62cd\u4e91\u63a7\u5236\u53f0\u914d\u7f6e\u7b26\u5408\u81ea\u5df1\u7ad9\u70b9\u7684\u8de8\u57df\u8bf7\u6c42\u7b56\u7565 \u221a \u81ea\u5b9a\u4e49 Rewrite \u7528\u6237\u53ef\u4ee5\u6839\u636e\u7cfb\u7edf\u9884\u8bbe\u51fd\u6570\u3001\u8bf7\u6c42\u53d8\u91cf\u53ca\u5b57\u7b26\u4e32\u5e38\u91cf\u7b49\u8fdb\u884c\u81ea\u7531\u7ec4\u5408\uff0c\u5b8c\u6210\u5bf9\u8bf7\u6c42\u7684\u91cd\u5199 \u221a \u81ea\u5b9a\u4e49\u63d0\u793a\u56fe \u53ef\u4ee5\u6839\u636e 403\u3001404\u3001405 \u7b49\u72b6\u6001\u7801\u8fdb\u884c\u81ea\u5b9a\u4e49\u63d0\u793a\u56fe\u7684\u8bbe\u7f6e \u221a \u955c\u50cf\u5b58\u50a8 \u652f\u6301\u5c06\u7b2c\u4e09\u65b9\u5b58\u50a8\u4ee5\u53ca\u4f01\u4e1a\u6e90\u7ad9\u7684\u9759\u6001\u8d44\u6e90\u901a\u8fc7\u955c\u50cf\u7684\u65b9\u5f0f\u9010\u6b65\u8fc1\u79fb\u5230\u53c8\u62cd\u4e91\u5b58\u50a8 \u221a \u65e5\u5fd7\u7ba1\u7406 \u65e5\u5fd7\u4e0b\u8f7d \u652f\u6301\u4ee5\u5c0f\u65f6\u7c92\u5ea6\u7684\u65e5\u5fd7\u4e0b\u8f7d\uff0c\u53ef\u6536\u96c6\u8be6\u7ec6\u7684\u7ec8\u7aef\u8bbf\u95ee\u65e5\u5fd7 \u221a \u65e5\u5fd7\u5206\u6790 \u53ef\u67e5\u770b\u70ed\u95e8\u6587\u4ef6\u3001\u70ed\u95e8\u5ba2\u6237\u7aef\u3001\u70ed\u95e8\u5f15\u7528\u3001\u72b6\u6001\u7801\u7b49\u7ef4\u5ea6\u5bf9\u6587\u4ef6 URL \u8fdb\u884c\u7edf\u8ba1\u5206\u6790 \u221a \u8f85\u52a9\u5de5\u5177 IP \u68c0\u6d4b\u5de5\u5177 \u53ef\u901a\u8fc7\u8be5\u529f\u80fd\u9a8c\u8bc1 IP \u5730\u5740\u662f\u5426\u5c5e\u4e8e\u53c8\u62cd\u4e91 CDN \u8282\u70b9 \u221a \u7f51\u7edc\u8bca\u65ad\u5de5\u5177 \u68c0\u6d4b\u5f53\u524d\u7f51\u7edc\u8fde\u63a5\u60c5\u51b5\u53ca\u57fa\u672c\u4fe1\u606f\uff0c\u65b9\u4fbf\u5b9a\u4f4d\u95ee\u9898 \u221a","title":"\u4e3b\u8981\u529f\u80fd"},{"location":"cdn/product/#_4","text":"\u81ea\u52a9\u64cd\u4f5c\uff0c\u63d0\u5347\u6548\u7387 \u76f8\u5bf9\u4f20\u7edf CDN \u5382\u5546\uff0c\u53c8\u62cd\u4e91 CDN \u670d\u52a1\u5b8c\u5168\u5b9e\u73b0\u5168\u81ea\u52a9\u5316\u914d\u7f6e\uff0c\u5ba2\u6237\u53ef\u81ea\u4e3b\u8fdb\u884c\u529f\u80fd\u7684\u914d\u7f6e\uff08 \u57df\u540d\u914d\u7f6e\u3001\u56de\u6e90\u7b56\u7565\u3001\u7f13\u5b58\u89c4\u5219\u7b49 \uff09\uff0c\u6781\u5927\u63d0\u5347\u4e86\u5de5\u4f5c\u6548\u7387\u3002 \u8d44\u6e90\u4e30\u5bcc\uff0c\u5168\u7f51\u8986\u76d6 \u53c8\u62cd\u4e91 CDN \u670d\u52a1\u8282\u70b9\u8d44\u6e90\u4e30\u5bcc\uff0c\u5b9e\u73b0\u65e0\u5dee\u5f02\u7684\u7f51\u7edc\u8986\u76d6\uff0c\u5168\u8282\u70b9\u5168\u8d44\u6e90\u63d0\u4f9b\u670d\u52a1\uff0c\u771f\u6b63\u5b9e\u73b0\u5168\u7f51\u52a0\u901f\uff1b\u7f51\u7edc\u8d44\u6e90\u5b9e\u73b0\u672c\u5730\u5316\u8fd0\u8425\u5546\u8986\u76d6\uff0c\u652f\u6301\u5e26\u5bbd\u3001\u5b58\u50a8\u3001\u8282\u70b9\u7684\u5f39\u6027\u6269\u5c55\uff0c\u907f\u514d\u7a81\u53d1\u8bbf\u95ee\u6fc0\u589e\uff0c\u6253\u9020\u4e86\u76ee\u524d\u56fd\u5185\u8986\u76d6\u7387\u6700\u9ad8\u7684\u5185\u5bb9\u5206\u53d1\u7f51\u7edc\uff0c\u8ba9\u7528\u6237\u968f\u65f6\u968f\u5730\u4eab\u53d7\u4e91\u52a0\u901f\u3002 \u8282\u7ea6\u6210\u672c\uff0c\u7b80\u5316\u8fd0\u8425 \u7528\u6237\u901a\u8fc7\u53c8\u62cd\u4e91 CDN \u7684\u5206\u53d1\u52a0\u901f\uff0c\u514d\u53bb\u4e86\u81ea\u8eab\u67b6\u8bbe\u5185\u5bb9\u5206\u53d1\u7f51\u7edc\u7684\u65f6\u95f4\u53ca\u8d44\u6e90\u6295\u5165\uff0c\u66f4\u80fd\u83b7\u5f97\u975e\u5e38\u4e13\u4e1a\u7684\u8fd0\u7ef4\u4fdd\u969c\u670d\u52a1\uff0c\u7b80\u5316\u4e86\u5ba2\u6237\u7f51\u7ad9\u7684\u7cfb\u7edf\u7ef4\u62a4\uff0c\u66f4\u4fbf\u6377\u7684\u5bf9\u5168\u7f51\u8fdb\u884c\u5206\u53d1\u3002 \u5206\u6790\u6570\u636e\uff0c\u7cbe\u7ec6\u76d1\u63a7 \u53c8\u62cd\u4e91\u9488\u5bf9\u6240\u6709\u5ba2\u6237\uff0c\u5b9e\u73b0\u5168\u900f\u660e\u5316\u76d1\u63a7\uff0c\u670d\u52a1\u8d28\u91cf\u53ef\u901a\u8fc7\u53c8\u62cd\u4e91\u7ba1\u7406\u63a7\u5236\u5e73\u53f0\u4e00\u89c8\u65e0\u4f59\uff0c\u4e3a\u5ba2\u6237\u4e1a\u52a1\u6838\u5fc3\u5bfc\u5411\u63d0\u4f9b\u91cd\u8981\u4f9d\u636e\u3002 \u8fd0\u8425\u7a33\u5b9a\uff0c\u670d\u52a1\u4e13\u4e1a \u53c8\u62cd\u4e91 CDN \u4f5c\u4e3a\u7f51\u7edc\u52a0\u901f\u670d\u52a1\u5546\uff0c\u62e5\u6709\u4e30\u5bcc\u7684 CDN \u8fd0\u8425\u7ecf\u9a8c\uff0c\u6df1\u523b\u7406\u89e3\u4e92\u8054\u7f51\u57fa\u7840\u67b6\u6784\uff0c\u5e76\u63d0\u4f9b\u4e86 7*24 \u5c0f\u65f6\u65e0\u95f4\u65ad\u7684\u8fd0\u8425\u670d\u52a1\uff0c\u4fdd\u8bc1\u4efb\u4f55\u65f6\u523b\u90fd\u53ef\u4ee5\u4e3a\u5ba2\u6237\u89e3\u7591\u7b54\u60d1\u3002","title":"\u4ea7\u54c1\u4f18\u52bf"},{"location":"cdn/product/#_5","text":"\u53c8\u62cd\u4e91\u5168\u7f51\u52a0\u901f\u670d\u52a1\u5b8c\u7f8e\u878d\u5408\u4e86\u53c8\u62cd\u4e91\u5bf9\u8c61\u5b58\u50a8\u548c CDN \u670d\u52a1\uff0c\u53ef\u4ee5\u9488\u5bf9\u7f51\u9875\u56fe\u7247\u3001\u4e0b\u8f7d\u5b89\u88c5\u5305\u3001\u97f3\u89c6\u9891\u7b49\u6587\u4ef6\u63d0\u4f9b\u6570\u636e\u6258\u7ba1\u3001\u5206\u53d1\u52a0\u901f\u53ca\u5904\u7406\u4e8e\u4e00\u4f53\u7684\u4e00\u7ad9\u5f0f\u89e3\u51b3\u65b9\u6848\u3002\u4e1a\u52a1\u4f7f\u7528\u573a\u666f\u5982\u4e0b\uff1a \u7f51\u9875\u56fe\u7247\u52a0\u901f \u7f51\u9875\u53ca\u5c0f\u6587\u4ef6\u52a0\u901f\u670d\u52a1\u5e2e\u52a9\u5ba2\u6237\u63d0\u5347\u7f51\u7ad9\u7684\u7528\u6237\u8bbf\u95ee\u901f\u5ea6\u548c\u670d\u52a1\u53ef\u7528\u6027\uff0c\u901a\u8fc7\u5c06\u9700\u8981\u8bbf\u95ee\u7684\u9759\u6001\u5185\u5bb9\u5206\u53d1\u5230\u4f4d\u4e8e\u7f51\u7edc\u8fb9\u7f18\u7684\u5404\u4e2a\u7f13\u5b58\u670d\u52a1\u5668\u4e2d\uff0c\u5c06\u7528\u6237\u8bf7\u6c42\u81ea\u52a8\u5206\u914d\u5230\u8ddd\u79bb\u7528\u6237\u6700\u8fd1\u7684\u670d\u52a1\u5668\u4e0a\u3002\u5efa\u8bae\u7ed3\u5408\u53c8\u62cd\u4e91\u5bf9\u8c61\u5b58\u50a8\u670d\u52a1\uff0c\u53ef\u4ee5\u6709\u6548\u63d0\u5347\u5185\u5bb9\u52a0\u8f7d\u901f\u5ea6\uff0c\u8f7b\u677e\u641e\u5b9a\u7f51\u7ad9\u56fe\u7247\u3001\u77ed\u89c6\u9891\u7b49\u5185\u5bb9\u5206\u53d1\u3002 \u52a8\u6001\u5185\u5bb9\u52a0\u901f \u53c8\u62cd\u4e91\u52a8\u6001\u5185\u5bb9\u52a0\u901f\u878d\u5408\u5728\u5168\u7f51\u52a0\u901f\u670d\u52a1\u4e2d\uff0c\u53ef\u667a\u80fd\u5224\u65ad PHP\u3001JSP\u3001ASP \u7b49\u52a8\u6001\u8d44\u6e90\u6587\u4ef6\uff0c\u81ea\u52a8\u5b9e\u73b0\u52a8\u9759\u5206\u79bb\u3002\u901a\u8fc7\u667a\u80fd\u8def\u7531\u3001\u5185\u5bb9\u538b\u7f29\u3001\u534f\u8bae\u4f18\u5316\u7b49\u6280\u672f\u5b9e\u73b0\u52a8\u6001\u5185\u5bb9\u7684\u52a0\u901f\uff0c\u5b8c\u7f8e\u89e3\u51b3\u7535\u5546\u8d2d\u7269\u3001\u5728\u7ebf\u65c5\u6e38\u7b49\u7f51\u7ad9\u5728\u767b\u9646\u3001\u63d0\u4ea4\u8ba2\u5355\u7b49\u52a8\u6001\u8bf7\u6c42\u8bbf\u95ee\u901f\u5ea6\u6162\u7684\u95ee\u9898\uff0c\u53ef\u8fdb\u4e00\u6b65\u63d0\u9ad8\u5ba2\u6237\u4e1a\u52a1\u8f6c\u5316\u7387\u3002 \u5927\u6587\u4ef6\u4e0b\u8f7d\u52a0\u901f \u53c8\u62cd\u4e91\u5168\u7f51\u52a0\u901f\u670d\u52a1\u9488\u5bf9\u7f51\u7edc\u6e38\u620f\u3001\u8f6f\u4ef6\u4e0b\u8f7d\u7c7b\u7f51\u7ad9\u53ca\u5e94\u7528\u7b49\u5927\u6587\u4ef6\u5206\u53d1\u63d0\u4f9b\u4e86\u4e00\u7ad9\u5f0f\u89e3\u51b3\u65b9\u6848\u3002\u7531\u4e8e\u6b64\u7c7b\u7f51\u7ad9\u53ca\u5e94\u7528\u5b58\u5728\u5e26\u5bbd\u7a81\u53d1\u5e76\u4e14\u7531\u4e8e\u5927\u6587\u4ef6\u4e0b\u8f7d\u4f1a\u5bfc\u81f4\u6e90\u7ad9\u670d\u52a1\u5668\u627f\u53d7\u975e\u5e38\u5927\u7684\u538b\u529b\uff0c\u53c8\u62cd\u4e91\u4e30\u5bcc\u7684\u5e26\u5bbd\u8d44\u6e90\u5e76\u4e14\u7ed3\u5408\u53c8\u62cd\u4e91\u5bf9\u8c61\u5b58\u50a8\u670d\u52a1\uff0c\u53ef\u5b8c\u7f8e\u89e3\u51b3\u5927\u6587\u4ef6\u5e26\u5bbd\u7a81\u53d1\u5e26\u6765\u7684\u4e00\u7cfb\u5217\u95ee\u9898\u3002 \u89c6\u9891\u70b9\u64ad\u52a0\u901f \u53c8\u62cd\u4e91\u5168\u7f51\u52a0\u901f\u670d\u52a1\u878d\u5408\u4e86\u89c6\u9891\u70b9\u64ad\u52a0\u901f\u548c\u5f02\u6b65\u97f3\u89c6\u9891\u5904\u7406\u670d\u52a1\uff0c\u9488\u5bf9\u6d41\u5a92\u4f53\u70b9\u64ad\u3001\u97f3\u89c6\u9891\u7f51\u7ad9\u53ca\u5e94\u7528\uff0c\u53c8\u62cd\u4e91\u53ef\u4ee5\u63d0\u4f9b\u9ad8\u901f\u3001\u4f4e\u4ef7\u7684\u6570\u636e\u4f20\u8f93\u670d\u52a1\uff0c\u5e2e\u52a9\u5728\u7ebf\u89c6\u9891\u7f51\u7ad9\u3001\u5728\u7ebf\u6559\u80b2\u7f51\u7ad9\u7b49\u4ee5\u6d41\u5a92\u4f53\u4e3a\u4e3b\u7684\u4f01\u4e1a\u63d0\u4f9b\u7a33\u5b9a\u3001\u9ad8\u8d28\u91cf\u3001\u4f4e\u4ef7\u7684\u89c6\u9891\u5206\u53d1\u670d\u52a1\uff0c\u8ba9\u60a8\u7684\u7528\u6237\u5728\u5168\u56fd\u4efb\u4f55\u5730\u65b9\u90fd\u53ef\u4ee5\u4eab\u53d7\u5230\u4f18\u8d28\u7684\u89c6\u9891\u4f53\u9a8c\u3002 \u81ea\u5b9a\u4e49 SSL \u670d\u52a1 \u53c8\u62cd\u4e91\u81ea\u5b9a\u4e49 SSL \u52a0\u901f\u670d\u52a1\u53ef\u6ee1\u8db3\u7535\u5b50\u5546\u52a1\u3001\u5728\u7ebf\u6559\u80b2\u3001\u94f6\u884c\u4fdd\u9669\u7b49\u7f51\u7ad9\u5728 HTTPS \u52a0\u901f\u65b9\u9762\u7684\u9700\u6c42\uff0c\u5e76\u53ef\u4ee5\u5b8c\u5168\u6ee1\u8db3\u81ea\u4e3b\u5316\u914d\u7f6e\u3002SSL \u670d\u52a1\u5668\u6570\u5b57\u8bc1\u4e66\u53ef\u51ed\u501f\u9ad8\u5f3a\u5ea6\u7b7e\u540d\u7b97\u6cd5\uff0c\u7ed3\u5408\u670d\u52a1\u5668\u7aef\u7684\u52a0\u5bc6\u534f\u8bae\uff0c\u5b8c\u6210 Web \u8bbf\u95ee\u5ba2\u6237\u5230\u670d\u52a1\u5668\u95f4\u7684 HTTPS \u52a0\u5bc6\u4f20\u8f93\uff0c\u6709\u6548\u9632\u6b62 Web \u4f20\u8f93\u4e2d\u7684\u6570\u636e\u52ab\u6301\uff0c\u4e3a\u7f51\u7ad9\u8bbf\u95ee\u8005\u63d0\u4f9b\u771f\u5b9e\u3001\u6709\u6548\u3001\u5b89\u5168\u7684\u7f51\u7ad9\u5185\u5bb9\u63d0\u4f9b\u65b9\u8eab\u4efd\u4fe1\u606f\uff0c\u786e\u4fdd\u7528\u6237\u53ef\u653e\u5fc3\u7684\u6d4f\u89c8\u7f51\u7ad9\u76f8\u5173\u5185\u5bb9\u3002","title":"\u5e94\u7528\u573a\u666f"},{"location":"cdn/product/#_6","text":"\u622a\u81f3 2017 \u5e74 9 \u6708\uff0c\u53c8\u62cd\u4e91\u56fd\u5185 CDN \u8282\u70b9\u6570\u8fbe\u5230 200 \u591a\u4e2a\uff0c\u8986\u76d6 15 \u591a\u4e2a\u56fd\u5bb6\u548c\u5730\u533a\uff0c10 \u591a\u4e2a\u8fd0\u8425\u5546\uff0c\u5e26\u5bbd\u603b\u91cf\u8d85\u8fc7 3.5Tbps\u30022015 \u5e74\u5e95\uff0c\u53c8\u62cd\u4e91 CDN \u8282\u70b9\u8d44\u6e90\u5df2\u8986\u76d6\u65b0\u52a0\u5761\u3001\u53f0\u6e7e\u3001\u9999\u6e2f\u3001\u7f8e\u56fd\u3001\u5fb7\u56fd\u7b49\u6d77\u5916\u5730\u533a\uff0c\u5168\u9762\u652f\u6301\u6d77\u5916\u52a0\u901f\uff0c\u63a8\u8fdb\u5168\u7403\u5316\u5e03\u5c40\u3002 \u5982\u6709\u7591\u95ee\u8bf7 \u8054\u7cfb\u6211\u4eec","title":"\u8d44\u6e90\u5206\u5e03"},{"location":"cdn/refresh/","text":"\u524d\u9762\u7ae0\u8282\u6211\u4eec\u4ecb\u7ecd\u4e86\u7f13\u5b58\u914d\u7f6e\uff0c\u5f53 CDN \u7684\u8d44\u6e90\u6587\u4ef6\u7f13\u5b58\u8fc7\u671f\u4e4b\u540e\u4f1a\u56de\u6e90\u83b7\u53d6\u6587\u4ef6\u5e76\u7f13\u5b58\uff0c\u4f46\u662f\u8fd9\u662f\u4e00\u4e2a\u88ab\u52a8\u66f4\u65b0\u7684\u8fc7\u7a0b\uff0c\u8d44\u6e90\u66f4\u65b0\u53d7\u9650\u4e8e\u7f13\u5b58\u8fc7\u671f\u65f6\u95f4\u3002\u5f53\u6e90\u7ad9\u8d44\u6e90\u66f4\u65b0\u4e4b\u540e\u9700\u8981\u5feb\u901f\u56de\u6e90\u4e0b\u53d1\u5230 CDN \u8282\u70b9\u65f6\uff0c\u53ef\u4ee5\u4f7f\u7528\u7f13\u5b58\u5237\u65b0\u529f\u80fd\u6765\u5b9e\u73b0\uff0c\u8fd9\u662f\u4e00\u79cd\u4e3b\u52a8\u66f4\u65b0\u7684\u65b9\u5f0f\u3002 \u914d\u7f6e\u5f15\u5bfc \u767b\u5f55 CDN \u63a7\u5236\u53f0 \uff0c\u8fdb\u5165 \u5237\u65b0 \u680f\u76ee\uff0c\u60a8\u53ef\u4ee5\u9009\u62e9 URL \u5237\u65b0 \u3001 \u89c4\u5219\u5237\u65b0 \u6765\u5f3a\u5236\u56de\u6e90\u66f4\u65b0\u6587\u4ef6\u53ca\u76ee\u5f55\u3002\u60a8\u4e5f\u53ef\u4ee5\u5728 \u64cd\u4f5c\u8bb0\u5f55 \u9009\u9879\u67e5\u8be2\u5237\u65b0\u8fdb\u5ea6\u53ca\u76f8\u5173\u72b6\u6001\u3002 URL \u5237\u65b0 \u00b6 \u5f53\u6e90\u7ad9\u6709\u5c11\u91cf\u6587\u4ef6\u66f4\u65b0\u65f6\uff0c\u53ef\u4ee5\u4f7f\u7528 URL \u5237\u65b0 \u6765\u4e3b\u52a8\u5220\u9664 CDN \u8282\u70b9\u4e0a\u7684\u8d44\u6e90\u6587\u4ef6\u3002\u65b0\u7684\u8bf7\u6c42\u8fdb\u6765\u65f6\uff0cCDN \u8282\u70b9\u4f1a\u56de\u6e90\u83b7\u53d6\u6587\u4ef6\u5e76\u5c06\u65b0\u7684\u8d44\u6e90\u6587\u4ef6\u7f13\u5b58\u81f3 CDN \u8282\u70b9\uff0c\u6240\u4ee5\u8fd9\u662f\u4e00\u4e2a\u4e3b\u52a8\u66f4\u65b0\u7684\u8fc7\u7a0b\u3002\u64cd\u4f5c\u754c\u9762\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u6ce8\u610f\u4e8b\u9879\uff1a 1.\u6bcf\u884c\u4e00\u4e2aURL\u5730\u5740\uff0c\u6bcf\u4e2a URL \u5730\u5740\u4ee5 http://\u6216https://\u5f00\u5934\uff0c\u4f8b\u5982\uff1a http://example.com/image/test.jpg 2.\u6bcf\u6b21\u8f93\u5165\u4e0d\u8d85\u8fc7 50 \u4e2a\uff0c\u5237\u65b0\u4efb\u52a1\u5168\u7f51\u751f\u6548\u65f6\u95f4\u5927\u7ea6 5 \u5230 10 \u5206\u949f \u89c4\u5219\u5237\u65b0 \u00b6 \u5f53\u6e90\u7ad9\u6709\u9488\u5bf9\u8d44\u6e90\u8fdb\u884c\u6279\u91cf\u66f4\u65b0\u65f6\uff0c\u53ef\u4ee5\u901a\u8fc7 \u89c4\u5219\u5237\u65b0 \u6765\u5237\u65b0\u8282\u70b9\u7f13\u5b58\u6587\u4ef6\u3002\u5b9e\u9645\u4e0a\uff0c\u89c4\u5219\u5237\u65b0\u5e76\u6ca1\u6709\u5220\u9664\u8282\u70b9\u8d44\u6e90\u6587\u4ef6\uff0c\u89c4\u5219\u4e00\u65e6\u751f\u6548\u4e4b\u540e\uff0c\u7f13\u5b58\u5728 CDN \u8282\u70b9\u7684\u6587\u4ef6\u4f1a\u88ab\u81f4\u8fc7\u671f\uff0c\u65b0\u7684\u8bf7\u6c42\u4f1a\u56de\u6e90\u6821\u9a8c\u4e00\u6b21\uff0c\u5982\u679c\u6e90\u7ad9\u6587\u4ef6\u6709\u66f4\u65b0\uff0c\u5219\u5c06\u65b0\u7684\u6587\u4ef6\u54cd\u5e94\u7ed9\u6700\u7ec8\u7528\u6237\u5e76\u66ff\u6362\u8282\u70b9\u4e0a\u7684\u65e7\u6587\u4ef6\u3002\u64cd\u4f5c\u754c\u9762\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u89c4\u5219\u793a\u4f8b\uff1a http://example.com/image/* http://example.com/image/*.jpg http://example.com/image/*!upyun\uff08 \u9002\u7528\u4e8e\u81ea\u5b9a\u4e49\u7f29\u7565\u56fe\u7248\u672c \uff09 \u6ce8\u610f\u4e8b\u9879\uff1a 1.\u6bcf\u884c\u4e00\u4e2a\u8def\u5f84\u89c4\u5219\uff0c\u6bcf\u4e2a\u8def\u5f84\u89c4\u5219\u4ee5 http:// \u6216 https:// \u5f00\u5934\uff0c\u6bcf\u6b21\u8f93\u5165\u4e0d\u8d85\u8fc7 10 \u4e2a\uff0c\u4f8b\u5982\uff1a http://example.com/image/\uff0a 2.\u89c4\u5219\u5237\u65b0\u4e3b\u8981\u7528\u4e8e\u5bf9\u4f7f\u7528\u5ba2\u6237\u81ea\u4e3b\u6e90\u7ad9\u7684 CDN \u670d\u52a1\uff0c\u6267\u884c\u540e\u4f1a\u5728 10 \u5206\u949f\u5185\u751f\u6548 \u7279\u522b\u58f0\u660e\uff1a 1.\u5982\u60a8\u4f7f\u7528\u4e86\u53c8\u62cd\u4e91\u5bf9\u8c61\u5b58\u50a8\u670d\u52a1\u65f6\uff0c\u5982\u679c\u60a8\u901a\u8fc7 \u89c4\u5219\u5237\u65b0 \u6765\u5237\u65b0\u7f13\u5b58\u7684\u8bdd\uff0c\u57fa\u4e8e\u5e73\u53f0\u4fdd\u62a4\uff0c \u89c4\u5219\u5237\u65b0 \u751f\u6548\u65f6\u95f4\u662f 1 \u4e2a\u5c0f\u65f6\uff0c\u8bf7\u8c28\u614e\u64cd\u4f5c 2.\u7279\u522b\u5730\uff0c\u4f7f\u7528\u4e86\u53c8\u62cd\u4e91\u5bf9\u8c61\u5b58\u50a8\u670d\u52a1\u65f6\uff0c\u5b58\u50a8\u4e2d\u8d44\u6e90\u66f4\u65b0\uff08\u66ff\u6362\u6216\u5220\u9664\uff09\u65f6\u4f1a\u81ea\u52a8\u89e6\u53d1 CDN \u8282\u70b9\u5237\u65b0\u7f13\u5b58\uff0c\u4f1a\u5728 5 \u5206\u949f\u5185\u751f\u6548\uff0c\u6240\u4ee5\u60a8\u65e0\u9700\u8fdb\u884c\u624b\u52a8\u5237\u65b0\u64cd\u4f5c URL \u9884\u70ed \u00b6 \u5f53\u6e90\u7ad9\u6709\u65b0\u589e\u65b0\u7684\u8d44\u6e90\u6587\u4ef6\u65f6\uff0c\u53ef\u5c06\u8fd9\u4e9b\u65b0\u6587\u4ef6\u63d0\u524d\u7f13\u5b58\u81f3 CDN \u8282\u70b9\uff0c\u6700\u7ec8\u7528\u6237\u7b2c\u4e00\u6b21\u8bbf\u95ee\u8fd9\u4e9b\u8d44\u6e90\u6587\u4ef6\u65f6\uff0c CDN \u8282\u70b9\u4e0d\u9700\u8981\u56de\u6e90\u7ad9\u8bf7\u6c42\u6587\u4ef6\u8d44\u6e90\u4e86\u3002\u4e00\u65b9\u9762\u53ef\u51cf\u5c11\u7528\u6237\u7a81\u53d1\u8bbf\u95ee\u65f6\u7684\u56de\u6e90\u91cf\uff0c\u53e6\u4e00\u65b9\u9762\u53ef\u4ee5\u52a0\u5feb\u8d44\u6e90\u6587\u4ef6\u7684\u9996\u6b21\u8bbf\u95ee\u901f\u5ea6\u3002\u64cd\u4f5c\u754c\u9762\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u6ce8\u610f\u4e8b\u9879\uff1a\u5efa\u8bae\u4e0d\u8981\u540c\u65f6\u9884\u70ed\u592a\u591a\u8d44\u6e90\u6587\u4ef6\uff0c\u5426\u5219\u4f1a\u5bf9\u6e90\u7ad9\u9020\u6210\u56de\u6e90\u538b\u529b \u64cd\u4f5c\u8bb0\u5f55 \u00b6 \u8fdb\u884c URL \u5237\u65b0 \u3001 \u89c4\u5219\u5237\u65b0 \u3001 URL \u9884\u70ed \u64cd\u4f5c\u4e4b\u540e\uff0c\u754c\u9762\u7a97\u53e3\u4f1a\u7acb\u9a6c\u8df3\u81f3\u64cd\u4f5c\u8bb0\u5f55\u754c\u9762\uff0c\u60a8\u53ef\u4ee5\u5b9e\u65f6\u67e5\u770b\u5f53\u524d\u64cd\u4f5c\u7684\u8fdb\u5ea6\u53cd\u9988\u53ca\u76f8\u5173\u72b6\u6001\u3002\u60a8\u4e5f\u53ef\u4ee5\u67e5\u770b\u5386\u53f2\u64cd\u4f5c\u8bb0\u5f55\uff0c\u6211\u4eec\u9ed8\u8ba4\u4fdd\u7559\u4e86 3 \u5929\u7684\u6570\u636e\u3002 \u5982\u6709\u7591\u95ee\u8bf7 \u8054\u7cfb\u6211\u4eec","title":"\u5237\u65b0\u9884\u70ed"},{"location":"cdn/refresh/#url","text":"\u5f53\u6e90\u7ad9\u6709\u5c11\u91cf\u6587\u4ef6\u66f4\u65b0\u65f6\uff0c\u53ef\u4ee5\u4f7f\u7528 URL \u5237\u65b0 \u6765\u4e3b\u52a8\u5220\u9664 CDN \u8282\u70b9\u4e0a\u7684\u8d44\u6e90\u6587\u4ef6\u3002\u65b0\u7684\u8bf7\u6c42\u8fdb\u6765\u65f6\uff0cCDN \u8282\u70b9\u4f1a\u56de\u6e90\u83b7\u53d6\u6587\u4ef6\u5e76\u5c06\u65b0\u7684\u8d44\u6e90\u6587\u4ef6\u7f13\u5b58\u81f3 CDN \u8282\u70b9\uff0c\u6240\u4ee5\u8fd9\u662f\u4e00\u4e2a\u4e3b\u52a8\u66f4\u65b0\u7684\u8fc7\u7a0b\u3002\u64cd\u4f5c\u754c\u9762\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u6ce8\u610f\u4e8b\u9879\uff1a 1.\u6bcf\u884c\u4e00\u4e2aURL\u5730\u5740\uff0c\u6bcf\u4e2a URL \u5730\u5740\u4ee5 http://\u6216https://\u5f00\u5934\uff0c\u4f8b\u5982\uff1a http://example.com/image/test.jpg 2.\u6bcf\u6b21\u8f93\u5165\u4e0d\u8d85\u8fc7 50 \u4e2a\uff0c\u5237\u65b0\u4efb\u52a1\u5168\u7f51\u751f\u6548\u65f6\u95f4\u5927\u7ea6 5 \u5230 10 \u5206\u949f","title":"URL \u5237\u65b0"},{"location":"cdn/refresh/#_1","text":"\u5f53\u6e90\u7ad9\u6709\u9488\u5bf9\u8d44\u6e90\u8fdb\u884c\u6279\u91cf\u66f4\u65b0\u65f6\uff0c\u53ef\u4ee5\u901a\u8fc7 \u89c4\u5219\u5237\u65b0 \u6765\u5237\u65b0\u8282\u70b9\u7f13\u5b58\u6587\u4ef6\u3002\u5b9e\u9645\u4e0a\uff0c\u89c4\u5219\u5237\u65b0\u5e76\u6ca1\u6709\u5220\u9664\u8282\u70b9\u8d44\u6e90\u6587\u4ef6\uff0c\u89c4\u5219\u4e00\u65e6\u751f\u6548\u4e4b\u540e\uff0c\u7f13\u5b58\u5728 CDN \u8282\u70b9\u7684\u6587\u4ef6\u4f1a\u88ab\u81f4\u8fc7\u671f\uff0c\u65b0\u7684\u8bf7\u6c42\u4f1a\u56de\u6e90\u6821\u9a8c\u4e00\u6b21\uff0c\u5982\u679c\u6e90\u7ad9\u6587\u4ef6\u6709\u66f4\u65b0\uff0c\u5219\u5c06\u65b0\u7684\u6587\u4ef6\u54cd\u5e94\u7ed9\u6700\u7ec8\u7528\u6237\u5e76\u66ff\u6362\u8282\u70b9\u4e0a\u7684\u65e7\u6587\u4ef6\u3002\u64cd\u4f5c\u754c\u9762\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u89c4\u5219\u793a\u4f8b\uff1a http://example.com/image/* http://example.com/image/*.jpg http://example.com/image/*!upyun\uff08 \u9002\u7528\u4e8e\u81ea\u5b9a\u4e49\u7f29\u7565\u56fe\u7248\u672c \uff09 \u6ce8\u610f\u4e8b\u9879\uff1a 1.\u6bcf\u884c\u4e00\u4e2a\u8def\u5f84\u89c4\u5219\uff0c\u6bcf\u4e2a\u8def\u5f84\u89c4\u5219\u4ee5 http:// \u6216 https:// \u5f00\u5934\uff0c\u6bcf\u6b21\u8f93\u5165\u4e0d\u8d85\u8fc7 10 \u4e2a\uff0c\u4f8b\u5982\uff1a http://example.com/image/\uff0a 2.\u89c4\u5219\u5237\u65b0\u4e3b\u8981\u7528\u4e8e\u5bf9\u4f7f\u7528\u5ba2\u6237\u81ea\u4e3b\u6e90\u7ad9\u7684 CDN \u670d\u52a1\uff0c\u6267\u884c\u540e\u4f1a\u5728 10 \u5206\u949f\u5185\u751f\u6548 \u7279\u522b\u58f0\u660e\uff1a 1.\u5982\u60a8\u4f7f\u7528\u4e86\u53c8\u62cd\u4e91\u5bf9\u8c61\u5b58\u50a8\u670d\u52a1\u65f6\uff0c\u5982\u679c\u60a8\u901a\u8fc7 \u89c4\u5219\u5237\u65b0 \u6765\u5237\u65b0\u7f13\u5b58\u7684\u8bdd\uff0c\u57fa\u4e8e\u5e73\u53f0\u4fdd\u62a4\uff0c \u89c4\u5219\u5237\u65b0 \u751f\u6548\u65f6\u95f4\u662f 1 \u4e2a\u5c0f\u65f6\uff0c\u8bf7\u8c28\u614e\u64cd\u4f5c 2.\u7279\u522b\u5730\uff0c\u4f7f\u7528\u4e86\u53c8\u62cd\u4e91\u5bf9\u8c61\u5b58\u50a8\u670d\u52a1\u65f6\uff0c\u5b58\u50a8\u4e2d\u8d44\u6e90\u66f4\u65b0\uff08\u66ff\u6362\u6216\u5220\u9664\uff09\u65f6\u4f1a\u81ea\u52a8\u89e6\u53d1 CDN \u8282\u70b9\u5237\u65b0\u7f13\u5b58\uff0c\u4f1a\u5728 5 \u5206\u949f\u5185\u751f\u6548\uff0c\u6240\u4ee5\u60a8\u65e0\u9700\u8fdb\u884c\u624b\u52a8\u5237\u65b0\u64cd\u4f5c","title":"\u89c4\u5219\u5237\u65b0"},{"location":"cdn/refresh/#url_1","text":"\u5f53\u6e90\u7ad9\u6709\u65b0\u589e\u65b0\u7684\u8d44\u6e90\u6587\u4ef6\u65f6\uff0c\u53ef\u5c06\u8fd9\u4e9b\u65b0\u6587\u4ef6\u63d0\u524d\u7f13\u5b58\u81f3 CDN \u8282\u70b9\uff0c\u6700\u7ec8\u7528\u6237\u7b2c\u4e00\u6b21\u8bbf\u95ee\u8fd9\u4e9b\u8d44\u6e90\u6587\u4ef6\u65f6\uff0c CDN \u8282\u70b9\u4e0d\u9700\u8981\u56de\u6e90\u7ad9\u8bf7\u6c42\u6587\u4ef6\u8d44\u6e90\u4e86\u3002\u4e00\u65b9\u9762\u53ef\u51cf\u5c11\u7528\u6237\u7a81\u53d1\u8bbf\u95ee\u65f6\u7684\u56de\u6e90\u91cf\uff0c\u53e6\u4e00\u65b9\u9762\u53ef\u4ee5\u52a0\u5feb\u8d44\u6e90\u6587\u4ef6\u7684\u9996\u6b21\u8bbf\u95ee\u901f\u5ea6\u3002\u64cd\u4f5c\u754c\u9762\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u6ce8\u610f\u4e8b\u9879\uff1a\u5efa\u8bae\u4e0d\u8981\u540c\u65f6\u9884\u70ed\u592a\u591a\u8d44\u6e90\u6587\u4ef6\uff0c\u5426\u5219\u4f1a\u5bf9\u6e90\u7ad9\u9020\u6210\u56de\u6e90\u538b\u529b","title":"URL \u9884\u70ed"},{"location":"cdn/refresh/#_2","text":"\u8fdb\u884c URL \u5237\u65b0 \u3001 \u89c4\u5219\u5237\u65b0 \u3001 URL \u9884\u70ed \u64cd\u4f5c\u4e4b\u540e\uff0c\u754c\u9762\u7a97\u53e3\u4f1a\u7acb\u9a6c\u8df3\u81f3\u64cd\u4f5c\u8bb0\u5f55\u754c\u9762\uff0c\u60a8\u53ef\u4ee5\u5b9e\u65f6\u67e5\u770b\u5f53\u524d\u64cd\u4f5c\u7684\u8fdb\u5ea6\u53cd\u9988\u53ca\u76f8\u5173\u72b6\u6001\u3002\u60a8\u4e5f\u53ef\u4ee5\u67e5\u770b\u5386\u53f2\u64cd\u4f5c\u8bb0\u5f55\uff0c\u6211\u4eec\u9ed8\u8ba4\u4fdd\u7559\u4e86 3 \u5929\u7684\u6570\u636e\u3002 \u5982\u6709\u7591\u95ee\u8bf7 \u8054\u7cfb\u6211\u4eec","title":"\u64cd\u4f5c\u8bb0\u5f55"},{"location":"cdn/service/","text":"\u57df\u540d\u63a5\u5165\uff08\u81ea\u6709\u6e90) \u00b6 \u5982\u679c\u60a8\u7684\u7f51\u7ad9\u6216\u5e94\u7528\u4f7f\u7528\u7684\u662f\u81ea\u6709\u6e90\u7ad9\u6216\u8005\u7b2c\u4e09\u65b9\u5b58\u50a8\u6e90\uff0c\u60a8\u53ef\u4ee5\u901a\u8fc7\u81ea\u4e3b\u6e90\u7684\u65b9\u5f0f\u63a5\u5165 CDN \u670d\u52a1\u3002\u6b64\u65f6\u60a8\u7684\u6e90\u7ad9\u65e0\u9700\u505a\u4efb\u4f55\u6539\u52a8\uff0c\u53ea\u9700\u8981\u8d70\u5b8c\u4e0b\u9762\u7684\u914d\u7f6e\u6d41\u7a0b\u5e76\u5728 DNS \u89e3\u6790\u5546\u5904\u4fee\u6539 CNAME \u8bb0\u5f55\u5373\u53ef\u4eab\u53d7 CDN \u670d\u52a1\uff0c\u5177\u4f53\u64cd\u4f5c\u53c2\u89c1\u5982\u4e0b\u6b65\u9aa4\uff1a \u7b2c\u4e00\u6b65\uff1a\u521b\u5efa\u670d\u52a1 \u00b6 \u767b\u9646 CDN \u63a7\u5236\u53f0 \uff0c\u8fdb\u5165 \u300cCDN \u670d\u52a1\u300d\uff0c\u70b9\u51fb \u300c\u521b\u5efa\u670d\u52a1\u300d\u3002 \u7b2c\u4e8c\u6b65\uff1a\u57fa\u672c\u914d\u7f6e \u00b6 \u8be5\u6b65\u9aa4\u5305\u62ec\u670d\u52a1\u540d\u79f0\u3001\u52a0\u901f\u57df\u540d\u3001\u5e94\u7528\u573a\u666f\u7b49\u9009\u9879\u7684\u914d\u7f6e\uff0c\u4e3a\u5fc5\u9009\u9879\uff0c\u8be6\u7ec6\u914d\u7f6e\u53c2\u89c1\u5982\u4e0b\u622a\u56fe\u6240\u793a\uff1a 1.\u670d\u52a1\u540d\u79f0\uff1a\u552f\u4e00\u6807\u8bc6\u670d\u52a1\uff0c\u4f8b\u5982\uff1aimage-upyun-com\uff0c\u4e00\u4e2a\u670d\u52a1\u4e0b\u9762\u53ef\u4ee5\u7ed1\u5b9a\u591a\u4e2a\u81ea\u6709\u57df\u540d\uff0c\u547d\u540d\u8981\u6c42\u5982\u4e0b\uff1a \u670d\u52a1\u540d\u79f0\u4ec5\u9650 5\uff5e20 \u4f4d\uff1b \u5fc5\u987b\u4ee5\u5c0f\u5199\u82f1\u6587\u5b57\u7b26\u5f00\u5934\uff0c\u4ec5\u652f\u6301\u5c0f\u5199\u82f1\u6587\u5b57\u7b26\u3001\u6570\u5b57\u3001\u4e2d\u5212\u7ebf\u7ec4\u5408\u3002 2.\u52a0\u901f\u57df\u540d\uff1a\u586b\u5199\u6b64\u6b21\u9700\u8981\u914d\u7f6e\u7684\u52a0\u901f\u57df\u540d\u3002\u5177\u4f53\u8981\u6c42\u5982\u4e0b\uff1a \u52a0\u901f\u57df\u540d\u5df2\u5728\u5de5\u4fe1\u90e8\u5907\u6848\uff1b \u5f85\u52a0\u901f\u57df\u540d\u5c1a\u672a\u5728\u53c8\u62cd\u4e91 CDN \u5e73\u53f0\u914d\u7f6e\u3002 3.\u5e94\u7528\u573a\u666f\uff1a\u53ef\u9009\u9879\u5305\u62ec\u7f51\u9875\u56fe\u7247\u3001\u6587\u4ef6\u4e0b\u8f7d\u3001\u97f3\u89c6\u9891\u70b9\u64ad\u3001\u52a8\u6001\u5185\u5bb9\u3001\u5168\u7ad9\u52a0\u901f\uff0c\u9610\u8ff0\u5982\u4e0b\uff1a \u7f51\u9875\u56fe\u7247\uff1a\u9002\u7528\u4e8e\u7535\u5546\u7c7b\u3001\u7f51\u7ad9\u7c7b\u3001\u6e38\u620f\u56fe\u7247\u7c7b\u9759\u6001\u5c0f\u6587\u4ef6\u7b49\u4e1a\u52a1\u3002 \u6587\u4ef6\u4e0b\u8f7d\uff1a\u9002\u7528\u4e8e\u6e38\u620f\u5b89\u88c5\u5305\u3001\u97f3\u89c6\u9891\u539f\u6587\u4ef6\u4e0b\u8f7d\u3001\u624b\u673a\u56fa\u4ef6\u5206\u53d1\u7b49\u4e1a\u52a1\u3002 \u97f3\u89c6\u9891\u70b9\u64ad\uff1a\u9002\u5408\u97f3\u3001\u89c6\u9891\u6587\u4ef6\u8f83\u591a\u7684\u5728\u7ebf\u70b9\u64ad\u4e1a\u52a1\u3002 \u52a8\u6001\u5185\u5bb9\uff1a\u9002\u5408 PHP\u3001JSP\u3001ASP \u7b49\u52a8\u6001\u7c7b\u8d44\u6e90\u8f83\u591a\u7684\u4e1a\u52a1\u3002 \u5168\u7ad9\u52a0\u901f\uff1a\u9002\u5408\u52a8\u3001\u9759\u6001\u5185\u5bb9\u672a\u505a\u660e\u786e\u533a\u5206\u7684\u4e1a\u52a1\uff0c\u53c8\u62cd\u4e91\u81ea\u52a8\u5b9e\u73b0\u52a8\u9759\u5206\u79bb\u3002 \u7b2c\u4e09\u6b65\uff1a\u56de\u6e90\u914d\u7f6e \u00b6 \u9700\u8981\u8fdb\u884c\u56de\u6e90\u534f\u8bae\u3001\u56de\u6e90\u7ebf\u8def\u7684\u914d\u7f6e\uff0c\u66f4\u591a\u914d\u7f6e\u4ecb\u7ecd\u8bf7\u53c2\u89c1 \u56de\u6e90\u914d\u7f6e \u3002\u914d\u7f6e\u754c\u9762\u5982\u4e0b\u56fe\u6240\u793a\uff1a 1.\u56de\u6e90\u534f\u8bae\uff1a\u5bf9\u56de\u6e90\u534f\u8bae\u8fdb\u884c\u914d\u7f6e\uff0c\u9ed8\u8ba4\u4e3a HTTP\uff0c\u914d\u7f6e\u9009\u9879\u5305\u62ec HTTP\u3001HTTPS\u3001\u534f\u8bae\u8ddf\u968f\u3002 2.\u7ebf\u8def\u914d\u7f6e\uff1a\u6b64\u5904\u5305\u62ec\u56de\u6e90\u5730\u5740\u3001\u56de\u6e90\u7aef\u53e3\u53f7\u7684\u8bbe\u7f6e\uff0c\u66f4\u591a\u8bbe\u7f6e\u8bf7\u53c2\u89c1 \u7ebf\u8def\u914d\u7f6e \u3002 \u7b2c\u56db\u6b65\uff1a\u72b6\u6001\u786e\u8ba4 \u00b6 \u670d\u52a1\u521b\u5efa\u6210\u529f\u540e\uff0c\u64cd\u4f5c\u754c\u9762\u4f1a\u63d0\u793a CDN \u52a0\u901f\u670d\u52a1\u521b\u5efa\u6210\u529f\uff0c\u5e76\u4f1a\u81ea\u52a8\u8df3\u8f6c\u5230\u8be5\u670d\u52a1\u7684\u3010\u529f\u80fd\u914d\u7f6e\u3011\u754c\u9762\uff0c\u5982\u56fe\u6240\u793a\uff1a \u5728\u529f\u80fd\u914d\u7f6e\u754c\u9762\uff0c\u6709\u57df\u540d\u7ba1\u7406\u3001\u56de\u6e90\u7ba1\u7406\u3001\u7f13\u5b58\u914d\u7f6e\u3001\u6027\u80fd\u4f18\u5316\u3001HTTPS\u3001\u8bbf\u95ee\u63a7\u5236\u3001\u56fe\u7247\u5904\u7406\u7b49\u529f\u80fd\u914d\u7f6e\u6a21\u5757\uff0c\u5728\u3010\u57df\u540d\u7ba1\u7406\u3011\u6a21\u5757\u4e0b\uff0c\u60a8\u53ef\u4ee5\u9488\u5bf9\u8be5\u670d\u52a1\u7ed1\u5b9a\u591a\u4e2a\u81ea\u6709\u57df\u540d\uff0c\u8bf7\u8010\u5fc3\u7b49\u5f85\u57df\u540d\u914d\u7f6e\uff08\u7ea6 10 \u5206\u949f\uff09\uff0c\u67e5\u770b\u57df\u540d\u5bf9\u5e94\u7684\u72b6\u6001\u662f\u5426\u4e3a\uff3b\u6b63\u5e38\uff3d\uff0c\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u7279\u522b\u5730\uff0c\u53c8\u62cd\u4e91\u4e3a\u6bcf\u4e00\u4e2a CDN \u670d\u52a1\u63d0\u4f9b\u4e86\u6d4b\u8bd5\u57df\u540d\uff0c\u6d4b\u8bd5\u57df\u540d\u683c\u5f0f\u4e3a\uff1a\u670d\u52a1\u540d\u79f0.test.upcdn.net\uff0c\u6b64\u6d4b\u8bd5\u57df\u540d\u4ec5\u4f9b\u6d4b\u8bd5\u4f7f\u7528\uff0c\u6b63\u5f0f\u4e1a\u52a1\u73af\u5883\u8bf7\u7ed1\u5b9a\u81ea\u6709\u57df\u540d\u3002 \u7b2c\u4e94\u6b65\uff1aCNAME \u914d\u7f6e \u00b6 \u5728\u4e0a\u4e00\u4e2a\u6b65\u9aa4\u4e2d\uff0c\u60a8\u53ef\u67e5\u770b CDN \u5e73\u53f0\u4e3a\u60a8\u5206\u914d\u7684 CNAME \u5730\u5740\uff0c\u6b64\u65f6\u9700\u8981\u53bb\u57df\u540d DNS \u89e3\u6790\u5546\u5904\uff0c\u4e3a\u8be5\u57df\u540d\u6dfb\u52a0\u4e00\u6761 CNAME \u8bb0\u5f55\uff0c\u5f85 CNAME \u914d\u7f6e\u751f\u6548\u4e4b\u540e\uff0c\u65b9\u53ef\u4eab\u53d7 CDN \u670d\u52a1\uff0c\u5177\u4f53\u914d\u7f6e\u8be6\u89c1 CNAME \u89e3\u6790 \u3002\u83b7\u53d6 CNAME \u5730\u5740\u7684\u5165\u53e3\u6709\uff1a 1.\u5728\u3010\u670d\u52a1\u7ba1\u7406\u3011\u754c\u9762\uff0c\u5c06\u9f20\u6807\u653e\u7f6e\u3010\u670d\u52a1\u540d\u79f0\u3011\u663e\u793a\u533a\u57df\u5373\u53ef\u663e\u793a CNAME \u5730\u5740\uff0c\u53ef\u76f4\u63a5\u590d\u5236\uff0c\u5982\u622a\u56fe\u6240\u793a\uff1a 2.\u5728\u3010\u529f\u80fd\u914d\u7f6e\u3011\u754c\u9762\uff0c\u9009\u62e9\u300c\u57df\u540d\u7ba1\u7406\u300d\u6a21\u5757\uff0c\u76f8\u5e94\u533a\u57df\u53ef\u67e5\u770b CNAME \u5730\u5740\uff0c\u5982\u56fe\u6240\u793a\uff1a \u57df\u540d\u63a5\u5165\uff08\u53c8\u62cd\u5b58\u50a8\u6e90\uff09 \u00b6 \u5982\u679c\u60a8\u56e0\u4e3a\u81ea\u4e3b\u6e90\u538b\u529b\u8f83\u5927\uff0c\u60a8\u4e5f\u53ef\u4ee5\u5c06\u975e\u7ed3\u6784\u5316\u6570\u636e\u6258\u7ba1\u5728\u53c8\u62cd\u4e91\u5bf9\u8c61\u5b58\u50a8\u670d\u52a1\u4e0a\u9762\uff0c\u4f7f\u7528\u53c8\u62cd\u4e91\u5b58\u50a8\u6e90\uff0c\u66f4\u591a\u4e86\u89e3\u8bf7\u70b9\u51fb \u5bf9\u8c61\u5b58\u50a8\u670d\u52a1 \u3002\u5177\u4f53\u64cd\u4f5c\u53c2\u89c1\u5982\u4e0b\u6b65\u9aa4\uff1a \u7b2c\u4e00\u6b65\uff1a\u521b\u5efa\u670d\u52a1 \u00b6 \u767b\u9646 CDN \u63a7\u5236\u53f0 \uff0c\u8fdb\u5165\u300c\u4e91\u5b58\u50a8\u300d\u670d\u52a1\uff0c\u70b9\u51fb \u300c\u521b\u5efa\u670d\u52a1\u300d\uff0c\u5982\u4e0b\u622a\u56fe\u6240\u793a\uff1a \u7b2c\u4e8c\u6b65\uff1a\u57fa\u672c\u914d\u7f6e \u00b6 \u521b\u5efa\u4e00\u4e2a\u5b58\u50a8\u670d\u52a1\uff0c\u9996\u5148\u9700\u8981\u914d\u7f6e\u4e00\u4e2a\u670d\u52a1\u540d\u79f0\uff0c\u53e6\u5916\u5c31\u662f\u9009\u62e9\u4e00\u4e2a\u5e94\u7528\u573a\u666f\uff0c\u8be6\u7ec6\u914d\u7f6e\u53c2\u89c1\u5982\u4e0b\u622a\u56fe\u6240\u793a\uff1a 1.\u670d\u52a1\u540d\u79f0\uff1a\u552f\u4e00\u6807\u8bc6\u670d\u52a1\uff0c\u4f8b\u5982\uff1avideo-upyun-com\uff0c\u4e00\u4e2a\u670d\u52a1\u4e0b\u9762\u53ef\u4ee5\u7ed1\u5b9a\u591a\u4e2a\u57df\u540d\u3002\u547d\u540d\u8981\u6c42\u5982\u4e0b\uff1a \u670d\u52a1\u540d\u79f0\u4ec5\u9650 5\uff5e20 \u4f4d\uff1b \u5fc5\u987b\u4ee5\u5c0f\u5199\u82f1\u6587\u5b57\u7b26\u5f00\u5934\uff0c\u4ec5\u652f\u6301\u5c0f\u5199\u82f1\u6587\u5b57\u7b26\u3001\u6570\u5b57\u3001\u4e2d\u5212\u7ebf\u7ec4\u5408\u3002 2.\u5e94\u7528\u573a\u666f\uff1a\u53ef\u9009\u9879\u5305\u62ec\u7f51\u9875\u56fe\u7247\u3001\u6587\u4ef6\u4e0b\u8f7d\u3001\u97f3\u89c6\u9891\u70b9\u64ad\uff0c\u9610\u8ff0\u5982\u4e0b\uff1a \u7f51\u9875\u56fe\u7247\uff1a\u9002\u7528\u4e8e\u7535\u5546\u7c7b\u3001\u7f51\u7ad9\u7c7b\u3001\u6e38\u620f\u56fe\u7247\u7c7b\u9759\u6001\u5c0f\u6587\u4ef6\u7b49\u4e1a\u52a1\u3002 \u6587\u4ef6\u4e0b\u8f7d\uff1a\u9002\u7528\u4e8e\u6e38\u620f\u5b89\u88c5\u5305\u3001\u97f3\u89c6\u9891\u539f\u6587\u4ef6\u4e0b\u8f7d\u3001\u624b\u673a\u56fa\u4ef6\u5206\u53d1\u7b49\u4e1a\u52a1\u3002 \u97f3\u89c6\u9891\u70b9\u64ad\uff1a\u9002\u5408\u97f3\u3001\u89c6\u9891\u6587\u4ef6\u8f83\u591a\u7684\u5728\u7ebf\u70b9\u64ad\u4e1a\u52a1\u3002 \u7b2c\u4e09\u6b65\uff1a\u521b\u5efa\u64cd\u4f5c\u5458 \u00b6 \u9488\u5bf9\u4f7f\u7528\u53c8\u62cd\u4e91\u5bf9\u8c61\u5b58\u50a8\u4f5c\u4e3a\u6e90\u7684 CDN \u670d\u52a1\uff0c\u9700\u8981\u521b\u5efa\u64cd\u4f5c\u5458\u6765\u7ba1\u7406\u5b58\u50a8\u5728\u53c8\u62cd\u5bf9\u8c61\u5b58\u50a8\u670d\u52a1\u4e0a\u9762\u7684\u975e\u7ed3\u6784\u5316\u6570\u636e\uff0c\u8be6\u7ec6\u4ecb\u7ecd\u8bf7\u70b9\u51fb \u64cd\u4f5c\u5458 \uff0c\u5177\u4f53\u914d\u7f6e\u754c\u9762\u5982\u4e0b\u622a\u56fe\u6240\u793a\uff1a \u5173\u4e8e\u5982\u4f55\u4f7f\u7528\u64cd\u4f5c\u5458\u7ba1\u7406\u5b58\u50a8\u4e0a\u7684\u975e\u7ed3\u6784\u5316\u6570\u636e\uff0c\u8be6\u60c5\u53c2\u7167 \u5bf9\u8c61\u5b58\u50a8\u5f00\u53d1\u8005\u5de5\u5177 \u3002 \u7b2c\u56db\u6b65\uff1a\u72b6\u6001\u786e\u8ba4 \u00b6 \u670d\u52a1\u521b\u5efa\u6210\u529f\u540e\uff0c\u64cd\u4f5c\u754c\u9762\u4f1a\u63d0\u793a\u4e91\u5b58\u50a8\u670d\u52a1\u914d\u7f6e\u6210\u529f\uff0c\u5e76\u4f1a\u81ea\u52a8\u8df3\u8f6c\u5230\u8be5\u670d\u52a1\u7684\u529f\u80fd\u914d\u7f6e\u754c\u9762\uff0c\u5982\u56fe\u6240\u793a\uff1a \u5728\u529f\u80fd\u914d\u7f6e\u754c\u9762\uff0c\u6709\u57df\u540d\u7ba1\u7406\u3001\u5185\u5bb9\u7ba1\u7406\u3001\u7f13\u5b58\u914d\u7f6e\u3001\u6027\u80fd\u4f18\u5316\u3001HTTPS\u3001\u8bbf\u95ee\u63a7\u5236\u3001\u56fe\u7247\u5904\u7406\u7b49\u529f\u80fd\u914d\u7f6e\u6a21\u5757\uff0c\u5728\u3010\u57df\u540d\u7ba1\u7406\u3011\u6a21\u5757\u4e0b\uff0c\u60a8\u53ef\u4ee5\u9488\u5bf9\u8be5\u670d\u52a1\u7ed1\u5b9a\u591a\u4e2a\u81ea\u6709\u57df\u540d\uff0c\u8bf7\u8010\u5fc3\u7b49\u5f85\u57df\u540d\u914d\u7f6e\uff08\u7ea6 10 \u5206\u949f\uff09\uff0c\u67e5\u770b\u57df\u540d\u5bf9\u5e94\u7684\u72b6\u6001\u662f\u5426\u4e3a\uff3b\u6b63\u5e38\uff3d\uff0c\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u7279\u522b\u5730\uff0c\u53c8\u62cd\u4e91\u4e3a\u6bcf\u4e00\u4e2a\u4e91\u5b58\u50a8\u670d\u52a1\u63d0\u4f9b\u4e86\u6d4b\u8bd5\u57df\u540d\uff0c\u6d4b\u8bd5\u57df\u540d\u683c\u5f0f\u4e3a\uff1a \u670d\u52a1\u540d\u79f0.test.upcdn.net\uff0c\u6b64\u6d4b\u8bd5\u57df\u540d\u4ec5\u4f9b\u6d4b\u8bd5\u4f7f\u7528\uff0c\u6b63\u5f0f\u4e1a\u52a1\u73af\u5883\u8bf7\u7ed1\u5b9a\u81ea\u6709\u57df\u540d\u3002 \u7b2c\u4e94\u6b65\uff1a\u8d44\u6e90\u7ba1\u7406 \u00b6 \u4ee5\u4e0a\u6b65\u9aa4\u64cd\u4f5c\u5b8c\u6bd5\u4e4b\u540e\uff0c\u53ef\u4ee5\u4f7f\u7528\u64cd\u4f5c\u5458\u9488\u5bf9\u8be5\u670d\u52a1\u8fdb\u884c\u8d44\u6e90\u6587\u4ef6\u7684\u4e0a\u4f20\u548c\u7ba1\u7406\u64cd\u4f5c\uff0c\u8d44\u6e90\u6587\u4ef6\u7684\u4e0a\u4f20\u548c\u7ba1\u7406\uff0c\u8bf7\u53c2\u89c1 \u4e91\u5b58\u50a8\u5f00\u53d1\u8005\u5de5\u5177 \u3002\u5f85\u8d44\u6e90\u6587\u4ef6\u90fd\u4e0a\u4f20\u5b8c\u6bd5\uff0c\u786e\u4fdd\u8be5\u4e91\u5b58\u50a8\u670d\u52a1\u53ef\u4ee5\u6b63\u5e38\u63d0\u4f9b\u670d\u52a1\u4e4b\u540e\uff0c\u5c31\u53ef\u4ee5\u5f00\u59cb\u4f7f\u7528 CDN \u670d\u52a1\u4e86\u3002\u4e91\u5b58\u50a8\u670d\u52a1\u5185\u5bb9\u7ba1\u7406\u7684\u5165\u53e3\u53c2\u89c1\u5982\u4e0b\u622a\u56fe\u6240\u793a\uff1a \u60a8\u4e5f\u53ef\u4ee5\u8fdb\u5165\u670d\u52a1\u7684\u529f\u80fd\u914d\u7f6e\u4e0b\u7684\u3010\u5185\u5bb9\u7ba1\u7406\u3011\u6a21\u5757\u8fdb\u884c\u76f8\u5173\u8bbe\u7f6e\uff0c\u4f8b\u5982\uff1aAPI \u5bc6\u94a5\u3001\u64cd\u4f5c\u5458\u6388\u6743\u7b49\u64cd\u4f5c\uff0c\u5177\u4f53\u4f7f\u7528\u8bf7\u53c2\u89c1\u3010\u7ba1\u7406\u6307\u5357\u3011\u7684\u8be6\u60c5\u4ecb\u7ecd\u3002 \u7b2c\u516d\u6b65\uff1aCNAME \u914d\u7f6e \u00b6 \u5728\u4e0a\u4e00\u4e2a\u6b65\u9aa4\u4e2d\uff0c\u60a8\u53ef\u67e5\u770b CDN \u5e73\u53f0\u4e3a\u60a8\u5206\u914d\u7684 CNAME \u57df\u540d\uff0c\u6b64\u65f6\u9700\u8981\u53bb\u57df\u540d DNS \u89e3\u6790\u5546\u5904\uff0c\u4e3a\u8be5\u57df\u540d\u6dfb\u52a0\u4e00\u6761 CNAME \u8bb0\u5f55\uff0c\u5f85 CNAME \u914d\u7f6e\u751f\u6548\u4e4b\u540e\uff0c\u65b9\u53ef\u4eab\u53d7 CDN \u670d\u52a1\uff0c\u5177\u4f53\u914d\u7f6e\u8be6\u89c1 CNAME \u89e3\u6790 \u3002\u83b7\u53d6 CNAME \u5730\u5740\u7684\u5165\u53e3\u6709\uff1a 1.\u5728\u3010\u670d\u52a1\u7ba1\u7406\u3011\u754c\u9762\uff0c\u5c06\u9f20\u6807\u653e\u7f6e\u3010\u670d\u52a1\u540d\u79f0\u3011\u663e\u793a\u533a\u57df\u5373\u53ef\u663e\u793a CNAME \u5730\u5740\uff0c\u53ef\u76f4\u63a5\u590d\u5236\uff0c\u5982\u622a\u56fe\u6240\u793a\uff1a 2.\u5728\u3010\u529f\u80fd\u914d\u7f6e\u3011\u754c\u9762\uff0c\u9009\u62e9\u300c\u57df\u540d\u7ba1\u7406\u300d\u6a21\u5757\uff0c\u76f8\u5e94\u533a\u57df\u53ef\u67e5\u770b CNAME \u5730\u5740\uff0c\u5982\u56fe\u6240\u793a\uff1a \u64cd\u4f5c\u7ba1\u7406 \u00b6 \u8fdb\u5165 CDN \u63a7\u5236\u53f0\uff0c\u5728\u670d\u52a1\u7ba1\u7406\u754c\u9762\uff0c\u60a8\u53ef\u4ee5\u9488\u5bf9\u5df2\u7ecf\u521b\u5efa\u7684 CDN \u52a0\u901f\u670d\u52a1\u8fdb\u884c\u5f00\u542f\u3001\u5173\u95ed\u3001\u5220\u9664\u3001\u5168\u7f51\u5237\u65b0\u3001\u7edf\u8ba1\u5206\u6790\u67e5\u8be2\u7b49\u64cd\u4f5c\u3002 \u5f00\u542f\u52a0\u901f\u670d\u52a1 \u00b6 \u9488\u5bf9\u5df2\u7ecf\u5904\u4e8e\u5173\u95ed\u72b6\u6001\u7684 CDN \u52a0\u901f\u670d\u52a1\uff0c\u60a8\u53ef\u4ee5\u8fdb\u884c\u3010\u5f00\u542f\u3011\u64cd\u4f5c\uff0c\u5f00\u542f\u64cd\u4f5c\u4f1a\u5728 1 \u5206\u949f\u4e4b\u5185\u751f\u6548\uff0c\u5177\u4f53\u64cd\u4f5c\u5982\u4e0b\uff1a\u767b\u9646 CDN \u63a7\u5236\u53f0 \uff0c\u8fdb\u5165 \u300c \u670d\u52a1\u7ba1\u7406\u300d\u76f8\u5e94\u754c\u9762\u3002\u5982\u4e0b\u622a\u56fe\u6240\u793a\uff1a \u70b9\u51fb\u9700\u8981\u5f00\u542f\u7684 CDN \u52a0\u901f\u670d\u52a1\uff0c\u9009\u62e9\u3010\u5f00\u542f\u3011\u6309\u94ae\uff0c\u5373\u53ef\u5f00\u542f\u3002 \u5173\u95ed\u52a0\u901f\u670d\u52a1 \u00b6 \u9488\u5bf9\u5df2\u7ecf\u5904\u4e8e\u5f00\u542f\u72b6\u6001\u7684 CDN \u52a0\u901f\u670d\u52a1\uff0c\u60a8\u53ef\u4ee5\u8fdb\u884c\u3010\u5173\u95ed\u3011\u64cd\u4f5c\uff0c\u5173\u95ed\u64cd\u4f5c\u4f1a\u5728 1 \u5206\u949f\u4e4b\u5185\u751f\u6548\uff0c\u5177\u4f53\u64cd\u4f5c\u5982\u4e0b\uff1a\u767b\u9646 CDN \u63a7\u5236\u53f0 \uff0c\u8fdb\u5165 \u300c \u670d\u52a1\u7ba1\u7406\u300d\u76f8\u5e94\u754c\u9762\u3002\u5982\u4e0b\u622a\u56fe\u6240\u793a\uff1a \u9009\u62e9\u9700\u8981\u5173\u95ed\u7684 CDN \u52a0\u901f\u670d\u52a1\uff0c\u9009\u62e9\u3010\u5173\u95ed\u3011\u6309\u94ae\uff0c\u5373\u53ef\u5173\u95ed CDN \u670d\u52a1\u3002 \u6ce8\u610f\uff1a\u670d\u52a1\u5173\u95ed\u540e\uff0c\u6240\u6709\u8d44\u6e90\u90fd\u5c06\u65e0\u6cd5\u8bbf\u95ee\uff0c\u5e76\u8fd4\u56de 405 \u72b6\u6001\u7801\uff0c\u8bf7\u8c28\u614e\u64cd\u4f5c\uff01 \u5220\u9664\u52a0\u901f\u670d\u52a1 \u00b6 \u9488\u5bf9\u5df2\u7ecf\u5904\u4e8e\u5173\u95ed\u72b6\u6001\u7684 CDN \u52a0\u901f\u670d\u52a1\uff0c\u60a8\u53ef\u4ee5\u8fdb\u884c\u670d\u52a1\u3010\u5220\u9664\u3011\u64cd\u4f5c\uff0c\u5220\u9664\u64cd\u4f5c\u4f1a\u5728 1 \u5206\u949f\u4e4b\u5185\u751f\u6548\uff0c\u5177\u4f53\u64cd\u4f5c\u5982\u4e0b\uff1a\u767b\u9646 CDN \u63a7\u5236\u53f0 \uff0c\u8fdb\u5165 \u300c \u670d\u52a1\u7ba1\u7406\u300d\u76f8\u5e94\u754c\u9762\u3002\u5982\u4e0b\u622a\u56fe\u6240\u793a\uff1a \u9009\u62e9\u9700\u8981\u5220\u9664\u7684 CDN \u52a0\u901f\u670d\u52a1\uff0c\u70b9\u51fb\u3010\u5220\u9664\u3011\u6309\u94ae\uff0c\u5373\u53ef\u5220\u9664 CDN \u670d\u52a1\u3002 \u6ce8\u610f\u4e8b\u9879\uff1a \u5220\u9664\u65f6\uff0c\u786e\u4fdd\u8be5\u670d\u52a1\u5df2\u4e0d\u5b58\u5728\u4efb\u4f55\u76ee\u5f55\uff1b \u5220\u9664\u540e\uff0c7\u5929\u5185\u65e0\u6cd5\u521b\u5efa\u540c\u540d\u670d\u52a1\uff1b \u5220\u9664\u4e0d\u53ef\u9006\uff0c\u64cd\u4f5c\u540e\u8be5\u670d\u52a1\u539f\u6709\u914d\u7f6e\u5747\u5931\u6548\u3002 \u5168\u7f51\u7f13\u5b58\u5237\u65b0 \u00b6 \u5982\u9700\u5bf9\u670d\u52a1\u8fdb\u884c\u5168\u7f51\u7f13\u5b58\u5237\u65b0\uff0c\u53ef\u4ee5\u901a\u8fc7\u76f8\u5e94\u5165\u53e3\u8fdb\u884c\u5168\u7f51\u5237\u65b0\u64cd\u4f5c\u3002\u5177\u4f53\u64cd\u4f5c\u5982\u4e0b\uff1a\u767b\u9646 CDN \u63a7\u5236\u53f0 \uff0c\u8fdb\u5165 \u300c \u670d\u52a1\u7ba1\u7406\u300d\u76f8\u5e94\u754c\u9762\u3002\u5982\u4e0b\u622a\u56fe\u6240\u793a\uff1a \u9009\u62e9\u9700\u8981\u8fdb\u884c\u5168\u7f51\u5237\u65b0\u7684 CDN \u52a0\u901f\u670d\u52a1\uff0c\u70b9\u51fb\u3010\u5237\u65b0\u3011\u6309\u94ae\uff0c\u5373\u53ef\u9488\u5bf9\u8be5\u670d\u52a1\u8fdb\u884c\u5168\u7f51\u5237\u65b0\u3002 \u6ce8\u610f\uff1a \u540c\u4e00\u670d\u52a1\u6bcf\u6b21\u5237\u65b0\u95f4\u9694\u81f3\u5c11 10 \u5206\u949f\uff0c\u4e00\u5929\u53ea\u80fd\u5237\u65b0 5 \u6b21\u7f13\u5b58\uff1b \u5168\u7f51\u7f13\u5b58\u5237\u65b0\u4f1a\u5bf9\u6e90\u7ad9\u4ea7\u751f\u4e00\u5b9a\u538b\u529b\uff0c\u8bf7\u8c28\u614e\u64cd\u4f5c\uff1b \u7edf\u8ba1\u5206\u6790\u67e5\u8be2 \u00b6 \u5982\u9700\u4e86\u89e3 CDN \u670d\u52a1\u5e26\u5bbd\u3001\u6d41\u91cf\u3001\u8bf7\u6c42\u6570\u7b49\u7ef4\u5ea6\u7684\u6570\u636e\u7edf\u8ba1\u548c\u5206\u6790\u6570\u636e\uff0c\u53ef\u4ee5\u901a\u8fc7\u8be5\u5165\u53e3\u8fdb\u884c\u67e5\u8be2\u3002\u5177\u4f53\u64cd\u4f5c\u5982\u4e0b\uff1a\u767b\u9646 CDN \u63a7\u5236\u53f0 \uff0c\u8fdb\u5165 \u300c \u670d\u52a1\u7ba1\u7406\u300d\u76f8\u5e94\u754c\u9762\u3002\u5982\u4e0b\u622a\u56fe\u6240\u793a\uff1a \u9009\u62e9\u9700\u8981\u8fdb\u884c\u7edf\u8ba1\u5206\u6790\u67e5\u8be2\u7684 CDN \u52a0\u901f\u670d\u52a1\uff0c\u70b9\u51fb\u3010\u7edf\u8ba1\u3011\u6309\u94ae\uff0c\u5373\u53ef\u5feb\u901f\u8fdb\u5165\u7edf\u8ba1\u5206\u6790\u9875\u9762\u3002","title":"\u670d\u52a1\u7ba1\u7406"},{"location":"cdn/service/#_1","text":"\u5982\u679c\u60a8\u7684\u7f51\u7ad9\u6216\u5e94\u7528\u4f7f\u7528\u7684\u662f\u81ea\u6709\u6e90\u7ad9\u6216\u8005\u7b2c\u4e09\u65b9\u5b58\u50a8\u6e90\uff0c\u60a8\u53ef\u4ee5\u901a\u8fc7\u81ea\u4e3b\u6e90\u7684\u65b9\u5f0f\u63a5\u5165 CDN \u670d\u52a1\u3002\u6b64\u65f6\u60a8\u7684\u6e90\u7ad9\u65e0\u9700\u505a\u4efb\u4f55\u6539\u52a8\uff0c\u53ea\u9700\u8981\u8d70\u5b8c\u4e0b\u9762\u7684\u914d\u7f6e\u6d41\u7a0b\u5e76\u5728 DNS \u89e3\u6790\u5546\u5904\u4fee\u6539 CNAME \u8bb0\u5f55\u5373\u53ef\u4eab\u53d7 CDN \u670d\u52a1\uff0c\u5177\u4f53\u64cd\u4f5c\u53c2\u89c1\u5982\u4e0b\u6b65\u9aa4\uff1a","title":"\u57df\u540d\u63a5\u5165\uff08\u81ea\u6709\u6e90)"},{"location":"cdn/service/#_2","text":"\u767b\u9646 CDN \u63a7\u5236\u53f0 \uff0c\u8fdb\u5165 \u300cCDN \u670d\u52a1\u300d\uff0c\u70b9\u51fb \u300c\u521b\u5efa\u670d\u52a1\u300d\u3002","title":"\u7b2c\u4e00\u6b65\uff1a\u521b\u5efa\u670d\u52a1"},{"location":"cdn/service/#_3","text":"\u8be5\u6b65\u9aa4\u5305\u62ec\u670d\u52a1\u540d\u79f0\u3001\u52a0\u901f\u57df\u540d\u3001\u5e94\u7528\u573a\u666f\u7b49\u9009\u9879\u7684\u914d\u7f6e\uff0c\u4e3a\u5fc5\u9009\u9879\uff0c\u8be6\u7ec6\u914d\u7f6e\u53c2\u89c1\u5982\u4e0b\u622a\u56fe\u6240\u793a\uff1a 1.\u670d\u52a1\u540d\u79f0\uff1a\u552f\u4e00\u6807\u8bc6\u670d\u52a1\uff0c\u4f8b\u5982\uff1aimage-upyun-com\uff0c\u4e00\u4e2a\u670d\u52a1\u4e0b\u9762\u53ef\u4ee5\u7ed1\u5b9a\u591a\u4e2a\u81ea\u6709\u57df\u540d\uff0c\u547d\u540d\u8981\u6c42\u5982\u4e0b\uff1a \u670d\u52a1\u540d\u79f0\u4ec5\u9650 5\uff5e20 \u4f4d\uff1b \u5fc5\u987b\u4ee5\u5c0f\u5199\u82f1\u6587\u5b57\u7b26\u5f00\u5934\uff0c\u4ec5\u652f\u6301\u5c0f\u5199\u82f1\u6587\u5b57\u7b26\u3001\u6570\u5b57\u3001\u4e2d\u5212\u7ebf\u7ec4\u5408\u3002 2.\u52a0\u901f\u57df\u540d\uff1a\u586b\u5199\u6b64\u6b21\u9700\u8981\u914d\u7f6e\u7684\u52a0\u901f\u57df\u540d\u3002\u5177\u4f53\u8981\u6c42\u5982\u4e0b\uff1a \u52a0\u901f\u57df\u540d\u5df2\u5728\u5de5\u4fe1\u90e8\u5907\u6848\uff1b \u5f85\u52a0\u901f\u57df\u540d\u5c1a\u672a\u5728\u53c8\u62cd\u4e91 CDN \u5e73\u53f0\u914d\u7f6e\u3002 3.\u5e94\u7528\u573a\u666f\uff1a\u53ef\u9009\u9879\u5305\u62ec\u7f51\u9875\u56fe\u7247\u3001\u6587\u4ef6\u4e0b\u8f7d\u3001\u97f3\u89c6\u9891\u70b9\u64ad\u3001\u52a8\u6001\u5185\u5bb9\u3001\u5168\u7ad9\u52a0\u901f\uff0c\u9610\u8ff0\u5982\u4e0b\uff1a \u7f51\u9875\u56fe\u7247\uff1a\u9002\u7528\u4e8e\u7535\u5546\u7c7b\u3001\u7f51\u7ad9\u7c7b\u3001\u6e38\u620f\u56fe\u7247\u7c7b\u9759\u6001\u5c0f\u6587\u4ef6\u7b49\u4e1a\u52a1\u3002 \u6587\u4ef6\u4e0b\u8f7d\uff1a\u9002\u7528\u4e8e\u6e38\u620f\u5b89\u88c5\u5305\u3001\u97f3\u89c6\u9891\u539f\u6587\u4ef6\u4e0b\u8f7d\u3001\u624b\u673a\u56fa\u4ef6\u5206\u53d1\u7b49\u4e1a\u52a1\u3002 \u97f3\u89c6\u9891\u70b9\u64ad\uff1a\u9002\u5408\u97f3\u3001\u89c6\u9891\u6587\u4ef6\u8f83\u591a\u7684\u5728\u7ebf\u70b9\u64ad\u4e1a\u52a1\u3002 \u52a8\u6001\u5185\u5bb9\uff1a\u9002\u5408 PHP\u3001JSP\u3001ASP \u7b49\u52a8\u6001\u7c7b\u8d44\u6e90\u8f83\u591a\u7684\u4e1a\u52a1\u3002 \u5168\u7ad9\u52a0\u901f\uff1a\u9002\u5408\u52a8\u3001\u9759\u6001\u5185\u5bb9\u672a\u505a\u660e\u786e\u533a\u5206\u7684\u4e1a\u52a1\uff0c\u53c8\u62cd\u4e91\u81ea\u52a8\u5b9e\u73b0\u52a8\u9759\u5206\u79bb\u3002","title":"\u7b2c\u4e8c\u6b65\uff1a\u57fa\u672c\u914d\u7f6e"},{"location":"cdn/service/#_4","text":"\u9700\u8981\u8fdb\u884c\u56de\u6e90\u534f\u8bae\u3001\u56de\u6e90\u7ebf\u8def\u7684\u914d\u7f6e\uff0c\u66f4\u591a\u914d\u7f6e\u4ecb\u7ecd\u8bf7\u53c2\u89c1 \u56de\u6e90\u914d\u7f6e \u3002\u914d\u7f6e\u754c\u9762\u5982\u4e0b\u56fe\u6240\u793a\uff1a 1.\u56de\u6e90\u534f\u8bae\uff1a\u5bf9\u56de\u6e90\u534f\u8bae\u8fdb\u884c\u914d\u7f6e\uff0c\u9ed8\u8ba4\u4e3a HTTP\uff0c\u914d\u7f6e\u9009\u9879\u5305\u62ec HTTP\u3001HTTPS\u3001\u534f\u8bae\u8ddf\u968f\u3002 2.\u7ebf\u8def\u914d\u7f6e\uff1a\u6b64\u5904\u5305\u62ec\u56de\u6e90\u5730\u5740\u3001\u56de\u6e90\u7aef\u53e3\u53f7\u7684\u8bbe\u7f6e\uff0c\u66f4\u591a\u8bbe\u7f6e\u8bf7\u53c2\u89c1 \u7ebf\u8def\u914d\u7f6e \u3002","title":"\u7b2c\u4e09\u6b65\uff1a\u56de\u6e90\u914d\u7f6e"},{"location":"cdn/service/#_5","text":"\u670d\u52a1\u521b\u5efa\u6210\u529f\u540e\uff0c\u64cd\u4f5c\u754c\u9762\u4f1a\u63d0\u793a CDN \u52a0\u901f\u670d\u52a1\u521b\u5efa\u6210\u529f\uff0c\u5e76\u4f1a\u81ea\u52a8\u8df3\u8f6c\u5230\u8be5\u670d\u52a1\u7684\u3010\u529f\u80fd\u914d\u7f6e\u3011\u754c\u9762\uff0c\u5982\u56fe\u6240\u793a\uff1a \u5728\u529f\u80fd\u914d\u7f6e\u754c\u9762\uff0c\u6709\u57df\u540d\u7ba1\u7406\u3001\u56de\u6e90\u7ba1\u7406\u3001\u7f13\u5b58\u914d\u7f6e\u3001\u6027\u80fd\u4f18\u5316\u3001HTTPS\u3001\u8bbf\u95ee\u63a7\u5236\u3001\u56fe\u7247\u5904\u7406\u7b49\u529f\u80fd\u914d\u7f6e\u6a21\u5757\uff0c\u5728\u3010\u57df\u540d\u7ba1\u7406\u3011\u6a21\u5757\u4e0b\uff0c\u60a8\u53ef\u4ee5\u9488\u5bf9\u8be5\u670d\u52a1\u7ed1\u5b9a\u591a\u4e2a\u81ea\u6709\u57df\u540d\uff0c\u8bf7\u8010\u5fc3\u7b49\u5f85\u57df\u540d\u914d\u7f6e\uff08\u7ea6 10 \u5206\u949f\uff09\uff0c\u67e5\u770b\u57df\u540d\u5bf9\u5e94\u7684\u72b6\u6001\u662f\u5426\u4e3a\uff3b\u6b63\u5e38\uff3d\uff0c\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u7279\u522b\u5730\uff0c\u53c8\u62cd\u4e91\u4e3a\u6bcf\u4e00\u4e2a CDN \u670d\u52a1\u63d0\u4f9b\u4e86\u6d4b\u8bd5\u57df\u540d\uff0c\u6d4b\u8bd5\u57df\u540d\u683c\u5f0f\u4e3a\uff1a\u670d\u52a1\u540d\u79f0.test.upcdn.net\uff0c\u6b64\u6d4b\u8bd5\u57df\u540d\u4ec5\u4f9b\u6d4b\u8bd5\u4f7f\u7528\uff0c\u6b63\u5f0f\u4e1a\u52a1\u73af\u5883\u8bf7\u7ed1\u5b9a\u81ea\u6709\u57df\u540d\u3002","title":"\u7b2c\u56db\u6b65\uff1a\u72b6\u6001\u786e\u8ba4"},{"location":"cdn/service/#cname","text":"\u5728\u4e0a\u4e00\u4e2a\u6b65\u9aa4\u4e2d\uff0c\u60a8\u53ef\u67e5\u770b CDN \u5e73\u53f0\u4e3a\u60a8\u5206\u914d\u7684 CNAME \u5730\u5740\uff0c\u6b64\u65f6\u9700\u8981\u53bb\u57df\u540d DNS \u89e3\u6790\u5546\u5904\uff0c\u4e3a\u8be5\u57df\u540d\u6dfb\u52a0\u4e00\u6761 CNAME \u8bb0\u5f55\uff0c\u5f85 CNAME \u914d\u7f6e\u751f\u6548\u4e4b\u540e\uff0c\u65b9\u53ef\u4eab\u53d7 CDN \u670d\u52a1\uff0c\u5177\u4f53\u914d\u7f6e\u8be6\u89c1 CNAME \u89e3\u6790 \u3002\u83b7\u53d6 CNAME \u5730\u5740\u7684\u5165\u53e3\u6709\uff1a 1.\u5728\u3010\u670d\u52a1\u7ba1\u7406\u3011\u754c\u9762\uff0c\u5c06\u9f20\u6807\u653e\u7f6e\u3010\u670d\u52a1\u540d\u79f0\u3011\u663e\u793a\u533a\u57df\u5373\u53ef\u663e\u793a CNAME \u5730\u5740\uff0c\u53ef\u76f4\u63a5\u590d\u5236\uff0c\u5982\u622a\u56fe\u6240\u793a\uff1a 2.\u5728\u3010\u529f\u80fd\u914d\u7f6e\u3011\u754c\u9762\uff0c\u9009\u62e9\u300c\u57df\u540d\u7ba1\u7406\u300d\u6a21\u5757\uff0c\u76f8\u5e94\u533a\u57df\u53ef\u67e5\u770b CNAME \u5730\u5740\uff0c\u5982\u56fe\u6240\u793a\uff1a","title":"\u7b2c\u4e94\u6b65\uff1aCNAME \u914d\u7f6e"},{"location":"cdn/service/#_6","text":"\u5982\u679c\u60a8\u56e0\u4e3a\u81ea\u4e3b\u6e90\u538b\u529b\u8f83\u5927\uff0c\u60a8\u4e5f\u53ef\u4ee5\u5c06\u975e\u7ed3\u6784\u5316\u6570\u636e\u6258\u7ba1\u5728\u53c8\u62cd\u4e91\u5bf9\u8c61\u5b58\u50a8\u670d\u52a1\u4e0a\u9762\uff0c\u4f7f\u7528\u53c8\u62cd\u4e91\u5b58\u50a8\u6e90\uff0c\u66f4\u591a\u4e86\u89e3\u8bf7\u70b9\u51fb \u5bf9\u8c61\u5b58\u50a8\u670d\u52a1 \u3002\u5177\u4f53\u64cd\u4f5c\u53c2\u89c1\u5982\u4e0b\u6b65\u9aa4\uff1a","title":"\u57df\u540d\u63a5\u5165\uff08\u53c8\u62cd\u5b58\u50a8\u6e90\uff09"},{"location":"cdn/service/#_7","text":"\u767b\u9646 CDN \u63a7\u5236\u53f0 \uff0c\u8fdb\u5165\u300c\u4e91\u5b58\u50a8\u300d\u670d\u52a1\uff0c\u70b9\u51fb \u300c\u521b\u5efa\u670d\u52a1\u300d\uff0c\u5982\u4e0b\u622a\u56fe\u6240\u793a\uff1a","title":"\u7b2c\u4e00\u6b65\uff1a\u521b\u5efa\u670d\u52a1"},{"location":"cdn/service/#_8","text":"\u521b\u5efa\u4e00\u4e2a\u5b58\u50a8\u670d\u52a1\uff0c\u9996\u5148\u9700\u8981\u914d\u7f6e\u4e00\u4e2a\u670d\u52a1\u540d\u79f0\uff0c\u53e6\u5916\u5c31\u662f\u9009\u62e9\u4e00\u4e2a\u5e94\u7528\u573a\u666f\uff0c\u8be6\u7ec6\u914d\u7f6e\u53c2\u89c1\u5982\u4e0b\u622a\u56fe\u6240\u793a\uff1a 1.\u670d\u52a1\u540d\u79f0\uff1a\u552f\u4e00\u6807\u8bc6\u670d\u52a1\uff0c\u4f8b\u5982\uff1avideo-upyun-com\uff0c\u4e00\u4e2a\u670d\u52a1\u4e0b\u9762\u53ef\u4ee5\u7ed1\u5b9a\u591a\u4e2a\u57df\u540d\u3002\u547d\u540d\u8981\u6c42\u5982\u4e0b\uff1a \u670d\u52a1\u540d\u79f0\u4ec5\u9650 5\uff5e20 \u4f4d\uff1b \u5fc5\u987b\u4ee5\u5c0f\u5199\u82f1\u6587\u5b57\u7b26\u5f00\u5934\uff0c\u4ec5\u652f\u6301\u5c0f\u5199\u82f1\u6587\u5b57\u7b26\u3001\u6570\u5b57\u3001\u4e2d\u5212\u7ebf\u7ec4\u5408\u3002 2.\u5e94\u7528\u573a\u666f\uff1a\u53ef\u9009\u9879\u5305\u62ec\u7f51\u9875\u56fe\u7247\u3001\u6587\u4ef6\u4e0b\u8f7d\u3001\u97f3\u89c6\u9891\u70b9\u64ad\uff0c\u9610\u8ff0\u5982\u4e0b\uff1a \u7f51\u9875\u56fe\u7247\uff1a\u9002\u7528\u4e8e\u7535\u5546\u7c7b\u3001\u7f51\u7ad9\u7c7b\u3001\u6e38\u620f\u56fe\u7247\u7c7b\u9759\u6001\u5c0f\u6587\u4ef6\u7b49\u4e1a\u52a1\u3002 \u6587\u4ef6\u4e0b\u8f7d\uff1a\u9002\u7528\u4e8e\u6e38\u620f\u5b89\u88c5\u5305\u3001\u97f3\u89c6\u9891\u539f\u6587\u4ef6\u4e0b\u8f7d\u3001\u624b\u673a\u56fa\u4ef6\u5206\u53d1\u7b49\u4e1a\u52a1\u3002 \u97f3\u89c6\u9891\u70b9\u64ad\uff1a\u9002\u5408\u97f3\u3001\u89c6\u9891\u6587\u4ef6\u8f83\u591a\u7684\u5728\u7ebf\u70b9\u64ad\u4e1a\u52a1\u3002","title":"\u7b2c\u4e8c\u6b65\uff1a\u57fa\u672c\u914d\u7f6e"},{"location":"cdn/service/#_9","text":"\u9488\u5bf9\u4f7f\u7528\u53c8\u62cd\u4e91\u5bf9\u8c61\u5b58\u50a8\u4f5c\u4e3a\u6e90\u7684 CDN \u670d\u52a1\uff0c\u9700\u8981\u521b\u5efa\u64cd\u4f5c\u5458\u6765\u7ba1\u7406\u5b58\u50a8\u5728\u53c8\u62cd\u5bf9\u8c61\u5b58\u50a8\u670d\u52a1\u4e0a\u9762\u7684\u975e\u7ed3\u6784\u5316\u6570\u636e\uff0c\u8be6\u7ec6\u4ecb\u7ecd\u8bf7\u70b9\u51fb \u64cd\u4f5c\u5458 \uff0c\u5177\u4f53\u914d\u7f6e\u754c\u9762\u5982\u4e0b\u622a\u56fe\u6240\u793a\uff1a \u5173\u4e8e\u5982\u4f55\u4f7f\u7528\u64cd\u4f5c\u5458\u7ba1\u7406\u5b58\u50a8\u4e0a\u7684\u975e\u7ed3\u6784\u5316\u6570\u636e\uff0c\u8be6\u60c5\u53c2\u7167 \u5bf9\u8c61\u5b58\u50a8\u5f00\u53d1\u8005\u5de5\u5177 \u3002","title":"\u7b2c\u4e09\u6b65\uff1a\u521b\u5efa\u64cd\u4f5c\u5458"},{"location":"cdn/service/#_10","text":"\u670d\u52a1\u521b\u5efa\u6210\u529f\u540e\uff0c\u64cd\u4f5c\u754c\u9762\u4f1a\u63d0\u793a\u4e91\u5b58\u50a8\u670d\u52a1\u914d\u7f6e\u6210\u529f\uff0c\u5e76\u4f1a\u81ea\u52a8\u8df3\u8f6c\u5230\u8be5\u670d\u52a1\u7684\u529f\u80fd\u914d\u7f6e\u754c\u9762\uff0c\u5982\u56fe\u6240\u793a\uff1a \u5728\u529f\u80fd\u914d\u7f6e\u754c\u9762\uff0c\u6709\u57df\u540d\u7ba1\u7406\u3001\u5185\u5bb9\u7ba1\u7406\u3001\u7f13\u5b58\u914d\u7f6e\u3001\u6027\u80fd\u4f18\u5316\u3001HTTPS\u3001\u8bbf\u95ee\u63a7\u5236\u3001\u56fe\u7247\u5904\u7406\u7b49\u529f\u80fd\u914d\u7f6e\u6a21\u5757\uff0c\u5728\u3010\u57df\u540d\u7ba1\u7406\u3011\u6a21\u5757\u4e0b\uff0c\u60a8\u53ef\u4ee5\u9488\u5bf9\u8be5\u670d\u52a1\u7ed1\u5b9a\u591a\u4e2a\u81ea\u6709\u57df\u540d\uff0c\u8bf7\u8010\u5fc3\u7b49\u5f85\u57df\u540d\u914d\u7f6e\uff08\u7ea6 10 \u5206\u949f\uff09\uff0c\u67e5\u770b\u57df\u540d\u5bf9\u5e94\u7684\u72b6\u6001\u662f\u5426\u4e3a\uff3b\u6b63\u5e38\uff3d\uff0c\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u7279\u522b\u5730\uff0c\u53c8\u62cd\u4e91\u4e3a\u6bcf\u4e00\u4e2a\u4e91\u5b58\u50a8\u670d\u52a1\u63d0\u4f9b\u4e86\u6d4b\u8bd5\u57df\u540d\uff0c\u6d4b\u8bd5\u57df\u540d\u683c\u5f0f\u4e3a\uff1a \u670d\u52a1\u540d\u79f0.test.upcdn.net\uff0c\u6b64\u6d4b\u8bd5\u57df\u540d\u4ec5\u4f9b\u6d4b\u8bd5\u4f7f\u7528\uff0c\u6b63\u5f0f\u4e1a\u52a1\u73af\u5883\u8bf7\u7ed1\u5b9a\u81ea\u6709\u57df\u540d\u3002","title":"\u7b2c\u56db\u6b65\uff1a\u72b6\u6001\u786e\u8ba4"},{"location":"cdn/service/#_11","text":"\u4ee5\u4e0a\u6b65\u9aa4\u64cd\u4f5c\u5b8c\u6bd5\u4e4b\u540e\uff0c\u53ef\u4ee5\u4f7f\u7528\u64cd\u4f5c\u5458\u9488\u5bf9\u8be5\u670d\u52a1\u8fdb\u884c\u8d44\u6e90\u6587\u4ef6\u7684\u4e0a\u4f20\u548c\u7ba1\u7406\u64cd\u4f5c\uff0c\u8d44\u6e90\u6587\u4ef6\u7684\u4e0a\u4f20\u548c\u7ba1\u7406\uff0c\u8bf7\u53c2\u89c1 \u4e91\u5b58\u50a8\u5f00\u53d1\u8005\u5de5\u5177 \u3002\u5f85\u8d44\u6e90\u6587\u4ef6\u90fd\u4e0a\u4f20\u5b8c\u6bd5\uff0c\u786e\u4fdd\u8be5\u4e91\u5b58\u50a8\u670d\u52a1\u53ef\u4ee5\u6b63\u5e38\u63d0\u4f9b\u670d\u52a1\u4e4b\u540e\uff0c\u5c31\u53ef\u4ee5\u5f00\u59cb\u4f7f\u7528 CDN \u670d\u52a1\u4e86\u3002\u4e91\u5b58\u50a8\u670d\u52a1\u5185\u5bb9\u7ba1\u7406\u7684\u5165\u53e3\u53c2\u89c1\u5982\u4e0b\u622a\u56fe\u6240\u793a\uff1a \u60a8\u4e5f\u53ef\u4ee5\u8fdb\u5165\u670d\u52a1\u7684\u529f\u80fd\u914d\u7f6e\u4e0b\u7684\u3010\u5185\u5bb9\u7ba1\u7406\u3011\u6a21\u5757\u8fdb\u884c\u76f8\u5173\u8bbe\u7f6e\uff0c\u4f8b\u5982\uff1aAPI \u5bc6\u94a5\u3001\u64cd\u4f5c\u5458\u6388\u6743\u7b49\u64cd\u4f5c\uff0c\u5177\u4f53\u4f7f\u7528\u8bf7\u53c2\u89c1\u3010\u7ba1\u7406\u6307\u5357\u3011\u7684\u8be6\u60c5\u4ecb\u7ecd\u3002","title":"\u7b2c\u4e94\u6b65\uff1a\u8d44\u6e90\u7ba1\u7406"},{"location":"cdn/service/#cname_1","text":"\u5728\u4e0a\u4e00\u4e2a\u6b65\u9aa4\u4e2d\uff0c\u60a8\u53ef\u67e5\u770b CDN \u5e73\u53f0\u4e3a\u60a8\u5206\u914d\u7684 CNAME \u57df\u540d\uff0c\u6b64\u65f6\u9700\u8981\u53bb\u57df\u540d DNS \u89e3\u6790\u5546\u5904\uff0c\u4e3a\u8be5\u57df\u540d\u6dfb\u52a0\u4e00\u6761 CNAME \u8bb0\u5f55\uff0c\u5f85 CNAME \u914d\u7f6e\u751f\u6548\u4e4b\u540e\uff0c\u65b9\u53ef\u4eab\u53d7 CDN \u670d\u52a1\uff0c\u5177\u4f53\u914d\u7f6e\u8be6\u89c1 CNAME \u89e3\u6790 \u3002\u83b7\u53d6 CNAME \u5730\u5740\u7684\u5165\u53e3\u6709\uff1a 1.\u5728\u3010\u670d\u52a1\u7ba1\u7406\u3011\u754c\u9762\uff0c\u5c06\u9f20\u6807\u653e\u7f6e\u3010\u670d\u52a1\u540d\u79f0\u3011\u663e\u793a\u533a\u57df\u5373\u53ef\u663e\u793a CNAME \u5730\u5740\uff0c\u53ef\u76f4\u63a5\u590d\u5236\uff0c\u5982\u622a\u56fe\u6240\u793a\uff1a 2.\u5728\u3010\u529f\u80fd\u914d\u7f6e\u3011\u754c\u9762\uff0c\u9009\u62e9\u300c\u57df\u540d\u7ba1\u7406\u300d\u6a21\u5757\uff0c\u76f8\u5e94\u533a\u57df\u53ef\u67e5\u770b CNAME \u5730\u5740\uff0c\u5982\u56fe\u6240\u793a\uff1a","title":"\u7b2c\u516d\u6b65\uff1aCNAME \u914d\u7f6e"},{"location":"cdn/service/#_12","text":"\u8fdb\u5165 CDN \u63a7\u5236\u53f0\uff0c\u5728\u670d\u52a1\u7ba1\u7406\u754c\u9762\uff0c\u60a8\u53ef\u4ee5\u9488\u5bf9\u5df2\u7ecf\u521b\u5efa\u7684 CDN \u52a0\u901f\u670d\u52a1\u8fdb\u884c\u5f00\u542f\u3001\u5173\u95ed\u3001\u5220\u9664\u3001\u5168\u7f51\u5237\u65b0\u3001\u7edf\u8ba1\u5206\u6790\u67e5\u8be2\u7b49\u64cd\u4f5c\u3002","title":"\u64cd\u4f5c\u7ba1\u7406"},{"location":"cdn/service/#_13","text":"\u9488\u5bf9\u5df2\u7ecf\u5904\u4e8e\u5173\u95ed\u72b6\u6001\u7684 CDN \u52a0\u901f\u670d\u52a1\uff0c\u60a8\u53ef\u4ee5\u8fdb\u884c\u3010\u5f00\u542f\u3011\u64cd\u4f5c\uff0c\u5f00\u542f\u64cd\u4f5c\u4f1a\u5728 1 \u5206\u949f\u4e4b\u5185\u751f\u6548\uff0c\u5177\u4f53\u64cd\u4f5c\u5982\u4e0b\uff1a\u767b\u9646 CDN \u63a7\u5236\u53f0 \uff0c\u8fdb\u5165 \u300c \u670d\u52a1\u7ba1\u7406\u300d\u76f8\u5e94\u754c\u9762\u3002\u5982\u4e0b\u622a\u56fe\u6240\u793a\uff1a \u70b9\u51fb\u9700\u8981\u5f00\u542f\u7684 CDN \u52a0\u901f\u670d\u52a1\uff0c\u9009\u62e9\u3010\u5f00\u542f\u3011\u6309\u94ae\uff0c\u5373\u53ef\u5f00\u542f\u3002","title":"\u5f00\u542f\u52a0\u901f\u670d\u52a1"},{"location":"cdn/service/#_14","text":"\u9488\u5bf9\u5df2\u7ecf\u5904\u4e8e\u5f00\u542f\u72b6\u6001\u7684 CDN \u52a0\u901f\u670d\u52a1\uff0c\u60a8\u53ef\u4ee5\u8fdb\u884c\u3010\u5173\u95ed\u3011\u64cd\u4f5c\uff0c\u5173\u95ed\u64cd\u4f5c\u4f1a\u5728 1 \u5206\u949f\u4e4b\u5185\u751f\u6548\uff0c\u5177\u4f53\u64cd\u4f5c\u5982\u4e0b\uff1a\u767b\u9646 CDN \u63a7\u5236\u53f0 \uff0c\u8fdb\u5165 \u300c \u670d\u52a1\u7ba1\u7406\u300d\u76f8\u5e94\u754c\u9762\u3002\u5982\u4e0b\u622a\u56fe\u6240\u793a\uff1a \u9009\u62e9\u9700\u8981\u5173\u95ed\u7684 CDN \u52a0\u901f\u670d\u52a1\uff0c\u9009\u62e9\u3010\u5173\u95ed\u3011\u6309\u94ae\uff0c\u5373\u53ef\u5173\u95ed CDN \u670d\u52a1\u3002 \u6ce8\u610f\uff1a\u670d\u52a1\u5173\u95ed\u540e\uff0c\u6240\u6709\u8d44\u6e90\u90fd\u5c06\u65e0\u6cd5\u8bbf\u95ee\uff0c\u5e76\u8fd4\u56de 405 \u72b6\u6001\u7801\uff0c\u8bf7\u8c28\u614e\u64cd\u4f5c\uff01","title":"\u5173\u95ed\u52a0\u901f\u670d\u52a1"},{"location":"cdn/service/#_15","text":"\u9488\u5bf9\u5df2\u7ecf\u5904\u4e8e\u5173\u95ed\u72b6\u6001\u7684 CDN \u52a0\u901f\u670d\u52a1\uff0c\u60a8\u53ef\u4ee5\u8fdb\u884c\u670d\u52a1\u3010\u5220\u9664\u3011\u64cd\u4f5c\uff0c\u5220\u9664\u64cd\u4f5c\u4f1a\u5728 1 \u5206\u949f\u4e4b\u5185\u751f\u6548\uff0c\u5177\u4f53\u64cd\u4f5c\u5982\u4e0b\uff1a\u767b\u9646 CDN \u63a7\u5236\u53f0 \uff0c\u8fdb\u5165 \u300c \u670d\u52a1\u7ba1\u7406\u300d\u76f8\u5e94\u754c\u9762\u3002\u5982\u4e0b\u622a\u56fe\u6240\u793a\uff1a \u9009\u62e9\u9700\u8981\u5220\u9664\u7684 CDN \u52a0\u901f\u670d\u52a1\uff0c\u70b9\u51fb\u3010\u5220\u9664\u3011\u6309\u94ae\uff0c\u5373\u53ef\u5220\u9664 CDN \u670d\u52a1\u3002 \u6ce8\u610f\u4e8b\u9879\uff1a \u5220\u9664\u65f6\uff0c\u786e\u4fdd\u8be5\u670d\u52a1\u5df2\u4e0d\u5b58\u5728\u4efb\u4f55\u76ee\u5f55\uff1b \u5220\u9664\u540e\uff0c7\u5929\u5185\u65e0\u6cd5\u521b\u5efa\u540c\u540d\u670d\u52a1\uff1b \u5220\u9664\u4e0d\u53ef\u9006\uff0c\u64cd\u4f5c\u540e\u8be5\u670d\u52a1\u539f\u6709\u914d\u7f6e\u5747\u5931\u6548\u3002","title":"\u5220\u9664\u52a0\u901f\u670d\u52a1"},{"location":"cdn/service/#_16","text":"\u5982\u9700\u5bf9\u670d\u52a1\u8fdb\u884c\u5168\u7f51\u7f13\u5b58\u5237\u65b0\uff0c\u53ef\u4ee5\u901a\u8fc7\u76f8\u5e94\u5165\u53e3\u8fdb\u884c\u5168\u7f51\u5237\u65b0\u64cd\u4f5c\u3002\u5177\u4f53\u64cd\u4f5c\u5982\u4e0b\uff1a\u767b\u9646 CDN \u63a7\u5236\u53f0 \uff0c\u8fdb\u5165 \u300c \u670d\u52a1\u7ba1\u7406\u300d\u76f8\u5e94\u754c\u9762\u3002\u5982\u4e0b\u622a\u56fe\u6240\u793a\uff1a \u9009\u62e9\u9700\u8981\u8fdb\u884c\u5168\u7f51\u5237\u65b0\u7684 CDN \u52a0\u901f\u670d\u52a1\uff0c\u70b9\u51fb\u3010\u5237\u65b0\u3011\u6309\u94ae\uff0c\u5373\u53ef\u9488\u5bf9\u8be5\u670d\u52a1\u8fdb\u884c\u5168\u7f51\u5237\u65b0\u3002 \u6ce8\u610f\uff1a \u540c\u4e00\u670d\u52a1\u6bcf\u6b21\u5237\u65b0\u95f4\u9694\u81f3\u5c11 10 \u5206\u949f\uff0c\u4e00\u5929\u53ea\u80fd\u5237\u65b0 5 \u6b21\u7f13\u5b58\uff1b \u5168\u7f51\u7f13\u5b58\u5237\u65b0\u4f1a\u5bf9\u6e90\u7ad9\u4ea7\u751f\u4e00\u5b9a\u538b\u529b\uff0c\u8bf7\u8c28\u614e\u64cd\u4f5c\uff1b","title":"\u5168\u7f51\u7f13\u5b58\u5237\u65b0"},{"location":"cdn/service/#_17","text":"\u5982\u9700\u4e86\u89e3 CDN \u670d\u52a1\u5e26\u5bbd\u3001\u6d41\u91cf\u3001\u8bf7\u6c42\u6570\u7b49\u7ef4\u5ea6\u7684\u6570\u636e\u7edf\u8ba1\u548c\u5206\u6790\u6570\u636e\uff0c\u53ef\u4ee5\u901a\u8fc7\u8be5\u5165\u53e3\u8fdb\u884c\u67e5\u8be2\u3002\u5177\u4f53\u64cd\u4f5c\u5982\u4e0b\uff1a\u767b\u9646 CDN \u63a7\u5236\u53f0 \uff0c\u8fdb\u5165 \u300c \u670d\u52a1\u7ba1\u7406\u300d\u76f8\u5e94\u754c\u9762\u3002\u5982\u4e0b\u622a\u56fe\u6240\u793a\uff1a \u9009\u62e9\u9700\u8981\u8fdb\u884c\u7edf\u8ba1\u5206\u6790\u67e5\u8be2\u7684 CDN \u52a0\u901f\u670d\u52a1\uff0c\u70b9\u51fb\u3010\u7edf\u8ba1\u3011\u6309\u94ae\uff0c\u5373\u53ef\u5feb\u901f\u8fdb\u5165\u7edf\u8ba1\u5206\u6790\u9875\u9762\u3002","title":"\u7edf\u8ba1\u5206\u6790\u67e5\u8be2"},{"location":"cdn/ssl/","text":"\u4ea7\u54c1\u4ecb\u7ecd \u00b6 HTTPS\uff08\u5168\u79f0\uff1aHyperText Transfer Protocol over Secure Socket Layer\uff09\uff0c\u5176\u5b9e HTTPS \u5e76\u4e0d\u662f\u4e00\u4e2a\u65b0\u9c9c\u534f\u8bae\uff0cGoogle \u5f88\u65e9\u5c31\u5f00\u59cb\u542f\u7528\u4e86\uff0c\u521d\u8877\u662f\u4e3a\u4e86\u4fdd\u62a4\u6570\u636e\u5b89\u5168\u3002 \u8fd1\u4e24\u5e74\uff0cGoogle\u3001Baidu\u3001Facebook \u7b49\u8fd9\u6837\u7684\u4e92\u8054\u7f51\u5de8\u5934\uff0c\u4e0d\u8c0b\u800c\u5408\u5730\u5f00\u59cb\u5927\u529b\u63a8\u884c HTTPS\uff0c \u5f88\u591a\u56fd\u5185\u5916\u7684\u5927\u578b\u4e92\u8054\u7f51\u516c\u53f8\u4e5f\u90fd\u5df2\u7ecf\u542f\u7528\u4e86\u5168\u7ad9 HTTPS\uff0c\u8fd9\u4e5f\u662f\u672a\u6765\u4e92\u8054\u7f51\u53d1\u5c55\u7684\u8d8b\u52bf\u3002 \u4e3a\u9f13\u52b1\u5168\u7403\u7f51\u7ad9\u7684 HTTPS \u5b9e\u73b0\uff0cGoogle \u751a\u81f3\u8c03\u6574\u4e86\u641c\u7d22\u5f15\u64ce\u7b97\u6cd5\uff0c\u8ba9\u91c7\u7528 HTTPS \u7684\u7f51\u7ad9\u5728\u641c\u7d22\u4e2d\u6392\u540d\u66f4\u9760\u524d\u3002\u5e76\u4e14\u4ece 2017 \u5e74\u5f00\u59cb\uff0cChrome \u6d4f\u89c8\u5668\u5df2\u628a\u91c7\u7528 HTTP \u534f\u8bae\u7684\u7f51\u7ad9\u6807\u8bb0\u4e3a\u4e0d\u5b89\u5168\u7f51\u7ad9\uff0c\u82f9\u679c App Store \u4e2d\u7684\u6240\u6709\u5e94\u7528\u4e5f\u90fd\u5fc5\u987b\u4f7f\u7528 HTTPS \u52a0\u5bc6\u8fde\u63a5\uff1b\u5f53\u524d\u56fd\u5185\u7092\u7684\u5f88\u706b\u70ed\u7684\u5fae\u4fe1\u5c0f\u7a0b\u5e8f\u4e5f\u8981\u6c42\u5fc5\u987b\u4f7f\u7528 HTTPS \u534f\u8bae\uff1b\u65b0\u4e00\u4ee3\u7684 HTTP/2 \u534f\u8bae\u7684\u652f\u6301\u9700\u4ee5 HTTPS \u4e3a\u57fa\u7840\u3002\u56e0\u6b64\u60f3\u5fc5\u5728\u4e0d\u4e45\u7684\u5c06\u6765\uff0c\u5168\u7f51 HTTPS \u52bf\u5728\u5fc5\u884c\u3002 \u4f46\u662f\uff0c\u5982\u679c\u7f51\u7ad9\u60f3\u4f7f\u7528 HTTPS \u670d\u52a1\uff0c\u5219\u5fc5\u987b\u4e3a\u57df\u540d\u4ece\u6570\u5b57\u8bc1\u4e66\u6388\u6743\u673a\u6784\uff08CA\uff0cCertificate Authority\uff09\u7533\u8bf7\u76f8\u5173\u7684 SSL \u8bc1\u4e66\u3002\u4e3a\u6b64\uff0c\u53c8\u62cd\u4e91\u63d0\u4f9b\u4e86 SSL \u8bc1\u4e66\u7684\u4e00\u7ad9\u5f0f\u670d\u52a1\uff0c\u7528\u6237\u53ef\u76f4\u63a5\u5728\u53c8\u62cd\u4e91 SSL \u8bc1\u4e66\u7533\u8d2d \u5e73\u53f0\u7533\u8d2d\u5404\u7c7b SSL \u8bc1\u4e66\uff08\u5305\u62ec\u514d\u8d39\u7533\u8d2d DV SSL \u8bc1\u4e66\uff09\uff1b\u540c\u65f6\uff0c\u7528\u6237\u4e5f\u53ef\u81ea\u613f\u9009\u62e9\u5c06\u7533\u8d2d\u7684\u8bc1\u4e66\u4e00\u952e\u90e8\u7f72\u4e8e\u53c8\u62cd\u4e91 CDN \u5e73\u53f0\uff0c\u56e0\u5e73\u53f0\u5168\u5c40\u81ea\u52a8\u5316\u7ba1\u7406\uff0c\u91c7\u7528\u4e86\u6700\u4f18\u8d28\u7684 HTTPS \u52a0\u901f\u89e3\u51b3\u65b9\u6848\uff0c\u53ef\u5e2e\u52a9\u7528\u6237\u4ee5\u6700\u4f4e\u7684\u6210\u672c\uff0c\u4eab\u53d7\u6700\u4f18\u7684\u670d\u52a1\uff0c\u5b8c\u6210\u7f51\u7ad9 HTTP \u5230 HTTPS \u7684\u8f6c\u6362\u3002 \u540d\u8bcd\u89e3\u91ca \u00b6 HTTPS HTTPS\uff08\u5168\u79f0\uff1aHyperText Transfer Protocol over Secure Socket Layer\uff09\uff0c\u662f\u4ee5\u5b89\u5168\u4e3a\u76ee\u6807\u7684 HTTP \u901a\u9053\uff0c\u5373 HTTP \u7684\u5b89\u5168\u7248\u3002HTTPS \u7684\u5b89\u5168\u57fa\u7840\u662f SSL/TLS\uff0c\u5b83\u63d0\u4f9b\u4e86\u8eab\u4efd\u9a8c\u8bc1\u4e0e\u52a0\u5bc6\u901a\u8baf\u7684\u65b9\u6cd5\uff0c\u73b0\u5728\u88ab\u5e7f\u6cdb\u7528\u4e8e\u4e07\u7ef4\u7f51\u4e0a\u5b89\u5168\u654f\u611f\u7684\u901a\u8baf\uff0c\u6bd4\u5982\u4ea4\u6613\u3001\u652f\u4ed8\u7b49\u3002 SSL\uff08Secure Socket Layer\uff0c\u5b89\u5168\u5957\u63a5\u5b57\u5c42\uff09 SSL \u7531 Netscape \u516c\u53f8\u6240\u7814\u53d1\uff0c\u7528\u4ee5\u4fdd\u969c\u5728 Internet \u4e0a\u6570\u636e\u4f20\u8f93\u4e4b\u5b89\u5168\uff0c\u5229\u7528\u6570\u636e\u52a0\u5bc6 (Encryption) \u6280\u672f\uff0c\u53ef\u786e\u4fdd\u6570\u636e\u5728\u7f51\u7edc\u4e0a\u4f20\u8f93\u8fc7\u7a0b\u4e2d\u4e0d\u4f1a\u88ab\u622a\u53d6\u3002SSL \u534f\u8bae\u4f4d\u4e8e TCP/IP \u534f\u8bae\u4e0e\u5404\u79cd\u5e94\u7528\u5c42\u534f\u8bae\u4e4b\u95f4\uff0c\u4e3a\u6570\u636e\u901a\u8baf\u63d0\u4f9b\u5b89\u5168\u652f\u6301\u3002 TLS\uff08Transport Layer Security\uff0c\u4f20\u8f93\u5c42\u5b89\u5168\uff09 \u4f20\u8f93\u5c42\u52a0\u5bc6\u534f\u8bae\uff0c\u5176\u524d\u8eab\u662f SSL \u534f\u8bae\uff0c 1999 \u5e74\u7ecf\u8fc7 IETF\uff08The Internet Engineering Task Force \u56fd\u9645\u4e92\u8054\u7f51\u5de5\u7a0b\u4efb\u52a1\u7ec4\uff09 \u8ba8\u8bba\u548c\u89c4\u8303\u540e\uff0c\u6539\u540d\u4e3a TLS\u3002\u53d1\u5c55\u81f3\u4eca\u5df2\u7ecf\u6709 TLS 1.0\u3001TLS 1.1\u3001TLS 1.2 \u4e09\u4e2a\u7248\u672c\u3002TLS 1.3 \u6539\u52a8\u4f1a\u6bd4\u8f83\u5927\uff0c\u8fd8\u5904\u4e8e\u5f85\u53d1\u5e03\u9636\u6bb5\uff0c\u76ee\u524d\u4f7f\u7528\u6700\u5e7f\u6cdb\u7684\u662f TLS 1.1\u3001TLS 1.2\u3002 SSL \u8bc1\u4e66 SSL \u8bc1\u4e66\u5c31\u662f\u9075\u5b88 SSL \u534f\u8bae\u7684\u670d\u52a1\u5668\u6570\u5b57\u8bc1\u4e66\uff0c\u901a\u8fc7\u9a8c\u8bc1\u57df\u540d\u3001\u670d\u52a1\u5668\u8eab\u4efd\u540e\uff0c\u7531\u53d7\u4fe1\u4efb\u7684\u6570\u5b57\u8bc1\u4e66\u6388\u6743\u673a\u6784 CA \u9881\u53d1\uff0c\u5177\u6709\u670d\u52a1\u5668\u8eab\u4efd\u9a8c\u8bc1\u548c\u6570\u636e\u4f20\u8f93\u52a0\u5bc6\u7b49\u529f\u80fd\u3002 CA \u6570\u5b57\u8bc1\u4e66\u6388\u6743\u673a\u6784 \uff08CA\uff0cCertificate Authority\uff09 \u662f\u8d1f\u8d23\u53d1\u653e\u548c\u7ba1\u7406\u6570\u5b57\u8bc1\u4e66\u7684\u6743\u5a01\u673a\u6784\uff0c\u5e76\u4f5c\u4e3a\u7535\u5b50\u5546\u52a1\u4ea4\u6613\u4e2d\u53d7\u4fe1\u4efb\u7684\u7b2c\u4e09\u65b9\uff0c\u627f\u62c5\u516c\u94a5\u4f53\u7cfb\u4e2d\u516c\u94a5\u7684\u5408\u6cd5\u6027\u68c0\u9a8c\u7684\u8d23\u4efb\u3002 CSR\uff08Cerificate Signing Request\uff0c\u8bc1\u4e66\u8bf7\u6c42\u6587\u4ef6\uff09 CSR \u662f\u5236\u4f5c SSL \u8bc1\u4e66\u7684\u5fc5\u8981\u6587\u4ef6\uff0c\u901a\u5e38\u7531 CA \u673a\u6784\u81ea\u52a8\u751f\u6210\uff0c\u7528\u6237\u4e5f\u53ef\u81ea\u5df1\u521b\u5efa\uff0c\u5728\u751f\u6210 CSR \u6587\u4ef6 \u7684\u540c\u65f6\u4e5f\u4f1a\u751f\u6210\u79c1\u94a5\uff08\u7531\u7528\u6237\u81ea\u5df1\u4fdd\u7ba1\uff09\uff0c\u7528\u6237\u53ea\u9700\u628a CSR \u6587\u4ef6\u63d0\u4ea4\u7ed9 CA\uff0cCA \u4f7f\u7528\u5176\u6839\u8bc1\u4e66\u79c1\u94a5\u5bf9 CSR \u6587\u4ef6\u7b7e\u540d\u5373\u751f\u6210\u4e86\u7528\u6237\u7684\u8bc1\u4e66\u3002 RSA RSA \u516c\u94a5\u52a0\u5bc6\u7b97\u6cd5\u662f 1977 \u5e74\u7531 Ron Rivest\u3001\u007fAdi Shamir\u3001Leonard Adleman \u4e00\u8d77\u63d0\u51fa\u7684\uff0c\u5b83\u662f\u7b2c\u4e00\u4e2a\u80fd\u540c\u65f6\u7528\u4e8e\u52a0\u5bc6\u548c\u6570\u5b57\u7b7e\u540d\u7684\u7b97\u6cd5\uff0c\u4ece\u63d0\u51fa\u5230\u73b0\u4eca\u7ecf\u5386\u4e86\u5404\u79cd\u653b\u51fb\u7684\u8003\u9a8c\uff0c\u80fd\u591f\u62b5\u6297\u5230\u76ee\u524d\u4e3a\u6b62\u5df2\u77e5\u7684\u7edd\u5927\u591a\u6570\u5bc6\u7801\u653b\u51fb\uff0c\u5df2\u88ab ISO \u63a8\u8350\u4e3a\u516c\u94a5\u6570\u636e\u52a0\u5bc6\u6807\u51c6 ECC ECC\uff08Elliptic Curves Cryptography\uff0c\u692d\u5706\u66f2\u7ebf\u52a0\u5bc6\u7b97\u6cd5\uff09\u4e5f\u662f\u4e00\u79cd\u516c\u94a5\u52a0\u5bc6\u7b97\u6cd5\uff0c\u4e0e\u4e3b\u6d41\u7684 RSA \u7b97\u6cd5\u76f8\u6bd4\uff0cECC \u7b97\u6cd5\u53ef\u4ee5\u4f7f\u7528\u8f83\u77ed\u7684\u5bc6\u94a5\u8fbe\u5230\u76f8\u540c\u7684\u5b89\u5168\u7a0b\u5ea6\uff0c\u5176\u5b89\u5168\u6027\u66f4\u9ad8\u3001\u5904\u7406\u901f\u5ea6\u66f4\u5feb\u3002\u5176\u6570\u5b66\u57fa\u7840\u662f\u5229\u7528\u692d\u5706\u66f2\u7ebf\u4e0a\u7684\u6709\u7406\u70b9\u6784\u6210 Abel \u52a0\u6cd5\u7fa4\u4e0a\u692d\u5706\u79bb\u6563\u5bf9\u6570\u7684\u8ba1\u7b97\u56f0\u96be\u6027\u3002 \u57df\u540d\u578b SSL \u8bc1\u4e66\uff08DV SSL\uff09 \u5373\u8bc1\u4e66\u9881\u5e03\u673a\u6784\u53ea\u5bf9\u57df\u540d\u7684\u6240\u6709\u8005\u8fdb\u884c\u5728\u7ebf\u68c0\u67e5\uff0c\u901a\u5e38\u662f\u9a8c\u8bc1\u57df\u540d\u4e0b\u67d0\u4e2a\u6307\u5b9a\u6587\u4ef6\u7684\u5185\u5bb9\uff0c\u6216\u8005\u9a8c\u8bc1\u4e0e\u57df\u540d\u76f8\u5173\u7684\u67d0\u6761 TXT \u8bb0\u5f55\uff1b\u6bd4\u5982\u8bbf\u95ee [http|https]://www.domain.com/.../test.txt\uff0c\u6587\u4ef6\u5185\u5bb9\uff1a 2016082xxxxx39w7b20nelfa\uff1b\u6216\u6dfb\u52a0\u4e00\u6761 TXT \u8bb0\u5f55\uff1awww.domain.com \u2013> TXT \u2013> 20170xxxxxqmkiby43hpvy8 \u4f01\u4e1a\u578b SSL \u8bc1\u4e66\uff08OV SSL\uff09 \u662f\u8981\u8d2d\u4e70\u8005\u63d0\u4ea4\u7ec4\u7ec7\u673a\u6784\u8d44\u6599\u548c\u5355\u4f4d\u6388\u6743\u4fe1\u7b49\u5728\u5b98\u65b9\u6ce8\u518c\u7684\u51ed\u8bc1\uff0c\u8bc1\u4e66\u9881\u53d1\u673a\u6784\u5728\u7b7e\u53d1 SSL \u8bc1\u4e66\u524d\u4e0d\u4ec5\u4ec5\u8981\u68c0\u9a8c\u57df\u540d\u6240\u6709\u6743\uff0c\u8fd8\u5fc5\u987b\u5bf9\u8fd9\u4e9b\u8d44\u6599\u7684\u771f\u5b9e\u5408\u6cd5\u6027\u8fdb\u884c\u591a\u65b9\u67e5\u9a8c\uff0c\u53ea\u6709\u901a\u8fc7\u9a8c\u8bc1\u7684\u624d\u80fd\u9881\u53d1 SSL \u8bc1\u4e66\u3002 \u589e\u5f3a\u578b SSL \u8bc1\u4e66\uff08EV SSL\uff09 \u4e0e\u5176\u4ed6 SSL \u8bc1\u4e66\u4e00\u6837\uff0c\u90fd\u662f\u57fa\u4e8e SSL/TLS \u5b89\u5168\u534f\u8bae\uff0c\u4f46\u662f\u9a8c\u8bc1\u6d41\u7a0b\u66f4\u52a0\u5177\u4f53\u8be6\u7ec6\uff0c\u9a8c\u8bc1\u6b65\u9aa4\u66f4\u591a\uff0c\u8fd9\u6837\u4e00\u6765\u8bc1\u4e66\u6240\u7ed1\u5b9a\u7684\u7f51\u7ad9\u5c31\u66f4\u52a0\u7684\u53ef\u9760\u3001\u53ef\u4fe1\u3002\u5b83\u8ddf\u666e\u901a SSL \u8bc1\u4e66\u7684\u533a\u522b\u4e5f\u662f\u660e\u663e\u7684\uff0c\u5b89\u5168\u6d4f\u89c8\u5668\u7684\u5730\u5740\u680f\u53d8\u7eff\uff0c\u5982\u679c\u662f\u4e0d\u53d7\u4fe1\u7684 SSL \u8bc1\u4e66\u5219\u62d2\u7edd\u663e\u793a\uff0c\u5982\u679c\u662f\u9493\u9c7c\u7f51\u7ad9\uff0c\u5730\u5740\u680f\u5219\u4f1a\u53d8\u6210\u7ea2\u8272\uff0c\u4ee5\u8b66\u793a\u7528\u6237\u3002 \u4ea7\u54c1\u529f\u80fd \u00b6 \u7533\u8d2d SSL \u8bc1\u4e66 \u00b6 \u53c8\u62cd\u4e91\u63d0\u4f9b\u4e86 Symantec\u3001GeoTrust\u3001TrustAsia\u3001Let\u2019s Encrypt \u7684\u5404\u7c7b DV/OV/EV SSL \u8bc1\u4e66\u7684 \u7533\u8d2d\u670d\u52a1 \uff0c\u5176\u4e2d TrustAsia\u3001Let\u2019s Encrypt DV SSL \u5355\u57df\u540d\u8bc1\u4e66\u53ef\u514d\u8d39\u7533\u8bf7\u3002 \u5feb\u901f\u7b7e\u53d1 \u00b6 \u586b\u5199\u76f8\u5173\u4fe1\u606f\uff0c\u4e00\u952e\u7533\u8d2d\uff0c\u6b65\u9aa4\u7b80\u5355\u65b9\u4fbf\uff0c\u6d41\u7a0b\u5168\u81ea\u52a8\u5316\u5904\u7406\uff0c\u65e0\u9700\u4eba\u5de5\u534f\u52a9\uff0c\u7533\u8d2d\u5468\u671f\u5927\u5927\u7f29\u77ed\uff0c\u4f7f\u8bc1\u4e66\u5f97\u5230\u5feb\u901f\u7b7e\u53d1\u3002 \u81ea\u52a9\u5316\u7ba1\u7406 \u00b6 \u53c8\u62cd\u4e91\u5e73\u53f0\u5373\u652f\u6301\u7533\u8d2d\u4e0a\u8ff0\u5404\u7c7b\u8bc1\u4e66\uff0c\u540c\u65f6\u4e5f\u652f\u6301\u4e0a\u4f20\u548c\u7ba1\u7406\u4efb\u610f\u673a\u6784\u7b7e\u53d1\u7684\u8bc1\u4e66\uff0c\u6240\u6709 SSL \u8bc1\u4e66\u5747\u81ea\u52a9\u5316\u7ba1\u7406\uff0c\u96c6\u4e2d\u76d1\u6d4b\uff0c\u8ba9\u7528\u6237\u4f7f\u7528\u66f4\u52a0\u653e\u5fc3\u3001\u5b89\u5fc3\u3002 \u4e00\u952e\u90e8\u7f72 \u00b6 \u63d0\u4f9b\u4e00\u952e\u90e8\u7f72 SSL \u8bc1\u4e66\u5230\u53c8\u62cd\u4e91 CDN \u4ea7\u54c1\u7684\u529f\u80fd\uff0c\u7528\u6237\u53ef\u81ea\u613f\u9009\u62e9\uff0c\u5e2e\u52a9\u7528\u6237\u66f4\u5feb\u6377\u5730\u4fdd\u62a4\u6570\u636e\u5b89\u5168\uff0c\u5b8c\u6210\u7f51\u7ad9 HTTP \u5230 HTTPS \u7684\u8f6c\u6362\u3002 \u4ea7\u54c1\u4f18\u52bf \u00b6 \u514d\u8d39\u7533\u8bf7 SSL \u8bc1\u4e66 \u00b6 \u53c8\u62cd\u4e91\u63d0\u4f9b\u4e86\u4e24\u6b3e\u8bc1\u4e66\u7684\u514d\u8d39\u7533\u8bf7\u65b9\u6848\uff0c\u7528\u6237\u53ef\u901a\u8fc7 SSL \u8bc1\u4e66\u7533\u8d2d \u5e73\u53f0\uff0c\u514d\u8d39\u7533\u8bf7 Symantec-TrustAsia\u3001Let\u2019s Encrypt \u7684 DV SSL \u8bc1\u4e66\uff0c\u5e2e\u52a9\u7528\u6237\u96f6\u6210\u672c\u5b9e\u73b0\u5168\u7ad9\u90e8\u7f72 HTTPS\u3002\u5e76\u4e14\u8fd8\u5b9e\u73b0\u4e86 Let\u2019s Encrypt \u8bc1\u4e66\u5230\u671f\u81ea\u52a8\u7eed\u7b7e\uff0c\u7528\u6237\u65e0\u9700\u62c5\u5fc3\u8bc1\u4e66\u8fc7\u671f\u65f6\u95f4\uff0c\u964d\u4f4e\u7ef4\u62a4\u6210\u672c\u3002 \u56fd\u9645\u9886\u5148 CA \u673a\u6784\u5408\u4f5c \u00b6 \u53c8\u62cd\u4e91\u643a\u624b TrustAsia \u4e0e\u56fd\u9645\u9876\u7ea7\u6570\u5b57\u8bc1\u4e66\u63d0\u4f9b\u5546 Symantec\u3001GeoTrust \u5408\u4f5c\uff0c\u63a8\u51fa\u4e86\u57df\u540d\u578b SSL \u8bc1\u4e66\uff08DV SSL\uff09\uff0c\u4f01\u4e1a\u578b SSL \u8bc1\u4e66\uff08OV SSL\uff09\u3001\u589e\u5f3a\u578b SSL \u8bc1\u4e66\uff08EV SSL\uff09\u7684\u7533\u8d2d\uff1b\u5176\u4e2d\u57df\u540d\u578b DV SSL \u5355\u57df\u540d\u8bc1\u4e66\u5f53\u524d\u514d\u8d39\u7533\u8d2d\u3002 Symantec \u662f\u5168\u7403\u6700\u5927\u7684\u4fe1\u606f\u5b89\u5168\u670d\u52a1\u63d0\u4f9b\u5546\uff0c \u5176\u9881\u53d1\u7684\u8bc1\u4e66\u80fd\u88ab\u6240\u6709\u6d4f\u89c8\u5668\u652f\u6301\u4e0e\u4fe1\u4efb\uff0c\u53ef\u786e\u4fdd\u7528\u6237\u8bbf\u95ee\u65f6\u6d4f\u89c8\u5668\u7ed9\u4e88\u6b63\u786e\u7684\u7f51\u9875\u5b89\u5168\u63d0\u793a\uff0c\u786e\u4fdd\u4e86\u7528\u6237\u5229\u76ca\u6700\u5927\u5316\uff0c\u8ba9\u7528\u6237\u771f\u6b63\u611f\u5230\u5b89\u5168\u53ef\u9760\u3002 GeoTrust \u662f\u5168\u7403\u7b2c\u4e8c\u5927\u6570\u5b57\u8bc1\u4e66\u63d0\u4f9b\u5546\uff0c\u4e5f\u662f\u8eab\u4efd\u8ba4\u8bc1\u548c\u4fe1\u4efb\u8ba4\u8bc1\u9886\u57df\u7684\u9886\u5bfc\u8005\uff0c \u8be5\u516c\u53f8\u5404\u79cd\u5148\u8fdb\u7684\u6280\u672f\u4f7f\u5f97\u4efb\u4f55\u5927\u5c0f\u7684\u673a\u6784\u548c\u516c\u53f8\u90fd\u80fd\u5b89\u5168\u3001\u4f4e\u6210\u672c\u5730\u90e8\u7f72 SSL \u6570\u5b57\u8bc1\u4e66\u548c\u5b9e\u73b0\u5404\u79cd\u8eab\u4efd\u8ba4\u8bc1\u3002 TrustAsia\u00ae\uff08\u4e9a\u6d32\u8bda\u4fe1\uff09\u662f\u4e9a\u6570\u4fe1\u606f\u79d1\u6280\uff08\u4e0a\u6d77\uff09\u6709\u9650\u516c\u53f8\u5e94\u7528\u4e8e\u4fe1\u606f\u5b89\u5168\u9886\u57df\u7684\u54c1\u724c\uff0c \u4e13\u4e1a\u4e3a\u4f01\u4e1a\u63d0\u4f9b\u5305\u542b\u6570\u5b57\u8bc1\u4e66\u5728\u5185\u7684\u6240\u6709\u7f51\u7edc\u5b89\u5168\u670d\u52a1\uff0c\u662fSymantec\u2122\uff08\u8d5b\u95e8\u94c1\u514b\uff09\u7684\u767d\u91d1\u5408\u4f5c\u4f19\u4f34\u3002 \u4e00\u952e\u5b8c\u6210\u8bc1\u4e66\u7533\u8bf7 \u00b6 \u7528\u6237\u53ea\u9700\u63d0\u4ea4\u57df\u540d\uff0c\u586b\u5199\u5fc5\u8981\u4fe1\u606f\uff0c\u70b9\u51fb\u7533\u8bf7\u5373\u53ef\u5b8c\u6210\u8bc1\u4e66\u7684\u7533\u8d2d\uff1b\u5bf9\u4e8e\u514d\u8d39\u8bc1\u4e66\uff0c\u7cfb\u7edf\u4f1a\u81ea\u52a8\u5c06\u8bc1\u4e66\u90e8\u7f72\u4e8e CDN \u5e73\u53f0\uff1b\u5bf9\u4e8e\u4ed8\u8d39\u8bc1\u4e66\uff0c\u7528\u6237\u53ef\u6309\u9700\u4e00\u952e\u5c06\u8bc1\u4e66\u90e8\u7f72\u4e8e CDN \u5e73\u53f0\uff1b\u4e24\u8005\u90fd\u53ef\u4ee5\u4e0e\u53c8\u62cd\u4e91 CDN \u4ea7\u54c1\u5b8c\u7f8e\u878d\u5408\uff0c\u5b9e\u73b0\u5168\u7ad9 HTTPS \u52a0\u901f\u670d\u52a1\u3002 \u7b80\u5355\u6613\u7528\uff0c\u7ba1\u7406\u65b9\u4fbf \u00b6 \u65e0\u8bba\u662f\u7528\u6237\u4e0a\u4f20\u7684\u81ea\u6709\u8bc1\u4e66\uff0c\u8fd8\u662f\u901a\u8fc7\u53c8\u62cd\u4e91\u7533\u8d2d\u7684\u5404\u7c7b\u8bc1\u4e66\uff0c\u90fd\u53ef\u5728 SSL \u8bc1\u4e66\u670d\u52a1 \u4e2d\u7edf\u4e00\u7ba1\u7406\uff0c\u65b9\u4fbf\u7528\u6237\u5bf9\u8bc1\u4e66\u8fdb\u884c\u5404\u79cd\u64cd\u4f5c\uff0c\u5e76\u4e14\u5168\u7a0b\u65e0\u9700\u4eba\u5de5\u534f\u52a9\uff0c\u516c\u94a5\u3001\u79c1\u94a5\u66f4\u52a0\u5b89\u5168\uff0c\u505a\u5230\u8ba9\u7528\u6237\u7701\u5fc3\u3001\u653e\u5fc3\uff0c\u540c\u65f6\u63d0\u5347\u4e86\u7528\u6237\u7684\u5de5\u4f5c\u6548\u7387\u3002 \u63d0\u5347\u7f51\u7ad9\u641c\u7d22\u6392\u540d \u00b6 Google \u5728 2014 \u5e74\u53d1\u5e03\u7684\u5b98\u65b9\u535a\u5ba2\u4e2d\u6307\u51fa\uff0c\u5df2\u7ecf\u8c03\u6574\u5176\u641c\u7d22\u5f15\u64ce\u7b97\u6cd5\uff0c\u91c7\u7528 HTTPS \u52a0\u5bc6\u7684\u7f51\u7ad9\u5728\u641c\u7d22\u7ed3\u679c\u4e2d\u7684\u6392\u540d\u5c06\u4f1a\u66f4\u9ad8\u3002\u5176\u76ee\u6807\u975e\u5e38\u7b80\u5355\uff0c\u5c31\u662f\u8981\u9f13\u52b1\u5168\u7403\u7f51\u7ad9\u91c7\u7528\u5b89\u5168\u5ea6\u66f4\u9ad8\u7684 HTTPS \u4ee5\u4fdd\u8bc1\u8bbf\u5ba2\u5b89\u5168\u3002\u56e0\u6b64\u7f51\u7ad9\u91c7\u7528 HTTPS \u534f\u8bae\uff0c\u53ef\u5438\u5f15\u66f4\u591a\u7684\u7528\u6237\u8fdb\u884c\u8bbf\u95ee\uff0c\u63d0\u5347\u7f51\u7ad9\u7684\u4ef7\u503c\uff0c\u589e\u521b\u8425\u6536\u3002 \u4f7f\u7528\u573a\u666f \u00b6 \u7528\u6237\u4ece\u53c8\u62cd\u4e91\u7533\u8d2d SSL \u8bc1\u4e66\u540e\uff0c\u6b64 SSL \u8bc1\u4e66\u53ef\u4f7f\u7f51\u7ad9\u5b8c\u6210\u7531 HTTP \u5230 HTTPS \u7684\u8f6c\u6362\uff0c\u7531\u4e8e HTTPS \u91c7\u7528\u4e86 SSL/TLS \u52a0\u5bc6\u5c42\uff0c\u53ef\u4fdd\u8bc1\u7f51\u7ad9\u6570\u636e\u7684\u540e\u7eed\u4f20\u8f93\u66f4\u52a0\u5b89\u5168\u53ef\u9760\uff0c\u9632\u6b62\u6d41\u91cf\u52ab\u6301\uff0c\u9632\u5192\u5145\u3001\u9493\u9c7c\u7b49\u3002 \u5982\u679c\u7528\u6237\u540c\u65f6\u8d2d\u4e70\u4e86\u53c8\u62cd\u4e91\u7684 CDN \u670d\u52a1\uff0c\u4e5f\u53ef\u4ee5\u9009\u62e9\u5c06 SSL \u8bc1\u4e66\u90e8\u7f72\u4e8e CDN \u52a0\u901f\u4ea7\u54c1\u4e2d\uff0c\u5728\u5b9e\u73b0\u7f51\u7ad9 HTTPS \u5316\u7684\u540c\u65f6\uff0c\u4e5f\u53ef\u4eab\u53d7\u53c8\u62cd\u4e91\u4f18\u8d28\u7684 HTTPS \u52a0\u901f\u89e3\u51b3\u65b9\u6848\u3002 \u7248\u672c\u8fed\u4ee3 \u00b6 V1.0 2016 \u5e74 12 \u6708 21 \u65e5 let\u2019s encrypt DV SSL \u5355\u57df\u540d\u8bc1\u4e66\u514d\u8d39\u7533\u8bf7\u670d\u52a1\u4e0a\u7ebf \u5728 CDN \u5168\u7f51\u3001\u76f4\u64ad\u52a0\u901f\u914d\u7f6e\u4e2d\u589e\u52a0\u4e86 HTTPS \u914d\u7f6e\u9879 V1.1 2017 \u5e74 2 \u6708 7 \u65e5 TrustAsia DV SSL \u5355\u57df\u540d\u8bc1\u4e66\uff08\u7531 Symantec \u7b7e\u53d1\uff09\u514d\u8d39\u7533\u8bf7\u670d\u52a1\u4e0a\u7ebf V2.0 2017 \u5e74 3 \u6708 30 \u65e5 Symantec\u3001GeoTrust\u3001TrustAsia \u7684\u5404\u7c7b\u4ed8\u8d39 DV SSL\u3001OV SSL\u3001EV SSL \u8bc1\u4e66\u7533\u8d2d\u670d\u52a1\u4e0a\u7ebf \u8d2d\u4e70\u6307\u5bfc \u00b6 \u8d2d\u4e70\u6d41\u7a0b \u00b6 \u901a\u8fc7\u53c8\u62cd\u4e91\u8d2d\u4e70 SSL \u8bc1\u4e66\uff0c\u6d41\u7a0b\u66f4\u52a0\u7b80\u6d01\u65b9\u4fbf\uff1a \u4ef7\u683c\u603b\u89c8 \u00b6 \u4ef7\u683c\u5217\u8868\uff1a \u8bf4\u660e\uff1a \u4e00\u3001\u5355\u57df\u540d\u3001\u6cdb\u57df\u540d\u8bc1\u4e66\uff0c\u56e0\u53ea\u6d89\u53ca\u5230\u4e00\u4e2a\u57df\u540d\uff0c\u6240\u4ee5\u5176\u5355\u4ef7\u5373\u4e0a\u8ff0\u8868\u683c\u4e2d\u7684\u4ef7\u683c\uff1b \u4e8c\u3001\u5bf9\u4e8e\u589e\u5f3a\u578b EV SSL \u8bc1\u4e66\uff0c\u53ea\u6709\u591a\u57df\u540d\u8bc1\u4e66\uff0c\u6ca1\u6709\u591a\u57df\u540d\u6cdb\u57df\u540d\u8bc1\u4e66\uff1b \u4e09\u3001\u591a\u57df\u540d\u8bc1\u4e66\u3001\u591a\u57df\u540d\u6cdb\u57df\u540d\u8bc1\u4e66\u7684\u4ef7\u683c\u8ba1\u7b97\u5982\u4e0b\uff1a Symantec \u54c1\u724c \u8ba1\u7b97\u516c\u5f0f\uff08\u4ee5\u4e00\u5e74\u6709\u6548\u671f\u8bc1\u4e66\u4e3a\u4f8b\uff09\uff1a \u5047\u8bbe\uff1a 1\u5e74\u6807\u51c6\u57df\u540d\u4ef7\u683c = A \uff1b \u6807\u51c6\u57df\u540d\u4e2a\u6570 = B 1\u5e74\u6cdb\u57df\u540d\u4ef7\u683c = C \uff1b\u6cdb\u57df\u540d\u4e2a\u6570 = D 1\u5e74\u6807\u51c6\u57df\u540d\u4e13\u4e1a\u7248\u4ef7\u683c = E 1\u5e74\u6cdb\u57df\u540d\u4e13\u4e1a\u7248\u4ef7\u683c = F \u5219\uff1a \u591a\u57df\u540d\u8bc1\u4e66\u4ef7\u683c = A * B \u591a\u57df\u540d\u4e13\u4e1a\u7248\u8bc1\u4e66\u4ef7\u683c = E * B \u591a\u57df\u540d\u6cdb\u57df\u540d\u8bc1\u4e66\u4ef7\u683c = A * B + C * D \u591a\u57df\u540d\u6cdb\u57df\u540d\u4e13\u4e1a\u7248\u8bc1\u4e66\u4ef7\u683c = E * B + F * D Geotrust\u3001TrustAsia \u54c1\u724c \u9ed8\u8ba4\u652f\u63015\u4e2a\u6807\u51c6\u57df\u540d\uff08\u9ed8\u8ba4\u57df\u540d\u4e2d\u4e0d\u5305\u542b\u6cdb\u57df\u540d\uff09\uff0c\u8ba1\u7b97\u516c\u5f0f\uff08\u4ee5\u4e00\u5e74\u6709\u6548\u671f\u8bc1\u4e66\u4e3a\u4f8b\uff09\uff1a \u5047\u8bbe\uff1a 1\u5e74\u6807\u51c6\u57df\u540d\u4ef7\u683c = A \uff1b\u6807\u51c6\u57df\u540d\u4e2a\u6570 = B 1\u5e74\u6cdb\u57df\u540d\u4ef7\u683c = C \uff1b\u6cdb\u57df\u540d\u4e2a\u6570 = D 1\u5e74\u6807\u51c6\u57df\u540d\u989d\u5916\u4ef7\u683c = E \u5219\uff1a \u591a\u57df\u540d\u8bc1\u4e66\u4ef7\u683c = A + E * ( B - 5 ) \u5982\u679c B - 5 < 0 \u5219\u6309 0 \u8ba1\u7b97 \u591a\u57df\u540d\u6cdb\u57df\u540d\u8bc1\u4e66\u4ef7\u683c = A + E * ( B - 5 ) + C * D \u5982\u679c B - 5 < 0 \u5219\u6309 0 \u8ba1\u7b97 \u9000\u6b3e\u670d\u52a1 \u00b6 \u6761\u4ef6 \u7533\u8d2d\u7684 SSL \u8bc1\u4e66\u5df2\u7531 CA \u673a\u6784\u9881\u53d1\u6210\u529f\u7684\uff0c\u5219\u4e0d\u80fd\u9000\u6b3e\uff1b \u514d\u8d39\u7533\u8bf7\u7684\u57df\u540d\u578b\uff08DV SSL\uff09\u8bc1\u4e66\u4e0d\u652f\u6301\u9000\u6b3e\uff1b \u7533\u8d2d\u7684 SSL \u8bc1\u4e66\u5728\u4fe1\u606f\u63d0\u4ea4\u5ba1\u6838\u524d\u6216\u7533\u8d2d\u5931\u8d25\u540e\u53ef\u514d\u8d39\u9000\u6b3e\uff1b \u6d41\u7a0b \u76ee\u524d\u6682\u65f6\u4ec5\u652f\u6301\u901a\u8fc7\u63d0\u4ea4\u5de5\u5355\u7684\u65b9\u5f0f\u8fdb\u884c\u9000\u6b3e\u7533\u8bf7\u3002 \u8bc1\u4e66\u540a\u9500 \u00b6 \u5982\u679c\u7528\u6237\u53d1\u73b0\u6e90\u7ad9\u670d\u52a1\u5668\u88ab\u653b\u7834\u6216\u5176\u4ed6\u539f\u56e0\u5bfc\u81f4 SSL \u8bc1\u4e66\u79c1\u94a5\u6cc4\u9732\uff0c\u5219\u53ef\u4ee5\u9009\u62e9\u540a\u9500\u6b64\u8bc1\u4e66\uff1b\u8bc1\u4e66\u540a\u9500\u540e\uff0c\u5404\u6d4f\u89c8\u5668\u3001\u5ba2\u6237\u7aef\u7b49\u5c06\u4e0d\u518d\u4fe1\u4efb\u5df2\u540a\u9500\u7684\u8bc1\u4e66\uff0c\u4f1a\u51fa\u73b0\u4e0d\u5b89\u5168\u63d0\u9192\uff0c\u4e3e\u4f8b\u53c2\u8003 \u8fd9\u91cc \u3002 \u76ee\u524d\u6682\u65f6\u4ec5\u652f\u6301\u901a\u8fc7\u63d0\u4ea4\u5de5\u5355\u7684\u65b9\u5f0f\u8fdb\u884c\u8bc1\u4e66\u540a\u9500\u7533\u8bf7\u3002 \u5feb\u901f\u5165\u95e8 \u00b6 \u53c8\u62cd\u4e91\u643a\u624b TrustAsia \u4e0e Symantec\u3001GeoTrust \u8fbe\u6210\u6218\u7565\u5408\u4f5c\uff0c\u63a8\u51fa\u4e86\u5404\u7c7b\u57df\u540d\u578b DV SSL \u3001\u4f01\u4e1a\u578b OV SSL \u3001\u589e\u5f3a\u578b EV SSL \u8bc1\u4e66\u7684\u7533\u8d2d\uff1b\u5176\u4e2d\u6709\u6548\u671f\u4e3a\u4e00\u5e74\u7684 TrustAsia \u57df\u540d\u578b DV SSL \u5355\u57df\u540d\u8bc1\u4e66\u5f53\u524d\u514d\u8d39\u7533\u8bf7\uff0c\u539f\u4ef7 1900 \u5143/\u5e74\u3002 \u53c8\u62cd\u4e91\u8fd8\u4e0e\u56fd\u9645\u8bc1\u4e66\u63d0\u4f9b\u5546 Let\u2019s Encrypt \u5408\u4f5c\uff0c\u4e3a\u7528\u6237\u514d\u8d39\u63d0\u4f9b\u4e86\u53e6\u4e00\u6b3e DV SSL \u8bc1\u4e66\u7684\u7533\u8bf7\uff0c\u8bc1\u4e66\u5230\u671f\u4f1a\u81ea\u52a8\u7eed\u7b7e\uff0c\u64cd\u4f5c\u7b80\u5355\u65b9\u4fbf\uff0c\u4e00\u952e\u5b8c\u6210\u8bc1\u4e66\u7684\u7533\u8bf7\u4e0e\u90e8\u7f72\uff0c\u7528\u6237\u53ef\u6839\u636e\u81ea\u8eab\u60c5\u51b5\uff0c\u591a\u91cd\u9009\u62e9\uff0c\u6ee1\u8db3\u4e0d\u540c\u573a\u666f\u7684\u9700\u6c42\u3002 \u8be6\u7ec6\u64cd\u4f5c\u6b65\u9aa4\u5982\u4e0b\uff1a \u4ed8\u8d39\u8bc1\u4e66\u7533\u8d2d \u00b6 \u7b2c\u4e00\u6b65\uff1a \u6ce8\u518c \u53c8\u62cd\u4e91\u8d26\u53f7\uff0c\u5e76\u5b8c\u6210 \u5b9e\u540d\u8ba4\u8bc1 \uff1b \u7b2c\u4e8c\u6b65\uff1a\u8fdb\u5165 SSL \u8bc1\u4e66\u670d\u52a1\uff0c\u5de5\u5177\u7bb1 -> SSL \u8bc1\u4e66\u670d\u52a1 -> \u7533\u8d2d\u8bc1\u4e66\uff1b \u7b2c\u4e09\u6b65\uff1a\u70b9\u51fb\u53f3\u4e0a\u89d2\u7684 \u7533\u8d2d\u8bc1\u4e66 \uff0c\u5982\u4e0b\u56fe\u6240\u793a\uff0c\u9009\u62e9\u8bc1\u4e66\u54c1\u724c\uff0c\u5e76\u9009\u62e9\u9700\u8981\u7533\u8d2d\u7684\u8bc1\u4e66\u7c7b\u578b\u3001\u6709\u6548\u671f\u7b49\uff1b \u7b2c\u56db\u6b65\uff1a\u6838\u5bf9\u7533\u8d2d\u4fe1\u606f\uff1b \u7b2c\u4e94\u6b65\uff1a\u786e\u8ba4\u4ed8\u6b3e\uff1b \u4e3a\u9632\u6b62\u6076\u610f\u64cd\u4f5c\uff0c\u53c8\u62cd\u4e91\u63d0\u4f9b\u4e86\u652f\u4ed8\u9a8c\u8bc1\u529f\u80fd\uff0c\u4ed8\u6b3e\u65f6\uff0c\u5c06\u4f1a\u53d1\u9001\u9a8c\u8bc1\u7801\u5230 \u6ce8\u518c \u53c8\u62cd\u4e91\u8d26\u53f7\u65f6\u6240\u4f7f\u7528\u7684\u624b\u673a\u53f7\u4e0a\u3002 \u7b2c\u516d\u6b65\uff1a\u652f\u4ed8\u5b8c\u6210\u4ee5\u540e\uff0c\u8ba2\u5355\u8fdb\u5165 \u8d2d\u4e70\u5217\u8868 \uff0c\u5904\u4e8e \u5f85\u5b8c\u6210 \u72b6\u6001\uff0c \u7b2c\u4e03\u6b65\uff1a\u70b9\u51fb \u8865\u5168 \u6309\u94ae\uff0c\u586b\u5199\u57df\u540d\u3001\u516c\u53f8\u3001\u8054\u7cfb\u4eba\u7b49\u4fe1\u606f\uff0c \u8bf4\u660e\uff1a\u7533\u8d2d\u591a\u57df\u540d\u8bc1\u4e66\u3001\u591a\u57df\u540d\u6cdb\u57df\u540d\u8bc1\u4e66\u65f6\uff0c\u4e3b\u57df\u540d\u53ea\u80fd\u586b\u5199\u6807\u51c6\u57df\u540d\u3002 \u7b2c\u516b\u6b65\uff1a\u4fe1\u606f\u586b\u5199\u5b8c\u6210\uff0c\u70b9\u51fb\u63d0\u4ea4\u540e\uff0c\u4f1a\u51fa\u73b0\u5982\u4e0b\u4e24\u79cd\u60c5\u51b5 \uff081\uff09\u5982\u679c\u7533\u8d2d\u7684\u662f OV \u6216 EV SSL \u8bc1\u4e66\uff0c\u5219\u8fdb\u884c \u4e0b\u8f7d\u300a\u4fe1\u606f\u786e\u8ba4\u51fd\u300b \u4e0a\u4f20\u300a\u4fe1\u606f\u786e\u8ba4\u51fd\u300b\uff0c\u4e0a\u4f20\u6587\u4ef6\u4e0d\u80fd\u5927\u4e8e2M \u300a\u4fe1\u606f\u786e\u8ba4\u51fd\u300b\u4e0a\u4f20\u6210\u529f\u540e\uff0c\u7533\u8d2d\u8fdb\u5165 CA \u673a\u6784\u4fe1\u606f\u5ba1\u6838\u7684\u72b6\u6001\uff0c\u5ba1\u6838\u4e00\u822c\u9700\u89813\uff5e5\u4e2a\u5de5\u4f5c\u65e5 \uff082\uff09\u5982\u679c\u7533\u8d2d\u7684\u662f DV SSL \u8bc1\u4e66\uff0c\u5219\u8fdb\u884c \u5728 \u8bc1\u4e66\u7533\u8d2d \u754c\u9762\uff0c\u70b9\u51fb \u7533\u8bf7\u7ed3\u679c \u627e\u5230\u5bf9\u5e94\u7684\u7533\u8d2d\u8bb0\u5f55\uff0c\u70b9\u51fb \u67e5\u770b \u83b7\u53d6\u76f8\u5173\u9a8c\u8bc1\u4fe1\u606f\uff0c\u9a8c\u8bc1\u64cd\u4f5c\u53ef\u53c2\u8003 \u8fd9\u91cc \u6dfb\u52a0\u597d\u9a8c\u8bc1\u4fe1\u606f\u540e\uff0c\u7533\u8d2d\u8fdb\u5165 CA \u673a\u6784\u4fe1\u606f\u5ba1\u6838\u9a8c\u8bc1\u72b6\u6001\uff0c\u4e00\u822c\u9700\u8981 1 \u4e2a\u5de5\u4f5c\u65e5 \u7b2c\u4e5d\u6b65\uff1a\u67e5\u770b\u7533\u8bf7\u7ed3\u679c\uff0c\u5de5\u5177\u7bb1 -> SSL \u8bc1\u4e66\u670d\u52a1 -> \u7533\u8d2d\u8bc1\u4e66\uff1b \u70b9\u51fb \u7533\u8bf7\u7ed3\u679c \u67e5\u770b\u7533\u8bf7\u72b6\u6001\uff0c\u5728\u8bc1\u4e66\u672a\u9881\u53d1\u6210\u529f\u4e4b\u524d\uff0c\u90fd\u53ef\u70b9\u51fb \u53d6\u6d88 \u6309\u94ae\uff0c\u8fdb\u884c\u7533\u8d2d\u4fe1\u606f\u4fee\u6539\u6216\u505c\u6b62\u7533\u8d2d\u3002 \u5982\u679c\u72b6\u6001\u663e\u793a\u4e3a \u5df2\u9881\u53d1 \uff0c\u5219\u8868\u660e\u8bc1\u4e66\u5df2\u7533\u8d2d\u6210\u529f\uff0c\u6b64\u65f6\u53ef\u8fdb\u884c \u4e0b\u8f7d \u3001 \u90e8\u7f72\u5230 CDN \u7b49\u64cd\u4f5c\u3002 \u5982\u679c\u9009\u62e9\u5c06\u8bc1\u4e66 \u90e8\u7f72\u5230 CDN \uff0c\u5219\u53ef\u8fdb\u5165 \u8bc1\u4e66\u7ba1\u7406 \u754c\u9762\uff0c\u5bf9\u8bc1\u4e66\u8fdb\u884c \u914d\u7f6e\u64cd\u4f5c \u3002 \u514d\u8d39\u8bc1\u4e66\u7533\u8d2d \u00b6 \u524d\u4e00\u3001\u4e8c\u3001\u4e09\u3001\u56db\u3001\u4e94\u3001\u516d\u6b65\u4e0e\u4ed8\u8d39\u8bc1\u4e66\u7533\u8d2d\u6b65\u9aa4\u4e00\u81f4\uff1b \u7b2c\u4e03\u6b65\uff1a\u5728 CDN \u5e73\u53f0 \u521b\u5efa\u670d\u52a1 ,\u5e76\u7ed1\u5b9a\u9700\u8981\u7533\u8bf7\u8bc1\u4e66\u7684\u57df\u540d\uff1b \u7b2c\u516b\u6b65\uff1a\u524d\u5f80\u57df\u540d\u6240\u5728\u670d\u52a1\u5546\u5904\u4fee\u6539 CNAME \u8bb0\u5f55 \uff0c\u5982\u672a\u4fee\u6539 CNAME \u8bb0\u5f55\uff0c\u5219\u4f1a\u5bfc\u81f4\u8bc1\u4e66\u7533\u8bf7\u5931\u8d25\uff1b \u7b2c\u4e5d\u6b65\uff1a\u8fdb\u5165 SSL \u8bc1\u4e66\u670d\u52a1\uff0c\u5de5\u5177\u7bb1 -> SSL \u8bc1\u4e66\u670d\u52a1 -> \u7533\u8d2d\u8bc1\u4e66\uff1b \u5728 \u7533\u8d2d\u8bc1\u4e66 \u754c\u9762\uff0c\u70b9\u51fb \u8d2d\u4e70\u5217\u8868 \u627e\u5230\u5bf9\u5e94\u7684\u7533\u8d2d\u8bb0\u5f55\uff0c\u70b9\u51fb \u8865\u5168 \u7b2c\u5341\u6b65\uff1a\u586b\u5199\u57df\u540d \u6b64\u5904\u586b\u5199\u7684\u57df\u540d\uff0c\u5fc5\u987b\u662f\u5df2\u5907\u6848\uff0c\u5e76\u4e14\u5df2\u7ecf\u5b8c\u6210\u4e86\u4e0a\u8ff0\u7b2c\u4e03\u6b65\u3001\u7b2c\u516b\u6b65\u4e2d\u64cd\u4f5c\u7684\u57df\u540d\uff1b \u7b2c\u5341\u4e00\u6b65\uff1a\u9a8c\u8bc1\u57df\u540d\u6240\u6709\u6743 \u7b2c\u5341\u4e8c\u6b65\uff1a\u63d0\u4ea4\u7533\u8bf7\uff0c\u7b49\u5f85 CA \u673a\u6784\u5ba1\u6838\uff0c\u9881\u53d1\u8bc1\u4e66 \u5728 \u7533\u8bf7\u7ed3\u679c \u4e2d\uff0c\u5982\u679c\u7533\u8bf7\u72b6\u6001\u663e\u793a\u4e3a \u5df2\u9881\u53d1 \uff0c\u5219\u8868\u660e\u8bc1\u4e66\u5df2\u7533\u8d2d\u6210\u529f \u7b2c\u5341\u4e09\u6b65\uff1a\u8bc1\u4e66\u7533\u8bf7\u6210\u529f\u540e\uff0c\u7cfb\u7edf\u4f1a\u81ea\u52a8\u5c06\u8bc1\u4e66\u90e8\u7f72\u4e8e\u53c8\u62cd\u4e91 CDN \u5e73\u53f0\uff0c\u5e76\u4e0e\u76f8\u5e94\u57df\u540d\u8fdb\u884c\u7ed1\u5b9a\uff0c\u7528\u6237\u65e0\u9700\u624b\u52a8\u64cd\u4f5c\u3002\u540c\u65f6\u53ef\u8fdb\u5165 \u8bc1\u4e66\u7ba1\u7406 \u754c\u9762\uff0c\u5bf9\u8bc1\u4e66\u8fdb\u884c \u914d\u7f6e\u64cd\u4f5c \uff1b DV SSL\u8bc1\u4e66\u9a8c\u8bc1 \u00b6 \u5f53\u7533\u8d2d\u7684\u8bc1\u4e66\u4e3a TrustAsia DV SSL \u5355\u57df\u540d\uff08\u53ea\u9488\u5bf9 www \u5f00\u5934\u7684\u4e3b\u57df\u540d\uff0c\u4f8b\u5982 www.upyun.com \uff09\u3001\u591a\u57df\u540d\u3001\u6cdb\u57df\u540d\u8bc1\u4e66\u65f6\uff0c\u9700\u8981\u901a\u8fc7\u4ee5\u4e0b\u65b9\u5f0f\u8fdb\u884c\u57df\u540d\u6240\u6709\u6743\u9a8c\u8bc1\u3002 1\u3001DNS \u9a8c\u8bc1 \u4fee\u6539\u57df\u540d\u7684 DNS\uff0c\u6dfb\u52a0 TXT \u8bb0\u5f55 \uff0c\u7136\u540e CA \u673a\u6784\u901a\u8fc7\u89e3\u6790\u57df\u540d\u7684 TXT \u8bb0\u5f55 \u6765\u9a8c\u8bc1\u57df\u540d\u6240\u6709\u6743 \u4ee5 DNSPOD \u4e3a\u4f8b\uff0c TXT \u8bb0\u5f55 \u6dfb\u52a0\u7684\u65b9\u6cd5\u5982\u4e0b\uff1a 2\u3001\u6587\u4ef6\u9a8c\u8bc1 \u5728\u6e90\u7ad9\u670d\u52a1\u5668\u4e0a\uff0c\u521b\u5efa\u4e0e\u57df\u540d\u76f8\u5173\u7684\u76ee\u5f55\u53ca\u6587\u4ef6\uff0c\u7136\u540e CA \u673a\u6784\u901a\u8fc7\u8bbf\u95ee\u76f8\u5173\u6587\u4ef6\uff0c\u5e76\u8bfb\u53d6\u6587\u4ef6\u5185\u5bb9\uff0c\u9a8c\u8bc1\u57df\u540d\u6240\u6709\u6743 \u4e3e\u4f8b\uff1a \u5982\u679c\u57df\u540d\u662f www.upyun.com \uff0c\u5219 CA \u673a\u6784\u8fdb\u884c\u9a8c\u8bc1\u8bbf\u95ee\u7684\u5730\u5740\u662f\uff1a http|https://www.upyun.com/.well-known/pki-validation/fileauth.txt \uff1b \u5982\u679c\u57df\u540d\u662f\u6cdb\u57df\u540d *.upyun.com \uff0c\u5219 CA \u673a\u6784\u8fdb\u884c\u9a8c\u8bc1\u8bbf\u95ee\u7684\u5730\u5740\u662f\uff1a http|https://upyun.com/.well-known/pki-validation/fileauth.txt \u3002 fileauth.txt \u6587\u4ef6\u4e2d\u7684\u5185\u5bb9\u4e3a\uff1a201703212055513616t9uk2pok3zmu2b7m3nc4c8mkudogfpvyj2w2gebhkypy58 \u6ce8\u610f\uff1a CA \u673a\u6784\u652f\u6301 http \u6216 https \u8bbf\u95ee\u9a8c\u8bc1\u94fe\u63a5\uff0c\u4f46\u662f\u4e0d\u652f\u6301\u4efb\u4f55\u5f62\u5f0f\u7684\u8df3\u8f6c\uff0c\u9700\u8981\u6e90\u7ad9\u670d\u52a1\u5668\u76f4\u63a5\u54cd\u5e94 200 \u72b6\u6001\u7801\u548c\u6587\u4ef6\u5185\u5bb9\u3002 \u5982\u679c Window \u7cfb\u7edf\u4e0d\u652f\u6301\u521b\u5efa /.well-known \u76ee\u5f55\uff0c\u5219\u53ef\u4ee5\u901a\u8fc7\u547d\u4ee4\u884c\u6765\u521b\u5efa\uff1a mkdir .well-known 3\u3001\u5ba1\u6838\u9a8c\u8bc1 \u65e0\u8bba\u662f\u6dfb\u52a0 TXT \u8bb0\u5f55 \uff0c\u8fd8\u662f\u589e\u52a0 \u9a8c\u8bc1\u6587\u4ef6 \uff0c\u4e24\u8005\u64cd\u4f5c\u5b8c\u6210\u4ee5\u540e\uff0c\u7533\u8d2d\u5c31\u8fdb\u5165\u4e86 CA \u673a\u6784\u4fe1\u606f\u5ba1\u6838\u9a8c\u8bc1\u72b6\u6001\uff0c\u4e00\u822c\u9700\u8981 1 \u4e2a\u5de5\u4f5c\u65e5\uff0c\u8bc1\u4e66\u9881\u53d1\u6210\u529f\u540e\uff0c\u4e0a\u8ff0\u4e24\u79cd\u8bb0\u5f55\u53ef\u5220\u9664\u3002 \u6ce8\u610f\u4e8b\u9879 \u00b6 1\u3001\u7533\u8bf7\u514d\u8d39\u7684 TrustAsia\u3001Let\u2019s Encrypt DV SSL \u8bc1\u4e66\u7684\u57df\u540d\uff0c\u5fc5\u987b\u662f\u5df2\u5907\u6848\uff0c\u4e14\u5df2\u7ecf\u5728\u53c8\u62cd\u4e91 CDN \u5e73\u53f0 \u521b\u5efa\u4e86\u670d\u52a1 \uff0c\u5e76\u7ed1\u5b9a\u4e86\u6b64\u57df\u540d\u3002 2\u3001\u7533\u8bf7 TrustAsia DV SSL \u8bc1\u4e66\u65f6\uff0c\u57df\u540d\u4f1a\u7ecf\u8fc7 Symantec CA \u673a\u6784\u5b89\u5168\u5ba1\u6838\uff0c\u5982\u679c\u5ba1\u6838\u672a\u901a\u8fc7\uff0c\u539f\u56e0\u5982\u4e0b\uff1a DV SSL \u8bc1\u4e66\u7684\u7533\u8bf7\uff0c\u65e0\u9700\u4eba\u5de5\u4ecb\u5165\uff0c\u7531 CA \u673a\u6784\u670d\u52a1\u5668\u81ea\u52a8\u8ba4\u8bc1\u5feb\u901f\u7b7e\u53d1\uff0c\u56e0\u6b64\u67d0\u4e9b CA \u673a\u6784\u4f1a\u6839\u636e\u5176\u53cd\u9493\u9c7c\u673a\u5236\uff0c\u91c7\u7528\u8f83\u4e3a\u4e25\u683c\u7684\u654f\u611f\u8bcd\u6765\u52a0\u5f3a\u5ba1\u6838\u6807\u51c6\uff0c\u4f8b\u5982\u57df\u540d\u4e2d\u5305\u542b bank\u3001trust \u7b49\uff0c\u90fd\u4f1a\u5f15\u8d77\u57df\u540d\u5ba1\u6838\u5931\u8d25\uff0c\u654f\u611f\u8bcd\u7684\u5b9a\u4e49\u7531 CA \u673a\u6784\u81ea\u8eab\u89c4\u5b9a\u3002 \u8fd9\u65f6\u8bf7\u66f4\u6362\u5176\u4ed6\u57df\u540d\u8fdb\u884c\u7533\u8bf7\u3002 3\u3001\u7533\u8d2d\u514d\u8d39\u7684 TrustAsia\u3001Let\u2019s Encrypt DV SSL \u8bc1\u4e66\u4e4b\u524d\uff0c\u5ba2\u6237\u9700\u8981\u5c06\u57df\u540d\u6240\u6709\u533a\u57df\u5168\u90e8 CNAME \u5230\u53c8\u62cd\u4e91\u5e73\u53f0\uff0c\u5426\u5219\u6709\u53ef\u80fd\u5bfc\u81f4\u8bc1\u4e66\u7533\u8bf7\u5931\u8d25\u3002 4\u3001\u5982\u679c\u514d\u8d39 DV SSL \u8bc1\u4e66\u7533\u8d2d\u5931\u8d25\uff0c\u9664\u56e0 CNAME \u539f\u56e0\u5bfc\u81f4\u7684\u5931\u8d25\uff0c\u5176\u4ed6\u5931\u8d25\u60c5\u51b5\u4e0b\uff08\u5b89\u5168\u5ba1\u6838\u5931\u8d25\u9664\u5916\uff09\uff0c\u53ef\u591a\u6b21\u5c1d\u8bd5\u91cd\u65b0\u63d0\u4ea4\u7533\u8bf7\uff0c\u5982\u591a\u6b21\u90fd\u672a\u7533\u8bf7\u6210\u529f\uff0c\u5219\u53ef\u63d0\u4ea4\u5de5\u5355\u5bfb\u6c42\u5e2e\u52a9\u3002 5\u3001\u76ee\u524d\u4e0d\u652f\u6301\u5e26\u4e0b\u5212\u7ebf\uff08_\uff09\u7684\u57df\u540d\u7533\u8bf7\u3002 6\u3001Symantec\u3001GeoTrust\u3001TrustAsia \u7684\u5404\u7c7b SSL \u8bc1\u4e66\u517c\u5bb9\u60c5\u51b5\uff1a\u652f\u6301\u5e02\u9762\u4e0a\u6240\u6709\u4e3b\u6d41\u6d4f\u89c8\u5668\u3002 7\u3001Let\u2019s Encrypt DV SSL \u8bc1\u4e66\u517c\u5bb9\u5217\u8868\u5982\u4e0b\u6240\u793a\uff1a Mozilla Firefox >= v2.0 Google Chrome Internet Explorer on Windows XP SP3 and higher Microsoft Edge Android OS >= v2.3.6 Safari >= v4.0 on macOS Safari on iOS >= v3.1 Debian Linux >= v6 Ubuntu Linux >= v12.04 NSS Library >= v3.11.9 Amazon FireOS (Silk Browser) Cyanogen > v10 Jolla Sailfish OS > v1.1.2.16 Kindle > v3.4.1 Java 7 >= 7u111 Java 8 >= 8u101 \u66f4\u591a\u517c\u5bb9\u6027\u4fe1\u606f\u8bf7\u53c2\u8003 \u8fd9\u91cc 8.Let\u2019s Encrypt DV SSL \u8bc1\u4e66\uff0c\u5728\u4fdd\u8bc1\u57df\u540d CNAME \u4e00\u76f4\u89e3\u6790\u5230\u53c8\u62cd CDN \u5e73\u53f0\u7684\u524d\u63d0\u4e0b\uff0c\u8bc1\u4e66\u5230\u671f\u540e\u4f1a\u81ea\u52a8\u7eed\u7b7e\uff0c\u65e0\u9700\u62c5\u5fc3\u8bc1\u4e66\u8fc7\u671f\u95ee\u9898\u3002 Symantec-TrustAsia DV SSL \u8bc1\u4e66\uff08\u6709\u6548\u671f\u4e00\u5e74\uff09\uff0c\u5728 \u8bc1\u4e66\u7ba1\u7406 \u4e2d\u53ef\u4ee5\u67e5\u770b\u8bc1\u4e66\u7684\u5230\u671f\u65f6\u95f4\uff0c\u8bc1\u4e66\u5feb\u8981\u5230\u671f\u65f6\uff0c\u7528\u6237\u4f9d\u7136\u53ef\u4ee5\u901a\u8fc7\u518d\u6b21\u7533\u8bf7\u7684\u65b9\u5f0f\u514d\u8d39\u5ef6\u671f\u3002 9\u3001\u5bf9\u4e8e Symantec\u3001GeoTrust\u3001TrustAsia \u7684\u5404\u7c7b SSL \u8bc1\u4e66\uff0c\u4e3b\u57df\u540d\u4f8b\u5982 upyun.com \u5df2\u7ecf\u6210\u529f\u7533\u8bf7\u8bc1\u4e66\uff0c\u5219\u6b64\u8bc1\u4e66\u4e2d\u5df2\u9ed8\u8ba4\u6dfb\u52a0\u4e86 www.upyun.com\uff0c\u5373 www.upyun.com \u53ef\u76f4\u63a5\u4f7f\u7528\u6b64\u8bc1\u4e66\uff0c\u65e0\u9700\u91cd\u590d\u7533\u8bf7\uff1b\u540c\u7406\u4f7f\u7528 www.upyun.com \u7533\u8bf7\u7684\u8bc1\u4e66\uff0c\u4e3b\u57df\u540d upyun.com \u4e5f\u53ef\u4f7f\u7528\uff08\u4e0a\u8ff0\u53ea\u9488\u5bf9\u4e3b\u57df\u540d\u751f\u6548\uff0c\u4f8b\u5982\u7528\u57df\u540d abc.upyun.com \u7533\u8bf7\u7684\u8bc1\u4e66\uff0c\u5219 www.abc.upyu.com \u4e0d\u53ef\u4f7f\u7528\uff0c\u9700\u8981\u91cd\u65b0\u7533\u8bf7\uff09\u3002 \u6ce8\u610f\uff1a\u53e6\u4e00\u6b3e Let\u2019s Encrypt DV SSL \u8bc1\u4e66\uff0c\u4e3b\u57df\u540d upyun.com \u548c www.upyun.com \u65e0\u6cd5\u5171\u7528\u4e00\u5f20\u8bc1\u4e66\uff0c\u9700\u5206\u522b\u7533\u8bf7\u3002","title":"\u8bc1\u4e66\u670d\u52a1"},{"location":"cdn/ssl/#_1","text":"HTTPS\uff08\u5168\u79f0\uff1aHyperText Transfer Protocol over Secure Socket Layer\uff09\uff0c\u5176\u5b9e HTTPS \u5e76\u4e0d\u662f\u4e00\u4e2a\u65b0\u9c9c\u534f\u8bae\uff0cGoogle \u5f88\u65e9\u5c31\u5f00\u59cb\u542f\u7528\u4e86\uff0c\u521d\u8877\u662f\u4e3a\u4e86\u4fdd\u62a4\u6570\u636e\u5b89\u5168\u3002 \u8fd1\u4e24\u5e74\uff0cGoogle\u3001Baidu\u3001Facebook \u7b49\u8fd9\u6837\u7684\u4e92\u8054\u7f51\u5de8\u5934\uff0c\u4e0d\u8c0b\u800c\u5408\u5730\u5f00\u59cb\u5927\u529b\u63a8\u884c HTTPS\uff0c \u5f88\u591a\u56fd\u5185\u5916\u7684\u5927\u578b\u4e92\u8054\u7f51\u516c\u53f8\u4e5f\u90fd\u5df2\u7ecf\u542f\u7528\u4e86\u5168\u7ad9 HTTPS\uff0c\u8fd9\u4e5f\u662f\u672a\u6765\u4e92\u8054\u7f51\u53d1\u5c55\u7684\u8d8b\u52bf\u3002 \u4e3a\u9f13\u52b1\u5168\u7403\u7f51\u7ad9\u7684 HTTPS \u5b9e\u73b0\uff0cGoogle \u751a\u81f3\u8c03\u6574\u4e86\u641c\u7d22\u5f15\u64ce\u7b97\u6cd5\uff0c\u8ba9\u91c7\u7528 HTTPS \u7684\u7f51\u7ad9\u5728\u641c\u7d22\u4e2d\u6392\u540d\u66f4\u9760\u524d\u3002\u5e76\u4e14\u4ece 2017 \u5e74\u5f00\u59cb\uff0cChrome \u6d4f\u89c8\u5668\u5df2\u628a\u91c7\u7528 HTTP \u534f\u8bae\u7684\u7f51\u7ad9\u6807\u8bb0\u4e3a\u4e0d\u5b89\u5168\u7f51\u7ad9\uff0c\u82f9\u679c App Store \u4e2d\u7684\u6240\u6709\u5e94\u7528\u4e5f\u90fd\u5fc5\u987b\u4f7f\u7528 HTTPS \u52a0\u5bc6\u8fde\u63a5\uff1b\u5f53\u524d\u56fd\u5185\u7092\u7684\u5f88\u706b\u70ed\u7684\u5fae\u4fe1\u5c0f\u7a0b\u5e8f\u4e5f\u8981\u6c42\u5fc5\u987b\u4f7f\u7528 HTTPS \u534f\u8bae\uff1b\u65b0\u4e00\u4ee3\u7684 HTTP/2 \u534f\u8bae\u7684\u652f\u6301\u9700\u4ee5 HTTPS \u4e3a\u57fa\u7840\u3002\u56e0\u6b64\u60f3\u5fc5\u5728\u4e0d\u4e45\u7684\u5c06\u6765\uff0c\u5168\u7f51 HTTPS \u52bf\u5728\u5fc5\u884c\u3002 \u4f46\u662f\uff0c\u5982\u679c\u7f51\u7ad9\u60f3\u4f7f\u7528 HTTPS \u670d\u52a1\uff0c\u5219\u5fc5\u987b\u4e3a\u57df\u540d\u4ece\u6570\u5b57\u8bc1\u4e66\u6388\u6743\u673a\u6784\uff08CA\uff0cCertificate Authority\uff09\u7533\u8bf7\u76f8\u5173\u7684 SSL \u8bc1\u4e66\u3002\u4e3a\u6b64\uff0c\u53c8\u62cd\u4e91\u63d0\u4f9b\u4e86 SSL \u8bc1\u4e66\u7684\u4e00\u7ad9\u5f0f\u670d\u52a1\uff0c\u7528\u6237\u53ef\u76f4\u63a5\u5728\u53c8\u62cd\u4e91 SSL \u8bc1\u4e66\u7533\u8d2d \u5e73\u53f0\u7533\u8d2d\u5404\u7c7b SSL \u8bc1\u4e66\uff08\u5305\u62ec\u514d\u8d39\u7533\u8d2d DV SSL \u8bc1\u4e66\uff09\uff1b\u540c\u65f6\uff0c\u7528\u6237\u4e5f\u53ef\u81ea\u613f\u9009\u62e9\u5c06\u7533\u8d2d\u7684\u8bc1\u4e66\u4e00\u952e\u90e8\u7f72\u4e8e\u53c8\u62cd\u4e91 CDN \u5e73\u53f0\uff0c\u56e0\u5e73\u53f0\u5168\u5c40\u81ea\u52a8\u5316\u7ba1\u7406\uff0c\u91c7\u7528\u4e86\u6700\u4f18\u8d28\u7684 HTTPS \u52a0\u901f\u89e3\u51b3\u65b9\u6848\uff0c\u53ef\u5e2e\u52a9\u7528\u6237\u4ee5\u6700\u4f4e\u7684\u6210\u672c\uff0c\u4eab\u53d7\u6700\u4f18\u7684\u670d\u52a1\uff0c\u5b8c\u6210\u7f51\u7ad9 HTTP \u5230 HTTPS \u7684\u8f6c\u6362\u3002","title":"\u4ea7\u54c1\u4ecb\u7ecd"},{"location":"cdn/ssl/#_2","text":"HTTPS HTTPS\uff08\u5168\u79f0\uff1aHyperText Transfer Protocol over Secure Socket Layer\uff09\uff0c\u662f\u4ee5\u5b89\u5168\u4e3a\u76ee\u6807\u7684 HTTP \u901a\u9053\uff0c\u5373 HTTP \u7684\u5b89\u5168\u7248\u3002HTTPS \u7684\u5b89\u5168\u57fa\u7840\u662f SSL/TLS\uff0c\u5b83\u63d0\u4f9b\u4e86\u8eab\u4efd\u9a8c\u8bc1\u4e0e\u52a0\u5bc6\u901a\u8baf\u7684\u65b9\u6cd5\uff0c\u73b0\u5728\u88ab\u5e7f\u6cdb\u7528\u4e8e\u4e07\u7ef4\u7f51\u4e0a\u5b89\u5168\u654f\u611f\u7684\u901a\u8baf\uff0c\u6bd4\u5982\u4ea4\u6613\u3001\u652f\u4ed8\u7b49\u3002 SSL\uff08Secure Socket Layer\uff0c\u5b89\u5168\u5957\u63a5\u5b57\u5c42\uff09 SSL \u7531 Netscape \u516c\u53f8\u6240\u7814\u53d1\uff0c\u7528\u4ee5\u4fdd\u969c\u5728 Internet \u4e0a\u6570\u636e\u4f20\u8f93\u4e4b\u5b89\u5168\uff0c\u5229\u7528\u6570\u636e\u52a0\u5bc6 (Encryption) \u6280\u672f\uff0c\u53ef\u786e\u4fdd\u6570\u636e\u5728\u7f51\u7edc\u4e0a\u4f20\u8f93\u8fc7\u7a0b\u4e2d\u4e0d\u4f1a\u88ab\u622a\u53d6\u3002SSL \u534f\u8bae\u4f4d\u4e8e TCP/IP \u534f\u8bae\u4e0e\u5404\u79cd\u5e94\u7528\u5c42\u534f\u8bae\u4e4b\u95f4\uff0c\u4e3a\u6570\u636e\u901a\u8baf\u63d0\u4f9b\u5b89\u5168\u652f\u6301\u3002 TLS\uff08Transport Layer Security\uff0c\u4f20\u8f93\u5c42\u5b89\u5168\uff09 \u4f20\u8f93\u5c42\u52a0\u5bc6\u534f\u8bae\uff0c\u5176\u524d\u8eab\u662f SSL \u534f\u8bae\uff0c 1999 \u5e74\u7ecf\u8fc7 IETF\uff08The Internet Engineering Task Force \u56fd\u9645\u4e92\u8054\u7f51\u5de5\u7a0b\u4efb\u52a1\u7ec4\uff09 \u8ba8\u8bba\u548c\u89c4\u8303\u540e\uff0c\u6539\u540d\u4e3a TLS\u3002\u53d1\u5c55\u81f3\u4eca\u5df2\u7ecf\u6709 TLS 1.0\u3001TLS 1.1\u3001TLS 1.2 \u4e09\u4e2a\u7248\u672c\u3002TLS 1.3 \u6539\u52a8\u4f1a\u6bd4\u8f83\u5927\uff0c\u8fd8\u5904\u4e8e\u5f85\u53d1\u5e03\u9636\u6bb5\uff0c\u76ee\u524d\u4f7f\u7528\u6700\u5e7f\u6cdb\u7684\u662f TLS 1.1\u3001TLS 1.2\u3002 SSL \u8bc1\u4e66 SSL \u8bc1\u4e66\u5c31\u662f\u9075\u5b88 SSL \u534f\u8bae\u7684\u670d\u52a1\u5668\u6570\u5b57\u8bc1\u4e66\uff0c\u901a\u8fc7\u9a8c\u8bc1\u57df\u540d\u3001\u670d\u52a1\u5668\u8eab\u4efd\u540e\uff0c\u7531\u53d7\u4fe1\u4efb\u7684\u6570\u5b57\u8bc1\u4e66\u6388\u6743\u673a\u6784 CA \u9881\u53d1\uff0c\u5177\u6709\u670d\u52a1\u5668\u8eab\u4efd\u9a8c\u8bc1\u548c\u6570\u636e\u4f20\u8f93\u52a0\u5bc6\u7b49\u529f\u80fd\u3002 CA \u6570\u5b57\u8bc1\u4e66\u6388\u6743\u673a\u6784 \uff08CA\uff0cCertificate Authority\uff09 \u662f\u8d1f\u8d23\u53d1\u653e\u548c\u7ba1\u7406\u6570\u5b57\u8bc1\u4e66\u7684\u6743\u5a01\u673a\u6784\uff0c\u5e76\u4f5c\u4e3a\u7535\u5b50\u5546\u52a1\u4ea4\u6613\u4e2d\u53d7\u4fe1\u4efb\u7684\u7b2c\u4e09\u65b9\uff0c\u627f\u62c5\u516c\u94a5\u4f53\u7cfb\u4e2d\u516c\u94a5\u7684\u5408\u6cd5\u6027\u68c0\u9a8c\u7684\u8d23\u4efb\u3002 CSR\uff08Cerificate Signing Request\uff0c\u8bc1\u4e66\u8bf7\u6c42\u6587\u4ef6\uff09 CSR \u662f\u5236\u4f5c SSL \u8bc1\u4e66\u7684\u5fc5\u8981\u6587\u4ef6\uff0c\u901a\u5e38\u7531 CA \u673a\u6784\u81ea\u52a8\u751f\u6210\uff0c\u7528\u6237\u4e5f\u53ef\u81ea\u5df1\u521b\u5efa\uff0c\u5728\u751f\u6210 CSR \u6587\u4ef6 \u7684\u540c\u65f6\u4e5f\u4f1a\u751f\u6210\u79c1\u94a5\uff08\u7531\u7528\u6237\u81ea\u5df1\u4fdd\u7ba1\uff09\uff0c\u7528\u6237\u53ea\u9700\u628a CSR \u6587\u4ef6\u63d0\u4ea4\u7ed9 CA\uff0cCA \u4f7f\u7528\u5176\u6839\u8bc1\u4e66\u79c1\u94a5\u5bf9 CSR \u6587\u4ef6\u7b7e\u540d\u5373\u751f\u6210\u4e86\u7528\u6237\u7684\u8bc1\u4e66\u3002 RSA RSA \u516c\u94a5\u52a0\u5bc6\u7b97\u6cd5\u662f 1977 \u5e74\u7531 Ron Rivest\u3001\u007fAdi Shamir\u3001Leonard Adleman \u4e00\u8d77\u63d0\u51fa\u7684\uff0c\u5b83\u662f\u7b2c\u4e00\u4e2a\u80fd\u540c\u65f6\u7528\u4e8e\u52a0\u5bc6\u548c\u6570\u5b57\u7b7e\u540d\u7684\u7b97\u6cd5\uff0c\u4ece\u63d0\u51fa\u5230\u73b0\u4eca\u7ecf\u5386\u4e86\u5404\u79cd\u653b\u51fb\u7684\u8003\u9a8c\uff0c\u80fd\u591f\u62b5\u6297\u5230\u76ee\u524d\u4e3a\u6b62\u5df2\u77e5\u7684\u7edd\u5927\u591a\u6570\u5bc6\u7801\u653b\u51fb\uff0c\u5df2\u88ab ISO \u63a8\u8350\u4e3a\u516c\u94a5\u6570\u636e\u52a0\u5bc6\u6807\u51c6 ECC ECC\uff08Elliptic Curves Cryptography\uff0c\u692d\u5706\u66f2\u7ebf\u52a0\u5bc6\u7b97\u6cd5\uff09\u4e5f\u662f\u4e00\u79cd\u516c\u94a5\u52a0\u5bc6\u7b97\u6cd5\uff0c\u4e0e\u4e3b\u6d41\u7684 RSA \u7b97\u6cd5\u76f8\u6bd4\uff0cECC \u7b97\u6cd5\u53ef\u4ee5\u4f7f\u7528\u8f83\u77ed\u7684\u5bc6\u94a5\u8fbe\u5230\u76f8\u540c\u7684\u5b89\u5168\u7a0b\u5ea6\uff0c\u5176\u5b89\u5168\u6027\u66f4\u9ad8\u3001\u5904\u7406\u901f\u5ea6\u66f4\u5feb\u3002\u5176\u6570\u5b66\u57fa\u7840\u662f\u5229\u7528\u692d\u5706\u66f2\u7ebf\u4e0a\u7684\u6709\u7406\u70b9\u6784\u6210 Abel \u52a0\u6cd5\u7fa4\u4e0a\u692d\u5706\u79bb\u6563\u5bf9\u6570\u7684\u8ba1\u7b97\u56f0\u96be\u6027\u3002 \u57df\u540d\u578b SSL \u8bc1\u4e66\uff08DV SSL\uff09 \u5373\u8bc1\u4e66\u9881\u5e03\u673a\u6784\u53ea\u5bf9\u57df\u540d\u7684\u6240\u6709\u8005\u8fdb\u884c\u5728\u7ebf\u68c0\u67e5\uff0c\u901a\u5e38\u662f\u9a8c\u8bc1\u57df\u540d\u4e0b\u67d0\u4e2a\u6307\u5b9a\u6587\u4ef6\u7684\u5185\u5bb9\uff0c\u6216\u8005\u9a8c\u8bc1\u4e0e\u57df\u540d\u76f8\u5173\u7684\u67d0\u6761 TXT \u8bb0\u5f55\uff1b\u6bd4\u5982\u8bbf\u95ee [http|https]://www.domain.com/.../test.txt\uff0c\u6587\u4ef6\u5185\u5bb9\uff1a 2016082xxxxx39w7b20nelfa\uff1b\u6216\u6dfb\u52a0\u4e00\u6761 TXT \u8bb0\u5f55\uff1awww.domain.com \u2013> TXT \u2013> 20170xxxxxqmkiby43hpvy8 \u4f01\u4e1a\u578b SSL \u8bc1\u4e66\uff08OV SSL\uff09 \u662f\u8981\u8d2d\u4e70\u8005\u63d0\u4ea4\u7ec4\u7ec7\u673a\u6784\u8d44\u6599\u548c\u5355\u4f4d\u6388\u6743\u4fe1\u7b49\u5728\u5b98\u65b9\u6ce8\u518c\u7684\u51ed\u8bc1\uff0c\u8bc1\u4e66\u9881\u53d1\u673a\u6784\u5728\u7b7e\u53d1 SSL \u8bc1\u4e66\u524d\u4e0d\u4ec5\u4ec5\u8981\u68c0\u9a8c\u57df\u540d\u6240\u6709\u6743\uff0c\u8fd8\u5fc5\u987b\u5bf9\u8fd9\u4e9b\u8d44\u6599\u7684\u771f\u5b9e\u5408\u6cd5\u6027\u8fdb\u884c\u591a\u65b9\u67e5\u9a8c\uff0c\u53ea\u6709\u901a\u8fc7\u9a8c\u8bc1\u7684\u624d\u80fd\u9881\u53d1 SSL \u8bc1\u4e66\u3002 \u589e\u5f3a\u578b SSL \u8bc1\u4e66\uff08EV SSL\uff09 \u4e0e\u5176\u4ed6 SSL \u8bc1\u4e66\u4e00\u6837\uff0c\u90fd\u662f\u57fa\u4e8e SSL/TLS \u5b89\u5168\u534f\u8bae\uff0c\u4f46\u662f\u9a8c\u8bc1\u6d41\u7a0b\u66f4\u52a0\u5177\u4f53\u8be6\u7ec6\uff0c\u9a8c\u8bc1\u6b65\u9aa4\u66f4\u591a\uff0c\u8fd9\u6837\u4e00\u6765\u8bc1\u4e66\u6240\u7ed1\u5b9a\u7684\u7f51\u7ad9\u5c31\u66f4\u52a0\u7684\u53ef\u9760\u3001\u53ef\u4fe1\u3002\u5b83\u8ddf\u666e\u901a SSL \u8bc1\u4e66\u7684\u533a\u522b\u4e5f\u662f\u660e\u663e\u7684\uff0c\u5b89\u5168\u6d4f\u89c8\u5668\u7684\u5730\u5740\u680f\u53d8\u7eff\uff0c\u5982\u679c\u662f\u4e0d\u53d7\u4fe1\u7684 SSL \u8bc1\u4e66\u5219\u62d2\u7edd\u663e\u793a\uff0c\u5982\u679c\u662f\u9493\u9c7c\u7f51\u7ad9\uff0c\u5730\u5740\u680f\u5219\u4f1a\u53d8\u6210\u7ea2\u8272\uff0c\u4ee5\u8b66\u793a\u7528\u6237\u3002","title":"\u540d\u8bcd\u89e3\u91ca"},{"location":"cdn/ssl/#_3","text":"","title":"\u4ea7\u54c1\u529f\u80fd"},{"location":"cdn/ssl/#ssl","text":"\u53c8\u62cd\u4e91\u63d0\u4f9b\u4e86 Symantec\u3001GeoTrust\u3001TrustAsia\u3001Let\u2019s Encrypt \u7684\u5404\u7c7b DV/OV/EV SSL \u8bc1\u4e66\u7684 \u7533\u8d2d\u670d\u52a1 \uff0c\u5176\u4e2d TrustAsia\u3001Let\u2019s Encrypt DV SSL \u5355\u57df\u540d\u8bc1\u4e66\u53ef\u514d\u8d39\u7533\u8bf7\u3002","title":"\u7533\u8d2d SSL \u8bc1\u4e66"},{"location":"cdn/ssl/#_4","text":"\u586b\u5199\u76f8\u5173\u4fe1\u606f\uff0c\u4e00\u952e\u7533\u8d2d\uff0c\u6b65\u9aa4\u7b80\u5355\u65b9\u4fbf\uff0c\u6d41\u7a0b\u5168\u81ea\u52a8\u5316\u5904\u7406\uff0c\u65e0\u9700\u4eba\u5de5\u534f\u52a9\uff0c\u7533\u8d2d\u5468\u671f\u5927\u5927\u7f29\u77ed\uff0c\u4f7f\u8bc1\u4e66\u5f97\u5230\u5feb\u901f\u7b7e\u53d1\u3002","title":"\u5feb\u901f\u7b7e\u53d1"},{"location":"cdn/ssl/#_5","text":"\u53c8\u62cd\u4e91\u5e73\u53f0\u5373\u652f\u6301\u7533\u8d2d\u4e0a\u8ff0\u5404\u7c7b\u8bc1\u4e66\uff0c\u540c\u65f6\u4e5f\u652f\u6301\u4e0a\u4f20\u548c\u7ba1\u7406\u4efb\u610f\u673a\u6784\u7b7e\u53d1\u7684\u8bc1\u4e66\uff0c\u6240\u6709 SSL \u8bc1\u4e66\u5747\u81ea\u52a9\u5316\u7ba1\u7406\uff0c\u96c6\u4e2d\u76d1\u6d4b\uff0c\u8ba9\u7528\u6237\u4f7f\u7528\u66f4\u52a0\u653e\u5fc3\u3001\u5b89\u5fc3\u3002","title":"\u81ea\u52a9\u5316\u7ba1\u7406"},{"location":"cdn/ssl/#_6","text":"\u63d0\u4f9b\u4e00\u952e\u90e8\u7f72 SSL \u8bc1\u4e66\u5230\u53c8\u62cd\u4e91 CDN \u4ea7\u54c1\u7684\u529f\u80fd\uff0c\u7528\u6237\u53ef\u81ea\u613f\u9009\u62e9\uff0c\u5e2e\u52a9\u7528\u6237\u66f4\u5feb\u6377\u5730\u4fdd\u62a4\u6570\u636e\u5b89\u5168\uff0c\u5b8c\u6210\u7f51\u7ad9 HTTP \u5230 HTTPS \u7684\u8f6c\u6362\u3002","title":"\u4e00\u952e\u90e8\u7f72"},{"location":"cdn/ssl/#_7","text":"","title":"\u4ea7\u54c1\u4f18\u52bf"},{"location":"cdn/ssl/#ssl_1","text":"\u53c8\u62cd\u4e91\u63d0\u4f9b\u4e86\u4e24\u6b3e\u8bc1\u4e66\u7684\u514d\u8d39\u7533\u8bf7\u65b9\u6848\uff0c\u7528\u6237\u53ef\u901a\u8fc7 SSL \u8bc1\u4e66\u7533\u8d2d \u5e73\u53f0\uff0c\u514d\u8d39\u7533\u8bf7 Symantec-TrustAsia\u3001Let\u2019s Encrypt \u7684 DV SSL \u8bc1\u4e66\uff0c\u5e2e\u52a9\u7528\u6237\u96f6\u6210\u672c\u5b9e\u73b0\u5168\u7ad9\u90e8\u7f72 HTTPS\u3002\u5e76\u4e14\u8fd8\u5b9e\u73b0\u4e86 Let\u2019s Encrypt \u8bc1\u4e66\u5230\u671f\u81ea\u52a8\u7eed\u7b7e\uff0c\u7528\u6237\u65e0\u9700\u62c5\u5fc3\u8bc1\u4e66\u8fc7\u671f\u65f6\u95f4\uff0c\u964d\u4f4e\u7ef4\u62a4\u6210\u672c\u3002","title":"\u514d\u8d39\u7533\u8bf7 SSL \u8bc1\u4e66"},{"location":"cdn/ssl/#ca","text":"\u53c8\u62cd\u4e91\u643a\u624b TrustAsia \u4e0e\u56fd\u9645\u9876\u7ea7\u6570\u5b57\u8bc1\u4e66\u63d0\u4f9b\u5546 Symantec\u3001GeoTrust \u5408\u4f5c\uff0c\u63a8\u51fa\u4e86\u57df\u540d\u578b SSL \u8bc1\u4e66\uff08DV SSL\uff09\uff0c\u4f01\u4e1a\u578b SSL \u8bc1\u4e66\uff08OV SSL\uff09\u3001\u589e\u5f3a\u578b SSL \u8bc1\u4e66\uff08EV SSL\uff09\u7684\u7533\u8d2d\uff1b\u5176\u4e2d\u57df\u540d\u578b DV SSL \u5355\u57df\u540d\u8bc1\u4e66\u5f53\u524d\u514d\u8d39\u7533\u8d2d\u3002 Symantec \u662f\u5168\u7403\u6700\u5927\u7684\u4fe1\u606f\u5b89\u5168\u670d\u52a1\u63d0\u4f9b\u5546\uff0c \u5176\u9881\u53d1\u7684\u8bc1\u4e66\u80fd\u88ab\u6240\u6709\u6d4f\u89c8\u5668\u652f\u6301\u4e0e\u4fe1\u4efb\uff0c\u53ef\u786e\u4fdd\u7528\u6237\u8bbf\u95ee\u65f6\u6d4f\u89c8\u5668\u7ed9\u4e88\u6b63\u786e\u7684\u7f51\u9875\u5b89\u5168\u63d0\u793a\uff0c\u786e\u4fdd\u4e86\u7528\u6237\u5229\u76ca\u6700\u5927\u5316\uff0c\u8ba9\u7528\u6237\u771f\u6b63\u611f\u5230\u5b89\u5168\u53ef\u9760\u3002 GeoTrust \u662f\u5168\u7403\u7b2c\u4e8c\u5927\u6570\u5b57\u8bc1\u4e66\u63d0\u4f9b\u5546\uff0c\u4e5f\u662f\u8eab\u4efd\u8ba4\u8bc1\u548c\u4fe1\u4efb\u8ba4\u8bc1\u9886\u57df\u7684\u9886\u5bfc\u8005\uff0c \u8be5\u516c\u53f8\u5404\u79cd\u5148\u8fdb\u7684\u6280\u672f\u4f7f\u5f97\u4efb\u4f55\u5927\u5c0f\u7684\u673a\u6784\u548c\u516c\u53f8\u90fd\u80fd\u5b89\u5168\u3001\u4f4e\u6210\u672c\u5730\u90e8\u7f72 SSL \u6570\u5b57\u8bc1\u4e66\u548c\u5b9e\u73b0\u5404\u79cd\u8eab\u4efd\u8ba4\u8bc1\u3002 TrustAsia\u00ae\uff08\u4e9a\u6d32\u8bda\u4fe1\uff09\u662f\u4e9a\u6570\u4fe1\u606f\u79d1\u6280\uff08\u4e0a\u6d77\uff09\u6709\u9650\u516c\u53f8\u5e94\u7528\u4e8e\u4fe1\u606f\u5b89\u5168\u9886\u57df\u7684\u54c1\u724c\uff0c \u4e13\u4e1a\u4e3a\u4f01\u4e1a\u63d0\u4f9b\u5305\u542b\u6570\u5b57\u8bc1\u4e66\u5728\u5185\u7684\u6240\u6709\u7f51\u7edc\u5b89\u5168\u670d\u52a1\uff0c\u662fSymantec\u2122\uff08\u8d5b\u95e8\u94c1\u514b\uff09\u7684\u767d\u91d1\u5408\u4f5c\u4f19\u4f34\u3002","title":"\u56fd\u9645\u9886\u5148 CA \u673a\u6784\u5408\u4f5c"},{"location":"cdn/ssl/#_8","text":"\u7528\u6237\u53ea\u9700\u63d0\u4ea4\u57df\u540d\uff0c\u586b\u5199\u5fc5\u8981\u4fe1\u606f\uff0c\u70b9\u51fb\u7533\u8bf7\u5373\u53ef\u5b8c\u6210\u8bc1\u4e66\u7684\u7533\u8d2d\uff1b\u5bf9\u4e8e\u514d\u8d39\u8bc1\u4e66\uff0c\u7cfb\u7edf\u4f1a\u81ea\u52a8\u5c06\u8bc1\u4e66\u90e8\u7f72\u4e8e CDN \u5e73\u53f0\uff1b\u5bf9\u4e8e\u4ed8\u8d39\u8bc1\u4e66\uff0c\u7528\u6237\u53ef\u6309\u9700\u4e00\u952e\u5c06\u8bc1\u4e66\u90e8\u7f72\u4e8e CDN \u5e73\u53f0\uff1b\u4e24\u8005\u90fd\u53ef\u4ee5\u4e0e\u53c8\u62cd\u4e91 CDN \u4ea7\u54c1\u5b8c\u7f8e\u878d\u5408\uff0c\u5b9e\u73b0\u5168\u7ad9 HTTPS \u52a0\u901f\u670d\u52a1\u3002","title":"\u4e00\u952e\u5b8c\u6210\u8bc1\u4e66\u7533\u8bf7"},{"location":"cdn/ssl/#_9","text":"\u65e0\u8bba\u662f\u7528\u6237\u4e0a\u4f20\u7684\u81ea\u6709\u8bc1\u4e66\uff0c\u8fd8\u662f\u901a\u8fc7\u53c8\u62cd\u4e91\u7533\u8d2d\u7684\u5404\u7c7b\u8bc1\u4e66\uff0c\u90fd\u53ef\u5728 SSL \u8bc1\u4e66\u670d\u52a1 \u4e2d\u7edf\u4e00\u7ba1\u7406\uff0c\u65b9\u4fbf\u7528\u6237\u5bf9\u8bc1\u4e66\u8fdb\u884c\u5404\u79cd\u64cd\u4f5c\uff0c\u5e76\u4e14\u5168\u7a0b\u65e0\u9700\u4eba\u5de5\u534f\u52a9\uff0c\u516c\u94a5\u3001\u79c1\u94a5\u66f4\u52a0\u5b89\u5168\uff0c\u505a\u5230\u8ba9\u7528\u6237\u7701\u5fc3\u3001\u653e\u5fc3\uff0c\u540c\u65f6\u63d0\u5347\u4e86\u7528\u6237\u7684\u5de5\u4f5c\u6548\u7387\u3002","title":"\u7b80\u5355\u6613\u7528\uff0c\u7ba1\u7406\u65b9\u4fbf"},{"location":"cdn/ssl/#_10","text":"Google \u5728 2014 \u5e74\u53d1\u5e03\u7684\u5b98\u65b9\u535a\u5ba2\u4e2d\u6307\u51fa\uff0c\u5df2\u7ecf\u8c03\u6574\u5176\u641c\u7d22\u5f15\u64ce\u7b97\u6cd5\uff0c\u91c7\u7528 HTTPS \u52a0\u5bc6\u7684\u7f51\u7ad9\u5728\u641c\u7d22\u7ed3\u679c\u4e2d\u7684\u6392\u540d\u5c06\u4f1a\u66f4\u9ad8\u3002\u5176\u76ee\u6807\u975e\u5e38\u7b80\u5355\uff0c\u5c31\u662f\u8981\u9f13\u52b1\u5168\u7403\u7f51\u7ad9\u91c7\u7528\u5b89\u5168\u5ea6\u66f4\u9ad8\u7684 HTTPS \u4ee5\u4fdd\u8bc1\u8bbf\u5ba2\u5b89\u5168\u3002\u56e0\u6b64\u7f51\u7ad9\u91c7\u7528 HTTPS \u534f\u8bae\uff0c\u53ef\u5438\u5f15\u66f4\u591a\u7684\u7528\u6237\u8fdb\u884c\u8bbf\u95ee\uff0c\u63d0\u5347\u7f51\u7ad9\u7684\u4ef7\u503c\uff0c\u589e\u521b\u8425\u6536\u3002","title":"\u63d0\u5347\u7f51\u7ad9\u641c\u7d22\u6392\u540d"},{"location":"cdn/ssl/#_11","text":"\u7528\u6237\u4ece\u53c8\u62cd\u4e91\u7533\u8d2d SSL \u8bc1\u4e66\u540e\uff0c\u6b64 SSL \u8bc1\u4e66\u53ef\u4f7f\u7f51\u7ad9\u5b8c\u6210\u7531 HTTP \u5230 HTTPS \u7684\u8f6c\u6362\uff0c\u7531\u4e8e HTTPS \u91c7\u7528\u4e86 SSL/TLS \u52a0\u5bc6\u5c42\uff0c\u53ef\u4fdd\u8bc1\u7f51\u7ad9\u6570\u636e\u7684\u540e\u7eed\u4f20\u8f93\u66f4\u52a0\u5b89\u5168\u53ef\u9760\uff0c\u9632\u6b62\u6d41\u91cf\u52ab\u6301\uff0c\u9632\u5192\u5145\u3001\u9493\u9c7c\u7b49\u3002 \u5982\u679c\u7528\u6237\u540c\u65f6\u8d2d\u4e70\u4e86\u53c8\u62cd\u4e91\u7684 CDN \u670d\u52a1\uff0c\u4e5f\u53ef\u4ee5\u9009\u62e9\u5c06 SSL \u8bc1\u4e66\u90e8\u7f72\u4e8e CDN \u52a0\u901f\u4ea7\u54c1\u4e2d\uff0c\u5728\u5b9e\u73b0\u7f51\u7ad9 HTTPS \u5316\u7684\u540c\u65f6\uff0c\u4e5f\u53ef\u4eab\u53d7\u53c8\u62cd\u4e91\u4f18\u8d28\u7684 HTTPS \u52a0\u901f\u89e3\u51b3\u65b9\u6848\u3002","title":"\u4f7f\u7528\u573a\u666f"},{"location":"cdn/ssl/#_12","text":"V1.0 2016 \u5e74 12 \u6708 21 \u65e5 let\u2019s encrypt DV SSL \u5355\u57df\u540d\u8bc1\u4e66\u514d\u8d39\u7533\u8bf7\u670d\u52a1\u4e0a\u7ebf \u5728 CDN \u5168\u7f51\u3001\u76f4\u64ad\u52a0\u901f\u914d\u7f6e\u4e2d\u589e\u52a0\u4e86 HTTPS \u914d\u7f6e\u9879 V1.1 2017 \u5e74 2 \u6708 7 \u65e5 TrustAsia DV SSL \u5355\u57df\u540d\u8bc1\u4e66\uff08\u7531 Symantec \u7b7e\u53d1\uff09\u514d\u8d39\u7533\u8bf7\u670d\u52a1\u4e0a\u7ebf V2.0 2017 \u5e74 3 \u6708 30 \u65e5 Symantec\u3001GeoTrust\u3001TrustAsia \u7684\u5404\u7c7b\u4ed8\u8d39 DV SSL\u3001OV SSL\u3001EV SSL \u8bc1\u4e66\u7533\u8d2d\u670d\u52a1\u4e0a\u7ebf","title":"\u7248\u672c\u8fed\u4ee3"},{"location":"cdn/ssl/#_13","text":"","title":"\u8d2d\u4e70\u6307\u5bfc"},{"location":"cdn/ssl/#_14","text":"\u901a\u8fc7\u53c8\u62cd\u4e91\u8d2d\u4e70 SSL \u8bc1\u4e66\uff0c\u6d41\u7a0b\u66f4\u52a0\u7b80\u6d01\u65b9\u4fbf\uff1a","title":"\u8d2d\u4e70\u6d41\u7a0b"},{"location":"cdn/ssl/#_15","text":"\u4ef7\u683c\u5217\u8868\uff1a \u8bf4\u660e\uff1a \u4e00\u3001\u5355\u57df\u540d\u3001\u6cdb\u57df\u540d\u8bc1\u4e66\uff0c\u56e0\u53ea\u6d89\u53ca\u5230\u4e00\u4e2a\u57df\u540d\uff0c\u6240\u4ee5\u5176\u5355\u4ef7\u5373\u4e0a\u8ff0\u8868\u683c\u4e2d\u7684\u4ef7\u683c\uff1b \u4e8c\u3001\u5bf9\u4e8e\u589e\u5f3a\u578b EV SSL \u8bc1\u4e66\uff0c\u53ea\u6709\u591a\u57df\u540d\u8bc1\u4e66\uff0c\u6ca1\u6709\u591a\u57df\u540d\u6cdb\u57df\u540d\u8bc1\u4e66\uff1b \u4e09\u3001\u591a\u57df\u540d\u8bc1\u4e66\u3001\u591a\u57df\u540d\u6cdb\u57df\u540d\u8bc1\u4e66\u7684\u4ef7\u683c\u8ba1\u7b97\u5982\u4e0b\uff1a Symantec \u54c1\u724c \u8ba1\u7b97\u516c\u5f0f\uff08\u4ee5\u4e00\u5e74\u6709\u6548\u671f\u8bc1\u4e66\u4e3a\u4f8b\uff09\uff1a \u5047\u8bbe\uff1a 1\u5e74\u6807\u51c6\u57df\u540d\u4ef7\u683c = A \uff1b \u6807\u51c6\u57df\u540d\u4e2a\u6570 = B 1\u5e74\u6cdb\u57df\u540d\u4ef7\u683c = C \uff1b\u6cdb\u57df\u540d\u4e2a\u6570 = D 1\u5e74\u6807\u51c6\u57df\u540d\u4e13\u4e1a\u7248\u4ef7\u683c = E 1\u5e74\u6cdb\u57df\u540d\u4e13\u4e1a\u7248\u4ef7\u683c = F \u5219\uff1a \u591a\u57df\u540d\u8bc1\u4e66\u4ef7\u683c = A * B \u591a\u57df\u540d\u4e13\u4e1a\u7248\u8bc1\u4e66\u4ef7\u683c = E * B \u591a\u57df\u540d\u6cdb\u57df\u540d\u8bc1\u4e66\u4ef7\u683c = A * B + C * D \u591a\u57df\u540d\u6cdb\u57df\u540d\u4e13\u4e1a\u7248\u8bc1\u4e66\u4ef7\u683c = E * B + F * D Geotrust\u3001TrustAsia \u54c1\u724c \u9ed8\u8ba4\u652f\u63015\u4e2a\u6807\u51c6\u57df\u540d\uff08\u9ed8\u8ba4\u57df\u540d\u4e2d\u4e0d\u5305\u542b\u6cdb\u57df\u540d\uff09\uff0c\u8ba1\u7b97\u516c\u5f0f\uff08\u4ee5\u4e00\u5e74\u6709\u6548\u671f\u8bc1\u4e66\u4e3a\u4f8b\uff09\uff1a \u5047\u8bbe\uff1a 1\u5e74\u6807\u51c6\u57df\u540d\u4ef7\u683c = A \uff1b\u6807\u51c6\u57df\u540d\u4e2a\u6570 = B 1\u5e74\u6cdb\u57df\u540d\u4ef7\u683c = C \uff1b\u6cdb\u57df\u540d\u4e2a\u6570 = D 1\u5e74\u6807\u51c6\u57df\u540d\u989d\u5916\u4ef7\u683c = E \u5219\uff1a \u591a\u57df\u540d\u8bc1\u4e66\u4ef7\u683c = A + E * ( B - 5 ) \u5982\u679c B - 5 < 0 \u5219\u6309 0 \u8ba1\u7b97 \u591a\u57df\u540d\u6cdb\u57df\u540d\u8bc1\u4e66\u4ef7\u683c = A + E * ( B - 5 ) + C * D \u5982\u679c B - 5 < 0 \u5219\u6309 0 \u8ba1\u7b97","title":"\u4ef7\u683c\u603b\u89c8"},{"location":"cdn/ssl/#_16","text":"\u6761\u4ef6 \u7533\u8d2d\u7684 SSL \u8bc1\u4e66\u5df2\u7531 CA \u673a\u6784\u9881\u53d1\u6210\u529f\u7684\uff0c\u5219\u4e0d\u80fd\u9000\u6b3e\uff1b \u514d\u8d39\u7533\u8bf7\u7684\u57df\u540d\u578b\uff08DV SSL\uff09\u8bc1\u4e66\u4e0d\u652f\u6301\u9000\u6b3e\uff1b \u7533\u8d2d\u7684 SSL \u8bc1\u4e66\u5728\u4fe1\u606f\u63d0\u4ea4\u5ba1\u6838\u524d\u6216\u7533\u8d2d\u5931\u8d25\u540e\u53ef\u514d\u8d39\u9000\u6b3e\uff1b \u6d41\u7a0b \u76ee\u524d\u6682\u65f6\u4ec5\u652f\u6301\u901a\u8fc7\u63d0\u4ea4\u5de5\u5355\u7684\u65b9\u5f0f\u8fdb\u884c\u9000\u6b3e\u7533\u8bf7\u3002","title":"\u9000\u6b3e\u670d\u52a1"},{"location":"cdn/ssl/#_17","text":"\u5982\u679c\u7528\u6237\u53d1\u73b0\u6e90\u7ad9\u670d\u52a1\u5668\u88ab\u653b\u7834\u6216\u5176\u4ed6\u539f\u56e0\u5bfc\u81f4 SSL \u8bc1\u4e66\u79c1\u94a5\u6cc4\u9732\uff0c\u5219\u53ef\u4ee5\u9009\u62e9\u540a\u9500\u6b64\u8bc1\u4e66\uff1b\u8bc1\u4e66\u540a\u9500\u540e\uff0c\u5404\u6d4f\u89c8\u5668\u3001\u5ba2\u6237\u7aef\u7b49\u5c06\u4e0d\u518d\u4fe1\u4efb\u5df2\u540a\u9500\u7684\u8bc1\u4e66\uff0c\u4f1a\u51fa\u73b0\u4e0d\u5b89\u5168\u63d0\u9192\uff0c\u4e3e\u4f8b\u53c2\u8003 \u8fd9\u91cc \u3002 \u76ee\u524d\u6682\u65f6\u4ec5\u652f\u6301\u901a\u8fc7\u63d0\u4ea4\u5de5\u5355\u7684\u65b9\u5f0f\u8fdb\u884c\u8bc1\u4e66\u540a\u9500\u7533\u8bf7\u3002","title":"\u8bc1\u4e66\u540a\u9500"},{"location":"cdn/ssl/#_18","text":"\u53c8\u62cd\u4e91\u643a\u624b TrustAsia \u4e0e Symantec\u3001GeoTrust \u8fbe\u6210\u6218\u7565\u5408\u4f5c\uff0c\u63a8\u51fa\u4e86\u5404\u7c7b\u57df\u540d\u578b DV SSL \u3001\u4f01\u4e1a\u578b OV SSL \u3001\u589e\u5f3a\u578b EV SSL \u8bc1\u4e66\u7684\u7533\u8d2d\uff1b\u5176\u4e2d\u6709\u6548\u671f\u4e3a\u4e00\u5e74\u7684 TrustAsia \u57df\u540d\u578b DV SSL \u5355\u57df\u540d\u8bc1\u4e66\u5f53\u524d\u514d\u8d39\u7533\u8bf7\uff0c\u539f\u4ef7 1900 \u5143/\u5e74\u3002 \u53c8\u62cd\u4e91\u8fd8\u4e0e\u56fd\u9645\u8bc1\u4e66\u63d0\u4f9b\u5546 Let\u2019s Encrypt \u5408\u4f5c\uff0c\u4e3a\u7528\u6237\u514d\u8d39\u63d0\u4f9b\u4e86\u53e6\u4e00\u6b3e DV SSL \u8bc1\u4e66\u7684\u7533\u8bf7\uff0c\u8bc1\u4e66\u5230\u671f\u4f1a\u81ea\u52a8\u7eed\u7b7e\uff0c\u64cd\u4f5c\u7b80\u5355\u65b9\u4fbf\uff0c\u4e00\u952e\u5b8c\u6210\u8bc1\u4e66\u7684\u7533\u8bf7\u4e0e\u90e8\u7f72\uff0c\u7528\u6237\u53ef\u6839\u636e\u81ea\u8eab\u60c5\u51b5\uff0c\u591a\u91cd\u9009\u62e9\uff0c\u6ee1\u8db3\u4e0d\u540c\u573a\u666f\u7684\u9700\u6c42\u3002 \u8be6\u7ec6\u64cd\u4f5c\u6b65\u9aa4\u5982\u4e0b\uff1a","title":"\u5feb\u901f\u5165\u95e8"},{"location":"cdn/ssl/#_19","text":"\u7b2c\u4e00\u6b65\uff1a \u6ce8\u518c \u53c8\u62cd\u4e91\u8d26\u53f7\uff0c\u5e76\u5b8c\u6210 \u5b9e\u540d\u8ba4\u8bc1 \uff1b \u7b2c\u4e8c\u6b65\uff1a\u8fdb\u5165 SSL \u8bc1\u4e66\u670d\u52a1\uff0c\u5de5\u5177\u7bb1 -> SSL \u8bc1\u4e66\u670d\u52a1 -> \u7533\u8d2d\u8bc1\u4e66\uff1b \u7b2c\u4e09\u6b65\uff1a\u70b9\u51fb\u53f3\u4e0a\u89d2\u7684 \u7533\u8d2d\u8bc1\u4e66 \uff0c\u5982\u4e0b\u56fe\u6240\u793a\uff0c\u9009\u62e9\u8bc1\u4e66\u54c1\u724c\uff0c\u5e76\u9009\u62e9\u9700\u8981\u7533\u8d2d\u7684\u8bc1\u4e66\u7c7b\u578b\u3001\u6709\u6548\u671f\u7b49\uff1b \u7b2c\u56db\u6b65\uff1a\u6838\u5bf9\u7533\u8d2d\u4fe1\u606f\uff1b \u7b2c\u4e94\u6b65\uff1a\u786e\u8ba4\u4ed8\u6b3e\uff1b \u4e3a\u9632\u6b62\u6076\u610f\u64cd\u4f5c\uff0c\u53c8\u62cd\u4e91\u63d0\u4f9b\u4e86\u652f\u4ed8\u9a8c\u8bc1\u529f\u80fd\uff0c\u4ed8\u6b3e\u65f6\uff0c\u5c06\u4f1a\u53d1\u9001\u9a8c\u8bc1\u7801\u5230 \u6ce8\u518c \u53c8\u62cd\u4e91\u8d26\u53f7\u65f6\u6240\u4f7f\u7528\u7684\u624b\u673a\u53f7\u4e0a\u3002 \u7b2c\u516d\u6b65\uff1a\u652f\u4ed8\u5b8c\u6210\u4ee5\u540e\uff0c\u8ba2\u5355\u8fdb\u5165 \u8d2d\u4e70\u5217\u8868 \uff0c\u5904\u4e8e \u5f85\u5b8c\u6210 \u72b6\u6001\uff0c \u7b2c\u4e03\u6b65\uff1a\u70b9\u51fb \u8865\u5168 \u6309\u94ae\uff0c\u586b\u5199\u57df\u540d\u3001\u516c\u53f8\u3001\u8054\u7cfb\u4eba\u7b49\u4fe1\u606f\uff0c \u8bf4\u660e\uff1a\u7533\u8d2d\u591a\u57df\u540d\u8bc1\u4e66\u3001\u591a\u57df\u540d\u6cdb\u57df\u540d\u8bc1\u4e66\u65f6\uff0c\u4e3b\u57df\u540d\u53ea\u80fd\u586b\u5199\u6807\u51c6\u57df\u540d\u3002 \u7b2c\u516b\u6b65\uff1a\u4fe1\u606f\u586b\u5199\u5b8c\u6210\uff0c\u70b9\u51fb\u63d0\u4ea4\u540e\uff0c\u4f1a\u51fa\u73b0\u5982\u4e0b\u4e24\u79cd\u60c5\u51b5 \uff081\uff09\u5982\u679c\u7533\u8d2d\u7684\u662f OV \u6216 EV SSL \u8bc1\u4e66\uff0c\u5219\u8fdb\u884c \u4e0b\u8f7d\u300a\u4fe1\u606f\u786e\u8ba4\u51fd\u300b \u4e0a\u4f20\u300a\u4fe1\u606f\u786e\u8ba4\u51fd\u300b\uff0c\u4e0a\u4f20\u6587\u4ef6\u4e0d\u80fd\u5927\u4e8e2M \u300a\u4fe1\u606f\u786e\u8ba4\u51fd\u300b\u4e0a\u4f20\u6210\u529f\u540e\uff0c\u7533\u8d2d\u8fdb\u5165 CA \u673a\u6784\u4fe1\u606f\u5ba1\u6838\u7684\u72b6\u6001\uff0c\u5ba1\u6838\u4e00\u822c\u9700\u89813\uff5e5\u4e2a\u5de5\u4f5c\u65e5 \uff082\uff09\u5982\u679c\u7533\u8d2d\u7684\u662f DV SSL \u8bc1\u4e66\uff0c\u5219\u8fdb\u884c \u5728 \u8bc1\u4e66\u7533\u8d2d \u754c\u9762\uff0c\u70b9\u51fb \u7533\u8bf7\u7ed3\u679c \u627e\u5230\u5bf9\u5e94\u7684\u7533\u8d2d\u8bb0\u5f55\uff0c\u70b9\u51fb \u67e5\u770b \u83b7\u53d6\u76f8\u5173\u9a8c\u8bc1\u4fe1\u606f\uff0c\u9a8c\u8bc1\u64cd\u4f5c\u53ef\u53c2\u8003 \u8fd9\u91cc \u6dfb\u52a0\u597d\u9a8c\u8bc1\u4fe1\u606f\u540e\uff0c\u7533\u8d2d\u8fdb\u5165 CA \u673a\u6784\u4fe1\u606f\u5ba1\u6838\u9a8c\u8bc1\u72b6\u6001\uff0c\u4e00\u822c\u9700\u8981 1 \u4e2a\u5de5\u4f5c\u65e5 \u7b2c\u4e5d\u6b65\uff1a\u67e5\u770b\u7533\u8bf7\u7ed3\u679c\uff0c\u5de5\u5177\u7bb1 -> SSL \u8bc1\u4e66\u670d\u52a1 -> \u7533\u8d2d\u8bc1\u4e66\uff1b \u70b9\u51fb \u7533\u8bf7\u7ed3\u679c \u67e5\u770b\u7533\u8bf7\u72b6\u6001\uff0c\u5728\u8bc1\u4e66\u672a\u9881\u53d1\u6210\u529f\u4e4b\u524d\uff0c\u90fd\u53ef\u70b9\u51fb \u53d6\u6d88 \u6309\u94ae\uff0c\u8fdb\u884c\u7533\u8d2d\u4fe1\u606f\u4fee\u6539\u6216\u505c\u6b62\u7533\u8d2d\u3002 \u5982\u679c\u72b6\u6001\u663e\u793a\u4e3a \u5df2\u9881\u53d1 \uff0c\u5219\u8868\u660e\u8bc1\u4e66\u5df2\u7533\u8d2d\u6210\u529f\uff0c\u6b64\u65f6\u53ef\u8fdb\u884c \u4e0b\u8f7d \u3001 \u90e8\u7f72\u5230 CDN \u7b49\u64cd\u4f5c\u3002 \u5982\u679c\u9009\u62e9\u5c06\u8bc1\u4e66 \u90e8\u7f72\u5230 CDN \uff0c\u5219\u53ef\u8fdb\u5165 \u8bc1\u4e66\u7ba1\u7406 \u754c\u9762\uff0c\u5bf9\u8bc1\u4e66\u8fdb\u884c \u914d\u7f6e\u64cd\u4f5c \u3002","title":"\u4ed8\u8d39\u8bc1\u4e66\u7533\u8d2d"},{"location":"cdn/ssl/#_20","text":"\u524d\u4e00\u3001\u4e8c\u3001\u4e09\u3001\u56db\u3001\u4e94\u3001\u516d\u6b65\u4e0e\u4ed8\u8d39\u8bc1\u4e66\u7533\u8d2d\u6b65\u9aa4\u4e00\u81f4\uff1b \u7b2c\u4e03\u6b65\uff1a\u5728 CDN \u5e73\u53f0 \u521b\u5efa\u670d\u52a1 ,\u5e76\u7ed1\u5b9a\u9700\u8981\u7533\u8bf7\u8bc1\u4e66\u7684\u57df\u540d\uff1b \u7b2c\u516b\u6b65\uff1a\u524d\u5f80\u57df\u540d\u6240\u5728\u670d\u52a1\u5546\u5904\u4fee\u6539 CNAME \u8bb0\u5f55 \uff0c\u5982\u672a\u4fee\u6539 CNAME \u8bb0\u5f55\uff0c\u5219\u4f1a\u5bfc\u81f4\u8bc1\u4e66\u7533\u8bf7\u5931\u8d25\uff1b \u7b2c\u4e5d\u6b65\uff1a\u8fdb\u5165 SSL \u8bc1\u4e66\u670d\u52a1\uff0c\u5de5\u5177\u7bb1 -> SSL \u8bc1\u4e66\u670d\u52a1 -> \u7533\u8d2d\u8bc1\u4e66\uff1b \u5728 \u7533\u8d2d\u8bc1\u4e66 \u754c\u9762\uff0c\u70b9\u51fb \u8d2d\u4e70\u5217\u8868 \u627e\u5230\u5bf9\u5e94\u7684\u7533\u8d2d\u8bb0\u5f55\uff0c\u70b9\u51fb \u8865\u5168 \u7b2c\u5341\u6b65\uff1a\u586b\u5199\u57df\u540d \u6b64\u5904\u586b\u5199\u7684\u57df\u540d\uff0c\u5fc5\u987b\u662f\u5df2\u5907\u6848\uff0c\u5e76\u4e14\u5df2\u7ecf\u5b8c\u6210\u4e86\u4e0a\u8ff0\u7b2c\u4e03\u6b65\u3001\u7b2c\u516b\u6b65\u4e2d\u64cd\u4f5c\u7684\u57df\u540d\uff1b \u7b2c\u5341\u4e00\u6b65\uff1a\u9a8c\u8bc1\u57df\u540d\u6240\u6709\u6743 \u7b2c\u5341\u4e8c\u6b65\uff1a\u63d0\u4ea4\u7533\u8bf7\uff0c\u7b49\u5f85 CA \u673a\u6784\u5ba1\u6838\uff0c\u9881\u53d1\u8bc1\u4e66 \u5728 \u7533\u8bf7\u7ed3\u679c \u4e2d\uff0c\u5982\u679c\u7533\u8bf7\u72b6\u6001\u663e\u793a\u4e3a \u5df2\u9881\u53d1 \uff0c\u5219\u8868\u660e\u8bc1\u4e66\u5df2\u7533\u8d2d\u6210\u529f \u7b2c\u5341\u4e09\u6b65\uff1a\u8bc1\u4e66\u7533\u8bf7\u6210\u529f\u540e\uff0c\u7cfb\u7edf\u4f1a\u81ea\u52a8\u5c06\u8bc1\u4e66\u90e8\u7f72\u4e8e\u53c8\u62cd\u4e91 CDN \u5e73\u53f0\uff0c\u5e76\u4e0e\u76f8\u5e94\u57df\u540d\u8fdb\u884c\u7ed1\u5b9a\uff0c\u7528\u6237\u65e0\u9700\u624b\u52a8\u64cd\u4f5c\u3002\u540c\u65f6\u53ef\u8fdb\u5165 \u8bc1\u4e66\u7ba1\u7406 \u754c\u9762\uff0c\u5bf9\u8bc1\u4e66\u8fdb\u884c \u914d\u7f6e\u64cd\u4f5c \uff1b","title":"\u514d\u8d39\u8bc1\u4e66\u7533\u8d2d"},{"location":"cdn/ssl/#dv-ssl","text":"\u5f53\u7533\u8d2d\u7684\u8bc1\u4e66\u4e3a TrustAsia DV SSL \u5355\u57df\u540d\uff08\u53ea\u9488\u5bf9 www \u5f00\u5934\u7684\u4e3b\u57df\u540d\uff0c\u4f8b\u5982 www.upyun.com \uff09\u3001\u591a\u57df\u540d\u3001\u6cdb\u57df\u540d\u8bc1\u4e66\u65f6\uff0c\u9700\u8981\u901a\u8fc7\u4ee5\u4e0b\u65b9\u5f0f\u8fdb\u884c\u57df\u540d\u6240\u6709\u6743\u9a8c\u8bc1\u3002 1\u3001DNS \u9a8c\u8bc1 \u4fee\u6539\u57df\u540d\u7684 DNS\uff0c\u6dfb\u52a0 TXT \u8bb0\u5f55 \uff0c\u7136\u540e CA \u673a\u6784\u901a\u8fc7\u89e3\u6790\u57df\u540d\u7684 TXT \u8bb0\u5f55 \u6765\u9a8c\u8bc1\u57df\u540d\u6240\u6709\u6743 \u4ee5 DNSPOD \u4e3a\u4f8b\uff0c TXT \u8bb0\u5f55 \u6dfb\u52a0\u7684\u65b9\u6cd5\u5982\u4e0b\uff1a 2\u3001\u6587\u4ef6\u9a8c\u8bc1 \u5728\u6e90\u7ad9\u670d\u52a1\u5668\u4e0a\uff0c\u521b\u5efa\u4e0e\u57df\u540d\u76f8\u5173\u7684\u76ee\u5f55\u53ca\u6587\u4ef6\uff0c\u7136\u540e CA \u673a\u6784\u901a\u8fc7\u8bbf\u95ee\u76f8\u5173\u6587\u4ef6\uff0c\u5e76\u8bfb\u53d6\u6587\u4ef6\u5185\u5bb9\uff0c\u9a8c\u8bc1\u57df\u540d\u6240\u6709\u6743 \u4e3e\u4f8b\uff1a \u5982\u679c\u57df\u540d\u662f www.upyun.com \uff0c\u5219 CA \u673a\u6784\u8fdb\u884c\u9a8c\u8bc1\u8bbf\u95ee\u7684\u5730\u5740\u662f\uff1a http|https://www.upyun.com/.well-known/pki-validation/fileauth.txt \uff1b \u5982\u679c\u57df\u540d\u662f\u6cdb\u57df\u540d *.upyun.com \uff0c\u5219 CA \u673a\u6784\u8fdb\u884c\u9a8c\u8bc1\u8bbf\u95ee\u7684\u5730\u5740\u662f\uff1a http|https://upyun.com/.well-known/pki-validation/fileauth.txt \u3002 fileauth.txt \u6587\u4ef6\u4e2d\u7684\u5185\u5bb9\u4e3a\uff1a201703212055513616t9uk2pok3zmu2b7m3nc4c8mkudogfpvyj2w2gebhkypy58 \u6ce8\u610f\uff1a CA \u673a\u6784\u652f\u6301 http \u6216 https \u8bbf\u95ee\u9a8c\u8bc1\u94fe\u63a5\uff0c\u4f46\u662f\u4e0d\u652f\u6301\u4efb\u4f55\u5f62\u5f0f\u7684\u8df3\u8f6c\uff0c\u9700\u8981\u6e90\u7ad9\u670d\u52a1\u5668\u76f4\u63a5\u54cd\u5e94 200 \u72b6\u6001\u7801\u548c\u6587\u4ef6\u5185\u5bb9\u3002 \u5982\u679c Window \u7cfb\u7edf\u4e0d\u652f\u6301\u521b\u5efa /.well-known \u76ee\u5f55\uff0c\u5219\u53ef\u4ee5\u901a\u8fc7\u547d\u4ee4\u884c\u6765\u521b\u5efa\uff1a mkdir .well-known 3\u3001\u5ba1\u6838\u9a8c\u8bc1 \u65e0\u8bba\u662f\u6dfb\u52a0 TXT \u8bb0\u5f55 \uff0c\u8fd8\u662f\u589e\u52a0 \u9a8c\u8bc1\u6587\u4ef6 \uff0c\u4e24\u8005\u64cd\u4f5c\u5b8c\u6210\u4ee5\u540e\uff0c\u7533\u8d2d\u5c31\u8fdb\u5165\u4e86 CA \u673a\u6784\u4fe1\u606f\u5ba1\u6838\u9a8c\u8bc1\u72b6\u6001\uff0c\u4e00\u822c\u9700\u8981 1 \u4e2a\u5de5\u4f5c\u65e5\uff0c\u8bc1\u4e66\u9881\u53d1\u6210\u529f\u540e\uff0c\u4e0a\u8ff0\u4e24\u79cd\u8bb0\u5f55\u53ef\u5220\u9664\u3002","title":"DV SSL\u8bc1\u4e66\u9a8c\u8bc1"},{"location":"cdn/ssl/#_21","text":"1\u3001\u7533\u8bf7\u514d\u8d39\u7684 TrustAsia\u3001Let\u2019s Encrypt DV SSL \u8bc1\u4e66\u7684\u57df\u540d\uff0c\u5fc5\u987b\u662f\u5df2\u5907\u6848\uff0c\u4e14\u5df2\u7ecf\u5728\u53c8\u62cd\u4e91 CDN \u5e73\u53f0 \u521b\u5efa\u4e86\u670d\u52a1 \uff0c\u5e76\u7ed1\u5b9a\u4e86\u6b64\u57df\u540d\u3002 2\u3001\u7533\u8bf7 TrustAsia DV SSL \u8bc1\u4e66\u65f6\uff0c\u57df\u540d\u4f1a\u7ecf\u8fc7 Symantec CA \u673a\u6784\u5b89\u5168\u5ba1\u6838\uff0c\u5982\u679c\u5ba1\u6838\u672a\u901a\u8fc7\uff0c\u539f\u56e0\u5982\u4e0b\uff1a DV SSL \u8bc1\u4e66\u7684\u7533\u8bf7\uff0c\u65e0\u9700\u4eba\u5de5\u4ecb\u5165\uff0c\u7531 CA \u673a\u6784\u670d\u52a1\u5668\u81ea\u52a8\u8ba4\u8bc1\u5feb\u901f\u7b7e\u53d1\uff0c\u56e0\u6b64\u67d0\u4e9b CA \u673a\u6784\u4f1a\u6839\u636e\u5176\u53cd\u9493\u9c7c\u673a\u5236\uff0c\u91c7\u7528\u8f83\u4e3a\u4e25\u683c\u7684\u654f\u611f\u8bcd\u6765\u52a0\u5f3a\u5ba1\u6838\u6807\u51c6\uff0c\u4f8b\u5982\u57df\u540d\u4e2d\u5305\u542b bank\u3001trust \u7b49\uff0c\u90fd\u4f1a\u5f15\u8d77\u57df\u540d\u5ba1\u6838\u5931\u8d25\uff0c\u654f\u611f\u8bcd\u7684\u5b9a\u4e49\u7531 CA \u673a\u6784\u81ea\u8eab\u89c4\u5b9a\u3002 \u8fd9\u65f6\u8bf7\u66f4\u6362\u5176\u4ed6\u57df\u540d\u8fdb\u884c\u7533\u8bf7\u3002 3\u3001\u7533\u8d2d\u514d\u8d39\u7684 TrustAsia\u3001Let\u2019s Encrypt DV SSL \u8bc1\u4e66\u4e4b\u524d\uff0c\u5ba2\u6237\u9700\u8981\u5c06\u57df\u540d\u6240\u6709\u533a\u57df\u5168\u90e8 CNAME \u5230\u53c8\u62cd\u4e91\u5e73\u53f0\uff0c\u5426\u5219\u6709\u53ef\u80fd\u5bfc\u81f4\u8bc1\u4e66\u7533\u8bf7\u5931\u8d25\u3002 4\u3001\u5982\u679c\u514d\u8d39 DV SSL \u8bc1\u4e66\u7533\u8d2d\u5931\u8d25\uff0c\u9664\u56e0 CNAME \u539f\u56e0\u5bfc\u81f4\u7684\u5931\u8d25\uff0c\u5176\u4ed6\u5931\u8d25\u60c5\u51b5\u4e0b\uff08\u5b89\u5168\u5ba1\u6838\u5931\u8d25\u9664\u5916\uff09\uff0c\u53ef\u591a\u6b21\u5c1d\u8bd5\u91cd\u65b0\u63d0\u4ea4\u7533\u8bf7\uff0c\u5982\u591a\u6b21\u90fd\u672a\u7533\u8bf7\u6210\u529f\uff0c\u5219\u53ef\u63d0\u4ea4\u5de5\u5355\u5bfb\u6c42\u5e2e\u52a9\u3002 5\u3001\u76ee\u524d\u4e0d\u652f\u6301\u5e26\u4e0b\u5212\u7ebf\uff08_\uff09\u7684\u57df\u540d\u7533\u8bf7\u3002 6\u3001Symantec\u3001GeoTrust\u3001TrustAsia \u7684\u5404\u7c7b SSL \u8bc1\u4e66\u517c\u5bb9\u60c5\u51b5\uff1a\u652f\u6301\u5e02\u9762\u4e0a\u6240\u6709\u4e3b\u6d41\u6d4f\u89c8\u5668\u3002 7\u3001Let\u2019s Encrypt DV SSL \u8bc1\u4e66\u517c\u5bb9\u5217\u8868\u5982\u4e0b\u6240\u793a\uff1a Mozilla Firefox >= v2.0 Google Chrome Internet Explorer on Windows XP SP3 and higher Microsoft Edge Android OS >= v2.3.6 Safari >= v4.0 on macOS Safari on iOS >= v3.1 Debian Linux >= v6 Ubuntu Linux >= v12.04 NSS Library >= v3.11.9 Amazon FireOS (Silk Browser) Cyanogen > v10 Jolla Sailfish OS > v1.1.2.16 Kindle > v3.4.1 Java 7 >= 7u111 Java 8 >= 8u101 \u66f4\u591a\u517c\u5bb9\u6027\u4fe1\u606f\u8bf7\u53c2\u8003 \u8fd9\u91cc 8.Let\u2019s Encrypt DV SSL \u8bc1\u4e66\uff0c\u5728\u4fdd\u8bc1\u57df\u540d CNAME \u4e00\u76f4\u89e3\u6790\u5230\u53c8\u62cd CDN \u5e73\u53f0\u7684\u524d\u63d0\u4e0b\uff0c\u8bc1\u4e66\u5230\u671f\u540e\u4f1a\u81ea\u52a8\u7eed\u7b7e\uff0c\u65e0\u9700\u62c5\u5fc3\u8bc1\u4e66\u8fc7\u671f\u95ee\u9898\u3002 Symantec-TrustAsia DV SSL \u8bc1\u4e66\uff08\u6709\u6548\u671f\u4e00\u5e74\uff09\uff0c\u5728 \u8bc1\u4e66\u7ba1\u7406 \u4e2d\u53ef\u4ee5\u67e5\u770b\u8bc1\u4e66\u7684\u5230\u671f\u65f6\u95f4\uff0c\u8bc1\u4e66\u5feb\u8981\u5230\u671f\u65f6\uff0c\u7528\u6237\u4f9d\u7136\u53ef\u4ee5\u901a\u8fc7\u518d\u6b21\u7533\u8bf7\u7684\u65b9\u5f0f\u514d\u8d39\u5ef6\u671f\u3002 9\u3001\u5bf9\u4e8e Symantec\u3001GeoTrust\u3001TrustAsia \u7684\u5404\u7c7b SSL \u8bc1\u4e66\uff0c\u4e3b\u57df\u540d\u4f8b\u5982 upyun.com \u5df2\u7ecf\u6210\u529f\u7533\u8bf7\u8bc1\u4e66\uff0c\u5219\u6b64\u8bc1\u4e66\u4e2d\u5df2\u9ed8\u8ba4\u6dfb\u52a0\u4e86 www.upyun.com\uff0c\u5373 www.upyun.com \u53ef\u76f4\u63a5\u4f7f\u7528\u6b64\u8bc1\u4e66\uff0c\u65e0\u9700\u91cd\u590d\u7533\u8bf7\uff1b\u540c\u7406\u4f7f\u7528 www.upyun.com \u7533\u8bf7\u7684\u8bc1\u4e66\uff0c\u4e3b\u57df\u540d upyun.com \u4e5f\u53ef\u4f7f\u7528\uff08\u4e0a\u8ff0\u53ea\u9488\u5bf9\u4e3b\u57df\u540d\u751f\u6548\uff0c\u4f8b\u5982\u7528\u57df\u540d abc.upyun.com \u7533\u8bf7\u7684\u8bc1\u4e66\uff0c\u5219 www.abc.upyu.com \u4e0d\u53ef\u4f7f\u7528\uff0c\u9700\u8981\u91cd\u65b0\u7533\u8bf7\uff09\u3002 \u6ce8\u610f\uff1a\u53e6\u4e00\u6b3e Let\u2019s Encrypt DV SSL \u8bc1\u4e66\uff0c\u4e3b\u57df\u540d upyun.com \u548c www.upyun.com \u65e0\u6cd5\u5171\u7528\u4e00\u5f20\u8bc1\u4e66\uff0c\u9700\u5206\u522b\u7533\u8bf7\u3002","title":"\u6ce8\u610f\u4e8b\u9879"},{"location":"cdn/tools/","text":"IP \u68c0\u6d4b\u5de5\u5177 \u00b6 \u53ef\u901a\u8fc7\u8be5\u529f\u80fd\u9a8c\u8bc1 IP \u5730\u5740\u662f\u5426\u5c5e\u4e8e\u53c8\u62cd\u4e91 CDN \u8282\u70b9\u3002\u5982\u679c\u5c5e\u4e8e\u53c8\u62cd\u4e91 CDN \u8282\u70b9 IP\uff0c\u53ef\u4ee5\u67e5\u770b\u5230 IP \u6240\u5c5e\u5730\u533a\u53ca\u8fd0\u8425\u5546\u4fe1\u606f\u3002 \u914d\u7f6e\u5f15\u5bfc \u767b\u9646 \u53c8\u62cd\u4e91\u7ba1\u7406\u63a7\u5236\u53f0 \uff0c\u5728\u7f6e\u9876\u83dc\u5355\u8fdb\u5165 \u5de5\u5177\u7bb1 \uff0c\u627e\u5230 IP \u68c0\u6d4b\u5de5\u5177 \u680f\u76ee\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u5728\u6253\u5f00\u7684\u754c\u9762\u7a97\u53e3\u4e2d\uff0c\u8f93\u5165\u9700\u8981\u68c0\u6d4b\u7684 IP \u5730\u5740\uff0c\u70b9\u51fb \u68c0\u6d4b \u6309\u94ae\uff0c\u5373\u53ef\u67e5\u770b\u68c0\u6d4b\u7ed3\u679c\u3002 CDN \u5065\u5eb7\u68c0\u6d4b \u00b6 \u901a\u8fc7\u8be5\u5de5\u5177\uff0c\u53ef\u5bf9\u6bd4\u67e5\u770b\u56fd\u5185\u77e5\u540d\u7f51\u7ad9\u7684\u4e0b\u8f7d\u901f\u5ea6\uff0c\u5e76\u7ed9\u51fa\u53c8\u62cd\u4e91 CDN \u4e0b\u8f7d\u901f\u5ea6\u8bc4\u4f30\u7ed3\u679c\u3002\u4e0e\u6b64\u540c\u65f6\uff0c\u53ef\u663e\u793a\u5ba2\u6237\u7aef\u7f51\u7edc\u57fa\u672c\u4fe1\u606f\uff0c\u65b9\u4fbf\u5b9a\u4f4d\u95ee\u9898\u3002 \u914d\u7f6e\u5f15\u5bfc \u767b\u9646 \u53c8\u62cd\u4e91\u7ba1\u7406\u63a7\u5236\u53f0 \uff0c\u5728\u7f6e\u9876\u83dc\u5355\u8fdb\u5165 \u5de5\u5177\u7bb1 \uff0c\u627e\u5230 CDN \u5065\u5eb7\u68c0\u6d4b \u680f\u76ee\u3002\u70b9\u51fb\u94fe\u63a5\u4e4b\u540e\uff0c\u4f1a\u8df3\u8f6c\u5230\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u60a8\u4e5f\u53ef\u4ee5\u70b9\u51fb\u94fe\u63a5 \u53c8\u62cd\u4e91 CDN \u5065\u5eb7\u68c0\u67e5\u5de5\u5177 \u8fdb\u884c\u67e5\u770b\u3002 \u5b50\u8d26\u53f7\u7ba1\u7406 \u00b6 \u4e3a\u4e86\u65b9\u4fbf\u4e0d\u540c\u7684\u64cd\u4f5c\u4eba\u5458\u7ba1\u7406\u3001\u67e5\u770b\u4e0d\u540c\u7684\u670d\u52a1\u914d\u7f6e\uff0c\u53c8\u62cd\u4e91\u63a8\u51fa\u4e86\u5b50\u8d26\u53f7\u529f\u80fd\u3002\u4e3b\u8d26\u53f7\u53ef\u4ee5\u6839\u636e\u9700\u8981\u521b\u5efa\u591a\u4e2a\u5b50\u8d26\u53f7\uff0c\u5e76\u4e3a\u6bcf\u4e2a\u5b50\u8d26\u53f7\u5206\u914d\u4e0d\u540c\u6743\u9650\uff0c\u4f9b\u4e0d\u540c\u7ea7\u522b\u7684\u4eba\u4f7f\u7528\u3002\u4e0d\u540c\u7ba1\u7406\u4eba\u5458\u53ef\u4ee5\u901a\u8fc7\u5b50\u8d26\u53f7\uff0c\u767b\u5165\u53c8\u62cd\u4e91\u63a7\u5236\u53f0\uff0c\u67e5\u770b\u3001\u914d\u7f6e\u3001\u7ba1\u7406\u76f8\u5e94\u7684\u670d\u52a1\u3001\u529f\u80fd\u3002 \u914d\u7f6e\u5f15\u5bfc \u7b2c\u4e00\u6b65\uff1a\u521b\u5efa\u5b50\u8d26\u53f7 \u767b\u9646 CDN \u63a7\u5236\u53f0 \uff0c\u8fdb\u5165 \u300c\u8d26\u6237\u7ba1\u7406\u300d\u9875\u9762\uff0c\u627e\u5230\u300c\u5b50\u8d26\u53f7\u300d\u914d\u7f6e\u9879\uff0c\u70b9\u51fb\u300c\u521b\u5efa\u5b50\u8d26\u53f7\u300d \u7b2c\u4e8c\u6b65\uff1a\u57fa\u672c\u914d\u7f6e \u8be5\u6b65\u9aa4\u5305\u542b\u4e86\u521b\u5efa\u5b50\u8d26\u53f7\u540d\u79f0\u3001\u5bc6\u7801\uff0c\u586b\u5199\u5907\u6ce8\u7b49\u4fe1\u606f\u3002 \u7b2c\u4e09\u6b65\uff1a\u6388\u6743 \u529f\u80fd\u6388\u6743\u754c\u9762\u5982\u622a\u56fe\u6240\u793a\uff1a \u6388\u6743\u6b64\u5b50\u8d26\u53f7\u53ef\u4ee5\u67e5\u770b\u3001\u7ba1\u7406\u7684\u529f\u80fd\u6743\u9650\u5305\u62ec\uff1a CDN \uff1a\u6388\u6743\u5b50\u8d26\u53f7\u53ef\u4ee5\u67e5\u770b\u3001\u7ba1\u7406\u3001\u914d\u7f6e\u7684 CDN \u670d\u52a1\uff0c\u5e76\u4e14\u53ef\u6388\u6743\u6b64\u5b50\u8d26\u53f7\u80fd\u521b\u5efa CDN \u670d\u52a1\u3002 \u4e91\u5b58\u50a8 \uff1a\u6388\u6743\u5b50\u8d26\u53f7\u53ef\u4ee5\u67e5\u770b\u3001\u7ba1\u7406\u3001\u914d\u7f6e\u7684\u4e91\u5b58\u50a8\u670d\u52a1\uff0c\u5e76\u4e14\u53ef\u6388\u6743\u6b64\u5b50\u8d26\u53f7\u80fd\u521b\u5efa\u4e91\u5b58\u50a8\u670d\u52a1\u3002 \u76f4\u64ad \uff1a\u6388\u6743\u5b50\u8d26\u53f7\u53ef\u4ee5\u67e5\u770b\u7684\u76f4\u64ad\u670d\u52a1\uff0c\u5e76\u4e14\u53ef\u6388\u6743\u6b64\u5b50\u8d26\u53f7\u80fd\u521b\u5efa\u76f4\u64ad\u670d\u52a1\u3002 \u7edf\u8ba1 \uff1a\u6388\u6743\u5b50\u8d26\u53f7\u53ef\u4ee5\u67e5\u770b \u6240\u6709 CDN\u3001\u4e91\u5b58\u50a8\u3001\u76f4\u64ad\u670d\u52a1\u7684\u7edf\u8ba1\u6570\u636e\u3002 \u76d1\u63a7 \uff1a\u6388\u6743\u5b50\u8d26\u53f7\u53ef\u4ee5\u67e5\u770b \u6240\u6709 CDN\u3001\u4e91\u5b58\u50a8\u3001\u76f4\u64ad\u670d\u52a1\u7684\u76d1\u63a7\u6570\u636e\u3002 \u5237\u65b0 \uff1a\u6388\u6743\u5b50\u8d26\u53f7\u53ef\u4ee5\u9488\u5bf9 \u6240\u6709 CDN\u3001\u4e91\u5b58\u50a8\u670d\u52a1\u8fdb\u884c\u5237\u65b0\u3001\u9884\u70ed\u7b49\u64cd\u4f5c\u3002 \u7b2c\u56db\u6b65\uff1a\u767b\u5165\u5b50\u8d26\u53f7 \u6388\u6743\u67d0\u4e2a\u5b50\u8d26\u53f7\u6240\u6709\u529f\u80fd\uff0c\u767b\u5165\u540e\u5c55\u793a\u5982\u4e0b\uff1a \u6ce8\u610f\u4e8b\u9879 \u5b50\u8d26\u53f7\u5177\u5907\u521b\u5efa\u3001\u7ba1\u7406\u3001\u4fee\u6539\u670d\u52a1\u914d\u7f6e\u7b49\u6743\u9650\uff1b\u53ef\u67e5\u770b\u6240\u6709 CDN\u3001\u4e91\u5b58\u50a8\u3001\u76f4\u64ad\u670d\u52a1\u7684\u7edf\u8ba1\u3001\u76d1\u63a7\u6570\u636e\uff1b\u53ef\u4ee5\u9488\u5bf9 CDN\u3001\u4e91\u5b58\u50a8\u6240\u6709\u670d\u52a1\u8fdb\u884c\u5237\u65b0\u3001\u9884\u70ed\u64cd\u4f5c\uff1b\u6240\u4ee5\u8bf7\u8c28\u614e\u5206\u914d\u3002 \u5b50\u8d26\u53f7\u548c\u5bc6\u7801\u8bf7\u8c28\u614e\u4fdd\u7ba1\uff0c\u4e00\u65e6\u6cc4\u9732\uff0c\u8bf7\u53ca\u65f6\u66f4\u6362\u3002 \u5982\u6709\u7591\u95ee\u8bf7 \u8054\u7cfb\u6211\u4eec","title":"\u8f85\u52a9\u5de5\u5177"},{"location":"cdn/tools/#ip","text":"\u53ef\u901a\u8fc7\u8be5\u529f\u80fd\u9a8c\u8bc1 IP \u5730\u5740\u662f\u5426\u5c5e\u4e8e\u53c8\u62cd\u4e91 CDN \u8282\u70b9\u3002\u5982\u679c\u5c5e\u4e8e\u53c8\u62cd\u4e91 CDN \u8282\u70b9 IP\uff0c\u53ef\u4ee5\u67e5\u770b\u5230 IP \u6240\u5c5e\u5730\u533a\u53ca\u8fd0\u8425\u5546\u4fe1\u606f\u3002 \u914d\u7f6e\u5f15\u5bfc \u767b\u9646 \u53c8\u62cd\u4e91\u7ba1\u7406\u63a7\u5236\u53f0 \uff0c\u5728\u7f6e\u9876\u83dc\u5355\u8fdb\u5165 \u5de5\u5177\u7bb1 \uff0c\u627e\u5230 IP \u68c0\u6d4b\u5de5\u5177 \u680f\u76ee\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u5728\u6253\u5f00\u7684\u754c\u9762\u7a97\u53e3\u4e2d\uff0c\u8f93\u5165\u9700\u8981\u68c0\u6d4b\u7684 IP \u5730\u5740\uff0c\u70b9\u51fb \u68c0\u6d4b \u6309\u94ae\uff0c\u5373\u53ef\u67e5\u770b\u68c0\u6d4b\u7ed3\u679c\u3002","title":"IP \u68c0\u6d4b\u5de5\u5177"},{"location":"cdn/tools/#cdn","text":"\u901a\u8fc7\u8be5\u5de5\u5177\uff0c\u53ef\u5bf9\u6bd4\u67e5\u770b\u56fd\u5185\u77e5\u540d\u7f51\u7ad9\u7684\u4e0b\u8f7d\u901f\u5ea6\uff0c\u5e76\u7ed9\u51fa\u53c8\u62cd\u4e91 CDN \u4e0b\u8f7d\u901f\u5ea6\u8bc4\u4f30\u7ed3\u679c\u3002\u4e0e\u6b64\u540c\u65f6\uff0c\u53ef\u663e\u793a\u5ba2\u6237\u7aef\u7f51\u7edc\u57fa\u672c\u4fe1\u606f\uff0c\u65b9\u4fbf\u5b9a\u4f4d\u95ee\u9898\u3002 \u914d\u7f6e\u5f15\u5bfc \u767b\u9646 \u53c8\u62cd\u4e91\u7ba1\u7406\u63a7\u5236\u53f0 \uff0c\u5728\u7f6e\u9876\u83dc\u5355\u8fdb\u5165 \u5de5\u5177\u7bb1 \uff0c\u627e\u5230 CDN \u5065\u5eb7\u68c0\u6d4b \u680f\u76ee\u3002\u70b9\u51fb\u94fe\u63a5\u4e4b\u540e\uff0c\u4f1a\u8df3\u8f6c\u5230\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u60a8\u4e5f\u53ef\u4ee5\u70b9\u51fb\u94fe\u63a5 \u53c8\u62cd\u4e91 CDN \u5065\u5eb7\u68c0\u67e5\u5de5\u5177 \u8fdb\u884c\u67e5\u770b\u3002","title":"CDN \u5065\u5eb7\u68c0\u6d4b"},{"location":"cdn/tools/#_1","text":"\u4e3a\u4e86\u65b9\u4fbf\u4e0d\u540c\u7684\u64cd\u4f5c\u4eba\u5458\u7ba1\u7406\u3001\u67e5\u770b\u4e0d\u540c\u7684\u670d\u52a1\u914d\u7f6e\uff0c\u53c8\u62cd\u4e91\u63a8\u51fa\u4e86\u5b50\u8d26\u53f7\u529f\u80fd\u3002\u4e3b\u8d26\u53f7\u53ef\u4ee5\u6839\u636e\u9700\u8981\u521b\u5efa\u591a\u4e2a\u5b50\u8d26\u53f7\uff0c\u5e76\u4e3a\u6bcf\u4e2a\u5b50\u8d26\u53f7\u5206\u914d\u4e0d\u540c\u6743\u9650\uff0c\u4f9b\u4e0d\u540c\u7ea7\u522b\u7684\u4eba\u4f7f\u7528\u3002\u4e0d\u540c\u7ba1\u7406\u4eba\u5458\u53ef\u4ee5\u901a\u8fc7\u5b50\u8d26\u53f7\uff0c\u767b\u5165\u53c8\u62cd\u4e91\u63a7\u5236\u53f0\uff0c\u67e5\u770b\u3001\u914d\u7f6e\u3001\u7ba1\u7406\u76f8\u5e94\u7684\u670d\u52a1\u3001\u529f\u80fd\u3002 \u914d\u7f6e\u5f15\u5bfc \u7b2c\u4e00\u6b65\uff1a\u521b\u5efa\u5b50\u8d26\u53f7 \u767b\u9646 CDN \u63a7\u5236\u53f0 \uff0c\u8fdb\u5165 \u300c\u8d26\u6237\u7ba1\u7406\u300d\u9875\u9762\uff0c\u627e\u5230\u300c\u5b50\u8d26\u53f7\u300d\u914d\u7f6e\u9879\uff0c\u70b9\u51fb\u300c\u521b\u5efa\u5b50\u8d26\u53f7\u300d \u7b2c\u4e8c\u6b65\uff1a\u57fa\u672c\u914d\u7f6e \u8be5\u6b65\u9aa4\u5305\u542b\u4e86\u521b\u5efa\u5b50\u8d26\u53f7\u540d\u79f0\u3001\u5bc6\u7801\uff0c\u586b\u5199\u5907\u6ce8\u7b49\u4fe1\u606f\u3002 \u7b2c\u4e09\u6b65\uff1a\u6388\u6743 \u529f\u80fd\u6388\u6743\u754c\u9762\u5982\u622a\u56fe\u6240\u793a\uff1a \u6388\u6743\u6b64\u5b50\u8d26\u53f7\u53ef\u4ee5\u67e5\u770b\u3001\u7ba1\u7406\u7684\u529f\u80fd\u6743\u9650\u5305\u62ec\uff1a CDN \uff1a\u6388\u6743\u5b50\u8d26\u53f7\u53ef\u4ee5\u67e5\u770b\u3001\u7ba1\u7406\u3001\u914d\u7f6e\u7684 CDN \u670d\u52a1\uff0c\u5e76\u4e14\u53ef\u6388\u6743\u6b64\u5b50\u8d26\u53f7\u80fd\u521b\u5efa CDN \u670d\u52a1\u3002 \u4e91\u5b58\u50a8 \uff1a\u6388\u6743\u5b50\u8d26\u53f7\u53ef\u4ee5\u67e5\u770b\u3001\u7ba1\u7406\u3001\u914d\u7f6e\u7684\u4e91\u5b58\u50a8\u670d\u52a1\uff0c\u5e76\u4e14\u53ef\u6388\u6743\u6b64\u5b50\u8d26\u53f7\u80fd\u521b\u5efa\u4e91\u5b58\u50a8\u670d\u52a1\u3002 \u76f4\u64ad \uff1a\u6388\u6743\u5b50\u8d26\u53f7\u53ef\u4ee5\u67e5\u770b\u7684\u76f4\u64ad\u670d\u52a1\uff0c\u5e76\u4e14\u53ef\u6388\u6743\u6b64\u5b50\u8d26\u53f7\u80fd\u521b\u5efa\u76f4\u64ad\u670d\u52a1\u3002 \u7edf\u8ba1 \uff1a\u6388\u6743\u5b50\u8d26\u53f7\u53ef\u4ee5\u67e5\u770b \u6240\u6709 CDN\u3001\u4e91\u5b58\u50a8\u3001\u76f4\u64ad\u670d\u52a1\u7684\u7edf\u8ba1\u6570\u636e\u3002 \u76d1\u63a7 \uff1a\u6388\u6743\u5b50\u8d26\u53f7\u53ef\u4ee5\u67e5\u770b \u6240\u6709 CDN\u3001\u4e91\u5b58\u50a8\u3001\u76f4\u64ad\u670d\u52a1\u7684\u76d1\u63a7\u6570\u636e\u3002 \u5237\u65b0 \uff1a\u6388\u6743\u5b50\u8d26\u53f7\u53ef\u4ee5\u9488\u5bf9 \u6240\u6709 CDN\u3001\u4e91\u5b58\u50a8\u670d\u52a1\u8fdb\u884c\u5237\u65b0\u3001\u9884\u70ed\u7b49\u64cd\u4f5c\u3002 \u7b2c\u56db\u6b65\uff1a\u767b\u5165\u5b50\u8d26\u53f7 \u6388\u6743\u67d0\u4e2a\u5b50\u8d26\u53f7\u6240\u6709\u529f\u80fd\uff0c\u767b\u5165\u540e\u5c55\u793a\u5982\u4e0b\uff1a \u6ce8\u610f\u4e8b\u9879 \u5b50\u8d26\u53f7\u5177\u5907\u521b\u5efa\u3001\u7ba1\u7406\u3001\u4fee\u6539\u670d\u52a1\u914d\u7f6e\u7b49\u6743\u9650\uff1b\u53ef\u67e5\u770b\u6240\u6709 CDN\u3001\u4e91\u5b58\u50a8\u3001\u76f4\u64ad\u670d\u52a1\u7684\u7edf\u8ba1\u3001\u76d1\u63a7\u6570\u636e\uff1b\u53ef\u4ee5\u9488\u5bf9 CDN\u3001\u4e91\u5b58\u50a8\u6240\u6709\u670d\u52a1\u8fdb\u884c\u5237\u65b0\u3001\u9884\u70ed\u64cd\u4f5c\uff1b\u6240\u4ee5\u8bf7\u8c28\u614e\u5206\u914d\u3002 \u5b50\u8d26\u53f7\u548c\u5bc6\u7801\u8bf7\u8c28\u614e\u4fdd\u7ba1\uff0c\u4e00\u65e6\u6cc4\u9732\uff0c\u8bf7\u53ca\u65f6\u66f4\u6362\u3002 \u5982\u6709\u7591\u95ee\u8bf7 \u8054\u7cfb\u6211\u4eec","title":"\u5b50\u8d26\u53f7\u7ba1\u7406"},{"location":"cloud/","text":"\u53c8\u62cd\u4e91\u5904\u7406\u4ecb\u7ecd \u00b6 \u53c8\u62cd\u4e91\u5904\u7406\uff0c\u57fa\u4e8e\u4e91\u50a8\u5b58\u548c CDN\uff0c\u9488\u5bf9\u591a\u5a92\u4f53\u6570\u636e\uff08\u56fe\u7247\u3001\u97f3\u89c6\u9891\uff09\u63d0\u4f9b\u56fe\u7247\u7f29\u653e\u3001\u56fe\u7247\u6c34\u5370\u3001\u56fe\u7247\u683c\u5f0f\u8f6c\u6362\u3001\u97f3\u89c6\u9891\u8f6c\u7801\u3001\u89c6\u9891\u6c34\u5370\u3001\u89c6\u9891\u5207\u7247\u7b49\u591a\u6837\u7075\u6d3b\u7684\u591a\u7ec8\u7aef\u3001\u591a\u89c4\u683c\u5185\u5bb9\u8f93\u51fa\u52a0\u5de5\u670d\u52a1\u3002 \u57fa\u672c\u6982\u5ff5 \u00b6 ** \u670d\u52a1 ** \u4e91\u5904\u7406\u670d\u52a1\u57fa\u4e8e\u4e91\u5b58\u50a8\u548c CDN \u670d\u52a1\uff0c\u901a\u8fc7\u4ece\u4e91\u5b58\u50a8\u6216\u7528\u6237\u6e90\u83b7\u53d6\u6587\u4ef6\uff0c\u5bf9\u6587\u4ef6\u8fdb\u884c\u52a0\u5de5\uff0c\u52a0\u5de5\u540e\u7684\u6587\u4ef6\u518d\u5b58\u50a8\u3002\u56e0\u6b64\uff0c\u521b\u5efa\u4e00\u4e2a\u4e91\u5b58\u50a8\u6216 CDN \u670d\u52a1\u65f6\uff0c\u81ea\u52a8\u521b\u5efa\u4e86\u4e00\u4e2a\u540c\u540d\u7684\u4e91\u5904\u7406\u670d\u52a1\u3002 ** \u64cd\u4f5c\u5458 ** \u64cd\u4f5c\u5458\u662f\u60a8\u8bbf\u95ee\u4e91\u5b58\u50a8\u3001\u4e91\u5904\u7406\u7684\u51ed\u8bc1\uff0c\u5b83\u7531\u64cd\u4f5c\u5458\u540d\u79f0\u548c\u5bc6\u7801\u7ec4\u6210\uff0c\u64cd\u4f5c\u5458\u540d\u79f0\u7c7b\u4f3c\u8eab\u4efd\u6807\u8bc6\uff0c\u5bc6\u7801\u7684\u4f5c\u7528\u662f\u7b7e\u540d\u60a8\u7684\u8bbf\u95ee\u8bf7\u6c42\uff0c\u4ee5\u9632\u88ab\u7be1\u6539\u3002 \u7279\u522b\u5730\uff0c\u64cd\u4f5c\u5458\u4e0e\u670d\u52a1\u540d\u662f N:N \u7684\u5173\u7cfb\uff0c\u4e00\u4e2a\u670d\u52a1\u540d\u53ef\u4ee5\u6709\u591a\u4e2a\u64cd\u4f5c\u5458\uff0c\u4e00\u4e2a\u64cd\u4f5c\u5458\u53ef\u4ee5\u5f52\u5c5e\u4e8e\u591a\u4e2a\u670d\u52a1\u540d\u3002 ** \u64cd\u4f5c\u5458\u6743\u9650 ** \u64cd\u4f5c\u5458\u6743\u9650\u6709 3 \u79cd\uff0c\u5206\u522b\u662f\u53ef\u8bfb\u53d6\u3001\u53ef\u5199\u5165\u3001\u53ef\u5220\u9664\uff0c\u652f\u6301\u591a\u9009\u3002\u60a8\u53ef\u4ee5\u6839\u636e\u9700\u8981\uff0c\u4e3a\u64cd\u4f5c\u5458\u914d\u7f6e\u5408\u9002\u7684\u6743\u9650\uff1b\u4e5f\u53ef\u4ee5\u521b\u5efa\u591a\u4e2a\u64cd\u4f5c\u5458\uff0c\u4e3a\u4e0d\u540c\u64cd\u4f5c\u5458\u5206\u914d\u4e0d\u540c\u6743\u9650\uff0c\u4f9b\u4e0d\u540c\u7ea7\u522b\u7684\u4eba\u4f7f\u7528\u3002 ** \u8bbf\u95ee\u670d\u52a1 ** \u501f\u52a9\u670d\u52a1\u540d\u79f0\u3001\u64cd\u4f5c\u5458\uff0c\u53ef\u4ee5\u901a\u8fc7 API/SDK \u8bbf\u95ee\u4e91\u5904\u7406\uff0c\u7ba1\u7406\u60a8\u5728\u4e91\u5904\u7406\u7684\u670d\u52a1\u3002 \u57fa\u7840\u67b6\u6784 \u00b6 \u4ea7\u54c1\u529f\u80fd \u00b6 ** \u56fe\u7247\u5904\u7406 ** \u652f\u6301\u56fe\u7247\u7f29\u5c0f\u3001\u653e\u5927\u3001\u88c1\u526a\u3001\u6c34\u5370\u3001\u65cb\u8f6c\u3001\u683c\u5f0f\u8f6c\u6362\u3001\u9510\u5316\u3001\u9ad8\u65af\u6a21\u7cca\u3001\u8d28\u91cf\u8bbe\u7f6e\uff0c\u652f\u6301\u7ed9\u56fe\u7247\u6dfb\u52a0\u8fb9\u6846\u3001\u753b\u5e03\u3001\u6e10\u53d8\u56fe\u5c42\u3002 \u652f\u6301\u56fe\u7247 metadata \u83b7\u53d6\uff08\u5305\u62ec\u57fa\u672c\u4fe1\u606f\u3001Exif\u3001IPTC\uff09\u3001\u4e3b\u9898\u8272\u63d0\u53d6\uff0c\u652f\u6301\u56fe\u7247\u5927\u5c0f\u538b\u7f29\u4f18\u5316\u3001JPG \u56fe\u6e10\u8fdb\u5f0f\u8f7d\u5165\u3001\u591a\u5e27 GIF \u8f6c\u5355\u5e27 GIF\u3002 \u652f\u6301\u56fe\u7247 ICC \u4fe1\u606f\u53bb\u9664\u3001metadata \u53bb\u9664\u3002 ** \u97f3\u89c6\u9891\u5904\u7406 ** \u652f\u6301\u89c6\u9891\u8f6c\u7801\u3001\u5207\u7247\u3001\u6c34\u5370\u3001\u622a\u56fe\u3001\u526a\u8f91\u3001\u62fc\u63a5\uff0c\u652f\u6301\u97f3\u9891\u8f6c\u7801\u3001\u526a\u8f91\u3001\u62fc\u63a5\u3002 \u652f\u6301\u97f3/\u89c6\u9891 metadata \u83b7\u53d6\u3002 ** \u538b\u7f29\u89e3\u538b\u7f29 ** \u652f\u6301\u6587\u4ef6\u538b\u7f29\uff0c\u652f\u6301\u538b\u7f29\u6587\u4ef6\u89e3\u538b\u7f29\u3002 ** \u6587\u4ef6\u62c9\u53d6 ** \u652f\u6301\u4ece\u7b2c\u4e09\u65b9\u5e73\u53f0\u83b7\u53d6\u6587\u4ef6\u3002 \u5e94\u7528\u573a\u666f \u00b6 ** \u7535\u5546\u3001\u56fe\u7ad9\u7b49\u5927\u91cf\u56fe\u7247\u5904\u7406 ** ** \u89c6\u9891\u3001\u5e7f\u7535\u3001\u7efc\u827a\u3001\u7535\u53f0\u7b49\u5927\u91cf\u97f3/\u89c6\u9891\u5904\u7406 ** ** \u5927\u91cf\u56fe\u7247\u3001\u5e94\u7528\u66f4\u65b0\u5305\u7b49\u4e0a\u4f20\u89e3\u538b\u7f29\u6216\u538b\u7f29\u4e0b\u8f7d ** \u4ea7\u54c1\u4f18\u52bf \u00b6 ** \u7a33\u5b9a\u3001\u53ef\u9760 ** \u6bcf\u5929\u8d85 9 \u5343\u4e07\u6b21\u7684\u4f5c\u56fe\u548c\u97f3\u89c6\u9891\u5904\u7406\u8bf7\u6c42\uff0c\u670d\u52a1\u53ef\u9760\u6027\u8fbe 99.9999% \uff0c\u63d0\u4f9b\u7a33\u5b9a\u3001\u53ef\u9760\u7684\u4e91\u5904\u7406\u529f\u80fd\u3002 ** \u529f\u80fd\u4e30\u5bcc ** \u652f\u6301\u56fe\u7247\u7f29\u653e\u3001\u6c34\u5370\u3001\u65cb\u8f6c\u3001\u88c1\u526a\u4ee5\u53ca\u97f3\u89c6\u9891\u8f6c\u7801\u7387\u3001\u8f6c\u683c\u5f0f\u3001\u5207\u7247\u7b49\uff0c\u8f7b\u677e\u6ee1\u8db3\u6240\u6709\u5e38\u7528\u5185\u5bb9\u52a0\u5de5\u9700\u6c42\u3002 ** \u6613\u4e8e\u4f7f\u7528 ** \u5206\u522b\u63d0\u4f9b\u9488\u5bf9\u8bbf\u95ee\u548c\u4e0a\u4f20\u573a\u666f\u4f5c\u56fe\u9700\u6c42\u7684\u5904\u7406\u65b9\u5f0f\uff0c\u5c06\u539f\u56fe\u8fdb\u884c\u591a\u89c4\u683c\u8f93\u51fa\uff0c\u4fbf\u4e8e\u5728\u4e0d\u540c\u573a\u666f\u4e0b\u7075\u6d3b\u5e94\u7528\u3002 ** SDK \u96c6\u6210 ** \u63d0\u4f9b iOS/Android \u64ad\u653e\u5668 SDK\uff0c\u53ef\u5feb\u901f\u5f00\u53d1\u97f3\u89c6\u9891\u64ad\u653e\u79fb\u52a8\u7aef\u5e94\u7528\uff0c\u5b9e\u73b0\u56fe\u7247\u89c6\u9891\u5408\u6210\u53ca\u64ad\u653e\u3002 ** \u7ecf\u6d4e\u5b9e\u60e0 ** \u514d\u8d39\u7684\u56fe\u7247\u5904\u7406\uff0c\u6309\u9700\u4ed8\u8d39\u7684\u97f3\u89c6\u9891\u5904\u7406\uff0c\u4e0e\u4f20\u7edf\u8d2d\u7f6e\u786c\u4ef6\u76f8\u6bd4\uff0c\u6781\u5927\u7684\u964d\u4f4e\u4e86\u6210\u672c\u3002 ** \u5b8c\u7f8e\u7ed3\u5408 ** \u4e13\u4e3a\u914d\u5408\u5b58\u50a8\u4e0e CDN \u4f7f\u7528\u800c\u8bbe\u8ba1\uff0c\u4e3a\u591a\u79cd\u5e94\u7528\u573a\u666f\u63d0\u4f9b\u5b8c\u6574\u7684\u5b58\u50a8\u3001\u56fe\u7247\u97f3\u89c6\u9891\u5904\u7406\u548c\u52a0\u901f\u5206\u53d1\u89e3\u51b3\u65b9\u6848\u3002 \u6587\u6848\u7ea6\u5b9a \u00b6 \u5728\u60a8\u9605\u8bfb\u6587\u6863\u4e4b\u524d\uff0c\u8bf7\u5148\u719f\u6089\u6211\u4eec\u7684\u4e00\u4e9b\u7ea6\u5b9a\uff0c\u4ee5\u4fbf\u60a8\u7684\u7406\u89e3\u3002 ** \u66ff\u4ee3\u5b57\u7b26 ** \u6240\u6709\u7528\u5c16\u62ec\u53f7 <> \u5305\u56f4\u7684\u5b57\u7b26\uff0c\u5747\u4e3a\u9700\u8981\u6839\u636e\u5b9e\u9645\u60c5\u51b5\u505a\u66ff\u6362\u7684\u5730\u65b9\uff0c\u7279\u522b\u7684\uff0c <> \u4ec5\u4f5c\u4e3a\u6587\u6863\u4e2d\u5c06\u5176\u533a\u5206\u4e8e\u5176\u4ed6\u5b57\u7b26\uff0c\u60a8\u5728\u5b9e\u9645\u4f7f\u7528\u7684\u65f6\u5019\uff0c\u4e0d\u9700\u8981\u52a0\u4e0a <> \u3002 \u5982\u6709\u7591\u95ee\u8bf7 \u8054\u7cfb\u6211\u4eec","title":"\u4ea7\u54c1\u7b80\u4ecb"},{"location":"cloud/#_1","text":"\u53c8\u62cd\u4e91\u5904\u7406\uff0c\u57fa\u4e8e\u4e91\u50a8\u5b58\u548c CDN\uff0c\u9488\u5bf9\u591a\u5a92\u4f53\u6570\u636e\uff08\u56fe\u7247\u3001\u97f3\u89c6\u9891\uff09\u63d0\u4f9b\u56fe\u7247\u7f29\u653e\u3001\u56fe\u7247\u6c34\u5370\u3001\u56fe\u7247\u683c\u5f0f\u8f6c\u6362\u3001\u97f3\u89c6\u9891\u8f6c\u7801\u3001\u89c6\u9891\u6c34\u5370\u3001\u89c6\u9891\u5207\u7247\u7b49\u591a\u6837\u7075\u6d3b\u7684\u591a\u7ec8\u7aef\u3001\u591a\u89c4\u683c\u5185\u5bb9\u8f93\u51fa\u52a0\u5de5\u670d\u52a1\u3002","title":"\u53c8\u62cd\u4e91\u5904\u7406\u4ecb\u7ecd"},{"location":"cloud/#_2","text":"** \u670d\u52a1 ** \u4e91\u5904\u7406\u670d\u52a1\u57fa\u4e8e\u4e91\u5b58\u50a8\u548c CDN \u670d\u52a1\uff0c\u901a\u8fc7\u4ece\u4e91\u5b58\u50a8\u6216\u7528\u6237\u6e90\u83b7\u53d6\u6587\u4ef6\uff0c\u5bf9\u6587\u4ef6\u8fdb\u884c\u52a0\u5de5\uff0c\u52a0\u5de5\u540e\u7684\u6587\u4ef6\u518d\u5b58\u50a8\u3002\u56e0\u6b64\uff0c\u521b\u5efa\u4e00\u4e2a\u4e91\u5b58\u50a8\u6216 CDN \u670d\u52a1\u65f6\uff0c\u81ea\u52a8\u521b\u5efa\u4e86\u4e00\u4e2a\u540c\u540d\u7684\u4e91\u5904\u7406\u670d\u52a1\u3002 ** \u64cd\u4f5c\u5458 ** \u64cd\u4f5c\u5458\u662f\u60a8\u8bbf\u95ee\u4e91\u5b58\u50a8\u3001\u4e91\u5904\u7406\u7684\u51ed\u8bc1\uff0c\u5b83\u7531\u64cd\u4f5c\u5458\u540d\u79f0\u548c\u5bc6\u7801\u7ec4\u6210\uff0c\u64cd\u4f5c\u5458\u540d\u79f0\u7c7b\u4f3c\u8eab\u4efd\u6807\u8bc6\uff0c\u5bc6\u7801\u7684\u4f5c\u7528\u662f\u7b7e\u540d\u60a8\u7684\u8bbf\u95ee\u8bf7\u6c42\uff0c\u4ee5\u9632\u88ab\u7be1\u6539\u3002 \u7279\u522b\u5730\uff0c\u64cd\u4f5c\u5458\u4e0e\u670d\u52a1\u540d\u662f N:N \u7684\u5173\u7cfb\uff0c\u4e00\u4e2a\u670d\u52a1\u540d\u53ef\u4ee5\u6709\u591a\u4e2a\u64cd\u4f5c\u5458\uff0c\u4e00\u4e2a\u64cd\u4f5c\u5458\u53ef\u4ee5\u5f52\u5c5e\u4e8e\u591a\u4e2a\u670d\u52a1\u540d\u3002 ** \u64cd\u4f5c\u5458\u6743\u9650 ** \u64cd\u4f5c\u5458\u6743\u9650\u6709 3 \u79cd\uff0c\u5206\u522b\u662f\u53ef\u8bfb\u53d6\u3001\u53ef\u5199\u5165\u3001\u53ef\u5220\u9664\uff0c\u652f\u6301\u591a\u9009\u3002\u60a8\u53ef\u4ee5\u6839\u636e\u9700\u8981\uff0c\u4e3a\u64cd\u4f5c\u5458\u914d\u7f6e\u5408\u9002\u7684\u6743\u9650\uff1b\u4e5f\u53ef\u4ee5\u521b\u5efa\u591a\u4e2a\u64cd\u4f5c\u5458\uff0c\u4e3a\u4e0d\u540c\u64cd\u4f5c\u5458\u5206\u914d\u4e0d\u540c\u6743\u9650\uff0c\u4f9b\u4e0d\u540c\u7ea7\u522b\u7684\u4eba\u4f7f\u7528\u3002 ** \u8bbf\u95ee\u670d\u52a1 ** \u501f\u52a9\u670d\u52a1\u540d\u79f0\u3001\u64cd\u4f5c\u5458\uff0c\u53ef\u4ee5\u901a\u8fc7 API/SDK \u8bbf\u95ee\u4e91\u5904\u7406\uff0c\u7ba1\u7406\u60a8\u5728\u4e91\u5904\u7406\u7684\u670d\u52a1\u3002","title":"\u57fa\u672c\u6982\u5ff5"},{"location":"cloud/#_3","text":"","title":"\u57fa\u7840\u67b6\u6784"},{"location":"cloud/#_4","text":"** \u56fe\u7247\u5904\u7406 ** \u652f\u6301\u56fe\u7247\u7f29\u5c0f\u3001\u653e\u5927\u3001\u88c1\u526a\u3001\u6c34\u5370\u3001\u65cb\u8f6c\u3001\u683c\u5f0f\u8f6c\u6362\u3001\u9510\u5316\u3001\u9ad8\u65af\u6a21\u7cca\u3001\u8d28\u91cf\u8bbe\u7f6e\uff0c\u652f\u6301\u7ed9\u56fe\u7247\u6dfb\u52a0\u8fb9\u6846\u3001\u753b\u5e03\u3001\u6e10\u53d8\u56fe\u5c42\u3002 \u652f\u6301\u56fe\u7247 metadata \u83b7\u53d6\uff08\u5305\u62ec\u57fa\u672c\u4fe1\u606f\u3001Exif\u3001IPTC\uff09\u3001\u4e3b\u9898\u8272\u63d0\u53d6\uff0c\u652f\u6301\u56fe\u7247\u5927\u5c0f\u538b\u7f29\u4f18\u5316\u3001JPG \u56fe\u6e10\u8fdb\u5f0f\u8f7d\u5165\u3001\u591a\u5e27 GIF \u8f6c\u5355\u5e27 GIF\u3002 \u652f\u6301\u56fe\u7247 ICC \u4fe1\u606f\u53bb\u9664\u3001metadata \u53bb\u9664\u3002 ** \u97f3\u89c6\u9891\u5904\u7406 ** \u652f\u6301\u89c6\u9891\u8f6c\u7801\u3001\u5207\u7247\u3001\u6c34\u5370\u3001\u622a\u56fe\u3001\u526a\u8f91\u3001\u62fc\u63a5\uff0c\u652f\u6301\u97f3\u9891\u8f6c\u7801\u3001\u526a\u8f91\u3001\u62fc\u63a5\u3002 \u652f\u6301\u97f3/\u89c6\u9891 metadata \u83b7\u53d6\u3002 ** \u538b\u7f29\u89e3\u538b\u7f29 ** \u652f\u6301\u6587\u4ef6\u538b\u7f29\uff0c\u652f\u6301\u538b\u7f29\u6587\u4ef6\u89e3\u538b\u7f29\u3002 ** \u6587\u4ef6\u62c9\u53d6 ** \u652f\u6301\u4ece\u7b2c\u4e09\u65b9\u5e73\u53f0\u83b7\u53d6\u6587\u4ef6\u3002","title":"\u4ea7\u54c1\u529f\u80fd"},{"location":"cloud/#_5","text":"** \u7535\u5546\u3001\u56fe\u7ad9\u7b49\u5927\u91cf\u56fe\u7247\u5904\u7406 ** ** \u89c6\u9891\u3001\u5e7f\u7535\u3001\u7efc\u827a\u3001\u7535\u53f0\u7b49\u5927\u91cf\u97f3/\u89c6\u9891\u5904\u7406 ** ** \u5927\u91cf\u56fe\u7247\u3001\u5e94\u7528\u66f4\u65b0\u5305\u7b49\u4e0a\u4f20\u89e3\u538b\u7f29\u6216\u538b\u7f29\u4e0b\u8f7d **","title":"\u5e94\u7528\u573a\u666f"},{"location":"cloud/#_6","text":"** \u7a33\u5b9a\u3001\u53ef\u9760 ** \u6bcf\u5929\u8d85 9 \u5343\u4e07\u6b21\u7684\u4f5c\u56fe\u548c\u97f3\u89c6\u9891\u5904\u7406\u8bf7\u6c42\uff0c\u670d\u52a1\u53ef\u9760\u6027\u8fbe 99.9999% \uff0c\u63d0\u4f9b\u7a33\u5b9a\u3001\u53ef\u9760\u7684\u4e91\u5904\u7406\u529f\u80fd\u3002 ** \u529f\u80fd\u4e30\u5bcc ** \u652f\u6301\u56fe\u7247\u7f29\u653e\u3001\u6c34\u5370\u3001\u65cb\u8f6c\u3001\u88c1\u526a\u4ee5\u53ca\u97f3\u89c6\u9891\u8f6c\u7801\u7387\u3001\u8f6c\u683c\u5f0f\u3001\u5207\u7247\u7b49\uff0c\u8f7b\u677e\u6ee1\u8db3\u6240\u6709\u5e38\u7528\u5185\u5bb9\u52a0\u5de5\u9700\u6c42\u3002 ** \u6613\u4e8e\u4f7f\u7528 ** \u5206\u522b\u63d0\u4f9b\u9488\u5bf9\u8bbf\u95ee\u548c\u4e0a\u4f20\u573a\u666f\u4f5c\u56fe\u9700\u6c42\u7684\u5904\u7406\u65b9\u5f0f\uff0c\u5c06\u539f\u56fe\u8fdb\u884c\u591a\u89c4\u683c\u8f93\u51fa\uff0c\u4fbf\u4e8e\u5728\u4e0d\u540c\u573a\u666f\u4e0b\u7075\u6d3b\u5e94\u7528\u3002 ** SDK \u96c6\u6210 ** \u63d0\u4f9b iOS/Android \u64ad\u653e\u5668 SDK\uff0c\u53ef\u5feb\u901f\u5f00\u53d1\u97f3\u89c6\u9891\u64ad\u653e\u79fb\u52a8\u7aef\u5e94\u7528\uff0c\u5b9e\u73b0\u56fe\u7247\u89c6\u9891\u5408\u6210\u53ca\u64ad\u653e\u3002 ** \u7ecf\u6d4e\u5b9e\u60e0 ** \u514d\u8d39\u7684\u56fe\u7247\u5904\u7406\uff0c\u6309\u9700\u4ed8\u8d39\u7684\u97f3\u89c6\u9891\u5904\u7406\uff0c\u4e0e\u4f20\u7edf\u8d2d\u7f6e\u786c\u4ef6\u76f8\u6bd4\uff0c\u6781\u5927\u7684\u964d\u4f4e\u4e86\u6210\u672c\u3002 ** \u5b8c\u7f8e\u7ed3\u5408 ** \u4e13\u4e3a\u914d\u5408\u5b58\u50a8\u4e0e CDN \u4f7f\u7528\u800c\u8bbe\u8ba1\uff0c\u4e3a\u591a\u79cd\u5e94\u7528\u573a\u666f\u63d0\u4f9b\u5b8c\u6574\u7684\u5b58\u50a8\u3001\u56fe\u7247\u97f3\u89c6\u9891\u5904\u7406\u548c\u52a0\u901f\u5206\u53d1\u89e3\u51b3\u65b9\u6848\u3002","title":"\u4ea7\u54c1\u4f18\u52bf"},{"location":"cloud/#_7","text":"\u5728\u60a8\u9605\u8bfb\u6587\u6863\u4e4b\u524d\uff0c\u8bf7\u5148\u719f\u6089\u6211\u4eec\u7684\u4e00\u4e9b\u7ea6\u5b9a\uff0c\u4ee5\u4fbf\u60a8\u7684\u7406\u89e3\u3002 ** \u66ff\u4ee3\u5b57\u7b26 ** \u6240\u6709\u7528\u5c16\u62ec\u53f7 <> \u5305\u56f4\u7684\u5b57\u7b26\uff0c\u5747\u4e3a\u9700\u8981\u6839\u636e\u5b9e\u9645\u60c5\u51b5\u505a\u66ff\u6362\u7684\u5730\u65b9\uff0c\u7279\u522b\u7684\uff0c <> \u4ec5\u4f5c\u4e3a\u6587\u6863\u4e2d\u5c06\u5176\u533a\u5206\u4e8e\u5176\u4ed6\u5b57\u7b26\uff0c\u60a8\u5728\u5b9e\u9645\u4f7f\u7528\u7684\u65f6\u5019\uff0c\u4e0d\u9700\u8981\u52a0\u4e0a <> \u3002 \u5982\u6709\u7591\u95ee\u8bf7 \u8054\u7cfb\u6211\u4eec","title":"\u6587\u6848\u7ea6\u5b9a"},{"location":"cloud/async_image/","text":"\u5feb\u901f\u5165\u95e8 \u00b6 \u53c8\u62cd\u4e91\u5904\u7406\uff08\u5f02\u6b65\u56fe\u7247\u62fc\u63a5\uff09\u57fa\u4e8e\u4e91\u5b58\u50a8\u670d\u52a1\uff0c\u60a8\u5728\u4f7f\u7528\u5b83\u4e4b\u524d\uff0c\u8bf7\u786e\u4fdd\u60a8\u5df2\u7ecf\u6ce8\u518c\u53c8\u62cd\u4e91\u8d26\u53f7\u5e76\u5b8c\u6210\u5b9e\u540d\u9a8c\u8bc1\uff0c\u8bf7\u786e\u4fdd\u60a8\u5df2\u7ecf\u521b\u5efa \u4e91\u5b58\u50a8\u670d\u52a1 \u3002 \u4ef7\u683c\u65b9\u9762\uff0c\u514d\u8d39\u3002 \u5f00\u53d1\u8005\u6307\u5357 \u00b6 \u56fe\u7247\u62fc\u63a5\u662f\u628a\u4e91\u5b58\u50a8\u4e2d\u7684\u591a\u5f20\u56fe\u7247\u62fc\u63a5\u5728\u4e00\u8d77\uff0c\u62fc\u63a5\u65b9\u5f0f\u591a\u79cd\u591a\u6837\u3002 \u4e91\u5b58\u50a8\u4e2d\u7684\u56fe\u7247\u62fc\u63a5 \u00b6 ** \u8bf7\u6c42\u65b9\u6cd5 ** \u5bf9\u5df2\u7ecf\u5b58\u5728\u4e91\u5b58\u50a8\u4e2d\u7684\u56fe\u7247\uff0c\u4ee5 POST \u65b9\u6cd5\u5411 http://p0.api.upyun.com/pretreatment/ \u63d0\u4ea4\u5904\u7406\u4efb\u52a1\uff0c\u54cd\u5e94\u4e2d\u8fd4\u56de\u4efb\u52a1 task_id \u3002\u4efb\u52a1\u4ee5\u5f02\u6b65\u7684\u65b9\u5f0f\u5904\u7406\uff0c\u5904\u7406\u5b8c\u6210\u540e\uff0c\u56de\u8c03\u901a\u77e5\u7528\u6237\u5904\u7406\u7ed3\u679c\u3002 curl -X POST \\ http://p0.api.upyun.com/pretreatment/ \\ -H \"Authorization: UPYUN <Operator>:<Signature>\" \\ -H \"Date: <Wed, 29 Oct 2014 02:26:58 GMT>\" \\ -H \"Content-MD5: <Content-MD5>\" \\ -d \"service=<service>\" \\ -d \"notify_url=<notify_url>\" \\ -d \"app_name=jigsaw\" \\ -d \"tasks=<base64 \u7f16\u7801\u540e\u7684\u4efb\u52a1\u5b57\u7b26\u4e32>\" ** \u8ba4\u8bc1\u9274\u6743 ** Authorization \u8be6\u89c1 \u7b7e\u540d\u8ba4\u8bc1 \u3002 ** \u8bf7\u6c42\u53c2\u6570 ** \u53c2\u6570 \u7c7b\u578b \u5fc5\u9009 \u8bf4\u660e service string \u662f \u56fe\u7247\u6240\u5728\u7684\u670d\u52a1\u540d notify_url string \u662f \u56de\u8c03\u901a\u77e5\u5730\u5740\uff0c\u8be6\u89c1 \u56de\u8c03\u901a\u77e5 tasks string \u662f \u4efb\u52a1\u4fe1\u606f\uff0c\u8be6\u89c1 tasks \u53c2\u6570\u8bf4\u660e app_name string \u662f \u5904\u7406\u529f\u80fd\uff0c jigsaw \u8868\u793a\u56fe\u7247\u62fc\u63a5 ** tasks \u53c2\u6570\u8bf4\u660e ** 1. \u6309 JSON \u683c\u5f0f\u7ec4\u88c5\u4efb\u52a1\uff0c\u4e00\u6b21\u8bf7\u6c42 tasks \u6700\u591a\u53ef\u4ee5\u63d0\u4ea4 10 \u4e2a\u4efb\u52a1\u3002 \u4efb\u52a1\u53c2\u6570\u89c1 \u529f\u80fd \u3002 [ { \"image_matrix\": [ // \u9700\u8981\u62fc\u63a5\u7684\u56fe\u7247\u8def\u5f84\u548c\u62fc\u63a5\u65b9\u5f0f [\"/image/top.jpg\"], [\"/image/bottom.jpg\"] ], \"x-gmkerl-thumb\": \"/format/jpg\", // \u5176\u4ed6\u7684\u56fe\u7247\u5904\u7406\u529f\u80fd \"save_as\": \"/jigsaw/case1.jpg\" // \u62fc\u63a5\u540e\u56fe\u7247\u7684\u4fdd\u5b58\u8def\u5f84 }, \u2026 ] 2. \u628a JSON \u5b57\u7b26\u4e32 Base64 \u7f16\u7801\uff0c\u5f97\u5230 tasks \u3002 ** \u54cd\u5e94\u4fe1\u606f ** \u4efb\u52a1\u63d0\u4ea4\u6210\u529f\uff1a\u8fd4\u56de 200 \uff0c\u54cd\u5e94\u4f53\u662f\u4e00\u7ec4\u6309\u4efb\u52a1\u63d0\u4ea4\u5148\u540e\u987a\u5e8f\u6392\u5e8f\u7684 task_id \u3002\u4f8b\u5982\uff1a [ \"35f0148d414a688a275bf915ba7cebb2\", \"98adbaa52b2f63d6d7f327a0ff223348\", \"c3103189fa906a5354d29bd807e8dc51\", \u2026 ] \u4efb\u52a1\u63d0\u4ea4\u5931\u8d25\uff1a\u8fd4\u56de\u76f8\u5e94\u7684\u51fa\u9519\u4fe1\u606f\uff0c\u5177\u4f53\u8bf7\u53c2\u9605\u300c \u72b6\u6001\u7801\u8868 \u300d\u3002 \u56de\u8c03\u901a\u77e5 \u00b6 \u4efb\u52a1\u5904\u7406\u5b8c\u6210\u540e\uff0c\u5411 notify_url \u53d1\u9001 HTTP POST \u8bf7\u6c42\uff0c\u8bf7\u6c42\u4f53\u662f\u56de\u8c03\u4fe1\u606f\u3002 curl -X POST \\ <notify_url> \\ -H \"Authorization: UPYUN <Operator>:<Signature>\" \\ -H \"Date: <Wed, 29 Oct 2014 02:26:58 GMT>\" \\ -H \"Content-MD5: <Content-MD5>\" \\ -d \"service=<service>\" \\ # \u5176\u4ed6\u53c2\u6570... ** \u56de\u8c03\u4fe1\u606f ** \u56de\u8c03\u4fe1\u606f\u662f JSON \u5b57\u7b26\u4e32\uff0c\u53c2\u6570\u540d\u53ca\u8bf4\u660e\u5982\u4e0b\uff1a \u53c2\u6570 \u7c7b\u578b \u8bf4\u660e task_id string \u4efb\u52a1 ID service string \u56fe\u7247\u6240\u5728\u7684\u670d\u52a1\u540d status_code integer \u5904\u7406\u7ed3\u679c\u72b6\u6001\u7801\uff0c 200 \u8868\u793a\u6210\u529f\u5904\u7406 path string \u56fe\u7247\u4fdd\u5b58\u8def\u5f84 error string \u9519\u8bef\u4fe1\u606f\uff0c\u7a7a\u5b57\u7b26\u4e32\u8868\u793a\u65e0\u9519\u8bef\u4fe1\u606f ** \u56de\u8c03\u7b7e\u540d ** Authorization \u8be6\u89c1 \u7b7e\u540d\u8ba4\u8bc1 \u3002 \u72b6\u6001\u7801\u8868 \u00b6 \u72b6\u6001\u7801 \u8bf4\u660e 200 \u5904\u7406\u6210\u529f 400 \u65e0\u6548\u4efb\u52a1 5xx \u670d\u52a1\u7aef\u9519\u8bef\u3002\u5982\u9047\u6b64\u7c7b\u9519\u8bef\uff0c\u8bf7\u53cd\u9988\u7ed9 \u552e\u540e \u6216\u60a8\u7684\u5546\u52a1\u7ecf\u7406 \u529f\u80fd \u00b6 \u56fe\u7247\u62fc\u63a5\uff08jigsaw\uff09 \u00b6 \u53c2\u6570 \u7c7b\u578b \u5fc5\u9009 \u8bf4\u660e image_matrix [][]string \u662f \u9700\u8981\u62fc\u63a5\u7684\u56fe\u7247\u8def\u5f84\u548c\u62fc\u63a5\u65b9\u5f0f save_as string \u662f \u62fc\u63a5\u540e\u56fe\u7247\u7684\u4fdd\u5b58\u8def\u5f84 x-gmkerl-thumb string \u5426 \u5bf9\u62fc\u63a5\u540e\u7684\u56fe\u7247\u8fdb\u884c \u56fe\u7247\u5904\u7406 ** \u8bf4\u660e ** image_matrix \u662f\u4e2a\u4e8c\u7ef4\u6570\u7ec4\uff0c\u56fe\u7247\u62fc\u63a5\u7684\u65b9\u5f0f\u6839\u636e\u4e8c\u7ef4\u6570\u7ec4\u6765\uff0c\u7b2c\u4e00\u7ef4\u6570\u7ec4\uff0c\u8868\u793a\u884c\uff0c\u7b2c\u4e8c\u7ef4\u6570\u7ec4\uff0c\u8868\u793a\u5217\uff0c\u5408\u8d77\u6765\u5c31\u662f\u6309\u884c\u3001\u6309\u5217\u62fc\u63a5\u3002\u5177\u4f53\u6309\u884c\uff08\u586b\u7b2c\u4e00\u7ef4\u6570\u7ec4\uff0c\u7b2c\u4e8c\u7ef4\u4e3a\u7a7a\uff09\uff0c\u6309\u5217\uff08\u586b\u7b2c\u4e8c\u7ef4\u6570\u7ec4\uff0c\u7b2c\u4e00\u7ef4\u4e3a\u7a7a\uff09\uff0c\u6309\u884c\u5217\u62fc\u63a5\uff0c\u6839\u636e\u9700\u6c42\u51b3\u5b9a\u3002 \u56fe\u7247\u62fc\u63a5\u6700\u591a\u5141\u8bb8 10 \u5f20\u56fe\u7247\uff0c\u5373 image_matrix \u6700\u591a\u5141\u8bb8 10 \u4e2a URI\u3002 \u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u62fc\u63a5\u4ea7\u751f\u7684\u56fe\u7247\u683c\u5f0f\u4e3a PNG \u683c\u5f0f\uff0c\u5982\u679c\u9700\u8981\u8c03\u6574\u56fe\u7247\u683c\u5f0f\uff0c\u53ef\u901a\u8fc7\u8bbe\u7f6e x-gmkerkl-thumb \u505a\u683c\u5f0f\u8f6c\u6362\u3002 \u5982\u6709\u7591\u95ee\u8bf7 \u8054\u7cfb\u6211\u4eec","title":"\u5f02\u6b65\u56fe\u7247\u62fc\u63a5"},{"location":"cloud/async_image/#_1","text":"\u53c8\u62cd\u4e91\u5904\u7406\uff08\u5f02\u6b65\u56fe\u7247\u62fc\u63a5\uff09\u57fa\u4e8e\u4e91\u5b58\u50a8\u670d\u52a1\uff0c\u60a8\u5728\u4f7f\u7528\u5b83\u4e4b\u524d\uff0c\u8bf7\u786e\u4fdd\u60a8\u5df2\u7ecf\u6ce8\u518c\u53c8\u62cd\u4e91\u8d26\u53f7\u5e76\u5b8c\u6210\u5b9e\u540d\u9a8c\u8bc1\uff0c\u8bf7\u786e\u4fdd\u60a8\u5df2\u7ecf\u521b\u5efa \u4e91\u5b58\u50a8\u670d\u52a1 \u3002 \u4ef7\u683c\u65b9\u9762\uff0c\u514d\u8d39\u3002","title":"\u5feb\u901f\u5165\u95e8"},{"location":"cloud/async_image/#_2","text":"\u56fe\u7247\u62fc\u63a5\u662f\u628a\u4e91\u5b58\u50a8\u4e2d\u7684\u591a\u5f20\u56fe\u7247\u62fc\u63a5\u5728\u4e00\u8d77\uff0c\u62fc\u63a5\u65b9\u5f0f\u591a\u79cd\u591a\u6837\u3002","title":"\u5f00\u53d1\u8005\u6307\u5357"},{"location":"cloud/async_image/#_3","text":"** \u8bf7\u6c42\u65b9\u6cd5 ** \u5bf9\u5df2\u7ecf\u5b58\u5728\u4e91\u5b58\u50a8\u4e2d\u7684\u56fe\u7247\uff0c\u4ee5 POST \u65b9\u6cd5\u5411 http://p0.api.upyun.com/pretreatment/ \u63d0\u4ea4\u5904\u7406\u4efb\u52a1\uff0c\u54cd\u5e94\u4e2d\u8fd4\u56de\u4efb\u52a1 task_id \u3002\u4efb\u52a1\u4ee5\u5f02\u6b65\u7684\u65b9\u5f0f\u5904\u7406\uff0c\u5904\u7406\u5b8c\u6210\u540e\uff0c\u56de\u8c03\u901a\u77e5\u7528\u6237\u5904\u7406\u7ed3\u679c\u3002 curl -X POST \\ http://p0.api.upyun.com/pretreatment/ \\ -H \"Authorization: UPYUN <Operator>:<Signature>\" \\ -H \"Date: <Wed, 29 Oct 2014 02:26:58 GMT>\" \\ -H \"Content-MD5: <Content-MD5>\" \\ -d \"service=<service>\" \\ -d \"notify_url=<notify_url>\" \\ -d \"app_name=jigsaw\" \\ -d \"tasks=<base64 \u7f16\u7801\u540e\u7684\u4efb\u52a1\u5b57\u7b26\u4e32>\" ** \u8ba4\u8bc1\u9274\u6743 ** Authorization \u8be6\u89c1 \u7b7e\u540d\u8ba4\u8bc1 \u3002 ** \u8bf7\u6c42\u53c2\u6570 ** \u53c2\u6570 \u7c7b\u578b \u5fc5\u9009 \u8bf4\u660e service string \u662f \u56fe\u7247\u6240\u5728\u7684\u670d\u52a1\u540d notify_url string \u662f \u56de\u8c03\u901a\u77e5\u5730\u5740\uff0c\u8be6\u89c1 \u56de\u8c03\u901a\u77e5 tasks string \u662f \u4efb\u52a1\u4fe1\u606f\uff0c\u8be6\u89c1 tasks \u53c2\u6570\u8bf4\u660e app_name string \u662f \u5904\u7406\u529f\u80fd\uff0c jigsaw \u8868\u793a\u56fe\u7247\u62fc\u63a5 ** tasks \u53c2\u6570\u8bf4\u660e ** 1. \u6309 JSON \u683c\u5f0f\u7ec4\u88c5\u4efb\u52a1\uff0c\u4e00\u6b21\u8bf7\u6c42 tasks \u6700\u591a\u53ef\u4ee5\u63d0\u4ea4 10 \u4e2a\u4efb\u52a1\u3002 \u4efb\u52a1\u53c2\u6570\u89c1 \u529f\u80fd \u3002 [ { \"image_matrix\": [ // \u9700\u8981\u62fc\u63a5\u7684\u56fe\u7247\u8def\u5f84\u548c\u62fc\u63a5\u65b9\u5f0f [\"/image/top.jpg\"], [\"/image/bottom.jpg\"] ], \"x-gmkerl-thumb\": \"/format/jpg\", // \u5176\u4ed6\u7684\u56fe\u7247\u5904\u7406\u529f\u80fd \"save_as\": \"/jigsaw/case1.jpg\" // \u62fc\u63a5\u540e\u56fe\u7247\u7684\u4fdd\u5b58\u8def\u5f84 }, \u2026 ] 2. \u628a JSON \u5b57\u7b26\u4e32 Base64 \u7f16\u7801\uff0c\u5f97\u5230 tasks \u3002 ** \u54cd\u5e94\u4fe1\u606f ** \u4efb\u52a1\u63d0\u4ea4\u6210\u529f\uff1a\u8fd4\u56de 200 \uff0c\u54cd\u5e94\u4f53\u662f\u4e00\u7ec4\u6309\u4efb\u52a1\u63d0\u4ea4\u5148\u540e\u987a\u5e8f\u6392\u5e8f\u7684 task_id \u3002\u4f8b\u5982\uff1a [ \"35f0148d414a688a275bf915ba7cebb2\", \"98adbaa52b2f63d6d7f327a0ff223348\", \"c3103189fa906a5354d29bd807e8dc51\", \u2026 ] \u4efb\u52a1\u63d0\u4ea4\u5931\u8d25\uff1a\u8fd4\u56de\u76f8\u5e94\u7684\u51fa\u9519\u4fe1\u606f\uff0c\u5177\u4f53\u8bf7\u53c2\u9605\u300c \u72b6\u6001\u7801\u8868 \u300d\u3002","title":"\u4e91\u5b58\u50a8\u4e2d\u7684\u56fe\u7247\u62fc\u63a5"},{"location":"cloud/async_image/#_4","text":"\u4efb\u52a1\u5904\u7406\u5b8c\u6210\u540e\uff0c\u5411 notify_url \u53d1\u9001 HTTP POST \u8bf7\u6c42\uff0c\u8bf7\u6c42\u4f53\u662f\u56de\u8c03\u4fe1\u606f\u3002 curl -X POST \\ <notify_url> \\ -H \"Authorization: UPYUN <Operator>:<Signature>\" \\ -H \"Date: <Wed, 29 Oct 2014 02:26:58 GMT>\" \\ -H \"Content-MD5: <Content-MD5>\" \\ -d \"service=<service>\" \\ # \u5176\u4ed6\u53c2\u6570... ** \u56de\u8c03\u4fe1\u606f ** \u56de\u8c03\u4fe1\u606f\u662f JSON \u5b57\u7b26\u4e32\uff0c\u53c2\u6570\u540d\u53ca\u8bf4\u660e\u5982\u4e0b\uff1a \u53c2\u6570 \u7c7b\u578b \u8bf4\u660e task_id string \u4efb\u52a1 ID service string \u56fe\u7247\u6240\u5728\u7684\u670d\u52a1\u540d status_code integer \u5904\u7406\u7ed3\u679c\u72b6\u6001\u7801\uff0c 200 \u8868\u793a\u6210\u529f\u5904\u7406 path string \u56fe\u7247\u4fdd\u5b58\u8def\u5f84 error string \u9519\u8bef\u4fe1\u606f\uff0c\u7a7a\u5b57\u7b26\u4e32\u8868\u793a\u65e0\u9519\u8bef\u4fe1\u606f ** \u56de\u8c03\u7b7e\u540d ** Authorization \u8be6\u89c1 \u7b7e\u540d\u8ba4\u8bc1 \u3002","title":"\u56de\u8c03\u901a\u77e5"},{"location":"cloud/async_image/#_5","text":"\u72b6\u6001\u7801 \u8bf4\u660e 200 \u5904\u7406\u6210\u529f 400 \u65e0\u6548\u4efb\u52a1 5xx \u670d\u52a1\u7aef\u9519\u8bef\u3002\u5982\u9047\u6b64\u7c7b\u9519\u8bef\uff0c\u8bf7\u53cd\u9988\u7ed9 \u552e\u540e \u6216\u60a8\u7684\u5546\u52a1\u7ecf\u7406","title":"\u72b6\u6001\u7801\u8868"},{"location":"cloud/async_image/#_6","text":"","title":"\u529f\u80fd"},{"location":"cloud/async_image/#jigsaw","text":"\u53c2\u6570 \u7c7b\u578b \u5fc5\u9009 \u8bf4\u660e image_matrix [][]string \u662f \u9700\u8981\u62fc\u63a5\u7684\u56fe\u7247\u8def\u5f84\u548c\u62fc\u63a5\u65b9\u5f0f save_as string \u662f \u62fc\u63a5\u540e\u56fe\u7247\u7684\u4fdd\u5b58\u8def\u5f84 x-gmkerl-thumb string \u5426 \u5bf9\u62fc\u63a5\u540e\u7684\u56fe\u7247\u8fdb\u884c \u56fe\u7247\u5904\u7406 ** \u8bf4\u660e ** image_matrix \u662f\u4e2a\u4e8c\u7ef4\u6570\u7ec4\uff0c\u56fe\u7247\u62fc\u63a5\u7684\u65b9\u5f0f\u6839\u636e\u4e8c\u7ef4\u6570\u7ec4\u6765\uff0c\u7b2c\u4e00\u7ef4\u6570\u7ec4\uff0c\u8868\u793a\u884c\uff0c\u7b2c\u4e8c\u7ef4\u6570\u7ec4\uff0c\u8868\u793a\u5217\uff0c\u5408\u8d77\u6765\u5c31\u662f\u6309\u884c\u3001\u6309\u5217\u62fc\u63a5\u3002\u5177\u4f53\u6309\u884c\uff08\u586b\u7b2c\u4e00\u7ef4\u6570\u7ec4\uff0c\u7b2c\u4e8c\u7ef4\u4e3a\u7a7a\uff09\uff0c\u6309\u5217\uff08\u586b\u7b2c\u4e8c\u7ef4\u6570\u7ec4\uff0c\u7b2c\u4e00\u7ef4\u4e3a\u7a7a\uff09\uff0c\u6309\u884c\u5217\u62fc\u63a5\uff0c\u6839\u636e\u9700\u6c42\u51b3\u5b9a\u3002 \u56fe\u7247\u62fc\u63a5\u6700\u591a\u5141\u8bb8 10 \u5f20\u56fe\u7247\uff0c\u5373 image_matrix \u6700\u591a\u5141\u8bb8 10 \u4e2a URI\u3002 \u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u62fc\u63a5\u4ea7\u751f\u7684\u56fe\u7247\u683c\u5f0f\u4e3a PNG \u683c\u5f0f\uff0c\u5982\u679c\u9700\u8981\u8c03\u6574\u56fe\u7247\u683c\u5f0f\uff0c\u53ef\u901a\u8fc7\u8bbe\u7f6e x-gmkerkl-thumb \u505a\u683c\u5f0f\u8f6c\u6362\u3002 \u5982\u6709\u7591\u95ee\u8bf7 \u8054\u7cfb\u6211\u4eec","title":"\u56fe\u7247\u62fc\u63a5\uff08jigsaw\uff09"},{"location":"cloud/attachment/","text":"\u89c6\u9891\u8f6c\u7801\u9884\u7f6e\u6a21\u677f \u00b6 \u5b58\u5728\u591a\u79cd\u5bbd\u9ad8\u6bd4\u65f6\uff0c\u5efa\u8bae\u9009\u62e9 16:9 \u7684\u5bbd\u9ad8\u6bd4\u3002\u7279\u522b\u5730\uff0c\u53c8\u62cd\u4e91\u652f\u6301 4K \u89c6\u9891\u6587\u4ef6\u3002 \u6e05\u6670\u5ea6 \u540d\u79f0 \u5206\u8fa8\u7387 \u7801\u7387 \u5168\u9ad8\u6e05 1080p(16:9) 1920x1080,16:9 2560Kbps \u9ad8\u6e05 720p(16:9) 1280x720,16:9 1152kbps \u9ad8\u6e05 720p(4:3) 960x720,4:3 1152kbps \u6807\u6e05 540p(16:9) 960x540,16:9 768kbps \u6807\u6e05 480p(16:9) 854x480,16:9 512kbps \u6807\u6e05 480p(4:3) 640x480,4:3 512kbps \u6807\u6e05 480p(3:2) 720x480,3:2 512kbps \u6d41\u7545\uff08\u4f4e\u6e05\uff09 360p(16:9) 640x360,16:9 384kbps \u6d41\u7545\uff08\u4f4e\u6e05\uff09 360p(4:3) 480x360,4:3 384kbps \u6d41\u7545\uff08\u4f4e\u6e05\uff09 240p(4:3) 320x240,4:3 256kbps \u97f3\u89c6\u9891\u5904\u7406\u652f\u6301\u683c\u5f0f \u00b6 \u7c7b\u578b \u8f93\u5165\u683c\u5f0f \u8f93\u51fa\u683c\u5f0f \u89c6\u9891\u5bb9\u5668\u683c\u5f0f AVI\u3001MP4\u3001FLV\u3001MOV\u30013GP\u3001ASF\u3001WMV\u3001MPG\u3001F4V\u3001M4V\u3001MKV\u3001VOB\uff08SVCD/DVD\uff09\u7b49 MP4\u3001FLV\u3001M3U8(TS) \u7b49 \u97f3\u9891\u5bb9\u5668\u683c\u5f0f MP3\u3001OGG\u3001M4A \u7b49 MP4\u3001MP3\u3001OGG \u7b49 \u89c6\u9891\u7f16\u7801\u683c\u5f0f H.264/AVC \u3001H.263\u3001H.263+\u3001MPEG-1\u3001MPEG-2\u3001MPEG-4\u3001VP8\u3001VP9\u3001Quicktime\u3001RealVideo\u3001Windows Media Video \u7b49 H.264/AVC\u3001VP8\u3001H.265/HEVC\u3001VP9 \u7b49 \u97f3\u9891\u7f16\u7801\u683c\u5f0f MP1\u3001MP2\u3001MP3\u3001AAC\u3001AC-3\u3001Vorbis\u3001PCM\u3001RealAudio\u3001Windows Media Audio \u7b49 AAC\u3001MP3 \u7b49 \u66f4\u591a\u7684\u652f\u6301\u683c\u5f0f\u8bf7\u53c2\u8003 ffmpeg \u652f\u6301\u683c\u5f0f\u5217\u8868 \u3002 \u5b57\u4f53\u652f\u6301\u5217\u8868 \u00b6 \u4f7f\u7528\u5b57\u4f53\u65f6\uff0c\u8bf7\u4f7f\u7528\u53c2\u6570\u540d\u3002\u542b\u4e2d\u6587\u5185\u5bb9\u65f6\u8bf7\u6307\u5b9a\u4e2d\u6587\u5b57\u4f53\u3002 \u540d\u79f0 \u7c7b\u578b \u53c2\u6570\u540d \u5b8b\u4f53 \u4e2d\u6587\u5b57\u4f53 simsun \u9ed1\u4f53 \u4e2d\u6587\u5b57\u4f53 simhei \u6977\u4f53 \u4e2d\u6587\u5b57\u4f53 simkai \u96b6\u4e66 \u4e2d\u6587\u5b57\u4f53 simli \u5e7c\u5706 \u4e2d\u6587\u5b57\u4f53 simyou \u4eff\u5b8b \u4e2d\u6587\u5b57\u4f53 simfang \u7b80\u4f53\u4e2d\u6587 \u4e2d\u6587\u5b57\u4f53 sc \u7e41\u4f53\u4e2d\u6587 \u4e2d\u6587\u5b57\u4f53 tc Arial \u82f1\u6587\u5b57\u4f53 arial Georgia \u82f1\u6587\u5b57\u4f53 georgia Helvetica \u82f1\u6587\u5b57\u4f53 helvetica Times-New-Roman \u82f1\u6587\u5b57\u4f53 roman \u8fd4\u56de\u72b6\u6001\u7801 \u00b6 \u56fe\u7247\u5904\u7406 \u00b6 \u72b6\u6001\u7801 \u8bf4\u660e 200 \u5904\u7406\u6210\u529f 400 \u53c2\u6570\u9519\u8bef\uff0c\u8fd4\u56de JSON \u4e2d\u5305\u542b\u5177\u4f53\u9519\u8bef\u4fe1\u606f 404 \u6307\u5b9a Profile \u4fe1\u606f\u4e0d\u5b58\uff0cNot Profile 405 \u56fe\u7247\u6570\u636e\u65e0\u6548\uff0cNot an image 405 \u56fe\u7247\u5bbd\u9ad8\u8d85\u51fa\u9650\u5236\uff0cImage Width/Height Limit Error 406 \u975e\u56fe\u7247\u83b7\u53d6\u56fe\u7247\u57fa\u672c\u4fe1\u606f\u65f6\u6570\u636e\u65e0\u6548\uff0cNot an image 409 \u56fe\u7247\u5927\u5c0f\u8d85\u51fa\u9650\u5236\uff0c\u9650\u5236\u4e3a 2 \u4ebf\u50cf\u7d20\uff0cLimit Exceeded 413 \u8bf7\u6c42\u5904\u7406\u8d85\u65f6\uff0cA Big Image! \u66f4\u591a\u7684\u9519\u8bef\u7801\uff0c\u8bf7 \u70b9\u6b64\u67e5\u770b \u5f02\u6b65\u97f3\u89c6\u9891\u5904\u7406 \u00b6 \u72b6\u6001\u7801 \u8bf4\u660e 200 \u5904\u7406\u6210\u529f 400 \u53c2\u6570\u9519\u8bef 401 \u53c2\u6570\u9519\u8bef 404 \u6587\u4ef6\u4e0d\u5b58\u5728 501 \u51c6\u5907\u5904\u7406\u73af\u5883\u65f6\u51fa\u9519 502 \u5904\u7406\u9519\u8bef 503 \u5b58\u50a8\u5904\u7406\u7ed3\u679c\u65f6\u9519\u8bef \u66f4\u591a\u7684\u9519\u8bef\u7801\uff0c\u8bf7 \u70b9\u6b64\u67e5\u770b \u5b9e\u65f6\u97f3\u9891\u5904\u7406 \u00b6 \u72b6\u6001\u7801 \u8bf4\u660e 200 \u5904\u7406\u6210\u529f 403 \u8f6c\u7801\u5931\u8d25\uff0cConvert Failed 405 \u53c2\u6570\u5931\u8d25\uff0cParameter Error 413 \u8f6c\u7801\u8d85\u65f6\uff0cConvert Timeout \u66f4\u591a\u7684\u9519\u8bef\u7801\uff0c\u8bf7 \u70b9\u6b64\u67e5\u770b","title":"Attachment"},{"location":"cloud/attachment/#_1","text":"\u5b58\u5728\u591a\u79cd\u5bbd\u9ad8\u6bd4\u65f6\uff0c\u5efa\u8bae\u9009\u62e9 16:9 \u7684\u5bbd\u9ad8\u6bd4\u3002\u7279\u522b\u5730\uff0c\u53c8\u62cd\u4e91\u652f\u6301 4K \u89c6\u9891\u6587\u4ef6\u3002 \u6e05\u6670\u5ea6 \u540d\u79f0 \u5206\u8fa8\u7387 \u7801\u7387 \u5168\u9ad8\u6e05 1080p(16:9) 1920x1080,16:9 2560Kbps \u9ad8\u6e05 720p(16:9) 1280x720,16:9 1152kbps \u9ad8\u6e05 720p(4:3) 960x720,4:3 1152kbps \u6807\u6e05 540p(16:9) 960x540,16:9 768kbps \u6807\u6e05 480p(16:9) 854x480,16:9 512kbps \u6807\u6e05 480p(4:3) 640x480,4:3 512kbps \u6807\u6e05 480p(3:2) 720x480,3:2 512kbps \u6d41\u7545\uff08\u4f4e\u6e05\uff09 360p(16:9) 640x360,16:9 384kbps \u6d41\u7545\uff08\u4f4e\u6e05\uff09 360p(4:3) 480x360,4:3 384kbps \u6d41\u7545\uff08\u4f4e\u6e05\uff09 240p(4:3) 320x240,4:3 256kbps","title":"\u89c6\u9891\u8f6c\u7801\u9884\u7f6e\u6a21\u677f"},{"location":"cloud/attachment/#_2","text":"\u7c7b\u578b \u8f93\u5165\u683c\u5f0f \u8f93\u51fa\u683c\u5f0f \u89c6\u9891\u5bb9\u5668\u683c\u5f0f AVI\u3001MP4\u3001FLV\u3001MOV\u30013GP\u3001ASF\u3001WMV\u3001MPG\u3001F4V\u3001M4V\u3001MKV\u3001VOB\uff08SVCD/DVD\uff09\u7b49 MP4\u3001FLV\u3001M3U8(TS) \u7b49 \u97f3\u9891\u5bb9\u5668\u683c\u5f0f MP3\u3001OGG\u3001M4A \u7b49 MP4\u3001MP3\u3001OGG \u7b49 \u89c6\u9891\u7f16\u7801\u683c\u5f0f H.264/AVC \u3001H.263\u3001H.263+\u3001MPEG-1\u3001MPEG-2\u3001MPEG-4\u3001VP8\u3001VP9\u3001Quicktime\u3001RealVideo\u3001Windows Media Video \u7b49 H.264/AVC\u3001VP8\u3001H.265/HEVC\u3001VP9 \u7b49 \u97f3\u9891\u7f16\u7801\u683c\u5f0f MP1\u3001MP2\u3001MP3\u3001AAC\u3001AC-3\u3001Vorbis\u3001PCM\u3001RealAudio\u3001Windows Media Audio \u7b49 AAC\u3001MP3 \u7b49 \u66f4\u591a\u7684\u652f\u6301\u683c\u5f0f\u8bf7\u53c2\u8003 ffmpeg \u652f\u6301\u683c\u5f0f\u5217\u8868 \u3002","title":"\u97f3\u89c6\u9891\u5904\u7406\u652f\u6301\u683c\u5f0f"},{"location":"cloud/attachment/#_3","text":"\u4f7f\u7528\u5b57\u4f53\u65f6\uff0c\u8bf7\u4f7f\u7528\u53c2\u6570\u540d\u3002\u542b\u4e2d\u6587\u5185\u5bb9\u65f6\u8bf7\u6307\u5b9a\u4e2d\u6587\u5b57\u4f53\u3002 \u540d\u79f0 \u7c7b\u578b \u53c2\u6570\u540d \u5b8b\u4f53 \u4e2d\u6587\u5b57\u4f53 simsun \u9ed1\u4f53 \u4e2d\u6587\u5b57\u4f53 simhei \u6977\u4f53 \u4e2d\u6587\u5b57\u4f53 simkai \u96b6\u4e66 \u4e2d\u6587\u5b57\u4f53 simli \u5e7c\u5706 \u4e2d\u6587\u5b57\u4f53 simyou \u4eff\u5b8b \u4e2d\u6587\u5b57\u4f53 simfang \u7b80\u4f53\u4e2d\u6587 \u4e2d\u6587\u5b57\u4f53 sc \u7e41\u4f53\u4e2d\u6587 \u4e2d\u6587\u5b57\u4f53 tc Arial \u82f1\u6587\u5b57\u4f53 arial Georgia \u82f1\u6587\u5b57\u4f53 georgia Helvetica \u82f1\u6587\u5b57\u4f53 helvetica Times-New-Roman \u82f1\u6587\u5b57\u4f53 roman","title":"\u5b57\u4f53\u652f\u6301\u5217\u8868"},{"location":"cloud/attachment/#_4","text":"","title":"\u8fd4\u56de\u72b6\u6001\u7801"},{"location":"cloud/attachment/#_5","text":"\u72b6\u6001\u7801 \u8bf4\u660e 200 \u5904\u7406\u6210\u529f 400 \u53c2\u6570\u9519\u8bef\uff0c\u8fd4\u56de JSON \u4e2d\u5305\u542b\u5177\u4f53\u9519\u8bef\u4fe1\u606f 404 \u6307\u5b9a Profile \u4fe1\u606f\u4e0d\u5b58\uff0cNot Profile 405 \u56fe\u7247\u6570\u636e\u65e0\u6548\uff0cNot an image 405 \u56fe\u7247\u5bbd\u9ad8\u8d85\u51fa\u9650\u5236\uff0cImage Width/Height Limit Error 406 \u975e\u56fe\u7247\u83b7\u53d6\u56fe\u7247\u57fa\u672c\u4fe1\u606f\u65f6\u6570\u636e\u65e0\u6548\uff0cNot an image 409 \u56fe\u7247\u5927\u5c0f\u8d85\u51fa\u9650\u5236\uff0c\u9650\u5236\u4e3a 2 \u4ebf\u50cf\u7d20\uff0cLimit Exceeded 413 \u8bf7\u6c42\u5904\u7406\u8d85\u65f6\uff0cA Big Image! \u66f4\u591a\u7684\u9519\u8bef\u7801\uff0c\u8bf7 \u70b9\u6b64\u67e5\u770b","title":"\u56fe\u7247\u5904\u7406"},{"location":"cloud/attachment/#_6","text":"\u72b6\u6001\u7801 \u8bf4\u660e 200 \u5904\u7406\u6210\u529f 400 \u53c2\u6570\u9519\u8bef 401 \u53c2\u6570\u9519\u8bef 404 \u6587\u4ef6\u4e0d\u5b58\u5728 501 \u51c6\u5907\u5904\u7406\u73af\u5883\u65f6\u51fa\u9519 502 \u5904\u7406\u9519\u8bef 503 \u5b58\u50a8\u5904\u7406\u7ed3\u679c\u65f6\u9519\u8bef \u66f4\u591a\u7684\u9519\u8bef\u7801\uff0c\u8bf7 \u70b9\u6b64\u67e5\u770b","title":"\u5f02\u6b65\u97f3\u89c6\u9891\u5904\u7406"},{"location":"cloud/attachment/#_7","text":"\u72b6\u6001\u7801 \u8bf4\u660e 200 \u5904\u7406\u6210\u529f 403 \u8f6c\u7801\u5931\u8d25\uff0cConvert Failed 405 \u53c2\u6570\u5931\u8d25\uff0cParameter Error 413 \u8f6c\u7801\u8d85\u65f6\uff0cConvert Timeout \u66f4\u591a\u7684\u9519\u8bef\u7801\uff0c\u8bf7 \u70b9\u6b64\u67e5\u770b","title":"\u5b9e\u65f6\u97f3\u9891\u5904\u7406"},{"location":"cloud/authorization/","text":"\u7b7e\u540d\u8ba4\u8bc1 \u00b6 ** \u7b7e\u540d\u8ba1\u7b97\u65b9\u6cd5 ** Authorization: UPYUN <Operator>:<Signature> <Signature> = Base64 (HMAC-SHA1 (<Password>, <Method>& <URI>& <Date>& <Content-MD5> )) \u76f8\u5173\u53c2\u6570\u8bf4\u660e\uff1a \u53c2\u6570 \u5fc5\u9009 \u8bf4\u660e Operator \u662f \u670d\u52a1\u7684\u64cd\u4f5c\u5458\u540d\u79f0 Method \u662f \u8bf7\u6c42\u65b9\u5f0f\uff0c\u5982\uff1aGET\u3001POST\u3001PUT\u3001HEAD \u7b49 URI \u662f \u8bf7\u6c42\u8def\u5f84 Date \u662f \u8bf7\u6c42\u65e5\u671f\u65f6\u95f4\uff0cGMT \u683c\u5f0f\u5b57\u7b26\u4e32 ( RFC 1123 )\uff0c\u5982 Wed, 29 Oct 2014 02:26:58 GMT Content-MD5 \u5426 \u8bf7\u6c42\u4f53\u7684 MD5 \u6821\u9a8c\u503c\uff0c\u5982\u679c\u8bf7\u6c42\u4f53\u4e3a\u7a7a\uff0c\u53ef\u4ee5\u4e3a\u7a7a Password \u662f \u670d\u52a1\u7684\u64cd\u4f5c\u5458\u5bc6\u7801\u7684 MD5 \u503c ** \u6ce8 ** \u975e\u5fc5\u9009\u53c2\u6570\u4e3a\u7a7a\u65f6\uff0c\u8fde\u540c\u524d\u9762\u7684 & \u4e00\u8d77\u4e0d\u53c2\u4e0e\u7b7e\u540d\u8ba1\u7b97\u3002\u6240\u6709\u8ba1\u7b97\u7684 MD5 \u503c\uff0c\u683c\u5f0f\u5747\u662f 32 \u4f4d\u5c0f\u5199\u3002 HMAC-SHA1 \u8f93\u51fa\u7684\u5fc5\u987b\u662f \u539f\u751f\u7684\u4e8c\u8fdb\u5236\u6570\u636e \u3002 \u8bf7\u6c42\u7b7e\u540d\u6709\u6548\u671f\u4e3a 30 \u5206\u949f\uff0c\u5982\u679c\u7b7e\u540d\u8d85\u8fc7\u6709\u6548\u671f\uff0c\u9700\u8981\u91cd\u65b0\u751f\u6210\u7b7e\u540d\u3002 \u56de\u8c03\u7b7e\u540d\u6709\u6548\u671f\u7531\u7528\u6237\u81ea\u884c\u786e\u5b9a\uff0c\u5efa\u8bae\u8bbe\u7f6e\u4e3a 30 \u5206\u949f\u3002 ** \u4e3e\u4f8b ** \u53c2\u6570\u4fe1\u606f\uff1a // \u64cd\u4f5c\u5458\u4fe1\u606f Operator = operator123 Password = MD5(password123) = 482c811da5d5b4bc6d497ffa98491e38 // \u53c2\u6570 Method = POST URI = /pretreatment/ Date = Wed, 09 Nov 2016 14:26:58 GMT Content-MD5 = MD5(service=upyun-temp&notify_url=/upyun_notify_url&source=/tmp.mp4&tasks=W3siYXZvcHRzIjoiL3MvMjQwcCg0OjMpL2FzLzEvci8zMCIsInJldHVybl9pbmZvIjp0cnVlLCJzYXZlX2FzIjoiL2EvYi5tcDQiLCJ0eXBlIjoidmlkZW8ifSx7ImF2b3B0cyI6Ii9pL0wyRXZZaTlqTG0xd05BPT0vaS9MekV2TWk4ekxtMXdOQT09Iiwic2F2ZV9hcyI6Ii9jb25jYXQvYS5tcDQiLCJ0eXBlIjoidmNvbmNhdCJ9XQ==&accept=json) = a2d75510f7ec654cc24cfa2b5a5a8182 \u751f\u6210 Signature\uff1a Signature = Base64 (HMAC-SHA1 (<Password>, <Method>& <URI>& <Date>& <Content-MD5> )) // \u5185\u5bb9\u62fc\u63a5\u65f6\uff0c\u4e0d\u7528\u6362\u884c\u6216\u7a7a\u683c\uff0c\u4e0a\u9762\u683c\u5f0f\u7684\u6362\u884c\u6216\u7a7a\u683c\u662f\u4e3a\u4e86\u65b9\u4fbf\u9605\u8bfb = Base64 (HMAC-SHA1 (482c811da5d5b4bc6d497ffa98491e38,POST&/pretreatment/&Wed, 09 Nov 2016 14:26:58 GMT&a2d75510f7ec654cc24cfa2b5a5a8182)) // HMAC-SHA1 \u8fd4\u56de\u7684\u539f\u751f\u4e8c\u8fdb\u5236\u6570\u636e\u8fdb\u884c Base64 \u7f16\u7801 = 6KGqGX4tFwqnCdSndEmGQsR1jQU= Authorization \u7b7e\u540d\uff1a Authorization: UPYUN upyun:6KGqGX4tFwqnCdSndEmGQsR1jQU= \u5b8c\u6574\u7684\u8bf7\u6c42\uff1a POST /pretreatment/ HTTP/1.1 Authorization: UPYUN upyun:6KGqGX4tFwqnCdSndEmGQsR1jQU= Content-MD5: a2d75510f7ec654cc24cfa2b5a5a8182 Date: Wed, 9 Nov 2016 14:26:58 GMT Content-Type: application/x-www-form-urlencoded; charset=utf-8 Host: p0.api.upyun.com Content-Length: 668 service=upyun-temp&notify_url=/upyun_notify_url&source=/tmp.mp4&tasks=W3siYXZvcHRzIjoiL3MvMjQwcCg0OjMpL2FzLzEvci8zMCIsInJldHVybl9pbmZvIjp0cnVlLCJzYXZlX2FzIjoiL2EvYi5tcDQiLCJ0eXBlIjoidmlkZW8ifSx7ImF2b3B0cyI6Ii9pL0wyRXZZaTlqTG0xd05BPT0vaS9MekV2TWk4ekxtMXdOQT09Iiwic2F2ZV9hcyI6Ii9jb25jYXQvYS5tcDQiLCJ0eXBlIjoidmNvbmNhdCJ9XQ==&accept=json \u4ee3\u7801\u6f14\u793a \u00b6 \u6ce8\u610f\u4e8b\u9879 \u00b6 \u672c\u793a\u4f8b\u9002\u7528\u4e8e\u4e91\u5b58\u50a8\uff0c\u4e91\u5904\u7406\uff0c\u5185\u5bb9\u8bc6\u522b\uff0c\u5bb9\u5668\u4e91\u670d\u52a1\u3002 \u4f7f\u7528\u65f6\uff0c\u6839\u636e\u81ea\u5df1\u7684\u9700\u6c42\u3001\u914d\u7f6e\uff0c\u4fee\u6539\u5bf9\u5e94\u53c2\u6570: key \uff0c secret \uff0c uri \uff0c method \uff0c policy \uff0c md5 \u3002 \u672c\u793a\u4f8b\u4f7f\u7528\u7684 key \uff0c secret \u5728\u4e0d\u540c\u670d\u52a1\u4e2d\u7684\u542b\u4e49\u4e0d\u4e00\u6837\uff0c\u4e91\u5b58\u50a8\u3001\u4e91\u5904\u7406\u3001\u5185\u5bb9\u8bc6\u522b(\u6709\u5b58\u50a8) \u4e2d\u8868\u793a Operator \u548c Password \uff0c \u5185\u5bb9\u8bc6\u522b(\u65e0\u5b58\u50a8)\u3001\u5bb9\u5668\u4e91\u8868\u793a\u5404\u81ea\u670d\u52a1\u63d0\u4f9b\u7684 ClientKey \u548c ClientSecret \u3002 \u6839\u636e\u5bf9\u5e94 API \u6587\u6863\u8bf4\u660e\uff0c\u628a\u8ba4\u8bc1\u4fe1\u606f\uff0c\u586b\u5165\u76f8\u5e94\u7684 http \u8bf7\u6c42\u4fe1\u606f\u4e2d\u3002 \u4f7f\u7528 form API \u4e0a\u4f20\u65f6\uff0c\u9700\u8981\u7528\u6237\u751f\u6210 policy \uff0c\u672c\u793a\u4f8b\u4e0d\u63d0\u4f9b\u751f\u6210 policy \u7684\u4f7f\u7528\u5b9e\u4f8b\u3002 \u5e38\u7528\u8bed\u8a00\u4ee3\u7801\u793a\u4f8b \u00b6 go \u4ee3\u7801\u6f14\u793a \u00b6 package main import ( \"crypto/hmac\" \"crypto/md5\" \"crypto/sha1\" \"encoding/base64\" \"fmt\" \"strings\" \"time\" ) var ( key = \"upyun\" secret = \"secret\" // \u5bf9\u4e8e\u4e0a\u4f20\uff0c\u5904\u7406\uff0c\u8ddf\u5185\u5bb9\u8bc6\u522b\u9700\u8981MD5\u52a0\u5bc6 uri = \"/v1/apps/\" method = \"GET\" ) func md5Str(s string) string { return fmt.Sprintf(\"%x\", md5.Sum([]byte(s))) } func makeRFC1123Date(d time.Time) string { utc := d.UTC().Format(time.RFC1123) return strings.Replace(utc, \"UTC\", \"GMT\", -1) } func base64ToStr(b []byte) string { return base64.StdEncoding.EncodeToString(b) } func sign(key, secret, method, uri, date, policy, md5 string) string { mac := hmac.New(sha1.New, []byte(secret)) elems := []string{} for _, v := range []string{method, uri, date, policy, md5} { if v != \"\" { elems = append(elems, v) } } value := strings.Join(elems, \"&\") fmt.Println(value) mac.Write([]byte(value)) signStr := base64ToStr(mac.Sum(nil)) return \"UPYUN \" + key + \":\" + signStr } func main() { date := makeRFC1123Date(time.Now()) fmt.Println(date) fmt.Println(md5Str(secret)) // \u4e0a\u4f20\uff0c\u5904\u7406\uff0c\u5185\u5bb9\u8bc6\u522b\u6709\u5b58\u50a8 fmt.Println(sign(key, md5Str(secret), method, uri, date, \"\", \"\")) // \u5bb9\u5668\u4e91\uff0c\u5185\u5bb9\u8bc6\u522b\u65e0\u5b58\u50a8 fmt.Println(sign(key, secret, method, uri, date, \"\", \"\")) } python \u4ee3\u7801\u6f14\u793a \u00b6 # -*- coding: UTF-8 -*- import base64 import datetime import hashlib import hmac # Tip 1 # \u4f7f\u7528\u65f6\u9700\u8981\u6839\u636e\u81ea\u5df1\u914d\u7f6e\u4e0e\u9700\u6c42\u63d0\u4f9b\u53c2\u6570 key secret uri method key = 'upyun' secret = 'secret' uri = '/v1/apps/' method = 'GET' def httpdate_rfc1123(dt=None): dt = dt or datetime.datetime.utcnow() return dt.strftime('%a, %d %b %Y %H:%M:%S GMT') def md5(value): return hashlib.md5(value.encode()).hexdigest() def sign(client_key, client_secret, method, uri, date, policy=None, md5=None): # Tip 4 # MD5 \u4fe1\u606f\u53ef\u9009 signarr = [] for v in [method, uri, date, policy, md5]: if v != None: signarr.append(v) signstr = '&'.join(signarr) signstr = base64.b64encode( hmac.new(client_secret.encode(), signstr.encode(), digestmod=hashlib.sha1).digest() ).decode() return 'UPYUN %s:%s' % (client_key, signstr) def main(): # Tip 2 # \u65f6\u95f4\u9700\u8981\u4e0e http \u5934 Date \u4fe1\u606f\u4fdd\u6301\u4e00\u81f4 # date = httpdate_rfc1123() date = 'Thu, 14 Dec 2017 06:03:27 GMT' # Tip 3 # sign \u51fd\u6570\u8fd4\u56de\u7684\u503c\u586b\u5165 http \u5934 Authorization \u4fe1\u606f\u4e2d print date print md5(secret) # \u4e0a\u4f20\uff0c\u5904\u7406\uff0c\u5185\u5bb9\u8bc6\u522b\u6709\u5b58\u50a8 print sign(key, md5(secret), method, uri, date) # \u5185\u5bb9\u8bc6\u522b\u65e0\u5b58\u50a8\uff0c\u5bb9\u5668\u4e91 print sign(key, secret, method, uri, date) if __name__ == '__main__': main() js \u4ee3\u7801\u6f14\u793a \u00b6 var crypto = require('crypto'); function sign(key, secret, method, uri, date, policy=null, md5=null) { elems = []; [method, uri, date, policy, md5].forEach(item => { if (item != null) { elems.push(item) } }) value = elems.join('&'); auth = hmacsha1(secret, value); return `UPYUN ${key}:${auth}`; } function MD5(value) { return crypto.createHash('md5').update(value).digest('hex'); } function hmacsha1(secret, value) { return crypto.createHmac('sha1', secret).update(value, 'utf-8').digest().toString('base64'); } date = new Date().toGMTString(); console.log(date); key = 'upyun'; secret = 'secret'; method = 'GET'; uri = '/v1/apps/'; console.log(MD5('secret')); // \u4e0a\u4f20\uff0c\u5904\u7406\uff0c\u5185\u5bb9\u8bc6\u522b\u6709\u5b58\u50a8 console.log(sign(key, MD5(secret), method, uri, date)); // \u5185\u5bb9\u8bc6\u522b\u65e0\u5b58\u50a8\uff0c\u5bb9\u5668\u4e91 console.log(sign(key, secret, method, uri, date)); java \u4ee3\u7801\u6f14\u793a \u00b6 import java.security.InvalidKeyException; import java.security.NoSuchAlgorithmException; import java.security.SignatureException; import javax.crypto.Mac; import javax.crypto.spec.SecretKeySpec; import java.util.Base64; import java.util.Calendar; import java.text.SimpleDateFormat; import java.util.Locale; import java.util.TimeZone; import java.security.*; import java.io.*; public class auth { private static final String HMAC_SHA1_ALGORITHM = \"HmacSHA1\"; public static String md5(String string) { byte[] hash; try { hash = MessageDigest.getInstance(\"MD5\").digest(string.getBytes(\"UTF-8\")); } catch (UnsupportedEncodingException e) { throw new RuntimeException(\"UTF-8 is unsupported\", e); } catch (NoSuchAlgorithmException e) { throw new RuntimeException(\"MessageDigest\u4e0d\u652f\u6301MD5Util\", e); } StringBuilder hex = new StringBuilder(hash.length * 2); for (byte b : hash) { if ((b & 0xFF) < 0x10) hex.append(\"0\"); hex.append(Integer.toHexString(b & 0xFF)); } return hex.toString(); } public static byte[] hashHmac(String data, String key) throws SignatureException, NoSuchAlgorithmException, InvalidKeyException { SecretKeySpec signingKey = new SecretKeySpec(key.getBytes(), HMAC_SHA1_ALGORITHM); Mac mac = Mac.getInstance(HMAC_SHA1_ALGORITHM); mac.init(signingKey); return mac.doFinal(data.getBytes()); } public static String sign(String key, String secret, String method, String uri, String date, String policy, String md5) throws Exception { String value = method + \"&\" + uri + \"&\" + date; if (policy != null && policy.length() > 0) { value = value + \"&\" + policy; } if (md5 != null && md5.length() > 0) { value = value + \"&\" + md5; } byte[] hmac = hashHmac(value, secret); String sign = Base64.getEncoder().encodeToString(hmac); return \"UPYUN \" + key + \":\" + sign; } public static String getRfc1123Time() { Calendar calendar = Calendar.getInstance(); SimpleDateFormat dateFormat = new SimpleDateFormat( \"EEE, dd MMM yyyy HH:mm:ss z\", Locale.US); dateFormat.setTimeZone(TimeZone.getTimeZone(\"GMT\")); return dateFormat.format(calendar.getTime()); } public static void main(String[] args) throws Exception { String key = \"upyun\"; String secret = \"secret\"; String method = \"GET\"; String uri = \"/v1/apps/\"; String date = getRfc1123Time(); System.out.println(date); System.out.println(md5(secret)); // \u4e0a\u4f20\uff0c\u5904\u7406\uff0c\u5185\u5bb9\u8bc6\u522b\u6709\u5b58\u50a8 System.out.println(sign(key, md5(secret), method, uri, date, \"\", \"\")); // \u5185\u5bb9\u8bc6\u522b\u65e0\u5b58\u50a8\uff0c\u5bb9\u5668\u4e91 System.out.println(sign(key, secret, method, uri, date, \"\", \"\")); } } php \u4ee3\u7801\u6f14\u793a \u00b6 <?php function sign($key, $secret, $method, $uri, $date, $policy=null, $md5=null) { $elems = array(); foreach (array($method, $uri, $date, $policy, $md5) as $v) { if ($v) { $elems[] = $v; } } $value = implode('&', $elems); $sign = base64_encode(hash_hmac('sha1', $value, $secret, true)); return 'UPYUN ' . $key . ':' . $sign; } function main() { $key = 'upyun'; $secret = 'secret'; $uri = '/v1/apps/'; $method = 'GET'; $date = gmdate('D, d M Y H:i:s \\G\\M\\T'); $md = md5($secret); echo $md . \"\\n\"; echo $date . \"\\n\"; // \u4e0a\u4f20\uff0c\u5904\u7406\uff0c\u5185\u5bb9\u8bc6\u522b\u6709\u5b58\u50a8 echo sign($key, md5($secret), $method, $uri, $date) . \"\\n\"; // \u5185\u5bb9\u8bc6\u522b\u65e0\u5b58\u50a8\uff0c\u5bb9\u5668\u4e91 echo sign($key, $secret, $method, $uri, $date); } main(); \u5982\u6709\u7591\u95ee\u8bf7 \u8054\u7cfb\u6211\u4eec","title":"\u8ba4\u8bc1\u9274\u6743"},{"location":"cloud/authorization/#_1","text":"** \u7b7e\u540d\u8ba1\u7b97\u65b9\u6cd5 ** Authorization: UPYUN <Operator>:<Signature> <Signature> = Base64 (HMAC-SHA1 (<Password>, <Method>& <URI>& <Date>& <Content-MD5> )) \u76f8\u5173\u53c2\u6570\u8bf4\u660e\uff1a \u53c2\u6570 \u5fc5\u9009 \u8bf4\u660e Operator \u662f \u670d\u52a1\u7684\u64cd\u4f5c\u5458\u540d\u79f0 Method \u662f \u8bf7\u6c42\u65b9\u5f0f\uff0c\u5982\uff1aGET\u3001POST\u3001PUT\u3001HEAD \u7b49 URI \u662f \u8bf7\u6c42\u8def\u5f84 Date \u662f \u8bf7\u6c42\u65e5\u671f\u65f6\u95f4\uff0cGMT \u683c\u5f0f\u5b57\u7b26\u4e32 ( RFC 1123 )\uff0c\u5982 Wed, 29 Oct 2014 02:26:58 GMT Content-MD5 \u5426 \u8bf7\u6c42\u4f53\u7684 MD5 \u6821\u9a8c\u503c\uff0c\u5982\u679c\u8bf7\u6c42\u4f53\u4e3a\u7a7a\uff0c\u53ef\u4ee5\u4e3a\u7a7a Password \u662f \u670d\u52a1\u7684\u64cd\u4f5c\u5458\u5bc6\u7801\u7684 MD5 \u503c ** \u6ce8 ** \u975e\u5fc5\u9009\u53c2\u6570\u4e3a\u7a7a\u65f6\uff0c\u8fde\u540c\u524d\u9762\u7684 & \u4e00\u8d77\u4e0d\u53c2\u4e0e\u7b7e\u540d\u8ba1\u7b97\u3002\u6240\u6709\u8ba1\u7b97\u7684 MD5 \u503c\uff0c\u683c\u5f0f\u5747\u662f 32 \u4f4d\u5c0f\u5199\u3002 HMAC-SHA1 \u8f93\u51fa\u7684\u5fc5\u987b\u662f \u539f\u751f\u7684\u4e8c\u8fdb\u5236\u6570\u636e \u3002 \u8bf7\u6c42\u7b7e\u540d\u6709\u6548\u671f\u4e3a 30 \u5206\u949f\uff0c\u5982\u679c\u7b7e\u540d\u8d85\u8fc7\u6709\u6548\u671f\uff0c\u9700\u8981\u91cd\u65b0\u751f\u6210\u7b7e\u540d\u3002 \u56de\u8c03\u7b7e\u540d\u6709\u6548\u671f\u7531\u7528\u6237\u81ea\u884c\u786e\u5b9a\uff0c\u5efa\u8bae\u8bbe\u7f6e\u4e3a 30 \u5206\u949f\u3002 ** \u4e3e\u4f8b ** \u53c2\u6570\u4fe1\u606f\uff1a // \u64cd\u4f5c\u5458\u4fe1\u606f Operator = operator123 Password = MD5(password123) = 482c811da5d5b4bc6d497ffa98491e38 // \u53c2\u6570 Method = POST URI = /pretreatment/ Date = Wed, 09 Nov 2016 14:26:58 GMT Content-MD5 = MD5(service=upyun-temp&notify_url=/upyun_notify_url&source=/tmp.mp4&tasks=W3siYXZvcHRzIjoiL3MvMjQwcCg0OjMpL2FzLzEvci8zMCIsInJldHVybl9pbmZvIjp0cnVlLCJzYXZlX2FzIjoiL2EvYi5tcDQiLCJ0eXBlIjoidmlkZW8ifSx7ImF2b3B0cyI6Ii9pL0wyRXZZaTlqTG0xd05BPT0vaS9MekV2TWk4ekxtMXdOQT09Iiwic2F2ZV9hcyI6Ii9jb25jYXQvYS5tcDQiLCJ0eXBlIjoidmNvbmNhdCJ9XQ==&accept=json) = a2d75510f7ec654cc24cfa2b5a5a8182 \u751f\u6210 Signature\uff1a Signature = Base64 (HMAC-SHA1 (<Password>, <Method>& <URI>& <Date>& <Content-MD5> )) // \u5185\u5bb9\u62fc\u63a5\u65f6\uff0c\u4e0d\u7528\u6362\u884c\u6216\u7a7a\u683c\uff0c\u4e0a\u9762\u683c\u5f0f\u7684\u6362\u884c\u6216\u7a7a\u683c\u662f\u4e3a\u4e86\u65b9\u4fbf\u9605\u8bfb = Base64 (HMAC-SHA1 (482c811da5d5b4bc6d497ffa98491e38,POST&/pretreatment/&Wed, 09 Nov 2016 14:26:58 GMT&a2d75510f7ec654cc24cfa2b5a5a8182)) // HMAC-SHA1 \u8fd4\u56de\u7684\u539f\u751f\u4e8c\u8fdb\u5236\u6570\u636e\u8fdb\u884c Base64 \u7f16\u7801 = 6KGqGX4tFwqnCdSndEmGQsR1jQU= Authorization \u7b7e\u540d\uff1a Authorization: UPYUN upyun:6KGqGX4tFwqnCdSndEmGQsR1jQU= \u5b8c\u6574\u7684\u8bf7\u6c42\uff1a POST /pretreatment/ HTTP/1.1 Authorization: UPYUN upyun:6KGqGX4tFwqnCdSndEmGQsR1jQU= Content-MD5: a2d75510f7ec654cc24cfa2b5a5a8182 Date: Wed, 9 Nov 2016 14:26:58 GMT Content-Type: application/x-www-form-urlencoded; charset=utf-8 Host: p0.api.upyun.com Content-Length: 668 service=upyun-temp&notify_url=/upyun_notify_url&source=/tmp.mp4&tasks=W3siYXZvcHRzIjoiL3MvMjQwcCg0OjMpL2FzLzEvci8zMCIsInJldHVybl9pbmZvIjp0cnVlLCJzYXZlX2FzIjoiL2EvYi5tcDQiLCJ0eXBlIjoidmlkZW8ifSx7ImF2b3B0cyI6Ii9pL0wyRXZZaTlqTG0xd05BPT0vaS9MekV2TWk4ekxtMXdOQT09Iiwic2F2ZV9hcyI6Ii9jb25jYXQvYS5tcDQiLCJ0eXBlIjoidmNvbmNhdCJ9XQ==&accept=json","title":"\u7b7e\u540d\u8ba4\u8bc1"},{"location":"cloud/authorization/#_2","text":"","title":"\u4ee3\u7801\u6f14\u793a"},{"location":"cloud/authorization/#_3","text":"\u672c\u793a\u4f8b\u9002\u7528\u4e8e\u4e91\u5b58\u50a8\uff0c\u4e91\u5904\u7406\uff0c\u5185\u5bb9\u8bc6\u522b\uff0c\u5bb9\u5668\u4e91\u670d\u52a1\u3002 \u4f7f\u7528\u65f6\uff0c\u6839\u636e\u81ea\u5df1\u7684\u9700\u6c42\u3001\u914d\u7f6e\uff0c\u4fee\u6539\u5bf9\u5e94\u53c2\u6570: key \uff0c secret \uff0c uri \uff0c method \uff0c policy \uff0c md5 \u3002 \u672c\u793a\u4f8b\u4f7f\u7528\u7684 key \uff0c secret \u5728\u4e0d\u540c\u670d\u52a1\u4e2d\u7684\u542b\u4e49\u4e0d\u4e00\u6837\uff0c\u4e91\u5b58\u50a8\u3001\u4e91\u5904\u7406\u3001\u5185\u5bb9\u8bc6\u522b(\u6709\u5b58\u50a8) \u4e2d\u8868\u793a Operator \u548c Password \uff0c \u5185\u5bb9\u8bc6\u522b(\u65e0\u5b58\u50a8)\u3001\u5bb9\u5668\u4e91\u8868\u793a\u5404\u81ea\u670d\u52a1\u63d0\u4f9b\u7684 ClientKey \u548c ClientSecret \u3002 \u6839\u636e\u5bf9\u5e94 API \u6587\u6863\u8bf4\u660e\uff0c\u628a\u8ba4\u8bc1\u4fe1\u606f\uff0c\u586b\u5165\u76f8\u5e94\u7684 http \u8bf7\u6c42\u4fe1\u606f\u4e2d\u3002 \u4f7f\u7528 form API \u4e0a\u4f20\u65f6\uff0c\u9700\u8981\u7528\u6237\u751f\u6210 policy \uff0c\u672c\u793a\u4f8b\u4e0d\u63d0\u4f9b\u751f\u6210 policy \u7684\u4f7f\u7528\u5b9e\u4f8b\u3002","title":"\u6ce8\u610f\u4e8b\u9879"},{"location":"cloud/authorization/#_4","text":"","title":"\u5e38\u7528\u8bed\u8a00\u4ee3\u7801\u793a\u4f8b"},{"location":"cloud/authorization/#go","text":"package main import ( \"crypto/hmac\" \"crypto/md5\" \"crypto/sha1\" \"encoding/base64\" \"fmt\" \"strings\" \"time\" ) var ( key = \"upyun\" secret = \"secret\" // \u5bf9\u4e8e\u4e0a\u4f20\uff0c\u5904\u7406\uff0c\u8ddf\u5185\u5bb9\u8bc6\u522b\u9700\u8981MD5\u52a0\u5bc6 uri = \"/v1/apps/\" method = \"GET\" ) func md5Str(s string) string { return fmt.Sprintf(\"%x\", md5.Sum([]byte(s))) } func makeRFC1123Date(d time.Time) string { utc := d.UTC().Format(time.RFC1123) return strings.Replace(utc, \"UTC\", \"GMT\", -1) } func base64ToStr(b []byte) string { return base64.StdEncoding.EncodeToString(b) } func sign(key, secret, method, uri, date, policy, md5 string) string { mac := hmac.New(sha1.New, []byte(secret)) elems := []string{} for _, v := range []string{method, uri, date, policy, md5} { if v != \"\" { elems = append(elems, v) } } value := strings.Join(elems, \"&\") fmt.Println(value) mac.Write([]byte(value)) signStr := base64ToStr(mac.Sum(nil)) return \"UPYUN \" + key + \":\" + signStr } func main() { date := makeRFC1123Date(time.Now()) fmt.Println(date) fmt.Println(md5Str(secret)) // \u4e0a\u4f20\uff0c\u5904\u7406\uff0c\u5185\u5bb9\u8bc6\u522b\u6709\u5b58\u50a8 fmt.Println(sign(key, md5Str(secret), method, uri, date, \"\", \"\")) // \u5bb9\u5668\u4e91\uff0c\u5185\u5bb9\u8bc6\u522b\u65e0\u5b58\u50a8 fmt.Println(sign(key, secret, method, uri, date, \"\", \"\")) }","title":"go \u4ee3\u7801\u6f14\u793a"},{"location":"cloud/authorization/#python","text":"# -*- coding: UTF-8 -*- import base64 import datetime import hashlib import hmac # Tip 1 # \u4f7f\u7528\u65f6\u9700\u8981\u6839\u636e\u81ea\u5df1\u914d\u7f6e\u4e0e\u9700\u6c42\u63d0\u4f9b\u53c2\u6570 key secret uri method key = 'upyun' secret = 'secret' uri = '/v1/apps/' method = 'GET' def httpdate_rfc1123(dt=None): dt = dt or datetime.datetime.utcnow() return dt.strftime('%a, %d %b %Y %H:%M:%S GMT') def md5(value): return hashlib.md5(value.encode()).hexdigest() def sign(client_key, client_secret, method, uri, date, policy=None, md5=None): # Tip 4 # MD5 \u4fe1\u606f\u53ef\u9009 signarr = [] for v in [method, uri, date, policy, md5]: if v != None: signarr.append(v) signstr = '&'.join(signarr) signstr = base64.b64encode( hmac.new(client_secret.encode(), signstr.encode(), digestmod=hashlib.sha1).digest() ).decode() return 'UPYUN %s:%s' % (client_key, signstr) def main(): # Tip 2 # \u65f6\u95f4\u9700\u8981\u4e0e http \u5934 Date \u4fe1\u606f\u4fdd\u6301\u4e00\u81f4 # date = httpdate_rfc1123() date = 'Thu, 14 Dec 2017 06:03:27 GMT' # Tip 3 # sign \u51fd\u6570\u8fd4\u56de\u7684\u503c\u586b\u5165 http \u5934 Authorization \u4fe1\u606f\u4e2d print date print md5(secret) # \u4e0a\u4f20\uff0c\u5904\u7406\uff0c\u5185\u5bb9\u8bc6\u522b\u6709\u5b58\u50a8 print sign(key, md5(secret), method, uri, date) # \u5185\u5bb9\u8bc6\u522b\u65e0\u5b58\u50a8\uff0c\u5bb9\u5668\u4e91 print sign(key, secret, method, uri, date) if __name__ == '__main__': main()","title":"python \u4ee3\u7801\u6f14\u793a"},{"location":"cloud/authorization/#js","text":"var crypto = require('crypto'); function sign(key, secret, method, uri, date, policy=null, md5=null) { elems = []; [method, uri, date, policy, md5].forEach(item => { if (item != null) { elems.push(item) } }) value = elems.join('&'); auth = hmacsha1(secret, value); return `UPYUN ${key}:${auth}`; } function MD5(value) { return crypto.createHash('md5').update(value).digest('hex'); } function hmacsha1(secret, value) { return crypto.createHmac('sha1', secret).update(value, 'utf-8').digest().toString('base64'); } date = new Date().toGMTString(); console.log(date); key = 'upyun'; secret = 'secret'; method = 'GET'; uri = '/v1/apps/'; console.log(MD5('secret')); // \u4e0a\u4f20\uff0c\u5904\u7406\uff0c\u5185\u5bb9\u8bc6\u522b\u6709\u5b58\u50a8 console.log(sign(key, MD5(secret), method, uri, date)); // \u5185\u5bb9\u8bc6\u522b\u65e0\u5b58\u50a8\uff0c\u5bb9\u5668\u4e91 console.log(sign(key, secret, method, uri, date));","title":"js \u4ee3\u7801\u6f14\u793a"},{"location":"cloud/authorization/#java","text":"import java.security.InvalidKeyException; import java.security.NoSuchAlgorithmException; import java.security.SignatureException; import javax.crypto.Mac; import javax.crypto.spec.SecretKeySpec; import java.util.Base64; import java.util.Calendar; import java.text.SimpleDateFormat; import java.util.Locale; import java.util.TimeZone; import java.security.*; import java.io.*; public class auth { private static final String HMAC_SHA1_ALGORITHM = \"HmacSHA1\"; public static String md5(String string) { byte[] hash; try { hash = MessageDigest.getInstance(\"MD5\").digest(string.getBytes(\"UTF-8\")); } catch (UnsupportedEncodingException e) { throw new RuntimeException(\"UTF-8 is unsupported\", e); } catch (NoSuchAlgorithmException e) { throw new RuntimeException(\"MessageDigest\u4e0d\u652f\u6301MD5Util\", e); } StringBuilder hex = new StringBuilder(hash.length * 2); for (byte b : hash) { if ((b & 0xFF) < 0x10) hex.append(\"0\"); hex.append(Integer.toHexString(b & 0xFF)); } return hex.toString(); } public static byte[] hashHmac(String data, String key) throws SignatureException, NoSuchAlgorithmException, InvalidKeyException { SecretKeySpec signingKey = new SecretKeySpec(key.getBytes(), HMAC_SHA1_ALGORITHM); Mac mac = Mac.getInstance(HMAC_SHA1_ALGORITHM); mac.init(signingKey); return mac.doFinal(data.getBytes()); } public static String sign(String key, String secret, String method, String uri, String date, String policy, String md5) throws Exception { String value = method + \"&\" + uri + \"&\" + date; if (policy != null && policy.length() > 0) { value = value + \"&\" + policy; } if (md5 != null && md5.length() > 0) { value = value + \"&\" + md5; } byte[] hmac = hashHmac(value, secret); String sign = Base64.getEncoder().encodeToString(hmac); return \"UPYUN \" + key + \":\" + sign; } public static String getRfc1123Time() { Calendar calendar = Calendar.getInstance(); SimpleDateFormat dateFormat = new SimpleDateFormat( \"EEE, dd MMM yyyy HH:mm:ss z\", Locale.US); dateFormat.setTimeZone(TimeZone.getTimeZone(\"GMT\")); return dateFormat.format(calendar.getTime()); } public static void main(String[] args) throws Exception { String key = \"upyun\"; String secret = \"secret\"; String method = \"GET\"; String uri = \"/v1/apps/\"; String date = getRfc1123Time(); System.out.println(date); System.out.println(md5(secret)); // \u4e0a\u4f20\uff0c\u5904\u7406\uff0c\u5185\u5bb9\u8bc6\u522b\u6709\u5b58\u50a8 System.out.println(sign(key, md5(secret), method, uri, date, \"\", \"\")); // \u5185\u5bb9\u8bc6\u522b\u65e0\u5b58\u50a8\uff0c\u5bb9\u5668\u4e91 System.out.println(sign(key, secret, method, uri, date, \"\", \"\")); } }","title":"java \u4ee3\u7801\u6f14\u793a"},{"location":"cloud/authorization/#php","text":"<?php function sign($key, $secret, $method, $uri, $date, $policy=null, $md5=null) { $elems = array(); foreach (array($method, $uri, $date, $policy, $md5) as $v) { if ($v) { $elems[] = $v; } } $value = implode('&', $elems); $sign = base64_encode(hash_hmac('sha1', $value, $secret, true)); return 'UPYUN ' . $key . ':' . $sign; } function main() { $key = 'upyun'; $secret = 'secret'; $uri = '/v1/apps/'; $method = 'GET'; $date = gmdate('D, d M Y H:i:s \\G\\M\\T'); $md = md5($secret); echo $md . \"\\n\"; echo $date . \"\\n\"; // \u4e0a\u4f20\uff0c\u5904\u7406\uff0c\u5185\u5bb9\u8bc6\u522b\u6709\u5b58\u50a8 echo sign($key, md5($secret), $method, $uri, $date) . \"\\n\"; // \u5185\u5bb9\u8bc6\u522b\u65e0\u5b58\u50a8\uff0c\u5bb9\u5668\u4e91 echo sign($key, $secret, $method, $uri, $date); } main(); \u5982\u6709\u7591\u95ee\u8bf7 \u8054\u7cfb\u6211\u4eec","title":"php \u4ee3\u7801\u6f14\u793a"},{"location":"cloud/av/","text":"\u5feb\u901f\u5165\u95e8 \u00b6 \u53c8\u62cd\u4e91\u5904\u7406\uff08\u5f02\u6b65\u97f3\u89c6\u9891\u5904\u7406\uff09\u57fa\u4e8e\u4e91\u5b58\u50a8\u670d\u52a1\uff0c\u60a8\u5728\u4f7f\u7528\u5b83\u4e4b\u524d\uff0c\u8bf7\u786e\u4fdd\u60a8\u5df2\u7ecf\u6ce8\u518c\u53c8\u62cd\u4e91\u8d26\u53f7\u5e76\u5b8c\u6210\u5b9e\u540d\u9a8c\u8bc1\uff0c\u8bf7\u786e\u4fdd\u60a8\u5df2\u7ecf\u521b\u5efa \u4e91\u5b58\u50a8\u670d\u52a1 \u3002 \u6536\u8d39\u65b9\u9762\uff0c\u89c1 \u4ef7\u683c \u3002 \u76f8\u5173\u9605\u8bfb\uff1a \u540c\u6b65\u89c6\u9891\u5904\u7406 \uff0c \u540c\u6b65\u97f3\u9891\u5904\u7406 \u3002 \u5f00\u53d1\u8005\u6307\u5357 \u00b6 \u63d0\u4ea4\u5904\u7406\u4efb\u52a1 \u00b6 ** \u8bf7\u6c42\u65b9\u6cd5 ** \u5bf9\u5df2\u7ecf\u5b58\u5728\u4e91\u5b58\u50a8\u4e2d\u7684\u97f3\u89c6\u9891\u6587\u4ef6\uff0c\u4ee5 POST \u65b9\u6cd5\u5411 http://p0.api.upyun.com/pretreatment/ \u63d0\u4ea4\u5904\u7406\u4efb\u52a1\uff0c\u54cd\u5e94\u4e2d\u8fd4\u56de\u4efb\u52a1 task_id \u3002\u4efb\u52a1\u4ee5\u5f02\u6b65\u7684\u65b9\u5f0f\u5904\u7406\uff0c\u5904\u7406\u5b8c\u6210\u540e\uff0c\u56de\u8c03\u901a\u77e5\u7528\u6237\u5904\u7406\u7ed3\u679c\u3002 curl -X POST \\ http://p0.api.upyun.com/pretreatment/ \\ -H \"Authorization: UPYUN <Operator>:<Signature>\" \\ -H \"Date: <Wed, 29 Oct 2014 02:26:58 GMT>\" \\ -H \"Content-MD5: <Content-MD5>\" \\ -d \"accept=json\" -d \"service=<service>\" \\ -d \"notify_url=<notify_url>\" \\ -d \"source=<\u97f3\u89c6\u9891\u6587\u4ef6\u76f8\u5bf9\u8def\u5f84>\" \\ -d \"tasks=<base64 \u7f16\u7801\u540e\u7684\u4efb\u52a1\u5b57\u7b26\u4e32>\" \\ ** \u8ba4\u8bc1\u9274\u6743 ** Authorization \u8be6\u89c1 \u7b7e\u540d\u8ba4\u8bc1 \u3002 ** \u8bf7\u6c42\u53c2\u6570 ** \u53c2\u6570 \u7c7b\u578b \u5fc5\u9009 \u8bf4\u660e service string \u662f \u97f3/\u89c6\u9891\u6587\u4ef6\u6240\u5728\u7684\u670d\u52a1\u540d notify_url string \u662f \u56de\u8c03\u901a\u77e5\u5730\u5740\uff0c\u8be6\u89c1 \u56de\u8c03\u901a\u77e5 source string \u662f \u539f\u59cb\u97f3/\u89c6\u9891\u6587\u4ef6\u8def\u5f84 tasks string \u662f \u4efb\u52a1\u4fe1\u606f\uff0c\u8be6\u89c1 tasks \u53c2\u6570\u8bf4\u660e accept string \u662f \u56de\u8c03\u4fe1\u606f\u7684\u683c\u5f0f\uff0c\u503c\u4e3a json ** tasks \u53c2\u6570\u8bf4\u660e ** 1. \u6309 JSON \u683c\u5f0f\u7ec4\u88c5\u4efb\u52a1\uff0c\u4e00\u6b21\u8bf7\u6c42 tasks \u6700\u591a\u53ef\u4ee5\u63d0\u4ea4 10 \u4e2a\u4efb\u52a1\u3002 \u4efb\u52a1\u53c2\u6570\u89c1 \u529f\u80fd \u3002 [ { \"type\": \"video\", // \u89c6\u9891\u8f6c\u7801 \"avopts\": \"/s/240p(4:3)/as/1/r/30\", // \u53c2\u6570 \"return_info\": true, // \u8fd4\u56de\u5143\u6570\u636e \"save_as\": \"/a/b.mp4\" // \u4fdd\u5b58\u8def\u5f84 }, { \"type\": \"video\", // \u89c6\u9891\u62fc\u63a5 \"avopts\": \"/i/L2EvYi9jLm1wNA==/i/LzEvMi8zLm1wNA==\", // \u53c2\u6570 \"save_as\": \"/concat/a.mp4\" // \u4fdd\u5b58\u8def\u5f84 }, \u2026 ] 2. \u628a JSON \u5b57\u7b26\u4e32 Base64 \u7f16\u7801\uff0c\u5f97\u5230 tasks \u3002 W3siYXZvcHRzIjoiL3MvMjQwcCg0OjMpL2FzLzEvci8zMCIsInJldHVybl9pbmZvIjp0cnVlLCJzYXZlX2FzIjoiL2EvYi5tcDQiLCJ0eXBlIjoidmlkZW8ifSx7ImF2b3B0cyI6Ii9pL0wyRXZZaTlqTG0xd05BPT0vaS9MekV2TWk4ekxtMXdOQT09Iiwic2F2ZV9hcyI6Ii9jb25jYXQvYS5tcDQiLCJ0eXBlIjoidmNvbmNhdCJ9XQ== ** \u54cd\u5e94\u4fe1\u606f ** \u4efb\u52a1\u63d0\u4ea4\u6210\u529f\uff1a\u8fd4\u56de 200 \uff0c\u54cd\u5e94\u4f53\u662f\u4e00\u7ec4\u6309\u4efb\u52a1\u63d0\u4ea4\u5148\u540e\u987a\u5e8f\u6392\u5e8f\u7684 task_id \u3002\u4f8b\u5982\uff1a [ \"35f0148d414a688a275bf915ba7cebb2\", \"98adbaa52b2f63d6d7f327a0ff223348\", \"c3103189fa906a5354d29bd807e8dc51\", \u2026 ] \u4efb\u52a1\u63d0\u4ea4\u5931\u8d25\uff1a\u8fd4\u56de\u76f8\u5e94\u7684\u51fa\u9519\u4fe1\u606f\uff0c\u5177\u4f53\u8bf7\u53c2\u9605\u300c \u72b6\u6001\u7801\u8868 \u300d\u3002 \u56de\u8c03\u901a\u77e5 \u00b6 \u4efb\u52a1\u5904\u7406\u5b8c\u6210\u540e\uff0c\u5411 notify_url \u53d1\u9001 HTTP POST \u8bf7\u6c42\uff0c\u8bf7\u6c42\u4f53\u662f\u56de\u8c03\u4fe1\u606f\u3002 curl -X POST \\ <notify_url> \\ -H \"Authorization: UPYUN <Operator>:<Signature>\" \\ -H \"Date: <Wed, 29 Oct 2014 02:26:58 GMT>\" \\ -H \"Content-MD5: <Content-MD5>\" \\ -d \"service=<service>\" \\ # \u5176\u4ed6\u53c2\u6570... ** \u56de\u8c03\u4fe1\u606f ** \u56de\u8c03\u4fe1\u606f\u662f JSON \u5b57\u7b26\u4e32\uff0c\u53c2\u6570\u540d\u53ca\u8bf4\u660e\u5982\u4e0b\uff1a \u53c2\u6570 \u7c7b\u578b \u8bf4\u660e service string \u97f3/\u89c6\u9891\u6587\u4ef6\u6240\u5728\u7684\u670d\u52a1\u540d status_code integer \u5904\u7406\u7ed3\u679c\u72b6\u6001\u7801\uff0c 200 \u8868\u793a\u6210\u529f\u5904\u7406\uff0c\u8be6\u89c1 \u72b6\u6001\u7801\u8868 path array \u8f93\u51fa\u6587\u4ef6\u4fdd\u5b58\u8def\u5f84 description string \u5904\u7406\u7ed3\u679c\u63cf\u8ff0 task_id string \u4efb\u52a1\u5bf9\u5e94\u7684 task_id info json \u8f93\u51fa\u6587\u4ef6\u7684\u5143\u6570\u636e\uff0c\u4ec5\u5f53 return_info \u4e3a true \u65f6\uff0c\u6709\u6548 signature\uff08\u65e7\uff09 string \u56de\u8c03\u901a\u77e5\u7684\u7b7e\u540d\uff0c \u56de\u8c03\u7b7e\u540d\uff08\u65e7\uff09 \u7684\u53c2\u6570 timestamp\uff08\u65e7\uff09 integer \u670d\u52a1\u7aef\u53d1\u9001\u56de\u8c03\u65f6\u7684\u65f6\u95f4\u6233\uff0c \u56de\u8c03\u7b7e\u540d\uff08\u65e7\uff09 \u7684\u53c2\u6570 ** \u56de\u8c03\u7b7e\u540d ** Authorization \u8be6\u89c1 \u7b7e\u540d\u8ba4\u8bc1 \uff0c\u5b83\u63d0\u4f9b\u7ed9\u5ba2\u6237\u7aef\uff0c\u7528\u4e8e\u9a8c\u8bc1\u56de\u8c03\u901a\u77e5\u7684\u5408\u6cd5\u6027\u3002 \u4e0a\u4f20\u9884\u5904\u7406 \u00b6 \u5728\u4e0a\u4f20\u97f3\u89c6\u9891\u6587\u4ef6\u65f6\uff0c\u5bf9\u4e0a\u4f20\u7684\u97f3\u89c6\u9891\u8fdb\u884c\u5904\u7406\uff0c\u751f\u6210\u4e00\u4e2a\u6216\u591a\u4e2a\u65b0\u7684\u6587\u4ef6\uff0c\u540c\u65f6\u4fdd\u5b58\u4e0a\u4f20\u7684\u97f3\u89c6\u9891\u5230\u53c8\u62cd\u4e91\u5b58\u50a8\u3002\u4efb\u52a1\u4ee5\u5f02\u6b65\u7684\u65b9\u5f0f\u5904\u7406\uff0c\u5904\u7406\u5b8c\u6210\u540e\uff0c\u56de\u8c03\u901a\u77e5\u7528\u6237\u5904\u7406\u7ed3\u679c\u3002 \u652f\u6301\u7684 API\uff1a FORM API \u3002 \u53c2\u6570\u540d\u662f apps \uff0c\u53c2\u6570\u503c\u662f JSON \u6570\u7ec4\u3002\u4e00\u4e2a apps \u6700\u591a\u5141\u8bb8\u5305\u542b 10 \u4e2a\u97f3\u89c6\u9891\u5904\u7406\u4efb\u52a1\u3002 \u4efb\u52a1\u53c2\u6570\u89c1 \u529f\u80fd \u3002 ** \u4e3e\u4f8b ** apps = [ { // \u5f02\u6b65\u97f3\u89c6\u9891\u5904\u7406\u4efb\u52a1 \"name\": \"naga\", // \u5f02\u6b65\u4efb\u52a1\u540d\u79f0\uff0c\u5fc5\u586b\u3002naga \u8868\u793a\u5f02\u6b65\u97f3\u89c6\u9891\u5904\u7406\u670d\u52a1 \"type\": \"<type>\", // \u529f\u80fd\u6807\u8bc6\uff0c\u5fc5\u586b \"avopts\": \"<avopts>\", // \u5904\u7406\u53c2\u6570\uff0c\u5fc5\u586b \"return_info\": true/false, // \u662f\u5426\u8fd4\u56de\u5143\u6570\u636e\uff0c\u9009\u586b \"save_as\": \"<save_as>\", // \u7ed3\u679c\u97f3\u9891/\u89c6\u9891\u4fdd\u5b58\u8def\u5f84\uff0c\u9009\u586b \"notify_url\": \"<notify_url>\" // \u56de\u8c03\u5730\u5740\uff0c\u4e0d\u586b\u65f6\u4f7f\u7528\u4e0a\u4f20\u53c2\u6570\u4e2d\u7684 notify_url }, { \"name\": \"naga\", \"type\": \"video\", \"avopts\": \"/s/240p(4:3)/as/1/r/30\", \"return_info\": true, \"save_as\": \"/a/b.mp4\", }, ...... ] ** \u56de\u8c03\u901a\u77e5 ** \u4efb\u52a1\u5904\u7406\u5b8c\u6210\u540e\uff0c\u5411 notify_url \u5730\u5740\u53d1\u9001\u56de\u8c03\u901a\u77e5\u3002\u8be6\u89c1 \u300c\u97f3\u89c6\u9891\u5904\u7406\u300d > \u300c \u56de\u8c03\u901a\u77e5 \u300d\u3002 \u8fdb\u5ea6\u67e5\u8be2 \u00b6 ** \u8bf7\u6c42\u65b9\u6cd5 ** \u901a\u8fc7 task_id \uff0c\u4ee5 GET \u65b9\u6cd5\u5411 http://p0.api.upyun.com/status/ \u63d0\u4ea4\u8fdb\u5ea6\u67e5\u8be2\u4efb\u52a1\u3002 curl http://p0.api.upyun.com/status?service=<service>&task_ids=<task_id1>,<task_id2>,<task_id3> \\ -H \"Authorization: UPYUN <Operator>:<Signature>\" \\ -H \"Date: <Wed, 29 Oct 2014 02:26:58 GMT>\" ** \u8ba4\u8bc1\u9274\u6743 ** Authorization \u8be6\u89c1 \u7b7e\u540d\u8ba4\u8bc1 \u3002 \u4ee3\u7801\u5b9e\u73b0 \u8be6\u89c1 \u4ee3\u7801\u793a\u4f8b \u3002 ** \u67e5\u8be2\u53c2\u6570 ** \u53c2\u6570 \u7c7b\u578b \u5fc5\u9009 \u8bf4\u660e service string \u662f \u97f3/\u89c6\u9891\u6587\u4ef6\u6240\u5728\u7684\u670d\u52a1\u540d task_ids string \u662f \u4efb\u52a1\u96c6\uff0c\u591a\u4e2a task_id \u4f7f\u7528 , \u8fde\u63a5\uff0c\u6700\u591a 20 \u4e2a task_id ** \u54cd\u5e94\u4fe1\u606f ** \u67e5\u8be2\u6210\u529f\uff1a\u8fd4\u56de 200 \uff0c\u54cd\u5e94\u4f53\u662f tasks \u3002 tasks \u662f JSON \u683c\u5f0f\uff0c\u5b58\u653e\u5404\u4e2a\u4efb\u52a1\uff08 task_id \uff09\u7684\u8fdb\u5ea6\u3002\u4f8b\u5982\uff1a { \"tasks\": { \"35f0148d414a688a275bf915ba7cebb2\": 100, \"98adbaa52b2f63d6d7f327a0ff223348\": 20, \"c3103189fa906a5354d29bd807e8dc51\": null, \u2026 } } 20 \u8868\u793a\u4efb\u52a1\u8fdb\u5ea6\u767e\u5206\u6bd4\uff0c 100 \u8868\u793a\u4efb\u52a1\u5904\u7406\u5b8c\u6210\uff0c -1 \u8868\u793a\u4efb\u52a1\u5904\u7406\u5931\u8d25\uff0c null \u8868\u793a\u4efb\u52a1\u5c1a\u672a\u5f00\u59cb\u3002\u5982\u679c\u957f\u65f6\u95f4\u662f null \uff0c\u8bf7\u53cd\u9988\u7ed9 \u552e\u540e \u6216\u60a8\u7684\u5546\u52a1\u7ecf\u7406\u3002 \u67e5\u8be2\u5931\u8d25\uff1a\u8fd4\u56de\u76f8\u5e94\u7684\u51fa\u9519\u4fe1\u606f\uff0c\u5177\u4f53\u8bf7\u53c2\u9605\u300c \u72b6\u6001\u7801\u8868 \u300d\u3002 \u7ed3\u679c\u67e5\u8be2 \u00b6 ** \u8bf7\u6c42\u65b9\u6cd5 ** \u901a\u8fc7 task_id \uff0c\u4ee5 GET \u65b9\u6cd5\u5411 http://p0.api.upyun.com/result/ \u63d0\u4ea4\u5904\u7406\u7ed3\u679c\u67e5\u8be2\u4efb\u52a1\u3002 curl http://p0.api.upyun.com/result?service=<service>&task_ids=<task_id1>,<task_id2>,<task_id3> \\ -H \"Authorization: UPYUN <Operator>:<Signature>\" \\ -H \"Date: <Wed, 29 Oct 2014 02:26:58 GMT>\" ** \u8ba4\u8bc1\u9274\u6743 ** Authorization \u8be6\u89c1 \u7b7e\u540d\u8ba4\u8bc1 \u3002 \u4ee3\u7801\u5b9e\u73b0 \u8be6\u89c1 \u4ee3\u7801\u793a\u4f8b \u3002 ** \u67e5\u8be2\u53c2\u6570 ** \u53c2\u6570 \u7c7b\u578b \u5fc5\u9009 \u8bf4\u660e service string \u662f \u97f3/\u89c6\u9891\u6587\u4ef6\u6240\u5728\u7684\u670d\u52a1\u540d task_ids string \u662f \u4efb\u52a1\u96c6\uff0c\u591a\u4e2a task_id \u4f7f\u7528 , \u8fde\u63a5\uff0c\u6700\u591a 20 \u4e2a task_id ** \u54cd\u5e94\u4fe1\u606f ** \u67e5\u8be2\u6210\u529f\uff1a\u8fd4\u56de 200 \uff0c\u54cd\u5e94\u4f53\u662f\u4efb\u52a1\u7684 \u56de\u8c03\u4fe1\u606f \u3002\u56de\u8c03\u4fe1\u606f\u4f8b\u5982\uff1a { \"9d9c32b63a1034834e77672c6f51f661\": { \"path\": [\"/v2.mp4\"], \"signature\": \"4042c1f07f546d28\", \"status_code\": 200, \"service\": \"service\", \"description\": \"OK\", \"task_id\": \"9d9c32b63a1034834e77672c6f51f661\", \"timestamp\": 1472010905 }, \"3438a54b4991e8d4a46a003bc15e9867\": { \"path\": [\"/v2.mp4\"], \"signature\": \"1c49be9b672394ff\", \"status_code\": 200, \"service\": \"service\", \"description\": \"OK\", \"task_id\": \"3438a54b4991e8d4a46a003bc15e9867\", \"timestamp\": 1472010684 } \u2026 } \u67e5\u8be2\u5931\u8d25\uff1a\u8fd4\u56de\u76f8\u5e94\u7684\u51fa\u9519\u4fe1\u606f\uff0c\u5177\u4f53\u8bf7\u53c2\u9605\u300c \u72b6\u6001\u7801\u8868 \u300d\u3002 \u72b6\u6001\u7801\u8868 \u00b6 \u72b6\u6001\u7801 \u8bf4\u660e 200 \u5904\u7406\u6210\u529f 400 \u53c2\u6570\u9519\u8bef 401 \u53c2\u6570\u9519\u8bef 404 \u6587\u4ef6\u4e0d\u5b58\u5728 5xx \u670d\u52a1\u7aef\u9519\u8bef\u3002\u5982\u9047\u6b64\u7c7b\u9519\u8bef\uff0c\u8bf7\u53cd\u9988\u7ed9 \u552e\u540e \u6216\u60a8\u7684\u5546\u52a1\u7ecf\u7406 \u652f\u6301\u683c\u5f0f \u00b6 \u7c7b\u578b \u8f93\u5165\u683c\u5f0f \u8f93\u51fa\u683c\u5f0f \u89c6\u9891\u5bb9\u5668\u683c\u5f0f AVI\u3001MP4\u3001FLV\u3001MOV\u30013GP\u3001ASF\u3001WMV\u3001M3U8(TS)\u3001MPG\u3001F4V\u3001M4V\u3001MKV\u3001VOB\uff08SVCD/DVD\uff09\u7b49 MP4\u3001FLV\u3001M3U8(TS) \u7b49 \u97f3\u9891\u5bb9\u5668\u683c\u5f0f MP3\u3001OGG\u3001M4A\u3001SILK \u7b49 MP4\u3001MP3\u3001OGG \u7b49 \u89c6\u9891\u7f16\u7801\u683c\u5f0f H.264/AVC \u3001H.263\u3001H.263+\u3001MPEG-2\u3001MPEG-4\u3001VP8\u3001VP9\u3001Quicktime\u3001RealVideo\u3001Windows Media Video \u7b49 H.264/AVC\u3001VP8\u3001H.265/HEVC\u3001VP9 \u7b49 \u97f3\u9891\u7f16\u7801\u683c\u5f0f MP1\u3001MP2\u3001MP3\u3001AAC\u3001AC-3\u3001Vorbis\u3001PCM\u3001RealAudio\u3001Windows Media Audio \u7b49 AAC\u3001MP3 \u7b49 \u9884\u7f6e\u6a21\u677f \u00b6 \u540c\u7b49\u6e05\u6670\u5ea6\u4e0b\uff0c\u5efa\u8bae\u4f18\u5148\u4f7f\u7528 16:9 \u7684\u5bbd\u9ad8\u6bd4\u3002\u7279\u522b\u5730\uff0c\u7a84\u5e26\u9ad8\u6e05\u4e5f\u53ef\u4ee5\u4f7f\u7528\u3002 \u6e05\u6670\u5ea6 \u6a21\u677f\u540d \u5206\u8fa8\u7387 \u7801\u7387 4K 2160p(16:9) 3840x2160,16:9 \u2264 8000Kbps 2K 1440p(16:9) 2560x1440,16:9 \u2264 4000Kbps FHD/\u5168\u9ad8\u6e05 1080p(16:9) 1920x1080,16:9 \u2264 2560Kbps HD/\u9ad8\u6e05 720p(16:9) 1280x720,16:9 \u2264 1500Kbps HD/\u9ad8\u6e05 720p(4:3) 960x720,4:3 \u2264 1500Kbps LD/\u6807\u6e05 540p(16:9) 960x540,16:9 \u2264 800Kbps LD/\u6807\u6e05 480p(16:9) 854x480,16:9 \u2264 800Kbps SD/\u6d41\u7545 480p(4:3) 640x480,4:3 \u2264 500Kbps SD/\u6d41\u7545 360p(16:9) 640x360,16:9 \u2264 500Kbps SD/\u6d41\u7545 240p(4:3) 320x240,4:3 \u2264 300Kbps \u89c6\u9891\u8f6c\u7801 \u00b6 \u53c2\u6570 \u7c7b\u578b \u5fc5\u9009 \u8bf4\u660e type string \u662f \u56fa\u5b9a\u503c\uff0c video \uff0c\u8868\u793a\u6807\u51c6\u8f6c\u7801 avopts string \u662f \u89c6\u9891\u8f6c\u7801\u53c2\u6570\uff0c\u683c\u5f0f\u4e3a /key1/value1/key2/value2/... \uff0c\u53c2\u6570\u89c1\u300c\u53c2\u6570\u300d save_as string \u5426 \u8f93\u51fa\u6587\u4ef6\u4fdd\u5b58\u8def\u5f84\uff0c\u9ed8\u8ba4\u4f7f\u7528\u539f\u59cb\u89c6\u9891\u6240\u5728\u76ee\u5f55+\u7cfb\u7edf\u968f\u673a\u751f\u6210\u7684\u6587\u4ef6\u540d+\u539f\u59cb\u89c6\u9891\u540e\u7f00 return_info boolean \u5426 \u56de\u8c03\u4fe1\u606f\u662f\u5426\u5305\u542b\u8f93\u51fa\u6587\u4ef6\u7684\u5143\u6570\u636e\uff0c\u5143\u6570\u636e\u683c\u5f0f\u4e3a JSON\uff0c\u9ed8\u8ba4 false ** \u6ce8 ** save_as \u7684\u540e\u7f00\u540d\u9ed8\u8ba4\u5f53\u4f5c\u8f93\u51fa\u5c01\u88c5\u683c\u5f0f\u3002\u683c\u5f0f\u9664\u89c6\u9891\u683c\u5f0f\u5916\uff0c\u8fd8\u652f\u6301 GIF/WebP\uff0c\u53ef\u4ee5\u5b9e\u73b0\u628a\u89c6\u9891\u8f6c\u7801\u6210\u52a8\u6001 GIF/\u52a8\u6001 WebP\u3002 \u5e38\u7528\u53c2\u6570 \u00b6 \u53c2\u6570 \u7c7b\u578b \u5fc5\u9009 \u8bf4\u660e /vb/<bitrate> integer \u5426 \u89c6\u9891\u6bd4\u7279\u7387\uff0c\u5355\u4f4d kbps\uff0c\u9ed8\u8ba4\u6309\u7167\u89c6\u9891\u539f\u59cb\u6bd4\u7279\u7387\u5904\u7406 /s/<scale> string \u5426 \u89c6\u9891\u5206\u8fa8\u7387\uff0c\u9ed8\u8ba4\u6309\u7167\u539f\u59cb\u5206\u8fa8\u7387\u5904\u7406\u3002\u89c1\u300c\u6ce8\u300d /as/<auto_scale> boolean \u5426 \u662f\u5426\u6839\u636e\u5206\u8fa8\u7387\u81ea\u52a8\u8c03\u6574\u89c6\u9891\u7684\u6bd4\u4f8b\uff0c\u9ed8\u8ba4 false \u3002\u4ec5\u5f53\u4f20\u9012\u4e86 s \u53c2\u6570\u65f6\u6709\u6548 /r/<frame_rate> integer \u5426 \u89c6\u9891\u5e27\u7387\uff0c\u9ed8\u8ba4\u6309\u7167\u539f\u59cb\u5e27\u7387\u5904\u7406\u3002\u63a8\u8350\u503c\uff1a 25 \u3001 30 /sp/<rotate> string \u5426 \u65cb\u8f6c\u89d2\u5ea6\uff0c\u9ed8\u8ba4\u6309\u7167\u539f\u59cb\u89c6\u9891\u89d2\u5ea6\u5904\u7406\u3002\u53ef\u9009\u503c\uff1a auto\uff08\u81ea\u52a8\u6276\u6b63\uff09 \u3001 90 \u3001 180 \u3001 270 /sm/<map_metadata> boolean \u5426 \u662f\u5426\u4fdd\u7559\u89c6\u9891\u5143\u6570\u636e\uff0c\u9ed8\u8ba4 true /acodec/<audio_codec> string \u5426 \u8bbe\u7f6e\u97f3\u9891\u7f16\u7801\u5668\uff0c\u9ed8\u8ba4\u6309\u7167\u97f3\u9891\u539f\u59cb\u7f16\u7801\u5668\u5904\u7406\u3002\u53ef\u9009\u503c\uff1a libmp3lame \u3001 libfdk_aac \u3001 copy /vcodec/<video_codec> string \u5426 \u8bbe\u7f6e\u89c6\u9891\u7f16\u7801\u5668\uff0c\u9ed8\u8ba4\u6309\u7167\u89c6\u9891\u539f\u59cb\u7f16\u7801\u5668\u5904\u7406\u3002\u53ef\u9009\u503c\uff1a libx264 \u3001 libtheora \u3001 libx265 \u3001 libvpx-vp9 \u3001 libvpx \u3001 copy /an/<disable_audio> boolean \u5426 \u662f\u5426\u7981\u6389\u97f3\u9891\uff0c\u9ed8\u8ba4 false /vn/<disable_video> boolean \u5426 \u662f\u5426\u7981\u6389\u89c6\u9891\uff0c\u9ed8\u8ba4 false /su/<accelerate_factor> float \u5426 \u89c6\u9891\u52a0\u901f\u500d\u6570\uff0c\u9ed8\u8ba4 1.0 \u3002\u53d6\u503c\u8303\u56f4 [1.0\uff0c10.0] /ar/<audio_sample_rate> integer \u5426 \u97f3\u9891\u91c7\u6837\u7387\uff0c\u5355\u4f4d Hz\uff0c\u9ed8\u8ba4\u6309\u7167\u539f\u59cb\u91c7\u6837\u7387\u5904\u7406\u3002\u53ef\u9009\u503c\uff1a 44100 \u3001 48000 \u3001 32000 \u3001 22050 \u3001 24000 \u3001 16000 \u3001 0 /ac/<audio_channel> float \u5426 \u97f3\u9891\u58f0\u9053\u6570\uff0c\u9ed8\u8ba4\u6309\u7167\u539f\u59cb\u58f0\u9053\u6570\u5904\u7406\u3002\u5e38\u7528\u503c\uff1a 1 \u8868\u793a\u5355\u58f0\u9053(mono)\uff0c 2 \u8868\u793a\u7acb\u4f53\u58f0(stereo)\uff0c 5.1 \uff0c 7.1 \u7b49 /sar/<sar> string \u5426 \u91c7\u6837\u957f\u5bbd\u6bd4 \uff0c\u683c\u5f0f w:h \uff0c\u5e38\u7528\u503c 1:1 \uff0c 4:3 \u6216 16:9 /dar/<dar> string \u5426 \u663e\u793a\u957f\u5bbd\u6bd4 \uff0c\u683c\u5f0f w:h \uff0c\u5e38\u7528\u503c 1:1 \uff0c 4:3 \u6216 16:9 /pv/<pv> string \u5426 H264 Profile\uff0c\u5e38\u7528\u503c baseline \uff0c main \uff0c high \u7b49 /level/<level> float \u5426 H264 Level\uff0c\u5e38\u7528\u503c 3.0 \uff0c 3.1 \uff0c 4.0 \uff0c 4.1 \uff0c 4.2 \u7b49 /f/<format> string \u5426 \u89c6\u9891\u683c\u5f0f\u3002\u5f53\u8f93\u51fa\u6587\u4ef6\u6ca1\u6709\u540e\u7f00\u65f6\uff0c\u9700\u8981\u6307\u5b9a\uff0c\u5176\u4f59\u65f6\u5019\u6839\u636e\u8f93\u51fa\u6587\u4ef6\u540e\u7f00\u540d\u81ea\u52a8\u5224\u5b9a ** \u6ce8 ** s \u53c2\u6570\u6709\u4e24\u79cd\u8bbe\u7f6e\u65b9\u6cd5\uff1a1\uff09\u4f7f\u7528 \u9884\u7f6e\u6a21\u677f \uff0c\u503c\u662f\u9884\u7f6e\u6a21\u677f\u7684 \u6a21\u677f\u540d \uff0c\u5982 720p(16:9) \uff1b2\uff09\u81ea\u5b9a\u4e49\uff0c\u503c\u662f \u5bbdx\u9ad8 \uff0c\u5982 1280x720 \u3002 \u5207\u7247\u53c2\u6570 \u00b6 \u53c2\u6570 \u7c7b\u578b \u5fc5\u9009 \u8bf4\u660e /ht/<hls_time> string \u5426 \u6bcf\u7247\u65f6\u957f\uff0c\u5355\u4f4d s\uff08\u79d2\uff09\uff0c\u9ed8\u8ba4 10 ** \u6ce8 ** \u4f7f\u7528 ht \u53c2\u6570\u65f6\uff0c save_as \u53c2\u6570\u5fc5\u987b\u4ee5 .m3u8 \u540e\u7f00\u7ed3\u5c3e\u3002 \u6c34\u5370\u53c2\u6570 \u00b6 \u53c2\u6570 \u7c7b\u578b \u5fc5\u9009 \u8bf4\u660e /wmImg/<watermark_img> string \u662f \u6c34\u5370\u56fe\u7247\u76f8\u5bf9\u8def\u5f84\uff0c\u9700\u8981\u5b89\u5168\u7684 Base64 \u7f16\u7801\u3002\u56fe\u7247\u683c\u5f0f\u652f\u6301 png \u548c webp /wmGravity/<wmGravity> string \u5426 \u6c34\u5370\u56fe\u7247\u653e\u7f6e\u65b9\u4f4d\uff0c\u9ed8\u8ba4 northeast \u3002\u89c1\u300c\u6ce8\u300d /wmDx/<watermark_dx> integer \u5426 \u6c34\u5370\u56fe\u7247\u6a2a\u504f\u79fb\u91cf\uff0c\u5355\u4f4d px\uff0c\u5f53 wmGravity \u4e3a northeast \u65f6\uff0c\u9ed8\u8ba4 -20 \u6a2a\u504f\u79fb\u91cf\u53d6\u503c\u6b63\u8d1f\u7684\u4f9d\u636e\uff1a\u5f80 east \u65b9\u5411\u504f\u79fb\uff0c\u4e3a\u6b63\uff1b\u5f80 west \u65b9\u5411\u504f\u79fb\uff0c\u4e3a\u8d1f /wmDy/<watermark_dy> integer \u5426 \u6c34\u5370\u56fe\u7247\u7eb5\u504f\u79fb\u91cf\uff0c\u5355\u4f4d px\uff0c\u5f53 wmGravity \u4e3a northeast \u65f6\uff0c\u9ed8\u8ba4 15 \u7eb5\u504f\u79fb\u91cf\u53d6\u503c\u6b63\u8d1f\u7684\u4f9d\u636e\uff1a\u5f80 south \u65b9\u5411\u504f\u79fb\uff0c\u4e3a\u6b63\uff1b\u5f80 north \u65b9\u5411\u504f\u79fb\uff0c\u4e3a\u8d1f ** \u6ce8 ** 9 \u4e2a\u65b9\u4f4d\uff1a northwest | north | northeast | | | | --------------+----------------+-------------- | | west | center | east | | --------------+----------------+-------------- | | | | southwest | south | southeast \u526a\u8f91\u53c2\u6570 \u00b6 \u53c2\u6570 \u7c7b\u578b \u5fc5\u9009 \u8bf4\u660e /ss/<start_time> string \u5426 \u526a\u8f91\u5f00\u59cb\u65f6\u95f4\uff0c\u683c\u5f0f\u4e3a HH:MM:SS \uff0c\u9ed8\u8ba4\u89c6\u9891\u5f00\u59cb\u65f6\u95f4 /es/<end_time> string \u5426 \u526a\u8f91\u7ed3\u675f\u65f6\u95f4\uff0c\u683c\u5f0f\u4e3a HH:MM:SS \uff0c\u9ed8\u8ba4\u89c6\u9891\u7ed3\u675f\u65f6\u95f4 \u52a8\u56fe\u53c2\u6570 \u00b6 \u628a save_as \u7684\u540e\u7f00\u540d\u6307\u5b9a\u4e3a gif \u6216 webp \uff0c\u5b9e\u73b0\u89c6\u9891\u8f6c\u7801\u6210\u52a8\u6001\u56fe\u7247\u3002 \u53c2\u6570 \u7c7b\u578b \u5fc5\u9009 \u8bf4\u660e /cr/<concat_reverse> boolean \u5426 \u5411\u89c6\u9891\u7ed3\u5c3e\u5904\u6dfb\u52a0\u5012\u5e8f\u7684\u5185\u5bb9\u3002\u529f\u80fd\u6548\u679c\u662f\uff0c\u6b63\u5e8f\u5185\u5bb9+\u5012\u5e8f\u5185\u5bb9 \u62fc\u63a5\u53c2\u6570 \u00b6 \u62fc\u63a5\u7684\u89c6\u9891\u5206\u8fa8\u7387\u9700\u8981\u4fdd\u6301\u4e00\u81f4\uff0c\u62fc\u63a5\u53c2\u6570\u4e0d\u80fd\u4e0e\u5176\u4ed6\u53c2\u6570\u6df7\u7528\u3002\u5982\u679c\u8981\u6df7\u7528\uff0c\u8bf7\u5206\u505a\u4e24\u4e2a\u4efb\u52a1\uff0c\u4f7f\u7528 \u94fe\u5f0f\u5904\u7406 \u3002 \u53c2\u6570 \u7c7b\u578b \u5fc5\u9009 \u8bf4\u660e /i/<video> string \u5426 \u9700\u8981 \u540e\u7f6e \u62fc\u63a5\u89c6\u9891\u6587\u4ef6\u7684\u76f8\u5bf9\u8def\u5f84\uff0c\u9700\u8981\u5b89\u5168\u7684 Base64 \u7f16\u7801 \u591a\u4e2a\u9700\u8981\u62fc\u63a5\u89c6\u9891\u6309 /i/<video>/i/<video>/... \u65b9\u5f0f\u8fdb\u884c\u8fde\u63a5\u3002\u89c1\u300c\u6ce8\u300d /h/<video> string \u5426 \u9700\u8981 \u524d\u7f6e \u62fc\u63a5\u89c6\u9891\u6587\u4ef6\u7684\u76f8\u5bf9\u8def\u5f84\uff0c\u9700\u8981\u5b89\u5168\u7684 Base64 \u7f16\u7801 \u591a\u4e2a\u9700\u8981\u62fc\u63a5\u89c6\u9891\u6309 /h/<video>/h/<video>/... \u65b9\u5f0f\u8fdb\u884c\u8fde\u63a5\u3002\u89c1\u300c\u6ce8\u300d /codec/<codec> string \u5426 \u8bbe\u7f6e\u89c6\u9891\u7f16\u7801\u5668\uff0c\u9ed8\u8ba4\u4e0d\u9700\u8981\u8bbe\u7f6e\u3002\u53ef\u9009\u503c\uff1a copy \u3002\u89c1\u300c\u6ce8\u300d ** \u6ce8 ** \u89c6\u9891\u62fc\u63a5\u987a\u5e8f\uff1a\u5f85\u62fc\u63a5\u89c6\u9891\u6309 h \u51fa\u73b0\u987a\u5e8f\uff0c\u4f9d\u6b21\u62fc\u63a5\u5728 \u539f\u59cb\u89c6\u9891\uff08 source \uff09 \u524d\u9762\uff1b\u5f85\u62fc\u63a5\u89c6\u9891\u6309 i \u51fa\u73b0\u987a\u5e8f\uff0c\u4f9d\u6b21\u62fc\u63a5\u5728 \u539f\u59cb\u89c6\u9891\uff08 source \uff09 \u540e\u9762\u3002 \u5982\u679c save_as \u53c2\u6570\u6307\u5b9a\u683c\u5f0f\u8ddf \u539f\u59cb\u89c6\u9891\uff08 source \uff09 \u683c\u5f0f\u3001\u62fc\u63a5\u89c6\u9891\u683c\u5f0f\u4e0d\u4e00\u81f4\uff0c\u7cfb\u7edf\u4f1a \u81ea\u52a8\u8f6c\u7801 \u539f\u59cb\u89c6\u9891\u3001\u62fc\u63a5\u89c6\u9891\u6210 save_as \u53c2\u6570\u6307\u5b9a\u683c\u5f0f\uff1b\u5982\u679c save_as \u53c2\u6570\u672a\u6307\u5b9a\uff0c\u62fc\u63a5\u89c6\u9891\u8ddf\u539f\u59cb\u89c6\u9891\u683c\u5f0f\u4e0d\u4e00\u81f4\uff0c\u7cfb\u7edf\u4f1a\u81ea\u52a8\u8f6c\u7801\u62fc\u63a5\u89c6\u9891\u6210\u539f\u59cb\u89c6\u9891\u683c\u5f0f\u3002 \u5982\u679c\u62fc\u63a5\u89c6\u9891\u548c\u539f\u59cb\u89c6\u9891\u7684\u7f16\u7801\u4e00\u81f4\uff0c\u53ef\u4ee5\u8bbe\u7f6e codec \u53c2\u6570\u4e3a copy \uff0c\u4e0d\u5bf9\u62fc\u63a5\u89c6\u9891\u8fdb\u884c\u7f16\u89e3\u7801\uff0c\u63d0\u9ad8\u62fc\u63a5\u901f\u5ea6\u3002 \u7a84\u5e26\u9ad8\u6e05 \u00b6 \u901a\u8fc7\u5bf9\u89c6\u9891\u7684\u7f16\u7801\u8fdb\u884c\u4f18\u5316\uff0c\u5e73\u5747\u964d\u4f4e\u89c6\u9891\u5927\u5c0f 30%\u3002\u7279\u522b\u5730\uff0c\u6682\u65f6\u53ea\u652f\u6301 H.264 \u7f16\u7801\u3002 \u53c2\u6570 \u7c7b\u578b \u5fc5\u9009 \u8bf4\u660e type string \u662f \u56fa\u5b9a\u503c\uff0c nbhd \uff0c\u8868\u793a\u7a84\u5e26\u9ad8\u6e05 avopts string \u662f \u89c6\u9891\u8f6c\u7801\u53c2\u6570\uff0c\u683c\u5f0f\u4e3a /key1/value1/key2/value2/... \uff0c\u53c2\u6570\u89c1\u300c\u53c2\u6570\u300d return_info boolean \u5426 \u56de\u8c03\u4fe1\u606f\u662f\u5426\u5305\u542b\u8f93\u51fa\u6587\u4ef6\u7684\u5143\u6570\u636e\uff0c\u5143\u6570\u636e\u683c\u5f0f\u4e3a JSON\uff0c\u9ed8\u8ba4 false save_as string \u5426 \u8f93\u51fa\u6587\u4ef6\u4fdd\u5b58\u8def\u5f84\uff0c\u9ed8\u8ba4\u539f\u59cb\u89c6\u9891\u6240\u5728\u76ee\u5f55+\u7cfb\u7edf\u968f\u673a\u751f\u6210\u7684\u6587\u4ef6\u540d \u5e38\u7528\u53c2\u6570 \u00b6 \u53c2\u6570 \u7c7b\u578b \u5fc5\u9009 \u8bf4\u660e /ct/<codec_type> string \u5426 \u89c6\u9891\u7f16\u7801\u5668\u9009\u62e9\uff0c\u9ed8\u8ba4 h264 \uff0c\u53ef\u9009\u503c\u53ea\u80fd\u662f h264 \u6216\u8005 h265 \u3002 /scene/<scene> string \u5426 \u89c6\u9891\u5185\u5bb9\u573a\u666f\uff0c\u9ed8\u8ba4 auto \uff0c\u670d\u52a1\u6839\u636e\u89c6\u9891\u5185\u5bb9\u667a\u80fd\u9009\u62e9\u3002\u573a\u666f\u53c2\u6570\u89c1\u300c\u6ce8\u300d /s/<scale> string \u5426 \u89c6\u9891\u5206\u8fa8\u7387\uff0c\u9ed8\u8ba4\u6309\u7167\u539f\u59cb\u5206\u8fa8\u7387\u5904\u7406\u3002\u89c1\u300c\u6ce8\u300d /as/<auto_scale> boolean \u5426 \u662f\u5426\u6839\u636e\u5206\u8fa8\u7387\u81ea\u52a8\u8c03\u6574\u89c6\u9891\u7684\u6bd4\u4f8b\uff0c\u9ed8\u8ba4 false \u3002\u4ec5\u5f53\u4f20\u9012\u4e86 s \u53c2\u6570\u65f6\u6709\u6548 /r/<frame_rate> integer \u5426 \u89c6\u9891\u5e27\u7387\uff0c\u9ed8\u8ba4\u6309\u7167\u539f\u59cb\u5e27\u7387\u5904\u7406\u3002\u63a8\u8350\u503c\uff1a 25 \u3001 30 /sp/<rotate> string \u5426 \u65cb\u8f6c\u89d2\u5ea6\uff0c\u9ed8\u8ba4\u6309\u7167\u539f\u59cb\u89c6\u9891\u89d2\u5ea6\u5904\u7406\u3002\u53ef\u9009\u503c\uff1a auto\uff08\u81ea\u52a8\u6276\u6b63\uff09 \u3001 90 \u3001 180 \u3001 270 /sm/<map_metadata> boolean \u5426 \u662f\u5426\u4fdd\u7559\u89c6\u9891\u5143\u6570\u636e\uff0c\u9ed8\u8ba4 true /su/<accelerate_factor> float \u5426 \u89c6\u9891\u52a0\u901f\u500d\u6570\uff0c\u9ed8\u8ba4 1.0 \u3002\u53d6\u503c\u8303\u56f4 [1.0\uff0c10.0] /ar/<audio_sample_rate> integer \u5426 \u97f3\u9891\u91c7\u6837\u7387\uff0c\u5355\u4f4d Hz\uff0c\u9ed8\u8ba4\u6309\u7167\u539f\u59cb\u91c7\u6837\u7387\u5904\u7406\u3002\u53ef\u9009\u503c\uff1a 44100 \u3001 48000 \u3001 32000 \u3001 22050 \u3001 24000 \u3001 16000 \u3001 0 /f/<format> string \u5426 \u89c6\u9891\u683c\u5f0f\u3002\u5f53\u8f93\u51fa\u6587\u4ef6\u6ca1\u6709\u540e\u7f00\u65f6\uff0c\u9700\u8981\u6307\u5b9a\uff0c\u5176\u4f59\u65f6\u5019\u6839\u636e\u8f93\u51fa\u6587\u4ef6\u540e\u7f00\u540d\u81ea\u52a8\u5224\u5b9a ** \u6ce8 ** scene \u53ef\u9009\u53c2\u6570\uff1a auto \uff0c\u8868\u793a\u667a\u80fd\u9009\u62e9\uff1b self_portrait \uff0c\u8868\u793a\u81ea\u62cd\uff1b animation \uff0c\u8868\u793a\u52a8\u753b\uff1b film_calm \uff0c\u8868\u793a\u7535\u89c6\u5267\uff0c\u5305\u62ec\u7efc\u827a\u3001\u8bbf\u8c08\u3001\u5728\u7ebf\u6559\u80b2\u7b49\uff1b film_dramatic \uff0c\u8868\u793a\u7535\u5f71\u3002\u6ce8\u610f\uff1a scene \u53ea\u80fd\u662f h264 \u4e0b\u7684\u9009\u9879\uff0c h265 \u65e0\u9700\u4f7f\u7528 scene \u53c2\u6570\u3002 s \u53c2\u6570\u6709\u4e24\u79cd\u8bbe\u7f6e\u65b9\u6cd5\uff1a1\uff09\u4f7f\u7528 \u9884\u7f6e\u6a21\u677f \uff0c\u503c\u662f\u9884\u7f6e\u6a21\u677f\u7684 \u6a21\u677f\u540d \uff0c\u5982 720p(16:9) \uff1b2\uff09\u81ea\u5b9a\u4e49\uff0c\u503c\u662f \u5bbdx\u9ad8 \uff0c\u5982 1280x720 \u3002 vb \u53c2\u6570\u5728\u7a84\u5e26\u9ad8\u6e05\u8f6c\u7801\u4e2d\u7981\u6b62\u4f7f\u7528\u3002 \u5207\u7247\u53c2\u6570 \u00b6 \u53c2\u6570 \u7c7b\u578b \u5fc5\u9009 \u8bf4\u660e /ht/<hls_time> string \u5426 \u6bcf\u7247\u65f6\u957f\uff0c\u5355\u4f4d s\uff08\u79d2\uff09\uff0c\u9ed8\u8ba4 10 ** \u6ce8 ** \u4f7f\u7528 ht \u53c2\u6570\u65f6\uff0c save_as \u53c2\u6570\u5fc5\u987b\u4ee5 .m3u8 \u540e\u7f00\u7ed3\u5c3e\u3002 \u6c34\u5370\u53c2\u6570 \u00b6 \u53c2\u6570 \u7c7b\u578b \u5fc5\u9009 \u8bf4\u660e /wmImg/<watermark_img> string \u662f \u6c34\u5370\u56fe\u7247\u76f8\u5bf9\u8def\u5f84\uff0c\u9700\u8981\u5b89\u5168\u7684 Base64 \u7f16\u7801\u3002\u56fe\u7247\u683c\u5f0f\u652f\u6301 png \u548c webp /wmGravity/<wmGravity> string \u5426 \u6c34\u5370\u56fe\u7247\u653e\u7f6e\u65b9\u4f4d\uff0c\u9ed8\u8ba4 northeast \u3002\u89c1\u300c\u6ce8\u300d /wmDx/<watermark_dx> integer \u5426 \u6c34\u5370\u56fe\u7247\u6a2a\u504f\u79fb\u91cf\uff0c\u5355\u4f4d px\uff0c\u5f53 wmGravity \u4e3a northeast \u65f6\uff0c\u9ed8\u8ba4 -20 \u6a2a\u504f\u79fb\u91cf\u53d6\u503c\u6b63\u8d1f\u7684\u4f9d\u636e\uff1a\u5f80 east \u65b9\u5411\u504f\u79fb\uff0c\u4e3a\u6b63\uff1b\u5f80 west \u65b9\u5411\u504f\u79fb\uff0c\u4e3a\u8d1f /wmDy/<watermark_dy> integer \u5426 \u6c34\u5370\u56fe\u7247\u7eb5\u504f\u79fb\u91cf\uff0c\u5355\u4f4d px\uff0c\u5f53 wmGravity \u4e3a northeast \u65f6\uff0c\u9ed8\u8ba4 15 \u7eb5\u504f\u79fb\u91cf\u53d6\u503c\u6b63\u8d1f\u7684\u4f9d\u636e\uff1a\u5f80 south \u65b9\u5411\u504f\u79fb\uff0c\u4e3a\u6b63\uff1b\u5f80 north \u65b9\u5411\u504f\u79fb\uff0c\u4e3a\u8d1f ** \u6ce8 ** 9 \u4e2a\u65b9\u4f4d\uff1a northwest | north | northeast | | | | --------------+----------------+-------------- | | west | center | east | | --------------+----------------+-------------- | | | | southwest | south | southeast \u526a\u8f91\u53c2\u6570 \u00b6 \u53c2\u6570 \u7c7b\u578b \u5fc5\u9009 \u8bf4\u660e /ss/<start_time> string \u5426 \u526a\u8f91\u5f00\u59cb\u65f6\u95f4\uff0c\u683c\u5f0f\u4e3a HH:MM:SS \uff0c\u9ed8\u8ba4\u89c6\u9891\u5f00\u59cb\u65f6\u95f4 /es/<end_time> string \u5426 \u526a\u8f91\u7ed3\u675f\u65f6\u95f4\uff0c\u683c\u5f0f\u4e3a HH:MM:SS \uff0c\u9ed8\u8ba4\u89c6\u9891\u7ed3\u675f\u65f6\u95f4 \u89c6\u9891\u622a\u56fe \u00b6 \u53c2\u6570 \u7c7b\u578b \u5fc5\u9009 \u8bf4\u660e type string \u662f \u56fa\u5b9a\u503c\uff0c thumbnail avopts string \u662f \u89c6\u9891\u8f6c\u7801\u53c2\u6570\uff0c\u683c\u5f0f\u4e3a /key1/value1/key2/value2/... \uff0c\u53c2\u6570\u89c1\u300c\u622a\u56fe\u53c2\u6570\u300d return_info boolean \u5426 \u56de\u8c03\u4fe1\u606f\u662f\u5426\u5305\u542b\u8f93\u51fa\u6587\u4ef6\u7684\u5143\u6570\u636e\uff0c\u5143\u6570\u636e\u683c\u5f0f\u4e3a JSON\uff0c\u9ed8\u8ba4 false save_as string \u5426 \u8f93\u51fa\u6587\u4ef6\u4fdd\u5b58\u8def\u5f84\uff0c\u9ed8\u8ba4\u539f\u59cb\u89c6\u9891\u6240\u5728\u76ee\u5f55+\u7cfb\u7edf\u968f\u673a\u751f\u6210\u7684\u6587\u4ef6\u540d\u3002\u89c1\u300c\u6ce8\u300d ** \u622a\u56fe\u53c2\u6570 ** \u53c2\u6570 \u7c7b\u578b \u5fc5\u9009 \u8bf4\u660e /o/<thumb_single> boolean \u662f \u662f\u5426\u5355\u5f20\u622a\u56fe\uff0c\u5355\u5f20\u622a\u56fe\u4e3a true \uff0c\u591a\u5f20\u622a\u56fe\u4e3a false /n/<thumb_amount> integer \u662f \u622a\u56fe\u6570\u91cf\u3002\u5f53 o \u53c2\u6570\u4e3a false \u65f6\uff0c\u6709\u6548\uff1b\u5f53 o \u53c2\u6570\u4e3a true \u65f6\uff0c\u65e0\u6548 /ss/<thumb_start> string \u5426 \u622a\u56fe\u5f00\u59cb\u65f6\u95f4\uff0c\u683c\u5f0f\u4e3a HH:MM:SS \uff0c\u9ed8\u8ba4 00:00:00 /es/<thumb_end> string \u5426 \u622a\u56fe\u7ed3\u675f\u65f6\u95f4\uff0c\u683c\u5f0f\u4e3a HH:MM:SS \uff0c\u9ed8\u8ba4\u89c6\u9891\u7ed3\u675f\u65f6\u95f4\u3002\u5f53 o \u53c2\u6570\u4e3a true \u65f6\uff0c\u65e0\u6548 /s/<thumb_scale> string \u5426 \u622a\u56fe\u5c3a\u5bf8\uff0c\u683c\u5f0f\u4e3a \u5bbd:\u9ad8 \uff0c\u9ed8\u8ba4\u89c6\u9891\u539f\u59cb\u5c3a\u5bf8 /f/<thumb_format> string \u5426 \u622a\u56fe\u8f93\u51fa\u683c\u5f0f\uff0c\u9ed8\u8ba4 jpg \u3002\u56fe\u7247\u683c\u5f0f\u652f\u6301 png \u548c jpg \u3002\u89c1\u300c\u6ce8\u300d ** \u6ce8 ** \u591a\u5f20\u622a\u56fe\u65f6\uff0c\u81ea\u5b9a\u4e49 save_as \u53c2\u6570\u65f6\u53ea\u9700\u6307\u5b9a\u4e00\u4e2a\u4fdd\u5b58\u8def\u5f84\uff0c\u5177\u4f53\u6bcf\u5f20\u56fe\u7247\u4fdd\u5b58\u8def\u5f84\u6839\u636e\u89c4\u5219\u8fdb\u884c\u7c7b\u63a8\uff0c\u4f8b\u5982 save_as \u4e3a /path/to/img.png \uff0c\u8f93\u51fa\u6587\u4ef6\u4fdd\u5b58\u8def\u5f84\u7b2c\u4e00\u5f20\u4e3a /path/to/img1.png \uff0c\u7b2c\u4e8c\u5f20\u4e3a /path/to/img2.png ......\u4ee5\u6b64\u7c7b\u63a8\u3002 \u81ea\u5b9a\u4e49 f \u548c save_as \u53c2\u6570\u65f6\uff0c\u4f7f\u7528 f \u53c2\u6570\u6307\u5b9a\u7684\u683c\u5f0f\u4f5c\u4e3a\u8f93\u51fa\u683c\u5f0f\uff1b\u4ec5\u81ea\u5b9a\u4e49 save_as \u53c2\u6570\u65f6\uff0c\u4f7f\u7528 save_as \u53c2\u6570\u6307\u5b9a\u7684\u540e\u7f00\u540d\u4f5c\u4e3a\u8f93\u51fa\u683c\u5f0f\uff1b\u4e24\u8005\u90fd\u4e0d\u81ea\u5b9a\u4e49\u65f6\uff0c\u4f7f\u7528 f \u53c2\u6570\u7684\u9ed8\u8ba4\u503c jpg \u4f5c\u4e3a\u8f93\u51fa\u683c\u5f0f\u3002 \u652f\u6301 m3u8 \u622a\u56fe\u3002 \u97f3\u9891\u8f6c\u7801 \u00b6 \u53c2\u6570 \u7c7b\u578b \u5fc5\u9009 \u8bf4\u660e type string \u662f \u56fa\u5b9a\u503c\uff0c audio avopts string \u662f \u89c6\u9891\u8f6c\u7801\u53c2\u6570\uff0c\u683c\u5f0f\u4e3a /key1/value1/key2/value2/... \uff0c\u53c2\u6570\u89c1\u300c\u53c2\u6570\u300d return_info boolean \u5426 \u56de\u8c03\u4fe1\u606f\u662f\u5426\u5305\u542b\u8f93\u51fa\u6587\u4ef6\u7684\u5143\u6570\u636e\uff0c\u5143\u6570\u636e\u683c\u5f0f\u4e3a JSON\uff0c\u9ed8\u8ba4 false save_as string \u5426 \u8f93\u51fa\u6587\u4ef6\u4fdd\u5b58\u8def\u5f84\uff0c\u9ed8\u8ba4\u539f\u59cb\u97f3\u9891\u6240\u5728\u76ee\u5f55+\u7cfb\u7edf\u968f\u673a\u751f\u6210\u7684\u6587\u4ef6\u540d ** \u6ce8 ** save_as \u7684\u540e\u7f00\u540d\u4f5c\u4e3a\u8f93\u51fa\u5c01\u88c5\u683c\u5f0f\u3002 \u5e38\u7528\u53c2\u6570 \u00b6 \u53c2\u6570 \u7c7b\u578b \u5fc5\u9009 \u8bf4\u660e /f/<format> string \u5426 \u97f3\u9891\u683c\u5f0f\uff0c\u5f53\u8f93\u51fa\u6587\u4ef6\u6ca1\u6709\u540e\u7f00\u65f6\uff0c\u9700\u8981\u6307\u5b9a\uff0c\u5176\u4f59\u65f6\u5019\u6839\u636e\u8f93\u51fa\u6587\u4ef6\u540e\u7f00\u540d\u81ea\u52a8\u5224\u5b9a /ac/<audio_channel> integer \u5426 \u58f0\u9053\uff0c\u9ed8\u8ba4 2 /ab/<audio_bitrate> integer \u5426 \u6bd4\u7279\u7387\uff0c\u5355\u4f4d kbps\uff0c\u9ed8\u8ba4\u6309\u7167\u97f3\u9891\u539f\u59cb\u6bd4\u7279\u7387\u5904\u7406 /vbr/<audio_vbr> integer \u5426 Variable bitrate, \u9ed8\u8ba4\u6309\u7167\u97f3\u9891\u539f\u59cb VBR \u5904\u7406\u3002\u53d6\u503c\u8303\u56f4 [0-9] /sm/<map_metadata> boolean \u5426 \u662f\u5426\u4fdd\u7559\u97f3\u9891 metadata\uff0c\u9ed8\u8ba4 true \u526a\u8f91\u53c2\u6570 \u00b6 \u62fc\u63a5\u53c2\u6570\u4e0d\u80fd\u4e0e\u5176\u4ed6\u53c2\u6570\u6df7\u7528\uff0c\u8bf7\u6ce8\u610f\u3002\u5982\u679c\u8981\u6df7\u7528\uff0c\u8bf7\u5206\u505a\u4e24\u4e2a\u4efb\u52a1\uff0c\u4f7f\u7528 \u94fe\u5f0f\u5904\u7406 \u3002 \u53c2\u6570 \u7c7b\u578b \u5fc5\u9009 \u8bf4\u660e /ss/<start_time> string \u5426 \u526a\u8f91\u5f00\u59cb\u65f6\u95f4\uff0c\u683c\u5f0f\u4e3a HH:MM:SS \uff0c\u9ed8\u8ba4\u89c6\u9891\u5f00\u59cb\u65f6\u95f4 /es/<end_time> string \u5426 \u526a\u8f91\u7ed3\u675f\u65f6\u95f4\uff0c\u683c\u5f0f\u4e3a HH:MM:SS \uff0c\u9ed8\u8ba4\u89c6\u9891\u7ed3\u675f\u65f6\u95f4 \u62fc\u63a5\u53c2\u6570 \u00b6 \u62fc\u63a5\u53c2\u6570\u4e0d\u80fd\u4e0e\u5176\u4ed6\u53c2\u6570\u6df7\u7528\u3002\u5982\u679c\u8981\u6df7\u7528\uff0c\u8bf7\u5206\u505a\u4e24\u4e2a\u4efb\u52a1\uff0c\u4f7f\u7528 \u94fe\u5f0f\u5904\u7406 \u3002 \u53c2\u6570 \u7c7b\u578b \u5fc5\u9009 \u8bf4\u660e /i/<audio> string \u662f \u9700\u8981\u62fc\u63a5\u97f3\u9891\u6587\u4ef6\u7684\u76f8\u5bf9\u8def\u5f84\uff0c\u9700\u8981\u5b89\u5168\u7684 Base64 \u7f16\u7801 \u591a\u4e2a\u9700\u8981\u62fc\u63a5\u97f3\u9891\u6587\u4ef6\u6309 /i/<audio>/i/<audio>/... \u65b9\u5f0f\u8fdb\u884c\u8fde\u63a5 ** \u6ce8 ** \u97f3\u9891\u62fc\u63a5\u987a\u5e8f\uff1a\u9700\u8981\u62fc\u63a5\u97f3\u9891\u6309 i \u51fa\u73b0\u987a\u5e8f\uff0c\u4f9d\u6b21\u62fc\u63a5\u5728 \u539f\u59cb\u97f3\u9891\uff08 source \uff09 \u540e\u9762\u3002 \u5982\u679c save_as \u53c2\u6570\u6307\u5b9a\u683c\u5f0f\u8ddf \u539f\u59cb\u97f3\u9891\uff08 source \uff09 \u683c\u5f0f\u3001\u62fc\u63a5\u97f3\u9891\u683c\u5f0f\u4e0d\u4e00\u81f4\uff0c\u7cfb\u7edf\u4f1a \u81ea\u52a8\u8f6c\u7801 \u539f\u59cb\u97f3\u9891\u3001\u62fc\u63a5\u97f3\u9891\u6210 save_as \u53c2\u6570\u6307\u5b9a\u683c\u5f0f\uff1b\u5982\u679c save_as \u53c2\u6570\u672a\u6307\u5b9a\uff0c\u62fc\u63a5\u97f3\u9891\u8ddf\u539f\u59cb\u97f3\u9891\u683c\u5f0f\u4e0d\u4e00\u81f4\uff0c\u7cfb\u7edf\u4f1a\u81ea\u52a8\u8f6c\u7801\u62fc\u63a5\u97f3\u9891\u6210\u539f\u59cb\u97f3\u9891\u683c\u5f0f\u3002 \u5143\u6570\u636e\u83b7\u53d6 \u00b6 \u83b7\u53d6\u97f3/\u89c6\u9891\u6587\u4ef6\u7684\u5143\u4fe1\u606f\u3002 \u53c2\u6570 \u7c7b\u578b \u5fc5\u9009 \u8bf4\u660e type string \u662f \u56fa\u5b9a\u503c\uff0c probe \u94fe\u5f0f\u5904\u7406 \u00b6 \u591a\u4e2a\u4efb\u52a1\u6309\u63d0\u4ea4\u4efb\u52a1\u53c2\u6570\u7684\u5148\u540e\u987a\u5e8f\uff0c\u5bf9\u539f\u6587\u4ef6\u8fdb\u884c\u94fe\u5f0f\u5904\u7406\u3002 \u53c2\u6570 \u7c7b\u578b \u5fc5\u9009 \u8bf4\u660e type string \u662f \u56fa\u5b9a\u503c\uff0c chain avopts string \u662f \u94fe\u5f0f\u5904\u7406\u53c2\u6570\uff0c\u683c\u5f0f\u4e3a /type1/key1/value1/type2/key2/value2... \uff0c\u53c2\u6570\u89c1\u300c\u53c2\u6570\u300d return_info boolean \u5426 \u56de\u8c03\u4fe1\u606f\u662f\u5426\u5305\u542b\u8f93\u51fa\u6587\u4ef6\u7684\u5143\u6570\u636e\uff0c\u5143\u6570\u636e\u683c\u5f0f\u4e3a JSON\uff0c\u9ed8\u8ba4 false save_as string \u5426 \u8f93\u51fa\u6587\u4ef6\u4fdd\u5b58\u8def\u5f84\uff0c\u9ed8\u8ba4\u539f\u59cb\u97f3\u9891\u6240\u5728\u76ee\u5f55+\u7cfb\u7edf\u968f\u673a\u751f\u6210\u7684\u6587\u4ef6\u540d ** \u94fe\u5f0f\u5904\u7406\u53c2\u6570 ** \u53c2\u6570 \u7c7b\u578b \u5fc5\u9009 \u8bf4\u660e /<type>/<avopts> string \u662f \u591a\u4e2a\u529f\u80fd\u6807\u8bc6 type \u4ee5\u53ca\u5176\u5bf9\u5e94\u7684\u5904\u7406\u53c2\u6570 avopts ** \u8bf7\u6c42\u6837\u4f8b ** { \"type\": \"chain\", \"avopts\": \"/video/i/Zm9vLm1wNA==/video/s/480p(16:9)/wmImg/L3Rlc3QvbG9nby5wbmc=\", \"save_as\": \"/foo.jpg\" } \u4e0a\u8ff0\u4efb\u52a1\u5148\u89e3\u6790 /video/i/Zm9vLm1wNA== \u90e8\u5206\uff0c\u548c\u6e90\u89c6\u9891\u8fdb\u884c\u62fc\u63a5\uff1b\u4e4b\u540e\u89e3\u6790 /video/s/480p(16:9)/vb/300/r/25/vcodec/libx264/wmImg/L3Rlc3QvbG9nby5wbmc= \uff0c\u5c06\u4e0a\u4e00\u6b65\u8f93\u51fa\u7684\u89c6\u9891\u7684\u5206\u8fa8\u7387\u8f6c\u7801\u6210 480p(16:9) \u5e76\u540c\u65f6\u52a0\u4e0a\u6c34\u5370\uff1b\u6700\u540e\u8f93\u51fa\u6587\u4ef6\u4fdd\u5b58\u81f3 /foo.mp4 \u3002 ** \u6ce8 ** \u6700\u591a\u5305\u542b 4 \u4e2a\u5b50\u4efb\u52a1\u3002 \u622a\u56fe\u4efb\u52a1\u3001\u89c6\u9891\u5207\u7247\u4efb\u52a1\u4e0d\u4ea7\u751f\u97f3\u89c6\u9891\u8f93\u51fa\u7684\u4efb\u52a1\uff0c\u4ec5\u5141\u8bb8\u653e\u7f6e\u5728\u5b50\u4efb\u52a1\u5217\u8868\u7684\u672b\u5c3e\u3002 \u5982\u6709\u7591\u95ee\u8bf7 \u8054\u7cfb\u6211\u4eec","title":"\u5f02\u6b65\u97f3\u89c6\u9891\u5904\u7406"},{"location":"cloud/av/#_1","text":"\u53c8\u62cd\u4e91\u5904\u7406\uff08\u5f02\u6b65\u97f3\u89c6\u9891\u5904\u7406\uff09\u57fa\u4e8e\u4e91\u5b58\u50a8\u670d\u52a1\uff0c\u60a8\u5728\u4f7f\u7528\u5b83\u4e4b\u524d\uff0c\u8bf7\u786e\u4fdd\u60a8\u5df2\u7ecf\u6ce8\u518c\u53c8\u62cd\u4e91\u8d26\u53f7\u5e76\u5b8c\u6210\u5b9e\u540d\u9a8c\u8bc1\uff0c\u8bf7\u786e\u4fdd\u60a8\u5df2\u7ecf\u521b\u5efa \u4e91\u5b58\u50a8\u670d\u52a1 \u3002 \u6536\u8d39\u65b9\u9762\uff0c\u89c1 \u4ef7\u683c \u3002 \u76f8\u5173\u9605\u8bfb\uff1a \u540c\u6b65\u89c6\u9891\u5904\u7406 \uff0c \u540c\u6b65\u97f3\u9891\u5904\u7406 \u3002","title":"\u5feb\u901f\u5165\u95e8"},{"location":"cloud/av/#_2","text":"","title":"\u5f00\u53d1\u8005\u6307\u5357"},{"location":"cloud/av/#_3","text":"** \u8bf7\u6c42\u65b9\u6cd5 ** \u5bf9\u5df2\u7ecf\u5b58\u5728\u4e91\u5b58\u50a8\u4e2d\u7684\u97f3\u89c6\u9891\u6587\u4ef6\uff0c\u4ee5 POST \u65b9\u6cd5\u5411 http://p0.api.upyun.com/pretreatment/ \u63d0\u4ea4\u5904\u7406\u4efb\u52a1\uff0c\u54cd\u5e94\u4e2d\u8fd4\u56de\u4efb\u52a1 task_id \u3002\u4efb\u52a1\u4ee5\u5f02\u6b65\u7684\u65b9\u5f0f\u5904\u7406\uff0c\u5904\u7406\u5b8c\u6210\u540e\uff0c\u56de\u8c03\u901a\u77e5\u7528\u6237\u5904\u7406\u7ed3\u679c\u3002 curl -X POST \\ http://p0.api.upyun.com/pretreatment/ \\ -H \"Authorization: UPYUN <Operator>:<Signature>\" \\ -H \"Date: <Wed, 29 Oct 2014 02:26:58 GMT>\" \\ -H \"Content-MD5: <Content-MD5>\" \\ -d \"accept=json\" -d \"service=<service>\" \\ -d \"notify_url=<notify_url>\" \\ -d \"source=<\u97f3\u89c6\u9891\u6587\u4ef6\u76f8\u5bf9\u8def\u5f84>\" \\ -d \"tasks=<base64 \u7f16\u7801\u540e\u7684\u4efb\u52a1\u5b57\u7b26\u4e32>\" \\ ** \u8ba4\u8bc1\u9274\u6743 ** Authorization \u8be6\u89c1 \u7b7e\u540d\u8ba4\u8bc1 \u3002 ** \u8bf7\u6c42\u53c2\u6570 ** \u53c2\u6570 \u7c7b\u578b \u5fc5\u9009 \u8bf4\u660e service string \u662f \u97f3/\u89c6\u9891\u6587\u4ef6\u6240\u5728\u7684\u670d\u52a1\u540d notify_url string \u662f \u56de\u8c03\u901a\u77e5\u5730\u5740\uff0c\u8be6\u89c1 \u56de\u8c03\u901a\u77e5 source string \u662f \u539f\u59cb\u97f3/\u89c6\u9891\u6587\u4ef6\u8def\u5f84 tasks string \u662f \u4efb\u52a1\u4fe1\u606f\uff0c\u8be6\u89c1 tasks \u53c2\u6570\u8bf4\u660e accept string \u662f \u56de\u8c03\u4fe1\u606f\u7684\u683c\u5f0f\uff0c\u503c\u4e3a json ** tasks \u53c2\u6570\u8bf4\u660e ** 1. \u6309 JSON \u683c\u5f0f\u7ec4\u88c5\u4efb\u52a1\uff0c\u4e00\u6b21\u8bf7\u6c42 tasks \u6700\u591a\u53ef\u4ee5\u63d0\u4ea4 10 \u4e2a\u4efb\u52a1\u3002 \u4efb\u52a1\u53c2\u6570\u89c1 \u529f\u80fd \u3002 [ { \"type\": \"video\", // \u89c6\u9891\u8f6c\u7801 \"avopts\": \"/s/240p(4:3)/as/1/r/30\", // \u53c2\u6570 \"return_info\": true, // \u8fd4\u56de\u5143\u6570\u636e \"save_as\": \"/a/b.mp4\" // \u4fdd\u5b58\u8def\u5f84 }, { \"type\": \"video\", // \u89c6\u9891\u62fc\u63a5 \"avopts\": \"/i/L2EvYi9jLm1wNA==/i/LzEvMi8zLm1wNA==\", // \u53c2\u6570 \"save_as\": \"/concat/a.mp4\" // \u4fdd\u5b58\u8def\u5f84 }, \u2026 ] 2. \u628a JSON \u5b57\u7b26\u4e32 Base64 \u7f16\u7801\uff0c\u5f97\u5230 tasks \u3002 W3siYXZvcHRzIjoiL3MvMjQwcCg0OjMpL2FzLzEvci8zMCIsInJldHVybl9pbmZvIjp0cnVlLCJzYXZlX2FzIjoiL2EvYi5tcDQiLCJ0eXBlIjoidmlkZW8ifSx7ImF2b3B0cyI6Ii9pL0wyRXZZaTlqTG0xd05BPT0vaS9MekV2TWk4ekxtMXdOQT09Iiwic2F2ZV9hcyI6Ii9jb25jYXQvYS5tcDQiLCJ0eXBlIjoidmNvbmNhdCJ9XQ== ** \u54cd\u5e94\u4fe1\u606f ** \u4efb\u52a1\u63d0\u4ea4\u6210\u529f\uff1a\u8fd4\u56de 200 \uff0c\u54cd\u5e94\u4f53\u662f\u4e00\u7ec4\u6309\u4efb\u52a1\u63d0\u4ea4\u5148\u540e\u987a\u5e8f\u6392\u5e8f\u7684 task_id \u3002\u4f8b\u5982\uff1a [ \"35f0148d414a688a275bf915ba7cebb2\", \"98adbaa52b2f63d6d7f327a0ff223348\", \"c3103189fa906a5354d29bd807e8dc51\", \u2026 ] \u4efb\u52a1\u63d0\u4ea4\u5931\u8d25\uff1a\u8fd4\u56de\u76f8\u5e94\u7684\u51fa\u9519\u4fe1\u606f\uff0c\u5177\u4f53\u8bf7\u53c2\u9605\u300c \u72b6\u6001\u7801\u8868 \u300d\u3002","title":"\u63d0\u4ea4\u5904\u7406\u4efb\u52a1"},{"location":"cloud/av/#_4","text":"\u4efb\u52a1\u5904\u7406\u5b8c\u6210\u540e\uff0c\u5411 notify_url \u53d1\u9001 HTTP POST \u8bf7\u6c42\uff0c\u8bf7\u6c42\u4f53\u662f\u56de\u8c03\u4fe1\u606f\u3002 curl -X POST \\ <notify_url> \\ -H \"Authorization: UPYUN <Operator>:<Signature>\" \\ -H \"Date: <Wed, 29 Oct 2014 02:26:58 GMT>\" \\ -H \"Content-MD5: <Content-MD5>\" \\ -d \"service=<service>\" \\ # \u5176\u4ed6\u53c2\u6570... ** \u56de\u8c03\u4fe1\u606f ** \u56de\u8c03\u4fe1\u606f\u662f JSON \u5b57\u7b26\u4e32\uff0c\u53c2\u6570\u540d\u53ca\u8bf4\u660e\u5982\u4e0b\uff1a \u53c2\u6570 \u7c7b\u578b \u8bf4\u660e service string \u97f3/\u89c6\u9891\u6587\u4ef6\u6240\u5728\u7684\u670d\u52a1\u540d status_code integer \u5904\u7406\u7ed3\u679c\u72b6\u6001\u7801\uff0c 200 \u8868\u793a\u6210\u529f\u5904\u7406\uff0c\u8be6\u89c1 \u72b6\u6001\u7801\u8868 path array \u8f93\u51fa\u6587\u4ef6\u4fdd\u5b58\u8def\u5f84 description string \u5904\u7406\u7ed3\u679c\u63cf\u8ff0 task_id string \u4efb\u52a1\u5bf9\u5e94\u7684 task_id info json \u8f93\u51fa\u6587\u4ef6\u7684\u5143\u6570\u636e\uff0c\u4ec5\u5f53 return_info \u4e3a true \u65f6\uff0c\u6709\u6548 signature\uff08\u65e7\uff09 string \u56de\u8c03\u901a\u77e5\u7684\u7b7e\u540d\uff0c \u56de\u8c03\u7b7e\u540d\uff08\u65e7\uff09 \u7684\u53c2\u6570 timestamp\uff08\u65e7\uff09 integer \u670d\u52a1\u7aef\u53d1\u9001\u56de\u8c03\u65f6\u7684\u65f6\u95f4\u6233\uff0c \u56de\u8c03\u7b7e\u540d\uff08\u65e7\uff09 \u7684\u53c2\u6570 ** \u56de\u8c03\u7b7e\u540d ** Authorization \u8be6\u89c1 \u7b7e\u540d\u8ba4\u8bc1 \uff0c\u5b83\u63d0\u4f9b\u7ed9\u5ba2\u6237\u7aef\uff0c\u7528\u4e8e\u9a8c\u8bc1\u56de\u8c03\u901a\u77e5\u7684\u5408\u6cd5\u6027\u3002","title":"\u56de\u8c03\u901a\u77e5"},{"location":"cloud/av/#_5","text":"\u5728\u4e0a\u4f20\u97f3\u89c6\u9891\u6587\u4ef6\u65f6\uff0c\u5bf9\u4e0a\u4f20\u7684\u97f3\u89c6\u9891\u8fdb\u884c\u5904\u7406\uff0c\u751f\u6210\u4e00\u4e2a\u6216\u591a\u4e2a\u65b0\u7684\u6587\u4ef6\uff0c\u540c\u65f6\u4fdd\u5b58\u4e0a\u4f20\u7684\u97f3\u89c6\u9891\u5230\u53c8\u62cd\u4e91\u5b58\u50a8\u3002\u4efb\u52a1\u4ee5\u5f02\u6b65\u7684\u65b9\u5f0f\u5904\u7406\uff0c\u5904\u7406\u5b8c\u6210\u540e\uff0c\u56de\u8c03\u901a\u77e5\u7528\u6237\u5904\u7406\u7ed3\u679c\u3002 \u652f\u6301\u7684 API\uff1a FORM API \u3002 \u53c2\u6570\u540d\u662f apps \uff0c\u53c2\u6570\u503c\u662f JSON \u6570\u7ec4\u3002\u4e00\u4e2a apps \u6700\u591a\u5141\u8bb8\u5305\u542b 10 \u4e2a\u97f3\u89c6\u9891\u5904\u7406\u4efb\u52a1\u3002 \u4efb\u52a1\u53c2\u6570\u89c1 \u529f\u80fd \u3002 ** \u4e3e\u4f8b ** apps = [ { // \u5f02\u6b65\u97f3\u89c6\u9891\u5904\u7406\u4efb\u52a1 \"name\": \"naga\", // \u5f02\u6b65\u4efb\u52a1\u540d\u79f0\uff0c\u5fc5\u586b\u3002naga \u8868\u793a\u5f02\u6b65\u97f3\u89c6\u9891\u5904\u7406\u670d\u52a1 \"type\": \"<type>\", // \u529f\u80fd\u6807\u8bc6\uff0c\u5fc5\u586b \"avopts\": \"<avopts>\", // \u5904\u7406\u53c2\u6570\uff0c\u5fc5\u586b \"return_info\": true/false, // \u662f\u5426\u8fd4\u56de\u5143\u6570\u636e\uff0c\u9009\u586b \"save_as\": \"<save_as>\", // \u7ed3\u679c\u97f3\u9891/\u89c6\u9891\u4fdd\u5b58\u8def\u5f84\uff0c\u9009\u586b \"notify_url\": \"<notify_url>\" // \u56de\u8c03\u5730\u5740\uff0c\u4e0d\u586b\u65f6\u4f7f\u7528\u4e0a\u4f20\u53c2\u6570\u4e2d\u7684 notify_url }, { \"name\": \"naga\", \"type\": \"video\", \"avopts\": \"/s/240p(4:3)/as/1/r/30\", \"return_info\": true, \"save_as\": \"/a/b.mp4\", }, ...... ] ** \u56de\u8c03\u901a\u77e5 ** \u4efb\u52a1\u5904\u7406\u5b8c\u6210\u540e\uff0c\u5411 notify_url \u5730\u5740\u53d1\u9001\u56de\u8c03\u901a\u77e5\u3002\u8be6\u89c1 \u300c\u97f3\u89c6\u9891\u5904\u7406\u300d > \u300c \u56de\u8c03\u901a\u77e5 \u300d\u3002","title":"\u4e0a\u4f20\u9884\u5904\u7406"},{"location":"cloud/av/#_6","text":"** \u8bf7\u6c42\u65b9\u6cd5 ** \u901a\u8fc7 task_id \uff0c\u4ee5 GET \u65b9\u6cd5\u5411 http://p0.api.upyun.com/status/ \u63d0\u4ea4\u8fdb\u5ea6\u67e5\u8be2\u4efb\u52a1\u3002 curl http://p0.api.upyun.com/status?service=<service>&task_ids=<task_id1>,<task_id2>,<task_id3> \\ -H \"Authorization: UPYUN <Operator>:<Signature>\" \\ -H \"Date: <Wed, 29 Oct 2014 02:26:58 GMT>\" ** \u8ba4\u8bc1\u9274\u6743 ** Authorization \u8be6\u89c1 \u7b7e\u540d\u8ba4\u8bc1 \u3002 \u4ee3\u7801\u5b9e\u73b0 \u8be6\u89c1 \u4ee3\u7801\u793a\u4f8b \u3002 ** \u67e5\u8be2\u53c2\u6570 ** \u53c2\u6570 \u7c7b\u578b \u5fc5\u9009 \u8bf4\u660e service string \u662f \u97f3/\u89c6\u9891\u6587\u4ef6\u6240\u5728\u7684\u670d\u52a1\u540d task_ids string \u662f \u4efb\u52a1\u96c6\uff0c\u591a\u4e2a task_id \u4f7f\u7528 , \u8fde\u63a5\uff0c\u6700\u591a 20 \u4e2a task_id ** \u54cd\u5e94\u4fe1\u606f ** \u67e5\u8be2\u6210\u529f\uff1a\u8fd4\u56de 200 \uff0c\u54cd\u5e94\u4f53\u662f tasks \u3002 tasks \u662f JSON \u683c\u5f0f\uff0c\u5b58\u653e\u5404\u4e2a\u4efb\u52a1\uff08 task_id \uff09\u7684\u8fdb\u5ea6\u3002\u4f8b\u5982\uff1a { \"tasks\": { \"35f0148d414a688a275bf915ba7cebb2\": 100, \"98adbaa52b2f63d6d7f327a0ff223348\": 20, \"c3103189fa906a5354d29bd807e8dc51\": null, \u2026 } } 20 \u8868\u793a\u4efb\u52a1\u8fdb\u5ea6\u767e\u5206\u6bd4\uff0c 100 \u8868\u793a\u4efb\u52a1\u5904\u7406\u5b8c\u6210\uff0c -1 \u8868\u793a\u4efb\u52a1\u5904\u7406\u5931\u8d25\uff0c null \u8868\u793a\u4efb\u52a1\u5c1a\u672a\u5f00\u59cb\u3002\u5982\u679c\u957f\u65f6\u95f4\u662f null \uff0c\u8bf7\u53cd\u9988\u7ed9 \u552e\u540e \u6216\u60a8\u7684\u5546\u52a1\u7ecf\u7406\u3002 \u67e5\u8be2\u5931\u8d25\uff1a\u8fd4\u56de\u76f8\u5e94\u7684\u51fa\u9519\u4fe1\u606f\uff0c\u5177\u4f53\u8bf7\u53c2\u9605\u300c \u72b6\u6001\u7801\u8868 \u300d\u3002","title":"\u8fdb\u5ea6\u67e5\u8be2"},{"location":"cloud/av/#_7","text":"** \u8bf7\u6c42\u65b9\u6cd5 ** \u901a\u8fc7 task_id \uff0c\u4ee5 GET \u65b9\u6cd5\u5411 http://p0.api.upyun.com/result/ \u63d0\u4ea4\u5904\u7406\u7ed3\u679c\u67e5\u8be2\u4efb\u52a1\u3002 curl http://p0.api.upyun.com/result?service=<service>&task_ids=<task_id1>,<task_id2>,<task_id3> \\ -H \"Authorization: UPYUN <Operator>:<Signature>\" \\ -H \"Date: <Wed, 29 Oct 2014 02:26:58 GMT>\" ** \u8ba4\u8bc1\u9274\u6743 ** Authorization \u8be6\u89c1 \u7b7e\u540d\u8ba4\u8bc1 \u3002 \u4ee3\u7801\u5b9e\u73b0 \u8be6\u89c1 \u4ee3\u7801\u793a\u4f8b \u3002 ** \u67e5\u8be2\u53c2\u6570 ** \u53c2\u6570 \u7c7b\u578b \u5fc5\u9009 \u8bf4\u660e service string \u662f \u97f3/\u89c6\u9891\u6587\u4ef6\u6240\u5728\u7684\u670d\u52a1\u540d task_ids string \u662f \u4efb\u52a1\u96c6\uff0c\u591a\u4e2a task_id \u4f7f\u7528 , \u8fde\u63a5\uff0c\u6700\u591a 20 \u4e2a task_id ** \u54cd\u5e94\u4fe1\u606f ** \u67e5\u8be2\u6210\u529f\uff1a\u8fd4\u56de 200 \uff0c\u54cd\u5e94\u4f53\u662f\u4efb\u52a1\u7684 \u56de\u8c03\u4fe1\u606f \u3002\u56de\u8c03\u4fe1\u606f\u4f8b\u5982\uff1a { \"9d9c32b63a1034834e77672c6f51f661\": { \"path\": [\"/v2.mp4\"], \"signature\": \"4042c1f07f546d28\", \"status_code\": 200, \"service\": \"service\", \"description\": \"OK\", \"task_id\": \"9d9c32b63a1034834e77672c6f51f661\", \"timestamp\": 1472010905 }, \"3438a54b4991e8d4a46a003bc15e9867\": { \"path\": [\"/v2.mp4\"], \"signature\": \"1c49be9b672394ff\", \"status_code\": 200, \"service\": \"service\", \"description\": \"OK\", \"task_id\": \"3438a54b4991e8d4a46a003bc15e9867\", \"timestamp\": 1472010684 } \u2026 } \u67e5\u8be2\u5931\u8d25\uff1a\u8fd4\u56de\u76f8\u5e94\u7684\u51fa\u9519\u4fe1\u606f\uff0c\u5177\u4f53\u8bf7\u53c2\u9605\u300c \u72b6\u6001\u7801\u8868 \u300d\u3002","title":"\u7ed3\u679c\u67e5\u8be2"},{"location":"cloud/av/#_8","text":"\u72b6\u6001\u7801 \u8bf4\u660e 200 \u5904\u7406\u6210\u529f 400 \u53c2\u6570\u9519\u8bef 401 \u53c2\u6570\u9519\u8bef 404 \u6587\u4ef6\u4e0d\u5b58\u5728 5xx \u670d\u52a1\u7aef\u9519\u8bef\u3002\u5982\u9047\u6b64\u7c7b\u9519\u8bef\uff0c\u8bf7\u53cd\u9988\u7ed9 \u552e\u540e \u6216\u60a8\u7684\u5546\u52a1\u7ecf\u7406","title":"\u72b6\u6001\u7801\u8868"},{"location":"cloud/av/#_9","text":"\u7c7b\u578b \u8f93\u5165\u683c\u5f0f \u8f93\u51fa\u683c\u5f0f \u89c6\u9891\u5bb9\u5668\u683c\u5f0f AVI\u3001MP4\u3001FLV\u3001MOV\u30013GP\u3001ASF\u3001WMV\u3001M3U8(TS)\u3001MPG\u3001F4V\u3001M4V\u3001MKV\u3001VOB\uff08SVCD/DVD\uff09\u7b49 MP4\u3001FLV\u3001M3U8(TS) \u7b49 \u97f3\u9891\u5bb9\u5668\u683c\u5f0f MP3\u3001OGG\u3001M4A\u3001SILK \u7b49 MP4\u3001MP3\u3001OGG \u7b49 \u89c6\u9891\u7f16\u7801\u683c\u5f0f H.264/AVC \u3001H.263\u3001H.263+\u3001MPEG-2\u3001MPEG-4\u3001VP8\u3001VP9\u3001Quicktime\u3001RealVideo\u3001Windows Media Video \u7b49 H.264/AVC\u3001VP8\u3001H.265/HEVC\u3001VP9 \u7b49 \u97f3\u9891\u7f16\u7801\u683c\u5f0f MP1\u3001MP2\u3001MP3\u3001AAC\u3001AC-3\u3001Vorbis\u3001PCM\u3001RealAudio\u3001Windows Media Audio \u7b49 AAC\u3001MP3 \u7b49","title":"\u652f\u6301\u683c\u5f0f"},{"location":"cloud/av/#_10","text":"\u540c\u7b49\u6e05\u6670\u5ea6\u4e0b\uff0c\u5efa\u8bae\u4f18\u5148\u4f7f\u7528 16:9 \u7684\u5bbd\u9ad8\u6bd4\u3002\u7279\u522b\u5730\uff0c\u7a84\u5e26\u9ad8\u6e05\u4e5f\u53ef\u4ee5\u4f7f\u7528\u3002 \u6e05\u6670\u5ea6 \u6a21\u677f\u540d \u5206\u8fa8\u7387 \u7801\u7387 4K 2160p(16:9) 3840x2160,16:9 \u2264 8000Kbps 2K 1440p(16:9) 2560x1440,16:9 \u2264 4000Kbps FHD/\u5168\u9ad8\u6e05 1080p(16:9) 1920x1080,16:9 \u2264 2560Kbps HD/\u9ad8\u6e05 720p(16:9) 1280x720,16:9 \u2264 1500Kbps HD/\u9ad8\u6e05 720p(4:3) 960x720,4:3 \u2264 1500Kbps LD/\u6807\u6e05 540p(16:9) 960x540,16:9 \u2264 800Kbps LD/\u6807\u6e05 480p(16:9) 854x480,16:9 \u2264 800Kbps SD/\u6d41\u7545 480p(4:3) 640x480,4:3 \u2264 500Kbps SD/\u6d41\u7545 360p(16:9) 640x360,16:9 \u2264 500Kbps SD/\u6d41\u7545 240p(4:3) 320x240,4:3 \u2264 300Kbps","title":"\u9884\u7f6e\u6a21\u677f"},{"location":"cloud/av/#_11","text":"\u53c2\u6570 \u7c7b\u578b \u5fc5\u9009 \u8bf4\u660e type string \u662f \u56fa\u5b9a\u503c\uff0c video \uff0c\u8868\u793a\u6807\u51c6\u8f6c\u7801 avopts string \u662f \u89c6\u9891\u8f6c\u7801\u53c2\u6570\uff0c\u683c\u5f0f\u4e3a /key1/value1/key2/value2/... \uff0c\u53c2\u6570\u89c1\u300c\u53c2\u6570\u300d save_as string \u5426 \u8f93\u51fa\u6587\u4ef6\u4fdd\u5b58\u8def\u5f84\uff0c\u9ed8\u8ba4\u4f7f\u7528\u539f\u59cb\u89c6\u9891\u6240\u5728\u76ee\u5f55+\u7cfb\u7edf\u968f\u673a\u751f\u6210\u7684\u6587\u4ef6\u540d+\u539f\u59cb\u89c6\u9891\u540e\u7f00 return_info boolean \u5426 \u56de\u8c03\u4fe1\u606f\u662f\u5426\u5305\u542b\u8f93\u51fa\u6587\u4ef6\u7684\u5143\u6570\u636e\uff0c\u5143\u6570\u636e\u683c\u5f0f\u4e3a JSON\uff0c\u9ed8\u8ba4 false ** \u6ce8 ** save_as \u7684\u540e\u7f00\u540d\u9ed8\u8ba4\u5f53\u4f5c\u8f93\u51fa\u5c01\u88c5\u683c\u5f0f\u3002\u683c\u5f0f\u9664\u89c6\u9891\u683c\u5f0f\u5916\uff0c\u8fd8\u652f\u6301 GIF/WebP\uff0c\u53ef\u4ee5\u5b9e\u73b0\u628a\u89c6\u9891\u8f6c\u7801\u6210\u52a8\u6001 GIF/\u52a8\u6001 WebP\u3002","title":"\u89c6\u9891\u8f6c\u7801"},{"location":"cloud/av/#_12","text":"\u53c2\u6570 \u7c7b\u578b \u5fc5\u9009 \u8bf4\u660e /vb/<bitrate> integer \u5426 \u89c6\u9891\u6bd4\u7279\u7387\uff0c\u5355\u4f4d kbps\uff0c\u9ed8\u8ba4\u6309\u7167\u89c6\u9891\u539f\u59cb\u6bd4\u7279\u7387\u5904\u7406 /s/<scale> string \u5426 \u89c6\u9891\u5206\u8fa8\u7387\uff0c\u9ed8\u8ba4\u6309\u7167\u539f\u59cb\u5206\u8fa8\u7387\u5904\u7406\u3002\u89c1\u300c\u6ce8\u300d /as/<auto_scale> boolean \u5426 \u662f\u5426\u6839\u636e\u5206\u8fa8\u7387\u81ea\u52a8\u8c03\u6574\u89c6\u9891\u7684\u6bd4\u4f8b\uff0c\u9ed8\u8ba4 false \u3002\u4ec5\u5f53\u4f20\u9012\u4e86 s \u53c2\u6570\u65f6\u6709\u6548 /r/<frame_rate> integer \u5426 \u89c6\u9891\u5e27\u7387\uff0c\u9ed8\u8ba4\u6309\u7167\u539f\u59cb\u5e27\u7387\u5904\u7406\u3002\u63a8\u8350\u503c\uff1a 25 \u3001 30 /sp/<rotate> string \u5426 \u65cb\u8f6c\u89d2\u5ea6\uff0c\u9ed8\u8ba4\u6309\u7167\u539f\u59cb\u89c6\u9891\u89d2\u5ea6\u5904\u7406\u3002\u53ef\u9009\u503c\uff1a auto\uff08\u81ea\u52a8\u6276\u6b63\uff09 \u3001 90 \u3001 180 \u3001 270 /sm/<map_metadata> boolean \u5426 \u662f\u5426\u4fdd\u7559\u89c6\u9891\u5143\u6570\u636e\uff0c\u9ed8\u8ba4 true /acodec/<audio_codec> string \u5426 \u8bbe\u7f6e\u97f3\u9891\u7f16\u7801\u5668\uff0c\u9ed8\u8ba4\u6309\u7167\u97f3\u9891\u539f\u59cb\u7f16\u7801\u5668\u5904\u7406\u3002\u53ef\u9009\u503c\uff1a libmp3lame \u3001 libfdk_aac \u3001 copy /vcodec/<video_codec> string \u5426 \u8bbe\u7f6e\u89c6\u9891\u7f16\u7801\u5668\uff0c\u9ed8\u8ba4\u6309\u7167\u89c6\u9891\u539f\u59cb\u7f16\u7801\u5668\u5904\u7406\u3002\u53ef\u9009\u503c\uff1a libx264 \u3001 libtheora \u3001 libx265 \u3001 libvpx-vp9 \u3001 libvpx \u3001 copy /an/<disable_audio> boolean \u5426 \u662f\u5426\u7981\u6389\u97f3\u9891\uff0c\u9ed8\u8ba4 false /vn/<disable_video> boolean \u5426 \u662f\u5426\u7981\u6389\u89c6\u9891\uff0c\u9ed8\u8ba4 false /su/<accelerate_factor> float \u5426 \u89c6\u9891\u52a0\u901f\u500d\u6570\uff0c\u9ed8\u8ba4 1.0 \u3002\u53d6\u503c\u8303\u56f4 [1.0\uff0c10.0] /ar/<audio_sample_rate> integer \u5426 \u97f3\u9891\u91c7\u6837\u7387\uff0c\u5355\u4f4d Hz\uff0c\u9ed8\u8ba4\u6309\u7167\u539f\u59cb\u91c7\u6837\u7387\u5904\u7406\u3002\u53ef\u9009\u503c\uff1a 44100 \u3001 48000 \u3001 32000 \u3001 22050 \u3001 24000 \u3001 16000 \u3001 0 /ac/<audio_channel> float \u5426 \u97f3\u9891\u58f0\u9053\u6570\uff0c\u9ed8\u8ba4\u6309\u7167\u539f\u59cb\u58f0\u9053\u6570\u5904\u7406\u3002\u5e38\u7528\u503c\uff1a 1 \u8868\u793a\u5355\u58f0\u9053(mono)\uff0c 2 \u8868\u793a\u7acb\u4f53\u58f0(stereo)\uff0c 5.1 \uff0c 7.1 \u7b49 /sar/<sar> string \u5426 \u91c7\u6837\u957f\u5bbd\u6bd4 \uff0c\u683c\u5f0f w:h \uff0c\u5e38\u7528\u503c 1:1 \uff0c 4:3 \u6216 16:9 /dar/<dar> string \u5426 \u663e\u793a\u957f\u5bbd\u6bd4 \uff0c\u683c\u5f0f w:h \uff0c\u5e38\u7528\u503c 1:1 \uff0c 4:3 \u6216 16:9 /pv/<pv> string \u5426 H264 Profile\uff0c\u5e38\u7528\u503c baseline \uff0c main \uff0c high \u7b49 /level/<level> float \u5426 H264 Level\uff0c\u5e38\u7528\u503c 3.0 \uff0c 3.1 \uff0c 4.0 \uff0c 4.1 \uff0c 4.2 \u7b49 /f/<format> string \u5426 \u89c6\u9891\u683c\u5f0f\u3002\u5f53\u8f93\u51fa\u6587\u4ef6\u6ca1\u6709\u540e\u7f00\u65f6\uff0c\u9700\u8981\u6307\u5b9a\uff0c\u5176\u4f59\u65f6\u5019\u6839\u636e\u8f93\u51fa\u6587\u4ef6\u540e\u7f00\u540d\u81ea\u52a8\u5224\u5b9a ** \u6ce8 ** s \u53c2\u6570\u6709\u4e24\u79cd\u8bbe\u7f6e\u65b9\u6cd5\uff1a1\uff09\u4f7f\u7528 \u9884\u7f6e\u6a21\u677f \uff0c\u503c\u662f\u9884\u7f6e\u6a21\u677f\u7684 \u6a21\u677f\u540d \uff0c\u5982 720p(16:9) \uff1b2\uff09\u81ea\u5b9a\u4e49\uff0c\u503c\u662f \u5bbdx\u9ad8 \uff0c\u5982 1280x720 \u3002","title":"\u5e38\u7528\u53c2\u6570"},{"location":"cloud/av/#_13","text":"\u53c2\u6570 \u7c7b\u578b \u5fc5\u9009 \u8bf4\u660e /ht/<hls_time> string \u5426 \u6bcf\u7247\u65f6\u957f\uff0c\u5355\u4f4d s\uff08\u79d2\uff09\uff0c\u9ed8\u8ba4 10 ** \u6ce8 ** \u4f7f\u7528 ht \u53c2\u6570\u65f6\uff0c save_as \u53c2\u6570\u5fc5\u987b\u4ee5 .m3u8 \u540e\u7f00\u7ed3\u5c3e\u3002","title":"\u5207\u7247\u53c2\u6570"},{"location":"cloud/av/#_14","text":"\u53c2\u6570 \u7c7b\u578b \u5fc5\u9009 \u8bf4\u660e /wmImg/<watermark_img> string \u662f \u6c34\u5370\u56fe\u7247\u76f8\u5bf9\u8def\u5f84\uff0c\u9700\u8981\u5b89\u5168\u7684 Base64 \u7f16\u7801\u3002\u56fe\u7247\u683c\u5f0f\u652f\u6301 png \u548c webp /wmGravity/<wmGravity> string \u5426 \u6c34\u5370\u56fe\u7247\u653e\u7f6e\u65b9\u4f4d\uff0c\u9ed8\u8ba4 northeast \u3002\u89c1\u300c\u6ce8\u300d /wmDx/<watermark_dx> integer \u5426 \u6c34\u5370\u56fe\u7247\u6a2a\u504f\u79fb\u91cf\uff0c\u5355\u4f4d px\uff0c\u5f53 wmGravity \u4e3a northeast \u65f6\uff0c\u9ed8\u8ba4 -20 \u6a2a\u504f\u79fb\u91cf\u53d6\u503c\u6b63\u8d1f\u7684\u4f9d\u636e\uff1a\u5f80 east \u65b9\u5411\u504f\u79fb\uff0c\u4e3a\u6b63\uff1b\u5f80 west \u65b9\u5411\u504f\u79fb\uff0c\u4e3a\u8d1f /wmDy/<watermark_dy> integer \u5426 \u6c34\u5370\u56fe\u7247\u7eb5\u504f\u79fb\u91cf\uff0c\u5355\u4f4d px\uff0c\u5f53 wmGravity \u4e3a northeast \u65f6\uff0c\u9ed8\u8ba4 15 \u7eb5\u504f\u79fb\u91cf\u53d6\u503c\u6b63\u8d1f\u7684\u4f9d\u636e\uff1a\u5f80 south \u65b9\u5411\u504f\u79fb\uff0c\u4e3a\u6b63\uff1b\u5f80 north \u65b9\u5411\u504f\u79fb\uff0c\u4e3a\u8d1f ** \u6ce8 ** 9 \u4e2a\u65b9\u4f4d\uff1a northwest | north | northeast | | | | --------------+----------------+-------------- | | west | center | east | | --------------+----------------+-------------- | | | | southwest | south | southeast","title":"\u6c34\u5370\u53c2\u6570"},{"location":"cloud/av/#_15","text":"\u53c2\u6570 \u7c7b\u578b \u5fc5\u9009 \u8bf4\u660e /ss/<start_time> string \u5426 \u526a\u8f91\u5f00\u59cb\u65f6\u95f4\uff0c\u683c\u5f0f\u4e3a HH:MM:SS \uff0c\u9ed8\u8ba4\u89c6\u9891\u5f00\u59cb\u65f6\u95f4 /es/<end_time> string \u5426 \u526a\u8f91\u7ed3\u675f\u65f6\u95f4\uff0c\u683c\u5f0f\u4e3a HH:MM:SS \uff0c\u9ed8\u8ba4\u89c6\u9891\u7ed3\u675f\u65f6\u95f4","title":"\u526a\u8f91\u53c2\u6570"},{"location":"cloud/av/#_16","text":"\u628a save_as \u7684\u540e\u7f00\u540d\u6307\u5b9a\u4e3a gif \u6216 webp \uff0c\u5b9e\u73b0\u89c6\u9891\u8f6c\u7801\u6210\u52a8\u6001\u56fe\u7247\u3002 \u53c2\u6570 \u7c7b\u578b \u5fc5\u9009 \u8bf4\u660e /cr/<concat_reverse> boolean \u5426 \u5411\u89c6\u9891\u7ed3\u5c3e\u5904\u6dfb\u52a0\u5012\u5e8f\u7684\u5185\u5bb9\u3002\u529f\u80fd\u6548\u679c\u662f\uff0c\u6b63\u5e8f\u5185\u5bb9+\u5012\u5e8f\u5185\u5bb9","title":"\u52a8\u56fe\u53c2\u6570"},{"location":"cloud/av/#_17","text":"\u62fc\u63a5\u7684\u89c6\u9891\u5206\u8fa8\u7387\u9700\u8981\u4fdd\u6301\u4e00\u81f4\uff0c\u62fc\u63a5\u53c2\u6570\u4e0d\u80fd\u4e0e\u5176\u4ed6\u53c2\u6570\u6df7\u7528\u3002\u5982\u679c\u8981\u6df7\u7528\uff0c\u8bf7\u5206\u505a\u4e24\u4e2a\u4efb\u52a1\uff0c\u4f7f\u7528 \u94fe\u5f0f\u5904\u7406 \u3002 \u53c2\u6570 \u7c7b\u578b \u5fc5\u9009 \u8bf4\u660e /i/<video> string \u5426 \u9700\u8981 \u540e\u7f6e \u62fc\u63a5\u89c6\u9891\u6587\u4ef6\u7684\u76f8\u5bf9\u8def\u5f84\uff0c\u9700\u8981\u5b89\u5168\u7684 Base64 \u7f16\u7801 \u591a\u4e2a\u9700\u8981\u62fc\u63a5\u89c6\u9891\u6309 /i/<video>/i/<video>/... \u65b9\u5f0f\u8fdb\u884c\u8fde\u63a5\u3002\u89c1\u300c\u6ce8\u300d /h/<video> string \u5426 \u9700\u8981 \u524d\u7f6e \u62fc\u63a5\u89c6\u9891\u6587\u4ef6\u7684\u76f8\u5bf9\u8def\u5f84\uff0c\u9700\u8981\u5b89\u5168\u7684 Base64 \u7f16\u7801 \u591a\u4e2a\u9700\u8981\u62fc\u63a5\u89c6\u9891\u6309 /h/<video>/h/<video>/... \u65b9\u5f0f\u8fdb\u884c\u8fde\u63a5\u3002\u89c1\u300c\u6ce8\u300d /codec/<codec> string \u5426 \u8bbe\u7f6e\u89c6\u9891\u7f16\u7801\u5668\uff0c\u9ed8\u8ba4\u4e0d\u9700\u8981\u8bbe\u7f6e\u3002\u53ef\u9009\u503c\uff1a copy \u3002\u89c1\u300c\u6ce8\u300d ** \u6ce8 ** \u89c6\u9891\u62fc\u63a5\u987a\u5e8f\uff1a\u5f85\u62fc\u63a5\u89c6\u9891\u6309 h \u51fa\u73b0\u987a\u5e8f\uff0c\u4f9d\u6b21\u62fc\u63a5\u5728 \u539f\u59cb\u89c6\u9891\uff08 source \uff09 \u524d\u9762\uff1b\u5f85\u62fc\u63a5\u89c6\u9891\u6309 i \u51fa\u73b0\u987a\u5e8f\uff0c\u4f9d\u6b21\u62fc\u63a5\u5728 \u539f\u59cb\u89c6\u9891\uff08 source \uff09 \u540e\u9762\u3002 \u5982\u679c save_as \u53c2\u6570\u6307\u5b9a\u683c\u5f0f\u8ddf \u539f\u59cb\u89c6\u9891\uff08 source \uff09 \u683c\u5f0f\u3001\u62fc\u63a5\u89c6\u9891\u683c\u5f0f\u4e0d\u4e00\u81f4\uff0c\u7cfb\u7edf\u4f1a \u81ea\u52a8\u8f6c\u7801 \u539f\u59cb\u89c6\u9891\u3001\u62fc\u63a5\u89c6\u9891\u6210 save_as \u53c2\u6570\u6307\u5b9a\u683c\u5f0f\uff1b\u5982\u679c save_as \u53c2\u6570\u672a\u6307\u5b9a\uff0c\u62fc\u63a5\u89c6\u9891\u8ddf\u539f\u59cb\u89c6\u9891\u683c\u5f0f\u4e0d\u4e00\u81f4\uff0c\u7cfb\u7edf\u4f1a\u81ea\u52a8\u8f6c\u7801\u62fc\u63a5\u89c6\u9891\u6210\u539f\u59cb\u89c6\u9891\u683c\u5f0f\u3002 \u5982\u679c\u62fc\u63a5\u89c6\u9891\u548c\u539f\u59cb\u89c6\u9891\u7684\u7f16\u7801\u4e00\u81f4\uff0c\u53ef\u4ee5\u8bbe\u7f6e codec \u53c2\u6570\u4e3a copy \uff0c\u4e0d\u5bf9\u62fc\u63a5\u89c6\u9891\u8fdb\u884c\u7f16\u89e3\u7801\uff0c\u63d0\u9ad8\u62fc\u63a5\u901f\u5ea6\u3002","title":"\u62fc\u63a5\u53c2\u6570"},{"location":"cloud/av/#_18","text":"\u901a\u8fc7\u5bf9\u89c6\u9891\u7684\u7f16\u7801\u8fdb\u884c\u4f18\u5316\uff0c\u5e73\u5747\u964d\u4f4e\u89c6\u9891\u5927\u5c0f 30%\u3002\u7279\u522b\u5730\uff0c\u6682\u65f6\u53ea\u652f\u6301 H.264 \u7f16\u7801\u3002 \u53c2\u6570 \u7c7b\u578b \u5fc5\u9009 \u8bf4\u660e type string \u662f \u56fa\u5b9a\u503c\uff0c nbhd \uff0c\u8868\u793a\u7a84\u5e26\u9ad8\u6e05 avopts string \u662f \u89c6\u9891\u8f6c\u7801\u53c2\u6570\uff0c\u683c\u5f0f\u4e3a /key1/value1/key2/value2/... \uff0c\u53c2\u6570\u89c1\u300c\u53c2\u6570\u300d return_info boolean \u5426 \u56de\u8c03\u4fe1\u606f\u662f\u5426\u5305\u542b\u8f93\u51fa\u6587\u4ef6\u7684\u5143\u6570\u636e\uff0c\u5143\u6570\u636e\u683c\u5f0f\u4e3a JSON\uff0c\u9ed8\u8ba4 false save_as string \u5426 \u8f93\u51fa\u6587\u4ef6\u4fdd\u5b58\u8def\u5f84\uff0c\u9ed8\u8ba4\u539f\u59cb\u89c6\u9891\u6240\u5728\u76ee\u5f55+\u7cfb\u7edf\u968f\u673a\u751f\u6210\u7684\u6587\u4ef6\u540d","title":"\u7a84\u5e26\u9ad8\u6e05"},{"location":"cloud/av/#_19","text":"\u53c2\u6570 \u7c7b\u578b \u5fc5\u9009 \u8bf4\u660e /ct/<codec_type> string \u5426 \u89c6\u9891\u7f16\u7801\u5668\u9009\u62e9\uff0c\u9ed8\u8ba4 h264 \uff0c\u53ef\u9009\u503c\u53ea\u80fd\u662f h264 \u6216\u8005 h265 \u3002 /scene/<scene> string \u5426 \u89c6\u9891\u5185\u5bb9\u573a\u666f\uff0c\u9ed8\u8ba4 auto \uff0c\u670d\u52a1\u6839\u636e\u89c6\u9891\u5185\u5bb9\u667a\u80fd\u9009\u62e9\u3002\u573a\u666f\u53c2\u6570\u89c1\u300c\u6ce8\u300d /s/<scale> string \u5426 \u89c6\u9891\u5206\u8fa8\u7387\uff0c\u9ed8\u8ba4\u6309\u7167\u539f\u59cb\u5206\u8fa8\u7387\u5904\u7406\u3002\u89c1\u300c\u6ce8\u300d /as/<auto_scale> boolean \u5426 \u662f\u5426\u6839\u636e\u5206\u8fa8\u7387\u81ea\u52a8\u8c03\u6574\u89c6\u9891\u7684\u6bd4\u4f8b\uff0c\u9ed8\u8ba4 false \u3002\u4ec5\u5f53\u4f20\u9012\u4e86 s \u53c2\u6570\u65f6\u6709\u6548 /r/<frame_rate> integer \u5426 \u89c6\u9891\u5e27\u7387\uff0c\u9ed8\u8ba4\u6309\u7167\u539f\u59cb\u5e27\u7387\u5904\u7406\u3002\u63a8\u8350\u503c\uff1a 25 \u3001 30 /sp/<rotate> string \u5426 \u65cb\u8f6c\u89d2\u5ea6\uff0c\u9ed8\u8ba4\u6309\u7167\u539f\u59cb\u89c6\u9891\u89d2\u5ea6\u5904\u7406\u3002\u53ef\u9009\u503c\uff1a auto\uff08\u81ea\u52a8\u6276\u6b63\uff09 \u3001 90 \u3001 180 \u3001 270 /sm/<map_metadata> boolean \u5426 \u662f\u5426\u4fdd\u7559\u89c6\u9891\u5143\u6570\u636e\uff0c\u9ed8\u8ba4 true /su/<accelerate_factor> float \u5426 \u89c6\u9891\u52a0\u901f\u500d\u6570\uff0c\u9ed8\u8ba4 1.0 \u3002\u53d6\u503c\u8303\u56f4 [1.0\uff0c10.0] /ar/<audio_sample_rate> integer \u5426 \u97f3\u9891\u91c7\u6837\u7387\uff0c\u5355\u4f4d Hz\uff0c\u9ed8\u8ba4\u6309\u7167\u539f\u59cb\u91c7\u6837\u7387\u5904\u7406\u3002\u53ef\u9009\u503c\uff1a 44100 \u3001 48000 \u3001 32000 \u3001 22050 \u3001 24000 \u3001 16000 \u3001 0 /f/<format> string \u5426 \u89c6\u9891\u683c\u5f0f\u3002\u5f53\u8f93\u51fa\u6587\u4ef6\u6ca1\u6709\u540e\u7f00\u65f6\uff0c\u9700\u8981\u6307\u5b9a\uff0c\u5176\u4f59\u65f6\u5019\u6839\u636e\u8f93\u51fa\u6587\u4ef6\u540e\u7f00\u540d\u81ea\u52a8\u5224\u5b9a ** \u6ce8 ** scene \u53ef\u9009\u53c2\u6570\uff1a auto \uff0c\u8868\u793a\u667a\u80fd\u9009\u62e9\uff1b self_portrait \uff0c\u8868\u793a\u81ea\u62cd\uff1b animation \uff0c\u8868\u793a\u52a8\u753b\uff1b film_calm \uff0c\u8868\u793a\u7535\u89c6\u5267\uff0c\u5305\u62ec\u7efc\u827a\u3001\u8bbf\u8c08\u3001\u5728\u7ebf\u6559\u80b2\u7b49\uff1b film_dramatic \uff0c\u8868\u793a\u7535\u5f71\u3002\u6ce8\u610f\uff1a scene \u53ea\u80fd\u662f h264 \u4e0b\u7684\u9009\u9879\uff0c h265 \u65e0\u9700\u4f7f\u7528 scene \u53c2\u6570\u3002 s \u53c2\u6570\u6709\u4e24\u79cd\u8bbe\u7f6e\u65b9\u6cd5\uff1a1\uff09\u4f7f\u7528 \u9884\u7f6e\u6a21\u677f \uff0c\u503c\u662f\u9884\u7f6e\u6a21\u677f\u7684 \u6a21\u677f\u540d \uff0c\u5982 720p(16:9) \uff1b2\uff09\u81ea\u5b9a\u4e49\uff0c\u503c\u662f \u5bbdx\u9ad8 \uff0c\u5982 1280x720 \u3002 vb \u53c2\u6570\u5728\u7a84\u5e26\u9ad8\u6e05\u8f6c\u7801\u4e2d\u7981\u6b62\u4f7f\u7528\u3002","title":"\u5e38\u7528\u53c2\u6570"},{"location":"cloud/av/#_20","text":"\u53c2\u6570 \u7c7b\u578b \u5fc5\u9009 \u8bf4\u660e /ht/<hls_time> string \u5426 \u6bcf\u7247\u65f6\u957f\uff0c\u5355\u4f4d s\uff08\u79d2\uff09\uff0c\u9ed8\u8ba4 10 ** \u6ce8 ** \u4f7f\u7528 ht \u53c2\u6570\u65f6\uff0c save_as \u53c2\u6570\u5fc5\u987b\u4ee5 .m3u8 \u540e\u7f00\u7ed3\u5c3e\u3002","title":"\u5207\u7247\u53c2\u6570"},{"location":"cloud/av/#_21","text":"\u53c2\u6570 \u7c7b\u578b \u5fc5\u9009 \u8bf4\u660e /wmImg/<watermark_img> string \u662f \u6c34\u5370\u56fe\u7247\u76f8\u5bf9\u8def\u5f84\uff0c\u9700\u8981\u5b89\u5168\u7684 Base64 \u7f16\u7801\u3002\u56fe\u7247\u683c\u5f0f\u652f\u6301 png \u548c webp /wmGravity/<wmGravity> string \u5426 \u6c34\u5370\u56fe\u7247\u653e\u7f6e\u65b9\u4f4d\uff0c\u9ed8\u8ba4 northeast \u3002\u89c1\u300c\u6ce8\u300d /wmDx/<watermark_dx> integer \u5426 \u6c34\u5370\u56fe\u7247\u6a2a\u504f\u79fb\u91cf\uff0c\u5355\u4f4d px\uff0c\u5f53 wmGravity \u4e3a northeast \u65f6\uff0c\u9ed8\u8ba4 -20 \u6a2a\u504f\u79fb\u91cf\u53d6\u503c\u6b63\u8d1f\u7684\u4f9d\u636e\uff1a\u5f80 east \u65b9\u5411\u504f\u79fb\uff0c\u4e3a\u6b63\uff1b\u5f80 west \u65b9\u5411\u504f\u79fb\uff0c\u4e3a\u8d1f /wmDy/<watermark_dy> integer \u5426 \u6c34\u5370\u56fe\u7247\u7eb5\u504f\u79fb\u91cf\uff0c\u5355\u4f4d px\uff0c\u5f53 wmGravity \u4e3a northeast \u65f6\uff0c\u9ed8\u8ba4 15 \u7eb5\u504f\u79fb\u91cf\u53d6\u503c\u6b63\u8d1f\u7684\u4f9d\u636e\uff1a\u5f80 south \u65b9\u5411\u504f\u79fb\uff0c\u4e3a\u6b63\uff1b\u5f80 north \u65b9\u5411\u504f\u79fb\uff0c\u4e3a\u8d1f ** \u6ce8 ** 9 \u4e2a\u65b9\u4f4d\uff1a northwest | north | northeast | | | | --------------+----------------+-------------- | | west | center | east | | --------------+----------------+-------------- | | | | southwest | south | southeast","title":"\u6c34\u5370\u53c2\u6570"},{"location":"cloud/av/#_22","text":"\u53c2\u6570 \u7c7b\u578b \u5fc5\u9009 \u8bf4\u660e /ss/<start_time> string \u5426 \u526a\u8f91\u5f00\u59cb\u65f6\u95f4\uff0c\u683c\u5f0f\u4e3a HH:MM:SS \uff0c\u9ed8\u8ba4\u89c6\u9891\u5f00\u59cb\u65f6\u95f4 /es/<end_time> string \u5426 \u526a\u8f91\u7ed3\u675f\u65f6\u95f4\uff0c\u683c\u5f0f\u4e3a HH:MM:SS \uff0c\u9ed8\u8ba4\u89c6\u9891\u7ed3\u675f\u65f6\u95f4","title":"\u526a\u8f91\u53c2\u6570"},{"location":"cloud/av/#_23","text":"\u53c2\u6570 \u7c7b\u578b \u5fc5\u9009 \u8bf4\u660e type string \u662f \u56fa\u5b9a\u503c\uff0c thumbnail avopts string \u662f \u89c6\u9891\u8f6c\u7801\u53c2\u6570\uff0c\u683c\u5f0f\u4e3a /key1/value1/key2/value2/... \uff0c\u53c2\u6570\u89c1\u300c\u622a\u56fe\u53c2\u6570\u300d return_info boolean \u5426 \u56de\u8c03\u4fe1\u606f\u662f\u5426\u5305\u542b\u8f93\u51fa\u6587\u4ef6\u7684\u5143\u6570\u636e\uff0c\u5143\u6570\u636e\u683c\u5f0f\u4e3a JSON\uff0c\u9ed8\u8ba4 false save_as string \u5426 \u8f93\u51fa\u6587\u4ef6\u4fdd\u5b58\u8def\u5f84\uff0c\u9ed8\u8ba4\u539f\u59cb\u89c6\u9891\u6240\u5728\u76ee\u5f55+\u7cfb\u7edf\u968f\u673a\u751f\u6210\u7684\u6587\u4ef6\u540d\u3002\u89c1\u300c\u6ce8\u300d ** \u622a\u56fe\u53c2\u6570 ** \u53c2\u6570 \u7c7b\u578b \u5fc5\u9009 \u8bf4\u660e /o/<thumb_single> boolean \u662f \u662f\u5426\u5355\u5f20\u622a\u56fe\uff0c\u5355\u5f20\u622a\u56fe\u4e3a true \uff0c\u591a\u5f20\u622a\u56fe\u4e3a false /n/<thumb_amount> integer \u662f \u622a\u56fe\u6570\u91cf\u3002\u5f53 o \u53c2\u6570\u4e3a false \u65f6\uff0c\u6709\u6548\uff1b\u5f53 o \u53c2\u6570\u4e3a true \u65f6\uff0c\u65e0\u6548 /ss/<thumb_start> string \u5426 \u622a\u56fe\u5f00\u59cb\u65f6\u95f4\uff0c\u683c\u5f0f\u4e3a HH:MM:SS \uff0c\u9ed8\u8ba4 00:00:00 /es/<thumb_end> string \u5426 \u622a\u56fe\u7ed3\u675f\u65f6\u95f4\uff0c\u683c\u5f0f\u4e3a HH:MM:SS \uff0c\u9ed8\u8ba4\u89c6\u9891\u7ed3\u675f\u65f6\u95f4\u3002\u5f53 o \u53c2\u6570\u4e3a true \u65f6\uff0c\u65e0\u6548 /s/<thumb_scale> string \u5426 \u622a\u56fe\u5c3a\u5bf8\uff0c\u683c\u5f0f\u4e3a \u5bbd:\u9ad8 \uff0c\u9ed8\u8ba4\u89c6\u9891\u539f\u59cb\u5c3a\u5bf8 /f/<thumb_format> string \u5426 \u622a\u56fe\u8f93\u51fa\u683c\u5f0f\uff0c\u9ed8\u8ba4 jpg \u3002\u56fe\u7247\u683c\u5f0f\u652f\u6301 png \u548c jpg \u3002\u89c1\u300c\u6ce8\u300d ** \u6ce8 ** \u591a\u5f20\u622a\u56fe\u65f6\uff0c\u81ea\u5b9a\u4e49 save_as \u53c2\u6570\u65f6\u53ea\u9700\u6307\u5b9a\u4e00\u4e2a\u4fdd\u5b58\u8def\u5f84\uff0c\u5177\u4f53\u6bcf\u5f20\u56fe\u7247\u4fdd\u5b58\u8def\u5f84\u6839\u636e\u89c4\u5219\u8fdb\u884c\u7c7b\u63a8\uff0c\u4f8b\u5982 save_as \u4e3a /path/to/img.png \uff0c\u8f93\u51fa\u6587\u4ef6\u4fdd\u5b58\u8def\u5f84\u7b2c\u4e00\u5f20\u4e3a /path/to/img1.png \uff0c\u7b2c\u4e8c\u5f20\u4e3a /path/to/img2.png ......\u4ee5\u6b64\u7c7b\u63a8\u3002 \u81ea\u5b9a\u4e49 f \u548c save_as \u53c2\u6570\u65f6\uff0c\u4f7f\u7528 f \u53c2\u6570\u6307\u5b9a\u7684\u683c\u5f0f\u4f5c\u4e3a\u8f93\u51fa\u683c\u5f0f\uff1b\u4ec5\u81ea\u5b9a\u4e49 save_as \u53c2\u6570\u65f6\uff0c\u4f7f\u7528 save_as \u53c2\u6570\u6307\u5b9a\u7684\u540e\u7f00\u540d\u4f5c\u4e3a\u8f93\u51fa\u683c\u5f0f\uff1b\u4e24\u8005\u90fd\u4e0d\u81ea\u5b9a\u4e49\u65f6\uff0c\u4f7f\u7528 f \u53c2\u6570\u7684\u9ed8\u8ba4\u503c jpg \u4f5c\u4e3a\u8f93\u51fa\u683c\u5f0f\u3002 \u652f\u6301 m3u8 \u622a\u56fe\u3002","title":"\u89c6\u9891\u622a\u56fe"},{"location":"cloud/av/#_24","text":"\u53c2\u6570 \u7c7b\u578b \u5fc5\u9009 \u8bf4\u660e type string \u662f \u56fa\u5b9a\u503c\uff0c audio avopts string \u662f \u89c6\u9891\u8f6c\u7801\u53c2\u6570\uff0c\u683c\u5f0f\u4e3a /key1/value1/key2/value2/... \uff0c\u53c2\u6570\u89c1\u300c\u53c2\u6570\u300d return_info boolean \u5426 \u56de\u8c03\u4fe1\u606f\u662f\u5426\u5305\u542b\u8f93\u51fa\u6587\u4ef6\u7684\u5143\u6570\u636e\uff0c\u5143\u6570\u636e\u683c\u5f0f\u4e3a JSON\uff0c\u9ed8\u8ba4 false save_as string \u5426 \u8f93\u51fa\u6587\u4ef6\u4fdd\u5b58\u8def\u5f84\uff0c\u9ed8\u8ba4\u539f\u59cb\u97f3\u9891\u6240\u5728\u76ee\u5f55+\u7cfb\u7edf\u968f\u673a\u751f\u6210\u7684\u6587\u4ef6\u540d ** \u6ce8 ** save_as \u7684\u540e\u7f00\u540d\u4f5c\u4e3a\u8f93\u51fa\u5c01\u88c5\u683c\u5f0f\u3002","title":"\u97f3\u9891\u8f6c\u7801"},{"location":"cloud/av/#_25","text":"\u53c2\u6570 \u7c7b\u578b \u5fc5\u9009 \u8bf4\u660e /f/<format> string \u5426 \u97f3\u9891\u683c\u5f0f\uff0c\u5f53\u8f93\u51fa\u6587\u4ef6\u6ca1\u6709\u540e\u7f00\u65f6\uff0c\u9700\u8981\u6307\u5b9a\uff0c\u5176\u4f59\u65f6\u5019\u6839\u636e\u8f93\u51fa\u6587\u4ef6\u540e\u7f00\u540d\u81ea\u52a8\u5224\u5b9a /ac/<audio_channel> integer \u5426 \u58f0\u9053\uff0c\u9ed8\u8ba4 2 /ab/<audio_bitrate> integer \u5426 \u6bd4\u7279\u7387\uff0c\u5355\u4f4d kbps\uff0c\u9ed8\u8ba4\u6309\u7167\u97f3\u9891\u539f\u59cb\u6bd4\u7279\u7387\u5904\u7406 /vbr/<audio_vbr> integer \u5426 Variable bitrate, \u9ed8\u8ba4\u6309\u7167\u97f3\u9891\u539f\u59cb VBR \u5904\u7406\u3002\u53d6\u503c\u8303\u56f4 [0-9] /sm/<map_metadata> boolean \u5426 \u662f\u5426\u4fdd\u7559\u97f3\u9891 metadata\uff0c\u9ed8\u8ba4 true","title":"\u5e38\u7528\u53c2\u6570"},{"location":"cloud/av/#_26","text":"\u62fc\u63a5\u53c2\u6570\u4e0d\u80fd\u4e0e\u5176\u4ed6\u53c2\u6570\u6df7\u7528\uff0c\u8bf7\u6ce8\u610f\u3002\u5982\u679c\u8981\u6df7\u7528\uff0c\u8bf7\u5206\u505a\u4e24\u4e2a\u4efb\u52a1\uff0c\u4f7f\u7528 \u94fe\u5f0f\u5904\u7406 \u3002 \u53c2\u6570 \u7c7b\u578b \u5fc5\u9009 \u8bf4\u660e /ss/<start_time> string \u5426 \u526a\u8f91\u5f00\u59cb\u65f6\u95f4\uff0c\u683c\u5f0f\u4e3a HH:MM:SS \uff0c\u9ed8\u8ba4\u89c6\u9891\u5f00\u59cb\u65f6\u95f4 /es/<end_time> string \u5426 \u526a\u8f91\u7ed3\u675f\u65f6\u95f4\uff0c\u683c\u5f0f\u4e3a HH:MM:SS \uff0c\u9ed8\u8ba4\u89c6\u9891\u7ed3\u675f\u65f6\u95f4","title":"\u526a\u8f91\u53c2\u6570"},{"location":"cloud/av/#_27","text":"\u62fc\u63a5\u53c2\u6570\u4e0d\u80fd\u4e0e\u5176\u4ed6\u53c2\u6570\u6df7\u7528\u3002\u5982\u679c\u8981\u6df7\u7528\uff0c\u8bf7\u5206\u505a\u4e24\u4e2a\u4efb\u52a1\uff0c\u4f7f\u7528 \u94fe\u5f0f\u5904\u7406 \u3002 \u53c2\u6570 \u7c7b\u578b \u5fc5\u9009 \u8bf4\u660e /i/<audio> string \u662f \u9700\u8981\u62fc\u63a5\u97f3\u9891\u6587\u4ef6\u7684\u76f8\u5bf9\u8def\u5f84\uff0c\u9700\u8981\u5b89\u5168\u7684 Base64 \u7f16\u7801 \u591a\u4e2a\u9700\u8981\u62fc\u63a5\u97f3\u9891\u6587\u4ef6\u6309 /i/<audio>/i/<audio>/... \u65b9\u5f0f\u8fdb\u884c\u8fde\u63a5 ** \u6ce8 ** \u97f3\u9891\u62fc\u63a5\u987a\u5e8f\uff1a\u9700\u8981\u62fc\u63a5\u97f3\u9891\u6309 i \u51fa\u73b0\u987a\u5e8f\uff0c\u4f9d\u6b21\u62fc\u63a5\u5728 \u539f\u59cb\u97f3\u9891\uff08 source \uff09 \u540e\u9762\u3002 \u5982\u679c save_as \u53c2\u6570\u6307\u5b9a\u683c\u5f0f\u8ddf \u539f\u59cb\u97f3\u9891\uff08 source \uff09 \u683c\u5f0f\u3001\u62fc\u63a5\u97f3\u9891\u683c\u5f0f\u4e0d\u4e00\u81f4\uff0c\u7cfb\u7edf\u4f1a \u81ea\u52a8\u8f6c\u7801 \u539f\u59cb\u97f3\u9891\u3001\u62fc\u63a5\u97f3\u9891\u6210 save_as \u53c2\u6570\u6307\u5b9a\u683c\u5f0f\uff1b\u5982\u679c save_as \u53c2\u6570\u672a\u6307\u5b9a\uff0c\u62fc\u63a5\u97f3\u9891\u8ddf\u539f\u59cb\u97f3\u9891\u683c\u5f0f\u4e0d\u4e00\u81f4\uff0c\u7cfb\u7edf\u4f1a\u81ea\u52a8\u8f6c\u7801\u62fc\u63a5\u97f3\u9891\u6210\u539f\u59cb\u97f3\u9891\u683c\u5f0f\u3002","title":"\u62fc\u63a5\u53c2\u6570"},{"location":"cloud/av/#_28","text":"\u83b7\u53d6\u97f3/\u89c6\u9891\u6587\u4ef6\u7684\u5143\u4fe1\u606f\u3002 \u53c2\u6570 \u7c7b\u578b \u5fc5\u9009 \u8bf4\u660e type string \u662f \u56fa\u5b9a\u503c\uff0c probe","title":"\u5143\u6570\u636e\u83b7\u53d6"},{"location":"cloud/av/#_29","text":"\u591a\u4e2a\u4efb\u52a1\u6309\u63d0\u4ea4\u4efb\u52a1\u53c2\u6570\u7684\u5148\u540e\u987a\u5e8f\uff0c\u5bf9\u539f\u6587\u4ef6\u8fdb\u884c\u94fe\u5f0f\u5904\u7406\u3002 \u53c2\u6570 \u7c7b\u578b \u5fc5\u9009 \u8bf4\u660e type string \u662f \u56fa\u5b9a\u503c\uff0c chain avopts string \u662f \u94fe\u5f0f\u5904\u7406\u53c2\u6570\uff0c\u683c\u5f0f\u4e3a /type1/key1/value1/type2/key2/value2... \uff0c\u53c2\u6570\u89c1\u300c\u53c2\u6570\u300d return_info boolean \u5426 \u56de\u8c03\u4fe1\u606f\u662f\u5426\u5305\u542b\u8f93\u51fa\u6587\u4ef6\u7684\u5143\u6570\u636e\uff0c\u5143\u6570\u636e\u683c\u5f0f\u4e3a JSON\uff0c\u9ed8\u8ba4 false save_as string \u5426 \u8f93\u51fa\u6587\u4ef6\u4fdd\u5b58\u8def\u5f84\uff0c\u9ed8\u8ba4\u539f\u59cb\u97f3\u9891\u6240\u5728\u76ee\u5f55+\u7cfb\u7edf\u968f\u673a\u751f\u6210\u7684\u6587\u4ef6\u540d ** \u94fe\u5f0f\u5904\u7406\u53c2\u6570 ** \u53c2\u6570 \u7c7b\u578b \u5fc5\u9009 \u8bf4\u660e /<type>/<avopts> string \u662f \u591a\u4e2a\u529f\u80fd\u6807\u8bc6 type \u4ee5\u53ca\u5176\u5bf9\u5e94\u7684\u5904\u7406\u53c2\u6570 avopts ** \u8bf7\u6c42\u6837\u4f8b ** { \"type\": \"chain\", \"avopts\": \"/video/i/Zm9vLm1wNA==/video/s/480p(16:9)/wmImg/L3Rlc3QvbG9nby5wbmc=\", \"save_as\": \"/foo.jpg\" } \u4e0a\u8ff0\u4efb\u52a1\u5148\u89e3\u6790 /video/i/Zm9vLm1wNA== \u90e8\u5206\uff0c\u548c\u6e90\u89c6\u9891\u8fdb\u884c\u62fc\u63a5\uff1b\u4e4b\u540e\u89e3\u6790 /video/s/480p(16:9)/vb/300/r/25/vcodec/libx264/wmImg/L3Rlc3QvbG9nby5wbmc= \uff0c\u5c06\u4e0a\u4e00\u6b65\u8f93\u51fa\u7684\u89c6\u9891\u7684\u5206\u8fa8\u7387\u8f6c\u7801\u6210 480p(16:9) \u5e76\u540c\u65f6\u52a0\u4e0a\u6c34\u5370\uff1b\u6700\u540e\u8f93\u51fa\u6587\u4ef6\u4fdd\u5b58\u81f3 /foo.mp4 \u3002 ** \u6ce8 ** \u6700\u591a\u5305\u542b 4 \u4e2a\u5b50\u4efb\u52a1\u3002 \u622a\u56fe\u4efb\u52a1\u3001\u89c6\u9891\u5207\u7247\u4efb\u52a1\u4e0d\u4ea7\u751f\u97f3\u89c6\u9891\u8f93\u51fa\u7684\u4efb\u52a1\uff0c\u4ec5\u5141\u8bb8\u653e\u7f6e\u5728\u5b50\u4efb\u52a1\u5217\u8868\u7684\u672b\u5c3e\u3002 \u5982\u6709\u7591\u95ee\u8bf7 \u8054\u7cfb\u6211\u4eec","title":"\u94fe\u5f0f\u5904\u7406"},{"location":"cloud/av_pretreatment/","text":"** \u8be5\u6587\u6863\u4e3a\u65e7\u7248\u5f02\u6b65\u89c6\u9891\u5904\u7406\u6587\u6863\uff0c\u65b0\u7248\u8bf7\u53c2\u8003 \u5f02\u6b65\u97f3\u89c6\u9891\u5904\u7406\u6587\u6863 ** \u89c6\u9891\u9884\u5904\u7406\u63a5\u53e3\u662f\u7528\u4e8e\u5904\u7406\u5df2\u7ecf\u4e0a\u4f20\u5230\u5bf9\u5e94\u5b58\u50a8\u7a7a\u95f4\u4e2d\u7684\u89c6\u9891\u6587\u4ef6\uff0c\u8fdb\u884c\u8f6c\u7801\u3001\u622a\u56fe\u7b49\u64cd\u4f5c\u3002\u5728\u5904\u7406\u5b8c\u6210\u4e4b\u540e\uff0c\u5f02\u6b65\u901a\u77e5\u7528\u6237\u5904\u7406\u7ed3\u679c\u3002 \u6ce8\uff1a \u6587\u4e2d\u6240\u6709 <> \u6807\u6ce8\u7684\u5b57\u6bb5\uff0c\u5747\u9700\u6839\u636e\u4f60\u7684\u5b9e\u9645\u60c5\u51b5\u66ff\u6362\uff08\u65e0\u9700 <> \u7b26\u53f7\uff0c\u4ec5\u4f5c\u6807\u6ce8\u4e4b\u7528\uff09 API \u57fa\u672c\u57df\u540d \u00b6 p0.api.upyun.com \u8bf7\u6c42\u65b9\u6cd5 \u00b6 curl -X POST \\ http://p0.api.upyun.com/pretreatment/ \\ -H \"Authorization: UPYUN <operator>:<signature>\" \\ -H \"Date: Wed, 29 Oct 2014 02:26:58 GMT\" # \u5176\u4ed6\u53ef\u9009\u53c2\u6570... \u6388\u6743\u8ba4\u8bc1 \u00b6 \u8c03\u7528\u89c6\u9891\u5904\u7406\u63a5\u53e3\u9700\u8981\u8fdb\u884c\u6388\u6743\u8ba4\u8bc1\uff0c\u901a\u8fc7\u5728 HTTP Request Header \u4e2d\u6dfb\u52a0 Authorization \u7684\u65b9\u5f0f\u6765\u8fdb\u884c\u6743\u9650\u9a8c\u8bc1\uff1a Authorization: UPYUN <operator>:<signature> \u5176\u4e2d operator \u4e3a\u64cd\u4f5c\u5458\u540d\u79f0\uff0c signature \u4e3a\u6839\u636e\u53c2\u6570\u8ba1\u7b97\u51fa\u6765\u7684\u7b7e\u540d\u3002 \u8bf7\u6c42\u7b7e\u540d \u00b6 \u6388\u6743\u8ba4\u8bc1\u8fc7\u7a0b\u4e2d\u7684 signature \u53c2\u6570\u901a\u8fc7\u4e0b\u9762\u7684\u65b9\u5f0f\u83b7\u5f97\uff1a 1. \u5c06\u53c2\u6570\u6309\u7167\u53c2\u6570\u540d\u79f0\u7684 \u5b57\u5178\u5e8f \u6392\u5e8f\u540e\uff0c\u5c06\u53c2\u6570\u952e\u503c\u5bf9\u8fde\u63a5\u6210\u4e00\u4e2a\u5b57\u7b26\u4e32\uff1b 2. \u5c06\u7b2c\u4e00\u6b65\u751f\u6210\u7684\u5b57\u7b26\u4e32\u6309\u7167\u4e0b\u9762\u7684\u89c4\u5219\u8fdb\u884c\u8fde\u63a5\uff0c\u83b7\u53d6\u5f85\u7b7e\u540d\u5b57\u7b26\u4e32\uff1a <operator_name><signature_string><md5_operator_password> \u5176\u4e2d\uff0c operator_name \u4e3a\u7528\u4e8e\u8ba4\u8bc1\u6388\u6743\u7684\u64cd\u4f5c\u5458\u540d\uff0c signature_string \u4e3a\u7b2c\u4e00\u6b65\u751f\u6210\u7684\u5b57\u7b26\u4e32\uff0c md5_operator_password \u4e3a\u5bf9\u64cd\u4f5c\u5458\u5bc6\u7801\u8fdb\u884c md5 \u8ba1\u7b97\u4e4b\u540e\u5f97\u5230\u7684\u5b57\u7b26\u4e32\uff1b 3. \u5bf9\u7b2c\u4e8c\u6b65\u751f\u6210\u7684\u5b57\u7b26\u4e32\u505a md5 \u8ba1\u7b97\uff0c\u5f97\u5230\u6700\u7ec8\u7684 signature \u503c\u3002 \u7279\u522b\u5730\uff0c\u53c2\u6570\u5b57\u7b26\u4e32\u90fd\u5fc5\u987b\u4f7f\u7528 utf-8 \u7f16\u7801\u5904\u7406\u3002 \u5047\u8bbe\u63a5\u53e3\u63d0\u4ea4\u5982\u4e0b\u53c2\u6570\uff1a bucket_name: 'imtester' tasks: 'W3sidHlwZSI6InZpZGVvIiwiYml0cmF0ZSI6IjUwMCIsInJvdGF0ZSI6ImF1dG8iLCJmb3JtYXQiOiJtcDQifSx7InR5cGUiOiJ0aHVtYm5haWwiLCJ0aHVtYl9zaWdubGUiOmZhbHNlLCJ0aHVtYl9hbW91bnQiOjEwMCwiZm9ybWF0IjoicG5nIn1d' notify_url: 'http://www.example.com/notify/' source: '/video/20130514_190031.mp4' \u7528\u4e8e\u6388\u6743\u9a8c\u8bc1\u7684\u64cd\u4f5c\u5458\u540d\u4e3a operator_tester \uff0c\u64cd\u4f5c\u5458\u5bc6\u7801\u4e3a tester_password \u3002 \u9996\u5148\u6839\u636e\u53c2\u6570\u540d\u79f0\u7684\u5b57\u6bb5\u987a\u5e8f\u8fdb\u884c\u6392\u5e8f\uff1a bucket_name: 'imtester' notify_url: 'http://www.example.com/notify/' source: '/video/20130514_190031.mp4' tasks: 'W3sidHlwZSI6InZpZGVvIiwiYml0cmF0ZSI6IjUwMCIsInJvdGF0ZSI6ImF1dG8iLCJmb3JtYXQiOiJtcDQifSx7InR5cGUiOiJ0aHVtYm5haWwiLCJ0aHVtYl9zaWdubGUiOmZhbHNlLCJ0aHVtYl9hbW91bnQiOjEwMCwiZm9ybWF0IjoicG5nIn1d' \u5c06\u6392\u5e8f\u540e\u7684\u53c2\u6570\u952e\u503c\u5bf9\u8fde\u63a5\u6210\u4e00\u4e2a\u5b57\u7b26\u4e32\uff0c\u5f97\u5230\uff1a bucket_nameimtesternotify_urlhttp://www.example.com/notify/source/video/20130514_190031.mp4tasksW3sidHlwZSI6InZpZGVvIiwiYml0cmF0ZSI6IjUwMCIsInJvdGF0ZSI6ImF1dG8iLCJmb3JtYXQiOiJtcDQifSx7InR5cGUiOiJ0aHVtYm5haWwiLCJ0aHVtYl9zaWdubGUiOmZhbHNlLCJ0aHVtYl9hbW91bnQiOjEwMCwiZm9ybWF0IjoicG5nIn1d \u8fde\u63a5\u64cd\u4f5c\u5458\u540d\u548c\u8fdb\u884c md5 \u8ba1\u7b97\u4e4b\u540e\u7684\u64cd\u4f5c\u5458\u5bc6\u7801\uff1a operator_testerbucket_nameimtesternotify_urlhttp://www.example.com/notify/source/video/20130514_190031.mp4tasksW3sidHlwZSI6InZpZGVvIiwiYml0cmF0ZSI6IjUwMCIsInJvdGF0ZSI6ImF1dG8iLCJmb3JtYXQiOiJtcDQifSx7InR5cGUiOiJ0aHVtYm5haWwiLCJ0aHVtYl9zaWdubGUiOmZhbHNlLCJ0aHVtYl9hbW91bnQiOjEwMCwiZm9ybWF0IjoicG5nIn1d97b5a9d718b7a2064f7e7673c4d8bcb8 \u5c06\u5f97\u5230\u7684\u5b57\u7b26\u4e32\u8fdb\u884c md5 \u8ba1\u7b97\uff0c\u5f97\u5230\u6700\u7ec8\u7684 signature \u503c\u4e3a ad91a9ab81ecc34e973844a6723ce354 \u7279\u522b\u5730\uff0c signature \u53c2\u6570\u4e0d\u53c2\u4e0e\u7b7e\u540d\u8ba1\u7b97\u3002 \u56de\u8c03\u7b7e\u540d \u00b6 signature \u7684\u8ba1\u7b97\u65b9\u6cd5\uff1a md5(<operator_name><md5_operator_password><task_id><timestamp>), \u5e76\u53d6\u4e2d\u95f4 16 \u4f4d\u3002 \u89c6\u9891\u5904\u7406 \u00b6 \u63d0\u4ea4\u89c6\u9891\u5904\u7406\u8bf7\u6c42\u5230\u5904\u7406\u961f\u5217\uff0c\u5904\u7406\u5b8c\u6210\u4e4b\u540e\u5f02\u6b65\u56de\u8c03\u901a\u77e5\u7528\u6237 \u8bf7\u6c42\u5730\u5740 \u00b6 http://p0.api.upyun.com/pretreatment/ \u8bf7\u6c42\u65b9\u6cd5 \u00b6 POST\uff0c\u9700\u8981\u8fdb\u884c\u6388\u6743\u9a8c\u8bc1 \u8bf7\u6c42\u53c2\u6570 \u00b6 \u53c2\u6570 \u7c7b\u578b \u5fc5\u9009 \u53c2\u6570\u8bf4\u660e bucket_name string true \u7a7a\u95f4\u540d\u79f0\uff0c\u5373\u8981\u5904\u7406\u7684\u6587\u4ef6\u6240\u5728\u7684\u7a7a\u95f4 source string true \u5f85\u5904\u7406\u6e90\u6587\u4ef6\u8def\u5f84 notify_url string true \u5f02\u6b65\u56de\u8c03\u5730\u5740\uff0c\u5728\u5904\u7406\u5b8c\u6210\u4e4b\u540e\u5c06\u4f1a\u8fdb\u884c\u5f02\u6b65\u901a\u77e5 tasks string true \u63d0\u4ea4\u7684\u4efb\u52a1\u6570\u636e\uff0cbase64 \u5904\u7406\u4e4b\u540e\u7684\u5b57\u7b26\u4e32 accept string false \u5982\u679c\u6307\u5b9a\u4e3a json \uff0c\u5219\u5728\u56de\u8c03\u65f6\u4f1a\u8fd4\u56de application/json \u683c\u5f0f\u7684\u5185\u5bb9\uff0c\u5426\u5219\u8fd4\u56de application/x-www-form-urlencoded \u683c\u5f0f\u7684\u5185\u5bb9 tasks \u53c2\u6570\u901a\u8fc7\u4e0b\u9762\u4e09\u4e2a\u6b65\u9aa4\u751f\u6210\uff1a 1. \u7ec4\u88c5\u4e1a\u52a1\u53c2\u6570\uff0c\u6bcf\u6b21\u6700\u591a\u53ef\u4ee5\u63d0\u4ea4 10 \u7ec4\u5904\u7406\u53c2\u6570\uff1b [ { type: 'video', bitrate: 4000, ... }, ... ] 2. \u5c06\u4e1a\u52a1\u53c2\u6570\u8f6c\u6362\u4e3a JSON \u5b57\u7b26\u4e32\uff1b 3. \u5bf9\u7b2c\u4e8c\u6b65\u751f\u6210\u7684\u5b57\u7b26\u4e32\u8fdb\u884c base64 encode \u5904\u7406\u3002 \u5904\u7406\u53c2\u6570 \u00b6 \u53c8\u62cd\u4e91\u7684\u89c6\u9891\u5904\u7406\u670d\u52a1\u76ee\u524d\u652f\u6301\u56db\u79cd\u7c7b\u578b\u7684\u5904\u7406\u8bf7\u6c42\uff1a \u89c6\u9891\u8f6c\u7801 HLS \u5207\u5272 \u89c6\u9891\u622a\u56fe \u89c6\u9891\u4fe1\u606f\u83b7\u53d6 \u5176\u4e2d\uff0c \u89c6\u9891\u4fe1\u606f\u8bfb\u53d6 \u7684\u4efb\u52a1\u53ef\u7528\u4e8e\u83b7\u53d6\u7a7a\u95f4\u5185\u7684\u4efb\u4e00\u89c6\u9891\u6587\u4ef6\u7684\u6e90\u4fe1\u606f 1. \u89c6\u9891\u8f6c\u7801 \u53c2\u6570 \u7c7b\u578b \u5fc5\u9009 \u53c2\u6570\u8bf4\u660e type string true \u5904\u7406\u7c7b\u578b\uff0c\u8fdb\u884c\u89c6\u9891\u8f6c\u7801\u65f6\u503c\u5fc5\u987b\u4e3a video bitrate integer false \u89c6\u9891\u6bd4\u7279\u7387\uff0c\u5355\u4f4d kbit/s \uff0c\u9ed8\u8ba4\u6309\u7167\u89c6\u9891\u539f\u59cb\u6bd4\u7279\u7387\u5904\u7406 scale string false \u89c6\u9891\u5206\u8fa8\u7387\uff0c\u683c\u5f0f 1024:768 \uff0c\u9ed8\u8ba4\u6309\u7167\u539f\u59cb\u5206\u8fa8\u7387\u5904\u7406 auto_scale boolean false \u662f\u5426\u6839\u636e\u5206\u8fa8\u7387\u81ea\u52a8\u8c03\u6574\u89c6\u9891\u957f\u5bbd\u6bd4\u4f8b\uff0c\u4ec5\u5f53\u4f20\u9012\u4e86 scale \u53c2\u6570\u65f6\u6709\u6548 frame_rate integer false \u5e27\u7387\uff0c\u65e2\u6bcf\u79d2\u663e\u793a\u7684\u5e27\u6570\uff0c\u5e38\u7528\u5e27\u7387\uff1a\"24\"\u3001\"25\"\u3001\"30\"\u7b49\uff0c\u9ed8\u8ba4\u6309\u7167\u539f\u59cb\u5e27\u7387\u5904\u7406 rotate string false \u65cb\u8f6c\u89d2\u5ea6\uff0c\u9ed8\u8ba4\u6309\u7167\u539f\u59cb\u89c6\u9891\u89d2\u5ea6\u5904\u7406 map_metadata boolean false \u662f\u5426\u4fdd\u7559\u89c6\u9891 meta \u4fe1\u606f\uff0c\u9ed8\u8ba4\u503c true audio_codec string false \u8bbe\u7f6e\u97f3\u9891\u7f16\u7801\u5668, \u53ef\u9009: \"libmp3lame\", \"libfdk_aac\", \"copy\" video_codec string false \u8bbe\u7f6e\u89c6\u9891\u7f16\u7801\u5668, \u53ef\u9009: \"libx264\", \"libtheora\", \"copy\" disable_audio boolean false \u662f\u5426\u7981\u6389\u97f3\u9891\uff0c\u9ed8\u8ba4 false disable_video boolean false \u662f\u5426\u7981\u6389\u89c6\u9891\uff0c\u9ed8\u8ba4 false format string false \u89c6\u9891\u8f93\u51fa\u683c\u5f0f\uff0c\u652f\u6301 mp4/flv\uff0c\u9ed8\u8ba4\u6309\u7167\u539f\u59cb\u683c\u5f0f\u8f93\u51fa accelerate_factor float false \u8bbe\u7f6e\u89c6\u9891\u52a0\u901f\u7684\u500d\u6570\uff0c\u53d6\u503c\u8303\u56f4\uff3b1.0\uff0c10.0\uff3d\u8fd9\u4e2a\u503c\u662f\u4e00\u4e2a\u6d6e\u70b9\u6570\uff0c\u53ef\u4ee5\u662f 2.5 \uff0c\u8868\u793a\u52a0\u901f 2.5 \u500d save_as string false \u8f6c\u7801\u540e\u8f93\u51fa\u7684\u6587\u4ef6\u4fdd\u5b58\u8def\u5f84\uff08\u540c\u4e00\u4e2a\u7a7a\u95f4\u4e0b\uff09\uff0c\u5982\u679c\u6ca1\u6709\u4f20\u9012\uff0c\u4f1a\u6839\u636e\u8bf7\u6c42\u7684\u53c2\u6570\u751f\u6210\u4e00\u4e2a\u6587\u4ef6\u540d\u4fdd\u5b58\u5728\u539f\u59cb\u6587\u4ef6\u540c\u76ee\u5f55\u4e0b return_info boolean false \u662f\u5426\u8fd4\u56de\u89c6\u9891\u5143\u6570\u636e\uff0c\u4ec5\u5f53\u5904\u7406\u7c7b\u578b\u4e3a video \u65f6\u6709\u6548\uff0c\u9ed8\u8ba4 false start_time string false \u89c6\u9891\u8d77\u59cb\u5904\u7406\u65f6\u95f4\uff0c\u683c\u5f0f HH:MM:SS \uff0c\u9ed8\u8ba4\u4e3a\u89c6\u9891\u5f00\u59cb end_time string false \u89c6\u9891\u7ed3\u675f\u5904\u7406\u65f6\u95f4\uff0c\u683c\u5f0f HH:MM:SS \uff0c\u9ed8\u8ba4\u4e3a\u89c6\u9891\u7ed3\u675f watermark_img string false \u6c34\u5370\u56fe\u7247\u8def\u5f84\uff0c\u5efa\u8bae\u4f7f\u7528 png \u683c\u5f0f\u56fe\u7247\uff0c\u6682\u65f6\u4e0d\u652f\u6301\u5916\u94fe watermark_gravity string false \u6c34\u5370\u56fe\u7247\u4f4d\u7f6e\uff0c\u652f\u6301 NorthWest \uff0c North \uff0c NorthEast \uff0c West \uff0c Center \uff0c East \uff0c SouthWest \uff0c South \uff0c SouthEast \uff0c\u9ed8\u8ba4 NorthEast watermark_dx int false \u6c34\u5370\u56fe\u7247\u6a2a\u5750\u6807\u504f\u79fb\u91cf\uff0c\u5355\u4f4d px\uff0c\u5f53\u6c34\u5370\u4f4d\u7f6e\u4e3a NorthEast \u65f6\uff0c\u9ed8\u8ba4\u503c\u4e3a -20. \u5176\u4f59\u60c5\u51b5\u4e0b\u9ed8\u8ba4\u503c\u4e3a 0 watermark_dy int false \u6c34\u5370\u56fe\u7247\u7eb5\u5750\u6807\u504f\u79fb\u91cf\uff0c\u5355\u4f4d px\uff0c\u5f53\u6c34\u5370\u4f4d\u7f6e\u4e3a NorthEast \u65f6\uff0c\u9ed8\u8ba4\u503c\u4e3a 15. \u5176\u4f59\u60c5\u51b5\u4e0b\u9ed8\u8ba4\u503c\u4e3a 0 2. HLS \u8f6c\u7801\u5207\u7247 HLS\uff08 HTTP Live Streaming \uff09 \u8f6c\u7801\u5207\u5272\u5904\u7406\u9664\u4e86 hls_time \u4e4b\u5916\u5176\u4ed6\u53c2\u6570\u4e0e\u666e\u901a\u89c6\u9891\u8f6c\u7801\u4e00\u81f4 \u53c2\u6570 \u7c7b\u578b \u5fc5\u9009 \u53c2\u6570\u8bf4\u660e type string true \u5904\u7406\u7c7b\u578b\uff0c\u8fdb\u884c hls \u5207\u7247\u65f6\u503c\u5fc5\u987b\u4e3a hls hls_time string true \u6307\u5b9a\u5207\u5272\u7684\u65f6\u95f4\u7247\u957f\u5ea6 3. \u89c6\u9891\u622a\u56fe \u53c2\u6570 \u7c7b\u578b \u5fc5\u9009 \u53c2\u6570\u8bf4\u660e type string true \u5904\u7406\u7c7b\u578b\uff0c\u622a\u56fe\u65f6\u503c\u5fc5\u987b\u4e3a thumbnail thumb_single boolean true \u662f\u5426\u4ec5\u622a\u53d6\u5355\u5f20\u56fe\u7247\uff0c\u9ed8\u8ba4\u503c true thumb_amount integer false \u622a\u56fe\u6570\u91cf\uff0c\u5f53 thumb_single \u53c2\u6570\u7684\u503c\u4e3a false \u65f6\uff0c\u672c\u53c2\u6570\u4e3a\u5fc5\u987b thumb_start string false \u622a\u56fe\u5f00\u59cb\u65f6\u95f4\uff0c\u683c\u5f0f\u4e3a 00:04:13 \uff0c\u9ed8\u8ba4\u503c\u4e3a 00:00:00 thumb_end string false \u622a\u56fe\u7ed3\u675f\u65f6\u95f4\uff0c\u683c\u5f0f\u4e3a 00:09:13 \uff0c\u9ed8\u8ba4\u503c\u4e3a\u89c6\u9891\u7ed3\u675f\u65f6\u95f4 thumb_scale string false \u622a\u56fe\u5c3a\u5bf8\uff0c\u683c\u5f0f\u4e3a 1024:768 \uff0c\u9ed8\u8ba4\u503c\u4e3a\u89c6\u9891\u539f\u59cb\u5c3a\u5bf8 thumb_format string false \u622a\u56fe\u8f93\u51fa\u683c\u5f0f\uff0c\u652f\u6301 png/jpg \u683c\u5f0f\uff0c\u9ed8\u8ba4 jpg 4. \u89c6\u9891\u5143\u6570\u636e\u83b7\u53d6 \u53c2\u6570 \u7c7b\u578b \u5fc5\u9009 \u53c2\u6570\u8bf4\u660e type string true \u5904\u7406\u7c7b\u578b\uff0c\u83b7\u53d6\u89c6\u9891\u6587\u4ef6\u5143\u6570\u636e\u65f6\u503c\u5fc5\u987b\u4e3a probe 5. \u97f3\u9891\u8f6c\u7801 \u53c2\u6570 \u7c7b\u578b \u5fc5\u9009 \u53c2\u6570\u8bf4\u660e type string true \u5904\u7406\u7c7b\u578b\uff0c\u8fdb\u884c\u97f3\u9891\u8f6c\u7801\u65f6\u503c\u5fc5\u987b\u4e3a audio format string false \u97f3\u9891\u8f93\u51fa\u683c\u5f0f\uff0c\u652f\u6301 mp4/mp3\uff0c\u9ed8\u8ba4\u6309\u7167\u539f\u59cb\u683c\u5f0f\u8f93\u51fa audio_channel integer false \u58f0\u9053\uff0c\u9ed8\u8ba4 2 audio_bitrate integer false \u6bd4\u7279\u7387\uff0c\u5982 64 audio_vbr integer false variable bitrate [0-9] map_metadata boolean false \u662f\u5426\u4fdd\u7559\u89c6\u9891 meta \u4fe1\u606f\uff0c\u9ed8\u8ba4\u503c true start_time string false \u97f3\u9891\u8d77\u59cb\u5904\u7406\u65f6\u95f4\uff0c\u683c\u5f0f HH:MM:SS \uff0c\u9ed8\u8ba4\u4e3a\u89c6\u9891\u5f00\u59cb end_time string false \u97f3\u9891\u7ed3\u675f\u5904\u7406\u65f6\u95f4\uff0c\u683c\u5f0f HH:MM:SS \uff0c\u9ed8\u8ba4\u4e3a\u89c6\u9891\u7ed3\u675f \u8fd4\u56de\u7ed3\u679c \u00b6 \u6210\u529f\u63d0\u4ea4\u5904\u7406\u8bf7\u6c42\u4e4b\u540e\uff0c\u63a5\u53e3\u4f1a\u9488\u5bf9\u63d0\u4ea4\u7684\u5904\u7406\u4efb\u52a1\u8fd4\u56de\u4e00\u7ec4\u552f\u4e00\u7684 task_id \uff0c\u53ef\u4ee5\u6839\u636e\u8fd9\u4e2a task_id \u67e5\u8be2\u5904\u7406\u8fdb\u5ea6\u3002 [ '35f0148d414a688a275bf915ba7cebb2', '98adbaa52b2f63d6d7f327a0ff223348', ... ] \u7279\u522b\u5730\uff0c\u8fd4\u56de\u7684 task_id \u7684\u987a\u5e8f\u4e0e\u63d0\u4ea4\u7684\u4efb\u52a1\u53c2\u6570 tasks \u91cc\u7684\u4efb\u52a1\u987a\u5e8f\u5339\u914d\u5bf9\u5e94\u3002 \u5904\u7406\u7ed3\u679c\u56de\u8c03\u901a\u77e5 \u00b6 \u5f53\u89c6\u9891\u5904\u7406\u5b8c\u6210\u4e4b\u540e\uff0c\u7cfb\u7edf\u5c06\u6839\u636e\u4efb\u52a1\u63d0\u4ea4\u65f6\u7684 notify_url \u53c2\u6570\uff0c\u5c06\u5904\u7406\u7ed3\u679c\u4ee5 HTTP POST \u8bf7\u6c42\u8fdb\u884c\u56de\u8c03\u901a\u77e5\u3002 \u56de\u8c03\u53c2\u6570 \u00b6 \u53c2\u6570 \u7c7b\u578b \u53c2\u6570\u8bf4\u660e bucket_name string \u89c6\u9891\u6587\u4ef6\u6240\u5728\u7a7a\u95f4\u540d status_code integer \u5904\u7406\u7ed3\u679c\u72b6\u6001\u7801\uff0c 200 \u8868\u793a\u6210\u529f\u5904\u7406 path array \u751f\u6210\u7684\u76ee\u6807\u6587\u4ef6\u4fdd\u5b58\u8def\u5f84 description string \u5904\u7406\u7ed3\u679c\u63cf\u8ff0 task_id string \u4efb\u52a1\u5bf9\u5e94\u7684 task_id info string \u89c6\u9891\u6587\u4ef6\u7684\u5143\u6570\u636e\u4fe1\u606f\uff0c\u7ecf\u8fc7 base64 \u5904\u7406\u8fc7\u4e4b\u540e\u7684 JSON \u5b57\u7b26\u4e32\uff0c\u4ec5\u5f53\u63d0\u89c6\u9891\u8f6c\u7801\u4efb\u52a1\uff0c\u4e14\u5904\u7406\u53c2\u6570\u4e2d\u5305\u542b return_info \u4e14\u503c\u4e3a true \u65f6\u8fd4\u56de signature string \u56de\u8c03\u9a8c\u8bc1\u7b7e\u540d \u56de\u8c03\u9a8c\u8bc1\u7b7e\u540d\u7684\u8ba1\u7b97\u65b9\u6cd5\u4e0e\u8ba4\u8bc1\u6388\u6743\u7684\u8ba1\u7b97\u65b9\u5f0f\u76f8\u540c\u3002\u7279\u522b\u5730\uff0c\u56e0\u4e3a path \u53c2\u6570\u8fd4\u56de\u7684\u6570\u636e\u662f\u4e00\u4e2a\u6570\u7ec4\uff0c \u5728\u8ba1\u7b97\u7b7e\u540d\u7684\u65f6\u5019\uff0c\u5c06\u5176\u4f7f\u7528\u7a7a\u5b57\u7b26\u4e32\u8fde\u63a5\u4e4b\u540e\u518d\u8ba1\u7b97\u7b7e\u540d\u3002 \u5904\u7406\u7ed3\u679c\u72b6\u6001\u7801 \u5b57\u6bb5\u8bf4\u660e status_cod \u8868\u793a\u8f6c\u7801\u540e\u7684\u72b6\u6001\u7801 \u72b6\u6001\u7801 \u8bf4\u660e 200 \u8f6c\u7801\u6210\u529f 400 \u63d0\u4ea4\u7684\u4efb\u52a1\u683c\u5f0f\u4e0d\u5408\u6cd5\u6216\u8005\u539f\u6587\u4ef6\u4e0d\u5408\u6cd5 406 \u7528\u6237\u6307\u5b9a\u7684\u8f6c\u7801\u7684\u53c2\u6570\u9519\u8bef 500 \u8f6c\u7801\u51fa\u73b0\u9519\u8bef 504 \u8f6c\u7801\u8d85\u65f6 info \u5b57\u6bb5\u8bf4\u660e \u5bf9 info \u7684\u503c\u8fdb\u884c base64 \u89e3\u7801\u548c JSON \u8f6c\u6362\u4e4b\u540e\uff0c\u5f97\u5230\u4e0b\u9762\u7684\u6570\u636e\uff1a { streams: [ { index: 0, video_fps: 30.0, type: \"video\", video_height: 150, codec: \"h264\", bitrate: 65304, duration: 12.866667, video_width: 150, codec_desc: \"H.264 / AVC / MPEG-4 AVC / MPEG-4 part 10\", metadata: { handler_name: \"VideoHandler\", language: \"und\" } }, { index: 1, audio_channels: 1, audio_samplerate: 44100.0, codec_desc: \"AAC (Advanced Audio Coding)\", codec: \"aac\", bitrate: 128107, \"duration: 11.971338, type: \"audio\", metadata: { handler_name: \"SoundHandler\", language: \"und\" } } ], format: { duration: 12.867, fullname: \"QuickTime / MOV\", bitrate: 193359.0, format: \"mov,mp4,m4a,3gp,3g2,mj2\" } } 1. format \u5b57\u6bb5\u8bf4\u660e \u540d\u79f0 \u7c7b\u578b \u8bf4\u660e duration float \u6587\u4ef6\u957f\u5ea6 fullname string \u683c\u5f0f\u8be6\u7ec6\u540d\u5b57 bitrate float \u603b\u6bd4\u7279\u7387 format string \u683c\u5f0f\u7b80\u79f0 filesize integer \u6587\u4ef6\u5927\u5c0f 2. stream \u5b57\u6bb5\u8bf4\u660e \u540d\u79f0 \u7c7b\u578b \u8bf4\u660e index int stream \u7684 index type string \u6d41\u7684\u7c7b\u578b codec string \u7f16\u7801\u89e3\u7801\u5668 codec_desc string \u7f16\u7801\u89e3\u7801\u5668\u7684\u5168\u540d duration float \u6d41\u7684\u957f\u5ea6 metadata object \u539f\u6570\u636e bitrate float \u6bd4\u7279\u7387 attached_pic mixed (0, 1 or None) is stream a poster image? video_width integer \u89c6\u9891\u7684\u5bbd video_height integer \u89c6\u9891\u7684\u9ad8 video_fps integer \u89c6\u9891\u7684\u5e27\u7387 audio_channels integer \u97f3\u8f68\u7684\u6570\u91cf audio_samplerate float \u91c7\u6837\u7387 \u5904\u7406\u8fdb\u5ea6\u67e5\u8be2 \u00b6 \u6839\u636e task_id \u67e5\u8be2\u4efb\u52a1\u5904\u7406\u8fdb\u5ea6 \u8bf7\u6c42\u5730\u5740 \u00b6 http://p0.api.upyun.com/status/ \u8bf7\u6c42\u65b9\u6cd5 \u00b6 GET\uff0c\u9700\u8981\u8fdb\u884c\u6388\u6743\u9a8c\u8bc1 \u8bf7\u6c42\u53c2\u6570 \u00b6 \u53c2\u6570 \u7c7b\u578b \u5fc5\u9009 \u53c2\u6570\u8bf4\u660e bucket_name string true \u5904\u7406\u6587\u4ef6\u5bf9\u5e94\u7684\u7a7a\u95f4\u540d\u79f0 task_ids string true \u4efb\u52a1 id \u4ee5 , \u4f5c\u4e3a\u5206\u9694\u7b26\uff0c\u6700\u591a 20 \u4e2a \u8fd4\u56de\u6570\u636e \u00b6 { tasks: { 35f0148d414a688a275bf915ba7cebb2: 100, 98adbaa52b2f63d6d7f327a0ff223348: 20, c3103189fa906a5354d29bd807e8dc51: null ... } } \u7279\u522b\u7684\uff0c\u5f53\u503c\u4e3a null \u65f6\uff0c\u8868\u793a\u6ca1\u6709\u67e5\u8be2\u5230\u76f8\u5173\u7684\u4efb\u52a1\u4fe1\u606f\u3002","title":"\u97f3\u89c6\u9891\u5904\u7406\uff08\u5df2\u5f03\u7528\uff09"},{"location":"cloud/av_pretreatment/#api","text":"p0.api.upyun.com","title":"API \u57fa\u672c\u57df\u540d"},{"location":"cloud/av_pretreatment/#_1","text":"curl -X POST \\ http://p0.api.upyun.com/pretreatment/ \\ -H \"Authorization: UPYUN <operator>:<signature>\" \\ -H \"Date: Wed, 29 Oct 2014 02:26:58 GMT\" # \u5176\u4ed6\u53ef\u9009\u53c2\u6570...","title":"\u8bf7\u6c42\u65b9\u6cd5"},{"location":"cloud/av_pretreatment/#_2","text":"\u8c03\u7528\u89c6\u9891\u5904\u7406\u63a5\u53e3\u9700\u8981\u8fdb\u884c\u6388\u6743\u8ba4\u8bc1\uff0c\u901a\u8fc7\u5728 HTTP Request Header \u4e2d\u6dfb\u52a0 Authorization \u7684\u65b9\u5f0f\u6765\u8fdb\u884c\u6743\u9650\u9a8c\u8bc1\uff1a Authorization: UPYUN <operator>:<signature> \u5176\u4e2d operator \u4e3a\u64cd\u4f5c\u5458\u540d\u79f0\uff0c signature \u4e3a\u6839\u636e\u53c2\u6570\u8ba1\u7b97\u51fa\u6765\u7684\u7b7e\u540d\u3002","title":"\u6388\u6743\u8ba4\u8bc1"},{"location":"cloud/av_pretreatment/#_3","text":"\u6388\u6743\u8ba4\u8bc1\u8fc7\u7a0b\u4e2d\u7684 signature \u53c2\u6570\u901a\u8fc7\u4e0b\u9762\u7684\u65b9\u5f0f\u83b7\u5f97\uff1a 1. \u5c06\u53c2\u6570\u6309\u7167\u53c2\u6570\u540d\u79f0\u7684 \u5b57\u5178\u5e8f \u6392\u5e8f\u540e\uff0c\u5c06\u53c2\u6570\u952e\u503c\u5bf9\u8fde\u63a5\u6210\u4e00\u4e2a\u5b57\u7b26\u4e32\uff1b 2. \u5c06\u7b2c\u4e00\u6b65\u751f\u6210\u7684\u5b57\u7b26\u4e32\u6309\u7167\u4e0b\u9762\u7684\u89c4\u5219\u8fdb\u884c\u8fde\u63a5\uff0c\u83b7\u53d6\u5f85\u7b7e\u540d\u5b57\u7b26\u4e32\uff1a <operator_name><signature_string><md5_operator_password> \u5176\u4e2d\uff0c operator_name \u4e3a\u7528\u4e8e\u8ba4\u8bc1\u6388\u6743\u7684\u64cd\u4f5c\u5458\u540d\uff0c signature_string \u4e3a\u7b2c\u4e00\u6b65\u751f\u6210\u7684\u5b57\u7b26\u4e32\uff0c md5_operator_password \u4e3a\u5bf9\u64cd\u4f5c\u5458\u5bc6\u7801\u8fdb\u884c md5 \u8ba1\u7b97\u4e4b\u540e\u5f97\u5230\u7684\u5b57\u7b26\u4e32\uff1b 3. \u5bf9\u7b2c\u4e8c\u6b65\u751f\u6210\u7684\u5b57\u7b26\u4e32\u505a md5 \u8ba1\u7b97\uff0c\u5f97\u5230\u6700\u7ec8\u7684 signature \u503c\u3002 \u7279\u522b\u5730\uff0c\u53c2\u6570\u5b57\u7b26\u4e32\u90fd\u5fc5\u987b\u4f7f\u7528 utf-8 \u7f16\u7801\u5904\u7406\u3002 \u5047\u8bbe\u63a5\u53e3\u63d0\u4ea4\u5982\u4e0b\u53c2\u6570\uff1a bucket_name: 'imtester' tasks: 'W3sidHlwZSI6InZpZGVvIiwiYml0cmF0ZSI6IjUwMCIsInJvdGF0ZSI6ImF1dG8iLCJmb3JtYXQiOiJtcDQifSx7InR5cGUiOiJ0aHVtYm5haWwiLCJ0aHVtYl9zaWdubGUiOmZhbHNlLCJ0aHVtYl9hbW91bnQiOjEwMCwiZm9ybWF0IjoicG5nIn1d' notify_url: 'http://www.example.com/notify/' source: '/video/20130514_190031.mp4' \u7528\u4e8e\u6388\u6743\u9a8c\u8bc1\u7684\u64cd\u4f5c\u5458\u540d\u4e3a operator_tester \uff0c\u64cd\u4f5c\u5458\u5bc6\u7801\u4e3a tester_password \u3002 \u9996\u5148\u6839\u636e\u53c2\u6570\u540d\u79f0\u7684\u5b57\u6bb5\u987a\u5e8f\u8fdb\u884c\u6392\u5e8f\uff1a bucket_name: 'imtester' notify_url: 'http://www.example.com/notify/' source: '/video/20130514_190031.mp4' tasks: 'W3sidHlwZSI6InZpZGVvIiwiYml0cmF0ZSI6IjUwMCIsInJvdGF0ZSI6ImF1dG8iLCJmb3JtYXQiOiJtcDQifSx7InR5cGUiOiJ0aHVtYm5haWwiLCJ0aHVtYl9zaWdubGUiOmZhbHNlLCJ0aHVtYl9hbW91bnQiOjEwMCwiZm9ybWF0IjoicG5nIn1d' \u5c06\u6392\u5e8f\u540e\u7684\u53c2\u6570\u952e\u503c\u5bf9\u8fde\u63a5\u6210\u4e00\u4e2a\u5b57\u7b26\u4e32\uff0c\u5f97\u5230\uff1a bucket_nameimtesternotify_urlhttp://www.example.com/notify/source/video/20130514_190031.mp4tasksW3sidHlwZSI6InZpZGVvIiwiYml0cmF0ZSI6IjUwMCIsInJvdGF0ZSI6ImF1dG8iLCJmb3JtYXQiOiJtcDQifSx7InR5cGUiOiJ0aHVtYm5haWwiLCJ0aHVtYl9zaWdubGUiOmZhbHNlLCJ0aHVtYl9hbW91bnQiOjEwMCwiZm9ybWF0IjoicG5nIn1d \u8fde\u63a5\u64cd\u4f5c\u5458\u540d\u548c\u8fdb\u884c md5 \u8ba1\u7b97\u4e4b\u540e\u7684\u64cd\u4f5c\u5458\u5bc6\u7801\uff1a operator_testerbucket_nameimtesternotify_urlhttp://www.example.com/notify/source/video/20130514_190031.mp4tasksW3sidHlwZSI6InZpZGVvIiwiYml0cmF0ZSI6IjUwMCIsInJvdGF0ZSI6ImF1dG8iLCJmb3JtYXQiOiJtcDQifSx7InR5cGUiOiJ0aHVtYm5haWwiLCJ0aHVtYl9zaWdubGUiOmZhbHNlLCJ0aHVtYl9hbW91bnQiOjEwMCwiZm9ybWF0IjoicG5nIn1d97b5a9d718b7a2064f7e7673c4d8bcb8 \u5c06\u5f97\u5230\u7684\u5b57\u7b26\u4e32\u8fdb\u884c md5 \u8ba1\u7b97\uff0c\u5f97\u5230\u6700\u7ec8\u7684 signature \u503c\u4e3a ad91a9ab81ecc34e973844a6723ce354 \u7279\u522b\u5730\uff0c signature \u53c2\u6570\u4e0d\u53c2\u4e0e\u7b7e\u540d\u8ba1\u7b97\u3002","title":"\u8bf7\u6c42\u7b7e\u540d"},{"location":"cloud/av_pretreatment/#_4","text":"signature \u7684\u8ba1\u7b97\u65b9\u6cd5\uff1a md5(<operator_name><md5_operator_password><task_id><timestamp>), \u5e76\u53d6\u4e2d\u95f4 16 \u4f4d\u3002","title":"\u56de\u8c03\u7b7e\u540d"},{"location":"cloud/av_pretreatment/#_5","text":"\u63d0\u4ea4\u89c6\u9891\u5904\u7406\u8bf7\u6c42\u5230\u5904\u7406\u961f\u5217\uff0c\u5904\u7406\u5b8c\u6210\u4e4b\u540e\u5f02\u6b65\u56de\u8c03\u901a\u77e5\u7528\u6237","title":"\u89c6\u9891\u5904\u7406"},{"location":"cloud/av_pretreatment/#_6","text":"http://p0.api.upyun.com/pretreatment/","title":"\u8bf7\u6c42\u5730\u5740"},{"location":"cloud/av_pretreatment/#_7","text":"POST\uff0c\u9700\u8981\u8fdb\u884c\u6388\u6743\u9a8c\u8bc1","title":"\u8bf7\u6c42\u65b9\u6cd5"},{"location":"cloud/av_pretreatment/#_8","text":"\u53c2\u6570 \u7c7b\u578b \u5fc5\u9009 \u53c2\u6570\u8bf4\u660e bucket_name string true \u7a7a\u95f4\u540d\u79f0\uff0c\u5373\u8981\u5904\u7406\u7684\u6587\u4ef6\u6240\u5728\u7684\u7a7a\u95f4 source string true \u5f85\u5904\u7406\u6e90\u6587\u4ef6\u8def\u5f84 notify_url string true \u5f02\u6b65\u56de\u8c03\u5730\u5740\uff0c\u5728\u5904\u7406\u5b8c\u6210\u4e4b\u540e\u5c06\u4f1a\u8fdb\u884c\u5f02\u6b65\u901a\u77e5 tasks string true \u63d0\u4ea4\u7684\u4efb\u52a1\u6570\u636e\uff0cbase64 \u5904\u7406\u4e4b\u540e\u7684\u5b57\u7b26\u4e32 accept string false \u5982\u679c\u6307\u5b9a\u4e3a json \uff0c\u5219\u5728\u56de\u8c03\u65f6\u4f1a\u8fd4\u56de application/json \u683c\u5f0f\u7684\u5185\u5bb9\uff0c\u5426\u5219\u8fd4\u56de application/x-www-form-urlencoded \u683c\u5f0f\u7684\u5185\u5bb9 tasks \u53c2\u6570\u901a\u8fc7\u4e0b\u9762\u4e09\u4e2a\u6b65\u9aa4\u751f\u6210\uff1a 1. \u7ec4\u88c5\u4e1a\u52a1\u53c2\u6570\uff0c\u6bcf\u6b21\u6700\u591a\u53ef\u4ee5\u63d0\u4ea4 10 \u7ec4\u5904\u7406\u53c2\u6570\uff1b [ { type: 'video', bitrate: 4000, ... }, ... ] 2. \u5c06\u4e1a\u52a1\u53c2\u6570\u8f6c\u6362\u4e3a JSON \u5b57\u7b26\u4e32\uff1b 3. \u5bf9\u7b2c\u4e8c\u6b65\u751f\u6210\u7684\u5b57\u7b26\u4e32\u8fdb\u884c base64 encode \u5904\u7406\u3002","title":"\u8bf7\u6c42\u53c2\u6570"},{"location":"cloud/av_pretreatment/#_9","text":"\u53c8\u62cd\u4e91\u7684\u89c6\u9891\u5904\u7406\u670d\u52a1\u76ee\u524d\u652f\u6301\u56db\u79cd\u7c7b\u578b\u7684\u5904\u7406\u8bf7\u6c42\uff1a \u89c6\u9891\u8f6c\u7801 HLS \u5207\u5272 \u89c6\u9891\u622a\u56fe \u89c6\u9891\u4fe1\u606f\u83b7\u53d6 \u5176\u4e2d\uff0c \u89c6\u9891\u4fe1\u606f\u8bfb\u53d6 \u7684\u4efb\u52a1\u53ef\u7528\u4e8e\u83b7\u53d6\u7a7a\u95f4\u5185\u7684\u4efb\u4e00\u89c6\u9891\u6587\u4ef6\u7684\u6e90\u4fe1\u606f 1. \u89c6\u9891\u8f6c\u7801 \u53c2\u6570 \u7c7b\u578b \u5fc5\u9009 \u53c2\u6570\u8bf4\u660e type string true \u5904\u7406\u7c7b\u578b\uff0c\u8fdb\u884c\u89c6\u9891\u8f6c\u7801\u65f6\u503c\u5fc5\u987b\u4e3a video bitrate integer false \u89c6\u9891\u6bd4\u7279\u7387\uff0c\u5355\u4f4d kbit/s \uff0c\u9ed8\u8ba4\u6309\u7167\u89c6\u9891\u539f\u59cb\u6bd4\u7279\u7387\u5904\u7406 scale string false \u89c6\u9891\u5206\u8fa8\u7387\uff0c\u683c\u5f0f 1024:768 \uff0c\u9ed8\u8ba4\u6309\u7167\u539f\u59cb\u5206\u8fa8\u7387\u5904\u7406 auto_scale boolean false \u662f\u5426\u6839\u636e\u5206\u8fa8\u7387\u81ea\u52a8\u8c03\u6574\u89c6\u9891\u957f\u5bbd\u6bd4\u4f8b\uff0c\u4ec5\u5f53\u4f20\u9012\u4e86 scale \u53c2\u6570\u65f6\u6709\u6548 frame_rate integer false \u5e27\u7387\uff0c\u65e2\u6bcf\u79d2\u663e\u793a\u7684\u5e27\u6570\uff0c\u5e38\u7528\u5e27\u7387\uff1a\"24\"\u3001\"25\"\u3001\"30\"\u7b49\uff0c\u9ed8\u8ba4\u6309\u7167\u539f\u59cb\u5e27\u7387\u5904\u7406 rotate string false \u65cb\u8f6c\u89d2\u5ea6\uff0c\u9ed8\u8ba4\u6309\u7167\u539f\u59cb\u89c6\u9891\u89d2\u5ea6\u5904\u7406 map_metadata boolean false \u662f\u5426\u4fdd\u7559\u89c6\u9891 meta \u4fe1\u606f\uff0c\u9ed8\u8ba4\u503c true audio_codec string false \u8bbe\u7f6e\u97f3\u9891\u7f16\u7801\u5668, \u53ef\u9009: \"libmp3lame\", \"libfdk_aac\", \"copy\" video_codec string false \u8bbe\u7f6e\u89c6\u9891\u7f16\u7801\u5668, \u53ef\u9009: \"libx264\", \"libtheora\", \"copy\" disable_audio boolean false \u662f\u5426\u7981\u6389\u97f3\u9891\uff0c\u9ed8\u8ba4 false disable_video boolean false \u662f\u5426\u7981\u6389\u89c6\u9891\uff0c\u9ed8\u8ba4 false format string false \u89c6\u9891\u8f93\u51fa\u683c\u5f0f\uff0c\u652f\u6301 mp4/flv\uff0c\u9ed8\u8ba4\u6309\u7167\u539f\u59cb\u683c\u5f0f\u8f93\u51fa accelerate_factor float false \u8bbe\u7f6e\u89c6\u9891\u52a0\u901f\u7684\u500d\u6570\uff0c\u53d6\u503c\u8303\u56f4\uff3b1.0\uff0c10.0\uff3d\u8fd9\u4e2a\u503c\u662f\u4e00\u4e2a\u6d6e\u70b9\u6570\uff0c\u53ef\u4ee5\u662f 2.5 \uff0c\u8868\u793a\u52a0\u901f 2.5 \u500d save_as string false \u8f6c\u7801\u540e\u8f93\u51fa\u7684\u6587\u4ef6\u4fdd\u5b58\u8def\u5f84\uff08\u540c\u4e00\u4e2a\u7a7a\u95f4\u4e0b\uff09\uff0c\u5982\u679c\u6ca1\u6709\u4f20\u9012\uff0c\u4f1a\u6839\u636e\u8bf7\u6c42\u7684\u53c2\u6570\u751f\u6210\u4e00\u4e2a\u6587\u4ef6\u540d\u4fdd\u5b58\u5728\u539f\u59cb\u6587\u4ef6\u540c\u76ee\u5f55\u4e0b return_info boolean false \u662f\u5426\u8fd4\u56de\u89c6\u9891\u5143\u6570\u636e\uff0c\u4ec5\u5f53\u5904\u7406\u7c7b\u578b\u4e3a video \u65f6\u6709\u6548\uff0c\u9ed8\u8ba4 false start_time string false \u89c6\u9891\u8d77\u59cb\u5904\u7406\u65f6\u95f4\uff0c\u683c\u5f0f HH:MM:SS \uff0c\u9ed8\u8ba4\u4e3a\u89c6\u9891\u5f00\u59cb end_time string false \u89c6\u9891\u7ed3\u675f\u5904\u7406\u65f6\u95f4\uff0c\u683c\u5f0f HH:MM:SS \uff0c\u9ed8\u8ba4\u4e3a\u89c6\u9891\u7ed3\u675f watermark_img string false \u6c34\u5370\u56fe\u7247\u8def\u5f84\uff0c\u5efa\u8bae\u4f7f\u7528 png \u683c\u5f0f\u56fe\u7247\uff0c\u6682\u65f6\u4e0d\u652f\u6301\u5916\u94fe watermark_gravity string false \u6c34\u5370\u56fe\u7247\u4f4d\u7f6e\uff0c\u652f\u6301 NorthWest \uff0c North \uff0c NorthEast \uff0c West \uff0c Center \uff0c East \uff0c SouthWest \uff0c South \uff0c SouthEast \uff0c\u9ed8\u8ba4 NorthEast watermark_dx int false \u6c34\u5370\u56fe\u7247\u6a2a\u5750\u6807\u504f\u79fb\u91cf\uff0c\u5355\u4f4d px\uff0c\u5f53\u6c34\u5370\u4f4d\u7f6e\u4e3a NorthEast \u65f6\uff0c\u9ed8\u8ba4\u503c\u4e3a -20. \u5176\u4f59\u60c5\u51b5\u4e0b\u9ed8\u8ba4\u503c\u4e3a 0 watermark_dy int false \u6c34\u5370\u56fe\u7247\u7eb5\u5750\u6807\u504f\u79fb\u91cf\uff0c\u5355\u4f4d px\uff0c\u5f53\u6c34\u5370\u4f4d\u7f6e\u4e3a NorthEast \u65f6\uff0c\u9ed8\u8ba4\u503c\u4e3a 15. \u5176\u4f59\u60c5\u51b5\u4e0b\u9ed8\u8ba4\u503c\u4e3a 0 2. HLS \u8f6c\u7801\u5207\u7247 HLS\uff08 HTTP Live Streaming \uff09 \u8f6c\u7801\u5207\u5272\u5904\u7406\u9664\u4e86 hls_time \u4e4b\u5916\u5176\u4ed6\u53c2\u6570\u4e0e\u666e\u901a\u89c6\u9891\u8f6c\u7801\u4e00\u81f4 \u53c2\u6570 \u7c7b\u578b \u5fc5\u9009 \u53c2\u6570\u8bf4\u660e type string true \u5904\u7406\u7c7b\u578b\uff0c\u8fdb\u884c hls \u5207\u7247\u65f6\u503c\u5fc5\u987b\u4e3a hls hls_time string true \u6307\u5b9a\u5207\u5272\u7684\u65f6\u95f4\u7247\u957f\u5ea6 3. \u89c6\u9891\u622a\u56fe \u53c2\u6570 \u7c7b\u578b \u5fc5\u9009 \u53c2\u6570\u8bf4\u660e type string true \u5904\u7406\u7c7b\u578b\uff0c\u622a\u56fe\u65f6\u503c\u5fc5\u987b\u4e3a thumbnail thumb_single boolean true \u662f\u5426\u4ec5\u622a\u53d6\u5355\u5f20\u56fe\u7247\uff0c\u9ed8\u8ba4\u503c true thumb_amount integer false \u622a\u56fe\u6570\u91cf\uff0c\u5f53 thumb_single \u53c2\u6570\u7684\u503c\u4e3a false \u65f6\uff0c\u672c\u53c2\u6570\u4e3a\u5fc5\u987b thumb_start string false \u622a\u56fe\u5f00\u59cb\u65f6\u95f4\uff0c\u683c\u5f0f\u4e3a 00:04:13 \uff0c\u9ed8\u8ba4\u503c\u4e3a 00:00:00 thumb_end string false \u622a\u56fe\u7ed3\u675f\u65f6\u95f4\uff0c\u683c\u5f0f\u4e3a 00:09:13 \uff0c\u9ed8\u8ba4\u503c\u4e3a\u89c6\u9891\u7ed3\u675f\u65f6\u95f4 thumb_scale string false \u622a\u56fe\u5c3a\u5bf8\uff0c\u683c\u5f0f\u4e3a 1024:768 \uff0c\u9ed8\u8ba4\u503c\u4e3a\u89c6\u9891\u539f\u59cb\u5c3a\u5bf8 thumb_format string false \u622a\u56fe\u8f93\u51fa\u683c\u5f0f\uff0c\u652f\u6301 png/jpg \u683c\u5f0f\uff0c\u9ed8\u8ba4 jpg 4. \u89c6\u9891\u5143\u6570\u636e\u83b7\u53d6 \u53c2\u6570 \u7c7b\u578b \u5fc5\u9009 \u53c2\u6570\u8bf4\u660e type string true \u5904\u7406\u7c7b\u578b\uff0c\u83b7\u53d6\u89c6\u9891\u6587\u4ef6\u5143\u6570\u636e\u65f6\u503c\u5fc5\u987b\u4e3a probe 5. \u97f3\u9891\u8f6c\u7801 \u53c2\u6570 \u7c7b\u578b \u5fc5\u9009 \u53c2\u6570\u8bf4\u660e type string true \u5904\u7406\u7c7b\u578b\uff0c\u8fdb\u884c\u97f3\u9891\u8f6c\u7801\u65f6\u503c\u5fc5\u987b\u4e3a audio format string false \u97f3\u9891\u8f93\u51fa\u683c\u5f0f\uff0c\u652f\u6301 mp4/mp3\uff0c\u9ed8\u8ba4\u6309\u7167\u539f\u59cb\u683c\u5f0f\u8f93\u51fa audio_channel integer false \u58f0\u9053\uff0c\u9ed8\u8ba4 2 audio_bitrate integer false \u6bd4\u7279\u7387\uff0c\u5982 64 audio_vbr integer false variable bitrate [0-9] map_metadata boolean false \u662f\u5426\u4fdd\u7559\u89c6\u9891 meta \u4fe1\u606f\uff0c\u9ed8\u8ba4\u503c true start_time string false \u97f3\u9891\u8d77\u59cb\u5904\u7406\u65f6\u95f4\uff0c\u683c\u5f0f HH:MM:SS \uff0c\u9ed8\u8ba4\u4e3a\u89c6\u9891\u5f00\u59cb end_time string false \u97f3\u9891\u7ed3\u675f\u5904\u7406\u65f6\u95f4\uff0c\u683c\u5f0f HH:MM:SS \uff0c\u9ed8\u8ba4\u4e3a\u89c6\u9891\u7ed3\u675f","title":"\u5904\u7406\u53c2\u6570"},{"location":"cloud/av_pretreatment/#_10","text":"\u6210\u529f\u63d0\u4ea4\u5904\u7406\u8bf7\u6c42\u4e4b\u540e\uff0c\u63a5\u53e3\u4f1a\u9488\u5bf9\u63d0\u4ea4\u7684\u5904\u7406\u4efb\u52a1\u8fd4\u56de\u4e00\u7ec4\u552f\u4e00\u7684 task_id \uff0c\u53ef\u4ee5\u6839\u636e\u8fd9\u4e2a task_id \u67e5\u8be2\u5904\u7406\u8fdb\u5ea6\u3002 [ '35f0148d414a688a275bf915ba7cebb2', '98adbaa52b2f63d6d7f327a0ff223348', ... ] \u7279\u522b\u5730\uff0c\u8fd4\u56de\u7684 task_id \u7684\u987a\u5e8f\u4e0e\u63d0\u4ea4\u7684\u4efb\u52a1\u53c2\u6570 tasks \u91cc\u7684\u4efb\u52a1\u987a\u5e8f\u5339\u914d\u5bf9\u5e94\u3002","title":"\u8fd4\u56de\u7ed3\u679c"},{"location":"cloud/av_pretreatment/#_11","text":"\u5f53\u89c6\u9891\u5904\u7406\u5b8c\u6210\u4e4b\u540e\uff0c\u7cfb\u7edf\u5c06\u6839\u636e\u4efb\u52a1\u63d0\u4ea4\u65f6\u7684 notify_url \u53c2\u6570\uff0c\u5c06\u5904\u7406\u7ed3\u679c\u4ee5 HTTP POST \u8bf7\u6c42\u8fdb\u884c\u56de\u8c03\u901a\u77e5\u3002","title":"\u5904\u7406\u7ed3\u679c\u56de\u8c03\u901a\u77e5"},{"location":"cloud/av_pretreatment/#_12","text":"\u53c2\u6570 \u7c7b\u578b \u53c2\u6570\u8bf4\u660e bucket_name string \u89c6\u9891\u6587\u4ef6\u6240\u5728\u7a7a\u95f4\u540d status_code integer \u5904\u7406\u7ed3\u679c\u72b6\u6001\u7801\uff0c 200 \u8868\u793a\u6210\u529f\u5904\u7406 path array \u751f\u6210\u7684\u76ee\u6807\u6587\u4ef6\u4fdd\u5b58\u8def\u5f84 description string \u5904\u7406\u7ed3\u679c\u63cf\u8ff0 task_id string \u4efb\u52a1\u5bf9\u5e94\u7684 task_id info string \u89c6\u9891\u6587\u4ef6\u7684\u5143\u6570\u636e\u4fe1\u606f\uff0c\u7ecf\u8fc7 base64 \u5904\u7406\u8fc7\u4e4b\u540e\u7684 JSON \u5b57\u7b26\u4e32\uff0c\u4ec5\u5f53\u63d0\u89c6\u9891\u8f6c\u7801\u4efb\u52a1\uff0c\u4e14\u5904\u7406\u53c2\u6570\u4e2d\u5305\u542b return_info \u4e14\u503c\u4e3a true \u65f6\u8fd4\u56de signature string \u56de\u8c03\u9a8c\u8bc1\u7b7e\u540d \u56de\u8c03\u9a8c\u8bc1\u7b7e\u540d\u7684\u8ba1\u7b97\u65b9\u6cd5\u4e0e\u8ba4\u8bc1\u6388\u6743\u7684\u8ba1\u7b97\u65b9\u5f0f\u76f8\u540c\u3002\u7279\u522b\u5730\uff0c\u56e0\u4e3a path \u53c2\u6570\u8fd4\u56de\u7684\u6570\u636e\u662f\u4e00\u4e2a\u6570\u7ec4\uff0c \u5728\u8ba1\u7b97\u7b7e\u540d\u7684\u65f6\u5019\uff0c\u5c06\u5176\u4f7f\u7528\u7a7a\u5b57\u7b26\u4e32\u8fde\u63a5\u4e4b\u540e\u518d\u8ba1\u7b97\u7b7e\u540d\u3002 \u5904\u7406\u7ed3\u679c\u72b6\u6001\u7801 \u5b57\u6bb5\u8bf4\u660e status_cod \u8868\u793a\u8f6c\u7801\u540e\u7684\u72b6\u6001\u7801 \u72b6\u6001\u7801 \u8bf4\u660e 200 \u8f6c\u7801\u6210\u529f 400 \u63d0\u4ea4\u7684\u4efb\u52a1\u683c\u5f0f\u4e0d\u5408\u6cd5\u6216\u8005\u539f\u6587\u4ef6\u4e0d\u5408\u6cd5 406 \u7528\u6237\u6307\u5b9a\u7684\u8f6c\u7801\u7684\u53c2\u6570\u9519\u8bef 500 \u8f6c\u7801\u51fa\u73b0\u9519\u8bef 504 \u8f6c\u7801\u8d85\u65f6 info \u5b57\u6bb5\u8bf4\u660e \u5bf9 info \u7684\u503c\u8fdb\u884c base64 \u89e3\u7801\u548c JSON \u8f6c\u6362\u4e4b\u540e\uff0c\u5f97\u5230\u4e0b\u9762\u7684\u6570\u636e\uff1a { streams: [ { index: 0, video_fps: 30.0, type: \"video\", video_height: 150, codec: \"h264\", bitrate: 65304, duration: 12.866667, video_width: 150, codec_desc: \"H.264 / AVC / MPEG-4 AVC / MPEG-4 part 10\", metadata: { handler_name: \"VideoHandler\", language: \"und\" } }, { index: 1, audio_channels: 1, audio_samplerate: 44100.0, codec_desc: \"AAC (Advanced Audio Coding)\", codec: \"aac\", bitrate: 128107, \"duration: 11.971338, type: \"audio\", metadata: { handler_name: \"SoundHandler\", language: \"und\" } } ], format: { duration: 12.867, fullname: \"QuickTime / MOV\", bitrate: 193359.0, format: \"mov,mp4,m4a,3gp,3g2,mj2\" } } 1. format \u5b57\u6bb5\u8bf4\u660e \u540d\u79f0 \u7c7b\u578b \u8bf4\u660e duration float \u6587\u4ef6\u957f\u5ea6 fullname string \u683c\u5f0f\u8be6\u7ec6\u540d\u5b57 bitrate float \u603b\u6bd4\u7279\u7387 format string \u683c\u5f0f\u7b80\u79f0 filesize integer \u6587\u4ef6\u5927\u5c0f 2. stream \u5b57\u6bb5\u8bf4\u660e \u540d\u79f0 \u7c7b\u578b \u8bf4\u660e index int stream \u7684 index type string \u6d41\u7684\u7c7b\u578b codec string \u7f16\u7801\u89e3\u7801\u5668 codec_desc string \u7f16\u7801\u89e3\u7801\u5668\u7684\u5168\u540d duration float \u6d41\u7684\u957f\u5ea6 metadata object \u539f\u6570\u636e bitrate float \u6bd4\u7279\u7387 attached_pic mixed (0, 1 or None) is stream a poster image? video_width integer \u89c6\u9891\u7684\u5bbd video_height integer \u89c6\u9891\u7684\u9ad8 video_fps integer \u89c6\u9891\u7684\u5e27\u7387 audio_channels integer \u97f3\u8f68\u7684\u6570\u91cf audio_samplerate float \u91c7\u6837\u7387","title":"\u56de\u8c03\u53c2\u6570"},{"location":"cloud/av_pretreatment/#_13","text":"\u6839\u636e task_id \u67e5\u8be2\u4efb\u52a1\u5904\u7406\u8fdb\u5ea6","title":"\u5904\u7406\u8fdb\u5ea6\u67e5\u8be2"},{"location":"cloud/av_pretreatment/#_14","text":"http://p0.api.upyun.com/status/","title":"\u8bf7\u6c42\u5730\u5740"},{"location":"cloud/av_pretreatment/#_15","text":"GET\uff0c\u9700\u8981\u8fdb\u884c\u6388\u6743\u9a8c\u8bc1","title":"\u8bf7\u6c42\u65b9\u6cd5"},{"location":"cloud/av_pretreatment/#_16","text":"\u53c2\u6570 \u7c7b\u578b \u5fc5\u9009 \u53c2\u6570\u8bf4\u660e bucket_name string true \u5904\u7406\u6587\u4ef6\u5bf9\u5e94\u7684\u7a7a\u95f4\u540d\u79f0 task_ids string true \u4efb\u52a1 id \u4ee5 , \u4f5c\u4e3a\u5206\u9694\u7b26\uff0c\u6700\u591a 20 \u4e2a","title":"\u8bf7\u6c42\u53c2\u6570"},{"location":"cloud/av_pretreatment/#_17","text":"{ tasks: { 35f0148d414a688a275bf915ba7cebb2: 100, 98adbaa52b2f63d6d7f327a0ff223348: 20, c3103189fa906a5354d29bd807e8dc51: null ... } } \u7279\u522b\u7684\uff0c\u5f53\u503c\u4e3a null \u65f6\uff0c\u8868\u793a\u6ca1\u6709\u67e5\u8be2\u5230\u76f8\u5173\u7684\u4efb\u52a1\u4fe1\u606f\u3002","title":"\u8fd4\u56de\u6570\u636e"},{"location":"cloud/image/","text":"\u5feb\u901f\u5165\u95e8 \u00b6 \u53c8\u62cd\u4e91\u5904\u7406\uff08\u56fe\u7247\u5904\u7406\uff09\u57fa\u4e8e CDN \u6216\u4e91\u5b58\u50a8\u670d\u52a1\uff0c\u60a8\u5728\u4f7f\u7528\u5b83\u4e4b\u524d\uff0c\u8bf7\u786e\u4fdd\u60a8\u5df2\u7ecf\u6ce8\u518c\u53c8\u62cd\u4e91\u8d26\u53f7\u5e76\u5b8c\u6210\u5b9e\u540d\u9a8c\u8bc1\uff0c\u8bf7\u786e\u4fdd\u60a8\u5df2\u7ecf\u521b\u5efa CDN \u670d\u52a1 \u6216 \u4e91\u5b58\u50a8\u670d\u52a1 \u3002 \u6536\u8d39\u65b9\u9762\uff0c\u56fe\u7247\u5904\u7406\u5b8c\u5168\u514d\u8d39\u3002 \u76f8\u5173\u9605\u8bfb\uff1a \u6f14\u793a WebP \u5982\u4f55\u8ba9\u60a8\u7684\u56fe\u7247\u5927\u5c0f\u5e73\u5747\u51cf\u5c11 70% \uff0c WebP \u5f00\u53d1\u4e13\u9898 \u3002 \u5f00\u53d1\u8005\u6307\u5357 \u00b6 URL \u4f5c\u56fe \u00b6 \u901a\u8fc7 URL \u8bbf\u95ee\u56fe\u7247\u65f6\uff0c\u5bf9\u56fe\u7247\u8fdb\u884c\u5904\u7406\uff0c\u5e76\u628a\u5904\u7406\u540e\u7684\u56fe\u7247\u8fd4\u56de\u3002 ** URL \u4f5c\u56fe\u7684\u683c\u5f0f ** \u56fe\u7247 URL + \u95f4\u9694\u6807\u8bc6\u7b26 + \u53c2\u6570\u6216\u7f29\u7565\u56fe\u7248\u672c \u95f4\u9694\u6807\u8bc6\u7b26\u8bf4\u660e\uff0c\u89c1 \u95f4\u9694\u6807\u8bc6\u7b26 \uff1b\u53c2\u6570\u8bf4\u660e\uff0c\u89c1 \u529f\u80fd \uff1b\u7f29\u7565\u56fe\u7248\u672c\u8bf4\u660e\uff0c\u89c1 \u7f29\u7565\u56fe\u7248\u672c \u3002 ** \u4f8b\u5982 ** \u56fe\u7247 URL \u662f https://p.upyun.com/docs/cloud/demo.jpg \uff0c \u95f4\u9694\u6807\u8bc6\u7b26\u662f ! \uff0c \u529f\u80fd\u662f \u683c\u5f0f\u8f6c\u6362\u6210 webp \uff0c \u8bbf\u95ee\u7684 URL \u662f https://p.upyun.com/docs/cloud/demo.jpg!/format/webp \u3002 \u95f4\u9694\u6807\u8bc6\u7b26 \u00b6 \u7528\u4e8e\u5206\u9694\u56fe\u7247 URL \u548c\u5904\u7406\u4fe1\u606f\uff0c\u6709 3 \u79cd\u53ef\u9009\uff0c\u5206\u522b\u662f\uff1a ! \uff08\u611f\u53f9\u53f7/\u9ed8\u8ba4\u503c\uff09\u3001 - \uff08\u4e2d\u5212\u7ebf\uff09\u548c _ \uff08\u4e0b\u5212\u7ebf\uff09\uff0c\u53ef\u767b\u5f55\u53c8\u62cd\u4e91 \u63a7\u5236\u53f0 \uff0c\u5728 \u300c\u670d\u52a1\u300d > \u300c\u529f\u80fd\u914d\u7f6e\u300d > \u300c\u4e91\u5904\u7406\u300d \u4e2d\u8bbe\u7f6e\u3002 \u7f29\u7565\u56fe\u7248\u672c \u00b6 \u7f29\u7565\u56fe\u7248\u672c\u5728\u53c8\u62cd\u4e91 \u63a7\u5236\u53f0 \uff0c\u300c\u670d\u52a1\u300d > \u300c\u529f\u80fd\u914d\u7f6e\u300d > \u300c\u4e91\u5904\u7406\u300d \u4e2d\u521b\u5efa\uff0c\u5b83\u91cc\u9762\u5305\u542b\u8bb8\u591a\u56fe\u7247\u5904\u7406\u529f\u80fd\u3002\u5982\u4e0b\u56fe\uff1a ** \u4f8b\u5982 ** \u7f29\u7565\u56fe\u7248\u672c\u540d\u79f0\u662f upyun520 \uff0c \u8bbf\u95ee\u7684 URL \u662f https://p.upyun.com/docs/cloud/demo.jpg!upyun520 \u3002 \u5176\u4e2d\uff0c ! \u662f \u95f4\u9694\u6807\u8bc6\u7b26 \u3002 \u4e0a\u4f20\u9884\u5904\u7406\uff08\u540c\u6b65\uff09 \u00b6 \u5728\u4e0a\u4f20\u56fe\u7247\u65f6\uff0c\u5bf9\u4e0a\u4f20\u7684\u56fe\u7247\u8fdb\u884c\u5904\u7406\uff0c\u5e76\u4fdd\u5b58\u5904\u7406\u540e\u7684\u56fe\u7247\u5230\u53c8\u62cd\u4e91\u5b58\u50a8\u3002 \u652f\u6301\u7684 API\uff1a REST API | FORM API | \u6587\u4ef6\u62c9\u53d6 \u3002 \u53c2\u6570\u540d\u662f x-gmkerl-thumb \uff0c\u53c2\u6570\u503c\u662f \u53c2\u6570\u6216\u7f29\u7565\u56fe\u7248\u672c \u3002\u5904\u7406\u53c2\u6570\u89c1 \u529f\u80fd \u3002 ** \u4e3e\u4f8b ** \u4f8b 1\uff1a\u8f6c\u6362\u56fe\u7247\u683c\u5f0f\u4e3a png x-gmkerl-thumb: /format/png \u4f8b 2\uff1a\u9650\u5b9a\u56fe\u7247\u5bbd\u5ea6\u4e3a 300px\u3001\u9510\u5316\u3001\u538b\u7f29\u8d28\u91cf 80\u3001\u5b58\u50a8\u4e3a png \u683c\u5f0f\uff08\u53c2\u6570\u4e0d\u533a\u5206\u5148\u540e\u987a\u5e8f\uff09 x-gmkerl-thumb: /fw/300/unsharp/true/quality/80/format/png \u4e0a\u4f20\u9884\u5904\u7406\uff08\u5f02\u6b65\uff09 \u00b6 \u5728\u4e0a\u4f20\u56fe\u7247\u65f6\uff0c\u5bf9\u4e0a\u4f20\u7684\u56fe\u7247\u8fdb\u884c\u5904\u7406\uff0c\u751f\u6210\u4e00\u5f20\u6216\u591a\u5f20\u65b0\u7684\u56fe\u7247\uff0c\u540c\u65f6\u4fdd\u5b58\u4e0a\u4f20\u7684\u56fe\u7247\u5230\u53c8\u62cd\u4e91\u5b58\u50a8\u3002\u4efb\u52a1\u4ee5\u5f02\u6b65\u7684\u65b9\u5f0f\u5904\u7406\uff0c\u5904\u7406\u5b8c\u6210\u540e\uff0c\u56de\u8c03\u901a\u77e5\u7528\u6237\u5904\u7406\u7ed3\u679c\u3002 \u652f\u6301\u7684 API\uff1a FORM API \u3002 \u53c2\u6570\u540d\u662f apps \uff0c\u53c2\u6570\u503c\u662f JSON \u6570\u7ec4\u3002\u4e00\u4e2a apps \u6700\u591a\u5141\u8bb8\u5305\u542b 10 \u4e2a\u56fe\u7247\u5904\u7406\u4efb\u52a1\u3002 \u8bbe\u7f6e\u4e86 apps \u53c2\u6570\uff0c\u4f1a\u521b\u5efa\u5f02\u6b65\u5904\u7406\u4efb\u52a1\uff0c\u5426\u5219\u4e3a\u540c\u6b65\u5904\u7406\u4efb\u52a1 ** apps \u53c2\u6570\u7ed3\u6784 ** \u53c2\u6570 \u5fc5\u9009 \u8bf4\u660e name \u662f \u4f7f\u7528\u5f02\u6b65\u56fe\u7247\u5904\u7406\u670d\u52a1\uff0c\u56fa\u5b9a\u503c thumb x-gmkerl-thumb \u662f \u56fe\u7247\u5904\u7406\u529f\u80fd\u53c2\u6570\u6216\u7f29\u7565\u56fe\u7248\u672c\u540d\u79f0\uff0c\u5904\u7406\u53c2\u6570\u89c1 \u529f\u80fd x-gmkerl-split \u5426 \u56fe\u7247\u5206\u5757\uff0c\u6309 \u5bbdx\u9ad8 \u628a\u56fe\u7247\u5206\u6210\u6570\u5757\uff0c\u89c1\u300c\u6ce8\u300d save_as \u5426 \u7ed3\u679c\u56fe\u7247\u4fdd\u5b58\u8def\u5f84 notify_url \u5426 \u56de\u8c03\u5730\u5740\uff0c\u4e0d\u586b\u65f6\u4f7f\u7528 \u4e0a\u4f20\u53c2\u6570 \u4e2d\u7684 notify_url ** save_as \u652f\u6301\u7684\u53d8\u91cf ** \u53d8\u91cf\u540d \u8bf4\u660e {filepath} \u539f\u56fe\u5728\u5b58\u50a8\u4e2d\u7684\u8def\u5f84 {filename} \u539f\u56fe\u6587\u4ef6\u540d {suffix} \u539f\u56fe\u6587\u4ef6\u540d\u540e\u7f00\uff0c\u4e0d\u5e26\u70b9 {row} \u5207\u5272\u540e\u5c0f\u56fe\u7684\u4f4d\u7f6e\u884c\u53f7\uff0c\u4ece 0 \u5f00\u59cb\uff0c\u4ece\u5de6\u5230\u53f3\u4f9d\u6b21\u589e\u5927 {column} \u5207\u5272\u540e\u5c0f\u56fe\u7684\u4f4d\u7f6e\u5217\u53f7\uff0c\u4ece 0 \u5f00\u59cb\uff0c\u4ece\u4e0a\u5230\u4e0b\u4f9d\u6b21\u589e\u5927 {seq} \u5207\u5272\u540e\u5c0f\u56fe\u7684\u5e8f\u5217\u53f7\uff0c\u4ece 0 \u5f00\u59cb\uff0c\u4ece\u5de6\u5230\u53f3\u3001\u4ece\u4e0a\u5230\u4e0b\u4f9d\u6b21\u589e\u5927 ** \u6ce8 ** x-gmkerl-split \u4f1a\u5728 x-gmkerl-thumb \u7684\u57fa\u7840\u4e0a\u628a\u56fe\u7247\u5206\u6210\u6570\u5757\uff0c\u7528\u6237\u53ef\u4ee5\u6839\u636e\u56de\u8c03\u4fe1\u606f\u4e2d\u7684\u884c\u53f7\u8ddf\u5217\u53f7\u6765\u786e\u5b9a\u5206\u5757\u540e\u7684\u56fe\u7247\u5728\u539f\u56fe\u4e2d\u7684\u4f4d\u7f6e\u3002 x-gmkerl-split \u4f1a\u8f93\u51fa\u591a\u4e2a\u56fe\u7247\uff0c\u4ece\u5de6\u4e0a\u89d2\u5f00\u59cb\uff0c\u5f80\u53f3\u5217\u53f7\u4ece 0 \u4f9d\u6b21\u589e\u5927\uff0c\u5f80\u4e0b\u884c\u53f7\u4ece 0 \u4f9d\u6b21\u589e\u5927\uff0c\u5e8f\u5217\u53f7\u6309\u884c\u4ece\u5de6\u5f80\u53f3\u3001\u4ece\u4e0a\u5230\u4e0b\u3001\u4ece 0 \u4f9d\u6b21\u589e\u5927\u3002 ** \u4e3e\u4f8b ** apps = [ { \"name\": \"thumb\", \"x-gmkerl-thumb\": \"/fw/300/quality/95\", \"save_as\": \"/path/to/fw_300.jpg\", \"notify_url\": \"http://your/notify/url\" }, ...... ] ** \u56de\u8c03\u901a\u77e5 ** \u4efb\u52a1\u5904\u7406\u5b8c\u6210\u540e\uff0c\u5411 notify_url \u5730\u5740\u53d1\u9001\u56de\u8c03\u901a\u77e5\u3002\u56de\u8c03\u4fe1\u606f\u4e3a JSON \u683c\u5f0f\uff0c\u5b57\u6bb5\u540d\u53ca\u542b\u4e49\u5982\u4e0b\uff1a \u5b57\u6bb5\u540d \u7c7b\u578b \u8bf4\u660e task_id string \u5f02\u6b65\u5904\u7406\u4efb\u52a1 ID\uff08\u5728\u4e0a\u4f20\u65f6\u8fd4\u56de\uff09 service string \u6587\u4ef6\u6240\u5728\u7a7a\u95f4\u540d status_code integer \u5904\u7406\u7ed3\u679c\u72b6\u6001\u7801\uff0c 200 \u8868\u793a\u6210\u529f\u5904\u7406 imginfo map \u8f93\u51fa\u5355\u5f20\u56fe\u7247\u4fe1\u606f imginfos array \u8f93\u51fa\u591a\u5f20\u56fe\u7247\u4fe1\u606f error string \u9519\u8bef\u4fe1\u606f imginfo \u3001 imginfos \u4e2d\u5305\u542b\u4fe1\u606f\u5982\u4e0b\uff1a \u5b57\u6bb5\u540d \u7c7b\u578b \u8bf4\u660e path string \u4f5c\u56fe\u7ed3\u679c\u4fdd\u5b58\u8def\u5f84\uff08 save_as \u53c2\u6570\u6307\u5b9a\uff09 type string \u56fe\u7247\u7c7b\u578b width integer \u56fe\u7247\u5bbd\u5ea6 height integer \u56fe\u7247\u9ad8\u5ea6 frame integer \u56fe\u7247\u5e27\u6570 row integer \u76f8\u5bf9\u4e8e\u5de6\u4e0a\u89d2\u7684\u884c\u53f7\uff0c\u4ece 0 \u5f00\u59cb\uff0c\u4ec5\u5f53\u56fe\u7247\u5206\u5757\u65f6\u6709\u6548 column integer \u76f8\u5bf9\u4e8e\u5de6\u4e0a\u89d2\u7684\u5217\u53f7\uff0c\u4ece 0 \u5f00\u59cb\uff0c\u4ec5\u5f53\u56fe\u7247\u5206\u5757\u65f6\u6709\u6548 ** \u4e3e\u4f8b ** \u4f8b 1\uff1a\u8f93\u51fa\u5355\u5f20\u56fe\u7247\u7684\u56de\u8c03\u4fe1\u606f { \"task_id\": \"b52c96bea30646abf8170f333bbd42b9\", \"service\": \"upyun-demo\", \"status_code\": 200, \"imginfo\": { \"path\": \"/images/upyun.jpg\", \"type\": \"jpg\", \"width\": 720, \"height\": 360, \"frames\": 1 } } \u4f8b 2\uff1a\u8f93\u51fa\u591a\u5f20\u56fe\u7247\uff08\u4f7f\u7528\u4e86 \u56fe\u7247\u5206\u5757 x-gmkerl-split \uff09 \u7684\u56de\u8c03\u4fe1\u606f { \"task_id\": \"b52c96bea30646abf8170f333bbd42b9\", \"service\": \"upyun-demo\", \"status_code\": 200, \"imginfos\": [ { \"path\": \"/images/upyun.jpg-1.jpg\", \"type\": \"jpg\", \"width\": 72, \"height\": 36, \"frames\": 1, \"row\": 0, \"column\": 0 }, { \"path\": \"/images/upyun.jpg-2.jpg\", \"type\": \"jpg\", \"width\": 72, \"height\": 36, \"frames\": 1, \"row\": 0, \"column\": 1 } ] } \u539f\u56fe\u4fdd\u62a4\u5bc6\u94a5 \u00b6 \u4e0a\u4f20\u56fe\u7247\u65f6\uff0c\u4fdd\u62a4\u5bc6\u94a5\u901a\u8fc7 REST API | FORM API \u7684 Content-Secret \u8bbe\u7f6e\u3002 \u5df2\u7ecf\u5b58\u5728\u5b58\u50a8\u7684\u56fe\u7247\uff0c\u53ef\u4ee5\u901a\u8fc7\u7f16\u8f91 Metadata \u8bbe\u7f6e\u4fdd\u62a4\u5bc6\u94a5\u3002 \u56fe\u7247\u6dfb\u52a0\u4fdd\u62a4\u5bc6\u94a5\u540e\uff0c\u8bbf\u95ee\u65f6\u9700\u8981\u5e26\u4e0a \u300c \u95f4\u9694\u6807\u8bc6\u7b26 \u300d \u548c \u300c\u4fdd\u62a4\u5bc6\u94a5\u300d\uff0c\u624d\u80fd\u8bbf\u95ee\u56fe\u7247\u3002 \u4f8b\u5982\uff0c\u4fdd\u62a4\u5bc6\u94a5\u662f abc \uff0c \u8bbf\u95ee\u56fe\u7247 URL \u662f https://p.upyun.com/docs/cloud/secret.jpg!abc \u3002 \u5982\u679c\u4fdd\u62a4\u5bc6\u94a5\u8ddf\u7f29\u7565\u56fe\u7248\u672c\u540d\u79f0\u76f8\u540c\uff0c\u5f53\u4f5c\u4fdd\u62a4\u5bc6\u94a5\u3002\u7279\u522b\u5730\uff0c\u5bf9\u6709\u4fdd\u62a4\u5bc6\u94a5\u7684\u56fe\u7247\u8fdb\u884c\u5904\u7406\u65f6\uff0c\u4e0d\u9700\u8981\u52a0\u4fdd\u62a4\u5bc6\u94a5\u3002 \u6df7\u5408\u4f7f\u7528 \u00b6 \u5047\u8bbe\u5b58\u5728\u7f29\u7565\u56fe\u7248\u672c upyun520 \uff0c\u73b0\u5728\u9488\u5bf9\u67d0\u7c7b\u56fe\u7247\u9700\u8981\u8c03\u6574\u7f29\u7565\u56fe\u7248\u672c\u7684\u914d\u7f6e\uff0c\u6bd4\u5982\u9650\u5b9a\u5bbd\u5ea6\u4e3a 500px\uff08 /fw/500 \uff09\uff0c\u53ef\u4ee5\u4f7f\u7528\u7f29\u7565\u56fe\u7248\u672c\u4e0e\u53c2\u6570\u6df7\u5408\uff0c\u901a\u8fc7\u53c2\u6570\u5bf9\u7f29\u7565\u56fe\u7248\u672c\u8fdb\u884c\u52a8\u6001\u8c03\u6574\u3002\u56e0\u4e3a\uff0c\u53c2\u6570\u7684\u4f18\u5148\u7ea7\u9ad8\u4e8e\u7f29\u7565\u56fe\u7248\u672c\u3002 URL \u4f5c\u56fe\u6df7\u5408\u4f7f\u7528\u662f\uff1a https://p.upyun.com/docs/cloud/demo.jpg!upyun520/fw/500 \u4e0a\u4f20\u9884\u5904\u7406\u6df7\u5408\u4f7f\u7528\u662f\uff1a x-gmkerl-thumb: upyun520/fw/500 \u7279\u522b\u5730\uff0c\u53c2\u6570\u53ea\u80fd\u51fa\u73b0\u5728\u7f29\u7565\u56fe\u7248\u672c\u7684\u540e\u9762\uff0c\u5982 /fw/500 \u51fa\u73b0\u5728 upyun520 \u540e\u9762\u3002 \u72b6\u6001\u7801\u8868 \u00b6 \u72b6\u6001\u7801 \u8bf4\u660e 200 \u5904\u7406\u6210\u529f 400 \u53c2\u6570\u9519\u8bef\uff0c\u8fd4\u56de JSON \u4e2d\u5305\u542b\u5177\u4f53\u9519\u8bef\u4fe1\u606f 404 \u6307\u5b9a Profile \u4fe1\u606f\u4e0d\u5b58\uff0cNot Profile 405 \u56fe\u7247\u6570\u636e\u65e0\u6548\uff0cNot an image 405 \u56fe\u7247\u5bbd\u9ad8\u8d85\u51fa\u9650\u5236\uff0cImage Width/Height Limit Error 406 \u975e\u56fe\u7247\u83b7\u53d6\u56fe\u7247\u57fa\u672c\u4fe1\u606f\u65f6\u6570\u636e\u65e0\u6548\uff0cNot an image 409 \u56fe\u7247\u5927\u5c0f\u8d85\u51fa\u9650\u5236\uff0c\u9650\u5236\u4e3a 2 \u4ebf\u50cf\u7d20\uff0cLimit Exceeded 413 \u8bf7\u6c42\u5904\u7406\u8d85\u65f6\uff0cA Big Image! 5xx \u670d\u52a1\u7aef\u9519\u8bef\u3002\u5982\u9047\u6b64\u7c7b\u9519\u8bef\uff0c\u8bf7\u53cd\u9988\u7ed9 \u552e\u540e \u6216\u60a8\u7684\u5546\u52a1\u7ecf\u7406 \u4e0a\u4f20\u9884\u5904\u7406\u7684\u66f4\u591a\u9519\u8bef\u7801\uff0c\u8bf7\u67e5\u8be2 API \u9519\u8bef\u7801\u8868 \u3002 \u652f\u6301\u683c\u5f0f \u00b6 \u7c7b\u578b \u503c \u8f93\u5165\u683c\u5f0f JPG\u3001JPEG\u3001PNG\u3001WebP\u3001\u52a8\u6001 WebP\u3001GIF\u3001\u52a8\u6001 GIF\u3001BMP\u3001SVG\u7b49 \u8f93\u51fa\u683c\u5f0f JPG\u3001PNG\u3001WebP\u3001\u52a8\u6001 WebP ** \u5176\u4ed6\u7ea6\u675f ** \u56fe\u7247\u5bbd\u6216\u9ad8\u6700\u5927\u4e0d\u80fd\u8d85\u8fc7 2 \u4e07\u50cf\u7d20\uff0c\u300c\u5bbd * \u9ad8 * \u5e27\u6570\u300d\u6700\u5927\u4e0d\u80fd\u8d85\u8fc7 2 \u4ebf\u3002 WebP \u5f00\u53d1\u4e13\u9898 \u00b6 ** \u6709\u635f WebP \u6f14\u793a **\uff1a WebP \u5982\u4f55\u8ba9\u60a8\u7684\u56fe\u7247\u5927\u5c0f\u5e73\u5747\u51cf\u5c11 70% ** \u65e0\u635f WebP \u6307\u5357 **\uff1a \u65e0\u635f WebP \u6b63\u786e\u7684\u4f7f\u7528\u59ff\u52bf ** \u8f6c\u6210\u6709\u635f WebP **\uff1a /format/webp ** \u8f6c\u6210\u65e0\u635f WebP **\uff1a /format/webp/lossless/true ** \u793a\u4f8b ** JPG \u8f6c\u6210\u6709\u635f WebP\uff1awww.domain.com/a.jpg!/format/webp PNG \u8f6c\u6210\u65e0\u635f WebP\uff1awww.domain.com/a.png!/format/webp/lossless/true GIF/\u52a8\u6001 GIF \u8f6c\u6210\u6709\u635f WebP\uff1awww.domain.com/a.gif!/format/webp SVG \u8f6c\u6210\u65e0\u635f WebP\uff1awww.domain.com/a.svg!/format/webp/lossless/true ! \u662f \u95f4\u9694\u6807\u8bc6\u7b26 \uff0c /format/webp \u3001 /lossless/true \u66f4\u591a\u89e3\u91ca\u89c1\u300c\u529f\u80fd\u300d> \u7ed3\u679c\u8f93\u51fa \u3002 \u529f\u80fd \u00b6 \u7f29\u5c0f&\u653e\u5927 \u00b6 \u53c2\u6570 \u503c \u8bf4\u660e /fw/<width> \u5bbd\uff0c\u5982 300 \u9650\u5b9a\u5bbd\u5ea6\uff0c\u9ad8\u5ea6\u81ea\u9002\u5e94 /fh/<height> \u9ad8\uff0c\u5982 200 \u9650\u5b9a\u9ad8\u5ea6\uff0c\u5bbd\u5ea6\u81ea\u9002\u5e94 /max/<max> \u6700\u957f\u8fb9\uff0c\u5982 200 \u9650\u5b9a\u6700\u957f\u8fb9\uff0c\u77ed\u8fb9\u81ea\u9002\u5e94 /min/<min> \u6700\u77ed\u8fb9\uff0c\u5982 200 \u9650\u5b9a\u6700\u77ed\u8fb9\uff0c\u957f\u8fb9\u81ea\u9002\u5e94 /fwfh/<w>x<h> \u5bbdx\u9ad8\uff0c\u5982 300x200 \u9650\u5b9a\u5bbd\u5ea6\u6216\u9ad8\u5ea6\uff0c\u5bbd\u9ad8\u4e0d\u8db3\u65f6\u4e0d\u7f29\u653e /fwfh2/<w>x<h> \u5bbdx\u9ad8\uff0c\u5982 300x200 \u9650\u5b9a\u5bbd\u5ea6\u6700\u5c0f\u503c\u548c\u9ad8\u5ea6\u6700\u5c0f\u503c\uff0c\u5bbd\u9ad8\u4e0d\u8db3\u65f6\u4e0d\u7f29\u653e /both/<w>x<h> \u5bbdx\u9ad8\uff0c\u5982 300x200 \u56fa\u5b9a\u5bbd\u5ea6\u548c\u9ad8\u5ea6\uff0c\u5bbd\u9ad8\u4e0d\u8db3\u65f6\u5c45\u4e2d\u88c1\u526a\u518d\u7f29\u653e \u7279\u522b\u5730\uff0c\u914d\u5408 /force/true \u4f7f\u7528\u65f6\uff0c\u5bbd\u9ad8\u4e0d\u8db3\u65f6\u53ea\u7f29\u653e\uff0c\u4e0d\u88c1\u526a /sq/<w> \u5bbd\u6216\u9ad8\uff0c\u5982 300 \u56fe\u7247\u7f29\u653e\u6210\u6b63\u65b9\u5f62\uff0c\u5bbd\u9ad8\u76f8\u7b49 /scale/<scale> \u7f29\u653e\u6bd4\u4f8b\uff0c\u5982 50 \u5bbd\u9ad8\u7b49\u6bd4\u4f8b\u7f29\u653e\uff0c\u53d6\u503c\u8303\u56f4 [1-1000] /wscale/<wscale> \u5bbd\u5ea6\u7f29\u653e\u6bd4\u4f8b\uff0c\u5982 200 \u5bbd\u5ea6\u6309\u6bd4\u4f8b\u7f29\u653e\uff0c\u9ad8\u5ea6\u4e0d\u53d8\uff0c\u53d6\u503c\u8303\u56f4 [1-1000] /hscale/<hscale> \u9ad8\u5ea6\u7f29\u653e\u6bd4\u4f8b\uff0c\u5982 200 \u9ad8\u5ea6\u6309\u6bd4\u4f8b\u7f29\u653e\uff0c\u5bbd\u5ea6\u4e0d\u53d8\uff0c\u53d6\u503c\u8303\u56f4 [1-1000] /fxfn/<max>x<min> \u957f\u8fb9x\u77ed\u8fb9\uff0c\u5982 300x200 \u9650\u5b9a\u957f\u8fb9\u6216\u77ed\u8fb9\uff0c\u8fdb\u884c\u7b49\u6bd4\u7f29\u653e\uff0c\u4e0d\u88c1\u526a /fxfn2/<max>x<min> \u957f\u8fb9x\u77ed\u8fb9\uff0c\u5982 300x200 \u9650\u5b9a\u957f\u8fb9\u6700\u5c0f\u503c\u548c\u77ed\u8fb9\u6700\u5c0f\u503c\uff0c\u8fdb\u884c\u7b49\u6bd4\u7f29\u653e\uff0c\u4e0d\u88c1\u526a /fp/<integer> \u5bbd\u9ad8\u50cf\u7d20\u79ef\uff0c\u5982 200000 \u5bbd\u9ad8\u7b49\u6bd4\u4f8b\u7f29\u653e\uff0c\u76f4\u5230\u5bbd\u9ad8\u50cf\u7d20\u79ef\u5c0f\u4e8e\u4f46\u6700\u63a5\u8fd1\u6307\u5b9a\u503c\uff0c\u53d6\u503c\u8303\u56f4 [1-25000000] /force/<boolean> true \u4e0d\u652f\u6301\u653e\u5927\u7684\u53c2\u6570\uff0c\u6307\u5b9a /force/ \u4e3a true \u8fdb\u884c\u653e\u5927\uff0c\u9ed8\u8ba4 false ** \u6ce8 ** fwfh \u5f53\u539f\u56fe\u5bbd\u4e0e\u671f\u671b\u7f29\u653e\u7684\u5bbd\u7684\u6bd4\u4f8b\u5927\u4e8e\u539f\u56fe\u9ad8\u4e0e\u671f\u671b\u7f29\u653e\u7684\u9ad8\u7684\u6bd4\u4f8b\u65f6\uff0c\u662f fw \uff1b\u5426\u5219\uff0c\u662f fh \u3002 scale \u503c\u53d6 20 \u65f6\uff0c\u7f29\u5c0f\u540e\u7684\u56fe\u7247\u5bbd\u9ad8\u662f\u539f\u56fe\u5bbd\u9ad8\u7684 20% \uff1b\u53d6 200 \u65f6\uff0c\u653e\u5927\u540e\u7684\u56fe\u7247\u5bbd\u9ad8\u662f\u539f\u56fe\u5bbd\u9ad8\u7684 200% \u3002 \u7279\u522b\u5730\uff0c\u5927\u90e8\u5206\u53c2\u6570\u9ed8\u8ba4\u4e0d\u652f\u6301\u653e\u5927\uff0c\u5982\u679c\u9700\u8981\u653e\u5927\uff0c\u8bf7\u6307\u5b9a /force/true \u3002 <w>x<h> \u4e2d\u7684 x \u662f\u5c0f\u5199\u5b57\u6bcd x\uff0c\u4e0d\u662f\u4e58\u53f7\u3002 \u88c1\u526a \u00b6 \u53c2\u6570 \u503c \u8bf4\u660e /crop/<w>x<h>a<x>a<y> \u5bbdx\u9ad8axay\uff0c\u5982 300x200a80a60 \u7f29\u5c0f\u6216\u653e\u5927\u524d\u8fdb\u884c\u88c1\u526a /clip/<w>x<h>a<x>a<y> \u5bbdx\u9ad8axay\uff0c\u5982 300x200a80a60 \u7f29\u5c0f\u6216\u653e\u5927\u540e\u8fdb\u884c\u88c1\u526a /gravity/<gravity> \u4f4d\u7f6e\uff0c\u5982 north \u88c1\u526a\u5f00\u59cb\u7684\u65b9\u4f4d\uff0c\u9ed8\u8ba4 northwest \uff0c\u8be6\u89c1 \u65b9\u4f4d\u8bf4\u660e \u7279\u522b\u5730\uff0c /gravity \u9700\u8981\u653e\u5728 /crop \u6216 /clip \u7684\u540e\u9762 /roundrect/<roundrect> \u5706\u89d2\u534a\u5f84\uff0c\u5982 20 \u88c1\u526a\u65f6\u5bf9\u56db\u89d2\u8fdb\u884c\u5706\u5316\uff08\u5706\u89d2\u88c1\u526a\uff09\uff0c\u9ed8\u8ba4 10 ** \u6ce8 ** <w>x<h> \u4e2d\u7684 x \u662f\u5c0f\u5199\u5b57\u6bcd x\uff0c\u4e0d\u662f\u4e58\u53f7\u3002\u5f53 <w>x<h> \u662f 0x0 \u65f6\uff0c\u81ea\u52a8\u6839\u636e\u504f\u79fb\u91cf\u8ba1\u7b97\u88c1\u526a\u56fe\u7247\u5bbd\u3001\u9ad8\u3002 a<x>s<y> \u4e2d\u7684 <x> \u3001 <y> \u8868\u793a\u504f\u79fb\u91cf\uff0c a \u3001 s \u8868\u793a\u6b63\u3001\u8d1f\uff0c x \u6b63\u8d1f\u5224\u65ad\u4f9d\u636e\u662f\uff1a\u5f80 east \u65b9\u5411\u504f\u79fb\uff0c\u4e3a a \uff1b\u5f80 west \u65b9\u5411\u504f\u79fb\uff0c\u4e3a s ; y \u6b63\u8d1f\u5224\u65ad\u4f9d\u636e\u662f\uff1a\u5f80 south \u65b9\u5411\u504f\u79fb\uff0c\u4e3a a \uff1b\u5f80 north \u65b9\u5411\u504f\u79fb\uff0c\u4e3a s \u3002 \u6c34\u5370 \u00b6 ** \u56fe\u7247\u6c34\u5370 ** \u53c2\u6570 \u503c \u8bf4\u660e /watermark/url/<url> \u7f16\u7801\u5b57\u7b26\u4e32\uff0c\u5982 L3BhdGgvdG8vd2F0ZXJtYXJrLnBuZw== \u6c34\u5370\u56fe\u7247\u7684 URI\uff0c\u793a\u4f8b\u4e3a /path/to/watermark.png \u7684 Base64 \u7f16\u7801\u5b57\u7b26\u4e32\u3002\u7279\u522b\u5730\uff0c\u6c34\u5370\u56fe\u7247\u5fc5\u987b\u548c\u5f85\u5904\u7406\u56fe\u7247\u5728\u540c\u4e00\u670d\u52a1\u540d\u4e0b /align/<align> \u4f4d\u7f6e\uff0c\u5982 north \u6c34\u5370\u56fe\u7247\u653e\u7f6e\u65b9\u4f4d\uff0c\u9ed8\u8ba4 northwest \uff0c\u8be6\u89c1 \u65b9\u4f4d\u8bf4\u660e /margin/<x>x<y> \u6a2a\u504f\u79fbx\u7eb5\u504f\u79fb\uff0c\u5982 15x10 \u6c34\u5370\u56fe\u7247\u6a2a\u7eb5\u76f8\u5bf9\u504f\u79fb\uff0c\u9ed8\u8ba4 20x20 /opacity/<opacity> \u900f\u660e\u5ea6\uff0c\u5982 90 \u6c34\u5370\u56fe\u7247\u900f\u660e\u5ea6\uff0c\u9ed8\u8ba4 100 \uff0c\u53d6\u503c\u8303\u56f4 [0-100] \uff0c\u503c\u8d8a\u5927\u8d8a\u4e0d\u900f\u660e\uff0c 0 \u5b8c\u5168\u900f\u660e\uff0c 100 \u5b8c\u5168\u4e0d\u900f\u660e /percent/<integer> \u767e\u5206\u6bd4\u503c\uff0c\u5982 50 \u6c34\u5370\u56fe\u7247\u81ea\u9002\u5e94\u539f\u56fe\u77ed\u8fb9\u7684\u6bd4\u4f8b\uff0c\u53d6\u503c\u8303\u56f4 [0-100] \uff0c\u9ed8\u8ba4 0 \uff0c 0 \u8868\u793a\u4e0d\u8bbe\u7f6e\u8be5\u53c2\u6570 /repeat/<boolean> true \u6c34\u5370\u56fe\u7247\u662f\u5426\u91cd\u590d\u94fa\u6ee1\u539f\u56fe\uff0c\u9ed8\u8ba4 false /animate/<boolean> true \u5141\u8bb8\u5bf9\u52a8\u6001\u56fe\u7247\u52a0\u6c34\u5370\uff0c\u9ed8\u8ba4 false ** \u6587\u5b57\u6c34\u5370 ** \u53c2\u6570 \u503c \u8bf4\u660e /watermark/text/<text> \u6587\u5b57\u5185\u5bb9\uff0c\u5982 5L2g5aW977yB \u6587\u5b57\u5185\u5bb9\uff0c\u793a\u4f8b\u4e2d\u4e3a \u4f60\u597d\uff01 \u7684 Base64 \u7f16\u7801\u5b57\u7b26\u4e32\u3002 /size/<size> \u5927\u5c0f\uff0c\u5982 16 \u6587\u5b57\u5927\u5c0f\uff0c\u5355\u4f4d px\uff0c\u9ed8\u8ba4 32 /font/<font> \u5b57\u4f53\uff0c\u5982 simsun\uff08\u5b8b\u4f53\uff09 \u6587\u5b57\u5b57\u4f53\uff0c\u9ed8\u8ba4 simsun \u3002\u5b57\u4f53\u4f7f\u7528\u65f6\uff0c\u9700\u8981\u7528\u53c2\u6570\u540d\u3002\u53c2\u6570\u540d\u89c1 \u5b57\u4f53\u5217\u8868 /color/<color> RRGGBB\uff0c\u5982 FF0000\uff08\u7ea2\u8272\uff09 \u5b57\u4f53\u989c\u8272\uff0c\u9ed8\u8ba4 000000\uff08\u9ed1\u8272\uff09 /border/<border> RRGGBBAA\uff0c\u5982 FF000000\uff08\u4e0d\u900f\u660e\u7ea2\u8272\uff09 \u6587\u5b57\u63cf\u8fb9\uff0c\u9ed8\u8ba4 FFFFFFFF\uff08\u900f\u660e\u767d\u8272\uff09 \uff0c\u8be6\u89c1 border \u8bf4\u660e /align/<align> \u4f4d\u7f6e\uff0c\u5982 north \u6587\u5b57\u653e\u7f6e\u65b9\u4f4d\uff0c\u9ed8\u8ba4 northwest \uff0c\u8be6\u89c1 \u65b9\u4f4d\u8bf4\u660e /margin/<x>x<y> \u6a2a\u504f\u79fbx\u7eb5\u504f\u79fb\uff0c\u5982 15x10 \u6587\u5b57\u6a2a\u7eb5\u76f8\u5bf9\u504f\u79fb\uff0c\u9ed8\u8ba4 20x20 /opacity/<opacity> \u900f\u660e\u5ea6\uff0c\u5982 90 \u6587\u5b57\u900f\u660e\u5ea6\uff0c\u9ed8\u8ba4 100 \uff0c\u53d6\u503c\u8303\u56f4 [0-100] \uff0c\u503c\u8d8a\u5927\u8d8a\u4e0d\u900f\u660e\uff0c 0 \u5b8c\u5168\u900f\u660e\uff0c 100 \u5b8c\u5168\u4e0d\u900f\u660e /animate/<boolean> true \u5141\u8bb8\u5bf9\u52a8\u6001\u56fe\u7247\u52a0\u6c34\u5370\uff0c\u9ed8\u8ba4 false ** \u591a\u4e2a\u6c34\u5370 ** \u628a\u56fe\u7247\u6c34\u5370\u6216\u6587\u5b57\u6c34\u5370\u53c2\u6570\u91cd\u590d\u3002\u4f8b\u5982\uff0c\u4e00\u4e2a\u6587\u5b57\u6c34\u5370 + \u4e00\u4e2a\u56fe\u7247\u6c34\u5370\uff1a /watermark/text/5L2g5aW977yB/font/simhei/watermark/url/L2RvY3MvY2xvdWQvdXB5dW4tbG9nby5wbmc=/align/southeast \u7279\u522b\u5730\uff0c\u6c34\u5370\u4e2a\u6570\u8d8a\u591a\uff0c\u5904\u7406\u8017\u65f6\u8d8a\u957f\uff0c\u5efa\u8bae\u4e0d\u8981\u8d85\u8fc7 3 \u4e2a\u3002 ** \u6ce8 ** \u56fe\u7247\u6c34\u5370\u7684 url \u9700\u8981 base64 \u7f16\u7801\uff0c\u5e76\u628a\u7f16\u7801\u540e\u7684\u5b57\u7b26\u4e32\u4e2d\u7684 / \uff08\u659c\u6760\uff09\u66ff\u6362\u6210 | \uff08\u7ad6\u7ebf\uff09\u3002 align \u6216 gravity \u7684 9 \u4e2a\u65b9\u4f4d\uff1a northwest | north | northeast | | | | --------------+----------------+-------------- | | west | center | east | | --------------+----------------+-------------- | | | | southwest | south | southeast \u6587\u5b57\u6c34\u5370\u7684 text \u9700\u8981 base64 \u7f16\u7801\uff0c\u5e76\u628a\u7f16\u7801\u540e\u7684\u5b57\u7b26\u4e32\u4e2d\u7684 / \uff08\u659c\u6760\uff09\u66ff\u6362\u6210 | \uff08\u7ad6\u7ebf\uff09\u3002 \u6587\u5b57\u6c34\u5370\u7684\u4e2d\u542b\u4e2d\u6587\u5185\u5bb9\uff08 text \uff09\u65f6\uff0c\u5b57\u4f53\uff08 font \uff09\u8bf7\u4f7f\u7528\u4e2d\u6587\u5b57\u4f53\uff0c\u5426\u5219\u4f1a\u4e71\u7801\u3002 \u5b57\u4f53\u5217\u8868\uff1a \u540d\u79f0 \u7c7b\u578b \u53c2\u6570\u540d \u5b8b\u4f53 \u4e2d\u6587\u5b57\u4f53 simsun \u9ed1\u4f53 \u4e2d\u6587\u5b57\u4f53 simhei \u6977\u4f53 \u4e2d\u6587\u5b57\u4f53 simkai \u96b6\u4e66 \u4e2d\u6587\u5b57\u4f53 simli \u5e7c\u5706 \u4e2d\u6587\u5b57\u4f53 simyou \u4eff\u5b8b \u4e2d\u6587\u5b57\u4f53 simfang \u7b80\u4f53\u4e2d\u6587 \u4e2d\u6587\u5b57\u4f53 sc \u7e41\u4f53\u4e2d\u6587 \u4e2d\u6587\u5b57\u4f53 tc Arial \u82f1\u6587\u5b57\u4f53 arial Georgia \u82f1\u6587\u5b57\u4f53 georgia Helvetica \u82f1\u6587\u5b57\u4f53 helvetica Times-New-Roman \u82f1\u6587\u5b57\u4f53 roman border \u7684\u503c RRGGBBAA \uff0c RRGGBB \u8868\u793a\u8fb9\u6846\u989c\u8272\uff1b AA \u8868\u793a\u4e0d\u900f\u660e\u5ea6\uff0c\u53d6\u503c [0-255] \uff0c\u503c\u8d8a\u5927\u8d8a\u900f\u660e\uff0c 00 \u8868\u793a\u5b8c\u5168\u4e0d\u900f\u660e\uff0c FF \u8868\u793a\u5b8c\u5168\u900f\u660e\u3002 <x>x<y> \u4e2d\uff0c\u8fde\u63a5 <x> \u4e0e <y> \u662f\u5c0f\u5199\u5b57\u6bcd x\uff0c\u4e0d\u662f\u4e58\u53f7\u3002 \u65cb\u8f6c \u00b6 \u53c2\u6570 \u503c \u8bf4\u660e /rotate/<\u56fa\u5b9a\u503c> auto \u81ea\u52a8\u6276\u6b63 /rotate/<angle> (0, 360] \uff0c\u5982 90\u00b0 \u6309\u89d2\u5ea6\u65cb\u8f6c ** \u7ffb\u8f6c ** \u53c2\u6570 \u503c \u8bf4\u660e /flip/<orientation> \u65b9\u5411\uff0c\u5982 left,right \u7ffb\u8f6c\u65b9\u5411\uff0c\u53ef\u9009\u503c\uff1a left,right \u3001 top,down ** \u6ce8 ** left,right \u8868\u793a\u4ece\u5de6\u5411\u53f3\u7ffb\u8f6c\uff0c top,down \u8868\u793a\u4ece\u4e0a\u5411\u4e0b\u7ffb\u8f6c\u3002 \u9510\u5316 \u00b6 \u63d0\u9ad8\u56fe\u7247\u6a21\u7cca\u90e8\u4f4d\u7684\u6e05\u6670\u5ea6\u6216\u805a\u7126\u7a0b\u5ea6\u3002 \u53c2\u6570 \u503c \u8bf4\u660e /unsharp/<boolean> true \u9510\u5316\uff0c\u9ed8\u8ba4 false \u9ad8\u65af\u6a21\u7cca \u00b6 \u51cf\u5c11\u56fe\u7247\u566a\u97f3\u548c\u964d\u4f4e\u56fe\u7247\u7ec6\u8282\u5c42\u6b21\uff0c\u4f7f\u56fe\u7247\u6a21\u7cca\u5316\u3002 \u53c2\u6570 \u503c \u8bf4\u660e /gaussblur/<radius>x<sigma> \u6a21\u7cca\u534a\u5f84x\u6807\u51c6\u5dee\uff0c\u5982 5x2 \u9ad8\u65af\u6a21\u7cca ** \u6ce8 ** 0 <= radius <= 50 \u4e14 radius \u662f\u6574\u6570\uff0c sigma \u662f\u6b63\u6574\u6570\u3002\u5f53 radius = 0 \u65f6\uff0c raduis \u6839\u636e sigma \u81ea\u52a8\u8ba1\u7b97\u4ea7\u751f\u3002 <radius>x<sigma> \u4e2d\u7684 x \u662f\u5c0f\u5199\u5b57\u6bcd x\uff0c\u4e0d\u662f\u4e58\u53f7\u3002 \u8fb9\u6846 \u00b6 \u4e3a\u56fe\u7247\u6dfb\u52a0\u8fb9\u6846\uff0c\u652f\u6301\u8bbe\u7f6e\u8fb9\u6846\u989c\u8272\u3002 \u53c2\u6570 \u503c \u8bf4\u660e /border/<w>x<h> \u5bbdx\u9ad8\uff0c\u5982 3x2 \u8fb9\u6846\u5c3a\u5bf8\uff0c w \u8868\u793a\u5de6\u53f3\u8fb9\u6846\u5bbd\u5ea6\uff0c h \u8868\u793a\u4e0a\u4e0b\u8fb9\u6846\u5bbd\u5ea6 /brdcolor/<brdcolor> RRGGBBAA\uff0c\u5982 FF000000\uff08\u7ea2\u8272\u4e0d\u900f\u660e\uff09 \u8fb9\u6846\u989c\u8272\u548c\u900f\u660e\u5ea6\uff0c\u9ed8\u8ba4 FFFFFF00\uff08\u767d\u8272\u4e0d\u900f\u660e\uff09 ** \u6ce8 ** brdcolor \u7684\u503c RRGGBBAA \uff0c RRGGBB \u8868\u793a\u8fb9\u6846\u989c\u8272\uff1b AA \u8868\u793a\u4e0d\u900f\u660e\u5ea6\uff0c\u53d6\u503c [0-255] \uff0c\u503c\u8d8a\u5927\u8d8a\u900f\u660e\uff0c 00 \u8868\u793a\u5b8c\u5168\u4e0d\u900f\u660e\uff0c FF \u8868\u793a\u5b8c\u5168\u900f\u660e\u3002 <w>x<h> \u4e2d\u7684 x \u662f\u5c0f\u5199\u5b57\u6bcd x\uff0c\u4e0d\u662f\u4e58\u53f7\u3002 \u753b\u5e03 \u00b6 \u4e3a\u56fe\u7247\u6dfb\u52a0\u753b\u5e03\uff0c\u76f8\u5f53\u4e8e\u628a\u56fe\u7247\u653e\u5165\u753b\u5e03\u4e2d\u3002 \u53c2\u6570 \u503c \u8bf4\u660e /canvas/<w>x<h>a<x>a<y> \u5bbdx\u9ad8axay\uff0c\u5982 600x400a50a20 \u753b\u5e03\u5c3a\u5bf8\uff0c w \u8868\u793a\u753b\u5e03\u5bbd\uff0c h \u8868\u793a\u753b\u5e03\u9ad8\uff0c x \u3001 y \u8868\u793a\u56fe\u7247\u5de6\u4e0a\u89d2\u5728\u753b\u5e03\u4e2d\u7684\u5750\u6807\uff0c\u5982\u679c x \u3001 y \u4e0d\u5b58\u5728\uff0c\u5219\u56fe\u7247\u5728\u753b\u5e03\u4e2d\u95f4 /cvscolor/<cvscolor> RRGGBBAA\uff0c\u5982 FF000000\uff08\u7ea2\u8272\u4e0d\u900f\u660e\uff09 \u8fb9\u6846\u989c\u8272\u548c\u900f\u660e\u5ea6\uff0c\u9ed8\u8ba4 FFFFFF00\uff08\u767d\u8272\u4e0d\u900f\u660e\uff09 ** \u6ce8 ** cvscolor \u7684\u503c RRGGBBAA \uff0c RRGGBB \u8868\u793a\u8fb9\u6846\u989c\u8272\uff1b AA \u8868\u793a\u4e0d\u900f\u660e\u5ea6\uff0c\u53d6\u503c [0-255] \uff0c\u503c\u8d8a\u5927\u8d8a\u900f\u660e\uff0c 00 \u8868\u793a\u5b8c\u5168\u4e0d\u900f\u660e\uff0c FF \u8868\u793a\u5b8c\u5168\u900f\u660e\u3002 <w>x<h> \u4e2d\u7684 x \u662f\u5c0f\u5199\u5b57\u6bcd x\uff0c\u4e0d\u662f\u4e58\u53f7\u3002 \u5c5e\u6027\u83b7\u53d6 \u00b6 \u53c2\u6570 \u503c \u8bf4\u660e /info \u65e0 \u83b7\u53d6\u57fa\u672c\u4fe1\u606f\uff08\u5305\u62ec\u5bbd\u3001\u9ad8\u3001\u683c\u5f0f\u3001\u5e27\u6570\uff09 /meta \u65e0 \u83b7\u53d6 EXIF \u4fe1\u606f + \u57fa\u672c\u4fe1\u606f /meta/<\u56fa\u5b9a\u503c> iptc \u83b7\u53d6 IPTC \u4fe1\u606f + \u57fa\u672c\u4fe1\u606f /meta/<\u56fa\u5b9a\u503c> all \u83b7\u53d6\u56fe\u7247\u6240\u6709\u4fe1\u606f\uff0c\u5f53\u524d\u662f EXIF \u4fe1\u606f + IPTC \u4fe1\u606f + \u57fa\u672c\u4fe1\u606f ** \u6ce8 ** \u4e0a\u4f20\u9884\u5904\u7406\u65f6\uff0c\u54cd\u5e94\u4fe1\u606f\u4e2d\u9ed8\u8ba4\u5305\u542b\u56fe\u7247\u57fa\u672c\u4fe1\u606f\uff08 info \uff09\uff0c\u83b7\u53d6\u5176\u4ed6\u56fe\u7247\u4fe1\u606f\uff0c\u89c1 FORM API \u4e2d\u7684 x-gmkerl-type \u53c2\u6570\u3002 /meta/all \u83b7\u53d6\u5230\u7684\u4fe1\u606f\u4f1a\u968f\u7740\u5e73\u53f0\u652f\u6301\u7684\u4fe1\u606f\u589e\u591a\u800c\u53d8\u5316\uff0c\u8bf7\u5728\u4f7f\u7528\u65f6\u6ce8\u610f\u3002 \u7ed3\u679c\u8f93\u51fa \u00b6 \u53c2\u6570 \u503c \u8bf4\u660e /format/<format> \u56fe\u7247\u683c\u5f0f\uff0c\u5982 jpg \u8f93\u51fa\u683c\u5f0f\uff0c\u53ef\u9009\u503c jpg \u3001 png \u3001 webp \u3002 webp \u5305\u542b\u52a8\u6001 WebP /lossless/<boolean> true \u65e0\u635f\u538b\u7f29\uff0c\u9ed8\u8ba4 false \u3002\u4ec5\u5f53\u8f93\u51fa\u683c\u5f0f\u662f WebP \u65f6\u6709\u6548 /quality/<quality> \u6574\u6570\u503c\uff0c\u5982 75 \u8bbe\u7f6e\u538b\u7f29\u8d28\u91cf\uff0c\u53ef\u9009\u8303\u56f4 [1-99] /compress/<boolean> true JPG \u3001 PNG \u5927\u5c0f\u538b\u7f29\u4f18\u5316\uff0c\u9ed8\u8ba4 false /coalesce/<boolean> false \u662f\u5426\u586b\u5145\u52a8\u6001 GIF \u56fe\u50cf\u4e2d\u5171\u540c\u90e8\u5206\uff0c\u9ed8\u8ba4 true \uff0c\u89c1\u300c\u6ce8\u300d /progressive/<boolean> true JPG \u56fe\u7247\u6e10\u8fdb\u5f0f\u52a0\u8f7d\uff0c\u56fe\u7247\u52a0\u8f7d\u4ece\u6a21\u7cca\u5230\u6e05\u6670 /noicc/<boolean> true \u6e05\u9664\u56fe\u7247 ICC \u4fe1\u606f\uff0c\u9ed8\u8ba4 false /strip/<boolean> true \u53bb\u9664\u56fe\u7247\u6240\u6709\u5143\u4fe1\u606f\uff0c\u5305\u62ec EXIF \u3001ICC \u7b49\u3002\u9ed8\u8ba4 false /gifto/<boolean> true \u591a\u5e27 GIF \u56fe\u7247\u8f6c\u4e3a\u5355\u5e27 GIF \u56fe\u7247 /exifswitch/<boolean> true \u4fdd\u7559 EXIF \u4fe1\u606f \uff0c\u9ed8\u8ba4\u4f1a\u5220\u9664 EXIF \u4fe1\u606f /ignore-error/<boolean> true \u662f\u5426\u5ffd\u7565\u9519\u8bef\u8fd4\u56de\u539f\u56fe \uff0c\u9ed8\u8ba4 false \uff0c\u8fd4\u56de\u9519\u8bef ** \u6ce8 ** \u4e00\u822c\u6765\u8bf4\uff0c quality\uff08\u8d28\u91cf\uff09 \u662f 75 \uff0c\u5728\u8fd9\u4e2a\u503c\u538b\u7f29\u5927\u5c0f\u4e0e\u56fe\u7247\u8d28\u91cf\u635f\u5931\u5f97\u5230\u5e73\u8861\u3002 compress \u4f1a\u5bf9 JPG/PNG \u8fdb\u884c\u4e00\u6b21\u538b\u7f29\u4ee5\u51cf\u5c11\u56fe\u7247\u4f53\u79ef\uff0c\u540c\u65f6\u7a0d\u5fae\u5ef6\u957f\u4e86\u56fe\u7247\u5904\u7406\u65f6\u95f4\u3001\u964d\u4f4e\u4e86\u56fe\u7247\u8d28\u91cf\u3002 noicc \u4f1a\u5bfc\u81f4\u56fe\u7247\u8d28\u91cf\u8f7b\u5fae\u7684\u4e0b\u964d\u3002 \u5927\u90e8\u5206\u52a8\u6001 GIF \u53ef\u4ee5\u901a\u8fc7\u7701\u7565\u76f8\u90bb\u5e27\u4e4b\u95f4\u5171\u540c\u90e8\u5206\u6765\u4f18\u5316\u56fe\u7247\u4f53\u79ef\u3002\u5982\u679c coalesce \u53c2\u6570\u4e3a false \uff0c\u5f53\u5bf9\u52a8\u6001 GIF \u505a\u7f29\u7565\u6216\u653e\u5927\u65f6\uff0c\u53ef\u80fd\u4f1a\u5bfc\u81f4\u56fe\u7247\u8d28\u91cf\u4e0b\u964d\u3002 ignore-error \u53ea\u5bf9 405\u3001409\u3001503 \u72b6\u6001\u7801\u6709\u6548\uff0c\u5e76\u4f1a\u5728\u54cd\u5e94\u5934\u4e2d\u9644\u52a0 x-gmkerl-err-code \u5b57\u6bb5\u6807\u8bb0\u5b9e\u9645\u9519\u8bef\u7801\u3002\u5176\u4ed6\u9519\u8bef\u72b6\u6001\u7801\u65e0\u6548\uff0c\u8fd4\u56de\u9519\u8bef\u3002 \u4e3b\u9898\u8272\u63d0\u53d6 \u00b6 \u53c2\u6570 \u503c \u8bf4\u660e /excolor/<integer> \u989c\u8272\u6570\u91cf\uff0c\u5982 128 \u63d0\u53d6\u7684\u989c\u8272\u6570\u91cf\u3002\u53ef\u9009\u503c\uff1a [1-4096] /exformat/<exformat> \u989c\u8272\u8fdb\u5236\uff0c\u5982 hex \u8fd4\u56de\u989c\u8272\u7684\u8fdb\u5236\uff0c\u9ed8\u8ba4 dec \u3002\u53ef\u9009\u503c\uff1a dec \u3001 hex ** \u6ce8 ** \u4ee5 JSON \u683c\u5f0f\u8fd4\u56de\u989c\u8272\u3002 hex\uff08\u5341\u516d\u8fdb\u5236\uff09 \u8868\u793a\u989c\u8272\u4e3a 0xRRGGBB \uff0c\u5982 0xff00aa \uff1b dec\uff08\u5341\u8fdb\u5236\uff09 \u8868\u793a\u989c\u8272\u4e3a 12345678 \u3002 \u9759\u6001\u56fe\u6e10\u53d8 \u00b6 \u53c2\u6570 \u503c \u8bf4\u660e /gdori/<orientation> \u65b9\u5411\uff0c\u5982 top,down\uff08\u81ea\u4e0a\u800c\u4e0b\uff09 \u6e10\u53d8\u65b9\u5411 /gdpos/<gdpos> \u5f00\u59cb\u4f4d\u7f6e,\u7ed3\u675f\u4f4d\u7f6e\uff0c\u5982 10,100 \u6e10\u53d8\u4ece\u5f00\u59cb\u4f4d\u7f6e\u81f3\u7ed3\u675f\u4f4d\u7f6e\u3002\u5355\u4f4d\u50cf\u7d20\uff08px\uff09 /gdstartcolor/<gdstartcolor> RRGGBBAA\uff0c\u5982 FF000000\uff08\u7ea2\u8272\u4e0d\u900f\u660e\uff09 \u5f00\u59cb\u4f4d\u7f6e\u989c\u8272\u53ca\u900f\u660e\u5ea6 /gdstopcolor/<gdstopcolor> RRGGBBAA\uff0c\u5982 FF000000\uff08\u7ea2\u8272\u4e0d\u900f\u660e\uff09 \u7ed3\u675f\u4f4d\u7f6e\u989c\u8272\u53ca\u900f\u660e\u5ea6 ** \u6ce8 ** gdori \u53d6\u503c\uff1a top,down \uff08\u81ea\u4e0a\u800c\u4e0b\uff09\u3001 bottom,up \uff08\u81ea\u4e0b\u800c\u4e0a\uff09\u3001 left,right \uff08\u81ea\u5de6\u5411\u53f3\uff09\u3001 right,left \uff08\u81ea\u53f3\u5411\u5de6\uff09\u3002 RRGGBBAA \uff1a RRGGBB \u8868\u793a\u8fb9\u6846\u989c\u8272\uff1b AA \u8868\u793a\u4e0d\u900f\u660e\u5ea6\uff0c\u53d6\u503c [0-255] \uff0c\u503c\u8d8a\u5927\u8d8a\u900f\u660e\uff0c 00 \u8868\u793a\u5b8c\u5168\u4e0d\u900f\u660e\uff0c FF \u8868\u793a\u5b8c\u5168\u900f\u660e\u3002 \u5982\u6709\u7591\u95ee\u8bf7 \u8054\u7cfb\u6211\u4eec","title":"\u56fe\u7247\u5904\u7406"},{"location":"cloud/image/#_1","text":"\u53c8\u62cd\u4e91\u5904\u7406\uff08\u56fe\u7247\u5904\u7406\uff09\u57fa\u4e8e CDN \u6216\u4e91\u5b58\u50a8\u670d\u52a1\uff0c\u60a8\u5728\u4f7f\u7528\u5b83\u4e4b\u524d\uff0c\u8bf7\u786e\u4fdd\u60a8\u5df2\u7ecf\u6ce8\u518c\u53c8\u62cd\u4e91\u8d26\u53f7\u5e76\u5b8c\u6210\u5b9e\u540d\u9a8c\u8bc1\uff0c\u8bf7\u786e\u4fdd\u60a8\u5df2\u7ecf\u521b\u5efa CDN \u670d\u52a1 \u6216 \u4e91\u5b58\u50a8\u670d\u52a1 \u3002 \u6536\u8d39\u65b9\u9762\uff0c\u56fe\u7247\u5904\u7406\u5b8c\u5168\u514d\u8d39\u3002 \u76f8\u5173\u9605\u8bfb\uff1a \u6f14\u793a WebP \u5982\u4f55\u8ba9\u60a8\u7684\u56fe\u7247\u5927\u5c0f\u5e73\u5747\u51cf\u5c11 70% \uff0c WebP \u5f00\u53d1\u4e13\u9898 \u3002","title":"\u5feb\u901f\u5165\u95e8"},{"location":"cloud/image/#_2","text":"","title":"\u5f00\u53d1\u8005\u6307\u5357"},{"location":"cloud/image/#url","text":"\u901a\u8fc7 URL \u8bbf\u95ee\u56fe\u7247\u65f6\uff0c\u5bf9\u56fe\u7247\u8fdb\u884c\u5904\u7406\uff0c\u5e76\u628a\u5904\u7406\u540e\u7684\u56fe\u7247\u8fd4\u56de\u3002 ** URL \u4f5c\u56fe\u7684\u683c\u5f0f ** \u56fe\u7247 URL + \u95f4\u9694\u6807\u8bc6\u7b26 + \u53c2\u6570\u6216\u7f29\u7565\u56fe\u7248\u672c \u95f4\u9694\u6807\u8bc6\u7b26\u8bf4\u660e\uff0c\u89c1 \u95f4\u9694\u6807\u8bc6\u7b26 \uff1b\u53c2\u6570\u8bf4\u660e\uff0c\u89c1 \u529f\u80fd \uff1b\u7f29\u7565\u56fe\u7248\u672c\u8bf4\u660e\uff0c\u89c1 \u7f29\u7565\u56fe\u7248\u672c \u3002 ** \u4f8b\u5982 ** \u56fe\u7247 URL \u662f https://p.upyun.com/docs/cloud/demo.jpg \uff0c \u95f4\u9694\u6807\u8bc6\u7b26\u662f ! \uff0c \u529f\u80fd\u662f \u683c\u5f0f\u8f6c\u6362\u6210 webp \uff0c \u8bbf\u95ee\u7684 URL \u662f https://p.upyun.com/docs/cloud/demo.jpg!/format/webp \u3002","title":"URL \u4f5c\u56fe"},{"location":"cloud/image/#_3","text":"\u7528\u4e8e\u5206\u9694\u56fe\u7247 URL \u548c\u5904\u7406\u4fe1\u606f\uff0c\u6709 3 \u79cd\u53ef\u9009\uff0c\u5206\u522b\u662f\uff1a ! \uff08\u611f\u53f9\u53f7/\u9ed8\u8ba4\u503c\uff09\u3001 - \uff08\u4e2d\u5212\u7ebf\uff09\u548c _ \uff08\u4e0b\u5212\u7ebf\uff09\uff0c\u53ef\u767b\u5f55\u53c8\u62cd\u4e91 \u63a7\u5236\u53f0 \uff0c\u5728 \u300c\u670d\u52a1\u300d > \u300c\u529f\u80fd\u914d\u7f6e\u300d > \u300c\u4e91\u5904\u7406\u300d \u4e2d\u8bbe\u7f6e\u3002","title":"\u95f4\u9694\u6807\u8bc6\u7b26"},{"location":"cloud/image/#_4","text":"\u7f29\u7565\u56fe\u7248\u672c\u5728\u53c8\u62cd\u4e91 \u63a7\u5236\u53f0 \uff0c\u300c\u670d\u52a1\u300d > \u300c\u529f\u80fd\u914d\u7f6e\u300d > \u300c\u4e91\u5904\u7406\u300d \u4e2d\u521b\u5efa\uff0c\u5b83\u91cc\u9762\u5305\u542b\u8bb8\u591a\u56fe\u7247\u5904\u7406\u529f\u80fd\u3002\u5982\u4e0b\u56fe\uff1a ** \u4f8b\u5982 ** \u7f29\u7565\u56fe\u7248\u672c\u540d\u79f0\u662f upyun520 \uff0c \u8bbf\u95ee\u7684 URL \u662f https://p.upyun.com/docs/cloud/demo.jpg!upyun520 \u3002 \u5176\u4e2d\uff0c ! \u662f \u95f4\u9694\u6807\u8bc6\u7b26 \u3002","title":"\u7f29\u7565\u56fe\u7248\u672c"},{"location":"cloud/image/#_5","text":"\u5728\u4e0a\u4f20\u56fe\u7247\u65f6\uff0c\u5bf9\u4e0a\u4f20\u7684\u56fe\u7247\u8fdb\u884c\u5904\u7406\uff0c\u5e76\u4fdd\u5b58\u5904\u7406\u540e\u7684\u56fe\u7247\u5230\u53c8\u62cd\u4e91\u5b58\u50a8\u3002 \u652f\u6301\u7684 API\uff1a REST API | FORM API | \u6587\u4ef6\u62c9\u53d6 \u3002 \u53c2\u6570\u540d\u662f x-gmkerl-thumb \uff0c\u53c2\u6570\u503c\u662f \u53c2\u6570\u6216\u7f29\u7565\u56fe\u7248\u672c \u3002\u5904\u7406\u53c2\u6570\u89c1 \u529f\u80fd \u3002 ** \u4e3e\u4f8b ** \u4f8b 1\uff1a\u8f6c\u6362\u56fe\u7247\u683c\u5f0f\u4e3a png x-gmkerl-thumb: /format/png \u4f8b 2\uff1a\u9650\u5b9a\u56fe\u7247\u5bbd\u5ea6\u4e3a 300px\u3001\u9510\u5316\u3001\u538b\u7f29\u8d28\u91cf 80\u3001\u5b58\u50a8\u4e3a png \u683c\u5f0f\uff08\u53c2\u6570\u4e0d\u533a\u5206\u5148\u540e\u987a\u5e8f\uff09 x-gmkerl-thumb: /fw/300/unsharp/true/quality/80/format/png","title":"\u4e0a\u4f20\u9884\u5904\u7406\uff08\u540c\u6b65\uff09"},{"location":"cloud/image/#_6","text":"\u5728\u4e0a\u4f20\u56fe\u7247\u65f6\uff0c\u5bf9\u4e0a\u4f20\u7684\u56fe\u7247\u8fdb\u884c\u5904\u7406\uff0c\u751f\u6210\u4e00\u5f20\u6216\u591a\u5f20\u65b0\u7684\u56fe\u7247\uff0c\u540c\u65f6\u4fdd\u5b58\u4e0a\u4f20\u7684\u56fe\u7247\u5230\u53c8\u62cd\u4e91\u5b58\u50a8\u3002\u4efb\u52a1\u4ee5\u5f02\u6b65\u7684\u65b9\u5f0f\u5904\u7406\uff0c\u5904\u7406\u5b8c\u6210\u540e\uff0c\u56de\u8c03\u901a\u77e5\u7528\u6237\u5904\u7406\u7ed3\u679c\u3002 \u652f\u6301\u7684 API\uff1a FORM API \u3002 \u53c2\u6570\u540d\u662f apps \uff0c\u53c2\u6570\u503c\u662f JSON \u6570\u7ec4\u3002\u4e00\u4e2a apps \u6700\u591a\u5141\u8bb8\u5305\u542b 10 \u4e2a\u56fe\u7247\u5904\u7406\u4efb\u52a1\u3002 \u8bbe\u7f6e\u4e86 apps \u53c2\u6570\uff0c\u4f1a\u521b\u5efa\u5f02\u6b65\u5904\u7406\u4efb\u52a1\uff0c\u5426\u5219\u4e3a\u540c\u6b65\u5904\u7406\u4efb\u52a1 ** apps \u53c2\u6570\u7ed3\u6784 ** \u53c2\u6570 \u5fc5\u9009 \u8bf4\u660e name \u662f \u4f7f\u7528\u5f02\u6b65\u56fe\u7247\u5904\u7406\u670d\u52a1\uff0c\u56fa\u5b9a\u503c thumb x-gmkerl-thumb \u662f \u56fe\u7247\u5904\u7406\u529f\u80fd\u53c2\u6570\u6216\u7f29\u7565\u56fe\u7248\u672c\u540d\u79f0\uff0c\u5904\u7406\u53c2\u6570\u89c1 \u529f\u80fd x-gmkerl-split \u5426 \u56fe\u7247\u5206\u5757\uff0c\u6309 \u5bbdx\u9ad8 \u628a\u56fe\u7247\u5206\u6210\u6570\u5757\uff0c\u89c1\u300c\u6ce8\u300d save_as \u5426 \u7ed3\u679c\u56fe\u7247\u4fdd\u5b58\u8def\u5f84 notify_url \u5426 \u56de\u8c03\u5730\u5740\uff0c\u4e0d\u586b\u65f6\u4f7f\u7528 \u4e0a\u4f20\u53c2\u6570 \u4e2d\u7684 notify_url ** save_as \u652f\u6301\u7684\u53d8\u91cf ** \u53d8\u91cf\u540d \u8bf4\u660e {filepath} \u539f\u56fe\u5728\u5b58\u50a8\u4e2d\u7684\u8def\u5f84 {filename} \u539f\u56fe\u6587\u4ef6\u540d {suffix} \u539f\u56fe\u6587\u4ef6\u540d\u540e\u7f00\uff0c\u4e0d\u5e26\u70b9 {row} \u5207\u5272\u540e\u5c0f\u56fe\u7684\u4f4d\u7f6e\u884c\u53f7\uff0c\u4ece 0 \u5f00\u59cb\uff0c\u4ece\u5de6\u5230\u53f3\u4f9d\u6b21\u589e\u5927 {column} \u5207\u5272\u540e\u5c0f\u56fe\u7684\u4f4d\u7f6e\u5217\u53f7\uff0c\u4ece 0 \u5f00\u59cb\uff0c\u4ece\u4e0a\u5230\u4e0b\u4f9d\u6b21\u589e\u5927 {seq} \u5207\u5272\u540e\u5c0f\u56fe\u7684\u5e8f\u5217\u53f7\uff0c\u4ece 0 \u5f00\u59cb\uff0c\u4ece\u5de6\u5230\u53f3\u3001\u4ece\u4e0a\u5230\u4e0b\u4f9d\u6b21\u589e\u5927 ** \u6ce8 ** x-gmkerl-split \u4f1a\u5728 x-gmkerl-thumb \u7684\u57fa\u7840\u4e0a\u628a\u56fe\u7247\u5206\u6210\u6570\u5757\uff0c\u7528\u6237\u53ef\u4ee5\u6839\u636e\u56de\u8c03\u4fe1\u606f\u4e2d\u7684\u884c\u53f7\u8ddf\u5217\u53f7\u6765\u786e\u5b9a\u5206\u5757\u540e\u7684\u56fe\u7247\u5728\u539f\u56fe\u4e2d\u7684\u4f4d\u7f6e\u3002 x-gmkerl-split \u4f1a\u8f93\u51fa\u591a\u4e2a\u56fe\u7247\uff0c\u4ece\u5de6\u4e0a\u89d2\u5f00\u59cb\uff0c\u5f80\u53f3\u5217\u53f7\u4ece 0 \u4f9d\u6b21\u589e\u5927\uff0c\u5f80\u4e0b\u884c\u53f7\u4ece 0 \u4f9d\u6b21\u589e\u5927\uff0c\u5e8f\u5217\u53f7\u6309\u884c\u4ece\u5de6\u5f80\u53f3\u3001\u4ece\u4e0a\u5230\u4e0b\u3001\u4ece 0 \u4f9d\u6b21\u589e\u5927\u3002 ** \u4e3e\u4f8b ** apps = [ { \"name\": \"thumb\", \"x-gmkerl-thumb\": \"/fw/300/quality/95\", \"save_as\": \"/path/to/fw_300.jpg\", \"notify_url\": \"http://your/notify/url\" }, ...... ] ** \u56de\u8c03\u901a\u77e5 ** \u4efb\u52a1\u5904\u7406\u5b8c\u6210\u540e\uff0c\u5411 notify_url \u5730\u5740\u53d1\u9001\u56de\u8c03\u901a\u77e5\u3002\u56de\u8c03\u4fe1\u606f\u4e3a JSON \u683c\u5f0f\uff0c\u5b57\u6bb5\u540d\u53ca\u542b\u4e49\u5982\u4e0b\uff1a \u5b57\u6bb5\u540d \u7c7b\u578b \u8bf4\u660e task_id string \u5f02\u6b65\u5904\u7406\u4efb\u52a1 ID\uff08\u5728\u4e0a\u4f20\u65f6\u8fd4\u56de\uff09 service string \u6587\u4ef6\u6240\u5728\u7a7a\u95f4\u540d status_code integer \u5904\u7406\u7ed3\u679c\u72b6\u6001\u7801\uff0c 200 \u8868\u793a\u6210\u529f\u5904\u7406 imginfo map \u8f93\u51fa\u5355\u5f20\u56fe\u7247\u4fe1\u606f imginfos array \u8f93\u51fa\u591a\u5f20\u56fe\u7247\u4fe1\u606f error string \u9519\u8bef\u4fe1\u606f imginfo \u3001 imginfos \u4e2d\u5305\u542b\u4fe1\u606f\u5982\u4e0b\uff1a \u5b57\u6bb5\u540d \u7c7b\u578b \u8bf4\u660e path string \u4f5c\u56fe\u7ed3\u679c\u4fdd\u5b58\u8def\u5f84\uff08 save_as \u53c2\u6570\u6307\u5b9a\uff09 type string \u56fe\u7247\u7c7b\u578b width integer \u56fe\u7247\u5bbd\u5ea6 height integer \u56fe\u7247\u9ad8\u5ea6 frame integer \u56fe\u7247\u5e27\u6570 row integer \u76f8\u5bf9\u4e8e\u5de6\u4e0a\u89d2\u7684\u884c\u53f7\uff0c\u4ece 0 \u5f00\u59cb\uff0c\u4ec5\u5f53\u56fe\u7247\u5206\u5757\u65f6\u6709\u6548 column integer \u76f8\u5bf9\u4e8e\u5de6\u4e0a\u89d2\u7684\u5217\u53f7\uff0c\u4ece 0 \u5f00\u59cb\uff0c\u4ec5\u5f53\u56fe\u7247\u5206\u5757\u65f6\u6709\u6548 ** \u4e3e\u4f8b ** \u4f8b 1\uff1a\u8f93\u51fa\u5355\u5f20\u56fe\u7247\u7684\u56de\u8c03\u4fe1\u606f { \"task_id\": \"b52c96bea30646abf8170f333bbd42b9\", \"service\": \"upyun-demo\", \"status_code\": 200, \"imginfo\": { \"path\": \"/images/upyun.jpg\", \"type\": \"jpg\", \"width\": 720, \"height\": 360, \"frames\": 1 } } \u4f8b 2\uff1a\u8f93\u51fa\u591a\u5f20\u56fe\u7247\uff08\u4f7f\u7528\u4e86 \u56fe\u7247\u5206\u5757 x-gmkerl-split \uff09 \u7684\u56de\u8c03\u4fe1\u606f { \"task_id\": \"b52c96bea30646abf8170f333bbd42b9\", \"service\": \"upyun-demo\", \"status_code\": 200, \"imginfos\": [ { \"path\": \"/images/upyun.jpg-1.jpg\", \"type\": \"jpg\", \"width\": 72, \"height\": 36, \"frames\": 1, \"row\": 0, \"column\": 0 }, { \"path\": \"/images/upyun.jpg-2.jpg\", \"type\": \"jpg\", \"width\": 72, \"height\": 36, \"frames\": 1, \"row\": 0, \"column\": 1 } ] }","title":"\u4e0a\u4f20\u9884\u5904\u7406\uff08\u5f02\u6b65\uff09"},{"location":"cloud/image/#_7","text":"\u4e0a\u4f20\u56fe\u7247\u65f6\uff0c\u4fdd\u62a4\u5bc6\u94a5\u901a\u8fc7 REST API | FORM API \u7684 Content-Secret \u8bbe\u7f6e\u3002 \u5df2\u7ecf\u5b58\u5728\u5b58\u50a8\u7684\u56fe\u7247\uff0c\u53ef\u4ee5\u901a\u8fc7\u7f16\u8f91 Metadata \u8bbe\u7f6e\u4fdd\u62a4\u5bc6\u94a5\u3002 \u56fe\u7247\u6dfb\u52a0\u4fdd\u62a4\u5bc6\u94a5\u540e\uff0c\u8bbf\u95ee\u65f6\u9700\u8981\u5e26\u4e0a \u300c \u95f4\u9694\u6807\u8bc6\u7b26 \u300d \u548c \u300c\u4fdd\u62a4\u5bc6\u94a5\u300d\uff0c\u624d\u80fd\u8bbf\u95ee\u56fe\u7247\u3002 \u4f8b\u5982\uff0c\u4fdd\u62a4\u5bc6\u94a5\u662f abc \uff0c \u8bbf\u95ee\u56fe\u7247 URL \u662f https://p.upyun.com/docs/cloud/secret.jpg!abc \u3002 \u5982\u679c\u4fdd\u62a4\u5bc6\u94a5\u8ddf\u7f29\u7565\u56fe\u7248\u672c\u540d\u79f0\u76f8\u540c\uff0c\u5f53\u4f5c\u4fdd\u62a4\u5bc6\u94a5\u3002\u7279\u522b\u5730\uff0c\u5bf9\u6709\u4fdd\u62a4\u5bc6\u94a5\u7684\u56fe\u7247\u8fdb\u884c\u5904\u7406\u65f6\uff0c\u4e0d\u9700\u8981\u52a0\u4fdd\u62a4\u5bc6\u94a5\u3002","title":"\u539f\u56fe\u4fdd\u62a4\u5bc6\u94a5"},{"location":"cloud/image/#_8","text":"\u5047\u8bbe\u5b58\u5728\u7f29\u7565\u56fe\u7248\u672c upyun520 \uff0c\u73b0\u5728\u9488\u5bf9\u67d0\u7c7b\u56fe\u7247\u9700\u8981\u8c03\u6574\u7f29\u7565\u56fe\u7248\u672c\u7684\u914d\u7f6e\uff0c\u6bd4\u5982\u9650\u5b9a\u5bbd\u5ea6\u4e3a 500px\uff08 /fw/500 \uff09\uff0c\u53ef\u4ee5\u4f7f\u7528\u7f29\u7565\u56fe\u7248\u672c\u4e0e\u53c2\u6570\u6df7\u5408\uff0c\u901a\u8fc7\u53c2\u6570\u5bf9\u7f29\u7565\u56fe\u7248\u672c\u8fdb\u884c\u52a8\u6001\u8c03\u6574\u3002\u56e0\u4e3a\uff0c\u53c2\u6570\u7684\u4f18\u5148\u7ea7\u9ad8\u4e8e\u7f29\u7565\u56fe\u7248\u672c\u3002 URL \u4f5c\u56fe\u6df7\u5408\u4f7f\u7528\u662f\uff1a https://p.upyun.com/docs/cloud/demo.jpg!upyun520/fw/500 \u4e0a\u4f20\u9884\u5904\u7406\u6df7\u5408\u4f7f\u7528\u662f\uff1a x-gmkerl-thumb: upyun520/fw/500 \u7279\u522b\u5730\uff0c\u53c2\u6570\u53ea\u80fd\u51fa\u73b0\u5728\u7f29\u7565\u56fe\u7248\u672c\u7684\u540e\u9762\uff0c\u5982 /fw/500 \u51fa\u73b0\u5728 upyun520 \u540e\u9762\u3002","title":"\u6df7\u5408\u4f7f\u7528"},{"location":"cloud/image/#_9","text":"\u72b6\u6001\u7801 \u8bf4\u660e 200 \u5904\u7406\u6210\u529f 400 \u53c2\u6570\u9519\u8bef\uff0c\u8fd4\u56de JSON \u4e2d\u5305\u542b\u5177\u4f53\u9519\u8bef\u4fe1\u606f 404 \u6307\u5b9a Profile \u4fe1\u606f\u4e0d\u5b58\uff0cNot Profile 405 \u56fe\u7247\u6570\u636e\u65e0\u6548\uff0cNot an image 405 \u56fe\u7247\u5bbd\u9ad8\u8d85\u51fa\u9650\u5236\uff0cImage Width/Height Limit Error 406 \u975e\u56fe\u7247\u83b7\u53d6\u56fe\u7247\u57fa\u672c\u4fe1\u606f\u65f6\u6570\u636e\u65e0\u6548\uff0cNot an image 409 \u56fe\u7247\u5927\u5c0f\u8d85\u51fa\u9650\u5236\uff0c\u9650\u5236\u4e3a 2 \u4ebf\u50cf\u7d20\uff0cLimit Exceeded 413 \u8bf7\u6c42\u5904\u7406\u8d85\u65f6\uff0cA Big Image! 5xx \u670d\u52a1\u7aef\u9519\u8bef\u3002\u5982\u9047\u6b64\u7c7b\u9519\u8bef\uff0c\u8bf7\u53cd\u9988\u7ed9 \u552e\u540e \u6216\u60a8\u7684\u5546\u52a1\u7ecf\u7406 \u4e0a\u4f20\u9884\u5904\u7406\u7684\u66f4\u591a\u9519\u8bef\u7801\uff0c\u8bf7\u67e5\u8be2 API \u9519\u8bef\u7801\u8868 \u3002","title":"\u72b6\u6001\u7801\u8868"},{"location":"cloud/image/#_10","text":"\u7c7b\u578b \u503c \u8f93\u5165\u683c\u5f0f JPG\u3001JPEG\u3001PNG\u3001WebP\u3001\u52a8\u6001 WebP\u3001GIF\u3001\u52a8\u6001 GIF\u3001BMP\u3001SVG\u7b49 \u8f93\u51fa\u683c\u5f0f JPG\u3001PNG\u3001WebP\u3001\u52a8\u6001 WebP ** \u5176\u4ed6\u7ea6\u675f ** \u56fe\u7247\u5bbd\u6216\u9ad8\u6700\u5927\u4e0d\u80fd\u8d85\u8fc7 2 \u4e07\u50cf\u7d20\uff0c\u300c\u5bbd * \u9ad8 * \u5e27\u6570\u300d\u6700\u5927\u4e0d\u80fd\u8d85\u8fc7 2 \u4ebf\u3002","title":"\u652f\u6301\u683c\u5f0f"},{"location":"cloud/image/#webp","text":"** \u6709\u635f WebP \u6f14\u793a **\uff1a WebP \u5982\u4f55\u8ba9\u60a8\u7684\u56fe\u7247\u5927\u5c0f\u5e73\u5747\u51cf\u5c11 70% ** \u65e0\u635f WebP \u6307\u5357 **\uff1a \u65e0\u635f WebP \u6b63\u786e\u7684\u4f7f\u7528\u59ff\u52bf ** \u8f6c\u6210\u6709\u635f WebP **\uff1a /format/webp ** \u8f6c\u6210\u65e0\u635f WebP **\uff1a /format/webp/lossless/true ** \u793a\u4f8b ** JPG \u8f6c\u6210\u6709\u635f WebP\uff1awww.domain.com/a.jpg!/format/webp PNG \u8f6c\u6210\u65e0\u635f WebP\uff1awww.domain.com/a.png!/format/webp/lossless/true GIF/\u52a8\u6001 GIF \u8f6c\u6210\u6709\u635f WebP\uff1awww.domain.com/a.gif!/format/webp SVG \u8f6c\u6210\u65e0\u635f WebP\uff1awww.domain.com/a.svg!/format/webp/lossless/true ! \u662f \u95f4\u9694\u6807\u8bc6\u7b26 \uff0c /format/webp \u3001 /lossless/true \u66f4\u591a\u89e3\u91ca\u89c1\u300c\u529f\u80fd\u300d> \u7ed3\u679c\u8f93\u51fa \u3002","title":"WebP \u5f00\u53d1\u4e13\u9898"},{"location":"cloud/image/#_11","text":"","title":"\u529f\u80fd"},{"location":"cloud/image/#_12","text":"\u53c2\u6570 \u503c \u8bf4\u660e /fw/<width> \u5bbd\uff0c\u5982 300 \u9650\u5b9a\u5bbd\u5ea6\uff0c\u9ad8\u5ea6\u81ea\u9002\u5e94 /fh/<height> \u9ad8\uff0c\u5982 200 \u9650\u5b9a\u9ad8\u5ea6\uff0c\u5bbd\u5ea6\u81ea\u9002\u5e94 /max/<max> \u6700\u957f\u8fb9\uff0c\u5982 200 \u9650\u5b9a\u6700\u957f\u8fb9\uff0c\u77ed\u8fb9\u81ea\u9002\u5e94 /min/<min> \u6700\u77ed\u8fb9\uff0c\u5982 200 \u9650\u5b9a\u6700\u77ed\u8fb9\uff0c\u957f\u8fb9\u81ea\u9002\u5e94 /fwfh/<w>x<h> \u5bbdx\u9ad8\uff0c\u5982 300x200 \u9650\u5b9a\u5bbd\u5ea6\u6216\u9ad8\u5ea6\uff0c\u5bbd\u9ad8\u4e0d\u8db3\u65f6\u4e0d\u7f29\u653e /fwfh2/<w>x<h> \u5bbdx\u9ad8\uff0c\u5982 300x200 \u9650\u5b9a\u5bbd\u5ea6\u6700\u5c0f\u503c\u548c\u9ad8\u5ea6\u6700\u5c0f\u503c\uff0c\u5bbd\u9ad8\u4e0d\u8db3\u65f6\u4e0d\u7f29\u653e /both/<w>x<h> \u5bbdx\u9ad8\uff0c\u5982 300x200 \u56fa\u5b9a\u5bbd\u5ea6\u548c\u9ad8\u5ea6\uff0c\u5bbd\u9ad8\u4e0d\u8db3\u65f6\u5c45\u4e2d\u88c1\u526a\u518d\u7f29\u653e \u7279\u522b\u5730\uff0c\u914d\u5408 /force/true \u4f7f\u7528\u65f6\uff0c\u5bbd\u9ad8\u4e0d\u8db3\u65f6\u53ea\u7f29\u653e\uff0c\u4e0d\u88c1\u526a /sq/<w> \u5bbd\u6216\u9ad8\uff0c\u5982 300 \u56fe\u7247\u7f29\u653e\u6210\u6b63\u65b9\u5f62\uff0c\u5bbd\u9ad8\u76f8\u7b49 /scale/<scale> \u7f29\u653e\u6bd4\u4f8b\uff0c\u5982 50 \u5bbd\u9ad8\u7b49\u6bd4\u4f8b\u7f29\u653e\uff0c\u53d6\u503c\u8303\u56f4 [1-1000] /wscale/<wscale> \u5bbd\u5ea6\u7f29\u653e\u6bd4\u4f8b\uff0c\u5982 200 \u5bbd\u5ea6\u6309\u6bd4\u4f8b\u7f29\u653e\uff0c\u9ad8\u5ea6\u4e0d\u53d8\uff0c\u53d6\u503c\u8303\u56f4 [1-1000] /hscale/<hscale> \u9ad8\u5ea6\u7f29\u653e\u6bd4\u4f8b\uff0c\u5982 200 \u9ad8\u5ea6\u6309\u6bd4\u4f8b\u7f29\u653e\uff0c\u5bbd\u5ea6\u4e0d\u53d8\uff0c\u53d6\u503c\u8303\u56f4 [1-1000] /fxfn/<max>x<min> \u957f\u8fb9x\u77ed\u8fb9\uff0c\u5982 300x200 \u9650\u5b9a\u957f\u8fb9\u6216\u77ed\u8fb9\uff0c\u8fdb\u884c\u7b49\u6bd4\u7f29\u653e\uff0c\u4e0d\u88c1\u526a /fxfn2/<max>x<min> \u957f\u8fb9x\u77ed\u8fb9\uff0c\u5982 300x200 \u9650\u5b9a\u957f\u8fb9\u6700\u5c0f\u503c\u548c\u77ed\u8fb9\u6700\u5c0f\u503c\uff0c\u8fdb\u884c\u7b49\u6bd4\u7f29\u653e\uff0c\u4e0d\u88c1\u526a /fp/<integer> \u5bbd\u9ad8\u50cf\u7d20\u79ef\uff0c\u5982 200000 \u5bbd\u9ad8\u7b49\u6bd4\u4f8b\u7f29\u653e\uff0c\u76f4\u5230\u5bbd\u9ad8\u50cf\u7d20\u79ef\u5c0f\u4e8e\u4f46\u6700\u63a5\u8fd1\u6307\u5b9a\u503c\uff0c\u53d6\u503c\u8303\u56f4 [1-25000000] /force/<boolean> true \u4e0d\u652f\u6301\u653e\u5927\u7684\u53c2\u6570\uff0c\u6307\u5b9a /force/ \u4e3a true \u8fdb\u884c\u653e\u5927\uff0c\u9ed8\u8ba4 false ** \u6ce8 ** fwfh \u5f53\u539f\u56fe\u5bbd\u4e0e\u671f\u671b\u7f29\u653e\u7684\u5bbd\u7684\u6bd4\u4f8b\u5927\u4e8e\u539f\u56fe\u9ad8\u4e0e\u671f\u671b\u7f29\u653e\u7684\u9ad8\u7684\u6bd4\u4f8b\u65f6\uff0c\u662f fw \uff1b\u5426\u5219\uff0c\u662f fh \u3002 scale \u503c\u53d6 20 \u65f6\uff0c\u7f29\u5c0f\u540e\u7684\u56fe\u7247\u5bbd\u9ad8\u662f\u539f\u56fe\u5bbd\u9ad8\u7684 20% \uff1b\u53d6 200 \u65f6\uff0c\u653e\u5927\u540e\u7684\u56fe\u7247\u5bbd\u9ad8\u662f\u539f\u56fe\u5bbd\u9ad8\u7684 200% \u3002 \u7279\u522b\u5730\uff0c\u5927\u90e8\u5206\u53c2\u6570\u9ed8\u8ba4\u4e0d\u652f\u6301\u653e\u5927\uff0c\u5982\u679c\u9700\u8981\u653e\u5927\uff0c\u8bf7\u6307\u5b9a /force/true \u3002 <w>x<h> \u4e2d\u7684 x \u662f\u5c0f\u5199\u5b57\u6bcd x\uff0c\u4e0d\u662f\u4e58\u53f7\u3002","title":"\u7f29\u5c0f&amp;\u653e\u5927"},{"location":"cloud/image/#_13","text":"\u53c2\u6570 \u503c \u8bf4\u660e /crop/<w>x<h>a<x>a<y> \u5bbdx\u9ad8axay\uff0c\u5982 300x200a80a60 \u7f29\u5c0f\u6216\u653e\u5927\u524d\u8fdb\u884c\u88c1\u526a /clip/<w>x<h>a<x>a<y> \u5bbdx\u9ad8axay\uff0c\u5982 300x200a80a60 \u7f29\u5c0f\u6216\u653e\u5927\u540e\u8fdb\u884c\u88c1\u526a /gravity/<gravity> \u4f4d\u7f6e\uff0c\u5982 north \u88c1\u526a\u5f00\u59cb\u7684\u65b9\u4f4d\uff0c\u9ed8\u8ba4 northwest \uff0c\u8be6\u89c1 \u65b9\u4f4d\u8bf4\u660e \u7279\u522b\u5730\uff0c /gravity \u9700\u8981\u653e\u5728 /crop \u6216 /clip \u7684\u540e\u9762 /roundrect/<roundrect> \u5706\u89d2\u534a\u5f84\uff0c\u5982 20 \u88c1\u526a\u65f6\u5bf9\u56db\u89d2\u8fdb\u884c\u5706\u5316\uff08\u5706\u89d2\u88c1\u526a\uff09\uff0c\u9ed8\u8ba4 10 ** \u6ce8 ** <w>x<h> \u4e2d\u7684 x \u662f\u5c0f\u5199\u5b57\u6bcd x\uff0c\u4e0d\u662f\u4e58\u53f7\u3002\u5f53 <w>x<h> \u662f 0x0 \u65f6\uff0c\u81ea\u52a8\u6839\u636e\u504f\u79fb\u91cf\u8ba1\u7b97\u88c1\u526a\u56fe\u7247\u5bbd\u3001\u9ad8\u3002 a<x>s<y> \u4e2d\u7684 <x> \u3001 <y> \u8868\u793a\u504f\u79fb\u91cf\uff0c a \u3001 s \u8868\u793a\u6b63\u3001\u8d1f\uff0c x \u6b63\u8d1f\u5224\u65ad\u4f9d\u636e\u662f\uff1a\u5f80 east \u65b9\u5411\u504f\u79fb\uff0c\u4e3a a \uff1b\u5f80 west \u65b9\u5411\u504f\u79fb\uff0c\u4e3a s ; y \u6b63\u8d1f\u5224\u65ad\u4f9d\u636e\u662f\uff1a\u5f80 south \u65b9\u5411\u504f\u79fb\uff0c\u4e3a a \uff1b\u5f80 north \u65b9\u5411\u504f\u79fb\uff0c\u4e3a s \u3002","title":"\u88c1\u526a"},{"location":"cloud/image/#_14","text":"** \u56fe\u7247\u6c34\u5370 ** \u53c2\u6570 \u503c \u8bf4\u660e /watermark/url/<url> \u7f16\u7801\u5b57\u7b26\u4e32\uff0c\u5982 L3BhdGgvdG8vd2F0ZXJtYXJrLnBuZw== \u6c34\u5370\u56fe\u7247\u7684 URI\uff0c\u793a\u4f8b\u4e3a /path/to/watermark.png \u7684 Base64 \u7f16\u7801\u5b57\u7b26\u4e32\u3002\u7279\u522b\u5730\uff0c\u6c34\u5370\u56fe\u7247\u5fc5\u987b\u548c\u5f85\u5904\u7406\u56fe\u7247\u5728\u540c\u4e00\u670d\u52a1\u540d\u4e0b /align/<align> \u4f4d\u7f6e\uff0c\u5982 north \u6c34\u5370\u56fe\u7247\u653e\u7f6e\u65b9\u4f4d\uff0c\u9ed8\u8ba4 northwest \uff0c\u8be6\u89c1 \u65b9\u4f4d\u8bf4\u660e /margin/<x>x<y> \u6a2a\u504f\u79fbx\u7eb5\u504f\u79fb\uff0c\u5982 15x10 \u6c34\u5370\u56fe\u7247\u6a2a\u7eb5\u76f8\u5bf9\u504f\u79fb\uff0c\u9ed8\u8ba4 20x20 /opacity/<opacity> \u900f\u660e\u5ea6\uff0c\u5982 90 \u6c34\u5370\u56fe\u7247\u900f\u660e\u5ea6\uff0c\u9ed8\u8ba4 100 \uff0c\u53d6\u503c\u8303\u56f4 [0-100] \uff0c\u503c\u8d8a\u5927\u8d8a\u4e0d\u900f\u660e\uff0c 0 \u5b8c\u5168\u900f\u660e\uff0c 100 \u5b8c\u5168\u4e0d\u900f\u660e /percent/<integer> \u767e\u5206\u6bd4\u503c\uff0c\u5982 50 \u6c34\u5370\u56fe\u7247\u81ea\u9002\u5e94\u539f\u56fe\u77ed\u8fb9\u7684\u6bd4\u4f8b\uff0c\u53d6\u503c\u8303\u56f4 [0-100] \uff0c\u9ed8\u8ba4 0 \uff0c 0 \u8868\u793a\u4e0d\u8bbe\u7f6e\u8be5\u53c2\u6570 /repeat/<boolean> true \u6c34\u5370\u56fe\u7247\u662f\u5426\u91cd\u590d\u94fa\u6ee1\u539f\u56fe\uff0c\u9ed8\u8ba4 false /animate/<boolean> true \u5141\u8bb8\u5bf9\u52a8\u6001\u56fe\u7247\u52a0\u6c34\u5370\uff0c\u9ed8\u8ba4 false ** \u6587\u5b57\u6c34\u5370 ** \u53c2\u6570 \u503c \u8bf4\u660e /watermark/text/<text> \u6587\u5b57\u5185\u5bb9\uff0c\u5982 5L2g5aW977yB \u6587\u5b57\u5185\u5bb9\uff0c\u793a\u4f8b\u4e2d\u4e3a \u4f60\u597d\uff01 \u7684 Base64 \u7f16\u7801\u5b57\u7b26\u4e32\u3002 /size/<size> \u5927\u5c0f\uff0c\u5982 16 \u6587\u5b57\u5927\u5c0f\uff0c\u5355\u4f4d px\uff0c\u9ed8\u8ba4 32 /font/<font> \u5b57\u4f53\uff0c\u5982 simsun\uff08\u5b8b\u4f53\uff09 \u6587\u5b57\u5b57\u4f53\uff0c\u9ed8\u8ba4 simsun \u3002\u5b57\u4f53\u4f7f\u7528\u65f6\uff0c\u9700\u8981\u7528\u53c2\u6570\u540d\u3002\u53c2\u6570\u540d\u89c1 \u5b57\u4f53\u5217\u8868 /color/<color> RRGGBB\uff0c\u5982 FF0000\uff08\u7ea2\u8272\uff09 \u5b57\u4f53\u989c\u8272\uff0c\u9ed8\u8ba4 000000\uff08\u9ed1\u8272\uff09 /border/<border> RRGGBBAA\uff0c\u5982 FF000000\uff08\u4e0d\u900f\u660e\u7ea2\u8272\uff09 \u6587\u5b57\u63cf\u8fb9\uff0c\u9ed8\u8ba4 FFFFFFFF\uff08\u900f\u660e\u767d\u8272\uff09 \uff0c\u8be6\u89c1 border \u8bf4\u660e /align/<align> \u4f4d\u7f6e\uff0c\u5982 north \u6587\u5b57\u653e\u7f6e\u65b9\u4f4d\uff0c\u9ed8\u8ba4 northwest \uff0c\u8be6\u89c1 \u65b9\u4f4d\u8bf4\u660e /margin/<x>x<y> \u6a2a\u504f\u79fbx\u7eb5\u504f\u79fb\uff0c\u5982 15x10 \u6587\u5b57\u6a2a\u7eb5\u76f8\u5bf9\u504f\u79fb\uff0c\u9ed8\u8ba4 20x20 /opacity/<opacity> \u900f\u660e\u5ea6\uff0c\u5982 90 \u6587\u5b57\u900f\u660e\u5ea6\uff0c\u9ed8\u8ba4 100 \uff0c\u53d6\u503c\u8303\u56f4 [0-100] \uff0c\u503c\u8d8a\u5927\u8d8a\u4e0d\u900f\u660e\uff0c 0 \u5b8c\u5168\u900f\u660e\uff0c 100 \u5b8c\u5168\u4e0d\u900f\u660e /animate/<boolean> true \u5141\u8bb8\u5bf9\u52a8\u6001\u56fe\u7247\u52a0\u6c34\u5370\uff0c\u9ed8\u8ba4 false ** \u591a\u4e2a\u6c34\u5370 ** \u628a\u56fe\u7247\u6c34\u5370\u6216\u6587\u5b57\u6c34\u5370\u53c2\u6570\u91cd\u590d\u3002\u4f8b\u5982\uff0c\u4e00\u4e2a\u6587\u5b57\u6c34\u5370 + \u4e00\u4e2a\u56fe\u7247\u6c34\u5370\uff1a /watermark/text/5L2g5aW977yB/font/simhei/watermark/url/L2RvY3MvY2xvdWQvdXB5dW4tbG9nby5wbmc=/align/southeast \u7279\u522b\u5730\uff0c\u6c34\u5370\u4e2a\u6570\u8d8a\u591a\uff0c\u5904\u7406\u8017\u65f6\u8d8a\u957f\uff0c\u5efa\u8bae\u4e0d\u8981\u8d85\u8fc7 3 \u4e2a\u3002 ** \u6ce8 ** \u56fe\u7247\u6c34\u5370\u7684 url \u9700\u8981 base64 \u7f16\u7801\uff0c\u5e76\u628a\u7f16\u7801\u540e\u7684\u5b57\u7b26\u4e32\u4e2d\u7684 / \uff08\u659c\u6760\uff09\u66ff\u6362\u6210 | \uff08\u7ad6\u7ebf\uff09\u3002 align \u6216 gravity \u7684 9 \u4e2a\u65b9\u4f4d\uff1a northwest | north | northeast | | | | --------------+----------------+-------------- | | west | center | east | | --------------+----------------+-------------- | | | | southwest | south | southeast \u6587\u5b57\u6c34\u5370\u7684 text \u9700\u8981 base64 \u7f16\u7801\uff0c\u5e76\u628a\u7f16\u7801\u540e\u7684\u5b57\u7b26\u4e32\u4e2d\u7684 / \uff08\u659c\u6760\uff09\u66ff\u6362\u6210 | \uff08\u7ad6\u7ebf\uff09\u3002 \u6587\u5b57\u6c34\u5370\u7684\u4e2d\u542b\u4e2d\u6587\u5185\u5bb9\uff08 text \uff09\u65f6\uff0c\u5b57\u4f53\uff08 font \uff09\u8bf7\u4f7f\u7528\u4e2d\u6587\u5b57\u4f53\uff0c\u5426\u5219\u4f1a\u4e71\u7801\u3002 \u5b57\u4f53\u5217\u8868\uff1a \u540d\u79f0 \u7c7b\u578b \u53c2\u6570\u540d \u5b8b\u4f53 \u4e2d\u6587\u5b57\u4f53 simsun \u9ed1\u4f53 \u4e2d\u6587\u5b57\u4f53 simhei \u6977\u4f53 \u4e2d\u6587\u5b57\u4f53 simkai \u96b6\u4e66 \u4e2d\u6587\u5b57\u4f53 simli \u5e7c\u5706 \u4e2d\u6587\u5b57\u4f53 simyou \u4eff\u5b8b \u4e2d\u6587\u5b57\u4f53 simfang \u7b80\u4f53\u4e2d\u6587 \u4e2d\u6587\u5b57\u4f53 sc \u7e41\u4f53\u4e2d\u6587 \u4e2d\u6587\u5b57\u4f53 tc Arial \u82f1\u6587\u5b57\u4f53 arial Georgia \u82f1\u6587\u5b57\u4f53 georgia Helvetica \u82f1\u6587\u5b57\u4f53 helvetica Times-New-Roman \u82f1\u6587\u5b57\u4f53 roman border \u7684\u503c RRGGBBAA \uff0c RRGGBB \u8868\u793a\u8fb9\u6846\u989c\u8272\uff1b AA \u8868\u793a\u4e0d\u900f\u660e\u5ea6\uff0c\u53d6\u503c [0-255] \uff0c\u503c\u8d8a\u5927\u8d8a\u900f\u660e\uff0c 00 \u8868\u793a\u5b8c\u5168\u4e0d\u900f\u660e\uff0c FF \u8868\u793a\u5b8c\u5168\u900f\u660e\u3002 <x>x<y> \u4e2d\uff0c\u8fde\u63a5 <x> \u4e0e <y> \u662f\u5c0f\u5199\u5b57\u6bcd x\uff0c\u4e0d\u662f\u4e58\u53f7\u3002","title":"\u6c34\u5370"},{"location":"cloud/image/#_15","text":"\u53c2\u6570 \u503c \u8bf4\u660e /rotate/<\u56fa\u5b9a\u503c> auto \u81ea\u52a8\u6276\u6b63 /rotate/<angle> (0, 360] \uff0c\u5982 90\u00b0 \u6309\u89d2\u5ea6\u65cb\u8f6c ** \u7ffb\u8f6c ** \u53c2\u6570 \u503c \u8bf4\u660e /flip/<orientation> \u65b9\u5411\uff0c\u5982 left,right \u7ffb\u8f6c\u65b9\u5411\uff0c\u53ef\u9009\u503c\uff1a left,right \u3001 top,down ** \u6ce8 ** left,right \u8868\u793a\u4ece\u5de6\u5411\u53f3\u7ffb\u8f6c\uff0c top,down \u8868\u793a\u4ece\u4e0a\u5411\u4e0b\u7ffb\u8f6c\u3002","title":"\u65cb\u8f6c"},{"location":"cloud/image/#_16","text":"\u63d0\u9ad8\u56fe\u7247\u6a21\u7cca\u90e8\u4f4d\u7684\u6e05\u6670\u5ea6\u6216\u805a\u7126\u7a0b\u5ea6\u3002 \u53c2\u6570 \u503c \u8bf4\u660e /unsharp/<boolean> true \u9510\u5316\uff0c\u9ed8\u8ba4 false","title":"\u9510\u5316"},{"location":"cloud/image/#_17","text":"\u51cf\u5c11\u56fe\u7247\u566a\u97f3\u548c\u964d\u4f4e\u56fe\u7247\u7ec6\u8282\u5c42\u6b21\uff0c\u4f7f\u56fe\u7247\u6a21\u7cca\u5316\u3002 \u53c2\u6570 \u503c \u8bf4\u660e /gaussblur/<radius>x<sigma> \u6a21\u7cca\u534a\u5f84x\u6807\u51c6\u5dee\uff0c\u5982 5x2 \u9ad8\u65af\u6a21\u7cca ** \u6ce8 ** 0 <= radius <= 50 \u4e14 radius \u662f\u6574\u6570\uff0c sigma \u662f\u6b63\u6574\u6570\u3002\u5f53 radius = 0 \u65f6\uff0c raduis \u6839\u636e sigma \u81ea\u52a8\u8ba1\u7b97\u4ea7\u751f\u3002 <radius>x<sigma> \u4e2d\u7684 x \u662f\u5c0f\u5199\u5b57\u6bcd x\uff0c\u4e0d\u662f\u4e58\u53f7\u3002","title":"\u9ad8\u65af\u6a21\u7cca"},{"location":"cloud/image/#_18","text":"\u4e3a\u56fe\u7247\u6dfb\u52a0\u8fb9\u6846\uff0c\u652f\u6301\u8bbe\u7f6e\u8fb9\u6846\u989c\u8272\u3002 \u53c2\u6570 \u503c \u8bf4\u660e /border/<w>x<h> \u5bbdx\u9ad8\uff0c\u5982 3x2 \u8fb9\u6846\u5c3a\u5bf8\uff0c w \u8868\u793a\u5de6\u53f3\u8fb9\u6846\u5bbd\u5ea6\uff0c h \u8868\u793a\u4e0a\u4e0b\u8fb9\u6846\u5bbd\u5ea6 /brdcolor/<brdcolor> RRGGBBAA\uff0c\u5982 FF000000\uff08\u7ea2\u8272\u4e0d\u900f\u660e\uff09 \u8fb9\u6846\u989c\u8272\u548c\u900f\u660e\u5ea6\uff0c\u9ed8\u8ba4 FFFFFF00\uff08\u767d\u8272\u4e0d\u900f\u660e\uff09 ** \u6ce8 ** brdcolor \u7684\u503c RRGGBBAA \uff0c RRGGBB \u8868\u793a\u8fb9\u6846\u989c\u8272\uff1b AA \u8868\u793a\u4e0d\u900f\u660e\u5ea6\uff0c\u53d6\u503c [0-255] \uff0c\u503c\u8d8a\u5927\u8d8a\u900f\u660e\uff0c 00 \u8868\u793a\u5b8c\u5168\u4e0d\u900f\u660e\uff0c FF \u8868\u793a\u5b8c\u5168\u900f\u660e\u3002 <w>x<h> \u4e2d\u7684 x \u662f\u5c0f\u5199\u5b57\u6bcd x\uff0c\u4e0d\u662f\u4e58\u53f7\u3002","title":"\u8fb9\u6846"},{"location":"cloud/image/#_19","text":"\u4e3a\u56fe\u7247\u6dfb\u52a0\u753b\u5e03\uff0c\u76f8\u5f53\u4e8e\u628a\u56fe\u7247\u653e\u5165\u753b\u5e03\u4e2d\u3002 \u53c2\u6570 \u503c \u8bf4\u660e /canvas/<w>x<h>a<x>a<y> \u5bbdx\u9ad8axay\uff0c\u5982 600x400a50a20 \u753b\u5e03\u5c3a\u5bf8\uff0c w \u8868\u793a\u753b\u5e03\u5bbd\uff0c h \u8868\u793a\u753b\u5e03\u9ad8\uff0c x \u3001 y \u8868\u793a\u56fe\u7247\u5de6\u4e0a\u89d2\u5728\u753b\u5e03\u4e2d\u7684\u5750\u6807\uff0c\u5982\u679c x \u3001 y \u4e0d\u5b58\u5728\uff0c\u5219\u56fe\u7247\u5728\u753b\u5e03\u4e2d\u95f4 /cvscolor/<cvscolor> RRGGBBAA\uff0c\u5982 FF000000\uff08\u7ea2\u8272\u4e0d\u900f\u660e\uff09 \u8fb9\u6846\u989c\u8272\u548c\u900f\u660e\u5ea6\uff0c\u9ed8\u8ba4 FFFFFF00\uff08\u767d\u8272\u4e0d\u900f\u660e\uff09 ** \u6ce8 ** cvscolor \u7684\u503c RRGGBBAA \uff0c RRGGBB \u8868\u793a\u8fb9\u6846\u989c\u8272\uff1b AA \u8868\u793a\u4e0d\u900f\u660e\u5ea6\uff0c\u53d6\u503c [0-255] \uff0c\u503c\u8d8a\u5927\u8d8a\u900f\u660e\uff0c 00 \u8868\u793a\u5b8c\u5168\u4e0d\u900f\u660e\uff0c FF \u8868\u793a\u5b8c\u5168\u900f\u660e\u3002 <w>x<h> \u4e2d\u7684 x \u662f\u5c0f\u5199\u5b57\u6bcd x\uff0c\u4e0d\u662f\u4e58\u53f7\u3002","title":"\u753b\u5e03"},{"location":"cloud/image/#_20","text":"\u53c2\u6570 \u503c \u8bf4\u660e /info \u65e0 \u83b7\u53d6\u57fa\u672c\u4fe1\u606f\uff08\u5305\u62ec\u5bbd\u3001\u9ad8\u3001\u683c\u5f0f\u3001\u5e27\u6570\uff09 /meta \u65e0 \u83b7\u53d6 EXIF \u4fe1\u606f + \u57fa\u672c\u4fe1\u606f /meta/<\u56fa\u5b9a\u503c> iptc \u83b7\u53d6 IPTC \u4fe1\u606f + \u57fa\u672c\u4fe1\u606f /meta/<\u56fa\u5b9a\u503c> all \u83b7\u53d6\u56fe\u7247\u6240\u6709\u4fe1\u606f\uff0c\u5f53\u524d\u662f EXIF \u4fe1\u606f + IPTC \u4fe1\u606f + \u57fa\u672c\u4fe1\u606f ** \u6ce8 ** \u4e0a\u4f20\u9884\u5904\u7406\u65f6\uff0c\u54cd\u5e94\u4fe1\u606f\u4e2d\u9ed8\u8ba4\u5305\u542b\u56fe\u7247\u57fa\u672c\u4fe1\u606f\uff08 info \uff09\uff0c\u83b7\u53d6\u5176\u4ed6\u56fe\u7247\u4fe1\u606f\uff0c\u89c1 FORM API \u4e2d\u7684 x-gmkerl-type \u53c2\u6570\u3002 /meta/all \u83b7\u53d6\u5230\u7684\u4fe1\u606f\u4f1a\u968f\u7740\u5e73\u53f0\u652f\u6301\u7684\u4fe1\u606f\u589e\u591a\u800c\u53d8\u5316\uff0c\u8bf7\u5728\u4f7f\u7528\u65f6\u6ce8\u610f\u3002","title":"\u5c5e\u6027\u83b7\u53d6"},{"location":"cloud/image/#_21","text":"\u53c2\u6570 \u503c \u8bf4\u660e /format/<format> \u56fe\u7247\u683c\u5f0f\uff0c\u5982 jpg \u8f93\u51fa\u683c\u5f0f\uff0c\u53ef\u9009\u503c jpg \u3001 png \u3001 webp \u3002 webp \u5305\u542b\u52a8\u6001 WebP /lossless/<boolean> true \u65e0\u635f\u538b\u7f29\uff0c\u9ed8\u8ba4 false \u3002\u4ec5\u5f53\u8f93\u51fa\u683c\u5f0f\u662f WebP \u65f6\u6709\u6548 /quality/<quality> \u6574\u6570\u503c\uff0c\u5982 75 \u8bbe\u7f6e\u538b\u7f29\u8d28\u91cf\uff0c\u53ef\u9009\u8303\u56f4 [1-99] /compress/<boolean> true JPG \u3001 PNG \u5927\u5c0f\u538b\u7f29\u4f18\u5316\uff0c\u9ed8\u8ba4 false /coalesce/<boolean> false \u662f\u5426\u586b\u5145\u52a8\u6001 GIF \u56fe\u50cf\u4e2d\u5171\u540c\u90e8\u5206\uff0c\u9ed8\u8ba4 true \uff0c\u89c1\u300c\u6ce8\u300d /progressive/<boolean> true JPG \u56fe\u7247\u6e10\u8fdb\u5f0f\u52a0\u8f7d\uff0c\u56fe\u7247\u52a0\u8f7d\u4ece\u6a21\u7cca\u5230\u6e05\u6670 /noicc/<boolean> true \u6e05\u9664\u56fe\u7247 ICC \u4fe1\u606f\uff0c\u9ed8\u8ba4 false /strip/<boolean> true \u53bb\u9664\u56fe\u7247\u6240\u6709\u5143\u4fe1\u606f\uff0c\u5305\u62ec EXIF \u3001ICC \u7b49\u3002\u9ed8\u8ba4 false /gifto/<boolean> true \u591a\u5e27 GIF \u56fe\u7247\u8f6c\u4e3a\u5355\u5e27 GIF \u56fe\u7247 /exifswitch/<boolean> true \u4fdd\u7559 EXIF \u4fe1\u606f \uff0c\u9ed8\u8ba4\u4f1a\u5220\u9664 EXIF \u4fe1\u606f /ignore-error/<boolean> true \u662f\u5426\u5ffd\u7565\u9519\u8bef\u8fd4\u56de\u539f\u56fe \uff0c\u9ed8\u8ba4 false \uff0c\u8fd4\u56de\u9519\u8bef ** \u6ce8 ** \u4e00\u822c\u6765\u8bf4\uff0c quality\uff08\u8d28\u91cf\uff09 \u662f 75 \uff0c\u5728\u8fd9\u4e2a\u503c\u538b\u7f29\u5927\u5c0f\u4e0e\u56fe\u7247\u8d28\u91cf\u635f\u5931\u5f97\u5230\u5e73\u8861\u3002 compress \u4f1a\u5bf9 JPG/PNG \u8fdb\u884c\u4e00\u6b21\u538b\u7f29\u4ee5\u51cf\u5c11\u56fe\u7247\u4f53\u79ef\uff0c\u540c\u65f6\u7a0d\u5fae\u5ef6\u957f\u4e86\u56fe\u7247\u5904\u7406\u65f6\u95f4\u3001\u964d\u4f4e\u4e86\u56fe\u7247\u8d28\u91cf\u3002 noicc \u4f1a\u5bfc\u81f4\u56fe\u7247\u8d28\u91cf\u8f7b\u5fae\u7684\u4e0b\u964d\u3002 \u5927\u90e8\u5206\u52a8\u6001 GIF \u53ef\u4ee5\u901a\u8fc7\u7701\u7565\u76f8\u90bb\u5e27\u4e4b\u95f4\u5171\u540c\u90e8\u5206\u6765\u4f18\u5316\u56fe\u7247\u4f53\u79ef\u3002\u5982\u679c coalesce \u53c2\u6570\u4e3a false \uff0c\u5f53\u5bf9\u52a8\u6001 GIF \u505a\u7f29\u7565\u6216\u653e\u5927\u65f6\uff0c\u53ef\u80fd\u4f1a\u5bfc\u81f4\u56fe\u7247\u8d28\u91cf\u4e0b\u964d\u3002 ignore-error \u53ea\u5bf9 405\u3001409\u3001503 \u72b6\u6001\u7801\u6709\u6548\uff0c\u5e76\u4f1a\u5728\u54cd\u5e94\u5934\u4e2d\u9644\u52a0 x-gmkerl-err-code \u5b57\u6bb5\u6807\u8bb0\u5b9e\u9645\u9519\u8bef\u7801\u3002\u5176\u4ed6\u9519\u8bef\u72b6\u6001\u7801\u65e0\u6548\uff0c\u8fd4\u56de\u9519\u8bef\u3002","title":"\u7ed3\u679c\u8f93\u51fa"},{"location":"cloud/image/#_22","text":"\u53c2\u6570 \u503c \u8bf4\u660e /excolor/<integer> \u989c\u8272\u6570\u91cf\uff0c\u5982 128 \u63d0\u53d6\u7684\u989c\u8272\u6570\u91cf\u3002\u53ef\u9009\u503c\uff1a [1-4096] /exformat/<exformat> \u989c\u8272\u8fdb\u5236\uff0c\u5982 hex \u8fd4\u56de\u989c\u8272\u7684\u8fdb\u5236\uff0c\u9ed8\u8ba4 dec \u3002\u53ef\u9009\u503c\uff1a dec \u3001 hex ** \u6ce8 ** \u4ee5 JSON \u683c\u5f0f\u8fd4\u56de\u989c\u8272\u3002 hex\uff08\u5341\u516d\u8fdb\u5236\uff09 \u8868\u793a\u989c\u8272\u4e3a 0xRRGGBB \uff0c\u5982 0xff00aa \uff1b dec\uff08\u5341\u8fdb\u5236\uff09 \u8868\u793a\u989c\u8272\u4e3a 12345678 \u3002","title":"\u4e3b\u9898\u8272\u63d0\u53d6"},{"location":"cloud/image/#_23","text":"\u53c2\u6570 \u503c \u8bf4\u660e /gdori/<orientation> \u65b9\u5411\uff0c\u5982 top,down\uff08\u81ea\u4e0a\u800c\u4e0b\uff09 \u6e10\u53d8\u65b9\u5411 /gdpos/<gdpos> \u5f00\u59cb\u4f4d\u7f6e,\u7ed3\u675f\u4f4d\u7f6e\uff0c\u5982 10,100 \u6e10\u53d8\u4ece\u5f00\u59cb\u4f4d\u7f6e\u81f3\u7ed3\u675f\u4f4d\u7f6e\u3002\u5355\u4f4d\u50cf\u7d20\uff08px\uff09 /gdstartcolor/<gdstartcolor> RRGGBBAA\uff0c\u5982 FF000000\uff08\u7ea2\u8272\u4e0d\u900f\u660e\uff09 \u5f00\u59cb\u4f4d\u7f6e\u989c\u8272\u53ca\u900f\u660e\u5ea6 /gdstopcolor/<gdstopcolor> RRGGBBAA\uff0c\u5982 FF000000\uff08\u7ea2\u8272\u4e0d\u900f\u660e\uff09 \u7ed3\u675f\u4f4d\u7f6e\u989c\u8272\u53ca\u900f\u660e\u5ea6 ** \u6ce8 ** gdori \u53d6\u503c\uff1a top,down \uff08\u81ea\u4e0a\u800c\u4e0b\uff09\u3001 bottom,up \uff08\u81ea\u4e0b\u800c\u4e0a\uff09\u3001 left,right \uff08\u81ea\u5de6\u5411\u53f3\uff09\u3001 right,left \uff08\u81ea\u53f3\u5411\u5de6\uff09\u3002 RRGGBBAA \uff1a RRGGBB \u8868\u793a\u8fb9\u6846\u989c\u8272\uff1b AA \u8868\u793a\u4e0d\u900f\u660e\u5ea6\uff0c\u53d6\u503c [0-255] \uff0c\u503c\u8d8a\u5927\u8d8a\u900f\u660e\uff0c 00 \u8868\u793a\u5b8c\u5168\u4e0d\u900f\u660e\uff0c FF \u8868\u793a\u5b8c\u5168\u900f\u660e\u3002 \u5982\u6709\u7591\u95ee\u8bf7 \u8054\u7cfb\u6211\u4eec","title":"\u9759\u6001\u56fe\u6e10\u53d8"},{"location":"cloud/spider/","text":"\u5feb\u901f\u5165\u95e8 \u00b6 \u53c8\u62cd\u4e91\u5904\u7406\uff08\u6587\u4ef6\u62c9\u53d6\uff09\u57fa\u4e8e\u4e91\u5b58\u50a8\u670d\u52a1\uff0c\u60a8\u5728\u4f7f\u7528\u5b83\u4e4b\u524d\uff0c\u8bf7\u786e\u4fdd\u60a8\u5df2\u7ecf\u6ce8\u518c\u53c8\u62cd\u4e91\u8d26\u53f7\u5e76\u5b8c\u6210\u5b9e\u540d\u9a8c\u8bc1\uff0c\u8bf7\u786e\u4fdd\u60a8\u5df2\u7ecf\u521b\u5efa \u4e91\u5b58\u50a8\u670d\u52a1 \u3002 \u4ef7\u683c\u65b9\u9762\uff0c\u514d\u8d39\u3002 \u5f00\u53d1\u8005\u6307\u5357 \u00b6 \u6587\u4ef6\u62c9\u53d6\u6d41\u7a0b\u5982\u4e0b\uff1a \u7279\u522b\u5730\uff0c\u672c\u670d\u52a1\u65e8\u5728\u4e3a\u7528\u6237\u63d0\u4f9b\u66f4\u4fbf\u6377\u7684\u8d44\u6e90\u4e0a\u4f20\u65b9\u5f0f\uff0c\u8bf7\u60a8\u5728\u63d0\u4ea4\u8d44\u6e90\u94fe\u63a5\u65f6\u786e\u4fdd\u60a8\u62e5\u6709\u8be5\u8d44\u6e90\u7684\u4f7f\u7528\u6743\u6216\u6240\u6709\u6743\u3002 \u63d0\u4ea4\u5904\u7406\u4efb\u52a1 \u00b6 ** \u8bf7\u6c42\u65b9\u6cd5 ** \u5bf9\u9700\u8981\u62c9\u53d6\u7684\u6587\u4ef6\uff0c\u4ee5 POST \u65b9\u6cd5\u5411 http://p0.api.upyun.com/pretreatment/ \u63d0\u4ea4\u5904\u7406\u4efb\u52a1\uff0c\u54cd\u5e94\u4e2d\u8fd4\u56de\u4efb\u52a1 task_id \u3002\u4efb\u52a1\u4ee5\u5f02\u6b65\u7684\u65b9\u5f0f\u5904\u7406\uff0c\u5904\u7406\u5b8c\u6210\u540e\uff0c\u56de\u8c03\u901a\u77e5\u7528\u6237\u5904\u7406\u7ed3\u679c\u3002 curl -X POST \\ http://p0.api.upyun.com/pretreatment/ \\ -H \"Authorization: UPYUN <Operator>:<Signature>\" \\ -H \"Date: <Wed, 29 Oct 2014 02:26:58 GMT>\" \\ -H \"Content-MD5: <Content-MD5>\" \\ -d \"service=<service>\" \\ -d \"notify_url=<notify_url>\" \\ -d \"app_name=spiderman\" \\ -d \"tasks=<base64 \u7f16\u7801\u540e\u7684\u4efb\u52a1\u5b57\u7b26\u4e32>\" ** \u8ba4\u8bc1\u9274\u6743 ** Authorization \u8be6\u89c1 \u7b7e\u540d\u8ba4\u8bc1 \u3002 ** \u8bf7\u6c42\u53c2\u6570 ** \u53c2\u6570 \u7c7b\u578b \u5fc5\u9009 \u8bf4\u660e service string \u662f \u6587\u4ef6\u4e0a\u4f20\u7684\u670d\u52a1\u540d notify_url string \u662f \u56de\u8c03\u901a\u77e5\u5730\u5740\uff0c\u8be6\u89c1 \u56de\u8c03\u901a\u77e5 tasks string \u662f \u4efb\u52a1\u4fe1\u606f\uff0c\u8be6\u89c1 tasks \u53c2\u6570\u8bf4\u660e app_name string \u662f \u5904\u7406\u529f\u80fd\uff0c spiderman \u8868\u793a\u6587\u4ef6\u62c9\u53d6 ** tasks \u53c2\u6570\u8bf4\u660e ** 1. \u6309 JSON \u683c\u5f0f\u7ec4\u88c5\u4efb\u52a1\uff0c\u4e00\u6b21\u8bf7\u6c42 tasks \u6700\u591a\u53ef\u4ee5\u63d0\u4ea4 10 \u4e2a\u4efb\u52a1\u3002 \u4efb\u52a1\u53c2\u6570\u89c1 \u529f\u80fd \u3002 [ { \"url\": \"http://www.upyun.com/index.html\", // \u9700\u8981\u62c9\u53d6\u6587\u4ef6\u7684 URL \"random\": false, // \u662f\u5426\u8ffd\u52a0\u968f\u673a\u6570, \u9ed8\u8ba4 false \"overwrite\": true, // \u662f\u5426\u8986\u76d6\uff0c\u9ed8\u8ba4 true \"save_as\": \"/site/index.html\", // \u4fdd\u5b58\u8def\u5f84 }, \u2026 ] 2. \u628a JSON \u5b57\u7b26\u4e32 Base64 \u7f16\u7801\uff0c\u5f97\u5230 tasks \u3002 ** \u54cd\u5e94\u4fe1\u606f ** \u4efb\u52a1\u63d0\u4ea4\u6210\u529f\uff1a\u8fd4\u56de 200 \uff0c\u54cd\u5e94\u4f53\u662f\u4e00\u7ec4\u6309\u4efb\u52a1\u63d0\u4ea4\u5148\u540e\u987a\u5e8f\u6392\u5e8f\u7684 task_id \u3002\u4f8b\u5982\uff1a [ \"35f0148d414a688a275bf915ba7cebb2\", \"98adbaa52b2f63d6d7f327a0ff223348\", \"c3103189fa906a5354d29bd807e8dc51\", \u2026 ] \u4efb\u52a1\u63d0\u4ea4\u5931\u8d25\uff1a\u8fd4\u56de\u76f8\u5e94\u7684\u51fa\u9519\u4fe1\u606f\uff0c\u5177\u4f53\u8bf7\u53c2\u9605\u300c \u72b6\u6001\u7801\u8868 \u300d\u3002 \u56de\u8c03\u901a\u77e5 \u00b6 \u4efb\u52a1\u5904\u7406\u5b8c\u6210\u540e\uff0c\u5411 notify_url \u53d1\u9001 HTTP POST \u8bf7\u6c42\uff0c\u8bf7\u6c42\u4f53\u662f\u56de\u8c03\u4fe1\u606f\u3002 curl -X POST \\ <notify_url> \\ -H \"Authorization: UPYUN <Operator>:<Signature>\" \\ -H \"Date: <Wed, 29 Oct 2014 02:26:58 GMT>\" \\ -H \"Content-MD5: <Content-MD5>\" \\ -d \"service=<service>\" \\ # \u5176\u4ed6\u53c2\u6570... ** \u56de\u8c03\u4fe1\u606f ** \u56de\u8c03\u4fe1\u606f\u662f JSON \u5b57\u7b26\u4e32\uff0c\u53c2\u6570\u540d\u53ca\u8bf4\u660e\u5982\u4e0b\uff1a \u53c2\u6570 \u7c7b\u578b \u8bf4\u660e task_id string \u4efb\u52a1 ID service string \u6587\u4ef6\u4e0a\u4f20\u7684\u670d\u52a1\u540d status_code integer \u5904\u7406\u7ed3\u679c\u72b6\u6001\u7801\uff0c 200 \u8868\u793a\u6210\u529f\u5904\u7406 path string \u6587\u4ef6\u4e0a\u4f20\u4fdd\u5b58\u8def\u5f84 error string \u9519\u8bef\u4fe1\u606f\uff0c\u7a7a\u5b57\u7b26\u4e32\u8868\u793a\u65e0\u9519\u8bef\u4fe1\u606f ** \u56de\u8c03\u7b7e\u540d ** Authorization \u8be6\u89c1 \u7b7e\u540d\u8ba4\u8bc1 \u3002 \u72b6\u6001\u7801\u8868 \u00b6 \u72b6\u6001\u7801 \u8bf4\u660e 200 \u5904\u7406\u6210\u529f 204 \u5904\u7406\u6210\u529f\uff0c\u5185\u5bb9\u672a\u53d1\u751f\u6539\u53d8 400 \u53c2\u6570\u9519\u8bef 404 \u62c9\u53d6\u7684\u6587\u4ef6\u4e0d\u5b58\u5728 5xx \u670d\u52a1\u7aef\u9519\u8bef\u3002\u5982\u9047\u6b64\u7c7b\u9519\u8bef\uff0c\u8bf7\u53cd\u9988\u7ed9 \u552e\u540e \u6216\u60a8\u7684\u5546\u52a1\u7ecf\u7406 \u529f\u80fd \u00b6 \u6587\u4ef6\u62c9\u53d6\uff08spiderman\uff09 \u00b6 \u53c2\u6570 \u7c7b\u578b \u5fc5\u9009 \u8bf4\u660e url string \u662f \u9700\u8981\u62c9\u53d6\u6587\u4ef6\u7684 URL \u5730\u5740 save_as string \u662f \u6587\u4ef6\u4e0a\u4f20\u5b58\u653e\u8def\u5f84 overwrite boolean \u5426 \u5982\u679c\u6587\u4ef6\u5b58\u5728\uff0c\u662f\u5426\u8986\u76d6\uff0c\u9ed8\u8ba4 true content-md5 String \u5426 \u4e0a\u4f20\u6587\u4ef6\u7684 MD5 \u503c\uff0c\u5982\u679c\u8bf7\u6c42\u4e2d\u6587\u4ef6\u592a\u5927\u8ba1\u7b97 MD5 \u4e0d\u65b9\u4fbf\uff0c\u53ef\u4ee5\u4e3a\u7a7a content-type String \u5426 \u6587\u4ef6\u7c7b\u578b\uff0c\u9ed8\u8ba4\u4f7f\u7528\u6587\u4ef6\u6269\u5c55\u540d\u4f5c\u4e3a\u6587\u4ef6\u7c7b\u578b content-secret String \u5426 \u6587\u4ef6\u5bc6\u94a5\uff0c\u7528\u4e8e\u4fdd\u62a4\u6587\u4ef6\uff0c\u9632\u6b62\u6587\u4ef6\u88ab\u76f4\u63a5\u8bbf\u95ee\uff0c\u89c1 Content-Secret \u53c2\u6570\u8bf4\u660e x-upyun-meta-x String \u5426 \u6587\u4ef6\u5143\u4fe1\u606f\uff0c\u89c1 Metadata x-gmkerl-thumb string \u5426 \u56fe\u7247\u5904\u7406\u53c2\u6570\uff0c\u9ed8\u8ba4\u4e0d\u8fdb\u884c\u56fe\u7247\u5904\u7406\u3002\u8be6\u89c1 \u4e0a\u4f20\u9884\u5904\u7406\uff08\u540c\u6b65\uff09 random boolean \u5426 \u662f\u5426\u5728 url \u540e\u8ffd\u52a0\u968f\u673a\u6570\uff0c\u8ffd\u52a0\u683c\u5f0f ?<random> \uff0c\u9ed8\u8ba4 false \u3002\u89c1\u300c\u6ce8\u300d ** \u6ce8 ** url \u662f\u6307\u9700\u8981\u62c9\u53d6\u6587\u4ef6\u7684 URL \u5730\u5740\uff0c\u5982\u679c\u6587\u4ef6\u5b58\u5728\u7f13\u5b58\uff0c random \u53c2\u6570\u53ef\u4ee5\u907f\u514d\u6211\u4eec\u9519\u8bef\u91cd\u8bd5\u6216\u8005\u60a8\u91cd\u590d\u63d0\u4ea4\u8bf7\u6c42\u65f6\u83b7\u53d6\u5230\u7f13\u5b58\u5185\u5bb9\u3002 \u5982\u679c\u62c9\u53d6\u6587\u4ef6\u8fc7\u5927\uff0c\u53ef\u80fd\u4f1a\u8d85\u65f6\u5bfc\u81f4\u62c9\u53d6\u5931\u8d25\u3002 \u5982\u6709\u7591\u95ee\u8bf7 \u8054\u7cfb\u6211\u4eec","title":"\u6587\u4ef6\u62c9\u53d6"},{"location":"cloud/spider/#_1","text":"\u53c8\u62cd\u4e91\u5904\u7406\uff08\u6587\u4ef6\u62c9\u53d6\uff09\u57fa\u4e8e\u4e91\u5b58\u50a8\u670d\u52a1\uff0c\u60a8\u5728\u4f7f\u7528\u5b83\u4e4b\u524d\uff0c\u8bf7\u786e\u4fdd\u60a8\u5df2\u7ecf\u6ce8\u518c\u53c8\u62cd\u4e91\u8d26\u53f7\u5e76\u5b8c\u6210\u5b9e\u540d\u9a8c\u8bc1\uff0c\u8bf7\u786e\u4fdd\u60a8\u5df2\u7ecf\u521b\u5efa \u4e91\u5b58\u50a8\u670d\u52a1 \u3002 \u4ef7\u683c\u65b9\u9762\uff0c\u514d\u8d39\u3002","title":"\u5feb\u901f\u5165\u95e8"},{"location":"cloud/spider/#_2","text":"\u6587\u4ef6\u62c9\u53d6\u6d41\u7a0b\u5982\u4e0b\uff1a \u7279\u522b\u5730\uff0c\u672c\u670d\u52a1\u65e8\u5728\u4e3a\u7528\u6237\u63d0\u4f9b\u66f4\u4fbf\u6377\u7684\u8d44\u6e90\u4e0a\u4f20\u65b9\u5f0f\uff0c\u8bf7\u60a8\u5728\u63d0\u4ea4\u8d44\u6e90\u94fe\u63a5\u65f6\u786e\u4fdd\u60a8\u62e5\u6709\u8be5\u8d44\u6e90\u7684\u4f7f\u7528\u6743\u6216\u6240\u6709\u6743\u3002","title":"\u5f00\u53d1\u8005\u6307\u5357"},{"location":"cloud/spider/#_3","text":"** \u8bf7\u6c42\u65b9\u6cd5 ** \u5bf9\u9700\u8981\u62c9\u53d6\u7684\u6587\u4ef6\uff0c\u4ee5 POST \u65b9\u6cd5\u5411 http://p0.api.upyun.com/pretreatment/ \u63d0\u4ea4\u5904\u7406\u4efb\u52a1\uff0c\u54cd\u5e94\u4e2d\u8fd4\u56de\u4efb\u52a1 task_id \u3002\u4efb\u52a1\u4ee5\u5f02\u6b65\u7684\u65b9\u5f0f\u5904\u7406\uff0c\u5904\u7406\u5b8c\u6210\u540e\uff0c\u56de\u8c03\u901a\u77e5\u7528\u6237\u5904\u7406\u7ed3\u679c\u3002 curl -X POST \\ http://p0.api.upyun.com/pretreatment/ \\ -H \"Authorization: UPYUN <Operator>:<Signature>\" \\ -H \"Date: <Wed, 29 Oct 2014 02:26:58 GMT>\" \\ -H \"Content-MD5: <Content-MD5>\" \\ -d \"service=<service>\" \\ -d \"notify_url=<notify_url>\" \\ -d \"app_name=spiderman\" \\ -d \"tasks=<base64 \u7f16\u7801\u540e\u7684\u4efb\u52a1\u5b57\u7b26\u4e32>\" ** \u8ba4\u8bc1\u9274\u6743 ** Authorization \u8be6\u89c1 \u7b7e\u540d\u8ba4\u8bc1 \u3002 ** \u8bf7\u6c42\u53c2\u6570 ** \u53c2\u6570 \u7c7b\u578b \u5fc5\u9009 \u8bf4\u660e service string \u662f \u6587\u4ef6\u4e0a\u4f20\u7684\u670d\u52a1\u540d notify_url string \u662f \u56de\u8c03\u901a\u77e5\u5730\u5740\uff0c\u8be6\u89c1 \u56de\u8c03\u901a\u77e5 tasks string \u662f \u4efb\u52a1\u4fe1\u606f\uff0c\u8be6\u89c1 tasks \u53c2\u6570\u8bf4\u660e app_name string \u662f \u5904\u7406\u529f\u80fd\uff0c spiderman \u8868\u793a\u6587\u4ef6\u62c9\u53d6 ** tasks \u53c2\u6570\u8bf4\u660e ** 1. \u6309 JSON \u683c\u5f0f\u7ec4\u88c5\u4efb\u52a1\uff0c\u4e00\u6b21\u8bf7\u6c42 tasks \u6700\u591a\u53ef\u4ee5\u63d0\u4ea4 10 \u4e2a\u4efb\u52a1\u3002 \u4efb\u52a1\u53c2\u6570\u89c1 \u529f\u80fd \u3002 [ { \"url\": \"http://www.upyun.com/index.html\", // \u9700\u8981\u62c9\u53d6\u6587\u4ef6\u7684 URL \"random\": false, // \u662f\u5426\u8ffd\u52a0\u968f\u673a\u6570, \u9ed8\u8ba4 false \"overwrite\": true, // \u662f\u5426\u8986\u76d6\uff0c\u9ed8\u8ba4 true \"save_as\": \"/site/index.html\", // \u4fdd\u5b58\u8def\u5f84 }, \u2026 ] 2. \u628a JSON \u5b57\u7b26\u4e32 Base64 \u7f16\u7801\uff0c\u5f97\u5230 tasks \u3002 ** \u54cd\u5e94\u4fe1\u606f ** \u4efb\u52a1\u63d0\u4ea4\u6210\u529f\uff1a\u8fd4\u56de 200 \uff0c\u54cd\u5e94\u4f53\u662f\u4e00\u7ec4\u6309\u4efb\u52a1\u63d0\u4ea4\u5148\u540e\u987a\u5e8f\u6392\u5e8f\u7684 task_id \u3002\u4f8b\u5982\uff1a [ \"35f0148d414a688a275bf915ba7cebb2\", \"98adbaa52b2f63d6d7f327a0ff223348\", \"c3103189fa906a5354d29bd807e8dc51\", \u2026 ] \u4efb\u52a1\u63d0\u4ea4\u5931\u8d25\uff1a\u8fd4\u56de\u76f8\u5e94\u7684\u51fa\u9519\u4fe1\u606f\uff0c\u5177\u4f53\u8bf7\u53c2\u9605\u300c \u72b6\u6001\u7801\u8868 \u300d\u3002","title":"\u63d0\u4ea4\u5904\u7406\u4efb\u52a1"},{"location":"cloud/spider/#_4","text":"\u4efb\u52a1\u5904\u7406\u5b8c\u6210\u540e\uff0c\u5411 notify_url \u53d1\u9001 HTTP POST \u8bf7\u6c42\uff0c\u8bf7\u6c42\u4f53\u662f\u56de\u8c03\u4fe1\u606f\u3002 curl -X POST \\ <notify_url> \\ -H \"Authorization: UPYUN <Operator>:<Signature>\" \\ -H \"Date: <Wed, 29 Oct 2014 02:26:58 GMT>\" \\ -H \"Content-MD5: <Content-MD5>\" \\ -d \"service=<service>\" \\ # \u5176\u4ed6\u53c2\u6570... ** \u56de\u8c03\u4fe1\u606f ** \u56de\u8c03\u4fe1\u606f\u662f JSON \u5b57\u7b26\u4e32\uff0c\u53c2\u6570\u540d\u53ca\u8bf4\u660e\u5982\u4e0b\uff1a \u53c2\u6570 \u7c7b\u578b \u8bf4\u660e task_id string \u4efb\u52a1 ID service string \u6587\u4ef6\u4e0a\u4f20\u7684\u670d\u52a1\u540d status_code integer \u5904\u7406\u7ed3\u679c\u72b6\u6001\u7801\uff0c 200 \u8868\u793a\u6210\u529f\u5904\u7406 path string \u6587\u4ef6\u4e0a\u4f20\u4fdd\u5b58\u8def\u5f84 error string \u9519\u8bef\u4fe1\u606f\uff0c\u7a7a\u5b57\u7b26\u4e32\u8868\u793a\u65e0\u9519\u8bef\u4fe1\u606f ** \u56de\u8c03\u7b7e\u540d ** Authorization \u8be6\u89c1 \u7b7e\u540d\u8ba4\u8bc1 \u3002","title":"\u56de\u8c03\u901a\u77e5"},{"location":"cloud/spider/#_5","text":"\u72b6\u6001\u7801 \u8bf4\u660e 200 \u5904\u7406\u6210\u529f 204 \u5904\u7406\u6210\u529f\uff0c\u5185\u5bb9\u672a\u53d1\u751f\u6539\u53d8 400 \u53c2\u6570\u9519\u8bef 404 \u62c9\u53d6\u7684\u6587\u4ef6\u4e0d\u5b58\u5728 5xx \u670d\u52a1\u7aef\u9519\u8bef\u3002\u5982\u9047\u6b64\u7c7b\u9519\u8bef\uff0c\u8bf7\u53cd\u9988\u7ed9 \u552e\u540e \u6216\u60a8\u7684\u5546\u52a1\u7ecf\u7406","title":"\u72b6\u6001\u7801\u8868"},{"location":"cloud/spider/#_6","text":"","title":"\u529f\u80fd"},{"location":"cloud/spider/#spiderman","text":"\u53c2\u6570 \u7c7b\u578b \u5fc5\u9009 \u8bf4\u660e url string \u662f \u9700\u8981\u62c9\u53d6\u6587\u4ef6\u7684 URL \u5730\u5740 save_as string \u662f \u6587\u4ef6\u4e0a\u4f20\u5b58\u653e\u8def\u5f84 overwrite boolean \u5426 \u5982\u679c\u6587\u4ef6\u5b58\u5728\uff0c\u662f\u5426\u8986\u76d6\uff0c\u9ed8\u8ba4 true content-md5 String \u5426 \u4e0a\u4f20\u6587\u4ef6\u7684 MD5 \u503c\uff0c\u5982\u679c\u8bf7\u6c42\u4e2d\u6587\u4ef6\u592a\u5927\u8ba1\u7b97 MD5 \u4e0d\u65b9\u4fbf\uff0c\u53ef\u4ee5\u4e3a\u7a7a content-type String \u5426 \u6587\u4ef6\u7c7b\u578b\uff0c\u9ed8\u8ba4\u4f7f\u7528\u6587\u4ef6\u6269\u5c55\u540d\u4f5c\u4e3a\u6587\u4ef6\u7c7b\u578b content-secret String \u5426 \u6587\u4ef6\u5bc6\u94a5\uff0c\u7528\u4e8e\u4fdd\u62a4\u6587\u4ef6\uff0c\u9632\u6b62\u6587\u4ef6\u88ab\u76f4\u63a5\u8bbf\u95ee\uff0c\u89c1 Content-Secret \u53c2\u6570\u8bf4\u660e x-upyun-meta-x String \u5426 \u6587\u4ef6\u5143\u4fe1\u606f\uff0c\u89c1 Metadata x-gmkerl-thumb string \u5426 \u56fe\u7247\u5904\u7406\u53c2\u6570\uff0c\u9ed8\u8ba4\u4e0d\u8fdb\u884c\u56fe\u7247\u5904\u7406\u3002\u8be6\u89c1 \u4e0a\u4f20\u9884\u5904\u7406\uff08\u540c\u6b65\uff09 random boolean \u5426 \u662f\u5426\u5728 url \u540e\u8ffd\u52a0\u968f\u673a\u6570\uff0c\u8ffd\u52a0\u683c\u5f0f ?<random> \uff0c\u9ed8\u8ba4 false \u3002\u89c1\u300c\u6ce8\u300d ** \u6ce8 ** url \u662f\u6307\u9700\u8981\u62c9\u53d6\u6587\u4ef6\u7684 URL \u5730\u5740\uff0c\u5982\u679c\u6587\u4ef6\u5b58\u5728\u7f13\u5b58\uff0c random \u53c2\u6570\u53ef\u4ee5\u907f\u514d\u6211\u4eec\u9519\u8bef\u91cd\u8bd5\u6216\u8005\u60a8\u91cd\u590d\u63d0\u4ea4\u8bf7\u6c42\u65f6\u83b7\u53d6\u5230\u7f13\u5b58\u5185\u5bb9\u3002 \u5982\u679c\u62c9\u53d6\u6587\u4ef6\u8fc7\u5927\uff0c\u53ef\u80fd\u4f1a\u8d85\u65f6\u5bfc\u81f4\u62c9\u53d6\u5931\u8d25\u3002 \u5982\u6709\u7591\u95ee\u8bf7 \u8054\u7cfb\u6211\u4eec","title":"\u6587\u4ef6\u62c9\u53d6\uff08spiderman\uff09"},{"location":"cloud/sync_audio/","text":"\u7b80\u4ecb \u00b6 \u4e3a\u4e86\u89e3\u51b3\u5f02\u6b65\u97f3\u9891\u5904\u7406\u65f6\u95f4\u957f\uff0c\u53c8\u62cd\u4e91\u53d1\u5e03\u4e86\u7684\u540c\u6b65\u97f3\u9891\u5904\u7406\uff0c\u53ef\u4ee5\u5b9e\u73b0\u79d2\u7ea7\u97f3\u9891\u8f6c\u7801\u3002\u5b83\u5728\u4e0a\u4f20\u65f6\u4f7f\u7528\uff0c\u628a\u4e0a\u4f20\u7684\u97f3\u9891\u5904\u7406\u6210\u6307\u5b9a\u89c4\u683c\u7684\u97f3\u9891\u518d\u5b58\u50a8\u3002 \u672c\u7c7b\u529f\u80fd\u9700\u8981 \u6536\u8d39 \uff0c\u5728\u4f7f\u7528\u5b83\u4e4b\u524d\uff0c\u8bf7\u786e\u4fdd\u60a8\u5df2\u7ecf\u6ce8\u518c\u53c8\u62cd\u4e91\u8d26\u53f7\u5e76\u5b8c\u6210\u5b9e\u540d\u9a8c\u8bc1\uff0c\u8bf7\u786e\u4fdd\u60a8\u5df2\u7ecf\u521b\u5efa \u4e91\u5b58\u50a8\u670d\u52a1 \u3002 \u76f8\u5173\u9605\u8bfb\uff1a \u5f02\u6b65\u97f3\u89c6\u9891\u5904\u7406 \uff0c \u540c\u6b65\u89c6\u9891\u5904\u7406 \u3002 \u97f3\u9891\u8f6c\u7801 \u00b6 \u63d0\u4f9b\u5bf9\u97f3\u9891\u8fdb\u884c\u8f6c\u683c\u5f0f\u3001\u8f6c\u7801\u7387\u3001\u8f6c\u58f0\u9053\uff0c\u901a\u5e38\u7684\u8bbe\u7f6e\u662f\u683c\u5f0f mp3\u3001\u7801\u7387 44\u3001\u58f0\u9053 2\u3002 \u8bf7\u6c42 \u00b6 ** \u8bf7\u6c42\u65b9\u6cd5 ** \u4f7f\u7528 FORM API \u4e0a\u4f20\u97f3\u9891\u6587\u4ef6\uff0c\u5728\u4e0a\u4f20\u53c2\u6570\u4e2d\u9644\u52a0\u53c2\u6570 x-audio-avopts \u6765\u4f7f\u7528\u3002 ** \u8bf7\u6c42\u53c2\u6570 ** \u53c2\u6570 \u7c7b\u578b \u5fc5\u9009 \u8bf4\u660e /ab/ integer \u662f \u97f3\u9891\u7801\u7387\uff0c\u5355\u4f4d kbps\uff0c\u9ed8\u8ba4\u503c 44 /ac/ integer \u662f \u97f3\u9891\u58f0\u9053\uff0c\u9ed8\u8ba4\u503c 2\u3002\u53ef\u9009\u503c 1\u30012 /f/ string \u662f \u97f3\u9891\u683c\u5f0f\uff0c\u9ed8\u8ba4\u503c mp3 \u3002\u53ef\u9009\u503c mp3 \u3001ogg ** \u6ce8 ** \u53c8\u62cd\u4e91 CDN \u9ed8\u8ba4\u5f00\u542f\u4e86\u5206\u6bb5\u7f13\u5b58\uff08\u5206\u6bb5\u5206\u53d1\u6587\u4ef6\uff09\uff0c\u60a8\u4e0d\u9700\u8981\u62c5\u5fc3\u97f3\u9891\u6587\u4ef6\u5927\u8bbf\u95ee\u6162\u7684\u95ee\u9898\u3002 \u54cd\u5e94 \u00b6 \u8be6\u89c1 FORM API \u7684 \u901a\u77e5\u89c4\u5219 \u3002 \u4e3e\u4f8b \u00b6 ** \u8bf7\u6c42\u793a\u4f8b ** // FORM API \u9644\u52a0\u4e0a\u4f20\u53c2\u6570 x-audio-avopts: /ab/48/ac/1/f/ogg ** \u54cd\u5e94\u793a\u4f8b ** HTTP/1.1 200 OK X-Request-Id: 5133947d3aa83f733da38c5630964d30 Content-Length: 153 {\"sign\":\"6a73b2781706a62794db9c9dac179921\",\"code\":200,\"file_size\":23508491,\"url\":\"\\/audio.mp3\",\"time\":1494559280,\"message\":\"ok\",\"mimetype\":\"audio\\/mpeg\"} \u72b6\u6001\u7801\u8bf4\u660e \u00b6 \u53c2\u6570 \u7c7b\u578b 200 \u5904\u7406\u6210\u529f 403 \u8f6c\u7801\u5931\u8d25 405 \u53c2\u6570\u9519\u8bef 413 \u8f6c\u7801\u8d85\u65f6 5xx \u670d\u52a1\u7aef\u9519\u8bef\uff0c\u8bf7\u53cd\u9988\u7ed9 \u552e\u540e \u6216\u60a8\u7684\u5546\u52a1\u7ecf\u7406 \u5982\u6709\u7591\u95ee\u8bf7 \u8054\u7cfb\u6211\u4eec","title":"\u540c\u6b65\u97f3\u9891\u5904\u7406"},{"location":"cloud/sync_audio/#_1","text":"\u4e3a\u4e86\u89e3\u51b3\u5f02\u6b65\u97f3\u9891\u5904\u7406\u65f6\u95f4\u957f\uff0c\u53c8\u62cd\u4e91\u53d1\u5e03\u4e86\u7684\u540c\u6b65\u97f3\u9891\u5904\u7406\uff0c\u53ef\u4ee5\u5b9e\u73b0\u79d2\u7ea7\u97f3\u9891\u8f6c\u7801\u3002\u5b83\u5728\u4e0a\u4f20\u65f6\u4f7f\u7528\uff0c\u628a\u4e0a\u4f20\u7684\u97f3\u9891\u5904\u7406\u6210\u6307\u5b9a\u89c4\u683c\u7684\u97f3\u9891\u518d\u5b58\u50a8\u3002 \u672c\u7c7b\u529f\u80fd\u9700\u8981 \u6536\u8d39 \uff0c\u5728\u4f7f\u7528\u5b83\u4e4b\u524d\uff0c\u8bf7\u786e\u4fdd\u60a8\u5df2\u7ecf\u6ce8\u518c\u53c8\u62cd\u4e91\u8d26\u53f7\u5e76\u5b8c\u6210\u5b9e\u540d\u9a8c\u8bc1\uff0c\u8bf7\u786e\u4fdd\u60a8\u5df2\u7ecf\u521b\u5efa \u4e91\u5b58\u50a8\u670d\u52a1 \u3002 \u76f8\u5173\u9605\u8bfb\uff1a \u5f02\u6b65\u97f3\u89c6\u9891\u5904\u7406 \uff0c \u540c\u6b65\u89c6\u9891\u5904\u7406 \u3002","title":"\u7b80\u4ecb"},{"location":"cloud/sync_audio/#_2","text":"\u63d0\u4f9b\u5bf9\u97f3\u9891\u8fdb\u884c\u8f6c\u683c\u5f0f\u3001\u8f6c\u7801\u7387\u3001\u8f6c\u58f0\u9053\uff0c\u901a\u5e38\u7684\u8bbe\u7f6e\u662f\u683c\u5f0f mp3\u3001\u7801\u7387 44\u3001\u58f0\u9053 2\u3002","title":"\u97f3\u9891\u8f6c\u7801"},{"location":"cloud/sync_audio/#_3","text":"** \u8bf7\u6c42\u65b9\u6cd5 ** \u4f7f\u7528 FORM API \u4e0a\u4f20\u97f3\u9891\u6587\u4ef6\uff0c\u5728\u4e0a\u4f20\u53c2\u6570\u4e2d\u9644\u52a0\u53c2\u6570 x-audio-avopts \u6765\u4f7f\u7528\u3002 ** \u8bf7\u6c42\u53c2\u6570 ** \u53c2\u6570 \u7c7b\u578b \u5fc5\u9009 \u8bf4\u660e /ab/ integer \u662f \u97f3\u9891\u7801\u7387\uff0c\u5355\u4f4d kbps\uff0c\u9ed8\u8ba4\u503c 44 /ac/ integer \u662f \u97f3\u9891\u58f0\u9053\uff0c\u9ed8\u8ba4\u503c 2\u3002\u53ef\u9009\u503c 1\u30012 /f/ string \u662f \u97f3\u9891\u683c\u5f0f\uff0c\u9ed8\u8ba4\u503c mp3 \u3002\u53ef\u9009\u503c mp3 \u3001ogg ** \u6ce8 ** \u53c8\u62cd\u4e91 CDN \u9ed8\u8ba4\u5f00\u542f\u4e86\u5206\u6bb5\u7f13\u5b58\uff08\u5206\u6bb5\u5206\u53d1\u6587\u4ef6\uff09\uff0c\u60a8\u4e0d\u9700\u8981\u62c5\u5fc3\u97f3\u9891\u6587\u4ef6\u5927\u8bbf\u95ee\u6162\u7684\u95ee\u9898\u3002","title":"\u8bf7\u6c42"},{"location":"cloud/sync_audio/#_4","text":"\u8be6\u89c1 FORM API \u7684 \u901a\u77e5\u89c4\u5219 \u3002","title":"\u54cd\u5e94"},{"location":"cloud/sync_audio/#_5","text":"** \u8bf7\u6c42\u793a\u4f8b ** // FORM API \u9644\u52a0\u4e0a\u4f20\u53c2\u6570 x-audio-avopts: /ab/48/ac/1/f/ogg ** \u54cd\u5e94\u793a\u4f8b ** HTTP/1.1 200 OK X-Request-Id: 5133947d3aa83f733da38c5630964d30 Content-Length: 153 {\"sign\":\"6a73b2781706a62794db9c9dac179921\",\"code\":200,\"file_size\":23508491,\"url\":\"\\/audio.mp3\",\"time\":1494559280,\"message\":\"ok\",\"mimetype\":\"audio\\/mpeg\"}","title":"\u4e3e\u4f8b"},{"location":"cloud/sync_audio/#_6","text":"\u53c2\u6570 \u7c7b\u578b 200 \u5904\u7406\u6210\u529f 403 \u8f6c\u7801\u5931\u8d25 405 \u53c2\u6570\u9519\u8bef 413 \u8f6c\u7801\u8d85\u65f6 5xx \u670d\u52a1\u7aef\u9519\u8bef\uff0c\u8bf7\u53cd\u9988\u7ed9 \u552e\u540e \u6216\u60a8\u7684\u5546\u52a1\u7ecf\u7406 \u5982\u6709\u7591\u95ee\u8bf7 \u8054\u7cfb\u6211\u4eec","title":"\u72b6\u6001\u7801\u8bf4\u660e"},{"location":"cloud/sync_video/","text":"\u7b80\u4ecb \u00b6 \u4e3a\u4e86\u89e3\u51b3\u5f02\u6b65\u89c6\u9891\u5904\u7406\u65f6\u95f4\u957f\uff0c\u53c8\u62cd\u4e91\u63a8\u51fa\u9488\u5bf9 M3U8\uff08ts\uff09\u7684\u5b9e\u65f6\u89c6\u9891\u5904\u7406\u89e3\u51b3\u65b9\u6848\uff0c\u53ef\u4ee5\u5b9e\u73b0\u79d2\u7ea7\u89c6\u9891\u62fc\u63a5\u3001\u5408\u5e76\u3001\u5143\u4fe1\u606f\u83b7\u53d6\u3002\u60a8\u53ef\u4ee5\u628a\u89c6\u9891\u5207\u7247\u6210 M3U8\uff08ts\uff09\uff0c\u6765\u4f7f\u7528\u5b9e\u65f6\u89c6\u9891\u5904\u7406\u3002 \u672c\u7c7b\u529f\u80fd\u73b0\u5728\u514d\u8d39\uff0c\u6b22\u8fce\u4f7f\u7528\u3002\u5728\u4f7f\u7528\u5b83\u4e4b\u524d\uff0c\u8bf7\u786e\u4fdd\u60a8\u5df2\u7ecf\u6ce8\u518c\u53c8\u62cd\u4e91\u8d26\u53f7\u5e76\u5b8c\u6210\u5b9e\u540d\u9a8c\u8bc1\uff0c\u8bf7\u786e\u4fdd\u60a8\u5df2\u7ecf\u521b\u5efa \u4e91\u5b58\u50a8\u670d\u52a1 \u3002 \u76f8\u5173\u9605\u8bfb\uff1a \u5f02\u6b65\u97f3\u89c6\u9891\u5904\u7406 \uff0c \u540c\u6b65\u97f3\u9891\u5904\u7406 \u3002 M3U8 \u62fc\u63a5 \u00b6 \u591a\u4e2a M3U8 \u62fc\u63a5\u6210\u4e00\u4e2a\u3002 \u8bf7\u6c42 \u00b6 ** \u8bf7\u6c42\u8bed\u6cd5 ** POST http://p1.api.upyun.com/<service>/m3u8er/concat HTTP/1.1 Host: p1.api.upyun.com Date: GMT Date Authorization: UPYUN <Operator>:<Signature> Content-Type: application/json {\"m3u8s\": [\"<\u62fc\u63a5 M3U8 \u7684\u5b58\u50a8\u5730\u5740>\"], \"save_as\": \"<\u7ed3\u679c\u4fdd\u5b58\u5730\u5740>\"} ** \u7b7e\u540d\u9a8c\u8bc1 ** Authorization \u8be6\u89c1 \u7b7e\u540d\u8ba4\u8bc1 \u3002 ** \u8bf7\u6c42\u53c2\u6570 ** \u53c2\u6570 \u7c7b\u578b \u5fc5\u9009 \u8bf4\u660e m3u8s array \u662f \u62fc\u63a5 M3U8 \u7684\u5b58\u50a8\u5730\u5740\uff0c\u6309\u63d0\u4ea4\u7684\u987a\u5e8f\u8fdb\u884c\u62fc\u63a5 save_as string \u662f \u7ed3\u679c\u4fdd\u5b58\u5730\u5740 \u54cd\u5e94 \u00b6 \u53c2\u6570 \u8bf4\u660e status_code \u72b6\u6001\u7801\uff0c\u89c1 \u300c \u72b6\u6001\u7801\u8bf4\u660e \u300d message \u8fd4\u56de\u4fe1\u606f \u4e3e\u4f8b \u00b6 ** \u8bf7\u6c42\u793a\u4f8b ** POST http://p1.api.upyun.com/<service>/m3u8er/concat HTTP/1.1 Host: p1.api.upyun.com Content-Length: 114 Date: Thu, 11 May 2017 06:45:23 GMT Content-Type: application/json Authorization: UPYUN <operator>:6LrWf1AG2qiEjW1RByafxQmSwNQ= {\"save_as\": \"m3u8s/concat_40s.m3u8\", \"m3u8s\": [\"m3u8s/HZW.mp4.0s_20s.m3u8\", \"m3u8s/bxjg-1700-mp2.ts.0s_20s.m3u8\"]} ** \u54cd\u5e94\u793a\u4f8b ** HTTP/1.1 200 OK Server: marco/1.0 Content-Type: application/json X-Request-Id: 1cdb466a48493b641522965699f4e9f0 Content-Length: 37 Date: Thu, 11 May 2017 07:48:00 GMT {\"status_code\": 200, \"message\": \"ok\"} M3U8 \u526a\u8f91 \u00b6 \u4ece M3U8 \u4e2d\u526a\u8f91\u4e00\u6bb5\uff0c\u6216\u53bb\u6389\u4e00\u6bb5\u4fdd\u7559\u524d\u540e\u4e24\u6bb5\u3002 \u8bf7\u6c42 \u00b6 ** \u8bf7\u6c42\u8bed\u6cd5 ** POST http://p1.api.upyun.com/<service>/m3u8er/clip HTTP/1.1 Host: p1.api.upyun.com Date: GMT Date Authorization: UPYUN <Operator>:<Signature> Content-Type: application/json {\"m3u8\": \"<M3U8 \u7684\u5b58\u50a8\u5730\u5740>\", \"include\": [<\u5f00\u59cb\u65f6\u95f4\u70b9>, <\u7ed3\u675f\u65f6\u95f4\u70b9>], \"save_as\": \"<\u7ed3\u679c\u4fdd\u5b58\u5730\u5740>\"} ** \u7b7e\u540d\u9a8c\u8bc1 ** Authorization \u8be6\u89c1 \u7b7e\u540d\u8ba4\u8bc1 \u3002 ** \u8bf7\u6c42\u53c2\u6570 ** \u53c2\u6570 \u7c7b\u578b \u5fc5\u9009 \u8bf4\u660e m3u8 string \u662f M3U8 \u7684\u5b58\u50a8\u5730\u5740 save_as string \u662f \u7ed3\u679c\u4fdd\u5b58\u5730\u5740 include array \u5426 \u5305\u542b\u67d0\u6bb5\u5185\u5bb9\u7684\u5f00\u59cb\u7ed3\u675f\u65f6\u95f4\uff0c\u5355\u4f4d\u662f\u79d2\u3002\u5f53 index \u4e3a false \u65f6\uff0c\u4e3a\u5f00\u59cb\u7ed3\u675f\u5206\u7247\u5e8f\u53f7 exclude array \u5426 \u4e0d\u5305\u542b\u67d0\u6bb5\u5185\u5bb9\u7684\u5f00\u59cb\u7ed3\u675f\u65f6\u95f4\uff0c\u5355\u4f4d\u662f\u79d2\u3002\u5f53 index \u4e3a false \u65f6\uff0c\u4e3a\u5f00\u59cb\u7ed3\u675f\u5206\u7247\u5e8f\u53f7 index boolean \u5426 include \u6216\u8005 exclude \u4e2d\u7684\u503c\u662f\u5426\u4e3a ts \u5206\u7247\u5e8f\u53f7\uff0c\u9ed8\u8ba4\u4e3a false ** \u6ce8 ** include \u4e0e exclude \u4e92\u65a5\uff0c\u53ea\u80fd\u8bbe\u7f6e\u4e00\u4e2a\u3002\u5f53\u4e24\u4e2a\u90fd\u8bbe\u7f6e\u65f6\uff0c\u4f7f\u7528 include \u3002 \u5f53 include \u4e2d\u8bbe\u5b9a\u65f6\u95f4\u5728 ts \u5206\u7247\u4e2d\u95f4\u65f6\uff0c\u4f1a\u4fdd\u7559\u6574\u4e2a ts \u5206\u7247\u7684\u5185\u5bb9\uff1b\u5f53\u662f exclude \u65f6\uff0c\u4f1a\u53bb\u6389\u6574\u4e2a ts \u5206\u7247\u7684\u5185\u5bb9\u3002 \u5f53 index \u662f true \u65f6\uff0c include \u6216 exclude \u4f7f\u7528 ts \u6587\u4ef6\u7684\u5e8f\u53f7\uff0c\u5e8f\u53f7\u4ece 0 \u5f00\u59cb\uff0c\u5373\u7b2c\u4e00\u4e2a ts \u5206\u7247\u662f 0\uff0c\u7b2c\u4e8c\u4e2a ts \u5206\u7247\u662f 1\uff0c\u4ee5\u6b64\u7c7b\u63a8\u3002 \u54cd\u5e94 \u00b6 \u53c2\u6570 \u8bf4\u660e status_code \u72b6\u6001\u7801\uff0c\u89c1 \u300c \u72b6\u6001\u7801\u8bf4\u660e \u300d message \u8fd4\u56de\u4fe1\u606f \u4e3e\u4f8b \u00b6 ** \u8bf7\u6c42\u793a\u4f8b ** POST http://p1.api.upyun.com/<service>/m3u8er/clip HTTP/1.1 Host: p1.api.upyun.com Content-Length: 90 Date: Thu, 11 May 2017 06:46:39 GMT Content-Type: application/json Authorization: UPYUN <operator>:7z19rZnzeSnzeQvdE6BlG9m7Cn0= {\"save_as\": \"m3u8s/HZW.mp4.0s_20s.m3u8\", \"include\": [0, 20], \"m3u8\": \"m3u8s/HZW.mp4.m3u8\"} ** \u54cd\u5e94\u793a\u4f8b ** HTTP/1.1 200 OK Server: marco/1.0 Content-Type: application/json X-Request-Id: cfe98cb5fa525984c9f57bdab1a513fb Content-Length: 37 Date: Thu, 11 May 2017 07:49:14 GMT {\"status_code\": 200, \"message\": \"ok\"} \u89c6\u9891\u622a\u56fe\uff08M3U8 \u622a\u56fe\uff09 \u00b6 \u4ece M3U8\uff0cMP4 \u6216\u5176\u4ed6\u683c\u5f0f\u89c6\u9891\u4e2d\u83b7\u53d6\u4e00\u5f20\u622a\u56fe\u3002 \u8bf7\u6c42 \u00b6 ** \u8bf7\u6c42\u8bed\u6cd5 ** POST http://p1.api.upyun.com/<service>/snapshot HTTP/1.1 Host: p1.api.upyun.com Date: GMT Date Authorization: UPYUN <Operator>:<Signature> Content-Type: application/json {\"source\": \"<\u89c6\u9891\u7684\u5b58\u50a8\u5730\u5740>\", \"point\": \"<\u65f6\u95f4\u70b9>\", \"save_as\": \"<\u622a\u56fe\u4fdd\u5b58\u5730\u5740>\"} ** \u7b7e\u540d\u9a8c\u8bc1 ** Authorization \u8be6\u89c1 \u7b7e\u540d\u8ba4\u8bc1 \u3002 ** \u8bf7\u6c42\u53c2\u6570 ** \u53c2\u6570 \u7c7b\u578b \u5fc5\u9009 \u8bf4\u660e source string \u662f \u89c6\u9891\u7684\u5b58\u50a8\u5730\u5740 save_as string \u662f \u622a\u56fe\u4fdd\u5b58\u5730\u5740 point string \u662f \u622a\u56fe\u65f6\u95f4\u70b9\uff0c\u683c\u5f0f\u4e3a HH:MM:SS size string \u5426 \u622a\u56fe\u5c3a\u5bf8\uff0c\u683c\u5f0f\u4e3a \u5bbdx\u9ad8 \uff0c\u9ed8\u8ba4\u662f\u89c6\u9891\u5c3a\u5bf8 format string \u5426 \u622a\u56fe\u683c\u5f0f\uff0c\u53ef\u9009\u503c\u4e3a jpg \uff0c png , webp , \u9ed8\u8ba4\u6839\u636e save_as \u7684\u540e\u7f00\u751f\u6210 \u54cd\u5e94 \u00b6 \u53c2\u6570 \u8bf4\u660e status_code \u72b6\u6001\u7801\uff0c\u89c1 \u300c \u72b6\u6001\u7801\u8bf4\u660e \u300d message \u8fd4\u56de\u4fe1\u606f content_type \u622a\u56fe\u7c7b\u578b content_length \u622a\u56fe\u5927\u5c0f save_as \u622a\u56fe\u4fdd\u5b58\u5730\u5740 \u4e3e\u4f8b \u00b6 ** \u8bf7\u6c42\u793a\u4f8b ** POST http://p1.api.upyun.com/<service>/snapshot HTTP/1.1 Host: p1.api.upyun.com Date: Tue, 20 Jun 2017 10:19:15 GMT Authorization: UPYUN <operator>:4+Hqjo788qC4v4zHRxnvhpweFQo= Content-Length: 96 Content-Type: application/json {\"source\": \"/tmp/360p.mp4\", \"save_as\": \"/foo03.jpg\", \"point\": \"00:00:05\"} ** \u54cd\u5e94\u793a\u4f8b ** HTTP/1.1 200 OK Server: marco/1.4 Content-Type: application/json X-Request-Id: 8f404a0b864531edbaa7288563e0db0e Content-Length: 87 Date: Tue, 20 Jun 2017 10:19:27 GMT {\"status_code\": 200, \"message\": \"ok\",\"content_type\":\"image/jpeg\",\"content_length\":14482,\"save_as\":\"/foo03.jpg\"} \u83b7\u53d6 M3U8 \u4fe1\u606f \u00b6 \u83b7\u53d6 M3U8 \u65f6\u957f\u548c\u5206\u7247\u4fe1\u606f\u3002 \u8bf7\u6c42 \u00b6 ** \u8bf7\u6c42\u8bed\u6cd5 ** POST http://p1.api.upyun.com/<service>/m3u8er/get_meta HTTP/1.1 Host: p1.api.upyun.com Date: GMT Date Authorization: UPYUN <Operator>:<Signature> Content-Type: application/json {\"m3u8\": \"<M3U8 \u7684\u5b58\u50a8\u5730\u5740 >\"} ** \u7b7e\u540d\u9a8c\u8bc1 ** Authorization \u8be6\u89c1 \u7b7e\u540d\u8ba4\u8bc1 \u3002 ** \u8bf7\u6c42\u53c2\u6570 ** \u53c2\u6570 \u7c7b\u578b \u5fc5\u9009 \u8bf4\u660e m3u8 string \u662f M3U8 \u7684\u5b58\u50a8\u5730\u5740 \u54cd\u5e94 \u00b6 \u53c2\u6570 \u8bf4\u660e status_code \u72b6\u6001\u7801\uff0c\u89c1 \u300c \u72b6\u6001\u7801\u8bf4\u660e \u300d message \u8fd4\u56de\u4fe1\u606f meta.duartion m3u8 \u65f6\u957f meta.points \u65f6\u95f4\u70b9 \u4e3e\u4f8b \u00b6 ** \u8bf7\u6c42\u793a\u4f8b ** POST http://p1.api.upyun.com/<service>/m3u8er/get_meta HTTP/1.1 Host: p1.api.upyun.com Content-Length: 29 Date: Thu, 11 May 2017 06:40:06 GMT Content-Type: application/json Authorization: UPYUN <operator>:3FRsny9cB/7VVRaHv4WyZBvpms0= {\"m3u8\": \"m3u8s/concat.m3u8\"} ** \u54cd\u5e94\u793a\u4f8b ** HTTP/1.1 200 OK Server: marco/1.0 Content-Type: application/json X-Request-Id: 3f58bba91921504e395b8010037ca038 Content-Length: 5707 Date: Thu, 11 May 2017 08:48:05 GMT {\"status_code\": 200, \"message\": \"ok\", \"meta\": {\"duration\": 2850.2974559999984, \"points\": [11.277933000000001, 23.723700000000001, 34.634599999999999, 42.008632999999996, 50.483765999999996, 64.764698999999993, 70.804065999999992, 82.31556599999999, 92.892798999999997, 100.20009899999999, 114.74796599999999, 123.92379899999999, 131.09763199999998, 140.97416499999997, 158.32483199999996, 160.05989899999994, 172.70586599999996, 181.04753299999996, 191.79159999999996, <\u540e\u7eed\u7701\u7565>]}} \u83b7\u53d6\u97f3\u89c6\u9891\u5143\u4fe1\u606f \u00b6 \u83b7\u53d6\u97f3\u89c6\u9891\u7684\u5143\u4fe1\u606f \u8bf7\u6c42 \u00b6 ** \u8bf7\u6c42\u8bed\u6cd5 ** POST http://p1.api.upyun.com/<service>/avmeta/get_meta HTTP/1.1 Host: p1.api.upyun.com Date: GMT Date Authorization: UPYUN <Operator>:<Signature> Content-Type: application/json {\"source\": \"<\u97f3\u89c6\u9891\u7684\u5b58\u50a8\u5730\u5740 >\"} ** \u7b7e\u540d\u9a8c\u8bc1 ** Authorization \u8be6\u89c1 \u7b7e\u540d\u8ba4\u8bc1 \u3002 ** \u8bf7\u6c42\u53c2\u6570 ** \u53c2\u6570 \u7c7b\u578b \u5fc5\u9009 \u8bf4\u660e source string \u662f \u97f3\u89c6\u9891\u7684\u5b58\u50a8\u5730\u5740 \u54cd\u5e94 \u00b6 \u53c2\u6570 \u7c7b\u578b \u8bf4\u660e format json \u97f3\u89c6\u9891\u683c\u5f0f\u4fe1\u606f format.bitrate int \u6bd4\u7279\u7387 format.duration float \u65f6\u957f format.format string \u5bb9\u5668\u683c\u5f0f format.fullname string \u5bb9\u5668\u683c\u5f0f\u5168\u79f0 streams list stream \u5217\u8868 stream.index int \u8868\u793a\u7b2c\u51e0\u8def\u6d41 stream.type string \u4e00\u822c\u60c5\u51b5\u4e0b, video \u6216 audio stream.bitrate int \u6d41\u7801\u7387 stream.codec string \u6d41\u7f16\u7801 stream.codec_desc string \u6d41\u7f16\u7801\u8bf4\u660e stream.duration float \u6d41\u65f6\u957f stream.video_fps float (\u89c6\u9891\u6d41)\u89c6\u9891\u5e27\u6570 stream.video_height int (\u89c6\u9891\u6d41)\u89c6\u9891\u9ad8\u5ea6 stream.video_width int (\u89c6\u9891\u6d41)\u89c6\u9891\u5bbd\u5ea6 stream.audio_channels int (\u97f3\u9891\u6d41)\u97f3\u9891\u901a\u9053\u6570 stream.audio_samplerate int (\u97f3\u9891\u6d41)\u97f3\u9891\u91c7\u6837\u7387 \u4e3e\u4f8b \u00b6 ** \u8bf7\u6c42\u793a\u4f8b ** POST /<service>/avmeta/get_meta HTTP/1.1 Host: p1.api.upyun.com User-Agent: python-requests/2.18.2 Accept-Encoding: gzip, deflate Accept: */* Connection: keep-alive Date: Mon, 21 Aug 2017 05:50:03 GMT Authorization: UPYUN <service>:ivoVvndudFq76zpZr/3S5QZGUNg= Content-Length: 27 Content-Type: application/json {\"source\": \"/tmp/360p.mp4\"} ** \u54cd\u5e94\u793a\u4f8b ** HTTP/1.1 200 OK Server: marco/1.6 Content-Type: application/json Transfer-Encoding: chunked Connection: keep-alive Vary: Accept-Encoding X-Request-Id: 6b37641338d5a71cd6306eb7da14448d Date: Mon, 21 Aug 2017 05:50:05 GMT X-Request-Path: poc-hgh-a-14, 403-zj-fud-206 Content-Encoding: gzip { \"streams\": [ { \"index\": 0, \"type\": \"video\", \"video_fps\": 25, \"video_height\": 236, \"video_width\": 426, \"codec_desc\": \"H.264 / AVC / MPEG-4 AVC / MPEG-4 part 10\", \"codec\": \"h264\", \"bitrate\": 99608, \"duration\": 184.8, \"metadata\": { \"handler_name\": \"VideoHandler\", \"language\": \"und\" } }, { \"index\": 1, \"type\": \"audio\", \"audio_channels\": 2, \"audio_samplerate\": 44100, \"codec_desc\": \"AAC (Advanced Audio Coding)\", \"codec\": \"aac\", \"bitrate\": 48005, \"duration\": 184.855011, \"metadata\": { \"handler_name\": \"SoundHandler\", \"language\": \"und\" } } ], \"format\": { \"duration\": 184.902, \"fullname\": \"QuickTime / MOV\", \"bitrate\": 154062, \"filesize\": 3.560797e+06, \"format\": \"mov,mp4,m4a,3gp,3g2,mj2\" } } \u72b6\u6001\u7801\u8bf4\u660e \u00b6 \u53c2\u6570 \u7c7b\u578b 200 \u5904\u7406\u6210\u529f 400 \u8bf7\u6c42\u53c2\u6570\u9519\u8bef 401 \u8bf7\u6c42\u53c2\u6570\u9519\u8bef 404 m3u8/\u89c6\u9891\u4e0d\u5b58\u5728 5xx \u670d\u52a1\u7aef\u9519\u8bef\uff0c\u8bf7\u53cd\u9988\u7ed9 \u552e\u540e \u6216\u60a8\u7684\u5546\u52a1\u7ecf\u7406 \u5982\u6709\u7591\u95ee\u8bf7 \u8054\u7cfb\u6211\u4eec","title":"\u540c\u6b65\u89c6\u9891\u5904\u7406"},{"location":"cloud/sync_video/#_1","text":"\u4e3a\u4e86\u89e3\u51b3\u5f02\u6b65\u89c6\u9891\u5904\u7406\u65f6\u95f4\u957f\uff0c\u53c8\u62cd\u4e91\u63a8\u51fa\u9488\u5bf9 M3U8\uff08ts\uff09\u7684\u5b9e\u65f6\u89c6\u9891\u5904\u7406\u89e3\u51b3\u65b9\u6848\uff0c\u53ef\u4ee5\u5b9e\u73b0\u79d2\u7ea7\u89c6\u9891\u62fc\u63a5\u3001\u5408\u5e76\u3001\u5143\u4fe1\u606f\u83b7\u53d6\u3002\u60a8\u53ef\u4ee5\u628a\u89c6\u9891\u5207\u7247\u6210 M3U8\uff08ts\uff09\uff0c\u6765\u4f7f\u7528\u5b9e\u65f6\u89c6\u9891\u5904\u7406\u3002 \u672c\u7c7b\u529f\u80fd\u73b0\u5728\u514d\u8d39\uff0c\u6b22\u8fce\u4f7f\u7528\u3002\u5728\u4f7f\u7528\u5b83\u4e4b\u524d\uff0c\u8bf7\u786e\u4fdd\u60a8\u5df2\u7ecf\u6ce8\u518c\u53c8\u62cd\u4e91\u8d26\u53f7\u5e76\u5b8c\u6210\u5b9e\u540d\u9a8c\u8bc1\uff0c\u8bf7\u786e\u4fdd\u60a8\u5df2\u7ecf\u521b\u5efa \u4e91\u5b58\u50a8\u670d\u52a1 \u3002 \u76f8\u5173\u9605\u8bfb\uff1a \u5f02\u6b65\u97f3\u89c6\u9891\u5904\u7406 \uff0c \u540c\u6b65\u97f3\u9891\u5904\u7406 \u3002","title":"\u7b80\u4ecb"},{"location":"cloud/sync_video/#m3u8","text":"\u591a\u4e2a M3U8 \u62fc\u63a5\u6210\u4e00\u4e2a\u3002","title":"M3U8 \u62fc\u63a5"},{"location":"cloud/sync_video/#_2","text":"** \u8bf7\u6c42\u8bed\u6cd5 ** POST http://p1.api.upyun.com/<service>/m3u8er/concat HTTP/1.1 Host: p1.api.upyun.com Date: GMT Date Authorization: UPYUN <Operator>:<Signature> Content-Type: application/json {\"m3u8s\": [\"<\u62fc\u63a5 M3U8 \u7684\u5b58\u50a8\u5730\u5740>\"], \"save_as\": \"<\u7ed3\u679c\u4fdd\u5b58\u5730\u5740>\"} ** \u7b7e\u540d\u9a8c\u8bc1 ** Authorization \u8be6\u89c1 \u7b7e\u540d\u8ba4\u8bc1 \u3002 ** \u8bf7\u6c42\u53c2\u6570 ** \u53c2\u6570 \u7c7b\u578b \u5fc5\u9009 \u8bf4\u660e m3u8s array \u662f \u62fc\u63a5 M3U8 \u7684\u5b58\u50a8\u5730\u5740\uff0c\u6309\u63d0\u4ea4\u7684\u987a\u5e8f\u8fdb\u884c\u62fc\u63a5 save_as string \u662f \u7ed3\u679c\u4fdd\u5b58\u5730\u5740","title":"\u8bf7\u6c42"},{"location":"cloud/sync_video/#_3","text":"\u53c2\u6570 \u8bf4\u660e status_code \u72b6\u6001\u7801\uff0c\u89c1 \u300c \u72b6\u6001\u7801\u8bf4\u660e \u300d message \u8fd4\u56de\u4fe1\u606f","title":"\u54cd\u5e94"},{"location":"cloud/sync_video/#_4","text":"** \u8bf7\u6c42\u793a\u4f8b ** POST http://p1.api.upyun.com/<service>/m3u8er/concat HTTP/1.1 Host: p1.api.upyun.com Content-Length: 114 Date: Thu, 11 May 2017 06:45:23 GMT Content-Type: application/json Authorization: UPYUN <operator>:6LrWf1AG2qiEjW1RByafxQmSwNQ= {\"save_as\": \"m3u8s/concat_40s.m3u8\", \"m3u8s\": [\"m3u8s/HZW.mp4.0s_20s.m3u8\", \"m3u8s/bxjg-1700-mp2.ts.0s_20s.m3u8\"]} ** \u54cd\u5e94\u793a\u4f8b ** HTTP/1.1 200 OK Server: marco/1.0 Content-Type: application/json X-Request-Id: 1cdb466a48493b641522965699f4e9f0 Content-Length: 37 Date: Thu, 11 May 2017 07:48:00 GMT {\"status_code\": 200, \"message\": \"ok\"}","title":"\u4e3e\u4f8b"},{"location":"cloud/sync_video/#m3u8_1","text":"\u4ece M3U8 \u4e2d\u526a\u8f91\u4e00\u6bb5\uff0c\u6216\u53bb\u6389\u4e00\u6bb5\u4fdd\u7559\u524d\u540e\u4e24\u6bb5\u3002","title":"M3U8 \u526a\u8f91"},{"location":"cloud/sync_video/#_5","text":"** \u8bf7\u6c42\u8bed\u6cd5 ** POST http://p1.api.upyun.com/<service>/m3u8er/clip HTTP/1.1 Host: p1.api.upyun.com Date: GMT Date Authorization: UPYUN <Operator>:<Signature> Content-Type: application/json {\"m3u8\": \"<M3U8 \u7684\u5b58\u50a8\u5730\u5740>\", \"include\": [<\u5f00\u59cb\u65f6\u95f4\u70b9>, <\u7ed3\u675f\u65f6\u95f4\u70b9>], \"save_as\": \"<\u7ed3\u679c\u4fdd\u5b58\u5730\u5740>\"} ** \u7b7e\u540d\u9a8c\u8bc1 ** Authorization \u8be6\u89c1 \u7b7e\u540d\u8ba4\u8bc1 \u3002 ** \u8bf7\u6c42\u53c2\u6570 ** \u53c2\u6570 \u7c7b\u578b \u5fc5\u9009 \u8bf4\u660e m3u8 string \u662f M3U8 \u7684\u5b58\u50a8\u5730\u5740 save_as string \u662f \u7ed3\u679c\u4fdd\u5b58\u5730\u5740 include array \u5426 \u5305\u542b\u67d0\u6bb5\u5185\u5bb9\u7684\u5f00\u59cb\u7ed3\u675f\u65f6\u95f4\uff0c\u5355\u4f4d\u662f\u79d2\u3002\u5f53 index \u4e3a false \u65f6\uff0c\u4e3a\u5f00\u59cb\u7ed3\u675f\u5206\u7247\u5e8f\u53f7 exclude array \u5426 \u4e0d\u5305\u542b\u67d0\u6bb5\u5185\u5bb9\u7684\u5f00\u59cb\u7ed3\u675f\u65f6\u95f4\uff0c\u5355\u4f4d\u662f\u79d2\u3002\u5f53 index \u4e3a false \u65f6\uff0c\u4e3a\u5f00\u59cb\u7ed3\u675f\u5206\u7247\u5e8f\u53f7 index boolean \u5426 include \u6216\u8005 exclude \u4e2d\u7684\u503c\u662f\u5426\u4e3a ts \u5206\u7247\u5e8f\u53f7\uff0c\u9ed8\u8ba4\u4e3a false ** \u6ce8 ** include \u4e0e exclude \u4e92\u65a5\uff0c\u53ea\u80fd\u8bbe\u7f6e\u4e00\u4e2a\u3002\u5f53\u4e24\u4e2a\u90fd\u8bbe\u7f6e\u65f6\uff0c\u4f7f\u7528 include \u3002 \u5f53 include \u4e2d\u8bbe\u5b9a\u65f6\u95f4\u5728 ts \u5206\u7247\u4e2d\u95f4\u65f6\uff0c\u4f1a\u4fdd\u7559\u6574\u4e2a ts \u5206\u7247\u7684\u5185\u5bb9\uff1b\u5f53\u662f exclude \u65f6\uff0c\u4f1a\u53bb\u6389\u6574\u4e2a ts \u5206\u7247\u7684\u5185\u5bb9\u3002 \u5f53 index \u662f true \u65f6\uff0c include \u6216 exclude \u4f7f\u7528 ts \u6587\u4ef6\u7684\u5e8f\u53f7\uff0c\u5e8f\u53f7\u4ece 0 \u5f00\u59cb\uff0c\u5373\u7b2c\u4e00\u4e2a ts \u5206\u7247\u662f 0\uff0c\u7b2c\u4e8c\u4e2a ts \u5206\u7247\u662f 1\uff0c\u4ee5\u6b64\u7c7b\u63a8\u3002","title":"\u8bf7\u6c42"},{"location":"cloud/sync_video/#_6","text":"\u53c2\u6570 \u8bf4\u660e status_code \u72b6\u6001\u7801\uff0c\u89c1 \u300c \u72b6\u6001\u7801\u8bf4\u660e \u300d message \u8fd4\u56de\u4fe1\u606f","title":"\u54cd\u5e94"},{"location":"cloud/sync_video/#_7","text":"** \u8bf7\u6c42\u793a\u4f8b ** POST http://p1.api.upyun.com/<service>/m3u8er/clip HTTP/1.1 Host: p1.api.upyun.com Content-Length: 90 Date: Thu, 11 May 2017 06:46:39 GMT Content-Type: application/json Authorization: UPYUN <operator>:7z19rZnzeSnzeQvdE6BlG9m7Cn0= {\"save_as\": \"m3u8s/HZW.mp4.0s_20s.m3u8\", \"include\": [0, 20], \"m3u8\": \"m3u8s/HZW.mp4.m3u8\"} ** \u54cd\u5e94\u793a\u4f8b ** HTTP/1.1 200 OK Server: marco/1.0 Content-Type: application/json X-Request-Id: cfe98cb5fa525984c9f57bdab1a513fb Content-Length: 37 Date: Thu, 11 May 2017 07:49:14 GMT {\"status_code\": 200, \"message\": \"ok\"}","title":"\u4e3e\u4f8b"},{"location":"cloud/sync_video/#m3u8_2","text":"\u4ece M3U8\uff0cMP4 \u6216\u5176\u4ed6\u683c\u5f0f\u89c6\u9891\u4e2d\u83b7\u53d6\u4e00\u5f20\u622a\u56fe\u3002","title":"\u89c6\u9891\u622a\u56fe\uff08M3U8 \u622a\u56fe\uff09"},{"location":"cloud/sync_video/#_8","text":"** \u8bf7\u6c42\u8bed\u6cd5 ** POST http://p1.api.upyun.com/<service>/snapshot HTTP/1.1 Host: p1.api.upyun.com Date: GMT Date Authorization: UPYUN <Operator>:<Signature> Content-Type: application/json {\"source\": \"<\u89c6\u9891\u7684\u5b58\u50a8\u5730\u5740>\", \"point\": \"<\u65f6\u95f4\u70b9>\", \"save_as\": \"<\u622a\u56fe\u4fdd\u5b58\u5730\u5740>\"} ** \u7b7e\u540d\u9a8c\u8bc1 ** Authorization \u8be6\u89c1 \u7b7e\u540d\u8ba4\u8bc1 \u3002 ** \u8bf7\u6c42\u53c2\u6570 ** \u53c2\u6570 \u7c7b\u578b \u5fc5\u9009 \u8bf4\u660e source string \u662f \u89c6\u9891\u7684\u5b58\u50a8\u5730\u5740 save_as string \u662f \u622a\u56fe\u4fdd\u5b58\u5730\u5740 point string \u662f \u622a\u56fe\u65f6\u95f4\u70b9\uff0c\u683c\u5f0f\u4e3a HH:MM:SS size string \u5426 \u622a\u56fe\u5c3a\u5bf8\uff0c\u683c\u5f0f\u4e3a \u5bbdx\u9ad8 \uff0c\u9ed8\u8ba4\u662f\u89c6\u9891\u5c3a\u5bf8 format string \u5426 \u622a\u56fe\u683c\u5f0f\uff0c\u53ef\u9009\u503c\u4e3a jpg \uff0c png , webp , \u9ed8\u8ba4\u6839\u636e save_as \u7684\u540e\u7f00\u751f\u6210","title":"\u8bf7\u6c42"},{"location":"cloud/sync_video/#_9","text":"\u53c2\u6570 \u8bf4\u660e status_code \u72b6\u6001\u7801\uff0c\u89c1 \u300c \u72b6\u6001\u7801\u8bf4\u660e \u300d message \u8fd4\u56de\u4fe1\u606f content_type \u622a\u56fe\u7c7b\u578b content_length \u622a\u56fe\u5927\u5c0f save_as \u622a\u56fe\u4fdd\u5b58\u5730\u5740","title":"\u54cd\u5e94"},{"location":"cloud/sync_video/#_10","text":"** \u8bf7\u6c42\u793a\u4f8b ** POST http://p1.api.upyun.com/<service>/snapshot HTTP/1.1 Host: p1.api.upyun.com Date: Tue, 20 Jun 2017 10:19:15 GMT Authorization: UPYUN <operator>:4+Hqjo788qC4v4zHRxnvhpweFQo= Content-Length: 96 Content-Type: application/json {\"source\": \"/tmp/360p.mp4\", \"save_as\": \"/foo03.jpg\", \"point\": \"00:00:05\"} ** \u54cd\u5e94\u793a\u4f8b ** HTTP/1.1 200 OK Server: marco/1.4 Content-Type: application/json X-Request-Id: 8f404a0b864531edbaa7288563e0db0e Content-Length: 87 Date: Tue, 20 Jun 2017 10:19:27 GMT {\"status_code\": 200, \"message\": \"ok\",\"content_type\":\"image/jpeg\",\"content_length\":14482,\"save_as\":\"/foo03.jpg\"}","title":"\u4e3e\u4f8b"},{"location":"cloud/sync_video/#m3u8_3","text":"\u83b7\u53d6 M3U8 \u65f6\u957f\u548c\u5206\u7247\u4fe1\u606f\u3002","title":"\u83b7\u53d6 M3U8 \u4fe1\u606f"},{"location":"cloud/sync_video/#_11","text":"** \u8bf7\u6c42\u8bed\u6cd5 ** POST http://p1.api.upyun.com/<service>/m3u8er/get_meta HTTP/1.1 Host: p1.api.upyun.com Date: GMT Date Authorization: UPYUN <Operator>:<Signature> Content-Type: application/json {\"m3u8\": \"<M3U8 \u7684\u5b58\u50a8\u5730\u5740 >\"} ** \u7b7e\u540d\u9a8c\u8bc1 ** Authorization \u8be6\u89c1 \u7b7e\u540d\u8ba4\u8bc1 \u3002 ** \u8bf7\u6c42\u53c2\u6570 ** \u53c2\u6570 \u7c7b\u578b \u5fc5\u9009 \u8bf4\u660e m3u8 string \u662f M3U8 \u7684\u5b58\u50a8\u5730\u5740","title":"\u8bf7\u6c42"},{"location":"cloud/sync_video/#_12","text":"\u53c2\u6570 \u8bf4\u660e status_code \u72b6\u6001\u7801\uff0c\u89c1 \u300c \u72b6\u6001\u7801\u8bf4\u660e \u300d message \u8fd4\u56de\u4fe1\u606f meta.duartion m3u8 \u65f6\u957f meta.points \u65f6\u95f4\u70b9","title":"\u54cd\u5e94"},{"location":"cloud/sync_video/#_13","text":"** \u8bf7\u6c42\u793a\u4f8b ** POST http://p1.api.upyun.com/<service>/m3u8er/get_meta HTTP/1.1 Host: p1.api.upyun.com Content-Length: 29 Date: Thu, 11 May 2017 06:40:06 GMT Content-Type: application/json Authorization: UPYUN <operator>:3FRsny9cB/7VVRaHv4WyZBvpms0= {\"m3u8\": \"m3u8s/concat.m3u8\"} ** \u54cd\u5e94\u793a\u4f8b ** HTTP/1.1 200 OK Server: marco/1.0 Content-Type: application/json X-Request-Id: 3f58bba91921504e395b8010037ca038 Content-Length: 5707 Date: Thu, 11 May 2017 08:48:05 GMT {\"status_code\": 200, \"message\": \"ok\", \"meta\": {\"duration\": 2850.2974559999984, \"points\": [11.277933000000001, 23.723700000000001, 34.634599999999999, 42.008632999999996, 50.483765999999996, 64.764698999999993, 70.804065999999992, 82.31556599999999, 92.892798999999997, 100.20009899999999, 114.74796599999999, 123.92379899999999, 131.09763199999998, 140.97416499999997, 158.32483199999996, 160.05989899999994, 172.70586599999996, 181.04753299999996, 191.79159999999996, <\u540e\u7eed\u7701\u7565>]}}","title":"\u4e3e\u4f8b"},{"location":"cloud/sync_video/#_14","text":"\u83b7\u53d6\u97f3\u89c6\u9891\u7684\u5143\u4fe1\u606f","title":"\u83b7\u53d6\u97f3\u89c6\u9891\u5143\u4fe1\u606f"},{"location":"cloud/sync_video/#_15","text":"** \u8bf7\u6c42\u8bed\u6cd5 ** POST http://p1.api.upyun.com/<service>/avmeta/get_meta HTTP/1.1 Host: p1.api.upyun.com Date: GMT Date Authorization: UPYUN <Operator>:<Signature> Content-Type: application/json {\"source\": \"<\u97f3\u89c6\u9891\u7684\u5b58\u50a8\u5730\u5740 >\"} ** \u7b7e\u540d\u9a8c\u8bc1 ** Authorization \u8be6\u89c1 \u7b7e\u540d\u8ba4\u8bc1 \u3002 ** \u8bf7\u6c42\u53c2\u6570 ** \u53c2\u6570 \u7c7b\u578b \u5fc5\u9009 \u8bf4\u660e source string \u662f \u97f3\u89c6\u9891\u7684\u5b58\u50a8\u5730\u5740","title":"\u8bf7\u6c42"},{"location":"cloud/sync_video/#_16","text":"\u53c2\u6570 \u7c7b\u578b \u8bf4\u660e format json \u97f3\u89c6\u9891\u683c\u5f0f\u4fe1\u606f format.bitrate int \u6bd4\u7279\u7387 format.duration float \u65f6\u957f format.format string \u5bb9\u5668\u683c\u5f0f format.fullname string \u5bb9\u5668\u683c\u5f0f\u5168\u79f0 streams list stream \u5217\u8868 stream.index int \u8868\u793a\u7b2c\u51e0\u8def\u6d41 stream.type string \u4e00\u822c\u60c5\u51b5\u4e0b, video \u6216 audio stream.bitrate int \u6d41\u7801\u7387 stream.codec string \u6d41\u7f16\u7801 stream.codec_desc string \u6d41\u7f16\u7801\u8bf4\u660e stream.duration float \u6d41\u65f6\u957f stream.video_fps float (\u89c6\u9891\u6d41)\u89c6\u9891\u5e27\u6570 stream.video_height int (\u89c6\u9891\u6d41)\u89c6\u9891\u9ad8\u5ea6 stream.video_width int (\u89c6\u9891\u6d41)\u89c6\u9891\u5bbd\u5ea6 stream.audio_channels int (\u97f3\u9891\u6d41)\u97f3\u9891\u901a\u9053\u6570 stream.audio_samplerate int (\u97f3\u9891\u6d41)\u97f3\u9891\u91c7\u6837\u7387","title":"\u54cd\u5e94"},{"location":"cloud/sync_video/#_17","text":"** \u8bf7\u6c42\u793a\u4f8b ** POST /<service>/avmeta/get_meta HTTP/1.1 Host: p1.api.upyun.com User-Agent: python-requests/2.18.2 Accept-Encoding: gzip, deflate Accept: */* Connection: keep-alive Date: Mon, 21 Aug 2017 05:50:03 GMT Authorization: UPYUN <service>:ivoVvndudFq76zpZr/3S5QZGUNg= Content-Length: 27 Content-Type: application/json {\"source\": \"/tmp/360p.mp4\"} ** \u54cd\u5e94\u793a\u4f8b ** HTTP/1.1 200 OK Server: marco/1.6 Content-Type: application/json Transfer-Encoding: chunked Connection: keep-alive Vary: Accept-Encoding X-Request-Id: 6b37641338d5a71cd6306eb7da14448d Date: Mon, 21 Aug 2017 05:50:05 GMT X-Request-Path: poc-hgh-a-14, 403-zj-fud-206 Content-Encoding: gzip { \"streams\": [ { \"index\": 0, \"type\": \"video\", \"video_fps\": 25, \"video_height\": 236, \"video_width\": 426, \"codec_desc\": \"H.264 / AVC / MPEG-4 AVC / MPEG-4 part 10\", \"codec\": \"h264\", \"bitrate\": 99608, \"duration\": 184.8, \"metadata\": { \"handler_name\": \"VideoHandler\", \"language\": \"und\" } }, { \"index\": 1, \"type\": \"audio\", \"audio_channels\": 2, \"audio_samplerate\": 44100, \"codec_desc\": \"AAC (Advanced Audio Coding)\", \"codec\": \"aac\", \"bitrate\": 48005, \"duration\": 184.855011, \"metadata\": { \"handler_name\": \"SoundHandler\", \"language\": \"und\" } } ], \"format\": { \"duration\": 184.902, \"fullname\": \"QuickTime / MOV\", \"bitrate\": 154062, \"filesize\": 3.560797e+06, \"format\": \"mov,mp4,m4a,3gp,3g2,mj2\" } }","title":"\u4e3e\u4f8b"},{"location":"cloud/sync_video/#_18","text":"\u53c2\u6570 \u7c7b\u578b 200 \u5904\u7406\u6210\u529f 400 \u8bf7\u6c42\u53c2\u6570\u9519\u8bef 401 \u8bf7\u6c42\u53c2\u6570\u9519\u8bef 404 m3u8/\u89c6\u9891\u4e0d\u5b58\u5728 5xx \u670d\u52a1\u7aef\u9519\u8bef\uff0c\u8bf7\u53cd\u9988\u7ed9 \u552e\u540e \u6216\u60a8\u7684\u5546\u52a1\u7ecf\u7406 \u5982\u6709\u7591\u95ee\u8bf7 \u8054\u7cfb\u6211\u4eec","title":"\u72b6\u6001\u7801\u8bf4\u660e"},{"location":"cloud/uconvert/","text":"\u5feb\u901f\u5165\u95e8 \u00b6 \u53c8\u62cd\u4e91\u5904\u7406\uff08\u6587\u6863\u8f6c\u6362\uff09\u5b9e\u73b0\u628a PDF\uff0cPPT\uff0cWORD\uff0cEXCEL \u6587\u6863\u8f6c\u6362\u4e3a\u4e00\u7ec4 PNG \u56fe\u7247\u3002 \u60a8\u5728\u4f7f\u7528\u5b83\u4e4b\u524d\uff0c\u8bf7\u786e\u4fdd\u60a8\u5df2\u7ecf\u6ce8\u518c\u53c8\u62cd\u4e91\u8d26\u53f7\u5e76\u5b8c\u6210\u5b9e\u540d\u9a8c\u8bc1\uff0c\u5e76\u786e\u4fdd\u60a8\u5df2\u7ecf\u521b\u5efa \u4e91\u5b58\u50a8\u670d\u52a1 \u3002 \u5f00\u53d1\u8005\u6307\u5357 \u00b6 \u4e0a\u4f20\u9884\u5904\u7406 \u00b6 \u5728\u4e0a\u4f20\u6587\u4ef6\u65f6\uff0c\u63d0\u4f9b\u9884\u5904\u7406\u53c2\u6570\u3002\u5f85\u6587\u4ef6\u4e0a\u4f20\u5b8c\u6210\u540e\uff0c\u81ea\u52a8\u8fdb\u884c\u5f02\u6b65\u6587\u6863\u8f6c\u6362\uff0c\u5904\u7406\u5b8c\u6210\u540e\uff0c\u56de\u8c03\u901a\u77e5\u7528\u6237\u5904\u7406\u7ed3\u679c\u3002 \u652f\u6301\u7684 API\uff1a FORM API \u3002 \u53c2\u6570\u540d\u662f apps \uff0c\u53c2\u6570\u503c\u662f JSON \u5b57\u7b26\u4e32\u3002\u4e00\u4e2a apps \u6700\u591a\u53ea\u5141\u8bb8\u5305\u542b\u4e00\u4e2a\u4efb\u52a1\u3002 ** apps \u53c2\u6570\u7ed3\u6784 ** apps = [ { \"name\": \"uconvert\", // \u5fc5\u9009\uff0c\u4efb\u52a1\u540d\u79f0\uff0cuconvert \u8868\u793a\u6587\u6863\u8f6c\u6362 \"save_as\": \"/save_as/upyun_file\", // \u5fc5\u9009\uff0c\u56fe\u7247\u4fdd\u5b58\u8def\u5f84\u4e0e\u540d\u5b57\uff0c\u751f\u6210\u56fe\u7247\u81ea\u52a8\u5728\u6587\u4ef6\u540d\u540e\u6dfb\u52a0 -<index>.png \"notify_url\": \"http://uconvert.upyun.com\" // \u53ef\u9009\uff0c\u56de\u8c03\u5730\u5740\uff0c\u4e0d\u586b\u65f6\u4f7f\u7528\u4e0a\u4f20\u53c2\u6570\u4e2d\u7684 notify-url \"density\": 100, // \u53ef\u9009\uff0c\u50cf\u7d20\u5bc6\u5ea6\uff0c\u8d8a\u5927\u56fe\u7247\u8d8a\u6e05\u6670 \"width\" : 1024, // \u53ef\u9009\uff0c\u5bbd\u5ea6\uff0c\u5927\u5c0f\u968f\u5bbd\u5ea6\u7b49\u6bd4\u4f8b\u7f29\u653e } ] save_as \u3001 density \u3001 width \u53c2\u6570\u89e3\u91ca\u8bf4\u660e\uff0c\u89c1 tasks \u53c2\u6570\u8bf4\u660e \u3002 ** \u56de\u8c03\u901a\u77e5 ** \u4efb\u52a1\u5904\u7406\u5b8c\u6210\u540e\uff0c\u5411 notify_url \u5730\u5740\u53d1\u9001\u56de\u8c03\u901a\u77e5\u3002\u8be6\u89c1 \u56de\u8c03\u901a\u77e5 \u3002 \u4e91\u5b58\u50a8\u4e2d\u6587\u6863\u7684\u8f6c\u6362 \u00b6 ** \u8bf7\u6c42\u65b9\u6cd5 ** \u5bf9\u5df2\u7ecf\u5b58\u5728\u4e91\u5b58\u50a8\u4e2d\u7684\u6587\u6863\uff0c\u4ee5 POST \u65b9\u6cd5\u5411 http://p0.api.upyun.com/pretreatment/ \u63d0\u4ea4\u5904\u7406\u4efb\u52a1\uff0c\u54cd\u5e94\u4e2d\u8fd4\u56de\u4efb\u52a1 task_id \u3002\u4efb\u52a1\u4ee5\u5f02\u6b65\u7684\u65b9\u5f0f\u5904\u7406\uff0c\u5904\u7406\u5b8c\u6210\u540e\uff0c\u56de\u8c03\u901a\u77e5\u7528\u6237\u5904\u7406\u7ed3\u679c\u3002 curl -X POST \\ http://p0.api.upyun.com/pretreatment/ \\ -H \"Authorization: UPYUN <Operator>:<Signature>\" \\ -H \"Date: <Wed, 29 Oct 2014 02:26:58 GMT>\" \\ -H \"Content-MD5: <Content-MD5>\" \\ -d \"service=<service>\" \\ -d \"notify_url=<notify_url>\" \\ -d \"app_name=uconvert\" \\ -d \"tasks=<base64 \u7f16\u7801\u540e\u7684\u4efb\u52a1\u5b57\u7b26\u4e32>\" ** \u8ba4\u8bc1\u9274\u6743 ** Authorization \u8be6\u89c1 \u7b7e\u540d\u8ba4\u8bc1 \u3002 ** \u8bf7\u6c42\u53c2\u6570 ** \u53c2\u6570 \u7c7b\u578b \u5fc5\u9009 \u8bf4\u660e service string \u662f \u6587\u6863\u6240\u5728\u7684\u670d\u52a1\u540d notify_url string \u662f \u56de\u8c03\u901a\u77e5\u5730\u5740\uff0c\u8be6\u89c1 \u56de\u8c03\u901a\u77e5 tasks string \u662f \u4efb\u52a1\u4fe1\u606f\uff0c\u8be6\u89c1 tasks \u53c2\u6570\u8bf4\u660e app_name string \u662f \u5904\u7406\u529f\u80fd\uff0c uconvert \u8868\u793a\u6587\u6863\u8f6c\u6362 ** tasks \u53c2\u6570\u8bf4\u660e ** \u53c2\u6570 \u7c7b\u578b \u5fc5\u9009 \u8bf4\u660e source string \u662f \u6587\u6863\u5b58\u653e\u7684\u8def\u5f84\uff0c\u6700\u5927\u652f\u6301 10M \u6587\u4ef6\u5927\u5c0f save_as string \u662f \u56fe\u7247\u4fdd\u5b58\u8def\u5f84\u3002\u751f\u6210\u7684\u56fe\u7247\u4f1a\u81ea\u52a8\u6dfb\u52a0 -<index>.png \u540e\u7f00 density integer \u5426 \u56fe\u7247\u7684\u50cf\u7d20\u5bc6\u5ea6\uff0c\u8303\u56f4 [2-200] \uff0c\u9ed8\u8ba4\u4e3a 100 \uff0c\u8d8a\u5927\u56fe\u7247\u8d8a\u6e05\u6670 width integer \u5426 \u56fe\u7247\u7684\u5bbd\u5ea6\uff0c\u56fe\u7247\u5927\u5c0f\u968f\u5bbd\u5ea6\u7b49\u6bd4\u4f8b\u7f29\u653e\uff0c\u8303\u56f4 [0-2048] \uff0c\u9ed8\u8ba4\u81ea\u9002\u5e94 1. \u6309 JSON \u683c\u5f0f\u7ec4\u88c5\u4efb\u52a1\uff0c\u4e00\u6b21\u8bf7\u6c42 tasks \u6700\u591a\u53ef\u4ee5\u63d0\u4ea4 10 \u4e2a\u4efb\u52a1\u3002 [ { \"source\": \"/source/upyun.ppt\", \"save_as\": \"/save_as/upyun\", \"density\": 100, \"width\" : 1024, }, \u2026 ] 2. \u628a JSON \u5b57\u7b26\u4e32 Base64 \u7f16\u7801\uff0c\u5f97\u5230 tasks \u3002 ** \u54cd\u5e94\u4fe1\u606f ** \u4efb\u52a1\u63d0\u4ea4\u6210\u529f\uff1a\u8fd4\u56de 200 \uff0c\u54cd\u5e94\u4f53\u662f\u4e00\u7ec4\u6309\u4efb\u52a1\u63d0\u4ea4\u5148\u540e\u987a\u5e8f\u6392\u5e8f\u7684 task_id \u3002\u4f8b\u5982\uff1a [ \"35f0148d414a688a275bf915ba7cebb2\", \"98adbaa52b2f63d6d7f327a0ff223348\", \"c3103189fa906a5354d29bd807e8dc51\", \u2026 ] \u4efb\u52a1\u63d0\u4ea4\u5931\u8d25\uff1a\u8fd4\u56de\u76f8\u5e94\u7684\u51fa\u9519\u4fe1\u606f\uff0c\u5177\u4f53\u8bf7\u53c2\u9605 \u72b6\u6001\u7801\u8868 \u3002 ** \u56de\u8c03\u901a\u77e5 ** \u4efb\u52a1\u5904\u7406\u5b8c\u6210\u540e\uff0c\u5411 notify_url \u53d1\u9001 HTTP POST \u8bf7\u6c42\uff0c\u8bf7\u6c42\u4f53\u662f\u56de\u8c03\u4fe1\u606f\u3002 curl -X POST \\ <notify_url> \\ -H \"Authorization: UPYUN <Operator>:<Signature>\" \\ -H \"Date: <Wed, 29 Oct 2014 02:26:58 GMT>\" \\ -H \"Content-MD5: <Content-MD5>\" \\ -d \"service=<service>\" \\ # \u5176\u4ed6\u53c2\u6570... ** \u56de\u8c03\u4fe1\u606f ** \u56de\u8c03\u4fe1\u606f\u4e3a JSON \u5b57\u7b26\u4e32\uff0c\u53c2\u6570\u540d\u53ca\u8bf4\u660e\u5982\u4e0b\uff1a \u53c2\u6570 \u7c7b\u578b \u8bf4\u660e service string \u6587\u6863\u6240\u5728\u7684\u670d\u52a1\u540d source string \u6587\u6863\u8def\u5f84 task_id string \u4efb\u52a1\u5bf9\u5e94\u7684 task_id paths list \u6240\u6709\u751f\u6210\u56fe\u7247\u7684\u8def\u5f84\u5217\u8868 status_code integer \u5904\u7406\u7ed3\u679c\u72b6\u6001\u7801\uff0c 200 \u8868\u793a\u6210\u529f\u5904\u7406\uff0c\u8be6\u89c1 \u72b6\u6001\u7801\u8868 error string \u9519\u8bef\u4fe1\u606f\uff0c\u7a7a\u5b57\u7b26\u4e32\u8868\u793a\u65e0\u9519\u8bef\u4fe1\u606f ** \u56de\u8c03\u7b7e\u540d ** Authorization \u8be6\u89c1 \u7b7e\u540d\u8ba4\u8bc1 \u3002 ** \u4e3e\u4f8b ** { \"error\":\"\", \"paths\":[\"/save_as/upyun-0.png\", \"/save_as/upyun-1.png\"], \"service\":\"upyun\", \"source\":\"/source/upyun.ppt\", \"status_code\":200, \"task_id\":\"216fb4f8f9bc03dc6a19c4cf6aa903a4\" } \u72b6\u6001\u7801\u8868 \u00b6 \u72b6\u6001\u7801 \u8bf4\u660e 200 \u5904\u7406\u6210\u529f 400 \u6587\u6863\u8f6c\u6362\u5931\u8d25 413 \u53c2\u6570\u9519\u8bef\uff0c\u6587\u6863\u7c7b\u578b\u4e0d\u652f\u6301 5xx \u670d\u52a1\u7aef\u9519\u8bef\u3002\u5982\u9047\u6b64\u7c7b\u9519\u8bef\uff0c\u8bf7\u53cd\u9988\u7ed9 \u552e\u540e \u6216\u60a8\u7684\u5546\u52a1\u7ecf\u7406","title":"\u6587\u6863\u8f6c\u6362"},{"location":"cloud/uconvert/#_1","text":"\u53c8\u62cd\u4e91\u5904\u7406\uff08\u6587\u6863\u8f6c\u6362\uff09\u5b9e\u73b0\u628a PDF\uff0cPPT\uff0cWORD\uff0cEXCEL \u6587\u6863\u8f6c\u6362\u4e3a\u4e00\u7ec4 PNG \u56fe\u7247\u3002 \u60a8\u5728\u4f7f\u7528\u5b83\u4e4b\u524d\uff0c\u8bf7\u786e\u4fdd\u60a8\u5df2\u7ecf\u6ce8\u518c\u53c8\u62cd\u4e91\u8d26\u53f7\u5e76\u5b8c\u6210\u5b9e\u540d\u9a8c\u8bc1\uff0c\u5e76\u786e\u4fdd\u60a8\u5df2\u7ecf\u521b\u5efa \u4e91\u5b58\u50a8\u670d\u52a1 \u3002","title":"\u5feb\u901f\u5165\u95e8"},{"location":"cloud/uconvert/#_2","text":"","title":"\u5f00\u53d1\u8005\u6307\u5357"},{"location":"cloud/uconvert/#_3","text":"\u5728\u4e0a\u4f20\u6587\u4ef6\u65f6\uff0c\u63d0\u4f9b\u9884\u5904\u7406\u53c2\u6570\u3002\u5f85\u6587\u4ef6\u4e0a\u4f20\u5b8c\u6210\u540e\uff0c\u81ea\u52a8\u8fdb\u884c\u5f02\u6b65\u6587\u6863\u8f6c\u6362\uff0c\u5904\u7406\u5b8c\u6210\u540e\uff0c\u56de\u8c03\u901a\u77e5\u7528\u6237\u5904\u7406\u7ed3\u679c\u3002 \u652f\u6301\u7684 API\uff1a FORM API \u3002 \u53c2\u6570\u540d\u662f apps \uff0c\u53c2\u6570\u503c\u662f JSON \u5b57\u7b26\u4e32\u3002\u4e00\u4e2a apps \u6700\u591a\u53ea\u5141\u8bb8\u5305\u542b\u4e00\u4e2a\u4efb\u52a1\u3002 ** apps \u53c2\u6570\u7ed3\u6784 ** apps = [ { \"name\": \"uconvert\", // \u5fc5\u9009\uff0c\u4efb\u52a1\u540d\u79f0\uff0cuconvert \u8868\u793a\u6587\u6863\u8f6c\u6362 \"save_as\": \"/save_as/upyun_file\", // \u5fc5\u9009\uff0c\u56fe\u7247\u4fdd\u5b58\u8def\u5f84\u4e0e\u540d\u5b57\uff0c\u751f\u6210\u56fe\u7247\u81ea\u52a8\u5728\u6587\u4ef6\u540d\u540e\u6dfb\u52a0 -<index>.png \"notify_url\": \"http://uconvert.upyun.com\" // \u53ef\u9009\uff0c\u56de\u8c03\u5730\u5740\uff0c\u4e0d\u586b\u65f6\u4f7f\u7528\u4e0a\u4f20\u53c2\u6570\u4e2d\u7684 notify-url \"density\": 100, // \u53ef\u9009\uff0c\u50cf\u7d20\u5bc6\u5ea6\uff0c\u8d8a\u5927\u56fe\u7247\u8d8a\u6e05\u6670 \"width\" : 1024, // \u53ef\u9009\uff0c\u5bbd\u5ea6\uff0c\u5927\u5c0f\u968f\u5bbd\u5ea6\u7b49\u6bd4\u4f8b\u7f29\u653e } ] save_as \u3001 density \u3001 width \u53c2\u6570\u89e3\u91ca\u8bf4\u660e\uff0c\u89c1 tasks \u53c2\u6570\u8bf4\u660e \u3002 ** \u56de\u8c03\u901a\u77e5 ** \u4efb\u52a1\u5904\u7406\u5b8c\u6210\u540e\uff0c\u5411 notify_url \u5730\u5740\u53d1\u9001\u56de\u8c03\u901a\u77e5\u3002\u8be6\u89c1 \u56de\u8c03\u901a\u77e5 \u3002","title":"\u4e0a\u4f20\u9884\u5904\u7406"},{"location":"cloud/uconvert/#_4","text":"** \u8bf7\u6c42\u65b9\u6cd5 ** \u5bf9\u5df2\u7ecf\u5b58\u5728\u4e91\u5b58\u50a8\u4e2d\u7684\u6587\u6863\uff0c\u4ee5 POST \u65b9\u6cd5\u5411 http://p0.api.upyun.com/pretreatment/ \u63d0\u4ea4\u5904\u7406\u4efb\u52a1\uff0c\u54cd\u5e94\u4e2d\u8fd4\u56de\u4efb\u52a1 task_id \u3002\u4efb\u52a1\u4ee5\u5f02\u6b65\u7684\u65b9\u5f0f\u5904\u7406\uff0c\u5904\u7406\u5b8c\u6210\u540e\uff0c\u56de\u8c03\u901a\u77e5\u7528\u6237\u5904\u7406\u7ed3\u679c\u3002 curl -X POST \\ http://p0.api.upyun.com/pretreatment/ \\ -H \"Authorization: UPYUN <Operator>:<Signature>\" \\ -H \"Date: <Wed, 29 Oct 2014 02:26:58 GMT>\" \\ -H \"Content-MD5: <Content-MD5>\" \\ -d \"service=<service>\" \\ -d \"notify_url=<notify_url>\" \\ -d \"app_name=uconvert\" \\ -d \"tasks=<base64 \u7f16\u7801\u540e\u7684\u4efb\u52a1\u5b57\u7b26\u4e32>\" ** \u8ba4\u8bc1\u9274\u6743 ** Authorization \u8be6\u89c1 \u7b7e\u540d\u8ba4\u8bc1 \u3002 ** \u8bf7\u6c42\u53c2\u6570 ** \u53c2\u6570 \u7c7b\u578b \u5fc5\u9009 \u8bf4\u660e service string \u662f \u6587\u6863\u6240\u5728\u7684\u670d\u52a1\u540d notify_url string \u662f \u56de\u8c03\u901a\u77e5\u5730\u5740\uff0c\u8be6\u89c1 \u56de\u8c03\u901a\u77e5 tasks string \u662f \u4efb\u52a1\u4fe1\u606f\uff0c\u8be6\u89c1 tasks \u53c2\u6570\u8bf4\u660e app_name string \u662f \u5904\u7406\u529f\u80fd\uff0c uconvert \u8868\u793a\u6587\u6863\u8f6c\u6362 ** tasks \u53c2\u6570\u8bf4\u660e ** \u53c2\u6570 \u7c7b\u578b \u5fc5\u9009 \u8bf4\u660e source string \u662f \u6587\u6863\u5b58\u653e\u7684\u8def\u5f84\uff0c\u6700\u5927\u652f\u6301 10M \u6587\u4ef6\u5927\u5c0f save_as string \u662f \u56fe\u7247\u4fdd\u5b58\u8def\u5f84\u3002\u751f\u6210\u7684\u56fe\u7247\u4f1a\u81ea\u52a8\u6dfb\u52a0 -<index>.png \u540e\u7f00 density integer \u5426 \u56fe\u7247\u7684\u50cf\u7d20\u5bc6\u5ea6\uff0c\u8303\u56f4 [2-200] \uff0c\u9ed8\u8ba4\u4e3a 100 \uff0c\u8d8a\u5927\u56fe\u7247\u8d8a\u6e05\u6670 width integer \u5426 \u56fe\u7247\u7684\u5bbd\u5ea6\uff0c\u56fe\u7247\u5927\u5c0f\u968f\u5bbd\u5ea6\u7b49\u6bd4\u4f8b\u7f29\u653e\uff0c\u8303\u56f4 [0-2048] \uff0c\u9ed8\u8ba4\u81ea\u9002\u5e94 1. \u6309 JSON \u683c\u5f0f\u7ec4\u88c5\u4efb\u52a1\uff0c\u4e00\u6b21\u8bf7\u6c42 tasks \u6700\u591a\u53ef\u4ee5\u63d0\u4ea4 10 \u4e2a\u4efb\u52a1\u3002 [ { \"source\": \"/source/upyun.ppt\", \"save_as\": \"/save_as/upyun\", \"density\": 100, \"width\" : 1024, }, \u2026 ] 2. \u628a JSON \u5b57\u7b26\u4e32 Base64 \u7f16\u7801\uff0c\u5f97\u5230 tasks \u3002 ** \u54cd\u5e94\u4fe1\u606f ** \u4efb\u52a1\u63d0\u4ea4\u6210\u529f\uff1a\u8fd4\u56de 200 \uff0c\u54cd\u5e94\u4f53\u662f\u4e00\u7ec4\u6309\u4efb\u52a1\u63d0\u4ea4\u5148\u540e\u987a\u5e8f\u6392\u5e8f\u7684 task_id \u3002\u4f8b\u5982\uff1a [ \"35f0148d414a688a275bf915ba7cebb2\", \"98adbaa52b2f63d6d7f327a0ff223348\", \"c3103189fa906a5354d29bd807e8dc51\", \u2026 ] \u4efb\u52a1\u63d0\u4ea4\u5931\u8d25\uff1a\u8fd4\u56de\u76f8\u5e94\u7684\u51fa\u9519\u4fe1\u606f\uff0c\u5177\u4f53\u8bf7\u53c2\u9605 \u72b6\u6001\u7801\u8868 \u3002 ** \u56de\u8c03\u901a\u77e5 ** \u4efb\u52a1\u5904\u7406\u5b8c\u6210\u540e\uff0c\u5411 notify_url \u53d1\u9001 HTTP POST \u8bf7\u6c42\uff0c\u8bf7\u6c42\u4f53\u662f\u56de\u8c03\u4fe1\u606f\u3002 curl -X POST \\ <notify_url> \\ -H \"Authorization: UPYUN <Operator>:<Signature>\" \\ -H \"Date: <Wed, 29 Oct 2014 02:26:58 GMT>\" \\ -H \"Content-MD5: <Content-MD5>\" \\ -d \"service=<service>\" \\ # \u5176\u4ed6\u53c2\u6570... ** \u56de\u8c03\u4fe1\u606f ** \u56de\u8c03\u4fe1\u606f\u4e3a JSON \u5b57\u7b26\u4e32\uff0c\u53c2\u6570\u540d\u53ca\u8bf4\u660e\u5982\u4e0b\uff1a \u53c2\u6570 \u7c7b\u578b \u8bf4\u660e service string \u6587\u6863\u6240\u5728\u7684\u670d\u52a1\u540d source string \u6587\u6863\u8def\u5f84 task_id string \u4efb\u52a1\u5bf9\u5e94\u7684 task_id paths list \u6240\u6709\u751f\u6210\u56fe\u7247\u7684\u8def\u5f84\u5217\u8868 status_code integer \u5904\u7406\u7ed3\u679c\u72b6\u6001\u7801\uff0c 200 \u8868\u793a\u6210\u529f\u5904\u7406\uff0c\u8be6\u89c1 \u72b6\u6001\u7801\u8868 error string \u9519\u8bef\u4fe1\u606f\uff0c\u7a7a\u5b57\u7b26\u4e32\u8868\u793a\u65e0\u9519\u8bef\u4fe1\u606f ** \u56de\u8c03\u7b7e\u540d ** Authorization \u8be6\u89c1 \u7b7e\u540d\u8ba4\u8bc1 \u3002 ** \u4e3e\u4f8b ** { \"error\":\"\", \"paths\":[\"/save_as/upyun-0.png\", \"/save_as/upyun-1.png\"], \"service\":\"upyun\", \"source\":\"/source/upyun.ppt\", \"status_code\":200, \"task_id\":\"216fb4f8f9bc03dc6a19c4cf6aa903a4\" }","title":"\u4e91\u5b58\u50a8\u4e2d\u6587\u6863\u7684\u8f6c\u6362"},{"location":"cloud/uconvert/#_5","text":"\u72b6\u6001\u7801 \u8bf4\u660e 200 \u5904\u7406\u6210\u529f 400 \u6587\u6863\u8f6c\u6362\u5931\u8d25 413 \u53c2\u6570\u9519\u8bef\uff0c\u6587\u6863\u7c7b\u578b\u4e0d\u652f\u6301 5xx \u670d\u52a1\u7aef\u9519\u8bef\u3002\u5982\u9047\u6b64\u7c7b\u9519\u8bef\uff0c\u8bf7\u53cd\u9988\u7ed9 \u552e\u540e \u6216\u60a8\u7684\u5546\u52a1\u7ecf\u7406","title":"\u72b6\u6001\u7801\u8868"},{"location":"cloud/unzip/","text":"\u5feb\u901f\u5165\u95e8 \u00b6 \u53c8\u62cd\u4e91\u5904\u7406\uff08\u538b\u7f29\u89e3\u538b\u7f29\uff09\u57fa\u4e8e\u4e91\u5b58\u50a8\u670d\u52a1\uff0c\u60a8\u5728\u4f7f\u7528\u5b83\u4e4b\u524d\uff0c\u8bf7\u786e\u4fdd\u60a8\u5df2\u7ecf\u6ce8\u518c\u53c8\u62cd\u4e91\u8d26\u53f7\u5e76\u5b8c\u6210\u5b9e\u540d\u9a8c\u8bc1\uff0c\u8bf7\u786e\u4fdd\u60a8\u5df2\u7ecf\u521b\u5efa \u4e91\u5b58\u50a8\u670d\u52a1 \u3002 \u4ef7\u683c\u65b9\u9762\uff0c\u514d\u8d39\u3002 \u5f00\u53d1\u8005\u6307\u5357 \u00b6 \u63d0\u4ea4\u5904\u7406\u4efb\u52a1 \u00b6 ** \u8bf7\u6c42\u65b9\u6cd5 ** \u5bf9\u5df2\u7ecf\u5b58\u5728\u4e91\u5b58\u50a8\u4e2d\u7684\u538b\u7f29/\u89e3\u538b\u7f29\u6587\u4ef6\uff0c\u4ee5 POST \u65b9\u6cd5\u5411 http://p0.api.upyun.com/pretreatment/ \u63d0\u4ea4\u5904\u7406\u4efb\u52a1\uff0c\u54cd\u5e94\u4e2d\u8fd4\u56de\u4efb\u52a1 task_id \u3002\u4efb\u52a1\u4ee5\u5f02\u6b65\u7684\u65b9\u5f0f\u5904\u7406\uff0c\u5904\u7406\u5b8c\u6210\u540e\uff0c\u56de\u8c03\u901a\u77e5\u7528\u6237\u5904\u7406\u7ed3\u679c\u3002 curl -X POST \\ http://p0.api.upyun.com/pretreatment/ \\ -H \"Authorization: UPYUN <Operator>:<Signature>\" \\ -H \"Date: <Wed, 29 Oct 2014 02:26:58 GMT>\" \\ -H \"Content-MD5: <Content-MD5>\" \\ -d \"service=<service>\" \\ -d \"notify_url=<notify_url>\" \\ -d \"app_name=<app_name>\" \\ -d \"tasks=<base64 \u7f16\u7801\u540e\u7684\u4efb\u52a1\u5b57\u7b26\u4e32>\" ** \u8ba4\u8bc1\u9274\u6743 ** Authorization \u8be6\u89c1 \u7b7e\u540d\u8ba4\u8bc1 \u3002 ** \u8bf7\u6c42\u53c2\u6570 ** \u53c2\u6570 \u7c7b\u578b \u5fc5\u9009 \u8bf4\u660e service string \u662f \u538b\u7f29/\u89e3\u538b\u7f29\u6587\u4ef6\u6240\u5728\u7684\u670d\u52a1\u540d notify_url string \u662f \u56de\u8c03\u901a\u77e5\u5730\u5740\uff0c\u8be6\u89c1 \u56de\u8c03\u901a\u77e5 tasks string \u662f \u4efb\u52a1\u4fe1\u606f\uff0c\u8be6\u89c1 tasks \u53c2\u6570\u8bf4\u660e app_name string \u662f \u5904\u7406\u529f\u80fd\uff0c compress \u8868\u793a\u538b\u7f29\uff0c depress \u8868\u793a\u89e3\u538b\u7f29 ** tasks \u53c2\u6570\u8bf4\u660e ** 1. \u6309 JSON \u683c\u5f0f\u7ec4\u88c5\u4efb\u52a1\uff0c\u4e00\u6b21\u8bf7\u6c42 tasks \u6700\u591a\u53ef\u4ee5\u63d0\u4ea4 10 \u4e2a\u4efb\u52a1\u3002 \u4efb\u52a1\u53c2\u6570\u89c1 \u529f\u80fd \u3002 [ { \"sources\": [\"/a/1.pdf\",\"/a/b/\"], // \u9700\u8981\u538b\u7f29\u7684\u6587\u4ef6\u8def\u5f84 \"save_as\": \"/result/abc.zip\" // \u4fdd\u5b58\u8def\u5f84 }, { \"sources\": [\"/e/f\",\"/e/g.jpg\"], // \u9700\u8981\u538b\u7f29\u7684\u6587\u4ef6\u6216\u76ee\u5f55\u8def\u5f84 \"save_as\": \"/result/e.zip\" // \u4fdd\u5b58\u8def\u5f84 }, \u2026 ] 2. \u628a JSON \u5b57\u7b26\u4e32 Base64 \u7f16\u7801\uff0c\u5f97\u5230 tasks \u3002 ** \u54cd\u5e94\u4fe1\u606f ** \u4efb\u52a1\u63d0\u4ea4\u6210\u529f\uff1a\u8fd4\u56de 200 \uff0c\u54cd\u5e94\u4f53\u662f\u4e00\u7ec4\u6309\u4efb\u52a1\u63d0\u4ea4\u5148\u540e\u987a\u5e8f\u6392\u5e8f\u7684 task_id \u3002\u4f8b\u5982\uff1a [ \"35f0148d414a688a275bf915ba7cebb2\", \"98adbaa52b2f63d6d7f327a0ff223348\", \"c3103189fa906a5354d29bd807e8dc51\", \u2026 ] \u4efb\u52a1\u63d0\u4ea4\u5931\u8d25\uff1a\u8fd4\u56de\u76f8\u5e94\u7684\u51fa\u9519\u4fe1\u606f\uff0c\u5177\u4f53\u8bf7\u53c2\u9605\u300c \u72b6\u6001\u7801\u8868 \u300d\u3002 \u56de\u8c03\u901a\u77e5 \u00b6 \u4efb\u52a1\u5904\u7406\u5b8c\u6210\u540e\uff0c\u5411 notify_url \u53d1\u9001 HTTP POST \u8bf7\u6c42\uff0c\u8bf7\u6c42\u4f53\u662f\u56de\u8c03\u4fe1\u606f\u3002 curl -X POST \\ <notify_url> \\ -H \"Authorization: UPYUN <Operator>:<Signature>\" \\ -H \"Date: <Wed, 29 Oct 2014 02:26:58 GMT>\" \\ -H \"Content-MD5: <Content-MD5>\" \\ -d \"service=<service>\" \\ # \u5176\u4ed6\u53c2\u6570... ** \u56de\u8c03\u4fe1\u606f ** \u56de\u8c03\u4fe1\u606f\u662f JSON \u5b57\u7b26\u4e32\uff0c\u53c2\u6570\u540d\u53ca\u8bf4\u660e\u5982\u4e0b\uff1a \u53c2\u6570 \u7c7b\u578b \u8bf4\u660e task_id string \u4efb\u52a1\u5bf9\u7684\u4efb\u52a1 ID status_code integer \u5904\u7406\u7ed3\u679c\u72b6\u6001\u7801\uff0c 200 \u8868\u793a\u6210\u529f\u5904\u7406 path string \u8f93\u51fa\u6587\u4ef6\u4fdd\u5b58\u8def\u5f84 error string \u9519\u8bef\u4fe1\u606f\uff0c\u7a7a\u5b57\u7b26\u4e32\u8868\u793a\u65e0\u9519\u8bef\u4fe1\u606f ** \u56de\u8c03\u7b7e\u540d ** Authorization \u8be6\u89c1 \u7b7e\u540d\u8ba4\u8bc1 \u3002 \u72b6\u6001\u7801\u8868 \u00b6 \u72b6\u6001\u7801 \u8bf4\u660e 200 \u5904\u7406\u6210\u529f 400 \u6587\u4ef6\u4e0d\u5408\u6cd5 404 \u6587\u4ef6\u4e0d\u5b58\u5728 5xx \u670d\u52a1\u7aef\u9519\u8bef\u3002\u5982\u9047\u6b64\u7c7b\u9519\u8bef\uff0c\u8bf7\u53cd\u9988\u7ed9 \u552e\u540e \u6216\u60a8\u7684\u5546\u52a1\u7ecf\u7406 \u529f\u80fd \u00b6 \u538b\u7f29\uff08compress\uff09 \u00b6 \u5c06\u591a\u4e2a\u6587\u4ef6\u6216\u6587\u4ef6\u5939\u538b\u7f29\u6210\u4e00\u4e2a\u538b\u7f29\u6587\u4ef6\u3002 \u53c2\u6570 \u7c7b\u578b \u5fc5\u9009 \u8bf4\u660e sources array \u662f \u9700\u8981\u88ab\u538b\u7f29\u7684\u6587\u4ef6\u6216\u76ee\u5f55\u7684\u8def\u5f84\uff0c\u8def\u5f84\u4e0d\u9700\u8981 URI encoding\u3002\u89c1\u300c\u6ce8\u300d save_as string \u662f \u8f93\u51fa\u6587\u4ef6\u4fdd\u5b58\u8def\u5f84 home_dir string \u5426 \u6587\u4ef6\u6216\u76ee\u5f55\u88ab\u538b\u7f29\u65f6\u53ef\u4e0d\u5305\u542b\u7684\u7236\u76ee\u5f55\u3002\u9ed8\u8ba4\u5305\u542b\u4ece\u6839\u5f00\u59cb\u7684\u5168\u90e8\u76ee\u5f55 parent_dir string \u5426 \u88ab\u538b\u7f29\u6587\u4ef6\u6216\u76ee\u5f55\u7684\u65b0\u589e\u7236\u76ee\u5f55\u540d\u3002\u9ed8\u8ba4\u4e3a\u7a7a sources_list string \u5426 \u9700\u8981\u88ab\u538b\u7f29\u7684\u6587\u4ef6\u6216\u76ee\u5f55\u4fe1\u606f\u7684\u6587\u4ef6\u8def\u5f84\u3002\u89c1\u300c\u6ce8\u300d ** \u6ce8 ** sources \u548c sources_list \u53c2\u6570\u6307\u5b9a\u7684\u538b\u7f29\u6587\u4ef6\u6700\u5927\u4e0d\u80fd\u8d85\u8fc7 10000 \u4e2a\uff0c\u603b\u6587\u4ef6\u5927\u5c0f\u4e0d\u80fd\u8d85\u8fc7 4G\u3002 \u5f53\u9700\u8981\u88ab\u538b\u7f29\u7684\u6587\u4ef6\u6216\u76ee\u5f55\u5f88\u591a\u65f6\uff0c\u53ef\u4ee5\u628a\u8fd9\u4e9b\u4fe1\u606f\u653e\u5230\u4e00\u4e2a\u6587\u4ef6\u91cc\uff0c\u4e00\u6761\u4e00\u884c\uff08\u4e0d\u9700\u8981 URI encoding\uff09\uff0c\u518d\u628a\u6587\u4ef6\u4e0a\u4f20\u5230\u9700\u8981\u5904\u7406\u7684\u670d\u52a1\u540d\u4e0b\uff0c\u901a\u8fc7 sources_list \u53c2\u6570\u63d0\u4ea4\u6587\u4ef6 URI \uff0c\u4ee3\u66ff sources \u53c2\u6570\u8fdb\u884c\u5927\u91cf\u4fe1\u606f\u63d0\u4ea4\u3002 \u5f53 sources_list \u53c2\u6570\u5b58\u5728\u65f6\uff0c sources \u53c2\u6570\u53ef\u4ee5\u4e0d\u5b58\u5728\u3002 \u538b\u7f29\u7b97\u6cd5: \u76ee\u524d\u4ec5\u652f\u6301 zip \uff0c\u56e0\u6b64\uff0c save_as \u53c2\u6570\u5fc5\u987b\u4ee5 .zip \u540e\u7f00\u7ed3\u5c3e\u3002 home_dir \u4f1a\u53bb\u9664\u6307\u5b9a\u7236\u76ee\u5f55\u53ca\u7236\u76ee\u5f55\u4e0b\u6587\u4ef6\uff0c\u538b\u7f29\u76ee\u5f55\u5c42\u7ea7\u8f83\u6df1\u7684\u6587\u4ef6\u65f6\uff0c\u53ef\u4ee5\u901a\u8fc7\u5b83\u53bb\u9664\u7236\u76ee\u5f55\u53ca\u7236\u76ee\u5f55\u4e0b\u6587\u4ef6\u7684\u5e72\u6270\u3002\u4f8b\u5982\uff1a [ { \"sources\": [\"/a/b/c/source/1.jpg\",\"/a/b/c/source/2.jpg\"], \"save_as\": \"/result/t.zip\", \"home_dir\": \"a/b/c\" //\u538b\u7f29\u65f6\uff0c\u4e0d\u5305\u542b\u7684\u76ee\u5f55 } ] \u538b\u7f29\u6587\u4ef6\u7684\u76ee\u5f55\u7ed3\u6784\u5982\u4e0b:\uff08 a/b/c \u7236\u76ee\u5f55\u5df2\u7ecf\u4e0d\u5b58\u5728\u4e86\uff0c\u653e\u5728 a/b \u7236\u76ee\u5f55\u4e0b\u7684\u6587\u4ef6\u4e5f\u5df2\u7ecf\u4e0d\u5b58\u5728\u4e86\uff09 source |-------1.jpg |-------2.jpg \u89e3\u538b\u7f29\uff08depress\uff09 \u00b6 \u5c06\u538b\u7f29\u6587\u4ef6\u89e3\u538b\u5230\u6307\u5b9a\u76ee\u5f55\u3002 \u53c2\u6570 \u7c7b\u578b \u5fc5\u9009 \u8bf4\u660e sources string \u662f \u9700\u8981\u89e3\u538b\u7f29\u6587\u4ef6\u7684\u8def\u5f84 save_as string \u662f \u6587\u4ef6\u89e3\u538b\u7f29\u540e\u4fdd\u5b58\u8def\u5f84\uff08\u9700\u8981\u4e3a\u76ee\u5f55\uff09 \u6ce8\uff1a sources \u53c2\u6570\u6307\u5b9a\u7684\u538b\u7f29\u6587\u4ef6\u6700\u5927\u5927\u5c0f\u4e0d\u80fd\u8d85\u8fc7 5G\u3002 \u89e3\u538b\u7b97\u6cd5: \u76ee\u524d\u4ec5\u652f\u6301 zip \uff0c\u56e0\u6b64\uff0c sources \u53c2\u6570\u6307\u5b9a\u7684\u538b\u7f29\u6587\u4ef6\u5fc5\u987b\u662f zip \u6587\u4ef6\u3002 \u89e3\u538b\u7f29\u540e\uff0c\u76ee\u5f55\u4e2d\u4f1a\u591a\u4e00\u4e2a\u4ee5 task_id \u547d\u540d\u7684\u6587\u4ef6\uff0c\u5b83\u8bb0\u5f55\u4e86\u6240\u6709\u89e3\u538b\u7f29\u7684\u6587\u4ef6\u4fe1\u606f\u3002 \u5982\u6709\u7591\u95ee\u8bf7 \u8054\u7cfb\u6211\u4eec","title":"\u538b\u7f29\u89e3\u538b\u7f29"},{"location":"cloud/unzip/#_1","text":"\u53c8\u62cd\u4e91\u5904\u7406\uff08\u538b\u7f29\u89e3\u538b\u7f29\uff09\u57fa\u4e8e\u4e91\u5b58\u50a8\u670d\u52a1\uff0c\u60a8\u5728\u4f7f\u7528\u5b83\u4e4b\u524d\uff0c\u8bf7\u786e\u4fdd\u60a8\u5df2\u7ecf\u6ce8\u518c\u53c8\u62cd\u4e91\u8d26\u53f7\u5e76\u5b8c\u6210\u5b9e\u540d\u9a8c\u8bc1\uff0c\u8bf7\u786e\u4fdd\u60a8\u5df2\u7ecf\u521b\u5efa \u4e91\u5b58\u50a8\u670d\u52a1 \u3002 \u4ef7\u683c\u65b9\u9762\uff0c\u514d\u8d39\u3002","title":"\u5feb\u901f\u5165\u95e8"},{"location":"cloud/unzip/#_2","text":"","title":"\u5f00\u53d1\u8005\u6307\u5357"},{"location":"cloud/unzip/#_3","text":"** \u8bf7\u6c42\u65b9\u6cd5 ** \u5bf9\u5df2\u7ecf\u5b58\u5728\u4e91\u5b58\u50a8\u4e2d\u7684\u538b\u7f29/\u89e3\u538b\u7f29\u6587\u4ef6\uff0c\u4ee5 POST \u65b9\u6cd5\u5411 http://p0.api.upyun.com/pretreatment/ \u63d0\u4ea4\u5904\u7406\u4efb\u52a1\uff0c\u54cd\u5e94\u4e2d\u8fd4\u56de\u4efb\u52a1 task_id \u3002\u4efb\u52a1\u4ee5\u5f02\u6b65\u7684\u65b9\u5f0f\u5904\u7406\uff0c\u5904\u7406\u5b8c\u6210\u540e\uff0c\u56de\u8c03\u901a\u77e5\u7528\u6237\u5904\u7406\u7ed3\u679c\u3002 curl -X POST \\ http://p0.api.upyun.com/pretreatment/ \\ -H \"Authorization: UPYUN <Operator>:<Signature>\" \\ -H \"Date: <Wed, 29 Oct 2014 02:26:58 GMT>\" \\ -H \"Content-MD5: <Content-MD5>\" \\ -d \"service=<service>\" \\ -d \"notify_url=<notify_url>\" \\ -d \"app_name=<app_name>\" \\ -d \"tasks=<base64 \u7f16\u7801\u540e\u7684\u4efb\u52a1\u5b57\u7b26\u4e32>\" ** \u8ba4\u8bc1\u9274\u6743 ** Authorization \u8be6\u89c1 \u7b7e\u540d\u8ba4\u8bc1 \u3002 ** \u8bf7\u6c42\u53c2\u6570 ** \u53c2\u6570 \u7c7b\u578b \u5fc5\u9009 \u8bf4\u660e service string \u662f \u538b\u7f29/\u89e3\u538b\u7f29\u6587\u4ef6\u6240\u5728\u7684\u670d\u52a1\u540d notify_url string \u662f \u56de\u8c03\u901a\u77e5\u5730\u5740\uff0c\u8be6\u89c1 \u56de\u8c03\u901a\u77e5 tasks string \u662f \u4efb\u52a1\u4fe1\u606f\uff0c\u8be6\u89c1 tasks \u53c2\u6570\u8bf4\u660e app_name string \u662f \u5904\u7406\u529f\u80fd\uff0c compress \u8868\u793a\u538b\u7f29\uff0c depress \u8868\u793a\u89e3\u538b\u7f29 ** tasks \u53c2\u6570\u8bf4\u660e ** 1. \u6309 JSON \u683c\u5f0f\u7ec4\u88c5\u4efb\u52a1\uff0c\u4e00\u6b21\u8bf7\u6c42 tasks \u6700\u591a\u53ef\u4ee5\u63d0\u4ea4 10 \u4e2a\u4efb\u52a1\u3002 \u4efb\u52a1\u53c2\u6570\u89c1 \u529f\u80fd \u3002 [ { \"sources\": [\"/a/1.pdf\",\"/a/b/\"], // \u9700\u8981\u538b\u7f29\u7684\u6587\u4ef6\u8def\u5f84 \"save_as\": \"/result/abc.zip\" // \u4fdd\u5b58\u8def\u5f84 }, { \"sources\": [\"/e/f\",\"/e/g.jpg\"], // \u9700\u8981\u538b\u7f29\u7684\u6587\u4ef6\u6216\u76ee\u5f55\u8def\u5f84 \"save_as\": \"/result/e.zip\" // \u4fdd\u5b58\u8def\u5f84 }, \u2026 ] 2. \u628a JSON \u5b57\u7b26\u4e32 Base64 \u7f16\u7801\uff0c\u5f97\u5230 tasks \u3002 ** \u54cd\u5e94\u4fe1\u606f ** \u4efb\u52a1\u63d0\u4ea4\u6210\u529f\uff1a\u8fd4\u56de 200 \uff0c\u54cd\u5e94\u4f53\u662f\u4e00\u7ec4\u6309\u4efb\u52a1\u63d0\u4ea4\u5148\u540e\u987a\u5e8f\u6392\u5e8f\u7684 task_id \u3002\u4f8b\u5982\uff1a [ \"35f0148d414a688a275bf915ba7cebb2\", \"98adbaa52b2f63d6d7f327a0ff223348\", \"c3103189fa906a5354d29bd807e8dc51\", \u2026 ] \u4efb\u52a1\u63d0\u4ea4\u5931\u8d25\uff1a\u8fd4\u56de\u76f8\u5e94\u7684\u51fa\u9519\u4fe1\u606f\uff0c\u5177\u4f53\u8bf7\u53c2\u9605\u300c \u72b6\u6001\u7801\u8868 \u300d\u3002","title":"\u63d0\u4ea4\u5904\u7406\u4efb\u52a1"},{"location":"cloud/unzip/#_4","text":"\u4efb\u52a1\u5904\u7406\u5b8c\u6210\u540e\uff0c\u5411 notify_url \u53d1\u9001 HTTP POST \u8bf7\u6c42\uff0c\u8bf7\u6c42\u4f53\u662f\u56de\u8c03\u4fe1\u606f\u3002 curl -X POST \\ <notify_url> \\ -H \"Authorization: UPYUN <Operator>:<Signature>\" \\ -H \"Date: <Wed, 29 Oct 2014 02:26:58 GMT>\" \\ -H \"Content-MD5: <Content-MD5>\" \\ -d \"service=<service>\" \\ # \u5176\u4ed6\u53c2\u6570... ** \u56de\u8c03\u4fe1\u606f ** \u56de\u8c03\u4fe1\u606f\u662f JSON \u5b57\u7b26\u4e32\uff0c\u53c2\u6570\u540d\u53ca\u8bf4\u660e\u5982\u4e0b\uff1a \u53c2\u6570 \u7c7b\u578b \u8bf4\u660e task_id string \u4efb\u52a1\u5bf9\u7684\u4efb\u52a1 ID status_code integer \u5904\u7406\u7ed3\u679c\u72b6\u6001\u7801\uff0c 200 \u8868\u793a\u6210\u529f\u5904\u7406 path string \u8f93\u51fa\u6587\u4ef6\u4fdd\u5b58\u8def\u5f84 error string \u9519\u8bef\u4fe1\u606f\uff0c\u7a7a\u5b57\u7b26\u4e32\u8868\u793a\u65e0\u9519\u8bef\u4fe1\u606f ** \u56de\u8c03\u7b7e\u540d ** Authorization \u8be6\u89c1 \u7b7e\u540d\u8ba4\u8bc1 \u3002","title":"\u56de\u8c03\u901a\u77e5"},{"location":"cloud/unzip/#_5","text":"\u72b6\u6001\u7801 \u8bf4\u660e 200 \u5904\u7406\u6210\u529f 400 \u6587\u4ef6\u4e0d\u5408\u6cd5 404 \u6587\u4ef6\u4e0d\u5b58\u5728 5xx \u670d\u52a1\u7aef\u9519\u8bef\u3002\u5982\u9047\u6b64\u7c7b\u9519\u8bef\uff0c\u8bf7\u53cd\u9988\u7ed9 \u552e\u540e \u6216\u60a8\u7684\u5546\u52a1\u7ecf\u7406","title":"\u72b6\u6001\u7801\u8868"},{"location":"cloud/unzip/#_6","text":"","title":"\u529f\u80fd"},{"location":"cloud/unzip/#compress","text":"\u5c06\u591a\u4e2a\u6587\u4ef6\u6216\u6587\u4ef6\u5939\u538b\u7f29\u6210\u4e00\u4e2a\u538b\u7f29\u6587\u4ef6\u3002 \u53c2\u6570 \u7c7b\u578b \u5fc5\u9009 \u8bf4\u660e sources array \u662f \u9700\u8981\u88ab\u538b\u7f29\u7684\u6587\u4ef6\u6216\u76ee\u5f55\u7684\u8def\u5f84\uff0c\u8def\u5f84\u4e0d\u9700\u8981 URI encoding\u3002\u89c1\u300c\u6ce8\u300d save_as string \u662f \u8f93\u51fa\u6587\u4ef6\u4fdd\u5b58\u8def\u5f84 home_dir string \u5426 \u6587\u4ef6\u6216\u76ee\u5f55\u88ab\u538b\u7f29\u65f6\u53ef\u4e0d\u5305\u542b\u7684\u7236\u76ee\u5f55\u3002\u9ed8\u8ba4\u5305\u542b\u4ece\u6839\u5f00\u59cb\u7684\u5168\u90e8\u76ee\u5f55 parent_dir string \u5426 \u88ab\u538b\u7f29\u6587\u4ef6\u6216\u76ee\u5f55\u7684\u65b0\u589e\u7236\u76ee\u5f55\u540d\u3002\u9ed8\u8ba4\u4e3a\u7a7a sources_list string \u5426 \u9700\u8981\u88ab\u538b\u7f29\u7684\u6587\u4ef6\u6216\u76ee\u5f55\u4fe1\u606f\u7684\u6587\u4ef6\u8def\u5f84\u3002\u89c1\u300c\u6ce8\u300d ** \u6ce8 ** sources \u548c sources_list \u53c2\u6570\u6307\u5b9a\u7684\u538b\u7f29\u6587\u4ef6\u6700\u5927\u4e0d\u80fd\u8d85\u8fc7 10000 \u4e2a\uff0c\u603b\u6587\u4ef6\u5927\u5c0f\u4e0d\u80fd\u8d85\u8fc7 4G\u3002 \u5f53\u9700\u8981\u88ab\u538b\u7f29\u7684\u6587\u4ef6\u6216\u76ee\u5f55\u5f88\u591a\u65f6\uff0c\u53ef\u4ee5\u628a\u8fd9\u4e9b\u4fe1\u606f\u653e\u5230\u4e00\u4e2a\u6587\u4ef6\u91cc\uff0c\u4e00\u6761\u4e00\u884c\uff08\u4e0d\u9700\u8981 URI encoding\uff09\uff0c\u518d\u628a\u6587\u4ef6\u4e0a\u4f20\u5230\u9700\u8981\u5904\u7406\u7684\u670d\u52a1\u540d\u4e0b\uff0c\u901a\u8fc7 sources_list \u53c2\u6570\u63d0\u4ea4\u6587\u4ef6 URI \uff0c\u4ee3\u66ff sources \u53c2\u6570\u8fdb\u884c\u5927\u91cf\u4fe1\u606f\u63d0\u4ea4\u3002 \u5f53 sources_list \u53c2\u6570\u5b58\u5728\u65f6\uff0c sources \u53c2\u6570\u53ef\u4ee5\u4e0d\u5b58\u5728\u3002 \u538b\u7f29\u7b97\u6cd5: \u76ee\u524d\u4ec5\u652f\u6301 zip \uff0c\u56e0\u6b64\uff0c save_as \u53c2\u6570\u5fc5\u987b\u4ee5 .zip \u540e\u7f00\u7ed3\u5c3e\u3002 home_dir \u4f1a\u53bb\u9664\u6307\u5b9a\u7236\u76ee\u5f55\u53ca\u7236\u76ee\u5f55\u4e0b\u6587\u4ef6\uff0c\u538b\u7f29\u76ee\u5f55\u5c42\u7ea7\u8f83\u6df1\u7684\u6587\u4ef6\u65f6\uff0c\u53ef\u4ee5\u901a\u8fc7\u5b83\u53bb\u9664\u7236\u76ee\u5f55\u53ca\u7236\u76ee\u5f55\u4e0b\u6587\u4ef6\u7684\u5e72\u6270\u3002\u4f8b\u5982\uff1a [ { \"sources\": [\"/a/b/c/source/1.jpg\",\"/a/b/c/source/2.jpg\"], \"save_as\": \"/result/t.zip\", \"home_dir\": \"a/b/c\" //\u538b\u7f29\u65f6\uff0c\u4e0d\u5305\u542b\u7684\u76ee\u5f55 } ] \u538b\u7f29\u6587\u4ef6\u7684\u76ee\u5f55\u7ed3\u6784\u5982\u4e0b:\uff08 a/b/c \u7236\u76ee\u5f55\u5df2\u7ecf\u4e0d\u5b58\u5728\u4e86\uff0c\u653e\u5728 a/b \u7236\u76ee\u5f55\u4e0b\u7684\u6587\u4ef6\u4e5f\u5df2\u7ecf\u4e0d\u5b58\u5728\u4e86\uff09 source |-------1.jpg |-------2.jpg","title":"\u538b\u7f29\uff08compress\uff09"},{"location":"cloud/unzip/#depress","text":"\u5c06\u538b\u7f29\u6587\u4ef6\u89e3\u538b\u5230\u6307\u5b9a\u76ee\u5f55\u3002 \u53c2\u6570 \u7c7b\u578b \u5fc5\u9009 \u8bf4\u660e sources string \u662f \u9700\u8981\u89e3\u538b\u7f29\u6587\u4ef6\u7684\u8def\u5f84 save_as string \u662f \u6587\u4ef6\u89e3\u538b\u7f29\u540e\u4fdd\u5b58\u8def\u5f84\uff08\u9700\u8981\u4e3a\u76ee\u5f55\uff09 \u6ce8\uff1a sources \u53c2\u6570\u6307\u5b9a\u7684\u538b\u7f29\u6587\u4ef6\u6700\u5927\u5927\u5c0f\u4e0d\u80fd\u8d85\u8fc7 5G\u3002 \u89e3\u538b\u7b97\u6cd5: \u76ee\u524d\u4ec5\u652f\u6301 zip \uff0c\u56e0\u6b64\uff0c sources \u53c2\u6570\u6307\u5b9a\u7684\u538b\u7f29\u6587\u4ef6\u5fc5\u987b\u662f zip \u6587\u4ef6\u3002 \u89e3\u538b\u7f29\u540e\uff0c\u76ee\u5f55\u4e2d\u4f1a\u591a\u4e00\u4e2a\u4ee5 task_id \u547d\u540d\u7684\u6587\u4ef6\uff0c\u5b83\u8bb0\u5f55\u4e86\u6240\u6709\u89e3\u538b\u7f29\u7684\u6587\u4ef6\u4fe1\u606f\u3002 \u5982\u6709\u7591\u95ee\u8bf7 \u8054\u7cfb\u6211\u4eec","title":"\u89e3\u538b\u7f29\uff08depress\uff09"},{"location":"download/","text":"\u5b58\u50a8&\u5904\u7406 SDK iOS SDK GitHub \u4e0b\u8f7d Android SDK GitHub \u4e0b\u8f7d PHP SDK GitHub \u4e0b\u8f7d Python SDK GitHub \u4e0b\u8f7d Node.js SDK GitHub \u4e0b\u8f7d Ruby SDK GitHub \u4e0b\u8f7d Go SDK GitHub \u4e0b\u8f7d Java SDK GitHub \u4e0b\u8f7d Erlang SDK GitHub \u4e0b\u8f7d C SDK GitHub \u4e0b\u8f7d \u89c6\u9891\u9884\u5904\u7406 Node SDK GitHub \u4e0b\u8f7d Java \u7f13\u5b58\u5237\u65b0 SDK GitHub \u4e0b\u8f7d \u591a\u8bed\u8a00\u751f\u6210 token \u4f8b\u5b50 GitHub \u4e0b\u8f7d \u5c0f\u7a0b\u5e8f SDK GitHub \u4e0b\u8f7d \u76f4\u64ad SDK Android \u6d41\u5a92\u4f53\u64ad\u653e\u5668 GitHub Android \u63a8\u6d41 SDK GitHub iOS \u63a8\u62c9\u6d41 SDK GitHub \u63a8\u6d41 token GitHub \u77ed\u89c6\u9891 SDK Android \u77ed\u89c6\u9891 SDK GitHub iOS \u77ed\u89c6\u9891 SDK GitHub Android \u4e0a\u4f20 SDK GitHub iOS \u4e0a\u4f20 SDK GitHub Android \u64ad\u653e\u5668 SDK GitHub iOS \u64ad\u653e\u5668 SDK GitHub \u878d\u5408 SDK iOS Fusion SDK GitHub \u4e0b\u8f7d Android Fusion SDK GitHub \u4e0b\u8f7d \u63d2\u4ef6 Discuz GitHub \u67e5\u770b PHPWind \u67e5\u770b UEditor GitHub \u4e0b\u8f7d UMeditor GitHub \u4e0b\u8f7d \u7b2c\u4e09\u65b9 SDK co-upyun - @lisposter GitHub ez-upyun - @XadillaX GitHub paperclip-upyun - @jhw GitHub .NETCore - @yangzho.. GitHub \u7b2c\u4e09\u65b9\u5de5\u5177\u548c\u63d2\u4ef6 \u53c8\u62cd\u4e91\u5b58\u50a8\u7ba1\u7406\u5ba2\u6237\u7aef GitHub \u4e0b\u8f7d \u53c8\u62cd\u4e91\u8d44\u6e90\u7ba1\u7406\u5668 GitHub \u4e0b\u8f7d \u53c8\u62cd\u4e91\u5927\u6587\u4ef6\u4e0a\u4f20\u5ba2\u6237\u7aef GitHub \u53c8\u62cd\u4e91web\u7248\u5de5\u5177 GitHub \u53c8\u62cd\u4e91\u547d\u4ee4\u884c\u5de5\u5177 GitHub \u53c8\u62cd\u4e91\u5e38\u7528\u811a\u672c GitHub \u53c8\u5c0f\u6d4b:\u5065\u5eb7\u76d1\u6d4b Android iOS WordPress GitHub emlog GitHub Ghost GitHub NodeBB GitHub Swfupload GitHub Typecho GitHub Plupload GitHub Webupload GitHub","title":"SDK&\u5de5\u5177"},{"location":"faq/","text":"\u6982\u5ff5\u6027 FAQ \u00b6 \u670d\u52a1\u56de\u6e90\u5206\u51e0\u79cd\u7c7b\u578b\uff0c\u6709\u54ea\u4e9b\u533a\u522b\uff1f \u670d\u52a1\u56de\u6e90\u603b\u5171\u5206\u4e3a\u4e24\u79cd\uff1a\u53c8\u62cd\u4e91\u5b58\u50a8\u548c\u81ea\u4e3b\u6e90\u7ad9\u3002\u533a\u522b\u5982\u4e0b\u8868\u6240\u793a\uff1a \u529f\u80fd \u53c8\u62cd\u4e91\u5b58\u50a8 \u81ea\u4e3b\u6e90\u7ad9 CDN \u52a0\u901f \u652f\u6301 \u652f\u6301 \u53ef\u4e0a\u4f20\u6587\u4ef6 \u6240\u6709\u6587\u4ef6 \u4e0d\u9700\u8981\u4e0a\u4f20\uff0c\u53c8\u62cd\u4e91\u76f4\u63a5\u4ece\u5ba2\u6237\u6e90\u7ad9\u83b7\u53d6 \u5355\u4e2a\u6587\u4ef6\u4e0a\u4f20\u9650\u5236 FTP \u6700\u5927\u652f\u6301 2G\uff1bAPI \u6700\u5927\u652f\u6301 150G - \u56fe\u7247\u6587\u4ef6\u50cf\u7d20\u9650\u5236 \u65e0\u9650\u5236 \u65e0\u9650\u5236 \u9632\u76d7\u94fe\u529f\u80fd \u652f\u6301 \u652f\u6301 \u7ed1\u5b9a\u72ec\u7acb\u57df\u540d \u652f\u6301(\u9700\u8981\u5907\u6848) \u652f\u6301(\u9700\u8981\u5907\u6848) \u81ea\u5b9a\u4e49\u7248\u672c \u652f\u6301 \u652f\u6301 \u670d\u52a1\u7c7b\u578b\u662f\u5426\u53ef\u4ee5\u66f4\u6539\uff1f \u670d\u52a1\u7c7b\u578b\u4e00\u65e6\u521b\u5efa\uff0c\u5c06\u65e0\u6cd5\u66f4\u6539\u3002 \u4e00\u4e2a\u5e10\u53f7\u6700\u591a\u53ef\u4ee5\u521b\u5efa\u591a\u5c11\u4e2a\u670d\u52a1\uff1f \u4e00\u4e2a\u5e10\u53f7\u6700\u591a\u53ef\u521b\u5efa 200 \u4e2a\u670d\u52a1\u3002 \u4e00\u4e2a\u670d\u52a1\u6700\u591a\u53ef\u4ee5\u7ed1\u5b9a\u591a\u5c11\u4e2a\u57df\u540d\uff1f \u6bcf\u4e2a\u670d\u52a1\u6700\u591a\u7ed1\u5b9a 10 \u4e2a\u57df\u540d\uff0c\u7ed1\u5b9a\u7684\u57df\u540d\u5fc5\u987b\u7ecf\u8fc7\u5907\u6848\uff0c\u4e14\u540c\u4e00\u4e2a\u57df\u540d\u53ea\u80fd\u7ed1\u5728\u4e00\u4e2a\u670d\u52a1\u4e0a\u3002 \u5982\u4f55\u67e5\u770b\u6211\u670d\u52a1\u91cc\u7684\u6587\u4ef6\uff1f \u53ef\u4ee5\u4f7f\u7528 FTP \u67e5\u770b\uff0c\u63a8\u8350\u4f7f\u7528\u5ba2\u6237\u7aef\uff1a FileZilla / \u53c8\u62cd\u4e91\u8d44\u6e90\u7ba1\u7406\u5668 \u3002 \u4e00\u4e2a\u5e10\u53f7\u6700\u591a\u53ef\u4ee5\u521b\u5efa\u591a\u5c11\u4e2a\u64cd\u4f5c\u5458\uff1f \u4e00\u4e2a\u5e10\u53f7\u53ef\u521b\u5efa 50 \u4e2a\u64cd\u4f5c\u5458\uff0c\u4ee5\u65b9\u4fbf\u5206\u914d\u7ed9\u4e0d\u540c\u90e8\u95e8\u6216\u9879\u76ee\u4f7f\u7528\uff0c\u5e76\u4e14\u53ef\u4ee5\u7075\u6d3b\u4ea4\u53c9\u6388\u6743\u3002 \u53c8\u62cd\u4e91\u5b58\u50a8\u662f\u5426\u652f\u6301 ?v=xxx \u6765\u5237\u65b0\u7f13\u5b58\uff1f \u4e0d\u652f\u6301\uff0c\u5bf9\u4e8e ?v=xxx \u53c2\u6570\u662f\u5ffd\u7565\u7684\u3002 \u4f60\u4eec\u652f\u6301\u54ea\u51e0\u79cd\u9632\u76d7\u94fe\uff0c\u6709\u4ec0\u4e48\u533a\u522b\uff1f \u53c8\u62cd\u4e91\u652f\u6301 IP \u7981\u7528\uff0c\u57df\u540d\u9632\u76d7\u94fe\uff0c\u5ba2\u6237\u7aef\u767d\u540d\u5355\uff0cToken \u9632\u76d7\u94fe\uff0c\u5730\u533a\u8bbf\u95ee\u9650\u5236\u5e76\u4e14\u53ef\u4ee5\u81ea\u5b9a\u4e49\u9632\u76d7\u94fe\u63d0\u793a\u56fe\u3002 IP \u7981\u7528 \uff1a \u5982\u679c\u4e0d\u5e0c\u671b\u67d0\u4e2a IP \u6216\u8005\u67d0\u6bb5 IP \u8bbf\u95ee\u7a7a\u95f4\uff0c\u53ef\u4ee5\u4f7f\u7528\u6b64\u529f\u80fd\uff0c\u6700\u591a\u652f\u6301 50 \u4e2a IP \u6216 IP \u6bb5\uff1b \u57df\u540d\u9632\u76d7\u94fe \uff1a \u901a\u8fc7\u8bbe\u7f6e\u57df\u540d\u767d\u540d\u5355\u6216\u9ed1\u540d\u5355\uff0c\u5141\u8bb8\u6216\u7981\u6b62\u67d0\u4e2a\u7f51\u7ad9\u5f15\u7528\u7a7a\u95f4\u6587\u4ef6\uff0c\u6700\u591a\u5404\u652f\u6301 50 \u4e2a\u9ed1\u767d\u540d\u5355\uff1b \u5ba2\u6237\u7aef\u767d\u540d\u5355 \uff1a \u5bf9\u4e8e\u5ba2\u6237\u7aef\u6216\u624b\u673a APP \u7684\u5ba2\u6237\uff0c\u53ef\u4ee5\u901a\u8fc7\u8bbe\u7f6e User Agent \u767d\u540d\u5355\u6765\u9650\u5236\u8bbf\u95ee\uff1b Token \u9632\u76d7\u94fe \uff1a \u9002\u5408\u4e0b\u8f7d\u7c7b\u7f51\u7ad9\u6216\u5e94\u7528\uff0c\u53ef\u4ee5\u8bbe\u7f6e\u7b7e\u540d\u548c\u8fc7\u671f\u65f6\u95f4\u6765\u63a7\u5236\u7a7a\u95f4\u6587\u4ef6\u7684\u8bbf\u95ee\u65f6\u9650\u3002 \u5730\u533a\u8bbf\u95ee\u9650\u5236 : \u9002\u5408\u9488\u5bf9\u5730\u533a\u505a\u51fa\u8bbf\u95ee\u9650\u5236 \u5982\u4f55\u5237\u65b0\u7f13\u5b58\uff1f \u81ea\u4e3b\u6e90\u7ad9\u7f13\u5b58\u5237\u65b0\u6709\u4e24\u79cd\uff1a API \u63a5\u53e3\uff0c\u8c03\u7528\u7f13\u5b58\u5237\u65b0 API \u63a5\u53e3\uff0c0~10 \u5206\u949f\u66f4\u65b0\u5230\u5168\u56fd\u8282\u70b9\uff1b \u5728\u540e\u53f0\u5237\u65b0\uff0c\u652f\u6301\u5b8c\u6574 URL \u5237\u65b0\u3001\u89c4\u5219\u5237\u65b0\u3001\u5168\u7f51\u5237\u65b0\u3002 \u53c8\u62cd\u4e91\u652f\u6301 HTTPS \u8bbf\u95ee\u5417\uff1f \u9ed8\u8ba4\u57df\u540d\u9ed8\u8ba4\u652f\u6301\uff0c\u7ed1\u5b9a\u57df\u540d\u9700\u8981\u4e0a\u4f20\u81ea\u5df1\u7684 SSL \u8bc1\u4e66\u5230\u53c8\u62cd\u4e91\u3002 ** \u5982\u4f55\u5220\u9664\u670d\u52a1\uff1f** \u5220\u9664\u670d\u52a1\u9700\u8981\u5220\u9664\u4e0a\u4f20\u5230\u670d\u52a1\u7684\u6240\u6709\u6587\u4ef6\uff0c\u7136\u540e\u5728\u540e\u53f0\u670d\u52a1\uff0d\u9ad8\u7ea7\u529f\u80fd\uff0d\u5220\u9664 ** \u670d\u52a1\u60f3\u6682\u65f6\u505c\u7528\u4e00\u6bb5\u65f6\u95f4\u600e\u4e48\u529e\uff1f ** \u53ef\u4ee5\u5148\u6682\u65f6\u5173\u95ed\u670d\u52a1\u7684\u5916\u94fe\u7981\u6b62\u8bbf\u95ee \u6280\u672f\u6027 FAQ \u00b6 \u4e3a\u4ec0\u4e48\u6709\u4e9b\u5730\u533a\u8bbf\u95ee\u53c8\u62cd\u4e91\u5b58\u50a8\u7684\u8d44\u6e90\u65e0\u6cd5\u6253\u5f00\uff1f\u6216\u8005ping \u5f97\u5230\u7684 IP \u4e0d\u662f\u53c8\u62cd\u4e91\u7684\uff1f \u8bf7\u68c0\u67e5\u672c\u5730 DNS \u662f\u5426\u662f\u516c\u5171\u7684 DNS \uff0c\u7531\u4e8e\u672c\u5730\u8fd0\u8425\u5546\u5206\u914d\u7684 DNS \u5b58\u5728\u6570\u636e\u5e93\u66f4\u65b0\u7f13\u6162\u4ee5\u53ca\u53ef\u80fd\u5bfc\u81f4\u88ab\u6076\u610f\u52ab\u6301\u7b49\u9690\u60a3\uff0c\u5efa\u8bae\u66f4\u6362\u4e3a\u516c\u5171\u7684 DNS \u5730\u5740\uff0c\u63d0\u5347\u8bbf\u95ee\u901f\u5ea6\u4ee5\u53ca\u7a33\u5b9a\u6027\uff0c\u5e38\u89c1\u7684\u516c\u5171 DNS \u5730\u5740\uff1a [\u56fd\u5185\u63a8\u8350] 114.114.114.114 223.5.5.5 223.6.6.6 [\u6d77\u5916\u63a8\u8350] 8.8.8.8 \u6211\u4f7f\u7528\u53c8\u62cd\u4e91\u7684\u9ed8\u8ba4\u57df\u540d\u8bbf\u95ee\u8d44\u6e90\uff0c\u7ed3\u679c\u5728\u817e\u8baf QQ \u6216 chrome \u7b49\u6d4f\u89c8\u5668\u8bbf\u95ee\u63d0\u793a\u8d44\u6e90\u5b58\u5728\u5b89\u5168\u9690\u60a3\u662f\u4ec0\u4e48\u539f\u56e0\uff1f \u6211\u4eec\u5f3a\u70c8\u5efa\u8bae\u5ba2\u6237\u4f7f\u7528\u5df2\u5907\u6848\u7684\u81ea\u5b9a\u4e49\u57df\u540d\u4f5c\u4e3a\u8bbf\u95ee\u5b58\u50a8\u8d44\u6e90\u7684\u57df\u540d\uff0c\u9ed8\u8ba4\u57df\u540d\u4e0d\u5efa\u8bae\u4f5c\u4e3a\u957f\u671f\u7684\u8d44\u6e90\u8bbf\u95ee\u57df\u540d\u4f7f\u7528\u3002 \u4f7f\u7528 API \u4e0a\u4f20\uff0c\u63d0\u793a\uff1a400 data too long for ext-param\uff1f \u989d\u5916\u53c2\u6570\u5185\u5bb9\u8fc7\u957f\u3002 \u4f7f\u7528 API \u4e0a\u4f20\uff0c\u63d0\u793a\uff1a401 signature error\uff1f \u7b7e\u540d\u9519\u8bef\u3002 \u53ef\u80fd\u60c5\u51b5\uff1a \u7b7e\u540d\u683c\u5f0f\u9519\u8bef\uff1b \u670d\u52a1\u5668\u65f6\u95f4\u9519\u8bef\uff0c\u8bf7\u68c0\u67e5\u670d\u52a1\u5668\u7684\u65f6\u95f4\u662f\u5426\u4e0e\u4e16\u754c\u65f6\u95f4\u6709\u8f83\u5927\u504f\u5dee\u3002 \u9012\u4ea4\u5230\u8868\u5355 API \u63a5\u53e3\u7684 policy \u4fe1\u606f\u4e2d\u7f3a\u5c11\u7a7a\u95f4\u540d\uff1b \u9012\u4ea4\u5230\u8868\u5355 API \u63a5\u53e3\u7684 policy \u4fe1\u606f\u4e2d\u7f3a\u5c11 save-key \u5b57\u6bb5\uff1b \u9012\u4ea4\u5230\u8868\u5355 API \u63a5\u53e3\u7684 policy \u4fe1\u606f\u4e2d\u7f3a\u5c11 expiration \u5b57\u6bb5\uff1b \u8868\u5355\u7b7e\u540d\u5bc6\u5319\u9519\u8bef\uff08\u8bf7\u5230\u7a7a\u95f4\u7ba1\u7406\u540e\u53f0\u83b7\u53d6\u8868\u5355 API \u7b7e\u540d\u5bc6\u5319\uff09\u3002 \u4f7f\u7528 API \u4e0a\u4f20\uff0c\u63d0\u793a\uff1a401 need date header\uff1f \u53d1\u8d77\u7684\u8bf7\u6c42\u7f3a\u5c11 Date \u5934\u4fe1\u606f\u3002 \u53ef\u80fd\u60c5\u51b5\uff1a \u53d1\u8d77\u7684\u63a5\u53e3\u8bf7\u6c42 HEADER \u4e2d\u786e\u5c11 Date \u53c2\u6570\uff1b \u6ce8\u610f\uff1a \u90e8\u5206 HTTP Client \u5f00\u53d1\u5305\u5728\u53d1\u8d77 GET \u8bf7\u6c42\u65f6\u4e0d\u81ea\u52a8\u52a0\u5165 Date \u53c2\u6570\u3002 \u4f7f\u7528 API \u4e0a\u4f20\uff0c\u63d0\u793a\uff1a401 date offset error\uff1f \u53d1\u8d77\u8bf7\u6c42\u7684\u670d\u52a1\u5668\u65f6\u95f4\u9519\u8bef\u3002 \u53ef\u80fd\u60c5\u51b5\uff1a \u670d\u52a1\u5668\u65f6\u95f4\u9519\u8bef\uff0c\u8bf7\u68c0\u67e5\u670d\u52a1\u5668\u7684\u65f6\u95f4\u662f\u5426\u4e0e\u4e16\u754c\u65f6\u95f4\u6709\u8f83\u5927\u504f\u5dee\u3002 \u4f7f\u7528 API \u4e0a\u4f20\uff0c\u63d0\u793a\uff1a401 user blocked\uff1f \u64cd\u4f5c\u5458\u88ab\u7981\u7528\u3002 \u4f7f\u7528 API \u4e0a\u4f20\uff0c\u63d0\u793a\uff1a403 not an image\uff1f \u4e0d\u662f\u6b63\u786e\u7684\u56fe\u7247\u5185\u5bb9\u3002 \u53ef\u80fd\u60c5\u51b5\uff1a \u4e0a\u4f20\u975e\u56fe\u7247\u6587\u4ef6\uff0c\u4f46\u662f\u4f7f\u7528\u4e86\u56fe\u7247\u5904\u7406\u53c2\u6570 ** \u4f7f\u7528 API \u4e0a\u4f20\uff0c\u63d0\u793a \uff1a401 user need permission ** \u64cd\u4f5c\u5458\u9700\u8981\u6388\u6743 \u53ef\u80fd\u60c5\u51b5\uff1a \u64cd\u4f5c\u5458\u672a\u6388\u6743\u76f8\u5e94\u64cd\u4f5c\u7684\u6743\u9650 ** \u4e0a\u4f20\u6587\u4ef6\u7684\u65f6\u5019\u62a5 400 40011xxx invalid x-gmkerl-xxx ** \u65e0\u6548\u53c2\u6570 \u53ef\u80fd\u60c5\u51b5\uff1a \u53c2\u6570\u4f7f\u7528\u9519\u8bef ** \u5220\u9664\u6587\u4ef6\u7684\u65f6\u5019 403 40300011 has no permission to delete ** \u6ca1\u6709\u6743\u9650\u5220\u9664 \u53ef\u80fd\u60c5\u51b5\uff1a \u64cd\u4f5c\u5458\u6ca1\u6709\u6388\u6743\u5220\u9664\u6743\u9650 ** \u5237\u65b0\u7f13\u5b58\u7684\u65f6\u5019\u6211\u7684\u57df\u540d\u914d\u7f6e\u6709 HTTP \u548c HTTPS \u8bf7\u95ee\u5237\u65b0\u7f13\u5b58\u7684\u65f6\u5019\u662f\u5426\u53ea\u9700\u8981\u5237\u65b0\u4e00\u4e2a\u5c31\u53ef\u4ee5\u4e86\uff1f ** \u8fd9\u79cd\u60c5\u51b5\u770b\u662f\u5426\u6709\u5f00\u542f\u534f\u8bae\u8ddf\u968f\uff0c\u5982\u679c\u5f00\u542f\u4e86\uff0c\u5c31\u9700\u8981\u5355\u72ec\u7528 https \u548c http \u5237\uff0c\u5404\u5237\u5404\u7684\uff0c\u5982\u679c\u6ca1\u5f00\u542f\uff0c\u4e24\u4e2a\u5237\u6548\u679c\u90fd\u4e00\u6837\u3002\u5982\u679c\u5224\u65ad\u662f\u5426\u6709\u5f00\u542f\u534f\u8bae\u8ddf\u968f\uff0c\u5982\u679c\u4f60\u5728\u56de\u6e90 Host \u4e2d\u586b\u5199\u4e86\u56de\u6e90\u57df\u540d \u5c31\u4e0d\u9700\u8981\u5237\u65b0\u4e24\u6b21\uff0c\u9ed8\u8ba4\u662f\u9700\u8981\u7684\u3002 \u4f7f\u7528\u963f\u91cc\u4e91ECS\u4f5c\u4e3a\u6e90\u7ad9\uff0c\u8fdb\u884c\u81ea\u4e3b\u6e90\u7ad9\u52a0\u901f\u540e\u54cd\u5e94\u5934\u4e00\u76f4\u63d0\u793a C\uff0ferror 503 contention reset peer\uff1f \u6e90\u7ad9\u8d85\u65f6\u5bfc\u81f4\u7684\u3002 \u53ef\u80fd\u60c5\u51b5\uff1a \u963f\u91cc\u4e91\u4e91\u76fe\u9632\u62a4\u62e6\u622a\u4e86\u6211\u4eec\u7684\u56de\u6e90 IP \uff0c\u5efa\u8bae\u5173\u95ed\u4e91\u76fe\u6216\u8005\u6dfb\u52a0\u4e91\u76fe\u767d\u540d\u5355 `0.0.0.0 \u3002 \u4f7f\u7528 API \u4e0a\u4f20\uff0c\u63d0\u793a\uff1a403 bucket blocked\uff1f \u7a7a\u95f4\u88ab\u7981\u7528\u6216\u8005\u6ca1\u6709\u8fdb\u884c\u5b9e\u540d\u8ba4\u8bc1\u3002 \u4f7f\u7528 API \u4e0a\u4f20\uff0c\u63d0\u793a\uff1a403 authorization has expired\uff1f \u4e0d\u63a5\u53d7\u8bf7\u6c42\uff0c\u6388\u6743\u5df2\u8fc7\u671f\u3002 \u53ef\u80fd\u60c5\u51b5\uff1a \u5728 policy \u4fe1\u606f\u4e2d\u8bbe\u7f6e expiration \u6388\u6743\u8fc7\u671f\u65f6\u95f4\u8fc7\u77ed\uff1b \u670d\u52a1\u5668\u65f6\u95f4\u4e0e\u4e16\u754c\u6807\u51c6\u65f6\u95f4\u504f\u5dee\u8fc7\u5927\u3002 \u4f7f\u7528 API \u4e0a\u4f20\uff0c\u63d0\u793a\uff1a403 form api disabled\uff1f \u4e0d\u63a5\u53d7\u8bf7\u6c42\uff0c\u7a7a\u95f4\u7684\u8868\u5355 API \u4e0a\u4f20\u529f\u80fd\u672a\u5f00\u542f\u3002 \u4f7f\u7528 API \u4e0a\u4f20\uff0c\u63d0\u793a\uff1a403 file too small\uff1f \u4e0d\u63a5\u53d7\u8bf7\u6c42\uff0c\u4e0a\u4f20\u7684\u6587\u4ef6\u5bb9\u91cf\u8fc7\u5c0f\u3002 \u53ef\u80fd\u60c5\u51b5\uff1a \u5728 policy \u4fe1\u606f\u4e2d\u8bbe\u7f6e\u7684 content-length-range \u53c2\u6570\u662f\u5426\u8fc7\u5927\u3002 \u4f7f\u7528 API \u4e0a\u4f20\uff0c\u63d0\u793a\uff1a403 file type error\uff1f \u4e0d\u63a5\u53d7\u8bf7\u6c42\uff0c\u4e0a\u4f20\u7684\u6587\u4ef6\u7c7b\u578b\u4e0d\u88ab\u5141\u8bb8\u3002 \u53ef\u80fd\u60c5\u51b5\uff1a \u5728 policy \u4fe1\u606f\u4e2d\u8bbe\u7f6e\u7684 allow-file-type \u4e0d\u5305\u542b\u5f53\u524d\u4e0a\u4f20\u7684\u6587\u4ef6\u7c7b\u578b\u3002 \u4f7f\u7528 API \u4e0a\u4f20\uff0c\u63d0\u793a\uff1a403 content md5 not match\uff1f \u4e0d\u63a5\u53d7\u8bf7\u6c42\uff0c\u4e0a\u4f20\u7684\u6587\u4ef6 md5 \u6821\u9a8c\u9519\u8bef\u3002 \u53ef\u80fd\u60c5\u51b5\uff1a \u5728 policy \u4fe1\u606f\u4e2d\u8bbe\u7f6e\u7684 content-md5 \u6821\u9a8c\u503c\u4e0e\u8868\u5355\u63a5\u6536\u5230\u7684\u6587\u4ef6 md5 \u4e0d\u4e00\u81f4\u3002 \u4f7f\u7528 API \u4e0a\u4f20\uff0c\u63d0\u793a\uff1a403 image width too small or too big\uff1f \u4e0d\u63a5\u53d7\u8bf7\u6c42\uff0c\u4e0a\u4f20\u7684\u56fe\u7247\u6587\u4ef6\u5bbd\u5ea6\u8fc7\u5c0f\u6216\u8fc7\u5927\u3002 \u53ef\u80fd\u60c5\u51b5\uff1a \u5728 policy \u4fe1\u606f\u4e2d\u8bbe\u7f6e\u7684 image-width-range \u53c2\u6570\u662f\u5426\u8fc7\u5927\u6216\u8fc7\u5c0f\u3002 \u4f7f\u7528 API \u4e0a\u4f20\uff0c\u63d0\u793a\uff1a403 image height too small or too big\uff1f \u4e0d\u63a5\u53d7\u8bf7\u6c42\uff0c\u4e0a\u4f20\u7684\u56fe\u7247\u6587\u4ef6\u9ad8\u5ea6\u8fc7\u5c0f\u6216\u8fc7\u5927\u3002 \u53ef\u80fd\u60c5\u51b5\uff1a \u5728 policy \u4fe1\u606f\u4e2d\u8bbe\u7f6e\u7684 image-height-range \u53c2\u6570\u662f\u5426\u8fc7\u5927\u6216\u8fc7\u5c0f\u3002 \u4f7f\u7528 API\uff0c\u63d0\u793a\uff1a404 Not Found\uff1f \u8bf7\u6c42\u7684\u6587\u4ef6\u4e0d\u5b58\u5728\u3002 \u53ef\u80fd\u60c5\u51b5\uff1a \u5728\u4e0a\u4f20\u6587\u4ef6\u8fc7\u7a0b\u4e2d\u9047\u5230 404 \u9519\u8bef\uff0c\u8bf7\u68c0\u67e5\u4e0a\u4f20\u6587\u4ef6\u8def\u5f84\u7684\u76ee\u5f55\u8def\u5f84\u662f\u5426\u5b58\u5728\uff1b \u5728\u4e0b\u8f7d\u6587\u4ef6\u8fc7\u7a0b\u4e2d\u9047\u5230 404 \u9519\u8bef\uff0c\u8bf7\u68c0\u67e5\u6587\u4ef6\u540d\u548c\u8def\u5f84\u662f\u5426\u5b58\u5728\u3002 \u4f7f\u7528 API\uff0c\u63d0\u793a\uff1a406 dir not acceptable\uff1f \u4e0d\u63a5\u53d7\u8bf7\u6c42\u3002 \u53ef\u80fd\u60c5\u51b5\uff1a \u5728\u4e0a\u4f20\u6587\u4ef6\u8fc7\u7a0b\u4e2d\u9047\u5230 406 \u9519\u8bef\uff0c\u8bf7\u68c0\u67e5\u4e0a\u4f20\u6587\u4ef6\u540d\u662f\u5426\u5df2\u7ecf\u88ab\u7528\u4e8e\u5b58\u5728\u7684\u76ee\u5f55\uff1b \u5728\u4e0a\u4f20\u6587\u4ef6\u8fc7\u7a0b\u4e2d\u9047\u5230 406 \u9519\u8bef\uff0c\u5982\u6709\u8bbe\u7f6e Content-MD5 \u6821\u9a8c\uff0c\u53ef\u80fd\u662f\u53c8\u62cd\u4e91\u670d\u52a1\u5668\u7aef\u6536\u5230\u7684\u6587\u4ef6\u5185\u5bb9 MD5 \u4e0d\u4e00\u81f4\u3002\u8bf7\u68c0\u67e5 API \u63a5\u53e3\u8bf7\u6c42\u65f6\u8bbe\u7f6e\u7684 Content-MD5 \u503c\uff1b \u5728\u521b\u5efa\u76ee\u5f55\u8fc7\u7a0b\u4e2d\u9047\u5230 406 \u9519\u8bef\uff0c\u8bf7\u68c0\u67e5\u76ee\u5f55\u540d\u662f\u5426\u5df2\u7ecf\u88ab\u7528\u4e8e\u5b58\u5728\u7684\u6587\u4ef6\u3002 \u4f7f\u7528 API \u4e0a\u4f20\uff0c\u63d0\u793a\uff1a503 System Error\uff1f \u7cfb\u7edf\u9519\u8bef\u3002 \u53ef\u80fd\u60c5\u51b5\uff1a \u53c8\u62cd\u4e91\u7cfb\u7edf\u6b63\u5728\u7ef4\u62a4\u4e2d\uff1b \u53c8\u62cd\u4e91\u7cfb\u7edf\u51fa\u73b0\u6545\u969c\uff0c\u8bf7\u4e0e\u5ba2\u670d\u8054\u7cfb\u3002 FTP \u00b6 \u4f7f\u7528 FTP \u767b\u5f55\u63d0\u793a\uff1a\u65e0\u6cd5\u89e3\u6790 v0.ftp.upyun.com \u7684\u5730\u5740\uff1f \u53ef\u80fd\u60c5\u51b5\uff1a \u672c\u5730 DNS \u6709\u95ee\u9898\uff0c\u53ef\u5c1d\u8bd5\u66f4\u6362\u516c\u5171 DNS\u3002 \u4f7f\u7528 FTP \u767b\u5f55\u63d0\u793a\uff1a530 Authentication failed. Disconnecting. \u65e0\u6cd5\u8fde\u63a5\u5230\u670d\u52a1\u5668\uff1f \u53ef\u80fd\u60c5\u51b5\uff1a \u7528\u6237\u540d\uff08\u64cd\u4f5c\u5458/\u7a7a\u95f4\u540d\uff0c\u659c\u6760\u4e3a\u5fc5\u987b\uff09\u9519\u8bef\uff1b \u5bc6\u7801\uff08\u64cd\u4f5c\u5458\u5bc6\u7801\uff09\u9519\u8bef\uff1b \u64cd\u4f5c\u5458\u6ca1\u6709\u6388\u6743\u7ed9\u7a7a\u95f4\u3002 \u4f7f\u7528 FTP \u4e0a\u4f20\u8f83\u5927\u6587\u4ef6\uff1a\u8fdb\u5ea6\u662f 100% \u786e\u6ca1\u6709\u663e\u793a\u4e0a\u4f20\u5b8c\u6bd5\uff1f \u8bf7\u8010\u5fc3\u7b49\u5f85 15 \u79d2\u5de6\u53f3\uff0c\u6b64\u65f6\u7cfb\u7edf\u6b63\u5728\u628a\u63a5\u6536\u5230\u7684\u6587\u4ef6\u5199\u5165\u5230\u76f8\u5e94\u7684\u5b58\u50a8\u670d\u52a1\u4e2d\uff0c\u6587\u4ef6\u5199\u5165\u5b8c\u6bd5\u540e\uff0c\u624d\u4f1a\u663e\u793a\u4e0a\u4f20\u5b8c\u6210\u3002 FTP \u770b\u5230\u7684\u65f6\u95f4\u4e0e\u5f53\u524d\u65f6\u95f4\uff08\u5317\u4eac\u65f6\u95f4\uff09\u4e0d\u4e00\u81f4\uff1f \u53c8\u62cd\u4e91\u670d\u52a1\u5668\u91c7\u7528 GMT \u65f6\u95f4\uff0c\u4e3a UTC+0 \u533a\uff0c\u548c\u5317\u4eac\u65f6\u95f4\u76f8\u5dee 8 \u4e2a\u5c0f\u65f6\u3002 FTP \u770b\u5230\u4e0a\u4f20\u7684\u4e2d\u6587\u6587\u4ef6\u540d\u4e3a\u4e71\u7801\uff1f \u53c8\u62cd\u4e91\u7684 FTP \u7f16\u7801\u4e3a UTF-8\uff0c\u8bf7\u66f4\u6539 FTP \u7f16\u7801\u8bbe\u7f6e\u4e3a UTF-8\u3002 FTP \u4e2d\u53ef\u4ee5\u770b\u5230\u56fe\u7247\uff0c\u4f46\u5916\u94fe\u8bbf\u95ee 404\uff1f \u53ef\u80fd\u60c5\u51b5\u6709\uff1a \u4f7f\u7528\u4e86\u539f\u56fe\u4fdd\u62a4\u529f\u80fd\uff0c\u9700\u8981\u5e26\u5bc6\u94a5\u8bbf\u95ee\uff1b \u4e0a\u4f20\u5b8c\u6210\u524d\u6709\u8fc7\u8bbf\u95ee\uff0c\u4f1a\u6709 5 \u5206\u949f 404 \u7f13\u5b58\uff0c\u9700\u8981\u5237\u65b0\u7f13\u5b58\u6216\u7b49\u5f85\u7f13\u5b58\u8fc7\u671f\u540e\u66f4\u65b0\uff1b URL \u4e2d\u542b\u6709\u548c\u540e\u53f0\u95f4\u9694\u7b26\u76f8\u540c\u7684\u5b57\u7b26\u3002 \u4e3a\u4ec0\u4e48 FTP \u4e0d\u80fd\u7ed9\u76ee\u5f55\u91cd\u547d\u540d\uff1f \u652f\u6301\u7a7a\u76ee\u5f55\u53ca\u6587\u4ef6\u91cd\u547d\u540d\uff0c\u6682\u4e0d\u652f\u6301\u975e\u7a7a\u76ee\u5f55\u91cd\u547d\u540d\u3002 FTP \u5982\u4f55\u79fb\u52a8\u53ca\u590d\u5236\u6587\u4ef6\u53ca\u76ee\u5f55\uff1f \u652f\u6301\u7a7a\u76ee\u5f55\u53ca\u6587\u4ef6\u79fb\u52a8\uff0c\u6682\u4e0d\u652f\u6301\u975e\u76ee\u5f55\u79fb\u52a8\uff0c\u6682\u4e0d\u652f\u6301\u76ee\u5f55\u3001\u6587\u4ef6\u590d\u5236\u3002 \u4e3a\u4ec0\u4e48 FTP \u4e0a\u4f20\u4f1a\u5c11\u51e0\u4e2a\u5b57\u8282\u4e0d\u5b8c\u6574\uff1f \u7531\u4e8e FTP \u7684\u7279\u6027\uff0c\u4e0d\u68c0\u67e5\u6570\u636e\u5b8c\u6574\u6027\uff0c\u5982\u7f51\u7edc\u6ce2\u52a8\u5bfc\u81f4\u4e00\u90e8\u5206\u5b57\u8282\u4e22\u5931\u4e5f\u662f\u53ef\u80fd\u7684\uff0c\u53ef\u91cd\u4f20\u6216\u91c7\u7528 API \u65b9\u5f0f\u4e0a\u4f20\u3002 FTP \u63d0\u793a\uff1a425 Rejected Data Connection From Foreign Address \u5e76\u8bfb\u53d6\u76ee\u5f55\u5931\u8d25\uff1f \u53ef\u80fd\u60c5\u51b5\uff1a \u8fd0\u8425\u5546\u63d0\u4f9b\u7684 IP \u53d1\u751f\u4e86\u53d8\u5316\uff0cFTP \u63a2\u6d4b\u5230\u524d\u540e\u4e0d\u4e00\u81f4\uff0c\u51fa\u4e8e\u5b89\u5168\u8003\u8651\uff0c\u65ad\u6389\u4e86\u8fde\u63a5\uff0c\u8fd9\u4e2a\u662f FTP \u534f\u8bae\u51b3\u5b9a\u7684\u3002\u5982\u679c\u65e0\u6cd5\u6539\u53d8\u8fd9\u4e2a IP \u5730\u5740\u53d8\u52a8\u7684\u60c5\u51b5, \u53ef\u4ee5\u5c1d\u8bd5\u4f7f\u7528\u4f7f\u7528\u4ee3\u7406\u6765\u907f\u514d\u8fd9\u79cd\u60c5\u51b5\u53d1\u751f\u3002 \u63d2\u4ef6 \u00b6 \u7ec7\u68a6 CMS \u662f\u5426\u53ef\u4ee5\u4f7f\u7528\u53c8\u62cd\u4e91\uff0c\u6709\u6ca1\u6709\u63d2\u4ef6\uff1f \u6682\u65e0\u7ec7\u68a6 CMS \u7684\u63d2\u4ef6\uff1b\u7406\u8bba\u4e0a\u652f\u6301 FTP \u534f\u8bae\u7684 CMS \u90fd\u662f\u53ef\u4ee5\u4f7f\u7528\u53c8\u62cd\u4e91\u5b58\u50a8\uff0c\u4f46\u7ec7\u68a6 CMS \u672c\u8eab\u5c06\u8fdc\u7a0b\u9644\u4ef6\u5f53\u505a\u5907\u4efd\u5904\u7406\uff0c\u9759\u6001\u6587\u4ef6\u7684\u5f15\u7528\u662f\u4e0d\u5f15\u7528\u8fdc\u7a0b\u9644\u4ef6\u7684\uff1b\u6240\u4ee5\u7ec7\u68a6 CMS \u53ef\u4ee5\u4f7f\u7528\u53c8\u62cd\u4e91\u5b58\u50a8\uff0c\u4f46\u53ea\u80fd\u662f\u628a\u53c8\u62cd\u4e91\u5b58\u50a8\u5f53\u5907\u4efd\u3002 Discuz \u662f\u5426\u53ef\u4ee5\u672c\u5730\u4fdd\u7559\u9644\u4ef6\uff1f \u5982\u679c\u4f60\u4f7f\u7528\u63d2\u4ef6\uff0c\u63d2\u4ef6\u6700\u540e\u662f\u6709\u9009\u9879\u8bbe\u7f6e\u662f\u5426\u5f00\u542f\u672c\u5730\u5907\u4efd\u513f\u529f\u80fd\u7684\uff1b\u5982\u679c\u4f60\u4f7f\u7528\u8fdc\u7a0b\u9644\u4ef6\u529f\u80fd\uff0c\u672c\u5730\u662f\u4e0d\u4fdd\u5b58\u7684\u3002 \u4e3a\u4ec0\u4e48 Discuz \u8fdc\u7a0b\u9644\u4ef6\u7684\u6d4b\u8bd5 FTP \u6309\u94ae\u63d0\u793a\u5220\u9664\u5931\u8d25\uff0c\u6ca1\u6709\u6743\u9650\u7684\u63d0\u793a\uff1f \u8be5\u529f\u80fd\u4e0e\u53c8\u62cd\u4e91\u4e0d\u517c\u5bb9\uff0c\u786e\u8ba4\u586b\u5199\u914d\u7f6e\u4fe1\u606f\u65e0\u8bef\u540e\uff0c\u53ef\u4ee5\u76f4\u63a5\u4fdd\u5b58\u8bbe\u7f6e\uff0c\u53d1\u5e16\u6d4b\u8bd5\u3002 \u4e3a\u4ec0\u4e48\u7528 FTP \u4e0a\u4f20\u7684\u6587\u4ef6\uff0cWordPress \u7684\u5a92\u4f53\u5e93\u770b\u4e0d\u5230\uff1f \u56e0\u4e3a\u5a92\u4f53\u5e93\u53ea\u63a7\u5236\u7531\u81ea\u8eab\u4e0a\u4f20\u7684\u6587\u4ef6\uff0c\u5e76\u6ca1\u6709\u83b7\u53d6\u8fdc\u7a0b\u76ee\u5f55\u7684\u529f\u80fd\uff0c\u6240\u4ee5 WordPress \u7684\u5a92\u4f53\u5e93\u770b\u4e0d\u5230 FTP \u4e0a\u4f20\u7684\u6587\u4ef6 \u600e\u4e48\u5c06 Wordpress \u7684\u6570\u636e\u8fc1\u79fb\u5230\u53c8\u62cd\u4e91\uff1f \u5c06\u7f51\u7ad9\u6839\u76ee\u5f55\u4e0b /wp-content/uploads \u4e0b\u7684\u6570\u636e\u4e0a\u4f20\u5230\u53c8\u62cd\u4e91\uff0c\u5b89\u88c5\u53c8\u62cd\u4e91 Wordpress \u7684\u63d2\u4ef6\uff08\u5b89\u88c5\u8bf7\u53c2\u8003\u5b89\u88c5\u624b\u518c\uff09\uff0c\u6b63\u786e\u586b\u5199\u8bbe\u7f6e\uff0c\u4fdd\u5b58\u914d\u7f6e\uff0c\u66f4\u65b0\u6570\u636e\u5e93\u3002 \u4e3a\u4ec0\u4e48\u5b89\u88c5 Wordpress \u540e\uff0c\u4e0a\u4f20\u4e00\u4e2a\u6587\u4ef6\uff0c\u53c8\u62cd\u4e91\u5b58\u50a8\u7a7a\u95f4\u4f1a\u591a\u51e0\u4e2a\uff1f \u8fd9\u662f\u7531\u4e8e Wordpress \u7684\u5b58\u50a8\u65b9\u5f0f\u662f\u4e00\u5f20\u539f\u56fe\u76f4\u63a5\u5206\u5272\u6210\u591a\u5f20\u7f29\u7565\u5b58\u50a8\uff0c\u4e0a\u4f20\u9644\u4ef6\u65f6\u662f\u5c06\u539f\u56fe\u4ee5\u53ca\u7f29\u7565\u56fe\u4e00\u5e76\u4e0a\u4f20\u7684\u3002 PHPWind \u5b89\u88c5\u53c8\u62cd\u4e91\u63d2\u4ef6\uff0c\u5934\u50cf\u8fd8\u662f\u4fdd\u5b58\u672c\u5730\uff1f PHPWind \u5934\u50cf\u5b58\u50a8\u8fd8\u9700\u8981\u53e6\u5916\u5b89\u88c5\u63d2\u4ef6\u8bbe\u7f6e\uff1b\u5177\u4f53\u53c2\u8003\u5b89\u88c5\u624b\u518c\u7b2c\u56db\u9879\uff0c\u5934\u50cf\u5b58\u50a8\u65b9\u5f0f\u8bbe\u7f6e\u3002 \u4e3a\u4ec0\u4e48 PHPWind \u5b89\u88c5\u63d2\u4ef6\u540e\uff0c\u4e0a\u4f20\u6587\u4ef6\u540e\uff0c\u6587\u4ef6\u5916\u94fe\u8fd8\u662f\u672c\u5730\u5730\u5740\uff1f \u68c0\u67e5\u914d\u7f6e\u4fe1\u606f\u662f\u5426\u6b63\u786e\uff0c\u6e05\u7406 PHPWind \u7f13\u5b58\u3002 \u600e\u4e48\u901a\u8fc7\u65e5\u5fd7\u770b\u52a8\u6001\u8bf7\u6c42\u8fd8\u662f\u9759\u6001\u8bf7\u6c42 \u540e\u53f0\u4e0b\u8f7d\u65e5\u5fd7\u540e\uff0c\u6253\u5f00\u65e5\u5fd7\u67e5\u770b Static \u5b57\u6bb5\u5c31\u662f\u9759\u6001\uff0c\u53cd\u4e4b Dynamic \u5c31\u662f\u52a8\u6001\u7684\u3002 \u4e3a\u4ec0\u4e48\u4e0b\u8f7d\u53c8\u62cd\u4e91\u5b98\u65b9\u7684 UEditor \u7f16\u8f91\u5668\uff0c\u914d\u7f6e\u4ee5\u540e\uff0c\u4e0a\u4f20\u4e0d\u4e86\uff1f \u68c0\u67e5 UEditor \u7684\u6743\u9650\u95ee\u9898\uff0cUEditor \u4e0b\u9644\u4ef6\u76ee\u5f55 uploads \u81f3\u5c11\u8981\u6709\u5199\u7684\u6743\u9650\u3002 \u5176\u5b83 \u00b6 \u56fe\u7247\u8bbf\u95ee\u663e\u793a\uff1a403 Forbidden\uff1f \u5f00\u542f\u4e86\u9632\u76d7\u94fe\u529f\u80fd\u3002 \u53ef\u80fd\u60c5\u51b5\uff1a \u4f7f\u7528\u4e86 Token \u9632\u76d7\u94fe\uff0c\u8bbf\u95ee\u65f6\u6ca1\u6709\u52a0\u53c2\u6570\uff1a_upt\uff1b \u4f7f\u7528\u4e86 IP \u7981\u7528\u529f\u80fd\uff0cIP \u88ab\u7981\u4e86\uff1b \u4f7f\u7528\u4e86\u57df\u540d\u9632\u76d7\u94fe\u529f\u80fd\uff0c\u4e0d\u5728\u5141\u8bb8\u7684\u57df\u540d\u8303\u56f4\u5185\uff1b \u4f7f\u7528\u4e86\u5ba2\u6237\u7aef\u767d\u540d\u5355\u529f\u80fd\uff0c\u4e0d\u5728\u767d\u540d\u5355\u8303\u56f4\u5185\u3002 \u56fe\u7247\u5728\u672c\u5730\u770b\u7740\u662f\u6b63\u7684\uff0c\u4f20\u5230\u4e86\u53c8\u62cd\u4e91\uff0c\u67d0\u4e9b\u6d4f\u89c8\u5668\u8bbf\u95ee\u662f\u5012\u7684\uff1f \u56fe\u7247\u672c\u8eab\u5e76\u4e0d\u662f\u6b63\u7684\uff0c\u90e8\u5206\u8f6f\u4ef6\u6216\u6d4f\u89c8\u5668\u5177\u6709\u81ea\u52a8\u65cb\u8f6c\u8bc6\u522b\u529f\u80fd\uff0c\u53ef\u901a\u8fc7\u67e5\u770b\u56fe\u7247 EXIF \u4fe1\u606f\uff0c\u786e\u5b9a\u56fe\u7247\u7684\u5177\u4f53\u65cb\u8f6c\u60c5\u51b5\u3002 \u8bf4\u660e\uff1a \u53c2\u6570 Orientation\uff0c\uff081\uff1a0 \u5ea6 6\uff1a\u987a\u65f6\u9488 90 \u5ea6 8\uff1a\u9006\u65f6\u9488 90 \u5ea6 3\uff1a180 \u5ea6\uff09\u3002 \u539f\u56fe\u52a0\u5bc6\u529f\u80fd\u4e0d\u751f\u6548\uff1f \u53ef\u80fd\u60c5\u51b5\uff1a \u539f\u56fe\u4fdd\u62a4\u5bc6\u94a5\u5305\u542b\u7279\u6b8a\u5b57\u7b26\uff1a\u65b0\u7248\u672c\u89c4\u5b9a\u53ea\u80fd\u4f7f\u7528\u201ca-zA-Z0-9\u201d\u7684\u5b57\u7b26\u7ec4\u5408\u3002 \u6dfb\u52a0\u6c34\u5370\u4e0d\u6210\u529f\uff1f \u68c0\u67e5\u6c34\u5370\u56fe\u7247\u5c3a\u5bf8\u4efb\u610f\u8fb9\u662f\u5426\u8d85\u8fc7\u4e86\u751f\u6210\u56fe\u7247\u5c3a\u5bf8\u7684 50%\uff0c\u8d85\u8fc7\u4e0d\u80fd\u6dfb\u52a0\u6c34\u5370\u3002 \u6587\u4ef6\u66f4\u65b0\u4e86\uff0c\u4e3a\u4ec0\u4e48\u8bbf\u95ee\u8fd8\u662f\u8001\u56fe\uff1f \u6587\u4ef6\u66f4\u65b0\u540e\uff0c\u53c8\u62cd\u4e91\u5b58\u50a8\u9700\u8981\u66f4\u65b0\u5168\u56fd\u8282\u70b9\u7684\u7f13\u5b58\uff0c\u8fd9\u4e2a\u65f6\u95f4\u9700\u8981 0~10 \u5206\u949f\u3002\u4e00\u822c\u60c5\u51b5\u4e0b\uff0c\u80fd\u591f\u505a\u5230\u5b9e\u65f6\u66f4\u65b0\u300210 \u5206\u949f\u540e\u8fd8\u662f\u65e0\u6cd5\u83b7\u53d6\u65b0\u56fe\uff0c\u8bf7\u68c0\u67e5\u4ee5\u4e0b\u4e24\u79cd\u60c5\u51b5\uff1a \u6d4f\u89c8\u5668\u53ef\u80fd\u5b58\u5728\u7f13\u5b58\uff0c\u8bf7\u6e05\u9664\u6d4f\u89c8\u5668\u7f13\u5b58\u540e\uff0c\u518d\u5f3a\u5236\u5237\u65b0; \u82e5\u662f\u81ea\u4e3b\u6e90\u7ad9\u7684\u60c5\u51b5\uff0c\u6e90\u6570\u636e\u66f4\u65b0\u540e\u662f\u5426\u6709\u8c03\u7528\u8fc7 API \u63a5\u53e3\uff0c\u901a\u77e5\u53c8\u62cd\u4e91\u5b58\u50a8\u8fdb\u884c\u7f13\u5b58\u5237\u65b0\u3002 **\u81ea\u4e3b\u6e90\u7ad9\u670d\u52a1\uff0c\u8bbf\u95ee\u6587\u4ef6\u4e00\u76f4\u6ca1\u5237\u65b0\u6210\u529f\uff0c\u54cd\u5e94\u5934\u4e2d\u663e\u793a x-source:U/200 \u8bf7\u95ee\u5982\u4f55\u89e3\u51b3\uff1f ** \u53ef\u80fd\u539f\u56e0: \u8fd9\u79cd\u60c5\u51b5\u4e00\u822c\u662f\u5f00\u542f\u4e86\u955c\u50cf\u529f\u80fd\u5bfc\u81f4\u6e90\u7ad9\u6587\u4ef6\u88ab\u6c38\u4e45\u4fdd\u5b58\u5728\u4e86 CDN \u4e2d\uff0c\u6b64\u65f6\u7684\u81ea\u52a9\u6e90\u7ad9\u5df2\u7ecf\u662f\u4e00\u4e2a\u5b58\u50a8\u670d\u52a1\uff0c\u5982\u679c\u8bef\u64cd\u4f5c\uff0c\u5148 FTP \u767b\u5f55\u5230\u8fd9\u4e2a\u670d\u52a1\u4e2d\u5220\u9664\u6587\u4ef6\uff0c\u7136\u540e\u5173\u95ed\u955c\u50cf\u529f\u80fd\u540e\u5168\u7f51\u5237\u65b0\u3002 ** \u6587\u4ef6\u4e0a\u4f20\u6210\u529f\u540e\uff0c\u4e3a\u4ec0\u4e48\u8bbf\u95ee\u8fd4\u56de 400 \u72b6\u6001\u7801\uff0c\u63d0\u793a\u7f51\u7ad9\u672a\u5907\u6848\uff1f ** \u8bf7\u786e\u8ba4\u57df\u540d\u662f\u5426\u89e3\u6790\u5230\u6211\u4eec\u63d0\u4f9b\u7684\u89e3\u6790\u5730\u5740 ** \u5982\u4f55\u901a\u8fc7 curl \u4e0a\u4f20\u6587\u4ef6\uff1f** curl -T /local_img.jpg http://v0.api.upyun.com/bucket/img.jpg -u operator:operator_pwd -v /local_img.jpg \u672c\u5730\u4e0a\u4f20\u6587\u4ef6\u7684\u8def\u5f84\u548c\u6587\u4ef6\u540d /bucket \u670d\u52a1\u540d operator:operator_pwd \u64cd\u4f5c\u5458\uff1a\u64cd\u4f5c\u5458\u5bc6\u7801 ** \u6587\u4ef6\u4e0a\u4f20\u6210\u529f\u540e\uff0c\u5982\u4f55\u901a\u8fc7\u6d4f\u89c8\u5668\u53bb\u67e5\u770b\u6587\u4ef6\uff1f ** \u53ef\u4ee5\u76f4\u63a5\u901a\u8fc7\u5916\u94fe\u53bb\u8bbf\u95ee\u4e0b\u8f7d http://<\u670d\u52a1\u540d>.b0.upaiyun.com/<\u6587\u4ef6\u8def\u5f84>/<\u6587\u4ef6\u540d> ** \u5982\u4f55\u53bb\u76f4\u63a5\u4e0b\u8f7d\u4e00\u4e2a\u5728\u9875\u9762\u663e\u793a\u7684\u6587\u4ef6 ** \u5728 URL \u540e\u9762\u6dfb\u52a0 ?_upd=true \u53c2\u6570\u5b9e\u73b0 ** \u6587\u4ef6\u4e0a\u4f20\u6210\u529f\u540e\uff0c\u5982\u4f55\u786e\u8ba4\u6587\u4ef6\u662f\u5426\u66f4\u65b0\uff1f** \u786e\u8ba4\u6587\u4ef6\u54cd\u5e94\u5934\u4e2d\u7684 Last-Modified \u7684\u65f6\u95f4\u662f\u5426\u662f\u60a8\u66f4\u65b0\u6587\u4ef6\u7684\u65f6\u95f4\u3002 ** \u8bbf\u95ee 405 Not Allowed ** \u5916\u94fe\u6ca1\u6709\u5f00\u542f ** \u64cd\u4f5c\u5458\u90fd\u6709\u54ea\u4e9b\u6743\u9650\uff1f\u662f\u5426\u53ef\u4ee5\u767b\u9646\u8d26\u53f7\uff1f** \u64cd\u4f5c\u5458\u662f\u6ca1\u6709\u529e\u6cd5\u767b\u9646\u8d26\u53f7\u7684\uff0c\u64cd\u4f5c\u5458\u53ea\u662f\u5bf9\u6587\u4ef6\u8fdb\u884c\u64cd\u4f5c\uff0c\u4e0a\u4f20\u3001\u5220\u9664\u7b49 ** \u60f3\u5168\u7f51\u63a5\u5165\uff0c\u5982\u4f55\u5728\u63a5\u5165\u7684\u65f6\u5019\u51cf\u5c11\u670d\u52a1\u5668\u7684\u538b\u529b\uff1f ** \u53ef\u4ee5\u5728\u63a5\u5165\u4e4b\u524d\uff0c\u5c06\u4e00\u4e9b\u9759\u6001\u6587\u4ef6\u8fdb\u884c\u9884\u70ed\uff0c\u53ef\u4ee5\u51cf\u5c11\u6587\u4ef6\u7684\u56de\u6e90\u538b\u529b\uff0c\u63d0\u9ad8\u7f13\u5b58\u547d\u4e2d\u7387\u3002 ** \u56de\u8c03\u600e\u4e48\u7528 ** \u7b54: \u56de\u8c03\u7684\u5730\u5740\u5fc5\u987b\u662f\u516c\u7f51\u5730\u5740\uff0c\u6211\u4eec\u53d1\u9001\u56de\u8c03\u4f60\u53ef\u4ee5\u53c2\u8003\u4e0b\u9762\u7684 php \u4ee3\u7801\u63a5\u6536 <?php $myfile = fopen(\"res.txt\", \"w\"); $notify = file_get_contents(\"php://input\"); fwrite($myfile, $notify); fclose($myfile); \u4e0a\u9762\u7684\u4ee3\u7801\u662f\u628a\u56de\u8c03\u4fe1\u606f\u5199\u5165\u5230\u6587\u4ef6\uff0c\u7136\u540e\u67e5\u770b\u8fd9\u4e2a\u6587\u4ef6\u5c31\u80fd\u770b\u5230\u56de\u8c03\u4fe1\u606f\u4e86\u3002 \u5e10\u53f7 FAQ \u00b6 ** \u5e10\u53f7\u6ce8\u518c\u65f6\u63d0\u4ea4\u7533\u8bf7\u4e4b\u540e\u8df3\u51fa\u624b\u673a\u6216\u90ae\u7bb1\u5df2\u5b58\u5728\uff1f** \u8868\u793a\u60a8\u4e4b\u524d\u5df2\u7ecf\u7528\u8be5\u624b\u673a\u6216\u90ae\u7bb1\u6ce8\u518c\u767b\u8bb0\u8fc7\u5e10\u53f7\uff0c\u82e5\u60a8\u4e0d\u8bb0\u5f97\u5e10\u53f7\uff0c\u53ef\u4ee5\u8054\u7cfb\u552e\u540e QQ200576786 \u5e2e\u60a8\u67e5\u770b\u3002 ** \u6211\u5fd8\u8bb0\u5bc6\u7801\u4e86\u600e\u4e48\u529e\uff1f** \u624b\u673a\u6216\u90ae\u7bb1\u5df2\u7ecf\u9a8c\u8bc1\u8fc7\u7684\uff0c\u76f4\u63a5\u5728\u767b\u5f55\u9875\u9762\u70b9\u51fb\u5fd8\u8bb0\u5bc6\u7801\uff0c\u5373\u53ef\u901a\u8fc7\u624b\u673a\u77ed\u4fe1\uff0c\u8bed\u97f3\u7535\u8bdd\u6216\u8005\u90ae\u7bb1\u91cd\u7f6e\u4e00\u4e2a\u65b0\u7684\u5bc6\u7801\uff0c\u7136\u540e\u767b\u5f55\u5373\u53ef\uff1b\u82e5\u90ae\u7bb1\u672a\u9a8c\u8bc1\uff0c\u53ef\u4ee5\u7528\u6ce8\u518c\u90ae\u7bb1\u53d1\u9001\u7528\u6237\u540d\u548c\u9a8c\u8bc1\u90ae\u4ef6\u5230 support@upyun.com \u4eba\u5de5\u9a8c\u8bc1\u90ae\u7bb1\uff0c\u82e5\u624b\u673a\u53f7\u672a\u9a8c\u8bc1\uff0c\u53ef\u4ee5\u7528\u6ce8\u518c\u624b\u673a\u62e8\u6253 0571-81020204 \u4eba\u5de5\u9a8c\u8bc1\u624b\u673a\u53f7\uff0c\u9a8c\u8bc1\u4e4b\u540e\u53ef\u901a\u8fc7\u90ae\u7bb1\u6216\u624b\u673a\u91cd\u7f6e\u5bc6\u7801\u3002 ** \u5e10\u53f7\u767b\u5f55\u8fdb\u53bb\u63d0\u793a\u5e10\u53f7\u88ab\u51bb\u7ed3\u6216\u8005\u7981\u7528\u4e86\u600e\u4e48\u529e\uff1f** \u8bf7\u8054\u7cfb\u5ba2\u670d QQ200576786 \u5e2e\u60a8\u5904\u7406\u3002 ** \u4f01\u4e1a\u5e10\u53f7\u548c\u4e2a\u4eba\u5e10\u53f7\u6709\u4f55\u533a\u522b\uff1f** \u4e0d\u8bba\u60a8\u9009\u62e9\u4f01\u4e1a\u8fd8\u662f\u4e2a\u4eba\uff0c\u529f\u80fd\u53ca\u4ea7\u54c1\u7684\u4ef7\u683c\u90fd\u662f\u6ca1\u6709\u533a\u522b\u7684\u3002\u4e2a\u4eba\u8d26\u53f7\u53ef\u4ee5\u5347\u7ea7\u6210\u4f01\u4e1a\u8d26\u53f7\uff0c\u4f01\u4e1a\u8d26\u53f7\u65e0\u6cd5\u4fee\u6539\u6210\u4e2a\u4eba\u8d26\u53f7\uff1b\u4f01\u4e1a\u5e10\u53f7\u7684\u8ba4\u8bc1\u9700\u63d0\u4ea4\u8425\u4e1a\u6267\u7167\u7167\u7247\u6216\u626b\u63cf\u4ef6\u8ba4\u8bc1\uff0c\u4e2a\u4eba\u5e10\u53f7\u7684\u8ba4\u8bc1\u662f\u63d0\u4ea4\u672c\u4eba\u624b\u6301\u8eab\u4efd\u8bc1\u6b63\u53cd\u9762\u7167\u7247\uff0c\u6216\u8005\u63d0\u4ea4\u829d\u9ebb\u4fe1\u7528\u8ba4\u8bc1\uff08\u5206\u6570\u4e0d\u4f4e\u4e8e750\uff09\uff0c\u9009\u62e9\u81ea\u5df1\u5bf9\u5e94\u7533\u8bf7\u7684\u5e10\u53f7\u7c7b\u578b\u586b\u5199\u6b63\u786e\u4fe1\u606f\u63d0\u4ea4\u7533\u8bf7\u5373\u53ef\u3002 ** \u5b9e\u540d\u8ba4\u8bc1\u4e3a\u4ec0\u4e48\u6ca1\u6709\u901a\u8fc7\uff1f ** \u53ef\u4ee5\u5728\u60a8\u5e10\u53f7\u7ba1\u7406\u7684\u5b9e\u540d\u8ba4\u8bc1\u9875\u9762\u6216\u8005\u540e\u53f0\u7684\u7ad9\u5185\u4fe1\u67e5\u770b\u5177\u4f53\u539f\u56e0\u3002 ** \u6211\u521a\u7ed9\u5e10\u53f7\u5145\u503c\u4e86,\u600e\u4e48\u5f00\u53d1\u7968\u5462\uff1f** \u8054\u7cfb\u60a8\u7684\u9500\u552e\u7ecf\u7406\u5e2e\u60a8\u5f00\u53d1\u7968\uff0c\u82e5\u60a8\u4e0d\u77e5\u9053\u9500\u552e\u7ecf\u7406\u7684\u8054\u7cfb\u65b9\u5f0f\uff0c\u53ef\u4ee5\u8054\u7cfb\u5ba2\u670d QQ200576786 \uff0c\u63d0\u4f9b\u60a8\u7684\u5e10\u53f7\u548c\u8054\u7cfb\u65b9\u5f0f\uff0c\u5ba2\u670d\u4f1a\u8054\u7cfb\u60a8\u7684\u9500\u552e\u7ecf\u7406\u7ed9\u60a8\u5f00\u53d1\u7968\u7684\u3002 ** \u6ce8\u518c\u5e10\u53f7\u65f6\uff0c\u624b\u673a\u6536\u4e0d\u5230\u9a8c\u8bc1\u7801\u3002** \u60a8\u5148\u67e5\u770b\u4e0b\u624b\u673a\u662f\u5426\u51fa\u4e8e\u6b63\u5e38\u670d\u52a1\u72b6\u6001\uff0c\u6ca1\u6709\u6b20\u8d39\uff0c\u4e14\u901a\u4fe1\u6b63\u5e38\u3002\u5982\u679c\u624b\u673a\u662f\u5904\u4e8e\u6b63\u5e38\u670d\u52a1\u4e2d\uff0c\u4e14\u6536\u53d1\u5176\u4ed6\u77ed\u4fe1\u90fd\u6b63\u5e38\uff0c\u8bf7\u8054\u7cfb\u5ba2\u670d QQ200576786 \u67e5\u770b\u5177\u4f53\u539f\u56e0\u3002 ** \u6211\u63d0\u4ea4\u4e86\u5b9e\u540d\u8ba4\u8bc1\u600e\u4e48\u8fd8\u6ca1\u5ba1\u6838\uff1f ** \u60a8\u597d\uff0c\u5de5\u4f5c\u4eba\u5458\u4f1a\u5728\u4e00\u4e2a\u5de5\u4f5c\u65e5\u5185\u5ba1\u6838\u5b8c\u6210\uff0c\u82e5\u8d85\u8fc7\u4e00\u4e2a\u5de5\u4f5c\u65e5\uff0c\u8bf7\u8054\u7cfb\u5ba2\u670d QQ200576786 \u5e2e\u60a8\u5904\u7406\u3002 \u89c6\u9891\u6559\u7a0b \u00b6 CDN \u670d\u52a1 \u00b6 \u89c6\u9891\u7c7b\u522b \u89c6\u9891\u540d\u79f0 \u65f6\u957f \u66f4\u65b0\u65f6\u95f4 CDN \u521b\u5efa\u548c\u4f7f\u7528CDN\u5b58\u50a8\u670d\u52a1 14\u520641\u79d2 2017/08/10 CDN \u521b\u5efa\u52a8\u6001CDN\u548c\u8bbe\u7f6e\u7f13\u5b58 6\u520629\u79d2 2017/08/10 CDN \u521b\u5efa\u548c\u4f7f\u7528\u7f29\u7565\u56fe 14\u520650\u79d2 2017/08/29 CDN \u8bbe\u7f6eSSL\u8bc1\u4e66 16\u520645\u79d2 2017/08/10 CDN \u7f13\u5b58\u5237\u65b0\u529f\u80fd 7\u520610\u79d2 2017/08/30 \u63d2\u4ef6 \u8bbe\u7f6e Discuz \u63d2\u4ef6 8\u520629\u79d2 2016/03/18 CDN \u8bbe\u7f6e\u9632\u76d7\u94fe 11\u520614\u79d2 2017/08/30 CDN \u878d\u5408\u4e91\u914d\u7f6e 6\u520657\u79d2 2017/08/10 SDK HTTP REST API\u7684\u4ecb\u7ecd\u548cJAVA SDK\u7684\u4f7f\u7528 10\u520623\u79d2 2016/03/19 SDK CURL \u64cd\u4f5c HTTP 7\u520615\u79d2 2016/03/19 SDK \u97f3\u89c6\u9891\u5904\u7406SDK 6\u520609\u79d2 2016/04/23 CDN \u4e03\u725b\u955c\u50cf\u56de\u6e90\u529f\u80fd\u4f7f\u7528 6\u520619\u79d2 2016/04/23 CDN CORS \u8de8\u57df\u529f\u80fd\u4f7f\u7528 3\u520635\u79d2 2017/08/30 SDK Python SDK\u7684\u4f7f\u7528 17\u520625\u79d2 2016/06/30 FTP \u53c8\u62cd\u4e91\u8d44\u6e90\u7ba1\u7406\u5668\u7684\u4f7f\u7528 2\u520638\u79d2 2016/03/23 CDN \u963f\u91cc\u4e91\u4e91\u76fe\u8bbe\u7f6e 1\u520639\u79d2 2017/04/12 \u65e5\u5fd7 \u65e5\u5fd7\u5206\u6790\u548c\u65e5\u5fd7\u4e0b\u8f7d 7\u52062 2017/04/12 CDN \u53c8\u62cd\u4e91\u7684\u7edf\u8ba1\u529f\u80fd 3\u520635\u79d2 2016/09/12 CDN \u53c8\u62cd\u4e91\u76d1\u63a7\u7cfb\u7edf\u7b80\u4ecb 3\u520605\u79d2 2016/09/12 CDN Rewrite \u89c4\u5219\u7684\u4f7f\u7528 4\u520603\u79d2 2016/09/12 \u8d26\u53f7 \u5b9e\u540d\u8ba4\u8bc1 2\u5206 2016/09/12 CDN HTTP2 \u7b80\u4ecb 2\u520649\u79d2 2017/06/08 \u5de5\u5177 wireshark \u7684\u4f7f\u7528 5\u520658\u79d2 2017/04/21 \u5de5\u5177 tcpudmp \u7684\u4f7f\u7528 8\u520656\u79d2 2016/09/14 \u5de5\u5177 Linux \u4e0b upx \u7684\u4f7f\u7528 6\u520656\u79d2 2016/10/15 \u5de5\u5177 Windows \u4e0b upx \u7684\u4f7f\u7528 10\u520623\u79d2 2017/01/03 \u63d2\u4ef6 ueditor\u7684\u4f7f\u7528 7\u520655\u79d2 2016/10/15 CDN \u5206\u6bb5\u7f13\u5b58 8\u520639\u79d2 2017/04/12 SDK \u4e91\u5904\u7406 - \u89c6\u9891\u8f6c\u7801 9\u520614\u79d2 2017/01/03 SDK \u4e91\u5904\u7406 - \u89c6\u9891\u6c34\u5370 11\u520637\u79d2 2017/05/18 SDK \u4e91\u5904\u7406 - \u97f3\u9891\u8f6c\u7801 3\u520637\u79d2 2017/03/03 SDK \u4e91\u5904\u7406 - \u538b\u7f29\u548c\u89e3\u538b\u7f29 3\u520644\u79d2 2017/05/18 CDN rewrite \u89c4\u5219\u8be6\u89e3 38\u520637\u79d2 2017/05/11 \u63d2\u4ef6 wordpress \u63d2\u4ef6\u4f7f\u7528 1\u520654\u79d2 2017/05/22 CDN \u56fe\u7247\u9274\u9ec4 5\u5206 2017/05/19 CDN API\u4f7f\u7528 15\u520622\u79d2 2017/08/14 CDN \u5220\u9664\u670d\u52a1 3\u520639\u79d2 2017/08/29 \u76f4\u64ad\u670d\u52a1 \u00b6 \u89c6\u9891\u7c7b\u522b \u89c6\u9891\u540d\u79f0 \u65f6\u957f \u66f4\u65b0\u65f6\u95f4 \u76f4\u64ad \u521b\u5efa\u548c\u4f7f\u7528\u53c8\u62cd\u4e91\u81ea\u4e3b\u6e90\u7ad9\u7684\u76f4\u64ad\u670d\u52a1 10\u5206 2016/08/03 \u76f4\u64ad \u521b\u5efa\u548c\u4f7f\u7528\u81ea\u4e3b\u6e90\u76f4\u64ad\u670d\u52a1 4\u520651\u79d2 2016/08/03 \u76f4\u64ad \u76f4\u64ad\u8f6c\u7801\u548c\u5f55\u5236 10\u520623\u79d2 2016/09/28 \u76f4\u64ad \u5b89\u5353\u62c9\u6d41\u64ad\u653e\u5668\u4f7f\u7528\u6307\u5357 3\u520632\u79d2 2016/09/29 \u76f4\u64ad \u76f4\u64ad\u9632\u76d7\u94fe\u7684\u4f7f\u7528 6\u520654\u79d2 2016/10/15 \u76f4\u64ad \u6d41\u7ba1\u63a7\u548c\u6d41\u56de\u8c03 9\u520637\u79d2 2017/04/14 \u76f4\u64ad \u76f4\u64ad\u622a\u56fe\u529f\u80fd 1\u520654\u79d2 2017/05/18 \u6545\u969c\u53cd\u9988 \u00b6 \u89c6\u9891\u7c7b\u522b \u89c6\u9891\u540d\u79f0 \u65f6\u957f \u66f4\u65b0\u65f6\u95f4 \u5de5\u5177 PC \u7aef\u6545\u969c\u53cd\u9988\u89c6\u9891\u6559\u7a0b 10\u5206 2016/10/21 \u5de5\u5177 Android \u6545\u969c\u53cd\u9988\u89c6\u9891\u6559\u7a0b 4\u520651\u79d2 2016/10/21 \u5de5\u5177 iOS \u6545\u969c\u53cd\u9988\u89c6\u9891\u6559\u7a0b 4\u520651\u79d2 2017/01/01 \u5de5\u5177 DNS \u7684\u4fee\u6539 11\u520637\u79d2 2017/04/21","title":"\u5e38\u89c1\u95ee\u9898"},{"location":"faq/#faq","text":"\u670d\u52a1\u56de\u6e90\u5206\u51e0\u79cd\u7c7b\u578b\uff0c\u6709\u54ea\u4e9b\u533a\u522b\uff1f \u670d\u52a1\u56de\u6e90\u603b\u5171\u5206\u4e3a\u4e24\u79cd\uff1a\u53c8\u62cd\u4e91\u5b58\u50a8\u548c\u81ea\u4e3b\u6e90\u7ad9\u3002\u533a\u522b\u5982\u4e0b\u8868\u6240\u793a\uff1a \u529f\u80fd \u53c8\u62cd\u4e91\u5b58\u50a8 \u81ea\u4e3b\u6e90\u7ad9 CDN \u52a0\u901f \u652f\u6301 \u652f\u6301 \u53ef\u4e0a\u4f20\u6587\u4ef6 \u6240\u6709\u6587\u4ef6 \u4e0d\u9700\u8981\u4e0a\u4f20\uff0c\u53c8\u62cd\u4e91\u76f4\u63a5\u4ece\u5ba2\u6237\u6e90\u7ad9\u83b7\u53d6 \u5355\u4e2a\u6587\u4ef6\u4e0a\u4f20\u9650\u5236 FTP \u6700\u5927\u652f\u6301 2G\uff1bAPI \u6700\u5927\u652f\u6301 150G - \u56fe\u7247\u6587\u4ef6\u50cf\u7d20\u9650\u5236 \u65e0\u9650\u5236 \u65e0\u9650\u5236 \u9632\u76d7\u94fe\u529f\u80fd \u652f\u6301 \u652f\u6301 \u7ed1\u5b9a\u72ec\u7acb\u57df\u540d \u652f\u6301(\u9700\u8981\u5907\u6848) \u652f\u6301(\u9700\u8981\u5907\u6848) \u81ea\u5b9a\u4e49\u7248\u672c \u652f\u6301 \u652f\u6301 \u670d\u52a1\u7c7b\u578b\u662f\u5426\u53ef\u4ee5\u66f4\u6539\uff1f \u670d\u52a1\u7c7b\u578b\u4e00\u65e6\u521b\u5efa\uff0c\u5c06\u65e0\u6cd5\u66f4\u6539\u3002 \u4e00\u4e2a\u5e10\u53f7\u6700\u591a\u53ef\u4ee5\u521b\u5efa\u591a\u5c11\u4e2a\u670d\u52a1\uff1f \u4e00\u4e2a\u5e10\u53f7\u6700\u591a\u53ef\u521b\u5efa 200 \u4e2a\u670d\u52a1\u3002 \u4e00\u4e2a\u670d\u52a1\u6700\u591a\u53ef\u4ee5\u7ed1\u5b9a\u591a\u5c11\u4e2a\u57df\u540d\uff1f \u6bcf\u4e2a\u670d\u52a1\u6700\u591a\u7ed1\u5b9a 10 \u4e2a\u57df\u540d\uff0c\u7ed1\u5b9a\u7684\u57df\u540d\u5fc5\u987b\u7ecf\u8fc7\u5907\u6848\uff0c\u4e14\u540c\u4e00\u4e2a\u57df\u540d\u53ea\u80fd\u7ed1\u5728\u4e00\u4e2a\u670d\u52a1\u4e0a\u3002 \u5982\u4f55\u67e5\u770b\u6211\u670d\u52a1\u91cc\u7684\u6587\u4ef6\uff1f \u53ef\u4ee5\u4f7f\u7528 FTP \u67e5\u770b\uff0c\u63a8\u8350\u4f7f\u7528\u5ba2\u6237\u7aef\uff1a FileZilla / \u53c8\u62cd\u4e91\u8d44\u6e90\u7ba1\u7406\u5668 \u3002 \u4e00\u4e2a\u5e10\u53f7\u6700\u591a\u53ef\u4ee5\u521b\u5efa\u591a\u5c11\u4e2a\u64cd\u4f5c\u5458\uff1f \u4e00\u4e2a\u5e10\u53f7\u53ef\u521b\u5efa 50 \u4e2a\u64cd\u4f5c\u5458\uff0c\u4ee5\u65b9\u4fbf\u5206\u914d\u7ed9\u4e0d\u540c\u90e8\u95e8\u6216\u9879\u76ee\u4f7f\u7528\uff0c\u5e76\u4e14\u53ef\u4ee5\u7075\u6d3b\u4ea4\u53c9\u6388\u6743\u3002 \u53c8\u62cd\u4e91\u5b58\u50a8\u662f\u5426\u652f\u6301 ?v=xxx \u6765\u5237\u65b0\u7f13\u5b58\uff1f \u4e0d\u652f\u6301\uff0c\u5bf9\u4e8e ?v=xxx \u53c2\u6570\u662f\u5ffd\u7565\u7684\u3002 \u4f60\u4eec\u652f\u6301\u54ea\u51e0\u79cd\u9632\u76d7\u94fe\uff0c\u6709\u4ec0\u4e48\u533a\u522b\uff1f \u53c8\u62cd\u4e91\u652f\u6301 IP \u7981\u7528\uff0c\u57df\u540d\u9632\u76d7\u94fe\uff0c\u5ba2\u6237\u7aef\u767d\u540d\u5355\uff0cToken \u9632\u76d7\u94fe\uff0c\u5730\u533a\u8bbf\u95ee\u9650\u5236\u5e76\u4e14\u53ef\u4ee5\u81ea\u5b9a\u4e49\u9632\u76d7\u94fe\u63d0\u793a\u56fe\u3002 IP \u7981\u7528 \uff1a \u5982\u679c\u4e0d\u5e0c\u671b\u67d0\u4e2a IP \u6216\u8005\u67d0\u6bb5 IP \u8bbf\u95ee\u7a7a\u95f4\uff0c\u53ef\u4ee5\u4f7f\u7528\u6b64\u529f\u80fd\uff0c\u6700\u591a\u652f\u6301 50 \u4e2a IP \u6216 IP \u6bb5\uff1b \u57df\u540d\u9632\u76d7\u94fe \uff1a \u901a\u8fc7\u8bbe\u7f6e\u57df\u540d\u767d\u540d\u5355\u6216\u9ed1\u540d\u5355\uff0c\u5141\u8bb8\u6216\u7981\u6b62\u67d0\u4e2a\u7f51\u7ad9\u5f15\u7528\u7a7a\u95f4\u6587\u4ef6\uff0c\u6700\u591a\u5404\u652f\u6301 50 \u4e2a\u9ed1\u767d\u540d\u5355\uff1b \u5ba2\u6237\u7aef\u767d\u540d\u5355 \uff1a \u5bf9\u4e8e\u5ba2\u6237\u7aef\u6216\u624b\u673a APP \u7684\u5ba2\u6237\uff0c\u53ef\u4ee5\u901a\u8fc7\u8bbe\u7f6e User Agent \u767d\u540d\u5355\u6765\u9650\u5236\u8bbf\u95ee\uff1b Token \u9632\u76d7\u94fe \uff1a \u9002\u5408\u4e0b\u8f7d\u7c7b\u7f51\u7ad9\u6216\u5e94\u7528\uff0c\u53ef\u4ee5\u8bbe\u7f6e\u7b7e\u540d\u548c\u8fc7\u671f\u65f6\u95f4\u6765\u63a7\u5236\u7a7a\u95f4\u6587\u4ef6\u7684\u8bbf\u95ee\u65f6\u9650\u3002 \u5730\u533a\u8bbf\u95ee\u9650\u5236 : \u9002\u5408\u9488\u5bf9\u5730\u533a\u505a\u51fa\u8bbf\u95ee\u9650\u5236 \u5982\u4f55\u5237\u65b0\u7f13\u5b58\uff1f \u81ea\u4e3b\u6e90\u7ad9\u7f13\u5b58\u5237\u65b0\u6709\u4e24\u79cd\uff1a API \u63a5\u53e3\uff0c\u8c03\u7528\u7f13\u5b58\u5237\u65b0 API \u63a5\u53e3\uff0c0~10 \u5206\u949f\u66f4\u65b0\u5230\u5168\u56fd\u8282\u70b9\uff1b \u5728\u540e\u53f0\u5237\u65b0\uff0c\u652f\u6301\u5b8c\u6574 URL \u5237\u65b0\u3001\u89c4\u5219\u5237\u65b0\u3001\u5168\u7f51\u5237\u65b0\u3002 \u53c8\u62cd\u4e91\u652f\u6301 HTTPS \u8bbf\u95ee\u5417\uff1f \u9ed8\u8ba4\u57df\u540d\u9ed8\u8ba4\u652f\u6301\uff0c\u7ed1\u5b9a\u57df\u540d\u9700\u8981\u4e0a\u4f20\u81ea\u5df1\u7684 SSL \u8bc1\u4e66\u5230\u53c8\u62cd\u4e91\u3002 ** \u5982\u4f55\u5220\u9664\u670d\u52a1\uff1f** \u5220\u9664\u670d\u52a1\u9700\u8981\u5220\u9664\u4e0a\u4f20\u5230\u670d\u52a1\u7684\u6240\u6709\u6587\u4ef6\uff0c\u7136\u540e\u5728\u540e\u53f0\u670d\u52a1\uff0d\u9ad8\u7ea7\u529f\u80fd\uff0d\u5220\u9664 ** \u670d\u52a1\u60f3\u6682\u65f6\u505c\u7528\u4e00\u6bb5\u65f6\u95f4\u600e\u4e48\u529e\uff1f ** \u53ef\u4ee5\u5148\u6682\u65f6\u5173\u95ed\u670d\u52a1\u7684\u5916\u94fe\u7981\u6b62\u8bbf\u95ee","title":"\u6982\u5ff5\u6027 FAQ"},{"location":"faq/#faq_1","text":"\u4e3a\u4ec0\u4e48\u6709\u4e9b\u5730\u533a\u8bbf\u95ee\u53c8\u62cd\u4e91\u5b58\u50a8\u7684\u8d44\u6e90\u65e0\u6cd5\u6253\u5f00\uff1f\u6216\u8005ping \u5f97\u5230\u7684 IP \u4e0d\u662f\u53c8\u62cd\u4e91\u7684\uff1f \u8bf7\u68c0\u67e5\u672c\u5730 DNS \u662f\u5426\u662f\u516c\u5171\u7684 DNS \uff0c\u7531\u4e8e\u672c\u5730\u8fd0\u8425\u5546\u5206\u914d\u7684 DNS \u5b58\u5728\u6570\u636e\u5e93\u66f4\u65b0\u7f13\u6162\u4ee5\u53ca\u53ef\u80fd\u5bfc\u81f4\u88ab\u6076\u610f\u52ab\u6301\u7b49\u9690\u60a3\uff0c\u5efa\u8bae\u66f4\u6362\u4e3a\u516c\u5171\u7684 DNS \u5730\u5740\uff0c\u63d0\u5347\u8bbf\u95ee\u901f\u5ea6\u4ee5\u53ca\u7a33\u5b9a\u6027\uff0c\u5e38\u89c1\u7684\u516c\u5171 DNS \u5730\u5740\uff1a [\u56fd\u5185\u63a8\u8350] 114.114.114.114 223.5.5.5 223.6.6.6 [\u6d77\u5916\u63a8\u8350] 8.8.8.8 \u6211\u4f7f\u7528\u53c8\u62cd\u4e91\u7684\u9ed8\u8ba4\u57df\u540d\u8bbf\u95ee\u8d44\u6e90\uff0c\u7ed3\u679c\u5728\u817e\u8baf QQ \u6216 chrome \u7b49\u6d4f\u89c8\u5668\u8bbf\u95ee\u63d0\u793a\u8d44\u6e90\u5b58\u5728\u5b89\u5168\u9690\u60a3\u662f\u4ec0\u4e48\u539f\u56e0\uff1f \u6211\u4eec\u5f3a\u70c8\u5efa\u8bae\u5ba2\u6237\u4f7f\u7528\u5df2\u5907\u6848\u7684\u81ea\u5b9a\u4e49\u57df\u540d\u4f5c\u4e3a\u8bbf\u95ee\u5b58\u50a8\u8d44\u6e90\u7684\u57df\u540d\uff0c\u9ed8\u8ba4\u57df\u540d\u4e0d\u5efa\u8bae\u4f5c\u4e3a\u957f\u671f\u7684\u8d44\u6e90\u8bbf\u95ee\u57df\u540d\u4f7f\u7528\u3002 \u4f7f\u7528 API \u4e0a\u4f20\uff0c\u63d0\u793a\uff1a400 data too long for ext-param\uff1f \u989d\u5916\u53c2\u6570\u5185\u5bb9\u8fc7\u957f\u3002 \u4f7f\u7528 API \u4e0a\u4f20\uff0c\u63d0\u793a\uff1a401 signature error\uff1f \u7b7e\u540d\u9519\u8bef\u3002 \u53ef\u80fd\u60c5\u51b5\uff1a \u7b7e\u540d\u683c\u5f0f\u9519\u8bef\uff1b \u670d\u52a1\u5668\u65f6\u95f4\u9519\u8bef\uff0c\u8bf7\u68c0\u67e5\u670d\u52a1\u5668\u7684\u65f6\u95f4\u662f\u5426\u4e0e\u4e16\u754c\u65f6\u95f4\u6709\u8f83\u5927\u504f\u5dee\u3002 \u9012\u4ea4\u5230\u8868\u5355 API \u63a5\u53e3\u7684 policy \u4fe1\u606f\u4e2d\u7f3a\u5c11\u7a7a\u95f4\u540d\uff1b \u9012\u4ea4\u5230\u8868\u5355 API \u63a5\u53e3\u7684 policy \u4fe1\u606f\u4e2d\u7f3a\u5c11 save-key \u5b57\u6bb5\uff1b \u9012\u4ea4\u5230\u8868\u5355 API \u63a5\u53e3\u7684 policy \u4fe1\u606f\u4e2d\u7f3a\u5c11 expiration \u5b57\u6bb5\uff1b \u8868\u5355\u7b7e\u540d\u5bc6\u5319\u9519\u8bef\uff08\u8bf7\u5230\u7a7a\u95f4\u7ba1\u7406\u540e\u53f0\u83b7\u53d6\u8868\u5355 API \u7b7e\u540d\u5bc6\u5319\uff09\u3002 \u4f7f\u7528 API \u4e0a\u4f20\uff0c\u63d0\u793a\uff1a401 need date header\uff1f \u53d1\u8d77\u7684\u8bf7\u6c42\u7f3a\u5c11 Date \u5934\u4fe1\u606f\u3002 \u53ef\u80fd\u60c5\u51b5\uff1a \u53d1\u8d77\u7684\u63a5\u53e3\u8bf7\u6c42 HEADER \u4e2d\u786e\u5c11 Date \u53c2\u6570\uff1b \u6ce8\u610f\uff1a \u90e8\u5206 HTTP Client \u5f00\u53d1\u5305\u5728\u53d1\u8d77 GET \u8bf7\u6c42\u65f6\u4e0d\u81ea\u52a8\u52a0\u5165 Date \u53c2\u6570\u3002 \u4f7f\u7528 API \u4e0a\u4f20\uff0c\u63d0\u793a\uff1a401 date offset error\uff1f \u53d1\u8d77\u8bf7\u6c42\u7684\u670d\u52a1\u5668\u65f6\u95f4\u9519\u8bef\u3002 \u53ef\u80fd\u60c5\u51b5\uff1a \u670d\u52a1\u5668\u65f6\u95f4\u9519\u8bef\uff0c\u8bf7\u68c0\u67e5\u670d\u52a1\u5668\u7684\u65f6\u95f4\u662f\u5426\u4e0e\u4e16\u754c\u65f6\u95f4\u6709\u8f83\u5927\u504f\u5dee\u3002 \u4f7f\u7528 API \u4e0a\u4f20\uff0c\u63d0\u793a\uff1a401 user blocked\uff1f \u64cd\u4f5c\u5458\u88ab\u7981\u7528\u3002 \u4f7f\u7528 API \u4e0a\u4f20\uff0c\u63d0\u793a\uff1a403 not an image\uff1f \u4e0d\u662f\u6b63\u786e\u7684\u56fe\u7247\u5185\u5bb9\u3002 \u53ef\u80fd\u60c5\u51b5\uff1a \u4e0a\u4f20\u975e\u56fe\u7247\u6587\u4ef6\uff0c\u4f46\u662f\u4f7f\u7528\u4e86\u56fe\u7247\u5904\u7406\u53c2\u6570 ** \u4f7f\u7528 API \u4e0a\u4f20\uff0c\u63d0\u793a \uff1a401 user need permission ** \u64cd\u4f5c\u5458\u9700\u8981\u6388\u6743 \u53ef\u80fd\u60c5\u51b5\uff1a \u64cd\u4f5c\u5458\u672a\u6388\u6743\u76f8\u5e94\u64cd\u4f5c\u7684\u6743\u9650 ** \u4e0a\u4f20\u6587\u4ef6\u7684\u65f6\u5019\u62a5 400 40011xxx invalid x-gmkerl-xxx ** \u65e0\u6548\u53c2\u6570 \u53ef\u80fd\u60c5\u51b5\uff1a \u53c2\u6570\u4f7f\u7528\u9519\u8bef ** \u5220\u9664\u6587\u4ef6\u7684\u65f6\u5019 403 40300011 has no permission to delete ** \u6ca1\u6709\u6743\u9650\u5220\u9664 \u53ef\u80fd\u60c5\u51b5\uff1a \u64cd\u4f5c\u5458\u6ca1\u6709\u6388\u6743\u5220\u9664\u6743\u9650 ** \u5237\u65b0\u7f13\u5b58\u7684\u65f6\u5019\u6211\u7684\u57df\u540d\u914d\u7f6e\u6709 HTTP \u548c HTTPS \u8bf7\u95ee\u5237\u65b0\u7f13\u5b58\u7684\u65f6\u5019\u662f\u5426\u53ea\u9700\u8981\u5237\u65b0\u4e00\u4e2a\u5c31\u53ef\u4ee5\u4e86\uff1f ** \u8fd9\u79cd\u60c5\u51b5\u770b\u662f\u5426\u6709\u5f00\u542f\u534f\u8bae\u8ddf\u968f\uff0c\u5982\u679c\u5f00\u542f\u4e86\uff0c\u5c31\u9700\u8981\u5355\u72ec\u7528 https \u548c http \u5237\uff0c\u5404\u5237\u5404\u7684\uff0c\u5982\u679c\u6ca1\u5f00\u542f\uff0c\u4e24\u4e2a\u5237\u6548\u679c\u90fd\u4e00\u6837\u3002\u5982\u679c\u5224\u65ad\u662f\u5426\u6709\u5f00\u542f\u534f\u8bae\u8ddf\u968f\uff0c\u5982\u679c\u4f60\u5728\u56de\u6e90 Host \u4e2d\u586b\u5199\u4e86\u56de\u6e90\u57df\u540d \u5c31\u4e0d\u9700\u8981\u5237\u65b0\u4e24\u6b21\uff0c\u9ed8\u8ba4\u662f\u9700\u8981\u7684\u3002 \u4f7f\u7528\u963f\u91cc\u4e91ECS\u4f5c\u4e3a\u6e90\u7ad9\uff0c\u8fdb\u884c\u81ea\u4e3b\u6e90\u7ad9\u52a0\u901f\u540e\u54cd\u5e94\u5934\u4e00\u76f4\u63d0\u793a C\uff0ferror 503 contention reset peer\uff1f \u6e90\u7ad9\u8d85\u65f6\u5bfc\u81f4\u7684\u3002 \u53ef\u80fd\u60c5\u51b5\uff1a \u963f\u91cc\u4e91\u4e91\u76fe\u9632\u62a4\u62e6\u622a\u4e86\u6211\u4eec\u7684\u56de\u6e90 IP \uff0c\u5efa\u8bae\u5173\u95ed\u4e91\u76fe\u6216\u8005\u6dfb\u52a0\u4e91\u76fe\u767d\u540d\u5355 `0.0.0.0 \u3002 \u4f7f\u7528 API \u4e0a\u4f20\uff0c\u63d0\u793a\uff1a403 bucket blocked\uff1f \u7a7a\u95f4\u88ab\u7981\u7528\u6216\u8005\u6ca1\u6709\u8fdb\u884c\u5b9e\u540d\u8ba4\u8bc1\u3002 \u4f7f\u7528 API \u4e0a\u4f20\uff0c\u63d0\u793a\uff1a403 authorization has expired\uff1f \u4e0d\u63a5\u53d7\u8bf7\u6c42\uff0c\u6388\u6743\u5df2\u8fc7\u671f\u3002 \u53ef\u80fd\u60c5\u51b5\uff1a \u5728 policy \u4fe1\u606f\u4e2d\u8bbe\u7f6e expiration \u6388\u6743\u8fc7\u671f\u65f6\u95f4\u8fc7\u77ed\uff1b \u670d\u52a1\u5668\u65f6\u95f4\u4e0e\u4e16\u754c\u6807\u51c6\u65f6\u95f4\u504f\u5dee\u8fc7\u5927\u3002 \u4f7f\u7528 API \u4e0a\u4f20\uff0c\u63d0\u793a\uff1a403 form api disabled\uff1f \u4e0d\u63a5\u53d7\u8bf7\u6c42\uff0c\u7a7a\u95f4\u7684\u8868\u5355 API \u4e0a\u4f20\u529f\u80fd\u672a\u5f00\u542f\u3002 \u4f7f\u7528 API \u4e0a\u4f20\uff0c\u63d0\u793a\uff1a403 file too small\uff1f \u4e0d\u63a5\u53d7\u8bf7\u6c42\uff0c\u4e0a\u4f20\u7684\u6587\u4ef6\u5bb9\u91cf\u8fc7\u5c0f\u3002 \u53ef\u80fd\u60c5\u51b5\uff1a \u5728 policy \u4fe1\u606f\u4e2d\u8bbe\u7f6e\u7684 content-length-range \u53c2\u6570\u662f\u5426\u8fc7\u5927\u3002 \u4f7f\u7528 API \u4e0a\u4f20\uff0c\u63d0\u793a\uff1a403 file type error\uff1f \u4e0d\u63a5\u53d7\u8bf7\u6c42\uff0c\u4e0a\u4f20\u7684\u6587\u4ef6\u7c7b\u578b\u4e0d\u88ab\u5141\u8bb8\u3002 \u53ef\u80fd\u60c5\u51b5\uff1a \u5728 policy \u4fe1\u606f\u4e2d\u8bbe\u7f6e\u7684 allow-file-type \u4e0d\u5305\u542b\u5f53\u524d\u4e0a\u4f20\u7684\u6587\u4ef6\u7c7b\u578b\u3002 \u4f7f\u7528 API \u4e0a\u4f20\uff0c\u63d0\u793a\uff1a403 content md5 not match\uff1f \u4e0d\u63a5\u53d7\u8bf7\u6c42\uff0c\u4e0a\u4f20\u7684\u6587\u4ef6 md5 \u6821\u9a8c\u9519\u8bef\u3002 \u53ef\u80fd\u60c5\u51b5\uff1a \u5728 policy \u4fe1\u606f\u4e2d\u8bbe\u7f6e\u7684 content-md5 \u6821\u9a8c\u503c\u4e0e\u8868\u5355\u63a5\u6536\u5230\u7684\u6587\u4ef6 md5 \u4e0d\u4e00\u81f4\u3002 \u4f7f\u7528 API \u4e0a\u4f20\uff0c\u63d0\u793a\uff1a403 image width too small or too big\uff1f \u4e0d\u63a5\u53d7\u8bf7\u6c42\uff0c\u4e0a\u4f20\u7684\u56fe\u7247\u6587\u4ef6\u5bbd\u5ea6\u8fc7\u5c0f\u6216\u8fc7\u5927\u3002 \u53ef\u80fd\u60c5\u51b5\uff1a \u5728 policy \u4fe1\u606f\u4e2d\u8bbe\u7f6e\u7684 image-width-range \u53c2\u6570\u662f\u5426\u8fc7\u5927\u6216\u8fc7\u5c0f\u3002 \u4f7f\u7528 API \u4e0a\u4f20\uff0c\u63d0\u793a\uff1a403 image height too small or too big\uff1f \u4e0d\u63a5\u53d7\u8bf7\u6c42\uff0c\u4e0a\u4f20\u7684\u56fe\u7247\u6587\u4ef6\u9ad8\u5ea6\u8fc7\u5c0f\u6216\u8fc7\u5927\u3002 \u53ef\u80fd\u60c5\u51b5\uff1a \u5728 policy \u4fe1\u606f\u4e2d\u8bbe\u7f6e\u7684 image-height-range \u53c2\u6570\u662f\u5426\u8fc7\u5927\u6216\u8fc7\u5c0f\u3002 \u4f7f\u7528 API\uff0c\u63d0\u793a\uff1a404 Not Found\uff1f \u8bf7\u6c42\u7684\u6587\u4ef6\u4e0d\u5b58\u5728\u3002 \u53ef\u80fd\u60c5\u51b5\uff1a \u5728\u4e0a\u4f20\u6587\u4ef6\u8fc7\u7a0b\u4e2d\u9047\u5230 404 \u9519\u8bef\uff0c\u8bf7\u68c0\u67e5\u4e0a\u4f20\u6587\u4ef6\u8def\u5f84\u7684\u76ee\u5f55\u8def\u5f84\u662f\u5426\u5b58\u5728\uff1b \u5728\u4e0b\u8f7d\u6587\u4ef6\u8fc7\u7a0b\u4e2d\u9047\u5230 404 \u9519\u8bef\uff0c\u8bf7\u68c0\u67e5\u6587\u4ef6\u540d\u548c\u8def\u5f84\u662f\u5426\u5b58\u5728\u3002 \u4f7f\u7528 API\uff0c\u63d0\u793a\uff1a406 dir not acceptable\uff1f \u4e0d\u63a5\u53d7\u8bf7\u6c42\u3002 \u53ef\u80fd\u60c5\u51b5\uff1a \u5728\u4e0a\u4f20\u6587\u4ef6\u8fc7\u7a0b\u4e2d\u9047\u5230 406 \u9519\u8bef\uff0c\u8bf7\u68c0\u67e5\u4e0a\u4f20\u6587\u4ef6\u540d\u662f\u5426\u5df2\u7ecf\u88ab\u7528\u4e8e\u5b58\u5728\u7684\u76ee\u5f55\uff1b \u5728\u4e0a\u4f20\u6587\u4ef6\u8fc7\u7a0b\u4e2d\u9047\u5230 406 \u9519\u8bef\uff0c\u5982\u6709\u8bbe\u7f6e Content-MD5 \u6821\u9a8c\uff0c\u53ef\u80fd\u662f\u53c8\u62cd\u4e91\u670d\u52a1\u5668\u7aef\u6536\u5230\u7684\u6587\u4ef6\u5185\u5bb9 MD5 \u4e0d\u4e00\u81f4\u3002\u8bf7\u68c0\u67e5 API \u63a5\u53e3\u8bf7\u6c42\u65f6\u8bbe\u7f6e\u7684 Content-MD5 \u503c\uff1b \u5728\u521b\u5efa\u76ee\u5f55\u8fc7\u7a0b\u4e2d\u9047\u5230 406 \u9519\u8bef\uff0c\u8bf7\u68c0\u67e5\u76ee\u5f55\u540d\u662f\u5426\u5df2\u7ecf\u88ab\u7528\u4e8e\u5b58\u5728\u7684\u6587\u4ef6\u3002 \u4f7f\u7528 API \u4e0a\u4f20\uff0c\u63d0\u793a\uff1a503 System Error\uff1f \u7cfb\u7edf\u9519\u8bef\u3002 \u53ef\u80fd\u60c5\u51b5\uff1a \u53c8\u62cd\u4e91\u7cfb\u7edf\u6b63\u5728\u7ef4\u62a4\u4e2d\uff1b \u53c8\u62cd\u4e91\u7cfb\u7edf\u51fa\u73b0\u6545\u969c\uff0c\u8bf7\u4e0e\u5ba2\u670d\u8054\u7cfb\u3002","title":"\u6280\u672f\u6027 FAQ"},{"location":"faq/#ftp","text":"\u4f7f\u7528 FTP \u767b\u5f55\u63d0\u793a\uff1a\u65e0\u6cd5\u89e3\u6790 v0.ftp.upyun.com \u7684\u5730\u5740\uff1f \u53ef\u80fd\u60c5\u51b5\uff1a \u672c\u5730 DNS \u6709\u95ee\u9898\uff0c\u53ef\u5c1d\u8bd5\u66f4\u6362\u516c\u5171 DNS\u3002 \u4f7f\u7528 FTP \u767b\u5f55\u63d0\u793a\uff1a530 Authentication failed. Disconnecting. \u65e0\u6cd5\u8fde\u63a5\u5230\u670d\u52a1\u5668\uff1f \u53ef\u80fd\u60c5\u51b5\uff1a \u7528\u6237\u540d\uff08\u64cd\u4f5c\u5458/\u7a7a\u95f4\u540d\uff0c\u659c\u6760\u4e3a\u5fc5\u987b\uff09\u9519\u8bef\uff1b \u5bc6\u7801\uff08\u64cd\u4f5c\u5458\u5bc6\u7801\uff09\u9519\u8bef\uff1b \u64cd\u4f5c\u5458\u6ca1\u6709\u6388\u6743\u7ed9\u7a7a\u95f4\u3002 \u4f7f\u7528 FTP \u4e0a\u4f20\u8f83\u5927\u6587\u4ef6\uff1a\u8fdb\u5ea6\u662f 100% \u786e\u6ca1\u6709\u663e\u793a\u4e0a\u4f20\u5b8c\u6bd5\uff1f \u8bf7\u8010\u5fc3\u7b49\u5f85 15 \u79d2\u5de6\u53f3\uff0c\u6b64\u65f6\u7cfb\u7edf\u6b63\u5728\u628a\u63a5\u6536\u5230\u7684\u6587\u4ef6\u5199\u5165\u5230\u76f8\u5e94\u7684\u5b58\u50a8\u670d\u52a1\u4e2d\uff0c\u6587\u4ef6\u5199\u5165\u5b8c\u6bd5\u540e\uff0c\u624d\u4f1a\u663e\u793a\u4e0a\u4f20\u5b8c\u6210\u3002 FTP \u770b\u5230\u7684\u65f6\u95f4\u4e0e\u5f53\u524d\u65f6\u95f4\uff08\u5317\u4eac\u65f6\u95f4\uff09\u4e0d\u4e00\u81f4\uff1f \u53c8\u62cd\u4e91\u670d\u52a1\u5668\u91c7\u7528 GMT \u65f6\u95f4\uff0c\u4e3a UTC+0 \u533a\uff0c\u548c\u5317\u4eac\u65f6\u95f4\u76f8\u5dee 8 \u4e2a\u5c0f\u65f6\u3002 FTP \u770b\u5230\u4e0a\u4f20\u7684\u4e2d\u6587\u6587\u4ef6\u540d\u4e3a\u4e71\u7801\uff1f \u53c8\u62cd\u4e91\u7684 FTP \u7f16\u7801\u4e3a UTF-8\uff0c\u8bf7\u66f4\u6539 FTP \u7f16\u7801\u8bbe\u7f6e\u4e3a UTF-8\u3002 FTP \u4e2d\u53ef\u4ee5\u770b\u5230\u56fe\u7247\uff0c\u4f46\u5916\u94fe\u8bbf\u95ee 404\uff1f \u53ef\u80fd\u60c5\u51b5\u6709\uff1a \u4f7f\u7528\u4e86\u539f\u56fe\u4fdd\u62a4\u529f\u80fd\uff0c\u9700\u8981\u5e26\u5bc6\u94a5\u8bbf\u95ee\uff1b \u4e0a\u4f20\u5b8c\u6210\u524d\u6709\u8fc7\u8bbf\u95ee\uff0c\u4f1a\u6709 5 \u5206\u949f 404 \u7f13\u5b58\uff0c\u9700\u8981\u5237\u65b0\u7f13\u5b58\u6216\u7b49\u5f85\u7f13\u5b58\u8fc7\u671f\u540e\u66f4\u65b0\uff1b URL \u4e2d\u542b\u6709\u548c\u540e\u53f0\u95f4\u9694\u7b26\u76f8\u540c\u7684\u5b57\u7b26\u3002 \u4e3a\u4ec0\u4e48 FTP \u4e0d\u80fd\u7ed9\u76ee\u5f55\u91cd\u547d\u540d\uff1f \u652f\u6301\u7a7a\u76ee\u5f55\u53ca\u6587\u4ef6\u91cd\u547d\u540d\uff0c\u6682\u4e0d\u652f\u6301\u975e\u7a7a\u76ee\u5f55\u91cd\u547d\u540d\u3002 FTP \u5982\u4f55\u79fb\u52a8\u53ca\u590d\u5236\u6587\u4ef6\u53ca\u76ee\u5f55\uff1f \u652f\u6301\u7a7a\u76ee\u5f55\u53ca\u6587\u4ef6\u79fb\u52a8\uff0c\u6682\u4e0d\u652f\u6301\u975e\u76ee\u5f55\u79fb\u52a8\uff0c\u6682\u4e0d\u652f\u6301\u76ee\u5f55\u3001\u6587\u4ef6\u590d\u5236\u3002 \u4e3a\u4ec0\u4e48 FTP \u4e0a\u4f20\u4f1a\u5c11\u51e0\u4e2a\u5b57\u8282\u4e0d\u5b8c\u6574\uff1f \u7531\u4e8e FTP \u7684\u7279\u6027\uff0c\u4e0d\u68c0\u67e5\u6570\u636e\u5b8c\u6574\u6027\uff0c\u5982\u7f51\u7edc\u6ce2\u52a8\u5bfc\u81f4\u4e00\u90e8\u5206\u5b57\u8282\u4e22\u5931\u4e5f\u662f\u53ef\u80fd\u7684\uff0c\u53ef\u91cd\u4f20\u6216\u91c7\u7528 API \u65b9\u5f0f\u4e0a\u4f20\u3002 FTP \u63d0\u793a\uff1a425 Rejected Data Connection From Foreign Address \u5e76\u8bfb\u53d6\u76ee\u5f55\u5931\u8d25\uff1f \u53ef\u80fd\u60c5\u51b5\uff1a \u8fd0\u8425\u5546\u63d0\u4f9b\u7684 IP \u53d1\u751f\u4e86\u53d8\u5316\uff0cFTP \u63a2\u6d4b\u5230\u524d\u540e\u4e0d\u4e00\u81f4\uff0c\u51fa\u4e8e\u5b89\u5168\u8003\u8651\uff0c\u65ad\u6389\u4e86\u8fde\u63a5\uff0c\u8fd9\u4e2a\u662f FTP \u534f\u8bae\u51b3\u5b9a\u7684\u3002\u5982\u679c\u65e0\u6cd5\u6539\u53d8\u8fd9\u4e2a IP \u5730\u5740\u53d8\u52a8\u7684\u60c5\u51b5, \u53ef\u4ee5\u5c1d\u8bd5\u4f7f\u7528\u4f7f\u7528\u4ee3\u7406\u6765\u907f\u514d\u8fd9\u79cd\u60c5\u51b5\u53d1\u751f\u3002","title":"FTP"},{"location":"faq/#_1","text":"\u7ec7\u68a6 CMS \u662f\u5426\u53ef\u4ee5\u4f7f\u7528\u53c8\u62cd\u4e91\uff0c\u6709\u6ca1\u6709\u63d2\u4ef6\uff1f \u6682\u65e0\u7ec7\u68a6 CMS \u7684\u63d2\u4ef6\uff1b\u7406\u8bba\u4e0a\u652f\u6301 FTP \u534f\u8bae\u7684 CMS \u90fd\u662f\u53ef\u4ee5\u4f7f\u7528\u53c8\u62cd\u4e91\u5b58\u50a8\uff0c\u4f46\u7ec7\u68a6 CMS \u672c\u8eab\u5c06\u8fdc\u7a0b\u9644\u4ef6\u5f53\u505a\u5907\u4efd\u5904\u7406\uff0c\u9759\u6001\u6587\u4ef6\u7684\u5f15\u7528\u662f\u4e0d\u5f15\u7528\u8fdc\u7a0b\u9644\u4ef6\u7684\uff1b\u6240\u4ee5\u7ec7\u68a6 CMS \u53ef\u4ee5\u4f7f\u7528\u53c8\u62cd\u4e91\u5b58\u50a8\uff0c\u4f46\u53ea\u80fd\u662f\u628a\u53c8\u62cd\u4e91\u5b58\u50a8\u5f53\u5907\u4efd\u3002 Discuz \u662f\u5426\u53ef\u4ee5\u672c\u5730\u4fdd\u7559\u9644\u4ef6\uff1f \u5982\u679c\u4f60\u4f7f\u7528\u63d2\u4ef6\uff0c\u63d2\u4ef6\u6700\u540e\u662f\u6709\u9009\u9879\u8bbe\u7f6e\u662f\u5426\u5f00\u542f\u672c\u5730\u5907\u4efd\u513f\u529f\u80fd\u7684\uff1b\u5982\u679c\u4f60\u4f7f\u7528\u8fdc\u7a0b\u9644\u4ef6\u529f\u80fd\uff0c\u672c\u5730\u662f\u4e0d\u4fdd\u5b58\u7684\u3002 \u4e3a\u4ec0\u4e48 Discuz \u8fdc\u7a0b\u9644\u4ef6\u7684\u6d4b\u8bd5 FTP \u6309\u94ae\u63d0\u793a\u5220\u9664\u5931\u8d25\uff0c\u6ca1\u6709\u6743\u9650\u7684\u63d0\u793a\uff1f \u8be5\u529f\u80fd\u4e0e\u53c8\u62cd\u4e91\u4e0d\u517c\u5bb9\uff0c\u786e\u8ba4\u586b\u5199\u914d\u7f6e\u4fe1\u606f\u65e0\u8bef\u540e\uff0c\u53ef\u4ee5\u76f4\u63a5\u4fdd\u5b58\u8bbe\u7f6e\uff0c\u53d1\u5e16\u6d4b\u8bd5\u3002 \u4e3a\u4ec0\u4e48\u7528 FTP \u4e0a\u4f20\u7684\u6587\u4ef6\uff0cWordPress \u7684\u5a92\u4f53\u5e93\u770b\u4e0d\u5230\uff1f \u56e0\u4e3a\u5a92\u4f53\u5e93\u53ea\u63a7\u5236\u7531\u81ea\u8eab\u4e0a\u4f20\u7684\u6587\u4ef6\uff0c\u5e76\u6ca1\u6709\u83b7\u53d6\u8fdc\u7a0b\u76ee\u5f55\u7684\u529f\u80fd\uff0c\u6240\u4ee5 WordPress \u7684\u5a92\u4f53\u5e93\u770b\u4e0d\u5230 FTP \u4e0a\u4f20\u7684\u6587\u4ef6 \u600e\u4e48\u5c06 Wordpress \u7684\u6570\u636e\u8fc1\u79fb\u5230\u53c8\u62cd\u4e91\uff1f \u5c06\u7f51\u7ad9\u6839\u76ee\u5f55\u4e0b /wp-content/uploads \u4e0b\u7684\u6570\u636e\u4e0a\u4f20\u5230\u53c8\u62cd\u4e91\uff0c\u5b89\u88c5\u53c8\u62cd\u4e91 Wordpress \u7684\u63d2\u4ef6\uff08\u5b89\u88c5\u8bf7\u53c2\u8003\u5b89\u88c5\u624b\u518c\uff09\uff0c\u6b63\u786e\u586b\u5199\u8bbe\u7f6e\uff0c\u4fdd\u5b58\u914d\u7f6e\uff0c\u66f4\u65b0\u6570\u636e\u5e93\u3002 \u4e3a\u4ec0\u4e48\u5b89\u88c5 Wordpress \u540e\uff0c\u4e0a\u4f20\u4e00\u4e2a\u6587\u4ef6\uff0c\u53c8\u62cd\u4e91\u5b58\u50a8\u7a7a\u95f4\u4f1a\u591a\u51e0\u4e2a\uff1f \u8fd9\u662f\u7531\u4e8e Wordpress \u7684\u5b58\u50a8\u65b9\u5f0f\u662f\u4e00\u5f20\u539f\u56fe\u76f4\u63a5\u5206\u5272\u6210\u591a\u5f20\u7f29\u7565\u5b58\u50a8\uff0c\u4e0a\u4f20\u9644\u4ef6\u65f6\u662f\u5c06\u539f\u56fe\u4ee5\u53ca\u7f29\u7565\u56fe\u4e00\u5e76\u4e0a\u4f20\u7684\u3002 PHPWind \u5b89\u88c5\u53c8\u62cd\u4e91\u63d2\u4ef6\uff0c\u5934\u50cf\u8fd8\u662f\u4fdd\u5b58\u672c\u5730\uff1f PHPWind \u5934\u50cf\u5b58\u50a8\u8fd8\u9700\u8981\u53e6\u5916\u5b89\u88c5\u63d2\u4ef6\u8bbe\u7f6e\uff1b\u5177\u4f53\u53c2\u8003\u5b89\u88c5\u624b\u518c\u7b2c\u56db\u9879\uff0c\u5934\u50cf\u5b58\u50a8\u65b9\u5f0f\u8bbe\u7f6e\u3002 \u4e3a\u4ec0\u4e48 PHPWind \u5b89\u88c5\u63d2\u4ef6\u540e\uff0c\u4e0a\u4f20\u6587\u4ef6\u540e\uff0c\u6587\u4ef6\u5916\u94fe\u8fd8\u662f\u672c\u5730\u5730\u5740\uff1f \u68c0\u67e5\u914d\u7f6e\u4fe1\u606f\u662f\u5426\u6b63\u786e\uff0c\u6e05\u7406 PHPWind \u7f13\u5b58\u3002 \u600e\u4e48\u901a\u8fc7\u65e5\u5fd7\u770b\u52a8\u6001\u8bf7\u6c42\u8fd8\u662f\u9759\u6001\u8bf7\u6c42 \u540e\u53f0\u4e0b\u8f7d\u65e5\u5fd7\u540e\uff0c\u6253\u5f00\u65e5\u5fd7\u67e5\u770b Static \u5b57\u6bb5\u5c31\u662f\u9759\u6001\uff0c\u53cd\u4e4b Dynamic \u5c31\u662f\u52a8\u6001\u7684\u3002 \u4e3a\u4ec0\u4e48\u4e0b\u8f7d\u53c8\u62cd\u4e91\u5b98\u65b9\u7684 UEditor \u7f16\u8f91\u5668\uff0c\u914d\u7f6e\u4ee5\u540e\uff0c\u4e0a\u4f20\u4e0d\u4e86\uff1f \u68c0\u67e5 UEditor \u7684\u6743\u9650\u95ee\u9898\uff0cUEditor \u4e0b\u9644\u4ef6\u76ee\u5f55 uploads \u81f3\u5c11\u8981\u6709\u5199\u7684\u6743\u9650\u3002","title":"\u63d2\u4ef6"},{"location":"faq/#_2","text":"\u56fe\u7247\u8bbf\u95ee\u663e\u793a\uff1a403 Forbidden\uff1f \u5f00\u542f\u4e86\u9632\u76d7\u94fe\u529f\u80fd\u3002 \u53ef\u80fd\u60c5\u51b5\uff1a \u4f7f\u7528\u4e86 Token \u9632\u76d7\u94fe\uff0c\u8bbf\u95ee\u65f6\u6ca1\u6709\u52a0\u53c2\u6570\uff1a_upt\uff1b \u4f7f\u7528\u4e86 IP \u7981\u7528\u529f\u80fd\uff0cIP \u88ab\u7981\u4e86\uff1b \u4f7f\u7528\u4e86\u57df\u540d\u9632\u76d7\u94fe\u529f\u80fd\uff0c\u4e0d\u5728\u5141\u8bb8\u7684\u57df\u540d\u8303\u56f4\u5185\uff1b \u4f7f\u7528\u4e86\u5ba2\u6237\u7aef\u767d\u540d\u5355\u529f\u80fd\uff0c\u4e0d\u5728\u767d\u540d\u5355\u8303\u56f4\u5185\u3002 \u56fe\u7247\u5728\u672c\u5730\u770b\u7740\u662f\u6b63\u7684\uff0c\u4f20\u5230\u4e86\u53c8\u62cd\u4e91\uff0c\u67d0\u4e9b\u6d4f\u89c8\u5668\u8bbf\u95ee\u662f\u5012\u7684\uff1f \u56fe\u7247\u672c\u8eab\u5e76\u4e0d\u662f\u6b63\u7684\uff0c\u90e8\u5206\u8f6f\u4ef6\u6216\u6d4f\u89c8\u5668\u5177\u6709\u81ea\u52a8\u65cb\u8f6c\u8bc6\u522b\u529f\u80fd\uff0c\u53ef\u901a\u8fc7\u67e5\u770b\u56fe\u7247 EXIF \u4fe1\u606f\uff0c\u786e\u5b9a\u56fe\u7247\u7684\u5177\u4f53\u65cb\u8f6c\u60c5\u51b5\u3002 \u8bf4\u660e\uff1a \u53c2\u6570 Orientation\uff0c\uff081\uff1a0 \u5ea6 6\uff1a\u987a\u65f6\u9488 90 \u5ea6 8\uff1a\u9006\u65f6\u9488 90 \u5ea6 3\uff1a180 \u5ea6\uff09\u3002 \u539f\u56fe\u52a0\u5bc6\u529f\u80fd\u4e0d\u751f\u6548\uff1f \u53ef\u80fd\u60c5\u51b5\uff1a \u539f\u56fe\u4fdd\u62a4\u5bc6\u94a5\u5305\u542b\u7279\u6b8a\u5b57\u7b26\uff1a\u65b0\u7248\u672c\u89c4\u5b9a\u53ea\u80fd\u4f7f\u7528\u201ca-zA-Z0-9\u201d\u7684\u5b57\u7b26\u7ec4\u5408\u3002 \u6dfb\u52a0\u6c34\u5370\u4e0d\u6210\u529f\uff1f \u68c0\u67e5\u6c34\u5370\u56fe\u7247\u5c3a\u5bf8\u4efb\u610f\u8fb9\u662f\u5426\u8d85\u8fc7\u4e86\u751f\u6210\u56fe\u7247\u5c3a\u5bf8\u7684 50%\uff0c\u8d85\u8fc7\u4e0d\u80fd\u6dfb\u52a0\u6c34\u5370\u3002 \u6587\u4ef6\u66f4\u65b0\u4e86\uff0c\u4e3a\u4ec0\u4e48\u8bbf\u95ee\u8fd8\u662f\u8001\u56fe\uff1f \u6587\u4ef6\u66f4\u65b0\u540e\uff0c\u53c8\u62cd\u4e91\u5b58\u50a8\u9700\u8981\u66f4\u65b0\u5168\u56fd\u8282\u70b9\u7684\u7f13\u5b58\uff0c\u8fd9\u4e2a\u65f6\u95f4\u9700\u8981 0~10 \u5206\u949f\u3002\u4e00\u822c\u60c5\u51b5\u4e0b\uff0c\u80fd\u591f\u505a\u5230\u5b9e\u65f6\u66f4\u65b0\u300210 \u5206\u949f\u540e\u8fd8\u662f\u65e0\u6cd5\u83b7\u53d6\u65b0\u56fe\uff0c\u8bf7\u68c0\u67e5\u4ee5\u4e0b\u4e24\u79cd\u60c5\u51b5\uff1a \u6d4f\u89c8\u5668\u53ef\u80fd\u5b58\u5728\u7f13\u5b58\uff0c\u8bf7\u6e05\u9664\u6d4f\u89c8\u5668\u7f13\u5b58\u540e\uff0c\u518d\u5f3a\u5236\u5237\u65b0; \u82e5\u662f\u81ea\u4e3b\u6e90\u7ad9\u7684\u60c5\u51b5\uff0c\u6e90\u6570\u636e\u66f4\u65b0\u540e\u662f\u5426\u6709\u8c03\u7528\u8fc7 API \u63a5\u53e3\uff0c\u901a\u77e5\u53c8\u62cd\u4e91\u5b58\u50a8\u8fdb\u884c\u7f13\u5b58\u5237\u65b0\u3002 **\u81ea\u4e3b\u6e90\u7ad9\u670d\u52a1\uff0c\u8bbf\u95ee\u6587\u4ef6\u4e00\u76f4\u6ca1\u5237\u65b0\u6210\u529f\uff0c\u54cd\u5e94\u5934\u4e2d\u663e\u793a x-source:U/200 \u8bf7\u95ee\u5982\u4f55\u89e3\u51b3\uff1f ** \u53ef\u80fd\u539f\u56e0: \u8fd9\u79cd\u60c5\u51b5\u4e00\u822c\u662f\u5f00\u542f\u4e86\u955c\u50cf\u529f\u80fd\u5bfc\u81f4\u6e90\u7ad9\u6587\u4ef6\u88ab\u6c38\u4e45\u4fdd\u5b58\u5728\u4e86 CDN \u4e2d\uff0c\u6b64\u65f6\u7684\u81ea\u52a9\u6e90\u7ad9\u5df2\u7ecf\u662f\u4e00\u4e2a\u5b58\u50a8\u670d\u52a1\uff0c\u5982\u679c\u8bef\u64cd\u4f5c\uff0c\u5148 FTP \u767b\u5f55\u5230\u8fd9\u4e2a\u670d\u52a1\u4e2d\u5220\u9664\u6587\u4ef6\uff0c\u7136\u540e\u5173\u95ed\u955c\u50cf\u529f\u80fd\u540e\u5168\u7f51\u5237\u65b0\u3002 ** \u6587\u4ef6\u4e0a\u4f20\u6210\u529f\u540e\uff0c\u4e3a\u4ec0\u4e48\u8bbf\u95ee\u8fd4\u56de 400 \u72b6\u6001\u7801\uff0c\u63d0\u793a\u7f51\u7ad9\u672a\u5907\u6848\uff1f ** \u8bf7\u786e\u8ba4\u57df\u540d\u662f\u5426\u89e3\u6790\u5230\u6211\u4eec\u63d0\u4f9b\u7684\u89e3\u6790\u5730\u5740 ** \u5982\u4f55\u901a\u8fc7 curl \u4e0a\u4f20\u6587\u4ef6\uff1f** curl -T /local_img.jpg http://v0.api.upyun.com/bucket/img.jpg -u operator:operator_pwd -v /local_img.jpg \u672c\u5730\u4e0a\u4f20\u6587\u4ef6\u7684\u8def\u5f84\u548c\u6587\u4ef6\u540d /bucket \u670d\u52a1\u540d operator:operator_pwd \u64cd\u4f5c\u5458\uff1a\u64cd\u4f5c\u5458\u5bc6\u7801 ** \u6587\u4ef6\u4e0a\u4f20\u6210\u529f\u540e\uff0c\u5982\u4f55\u901a\u8fc7\u6d4f\u89c8\u5668\u53bb\u67e5\u770b\u6587\u4ef6\uff1f ** \u53ef\u4ee5\u76f4\u63a5\u901a\u8fc7\u5916\u94fe\u53bb\u8bbf\u95ee\u4e0b\u8f7d http://<\u670d\u52a1\u540d>.b0.upaiyun.com/<\u6587\u4ef6\u8def\u5f84>/<\u6587\u4ef6\u540d> ** \u5982\u4f55\u53bb\u76f4\u63a5\u4e0b\u8f7d\u4e00\u4e2a\u5728\u9875\u9762\u663e\u793a\u7684\u6587\u4ef6 ** \u5728 URL \u540e\u9762\u6dfb\u52a0 ?_upd=true \u53c2\u6570\u5b9e\u73b0 ** \u6587\u4ef6\u4e0a\u4f20\u6210\u529f\u540e\uff0c\u5982\u4f55\u786e\u8ba4\u6587\u4ef6\u662f\u5426\u66f4\u65b0\uff1f** \u786e\u8ba4\u6587\u4ef6\u54cd\u5e94\u5934\u4e2d\u7684 Last-Modified \u7684\u65f6\u95f4\u662f\u5426\u662f\u60a8\u66f4\u65b0\u6587\u4ef6\u7684\u65f6\u95f4\u3002 ** \u8bbf\u95ee 405 Not Allowed ** \u5916\u94fe\u6ca1\u6709\u5f00\u542f ** \u64cd\u4f5c\u5458\u90fd\u6709\u54ea\u4e9b\u6743\u9650\uff1f\u662f\u5426\u53ef\u4ee5\u767b\u9646\u8d26\u53f7\uff1f** \u64cd\u4f5c\u5458\u662f\u6ca1\u6709\u529e\u6cd5\u767b\u9646\u8d26\u53f7\u7684\uff0c\u64cd\u4f5c\u5458\u53ea\u662f\u5bf9\u6587\u4ef6\u8fdb\u884c\u64cd\u4f5c\uff0c\u4e0a\u4f20\u3001\u5220\u9664\u7b49 ** \u60f3\u5168\u7f51\u63a5\u5165\uff0c\u5982\u4f55\u5728\u63a5\u5165\u7684\u65f6\u5019\u51cf\u5c11\u670d\u52a1\u5668\u7684\u538b\u529b\uff1f ** \u53ef\u4ee5\u5728\u63a5\u5165\u4e4b\u524d\uff0c\u5c06\u4e00\u4e9b\u9759\u6001\u6587\u4ef6\u8fdb\u884c\u9884\u70ed\uff0c\u53ef\u4ee5\u51cf\u5c11\u6587\u4ef6\u7684\u56de\u6e90\u538b\u529b\uff0c\u63d0\u9ad8\u7f13\u5b58\u547d\u4e2d\u7387\u3002 ** \u56de\u8c03\u600e\u4e48\u7528 ** \u7b54: \u56de\u8c03\u7684\u5730\u5740\u5fc5\u987b\u662f\u516c\u7f51\u5730\u5740\uff0c\u6211\u4eec\u53d1\u9001\u56de\u8c03\u4f60\u53ef\u4ee5\u53c2\u8003\u4e0b\u9762\u7684 php \u4ee3\u7801\u63a5\u6536 <?php $myfile = fopen(\"res.txt\", \"w\"); $notify = file_get_contents(\"php://input\"); fwrite($myfile, $notify); fclose($myfile); \u4e0a\u9762\u7684\u4ee3\u7801\u662f\u628a\u56de\u8c03\u4fe1\u606f\u5199\u5165\u5230\u6587\u4ef6\uff0c\u7136\u540e\u67e5\u770b\u8fd9\u4e2a\u6587\u4ef6\u5c31\u80fd\u770b\u5230\u56de\u8c03\u4fe1\u606f\u4e86\u3002","title":"\u5176\u5b83"},{"location":"faq/#faq_2","text":"** \u5e10\u53f7\u6ce8\u518c\u65f6\u63d0\u4ea4\u7533\u8bf7\u4e4b\u540e\u8df3\u51fa\u624b\u673a\u6216\u90ae\u7bb1\u5df2\u5b58\u5728\uff1f** \u8868\u793a\u60a8\u4e4b\u524d\u5df2\u7ecf\u7528\u8be5\u624b\u673a\u6216\u90ae\u7bb1\u6ce8\u518c\u767b\u8bb0\u8fc7\u5e10\u53f7\uff0c\u82e5\u60a8\u4e0d\u8bb0\u5f97\u5e10\u53f7\uff0c\u53ef\u4ee5\u8054\u7cfb\u552e\u540e QQ200576786 \u5e2e\u60a8\u67e5\u770b\u3002 ** \u6211\u5fd8\u8bb0\u5bc6\u7801\u4e86\u600e\u4e48\u529e\uff1f** \u624b\u673a\u6216\u90ae\u7bb1\u5df2\u7ecf\u9a8c\u8bc1\u8fc7\u7684\uff0c\u76f4\u63a5\u5728\u767b\u5f55\u9875\u9762\u70b9\u51fb\u5fd8\u8bb0\u5bc6\u7801\uff0c\u5373\u53ef\u901a\u8fc7\u624b\u673a\u77ed\u4fe1\uff0c\u8bed\u97f3\u7535\u8bdd\u6216\u8005\u90ae\u7bb1\u91cd\u7f6e\u4e00\u4e2a\u65b0\u7684\u5bc6\u7801\uff0c\u7136\u540e\u767b\u5f55\u5373\u53ef\uff1b\u82e5\u90ae\u7bb1\u672a\u9a8c\u8bc1\uff0c\u53ef\u4ee5\u7528\u6ce8\u518c\u90ae\u7bb1\u53d1\u9001\u7528\u6237\u540d\u548c\u9a8c\u8bc1\u90ae\u4ef6\u5230 support@upyun.com \u4eba\u5de5\u9a8c\u8bc1\u90ae\u7bb1\uff0c\u82e5\u624b\u673a\u53f7\u672a\u9a8c\u8bc1\uff0c\u53ef\u4ee5\u7528\u6ce8\u518c\u624b\u673a\u62e8\u6253 0571-81020204 \u4eba\u5de5\u9a8c\u8bc1\u624b\u673a\u53f7\uff0c\u9a8c\u8bc1\u4e4b\u540e\u53ef\u901a\u8fc7\u90ae\u7bb1\u6216\u624b\u673a\u91cd\u7f6e\u5bc6\u7801\u3002 ** \u5e10\u53f7\u767b\u5f55\u8fdb\u53bb\u63d0\u793a\u5e10\u53f7\u88ab\u51bb\u7ed3\u6216\u8005\u7981\u7528\u4e86\u600e\u4e48\u529e\uff1f** \u8bf7\u8054\u7cfb\u5ba2\u670d QQ200576786 \u5e2e\u60a8\u5904\u7406\u3002 ** \u4f01\u4e1a\u5e10\u53f7\u548c\u4e2a\u4eba\u5e10\u53f7\u6709\u4f55\u533a\u522b\uff1f** \u4e0d\u8bba\u60a8\u9009\u62e9\u4f01\u4e1a\u8fd8\u662f\u4e2a\u4eba\uff0c\u529f\u80fd\u53ca\u4ea7\u54c1\u7684\u4ef7\u683c\u90fd\u662f\u6ca1\u6709\u533a\u522b\u7684\u3002\u4e2a\u4eba\u8d26\u53f7\u53ef\u4ee5\u5347\u7ea7\u6210\u4f01\u4e1a\u8d26\u53f7\uff0c\u4f01\u4e1a\u8d26\u53f7\u65e0\u6cd5\u4fee\u6539\u6210\u4e2a\u4eba\u8d26\u53f7\uff1b\u4f01\u4e1a\u5e10\u53f7\u7684\u8ba4\u8bc1\u9700\u63d0\u4ea4\u8425\u4e1a\u6267\u7167\u7167\u7247\u6216\u626b\u63cf\u4ef6\u8ba4\u8bc1\uff0c\u4e2a\u4eba\u5e10\u53f7\u7684\u8ba4\u8bc1\u662f\u63d0\u4ea4\u672c\u4eba\u624b\u6301\u8eab\u4efd\u8bc1\u6b63\u53cd\u9762\u7167\u7247\uff0c\u6216\u8005\u63d0\u4ea4\u829d\u9ebb\u4fe1\u7528\u8ba4\u8bc1\uff08\u5206\u6570\u4e0d\u4f4e\u4e8e750\uff09\uff0c\u9009\u62e9\u81ea\u5df1\u5bf9\u5e94\u7533\u8bf7\u7684\u5e10\u53f7\u7c7b\u578b\u586b\u5199\u6b63\u786e\u4fe1\u606f\u63d0\u4ea4\u7533\u8bf7\u5373\u53ef\u3002 ** \u5b9e\u540d\u8ba4\u8bc1\u4e3a\u4ec0\u4e48\u6ca1\u6709\u901a\u8fc7\uff1f ** \u53ef\u4ee5\u5728\u60a8\u5e10\u53f7\u7ba1\u7406\u7684\u5b9e\u540d\u8ba4\u8bc1\u9875\u9762\u6216\u8005\u540e\u53f0\u7684\u7ad9\u5185\u4fe1\u67e5\u770b\u5177\u4f53\u539f\u56e0\u3002 ** \u6211\u521a\u7ed9\u5e10\u53f7\u5145\u503c\u4e86,\u600e\u4e48\u5f00\u53d1\u7968\u5462\uff1f** \u8054\u7cfb\u60a8\u7684\u9500\u552e\u7ecf\u7406\u5e2e\u60a8\u5f00\u53d1\u7968\uff0c\u82e5\u60a8\u4e0d\u77e5\u9053\u9500\u552e\u7ecf\u7406\u7684\u8054\u7cfb\u65b9\u5f0f\uff0c\u53ef\u4ee5\u8054\u7cfb\u5ba2\u670d QQ200576786 \uff0c\u63d0\u4f9b\u60a8\u7684\u5e10\u53f7\u548c\u8054\u7cfb\u65b9\u5f0f\uff0c\u5ba2\u670d\u4f1a\u8054\u7cfb\u60a8\u7684\u9500\u552e\u7ecf\u7406\u7ed9\u60a8\u5f00\u53d1\u7968\u7684\u3002 ** \u6ce8\u518c\u5e10\u53f7\u65f6\uff0c\u624b\u673a\u6536\u4e0d\u5230\u9a8c\u8bc1\u7801\u3002** \u60a8\u5148\u67e5\u770b\u4e0b\u624b\u673a\u662f\u5426\u51fa\u4e8e\u6b63\u5e38\u670d\u52a1\u72b6\u6001\uff0c\u6ca1\u6709\u6b20\u8d39\uff0c\u4e14\u901a\u4fe1\u6b63\u5e38\u3002\u5982\u679c\u624b\u673a\u662f\u5904\u4e8e\u6b63\u5e38\u670d\u52a1\u4e2d\uff0c\u4e14\u6536\u53d1\u5176\u4ed6\u77ed\u4fe1\u90fd\u6b63\u5e38\uff0c\u8bf7\u8054\u7cfb\u5ba2\u670d QQ200576786 \u67e5\u770b\u5177\u4f53\u539f\u56e0\u3002 ** \u6211\u63d0\u4ea4\u4e86\u5b9e\u540d\u8ba4\u8bc1\u600e\u4e48\u8fd8\u6ca1\u5ba1\u6838\uff1f ** \u60a8\u597d\uff0c\u5de5\u4f5c\u4eba\u5458\u4f1a\u5728\u4e00\u4e2a\u5de5\u4f5c\u65e5\u5185\u5ba1\u6838\u5b8c\u6210\uff0c\u82e5\u8d85\u8fc7\u4e00\u4e2a\u5de5\u4f5c\u65e5\uff0c\u8bf7\u8054\u7cfb\u5ba2\u670d QQ200576786 \u5e2e\u60a8\u5904\u7406\u3002","title":"\u5e10\u53f7 FAQ"},{"location":"faq/#_3","text":"","title":"\u89c6\u9891\u6559\u7a0b"},{"location":"faq/#cdn","text":"\u89c6\u9891\u7c7b\u522b \u89c6\u9891\u540d\u79f0 \u65f6\u957f \u66f4\u65b0\u65f6\u95f4 CDN \u521b\u5efa\u548c\u4f7f\u7528CDN\u5b58\u50a8\u670d\u52a1 14\u520641\u79d2 2017/08/10 CDN \u521b\u5efa\u52a8\u6001CDN\u548c\u8bbe\u7f6e\u7f13\u5b58 6\u520629\u79d2 2017/08/10 CDN \u521b\u5efa\u548c\u4f7f\u7528\u7f29\u7565\u56fe 14\u520650\u79d2 2017/08/29 CDN \u8bbe\u7f6eSSL\u8bc1\u4e66 16\u520645\u79d2 2017/08/10 CDN \u7f13\u5b58\u5237\u65b0\u529f\u80fd 7\u520610\u79d2 2017/08/30 \u63d2\u4ef6 \u8bbe\u7f6e Discuz \u63d2\u4ef6 8\u520629\u79d2 2016/03/18 CDN \u8bbe\u7f6e\u9632\u76d7\u94fe 11\u520614\u79d2 2017/08/30 CDN \u878d\u5408\u4e91\u914d\u7f6e 6\u520657\u79d2 2017/08/10 SDK HTTP REST API\u7684\u4ecb\u7ecd\u548cJAVA SDK\u7684\u4f7f\u7528 10\u520623\u79d2 2016/03/19 SDK CURL \u64cd\u4f5c HTTP 7\u520615\u79d2 2016/03/19 SDK \u97f3\u89c6\u9891\u5904\u7406SDK 6\u520609\u79d2 2016/04/23 CDN \u4e03\u725b\u955c\u50cf\u56de\u6e90\u529f\u80fd\u4f7f\u7528 6\u520619\u79d2 2016/04/23 CDN CORS \u8de8\u57df\u529f\u80fd\u4f7f\u7528 3\u520635\u79d2 2017/08/30 SDK Python SDK\u7684\u4f7f\u7528 17\u520625\u79d2 2016/06/30 FTP \u53c8\u62cd\u4e91\u8d44\u6e90\u7ba1\u7406\u5668\u7684\u4f7f\u7528 2\u520638\u79d2 2016/03/23 CDN \u963f\u91cc\u4e91\u4e91\u76fe\u8bbe\u7f6e 1\u520639\u79d2 2017/04/12 \u65e5\u5fd7 \u65e5\u5fd7\u5206\u6790\u548c\u65e5\u5fd7\u4e0b\u8f7d 7\u52062 2017/04/12 CDN \u53c8\u62cd\u4e91\u7684\u7edf\u8ba1\u529f\u80fd 3\u520635\u79d2 2016/09/12 CDN \u53c8\u62cd\u4e91\u76d1\u63a7\u7cfb\u7edf\u7b80\u4ecb 3\u520605\u79d2 2016/09/12 CDN Rewrite \u89c4\u5219\u7684\u4f7f\u7528 4\u520603\u79d2 2016/09/12 \u8d26\u53f7 \u5b9e\u540d\u8ba4\u8bc1 2\u5206 2016/09/12 CDN HTTP2 \u7b80\u4ecb 2\u520649\u79d2 2017/06/08 \u5de5\u5177 wireshark \u7684\u4f7f\u7528 5\u520658\u79d2 2017/04/21 \u5de5\u5177 tcpudmp \u7684\u4f7f\u7528 8\u520656\u79d2 2016/09/14 \u5de5\u5177 Linux \u4e0b upx \u7684\u4f7f\u7528 6\u520656\u79d2 2016/10/15 \u5de5\u5177 Windows \u4e0b upx \u7684\u4f7f\u7528 10\u520623\u79d2 2017/01/03 \u63d2\u4ef6 ueditor\u7684\u4f7f\u7528 7\u520655\u79d2 2016/10/15 CDN \u5206\u6bb5\u7f13\u5b58 8\u520639\u79d2 2017/04/12 SDK \u4e91\u5904\u7406 - \u89c6\u9891\u8f6c\u7801 9\u520614\u79d2 2017/01/03 SDK \u4e91\u5904\u7406 - \u89c6\u9891\u6c34\u5370 11\u520637\u79d2 2017/05/18 SDK \u4e91\u5904\u7406 - \u97f3\u9891\u8f6c\u7801 3\u520637\u79d2 2017/03/03 SDK \u4e91\u5904\u7406 - \u538b\u7f29\u548c\u89e3\u538b\u7f29 3\u520644\u79d2 2017/05/18 CDN rewrite \u89c4\u5219\u8be6\u89e3 38\u520637\u79d2 2017/05/11 \u63d2\u4ef6 wordpress \u63d2\u4ef6\u4f7f\u7528 1\u520654\u79d2 2017/05/22 CDN \u56fe\u7247\u9274\u9ec4 5\u5206 2017/05/19 CDN API\u4f7f\u7528 15\u520622\u79d2 2017/08/14 CDN \u5220\u9664\u670d\u52a1 3\u520639\u79d2 2017/08/29","title":"CDN \u670d\u52a1"},{"location":"faq/#_4","text":"\u89c6\u9891\u7c7b\u522b \u89c6\u9891\u540d\u79f0 \u65f6\u957f \u66f4\u65b0\u65f6\u95f4 \u76f4\u64ad \u521b\u5efa\u548c\u4f7f\u7528\u53c8\u62cd\u4e91\u81ea\u4e3b\u6e90\u7ad9\u7684\u76f4\u64ad\u670d\u52a1 10\u5206 2016/08/03 \u76f4\u64ad \u521b\u5efa\u548c\u4f7f\u7528\u81ea\u4e3b\u6e90\u76f4\u64ad\u670d\u52a1 4\u520651\u79d2 2016/08/03 \u76f4\u64ad \u76f4\u64ad\u8f6c\u7801\u548c\u5f55\u5236 10\u520623\u79d2 2016/09/28 \u76f4\u64ad \u5b89\u5353\u62c9\u6d41\u64ad\u653e\u5668\u4f7f\u7528\u6307\u5357 3\u520632\u79d2 2016/09/29 \u76f4\u64ad \u76f4\u64ad\u9632\u76d7\u94fe\u7684\u4f7f\u7528 6\u520654\u79d2 2016/10/15 \u76f4\u64ad \u6d41\u7ba1\u63a7\u548c\u6d41\u56de\u8c03 9\u520637\u79d2 2017/04/14 \u76f4\u64ad \u76f4\u64ad\u622a\u56fe\u529f\u80fd 1\u520654\u79d2 2017/05/18","title":"\u76f4\u64ad\u670d\u52a1"},{"location":"faq/#_5","text":"\u89c6\u9891\u7c7b\u522b \u89c6\u9891\u540d\u79f0 \u65f6\u957f \u66f4\u65b0\u65f6\u95f4 \u5de5\u5177 PC \u7aef\u6545\u969c\u53cd\u9988\u89c6\u9891\u6559\u7a0b 10\u5206 2016/10/21 \u5de5\u5177 Android \u6545\u969c\u53cd\u9988\u89c6\u9891\u6559\u7a0b 4\u520651\u79d2 2016/10/21 \u5de5\u5177 iOS \u6545\u969c\u53cd\u9988\u89c6\u9891\u6559\u7a0b 4\u520651\u79d2 2017/01/01 \u5de5\u5177 DNS \u7684\u4fee\u6539 11\u520637\u79d2 2017/04/21","title":"\u6545\u969c\u53cd\u9988"},{"location":"guide/","text":"\u53c8\u62cd\u4e91\u63d0\u4f9b\u4e86\u4e30\u5bcc\u7684 API \u4ee5\u53ca\u76f8\u5173\u7684 SDK \u4f9b\u5f00\u53d1\u8005\u9009\u62e9\u548c\u4f7f\u7528\uff0c\u5728\u4f7f\u7528\u8fd9\u4e9b\u8d44\u6e90\u4e4b\u524d\uff0c\u6211\u4eec\u9700\u8981\u5148\u5bf9 \u53c8\u62cd\u4e91\u4ea7\u54c1\u505a\u4e00\u4e9b\u5fc5\u8981\u7684\u4e86\u89e3\uff0c\u4ece\u800c\u4f7f\u5f97\u5728\u5b9e\u9645\u64cd\u4f5c\u8fc7\u7a0b\u4e2d\u4e0d\u4f1a\u611f\u5230\u624b\u8db3\u65e0\u63aa\u3002 \u57fa\u672c\u6982\u5ff5 \u00b6 \u6ce8\u518c\u5e10\u53f7/\u64cd\u4f5c\u5458 \u00b6 \u300c\u6ce8\u518c\u5e10\u53f7\u300d\u53ca\u5176\u5bc6\u7801\u5c06\u4f5c\u4e3a \u53c8\u62cd\u4e91\u7528\u6237\u63a7\u5236\u9762\u677f \u7684\u767b\u5f55\u6240\u7528\uff0c\u60a8\u9700\u8981\u901a\u8fc7\u300c\u6ce8\u518c\u5e10\u53f7\u300d\u5728 \u53c8\u62cd\u4e91\u7528\u6237\u63a7\u5236\u9762\u677f \u8fdb\u884c\u670d\u52a1\u7684\u65b0\u5efa\uff0c\u64cd\u4f5c\u5458\u6388\u6743\uff0c\u8ba2\u5355\u8d2d\u4e70\u7b49\u64cd\u4f5c\u3002 \u300c\u64cd\u4f5c\u5458\u300d\uff0c\u987e\u540d\u601d\u4e49\uff0c\u662f\u7528\u6765\u64cd\u4f5c\u60a8\u7684\u670d\u52a1\u7684\uff0c\u901a\u8fc7\u4f7f\u7528\u6ce8\u518c\u5e10\u53f7\u767b\u5f55 \u53c8\u62cd\u4e91\u7528\u6237\u63a7\u5236\u9762\u677f \u540e\uff0c\u60a8\u53ef\u4ee5\u521b\u5efa\u591a\u4e2a\u64cd\u4f5c\u5458\uff0c\u6ee1\u8db3\u4e0d\u540c\u7684\u7ba1\u7406\u9700\u6c42\u3002 \u300c\u64cd\u4f5c\u5458\u300d\u9700\u8981\u88ab\u6388\u6743\u81f3\u67d0\u4e2a\u670d\u52a1\uff0c\u624d\u80fd\u5bf9\u8be5\u670d\u52a1\u8fdb\u884c\u4e00\u4e9b\u64cd\u4f5c\uff08\u5982\uff0c\u4e0a\u4f20\uff0c\u4e0b\u8f7d\u7b49\uff09\u3002\u5e2e\u52a9\u4e2d\u5fc3\u6240\u6d89\u53ca\u5230\u7684\u6587\u6863\u4e2d\uff0c\u82e5\u65e0\u7279\u6b8a\u8bf4\u660e\uff0c\u6240\u6307\u7684\u300c\u64cd\u4f5c\u5458\u300d\u3001\u300c\u64cd\u4f5c\u5458\u540d\u300d\u5747\u4e3a\u5df2\u6388\u6743\u81f3\u76f8\u5e94\u670d\u52a1\u7684\u64cd\u4f5c\u5458\u3002 \u300c\u64cd\u4f5c\u5458\u300d\u53ef\u4ee5\u6839\u636e\u4e0d\u540c\u7684\u9700\u6c42\u8d4b\u4e88\u4e0d\u540c\u7684\u6743\u9650\uff0c\u5305\u62ec\u53ef\u8bfb\u53d6\u3001\u53ef\u5199\u5165\u3001\u53ef\u5220\u9664, \u4f60\u53ef\u4ee5\u5728\u7ba1\u7406\u540e\u53f0\u53f3\u4e0a\u89d2\u7684\u5e10\u53f7\u4e0b\u62c9\u83dc\u5355\u4e2d\u9009\u62e9 \u8d26\u6237\u7ba1\u7406\uff0d>\u64cd\u4f5c\u5458\u7ba1\u7406->\u7f16\u8f91 \u8fdb\u884c\u8bbe\u7f6e \u670d\u52a1\u540d \u00b6 \u5728\u60a8\u4f7f\u7528\u6ce8\u518c\u5e10\u53f7\u767b\u5f55 \u53c8\u62cd\u4e91\u7528\u6237\u63a7\u5236\u9762\u677f \u540e\uff0c\u60a8\u53ef\u4ee5\u521b\u5efa\u4e0d\u540c\u7684\u670d\u52a1\u4ee5\u65b9\u4fbf\u7ba1\u7406\u4f60\u7684\u6587\u4ef6\u8d44\u6e90\uff0c\u4f8b\u5982\u5b58\u50a8\u7c7b\u578b\u3001\u81ea\u4e3b\u6e90\u7ad9\u670d\u52a1\u7b49\u3002 \u63d0\u793a\uff1a \u6bcf\u4e2a\u670d\u52a1\u90fd\u53ef\u4ee5\u6388\u6743\u591a\u4e2a\u64cd\u4f5c\u5458\uff0c\u76f8\u5e94\u7684\uff0c\u6bcf\u4e2a\u64cd\u4f5c\u5458\u4e5f\u53ef\u4ee5\u88ab\u6388\u6743\u81f3\u591a\u4e2a\u670d\u52a1 \u53c8\u62cd\u4e91\u76ee\u524d\u6709\u5982\u4e0b\u51e0\u79cd\u670d\u52a1\u7c7b\u578b\uff1a \u5b58\u50a8\u7c7b\u670d\u52a1\uff1a\u53ef\u4ee5\u4e0a\u4f20\u4efb\u610f\u8d44\u6e90\uff0c\u8d44\u6e90\u5c06\u88ab\u4fdd\u5b58\u81f3 \u53c8\u62cd\u4e91\u7684\u670d\u52a1\u5668\uff0c\u4e14\u6587\u4ef6\u7684\u5916\u94fe\u5c06\u5177\u6709 CDN \u7f51\u7edc\u652f\u6301\u3002\u540c\u65f6\u8fd8\u63d0\u4f9b\u300c \u81ea\u5b9a\u4e49\u7248\u672c \u300d\u529f\u80fd\u3002 \u81ea\u4e3b\u6e90\u7ad9\u670d\u52a1\uff1a\u8d44\u6e90\u6587\u4ef6\u5168\u90fd\u5b58\u653e\u5728\u6e90\u7ad9\uff0c\u65e0\u9700\u91cd\u65b0\u4e0a\u4f20\u81f3 \u53c8\u62cd\u4e91\u670d\u52a1\u5668\uff0c\u9002\u5408\u6e90\u7ad9\u5185\u5bb9\u52a8\u9759\u6df7\u7528\u7684\u573a\u666f\uff0c\u53ef\u5b9e\u73b0\u5168\u7ad9\u52a0\u901f\u3002 \u66f4\u591a\u670d\u52a1\u7c7b\u578b\u7684\u533a\u522b\uff0c\u8bf7\u53c2\u9605 \u670d\u52a1\u5206\u51e0\u79cd\u7c7b\u578b\uff0c\u6709\u54ea\u4e9b\u533a\u522b\uff1f \u8bbf\u95ee\u57df\u540d \u00b6 \u300c\u670d\u52a1\u300d\u521b\u5efa\u5b8c\u6210\u540e\uff0c\u7cfb\u7edf\u4f1a\u81ea\u52a8\u7ed1\u5b9a\u4e00\u4e2a\u9ed8\u8ba4\u57df\u540d <bucket>.b0.upaiyun.com \u3002\u6bd4\u5982\uff0c\u5f53\u4f60\u521b\u5efa\u4e86\u4e00\u4e2a\u540d\u53eb demo \u7684\u670d\u52a1\u65f6\uff0c\u90a3\u7cfb\u7edf\u4f1a\u81ea\u52a8\u7ed1\u5b9a\u9ed8\u8ba4\u57df\u540d demo.b0.upaiyun.com \u3002\u56e0\u6b64\uff0c\u5982\u679c\u8be5\u670d\u52a1\u6839\u76ee\u5f55\u6709\u4e00\u4e2a\u540d\u4e3a file.txt \u7684\u6587\u4ef6\uff0c\u90a3\u4e48\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528 http://demo.b0.upaiyun.com/file.txt \u6765\u8bbf\u95ee\u3002 \u82e5\u4f60\u62e5\u6709 \u5df2\u5907\u6848 \u7684\u57df\u540d\uff0c\u5219\u53ef\u4ee5\u7ed1\u5b9a\u81ea\u5df1\u7684\u72ec\u7acb\u57df\u540d\u3002\u7ed1\u5b9a\u72ec\u7acb\u57df\u540d\u540e\uff0c\u4f60\u53ef\u4ee5\u540c\u65f6\u4f7f\u7528\u9ed8\u8ba4\u57df\u540d\uff0c\u4ee5\u53ca\u4f60\u7ed1\u5b9a\u7684\u57df\u540d\u6765\u8bbf\u95ee\u4f60\u7684\u6587\u4ef6\u3002\u4f46\u662f\uff0c\u6211\u4eec\u5f3a\u70c8\u5efa\u8bae\u60a8\u4f7f\u7528\u81ea\u5b9a\u4e49\u7684\u57df\u540d\u53bb\u8bbf\u95ee\u6587\u4ef6\u3002 \u63d0\u793a\uff1a \u4e3a\u4e86\u907f\u514d\u56fe\u7247\u88ab\u76d7\u94fe\uff0c\u53ef\u4ee5\u6839\u636e\u5b9e\u9645\u9700\u8981\uff0c\u8bbe\u7f6e\u9632\u76d7\u94fe\u63aa\u65bd \u9632\u76d7\u94fe \u00b6 \u9632\u76d7\u94fe\u7684\u76f8\u5173\u8bbe\u7f6e\u8bf7\u53c2\u8003 \u8bbf\u95ee\u63a7\u5236 \u7f13\u5b58\u5237\u65b0 \u00b6 \u7f13\u5b58\u5237\u65b0\uff0c\u60a8\u53ef\u53c2\u8003 \u7f13\u5b58\u5237\u65b0 \u56fe\u7247\u5904\u7406 \u00b6 \u7f29\u7565\u56fe\u7248\u672c\u4f5c\u56fe \u00b6 \u7f29\u7565\u56fe\u7248\u672c\u63d0\u4f9b\u56fe\u7247 \u300c\u7f29\u7565\u56fe\u300d \u3001 \u300c\u6c34\u5370\u300d \u3001 \u300c\u65cb\u8f6c\u300d \u3001 \u300c\u683c\u5f0f\u8f6c\u6362\u300d\u7b49\u529f\u80fd\uff0c\u5b83\u5728 \u300c\u7ba1\u7406\u540e\u53f0\u300d > \u300c\u670d\u52a1\u300d > \u300c\u529f\u80fd\u914d\u7f6e\u300d > \u300c\u4e91\u5904\u7406\u300d > \u300c\u81ea\u5b9a\u4e49\u7248\u672c\u300d \u4e2d\u8bbe\u7f6e\u3002 \u5b83\u7684\u8c03\u7528\u683c\u5f0f\u4e3a\uff1a\u300c\u56fe\u7247 URL + \u95f4\u9694\u6807\u8bc6\u7b26 + \u7f29\u7565\u56fe\u7248\u672c\u540d\u79f0\u300d\u3002 \u4f8b\u5982\uff1a \u7f29\u7565\u56fe\u7248\u672c\u540d\u79f0\u4e3a\uff1a width200 \uff0c \u95f4\u9694\u6807\u8bc6\u7b26\u4e3a\uff1a ! \uff0c \u89c4\u5219\u4e3a \u9650\u5b9a\u5bbd\u5ea6\uff0c\u9ad8\u5ea6\u81ea\u9002\u5e94 \u3001\u5bbd\u5ea6\u503c\u662f 200 \u90a3\u4e48\uff0c\u8c03\u7528\u8fd9\u4e2a\u7248\u672c\u7684\u683c\u5f0f\u4e3a\uff1a http://demo.b0.upaiyun.com/img/demo.jpg!width200 \u8fd9\u662f\u4e00\u4e2a\u62e5\u6709\u5bbd\u5ea6\u4e3a 200px \u7684\u56fe\u7247\u3002 URL \u4f5c\u56fe \u00b6 URL \u4f5c\u56fe\u662f\u628a\u56fe\u7247\u5904\u7406\u53c2\u6570\u76f4\u63a5\u8ffd\u52a0\u5728\u56fe\u7247 URL \u540e\u7684\u4e00\u79cd\u4f5c\u56fe\u65b9\u5f0f\u3002 \u5b83\u7684\u8c03\u7528\u683c\u5f0f\u4e3a\uff1a\u300c\u56fe\u7247 URL + \u95f4\u9694\u6807\u8bc6\u7b26 + \u5904\u7406\u53c2\u6570\u300d\u3002 \u4f8b\u5982\uff1a \u5904\u7406\u53c2\u6570\u4e3a\uff1a /rotate/90 \uff0c\u95f4\u9694\u6807\u8bc6\u7b26\u4e3a\uff1a _ \u90a3\u4e48\uff0c\u8bbf\u95ee\u7684 URL \u4e3a\uff1a http://upyun-assets.b0.upaiyun.com/docs/guide/sample.jpg_/rotate/90 //\u56fe\u7247\u65cb\u8f6c 90 \u5ea6 \u6548\u679c\u5982\u56fe \u6240\u6709\u56fe\u7247\u5904\u7406\u53c2\u6570\u7684\u8bf4\u660e\uff0c\u8bf7\u53c2\u8003 \u4f5c\u56fe\u53c2\u6570 \u3002 \u4e0a\u4f20\u4f5c\u56fe \u00b6 \u6b64\u5916\uff0c\u60a8\u4e5f\u53ef\u4ee5\u5728\u4e0a\u4f20\u56fe\u7247\u7684\u540c\u65f6\u4f7f\u7528\u540c\u6b65\u56fe\u7247\u5904\u7406\u670d\u52a1\uff0c\u5728\u56fe\u7247\u4e0a\u4f20\u7684\u8bf7\u6c42\u4e2d\u9644\u52a0\u4e0a\u56fe\u7247\u5904\u7406\u53c2\u6570\uff0c\u8fd9\u6837\uff0c\u56fe\u7247\u5728\u4e0a\u4f20\u5b8c\u6210\u540e\u4f1a\u81ea\u52a8\u8fdb\u884c\u5904\u7406\uff0c\u5e76\u4fdd\u5b58\u5904\u7406\u540e\u7684\u56fe\u7247\u3002\u5982\uff1a \u4e0a\u4f20\u7684\u56fe\u7247\uff0c\u5927\u5c0f\u4e3a\uff1a400x320 \u4f5c\u56fe\u53c2\u6570\u4e3a: 'x-gmkerl-thumb: /fw/200/unsharp/true' //\u9650\u5b9a\u5bbd\u5ea6\uff0c\u9ad8\u5ea6\u81ea\u9002\u5e94;\u5bbd\u5ea6\u503c\u662f200\uff1b\u9510\u5316\uff08\u9ad8\u4eae\uff09\u56fe\u7247 \u6700\u7ec8\u4fdd\u5b58\u7684\u56fe\u7247\uff0c\u5927\u5c0f\u4e3a\uff1a200x160 \u66f4\u591a\u63cf\u8ff0\u8bf7\u89c1 \u4e0a\u4f20\u540c\u6b65\u4f5c\u56fe \u3002\u5982\u679c\u60a8\u9700\u8981\u4fdd\u5b58\u4e0a\u4f20\u7684\u539f\u56fe\u6216\u8005\u751f\u6210\u591a\u5f20\u56fe\u7247\uff0c\u53ef\u4ee5\u53c2\u8003 \u4e0a\u4f20\u5f02\u6b65\u4f5c\u56fe \u3002 \u5f02\u6b65\u97f3\u89c6\u9891\u5904\u7406 \u00b6 \u5f02\u6b65\u97f3\u89c6\u9891\u5904\u7406\u662f\u5bf9 \u5df2\u7ecf\u4e0a\u4f20\u5230\u4e91\u5b58\u50a8\u4e2d\u7684\u97f3\u89c6\u9891\u6587\u4ef6 \u8fdb\u884c\u89c6\u9891\u8f6c\u7801\u3001\u97f3\u9891\u8f6c\u7801\u3001HLS \u5207\u7247\u3001\u89c6\u9891\u622a\u56fe\u3001\u89c6\u9891\u6c34\u5370\u3001\u5143\u4fe1\u606f\u83b7\u53d6\u7b49\u5904\u7406\uff0c\u5904\u7406\u5b8c\u6210\u540e\uff0c\u4ee5\u56de\u8c03\u7684\u65b9\u5f0f\u901a\u77e5\u7528\u6237\u5904\u7406\u7ed3\u679c\u3002 \u5177\u4f53\u8bf7\u53c2\u8003 \u5f02\u6b65\u97f3\u89c6\u9891\u5904\u7406 \u3002 \u5982\u679c\u9700\u8981\u5728\u97f3\u89c6\u9891\u6587\u4ef6\u4e0a\u4f20\u7684\u540c\u65f6\u4f7f\u7528\u5f02\u6b65\u97f3\u89c6\u9891\u5904\u7406\u670d\u52a1\uff0c\u53ef\u4ee5\u53c2\u8003 \u4e0a\u4f20\u9884\u5904\u7406 \u3002 \u4e91\u5b89\u5168 \u00b6 \u4e91\u5b89\u5168\u53c2\u8003 \u4e91\u5b89\u5168\u6587\u6863 \u670d\u52a1\u65b9\u5f0f \u00b6 FTP/FTPS \u00b6 \u53c8\u62cd\u4e91\u63d0\u4f9b\u4e86 FTP/FTPS \u7684\u65b9\u5f0f\uff0c\u4ee5\u65b9\u4fbf\u7528\u6237\u901a\u8fc7\u56fe\u5f62\u5316\u754c\u9762\u7ba1\u7406\u5b58\u50a8\u8d44\u6e90\u3002 \u4f7f\u7528\u65b9\u6cd5\u5982\u4e0b\uff1a \u5730\u5740\uff08\u4e3b\u673a\uff09\uff1a * \u667a\u80fd\u9009\u8def\uff1av0.ftp.upyun.com * \u7535\u4fe1\u7ebf\u8def\uff1av1.ftp.upyun.com * \u8054\u901a\u7ebf\u8def\uff1av2.ftp.upyun.com * \u79fb\u52a8\u7ebf\u8def\uff1av3.ftp.upyun.com \u52a0\u5bc6\uff1a\u9009\u62e9 \u4e0d\u52a0\u5bc6 \u4f7f\u7528 FTP\uff0c\u9009\u62e9 \u663e\u5f0f\u7684 FTP over TLS \u6216 TLS/SSL \u663e\u5f0f\u52a0\u5bc6 \u4f7f\u7528 FTPS \u7528\u6237\u540d\uff1a \u64cd\u4f5c\u5458\u540d/\u670d\u52a1\u540d \uff0c\u5982 operator/mybucket \u5bc6\u7801\uff1a\u64cd\u4f5c\u5458\u7684\u5bc6\u7801 \u7aef\u53e3\uff1a21 \u6ce8\uff1a \u7f16\u7801\u65b9\u5f0f\uff08\u5b57\u7b26\u96c6\uff09\uff1a\u7edf\u4e00\u4f7f\u7528 UTF-8 \u3002 \u4f7f\u7528 \u663e\u5f0f\u7684 FTP over TLS \u65f6\uff0c\u5ba2\u6237\u7aef\u4f1a\u63d0\u793a\u8bc1\u4e66\u9700\u8981\u4fe1\u4efb\uff0c\u9009\u62e9 \u662f \u6216 \u786e\u5b9a \u5373\u53ef\u3002 \u4f7f\u7528 \u663e\u5f0f\u7684 FTP over TLS \u65f6\uff0c\u4f1a\u5bf9\u547d\u4ee4\uff08\u7528\u6237\u540d\u3001\u5bc6\u7801\u3001\u4e0a\u4f20\u3001\u4e0b\u8f7d\u7b49\u6307\u4ee4\uff09\u8fdb\u884c\u52a0\u5bc6\u3002 \u5f53\u4e0a\u4f20\u8f83\u5927\u7684\u6587\u4ef6\u65f6\uff0c\u51fa\u73b0\u8fdb\u5ea6\u662f 100% \u786e\u6ca1\u6709\u663e\u793a\u4e0a\u4f20\u5b8c\u6210\u7684\u60c5\u51b5\uff0c\u8bf7\u60a8\u8010\u5fc3\u7b49\u5f85 15 \u79d2\u5de6\u53f3\uff0c\u6b64\u65f6\u7cfb\u7edf\u6b63\u5728\u628a\u63a5\u6536\u5230\u7684\u6587\u4ef6\u5199\u5165\u60a8\u7684\u5b58\u50a8\u670d\u52a1\u4e2d\uff0c\u6587\u4ef6\u5199\u5165\u5b8c\u6bd5\u540e\uff0c\u624d\u4f1a\u663e\u793a\u4e0a\u4f20\u5b8c\u6210\u3002 API \u00b6 \u9664\u4e86\u4f7f\u7528\u7b80\u5355\u7684 FTP \u7684\u65b9\u5f0f\u4e4b\u5916\uff0c\u53c8\u62cd\u4e91\u8fd8\u63d0\u4f9b\u4e86\u591a\u79cd\u4e0d\u540c\u7684 API\uff0c\u65b9\u4fbf\u5728\u4e0d\u540c\u7684\u7f16\u7a0b\u73af\u5883\u4e0b\u4f7f\u7528\u53c8\u62cd\u4e91\u670d\u52a1\uff0c\u5176\u4e2d\u5305\u62ec\uff1a HTTP REST API \uff1a\u8be5\u63a5\u53e3\u662f\u57fa\u4e8e\u6807\u51c6 HTTP \u534f\u8bae\u7684 API \u63a5\u53e3\uff0c\u5177\u5907\u4e86\u6587\u4ef6\u8d44\u6e90\u7684\u589e\u5220\u6539\u67e5\u529f\u80fd\uff0c\u5efa\u8bae\u5728\u670d\u52a1\u7aef\u4f7f\u7528 HTTP FORM API \uff1a\u8868\u5355 API \u63a5\u53e3\u66f4\u9002\u7528\u4e8e\u79fb\u52a8 App \u5f00\u53d1\uff0c\u4e30\u5bcc\u7684\u53c2\u6570\u63a5\u53e3\u548c\u56de\u8c03\u673a\u5236\u80fd\u591f\u76f4\u63a5\u5c06\u7ec8\u7aef\u7528\u6237\u7684\u6587\u4ef6\u4e0a\u4f20\u81f3 \u53c8\u62cd\u4e91\u670d\u52a1\u5668\uff0c\u800c\u4e0d\u9700\u8981\u7ecf\u8fc7\u5ba2\u6237\u81ea\u5df1\u7684\u670d\u52a1\u5668\uff0c\u5927\u5927\u63d0\u9ad8\u4e86\u5904\u7406\u901f\u5ea6\u548c\u7528\u6237\u4f53\u9a8c \u5206\u5757\u4e0a\u4f20 API \uff1a\u5728\u8868\u5355\u4e0a\u4f20\u7684\u57fa\u7840\u4e0a\uff0c\u5728\u4e0a\u4f20\u5927\u6587\u4ef6\u7684\u65f6\u5019\uff0c\u9762\u5bf9\u6709\u53ef\u80fd\u56e0\u4e3a\u7f51\u7edc\u8d28\u91cf\u7b49\u5176\u4ed6\u539f\u56e0\u800c\u9020\u6210\u7684\u4e0a\u4f20\u5931\u8d25\uff0c\u53ef\u4ee5\u4f7f\u7528\u5206\u5757\u4e0a\u4f20\u65b9\u5f0f\u4e0a\u4f20\u6587\u4ef6 \u7f13\u5b58\u5237\u65b0 API \uff1a\u8be5\u529f\u80fd\u53ea\u9002\u7528\u4e8e CDN \u7528\u6237\u6216 CDN \u7c7b\u670d\u52a1\u3002\u5f53\u6e90\u670d\u52a1\u5668\u7684\u8d44\u6e90\u53d1\u751f\u53d8\u66f4\u540e\uff0c\u53ef\u4ee5\u8c03\u7528\u8be5 API \u63a5\u53e3\u544a\u77e5 \u53c8\u62cd\u4e91\u7f13\u5b58\u5237\u65b0\uff0c\u4ece\u800c\u8fbe\u5230\u5916\u7f51\u8bbf\u95ee\u65f6\u83b7\u53d6\u5230\u7684\u662f\u6700\u65b0\u7684\u8d44\u6e90 \u97f3\u89c6\u9891\u9884\u5904\u7406 API \uff1a\u97f3\u89c6\u9891\u5904\u7406\u63a5\u53e3\u7528\u4e8e\u5904\u7406\u5df2\u7ecf\u4e0a\u4f20\u5230\u5bf9\u5e94\u5b58\u50a8\u670d\u52a1\u4e2d\u7684\u97f3\u89c6\u9891\u6587\u4ef6\uff0c\u8fdb\u884c\u8f6c\u7801\u3001\u622a\u56fe\u7b49\u64cd\u4f5c\u3002\u5728\u5904\u7406\u5b8c\u6210\u4e4b\u540e\uff0c\u5f02\u6b65\u901a\u77e5\u7528\u6237\u5904\u7406\u7ed3\u679c","title":"Index"},{"location":"guide/#_1","text":"","title":"\u57fa\u672c\u6982\u5ff5"},{"location":"guide/#_2","text":"\u300c\u6ce8\u518c\u5e10\u53f7\u300d\u53ca\u5176\u5bc6\u7801\u5c06\u4f5c\u4e3a \u53c8\u62cd\u4e91\u7528\u6237\u63a7\u5236\u9762\u677f \u7684\u767b\u5f55\u6240\u7528\uff0c\u60a8\u9700\u8981\u901a\u8fc7\u300c\u6ce8\u518c\u5e10\u53f7\u300d\u5728 \u53c8\u62cd\u4e91\u7528\u6237\u63a7\u5236\u9762\u677f \u8fdb\u884c\u670d\u52a1\u7684\u65b0\u5efa\uff0c\u64cd\u4f5c\u5458\u6388\u6743\uff0c\u8ba2\u5355\u8d2d\u4e70\u7b49\u64cd\u4f5c\u3002 \u300c\u64cd\u4f5c\u5458\u300d\uff0c\u987e\u540d\u601d\u4e49\uff0c\u662f\u7528\u6765\u64cd\u4f5c\u60a8\u7684\u670d\u52a1\u7684\uff0c\u901a\u8fc7\u4f7f\u7528\u6ce8\u518c\u5e10\u53f7\u767b\u5f55 \u53c8\u62cd\u4e91\u7528\u6237\u63a7\u5236\u9762\u677f \u540e\uff0c\u60a8\u53ef\u4ee5\u521b\u5efa\u591a\u4e2a\u64cd\u4f5c\u5458\uff0c\u6ee1\u8db3\u4e0d\u540c\u7684\u7ba1\u7406\u9700\u6c42\u3002 \u300c\u64cd\u4f5c\u5458\u300d\u9700\u8981\u88ab\u6388\u6743\u81f3\u67d0\u4e2a\u670d\u52a1\uff0c\u624d\u80fd\u5bf9\u8be5\u670d\u52a1\u8fdb\u884c\u4e00\u4e9b\u64cd\u4f5c\uff08\u5982\uff0c\u4e0a\u4f20\uff0c\u4e0b\u8f7d\u7b49\uff09\u3002\u5e2e\u52a9\u4e2d\u5fc3\u6240\u6d89\u53ca\u5230\u7684\u6587\u6863\u4e2d\uff0c\u82e5\u65e0\u7279\u6b8a\u8bf4\u660e\uff0c\u6240\u6307\u7684\u300c\u64cd\u4f5c\u5458\u300d\u3001\u300c\u64cd\u4f5c\u5458\u540d\u300d\u5747\u4e3a\u5df2\u6388\u6743\u81f3\u76f8\u5e94\u670d\u52a1\u7684\u64cd\u4f5c\u5458\u3002 \u300c\u64cd\u4f5c\u5458\u300d\u53ef\u4ee5\u6839\u636e\u4e0d\u540c\u7684\u9700\u6c42\u8d4b\u4e88\u4e0d\u540c\u7684\u6743\u9650\uff0c\u5305\u62ec\u53ef\u8bfb\u53d6\u3001\u53ef\u5199\u5165\u3001\u53ef\u5220\u9664, \u4f60\u53ef\u4ee5\u5728\u7ba1\u7406\u540e\u53f0\u53f3\u4e0a\u89d2\u7684\u5e10\u53f7\u4e0b\u62c9\u83dc\u5355\u4e2d\u9009\u62e9 \u8d26\u6237\u7ba1\u7406\uff0d>\u64cd\u4f5c\u5458\u7ba1\u7406->\u7f16\u8f91 \u8fdb\u884c\u8bbe\u7f6e","title":"\u6ce8\u518c\u5e10\u53f7/\u64cd\u4f5c\u5458"},{"location":"guide/#_3","text":"\u5728\u60a8\u4f7f\u7528\u6ce8\u518c\u5e10\u53f7\u767b\u5f55 \u53c8\u62cd\u4e91\u7528\u6237\u63a7\u5236\u9762\u677f \u540e\uff0c\u60a8\u53ef\u4ee5\u521b\u5efa\u4e0d\u540c\u7684\u670d\u52a1\u4ee5\u65b9\u4fbf\u7ba1\u7406\u4f60\u7684\u6587\u4ef6\u8d44\u6e90\uff0c\u4f8b\u5982\u5b58\u50a8\u7c7b\u578b\u3001\u81ea\u4e3b\u6e90\u7ad9\u670d\u52a1\u7b49\u3002 \u63d0\u793a\uff1a \u6bcf\u4e2a\u670d\u52a1\u90fd\u53ef\u4ee5\u6388\u6743\u591a\u4e2a\u64cd\u4f5c\u5458\uff0c\u76f8\u5e94\u7684\uff0c\u6bcf\u4e2a\u64cd\u4f5c\u5458\u4e5f\u53ef\u4ee5\u88ab\u6388\u6743\u81f3\u591a\u4e2a\u670d\u52a1 \u53c8\u62cd\u4e91\u76ee\u524d\u6709\u5982\u4e0b\u51e0\u79cd\u670d\u52a1\u7c7b\u578b\uff1a \u5b58\u50a8\u7c7b\u670d\u52a1\uff1a\u53ef\u4ee5\u4e0a\u4f20\u4efb\u610f\u8d44\u6e90\uff0c\u8d44\u6e90\u5c06\u88ab\u4fdd\u5b58\u81f3 \u53c8\u62cd\u4e91\u7684\u670d\u52a1\u5668\uff0c\u4e14\u6587\u4ef6\u7684\u5916\u94fe\u5c06\u5177\u6709 CDN \u7f51\u7edc\u652f\u6301\u3002\u540c\u65f6\u8fd8\u63d0\u4f9b\u300c \u81ea\u5b9a\u4e49\u7248\u672c \u300d\u529f\u80fd\u3002 \u81ea\u4e3b\u6e90\u7ad9\u670d\u52a1\uff1a\u8d44\u6e90\u6587\u4ef6\u5168\u90fd\u5b58\u653e\u5728\u6e90\u7ad9\uff0c\u65e0\u9700\u91cd\u65b0\u4e0a\u4f20\u81f3 \u53c8\u62cd\u4e91\u670d\u52a1\u5668\uff0c\u9002\u5408\u6e90\u7ad9\u5185\u5bb9\u52a8\u9759\u6df7\u7528\u7684\u573a\u666f\uff0c\u53ef\u5b9e\u73b0\u5168\u7ad9\u52a0\u901f\u3002 \u66f4\u591a\u670d\u52a1\u7c7b\u578b\u7684\u533a\u522b\uff0c\u8bf7\u53c2\u9605 \u670d\u52a1\u5206\u51e0\u79cd\u7c7b\u578b\uff0c\u6709\u54ea\u4e9b\u533a\u522b\uff1f","title":"\u670d\u52a1\u540d"},{"location":"guide/#_4","text":"\u300c\u670d\u52a1\u300d\u521b\u5efa\u5b8c\u6210\u540e\uff0c\u7cfb\u7edf\u4f1a\u81ea\u52a8\u7ed1\u5b9a\u4e00\u4e2a\u9ed8\u8ba4\u57df\u540d <bucket>.b0.upaiyun.com \u3002\u6bd4\u5982\uff0c\u5f53\u4f60\u521b\u5efa\u4e86\u4e00\u4e2a\u540d\u53eb demo \u7684\u670d\u52a1\u65f6\uff0c\u90a3\u7cfb\u7edf\u4f1a\u81ea\u52a8\u7ed1\u5b9a\u9ed8\u8ba4\u57df\u540d demo.b0.upaiyun.com \u3002\u56e0\u6b64\uff0c\u5982\u679c\u8be5\u670d\u52a1\u6839\u76ee\u5f55\u6709\u4e00\u4e2a\u540d\u4e3a file.txt \u7684\u6587\u4ef6\uff0c\u90a3\u4e48\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528 http://demo.b0.upaiyun.com/file.txt \u6765\u8bbf\u95ee\u3002 \u82e5\u4f60\u62e5\u6709 \u5df2\u5907\u6848 \u7684\u57df\u540d\uff0c\u5219\u53ef\u4ee5\u7ed1\u5b9a\u81ea\u5df1\u7684\u72ec\u7acb\u57df\u540d\u3002\u7ed1\u5b9a\u72ec\u7acb\u57df\u540d\u540e\uff0c\u4f60\u53ef\u4ee5\u540c\u65f6\u4f7f\u7528\u9ed8\u8ba4\u57df\u540d\uff0c\u4ee5\u53ca\u4f60\u7ed1\u5b9a\u7684\u57df\u540d\u6765\u8bbf\u95ee\u4f60\u7684\u6587\u4ef6\u3002\u4f46\u662f\uff0c\u6211\u4eec\u5f3a\u70c8\u5efa\u8bae\u60a8\u4f7f\u7528\u81ea\u5b9a\u4e49\u7684\u57df\u540d\u53bb\u8bbf\u95ee\u6587\u4ef6\u3002 \u63d0\u793a\uff1a \u4e3a\u4e86\u907f\u514d\u56fe\u7247\u88ab\u76d7\u94fe\uff0c\u53ef\u4ee5\u6839\u636e\u5b9e\u9645\u9700\u8981\uff0c\u8bbe\u7f6e\u9632\u76d7\u94fe\u63aa\u65bd","title":"\u8bbf\u95ee\u57df\u540d"},{"location":"guide/#_5","text":"\u9632\u76d7\u94fe\u7684\u76f8\u5173\u8bbe\u7f6e\u8bf7\u53c2\u8003 \u8bbf\u95ee\u63a7\u5236","title":"\u9632\u76d7\u94fe"},{"location":"guide/#_6","text":"\u7f13\u5b58\u5237\u65b0\uff0c\u60a8\u53ef\u53c2\u8003 \u7f13\u5b58\u5237\u65b0","title":"\u7f13\u5b58\u5237\u65b0"},{"location":"guide/#_7","text":"","title":"\u56fe\u7247\u5904\u7406"},{"location":"guide/#_8","text":"\u7f29\u7565\u56fe\u7248\u672c\u63d0\u4f9b\u56fe\u7247 \u300c\u7f29\u7565\u56fe\u300d \u3001 \u300c\u6c34\u5370\u300d \u3001 \u300c\u65cb\u8f6c\u300d \u3001 \u300c\u683c\u5f0f\u8f6c\u6362\u300d\u7b49\u529f\u80fd\uff0c\u5b83\u5728 \u300c\u7ba1\u7406\u540e\u53f0\u300d > \u300c\u670d\u52a1\u300d > \u300c\u529f\u80fd\u914d\u7f6e\u300d > \u300c\u4e91\u5904\u7406\u300d > \u300c\u81ea\u5b9a\u4e49\u7248\u672c\u300d \u4e2d\u8bbe\u7f6e\u3002 \u5b83\u7684\u8c03\u7528\u683c\u5f0f\u4e3a\uff1a\u300c\u56fe\u7247 URL + \u95f4\u9694\u6807\u8bc6\u7b26 + \u7f29\u7565\u56fe\u7248\u672c\u540d\u79f0\u300d\u3002 \u4f8b\u5982\uff1a \u7f29\u7565\u56fe\u7248\u672c\u540d\u79f0\u4e3a\uff1a width200 \uff0c \u95f4\u9694\u6807\u8bc6\u7b26\u4e3a\uff1a ! \uff0c \u89c4\u5219\u4e3a \u9650\u5b9a\u5bbd\u5ea6\uff0c\u9ad8\u5ea6\u81ea\u9002\u5e94 \u3001\u5bbd\u5ea6\u503c\u662f 200 \u90a3\u4e48\uff0c\u8c03\u7528\u8fd9\u4e2a\u7248\u672c\u7684\u683c\u5f0f\u4e3a\uff1a http://demo.b0.upaiyun.com/img/demo.jpg!width200 \u8fd9\u662f\u4e00\u4e2a\u62e5\u6709\u5bbd\u5ea6\u4e3a 200px \u7684\u56fe\u7247\u3002","title":"\u7f29\u7565\u56fe\u7248\u672c\u4f5c\u56fe"},{"location":"guide/#url","text":"URL \u4f5c\u56fe\u662f\u628a\u56fe\u7247\u5904\u7406\u53c2\u6570\u76f4\u63a5\u8ffd\u52a0\u5728\u56fe\u7247 URL \u540e\u7684\u4e00\u79cd\u4f5c\u56fe\u65b9\u5f0f\u3002 \u5b83\u7684\u8c03\u7528\u683c\u5f0f\u4e3a\uff1a\u300c\u56fe\u7247 URL + \u95f4\u9694\u6807\u8bc6\u7b26 + \u5904\u7406\u53c2\u6570\u300d\u3002 \u4f8b\u5982\uff1a \u5904\u7406\u53c2\u6570\u4e3a\uff1a /rotate/90 \uff0c\u95f4\u9694\u6807\u8bc6\u7b26\u4e3a\uff1a _ \u90a3\u4e48\uff0c\u8bbf\u95ee\u7684 URL \u4e3a\uff1a http://upyun-assets.b0.upaiyun.com/docs/guide/sample.jpg_/rotate/90 //\u56fe\u7247\u65cb\u8f6c 90 \u5ea6 \u6548\u679c\u5982\u56fe \u6240\u6709\u56fe\u7247\u5904\u7406\u53c2\u6570\u7684\u8bf4\u660e\uff0c\u8bf7\u53c2\u8003 \u4f5c\u56fe\u53c2\u6570 \u3002","title":"URL \u4f5c\u56fe"},{"location":"guide/#_9","text":"\u6b64\u5916\uff0c\u60a8\u4e5f\u53ef\u4ee5\u5728\u4e0a\u4f20\u56fe\u7247\u7684\u540c\u65f6\u4f7f\u7528\u540c\u6b65\u56fe\u7247\u5904\u7406\u670d\u52a1\uff0c\u5728\u56fe\u7247\u4e0a\u4f20\u7684\u8bf7\u6c42\u4e2d\u9644\u52a0\u4e0a\u56fe\u7247\u5904\u7406\u53c2\u6570\uff0c\u8fd9\u6837\uff0c\u56fe\u7247\u5728\u4e0a\u4f20\u5b8c\u6210\u540e\u4f1a\u81ea\u52a8\u8fdb\u884c\u5904\u7406\uff0c\u5e76\u4fdd\u5b58\u5904\u7406\u540e\u7684\u56fe\u7247\u3002\u5982\uff1a \u4e0a\u4f20\u7684\u56fe\u7247\uff0c\u5927\u5c0f\u4e3a\uff1a400x320 \u4f5c\u56fe\u53c2\u6570\u4e3a: 'x-gmkerl-thumb: /fw/200/unsharp/true' //\u9650\u5b9a\u5bbd\u5ea6\uff0c\u9ad8\u5ea6\u81ea\u9002\u5e94;\u5bbd\u5ea6\u503c\u662f200\uff1b\u9510\u5316\uff08\u9ad8\u4eae\uff09\u56fe\u7247 \u6700\u7ec8\u4fdd\u5b58\u7684\u56fe\u7247\uff0c\u5927\u5c0f\u4e3a\uff1a200x160 \u66f4\u591a\u63cf\u8ff0\u8bf7\u89c1 \u4e0a\u4f20\u540c\u6b65\u4f5c\u56fe \u3002\u5982\u679c\u60a8\u9700\u8981\u4fdd\u5b58\u4e0a\u4f20\u7684\u539f\u56fe\u6216\u8005\u751f\u6210\u591a\u5f20\u56fe\u7247\uff0c\u53ef\u4ee5\u53c2\u8003 \u4e0a\u4f20\u5f02\u6b65\u4f5c\u56fe \u3002","title":"\u4e0a\u4f20\u4f5c\u56fe"},{"location":"guide/#_10","text":"\u5f02\u6b65\u97f3\u89c6\u9891\u5904\u7406\u662f\u5bf9 \u5df2\u7ecf\u4e0a\u4f20\u5230\u4e91\u5b58\u50a8\u4e2d\u7684\u97f3\u89c6\u9891\u6587\u4ef6 \u8fdb\u884c\u89c6\u9891\u8f6c\u7801\u3001\u97f3\u9891\u8f6c\u7801\u3001HLS \u5207\u7247\u3001\u89c6\u9891\u622a\u56fe\u3001\u89c6\u9891\u6c34\u5370\u3001\u5143\u4fe1\u606f\u83b7\u53d6\u7b49\u5904\u7406\uff0c\u5904\u7406\u5b8c\u6210\u540e\uff0c\u4ee5\u56de\u8c03\u7684\u65b9\u5f0f\u901a\u77e5\u7528\u6237\u5904\u7406\u7ed3\u679c\u3002 \u5177\u4f53\u8bf7\u53c2\u8003 \u5f02\u6b65\u97f3\u89c6\u9891\u5904\u7406 \u3002 \u5982\u679c\u9700\u8981\u5728\u97f3\u89c6\u9891\u6587\u4ef6\u4e0a\u4f20\u7684\u540c\u65f6\u4f7f\u7528\u5f02\u6b65\u97f3\u89c6\u9891\u5904\u7406\u670d\u52a1\uff0c\u53ef\u4ee5\u53c2\u8003 \u4e0a\u4f20\u9884\u5904\u7406 \u3002","title":"\u5f02\u6b65\u97f3\u89c6\u9891\u5904\u7406"},{"location":"guide/#_11","text":"\u4e91\u5b89\u5168\u53c2\u8003 \u4e91\u5b89\u5168\u6587\u6863","title":"\u4e91\u5b89\u5168"},{"location":"guide/#_12","text":"","title":"\u670d\u52a1\u65b9\u5f0f"},{"location":"guide/#ftpftps","text":"\u53c8\u62cd\u4e91\u63d0\u4f9b\u4e86 FTP/FTPS \u7684\u65b9\u5f0f\uff0c\u4ee5\u65b9\u4fbf\u7528\u6237\u901a\u8fc7\u56fe\u5f62\u5316\u754c\u9762\u7ba1\u7406\u5b58\u50a8\u8d44\u6e90\u3002 \u4f7f\u7528\u65b9\u6cd5\u5982\u4e0b\uff1a \u5730\u5740\uff08\u4e3b\u673a\uff09\uff1a * \u667a\u80fd\u9009\u8def\uff1av0.ftp.upyun.com * \u7535\u4fe1\u7ebf\u8def\uff1av1.ftp.upyun.com * \u8054\u901a\u7ebf\u8def\uff1av2.ftp.upyun.com * \u79fb\u52a8\u7ebf\u8def\uff1av3.ftp.upyun.com \u52a0\u5bc6\uff1a\u9009\u62e9 \u4e0d\u52a0\u5bc6 \u4f7f\u7528 FTP\uff0c\u9009\u62e9 \u663e\u5f0f\u7684 FTP over TLS \u6216 TLS/SSL \u663e\u5f0f\u52a0\u5bc6 \u4f7f\u7528 FTPS \u7528\u6237\u540d\uff1a \u64cd\u4f5c\u5458\u540d/\u670d\u52a1\u540d \uff0c\u5982 operator/mybucket \u5bc6\u7801\uff1a\u64cd\u4f5c\u5458\u7684\u5bc6\u7801 \u7aef\u53e3\uff1a21 \u6ce8\uff1a \u7f16\u7801\u65b9\u5f0f\uff08\u5b57\u7b26\u96c6\uff09\uff1a\u7edf\u4e00\u4f7f\u7528 UTF-8 \u3002 \u4f7f\u7528 \u663e\u5f0f\u7684 FTP over TLS \u65f6\uff0c\u5ba2\u6237\u7aef\u4f1a\u63d0\u793a\u8bc1\u4e66\u9700\u8981\u4fe1\u4efb\uff0c\u9009\u62e9 \u662f \u6216 \u786e\u5b9a \u5373\u53ef\u3002 \u4f7f\u7528 \u663e\u5f0f\u7684 FTP over TLS \u65f6\uff0c\u4f1a\u5bf9\u547d\u4ee4\uff08\u7528\u6237\u540d\u3001\u5bc6\u7801\u3001\u4e0a\u4f20\u3001\u4e0b\u8f7d\u7b49\u6307\u4ee4\uff09\u8fdb\u884c\u52a0\u5bc6\u3002 \u5f53\u4e0a\u4f20\u8f83\u5927\u7684\u6587\u4ef6\u65f6\uff0c\u51fa\u73b0\u8fdb\u5ea6\u662f 100% \u786e\u6ca1\u6709\u663e\u793a\u4e0a\u4f20\u5b8c\u6210\u7684\u60c5\u51b5\uff0c\u8bf7\u60a8\u8010\u5fc3\u7b49\u5f85 15 \u79d2\u5de6\u53f3\uff0c\u6b64\u65f6\u7cfb\u7edf\u6b63\u5728\u628a\u63a5\u6536\u5230\u7684\u6587\u4ef6\u5199\u5165\u60a8\u7684\u5b58\u50a8\u670d\u52a1\u4e2d\uff0c\u6587\u4ef6\u5199\u5165\u5b8c\u6bd5\u540e\uff0c\u624d\u4f1a\u663e\u793a\u4e0a\u4f20\u5b8c\u6210\u3002","title":"FTP/FTPS"},{"location":"guide/#api","text":"\u9664\u4e86\u4f7f\u7528\u7b80\u5355\u7684 FTP \u7684\u65b9\u5f0f\u4e4b\u5916\uff0c\u53c8\u62cd\u4e91\u8fd8\u63d0\u4f9b\u4e86\u591a\u79cd\u4e0d\u540c\u7684 API\uff0c\u65b9\u4fbf\u5728\u4e0d\u540c\u7684\u7f16\u7a0b\u73af\u5883\u4e0b\u4f7f\u7528\u53c8\u62cd\u4e91\u670d\u52a1\uff0c\u5176\u4e2d\u5305\u62ec\uff1a HTTP REST API \uff1a\u8be5\u63a5\u53e3\u662f\u57fa\u4e8e\u6807\u51c6 HTTP \u534f\u8bae\u7684 API \u63a5\u53e3\uff0c\u5177\u5907\u4e86\u6587\u4ef6\u8d44\u6e90\u7684\u589e\u5220\u6539\u67e5\u529f\u80fd\uff0c\u5efa\u8bae\u5728\u670d\u52a1\u7aef\u4f7f\u7528 HTTP FORM API \uff1a\u8868\u5355 API \u63a5\u53e3\u66f4\u9002\u7528\u4e8e\u79fb\u52a8 App \u5f00\u53d1\uff0c\u4e30\u5bcc\u7684\u53c2\u6570\u63a5\u53e3\u548c\u56de\u8c03\u673a\u5236\u80fd\u591f\u76f4\u63a5\u5c06\u7ec8\u7aef\u7528\u6237\u7684\u6587\u4ef6\u4e0a\u4f20\u81f3 \u53c8\u62cd\u4e91\u670d\u52a1\u5668\uff0c\u800c\u4e0d\u9700\u8981\u7ecf\u8fc7\u5ba2\u6237\u81ea\u5df1\u7684\u670d\u52a1\u5668\uff0c\u5927\u5927\u63d0\u9ad8\u4e86\u5904\u7406\u901f\u5ea6\u548c\u7528\u6237\u4f53\u9a8c \u5206\u5757\u4e0a\u4f20 API \uff1a\u5728\u8868\u5355\u4e0a\u4f20\u7684\u57fa\u7840\u4e0a\uff0c\u5728\u4e0a\u4f20\u5927\u6587\u4ef6\u7684\u65f6\u5019\uff0c\u9762\u5bf9\u6709\u53ef\u80fd\u56e0\u4e3a\u7f51\u7edc\u8d28\u91cf\u7b49\u5176\u4ed6\u539f\u56e0\u800c\u9020\u6210\u7684\u4e0a\u4f20\u5931\u8d25\uff0c\u53ef\u4ee5\u4f7f\u7528\u5206\u5757\u4e0a\u4f20\u65b9\u5f0f\u4e0a\u4f20\u6587\u4ef6 \u7f13\u5b58\u5237\u65b0 API \uff1a\u8be5\u529f\u80fd\u53ea\u9002\u7528\u4e8e CDN \u7528\u6237\u6216 CDN \u7c7b\u670d\u52a1\u3002\u5f53\u6e90\u670d\u52a1\u5668\u7684\u8d44\u6e90\u53d1\u751f\u53d8\u66f4\u540e\uff0c\u53ef\u4ee5\u8c03\u7528\u8be5 API \u63a5\u53e3\u544a\u77e5 \u53c8\u62cd\u4e91\u7f13\u5b58\u5237\u65b0\uff0c\u4ece\u800c\u8fbe\u5230\u5916\u7f51\u8bbf\u95ee\u65f6\u83b7\u53d6\u5230\u7684\u662f\u6700\u65b0\u7684\u8d44\u6e90 \u97f3\u89c6\u9891\u9884\u5904\u7406 API \uff1a\u97f3\u89c6\u9891\u5904\u7406\u63a5\u53e3\u7528\u4e8e\u5904\u7406\u5df2\u7ecf\u4e0a\u4f20\u5230\u5bf9\u5e94\u5b58\u50a8\u670d\u52a1\u4e2d\u7684\u97f3\u89c6\u9891\u6587\u4ef6\uff0c\u8fdb\u884c\u8f6c\u7801\u3001\u622a\u56fe\u7b49\u64cd\u4f5c\u3002\u5728\u5904\u7406\u5b8c\u6210\u4e4b\u540e\uff0c\u5f02\u6b65\u901a\u77e5\u7528\u6237\u5904\u7406\u7ed3\u679c","title":"API"},{"location":"guide/php_rest_guide/","text":"\u8fd9\u4e00\u90e8\u5206\u5c06\u8bf4\u660e\u5982\u4f55\u5feb\u901f\u4f7f\u7528 PHP \u5411\u53c8\u62cd\u4e91\u4e0a\u521b\u5efa\u7684\u670d\u52a1\u4e0a\u4f20\u4e00\u4efd\u6587\u4ef6\uff0c\u901a\u8fc7\u8fd9\u4e2a\u4f8b\u5b50\uff0c\u4f60\u5c06\u5b66\u4f1a\u5982\u4f55\u751f\u6210\u7b7e\u540d\u5e76\u8c03\u7528\u6211\u4eec\u7684 REST API \u8fdb\u884c\u5de5\u4f5c\u3002 \u8bb2\u89e3\u4f8b\u5b50\u4e4b\u524d\uff0c\u5047\u8bbe\u4f60\u5df2\u7ecf\u6ce8\u518c\u4e86\u53c8\u62cd\u4e91\u7684\u5e10\u53f7\uff0c\u5e76\u521b\u5efa\u4e86\u670d\u52a1\uff0c\u5206\u914d\u4e86\u64cd\u4f5c\u5458\u3002\u793a\u4f8b\u4e2d\u6211\u4eec\u67b6\u8bbe\u4f7f\u7528\u4e00\u4e0b\u670d\u52a1\u548c\u64cd\u4f5c\u5458\uff08\u865a\u6784\uff0c\u8bf7\u5148\u81ea\u884c\u6ce8\u518c\u548c\u521b\u5efa\u53c8\u62cd\u4e91\u670d\u52a1\uff09\uff1a \u670d\u52a1\u540d: demobucket \u64cd\u4f5c\u5458\u5e10\u53f7: operator \u64cd\u4f5c\u5458\u5bc6\u7801: operatorpassword \u51c6\u5907\u6587\u4ef6 \u00b6 \u672c\u793a\u4f8b\u76ee\u6807\u662f\u5c06\u672c\u5730\u6587\u4ef6 assets/bar.txt \u4e0a\u4f20\u5230 demobucket \u670d\u52a1\uff0c\u5e76\u91cd\u547d\u540d\u4e3a foo.txt \u3002 \u6240\u4ee5\u6700\u7ec8\u7684\u670d\u52a1\u7aef\u8def\u5f84\u662f $uri = '/demobucket/foo.txt' \u3002 $bucketName = 'demobucket'; //\u88ab\u4e0a\u4f20\u7684\u6587\u4ef6\u8def\u5f84 $filePath = 'assets/bar.txt'; $fileSize = filesize($filePath); //\u6587\u4ef6\u4e0a\u4f20\u5230\u670d\u52a1\u5668\u7684\u670d\u52a1\u7aef\u8def\u5f84 $serverPath = 'foo.txt'; $uri = \"/$bucketName/$serverPath\"; \u751f\u6210\u7b7e\u540d \u00b6 \u793a\u4f8b\u4e2d\u4f7f\u7528\u5b89\u5168\u7684\u7b7e\u540d\u8ba4\u8bc1\uff0c\u5f3a\u70c8\u5efa\u8bae\u4f60\u5728\u5b9e\u9645\u7684\u751f\u4ea7\u73af\u5883\u4e2d\u90fd\u4f7f\u7528\u8fd9\u79cd\u65b9\u5f0f\u6765\u8c03\u7528\u6211\u4eec\u7684 API\u3002 \u4e0a\u4f20\u6587\u4ef6\u63a5\u53e3\u9700\u8981\u901a\u8fc7 HTTP PUT \u65b9\u6cd5\u8c03\u7528\uff0c\u7b7e\u540d\u751f\u6210\u53ef\u4ee5\u53c2\u8003\u5982\u4e0b\u65b9\u5f0f\uff1a //\u751f\u6210\u7b7e\u540d\u65f6\u95f4\u3002\u5f97\u5230\u7684\u65e5\u671f\u683c\u5f0f\u5982\uff1aThu, 11 Jul 2014 05:34:12 GMT $date = gmdate('D, d M Y H:i:s \\G\\M\\T'); //\u672c\u793a\u4f8b\u53ea\u4e0a\u4f20\u4e86\u6587\u4ef6\uff0c\u6240\u4ee5 HTTP BODY \u957f\u5ea6\u7b49\u4e8e\u6587\u4ef6\u957f\u5ea6 $contentLength = $fileSize; $sign = md5(\"PUT&{$uri}&{$date}&{$contentLength}&\".md5($operatorPwd)); \u53d1\u9001\u8bf7\u6c42 \u00b6 \u5c06\u4e0a\u4e00\u6b65\u751f\u6210\u7684\u7b7e\u540d\uff0c\u653e\u5230 HTTP \u6d88\u606f\u5934\u4e2d\u3002\u5982\u679c\u6ca1\u6709\u7b7e\u540d\u6216\u8005\u7b7e\u540d\u9519\u8bef\uff0c\u5219\u4f1a\u5bfc\u81f4\u63a5\u53e3\u8c03\u7528\u5931\u8d25\uff0c\u670d\u52a1\u7aef\u4f1a\u8fd4\u56de HTTP \u72b6\u6001\u7801 401 \u683c\u5f0f\u5982\u4e0b\uff1a $headers = array( \"Expect:\", \"Date: \".$date, // header \u4e2d\u4f7f\u7528\u7684\u65f6\u95f4\u5fc5\u987b\u548c\u751f\u6210\u7b7e\u540d\u7684\u65f6\u95f4\u76f8\u540c \"Authorization: UpYun $operatorName:\".$sign ); curl_setopt($ch, CURLOPT_HTTPHEADER, $headers); \u5b8c\u6574\u4ee3\u7801 \u00b6 \u901a\u8fc7 php curl \u53d1\u9001 put \u8bf7\u6c42\uff0c\u8c03\u7528\u63a5\u53e3\u3002\u5018\u82e5\u63a5\u53e3\u8fd4\u56de\u7684 HTTP \u72b6\u6001\u7801\u7b49\u4e8e 200 \uff0c\u8bf4\u660e\u63a5\u53e3\u8c03\u7528\u6210\u529f - CURLOPT_INFILE \u8bbe\u7f6e\u4e0a\u4f20\u6587\u4ef6\u7684\u53e5\u67c4 - CURLOPT_INFILESIZE \u8bbe\u7f6e\u4e0a\u4f20\u6587\u4ef6\u5927\u5c0f \u6700\u7ec8\u9879\u76ee\u7ed3\u6784\u5982\u4e0b /- |-assets |-bar.txt |-upload.php upload.php \u5b8c\u6574\u4ee3\u7801\u5982\u4e0b\uff1a <?php $bucketName = 'demobucket'; $operatorName = 'operator'; $operatorPwd = 'operatorpassword'; //\u88ab\u4e0a\u4f20\u7684\u6587\u4ef6\u8def\u5f84 $filePath = 'assets/bar.txt'; $fileSize = filesize($filePath); //\u6587\u4ef6\u4e0a\u4f20\u5230\u670d\u52a1\u5668\u7684\u670d\u52a1\u7aef\u8def\u5f84 $serverPath = 'foo.txt'; $uri = \"/$bucketName/$serverPath\"; //\u751f\u6210\u7b7e\u540d\u65f6\u95f4\u3002\u5f97\u5230\u7684\u65e5\u671f\u683c\u5f0f\u5982\uff1aThu, 11 Jul 2014 05:34:12 GMT $date = gmdate('D, d M Y H:i:s \\G\\M\\T'); $sign = md5(\"PUT&{$uri}&{$date}&{$fileSize}&\".md5($operatorPwd)); $ch = curl_init('http://v0.api.upyun.com' . $uri); $headers = array( \"Expect:\", \"Date: \".$date, // header \u4e2d\u9700\u8981\u4f7f\u7528\u751f\u6210\u7b7e\u540d\u7684\u65f6\u95f4 \"Authorization: UpYun $operatorName:\".$sign ); curl_setopt($ch, CURLOPT_HTTPHEADER, $headers); curl_setopt($ch, CURLOPT_PUT, true); $fh = fopen($filePath, 'rb'); curl_setopt($ch, CURLOPT_INFILE, $fh); curl_setopt($ch, CURLOPT_INFILESIZE, $fileSize); curl_setopt($ch, CURLOPT_TIMEOUT, 60); curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1); $result = curl_exec($ch); if(curl_getinfo($ch, CURLINFO_HTTP_CODE) === 200) { //\"\u4e0a\u4f20\u6210\u529f\" } else { $errorMessage = sprintf(\"UPYUN API ERROR:%s\", $result); echo $errorMessage; } curl_close($ch); \u81f3\u6b64\uff0c\u60a8\u5df2\u7ecf\u5b66\u4f1a\u4e86\u5982\u4f55\u57fa\u4e8e PHP\uff0c\u4f7f\u7528\u53c8\u62cd\u4e91\u7684 HTTP REST API \u4e0a\u4f20\u6587\u4ef6\u4e86\uff0c\u60a8\u53ef\u4ee5\u8bbf\u95ee HTTP REST API \u6587\u6863 \u6df1\u5165\u5b66\u4e60 REST API \u7684\u5176\u4ed6\u529f\u80fd\u548c\u53c2\u6570\u3002 \u6216\u8005\uff0c\u60a8\u4e5f\u53ef\u4ee5\u524d\u5f80 \u8d44\u6e90\u4e0b\u8f7d \u9875\u9762\u4e0b\u8f7d\u6211\u4eec\u6240\u63d0\u4f9b\u7684 SDK\uff0c\u6765\u52a0\u901f\u4f60\u7684\u5f00\u53d1\u6d41\u7a0b\u3002","title":"Php rest guide"},{"location":"guide/php_rest_guide/#_1","text":"\u672c\u793a\u4f8b\u76ee\u6807\u662f\u5c06\u672c\u5730\u6587\u4ef6 assets/bar.txt \u4e0a\u4f20\u5230 demobucket \u670d\u52a1\uff0c\u5e76\u91cd\u547d\u540d\u4e3a foo.txt \u3002 \u6240\u4ee5\u6700\u7ec8\u7684\u670d\u52a1\u7aef\u8def\u5f84\u662f $uri = '/demobucket/foo.txt' \u3002 $bucketName = 'demobucket'; //\u88ab\u4e0a\u4f20\u7684\u6587\u4ef6\u8def\u5f84 $filePath = 'assets/bar.txt'; $fileSize = filesize($filePath); //\u6587\u4ef6\u4e0a\u4f20\u5230\u670d\u52a1\u5668\u7684\u670d\u52a1\u7aef\u8def\u5f84 $serverPath = 'foo.txt'; $uri = \"/$bucketName/$serverPath\";","title":"\u51c6\u5907\u6587\u4ef6"},{"location":"guide/php_rest_guide/#_2","text":"\u793a\u4f8b\u4e2d\u4f7f\u7528\u5b89\u5168\u7684\u7b7e\u540d\u8ba4\u8bc1\uff0c\u5f3a\u70c8\u5efa\u8bae\u4f60\u5728\u5b9e\u9645\u7684\u751f\u4ea7\u73af\u5883\u4e2d\u90fd\u4f7f\u7528\u8fd9\u79cd\u65b9\u5f0f\u6765\u8c03\u7528\u6211\u4eec\u7684 API\u3002 \u4e0a\u4f20\u6587\u4ef6\u63a5\u53e3\u9700\u8981\u901a\u8fc7 HTTP PUT \u65b9\u6cd5\u8c03\u7528\uff0c\u7b7e\u540d\u751f\u6210\u53ef\u4ee5\u53c2\u8003\u5982\u4e0b\u65b9\u5f0f\uff1a //\u751f\u6210\u7b7e\u540d\u65f6\u95f4\u3002\u5f97\u5230\u7684\u65e5\u671f\u683c\u5f0f\u5982\uff1aThu, 11 Jul 2014 05:34:12 GMT $date = gmdate('D, d M Y H:i:s \\G\\M\\T'); //\u672c\u793a\u4f8b\u53ea\u4e0a\u4f20\u4e86\u6587\u4ef6\uff0c\u6240\u4ee5 HTTP BODY \u957f\u5ea6\u7b49\u4e8e\u6587\u4ef6\u957f\u5ea6 $contentLength = $fileSize; $sign = md5(\"PUT&{$uri}&{$date}&{$contentLength}&\".md5($operatorPwd));","title":"\u751f\u6210\u7b7e\u540d"},{"location":"guide/php_rest_guide/#_3","text":"\u5c06\u4e0a\u4e00\u6b65\u751f\u6210\u7684\u7b7e\u540d\uff0c\u653e\u5230 HTTP \u6d88\u606f\u5934\u4e2d\u3002\u5982\u679c\u6ca1\u6709\u7b7e\u540d\u6216\u8005\u7b7e\u540d\u9519\u8bef\uff0c\u5219\u4f1a\u5bfc\u81f4\u63a5\u53e3\u8c03\u7528\u5931\u8d25\uff0c\u670d\u52a1\u7aef\u4f1a\u8fd4\u56de HTTP \u72b6\u6001\u7801 401 \u683c\u5f0f\u5982\u4e0b\uff1a $headers = array( \"Expect:\", \"Date: \".$date, // header \u4e2d\u4f7f\u7528\u7684\u65f6\u95f4\u5fc5\u987b\u548c\u751f\u6210\u7b7e\u540d\u7684\u65f6\u95f4\u76f8\u540c \"Authorization: UpYun $operatorName:\".$sign ); curl_setopt($ch, CURLOPT_HTTPHEADER, $headers);","title":"\u53d1\u9001\u8bf7\u6c42"},{"location":"guide/php_rest_guide/#_4","text":"\u901a\u8fc7 php curl \u53d1\u9001 put \u8bf7\u6c42\uff0c\u8c03\u7528\u63a5\u53e3\u3002\u5018\u82e5\u63a5\u53e3\u8fd4\u56de\u7684 HTTP \u72b6\u6001\u7801\u7b49\u4e8e 200 \uff0c\u8bf4\u660e\u63a5\u53e3\u8c03\u7528\u6210\u529f - CURLOPT_INFILE \u8bbe\u7f6e\u4e0a\u4f20\u6587\u4ef6\u7684\u53e5\u67c4 - CURLOPT_INFILESIZE \u8bbe\u7f6e\u4e0a\u4f20\u6587\u4ef6\u5927\u5c0f \u6700\u7ec8\u9879\u76ee\u7ed3\u6784\u5982\u4e0b /- |-assets |-bar.txt |-upload.php upload.php \u5b8c\u6574\u4ee3\u7801\u5982\u4e0b\uff1a <?php $bucketName = 'demobucket'; $operatorName = 'operator'; $operatorPwd = 'operatorpassword'; //\u88ab\u4e0a\u4f20\u7684\u6587\u4ef6\u8def\u5f84 $filePath = 'assets/bar.txt'; $fileSize = filesize($filePath); //\u6587\u4ef6\u4e0a\u4f20\u5230\u670d\u52a1\u5668\u7684\u670d\u52a1\u7aef\u8def\u5f84 $serverPath = 'foo.txt'; $uri = \"/$bucketName/$serverPath\"; //\u751f\u6210\u7b7e\u540d\u65f6\u95f4\u3002\u5f97\u5230\u7684\u65e5\u671f\u683c\u5f0f\u5982\uff1aThu, 11 Jul 2014 05:34:12 GMT $date = gmdate('D, d M Y H:i:s \\G\\M\\T'); $sign = md5(\"PUT&{$uri}&{$date}&{$fileSize}&\".md5($operatorPwd)); $ch = curl_init('http://v0.api.upyun.com' . $uri); $headers = array( \"Expect:\", \"Date: \".$date, // header \u4e2d\u9700\u8981\u4f7f\u7528\u751f\u6210\u7b7e\u540d\u7684\u65f6\u95f4 \"Authorization: UpYun $operatorName:\".$sign ); curl_setopt($ch, CURLOPT_HTTPHEADER, $headers); curl_setopt($ch, CURLOPT_PUT, true); $fh = fopen($filePath, 'rb'); curl_setopt($ch, CURLOPT_INFILE, $fh); curl_setopt($ch, CURLOPT_INFILESIZE, $fileSize); curl_setopt($ch, CURLOPT_TIMEOUT, 60); curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1); $result = curl_exec($ch); if(curl_getinfo($ch, CURLINFO_HTTP_CODE) === 200) { //\"\u4e0a\u4f20\u6210\u529f\" } else { $errorMessage = sprintf(\"UPYUN API ERROR:%s\", $result); echo $errorMessage; } curl_close($ch); \u81f3\u6b64\uff0c\u60a8\u5df2\u7ecf\u5b66\u4f1a\u4e86\u5982\u4f55\u57fa\u4e8e PHP\uff0c\u4f7f\u7528\u53c8\u62cd\u4e91\u7684 HTTP REST API \u4e0a\u4f20\u6587\u4ef6\u4e86\uff0c\u60a8\u53ef\u4ee5\u8bbf\u95ee HTTP REST API \u6587\u6863 \u6df1\u5165\u5b66\u4e60 REST API \u7684\u5176\u4ed6\u529f\u80fd\u548c\u53c2\u6570\u3002 \u6216\u8005\uff0c\u60a8\u4e5f\u53ef\u4ee5\u524d\u5f80 \u8d44\u6e90\u4e0b\u8f7d \u9875\u9762\u4e0b\u8f7d\u6211\u4eec\u6240\u63d0\u4f9b\u7684 SDK\uff0c\u6765\u52a0\u901f\u4f60\u7684\u5f00\u53d1\u6d41\u7a0b\u3002","title":"\u5b8c\u6574\u4ee3\u7801"},{"location":"live/Introduction/","text":"\u4ea7\u54c1\u6982\u8ff0 \u00b6 \u53c8\u62cd\u76f4\u64ad\u4e91\uff08UPLive\uff09\uff0c\u81f4\u529b\u4e8e\u4e3a\u7528\u6237\u63d0\u4f9b\u7b80\u5355\u548c\u5feb\u901f\u63a5\u5165\u7684\u6574\u4f53\u89e3\u51b3\u65b9\u6848\u3002\u53c8\u62cd\u4e91\u76f4\u64ad\u57fa\u4e8e\u53c8\u62cd\u4e91\u5185\u5bb9\u5206\u53d1\u7f51\u7edc\u4e3a\u76f4\u64ad\u5e94\u7528\u63d0\u4f9b\u8d85\u4f4e\u5ef6\u8fdf\u3001\u9ad8\u7801\u7387\u3001\u9ad8\u5e76\u53d1\u7684\u4ece\u63a8\u6d41\u7aef\u5230\u64ad\u653e\u7aef\u7684\u4e00\u7ad9\u5f0f\u89e3\u51b3\u65b9\u6848\uff0c\u652f\u6301 RTMP\u3001HTTP-FLV \u548c HLS \u8f93\u51fa\u7b49\u57fa\u672c\u529f\u80fd\uff0c\u5305\u62ec\u5f55\u5236\u3001\u8f6c\u7801\u7b49\u589e\u503c\u670d\u52a1\u3002 \u4ea7\u54c1\u67b6\u6784 \u00b6 \u53c8\u62cd\u6e90 \u00b6 \u76f4\u64ad CDN \u4e3b\u8981\u652f\u6301\u4e24\u79cd\u6a21\u5f0f\uff0c\u4e00\u79cd\u662f\u5ba2\u6237\u63a8\u6d41\u81f3\u53c8\u62cd CDN\uff0c\u63a8\u6d41\u81f3\u53c8\u62cd\u65f6\uff0c\u7528\u6237\u53ea\u9700\u8981\u505a\u597d\u63a8\u62c9\u6d41\u5ba2\u6237\u7aef\uff0c\u4e3b\u64ad\u5728\u63a8\u6d41\u7aef\u5c06\u6d41\u901a\u8fc7\u63a8\u6d41\u5668\u63a8\u9001\u5230 CDN\uff0c\u7ecf\u8fc7 CDN \u52a0\u901f\u540e\uff0c\u64ad\u653e\u7aef\u53ef\u5c31\u8fd1\u8bf7\u6c42\u5230\u76f8\u5e94\u7684\u6d41\uff0c\u5176\u4ed6\u6e90\u7ad9\u529f\u80fd\u6bd4\u5982\u8f6c\u7801\u5f55\u5236\u90fd\u53ef\u4ee5\u7531 CDN \u5382\u5546\u5b8c\u6210\u3002 \u81ea\u4e3b\u6e90 \u00b6 \u53e6\u4e00\u79cd\u662f\u5ba2\u6237\u63d0\u4f9b\u6e90\u7ad9\uff0c\u53c8\u62cd CDN \u56de\u5ba2\u6237\u6e90\u7ad9\u62c9\u6d41\uff0c\u8be5\u65b9\u5f0f\u5ba2\u6237\u5bf9\u5176\u4e3b\u64ad\u6d41\u7684\u53ef\u63a7\u7a0b\u5ea6\u9ad8\uff0c\u540c\u65f6\u9700\u8981\u4fdd\u969c\u6e90\u7ad9\u7684\u7a33\u5b9a\u6027\uff0c\u53ca\u4e3b\u64ad\u4e0e\u6e90\u7ad9\u95f4\u7684\u7f51\u7edc\u3002 \u5177\u4f53\u4f7f\u7528\u54ea\u79cd\u6e90\u7ad9\uff0c\u6839\u636e\u5b9e\u9645\u7684\u4e1a\u52a1\u60c5\u51b5\u800c\u5b9a\u3002","title":"\u4ea7\u54c1\u7b80\u4ecb"},{"location":"live/Introduction/#_1","text":"\u53c8\u62cd\u76f4\u64ad\u4e91\uff08UPLive\uff09\uff0c\u81f4\u529b\u4e8e\u4e3a\u7528\u6237\u63d0\u4f9b\u7b80\u5355\u548c\u5feb\u901f\u63a5\u5165\u7684\u6574\u4f53\u89e3\u51b3\u65b9\u6848\u3002\u53c8\u62cd\u4e91\u76f4\u64ad\u57fa\u4e8e\u53c8\u62cd\u4e91\u5185\u5bb9\u5206\u53d1\u7f51\u7edc\u4e3a\u76f4\u64ad\u5e94\u7528\u63d0\u4f9b\u8d85\u4f4e\u5ef6\u8fdf\u3001\u9ad8\u7801\u7387\u3001\u9ad8\u5e76\u53d1\u7684\u4ece\u63a8\u6d41\u7aef\u5230\u64ad\u653e\u7aef\u7684\u4e00\u7ad9\u5f0f\u89e3\u51b3\u65b9\u6848\uff0c\u652f\u6301 RTMP\u3001HTTP-FLV \u548c HLS \u8f93\u51fa\u7b49\u57fa\u672c\u529f\u80fd\uff0c\u5305\u62ec\u5f55\u5236\u3001\u8f6c\u7801\u7b49\u589e\u503c\u670d\u52a1\u3002","title":"\u4ea7\u54c1\u6982\u8ff0"},{"location":"live/Introduction/#_2","text":"","title":"\u4ea7\u54c1\u67b6\u6784"},{"location":"live/Introduction/#_3","text":"\u76f4\u64ad CDN \u4e3b\u8981\u652f\u6301\u4e24\u79cd\u6a21\u5f0f\uff0c\u4e00\u79cd\u662f\u5ba2\u6237\u63a8\u6d41\u81f3\u53c8\u62cd CDN\uff0c\u63a8\u6d41\u81f3\u53c8\u62cd\u65f6\uff0c\u7528\u6237\u53ea\u9700\u8981\u505a\u597d\u63a8\u62c9\u6d41\u5ba2\u6237\u7aef\uff0c\u4e3b\u64ad\u5728\u63a8\u6d41\u7aef\u5c06\u6d41\u901a\u8fc7\u63a8\u6d41\u5668\u63a8\u9001\u5230 CDN\uff0c\u7ecf\u8fc7 CDN \u52a0\u901f\u540e\uff0c\u64ad\u653e\u7aef\u53ef\u5c31\u8fd1\u8bf7\u6c42\u5230\u76f8\u5e94\u7684\u6d41\uff0c\u5176\u4ed6\u6e90\u7ad9\u529f\u80fd\u6bd4\u5982\u8f6c\u7801\u5f55\u5236\u90fd\u53ef\u4ee5\u7531 CDN \u5382\u5546\u5b8c\u6210\u3002","title":"\u53c8\u62cd\u6e90"},{"location":"live/Introduction/#_4","text":"\u53e6\u4e00\u79cd\u662f\u5ba2\u6237\u63d0\u4f9b\u6e90\u7ad9\uff0c\u53c8\u62cd CDN \u56de\u5ba2\u6237\u6e90\u7ad9\u62c9\u6d41\uff0c\u8be5\u65b9\u5f0f\u5ba2\u6237\u5bf9\u5176\u4e3b\u64ad\u6d41\u7684\u53ef\u63a7\u7a0b\u5ea6\u9ad8\uff0c\u540c\u65f6\u9700\u8981\u4fdd\u969c\u6e90\u7ad9\u7684\u7a33\u5b9a\u6027\uff0c\u53ca\u4e3b\u64ad\u4e0e\u6e90\u7ad9\u95f4\u7684\u7f51\u7edc\u3002 \u5177\u4f53\u4f7f\u7528\u54ea\u79cd\u6e90\u7ad9\uff0c\u6839\u636e\u5b9e\u9645\u7684\u4e1a\u52a1\u60c5\u51b5\u800c\u5b9a\u3002","title":"\u81ea\u4e3b\u6e90"},{"location":"live/advanced/","text":"\u5f55\u64ad \u00b6 \u9700\u63d0\u4f9b\u7684\u914d\u7f6e\u4fe1\u606f\uff1a\u9700\u8981\u5f55\u5236\u7684\u62c9\u6d41 URL \u5f55\u5236\u65b9\u5f0f\uff1a\u89e6\u53d1\u6216\u5b9a\u65f6\u5f55\u5236 \u5f55\u64ad\u7684\u4e3b\u8981\u4f5c\u7528\u662f\u5c06\u63a8\u6d41\u5185\u5bb9\u5f55\u5236\u6210\u6587\u4ef6\uff0c\u6700\u7ec8\u7528\u4e8e\u70b9\u64ad\u3002 \u73b0\u652f\u6301\u5f55\u5236\u6210 MP4\u3001FLV\u3001TS\u3001M3u8\uff0c\u9ed8\u8ba4\u5f55\u5236\u6210 mp4 \u683c\u5f0f\u6587\u4ef6\uff0c\u4e0a\u4f20\u5230\u53c8\u62cd\u4e91\u5b58\u50a8\uff0c\u5ba2\u6237\u53ef\u4ee5\u81ea\u5b9a\u4e49\u4e0a\u4f20\u5230\u54ea\u4e2a\u5b58\u50a8\u670d\u52a1\u3002 \u53c8\u62cd\u5f55\u5236\u7cfb\u7edf\u4f1a\u81ea\u52a8\u5c06\u5f55\u5236\u4e0b\u6765\u7684\u5185\u5bb9\u4e0a\u4f20\u5230\u53c8\u62cd\u4e91\u5b58\u50a8\u540e\uff0c\u53ef\u4ee5\u6839\u636e\u4e91\u5b58\u50a8\u83b7\u53d6\u76ee\u5f55\u6587\u4ef6\u5217\u8868\u6765\u83b7\u53d6\u76f8\u5173\u5f55\u5236\u6587\u4ef6\u5217\u8868\u3002\u5982\u679c\u5bf9\u5f55\u5236\u6587\u4ef6\u683c\u5f0f\u6709\u5176\u4ed6\u8981\u6c42\uff0c\u53ef\u5728\u53c8\u62cd\u4e91\u5904\u7406\u4e2d\u5fc3\u5bf9\u5176\u8fdb\u884c\u76f8\u5173\u5904\u7406\uff0c\u6bd4\u5982\u683c\u5f0f\u5904\u7406\uff0c\u89c6\u9891\u62fc\u63a5\uff0c\u8be6\u7ec6\u8bf7\u89c1 \u4e91\u5904\u7406\u6587\u6863 \u3002 \u5982\u679c\u914d\u7f6e\u5bf9 rtmp://play.com/live/stream \u8fd9\u6761\u6d41\u8fdb\u884c\u5f55\u5236\uff0c\u5f55\u5236\u540e\u6587\u4ef6\u5177\u4f53\u8def\u5f84\u4e3a\uff1a live-recorder.b0.upaiyun.com/play.com/live/stream/recorder20160604163702.mp4 \u5176\u4e2d live-recorder \u4e3a\u5b58\u50a8\u7a7a\u95f4\uff0clive-recorder.b0.upaiyun.com \u4e3a\u5f55\u5236\u6587\u4ef6\u9ed8\u8ba4\u64ad\u653e\u57df\u540d, play.com \u4e3a\u76f4\u64ad\u62c9\u6d41\u57df\u540d\uff0clive \u4e3a\u63a5\u5165\u70b9\uff0cstream \u4e3a\u6d41\u540d\uff0crecorder \u7cfb\u7edf\u9ed8\u8ba4\u6807\u8bc6\u7b26\u540d\uff0c 20160604163702 \u4e3a\u5f55\u5236\u5b8c\u6210\u65f6\u95f4\uff0cmp4 \u4e3a\u6587\u4ef6\u7c7b\u578b\u3002\u5f55\u5236\u5b8c\u6210\u540e\u53ef\u4ee5\u901a\u8fc7 post \u65b9\u5f0f\u56de\u8c03\u7ed9\u7528\u6237\u63d0\u4f9b\u7684\u56de\u8c03\u5730\u5740\u3002 \u5f55\u5236\u7cfb\u7edf\u4f1a\u5c06\u5f55\u5236\u6587\u4ef6\u9ed8\u8ba4\u4fdd\u5b58\u5728\u8be5\u7a7a\u95f4\u4ee5\u8fd9\u6761\u6d41 URL \u4e3a\u8def\u5f84\u7684\u76ee\u5f55\u4e0b\uff0c \u5373 live-recorder.b0.upaiyun.com/play.com/live/stream/\uff0c\u4f7f\u7528\u53c8\u62cd\u6587\u4ef6\u52a0\u901f\u670d\u52a1\uff0c\u76f4\u63a5\u53ef\u901a\u8fc7 http://client.com/play.com/live/stream/recorder20160604163702.mp4 \u6765\u8bbf\u95ee\uff0cclient.com \u4e3a\u5ba2\u6237\u70b9\u64ad\u57df\u540d\uff0c\u9700\u7ed1\u5b9a\u5728\u5f55\u5236\u6587\u4ef6\u6240\u6709\u7684\u4e91\u5b58\u50a8\u7a7a\u95f4\uff0c\u8be5\u8fc7\u7a0b\u5373\u5bf9\u5b58\u50a8\u5185\u5bb9\u8fdb\u884c\u70b9\u64ad\u3002 \u5f55\u5236\u652f\u6301\u89e6\u53d1\u5f55\u5236\u4e0e\u5b9a\u65f6\u5f55\u5236\u4e24\u79cd\u65b9\u5f0f\uff0c\u5e76\u4e14\u652f\u6301\u7f51\u7edc\u95ea\u65ad\u91cd\u8fde\u540e\u7684\u6587\u4ef6\u5408\u5e76\uff0c\u5177\u4f53\u9700\u8981\u591a\u957f\u65f6\u95f4\u5185\u7684\u95ea\u65ad\u8fdb\u884c\u5408\u5e76\uff0c\u53ef\u914d\u7f6e\uff0c\u5982\u8981\u8fdb\u884c\u5408\u5e76\uff0c\u65ad\u6d41\u524d\u540e\u7684\u76f4\u64ad\u6d41\u5206\u8fa8\u7387\u9700\u8981\u4fdd\u6301\u4e00\u81f4\u3002\u540c\u4e00\u6761\u6d41\u5728\u5f55\u5236\u8fc7\u7a0b\u4e2d\uff0c\u5982\u679c\u89c6\u9891\u5206\u8fa8\u7387\u6216\u97f3\u9891\u91c7\u6837\u7387\u53d1\u751f\u53d8\u5316\u65f6\uff0c\u4f1a\u81ea\u52a8\u5207\u5272\u6210\u4e24\u4e2a\u6587\u4ef6\u3002 \u9700\u8981\u5f55\u5236\u7684\u6d41\u534f\u8bae\u652f\u6301\uff1aRTMP\uff0cHTTP-FLV\u3002 \u89e6\u53d1\u5f55\u5236 \u00b6 \u6e90\u7ad9\u7c7b\u578b\uff1a\u53c8\u62cd\u4e91\u6e90 \u6307\u5b9a\u914d\u7f6e\u67d0\u4e00\u6761\u6d41\u4e3a\u89e6\u53d1\u5f55\u5236\u7684\u6d41\uff0c\u5219\u5728\u8fd9\u6761\u6d41\u63a8\u6d41\u5230\u53c8\u62cd CDN \u7684\u65f6\u5019\uff0c\u53c8\u62cd\u5f55\u5236\u7cfb\u7edf\u5bf9\u5176\u5f00\u59cb\u5f55\u5236\uff0c\u5f53\u8fd9\u63a8\u6d41\u65ad\u5f00\u540e\u505c\u6b62\u5f55\u5236\uff0c\u518d\u63a8\u6d41\u540e\u53c8\u7ee7\u7eed\u5f00\u59cb\u5f55\u5236\uff0c\u4ee5\u6b64\u5faa\u73af\u3002\u63a8\u6d41\u65ad\u5f00\u65f6\uff0c\u5f55\u5236\u6587\u4ef6\u81ea\u52a8\u505c\u6b62\u5f55\u5236\uff0c\u4e0b\u6b21\u518d\u63a8\u6d41\u540e\uff0c\u5f55\u5236\u7684\u6587\u4ef6\u540d\u5c06\u4e0e\u524d\u4e00\u6587\u4ef6\u540d\u4e0d\u4e00\u6837\uff0c\u8fd9\u6837\u540c\u4e00\u6761\u6d41\u4f1a\u751f\u6210\u591a\u4e2a\u4e0d\u540c\u6587\u4ef6\uff0c\u5e76\u4ee5\u6587\u4ef6\u540d\u6700\u540e\u7684\u65f6\u95f4\u8868\u793a\u5176\u5148\u540e\u987a\u5e8f\u3002\u63a8\u6d41\u5982\u679c\u4e00\u76f4\u4e0d\u65ad\u5f00\uff0c\u5f55\u5236\u6587\u4ef6\u9ed8\u8ba4 2 \u5c0f\u65f6\u5207\u5272\u4e00\u6b21\u3002 \u89e6\u53d1\u5f55\u5236\u9700\u8981\u5728\u63a8\u6d41\u5f00\u59cb\u524d\u914d\u7f6e\u624d\u80fd\u751f\u6548\uff0c\u5728\u63a8\u6d41\u8fc7\u7a0b\u4e2d\u914d\u7f6e\u89e6\u53d1\u5f55\u5236\u4e0d\u751f\u6548\u3002 \u5b9a\u65f6\u5f55\u5236 \u00b6 \u6e90\u7ad9\u7c7b\u578b\uff1a\u5168\u90e8 \u6307\u5b9a\u914d\u7f6e\u67d0\u4e00\u6761\u6d41\u7684\u8d77\u6b62\u65f6\u95f4\uff0c\u6bd4\u5982\u4ece 2016-09-01 17\uff1a00\uff1a00 \u5f00\u59cb\u5f55\u5236\uff0c\u5e76\u5230 2016-09-01 22\uff1a00\uff1a00 \u7ed3\u675f\uff0c\u4e0d\u7ba1\u5728\u8fd9\u65f6\u95f4\u6bb5\u5185\u63a8\u6d41\u65ad\u5f00\u51e0\u6b21\uff0c\u5f55\u5236\u7cfb\u7edf\u5c06\u5728\u5f00\u59cb\u5f55\u5236\u7684\u524d 2 \u5c0f\u65f6\u5185\uff0c\u5bf9\u5176\u63a8\u6d41\u7684\u6240\u6709\u6d41\u5185\u5bb9\u8fdb\u884c\u5f55\u5236\u5728\u540c\u4e00\u6587\u4ef6\u540d\u4e0b\uff0c\u8d85\u8fc7 2 \u5c0f\u65f6\u90e8\u5206\u4f1a\u81ea\u52a8\u5207\u5272\uff0c\u5f55\u5236\u6210\u4e0b\u4e00\u4e2a\u6587\u4ef6\u3002 \u56de\u8c03 \u00b6 \u9700\u63d0\u4f9b\u63a5\u6536\u56de\u8c03\u7684\u5730\u5740\uff08\u5efa\u8bae\u4e3a URL\uff09 \u5f55\u5236\u6587\u4ef6\u6240\u5728\u7684\u8def\u5f84\u4ee5 post \u8bf7\u6c42\u8fd4\u56de\u7ed9\u5ba2\u6237\uff0c\u5177\u4f53\u7684 json \u683c\u5f0f\u4e3a {\"timestamp\": \"2016-06-04 16:38:45\", \"path\": [\"http://live-recorder.b0.upaiyun.com/play.com/live/stream/recorder20160604163702.mp4\"]} \u5176\u4e2d\uff0ctimestamp \u4e3a\u53d1\u9001 json \u56de\u8c03\u4efb\u52a1\u65f6\u95f4\uff0cpath \u4e3a\u5f55\u5236\u6587\u4ef6\u5177\u4f53\u8def\u5f84\uff0c\u652f\u6301\u56de\u8c03\u591a\u4e2a\u6587\u4ef6\u3002\u5f53\u5f55\u5236\u7684\u6587\u4ef6\u5230\u8fbe\u5207\u5272\u65f6\u95f4\uff0c\u6216\u8005\u5728\u95ea\u65ad\u5408\u5e76\u8fc7\u7a0b\u4e2d\uff0c\u9700\u8981\u5408\u5e76\u7684\u6d41\u89c6\u9891\u5206\u8fa8\u7387\u6216\u97f3\u9891\u91c7\u6837\u7387\u53d1\u751f\u53d8\u5316\u65f6\uff0c\u4f1a\u751f\u6210\u591a\u4e2a\u5f55\u5236\u6587\u4ef6\uff0c\u5177\u4f53\u7684 json \u683c\u5f0f\u4e3a {\"timestamp\": \"2016-06-04 16:38:45\", \"path\": [\"http://live-recorder.b0.upaiyun.com/play.com/live/stream/recorder20160604163702.mp4\", \"http://live-recorder.b0.upaiyun.com/play.com/live/stream/recorder20160604163902.mp4\"]} \u8f6c\u7801 \u00b6 \u6e90\u7ad9\u7c7b\u578b\uff1a\u53c8\u62cd\u4e91\u6e90 \u63d0\u4f9b\u8981\u8f6c\u7801\u7684\u539f\u59cb\u6d41\u3001\u8f6c\u7801\u5339\u914d\u7684\u540e\u7f00\u53ca\u8f6c\u7801\u6a21\u677f\u3002 \u652f\u6301\u97f3\u89c6\u9891\u6d41\u5b9e\u65f6\u8f6c\u7801\u5904\u7406\uff0c\u901a\u8fc7\u8f6c\u7801\u6a21\u7248\u53ef\u914d\u7f6e\u7f16\u7801\u6807\u51c6\u3001\u5206\u8fa8\u7387\u3001\u7801\u7387\u53ca\u8f93\u51fa\u6d41\u7c7b\u578b\u7b49\u6d41\u5904\u7406\u53c2\u6570\u3002 \u9ed8\u8ba4\u652f\u6301\u4f7f\u7528\u53c8\u62cd\u4e91\u76f4\u64ad\u670d\u52a1\u7684 RTMP\uff0cHTTP-FLV \u548c HLS \u534f\u8bae\u7684\u6d41\u8f6c\u7801\u652f\u6301 12 \u79cd\u8f6c\u7801\u6a21\u677f\u548c\u5ba2\u6237\u81ea\u5b9a\u4e49\u8f6c\u7801\u914d\u7f6e\uff0c\u8be6\u7ec6\u6a21\u677f\u4fe1\u606f,\u53c2\u8003 \u89c6\u9891\u8f6c\u7801\u9884\u7f6e\u6a21\u677f \u652f\u6301\u81ea\u5b9a\u4e49\u8f6c\u7801\u540e\u7f00\uff0c\u5206\u9694\u7b26\u652f\u6301\u4e2d\u5212\u7ebf\uff08-\uff09\u3001\u4e0b\u5212\u7ebf\uff08_\uff09\u548c\u611f\u53f9\u53f7\uff08!\uff09\u3002 \u652f\u6301\u89e6\u53d1\u5f0f\u8f6c\u7801\uff0c\u9700\u63d0\u524d\u914d\u7f6e\u9700\u8981\u8f6c\u7801\u7684\u6d41\u5730\u5740\u4ee5\u53ca\u8f6c\u7801\u7684\u89e6\u53d1\u540e\u7f00\uff0c\u5982 \u9700\u8981\u8f6c\u7801\u7684\u539f\u59cb\u6d41\u4e3a\uff1ahttp://play.com/live/stream \u89e6\u53d1\u8f6c\u7801\u7684\u540e\u7f00\u5339\u914d\u4e3a -small\uff0c\u5bf9\u5e94\u7684\u8f6c\u7801\u6a21\u677f\u4e3a 540p\uff0816:9\uff09 \u5f53\u6709\u7528\u6237\u8bf7\u6c42 http://play.com/live/stream-small \u65f6\u89e6\u53d1\u8f6c\u7801\uff0c\u5f53\u6700\u540e\u4e00\u4e2a\u8bf7\u6c42\u8be5\u8f6c\u7801\u6d41\u7684\u7528\u6237\u65ad\u5f00\u8fde\u63a5\u540e\uff0c\u505c\u6b62\u8f6c\u7801\u3002 \u793a\u4f8b\uff1a \u539f\u59cb\u6d41\u4e3a rtmp://play.com/live/stream \u914d\u7f6e\u7684\u5339\u914d\u540e\u7eed\u6709 -small\uff0c\u5bf9\u5e94\u8f6c\u7801\u6a21\u677f 540p\uff0816:9\uff09\uff0c \u5219\u8f6c\u7801\u6d41\u8bf7\u6c42\u5206\u522b\u4e3a rtmp://play.com/live/stream-small http://play.com/live/stream-small.flv http://play.com/live/stream-small.m3u8 \u7981\u64ad \u00b6 \u6e90\u7ad9\u7c7b\u578b\uff1a\u53c8\u62cd\u4e91\u6e90 \u4e92\u52a8\u76f4\u64ad\u4e1a\u52a1\u7279\u6027\u4e3a\uff1a\u76f4\u64ad\u89c6\u9891\u5185\u5bb9\u7531\u4e3b\u64ad\u5b9e\u65f6\u63a8\u9001\u81f3\u670d\u52a1\u5668\uff0c\u82e5\u4e3b\u64ad\u4f20\u64ad\u975e\u6cd5\u5185\u5bb9\uff0c\u5219\u5f71\u54cd\u5de8\u5927\u3002\u56e0\u6b64\u5382\u5546\u9700\u8981\u5bf9\u76f4\u64ad\u89c6\u9891\u5185\u5bb9\u8fdb\u884c\u5b9e\u65f6\u76d1\u63a7\uff0c\u5f53\u51fa\u73b0\u975e\u6cd5\u5185\u5bb9\u65f6\uff0c\u53ca\u65f6\u7981\u6b62\u975e\u6cd5\u5185\u5bb9\u7684\u4f20\u64ad\u3002 \u79d2\u7ea7\u7981\u64ad\u5219\u662f\u9488\u5bf9\u8be5\u4e1a\u52a1\u573a\u666f\u800c\u7814\u53d1\u7684\u529f\u80fd\uff0c\u7531\u53c8\u62cd\u63d0\u4f9b\u9875\u9762\u914d\u7f6e\u548c\u8c03\u7528 API \u7981\u64ad\u4e24\u79cd\u65b9\u5f0f\u3002\u5f53\u5ba2\u6237\u53d1\u73b0\u67d0\u76f4\u64ad\u89c6\u9891\u5185\u5bb9\u975e\u6cd5\u65f6\uff0c\u5b9e\u65f6\u65ad\u5f00\u4e3b\u64ad\u63a8\u6d41\uff0c\u4ece\u800c\u963b\u6b62\u975e\u6cd5\u5185\u5bb9\u7684\u4f20\u64ad\u3002 \u7981\u64ad\u65b9\u5f0f\u652f\u6301\u7acb\u5373\u7981\u64ad\uff0c\u89e3\u9664\u7981\u64ad\uff0c\u4ee5\u53ca\u7981\u64ad\u4e00\u6bb5\u65f6\u95f4\u540e\u81ea\u52a8\u89e3\u9664\u3002 \u622a\u56fe \u00b6 \u6e90\u7ad9\u7c7b\u578b\uff1a\u53c8\u62cd\u4e91\u6e90 \u76f4\u64ad\u622a\u56fe\u670d\u52a1\u652f\u6301\u5c06\u76f4\u64ad\u89c6\u9891\u4ee5\u8bbe\u5b9a\u7684\u65f6\u95f4\u95f4\u9694\u548c\u5c3a\u5bf8\u5927\u5c0f\u8fdb\u884c\u622a\u56fe\uff0c\u5e76\u4ee5 .jpg \u683c\u5f0f\u4fdd\u5b58\u5728\u5b58\u50a8\u7a7a\u95f4\u3002\u5982\u679c\u5bf9\u622a\u56fe\u6587\u4ef6\u6709\u5904\u7406\u9700\u6c42\uff0c\u53ef\u5728\u53c8\u62cd\u4e91\u5904\u7406\u4e2d\u5fc3\u5bf9\u5176\u8fdb\u884c\u76f8\u5173\u5904\u7406\u64cd\u4f5c\uff0c\u8be6\u60c5\u8bf7\u89c1 \u4e91\u5904\u7406\u6587\u6863 \u3002 \u5355\u6b21\u622a\u56fe \u00b6 \u4ec5\u5728\u76f4\u64ad\u63a8\u6d41\u65f6\u8fdb\u884c\u5355\u6b21\u622a\u56fe\uff0c\u622a\u53d6\u63a8\u6d41\u7684\u7b2c\u4e00\u5e27\u3002\u540c\u4e00\u6761\u6d41\uff0c\u91cd\u63a8\u540e\u5c06\u91cd\u65b0\u622a\u53d6\u9996\u5e27\uff0c\u5e76\u8986\u76d6\u4e0a\u6b21\u63a8\u6d41\u7684\u622a\u56fe\u3002\u8be5\u622a\u56fe\u6a21\u5f0f\u9002\u7528\u4e8e\u9759\u6001\u5c01\u9762\u3002 \u5982\u679c\u5bf9\u670d\u52a1\u53f7\u4e3a upyun-live \u7684\u76f4\u64ad\u7a7a\u95f4\u5f00\u542f\u5355\u6b21\u622a\u56fe\uff0c\u9009\u62e9\u5b58\u50a8\u7a7a\u95f4\u4e3a upyun-live-pic \uff0c\u622a\u56fe\u540e\u6587\u4ef6\u7684\u5177\u4f53\u8def\u5f84\u4e3a upyun-live-pic.b0.upaiyun.com/upyun-live/live/stream.jpg \u5176\u4e2d upyun-live-pic \u4e3a\u5b58\u50a8\u7a7a\u95f4\uff0c upyun-live-pic.b0.upaiyun.com \u4e3a\u622a\u56fe\u6587\u4ef6\u9ed8\u8ba4\u8bbf\u95ee\u57df\u540d\uff0c upyun-live \u4e3a\u76f4\u64ad\u7a7a\u95f4\uff0clive \u4e3a\u63a5\u5165\u70b9\uff0c stream \u4e3a\u6d41\u540d\u3002 \u591a\u6b21\u622a\u56fe \u00b6 \u5f00\u542f\u591a\u6b21\u622a\u56fe\uff0c\u53ef\u8bbe\u7f6e\u56fa\u5b9a\u65f6\u95f4\u95f4\u9694\uff0c\u5728\u63a8\u6d41\u8fc7\u7a0b\u4e2d\uff0c\u4ee5\u4e00\u5b9a\u65f6\u95f4\u95f4\u9694\u8fdb\u884c\u622a\u56fe\uff0c\u76f4\u5230\u63a8\u6d41\u7ed3\u675f\uff0c\u9002\u7528\u4e8e\u52a8\u6001\u5c01\u9762\u548c\u5185\u5bb9\u5ba1\u6838\u3002 \u5982\u679c\u5bf9\u670d\u52a1\u53f7\u4e3a upyun-live \u7684\u76f4\u64ad\u7a7a\u95f4\u5f00\u542f\u591a\u6b21\u622a\u56fe\uff0c\u9009\u62e9\u5b58\u50a8\u7a7a\u95f4\u4e3a upyun-live-pic \uff0c\u622a\u56fe\u4fdd\u5b58\u8def\u5f84\u53ca\u547d\u540d\u53ef\u8bbe\u7f6e\u4e3a {\u76f4\u64ad\u52a0\u901f\u670d\u52a1\u540d}/{\u63a5\u5165\u70b9}/{\u6d41\u540d}{\u5e74}{\u6708}{\u65e5}{\u65f6}{\u5206}{\u79d2}.jpg\uff0c\u5219\u622a\u56fe\u540e\u6587\u4ef6\u7684\u5177\u4f53\u8def\u5f84\u4e3a upyun-live-pic.b0.upaiyun.com/upyun-live/live/stream20170101121212.jpg \u5176\u4e2d upyun-live-pic \u4e3a\u5b58\u50a8\u7a7a\u95f4\uff0c upyun-live-pic.b0.upaiyun.com \u4e3a\u622a\u56fe\u6587\u4ef6\u9ed8\u8ba4\u8bbf\u95ee\u57df\u540d\uff0c upyun-live \u4e3a\u76f4\u64ad\u7a7a\u95f4\uff0clive \u4e3a\u63a5\u5165\u70b9\uff0c stream \u4e3a\u6d41\u540d\uff0c 201701011212 \u4e3a 2017 \u5e74 1 \u6708 1 \u65e5 12 \u70b9 12 \u5206 12 \u79d2\u3002 \u622a\u56fe\u4fdd\u5b58\u8def\u5f84\u53ca\u547d\u540d\u8be6\u60c5\u89c1\u540e\u53f0\u914d\u7f6e\u9875\u9762\u3002 \u56de\u8c03 \u00b6 \u9700\u63d0\u4f9b\u63a5\u53d7\u56de\u8c03\u7684\u5730\u5740\uff08\u5efa\u8bae\u4e3a URL\uff09 \u76f4\u64ad\u622a\u56fe\u6587\u4ef6\u6240\u5728\u8def\u5f84\u4ee5 post \u8bf7\u6c42\u8fd4\u56de\u7ed9\u5ba2\u6237\uff0c\u5177\u4f53\u7684 json \u683c\u5f0f\u4e3a { \"bucket\": \"upyun-live\", // \u76f4\u64ad\u670d\u52a1\u540d \"app\": \"live\", // \u76f4\u64ad\u63a5\u5165\u70b9\u540d\u79f0 \"stream\": \"stream\", // \u76f4\u64ad\u6d41\u540d \"vhost\": \"push.com\", // \u63a8\u6d41\u57df\u540d \"path\": \"http://upyun-live-pic.b0.upaiyun.com/upyun-live/live/stream.jpg\", // \u622a\u56fe\u5b58\u50a8\u8def\u5f84 \"timestamp\": \"2017-01-01 12:12:12\", // \u622a\u56fe\u65f6\u95f4 \"status\": 200, // \u622a\u56fe\u72b6\u6001 \"error\": \"\" // \u5982\u679c\u622a\u56fe\u6210\u529f\uff0c\u5373 status \u4e3a 200 \uff0cerror \u5b57\u6bb5\u4e3a\u7a7a\u5b57\u7b26\u4e32\uff0c\u5426\u5219 error \u5b57\u6bb5\u4f1a\u7ed9\u51fa\u9519\u8bef\u4fe1\u606f }","title":"\u589e\u503c\u670d\u52a1"},{"location":"live/advanced/#_1","text":"\u9700\u63d0\u4f9b\u7684\u914d\u7f6e\u4fe1\u606f\uff1a\u9700\u8981\u5f55\u5236\u7684\u62c9\u6d41 URL \u5f55\u5236\u65b9\u5f0f\uff1a\u89e6\u53d1\u6216\u5b9a\u65f6\u5f55\u5236 \u5f55\u64ad\u7684\u4e3b\u8981\u4f5c\u7528\u662f\u5c06\u63a8\u6d41\u5185\u5bb9\u5f55\u5236\u6210\u6587\u4ef6\uff0c\u6700\u7ec8\u7528\u4e8e\u70b9\u64ad\u3002 \u73b0\u652f\u6301\u5f55\u5236\u6210 MP4\u3001FLV\u3001TS\u3001M3u8\uff0c\u9ed8\u8ba4\u5f55\u5236\u6210 mp4 \u683c\u5f0f\u6587\u4ef6\uff0c\u4e0a\u4f20\u5230\u53c8\u62cd\u4e91\u5b58\u50a8\uff0c\u5ba2\u6237\u53ef\u4ee5\u81ea\u5b9a\u4e49\u4e0a\u4f20\u5230\u54ea\u4e2a\u5b58\u50a8\u670d\u52a1\u3002 \u53c8\u62cd\u5f55\u5236\u7cfb\u7edf\u4f1a\u81ea\u52a8\u5c06\u5f55\u5236\u4e0b\u6765\u7684\u5185\u5bb9\u4e0a\u4f20\u5230\u53c8\u62cd\u4e91\u5b58\u50a8\u540e\uff0c\u53ef\u4ee5\u6839\u636e\u4e91\u5b58\u50a8\u83b7\u53d6\u76ee\u5f55\u6587\u4ef6\u5217\u8868\u6765\u83b7\u53d6\u76f8\u5173\u5f55\u5236\u6587\u4ef6\u5217\u8868\u3002\u5982\u679c\u5bf9\u5f55\u5236\u6587\u4ef6\u683c\u5f0f\u6709\u5176\u4ed6\u8981\u6c42\uff0c\u53ef\u5728\u53c8\u62cd\u4e91\u5904\u7406\u4e2d\u5fc3\u5bf9\u5176\u8fdb\u884c\u76f8\u5173\u5904\u7406\uff0c\u6bd4\u5982\u683c\u5f0f\u5904\u7406\uff0c\u89c6\u9891\u62fc\u63a5\uff0c\u8be6\u7ec6\u8bf7\u89c1 \u4e91\u5904\u7406\u6587\u6863 \u3002 \u5982\u679c\u914d\u7f6e\u5bf9 rtmp://play.com/live/stream \u8fd9\u6761\u6d41\u8fdb\u884c\u5f55\u5236\uff0c\u5f55\u5236\u540e\u6587\u4ef6\u5177\u4f53\u8def\u5f84\u4e3a\uff1a live-recorder.b0.upaiyun.com/play.com/live/stream/recorder20160604163702.mp4 \u5176\u4e2d live-recorder \u4e3a\u5b58\u50a8\u7a7a\u95f4\uff0clive-recorder.b0.upaiyun.com \u4e3a\u5f55\u5236\u6587\u4ef6\u9ed8\u8ba4\u64ad\u653e\u57df\u540d, play.com \u4e3a\u76f4\u64ad\u62c9\u6d41\u57df\u540d\uff0clive \u4e3a\u63a5\u5165\u70b9\uff0cstream \u4e3a\u6d41\u540d\uff0crecorder \u7cfb\u7edf\u9ed8\u8ba4\u6807\u8bc6\u7b26\u540d\uff0c 20160604163702 \u4e3a\u5f55\u5236\u5b8c\u6210\u65f6\u95f4\uff0cmp4 \u4e3a\u6587\u4ef6\u7c7b\u578b\u3002\u5f55\u5236\u5b8c\u6210\u540e\u53ef\u4ee5\u901a\u8fc7 post \u65b9\u5f0f\u56de\u8c03\u7ed9\u7528\u6237\u63d0\u4f9b\u7684\u56de\u8c03\u5730\u5740\u3002 \u5f55\u5236\u7cfb\u7edf\u4f1a\u5c06\u5f55\u5236\u6587\u4ef6\u9ed8\u8ba4\u4fdd\u5b58\u5728\u8be5\u7a7a\u95f4\u4ee5\u8fd9\u6761\u6d41 URL \u4e3a\u8def\u5f84\u7684\u76ee\u5f55\u4e0b\uff0c \u5373 live-recorder.b0.upaiyun.com/play.com/live/stream/\uff0c\u4f7f\u7528\u53c8\u62cd\u6587\u4ef6\u52a0\u901f\u670d\u52a1\uff0c\u76f4\u63a5\u53ef\u901a\u8fc7 http://client.com/play.com/live/stream/recorder20160604163702.mp4 \u6765\u8bbf\u95ee\uff0cclient.com \u4e3a\u5ba2\u6237\u70b9\u64ad\u57df\u540d\uff0c\u9700\u7ed1\u5b9a\u5728\u5f55\u5236\u6587\u4ef6\u6240\u6709\u7684\u4e91\u5b58\u50a8\u7a7a\u95f4\uff0c\u8be5\u8fc7\u7a0b\u5373\u5bf9\u5b58\u50a8\u5185\u5bb9\u8fdb\u884c\u70b9\u64ad\u3002 \u5f55\u5236\u652f\u6301\u89e6\u53d1\u5f55\u5236\u4e0e\u5b9a\u65f6\u5f55\u5236\u4e24\u79cd\u65b9\u5f0f\uff0c\u5e76\u4e14\u652f\u6301\u7f51\u7edc\u95ea\u65ad\u91cd\u8fde\u540e\u7684\u6587\u4ef6\u5408\u5e76\uff0c\u5177\u4f53\u9700\u8981\u591a\u957f\u65f6\u95f4\u5185\u7684\u95ea\u65ad\u8fdb\u884c\u5408\u5e76\uff0c\u53ef\u914d\u7f6e\uff0c\u5982\u8981\u8fdb\u884c\u5408\u5e76\uff0c\u65ad\u6d41\u524d\u540e\u7684\u76f4\u64ad\u6d41\u5206\u8fa8\u7387\u9700\u8981\u4fdd\u6301\u4e00\u81f4\u3002\u540c\u4e00\u6761\u6d41\u5728\u5f55\u5236\u8fc7\u7a0b\u4e2d\uff0c\u5982\u679c\u89c6\u9891\u5206\u8fa8\u7387\u6216\u97f3\u9891\u91c7\u6837\u7387\u53d1\u751f\u53d8\u5316\u65f6\uff0c\u4f1a\u81ea\u52a8\u5207\u5272\u6210\u4e24\u4e2a\u6587\u4ef6\u3002 \u9700\u8981\u5f55\u5236\u7684\u6d41\u534f\u8bae\u652f\u6301\uff1aRTMP\uff0cHTTP-FLV\u3002","title":"\u5f55\u64ad"},{"location":"live/advanced/#_2","text":"\u6e90\u7ad9\u7c7b\u578b\uff1a\u53c8\u62cd\u4e91\u6e90 \u6307\u5b9a\u914d\u7f6e\u67d0\u4e00\u6761\u6d41\u4e3a\u89e6\u53d1\u5f55\u5236\u7684\u6d41\uff0c\u5219\u5728\u8fd9\u6761\u6d41\u63a8\u6d41\u5230\u53c8\u62cd CDN \u7684\u65f6\u5019\uff0c\u53c8\u62cd\u5f55\u5236\u7cfb\u7edf\u5bf9\u5176\u5f00\u59cb\u5f55\u5236\uff0c\u5f53\u8fd9\u63a8\u6d41\u65ad\u5f00\u540e\u505c\u6b62\u5f55\u5236\uff0c\u518d\u63a8\u6d41\u540e\u53c8\u7ee7\u7eed\u5f00\u59cb\u5f55\u5236\uff0c\u4ee5\u6b64\u5faa\u73af\u3002\u63a8\u6d41\u65ad\u5f00\u65f6\uff0c\u5f55\u5236\u6587\u4ef6\u81ea\u52a8\u505c\u6b62\u5f55\u5236\uff0c\u4e0b\u6b21\u518d\u63a8\u6d41\u540e\uff0c\u5f55\u5236\u7684\u6587\u4ef6\u540d\u5c06\u4e0e\u524d\u4e00\u6587\u4ef6\u540d\u4e0d\u4e00\u6837\uff0c\u8fd9\u6837\u540c\u4e00\u6761\u6d41\u4f1a\u751f\u6210\u591a\u4e2a\u4e0d\u540c\u6587\u4ef6\uff0c\u5e76\u4ee5\u6587\u4ef6\u540d\u6700\u540e\u7684\u65f6\u95f4\u8868\u793a\u5176\u5148\u540e\u987a\u5e8f\u3002\u63a8\u6d41\u5982\u679c\u4e00\u76f4\u4e0d\u65ad\u5f00\uff0c\u5f55\u5236\u6587\u4ef6\u9ed8\u8ba4 2 \u5c0f\u65f6\u5207\u5272\u4e00\u6b21\u3002 \u89e6\u53d1\u5f55\u5236\u9700\u8981\u5728\u63a8\u6d41\u5f00\u59cb\u524d\u914d\u7f6e\u624d\u80fd\u751f\u6548\uff0c\u5728\u63a8\u6d41\u8fc7\u7a0b\u4e2d\u914d\u7f6e\u89e6\u53d1\u5f55\u5236\u4e0d\u751f\u6548\u3002","title":"\u89e6\u53d1\u5f55\u5236"},{"location":"live/advanced/#_3","text":"\u6e90\u7ad9\u7c7b\u578b\uff1a\u5168\u90e8 \u6307\u5b9a\u914d\u7f6e\u67d0\u4e00\u6761\u6d41\u7684\u8d77\u6b62\u65f6\u95f4\uff0c\u6bd4\u5982\u4ece 2016-09-01 17\uff1a00\uff1a00 \u5f00\u59cb\u5f55\u5236\uff0c\u5e76\u5230 2016-09-01 22\uff1a00\uff1a00 \u7ed3\u675f\uff0c\u4e0d\u7ba1\u5728\u8fd9\u65f6\u95f4\u6bb5\u5185\u63a8\u6d41\u65ad\u5f00\u51e0\u6b21\uff0c\u5f55\u5236\u7cfb\u7edf\u5c06\u5728\u5f00\u59cb\u5f55\u5236\u7684\u524d 2 \u5c0f\u65f6\u5185\uff0c\u5bf9\u5176\u63a8\u6d41\u7684\u6240\u6709\u6d41\u5185\u5bb9\u8fdb\u884c\u5f55\u5236\u5728\u540c\u4e00\u6587\u4ef6\u540d\u4e0b\uff0c\u8d85\u8fc7 2 \u5c0f\u65f6\u90e8\u5206\u4f1a\u81ea\u52a8\u5207\u5272\uff0c\u5f55\u5236\u6210\u4e0b\u4e00\u4e2a\u6587\u4ef6\u3002","title":"\u5b9a\u65f6\u5f55\u5236"},{"location":"live/advanced/#_4","text":"\u9700\u63d0\u4f9b\u63a5\u6536\u56de\u8c03\u7684\u5730\u5740\uff08\u5efa\u8bae\u4e3a URL\uff09 \u5f55\u5236\u6587\u4ef6\u6240\u5728\u7684\u8def\u5f84\u4ee5 post \u8bf7\u6c42\u8fd4\u56de\u7ed9\u5ba2\u6237\uff0c\u5177\u4f53\u7684 json \u683c\u5f0f\u4e3a {\"timestamp\": \"2016-06-04 16:38:45\", \"path\": [\"http://live-recorder.b0.upaiyun.com/play.com/live/stream/recorder20160604163702.mp4\"]} \u5176\u4e2d\uff0ctimestamp \u4e3a\u53d1\u9001 json \u56de\u8c03\u4efb\u52a1\u65f6\u95f4\uff0cpath \u4e3a\u5f55\u5236\u6587\u4ef6\u5177\u4f53\u8def\u5f84\uff0c\u652f\u6301\u56de\u8c03\u591a\u4e2a\u6587\u4ef6\u3002\u5f53\u5f55\u5236\u7684\u6587\u4ef6\u5230\u8fbe\u5207\u5272\u65f6\u95f4\uff0c\u6216\u8005\u5728\u95ea\u65ad\u5408\u5e76\u8fc7\u7a0b\u4e2d\uff0c\u9700\u8981\u5408\u5e76\u7684\u6d41\u89c6\u9891\u5206\u8fa8\u7387\u6216\u97f3\u9891\u91c7\u6837\u7387\u53d1\u751f\u53d8\u5316\u65f6\uff0c\u4f1a\u751f\u6210\u591a\u4e2a\u5f55\u5236\u6587\u4ef6\uff0c\u5177\u4f53\u7684 json \u683c\u5f0f\u4e3a {\"timestamp\": \"2016-06-04 16:38:45\", \"path\": [\"http://live-recorder.b0.upaiyun.com/play.com/live/stream/recorder20160604163702.mp4\", \"http://live-recorder.b0.upaiyun.com/play.com/live/stream/recorder20160604163902.mp4\"]}","title":"\u56de\u8c03"},{"location":"live/advanced/#_5","text":"\u6e90\u7ad9\u7c7b\u578b\uff1a\u53c8\u62cd\u4e91\u6e90 \u63d0\u4f9b\u8981\u8f6c\u7801\u7684\u539f\u59cb\u6d41\u3001\u8f6c\u7801\u5339\u914d\u7684\u540e\u7f00\u53ca\u8f6c\u7801\u6a21\u677f\u3002 \u652f\u6301\u97f3\u89c6\u9891\u6d41\u5b9e\u65f6\u8f6c\u7801\u5904\u7406\uff0c\u901a\u8fc7\u8f6c\u7801\u6a21\u7248\u53ef\u914d\u7f6e\u7f16\u7801\u6807\u51c6\u3001\u5206\u8fa8\u7387\u3001\u7801\u7387\u53ca\u8f93\u51fa\u6d41\u7c7b\u578b\u7b49\u6d41\u5904\u7406\u53c2\u6570\u3002 \u9ed8\u8ba4\u652f\u6301\u4f7f\u7528\u53c8\u62cd\u4e91\u76f4\u64ad\u670d\u52a1\u7684 RTMP\uff0cHTTP-FLV \u548c HLS \u534f\u8bae\u7684\u6d41\u8f6c\u7801\u652f\u6301 12 \u79cd\u8f6c\u7801\u6a21\u677f\u548c\u5ba2\u6237\u81ea\u5b9a\u4e49\u8f6c\u7801\u914d\u7f6e\uff0c\u8be6\u7ec6\u6a21\u677f\u4fe1\u606f,\u53c2\u8003 \u89c6\u9891\u8f6c\u7801\u9884\u7f6e\u6a21\u677f \u652f\u6301\u81ea\u5b9a\u4e49\u8f6c\u7801\u540e\u7f00\uff0c\u5206\u9694\u7b26\u652f\u6301\u4e2d\u5212\u7ebf\uff08-\uff09\u3001\u4e0b\u5212\u7ebf\uff08_\uff09\u548c\u611f\u53f9\u53f7\uff08!\uff09\u3002 \u652f\u6301\u89e6\u53d1\u5f0f\u8f6c\u7801\uff0c\u9700\u63d0\u524d\u914d\u7f6e\u9700\u8981\u8f6c\u7801\u7684\u6d41\u5730\u5740\u4ee5\u53ca\u8f6c\u7801\u7684\u89e6\u53d1\u540e\u7f00\uff0c\u5982 \u9700\u8981\u8f6c\u7801\u7684\u539f\u59cb\u6d41\u4e3a\uff1ahttp://play.com/live/stream \u89e6\u53d1\u8f6c\u7801\u7684\u540e\u7f00\u5339\u914d\u4e3a -small\uff0c\u5bf9\u5e94\u7684\u8f6c\u7801\u6a21\u677f\u4e3a 540p\uff0816:9\uff09 \u5f53\u6709\u7528\u6237\u8bf7\u6c42 http://play.com/live/stream-small \u65f6\u89e6\u53d1\u8f6c\u7801\uff0c\u5f53\u6700\u540e\u4e00\u4e2a\u8bf7\u6c42\u8be5\u8f6c\u7801\u6d41\u7684\u7528\u6237\u65ad\u5f00\u8fde\u63a5\u540e\uff0c\u505c\u6b62\u8f6c\u7801\u3002 \u793a\u4f8b\uff1a \u539f\u59cb\u6d41\u4e3a rtmp://play.com/live/stream \u914d\u7f6e\u7684\u5339\u914d\u540e\u7eed\u6709 -small\uff0c\u5bf9\u5e94\u8f6c\u7801\u6a21\u677f 540p\uff0816:9\uff09\uff0c \u5219\u8f6c\u7801\u6d41\u8bf7\u6c42\u5206\u522b\u4e3a rtmp://play.com/live/stream-small http://play.com/live/stream-small.flv http://play.com/live/stream-small.m3u8","title":"\u8f6c\u7801"},{"location":"live/advanced/#_6","text":"\u6e90\u7ad9\u7c7b\u578b\uff1a\u53c8\u62cd\u4e91\u6e90 \u4e92\u52a8\u76f4\u64ad\u4e1a\u52a1\u7279\u6027\u4e3a\uff1a\u76f4\u64ad\u89c6\u9891\u5185\u5bb9\u7531\u4e3b\u64ad\u5b9e\u65f6\u63a8\u9001\u81f3\u670d\u52a1\u5668\uff0c\u82e5\u4e3b\u64ad\u4f20\u64ad\u975e\u6cd5\u5185\u5bb9\uff0c\u5219\u5f71\u54cd\u5de8\u5927\u3002\u56e0\u6b64\u5382\u5546\u9700\u8981\u5bf9\u76f4\u64ad\u89c6\u9891\u5185\u5bb9\u8fdb\u884c\u5b9e\u65f6\u76d1\u63a7\uff0c\u5f53\u51fa\u73b0\u975e\u6cd5\u5185\u5bb9\u65f6\uff0c\u53ca\u65f6\u7981\u6b62\u975e\u6cd5\u5185\u5bb9\u7684\u4f20\u64ad\u3002 \u79d2\u7ea7\u7981\u64ad\u5219\u662f\u9488\u5bf9\u8be5\u4e1a\u52a1\u573a\u666f\u800c\u7814\u53d1\u7684\u529f\u80fd\uff0c\u7531\u53c8\u62cd\u63d0\u4f9b\u9875\u9762\u914d\u7f6e\u548c\u8c03\u7528 API \u7981\u64ad\u4e24\u79cd\u65b9\u5f0f\u3002\u5f53\u5ba2\u6237\u53d1\u73b0\u67d0\u76f4\u64ad\u89c6\u9891\u5185\u5bb9\u975e\u6cd5\u65f6\uff0c\u5b9e\u65f6\u65ad\u5f00\u4e3b\u64ad\u63a8\u6d41\uff0c\u4ece\u800c\u963b\u6b62\u975e\u6cd5\u5185\u5bb9\u7684\u4f20\u64ad\u3002 \u7981\u64ad\u65b9\u5f0f\u652f\u6301\u7acb\u5373\u7981\u64ad\uff0c\u89e3\u9664\u7981\u64ad\uff0c\u4ee5\u53ca\u7981\u64ad\u4e00\u6bb5\u65f6\u95f4\u540e\u81ea\u52a8\u89e3\u9664\u3002","title":"\u7981\u64ad"},{"location":"live/advanced/#_7","text":"\u6e90\u7ad9\u7c7b\u578b\uff1a\u53c8\u62cd\u4e91\u6e90 \u76f4\u64ad\u622a\u56fe\u670d\u52a1\u652f\u6301\u5c06\u76f4\u64ad\u89c6\u9891\u4ee5\u8bbe\u5b9a\u7684\u65f6\u95f4\u95f4\u9694\u548c\u5c3a\u5bf8\u5927\u5c0f\u8fdb\u884c\u622a\u56fe\uff0c\u5e76\u4ee5 .jpg \u683c\u5f0f\u4fdd\u5b58\u5728\u5b58\u50a8\u7a7a\u95f4\u3002\u5982\u679c\u5bf9\u622a\u56fe\u6587\u4ef6\u6709\u5904\u7406\u9700\u6c42\uff0c\u53ef\u5728\u53c8\u62cd\u4e91\u5904\u7406\u4e2d\u5fc3\u5bf9\u5176\u8fdb\u884c\u76f8\u5173\u5904\u7406\u64cd\u4f5c\uff0c\u8be6\u60c5\u8bf7\u89c1 \u4e91\u5904\u7406\u6587\u6863 \u3002","title":"\u622a\u56fe"},{"location":"live/advanced/#_8","text":"\u4ec5\u5728\u76f4\u64ad\u63a8\u6d41\u65f6\u8fdb\u884c\u5355\u6b21\u622a\u56fe\uff0c\u622a\u53d6\u63a8\u6d41\u7684\u7b2c\u4e00\u5e27\u3002\u540c\u4e00\u6761\u6d41\uff0c\u91cd\u63a8\u540e\u5c06\u91cd\u65b0\u622a\u53d6\u9996\u5e27\uff0c\u5e76\u8986\u76d6\u4e0a\u6b21\u63a8\u6d41\u7684\u622a\u56fe\u3002\u8be5\u622a\u56fe\u6a21\u5f0f\u9002\u7528\u4e8e\u9759\u6001\u5c01\u9762\u3002 \u5982\u679c\u5bf9\u670d\u52a1\u53f7\u4e3a upyun-live \u7684\u76f4\u64ad\u7a7a\u95f4\u5f00\u542f\u5355\u6b21\u622a\u56fe\uff0c\u9009\u62e9\u5b58\u50a8\u7a7a\u95f4\u4e3a upyun-live-pic \uff0c\u622a\u56fe\u540e\u6587\u4ef6\u7684\u5177\u4f53\u8def\u5f84\u4e3a upyun-live-pic.b0.upaiyun.com/upyun-live/live/stream.jpg \u5176\u4e2d upyun-live-pic \u4e3a\u5b58\u50a8\u7a7a\u95f4\uff0c upyun-live-pic.b0.upaiyun.com \u4e3a\u622a\u56fe\u6587\u4ef6\u9ed8\u8ba4\u8bbf\u95ee\u57df\u540d\uff0c upyun-live \u4e3a\u76f4\u64ad\u7a7a\u95f4\uff0clive \u4e3a\u63a5\u5165\u70b9\uff0c stream \u4e3a\u6d41\u540d\u3002","title":"\u5355\u6b21\u622a\u56fe"},{"location":"live/advanced/#_9","text":"\u5f00\u542f\u591a\u6b21\u622a\u56fe\uff0c\u53ef\u8bbe\u7f6e\u56fa\u5b9a\u65f6\u95f4\u95f4\u9694\uff0c\u5728\u63a8\u6d41\u8fc7\u7a0b\u4e2d\uff0c\u4ee5\u4e00\u5b9a\u65f6\u95f4\u95f4\u9694\u8fdb\u884c\u622a\u56fe\uff0c\u76f4\u5230\u63a8\u6d41\u7ed3\u675f\uff0c\u9002\u7528\u4e8e\u52a8\u6001\u5c01\u9762\u548c\u5185\u5bb9\u5ba1\u6838\u3002 \u5982\u679c\u5bf9\u670d\u52a1\u53f7\u4e3a upyun-live \u7684\u76f4\u64ad\u7a7a\u95f4\u5f00\u542f\u591a\u6b21\u622a\u56fe\uff0c\u9009\u62e9\u5b58\u50a8\u7a7a\u95f4\u4e3a upyun-live-pic \uff0c\u622a\u56fe\u4fdd\u5b58\u8def\u5f84\u53ca\u547d\u540d\u53ef\u8bbe\u7f6e\u4e3a {\u76f4\u64ad\u52a0\u901f\u670d\u52a1\u540d}/{\u63a5\u5165\u70b9}/{\u6d41\u540d}{\u5e74}{\u6708}{\u65e5}{\u65f6}{\u5206}{\u79d2}.jpg\uff0c\u5219\u622a\u56fe\u540e\u6587\u4ef6\u7684\u5177\u4f53\u8def\u5f84\u4e3a upyun-live-pic.b0.upaiyun.com/upyun-live/live/stream20170101121212.jpg \u5176\u4e2d upyun-live-pic \u4e3a\u5b58\u50a8\u7a7a\u95f4\uff0c upyun-live-pic.b0.upaiyun.com \u4e3a\u622a\u56fe\u6587\u4ef6\u9ed8\u8ba4\u8bbf\u95ee\u57df\u540d\uff0c upyun-live \u4e3a\u76f4\u64ad\u7a7a\u95f4\uff0clive \u4e3a\u63a5\u5165\u70b9\uff0c stream \u4e3a\u6d41\u540d\uff0c 201701011212 \u4e3a 2017 \u5e74 1 \u6708 1 \u65e5 12 \u70b9 12 \u5206 12 \u79d2\u3002 \u622a\u56fe\u4fdd\u5b58\u8def\u5f84\u53ca\u547d\u540d\u8be6\u60c5\u89c1\u540e\u53f0\u914d\u7f6e\u9875\u9762\u3002","title":"\u591a\u6b21\u622a\u56fe"},{"location":"live/advanced/#_10","text":"\u9700\u63d0\u4f9b\u63a5\u53d7\u56de\u8c03\u7684\u5730\u5740\uff08\u5efa\u8bae\u4e3a URL\uff09 \u76f4\u64ad\u622a\u56fe\u6587\u4ef6\u6240\u5728\u8def\u5f84\u4ee5 post \u8bf7\u6c42\u8fd4\u56de\u7ed9\u5ba2\u6237\uff0c\u5177\u4f53\u7684 json \u683c\u5f0f\u4e3a { \"bucket\": \"upyun-live\", // \u76f4\u64ad\u670d\u52a1\u540d \"app\": \"live\", // \u76f4\u64ad\u63a5\u5165\u70b9\u540d\u79f0 \"stream\": \"stream\", // \u76f4\u64ad\u6d41\u540d \"vhost\": \"push.com\", // \u63a8\u6d41\u57df\u540d \"path\": \"http://upyun-live-pic.b0.upaiyun.com/upyun-live/live/stream.jpg\", // \u622a\u56fe\u5b58\u50a8\u8def\u5f84 \"timestamp\": \"2017-01-01 12:12:12\", // \u622a\u56fe\u65f6\u95f4 \"status\": 200, // \u622a\u56fe\u72b6\u6001 \"error\": \"\" // \u5982\u679c\u622a\u56fe\u6210\u529f\uff0c\u5373 status \u4e3a 200 \uff0cerror \u5b57\u6bb5\u4e3a\u7a7a\u5b57\u7b26\u4e32\uff0c\u5426\u5219 error \u5b57\u6bb5\u4f1a\u7ed9\u51fa\u9519\u8bef\u4fe1\u606f }","title":"\u56de\u8c03"},{"location":"live/guide/","text":"\u8d26\u53f7\u7533\u8bf7 \u00b6 \u76f8\u5173\u8d26\u53f7\u521b\u5efa\u53ca\u8ba4\u8bc1\u53ef\u53c2\u8003 CDN \u670d\u52a1 \u5feb\u901f\u5165\u95e8 \u3002 \u670d\u52a1\u521b\u5efa \u00b6 \u767b\u5f55\u53c8\u62cd\u4e91\u63a7\u5236\u53f0\uff0c\u8fdb\u5165 \u670d\u52a1 \u6807\u7b7e\u680f\u3001\u70b9\u51fb \u521b\u5efa\u670d\u52a1 \uff0c\u5728\u5f39\u6846\u4e2d\u76f4\u64ad\u52a0\u901f\u670d\u52a1\u680f\u4e0b\u70b9\u51fb \u7acb\u5373\u521b\u5efa \u3002 \u53c8\u62cd\u6e90 \u00b6 \u5bf9\u4e8e\u5373\u5c06\u521b\u5efa\u7684\u76f4\u64ad\u670d\u52a1\u6709\u4e24\u79cd\u6e90\u7ad9\u6a21\u5f0f\uff0c\u5f53\u63a8\u6d41\u81f3\u53c8\u62cd\u65f6\uff0c\u8bf7\u9009\u62e9 \u6e90\u7ad9\u7c7b\u578b \u4e3a \u53c8\u62cd\u4e91 \u3002\u6b64\u65f6\uff0c\u586b\u5199\u5b8c\u670d\u52a1\u540d\u79f0\uff0c\u53ca\u9884\u5148\u5907\u6848\u597d\u7684 \u63a8\u6d41\u57df\u540d \u4e0e \u64ad\u653e\u57df\u540d \uff0c\u5e76\u9009\u62e9\u6027\u5730\u586b\u5199 \u63a5\u5165\u70b9 \uff0c\u5219\u76f4\u64ad\u670d\u52a1\u521b\u5efa\u6210\u529f\u3002 \u81ea\u4e3b\u6e90 \u00b6 \u5f53\u76f4\u64ad\u6d41\u4e0d\u662f\u63a8\u9001\u5230\u53c8\u62cd\uff0c\u800c\u662f\u56de\u5ba2\u6237\u6e90\u83b7\u53d6\u65f6\uff0c\u8bf7\u9009\u62e9 \u81ea\u4e3b\u6e90 \u6e90\u7ad9\u7c7b\u578b\uff0c\u5e76\u8bbe\u7f6e\u597d\u56de\u6e90\u5730\u5740\uff0c\u4e14\u53ea\u9700\u586b\u5199 \u64ad\u653e\u57df\u540d \uff0c\u9009\u62e9\u6027\u586b\u5199 \u63a5\u5165\u70b9 \u3002 \u4fe1\u606f\u586b\u5199\u5b8c\u6bd5\u6b63\u786e\u540e\uff0c\u70b9\u51fb\u521b\u5efa\uff0c\u5373\u521b\u5efa\u6210\u529f\u3002\u521b\u5efa\u6210\u529f\u540e\u505a cname \u89e3\u6790\uff0c\u5177\u4f53\u6d41\u7a0b\u53ef\u53c2\u8003 CDN \u670d\u52a1\u4e0b CNAME \u89e3\u6790 \u3002 \u63a8\u6d41\u6d4b\u8bd5 \u00b6 CNAME \u89e3\u6790\u751f\u6548\u540e\uff0c\u53ef\u8fdb\u884c\u63a8\u62c9\u6d41\u6d4b\u8bd5\u3002\u4f8b\u5982\u4f7f\u7528 OBS \u63a8\u6d41\uff0c\u8bbe\u7f6e\u597d\u63a8\u6d41\u5730\u5740\u3002 \u70b9\u51fb\u786e\u5b9a\u540e\u8fdb\u5165\u63a8\u6d41\u7a97\u53e3\uff0c\u9009\u62e9\u597d\u9700\u8981\u63a8\u6d41\u7684\u5185\u5bb9\uff0c\u6bd4\u5982\u5a92\u4f53\u6e90\uff0c\u518d\u70b9\u51fb\u5f00\u59cb\u4e32\u6d41\u3002 \u4e0d\u540c\u7248\u672c\u53ca\u4e0d\u540c\u5e73\u53f0\u7684 obs \u53ef\u80fd\u7565\u6709\u4e0d\u540c\uff0c\u6839\u636e\u5177\u4f53\u60c5\u51b5\u800c\u5b9a\u3002 \u64ad\u653e\u6d4b\u8bd5 \u00b6 \u64ad\u653e\u5bf9\u5e94\u63a8\u6d41\uff0c\u4f8b\u5982\u4f7f\u7528 VLC \u64ad\u653e\uff0c\u586b\u5199\u76f8\u5e94\u7684 rtmp \u64ad\u653e\u5730\u5740\u3002","title":"\u5feb\u901f\u5165\u95e8"},{"location":"live/guide/#_1","text":"\u76f8\u5173\u8d26\u53f7\u521b\u5efa\u53ca\u8ba4\u8bc1\u53ef\u53c2\u8003 CDN \u670d\u52a1 \u5feb\u901f\u5165\u95e8 \u3002","title":"\u8d26\u53f7\u7533\u8bf7"},{"location":"live/guide/#_2","text":"\u767b\u5f55\u53c8\u62cd\u4e91\u63a7\u5236\u53f0\uff0c\u8fdb\u5165 \u670d\u52a1 \u6807\u7b7e\u680f\u3001\u70b9\u51fb \u521b\u5efa\u670d\u52a1 \uff0c\u5728\u5f39\u6846\u4e2d\u76f4\u64ad\u52a0\u901f\u670d\u52a1\u680f\u4e0b\u70b9\u51fb \u7acb\u5373\u521b\u5efa \u3002","title":"\u670d\u52a1\u521b\u5efa"},{"location":"live/guide/#_3","text":"\u5bf9\u4e8e\u5373\u5c06\u521b\u5efa\u7684\u76f4\u64ad\u670d\u52a1\u6709\u4e24\u79cd\u6e90\u7ad9\u6a21\u5f0f\uff0c\u5f53\u63a8\u6d41\u81f3\u53c8\u62cd\u65f6\uff0c\u8bf7\u9009\u62e9 \u6e90\u7ad9\u7c7b\u578b \u4e3a \u53c8\u62cd\u4e91 \u3002\u6b64\u65f6\uff0c\u586b\u5199\u5b8c\u670d\u52a1\u540d\u79f0\uff0c\u53ca\u9884\u5148\u5907\u6848\u597d\u7684 \u63a8\u6d41\u57df\u540d \u4e0e \u64ad\u653e\u57df\u540d \uff0c\u5e76\u9009\u62e9\u6027\u5730\u586b\u5199 \u63a5\u5165\u70b9 \uff0c\u5219\u76f4\u64ad\u670d\u52a1\u521b\u5efa\u6210\u529f\u3002","title":"\u53c8\u62cd\u6e90"},{"location":"live/guide/#_4","text":"\u5f53\u76f4\u64ad\u6d41\u4e0d\u662f\u63a8\u9001\u5230\u53c8\u62cd\uff0c\u800c\u662f\u56de\u5ba2\u6237\u6e90\u83b7\u53d6\u65f6\uff0c\u8bf7\u9009\u62e9 \u81ea\u4e3b\u6e90 \u6e90\u7ad9\u7c7b\u578b\uff0c\u5e76\u8bbe\u7f6e\u597d\u56de\u6e90\u5730\u5740\uff0c\u4e14\u53ea\u9700\u586b\u5199 \u64ad\u653e\u57df\u540d \uff0c\u9009\u62e9\u6027\u586b\u5199 \u63a5\u5165\u70b9 \u3002 \u4fe1\u606f\u586b\u5199\u5b8c\u6bd5\u6b63\u786e\u540e\uff0c\u70b9\u51fb\u521b\u5efa\uff0c\u5373\u521b\u5efa\u6210\u529f\u3002\u521b\u5efa\u6210\u529f\u540e\u505a cname \u89e3\u6790\uff0c\u5177\u4f53\u6d41\u7a0b\u53ef\u53c2\u8003 CDN \u670d\u52a1\u4e0b CNAME \u89e3\u6790 \u3002","title":"\u81ea\u4e3b\u6e90"},{"location":"live/guide/#_5","text":"CNAME \u89e3\u6790\u751f\u6548\u540e\uff0c\u53ef\u8fdb\u884c\u63a8\u62c9\u6d41\u6d4b\u8bd5\u3002\u4f8b\u5982\u4f7f\u7528 OBS \u63a8\u6d41\uff0c\u8bbe\u7f6e\u597d\u63a8\u6d41\u5730\u5740\u3002 \u70b9\u51fb\u786e\u5b9a\u540e\u8fdb\u5165\u63a8\u6d41\u7a97\u53e3\uff0c\u9009\u62e9\u597d\u9700\u8981\u63a8\u6d41\u7684\u5185\u5bb9\uff0c\u6bd4\u5982\u5a92\u4f53\u6e90\uff0c\u518d\u70b9\u51fb\u5f00\u59cb\u4e32\u6d41\u3002 \u4e0d\u540c\u7248\u672c\u53ca\u4e0d\u540c\u5e73\u53f0\u7684 obs \u53ef\u80fd\u7565\u6709\u4e0d\u540c\uff0c\u6839\u636e\u5177\u4f53\u60c5\u51b5\u800c\u5b9a\u3002","title":"\u63a8\u6d41\u6d4b\u8bd5"},{"location":"live/guide/#_6","text":"\u64ad\u653e\u5bf9\u5e94\u63a8\u6d41\uff0c\u4f8b\u5982\u4f7f\u7528 VLC \u64ad\u653e\uff0c\u586b\u5199\u76f8\u5e94\u7684 rtmp \u64ad\u653e\u5730\u5740\u3002","title":"\u64ad\u653e\u6d4b\u8bd5"},{"location":"live/mobile-sdk/","text":"IOS \u63a8\u6d41 SDK \u00b6 \u7cfb\u7edf\u8bf4\u660e \u00b6 \u652f\u6301 iOS 8 \u53ca\u4ee5\u4e0a\u7cfb\u7edf\u7248\u672c \u652f\u6301 ARMv7\uff0cARM64\uff0cx86_64 \u67b6\u6784 \u529f\u80fd\u8bf4\u660e \u00b6 \u91c7\u96c6\u6a21\u5757\u6e90\u7801\u5f00\u653e\uff0c\u97f3\u89c6\u9891\u53ef\u4ee5\u81ea\u7531\u914d\u7f6e \u652f\u6301\u786c\u4ef6\u7f16\u7801 \u591a\u7801\u7387\u53ef\u9009 \u652f\u6301 H.264 \u89c6\u9891\u7f16\u7801 \u652f\u6301 AAC \u97f3\u9891\u7f16\u7801 \u652f\u6301\u524d\u540e\u6444\u50cf\u5934 \u652f\u6301\u81ea\u52a8\u5bf9\u7126 \u652f\u6301\u624b\u52a8\u8c03\u6574\u5bf9\u7126\u70b9 \u652f\u6301\u95ea\u5149\u706f\u64cd\u4f5c \u652f\u6301\u591a\u5206\u8fa8\u7387\u7f16\u7801 \u652f\u6301\u6784\u9020\u5e26\u5b89\u5168\u6388\u6743\u51ed\u8bc1\u7684 RTMP \u63a8\u6d41\u5730\u5740 \u652f\u6301 ARMv7, ARM64, x86_64 \u67b6\u6784 \u652f\u6301 RTMP \u534f\u8bae\u76f4\u64ad\u63a8\u6d41 \u652f\u6301\u63a8\u6d41\u65f6\u53ef\u53d8\u7801\u7387 \u63d0\u4f9b\u53d1\u9001 buffer \u652f\u6301\u89c6\u9891 Orientation \u64cd\u4f5c \u652f\u6301\u5f31\u7f51\u4e22\u5e27\u7b56\u7565 \u652f\u6301\u540e\u53f0\u97f3\u9891\u63a8\u6d41 \u652f\u6301\u6c34\u5370\u529f\u80fd \u652f\u6301\u7f8e\u989c\u529f\u80fd \u9879\u76ee\u5730\u5740\uff1ahttps://github.com/upyun/ios-live-sdk \u53cd\u9988\u53ca\u5efa\u8bae\uff1alivesdk@upai.com \u5b89\u5353\u63a8\u6d41 SDK \u00b6 \u7cfb\u7edf\u8bf4\u660e \u00b6 Android 4.1(API 16) \u4ee5\u4e0a \u652f\u6301 ARMv5\uff0cARMv7\uff0cARMv8 \u7248\u672c \u529f\u80fd\u8bf4\u660e \u00b6 \u652f\u6301 H.264 \u548c AAC \u786c\u7f16 \u786c\u7f16\u652f\u6301 Android Min API 18\uff08Android 4.3\uff09\u53ca\u5176\u4ee5\u4e0a\u7248\u672c \u652f\u6301 RTMP \u5c01\u5305\u53ca\u63a8\u6d41 \u652f\u6301 RTMP \u63a8\u6d41\u81ea\u9002\u5e94\u7f51\u7edc\u8d28\u91cf\u52a8\u6001\u5207\u6362\u7801\u7387\u6216\u81ea\u5b9a\u4e49\u7b56\u7565 \u652f\u6301\u7eaf\u97f3\u9891\u63a8\u6d41\uff0c\u4ee5\u53ca\u540e\u53f0\u8fd0\u884c \u652f\u6301\u52a8\u6001\u66f4\u6539 Encoding Orientation \u9879\u76ee\u5730\u5740\uff1ahttps://github.com/upyun/android-push-sdk \u53cd\u9988\u53ca\u5efa\u8bae\uff1alivesdk@upai.com IOS \u64ad\u653e\u5668 SDK \u00b6 \u7cfb\u7edf\u8bf4\u660e \u00b6 \u652f\u6301 iOS 8 \u53ca\u4ee5\u4e0a\u7cfb\u7edf\u7248\u672c \u652f\u6301 ARMv7\uff0cARM64\uff0cx86_64 \u67b6\u6784 \u529f\u80fd\u8bf4\u660e \u00b6 \u652f\u6301 RTMP \u3001HLS \u548c HTTP-FLV \u534f\u8bae\u7684\u76f4\u64ad\u6d41\u5a92\u4f53\u64ad\u653e \u9ad8\u53ef\u5b9a\u5236\uff1a\u53ef\u81ea\u5b9a\u4e49\u5c3a\u5bf8\uff0c\u6309\u94ae\uff0c\u8fdb\u5ea6\u6761\uff0c\u5168\u5c4f\uff0c\u65cb\u8f6c\u7b49 UI \u5c5e\u6027 \u652f\u6301\u5355\u97f3\u9891\u64ad\u653e \u652f\u6301 RTMP \u76f4\u64ad\u9996\u5c4f\u79d2\u5f00 RTMP \u76f4\u64ad\u7d2f\u79ef\u5ef6\u8fdf\u6d88\u9664\u6280\u672f \u652f\u6301 speex \u89e3\u7801 \u97f3\u753b\u540c\u6b65\u8c03\u6574 \u4e00\u5c4f\u591a\u753b \u70b9\u64ad\u652f\u6301 \u652f\u6301 seek \u529f\u80fd \u89c6\u9891\u7f13\u51b2\u8bbe\u7f6e\uff0c\u7f13\u51b2\u8fdb\u5ea6 \u652f\u6301\u9884\u8fde\u63a5\uff0c\u540e\u64ad\u653e\u529f\u80fd \u96c6\u6210\u4eae\u5ea6\u8c03\u6574\u548c\u97f3\u91cf\u8c03\u6574 \u652f\u6301\u9759\u97f3\u64ad\u653e \u652f\u6301\u64ad\u653e\u5668\u72b6\u6001\u56de\u8c03 \u652f\u6301\u6d41\u4fe1\u606f\uff0c\u64ad\u653e\u5668\u4fe1\u606f\u5bdf\u770b\uff08Dashboard\uff09 \u652f\u6301\u64ad\u653e\u672c\u5730\u89c6\u9891\u6587\u4ef6 \u96c6\u6210\u64ad\u653e\u8d28\u91cf\u76d1\u63a7 \u9879\u76ee\u5730\u5740\uff1ahttps://github.com/upyun/ios-live-sdk \u53cd\u9988\u53ca\u5efa\u8bae\uff1alivesdk@upai.com \u5b89\u5353\u64ad\u653e\u5668 SDK \u00b6 \u7cfb\u7edf\u8bf4\u660e \u00b6 Android 2.3 (API 9) \u53ca\u5176\u4ee5\u4e0a \u652f\u6301 ARMv5\uff0cARMv7\uff0cARMv8 \u7248\u672c \u529f\u80fd\u8bf4\u660e \u00b6 \u652f\u6301 RTMP \u3001HLS \u548c HTTP-FLV \u534f\u8bae\u7684\u76f4\u64ad\u6d41\u5a92\u4f53\u64ad\u653e \u652f\u6301\u5e38\u89c1\u7684\u97f3\u89c6\u9891\u6587\u4ef6\u64ad\u653e\uff08MP4\u3001M4A\u3001FLV \u7b49\uff09 \u652f\u6301 MediaCodec \u786c\u4ef6\u89e3\u7801 \u63d0\u4f9b\u64ad\u653e\u5668\u6838\u5fc3\u7c7b PLMediaPlayer \u63d0\u4f9b PLVideoView \u63a7\u4ef6 \u652f\u6301\u64ad\u653e\u5668\u97f3\u91cf\u8bbe\u7f6e\uff0c\u53ef\u5b9e\u73b0\u9759\u97f3\u529f\u80fd \u652f\u6301\u7eaf\u97f3\u9891\u64ad\u653e \u652f\u6301\u76f4\u64ad\u7d2f\u79ef\u5ef6\u65f6\u4f18\u5316 \u652f\u6301 ARM\uff0cARMv7a\uff0cARM64v8a\uff0cX86 \u4e3b\u6d41\u82af\u7247\u4f53\u7cfb\u67b6\u6784 \u53ef\u9ad8\u5ea6\u5b9a\u5236\u5316\u7684 MediaController \u9ad8\u53ef\u5b9a\u5236\uff1a\u53ef\u81ea\u5b9a\u4e49\u5c3a\u5bf8\uff0c\u6309\u94ae\uff0c\u8fdb\u5ea6\u6761\uff0c\u5168\u5c4f\uff0c\u65cb\u8f6c\u7b49 UI \u5c5e\u6027 \u5355\u97f3\u9891\u64ad\u653e RTMP \u76f4\u64ad\u9996\u5c4f\u79d2\u5f00\u652f\u6301 RTMP \u76f4\u64ad\u7d2f\u79ef\u5ef6\u8fdf\u6d88\u9664\u6280\u672f \u652f\u6301 speex \u89e3\u7801 \u97f3\u753b\u540c\u6b65\u8c03\u6574 \u652f\u6301\u70b9\u64ad \u652f\u6301 seek \u529f\u80fd \u89c6\u9891\u7f13\u51b2\u8bbe\u7f6e\uff0c\u7f13\u51b2\u8fdb\u5ea6 \u652f\u6301\u9884\u8fde\u63a5\uff0c\u540e\u64ad\u653e\u529f\u80fd \u96c6\u6210\u4eae\u5ea6\u8c03\u6574\u548c\u97f3\u91cf\u8c03\u6574 \u652f\u6301\u9759\u97f3\u64ad\u653e \u652f\u6301\u64ad\u653e\u5668\u72b6\u6001\u56de\u8c03 \u652f\u6301\u6d41\u4fe1\u606f\uff0c\u64ad\u653e\u5668\u4fe1\u606f\u5bdf\u770b\uff08Dashboard\uff09 \u652f\u6301\u64ad\u653e\u672c\u5730\u89c6\u9891\u6587\u4ef6 \u9879\u76ee\u5730\u5740\uff1ahttps://github.com/upyun/android-player-sdk \u53cd\u9988\u53ca\u5efa\u8bae\uff1alivesdk@upai.com","title":"\u79fb\u52a8\u7aef sdk"},{"location":"live/mobile-sdk/#ios-sdk","text":"","title":"IOS \u63a8\u6d41 SDK"},{"location":"live/mobile-sdk/#_1","text":"\u652f\u6301 iOS 8 \u53ca\u4ee5\u4e0a\u7cfb\u7edf\u7248\u672c \u652f\u6301 ARMv7\uff0cARM64\uff0cx86_64 \u67b6\u6784","title":"\u7cfb\u7edf\u8bf4\u660e"},{"location":"live/mobile-sdk/#_2","text":"\u91c7\u96c6\u6a21\u5757\u6e90\u7801\u5f00\u653e\uff0c\u97f3\u89c6\u9891\u53ef\u4ee5\u81ea\u7531\u914d\u7f6e \u652f\u6301\u786c\u4ef6\u7f16\u7801 \u591a\u7801\u7387\u53ef\u9009 \u652f\u6301 H.264 \u89c6\u9891\u7f16\u7801 \u652f\u6301 AAC \u97f3\u9891\u7f16\u7801 \u652f\u6301\u524d\u540e\u6444\u50cf\u5934 \u652f\u6301\u81ea\u52a8\u5bf9\u7126 \u652f\u6301\u624b\u52a8\u8c03\u6574\u5bf9\u7126\u70b9 \u652f\u6301\u95ea\u5149\u706f\u64cd\u4f5c \u652f\u6301\u591a\u5206\u8fa8\u7387\u7f16\u7801 \u652f\u6301\u6784\u9020\u5e26\u5b89\u5168\u6388\u6743\u51ed\u8bc1\u7684 RTMP \u63a8\u6d41\u5730\u5740 \u652f\u6301 ARMv7, ARM64, x86_64 \u67b6\u6784 \u652f\u6301 RTMP \u534f\u8bae\u76f4\u64ad\u63a8\u6d41 \u652f\u6301\u63a8\u6d41\u65f6\u53ef\u53d8\u7801\u7387 \u63d0\u4f9b\u53d1\u9001 buffer \u652f\u6301\u89c6\u9891 Orientation \u64cd\u4f5c \u652f\u6301\u5f31\u7f51\u4e22\u5e27\u7b56\u7565 \u652f\u6301\u540e\u53f0\u97f3\u9891\u63a8\u6d41 \u652f\u6301\u6c34\u5370\u529f\u80fd \u652f\u6301\u7f8e\u989c\u529f\u80fd \u9879\u76ee\u5730\u5740\uff1ahttps://github.com/upyun/ios-live-sdk \u53cd\u9988\u53ca\u5efa\u8bae\uff1alivesdk@upai.com","title":"\u529f\u80fd\u8bf4\u660e"},{"location":"live/mobile-sdk/#sdk","text":"","title":"\u5b89\u5353\u63a8\u6d41 SDK"},{"location":"live/mobile-sdk/#_3","text":"Android 4.1(API 16) \u4ee5\u4e0a \u652f\u6301 ARMv5\uff0cARMv7\uff0cARMv8 \u7248\u672c","title":"\u7cfb\u7edf\u8bf4\u660e"},{"location":"live/mobile-sdk/#_4","text":"\u652f\u6301 H.264 \u548c AAC \u786c\u7f16 \u786c\u7f16\u652f\u6301 Android Min API 18\uff08Android 4.3\uff09\u53ca\u5176\u4ee5\u4e0a\u7248\u672c \u652f\u6301 RTMP \u5c01\u5305\u53ca\u63a8\u6d41 \u652f\u6301 RTMP \u63a8\u6d41\u81ea\u9002\u5e94\u7f51\u7edc\u8d28\u91cf\u52a8\u6001\u5207\u6362\u7801\u7387\u6216\u81ea\u5b9a\u4e49\u7b56\u7565 \u652f\u6301\u7eaf\u97f3\u9891\u63a8\u6d41\uff0c\u4ee5\u53ca\u540e\u53f0\u8fd0\u884c \u652f\u6301\u52a8\u6001\u66f4\u6539 Encoding Orientation \u9879\u76ee\u5730\u5740\uff1ahttps://github.com/upyun/android-push-sdk \u53cd\u9988\u53ca\u5efa\u8bae\uff1alivesdk@upai.com","title":"\u529f\u80fd\u8bf4\u660e"},{"location":"live/mobile-sdk/#ios-sdk_1","text":"","title":"IOS \u64ad\u653e\u5668 SDK"},{"location":"live/mobile-sdk/#_5","text":"\u652f\u6301 iOS 8 \u53ca\u4ee5\u4e0a\u7cfb\u7edf\u7248\u672c \u652f\u6301 ARMv7\uff0cARM64\uff0cx86_64 \u67b6\u6784","title":"\u7cfb\u7edf\u8bf4\u660e"},{"location":"live/mobile-sdk/#_6","text":"\u652f\u6301 RTMP \u3001HLS \u548c HTTP-FLV \u534f\u8bae\u7684\u76f4\u64ad\u6d41\u5a92\u4f53\u64ad\u653e \u9ad8\u53ef\u5b9a\u5236\uff1a\u53ef\u81ea\u5b9a\u4e49\u5c3a\u5bf8\uff0c\u6309\u94ae\uff0c\u8fdb\u5ea6\u6761\uff0c\u5168\u5c4f\uff0c\u65cb\u8f6c\u7b49 UI \u5c5e\u6027 \u652f\u6301\u5355\u97f3\u9891\u64ad\u653e \u652f\u6301 RTMP \u76f4\u64ad\u9996\u5c4f\u79d2\u5f00 RTMP \u76f4\u64ad\u7d2f\u79ef\u5ef6\u8fdf\u6d88\u9664\u6280\u672f \u652f\u6301 speex \u89e3\u7801 \u97f3\u753b\u540c\u6b65\u8c03\u6574 \u4e00\u5c4f\u591a\u753b \u70b9\u64ad\u652f\u6301 \u652f\u6301 seek \u529f\u80fd \u89c6\u9891\u7f13\u51b2\u8bbe\u7f6e\uff0c\u7f13\u51b2\u8fdb\u5ea6 \u652f\u6301\u9884\u8fde\u63a5\uff0c\u540e\u64ad\u653e\u529f\u80fd \u96c6\u6210\u4eae\u5ea6\u8c03\u6574\u548c\u97f3\u91cf\u8c03\u6574 \u652f\u6301\u9759\u97f3\u64ad\u653e \u652f\u6301\u64ad\u653e\u5668\u72b6\u6001\u56de\u8c03 \u652f\u6301\u6d41\u4fe1\u606f\uff0c\u64ad\u653e\u5668\u4fe1\u606f\u5bdf\u770b\uff08Dashboard\uff09 \u652f\u6301\u64ad\u653e\u672c\u5730\u89c6\u9891\u6587\u4ef6 \u96c6\u6210\u64ad\u653e\u8d28\u91cf\u76d1\u63a7 \u9879\u76ee\u5730\u5740\uff1ahttps://github.com/upyun/ios-live-sdk \u53cd\u9988\u53ca\u5efa\u8bae\uff1alivesdk@upai.com","title":"\u529f\u80fd\u8bf4\u660e"},{"location":"live/mobile-sdk/#sdk_1","text":"","title":"\u5b89\u5353\u64ad\u653e\u5668 SDK"},{"location":"live/mobile-sdk/#_7","text":"Android 2.3 (API 9) \u53ca\u5176\u4ee5\u4e0a \u652f\u6301 ARMv5\uff0cARMv7\uff0cARMv8 \u7248\u672c","title":"\u7cfb\u7edf\u8bf4\u660e"},{"location":"live/mobile-sdk/#_8","text":"\u652f\u6301 RTMP \u3001HLS \u548c HTTP-FLV \u534f\u8bae\u7684\u76f4\u64ad\u6d41\u5a92\u4f53\u64ad\u653e \u652f\u6301\u5e38\u89c1\u7684\u97f3\u89c6\u9891\u6587\u4ef6\u64ad\u653e\uff08MP4\u3001M4A\u3001FLV \u7b49\uff09 \u652f\u6301 MediaCodec \u786c\u4ef6\u89e3\u7801 \u63d0\u4f9b\u64ad\u653e\u5668\u6838\u5fc3\u7c7b PLMediaPlayer \u63d0\u4f9b PLVideoView \u63a7\u4ef6 \u652f\u6301\u64ad\u653e\u5668\u97f3\u91cf\u8bbe\u7f6e\uff0c\u53ef\u5b9e\u73b0\u9759\u97f3\u529f\u80fd \u652f\u6301\u7eaf\u97f3\u9891\u64ad\u653e \u652f\u6301\u76f4\u64ad\u7d2f\u79ef\u5ef6\u65f6\u4f18\u5316 \u652f\u6301 ARM\uff0cARMv7a\uff0cARM64v8a\uff0cX86 \u4e3b\u6d41\u82af\u7247\u4f53\u7cfb\u67b6\u6784 \u53ef\u9ad8\u5ea6\u5b9a\u5236\u5316\u7684 MediaController \u9ad8\u53ef\u5b9a\u5236\uff1a\u53ef\u81ea\u5b9a\u4e49\u5c3a\u5bf8\uff0c\u6309\u94ae\uff0c\u8fdb\u5ea6\u6761\uff0c\u5168\u5c4f\uff0c\u65cb\u8f6c\u7b49 UI \u5c5e\u6027 \u5355\u97f3\u9891\u64ad\u653e RTMP \u76f4\u64ad\u9996\u5c4f\u79d2\u5f00\u652f\u6301 RTMP \u76f4\u64ad\u7d2f\u79ef\u5ef6\u8fdf\u6d88\u9664\u6280\u672f \u652f\u6301 speex \u89e3\u7801 \u97f3\u753b\u540c\u6b65\u8c03\u6574 \u652f\u6301\u70b9\u64ad \u652f\u6301 seek \u529f\u80fd \u89c6\u9891\u7f13\u51b2\u8bbe\u7f6e\uff0c\u7f13\u51b2\u8fdb\u5ea6 \u652f\u6301\u9884\u8fde\u63a5\uff0c\u540e\u64ad\u653e\u529f\u80fd \u96c6\u6210\u4eae\u5ea6\u8c03\u6574\u548c\u97f3\u91cf\u8c03\u6574 \u652f\u6301\u9759\u97f3\u64ad\u653e \u652f\u6301\u64ad\u653e\u5668\u72b6\u6001\u56de\u8c03 \u652f\u6301\u6d41\u4fe1\u606f\uff0c\u64ad\u653e\u5668\u4fe1\u606f\u5bdf\u770b\uff08Dashboard\uff09 \u652f\u6301\u64ad\u653e\u672c\u5730\u89c6\u9891\u6587\u4ef6 \u9879\u76ee\u5730\u5740\uff1ahttps://github.com/upyun/android-player-sdk \u53cd\u9988\u53ca\u5efa\u8bae\uff1alivesdk@upai.com","title":"\u529f\u80fd\u8bf4\u660e"},{"location":"live/primary/","text":"\u56de\u6e90\u914d\u7f6e \u00b6 \u53c8\u62cd\u4e91\u76f4\u64ad\u7cfb\u7edf\u652f\u6301\u4e24\u79cd\u670d\u52a1\u7c7b\u578b\uff1a\u53c8\u62cd\u4e91\u6e90\u548c\u81ea\u4e3b\u6e90\u7ad9\u3002 \u53c8\u62cd\u4e91\u6e90 \u00b6 \u53c8\u62cd\u4e91\u6e90\uff1a\u8868\u793a\u6d41\u5a92\u4f53\u5185\u5bb9\u76f4\u63a5\u63a8\u6d41\u5230\u53c8\u62cd\u4e91 CDN \uff0c\u5c06\u63a8\u6d41\u4e0e\u5206\u53d1\u90fd\u8fdb\u884c CDN \u52a0\u901f\u3002\u53c8\u62cd\u4e91\u6e90\u73b0\u4ec5\u652f\u6301 RTMP \u63a8\u6d41\u3002 \u7ba1\u7406\u540e\u53f0\uff1a\u521b\u5efa\u670d\u52a1 > \u76f4\u64ad\u52a0\u901f > \u53c8\u62cd\u4e91\u6e90 \u521b\u5efa\u53c8\u62cd\u4e91\u6e90\uff0c\u586b\u5199\u670d\u52a1\u540d\u3001\u5df2\u5907\u6848\u7684\u64ad\u653e\u57df\u540d\u548c\u63a8\u6d41\u57df\u540d\uff0c\u63a8\u6d41\u57df\u540d\u4e0e\u64ad\u653e\u57df\u540d\u4e0d\u80fd\u5171\u7528\u3002 \u53ef\u9009\u62e9\u6027\u586b\u5199\u63a5\u5165\u70b9\uff0c\u5982\u679c\u586b\u5199\u4e86\u5177\u4f53\u7684\u63a5\u5165\u70b9\uff0c\u5219\u53ea\u6709\u8be5\u63a5\u5165\u70b9\u7684 URL \u53ef\u8fdb\u884c\u63a8\u6d41\uff0c\u5176\u4ed6\u63a5\u5165\u70b9\u5747\u63a8\u6d41\u5931\u8d25\u3002\u82e5\u6ca1\u6709\u586b\u5199\u5177 \u4f53\u63a5\u5165\u70b9\uff0c\u5219\u4efb\u610f\u63a5\u5165\u70b9\u53ef\u8fdb\u884c\u63a8\u6d41\u3002 \u5f53\u63a8\u6d41\u57df\u540d\u586b\u5199 push.com \uff0c\u64ad\u653e\u57df\u540d\u586b\u5199 play.com \uff0c\u63a5\u5165\u70b9\u586b\u5199 live \uff0c\u5982\u679c\u63a8\u6d41 URL \u4e3a rtmp://push.com/live/stream \u65f6\uff0c\u5176 rtmp \u64ad\u653e URL \u4e3a rtmp://play.com/live/stream \u5176\u4e2d\uff0cstream \u4e3a\u6d41\u540d\uff0c\u53c8\u79f0\u6d41\u5bc6\u94a5\uff0clive/stream \u53c8\u79f0\u4e3a\u9891\u9053\uff0c\u540c\u4e00\u6761\u6d41\u63a8\u62c9\u6d41\u57df\u540d\u4e0d\u540c\uff0c\u4f46\u9891\u9053\u540d\u4e00\u81f4\u3002 \u6ce8\uff1a\u4ee5\u4e0a\u57df\u540d\u3001\u63a5\u5165\u70b9\u53ca\u6d41\u540d\u7684\u547d\u540d\u4ec5\u4e3a\u4e3e\u4f8b\u7528\uff0c\u4e0b\u540c\u3002 \u81ea\u4e3b\u6e90\u7ad9 \u00b6 \u81ea\u4e3b\u6e90\u7ad9\uff1a\u6d41\u5a92\u4f53\u5185\u5bb9\u5728\u5ba2\u6237\u6e90\u7ad9\uff0c\u53c8\u62cd\u4e91\u901a\u8fc7\u56de\u5ba2\u6237\u6e90\u62c9\u6d41\u7684\u65b9\u5f0f\u5bf9\u5176\u5185\u5bb9\u8fdb\u884c\u5206\u53d1\u3002 \u7ba1\u7406\u540e\u53f0\uff1a\u521b\u5efa\u670d\u52a1 > \u76f4\u64ad\u52a0\u901f > \u81ea\u4e3b\u6e90\u7ad9 \u81ea\u4e3b\u6e90\u7ad9\u9700\u8981\u660e\u786e\u56de\u6e90\u534f\u8bae\u662f RTMP \u8fd8\u662f HTTP\uff0c\u5e76\u586b\u5199\u6e90\u7ad9 IP \u6216\u8005 \u57df\u540d\uff0c\u56de\u6e90 IP \u73b0\u4e0d\u652f\u6301\u591a\u4e2a\uff0c\u82e5\u56de\u6e90 IP \u4f1a\u7ecf\u5e38\u53d8\u66f4\uff0c\u5efa\u8bae\u6e90\u7ad9\u586b\u5199\u57df\u540d\u5f62\u5f0f\u3002\u5f53\u56de\u6e90\u534f\u8bae\u662f RTMP \u65f6\uff0c\u9ed8\u8ba4\u7aef\u53e3\u662f 1935\uff0c\u5f53\u56de\u6e90\u534f\u8bae\u662f HTTP \u65f6\uff0c\u9ed8\u8ba4\u7aef\u53e3\u4e3a 80\uff0c\u652f\u6301\u7aef\u53e3\u81ea\u5b9a\u4e49\u3002\u56e0\u81ea\u4e3b\u6e90\u7ad9\u662f\u56de\u5ba2\u6237\u6e90\u62c9\u6d41\uff0c\u5219\u65e0\u63a8\u6d41\u57df\u540d\uff0c\u53ea\u9700\u8981\u8bbe\u7f6e\u64ad\u653e\u57df\u540d\u3002 HTTP \u534f\u8bae\u56de\u6e90\u65f6\uff0c\u4ee5 HTTP-FLV \u5f62\u5f0f\u56de\u6e90\uff0c\u82e5\u6e90\u4e3a HLS \u53ef\u901a\u8fc7\u6587\u4ef6\u52a0\u901f\u7cfb\u7edf\u521b\u5efa\u670d\u52a1\uff0c\u914d\u7f6e\u56de\u6e90\u4fe1\u606f\u3002 \u63a5\u5165\u70b9\u914d\u7f6e\u8bf4\u660e\u540c\u53c8\u62cd\u4e91\u6e90\u3002 \u4ee5\u4e0a\u4e24\u79cd\u4e1a\u52a1\u6a21\u5f0f\uff0c\u5747\u652f\u6301 RTMP\u3001HTTP-FLV \u548c HLS \u64ad\u653e\uff0c\u540e\u7eed\u7ae0\u8282\u4f1a\u8be6\u7ec6\u4ecb\u7ecd\u3002 \u57df\u540d\u7ed1\u5b9a \u00b6 \u76f4\u64ad\u7ba1\u7406\u540e\u53f0\uff1a\u670d\u52a1 > \u52a0\u901f\u57df\u540d > \u57df\u540d\u7ed1\u5b9a \u6e90\u7ad9\u7c7b\u578b\uff1a\u5168\u90e8 \u57df\u540d\u7ed1\u5b9a\u4ec5\u652f\u6301\u5df2\u5907\u6848\u6210\u529f\u7684\u81ea\u5b9a\u4e49\u57df\u540d\u8fdb\u884c\u7ed1\u5b9a\uff0c\u5982\u679c\u8be5\u57df\u540d\u672a\u5907\u6848\u6210\u529f\uff0c\u5219\u4e0d\u80fd\u901a\u8fc7\u57df\u540d\u7ed1\u5b9a\u5ba1\u6838\u3002 \u5ba1\u6838\u7ed3\u679c\u4f1a\u63a7\u5236\u53f0\u548c\u90ae\u4ef6\u4e24\u79cd\u65b9\u5f0f\u8fdb\u884c\u901a\u77e5\uff0c\u6b63\u5e38\u5ba1\u6838\u65f6\u95f4\u4e3a\u4e00\u4e2a\u5de5\u4f5c\u65e5\u3002 \u6dfb\u52a0\u57df\u540d\u7ed1\u5b9a\uff0c\u5982\u679c\u662f\u53c8\u62cd\u4e91\u6e90\uff0c\u9700\u8981\u7ed1\u5b9a\u63a8\u6d41\u57df\u540d\u548c\u64ad\u653e\u57df\u540d\uff0c\u5982\u679c\u662f\u81ea\u4e3b\u6e90\u7ad9\uff0c\u5219\u53ea\u9700\u8981\u7ed1\u5b9a\u64ad\u653e\u57df\u540d\u3002\u7ed1\u5b9a\u5b8c\u6210\u540e\uff0c\u9700\u8981\u5230\u57df\u540d\u670d\u52a1\u5546\u7684 DNS \u89e3\u6790\u7ba1\u7406\u4e2d\uff0c\u5c06\u57df\u540d CNAME \u89e3\u6790\u5230\u53c8\u62cd\u4e91\u5185\u90e8\u57df\u540d\u3002 \u5f53\u4e1a\u52a1\u6a21\u5f0f\u4e3a\u53c8\u62cd\u4e91\u6e90\u65f6\uff0c\u63a8\u6d41\u57df\u540d CNAME \u89e3\u6790\u5230 <bucket>.s1.aicdn.com \uff0c\u64ad\u653e\u57df\u540d CNAME \u89e3\u6790\u5230 <bucket>.s0.aicdn.com \u3002 \u5f53\u4e1a\u52a1\u6a21\u5f0f\u4e3a\u81ea\u4e3b\u6e90\u7ad9\u65f6\uff0c\u53ea\u9700\u5c06\u64ad\u653e\u57df\u540d CNAME \u89e3\u6790\u5230 <bucket>.s0.aicdn.com \u3002 \u6ce8\uff1a <> \u5185\u7684 bucket \u9700\u8981\u66ff\u6362\u6210\u5bf9\u5e94\u7684\u670d\u52a1\u540d\uff0c\u4e0b\u540c\u3002 HTTP-FLV \u00b6 \u7ba1\u7406\u540e\u53f0\uff1a\u670d\u52a1 > \u57fa\u7840\u914d\u7f6e > HTTP-FLV \u8f93\u51fa \u6e90\u7ad9\u7c7b\u578b\uff1a\u5168\u90e8 \u901a\u8fc7\u7ba1\u7406\u540e\u53f0\uff0c\u53ef\u4ee5\u914d\u7f6e\u4efb\u4e00\u64ad\u653e\u57df\u540d\u4f5c\u4e3a HTTP-FLV \u7684\u8f93\u51fa\u57df\u540d\u3002 \u5f53\u63a8\u6d41 url \u4e3a rtmp://push.com/live/stream \u65f6\uff0c\u5bf9\u57df\u540d\u64ad\u653e\u57df\u540d\u5f00\u542f HTTP-FLV \u8f93\u51fa\u914d\u7f6e\u540e\uff0c \u53ef\u4ee5\u901a\u8fc7 http://play.com/live/stream.flv \u8fdb\u884c\u64ad\u653e\u3002 HLS + \u00b6 \u7ba1\u7406\u540e\u53f0\uff1a\u670d\u52a1 > \u57fa\u7840\u914d\u7f6e > HLS+ \u6e90\u7ad9\u7c7b\u578b\uff1a\u5168\u90e8 \u901a\u8fc7\u7ba1\u7406\u540e\u53f0\uff0c\u53ef\u4ee5\u914d\u7f6e\u4efb\u4e00\u64ad\u653e\u57df\u540d\u4f5c\u4e3a HLS \u7684\u8f93\u51fa\u57df\u540d\u3002HLS+ \uff0c\u53c8\u79f0\u4e3a\u6d41\u5f0f HLS \u6280\u672f\uff0c\u662f\u5c06\u6807\u51c6\u7684 HLS \u8fdb\u884c\u6d41\u5f0f\u5904\u7406\uff0c\u5927\u5e45\u5ea6\u964d\u4f4e\u6807\u51c6 HLS \u5ef6\u8fdf\uff0cH5 \u7aef\u76f4\u64ad\u517c\u5bb9\u6027\u66f4\u597d\uff0c\u4e14\u5177\u6709\u56de\u6e90\u91cf\u5c0f\u3001\u7cfb\u7edf\u7b80\u5355\u3001\u6392\u9519\u5bb9\u6613\u3001\u9632\u76d7\u94fe\u3001\u907f\u514d HLS 404 \u7b49\u4f18\u52bf\u3002 \u5f00\u542f\u8be5\u914d\u7f6e\u540e\uff0c\u53ef\u901a\u8fc7 http://play.com/live/stream.m3u8 \u5bf9 rtmp://push.com/live/stream \u7684\u63a8\u6d41\u8fdb\u884c\u64ad\u653e\u3002 \u8981\u5c06 RTMP \u63a8\u6d41\u8fdb\u884c HLS \u8f6c\u534f\u8bae\u64ad\u653e\uff0c\u63a8\u6d41\u7684\u89c6\u9891\u683c\u5f0f\u4ec5\u652f\u6301 H264\uff0c\u97f3\u9891\u652f\u6301 AAC\uff0cMP3\u3002hls+ \u652f\u6301\u7eaf\u97f3\u9891\u8f93\u51fa\uff0c\u6682\u9700\u53c8\u62cd\u4eba\u5de5\u914d\u7f6e\u3002 HLS+ \u5982\u8981\u4f7f\u7528 https\uff0c\u9700\u8981\u53c8\u62cd\u4eba\u5de5\u589e\u52a0\u914d\u7f6e\u3002 \u63a8\u6d41\u9632\u76d7\u94fe \u00b6 \u914d\u7f6e\u9700\u63d0\u4f9b\u5bc6\u94a5 \u6e90\u7ad9\u7c7b\u578b\uff1a\u53c8\u62cd\u4e91\u6e90 Token \u9632\u76d7\u94fe\u53ef\u4ee5\u5bf9\u63a8\u6d41\u7684\u8bf7\u6c42\u8fdb\u884c\u6821\u9a8c\uff0c\u53ef\u8bbe\u7f6e token \u6709\u6548\u65f6\u95f4\u548c\u622a\u6b62\u65f6\u95f4\u6765\u63a7\u5236\u63a8\u6d41\u7684\u65f6\u9650\u3002 \u4e00\u4e2a\u542b\u9632\u76d7\u94fe\u7684\u63a8\u6d41\u5730\u5740\u683c\u5f0f\u5982\u4e0b\uff1a rtmp://push.com/live/stream?domain={domain}&token={token}&valid_ts={valid_ts}&expired_ts={expired_ts} token = MD5(domain/live/stream + valid_ts + expired_ts + secret) \u53c2\u6570\u8bf4\u660e\uff1a secret\uff1a\u5bc6\u94a5\uff0c\u7528\u6237\u4e0e\u53c8\u62cd\u7ea6\u5b9a\uff0c\u8981\u6c42 32 \u4f4d\u4ee5\u5185\u7684\u6570\u5b57\u3001\u5927\u5c0f\u5199\u82f1\u6587\u5b57\u6bcd\u3001\u4e2d\u5212\u7ebf\u3001\u4e0b\u5212\u7ebf\u53ca\u7279\u6b8a\u5b57\u7b26 ~ ! @ # $ _ % ^ & * ( ) \u7ec4\u5408\u3002 domain\uff1a\u57df\u540d\uff0c\u5f00\u542f token \u9632\u76d7\u94fe\u7684\u57df\u540d\u3002 valid_ts\uff1a\u6709\u6548\u65f6\u95f4\uff0c\u5728 token \u6709\u6548\u671f\u5185\u540c\u4e00\u6761 token \u63a8\u6d41 URL \u4e00\u76f4\u6709\u6548\uff0c\u670d\u52a1\u5668\u4e0d\u4f1a\u4e3b\u52a8\u65ad\u5f00\uff0cvalid_ts \u5fc5\u987b\u662f UNIX TIME \u683c\u5f0f\uff0c\u5982 1472659200\uff0c\u8868\u793a 2016/9/1 00:00:00\u3002 expired_ts\uff1a\u622a\u6b62\u65f6\u95f4\uff0c\u622a\u6b62\u65f6\u95f4\u5230\u540e\uff0c\u670d\u52a1\u5668\u4e3b\u52a8\u65ad\u5f00\u5df2\u5efa\u7acb\u7684 token \u63a8\u6d41\u8fde\u63a5\uff0cexpired_ts \u5fc5\u987b\u662f UNIX TIME \u683c\u5f0f\uff0c\u5982 1473004800\uff0c\u8868\u793a 2016/9/5 00:00:00\u3002 \u793a\u4f8b\uff1a \u63a8\u6d41 URL \u4e3a rtmp://push.com/live/stream\uff0c \u5219 domain = push.com\uff0c \u5047\u8bbe\u7ea6\u5b9a secret = a1b2c3d4e53gxwb07\uff0c\u6709\u6548\u65f6\u95f4 valid_ts = 1472659200\uff0c\u622a\u6b62\u65f6\u95f4 expired_ts = 1473004800\uff0c \u90a3\u4e48 token = MD5(push.com/live/stream14726592001473004800a1b2c3d4e53gxwb07) = 8405243ad35e5d08b9621110a15b0a12 \u5219rtmp://push.com/live/stream?domain=push.com&token=8405243ad35e5d08b9621110a15b0a12 &valid_ts=1472659200&expired_ts=1473004800\uff0c \u8be5 token \u9632\u76d7\u94fe\u5728 2016/9/1 00:00:00 \u4e4b\u524d\u63a8\u6d41\u90fd\u6709\u6548\uff0c \u800c\u65f6\u95f4\u5230 2016/9/5 00:00:00 \u540e\uff0c\u6240\u6709\u7684\u63a8\u6d41\u8fde\u63a5\u90fd\u5c06\u88ab\u670d\u52a1\u5668\u65ad\u5f00\u3002 \u6709\u6548\u65f6\u95f4\u4e0e\u622a\u6b62\u65f6\u95f4\u7684\u7ec4\u5408\u80fd\u5e2e\u52a9\u7528\u6237\u7b80\u5355\u5b9e\u73b0\u590d\u6742\u5e94\u7528\u573a\u666f\uff0c\u8bbe\u7f6e\u6709\u6548\u65f6\u95f4\uff0c\u53ef\u4ee5\u8ba9\u6709\u6548\u65f6\u95f4\u6765\u63a7\u5236\u672c\u6b21\u751f\u6210\u7684 token \u9632\u76d7\u94fe\u7684\u53ef\u7528\u65f6\u957f\uff0c\u8bbe\u7f6e\u622a\u6b62\u65f6\u95f4\uff0c\u53ef\u4ee5\u63a7\u5236\u670d\u52a1\u5668\u5728\u622a\u6b62\u65f6\u95f4\u5230\u540e\u65ad\u5f00\u5ba2\u6237\u7aef\u63a8\u6d41\u8fde\u63a5\uff0c\u4fbf\u4e8e\u7528\u6237\u7ec6\u5206\u5176\u4e0d\u540c\u5ba2\u6237\u7fa4\uff0c\u8fdb\u884c\u76f8\u5173\u6743\u9650\u63a7\u5236\u3002 \u6709\u6548\u65f6\u95f4\u4e0e\u622a\u6b62\u65f6\u95f4\u53ef\u540c\u65f6\u4f7f\u7528\uff0c\u4e5f\u53ef\u4e8c\u9009\u4e00\u3002 \u5f53\u53ea\u4f7f\u7528\u6709\u6548\u65f6\u95f4\u65f6\uff0c\u5230\u6709\u6548\u65f6\u95f4\u540e\uff0c\u8be5 token \u5931\u6548\uff0c\u4f46\u670d\u52a1\u5668\u4e0d\u4f1a\u4e3b\u52a8\u65ad\u5f00\u5efa\u7acb\u7684\u5ba2\u6237\u7aef token \u8fde\u63a5\u3002 rtmp://push.com/live/stream?domain={domain}&token={token}&valid_ts={valid_ts} token = MD5(domain/live/stream + valid_ts + secret) \u5f53\u53ea\u4f7f\u7528\u622a\u6b62\u65f6\u95f4\u65f6\uff0c\u5230\u622a\u6b62\u65f6\u95f4\u540e\uff0c\u670d\u52a1\u5668\u4e3b\u52a8\u65ad\u5f00\u5df2\u6709\u7684\u5ba2\u6237\u7aef token \u8fde\u63a5\uff0c\u5728\u622a\u6b62\u65f6\u95f4\u524d\uff0c\u8be5 token \u63a8\u6d41\u5747\u53ef\u7528\u3002 rtmp://push.com/live/stream?domain={domain}&token={token}&expired_ts={expired_ts} token = MD5(domain/live/stream + expired_ts + secret) \u6ce8\uff1a\u8ba1\u7b97\u516c\u5f0f\u4e2d\u7684 secret\uff0c\u5ba2\u6237\u9700\u59a5\u5584\u4fdd\u7ba1\uff0c\u8c28\u9632\u5916\u6cc4\u3002 \u6ce8\uff1aMD5 \u540e\u8ba1\u7b97\u51fa\u7684 token \u503c\u662f 32 \u4f4d\u7684\uff0c\u5fc5\u987b\u5c0f\u5199\u3002 \u63a8\u6d41\u6682\u4ec5\u652f\u6301 token \u9632\u76d7\u94fe\u3002 \u5173\u4e8e token \u7684\u63a8\u6d41\uff0c\u60a8\u53ef\u4ee5\u53c2\u8003 \u8fd9\u91cc \u7684\u6f14\u793a\u4ee3\u7801\u3002 \u62c9\u9632\u76d7\u94fe \u00b6 \u62c9\u6d41\u9632\u76d7\u94fe\u53ea\u9488\u5bf9\u64ad\u653e\u57df\u540d\uff0cHTTP \u534f\u8bae\u62c9\u6d41\u9632\u76d7\u94fe\u89c4\u5219\u540c\u6587\u4ef6\u52a0\u901f\uff0c\u5305\u62ec IP \u7981\u7528\u3001\u5730\u533a\u8bbf\u95ee\u9650\u5236\u3001\u56de\u6e90\u9274\u6743\u3001Token \u9632\u76d7\u94fe\u3001\u57df\u540d\u9632\u76d7\u94fe\u7b49\u3002\u8be6\u7ec6\u89c4\u5219\u89c1\u6587\u4ef6\u52a0\u901f \u9632\u76d7\u94fe \u3002 \u62c9\u6d41\u6682\u4ec5\u652f\u6301 HTTP-FLV \u548c HLS \u9632\u76d7\u94fe\u3002","title":"\u57fa\u7840\u914d\u7f6e"},{"location":"live/primary/#_1","text":"\u53c8\u62cd\u4e91\u76f4\u64ad\u7cfb\u7edf\u652f\u6301\u4e24\u79cd\u670d\u52a1\u7c7b\u578b\uff1a\u53c8\u62cd\u4e91\u6e90\u548c\u81ea\u4e3b\u6e90\u7ad9\u3002","title":"\u56de\u6e90\u914d\u7f6e"},{"location":"live/primary/#_2","text":"\u53c8\u62cd\u4e91\u6e90\uff1a\u8868\u793a\u6d41\u5a92\u4f53\u5185\u5bb9\u76f4\u63a5\u63a8\u6d41\u5230\u53c8\u62cd\u4e91 CDN \uff0c\u5c06\u63a8\u6d41\u4e0e\u5206\u53d1\u90fd\u8fdb\u884c CDN \u52a0\u901f\u3002\u53c8\u62cd\u4e91\u6e90\u73b0\u4ec5\u652f\u6301 RTMP \u63a8\u6d41\u3002 \u7ba1\u7406\u540e\u53f0\uff1a\u521b\u5efa\u670d\u52a1 > \u76f4\u64ad\u52a0\u901f > \u53c8\u62cd\u4e91\u6e90 \u521b\u5efa\u53c8\u62cd\u4e91\u6e90\uff0c\u586b\u5199\u670d\u52a1\u540d\u3001\u5df2\u5907\u6848\u7684\u64ad\u653e\u57df\u540d\u548c\u63a8\u6d41\u57df\u540d\uff0c\u63a8\u6d41\u57df\u540d\u4e0e\u64ad\u653e\u57df\u540d\u4e0d\u80fd\u5171\u7528\u3002 \u53ef\u9009\u62e9\u6027\u586b\u5199\u63a5\u5165\u70b9\uff0c\u5982\u679c\u586b\u5199\u4e86\u5177\u4f53\u7684\u63a5\u5165\u70b9\uff0c\u5219\u53ea\u6709\u8be5\u63a5\u5165\u70b9\u7684 URL \u53ef\u8fdb\u884c\u63a8\u6d41\uff0c\u5176\u4ed6\u63a5\u5165\u70b9\u5747\u63a8\u6d41\u5931\u8d25\u3002\u82e5\u6ca1\u6709\u586b\u5199\u5177 \u4f53\u63a5\u5165\u70b9\uff0c\u5219\u4efb\u610f\u63a5\u5165\u70b9\u53ef\u8fdb\u884c\u63a8\u6d41\u3002 \u5f53\u63a8\u6d41\u57df\u540d\u586b\u5199 push.com \uff0c\u64ad\u653e\u57df\u540d\u586b\u5199 play.com \uff0c\u63a5\u5165\u70b9\u586b\u5199 live \uff0c\u5982\u679c\u63a8\u6d41 URL \u4e3a rtmp://push.com/live/stream \u65f6\uff0c\u5176 rtmp \u64ad\u653e URL \u4e3a rtmp://play.com/live/stream \u5176\u4e2d\uff0cstream \u4e3a\u6d41\u540d\uff0c\u53c8\u79f0\u6d41\u5bc6\u94a5\uff0clive/stream \u53c8\u79f0\u4e3a\u9891\u9053\uff0c\u540c\u4e00\u6761\u6d41\u63a8\u62c9\u6d41\u57df\u540d\u4e0d\u540c\uff0c\u4f46\u9891\u9053\u540d\u4e00\u81f4\u3002 \u6ce8\uff1a\u4ee5\u4e0a\u57df\u540d\u3001\u63a5\u5165\u70b9\u53ca\u6d41\u540d\u7684\u547d\u540d\u4ec5\u4e3a\u4e3e\u4f8b\u7528\uff0c\u4e0b\u540c\u3002","title":"\u53c8\u62cd\u4e91\u6e90"},{"location":"live/primary/#_3","text":"\u81ea\u4e3b\u6e90\u7ad9\uff1a\u6d41\u5a92\u4f53\u5185\u5bb9\u5728\u5ba2\u6237\u6e90\u7ad9\uff0c\u53c8\u62cd\u4e91\u901a\u8fc7\u56de\u5ba2\u6237\u6e90\u62c9\u6d41\u7684\u65b9\u5f0f\u5bf9\u5176\u5185\u5bb9\u8fdb\u884c\u5206\u53d1\u3002 \u7ba1\u7406\u540e\u53f0\uff1a\u521b\u5efa\u670d\u52a1 > \u76f4\u64ad\u52a0\u901f > \u81ea\u4e3b\u6e90\u7ad9 \u81ea\u4e3b\u6e90\u7ad9\u9700\u8981\u660e\u786e\u56de\u6e90\u534f\u8bae\u662f RTMP \u8fd8\u662f HTTP\uff0c\u5e76\u586b\u5199\u6e90\u7ad9 IP \u6216\u8005 \u57df\u540d\uff0c\u56de\u6e90 IP \u73b0\u4e0d\u652f\u6301\u591a\u4e2a\uff0c\u82e5\u56de\u6e90 IP \u4f1a\u7ecf\u5e38\u53d8\u66f4\uff0c\u5efa\u8bae\u6e90\u7ad9\u586b\u5199\u57df\u540d\u5f62\u5f0f\u3002\u5f53\u56de\u6e90\u534f\u8bae\u662f RTMP \u65f6\uff0c\u9ed8\u8ba4\u7aef\u53e3\u662f 1935\uff0c\u5f53\u56de\u6e90\u534f\u8bae\u662f HTTP \u65f6\uff0c\u9ed8\u8ba4\u7aef\u53e3\u4e3a 80\uff0c\u652f\u6301\u7aef\u53e3\u81ea\u5b9a\u4e49\u3002\u56e0\u81ea\u4e3b\u6e90\u7ad9\u662f\u56de\u5ba2\u6237\u6e90\u62c9\u6d41\uff0c\u5219\u65e0\u63a8\u6d41\u57df\u540d\uff0c\u53ea\u9700\u8981\u8bbe\u7f6e\u64ad\u653e\u57df\u540d\u3002 HTTP \u534f\u8bae\u56de\u6e90\u65f6\uff0c\u4ee5 HTTP-FLV \u5f62\u5f0f\u56de\u6e90\uff0c\u82e5\u6e90\u4e3a HLS \u53ef\u901a\u8fc7\u6587\u4ef6\u52a0\u901f\u7cfb\u7edf\u521b\u5efa\u670d\u52a1\uff0c\u914d\u7f6e\u56de\u6e90\u4fe1\u606f\u3002 \u63a5\u5165\u70b9\u914d\u7f6e\u8bf4\u660e\u540c\u53c8\u62cd\u4e91\u6e90\u3002 \u4ee5\u4e0a\u4e24\u79cd\u4e1a\u52a1\u6a21\u5f0f\uff0c\u5747\u652f\u6301 RTMP\u3001HTTP-FLV \u548c HLS \u64ad\u653e\uff0c\u540e\u7eed\u7ae0\u8282\u4f1a\u8be6\u7ec6\u4ecb\u7ecd\u3002","title":"\u81ea\u4e3b\u6e90\u7ad9"},{"location":"live/primary/#_4","text":"\u76f4\u64ad\u7ba1\u7406\u540e\u53f0\uff1a\u670d\u52a1 > \u52a0\u901f\u57df\u540d > \u57df\u540d\u7ed1\u5b9a \u6e90\u7ad9\u7c7b\u578b\uff1a\u5168\u90e8 \u57df\u540d\u7ed1\u5b9a\u4ec5\u652f\u6301\u5df2\u5907\u6848\u6210\u529f\u7684\u81ea\u5b9a\u4e49\u57df\u540d\u8fdb\u884c\u7ed1\u5b9a\uff0c\u5982\u679c\u8be5\u57df\u540d\u672a\u5907\u6848\u6210\u529f\uff0c\u5219\u4e0d\u80fd\u901a\u8fc7\u57df\u540d\u7ed1\u5b9a\u5ba1\u6838\u3002 \u5ba1\u6838\u7ed3\u679c\u4f1a\u63a7\u5236\u53f0\u548c\u90ae\u4ef6\u4e24\u79cd\u65b9\u5f0f\u8fdb\u884c\u901a\u77e5\uff0c\u6b63\u5e38\u5ba1\u6838\u65f6\u95f4\u4e3a\u4e00\u4e2a\u5de5\u4f5c\u65e5\u3002 \u6dfb\u52a0\u57df\u540d\u7ed1\u5b9a\uff0c\u5982\u679c\u662f\u53c8\u62cd\u4e91\u6e90\uff0c\u9700\u8981\u7ed1\u5b9a\u63a8\u6d41\u57df\u540d\u548c\u64ad\u653e\u57df\u540d\uff0c\u5982\u679c\u662f\u81ea\u4e3b\u6e90\u7ad9\uff0c\u5219\u53ea\u9700\u8981\u7ed1\u5b9a\u64ad\u653e\u57df\u540d\u3002\u7ed1\u5b9a\u5b8c\u6210\u540e\uff0c\u9700\u8981\u5230\u57df\u540d\u670d\u52a1\u5546\u7684 DNS \u89e3\u6790\u7ba1\u7406\u4e2d\uff0c\u5c06\u57df\u540d CNAME \u89e3\u6790\u5230\u53c8\u62cd\u4e91\u5185\u90e8\u57df\u540d\u3002 \u5f53\u4e1a\u52a1\u6a21\u5f0f\u4e3a\u53c8\u62cd\u4e91\u6e90\u65f6\uff0c\u63a8\u6d41\u57df\u540d CNAME \u89e3\u6790\u5230 <bucket>.s1.aicdn.com \uff0c\u64ad\u653e\u57df\u540d CNAME \u89e3\u6790\u5230 <bucket>.s0.aicdn.com \u3002 \u5f53\u4e1a\u52a1\u6a21\u5f0f\u4e3a\u81ea\u4e3b\u6e90\u7ad9\u65f6\uff0c\u53ea\u9700\u5c06\u64ad\u653e\u57df\u540d CNAME \u89e3\u6790\u5230 <bucket>.s0.aicdn.com \u3002 \u6ce8\uff1a <> \u5185\u7684 bucket \u9700\u8981\u66ff\u6362\u6210\u5bf9\u5e94\u7684\u670d\u52a1\u540d\uff0c\u4e0b\u540c\u3002","title":"\u57df\u540d\u7ed1\u5b9a"},{"location":"live/primary/#http-flv","text":"\u7ba1\u7406\u540e\u53f0\uff1a\u670d\u52a1 > \u57fa\u7840\u914d\u7f6e > HTTP-FLV \u8f93\u51fa \u6e90\u7ad9\u7c7b\u578b\uff1a\u5168\u90e8 \u901a\u8fc7\u7ba1\u7406\u540e\u53f0\uff0c\u53ef\u4ee5\u914d\u7f6e\u4efb\u4e00\u64ad\u653e\u57df\u540d\u4f5c\u4e3a HTTP-FLV \u7684\u8f93\u51fa\u57df\u540d\u3002 \u5f53\u63a8\u6d41 url \u4e3a rtmp://push.com/live/stream \u65f6\uff0c\u5bf9\u57df\u540d\u64ad\u653e\u57df\u540d\u5f00\u542f HTTP-FLV \u8f93\u51fa\u914d\u7f6e\u540e\uff0c \u53ef\u4ee5\u901a\u8fc7 http://play.com/live/stream.flv \u8fdb\u884c\u64ad\u653e\u3002","title":"HTTP-FLV"},{"location":"live/primary/#hls","text":"\u7ba1\u7406\u540e\u53f0\uff1a\u670d\u52a1 > \u57fa\u7840\u914d\u7f6e > HLS+ \u6e90\u7ad9\u7c7b\u578b\uff1a\u5168\u90e8 \u901a\u8fc7\u7ba1\u7406\u540e\u53f0\uff0c\u53ef\u4ee5\u914d\u7f6e\u4efb\u4e00\u64ad\u653e\u57df\u540d\u4f5c\u4e3a HLS \u7684\u8f93\u51fa\u57df\u540d\u3002HLS+ \uff0c\u53c8\u79f0\u4e3a\u6d41\u5f0f HLS \u6280\u672f\uff0c\u662f\u5c06\u6807\u51c6\u7684 HLS \u8fdb\u884c\u6d41\u5f0f\u5904\u7406\uff0c\u5927\u5e45\u5ea6\u964d\u4f4e\u6807\u51c6 HLS \u5ef6\u8fdf\uff0cH5 \u7aef\u76f4\u64ad\u517c\u5bb9\u6027\u66f4\u597d\uff0c\u4e14\u5177\u6709\u56de\u6e90\u91cf\u5c0f\u3001\u7cfb\u7edf\u7b80\u5355\u3001\u6392\u9519\u5bb9\u6613\u3001\u9632\u76d7\u94fe\u3001\u907f\u514d HLS 404 \u7b49\u4f18\u52bf\u3002 \u5f00\u542f\u8be5\u914d\u7f6e\u540e\uff0c\u53ef\u901a\u8fc7 http://play.com/live/stream.m3u8 \u5bf9 rtmp://push.com/live/stream \u7684\u63a8\u6d41\u8fdb\u884c\u64ad\u653e\u3002 \u8981\u5c06 RTMP \u63a8\u6d41\u8fdb\u884c HLS \u8f6c\u534f\u8bae\u64ad\u653e\uff0c\u63a8\u6d41\u7684\u89c6\u9891\u683c\u5f0f\u4ec5\u652f\u6301 H264\uff0c\u97f3\u9891\u652f\u6301 AAC\uff0cMP3\u3002hls+ \u652f\u6301\u7eaf\u97f3\u9891\u8f93\u51fa\uff0c\u6682\u9700\u53c8\u62cd\u4eba\u5de5\u914d\u7f6e\u3002 HLS+ \u5982\u8981\u4f7f\u7528 https\uff0c\u9700\u8981\u53c8\u62cd\u4eba\u5de5\u589e\u52a0\u914d\u7f6e\u3002","title":"HLS +"},{"location":"live/primary/#_5","text":"\u914d\u7f6e\u9700\u63d0\u4f9b\u5bc6\u94a5 \u6e90\u7ad9\u7c7b\u578b\uff1a\u53c8\u62cd\u4e91\u6e90 Token \u9632\u76d7\u94fe\u53ef\u4ee5\u5bf9\u63a8\u6d41\u7684\u8bf7\u6c42\u8fdb\u884c\u6821\u9a8c\uff0c\u53ef\u8bbe\u7f6e token \u6709\u6548\u65f6\u95f4\u548c\u622a\u6b62\u65f6\u95f4\u6765\u63a7\u5236\u63a8\u6d41\u7684\u65f6\u9650\u3002 \u4e00\u4e2a\u542b\u9632\u76d7\u94fe\u7684\u63a8\u6d41\u5730\u5740\u683c\u5f0f\u5982\u4e0b\uff1a rtmp://push.com/live/stream?domain={domain}&token={token}&valid_ts={valid_ts}&expired_ts={expired_ts} token = MD5(domain/live/stream + valid_ts + expired_ts + secret) \u53c2\u6570\u8bf4\u660e\uff1a secret\uff1a\u5bc6\u94a5\uff0c\u7528\u6237\u4e0e\u53c8\u62cd\u7ea6\u5b9a\uff0c\u8981\u6c42 32 \u4f4d\u4ee5\u5185\u7684\u6570\u5b57\u3001\u5927\u5c0f\u5199\u82f1\u6587\u5b57\u6bcd\u3001\u4e2d\u5212\u7ebf\u3001\u4e0b\u5212\u7ebf\u53ca\u7279\u6b8a\u5b57\u7b26 ~ ! @ # $ _ % ^ & * ( ) \u7ec4\u5408\u3002 domain\uff1a\u57df\u540d\uff0c\u5f00\u542f token \u9632\u76d7\u94fe\u7684\u57df\u540d\u3002 valid_ts\uff1a\u6709\u6548\u65f6\u95f4\uff0c\u5728 token \u6709\u6548\u671f\u5185\u540c\u4e00\u6761 token \u63a8\u6d41 URL \u4e00\u76f4\u6709\u6548\uff0c\u670d\u52a1\u5668\u4e0d\u4f1a\u4e3b\u52a8\u65ad\u5f00\uff0cvalid_ts \u5fc5\u987b\u662f UNIX TIME \u683c\u5f0f\uff0c\u5982 1472659200\uff0c\u8868\u793a 2016/9/1 00:00:00\u3002 expired_ts\uff1a\u622a\u6b62\u65f6\u95f4\uff0c\u622a\u6b62\u65f6\u95f4\u5230\u540e\uff0c\u670d\u52a1\u5668\u4e3b\u52a8\u65ad\u5f00\u5df2\u5efa\u7acb\u7684 token \u63a8\u6d41\u8fde\u63a5\uff0cexpired_ts \u5fc5\u987b\u662f UNIX TIME \u683c\u5f0f\uff0c\u5982 1473004800\uff0c\u8868\u793a 2016/9/5 00:00:00\u3002 \u793a\u4f8b\uff1a \u63a8\u6d41 URL \u4e3a rtmp://push.com/live/stream\uff0c \u5219 domain = push.com\uff0c \u5047\u8bbe\u7ea6\u5b9a secret = a1b2c3d4e53gxwb07\uff0c\u6709\u6548\u65f6\u95f4 valid_ts = 1472659200\uff0c\u622a\u6b62\u65f6\u95f4 expired_ts = 1473004800\uff0c \u90a3\u4e48 token = MD5(push.com/live/stream14726592001473004800a1b2c3d4e53gxwb07) = 8405243ad35e5d08b9621110a15b0a12 \u5219rtmp://push.com/live/stream?domain=push.com&token=8405243ad35e5d08b9621110a15b0a12 &valid_ts=1472659200&expired_ts=1473004800\uff0c \u8be5 token \u9632\u76d7\u94fe\u5728 2016/9/1 00:00:00 \u4e4b\u524d\u63a8\u6d41\u90fd\u6709\u6548\uff0c \u800c\u65f6\u95f4\u5230 2016/9/5 00:00:00 \u540e\uff0c\u6240\u6709\u7684\u63a8\u6d41\u8fde\u63a5\u90fd\u5c06\u88ab\u670d\u52a1\u5668\u65ad\u5f00\u3002 \u6709\u6548\u65f6\u95f4\u4e0e\u622a\u6b62\u65f6\u95f4\u7684\u7ec4\u5408\u80fd\u5e2e\u52a9\u7528\u6237\u7b80\u5355\u5b9e\u73b0\u590d\u6742\u5e94\u7528\u573a\u666f\uff0c\u8bbe\u7f6e\u6709\u6548\u65f6\u95f4\uff0c\u53ef\u4ee5\u8ba9\u6709\u6548\u65f6\u95f4\u6765\u63a7\u5236\u672c\u6b21\u751f\u6210\u7684 token \u9632\u76d7\u94fe\u7684\u53ef\u7528\u65f6\u957f\uff0c\u8bbe\u7f6e\u622a\u6b62\u65f6\u95f4\uff0c\u53ef\u4ee5\u63a7\u5236\u670d\u52a1\u5668\u5728\u622a\u6b62\u65f6\u95f4\u5230\u540e\u65ad\u5f00\u5ba2\u6237\u7aef\u63a8\u6d41\u8fde\u63a5\uff0c\u4fbf\u4e8e\u7528\u6237\u7ec6\u5206\u5176\u4e0d\u540c\u5ba2\u6237\u7fa4\uff0c\u8fdb\u884c\u76f8\u5173\u6743\u9650\u63a7\u5236\u3002 \u6709\u6548\u65f6\u95f4\u4e0e\u622a\u6b62\u65f6\u95f4\u53ef\u540c\u65f6\u4f7f\u7528\uff0c\u4e5f\u53ef\u4e8c\u9009\u4e00\u3002 \u5f53\u53ea\u4f7f\u7528\u6709\u6548\u65f6\u95f4\u65f6\uff0c\u5230\u6709\u6548\u65f6\u95f4\u540e\uff0c\u8be5 token \u5931\u6548\uff0c\u4f46\u670d\u52a1\u5668\u4e0d\u4f1a\u4e3b\u52a8\u65ad\u5f00\u5efa\u7acb\u7684\u5ba2\u6237\u7aef token \u8fde\u63a5\u3002 rtmp://push.com/live/stream?domain={domain}&token={token}&valid_ts={valid_ts} token = MD5(domain/live/stream + valid_ts + secret) \u5f53\u53ea\u4f7f\u7528\u622a\u6b62\u65f6\u95f4\u65f6\uff0c\u5230\u622a\u6b62\u65f6\u95f4\u540e\uff0c\u670d\u52a1\u5668\u4e3b\u52a8\u65ad\u5f00\u5df2\u6709\u7684\u5ba2\u6237\u7aef token \u8fde\u63a5\uff0c\u5728\u622a\u6b62\u65f6\u95f4\u524d\uff0c\u8be5 token \u63a8\u6d41\u5747\u53ef\u7528\u3002 rtmp://push.com/live/stream?domain={domain}&token={token}&expired_ts={expired_ts} token = MD5(domain/live/stream + expired_ts + secret) \u6ce8\uff1a\u8ba1\u7b97\u516c\u5f0f\u4e2d\u7684 secret\uff0c\u5ba2\u6237\u9700\u59a5\u5584\u4fdd\u7ba1\uff0c\u8c28\u9632\u5916\u6cc4\u3002 \u6ce8\uff1aMD5 \u540e\u8ba1\u7b97\u51fa\u7684 token \u503c\u662f 32 \u4f4d\u7684\uff0c\u5fc5\u987b\u5c0f\u5199\u3002 \u63a8\u6d41\u6682\u4ec5\u652f\u6301 token \u9632\u76d7\u94fe\u3002 \u5173\u4e8e token \u7684\u63a8\u6d41\uff0c\u60a8\u53ef\u4ee5\u53c2\u8003 \u8fd9\u91cc \u7684\u6f14\u793a\u4ee3\u7801\u3002","title":"\u63a8\u6d41\u9632\u76d7\u94fe"},{"location":"live/primary/#_6","text":"\u62c9\u6d41\u9632\u76d7\u94fe\u53ea\u9488\u5bf9\u64ad\u653e\u57df\u540d\uff0cHTTP \u534f\u8bae\u62c9\u6d41\u9632\u76d7\u94fe\u89c4\u5219\u540c\u6587\u4ef6\u52a0\u901f\uff0c\u5305\u62ec IP \u7981\u7528\u3001\u5730\u533a\u8bbf\u95ee\u9650\u5236\u3001\u56de\u6e90\u9274\u6743\u3001Token \u9632\u76d7\u94fe\u3001\u57df\u540d\u9632\u76d7\u94fe\u7b49\u3002\u8be6\u7ec6\u89c4\u5219\u89c1\u6587\u4ef6\u52a0\u901f \u9632\u76d7\u94fe \u3002 \u62c9\u6d41\u6682\u4ec5\u652f\u6301 HTTP-FLV \u548c HLS \u9632\u76d7\u94fe\u3002","title":"\u62c9\u9632\u76d7\u94fe"},{"location":"misc/discuz/","text":"Discuz \u7528\u6237\u9700\u8981\u4f7f\u7528 UPYUN \u6709\u4ee5\u4e0b\u4e24\u4e2a\u65b9\u6cd5\uff1a \u901a\u8fc7\u8bba\u575b\u81ea\u5e26\u7684\u8fdc\u7a0b\u9644\u4ef6\u529f\u80fd \u00b6 \u4f7f\u7528 Discuz \u7684\u8fdc\u7a0b\u9644\u4ef6\u529f\u80fd\uff0c\u53ef\u5c06\u8bba\u575b\u9644\u4ef6\u5168\u90e8\u5b58\u653e\u5230 UPYUN \u4e0a\u3002 \u5177\u4f53\u53ef\u6309\u5982\u4e0b\u6b65\u9aa4\uff1a \u524d\u671f\u51c6\u5907\uff1a \u5728 UPYUN \u4e0a\u521b\u5efa\u4e00\u4e2a\u6587\u4ef6\u7c7b\u7a7a\u95f4\u3002 \u6ce8\u610f\uff1a\u5fc5\u987b\u662f\u6587\u4ef6\u7c7b\u7a7a\u95f4\uff0c\u4e0d\u80fd\u662f\u56fe\u7247\u7c7b\u7a7a\u95f4\uff0cdiscuz \u9644\u4ef6\u542b\u591a\u79cd\u7c7b\u578b\u6587\u4ef6 \u83b7\u53d6\u7a7a\u95f4\u7684 FTP \u5e10\u53f7\u4fe1\u606f\u3002 \u8bbe\u7f6e\u6b65\u9aa4\uff1a \u6ce8\uff1a\u76ee\u524d\u7248\u672c\u7684 discuz \u7ed1\u5b9a UPYUN\uff0c\u7ecf\u8fc7 discuz \u5b98\u65b9\u6d4b\u8bd5\uff0c\u987b\u589e\u52a0 2 \u884c\u6d4b\u8bd5\u4ee3\u7801\uff0cdiscuz \u5b98\u65b9\u5df2\u5728\u6700\u65b0\u7684\u7248\u672c\u4e2d\u589e\u52a0\uff0c\u4f1a\u5728\u4e0b\u6b21\u53d1\u5e03\u65f6\u66f4\u65b0\u3002 \u76ee\u524d\u60a8\u53ef\u4ee5\u624b\u52a8\u4fee\u6539\u4ee3\u7801\u6216\u8df3\u8fc7\u6d4b\u8bd5\u8fdc\u7a0b\u9644\u4ef6\u5373\u53ef\u3002 \u624b\u52a8\u6dfb\u52a0\u65b9\u6cd5\u89c1\u5e16\u5b50\u6700\u540e\u3002 \u5728\u8bba\u575b\u540e\u53f0\u627e\u5230\u8bbe\u7f6e\u8fdc\u7a0b\u9644\u4ef6\u529f\u80fd\uff0c\u7ba1\u7406\u540e\u53f0 => \u5168\u5c40 => \u4e0a\u4f20\u8bbe\u7f6e\uff08\u6216\u9644\u4ef6\u8bbe\u7f6e\uff09 => \u8fdc\u7a0b\u9644\u4ef6\uff1a\u9009\u62e9\u201c\u542f\u7528\u8fdc\u7a0b\u9644\u4ef6\u201d\uff0c\u7136\u540e\u8bbe\u7f6e FTP \u5e10\u53f7\u4fe1\u606f\uff0c\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u8bba\u575b\u539f\u6709\u7684\u9644\u4ef6\u5904\u7406 \u5982\u679c\u60a8\u60f3\u628a\u8bba\u575b\u539f\u6709\u7684\u9644\u4ef6\u4e5f\u642c\u5230 UPYUN\uff0c\u60a8\u53ea\u8981 2 \u6b65\u64cd\u4f5c\uff1a a\u3001\u628a\u539f\u6709\u9644\u4ef6\u901a\u8fc7 FTP \u4e0a\u4f20\u5230\u4e91\u5b58\u50a8\u7a7a\u95f4\u7684\u76f8\u5e94\u4f4d\u7f6e b\u3001\u628a\u9644\u4ef6\u8868\u7684 remote \u5b57\u6bb5\u7684\u5c5e\u6027\u6539\u4e3a 1 \u5230\u8fd9\u4e00\u6b65\uff0c\u606d\u559c\u60a8\uff0c\u60a8\u7684\u9644\u4ef6\u5df2\u7ecf\u6258\u7ba1\u5230 UPYUN\uff0c\u8fd9\u4e0b\u60a8\u4e0d\u7528\u62c5\u5fc3\u9644\u4ef6\u7684\u5b89\u5168\u53ca\u6027\u80fd\u95ee\u9898\u4e86\u3002 \u9644\u5f55\u4e00\uff1a \u624b\u52a8\u4fee\u6539\u6d4b\u8bd5\u7a0b\u5e8f\u4ee3\u7801\uff1a \u6253\u5f00\uff1asource/admincp/admincp_checktools.php \u627e\u5230\uff1a function getremotefile($file) { global $_G; @set_time_limit(0); $str = @implode('', @file($file)); if(!$str) { $str = dfsockopen($file); } return $str; } \u66ff\u6362\u4e3a\uff1a function getremotefile($file) { global $_G; $file = $file.'?'.rand(); @set_time_limit(0); $str = @implode('', @file($file)); if(!$str) { $str = dfsockopen($file); } return $str; } \u627e\u5230 ftpcmd('delete', $testfile); \u589e\u52a0\u4e00\u884c: ftpcmd('delete', 'test/index.htm'); \u5b89\u88c5\u4f7f\u7528 UPYUN \u5b98\u65b9\u63d2\u4ef6 \u00b6 Discuz X3\u3001X3.1\u3001X3.2 \u00b6 \u63d2\u4ef6\u4e0b\u8f7d \u00b6 \u6700\u65b0\u7248\u63d2\u4ef6(v1.0) \u4e0b\u8f7d\uff1a Github \u6700\u65b0\u7248\u63d2\u4ef6(v1.0) \u5b89\u88c5\u4f7f\u7528\u624b\u518c\u4e0b\u8f7d\uff1a Pdf \u7248 | Html \u7248 \u7248\u672c\u66f4\u65b0\u8bf4\u660e \u00b6 v1.0 \u66f4\u65b0\u8bf4\u660e \u4e0d\u517c\u5bb9 v0.1 \u7248\u672c \u7b80\u5316\u914d\u7f6e\uff0c\u4e0d\u518d\u533a\u5206\u6587\u4ef6\u548c\u56fe\u7247\u7a7a\u95f4\u3002UPYUN \u5408\u5e76\u4e86\u6587\u4ef6\u548c\u56fe\u7247\u7a7a\u95f4 \u589e\u52a0\u5206\u5757\u4e0a\u4f20\u652f\u6301\uff0c\u5927\u5927\u63d0\u5347\u4e0a\u4f20\u7684\u7a33\u5b9a\u6027\u548c\u901f\u5ea6 \u589e\u52a0 Discuz X3.1 \u548c X3.2 \u7248\u672c\u7684\u652f\u6301 \u53d6\u6d88\u672c\u5730\u56fe\u7247\u548c\u6587\u4ef6\u7684\u5907\u4efd \u4f18\u5316 Token \u9632\u76d7\u94fe\uff08\u9700\u8981\u5c06\u8bba\u575b\u57df\u540d\u7ed1\u5b9a\u5230 UPYUN \u7a7a\u95f4\uff09 v0.1 \u66f4\u65b0\u8bf4\u660e \u4ee3\u66ff\u539f\u6709\u8fdc\u7a0b\u9644\u4ef6\u7e41\u7410\u7684\u8bbe\u7f6e\u6b65\u9aa4\uff0c\u4ec5\u9700\u5728\u63d2\u4ef6\u4e2d\u8bbe\u7f6e\u7a7a\u95f4\uff0c\u64cd\u4f5c\u5458\uff0c\u5bc6\u7801\u7b49\u4fe1\u606f\u5373\u53ef\u4f7f\u7528 UPYUN \u670d\u52a1\uff1b \u5c06 Discuz \u81ea\u5e26\u7684 FTP \u4e0a\u4f20\u6838\u5fc3\u6574\u4f53\u66ff\u6362\u6210 HTTP \u4e0a\u4f20\uff0c\u63d0\u5347\u4e0a\u4f20\u901f\u5ea6\u3001\u7a33\u5b9a\u6027\u548c\u517c\u5bb9\u6027\uff1b \u89e3\u51b3\u90e8\u5206\u5ba2\u6237\u7531\u4e8e\u865a\u62df\u4e3b\u673a\u6743\u9650\u9650\u5236\u5bfc\u81f4\u65e0\u6cd5\u4f7f\u7528 Discuz \u81ea\u5e26 FTP \u8fdc\u7a0b\u9644\u4ef6\u7684\u95ee\u9898\uff1b \u4e0a\u4f20\u7684\u56fe\u7247\u548c\u6587\u4ef6\u5206\u7a7a\u95f4\u5b58\u653e\uff0c\u5e76\u53ef\u6307\u5b9a\u4e0d\u540c\u57df\u540d\uff1b \u89e3\u51b3\u4e0b\u8f7d\u8bba\u575b\u975e\u56fe\u7247\u9644\u4ef6\u4e8c\u6b21\u6d41\u91cf\u95ee\u9898\uff1b \u652f\u6301\u672c\u5730\u56fe\u7247\u3001\u6587\u4ef6\u5907\u4efd\uff1b \u975e\u56fe\u7247\u9644\u4ef6\u652f\u6301 token \u9632\u76d7\u94fe\uff1b \u9644\u5e26 API \u63a5\u5165\u70b9\u6d4b\u901f\u5c0f\u5de5\u5177\uff1b \u589e\u52a0\u624b\u52a8 API \u63a5\u5165\u70b9\u8bbe\u7f6e\u529f\u80fd\uff0c\u6839\u636e\u6d4b\u901f\u5de5\u5177\u68c0\u6d4b\u7ed3\u679c\uff0c\u9009\u62e9\u6700\u5feb\u7684 API \u63a5\u5165\u70b9\uff1b Discuz X2.5 \u00b6 \u63d2\u4ef6\u4e0b\u8f7d \u00b6 \u6700\u65b0\u7248\u63d2\u4ef6(v0.4.1) \u4e0b\u8f7d\uff1a Zip \u538b\u7f29\u5305 | 7z \u538b\u7f29\u5305 \u6700\u65b0\u7248\u63d2\u4ef6(v0.4.1) \u5b89\u88c5\u4f7f\u7528\u624b\u518c\u4e0b\u8f7d\uff1a Word \u7248 | Pdf \u7248 \u7248\u672c\u66f4\u65b0\u8bf4\u660e \u00b6 v0.4.1 \u66f4\u65b0\u8bf4\u660e \u4f18\u5316\u5bf9 PHP 5.2.x \u7684\u652f\u6301\uff0c\u89e3\u51b3 PHP 5.2.x \u7248\u672c\u7528\u6237 diy \u6a21\u5757\u548c\u56fe\u7247\u66f4\u65b0\u51fa\u9519\u3001\u5e16\u5b50\u65e0\u6cd5\u63a8\u9001\u7684 bug\u3002 PHP 5.3.x \u7248\u672c\u7528\u6237\u53ef\u4e0d\u66f4\u65b0\u6b64\u7248\u672c\u63d2\u4ef6 v0.4 \u66f4\u65b0\u8bf4\u660e \u65b0\u589e\u624b\u52a8 API \u63a5\u5165\u70b9\u8bbe\u7f6e\u529f\u80fd\uff0c\u6839\u636e\u6d4b\u901f\u5de5\u5177\u68c0\u6d4b\u7ed3\u679c\uff0c\u9009\u62e9\u6700\u5feb\u7684 API \u63a5\u5165\u70b9\uff1b \u65b0\u589e API \u63a5\u5165\u70b9\u6d4b\u901f\u5c0f\u5de5\u5177\uff1b \u4f18\u5316\u56fe\u7247\u7c7b\u9644\u4ef6\u4e0b\u8f7d\uff0c\u5b9e\u73b0\u6d4f\u89c8\u5668\u4e0b\u8f7d\u4fdd\u5b58\u56fe\u7247\u9644\u4ef6\uff08\u4e4b\u524d\u7248\u672c\u53ef\u80fd\u4f1a\u5b58\u5728\u6d4f\u89c8\u5668\u76f4\u63a5\u6253\u5f00\u9884\u89c8\u56fe\u7247\u7684\u60c5\u51b5\uff09\uff1b \u4f18\u5316\u9644\u4ef6\u4e0b\u8f7d\u540e\u6587\u4ef6\u540d\u547d\u540d\uff0c\u907f\u514d\u4e0b\u8f7d\u540e\u9644\u4ef6\u6587\u4ef6\u540d\u88ab\u4fee\u6539\u6210\u968f\u673a\u4e71\u7801\u3002 v0.3 \u66f4\u65b0\u8bf4\u660e \u5c06 Discuz \u81ea\u5e26\u7684 FTP \u4e0a\u4f20\u6838\u5fc3\u6574\u4f53\u66ff\u6362\u6210 HTTP \u4e0a\u4f20\uff0c\u63d0\u5347\u4e0a\u4f20\u901f\u5ea6\u3001\u7a33\u5b9a\u6027\u548c\u517c\u5bb9\u6027\uff1b \u89e3\u51b3\u90e8\u5206\u7531\u4e8e\u865a\u62df\u4e3b\u673a\u6743\u9650\u9650\u5236\u5bfc\u81f4\u65e0\u6cd5\u4f7f\u7528\u8fdc\u7a0b\u9644\u4ef6\u7684\u95ee\u9898\uff1b v0.2 \u66f4\u65b0\u8bf4\u660e \u4f18\u5316\u4e0a\u4f20\u4ee3\u7801\uff0c\u63d0\u5347\u4e0a\u4f20\u901f\u5ea6\u548c\u6548\u7387\uff1b \u4fee\u590d discuz \u5b98\u65b9\u8fdc\u7a0b\u9644\u4ef6\u4e2d\u65e0\u6cd5\u5220\u9664\u8fdc\u7aef\u7a7a\u95f4\u6587\u4ef6\u7684 Bug\uff1b \u7531\u4e8e discuz \u5b98\u65b9\u8fdc\u7a0b\u9644\u4ef6\u4ee3\u7801 Bug\uff0c\u65e0\u6cd5\u652f\u6301\u81ea\u5b9a\u4e49\u8def\u5f84\uff0c\u6240\u4ee5\u63d2\u4ef6\u6682\u65f6\u53d6\u6d88\u81ea\u5b9a\u4e49\u6587\u4ef6\u8def\u5f84\u8bbe\u7f6e\u529f\u80fd \u8bbe\u7f6e\u8868\u5355\u4e2d\u6dfb\u52a0\u5bc6\u94a5\u9ed8\u8ba4\u6709\u6548\u65f6\u95f4 900 \u79d2\u3002 v0.1 \u529f\u80fd\u4ecb\u7ecd \u4ee3\u66ff\u539f\u6709\u8fdc\u7a0b\u9644\u4ef6\u7e41\u7410\u7684\u8bbe\u7f6e\u6b65\u9aa4\uff0c\u4ec5\u9700\u5728\u63d2\u4ef6\u4e2d\u8bbe\u7f6e\u7a7a\u95f4\uff0c\u64cd\u4f5c\u5458\uff0c\u5bc6\u7801\u7b49\u4fe1\u606f\u5373\u53ef\u4f7f\u7528 UPYUN \u670d\u52a1\uff1b \u4e0a\u4f20\u7684\u56fe\u7247\u548c\u6587\u4ef6\u5206\u7a7a\u95f4\u5b58\u653e\uff0c\u5e76\u53ef\u6307\u5b9a\u4e0d\u540c\u57df\u540d\uff1b \u89e3\u51b3\u5b98\u65b9\u8fdc\u7a0b\u9644\u4ef6\u4e0b\u8f7d\u65f6\u4ecd\u7136\u8c03\u7528\u672c\u5730\u9644\u4ef6\u5730\u5740\u7684\u95ee\u9898\uff1b \u652f\u6301\u672c\u5730\u56fe\u7247\u3001\u6587\u4ef6\u5907\u4efd\uff1b \u9644\u4ef6\u4e0b\u8f7d\u652f\u6301\u9632\u76d7\u94fe\u3002 \u5e38\u89c1\u95ee\u7b54 \u00b6 \u95ee\uff1a \u5982\u679c\u6587\u4ef6\u6743\u9650\u6ca1\u6709\u4fee\u6539\u597d\u5c31\u76f4\u63a5\u5b89\u88c5\u4e86\u63d2\u4ef6\uff0c\u8be5\u600e\u4e48\u529e\uff1f \u7b54\uff1a \u53ef\u4ee5\u5378\u8f7d\u63d2\u4ef6\uff0c\u7136\u540e\u4fee\u6539\u6587\u4ef6\u6743\u9650\uff0c\u518d\u6b21\u5b89\u88c5\u3002\u6216\u8005\u4e5f\u53ef\u4ee5\u6309\u7167\u5b89\u88c5\u8bf4\u660e\u4e2d\u9644\u4ef6\u7684\u6587\u4ef6\u4fee\u6539\u8bf4\u660e\uff0c\u624b\u52a8\u4fee\u6539\u4e09\u4e2a\u6587\u4ef6\u7684\u4ee3\u7801 \u95ee\uff1a \u63d2\u4ef6\u6b63\u786e\u5b89\u88c5\u4e14\u53c2\u6570\u8bbe\u7f6e\u6b63\u786e\uff0c\u4f46\u662f\u4e0a\u4f20\u540e\u663e\u793a\u7684\u5730\u5740\u8fd8\u662f\u672c\u5730\u7684\uff1f \u7b54\uff1a \u5c1d\u8bd5\u8fdb\u5165\u540e\u53f0\u66f4\u65b0\u8bba\u575b\u6570\u636e\u7f13\u5b58 \u95ee\uff1a \u63d2\u4ef6\u4e2d\u8bbe\u7f6e\u4e86\u53c2\u6570\uff0c\u8fd8\u9700\u8981\u5728\u8fdc\u7a0b\u9644\u4ef6\u4e2d\u8bbe\u7f6e\u4e48\uff1f \u7b54\uff1a \u4e0d\u9700\u8981\uff0c\u63d2\u4ef6\u4f1a\u81ea\u52a8\u4fee\u6539\u8fdc\u7a0b\u9644\u4ef6\u7684\u8bbe\u7f6e\uff0c\u6240\u4ee5\u53ea\u9700\u8981\u5728\u63d2\u4ef6\u4e2d\u8bbe\u7f6e\u76f8\u5173\u53c2\u6570\u5373\u53ef\uff0c\u8fdc\u7a0b\u9644\u4ef6\u8bbe\u7f6e\u8868\u5355\u65e0\u9700\u4fee\u6539","title":"Discuz"},{"location":"misc/discuz/#_1","text":"\u4f7f\u7528 Discuz \u7684\u8fdc\u7a0b\u9644\u4ef6\u529f\u80fd\uff0c\u53ef\u5c06\u8bba\u575b\u9644\u4ef6\u5168\u90e8\u5b58\u653e\u5230 UPYUN \u4e0a\u3002 \u5177\u4f53\u53ef\u6309\u5982\u4e0b\u6b65\u9aa4\uff1a \u524d\u671f\u51c6\u5907\uff1a \u5728 UPYUN \u4e0a\u521b\u5efa\u4e00\u4e2a\u6587\u4ef6\u7c7b\u7a7a\u95f4\u3002 \u6ce8\u610f\uff1a\u5fc5\u987b\u662f\u6587\u4ef6\u7c7b\u7a7a\u95f4\uff0c\u4e0d\u80fd\u662f\u56fe\u7247\u7c7b\u7a7a\u95f4\uff0cdiscuz \u9644\u4ef6\u542b\u591a\u79cd\u7c7b\u578b\u6587\u4ef6 \u83b7\u53d6\u7a7a\u95f4\u7684 FTP \u5e10\u53f7\u4fe1\u606f\u3002 \u8bbe\u7f6e\u6b65\u9aa4\uff1a \u6ce8\uff1a\u76ee\u524d\u7248\u672c\u7684 discuz \u7ed1\u5b9a UPYUN\uff0c\u7ecf\u8fc7 discuz \u5b98\u65b9\u6d4b\u8bd5\uff0c\u987b\u589e\u52a0 2 \u884c\u6d4b\u8bd5\u4ee3\u7801\uff0cdiscuz \u5b98\u65b9\u5df2\u5728\u6700\u65b0\u7684\u7248\u672c\u4e2d\u589e\u52a0\uff0c\u4f1a\u5728\u4e0b\u6b21\u53d1\u5e03\u65f6\u66f4\u65b0\u3002 \u76ee\u524d\u60a8\u53ef\u4ee5\u624b\u52a8\u4fee\u6539\u4ee3\u7801\u6216\u8df3\u8fc7\u6d4b\u8bd5\u8fdc\u7a0b\u9644\u4ef6\u5373\u53ef\u3002 \u624b\u52a8\u6dfb\u52a0\u65b9\u6cd5\u89c1\u5e16\u5b50\u6700\u540e\u3002 \u5728\u8bba\u575b\u540e\u53f0\u627e\u5230\u8bbe\u7f6e\u8fdc\u7a0b\u9644\u4ef6\u529f\u80fd\uff0c\u7ba1\u7406\u540e\u53f0 => \u5168\u5c40 => \u4e0a\u4f20\u8bbe\u7f6e\uff08\u6216\u9644\u4ef6\u8bbe\u7f6e\uff09 => \u8fdc\u7a0b\u9644\u4ef6\uff1a\u9009\u62e9\u201c\u542f\u7528\u8fdc\u7a0b\u9644\u4ef6\u201d\uff0c\u7136\u540e\u8bbe\u7f6e FTP \u5e10\u53f7\u4fe1\u606f\uff0c\u5982\u4e0b\u56fe\u6240\u793a\uff1a \u8bba\u575b\u539f\u6709\u7684\u9644\u4ef6\u5904\u7406 \u5982\u679c\u60a8\u60f3\u628a\u8bba\u575b\u539f\u6709\u7684\u9644\u4ef6\u4e5f\u642c\u5230 UPYUN\uff0c\u60a8\u53ea\u8981 2 \u6b65\u64cd\u4f5c\uff1a a\u3001\u628a\u539f\u6709\u9644\u4ef6\u901a\u8fc7 FTP \u4e0a\u4f20\u5230\u4e91\u5b58\u50a8\u7a7a\u95f4\u7684\u76f8\u5e94\u4f4d\u7f6e b\u3001\u628a\u9644\u4ef6\u8868\u7684 remote \u5b57\u6bb5\u7684\u5c5e\u6027\u6539\u4e3a 1 \u5230\u8fd9\u4e00\u6b65\uff0c\u606d\u559c\u60a8\uff0c\u60a8\u7684\u9644\u4ef6\u5df2\u7ecf\u6258\u7ba1\u5230 UPYUN\uff0c\u8fd9\u4e0b\u60a8\u4e0d\u7528\u62c5\u5fc3\u9644\u4ef6\u7684\u5b89\u5168\u53ca\u6027\u80fd\u95ee\u9898\u4e86\u3002 \u9644\u5f55\u4e00\uff1a \u624b\u52a8\u4fee\u6539\u6d4b\u8bd5\u7a0b\u5e8f\u4ee3\u7801\uff1a \u6253\u5f00\uff1asource/admincp/admincp_checktools.php \u627e\u5230\uff1a function getremotefile($file) { global $_G; @set_time_limit(0); $str = @implode('', @file($file)); if(!$str) { $str = dfsockopen($file); } return $str; } \u66ff\u6362\u4e3a\uff1a function getremotefile($file) { global $_G; $file = $file.'?'.rand(); @set_time_limit(0); $str = @implode('', @file($file)); if(!$str) { $str = dfsockopen($file); } return $str; } \u627e\u5230 ftpcmd('delete', $testfile); \u589e\u52a0\u4e00\u884c: ftpcmd('delete', 'test/index.htm');","title":"\u901a\u8fc7\u8bba\u575b\u81ea\u5e26\u7684\u8fdc\u7a0b\u9644\u4ef6\u529f\u80fd"},{"location":"misc/discuz/#upyun","text":"","title":"\u5b89\u88c5\u4f7f\u7528 UPYUN \u5b98\u65b9\u63d2\u4ef6"},{"location":"misc/discuz/#discuz-x3x31x32","text":"","title":"Discuz X3\u3001X3.1\u3001X3.2"},{"location":"misc/discuz/#_2","text":"\u6700\u65b0\u7248\u63d2\u4ef6(v1.0) \u4e0b\u8f7d\uff1a Github \u6700\u65b0\u7248\u63d2\u4ef6(v1.0) \u5b89\u88c5\u4f7f\u7528\u624b\u518c\u4e0b\u8f7d\uff1a Pdf \u7248 | Html \u7248","title":"\u63d2\u4ef6\u4e0b\u8f7d"},{"location":"misc/discuz/#_3","text":"v1.0 \u66f4\u65b0\u8bf4\u660e \u4e0d\u517c\u5bb9 v0.1 \u7248\u672c \u7b80\u5316\u914d\u7f6e\uff0c\u4e0d\u518d\u533a\u5206\u6587\u4ef6\u548c\u56fe\u7247\u7a7a\u95f4\u3002UPYUN \u5408\u5e76\u4e86\u6587\u4ef6\u548c\u56fe\u7247\u7a7a\u95f4 \u589e\u52a0\u5206\u5757\u4e0a\u4f20\u652f\u6301\uff0c\u5927\u5927\u63d0\u5347\u4e0a\u4f20\u7684\u7a33\u5b9a\u6027\u548c\u901f\u5ea6 \u589e\u52a0 Discuz X3.1 \u548c X3.2 \u7248\u672c\u7684\u652f\u6301 \u53d6\u6d88\u672c\u5730\u56fe\u7247\u548c\u6587\u4ef6\u7684\u5907\u4efd \u4f18\u5316 Token \u9632\u76d7\u94fe\uff08\u9700\u8981\u5c06\u8bba\u575b\u57df\u540d\u7ed1\u5b9a\u5230 UPYUN \u7a7a\u95f4\uff09 v0.1 \u66f4\u65b0\u8bf4\u660e \u4ee3\u66ff\u539f\u6709\u8fdc\u7a0b\u9644\u4ef6\u7e41\u7410\u7684\u8bbe\u7f6e\u6b65\u9aa4\uff0c\u4ec5\u9700\u5728\u63d2\u4ef6\u4e2d\u8bbe\u7f6e\u7a7a\u95f4\uff0c\u64cd\u4f5c\u5458\uff0c\u5bc6\u7801\u7b49\u4fe1\u606f\u5373\u53ef\u4f7f\u7528 UPYUN \u670d\u52a1\uff1b \u5c06 Discuz \u81ea\u5e26\u7684 FTP \u4e0a\u4f20\u6838\u5fc3\u6574\u4f53\u66ff\u6362\u6210 HTTP \u4e0a\u4f20\uff0c\u63d0\u5347\u4e0a\u4f20\u901f\u5ea6\u3001\u7a33\u5b9a\u6027\u548c\u517c\u5bb9\u6027\uff1b \u89e3\u51b3\u90e8\u5206\u5ba2\u6237\u7531\u4e8e\u865a\u62df\u4e3b\u673a\u6743\u9650\u9650\u5236\u5bfc\u81f4\u65e0\u6cd5\u4f7f\u7528 Discuz \u81ea\u5e26 FTP \u8fdc\u7a0b\u9644\u4ef6\u7684\u95ee\u9898\uff1b \u4e0a\u4f20\u7684\u56fe\u7247\u548c\u6587\u4ef6\u5206\u7a7a\u95f4\u5b58\u653e\uff0c\u5e76\u53ef\u6307\u5b9a\u4e0d\u540c\u57df\u540d\uff1b \u89e3\u51b3\u4e0b\u8f7d\u8bba\u575b\u975e\u56fe\u7247\u9644\u4ef6\u4e8c\u6b21\u6d41\u91cf\u95ee\u9898\uff1b \u652f\u6301\u672c\u5730\u56fe\u7247\u3001\u6587\u4ef6\u5907\u4efd\uff1b \u975e\u56fe\u7247\u9644\u4ef6\u652f\u6301 token \u9632\u76d7\u94fe\uff1b \u9644\u5e26 API \u63a5\u5165\u70b9\u6d4b\u901f\u5c0f\u5de5\u5177\uff1b \u589e\u52a0\u624b\u52a8 API \u63a5\u5165\u70b9\u8bbe\u7f6e\u529f\u80fd\uff0c\u6839\u636e\u6d4b\u901f\u5de5\u5177\u68c0\u6d4b\u7ed3\u679c\uff0c\u9009\u62e9\u6700\u5feb\u7684 API \u63a5\u5165\u70b9\uff1b","title":"\u7248\u672c\u66f4\u65b0\u8bf4\u660e"},{"location":"misc/discuz/#discuz-x25","text":"","title":"Discuz X2.5"},{"location":"misc/discuz/#_4","text":"\u6700\u65b0\u7248\u63d2\u4ef6(v0.4.1) \u4e0b\u8f7d\uff1a Zip \u538b\u7f29\u5305 | 7z \u538b\u7f29\u5305 \u6700\u65b0\u7248\u63d2\u4ef6(v0.4.1) \u5b89\u88c5\u4f7f\u7528\u624b\u518c\u4e0b\u8f7d\uff1a Word \u7248 | Pdf \u7248","title":"\u63d2\u4ef6\u4e0b\u8f7d"},{"location":"misc/discuz/#_5","text":"v0.4.1 \u66f4\u65b0\u8bf4\u660e \u4f18\u5316\u5bf9 PHP 5.2.x \u7684\u652f\u6301\uff0c\u89e3\u51b3 PHP 5.2.x \u7248\u672c\u7528\u6237 diy \u6a21\u5757\u548c\u56fe\u7247\u66f4\u65b0\u51fa\u9519\u3001\u5e16\u5b50\u65e0\u6cd5\u63a8\u9001\u7684 bug\u3002 PHP 5.3.x \u7248\u672c\u7528\u6237\u53ef\u4e0d\u66f4\u65b0\u6b64\u7248\u672c\u63d2\u4ef6 v0.4 \u66f4\u65b0\u8bf4\u660e \u65b0\u589e\u624b\u52a8 API \u63a5\u5165\u70b9\u8bbe\u7f6e\u529f\u80fd\uff0c\u6839\u636e\u6d4b\u901f\u5de5\u5177\u68c0\u6d4b\u7ed3\u679c\uff0c\u9009\u62e9\u6700\u5feb\u7684 API \u63a5\u5165\u70b9\uff1b \u65b0\u589e API \u63a5\u5165\u70b9\u6d4b\u901f\u5c0f\u5de5\u5177\uff1b \u4f18\u5316\u56fe\u7247\u7c7b\u9644\u4ef6\u4e0b\u8f7d\uff0c\u5b9e\u73b0\u6d4f\u89c8\u5668\u4e0b\u8f7d\u4fdd\u5b58\u56fe\u7247\u9644\u4ef6\uff08\u4e4b\u524d\u7248\u672c\u53ef\u80fd\u4f1a\u5b58\u5728\u6d4f\u89c8\u5668\u76f4\u63a5\u6253\u5f00\u9884\u89c8\u56fe\u7247\u7684\u60c5\u51b5\uff09\uff1b \u4f18\u5316\u9644\u4ef6\u4e0b\u8f7d\u540e\u6587\u4ef6\u540d\u547d\u540d\uff0c\u907f\u514d\u4e0b\u8f7d\u540e\u9644\u4ef6\u6587\u4ef6\u540d\u88ab\u4fee\u6539\u6210\u968f\u673a\u4e71\u7801\u3002 v0.3 \u66f4\u65b0\u8bf4\u660e \u5c06 Discuz \u81ea\u5e26\u7684 FTP \u4e0a\u4f20\u6838\u5fc3\u6574\u4f53\u66ff\u6362\u6210 HTTP \u4e0a\u4f20\uff0c\u63d0\u5347\u4e0a\u4f20\u901f\u5ea6\u3001\u7a33\u5b9a\u6027\u548c\u517c\u5bb9\u6027\uff1b \u89e3\u51b3\u90e8\u5206\u7531\u4e8e\u865a\u62df\u4e3b\u673a\u6743\u9650\u9650\u5236\u5bfc\u81f4\u65e0\u6cd5\u4f7f\u7528\u8fdc\u7a0b\u9644\u4ef6\u7684\u95ee\u9898\uff1b v0.2 \u66f4\u65b0\u8bf4\u660e \u4f18\u5316\u4e0a\u4f20\u4ee3\u7801\uff0c\u63d0\u5347\u4e0a\u4f20\u901f\u5ea6\u548c\u6548\u7387\uff1b \u4fee\u590d discuz \u5b98\u65b9\u8fdc\u7a0b\u9644\u4ef6\u4e2d\u65e0\u6cd5\u5220\u9664\u8fdc\u7aef\u7a7a\u95f4\u6587\u4ef6\u7684 Bug\uff1b \u7531\u4e8e discuz \u5b98\u65b9\u8fdc\u7a0b\u9644\u4ef6\u4ee3\u7801 Bug\uff0c\u65e0\u6cd5\u652f\u6301\u81ea\u5b9a\u4e49\u8def\u5f84\uff0c\u6240\u4ee5\u63d2\u4ef6\u6682\u65f6\u53d6\u6d88\u81ea\u5b9a\u4e49\u6587\u4ef6\u8def\u5f84\u8bbe\u7f6e\u529f\u80fd \u8bbe\u7f6e\u8868\u5355\u4e2d\u6dfb\u52a0\u5bc6\u94a5\u9ed8\u8ba4\u6709\u6548\u65f6\u95f4 900 \u79d2\u3002 v0.1 \u529f\u80fd\u4ecb\u7ecd \u4ee3\u66ff\u539f\u6709\u8fdc\u7a0b\u9644\u4ef6\u7e41\u7410\u7684\u8bbe\u7f6e\u6b65\u9aa4\uff0c\u4ec5\u9700\u5728\u63d2\u4ef6\u4e2d\u8bbe\u7f6e\u7a7a\u95f4\uff0c\u64cd\u4f5c\u5458\uff0c\u5bc6\u7801\u7b49\u4fe1\u606f\u5373\u53ef\u4f7f\u7528 UPYUN \u670d\u52a1\uff1b \u4e0a\u4f20\u7684\u56fe\u7247\u548c\u6587\u4ef6\u5206\u7a7a\u95f4\u5b58\u653e\uff0c\u5e76\u53ef\u6307\u5b9a\u4e0d\u540c\u57df\u540d\uff1b \u89e3\u51b3\u5b98\u65b9\u8fdc\u7a0b\u9644\u4ef6\u4e0b\u8f7d\u65f6\u4ecd\u7136\u8c03\u7528\u672c\u5730\u9644\u4ef6\u5730\u5740\u7684\u95ee\u9898\uff1b \u652f\u6301\u672c\u5730\u56fe\u7247\u3001\u6587\u4ef6\u5907\u4efd\uff1b \u9644\u4ef6\u4e0b\u8f7d\u652f\u6301\u9632\u76d7\u94fe\u3002","title":"\u7248\u672c\u66f4\u65b0\u8bf4\u660e"},{"location":"misc/discuz/#_6","text":"\u95ee\uff1a \u5982\u679c\u6587\u4ef6\u6743\u9650\u6ca1\u6709\u4fee\u6539\u597d\u5c31\u76f4\u63a5\u5b89\u88c5\u4e86\u63d2\u4ef6\uff0c\u8be5\u600e\u4e48\u529e\uff1f \u7b54\uff1a \u53ef\u4ee5\u5378\u8f7d\u63d2\u4ef6\uff0c\u7136\u540e\u4fee\u6539\u6587\u4ef6\u6743\u9650\uff0c\u518d\u6b21\u5b89\u88c5\u3002\u6216\u8005\u4e5f\u53ef\u4ee5\u6309\u7167\u5b89\u88c5\u8bf4\u660e\u4e2d\u9644\u4ef6\u7684\u6587\u4ef6\u4fee\u6539\u8bf4\u660e\uff0c\u624b\u52a8\u4fee\u6539\u4e09\u4e2a\u6587\u4ef6\u7684\u4ee3\u7801 \u95ee\uff1a \u63d2\u4ef6\u6b63\u786e\u5b89\u88c5\u4e14\u53c2\u6570\u8bbe\u7f6e\u6b63\u786e\uff0c\u4f46\u662f\u4e0a\u4f20\u540e\u663e\u793a\u7684\u5730\u5740\u8fd8\u662f\u672c\u5730\u7684\uff1f \u7b54\uff1a \u5c1d\u8bd5\u8fdb\u5165\u540e\u53f0\u66f4\u65b0\u8bba\u575b\u6570\u636e\u7f13\u5b58 \u95ee\uff1a \u63d2\u4ef6\u4e2d\u8bbe\u7f6e\u4e86\u53c2\u6570\uff0c\u8fd8\u9700\u8981\u5728\u8fdc\u7a0b\u9644\u4ef6\u4e2d\u8bbe\u7f6e\u4e48\uff1f \u7b54\uff1a \u4e0d\u9700\u8981\uff0c\u63d2\u4ef6\u4f1a\u81ea\u52a8\u4fee\u6539\u8fdc\u7a0b\u9644\u4ef6\u7684\u8bbe\u7f6e\uff0c\u6240\u4ee5\u53ea\u9700\u8981\u5728\u63d2\u4ef6\u4e2d\u8bbe\u7f6e\u76f8\u5173\u53c2\u6570\u5373\u53ef\uff0c\u8fdc\u7a0b\u9644\u4ef6\u8bbe\u7f6e\u8868\u5355\u65e0\u9700\u4fee\u6539","title":"\u5e38\u89c1\u95ee\u7b54"},{"location":"misc/phpwind/","text":"Phpwind \u7528\u6237\u9700\u8981\u4f7f\u7528 UPYUN \u6709\u4ee5\u4e0b\u4e24\u4e2a\u65b9\u6cd5\uff1a \u901a\u8fc7\u8bba\u575b\u81ea\u5e26\u7684\u8fdc\u7a0b\u9644\u4ef6\u529f\u80fd \u00b6 \u4f7f\u7528 phpwind \u7684\u8fdc\u7a0b\u9644\u4ef6\u529f\u80fd\uff0c\u53ef\u5c06\u8bba\u575b\u9644\u4ef6\u5168\u90e8\u5b58\u653e\u5230 UPYUN \u4e0a\u3002\u7ecf\u8fc7 phpwind \u5b98\u65b9\u6d4b\u8bd5\uff0c\u53ef\u6b63\u5e38\u4f7f\u7528\u3002 \u524d\u671f\u51c6\u5907\uff1a \u5728 UPYUN \u4e0a\u521b\u5efa\u4e00\u4e2a\u6587\u4ef6\u7c7b\u7a7a\u95f4\u3002 \u6ce8\u610f\uff1a\u5fc5\u987b\u662f\u6587\u4ef6\u7c7b\u7a7a\u95f4\uff0c\u4e0d\u80fd\u662f\u56fe\u7247\u7c7b\u7a7a\u95f4\uff0cphpwind \u9644\u4ef6\u542b\u591a\u79cd\u7c7b\u578b\u6587\u4ef6 \u83b7\u53d6\u521a\u624d\u521b\u5efa\u7a7a\u95f4\u7684 FTP \u5e10\u53f7\u4fe1\u606f \u8bbe\u7f6e\u6b65\u9aa4\uff1a \u8bba\u575b\u539f\u6709\u9644\u4ef6\u9700\u8981\u901a\u8fc7 ftp \u4e0a\u4f20\u5230\u4e91\u5b58\u50a8\u7a7a\u95f4\u7684\u76f8\u5e94\u4f4d\u7f6e \u5230\u8fd9\u4e00\u6b65\uff0c\u606d\u559c\u60a8\uff0c\u60a8\u7684\u9644\u4ef6\u5df2\u7ecf\u6258\u7ba1\u5230 UPYUN\uff0c\u8fd9\u4e0b\u60a8\u4e0d\u7528\u62c5\u5fc3\u9644\u4ef6\u7684\u5b89\u5168\u53ca\u6027\u80fd\u95ee\u9898\u4e86\u3002 \u5b89\u88c5\u4f7f\u7528 UPYUN \u5b98\u65b9\u63d2\u4ef6 \u00b6 v0.3 \u00b6 UPYUN \u9644\u4ef6\u52a9\u624b\uff08PW\uff09v0.3 \u4e0b\u8f7d\u5730\u5740\uff1a Zip \u538b\u7f29\u5305 | 7z \u538b\u7f29\u5305 UPYUN \u9644\u4ef6\u52a9\u624b\uff08PW\uff09v0.3 \u5b89\u88c5\u4f7f\u7528\u624b\u518c\uff1a Word \u7248 | Pdf \u7248 v0.2 \u00b6 UPYUN \u9644\u4ef6\u52a9\u624b\uff08PW\uff09v0.2 \u4e0b\u8f7d\u5730\u5740\uff1a Zip \u538b\u7f29\u5305 | 7z \u538b\u7f29\u5305 UPYUN \u9644\u4ef6\u52a9\u624b\uff08PW\uff09v0.2 \u5b89\u88c5\u4f7f\u7528\u624b\u518c\uff1a Word \u7248 | Pdf \u7248 \u7248\u672c\u66f4\u65b0\u8bf4\u660e \u00b6 v0.3 \u66f4\u65b0\u8bf4\u660e \u5b8c\u5584\u4e86\u65b0\u7248\u7684\u517c\u5bb9\u95ee\u9898\uff08\u9488\u5bf9 20130227 \u5347\u7ea7\u5305\uff09\uff0c20130227 \u5347\u7ea7\u5305\u524d\u7684\u7248\u672c\u8bf7\u4f7f\u7528 0.2 \u7248 v0.2 \u66f4\u65b0\u8bf4\u660e \u5c06\u539f\u6709 FTP \u8fdc\u7a0b\u9644\u4ef6\u5b58\u50a8\u6a21\u5f0f\u4fee\u6539\u6210 UPYUN \u8fdc\u7a0b\u9644\u4ef6\u4e91\u5b58\u50a8\u65b9\u5f0f\uff0c\u66f4\u9ad8\u901f\u7a33\u5b9a\u4e0a\u4f20\u9644\u4ef6\u548c\u56fe\u7247\u5230 UPYUN\uff1b v0.1 \u66f4\u65b0\u8bf4\u660e \u65e0\u9700\u8fdb\u884c\u7e41\u7410\u7684\u8fdc\u7a0b\u9644\u4ef6\u8bbe\u7f6e\uff0c\u4ec5\u9700\u5728\u63d2\u4ef6\u4e2d\u8bbe\u7f6e\u7a7a\u95f4\uff0c\u64cd\u4f5c\u5458\uff0c\u5bc6\u7801\uff0c\u8bbf\u95ee\u57df\u540d\uff0c\u8fdc\u7a0b\u76ee\u5f55\u7b49\u4fe1\u606f\u5373\u53ef\u4f7f\u7528 UPYUN \u670d\u52a1\uff1b","title":"Phpwind"},{"location":"misc/phpwind/#_1","text":"\u4f7f\u7528 phpwind \u7684\u8fdc\u7a0b\u9644\u4ef6\u529f\u80fd\uff0c\u53ef\u5c06\u8bba\u575b\u9644\u4ef6\u5168\u90e8\u5b58\u653e\u5230 UPYUN \u4e0a\u3002\u7ecf\u8fc7 phpwind \u5b98\u65b9\u6d4b\u8bd5\uff0c\u53ef\u6b63\u5e38\u4f7f\u7528\u3002 \u524d\u671f\u51c6\u5907\uff1a \u5728 UPYUN \u4e0a\u521b\u5efa\u4e00\u4e2a\u6587\u4ef6\u7c7b\u7a7a\u95f4\u3002 \u6ce8\u610f\uff1a\u5fc5\u987b\u662f\u6587\u4ef6\u7c7b\u7a7a\u95f4\uff0c\u4e0d\u80fd\u662f\u56fe\u7247\u7c7b\u7a7a\u95f4\uff0cphpwind \u9644\u4ef6\u542b\u591a\u79cd\u7c7b\u578b\u6587\u4ef6 \u83b7\u53d6\u521a\u624d\u521b\u5efa\u7a7a\u95f4\u7684 FTP \u5e10\u53f7\u4fe1\u606f \u8bbe\u7f6e\u6b65\u9aa4\uff1a \u8bba\u575b\u539f\u6709\u9644\u4ef6\u9700\u8981\u901a\u8fc7 ftp \u4e0a\u4f20\u5230\u4e91\u5b58\u50a8\u7a7a\u95f4\u7684\u76f8\u5e94\u4f4d\u7f6e \u5230\u8fd9\u4e00\u6b65\uff0c\u606d\u559c\u60a8\uff0c\u60a8\u7684\u9644\u4ef6\u5df2\u7ecf\u6258\u7ba1\u5230 UPYUN\uff0c\u8fd9\u4e0b\u60a8\u4e0d\u7528\u62c5\u5fc3\u9644\u4ef6\u7684\u5b89\u5168\u53ca\u6027\u80fd\u95ee\u9898\u4e86\u3002","title":"\u901a\u8fc7\u8bba\u575b\u81ea\u5e26\u7684\u8fdc\u7a0b\u9644\u4ef6\u529f\u80fd"},{"location":"misc/phpwind/#upyun","text":"","title":"\u5b89\u88c5\u4f7f\u7528 UPYUN \u5b98\u65b9\u63d2\u4ef6"},{"location":"misc/phpwind/#v03","text":"UPYUN \u9644\u4ef6\u52a9\u624b\uff08PW\uff09v0.3 \u4e0b\u8f7d\u5730\u5740\uff1a Zip \u538b\u7f29\u5305 | 7z \u538b\u7f29\u5305 UPYUN \u9644\u4ef6\u52a9\u624b\uff08PW\uff09v0.3 \u5b89\u88c5\u4f7f\u7528\u624b\u518c\uff1a Word \u7248 | Pdf \u7248","title":"v0.3"},{"location":"misc/phpwind/#v02","text":"UPYUN \u9644\u4ef6\u52a9\u624b\uff08PW\uff09v0.2 \u4e0b\u8f7d\u5730\u5740\uff1a Zip \u538b\u7f29\u5305 | 7z \u538b\u7f29\u5305 UPYUN \u9644\u4ef6\u52a9\u624b\uff08PW\uff09v0.2 \u5b89\u88c5\u4f7f\u7528\u624b\u518c\uff1a Word \u7248 | Pdf \u7248","title":"v0.2"},{"location":"misc/phpwind/#_2","text":"v0.3 \u66f4\u65b0\u8bf4\u660e \u5b8c\u5584\u4e86\u65b0\u7248\u7684\u517c\u5bb9\u95ee\u9898\uff08\u9488\u5bf9 20130227 \u5347\u7ea7\u5305\uff09\uff0c20130227 \u5347\u7ea7\u5305\u524d\u7684\u7248\u672c\u8bf7\u4f7f\u7528 0.2 \u7248 v0.2 \u66f4\u65b0\u8bf4\u660e \u5c06\u539f\u6709 FTP \u8fdc\u7a0b\u9644\u4ef6\u5b58\u50a8\u6a21\u5f0f\u4fee\u6539\u6210 UPYUN \u8fdc\u7a0b\u9644\u4ef6\u4e91\u5b58\u50a8\u65b9\u5f0f\uff0c\u66f4\u9ad8\u901f\u7a33\u5b9a\u4e0a\u4f20\u9644\u4ef6\u548c\u56fe\u7247\u5230 UPYUN\uff1b v0.1 \u66f4\u65b0\u8bf4\u660e \u65e0\u9700\u8fdb\u884c\u7e41\u7410\u7684\u8fdc\u7a0b\u9644\u4ef6\u8bbe\u7f6e\uff0c\u4ec5\u9700\u5728\u63d2\u4ef6\u4e2d\u8bbe\u7f6e\u7a7a\u95f4\uff0c\u64cd\u4f5c\u5458\uff0c\u5bc6\u7801\uff0c\u8bbf\u95ee\u57df\u540d\uff0c\u8fdc\u7a0b\u76ee\u5f55\u7b49\u4fe1\u606f\u5373\u53ef\u4f7f\u7528 UPYUN \u670d\u52a1\uff1b","title":"\u7248\u672c\u66f4\u65b0\u8bf4\u660e"},{"location":"misc/ueditor/","text":"UEditor \u7528\u6237\u73b0\u5728\u4e5f\u53ef\u4ee5\u628a UPYUN \u670d\u52a1\u96c6\u6210\u8fdb\u53bb\uff0c\u8f7b\u677e\u628a\u56fe\u7247\u548c\u9644\u4ef6\u4e0a\u4f20\u5230\u4f60\u7684 UPYUN \u7a7a\u95f4\u3002 \u66f4\u65b0\u8bf4\u660e \u00b6 V0.2 \u66f4\u65b0\uff1a \u4f18\u5316 0.1 \u7248\u7684\u4ee3\u7801\uff0c\u589e\u52a0\u5b8c\u5584\u4e86\u9519\u8bef\u5224\u65ad\uff1b \u4f7f\u7528\u987b\u77e5 \u00b6 \u5df2\u7ecf\u5b89\u88c5\u90e8\u7f72\u767e\u5ea6\u7f16\u8f91\u5668 UEditor \u5de5\u5177\u662f\u57fa\u4e8e UPYUN \u670d\u52a1\u7684\uff0c\u4f7f\u7528\u9700\u8981\u6709\u6709\u6548\u7684 UPYUN \u5e10\u53f7\uff0c\u8fd8\u6ca1\u6709\u5e10\u53f7\u7684\u7528\u6237\uff0c\u53ef\u4ee5 \u70b9\u51fb\u514d\u8d39\u6ce8\u518c\u8d26\u53f7 \u5b89\u88c5\u8bf4\u660e \u00b6 1. \u5b98\u7f51\u4e0b\u8f7d\u5de5\u5177\u5305 upyun_ueditor.zip \uff1b 2. \u89e3\u538b\u5230\u4efb\u610f\u76ee\u5f55\uff0c\u53ef\u5f97\u6587\u4ef6\u5939 upyun-ueditor\uff1b 3. \u590d\u5236\u6587\u4ef6 upyun-ueditor/upyun_config.php\u3001upyun-ueditor/upyun.class.php\u3001upyun-ueditor/editor_config.js\u3001upyun-ueditor/index.php \u5230\u6240\u90e8\u7f72\u7684 UEditor \u6839\u76ee\u5f55\u4e0b\uff0c\u590d\u5236\u6587\u4ef6 upyun-ueditor/php/fileUp.php\u3001upyun-ueditor/php/imageUp.php \u5230\u6240\u90e8\u7f72\u7684 UEditor \u6839\u76ee\u5f55\u4e0b\u7684 php \u76ee\u5f55\uff1b 4. \u914d\u7f6e upyun-ueditor/upyun_config.php \u4e2d\u7684 UPYUN \u7a7a\u95f4\u6388\u6743\u4fe1\u606f //UPYUN \u56fe\u7247\u7a7a\u95f4\u6388\u6743 $img_bucketname = \"\"; //\u56fe\u7247\u7a7a\u95f4\u540d\u79f0 $img_username = \"\"; //\u56fe\u7247\u7a7a\u95f4\u6388\u6743\u7ba1\u7406\u5458\u5e10\u53f7 $img_password = \"\"; //\u56fe\u7247\u7a7a\u95f4\u6388\u6743\u7ba1\u7406\u5458\u5bc6\u7801 //UPYUN \u6587\u4ef6\u7a7a\u95f4\u6388\u6743 $file_bucketname = \"\"; //\u6587\u4ef6\u7a7a\u95f4\u540d\u79f0 $file_username = \"\"; //\u6587\u4ef6\u7a7a\u95f4\u6388\u6743\u7ba1\u7406\u5458\u5e10\u53f7 $file_password = \"\"; //\u6587\u4ef6\u7a7a\u95f4\u6388\u6743\u7ba1\u7406\u5458\u5bc6\u7801 \u8bf4\u660e\uff1a\u5982\u679c\u4e0d\u9700\u8981\u5c06\u56fe\u7247\u548c\u975e\u56fe\u7247\u7c7b\u6587\u4ef6\u5206\u7a7a\u95f4\u5b58\u50a8\uff0c\u5219\u53ea\u9700\u5c06\u56fe\u7247\u7a7a\u95f4\u548c\u6587\u4ef6\u7a7a\u95f4\u76f8\u5173\u4fe1\u606f\u586b\u5199\u6210\u540c\u4e00\u4e2a\u6587\u4ef6\u7c7b\u7a7a\u95f4\u5373\u53ef\uff08\u5fc5\u987b\u4e3a\u6587\u4ef6\u7c7b\u7a7a\u95f4\uff09 5. \u914d\u7f6e upyun-ueditor/editor_config.js \u4e2d\u7684\u7a7a\u95f4\u540d var img_bucketname = \"\"; //UPYUN \u56fe\u7247\u7a7a\u95f4\u540d var file_bucketname = \"\"; //UPYUN \u6587\u4ef6\u7a7a\u95f4\u540d \u8bf4\u660e\uff1a\u5982\u679c\u4e0d\u9700\u8981\u5c06\u56fe\u7247\u548c\u975e\u56fe\u7247\u7c7b\u6587\u4ef6\u5206\u7a7a\u95f4\u5b58\u50a8\uff0c\u5219\u53ea\u9700\u5c06\u56fe\u7247\u7a7a\u95f4\u548c\u6587\u4ef6\u7a7a\u95f4\u76f8\u5173\u4fe1\u606f\u586b\u5199\u6210\u540c\u4e00\u4e2a\u6587\u4ef6\u7c7b\u7a7a\u95f4\u5373\u53ef\uff08\u5fc5\u987b\u4e3a\u6587\u4ef6\u7c7b\u7a7a\u95f4\uff09 \u76f8\u5173\u4e0b\u8f7d \u00b6 \u96c6\u6210\u5de5\u5177\u5305\u4e0b\u8f7d \u5b89\u88c5\u4f7f\u7528\u8bf4\u660e\u6587\u6863\uff1a PDF \u7248\u672c WORD \u7248\u672c","title":"Ueditor"},{"location":"misc/ueditor/#_1","text":"V0.2 \u66f4\u65b0\uff1a \u4f18\u5316 0.1 \u7248\u7684\u4ee3\u7801\uff0c\u589e\u52a0\u5b8c\u5584\u4e86\u9519\u8bef\u5224\u65ad\uff1b","title":"\u66f4\u65b0\u8bf4\u660e"},{"location":"misc/ueditor/#_2","text":"\u5df2\u7ecf\u5b89\u88c5\u90e8\u7f72\u767e\u5ea6\u7f16\u8f91\u5668 UEditor \u5de5\u5177\u662f\u57fa\u4e8e UPYUN \u670d\u52a1\u7684\uff0c\u4f7f\u7528\u9700\u8981\u6709\u6709\u6548\u7684 UPYUN \u5e10\u53f7\uff0c\u8fd8\u6ca1\u6709\u5e10\u53f7\u7684\u7528\u6237\uff0c\u53ef\u4ee5 \u70b9\u51fb\u514d\u8d39\u6ce8\u518c\u8d26\u53f7","title":"\u4f7f\u7528\u987b\u77e5"},{"location":"misc/ueditor/#_3","text":"1. \u5b98\u7f51\u4e0b\u8f7d\u5de5\u5177\u5305 upyun_ueditor.zip \uff1b 2. \u89e3\u538b\u5230\u4efb\u610f\u76ee\u5f55\uff0c\u53ef\u5f97\u6587\u4ef6\u5939 upyun-ueditor\uff1b 3. \u590d\u5236\u6587\u4ef6 upyun-ueditor/upyun_config.php\u3001upyun-ueditor/upyun.class.php\u3001upyun-ueditor/editor_config.js\u3001upyun-ueditor/index.php \u5230\u6240\u90e8\u7f72\u7684 UEditor \u6839\u76ee\u5f55\u4e0b\uff0c\u590d\u5236\u6587\u4ef6 upyun-ueditor/php/fileUp.php\u3001upyun-ueditor/php/imageUp.php \u5230\u6240\u90e8\u7f72\u7684 UEditor \u6839\u76ee\u5f55\u4e0b\u7684 php \u76ee\u5f55\uff1b 4. \u914d\u7f6e upyun-ueditor/upyun_config.php \u4e2d\u7684 UPYUN \u7a7a\u95f4\u6388\u6743\u4fe1\u606f //UPYUN \u56fe\u7247\u7a7a\u95f4\u6388\u6743 $img_bucketname = \"\"; //\u56fe\u7247\u7a7a\u95f4\u540d\u79f0 $img_username = \"\"; //\u56fe\u7247\u7a7a\u95f4\u6388\u6743\u7ba1\u7406\u5458\u5e10\u53f7 $img_password = \"\"; //\u56fe\u7247\u7a7a\u95f4\u6388\u6743\u7ba1\u7406\u5458\u5bc6\u7801 //UPYUN \u6587\u4ef6\u7a7a\u95f4\u6388\u6743 $file_bucketname = \"\"; //\u6587\u4ef6\u7a7a\u95f4\u540d\u79f0 $file_username = \"\"; //\u6587\u4ef6\u7a7a\u95f4\u6388\u6743\u7ba1\u7406\u5458\u5e10\u53f7 $file_password = \"\"; //\u6587\u4ef6\u7a7a\u95f4\u6388\u6743\u7ba1\u7406\u5458\u5bc6\u7801 \u8bf4\u660e\uff1a\u5982\u679c\u4e0d\u9700\u8981\u5c06\u56fe\u7247\u548c\u975e\u56fe\u7247\u7c7b\u6587\u4ef6\u5206\u7a7a\u95f4\u5b58\u50a8\uff0c\u5219\u53ea\u9700\u5c06\u56fe\u7247\u7a7a\u95f4\u548c\u6587\u4ef6\u7a7a\u95f4\u76f8\u5173\u4fe1\u606f\u586b\u5199\u6210\u540c\u4e00\u4e2a\u6587\u4ef6\u7c7b\u7a7a\u95f4\u5373\u53ef\uff08\u5fc5\u987b\u4e3a\u6587\u4ef6\u7c7b\u7a7a\u95f4\uff09 5. \u914d\u7f6e upyun-ueditor/editor_config.js \u4e2d\u7684\u7a7a\u95f4\u540d var img_bucketname = \"\"; //UPYUN \u56fe\u7247\u7a7a\u95f4\u540d var file_bucketname = \"\"; //UPYUN \u6587\u4ef6\u7a7a\u95f4\u540d \u8bf4\u660e\uff1a\u5982\u679c\u4e0d\u9700\u8981\u5c06\u56fe\u7247\u548c\u975e\u56fe\u7247\u7c7b\u6587\u4ef6\u5206\u7a7a\u95f4\u5b58\u50a8\uff0c\u5219\u53ea\u9700\u5c06\u56fe\u7247\u7a7a\u95f4\u548c\u6587\u4ef6\u7a7a\u95f4\u76f8\u5173\u4fe1\u606f\u586b\u5199\u6210\u540c\u4e00\u4e2a\u6587\u4ef6\u7c7b\u7a7a\u95f4\u5373\u53ef\uff08\u5fc5\u987b\u4e3a\u6587\u4ef6\u7c7b\u7a7a\u95f4\uff09","title":"\u5b89\u88c5\u8bf4\u660e"},{"location":"misc/ueditor/#_4","text":"\u96c6\u6210\u5de5\u5177\u5305\u4e0b\u8f7d \u5b89\u88c5\u4f7f\u7528\u8bf4\u660e\u6587\u6863\uff1a PDF \u7248\u672c WORD \u7248\u672c","title":"\u76f8\u5173\u4e0b\u8f7d"},{"location":"mobile-stats/","text":"\u5e73\u53f0\u6982\u8ff0 \u00b6 \u53c8\u62cd\u4e91\u624b\u673a\u6d41\u91cf\u8425\u9500\u5e73\u53f0\uff0c\u6574\u5408\u79fb\u52a8\u3001\u7535\u4fe1\u3001\u8054\u901a\u4e09\u5927\u8fd0\u8425\u5546\u6d41\u91cf\u8d44\u6e90\uff0c\u5c06\u5f3a\u5927\u7684\u6d41\u91cf\u8425\u9500\u670d\u52a1\uff0c\u901a\u8fc7\u63a5\u53e3\u7b49\u5f62\u5f0f\u63d0\u4f9b\u7ed9\u5546\u5bb6\u5408\u4f5c\u4f19\u4f34\uff0c\u5e2e\u52a9\u5546\u5bb6\u5f00\u5c55\u54c1\u724c\u5ba3\u4f20\u3001APP/\u6e38\u620f/\u5fae\u4fe1\u516c\u4f17\u53f7/\u7f51\u7ad9\u7684\u62c9\u65b0\u4e0e\u4fc3\u6d3b\u7b49\u591a\u79cd\u8425\u9500\u6d3b\u52a8\u3002 \u901a\u8fc7\u63a5\u5165\u53c8\u62cd\u4e91\u6d41\u91cf\u8425\u9500\u5e73\u53f0\uff0c\u5546\u5bb6\u53ef\u4ee5\u83b7\u5f97\u66f4\u591a\u6d41\u91cf\u3001\u7528\u6237\u548c\u6536\u76ca\uff0c\u800c\u5546\u5bb6\u63d0\u4f9b\u7684\u6d3b\u52a8\u4e5f\u8ba9\u7528\u6237\u83b7\u5f97\u4e86\u4e09\u7f51\u901a\u7528\u6d41\u91cf\u548c\u66f4\u52a0\u4e30\u5bcc\u7684\u6d3b\u52a8\u4f53\u9a8c\u3002 \u4ea7\u54c1\u7279\u70b9 \u00b6 1.\u4e09\u7f51\u901a\u7528\uff0c\u6210\u672c\u4f18\u52bf\uff0c\u8986\u76d6\u9762\u5e7f 2.\u5feb\u901f\u5bf9\u63a5\u3001\u5168\u6d41\u6c34\u3001\u6613\u5bf9\u8d26\u3001\u7cbe\u7ed3\u7b97 \u5e94\u7528\u573a\u666f \u00b6 1.APP \u4e0b\u8f7d\u8d60\u6d41\u91cf 2.\u5fae\u4fe1\u516c\u4f17\u53f7\u589e\u7c89 3.\u5956\u54c1\u793c\u5238 4.\u6d41\u91cf\u52a0\u6cb9\u7ad9 5.\u79ef\u5206\u5151\u6362\u6d41\u91cf 6.\u6d3b\u52a8\u6bd4\u8d5b\u9001\u6d41\u91cf 7.\u6d41\u91cf\u7ea2\u5305 8.\u5458\u5de5\u798f\u5229 \u5bf9\u63a5\u8bf4\u660e \u00b6 1.\u8bf7\u8054\u7cfb\u5546\u52a1\uff08Tel:0571-89775132\uff09\u786e\u5b9a\u60a8\u7684\u5e94\u7528\u573a\u666f\u9700\u6c42\uff0c\u83b7\u53d6\u5bf9\u5e94\u6d41\u91cf\u62a5\u4ef7 2.\u6ce8\u518c\u53c8\u62cd\u4e91\u8d26\u53f7\uff0c\u5982\u679c\u60a8\u5df2\u6709\u8d26\u53f7\uff0c\u8bf7\u767b\u5f55 \u53c8\u62cd\u4e91\u63a7\u5236\u53f0 \u5b8c\u6210\u4f01\u4e1a/\u4e2a\u4eba\u8ba4\u8bc1 3.\u524d\u5f80\u5bfc\u822a > \u5de5\u5177\u7bb1 > \u624b\u673a\u6d41\u91cf\u8425\u9500\u9875\u9762\uff0c\u5f00\u901a\u8be5\u670d\u52a1\uff08\u5f00\u901a\u90ae\u4ef6\u4e2d\u5305\u542b\u63a5\u53e3\u5730\u5740\uff09 4.\u901a\u8fc7\u6d41\u91cf\u8425\u9500\u63a7\u5236\u53f0\u914d\u7f6e\u56de\u8c03\u5730\u5740 5.\u51fa\u53e3 IP \u51fa\u4e8e\u5b89\u5168\u8003\u8651\u6682\u4e0d\u652f\u6301\u63a7\u5236\u53f0\u914d\u7f6e\uff0c\u53ef\u8054\u7cfb\u6211\u53f8\u5546\u52a1\u5b8c\u6210\u751f\u4ea7\u73af\u5883\u8054\u8c03 \u4e1a\u52a1\u4ea4\u4e92\u6d41\u7a0b: \u63a5\u53e3\u6587\u6863 \u00b6 \u53c8\u62cd\u4e91\u624b\u673a\u6d41\u91cf\u5e73\u53f0\u63a5\u53e3\u5165\u53e3\u5730\u5740\u7edf\u4e00\u4e3a\uff1a https://ptp-api.upyun.com \uff0c\u8bf7\u6c42\u63a5\u53e3\u65f6\uff0c\u7edf\u4e00\u4f7f\u7528 POST \u65b9\u6cd5\uff0c \u6587\u6863\u7c7b\u578b\u7edf\u4e00\u4e3a Content-Type: application/json \uff0c\u4f7f\u7528 JSON \u683c\u5f0f\u53d1\u9001\u8bf7\u6c42\uff0c \u54cd\u5e94\u7ed3\u679c\u4e5f\u4f1a\u4ee5 JSON \u683c\u5f0f\u8fd4\u56de\uff1b\u6587\u6863\u4e2d\u63a5\u53e3\u7684\u8bf7\u6c42\u5730\u5740\u53ea\u5305\u542b\u8def\u5f84\u90e8\u5206\uff0c\u5b9e\u9645\u8bf7\u6c42\u65f6\uff0c\u9700\u8981\u52a0\u4e0a\u7edf\u4e00\u5165\u53e3\u5730\u5740 https://ptp-api.upyun.com \u3002\u6587\u6863\u4e2d\u63cf\u8ff0\u7b7e\u540d\u8ba1\u7b97\u65f6\uff0c\u90fd\u662f\u5148\u6b63\u5e8f\u6392\u5e8f\uff08\u7ed9\u51fa\u7684\u793a\u4f8b\u5b57\u7b26\u4e32\u5df2\u7ecf\u662f\u6392\u5e8f\u540e\u7684\u7ed3\u679c\uff09\uff0c\u518d\u505a SHA1 \u8fd0\u7b97\u3002 \u672c\u6587\u6863\u4e00\u5171\u63cf\u8ff0\u4e86\u56db\u4e2a\u63a5\u53e3\u548c\u4e00\u4e2a\u5145\u503c\u56de\u8c03\u8bf4\u660e\uff0c\u63a5\u53e3\u5982\u4e0b\uff1a \u83b7\u53d6\u7b7e\u540d POST /refreshToken \u63d0\u4ea4\u8ba2\u5355 POST /chargeOrder \u67e5\u8be2\u8ba2\u5355\u72b6\u6001 POST /seekOrder \u67e5\u8be2\u4f59\u989d POST /getMyBalance \u9488\u5bf9\u4ee5\u4e0a\u63a5\u53e3\uff0c\u76ee\u524d\u63d0\u4f9b\u4e86 php \u7248\u672c sdk\uff0c\u7528\u4e8e\u63d0\u4f9b\u63a5\u53e3\u8c03\u7528\u793a\u4f8b\uff0c \u5404\u4f01\u4e1a\u7528\u6237\u53ef\u4ee5\u6839\u636e\u81ea\u5df1\u7684\u9700\u8981\u8fdb\u884c\u5c01\u88c5\uff0c\u5b8c\u5584\u9519\u8bef\u5904\u7406\uff0c\u4e0b\u8f7d\u5730\u5740\uff1a \u70b9\u51fb\u4e0b\u8f7d \u3002 \u63a5\u53e3\u8be6\u60c5 \u00b6 1.\u83b7\u53d6\u8ba1\u7b97\u7b7e\u540d\u9700\u8981\u7684 token \u63a5\u53e3\u8bf4\u660e \u8be5\u63a5\u53e3\u7528\u4e8e\u83b7\u53d6 token\uff0c\u8c03\u7528\u5176\u4ed6\u63a5\u53e3\u65f6\uff0c\u9700\u8981\u4f7f\u7528 token \u8ba1\u7b97\u7b7e\u540d\u3002\u7531\u4e8e token \u9700\u8981\u5728\u540e\u7eed\u7684\u63a5\u53e3\u8bf7\u6c42\u4e2d\uff0c\u5168\u5c40\u5171\u4eab\uff0c\u6240\u4ee5\u5728\u5e76\u53d1\u8bf7\u6c42\u7684\u573a\u666f\u4e0b\uff0c\u5efa\u8bae\u5c06 token \u4fdd\u5b58\u5728 Redis/Mysql \u7b49\u7b2c\u4e09\u65b9\u5b58\u50a8\u4e2d \u8bf7\u6c42\u5730\u5740 POST /refreshToken \u8bf7\u6c42\u53c2\u6570 \u540d\u79f0 \u7c7b\u578b \u662f\u5426\u5fc5\u987b \u63cf\u8ff0 appkey String \u5fc5\u987b appkey\uff0c\u7531\u53c8\u62cd\u4e91\u63d0\u4f9b\uff0c\u53ef\u4ee5\u767b\u5f55\u624b\u673a\u6d41\u91cf\u540e\u53f0\u67e5\u770b appsecret String \u5fc5\u987b appsecret\uff0c\u7531\u53c8\u62cd\u4e91\u63d0\u4f9b\uff0c\u53ef\u4ee5\u767b\u5f55\u624b\u673a\u6d41\u91cf\u540e\u53f0\u67e5\u770b \u8bf7\u6c42\u793a\u4f8b curl https://ptp-api.upyun.com/refreshToken -H \"Content-Type: application/json\" -d \"{\\\"appkey\\\": \\\"your_appkey_put_here\\\", \\\"appsecret\\\": \\\"your_appsecret_put_here\\\"}\" \u54cd\u5e94\u53c2\u6570 \u540d\u79f0 \u7c7b\u578b \u793a\u4f8b\u503c \u63cf\u8ff0 code String 200 \u54cd\u5e94\u72b6\u6001\u7801\uff0c200 \u8868\u793a\u6b63\u5e38\uff0c\u5176\u4ed6\u8be6\u89c1\u9519\u8bef\u7801 token String XsdOpxqudzMnw \u7528\u4e8e\u7b7e\u540d\u8ba1\u7b97\u9700\u8981\u7684 token\uff0ctoken \u9ed8\u8ba4\u6709\u6548\u671f\u4e3a 24 \u5c0f\u65f6\uff0c\u4ec5\u6700\u540e\u4e00\u6b21\u8bf7\u6c42\u63a5\u53e3\u751f\u6210\u7684 token \u624d\u6709\u6548 info String \u8bf7\u6c42\u6210\u529f \u54cd\u5e94\u793a\u4f8b { \"code\": \"200\", \"token\": \"XsdOpxqudzMnw\", \"info\": \"\u8bf7\u6c42\u6210\u529f\" } 2.\u521b\u5efa\u8ba2\u5355 \u63a5\u53e3\u8bf4\u660e \u521b\u5efa\u624b\u673a\u6d41\u91cf\u5145\u503c\u8ba2\u5355 \u8bf7\u6c42\u5730\u5740 POST /chargeOrder \u8bf7\u6c42\u53c2\u6570 \u540d\u79f0 \u7c7b\u578b \u662f\u5426\u5fc5\u987b \u63cf\u8ff0 appkey String \u5fc5\u987b E1KRHcKd3qoef8V1 mobile String \u5fc5\u987b \u88ab\u5145\u503c\u624b\u673a\u53f7\u8fdb\u884c AES \u5bf9\u79f0\u52a0\u5bc6\u518d base64 \u8f6c\u7801\u540e\u7684\u503c\uff0c\u4e00\u6b21\u53ea\u5141\u8bb8\u4e00\u4e2a\u624b\u673a\u53f7\u7801\uff0c\u89c1 \u793a\u4f8b\u7a0b\u5e8f prodcode String \u5fc5\u987b \u6d41\u91cf\u5305\u7684\u4ea7\u54c1\u7f16\u53f7 custno String \u5fc5\u987b \u5ba2\u6237\u81ea\u5b9a\u4e49\u7684\u8ba2\u5355\u53f7\uff0c\u7528\u4e8e\u5ba2\u6237\u5185\u90e8\u8bb0\u5f55\u8ba2\u5355\uff0c\u957f\u5ea6\u5fc5\u987b\u5c0f\u4e8e30\uff0c \u4e14\u6bcf\u6b21\u5145\u503c\uff0c\u7f16\u53f7\u4e0d\u91cd\u590d sign String \u5fc5\u987b \u6839\u636e token \u548c\u8bf7\u6c42\u53c2\u6570\u8ba1\u7b97\u7684\u7b7e\u540d\uff0c\u7b7e\u540d\u89c4\u5219\u89c1\u7b97\u6cd5\u8bf4\u660e\u90e8\u5206 ( \u793a\u4f8b\u7a0b\u5e8f\u4e0b\u8f7d ) prodtime Integer \u9009\u586b \u6d41\u91cf\u65f6\u6bb5\uff0c 1 \u8868\u793a\u5168\u65f6\u6bb5\u6d41\u91cf\uff0c 0 \u8868\u793a\u95f2\u65f6\u6d41\u91cf\uff0c\u9ed8\u8ba4\u4e3a\u5168\u65f6\u6bb5\u6d41\u91cf prodstandard Integer \u9009\u586b \u7528\u4e8e\u533a\u5206\u7f51\u7edc\u7c7b\u578b\uff0c\u53ef\u9009\u503c\u5206\u522b\u4e3a\uff1a 7 \u8868\u793a\u5168\u90e8\u7f51\u7edc\u7c7b\u578b\uff0c 3 \u8868\u793a 2g \u548c 3g \u4e24\u79cd\u7f51\u7edc\u7c7b\u578b\uff0c 1 \u8868\u793a 2g \u7f51\u7edc\u7c7b\u578b\uff0c\u9ed8\u8ba4\u503c\u4e3a 7 \u54cd\u5e94\u53c2\u6570 \u540d\u79f0 \u7c7b\u578b \u793a\u4f8b\u503c \u63cf\u8ff0 code String 200 \u54cd\u5e94\u72b6\u6001\u7801\uff0c200 \u8868\u793a\u521b\u5efa\u8ba2\u5355\u6210\u529f\uff1b410 511 \u5fc5\u987b\u518d\u6b21\u67e5\u8be2\u8ba2\u5355\u786e\u8ba4\uff1b\u5176\u4ed6\u9519\u8bef\u7801\u89c6\u4e3a\u521b\u5efa\u5931\u8d25\uff1b\u7cfb\u7edf\u54cd\u5e94\u8d85\u65f6\u7b49\u5176\u4ed6\u975e\u6b63\u5e38\u54cd\u5e94\uff0c\u9700\u8981\u8c03\u7528\u67e5\u8be2\u8ba2\u5355\u63a5\u53e3\u786e\u8ba4 custno String 20150238829 \u5ba2\u6237\u8ba2\u5355\u53f7\uff0c\u548c\u8bf7\u6c42\u503c\u4e00\u81f4 orderno String 2016298237019 \u53c8\u62cd\u4e91\u5e73\u53f0\u7684\u8ba2\u5355\u53f7 info String \u5145\u503c\u6210\u529f \u7b97\u6cd5\u8bf4\u660e \u8ba1\u7b97\u624b\u673a\u53f7\u7684 AES \u5bf9\u79f0\u52a0\u5bc6\uff0c\u518d base64 \u8f6c\u7801\u540e\u7684\u503c \u5c06\u63a5\u53e3\u8bf7\u6c42\u53c2\u6570\u6309\u7167\u8bf7\u6c42\u53c2\u6570\u540d\u79f0\u6b63\u5e8f\u6392\u5e8f; \u5c06\u8bf7\u6c42\u53c2\u6570\u548c\u8bf7\u6c42\u53c2\u6570\u503c\u62fc\u63a5\u6210\u5b57\u7b26\u4e32\uff1a appkey${YourAppKey}custno${YourCustno}mobile${YourAesEncodedMobile}prodcode${YourPrdcode}token${YourToken (\u5c06\u5b57\u7b26\u4e32\u4e2d\u7684\u53d8\u91cf ${...} \u90e8\u5206\u66ff\u6362\u6210\u5b9e\u9645\u503c\u5373\u53ef\uff0c) \u5bf9\u62fc\u63a5\u540e\u7684\u5b57\u7b26\u4e32\u8fdb\u884cSHA1\u6307\u7eb9\u8fd0\u7b97\uff0c\u5f97\u5230\u7684 16 \u8fdb\u5236\u5b57\u7b26\u4e32 b5cd94c99e3e576f5e2ca0e66ee3da670cb1c62b \u4fbf\u662f sign \u503c \u793a\u4f8b \u53c2\u6570\u62fc\u63a5\u540e\u7684\u5b57\u7b26\u4e32\u4e3a\uff1a appkey3P83lWwkoV15yZVTcustno20151123114702mobile8mBGFNfe1o/rzAx2Ost2IQ==prodcodeCMCC_10tokenVqHAab3JYXBDkCoO \uff08\u6ce8\u610f\u624b\u673a\u53f7\u662f aes \u52a0\u5bc6\u518d base64 \u7f16\u7801\u540e\u7684\uff09\uff0c\u8fdb\u884c SHA1 \u8fd0\u7b97\u5f97\u5230\u7684 sign \u503c\u4e3a\uff1a 8b05f52e605c7ab89a895eb730cacab4cbeabd4c \u54cd\u5e94\u793a\u4f8b { \"code\": \"200\", \"custno\": \"20150238829\", \"orderno\": \"2016298237019\", \"info\": \"\u5145\u503c\u6210\u529f\" } 3.\u67e5\u8be2\u8ba2\u5355\u72b6\u6001 \u63a5\u53e3\u8bf4\u660e \u67e5\u8be2\u5145\u503c\u8ba2\u5355\u5f53\u524d\u7684\u72b6\u6001\uff0c\u7528\u4e8e\u786e\u8ba4\u662f\u5426\u5145\u503c\u6210\u529f \u8bf7\u6c42\u5730\u5740 POST /seekOrder \u8bf7\u6c42\u53c2\u6570 \u540d\u79f0 \u7c7b\u578b \u662f\u5426\u5fc5\u987b \u63cf\u8ff0 custno String \u5fc5\u987b \u5ba2\u6237\u63d0\u4ea4\u7684\u8ba2\u5355\u53f7 appkey String \u5fc5\u987b \u9274\u6743\u8d26\u53f7 sign String \u5fc5\u987b \u7b7e\u540d\uff0c\u7b7e\u540d\u89c4\u5219\u4e3a\uff1a\u5c06 appkey${YourAppKey}custno${YourCustno}requesttime${YourReqestTime}TOKEN${YourToken} \u4e2d ${...} \u53d8\u91cf\u90e8\u5206\u66ff\u6362\u4e3a\u5b9e\u9645\u503c\uff0c\u518d\u8fdb\u884c SHA1 \u8fd0\u7b97\u3002\u5982\u679c\u8bf7\u6c42\u53c2\u6570\u4e0d\u5305\u542b requesttime \uff0c\u8ba1\u7b97\u7b7e\u540d\u5219\u4e0d\u9700\u8981\u8be5\u503c requesttime String \u5426 \u67e5\u8be2\u7684\u65f6\u95f4\u70b9\uff0c\u8be5\u53c2\u6570\u4e3a\u53ef\u9009\u53c2\u6570\uff0c\u683c\u5f0f\u4e3a\"YYYY-MM-DD HH:mm:ss\"\uff0c\u5f53\u4f20\u9012\u8be5\u53c2\u6570\u65f6\uff0c\u6211\u4eec\u4f1a\u5728\u7ed9\u5b9a\u65f6\u95f4\u70b9\u7684\u524d\u540e 1 \u4e2a\u5c0f\u65f6\u8303\u56f4\u5185\u67e5\u8be2\uff1b\u5982\u679c\u672a\u4f20\u8be5\u53c2\u6570\uff0c\u6211\u4eec\u5c06\u5728\u6700\u8fd1\u4e00\u5468\u7684\u8ba2\u5355\u4e2d\u67e5\u8be2 \u54cd\u5e94\u53c2\u6570 \u540d\u79f0 \u7c7b\u578b \u793a\u4f8b\u503c \u63cf\u8ff0 code String 200 \u54cd\u5e94\u72b6\u6001\u7801\uff0c200 \u8868\u793a\u5145\u503c\u6210\u529f\uff1b430 516 530 \u8868\u793a\u5145\u503c\u5931\u8d25\uff1b511 \u5fc5\u987b\u4eba\u5de5\u518d\u6b21\u786e\u8ba4\uff1b\u5176\u4ed6\u9519\u8bef\u7801\u89c6\u4e3a\u5145\u503c\u4e2d custno String 20150238829 \u5ba2\u6237\u81ea\u5b9a\u4e49\u8ba2\u5355\u53f7 info String \u6210\u529f \u54cd\u5e94\u793a\u4f8b { \"code\": \"200\", \"custno\": \"2015823871239\", \"info\": \"\u5145\u503c\u6210\u529f\" } 4.\u67e5\u8be2\u4f59\u989d \u8bf7\u6c42\u5730\u5740 POST /getMyBalance \u8bf7\u6c42\u53c2\u6570 \u540d\u79f0 \u7c7b\u578b \u662f\u5426\u5fc5\u987b \u63cf\u8ff0 appkey String \u5fc5\u987b sign String \u5fc5\u987b \u7b7e\u540d\uff0c\u7b97\u6cd5\u4e3a appkey${YourAppKey}TOKEN${Yourtoken} \u4e2d ${...} \u53d8\u91cf\u90e8\u5206\u66ff\u6362\u5b9e\u9645\u503c\uff0c\u518d\u8fdb\u884c SHA1 \u8fd0\u7b97\u5f97\u5230\u7684\u5b57\u7b26\u4e32\u4fbf\u4e3a sign \u503c \u54cd\u5e94\u53c2\u6570 \u540d\u79f0 \u7c7b\u578b \u793a\u4f8b\u503c \u63cf\u8ff0 code String 200 \u54cd\u5e94\u72b6\u6001\u7801 balance Float 100.00 \u8d26\u6237\u4f59\u989d\uff08\u5305\u542b\u51bb\u7ed3\u91d1\u989d\uff09 freeze Float 20.00 \u51bb\u7ed3\u91d1\u989d\uff0c\u6b63\u5728\u4ea4\u6613\u7684\u8ba2\u5355\u91d1\u989d availBalance Float 80.00 \u5b9e\u9645\u53ef\u7528\u4f59\u989d\uff08\u4e0d\u5305\u542b\u51bb\u7ed3\u91d1\u989d\uff09 \u54cd\u5e94\u793a\u4f8b { \"code\": \"200\", \"balance\": 100, \"freeze\": 20, \"availBalance\": 80 } \u5145\u503c\u56de\u8c03\u8bf4\u660e \u00b6 \u5ba2\u6237\u9700\u8981\u5728\u53c8\u62cd\u4e91\u624b\u673a\u6d41\u91cf\u540e\u53f0\u586b\u5199\u5145\u503c\u56de\u8c03\u5730\u5740\uff0c\u5e76\u6ce8\u610f\u9632\u706b\u5899\u914d\u7f6e\uff0c\u4e0d\u80fd\u5c4f\u853d\u53c8\u62cd\u4e91\u670d\u52a1\u5668\u5730\u5740\u3002\u914d\u7f6e\u6210\u529f\u540e\uff0c\u6bcf\u6b21\u5145\u503c\u540e\uff0c\u53c8\u62cd\u4e91\u4f1a\u5411\u8be5\u5730\u5740\u53d1\u9001 POST \u8bf7\u6c42\uff0c\u8bf7\u6c42\u7684\u6570\u636e\u683c\u5f0f\u4e3a application/json \u8bf7\u6c42\u53c2\u6570 \u540d\u79f0 \u7c7b\u578b \u662f\u5426\u5fc5\u987b \u63cf\u8ff0 code String \u5fc5\u987b \u54cd\u5e94\u72b6\u6001\u7801\uff0c200 \u8868\u793a\u5145\u503c\u6210\u529f\uff1b430,530 \u8868\u793a\u5145\u503c\u5931\u8d25\uff0c\u5176\u4ed6\u9519\u8bef\u7801\u6216\u5f02\u5e38\u4fe1\u606f\u8868\u793a\u5145\u503c\u4e2d orderno String \u5fc5\u987b \u53c8\u62cd\u4e91\u5e73\u53f0\u7684\u8ba2\u5355\u53f7 custno String \u5fc5\u987b \u5ba2\u6237\u81ea\u5b9a\u4e49\u8ba2\u5355\u53f7 info String \u5fc5\u987b \u63cf\u8ff0\u4fe1\u606f sign String \u5fc5\u987b \u7b7e\u540d\uff0c\u5ba2\u6237\u53ef\u4ee5\u4f7f\u7528\u8be5\u503c\u6821\u9a8c\u8bf7\u6c42\u662f\u5426\u5408\u6cd5\uff0c\u5f3a\u70c8\u5efa\u8bae\u63a5\u6536\u5145\u503c\u56de\u8c03\u65f6\u8fdb\u884c\u6821\u9a8c\u3002\u7b7e\u540d\u89c4\u5219\u4e3a\uff1a\u5c06 code${Code}custno${YourCustno}info${Info}orderno${OrderNo}token${YourToken} \u5b57\u7b26\u4e32\u4e2d\u7684\u53d8\u91cf\u90e8\u5206 ${...} \u66ff\u6362\u4e3a\u8bf7\u6c42\u53c2\u6570\u4e2d\u7684\u503c\uff0c\u518d\u5bf9\u5f97\u5230\u7684\u5b57\u7b26\u4e32\u8fdb\u884c SHA1 \u7b7e\u540d \u5ba2\u6237\u63a5\u53d7\u8bf7\u6c42\u6210\u529f\u540e\uff0c\u9700\u8981\u54cd\u5e94\u5982\u4e0b json \u503c\uff1a { \"info\": \"1\" } \u5426\u5219\uff0c\u53c8\u62cd\u4e91\u5c06\u9694 1 \u5206\u949f\u518d\u91cd\u8bd5\u4e00\u6b21\uff0c\u4e00\u5171\u56de\u8c03 3 \u6b21 \u9519\u8bef\u7801\u8bf4\u660e \u00b6 \u6ce8\uff1a\u9700\u8981\u7559\u610f\u6bcf\u4e2a\u63a5\u53e3\u54cd\u5e94\u53c2\u6570\u8bf4\u660e\u4e2d\u7684 code \u5904\u7406\u65b9\u5f0f \u9519\u8bef\u7801 \u8bf4\u660e \u9519\u8bef\u7801 \u8bf4\u660e 200 \u6210\u529f 201 \u5145\u503c\u4e2d 410 \u8fd0\u8425\u5546\u8fd4\u56de\u8d85\u65f6 422 \u7528\u6237\u72b6\u6001\u5f02\u5e38 430 \u8ba2\u8d2d/\u5145\u503c\u5931\u8d25 502 sign\u7b7e\u540d\u9519\u8bef 503 \u4f59\u989d\u4e0d\u8db3 504 \u975e\u6cd5\u7684\u56de\u8c03\u5730\u5740 505 \u624b\u673a\u53f7\u4e0d\u5408\u6cd5 506 \u7528\u6237\u4e0d\u80fd\u8ba2\u8d2d\u8be5\u5957\u9910 507 \u63a5\u53e3\u53c2\u6570\u5f02\u5e38 508 \u4ee4\u724c\u9274\u6743\u4e0d\u901a\u8fc7 509 \u5ba2\u6237\u672a\u8ba4\u8bc1\u6388\u6743 510 \u67e5\u8be2\u592a\u9891\u7e41 511 \u5185\u90e8\u5f02\u5e38\uff0c\u6b64\u65f6\u5bf9\u8ba2\u5355\u7684\u67e5\u8be2\u3001\u5145\u503c\u7b49\u64cd\u4f5c\u7b49\u9700\u8981\u8054\u7cfb\u5ba2\u6237\u518d\u6b21\u786e\u8ba4 512 \u8ba2\u5355\u53f7\u91cd\u590d 513 \u8fd0\u8425\u5546\u8bf7\u6c42\u8d85\u65f6 514 ip\u4e0d\u5728\u767d\u540d\u5355 515 \u8be5\u5ba2\u6237\u4e0d\u5b58\u5728 516 \u4e0d\u5b58\u5728\u6b64\u8ba2\u5355 517 \u65e0\u6cd5\u8bc6\u522b\u7684\u624b\u673a\u53f7 519 \u5f53\u524dappkey\u6216appsecret\u9519\u8bef 520 \u6d3b\u52a8\u4e0d\u5b58\u5728 526 \u5408\u540c\u4e0d\u5728\u6709\u6548\u671f 527 token\u4e0d\u5728\u6709\u6548\u671f 530 \u8ba2\u8d2d/\u5145\u503c\u5931\u8d25 531 \u7b7e\u540d\u4e0d\u901a\u8fc7 532 \u8ba2\u5355\u53f7\u957f\u5ea6\u8d85\u8fc730 533 aes\u52a0\u5bc6\u6709\u8bef","title":"\u79fb\u52a8\u6d41\u91cf"},{"location":"mobile-stats/#_1","text":"\u53c8\u62cd\u4e91\u624b\u673a\u6d41\u91cf\u8425\u9500\u5e73\u53f0\uff0c\u6574\u5408\u79fb\u52a8\u3001\u7535\u4fe1\u3001\u8054\u901a\u4e09\u5927\u8fd0\u8425\u5546\u6d41\u91cf\u8d44\u6e90\uff0c\u5c06\u5f3a\u5927\u7684\u6d41\u91cf\u8425\u9500\u670d\u52a1\uff0c\u901a\u8fc7\u63a5\u53e3\u7b49\u5f62\u5f0f\u63d0\u4f9b\u7ed9\u5546\u5bb6\u5408\u4f5c\u4f19\u4f34\uff0c\u5e2e\u52a9\u5546\u5bb6\u5f00\u5c55\u54c1\u724c\u5ba3\u4f20\u3001APP/\u6e38\u620f/\u5fae\u4fe1\u516c\u4f17\u53f7/\u7f51\u7ad9\u7684\u62c9\u65b0\u4e0e\u4fc3\u6d3b\u7b49\u591a\u79cd\u8425\u9500\u6d3b\u52a8\u3002 \u901a\u8fc7\u63a5\u5165\u53c8\u62cd\u4e91\u6d41\u91cf\u8425\u9500\u5e73\u53f0\uff0c\u5546\u5bb6\u53ef\u4ee5\u83b7\u5f97\u66f4\u591a\u6d41\u91cf\u3001\u7528\u6237\u548c\u6536\u76ca\uff0c\u800c\u5546\u5bb6\u63d0\u4f9b\u7684\u6d3b\u52a8\u4e5f\u8ba9\u7528\u6237\u83b7\u5f97\u4e86\u4e09\u7f51\u901a\u7528\u6d41\u91cf\u548c\u66f4\u52a0\u4e30\u5bcc\u7684\u6d3b\u52a8\u4f53\u9a8c\u3002","title":"\u5e73\u53f0\u6982\u8ff0"},{"location":"mobile-stats/#_2","text":"1.\u4e09\u7f51\u901a\u7528\uff0c\u6210\u672c\u4f18\u52bf\uff0c\u8986\u76d6\u9762\u5e7f 2.\u5feb\u901f\u5bf9\u63a5\u3001\u5168\u6d41\u6c34\u3001\u6613\u5bf9\u8d26\u3001\u7cbe\u7ed3\u7b97","title":"\u4ea7\u54c1\u7279\u70b9"},{"location":"mobile-stats/#_3","text":"1.APP \u4e0b\u8f7d\u8d60\u6d41\u91cf 2.\u5fae\u4fe1\u516c\u4f17\u53f7\u589e\u7c89 3.\u5956\u54c1\u793c\u5238 4.\u6d41\u91cf\u52a0\u6cb9\u7ad9 5.\u79ef\u5206\u5151\u6362\u6d41\u91cf 6.\u6d3b\u52a8\u6bd4\u8d5b\u9001\u6d41\u91cf 7.\u6d41\u91cf\u7ea2\u5305 8.\u5458\u5de5\u798f\u5229","title":"\u5e94\u7528\u573a\u666f"},{"location":"mobile-stats/#_4","text":"1.\u8bf7\u8054\u7cfb\u5546\u52a1\uff08Tel:0571-89775132\uff09\u786e\u5b9a\u60a8\u7684\u5e94\u7528\u573a\u666f\u9700\u6c42\uff0c\u83b7\u53d6\u5bf9\u5e94\u6d41\u91cf\u62a5\u4ef7 2.\u6ce8\u518c\u53c8\u62cd\u4e91\u8d26\u53f7\uff0c\u5982\u679c\u60a8\u5df2\u6709\u8d26\u53f7\uff0c\u8bf7\u767b\u5f55 \u53c8\u62cd\u4e91\u63a7\u5236\u53f0 \u5b8c\u6210\u4f01\u4e1a/\u4e2a\u4eba\u8ba4\u8bc1 3.\u524d\u5f80\u5bfc\u822a > \u5de5\u5177\u7bb1 > \u624b\u673a\u6d41\u91cf\u8425\u9500\u9875\u9762\uff0c\u5f00\u901a\u8be5\u670d\u52a1\uff08\u5f00\u901a\u90ae\u4ef6\u4e2d\u5305\u542b\u63a5\u53e3\u5730\u5740\uff09 4.\u901a\u8fc7\u6d41\u91cf\u8425\u9500\u63a7\u5236\u53f0\u914d\u7f6e\u56de\u8c03\u5730\u5740 5.\u51fa\u53e3 IP \u51fa\u4e8e\u5b89\u5168\u8003\u8651\u6682\u4e0d\u652f\u6301\u63a7\u5236\u53f0\u914d\u7f6e\uff0c\u53ef\u8054\u7cfb\u6211\u53f8\u5546\u52a1\u5b8c\u6210\u751f\u4ea7\u73af\u5883\u8054\u8c03 \u4e1a\u52a1\u4ea4\u4e92\u6d41\u7a0b:","title":"\u5bf9\u63a5\u8bf4\u660e"},{"location":"mobile-stats/#_5","text":"\u53c8\u62cd\u4e91\u624b\u673a\u6d41\u91cf\u5e73\u53f0\u63a5\u53e3\u5165\u53e3\u5730\u5740\u7edf\u4e00\u4e3a\uff1a https://ptp-api.upyun.com \uff0c\u8bf7\u6c42\u63a5\u53e3\u65f6\uff0c\u7edf\u4e00\u4f7f\u7528 POST \u65b9\u6cd5\uff0c \u6587\u6863\u7c7b\u578b\u7edf\u4e00\u4e3a Content-Type: application/json \uff0c\u4f7f\u7528 JSON \u683c\u5f0f\u53d1\u9001\u8bf7\u6c42\uff0c \u54cd\u5e94\u7ed3\u679c\u4e5f\u4f1a\u4ee5 JSON \u683c\u5f0f\u8fd4\u56de\uff1b\u6587\u6863\u4e2d\u63a5\u53e3\u7684\u8bf7\u6c42\u5730\u5740\u53ea\u5305\u542b\u8def\u5f84\u90e8\u5206\uff0c\u5b9e\u9645\u8bf7\u6c42\u65f6\uff0c\u9700\u8981\u52a0\u4e0a\u7edf\u4e00\u5165\u53e3\u5730\u5740 https://ptp-api.upyun.com \u3002\u6587\u6863\u4e2d\u63cf\u8ff0\u7b7e\u540d\u8ba1\u7b97\u65f6\uff0c\u90fd\u662f\u5148\u6b63\u5e8f\u6392\u5e8f\uff08\u7ed9\u51fa\u7684\u793a\u4f8b\u5b57\u7b26\u4e32\u5df2\u7ecf\u662f\u6392\u5e8f\u540e\u7684\u7ed3\u679c\uff09\uff0c\u518d\u505a SHA1 \u8fd0\u7b97\u3002 \u672c\u6587\u6863\u4e00\u5171\u63cf\u8ff0\u4e86\u56db\u4e2a\u63a5\u53e3\u548c\u4e00\u4e2a\u5145\u503c\u56de\u8c03\u8bf4\u660e\uff0c\u63a5\u53e3\u5982\u4e0b\uff1a \u83b7\u53d6\u7b7e\u540d POST /refreshToken \u63d0\u4ea4\u8ba2\u5355 POST /chargeOrder \u67e5\u8be2\u8ba2\u5355\u72b6\u6001 POST /seekOrder \u67e5\u8be2\u4f59\u989d POST /getMyBalance \u9488\u5bf9\u4ee5\u4e0a\u63a5\u53e3\uff0c\u76ee\u524d\u63d0\u4f9b\u4e86 php \u7248\u672c sdk\uff0c\u7528\u4e8e\u63d0\u4f9b\u63a5\u53e3\u8c03\u7528\u793a\u4f8b\uff0c \u5404\u4f01\u4e1a\u7528\u6237\u53ef\u4ee5\u6839\u636e\u81ea\u5df1\u7684\u9700\u8981\u8fdb\u884c\u5c01\u88c5\uff0c\u5b8c\u5584\u9519\u8bef\u5904\u7406\uff0c\u4e0b\u8f7d\u5730\u5740\uff1a \u70b9\u51fb\u4e0b\u8f7d \u3002","title":"\u63a5\u53e3\u6587\u6863"},{"location":"mobile-stats/#_6","text":"1.\u83b7\u53d6\u8ba1\u7b97\u7b7e\u540d\u9700\u8981\u7684 token \u63a5\u53e3\u8bf4\u660e \u8be5\u63a5\u53e3\u7528\u4e8e\u83b7\u53d6 token\uff0c\u8c03\u7528\u5176\u4ed6\u63a5\u53e3\u65f6\uff0c\u9700\u8981\u4f7f\u7528 token \u8ba1\u7b97\u7b7e\u540d\u3002\u7531\u4e8e token \u9700\u8981\u5728\u540e\u7eed\u7684\u63a5\u53e3\u8bf7\u6c42\u4e2d\uff0c\u5168\u5c40\u5171\u4eab\uff0c\u6240\u4ee5\u5728\u5e76\u53d1\u8bf7\u6c42\u7684\u573a\u666f\u4e0b\uff0c\u5efa\u8bae\u5c06 token \u4fdd\u5b58\u5728 Redis/Mysql \u7b49\u7b2c\u4e09\u65b9\u5b58\u50a8\u4e2d \u8bf7\u6c42\u5730\u5740 POST /refreshToken \u8bf7\u6c42\u53c2\u6570 \u540d\u79f0 \u7c7b\u578b \u662f\u5426\u5fc5\u987b \u63cf\u8ff0 appkey String \u5fc5\u987b appkey\uff0c\u7531\u53c8\u62cd\u4e91\u63d0\u4f9b\uff0c\u53ef\u4ee5\u767b\u5f55\u624b\u673a\u6d41\u91cf\u540e\u53f0\u67e5\u770b appsecret String \u5fc5\u987b appsecret\uff0c\u7531\u53c8\u62cd\u4e91\u63d0\u4f9b\uff0c\u53ef\u4ee5\u767b\u5f55\u624b\u673a\u6d41\u91cf\u540e\u53f0\u67e5\u770b \u8bf7\u6c42\u793a\u4f8b curl https://ptp-api.upyun.com/refreshToken -H \"Content-Type: application/json\" -d \"{\\\"appkey\\\": \\\"your_appkey_put_here\\\", \\\"appsecret\\\": \\\"your_appsecret_put_here\\\"}\" \u54cd\u5e94\u53c2\u6570 \u540d\u79f0 \u7c7b\u578b \u793a\u4f8b\u503c \u63cf\u8ff0 code String 200 \u54cd\u5e94\u72b6\u6001\u7801\uff0c200 \u8868\u793a\u6b63\u5e38\uff0c\u5176\u4ed6\u8be6\u89c1\u9519\u8bef\u7801 token String XsdOpxqudzMnw \u7528\u4e8e\u7b7e\u540d\u8ba1\u7b97\u9700\u8981\u7684 token\uff0ctoken \u9ed8\u8ba4\u6709\u6548\u671f\u4e3a 24 \u5c0f\u65f6\uff0c\u4ec5\u6700\u540e\u4e00\u6b21\u8bf7\u6c42\u63a5\u53e3\u751f\u6210\u7684 token \u624d\u6709\u6548 info String \u8bf7\u6c42\u6210\u529f \u54cd\u5e94\u793a\u4f8b { \"code\": \"200\", \"token\": \"XsdOpxqudzMnw\", \"info\": \"\u8bf7\u6c42\u6210\u529f\" } 2.\u521b\u5efa\u8ba2\u5355 \u63a5\u53e3\u8bf4\u660e \u521b\u5efa\u624b\u673a\u6d41\u91cf\u5145\u503c\u8ba2\u5355 \u8bf7\u6c42\u5730\u5740 POST /chargeOrder \u8bf7\u6c42\u53c2\u6570 \u540d\u79f0 \u7c7b\u578b \u662f\u5426\u5fc5\u987b \u63cf\u8ff0 appkey String \u5fc5\u987b E1KRHcKd3qoef8V1 mobile String \u5fc5\u987b \u88ab\u5145\u503c\u624b\u673a\u53f7\u8fdb\u884c AES \u5bf9\u79f0\u52a0\u5bc6\u518d base64 \u8f6c\u7801\u540e\u7684\u503c\uff0c\u4e00\u6b21\u53ea\u5141\u8bb8\u4e00\u4e2a\u624b\u673a\u53f7\u7801\uff0c\u89c1 \u793a\u4f8b\u7a0b\u5e8f prodcode String \u5fc5\u987b \u6d41\u91cf\u5305\u7684\u4ea7\u54c1\u7f16\u53f7 custno String \u5fc5\u987b \u5ba2\u6237\u81ea\u5b9a\u4e49\u7684\u8ba2\u5355\u53f7\uff0c\u7528\u4e8e\u5ba2\u6237\u5185\u90e8\u8bb0\u5f55\u8ba2\u5355\uff0c\u957f\u5ea6\u5fc5\u987b\u5c0f\u4e8e30\uff0c \u4e14\u6bcf\u6b21\u5145\u503c\uff0c\u7f16\u53f7\u4e0d\u91cd\u590d sign String \u5fc5\u987b \u6839\u636e token \u548c\u8bf7\u6c42\u53c2\u6570\u8ba1\u7b97\u7684\u7b7e\u540d\uff0c\u7b7e\u540d\u89c4\u5219\u89c1\u7b97\u6cd5\u8bf4\u660e\u90e8\u5206 ( \u793a\u4f8b\u7a0b\u5e8f\u4e0b\u8f7d ) prodtime Integer \u9009\u586b \u6d41\u91cf\u65f6\u6bb5\uff0c 1 \u8868\u793a\u5168\u65f6\u6bb5\u6d41\u91cf\uff0c 0 \u8868\u793a\u95f2\u65f6\u6d41\u91cf\uff0c\u9ed8\u8ba4\u4e3a\u5168\u65f6\u6bb5\u6d41\u91cf prodstandard Integer \u9009\u586b \u7528\u4e8e\u533a\u5206\u7f51\u7edc\u7c7b\u578b\uff0c\u53ef\u9009\u503c\u5206\u522b\u4e3a\uff1a 7 \u8868\u793a\u5168\u90e8\u7f51\u7edc\u7c7b\u578b\uff0c 3 \u8868\u793a 2g \u548c 3g \u4e24\u79cd\u7f51\u7edc\u7c7b\u578b\uff0c 1 \u8868\u793a 2g \u7f51\u7edc\u7c7b\u578b\uff0c\u9ed8\u8ba4\u503c\u4e3a 7 \u54cd\u5e94\u53c2\u6570 \u540d\u79f0 \u7c7b\u578b \u793a\u4f8b\u503c \u63cf\u8ff0 code String 200 \u54cd\u5e94\u72b6\u6001\u7801\uff0c200 \u8868\u793a\u521b\u5efa\u8ba2\u5355\u6210\u529f\uff1b410 511 \u5fc5\u987b\u518d\u6b21\u67e5\u8be2\u8ba2\u5355\u786e\u8ba4\uff1b\u5176\u4ed6\u9519\u8bef\u7801\u89c6\u4e3a\u521b\u5efa\u5931\u8d25\uff1b\u7cfb\u7edf\u54cd\u5e94\u8d85\u65f6\u7b49\u5176\u4ed6\u975e\u6b63\u5e38\u54cd\u5e94\uff0c\u9700\u8981\u8c03\u7528\u67e5\u8be2\u8ba2\u5355\u63a5\u53e3\u786e\u8ba4 custno String 20150238829 \u5ba2\u6237\u8ba2\u5355\u53f7\uff0c\u548c\u8bf7\u6c42\u503c\u4e00\u81f4 orderno String 2016298237019 \u53c8\u62cd\u4e91\u5e73\u53f0\u7684\u8ba2\u5355\u53f7 info String \u5145\u503c\u6210\u529f \u7b97\u6cd5\u8bf4\u660e \u8ba1\u7b97\u624b\u673a\u53f7\u7684 AES \u5bf9\u79f0\u52a0\u5bc6\uff0c\u518d base64 \u8f6c\u7801\u540e\u7684\u503c \u5c06\u63a5\u53e3\u8bf7\u6c42\u53c2\u6570\u6309\u7167\u8bf7\u6c42\u53c2\u6570\u540d\u79f0\u6b63\u5e8f\u6392\u5e8f; \u5c06\u8bf7\u6c42\u53c2\u6570\u548c\u8bf7\u6c42\u53c2\u6570\u503c\u62fc\u63a5\u6210\u5b57\u7b26\u4e32\uff1a appkey${YourAppKey}custno${YourCustno}mobile${YourAesEncodedMobile}prodcode${YourPrdcode}token${YourToken (\u5c06\u5b57\u7b26\u4e32\u4e2d\u7684\u53d8\u91cf ${...} \u90e8\u5206\u66ff\u6362\u6210\u5b9e\u9645\u503c\u5373\u53ef\uff0c) \u5bf9\u62fc\u63a5\u540e\u7684\u5b57\u7b26\u4e32\u8fdb\u884cSHA1\u6307\u7eb9\u8fd0\u7b97\uff0c\u5f97\u5230\u7684 16 \u8fdb\u5236\u5b57\u7b26\u4e32 b5cd94c99e3e576f5e2ca0e66ee3da670cb1c62b \u4fbf\u662f sign \u503c \u793a\u4f8b \u53c2\u6570\u62fc\u63a5\u540e\u7684\u5b57\u7b26\u4e32\u4e3a\uff1a appkey3P83lWwkoV15yZVTcustno20151123114702mobile8mBGFNfe1o/rzAx2Ost2IQ==prodcodeCMCC_10tokenVqHAab3JYXBDkCoO \uff08\u6ce8\u610f\u624b\u673a\u53f7\u662f aes \u52a0\u5bc6\u518d base64 \u7f16\u7801\u540e\u7684\uff09\uff0c\u8fdb\u884c SHA1 \u8fd0\u7b97\u5f97\u5230\u7684 sign \u503c\u4e3a\uff1a 8b05f52e605c7ab89a895eb730cacab4cbeabd4c \u54cd\u5e94\u793a\u4f8b { \"code\": \"200\", \"custno\": \"20150238829\", \"orderno\": \"2016298237019\", \"info\": \"\u5145\u503c\u6210\u529f\" } 3.\u67e5\u8be2\u8ba2\u5355\u72b6\u6001 \u63a5\u53e3\u8bf4\u660e \u67e5\u8be2\u5145\u503c\u8ba2\u5355\u5f53\u524d\u7684\u72b6\u6001\uff0c\u7528\u4e8e\u786e\u8ba4\u662f\u5426\u5145\u503c\u6210\u529f \u8bf7\u6c42\u5730\u5740 POST /seekOrder \u8bf7\u6c42\u53c2\u6570 \u540d\u79f0 \u7c7b\u578b \u662f\u5426\u5fc5\u987b \u63cf\u8ff0 custno String \u5fc5\u987b \u5ba2\u6237\u63d0\u4ea4\u7684\u8ba2\u5355\u53f7 appkey String \u5fc5\u987b \u9274\u6743\u8d26\u53f7 sign String \u5fc5\u987b \u7b7e\u540d\uff0c\u7b7e\u540d\u89c4\u5219\u4e3a\uff1a\u5c06 appkey${YourAppKey}custno${YourCustno}requesttime${YourReqestTime}TOKEN${YourToken} \u4e2d ${...} \u53d8\u91cf\u90e8\u5206\u66ff\u6362\u4e3a\u5b9e\u9645\u503c\uff0c\u518d\u8fdb\u884c SHA1 \u8fd0\u7b97\u3002\u5982\u679c\u8bf7\u6c42\u53c2\u6570\u4e0d\u5305\u542b requesttime \uff0c\u8ba1\u7b97\u7b7e\u540d\u5219\u4e0d\u9700\u8981\u8be5\u503c requesttime String \u5426 \u67e5\u8be2\u7684\u65f6\u95f4\u70b9\uff0c\u8be5\u53c2\u6570\u4e3a\u53ef\u9009\u53c2\u6570\uff0c\u683c\u5f0f\u4e3a\"YYYY-MM-DD HH:mm:ss\"\uff0c\u5f53\u4f20\u9012\u8be5\u53c2\u6570\u65f6\uff0c\u6211\u4eec\u4f1a\u5728\u7ed9\u5b9a\u65f6\u95f4\u70b9\u7684\u524d\u540e 1 \u4e2a\u5c0f\u65f6\u8303\u56f4\u5185\u67e5\u8be2\uff1b\u5982\u679c\u672a\u4f20\u8be5\u53c2\u6570\uff0c\u6211\u4eec\u5c06\u5728\u6700\u8fd1\u4e00\u5468\u7684\u8ba2\u5355\u4e2d\u67e5\u8be2 \u54cd\u5e94\u53c2\u6570 \u540d\u79f0 \u7c7b\u578b \u793a\u4f8b\u503c \u63cf\u8ff0 code String 200 \u54cd\u5e94\u72b6\u6001\u7801\uff0c200 \u8868\u793a\u5145\u503c\u6210\u529f\uff1b430 516 530 \u8868\u793a\u5145\u503c\u5931\u8d25\uff1b511 \u5fc5\u987b\u4eba\u5de5\u518d\u6b21\u786e\u8ba4\uff1b\u5176\u4ed6\u9519\u8bef\u7801\u89c6\u4e3a\u5145\u503c\u4e2d custno String 20150238829 \u5ba2\u6237\u81ea\u5b9a\u4e49\u8ba2\u5355\u53f7 info String \u6210\u529f \u54cd\u5e94\u793a\u4f8b { \"code\": \"200\", \"custno\": \"2015823871239\", \"info\": \"\u5145\u503c\u6210\u529f\" } 4.\u67e5\u8be2\u4f59\u989d \u8bf7\u6c42\u5730\u5740 POST /getMyBalance \u8bf7\u6c42\u53c2\u6570 \u540d\u79f0 \u7c7b\u578b \u662f\u5426\u5fc5\u987b \u63cf\u8ff0 appkey String \u5fc5\u987b sign String \u5fc5\u987b \u7b7e\u540d\uff0c\u7b97\u6cd5\u4e3a appkey${YourAppKey}TOKEN${Yourtoken} \u4e2d ${...} \u53d8\u91cf\u90e8\u5206\u66ff\u6362\u5b9e\u9645\u503c\uff0c\u518d\u8fdb\u884c SHA1 \u8fd0\u7b97\u5f97\u5230\u7684\u5b57\u7b26\u4e32\u4fbf\u4e3a sign \u503c \u54cd\u5e94\u53c2\u6570 \u540d\u79f0 \u7c7b\u578b \u793a\u4f8b\u503c \u63cf\u8ff0 code String 200 \u54cd\u5e94\u72b6\u6001\u7801 balance Float 100.00 \u8d26\u6237\u4f59\u989d\uff08\u5305\u542b\u51bb\u7ed3\u91d1\u989d\uff09 freeze Float 20.00 \u51bb\u7ed3\u91d1\u989d\uff0c\u6b63\u5728\u4ea4\u6613\u7684\u8ba2\u5355\u91d1\u989d availBalance Float 80.00 \u5b9e\u9645\u53ef\u7528\u4f59\u989d\uff08\u4e0d\u5305\u542b\u51bb\u7ed3\u91d1\u989d\uff09 \u54cd\u5e94\u793a\u4f8b { \"code\": \"200\", \"balance\": 100, \"freeze\": 20, \"availBalance\": 80 }","title":"\u63a5\u53e3\u8be6\u60c5"},{"location":"mobile-stats/#_7","text":"\u5ba2\u6237\u9700\u8981\u5728\u53c8\u62cd\u4e91\u624b\u673a\u6d41\u91cf\u540e\u53f0\u586b\u5199\u5145\u503c\u56de\u8c03\u5730\u5740\uff0c\u5e76\u6ce8\u610f\u9632\u706b\u5899\u914d\u7f6e\uff0c\u4e0d\u80fd\u5c4f\u853d\u53c8\u62cd\u4e91\u670d\u52a1\u5668\u5730\u5740\u3002\u914d\u7f6e\u6210\u529f\u540e\uff0c\u6bcf\u6b21\u5145\u503c\u540e\uff0c\u53c8\u62cd\u4e91\u4f1a\u5411\u8be5\u5730\u5740\u53d1\u9001 POST \u8bf7\u6c42\uff0c\u8bf7\u6c42\u7684\u6570\u636e\u683c\u5f0f\u4e3a application/json \u8bf7\u6c42\u53c2\u6570 \u540d\u79f0 \u7c7b\u578b \u662f\u5426\u5fc5\u987b \u63cf\u8ff0 code String \u5fc5\u987b \u54cd\u5e94\u72b6\u6001\u7801\uff0c200 \u8868\u793a\u5145\u503c\u6210\u529f\uff1b430,530 \u8868\u793a\u5145\u503c\u5931\u8d25\uff0c\u5176\u4ed6\u9519\u8bef\u7801\u6216\u5f02\u5e38\u4fe1\u606f\u8868\u793a\u5145\u503c\u4e2d orderno String \u5fc5\u987b \u53c8\u62cd\u4e91\u5e73\u53f0\u7684\u8ba2\u5355\u53f7 custno String \u5fc5\u987b \u5ba2\u6237\u81ea\u5b9a\u4e49\u8ba2\u5355\u53f7 info String \u5fc5\u987b \u63cf\u8ff0\u4fe1\u606f sign String \u5fc5\u987b \u7b7e\u540d\uff0c\u5ba2\u6237\u53ef\u4ee5\u4f7f\u7528\u8be5\u503c\u6821\u9a8c\u8bf7\u6c42\u662f\u5426\u5408\u6cd5\uff0c\u5f3a\u70c8\u5efa\u8bae\u63a5\u6536\u5145\u503c\u56de\u8c03\u65f6\u8fdb\u884c\u6821\u9a8c\u3002\u7b7e\u540d\u89c4\u5219\u4e3a\uff1a\u5c06 code${Code}custno${YourCustno}info${Info}orderno${OrderNo}token${YourToken} \u5b57\u7b26\u4e32\u4e2d\u7684\u53d8\u91cf\u90e8\u5206 ${...} \u66ff\u6362\u4e3a\u8bf7\u6c42\u53c2\u6570\u4e2d\u7684\u503c\uff0c\u518d\u5bf9\u5f97\u5230\u7684\u5b57\u7b26\u4e32\u8fdb\u884c SHA1 \u7b7e\u540d \u5ba2\u6237\u63a5\u53d7\u8bf7\u6c42\u6210\u529f\u540e\uff0c\u9700\u8981\u54cd\u5e94\u5982\u4e0b json \u503c\uff1a { \"info\": \"1\" } \u5426\u5219\uff0c\u53c8\u62cd\u4e91\u5c06\u9694 1 \u5206\u949f\u518d\u91cd\u8bd5\u4e00\u6b21\uff0c\u4e00\u5171\u56de\u8c03 3 \u6b21","title":"\u5145\u503c\u56de\u8c03\u8bf4\u660e"},{"location":"mobile-stats/#_8","text":"\u6ce8\uff1a\u9700\u8981\u7559\u610f\u6bcf\u4e2a\u63a5\u53e3\u54cd\u5e94\u53c2\u6570\u8bf4\u660e\u4e2d\u7684 code \u5904\u7406\u65b9\u5f0f \u9519\u8bef\u7801 \u8bf4\u660e \u9519\u8bef\u7801 \u8bf4\u660e 200 \u6210\u529f 201 \u5145\u503c\u4e2d 410 \u8fd0\u8425\u5546\u8fd4\u56de\u8d85\u65f6 422 \u7528\u6237\u72b6\u6001\u5f02\u5e38 430 \u8ba2\u8d2d/\u5145\u503c\u5931\u8d25 502 sign\u7b7e\u540d\u9519\u8bef 503 \u4f59\u989d\u4e0d\u8db3 504 \u975e\u6cd5\u7684\u56de\u8c03\u5730\u5740 505 \u624b\u673a\u53f7\u4e0d\u5408\u6cd5 506 \u7528\u6237\u4e0d\u80fd\u8ba2\u8d2d\u8be5\u5957\u9910 507 \u63a5\u53e3\u53c2\u6570\u5f02\u5e38 508 \u4ee4\u724c\u9274\u6743\u4e0d\u901a\u8fc7 509 \u5ba2\u6237\u672a\u8ba4\u8bc1\u6388\u6743 510 \u67e5\u8be2\u592a\u9891\u7e41 511 \u5185\u90e8\u5f02\u5e38\uff0c\u6b64\u65f6\u5bf9\u8ba2\u5355\u7684\u67e5\u8be2\u3001\u5145\u503c\u7b49\u64cd\u4f5c\u7b49\u9700\u8981\u8054\u7cfb\u5ba2\u6237\u518d\u6b21\u786e\u8ba4 512 \u8ba2\u5355\u53f7\u91cd\u590d 513 \u8fd0\u8425\u5546\u8bf7\u6c42\u8d85\u65f6 514 ip\u4e0d\u5728\u767d\u540d\u5355 515 \u8be5\u5ba2\u6237\u4e0d\u5b58\u5728 516 \u4e0d\u5b58\u5728\u6b64\u8ba2\u5355 517 \u65e0\u6cd5\u8bc6\u522b\u7684\u624b\u673a\u53f7 519 \u5f53\u524dappkey\u6216appsecret\u9519\u8bef 520 \u6d3b\u52a8\u4e0d\u5b58\u5728 526 \u5408\u540c\u4e0d\u5728\u6709\u6548\u671f 527 token\u4e0d\u5728\u6709\u6548\u671f 530 \u8ba2\u8d2d/\u5145\u503c\u5931\u8d25 531 \u7b7e\u540d\u4e0d\u901a\u8fc7 532 \u8ba2\u5355\u53f7\u957f\u5ea6\u8d85\u8fc730 533 aes\u52a0\u5bc6\u6709\u8bef","title":"\u9519\u8bef\u7801\u8bf4\u660e"},{"location":"sms/","text":"1. \u4ecb\u7ecd \u00b6 1.1 \u53c8\u62cd\u4e91\u77ed\u4fe1\u4ecb\u7ecd \u00b6 \u53c8\u62cd\u4e91\u77ed\u4fe1\u670d\u52a1\u901a\u8fc7\u5bf9\u7f51\u7edc\u670d\u52a1\u8d44\u6e90\u7edf\u4e00\u7ba1\u7406\u548c\u8c03\u5ea6\uff0c\u4e09\u7f51\u5408\u4e00\uff0c\u5168\u7f51\u8986\u76d6\uff0c\u91c7\u7528\u884c\u4e1a\u4e13\u7528\u901a\u9053\uff0c\u4e3a\u7528\u6237\u63d0\u4f9b\u4f01\u4e1a\u7ea7\u77ed\u4fe1\u9001\u8fbe\u670d\u52a1\u3002 1.2 \u53c8\u62cd\u4e91\u77ed\u4fe1\u7ec4\u6210 \u00b6 \u53c8\u62cd\u4e91\u76ee\u524d\u53ef\u63d0\u4f9b\u7684\u77ed\u4fe1\u901a\u9053\u5206\u4e3a\u4e24\u5927\u7c7b\uff1a\u514d\u5ba1\u7b7e\u540d\u901a\u9053\u4e0e\u666e\u901a\u7b7e\u540d\u901a\u9053\uff0c\u4e24\u79cd\u901a\u9053\u6309\u7c7b\u578b\u53c8\u5206\u4e3a\u884c\u4e1a\u77ed\u4fe1\u4e0e\u8425\u9500\u77ed\u4fe1\u3002 \u77ed\u4fe1\u7684\u7ec4\u6210\u7531\u77ed\u4fe1\u6a21\u677f\u5185\u5bb9+\u77ed\u4fe1\u7b7e\u540d\u7ec4\u6210\uff0c\u77ed\u4fe1\u957f\u5ea6\u9650\u5236\u4e3a 350 \u5b57\u3002 1.3 \u53c8\u62cd\u4e91\u77ed\u4fe1\u6a21\u677f \u00b6 1. \u53c8\u62cd\u4e91\u77ed\u4fe1\u6a21\u677f\u5206\u4e3a\u4e24\u79cd\uff0c\u884c\u4e1a\u77ed\u4fe1\u4e0e\u8425\u9500\u77ed\u4fe1\u6a21\u677f\uff0c\u4e24\u7c7b\u6a21\u677f\u6700\u5927\u7684\u533a\u522b\u5c31\u662f\u8425\u9500\u77ed\u4fe1\u5c3e\u90e8\u987b\u6dfb\u52a0\u201c\u9000\u8ba2\u56deT\u3001\u9000\u8ba2\u56deTD\u6216\u9000\u8ba2\u56deN\u201d\u5b57\u6837\u3002 2. \u53c8\u62cd\u4e91\u77ed\u4fe1\u63d0\u4f9b\u7684\u6a21\u677f\u77ed\u4fe1\u7531\u56fa\u5b9a\u5185\u5bb9\u4e0e\u591a\u4e2a\u53d8\u91cf\u6784\u6210\uff0c\u53d8\u91cf\u683c\u5f0f\u4e3a\uff08{$var1}\uff0c{$var2}\u2026\uff09\uff0c\u53d8\u91cf\u5185\u5bb9\u53ef\u4ee5\u662f\u6c49\u5b57\u3001\u5b57\u6bcd\u3001\u6570\u5b57\u6216\u8005\u7279\u6b8a\u5b57\u7b26\u81ea\u5408\u3002 3. \u5df2\u5ba1\u6838\u901a\u8fc7\u7684\u77ed\u4fe1\u6a21\u677f\uff0c\u82e5\u9700\u4fee\u6539\u6a21\u677f\u91cd\u65b0\u63d0\u4ea4\u5ba1\u6838\uff0c\u5728\u5ba1\u6838\u671f\u95f4\u65e0\u6cd5\u4f7f\u7528\uff0c\u9700\u91cd\u65b0\u5ba1\u6838\u901a\u8fc7\u624d\u53ef\u4f7f\u7528\u3002 4. \u6bcf\u79cd\u901a\u9053\u53ef\u5206\u522b\u521b\u5efa\u6a21\u677f\u4e0a\u9650\u4e3a 40 \u4e2a\u3002 5. \u884c\u4e1a\u77ed\u4fe1\u6a21\u677f\u4e2d\uff0c\u5355\u4e2a\u624b\u673a\u53f7\u6bcf\u5929\u80fd\u63a5\u6536\u7684\u77ed\u4fe1\u6b21\u6570\u4e3a 10 \u6b21\uff0c\u8425\u9500\u77ed\u4fe1\u65e0\u9650\u5236\u3002 6. \u77ed\u4fe1\u5185\u5bb9\u4e0d\u80fd\u542b\u6709\u653f\u6cbb\u654f\u611f\u5b57\u773c\u548c\u201c\u9ec4\u8d4c\u6bd2\u201d\u7b49\u4f4e\u4fd7\u654f\u611f\u5b57\u6837\uff0c\u51fa\u73b0\u8fdd\u6cd5\u8fdd\u89c4\u6216\u635f\u5bb3\u76f8\u5173\u4ed6\u4eba\u6743\u76ca\u7684\uff0c\u5e73\u53f0\u5c06\u4fdd\u7559\u6700\u7ec8\u8ffd\u7a76\u7684\u6743\u5229\u3002 7. \u4e0d\u652f\u6301\u5168\u53d8\u91cf\u77ed\u4fe1\u6a21\u677f\uff0c\u8bf7\u5c06\u77ed\u4fe1\u5185\u5bb9\u7684\u7ed3\u6784\u5b89\u6392\u5408\u7406\u3002 8. \u8bf7\u60a8\u907f\u514d\u5728\u77ed\u4fe1\u6b63\u6587\u4e2d\u4f7f\u7528 \u201c\u3010 \u201d \uff0c \u201c \u3011\u201d\uff0c\u201c<\u201d\uff0c\u201c>\u201d \u7b49\u7279\u6b8a\u5b57\u7b26\u3002 1.4 \u53c8\u62cd\u4e91\u77ed\u4fe1\u7b7e\u540d \u00b6 1. \u6bcf\u79cd\u901a\u9053\u7684\u77ed\u4fe1\u7b7e\u540d\u6700\u591a\u53ef\u521b\u5efa 20 \u4e2a\u7b7e\u540d\u3002 2. \u5355\u4e2a\u7b7e\u540d\u957f\u5ea6\u4ecb\u4e8e 3-8 \u4e2a\u5b57\u7b26\u4e4b\u95f4\uff1b 3. \u4e0d\u80fd\u542b\u8fdd\u7981\u5173\u952e\u5b57\uff0c\u4e0d\u80fd\u6709\u4efb\u4f55\u7279\u6b8a\u7b26\u53f7\uff08\u5982-.+.#); 4. \u65e0\u9700\u6dfb\u52a0\u3010\u3011\u7b26\u53f7\uff0c\u7cfb\u7edf\u5c06\u81ea\u52a8\u751f\u6210\u3002 1.5 \u8ba1\u8d39\u6807\u51c6 \u00b6 \u6bcf\u6761\u77ed\u4fe1\u5185\u5bb9\uff08\u5305\u62ec\u4f46\u4e0d\u9650\u4e8e\u6807\u70b9\u7b26\u53f7\u3001\u82f1\u6587\u5b57\u7b26\u3001\u6c49\u5b57\u7b49\uff09\u957f\u5ea6\u4e3a70\u4e2a\u5b57\u7b26\uff08\u5305\u542b\u7b7e\u540d\uff09\u5982\u53d1\u9001\u77ed\u4fe1\u5185\u5bb9\u8d85\u51fa 70 \u4e2a\u5b57\u7b26\uff0c\u5c06\u4ee5\u6bcf 67 \u5b57\u7b26\uff08\u5305\u62ec\u4f46\u4e0d\u9650\u4e8e\u6807\u70b9\u7b26\u53f7\u3001\u82f1\u6587\u5b57\u7b26\u3001\u6c49\u5b57\u7b49\uff09\u4e3a\u4e00\u6761\u77ed\u4fe1\u8fdb\u884c\u7d2f\u8ba1\u8ba1\u8d39\u3002\u5355\u6761\u77ed\u4fe1\u5b57\u7b26\u6570\u6700\u5927\u503c\u4e3a 350 \u4e2a\u5b57\u3002\u77ed\u4fe1\u670d\u52a1\u7684\u4ed8\u8d39\u65b9\u5f0f\u4e3a\u77ed\u4fe1\u8d44\u6e90\u5305\u8ba1\u8d39\uff0c\u6309\u7167\u77ed\u4fe1\u53d1\u9001\u6210\u529f\u91cf\u8fdb\u884c\u77ed\u4fe1\u6761\u6570\u7684\u6263\u9664\uff0c\u53d1\u9001\u591a\u5c11\u5373\u6263\u9664\u77ed\u4fe1\u8d44\u6e90\u5305\u5185\u5bf9\u5e94\u7684\u6761\u6570\u3002 1.6 \u8d2d\u4e70\u6d41\u7a0b \u00b6 \u8fdb\u5165\u603b\u7ba1\u7406\u540e\u53f0\u4e2d\u3010\u4e91\u4ea7\u54c1\u3011-\u3010\u77ed\u4fe1\u670d\u52a1\u3011-\u3010\u5145\u503c\u3011-\u3010\u77ed\u4fe1\u5305\u7ba1\u7406\u3011\u4e2d\u8fdb\u884c\u5145\u503c\u8d2d\u4e70\u3002 2. \u77ed\u4fe1\u63a5\u5165 \u00b6 2.1 \u63a5\u5165\u8bf4\u660e \u00b6 \u77ed\u4fe1\u670d\u52a1\u5c5e\u4e8e\u6536\u8d39\u529f\u80fd\uff0c\u7528\u6237\u53ef\u6839\u636e\u81ea\u8eab\u9700\u6c42\u901a\u8fc7\u8d2d\u4e70\u77ed\u4fe1\u8d44\u6e90\u5305\u8fdb\u884c\u4f7f\u7528\uff0c\u4e0d\u652f\u6301\u81ea\u9009\u77ed\u4fe1\u5305\u3002 2.2 \u63a5\u5165\u6b65\u9aa4 \u00b6 1. \u6ce8\u518c\u53c8\u62cd\u4e91\u8d26\u53f7\uff08\u5df2\u6709\u53c8\u62cd\u4e91\u8d26\u53f7\u65e0\u9700\u6ce8\u518c\uff09 2. \u8fdb\u884c\u5b9e\u540d\u8ba4\u8bc1 3. \u521b\u5efa\u6a21\u677f 4. \u53d1\u9001\u77ed\u4fe1 2.3 \u6ce8\u518c\u53c8\u62cd\u4e91\u8d26\u53f7 \u00b6 \u7528\u6237\u82e5\u9700\u5f00\u901a\u77ed\u4fe1\u670d\u52a1\uff0c\u9700\u5148\u5728\u5b98\u7f51\u6ce8\u518c\u53c8\u62cd\u4e91\u8d26\u53f7\uff0c\u5b98\u7f51\u5730\u5740\u5982\u4e0b: https://www.upyun.com/ ,\u521b\u5efa\u5b8c\u6210\u540e\u5b8c\u6210\u5b9e\u540d\u8ba4\u8bc1\uff0c\u5373\u53ef\u7533\u8bf7\u5f00\u901a\u3002\uff08\u5df2\u6709\u8d26\u53f7\u9700\u5b8c\u6210\u5b9e\u540d\u8ba4\u8bc1\u540e\u5373\u53ef\u5f00\u901a\u77ed\u4fe1\u670d\u52a1\uff09 2.4 \u5b9e\u540d\u8ba4\u8bc1 \u00b6 \u6ce8\u518c\u6210\u529f\u53c8\u62cd\u4e91\u8d26\u53f7\u4e4b\u540e\uff0c\u5373\u53ef\u901a\u8fc7\u540e\u53f0\u7684\u3010\u4e91\u4ea7\u54c1\u3011-\u3010\u77ed\u4fe1\u670d\u52a1\u3011\u5165\u53e3\u8fdb\u5165\u77ed\u4fe1\u670d\u52a1\u754c\u9762\u3002\u77ed\u4fe1\u670d\u52a1\u9700\u5b8c\u6210\u5b9e\u540d\u8ba4\u8bc1\u540e\u624d\u53ef\u5f00\u901a\uff0c\u4e2a\u4eba\u7528\u6237\u9700\u5b8c\u6210\u4e2a\u4eba\u5b9e\u540d\u8ba4\u8bc1\uff0c\u4f01\u4e1a\u7528\u6237\u9700\u5b8c\u6210\u4f01\u4e1a\u5b9e\u540d\u8ba4\u8bc1\u3002 \u5b9e\u540d\u8ba4\u8bc1\u754c\u9762 2.5 \u521b\u5efa\u6a21\u677f \u00b6 \u521b\u5efa\u6a21\u677f\u53ef\u5206\u522b\u521b\u5efa\u666e\u901a\u7b7e\u540d\u901a\u9053\u4e0e\u514d\u5ba1\u7b7e\u540d\u901a\u9053\u7684\u6a21\u677f\uff0c\u6a21\u677f\u7c7b\u578b\u5206\u4e3a\u884c\u4e1a\u77ed\u4fe1\u4e0e\u8425\u9500\u77ed\u4fe1\uff0c \u7279\u522b\u6ce8\u610f\u7684\u662f\u8425\u9500\u77ed\u4fe1\u5c3e\u90e8\u987b\u6dfb\u52a0\u201c\u9000\u8ba2\u56deT\u3001\u9000\u8ba2\u56deTD\u6216\u9000\u8ba2\u56deN\u201d\u5b57\u6837\uff0c\u5426\u5219\u4f1a\u53d1\u9001\u5931\u8d25\u3002 \u7528\u6237\u70b9\u51fb\u7ba1\u7406\u540e\u53f0\u7684\u3010\u4e91\u4ea7\u54c1\u3011-\u3010\u77ed\u4fe1\u670d\u52a1\u3011-\u3010\u6a21\u677f\u3011-\u3010\u521b\u5efa\u6a21\u677f\u3011\u8fdb\u884c\u6a21\u677f\u521b\u5efa\u3002 \u7528\u6237\u521b\u5efa\u597d\u6a21\u677f\u4e4b\u540e\uff0c\u7ba1\u7406\u5458\u8fdb\u884c\u5ba1\u6838\uff08\u514d\u7b7e\u901a\u9053\u65e0\u9700\u62a5\u5907\u7b7e\u540d\uff0c\u53ea\u9700\u5ba1\u6838\u6a21\u677f\uff0c\u975e\u7279\u6b8a\u60c5\u51b5\u4e0b\uff0c\u5ba1\u6838\u65f6\u95f4\u4e3a\u5de5\u4f5c\u65e5\u5185\u7684 1-3 \u5c0f\u65f6\uff1b\u666e\u901a\u901a\u9053\u975e\u7279\u6b8a\u60c5\u51b5\u4e0b\u5ba1\u6838\u65f6\u95f4\u4e3a 4-5 \u4e2a\u5de5\u4f5c\u65e5\uff0c\u82e5\u7b7e\u540d\u5df2\u62a5\u5907\u8fc7\uff0c\u5219\u4e5f\u662f\u5de5\u4f5c\u65e5\u5185\u7684 1-3 \u5c0f\u65f6\uff09\uff0c\u5ba1\u6838\u901a\u8fc7\u540e\u7528\u6237\u53ef\u4ee5\u4f7f\u7528\u540e\u53f0\u5bfc\u5165\u754c\u9762\u6216\u8c03\u7528\u53d1\u9001\u77ed\u4fe1\u63a5\u53e3\u8fdb\u884c\u53d1\u9001\u3002 2.6 \u53d1\u9001\u77ed\u4fe1 \u00b6 \u5728\u6a21\u677f\u5ba1\u6838\u901a\u8fc7\u4e4b\u540e\uff0c\u5c31\u53ef\u4ee5\u901a\u8fc7\u540e\u53f0\u5bfc\u5165\u754c\u9762\u6216\u8c03\u7528\u63a5\u53e3\uff08\u5177\u4f53\u63a5\u53e3\u4f7f\u7528\u65b9\u5f0f\u89c1\u63a5\u53e3\u6587\u6863\uff09\u8fdb\u884c\u77ed\u4fe1\u53d1\u9001\u3002 \u7528\u6237\u901a\u8fc7\u70b9\u51fb\u7ba1\u7406\u540e\u53f0\u7684\u3010\u5bfc\u5165\u3011-\u3010\u641c\u7d22\u3011-\u3010\u5bfc\u5165\u6587\u4ef6\u3011-\u3010\u63d0\u4ea4\u3011\u8fdb\u884c\u77ed\u4fe1\u53d1\u9001\u3002 \u9009\u62e9\u5177\u4f53\u6240\u9700\u7684\u901a\u9053\u3001\u77ed\u4fe1\u7c7b\u578b\u4ee5\u53ca\u6a21\u677f\u4e4b\u540e\uff0c\u5c31\u53ef\u4ee5\u901a\u8fc7\u5bfc\u5165 txt \u6216\u8005 csv \u683c\u5f0f\u7684\u6587\u672c\u6587\u4ef6\u8fdb\u884c\u53d1\u9001\u3002\u6587\u672c\u683c\u5f0f\u7b2c\u4e00\u5217\u4e3a\u624b\u673a\u53f7\uff0c2-5 \u5217\u586b\u53d8\u91cf\u53c2\u6570\uff0c\u65e0\u53d8\u91cf\u53c2\u6570\u7559\u7a7a\uff0ctxt \u4e0e csv \u9700\u7528\u82f1\u6587\u201c,\u201d\u5206\u9694\u5404\u5217\u3002\u6587\u672c\u683c\u5f0f\u5982\u4e0b\u56fe\uff1a \u5bfc\u5165\u5b8c\u6587\u4ef6\u540e\uff0c\u70b9\u63d0\u4ea4\u5373\u53ef\u5b8c\u6210\u77ed\u4fe1\u53d1\u9001\u3002 3. \u6570\u636e\u7edf\u8ba1 \u00b6 3.1 \u77ed\u4fe1\u8d44\u6e90\u5305 \u00b6 \u53c8\u62cd\u4e91\u77ed\u4fe1\u670d\u52a1\u5c5e\u4e8e\u9884\u4ed8\u8d39\u670d\u52a1\uff0c\u9700\u63d0\u524d\u8d2d\u4e70\u77ed\u4fe1\u8d44\u6e90\u5305\u4e4b\u540e\u65b9\u53ef\u4f7f\u7528\u3002\u8d2d\u4e70\u77ed\u4fe1\u8d44\u6e90\u5305\u4e4b\u540e\uff0c\u91d1\u989d\u4f1a\u81ea\u52a8\u8f6c\u5316\u4e3a\u77ed\u4fe1\u53ef\u4f7f\u7528\u6761\u6570\u3002\u5728\u7edf\u8ba1\u7528\u6237\u77ed\u4fe1\u6761\u6570\u65f6\uff0c\u82e5\u77ed\u4fe1\u53d1\u9001\u5931\u8d25\uff0c\u5219\u4e0d\u6263\u9664\u4f7f\u7528\u6761\u6570\u3002 3.2 \u62a5\u8868\u7edf\u8ba1 \u00b6 \u5728\u53d1\u9001\u660e\u7ec6\u4e2d\uff0c\u53ef\u4ee5\u6839\u636e\u6240\u53d1\u9001\u77ed\u4fe1\u7684\u624b\u673a\u53f7\u3001\u53d1\u9001\u72b6\u6001\u3001\u65f6\u95f4\uff0c\u67e5\u8be2\u6240\u6709\u77ed\u4fe1\u7684\u53d1\u9001\u72b6\u6001\u3002 4. \u5e38\u89c1\u95ee\u9898 \u00b6 1. \u77ed\u4fe1\u6a21\u677f\u6700\u591a\u652f\u6301\u521b\u5efa\u591a\u5c11\u4e2a\uff1f \u7b54\uff1a\u5355\u4e2a\u901a\u9053\u4e0b\u7684\u6a21\u677f\u4e0a\u9650\u4e3a40\u4e2a\uff0c\u5373\u666e\u901a\u7b7e\u540d\u901a\u9053\u4e0e\u514d\u5ba1\u7b7e\u540d\u901a\u9053\u7684\u6a21\u677f\u4e0a\u9650\u5404\u4e3a40\u4e2a\u3002 2. \u77ed\u4fe1\u8d85\u51fa\u5b57\u6570\u5982\u4f55\u6536\u8d39\uff1f \u7b54\uff1a\u6bcf\u6761\u77ed\u4fe1\u5185\u5bb9\uff08\u5305\u62ec\u4f46\u4e0d\u9650\u4e8e\u6807\u70b9\u7b26\u53f7\u3001\u82f1\u6587\u5b57\u7b26\u3001\u6c49\u5b57\u7b49\uff09\u957f\u5ea6\u4e3a70\u4e2a\u5b57\u7b26\uff08\u5305\u542b\u7b7e\u540d\uff09\u5982\u53d1\u9001\u77ed\u4fe1\u5185\u5bb9\u8d85\u51fa70\u4e2a\u5b57\u7b26\uff0c\u5c06\u4ee5\u6bcf67\u5b57\u7b26\uff08\u5305\u62ec\u4f46\u4e0d\u9650\u4e8e\u6807\u70b9\u7b26\u53f7\u3001\u82f1\u6587\u5b57\u7b26\u3001\u6c49\u5b57\u7b49\uff09\u4e3a\u4e00\u6761\u77ed\u4fe1\u8fdb\u884c\u7d2f\u8ba1\u8ba1\u8d39\u3002\u5355\u6761\u77ed\u4fe1\u5b57\u7b26\u6570\u6700\u5927\u503c\u4e3a350\u4e2a\u5b57\u3002 3. \u77ed\u4fe1\u6a21\u677f\u5982\u4f55\u521b\u5efa\uff1f \u7b54\uff1a\u5728\u7ba1\u7406\u540e\u53f0\u3010\u77ed\u4fe1\u670d\u52a1\u3011-\u3010\u6a21\u677f\u3011-\u3010\u521b\u5efa\u6a21\u677f\u3011\u4e2d\u521b\u5efa\u3002 4. \u77ed\u4fe1\u8d44\u6e90\u5305\u53ef\u9000\u6b3e\u5417\uff1f \u7b54\uff1a\u77ed\u4fe1\u8d44\u6e90\u5305\u5728\u8d2d\u4e70\u6210\u529f\u540e\u4e0d\u652f\u6301\u9000\u6b3e\uff0c\u5efa\u8bae\u60a8\u6309\u9700\u8d2d\u4e70\u3002 5. \u77ed\u4fe1\u53d1\u9001\u6210\u529f\uff0c\u4f46\u5b9e\u9645\u672a\u80fd\u6536\u5230\u77ed\u4fe1\u662f\u4ec0\u4e48\u539f\u56e0\uff1f \u7b54\uff1a 1\uff09\u624b\u673a\u662f\u5426\u957f\u65f6\u95f4\u672a\u5173\u673a\uff0c\u53ef\u4ee5\u91cd\u542f\u4e0b\uff1b 2\uff09\u662f\u5426\u662f\u53cc\u5361\u53cc\u5f85\u624b\u673a\uff0c\u6362\u4e2a\u5361\u69fd\u8bd5\u8bd5\uff1b 3\uff09\u662f\u90fd\u5b89\u88c5\u4e86\u5b89\u5168\u8f6f\u4ef6\uff0c\u77ed\u4fe1\u88ab\u62e6\u622a\u5230\u5783\u573e\u4fe1\u7bb1\u4e2d\uff1b 4\uff09\u662f\u90fd\u5904\u4e8e\u505c\u673a\u72b6\u6001\uff1b 5\uff09\u51fa\u4e8e\u9ed1\u540d\u5355\u72b6\u6001\uff0c\u6295\u8bc9\u8fc7\u8fd0\u8425\u5546\uff0c\u6216\u9000\u8ba2\u8fc7\u4e1a\u52a1\uff1b 6. \u77ed\u4fe1\u53d1\u9001\u5931\u8d25\uff0c\u8fd8\u4f1a\u6263\u8d39\u5417\uff1f \u7b54\uff1a\u4e0d\u4f1a\uff0c\u77ed\u4fe1\u53d1\u9001\u5931\u8d25\u7684\u8bdd\u4e0d\u4f1a\u6263\u8d39\u3002 7. \u77ed\u4fe1\u652f\u6301\u4e09\u7f51\u90fd\u53ef\u53d1\u9001\u5417\uff1f \u7b54\uff1a\u652f\u6301\u3002 8. \u53d8\u91cf\u4e2d\u662f\u5426\u53ef\u4ee5\u76f4\u63a5\u5199\u7f51\u7ad9\u94fe\u63a5\uff1f \u7b54\uff1a\u53ef\u4ee5\u3002 5. \u63a5\u53e3\u6587\u6863 \u00b6 5.1 \u77ed\u4fe1\u6a21\u677f\u65b0\u589e\u63a5\u53e3 \u00b6 \u63a5\u53e3\u5730\u5740 POST https://sms-api.upyun.com/api/templates \u53c2\u6570\u5b9a\u4e49 \u53c2\u6570 \u8bf4\u660e Required\uff08\u5fc5\u586b\uff09 title \u6a21\u677f\u6807\u9898(\u5c11\u4e8e12\u4e2a\u5b57) \u2714\ufe0f content \u6a21\u677f\u5185\u5bb9\uff08\u6a21\u7248\u7b7e\u540d+\u6a21\u7248\u5185\u5bb9+2\u5c11\u4e8e350\u4e2a\u5b57\uff09 \u2714\ufe0f temp_sign \u6a21\u7248\u7b7e\u540d\uff083\uff5e8\u4e2a\u5b57\uff09 \u2714\ufe0f sign_location \u6a21\u7248\u7b7e\u540d\u4f4d\u7f6e (top,bottom) \u2714\ufe0f type \u6a21\u677f\u7c7b\u578b (industry, marketing) \u2714\ufe0f report_type \u5ba1\u6838\u7c7b\u578b\uff08vip, general\uff09 \u2714\ufe0f \u54cd\u5e94 \u521b\u5efa\u6210\u529f\u8fd4\u56de\u54cd\u5e94\u7801\u548c\u5185\u5bb9\u3002 201 Created { \"title\": \"title\", \"temp_sign\": \"sign\", \"content\": \"content\", \"sign_location\": \"top\", \"type\": \"industry\", \"status\": \"review\", \"updated_at\": \"2017-04-10T02:58:12.000Z\", \"report_type\": \"vip\", \"id\": 4, \"owner\": { \"id\": 1, \"name\": \"taevas\", \"general\": 8000, \"vip\": 0, \"industry\": 4, \"marketing\": 0 } } \u54cd\u5e94\u503c\u8bf4\u660e \u53c2\u6570 \u8bf4\u660e title \u6a21\u677f\u6807\u9898 temp_sign \u6a21\u677f\u7b7e\u540d content \u6a21\u677f\u5185\u5bb9 status \u6a21\u677f\u72b6\u6001\uff08\u5ba1\u6838\u4e2d\u3001\u901a\u8fc7\u3001\u5931\u8d25) type \u77ed\u4fe1\u7c7b\u578b(\u8425\u9500\u3001\u884c\u4e1a) updated_at \u521b\u5efa\u65f6\u95f4 report_type \u5ba1\u6838\u7c7b\u578b\uff08\u514d\u7b7e, \u666e\u901a\uff09 id \u6a21\u677f\u7f16\u53f7 owner \u521b\u5efa\u8005\u4fe1\u606f owner.id \u7528\u6237\u7f16\u53f7 owner.name \u7528\u6237\u6635\u79f0 owner.general \u666e\u901a\u77ed\u4fe1\u5269\u4f59\u6761\u6570 owner.vip \u514d\u7b7e\u77ed\u4fe1\u5269\u4f59\u6761\u6570 owner.industry \u5df2\u53d1\u9001\u884c\u4e1a\u77ed\u4fe1\u6761\u6570 owner.marketing \u5df2\u53d1\u9001\u8425\u9500\u77ed\u4fe1\u6761\u6570 \u8bf7\u6c42\u793a\u4f8b POST https://sms-api.upyun.com/api/templates HTTP/1.1 Authorization: <your token> { \"title\": \"title\", \"content\": \"content\", \"temp_sign\": \"sign\", \"sign_location\": \"top\", \"type\": \"industry\", \"report_type\": \"vip\" } 5.2 \u77ed\u4fe1\u6a21\u677f\u5220\u9664\u63a5\u53e3 \u00b6 \u63a5\u53e3\u5730\u5740 DELETE https://sms-api.upyun.com/api/templates/{template_id} \u53c2\u6570\u5b9a\u4e49 \u53c2\u6570 \u8bf4\u660e Required\uff08\u5fc5\u586b\uff09 template_id \u6a21\u677f\u7f16\u53f7 \u2714\ufe0f \u54cd\u5e94 204 No Content \u8bf7\u6c42\u793a\u4f8b DELETE https://sms-api.upyun.com/api/templates/4 Authorization: <your token> 5.3 \u77ed\u4fe1\u6a21\u677f\u4fee\u6539\u63a5\u53e3 \u00b6 \u63a5\u53e3\u5730\u5740 PATCH /api/templates/{template_id} \u53c2\u6570\u5b9a\u4e49 \u53c2\u6570 \u8bf4\u660e Required\uff08\u5fc5\u586b\uff09 template_id \u6a21\u677f\u7f16\u53f7 \u2714\ufe0f title \u6a21\u677f\u6807\u9898(\u5c11\u4e8e12\u4e2a\u5b57) content \u6a21\u677f\u5185\u5bb9\uff08\u6a21\u7248\u7b7e\u540d+\u6a21\u7248\u5185\u5bb9+2\u5c11\u4e8e350\u4e2a\u5b57\uff09 temp_sign \u6a21\u7248\u7b7e\u540d\uff083\uff5e8\u4e2a\u5b57\uff09 sign_location \u6a21\u7248\u7b7e\u540d\u4f4d\u7f6e (top,bottom) \u54cd\u5e94 200 OK { \"title\": \"hello\", \"temp_sign\": \"sign\", \"content\": \"content\", \"sign_location\": \"top\", \"type\": \"industry\", \"status\": \"review\", \"updated_at\": \"2017-04-10T03:31:18.000Z\", \"id\": 3, \"report_type\": \"vip\", \"owner\": { \"id\": 1, \"name\": \"taevas\", \"general\": 8000, \"vip\": 0, \"industry\": 4, \"marketing\": 0 } } \u54cd\u5e94\u503c\u8bf4\u660e \u53c2\u6570 \u8bf4\u660e title \u6a21\u677f\u6807\u9898 temp_sign \u6a21\u677f\u7b7e\u540d content \u6a21\u677f\u5185\u5bb9 status \u6a21\u677f\u72b6\u6001\uff08\u5ba1\u6838\u4e2d\u3001\u901a\u8fc7\u3001\u5931\u8d25) type \u77ed\u4fe1\u7c7b\u578b(\u8425\u9500\u3001\u884c\u4e1a) updated_at \u521b\u5efa\u65f6\u95f4 report_type \u5ba1\u6838\u7c7b\u578b\uff08\u514d\u7b7e, \u666e\u901a\uff09 id \u6a21\u677f\u7f16\u53f7 owner \u521b\u5efa\u8005\u4fe1\u606f owner.id \u7528\u6237\u7f16\u53f7 owner.name \u7528\u6237\u6635\u79f0 owner.general \u666e\u901a\u77ed\u4fe1\u5269\u4f59\u6761\u6570 owner.vip \u514d\u7b7e\u77ed\u4fe1\u5269\u4f59\u6761\u6570 owner.industry \u5df2\u53d1\u9001\u884c\u4e1a\u77ed\u4fe1\u6761\u6570 owner.marketing \u5df2\u53d1\u9001\u8425\u9500\u77ed\u4fe1\u6761\u6570 \u8bf7\u6c42\u793a\u4f8b PATCH https://sms-api.upyun.com/api/templates/3 Authorization: <your token> { \"title\": \"hello\" } 5.4 \u67e5\u8be2\u6a21\u677f\u63a5\u53e3 \u00b6 \u63a5\u53e3\u5730\u5740 GET https://sms-api.upyun.com/api/templates \u53c2\u6570\u5b9a\u4e49 \u53c2\u6570 \u8bf4\u660e Required\uff08\u5fc5\u586b\uff09 status \u6a21\u677f\u72b6\u6001 (review, success, defeat) type \u6a21\u677f\u7c7b\u578b (industry, marketing) report_type \u5ba1\u6838\u7c7b\u578b\uff08vip, general\uff09 \u54cd\u5e94 200 OK { \"templates\": [ { \"title\": \"hello\", \"temp_sign\": \"sign\", \"content\": \"content\", \"sign_location\": \"top\", \"type\": \"industry\", \"status\": \"review\", \"updated_at\": \"2017-04-10T03:31:18.000Z\", \"id\": 3, \"report_type\": \"vip\", \"owner\": { \"id\": 1, \"name\": \"taevas\", \"general\": 8000, \"vip\": 0, \"industry\": 4, \"marketing\": 0 } } ] } \u54cd\u5e94\u503c\u8bf4\u660e \u53c2\u6570 \u8bf4\u660e title \u6a21\u677f\u6807\u9898 temp_sign \u6a21\u677f\u7b7e\u540d content \u6a21\u677f\u5185\u5bb9 status \u6a21\u677f\u72b6\u6001\uff08\u5ba1\u6838\u4e2d\u3001\u901a\u8fc7\u3001\u5931\u8d25) type \u77ed\u4fe1\u7c7b\u578b(\u8425\u9500\u3001\u884c\u4e1a) updated_at \u521b\u5efa\u65f6\u95f4 report_type \u5ba1\u6838\u7c7b\u578b\uff08\u514d\u7b7e, \u666e\u901a\uff09 id \u6a21\u677f\u7f16\u53f7 owner \u521b\u5efa\u8005\u4fe1\u606f owner.id \u7528\u6237\u7f16\u53f7 owner.name \u7528\u6237\u6635\u79f0 owner.general \u666e\u901a\u77ed\u4fe1\u5269\u4f59\u6761\u6570 owner.vip \u514d\u7b7e\u77ed\u4fe1\u5269\u4f59\u6761\u6570 owner.industry \u5df2\u53d1\u9001\u884c\u4e1a\u77ed\u4fe1\u6761\u6570 owner.marketing \u5df2\u53d1\u9001\u8425\u9500\u77ed\u4fe1\u6761\u6570 \u8bf7\u6c42\u793a\u4f8b GET https://sms-api.upyun.com/api/templates?type=industry&report_type=vip Authorization: <your token> 5.5 \u77ed\u4fe1\u53d1\u9001\u63a5\u53e3 \u00b6 \u63a5\u53e3\u5730\u5740 POST https://sms-api.upyun.com/api/messages \u53c2\u6570\u5b9a\u4e49 \u53c2\u6570 \u8bf4\u660e Required\uff08\u5fc5\u586b\uff09 mobile \u624b\u673a\u53f7\uff0c\u9017\u53f7\u5206\u9694 \u2714\ufe0f template_id \u6a21\u677f\u7f16\u53f7 \u2714\ufe0f vars \u77ed\u4fe1\u53c2\u6570\uff08\u4ee5 | \u5206\u9694\uff09 \u54cd\u5e94 200 OK { \"message_ids\": [ { \"error_code\": \"ILLEGAL_MOBILE\", \"mobile\": \"15757\" }, { \"message_id\": 30, \"mobile\": \"15757654321\u201d } ] } \u54cd\u5e94\u503c\u8bf4\u660e \u53c2\u6570 \u8bf4\u660e message_ids \u7ed9\u6240\u6709\u624b\u673a\u53f7\u53d1\u9001\u77ed\u4fe1\u7684\u7ed3\u679c error_code \u9519\u8bef\u60c5\u51b5 message_id message \u7f16\u53f7 mobile \u624b\u673a\u53f7 \u8bf7\u6c42\u793a\u4f8b POST https://sms-api.upyun.com/api/messages Authorization: <your token> { \"template_id\": 2, \"mobile\": \"15757,15757654321\u201d } 5.6 \u77ed\u4fe1\u62a5\u8868\u67e5\u8be2\u63a5\u53e3 \u00b6 \u63a5\u53e3\u5730\u5740 GET https://sms-api.upyun.com/api/messages \u53c2\u6570\u5b9a\u4e49 \u53c2\u6570 \u8bf4\u660e Required\uff08\u5fc5\u586b\uff09 date \u65e5\u671f mobile \u624b\u673a\u53f7 status \u6d88\u606f\u53d1\u9001\u7684\u72b6\u6001 page \u9875\u7801 per_page \u6bcf\u9875\u663e\u793a\u6570\u91cf \u54cd\u5e94 200 OK { \"messages\": [ { \"id\": 4, \"template_id\": 2, \"report_type\": \"vip\", \"title\": \"\u6d4b\u8bd5\u6d4b\u8bd5\", \"type\": \"industry\", \"content\": \"hello\uff0chello\", \"temp_sign\": \"\u843d\u5b50\u6642\", \"mobile\": \"15757654321\u201d, \"sent_at\": null, \"created_at\": \"2017-04-07T08:47:37.000Z\", \"status\": \"processing\", \"quantity\": 1, \"owner\": { \"id\": 1, \"name\": \"taevas\", \"general\": 8000, \"vip\": 0, \"industry\": 4, \"marketing\": 0 } } { \"id\": 2, \"template_id\": 2, \"report_type\": \"vip\", \"title\": \"\u6d4b\u8bd5\u6d4b\u8bd5\", \"type\": \"industry\", \"content\": \"hello\uff0chello\u3010\u843d\u5b50\u6642\u3011\", \"temp_sign\": \"\u843d\u5b50\u6642\", \"mobile\": \"15757123456\u201d, \"sent_at\": \"2017-04-06T08:36:01.000Z\", \"created_at\": \"2017-04-06T08:36:00.000Z\", \"status\": \"success\", \"quantity\": 1, \"owner\": { \"id\": 1, \"name\": \"taevas\", \"general\": 8000, \"vip\": 0, \"industry\": 4, \"marketing\": 0 } } ], \"total\": 2 } \u54cd\u5e94\u503c\u8bf4\u660e \u53c2\u6570 \u8bf4\u660e id \u77ed\u4fe1\u7f16\u53f7 template_id \u6a21\u677f\u7f16\u53f7 report_type \u5ba1\u6838\u7c7b\u578b title \u6a21\u677f\u6807\u9898 type \u77ed\u4fe1\u7c7b\u578b(\u8425\u9500\u3001\u884c\u4e1a) content \u6a21\u677f\u5185\u5bb9 temp_sign \u6a21\u677f\u7b7e\u540d mobile \u624b\u673a\u53f7 sent_at \u53d1\u9001\u65f6\u95f4 created_at \u521b\u5efa\u65f6\u95f4 status \u77ed\u4fe1\u53d1\u9001\u72b6\u6001 owner \u521b\u5efa\u8005\u4fe1\u606f owner.id \u7528\u6237\u7f16\u53f7 owner.name \u7528\u6237\u6635\u79f0 owner.general \u666e\u901a\u77ed\u4fe1\u5269\u4f59\u6761\u6570 owner.vip \u514d\u7b7e\u77ed\u4fe1\u5269\u4f59\u6761\u6570 owner.industry \u5df2\u53d1\u9001\u884c\u4e1a\u77ed\u4fe1\u6761\u6570 owner.marketing \u5df2\u53d1\u9001\u8425\u9500\u77ed\u4fe1\u6761\u6570 \u8bf7\u6c42\u793a\u4f8b curl -H \"Authorization: <your token>\" https://sms-api.upyun.com/api/messages?mobile=15757654321 6. \u9519\u8bef\u7801 \u00b6 6.1 \u9519\u8bef\u7801\u5217\u8868 \u00b6 \u9519\u8bef\u7801 \u8bf4\u660e \u72b6\u6001\u7801 INVALID_FILE \u6587\u4ef6\u4e0d\u5b58\u5728\u6216\u5927\u5c0f\u683c\u5f0f\u4e0d\u7b26\u5408\u89c4\u8303 400 MISSING_PARAMETER \u5fc5\u586b\u9879\u4e3a\u7a7a 400 INVALID_CREDENTIALS \u65e0\u6548\u7684\u8ba4\u8bc1 401 REQUIRE_TEMPLATE_OWNER \u6ca1\u6709\u6a21\u677f\u7684\u6743\u9650 403 REQUIRE_SIGNATURE_OWNER \u6ca1\u6709\u7b7e\u540d\u7684\u6743\u9650 403 USER_NOT_FOUND \u7528\u6237\u4e0d\u5b58\u5728 404 TEMPLATE_NOT_FOUND \u6a21\u677f\u4e0d\u5b58\u5728 404 NOT_FOUND \u9875\u9762\u4e0d\u5b58\u5728 404 INSUFFICIENT_FUNDS \u77ed\u4fe1\u989d\u5ea6\u4e0d\u8db3\uff0c\u8bf7\u5145\u503c 409 MOBILE_LIMIT \u624b\u673a\u53f7\u6570\u91cf\u4e0a\u9650 409 ILLEGAL_MOBILE \u624b\u673a\u53f7\u65e0\u6548 409 ILLEGAL_PARAMER \u53c2\u6570\u65e0\u6548 409 TEMPLATE_LIMIT \u6a21\u677f\u6570\u91cf\u8fbe\u5230\u4e0a\u9650 409 TEMPLATE_AUDITING \u6a21\u677f\u6b63\u5728\u5ba1\u6838\uff0c\u65e0\u6cd5\u4f7f\u7528 409 TEMPLATE_NOT_AUDITED \u6a21\u677f\u672a\u5ba1\u6838 409 ILLEGAL_SIGNATURE \u6a21\u7248\u7b7e\u540d\u957f\u5ea6\u4e0d\u5408\u6cd5\uff0c\u5fc5\u987b\u4e3a3\uff5e8\u4e2a\u5b57 409 ILLEGAL_TITLE \u6a21\u7248\u6807\u9898\u957f\u5ea6\u4e0d\u5408\u6cd5\uff0c\u5fc5\u987b\u5c0f\u4e8e12\u4e2a\u5b57 409 TEMPLATE_FAILED \u6a21\u677f\u5ba1\u6838\u5931\u8d25\uff0c\u8bf7\u91cd\u65b0\u63d0\u4ea4 409 ILLEGAL_CONTENT_LENGTH \u6a21\u7248\u5185\u5bb9\u957f\u5ea6\u4e0d\u5408\u6cd5\uff0c\u7b7e\u540d+\u5185\u5bb9\u5fc5\u987b\u5c0f\u4e8e348\u4e2a\u5b57 409 ILLEGAL_REPORT_TYPE \u65e0\u6548\u7684\u5ba1\u6838\u7c7b\u578b 409 ILLEGAL_TEMPLATE_ID \u65e0\u6548\u7684\u6a21\u677f\u7f16\u53f7 422 SMS_SYSTEM_ERROR SMS \u670d\u52a1\u5f02\u5e38 500 SYSTEM_ERROR \u7cfb\u7edf\u9519\u8bef 500 6.2 \u9519\u8bef\u7801\u54cd\u5e94 \u00b6 400 Bad Request { \u201cerror_code\u201d: \u201cINVALID_FILE\u201d, \u201cmessage\u201d: \u201c\u6587\u4ef6\u4e0d\u5b58\u5728\u6216\u5927\u5c0f\u683c\u5f0f\u4e0d\u7b26\u5408\u89c4\u8303\u201d } 6.3 \u54cd\u5e94\u8bf4\u660e \u00b6 \u53c2\u6570 \u8bf4\u660e \u72b6\u6001\u7801 error_code \u4ec5\u51fa\u73b0\u5728\u9519\u8bef\u7801\u5217\u8868\u4e2d message \u989d\u5916\u7684\u63cf\u8ff0\uff0c\u4e0d\u4e0e\u9519\u8bef\u7801\u5217\u8868\u4e2d\u7684\u8bf4\u660e\u76f8\u5339\u914d 7. \u53d1\u9001\u5931\u8d25\u539f\u56e0\u67e5\u8be2 \u00b6 \u56e0\u8fd0\u8425\u5546\u5404\u4e2a\u7f51\u5173\u9488\u5bf9\u9519\u8bef\u7801\u5b9a\u4e49\u4e0d\u540c, \u8fd4\u56de\u7684\u542b\u4e49\u4e5f\u4e0d\u5c3d\u76f8\u540c\u6240\u4ee5\u8be5\u9519\u539f\u56e0\u67e5\u8be2\u5747\u4e3a\u7ecf\u9a8c\u503c, \u4ec5\u4f9b\u53c2\u8003\u3002 \u5982\u9700\u4e86\u89e3\u8be6\u7ec6\u539f\u56e0\uff0c\u8bf7\u8054\u7cfb\u5ba2\u670d\u3002 \u9644\u4ef6\uff1a \u53d1\u9001\u539f\u56e0\u67e5\u8be2\u5217\u8868 8. \u5e38\u7528\u8bed\u8a00\u793a\u4f8b\u4ee3\u7801 \u00b6 PHP \u53d1\u9001\u793a\u4f8b\u4ee3\u7801 <?php // \u6ce8\u610f\uff1a\u9700\u8981\u66ff\u6362\u8fd9\u91cc\u7684\u8bf7\u6c42\u53c2\u6570\u548c $options['http']['header'] \u4e2d\u7684 token $msg['mobile']='135xxxxxxxx'; // \u5fc5\u586b\u53c2\u6570\uff0c\u591a\u4e2a\u624b\u673a\u53f7\u4f7f\u7528\u9017\u53f7\u5206\u9694 $msg['template_id'] = 1; // \u5fc5\u586b\u53c2\u6570\uff0c\u77ed\u4fe1\u6a21\u677f ID $msg['vars'] = 'a|b'; // \u9009\u586b\u53c2\u6570\uff0c\u6a21\u677f\u53d8\u91cf $url = 'https://sms-api.upyun.com/api/messages'; $options = array( 'http' => array( 'header' => \"Content-type: application/x-www-form-urlencoded\\r\\nAuthorization: <YOUR_TOKEN>\", 'method' => 'POST', 'content' => http_build_query($msg) ) ); $context = stream_context_create($options); $result = file_get_contents($url, false, $context); JAVA \u53d1\u9001\u793a\u4f8b\u4ee3\u7801 URL url = new URL(\"https://sms-api.upyun.com/api/messages\"); //\u8bbe\u7f6e JSON \u53c2\u6570 JSONObject object = new JSONObject(); object.put(\"template_id\", 1); object.put(\"mobile\", \"135xxxxxxxx\"); HttpURLConnection conn = (HttpURLConnection) url.openConnection(); // \u8bbe\u7f6e\u5fc5\u8981\u53c2\u6570 conn.setConnectTimeout(10000); conn.setUseCaches(false); conn.setDoOutput(true); conn.setRequestMethod(\"POST\"); conn.setRequestProperty(\"Connection\", \"Keep-Alive\"); conn.setRequestProperty(\"Authorization\", \"<YOUR_TOKEN>\"); conn.setRequestProperty(\"Content-type\", \"application/json\"); // \u521b\u5efa\u94fe\u63a5 conn.connect(); OutputStream os = conn.getOutputStream(); os.write(object.toString().getBytes(\"UTF-8\")); //Gets the status code from an HTTP response message int code = conn.getResponseCode(); InputStreamReader reader = new InputStreamReader(conn.getInputStream()); BufferedReader br = new BufferedReader(reader); char[] chars = new char[1024]; int length = 0; StringBuilder result = new StringBuilder(); while ((length = br.read(chars)) != -1) { result.append(chars, 0, length); } System.out.println(\"code:\" + code + \"::\" + result.toString());","title":"\u77ed\u4fe1\u670d\u52a1"},{"location":"sms/#1","text":"","title":"1. \u4ecb\u7ecd"},{"location":"sms/#11","text":"\u53c8\u62cd\u4e91\u77ed\u4fe1\u670d\u52a1\u901a\u8fc7\u5bf9\u7f51\u7edc\u670d\u52a1\u8d44\u6e90\u7edf\u4e00\u7ba1\u7406\u548c\u8c03\u5ea6\uff0c\u4e09\u7f51\u5408\u4e00\uff0c\u5168\u7f51\u8986\u76d6\uff0c\u91c7\u7528\u884c\u4e1a\u4e13\u7528\u901a\u9053\uff0c\u4e3a\u7528\u6237\u63d0\u4f9b\u4f01\u4e1a\u7ea7\u77ed\u4fe1\u9001\u8fbe\u670d\u52a1\u3002","title":"1.1 \u53c8\u62cd\u4e91\u77ed\u4fe1\u4ecb\u7ecd"},{"location":"sms/#12","text":"\u53c8\u62cd\u4e91\u76ee\u524d\u53ef\u63d0\u4f9b\u7684\u77ed\u4fe1\u901a\u9053\u5206\u4e3a\u4e24\u5927\u7c7b\uff1a\u514d\u5ba1\u7b7e\u540d\u901a\u9053\u4e0e\u666e\u901a\u7b7e\u540d\u901a\u9053\uff0c\u4e24\u79cd\u901a\u9053\u6309\u7c7b\u578b\u53c8\u5206\u4e3a\u884c\u4e1a\u77ed\u4fe1\u4e0e\u8425\u9500\u77ed\u4fe1\u3002 \u77ed\u4fe1\u7684\u7ec4\u6210\u7531\u77ed\u4fe1\u6a21\u677f\u5185\u5bb9+\u77ed\u4fe1\u7b7e\u540d\u7ec4\u6210\uff0c\u77ed\u4fe1\u957f\u5ea6\u9650\u5236\u4e3a 350 \u5b57\u3002","title":"1.2 \u53c8\u62cd\u4e91\u77ed\u4fe1\u7ec4\u6210"},{"location":"sms/#13","text":"1. \u53c8\u62cd\u4e91\u77ed\u4fe1\u6a21\u677f\u5206\u4e3a\u4e24\u79cd\uff0c\u884c\u4e1a\u77ed\u4fe1\u4e0e\u8425\u9500\u77ed\u4fe1\u6a21\u677f\uff0c\u4e24\u7c7b\u6a21\u677f\u6700\u5927\u7684\u533a\u522b\u5c31\u662f\u8425\u9500\u77ed\u4fe1\u5c3e\u90e8\u987b\u6dfb\u52a0\u201c\u9000\u8ba2\u56deT\u3001\u9000\u8ba2\u56deTD\u6216\u9000\u8ba2\u56deN\u201d\u5b57\u6837\u3002 2. \u53c8\u62cd\u4e91\u77ed\u4fe1\u63d0\u4f9b\u7684\u6a21\u677f\u77ed\u4fe1\u7531\u56fa\u5b9a\u5185\u5bb9\u4e0e\u591a\u4e2a\u53d8\u91cf\u6784\u6210\uff0c\u53d8\u91cf\u683c\u5f0f\u4e3a\uff08{$var1}\uff0c{$var2}\u2026\uff09\uff0c\u53d8\u91cf\u5185\u5bb9\u53ef\u4ee5\u662f\u6c49\u5b57\u3001\u5b57\u6bcd\u3001\u6570\u5b57\u6216\u8005\u7279\u6b8a\u5b57\u7b26\u81ea\u5408\u3002 3. \u5df2\u5ba1\u6838\u901a\u8fc7\u7684\u77ed\u4fe1\u6a21\u677f\uff0c\u82e5\u9700\u4fee\u6539\u6a21\u677f\u91cd\u65b0\u63d0\u4ea4\u5ba1\u6838\uff0c\u5728\u5ba1\u6838\u671f\u95f4\u65e0\u6cd5\u4f7f\u7528\uff0c\u9700\u91cd\u65b0\u5ba1\u6838\u901a\u8fc7\u624d\u53ef\u4f7f\u7528\u3002 4. \u6bcf\u79cd\u901a\u9053\u53ef\u5206\u522b\u521b\u5efa\u6a21\u677f\u4e0a\u9650\u4e3a 40 \u4e2a\u3002 5. \u884c\u4e1a\u77ed\u4fe1\u6a21\u677f\u4e2d\uff0c\u5355\u4e2a\u624b\u673a\u53f7\u6bcf\u5929\u80fd\u63a5\u6536\u7684\u77ed\u4fe1\u6b21\u6570\u4e3a 10 \u6b21\uff0c\u8425\u9500\u77ed\u4fe1\u65e0\u9650\u5236\u3002 6. \u77ed\u4fe1\u5185\u5bb9\u4e0d\u80fd\u542b\u6709\u653f\u6cbb\u654f\u611f\u5b57\u773c\u548c\u201c\u9ec4\u8d4c\u6bd2\u201d\u7b49\u4f4e\u4fd7\u654f\u611f\u5b57\u6837\uff0c\u51fa\u73b0\u8fdd\u6cd5\u8fdd\u89c4\u6216\u635f\u5bb3\u76f8\u5173\u4ed6\u4eba\u6743\u76ca\u7684\uff0c\u5e73\u53f0\u5c06\u4fdd\u7559\u6700\u7ec8\u8ffd\u7a76\u7684\u6743\u5229\u3002 7. \u4e0d\u652f\u6301\u5168\u53d8\u91cf\u77ed\u4fe1\u6a21\u677f\uff0c\u8bf7\u5c06\u77ed\u4fe1\u5185\u5bb9\u7684\u7ed3\u6784\u5b89\u6392\u5408\u7406\u3002 8. \u8bf7\u60a8\u907f\u514d\u5728\u77ed\u4fe1\u6b63\u6587\u4e2d\u4f7f\u7528 \u201c\u3010 \u201d \uff0c \u201c \u3011\u201d\uff0c\u201c<\u201d\uff0c\u201c>\u201d \u7b49\u7279\u6b8a\u5b57\u7b26\u3002","title":"1.3 \u53c8\u62cd\u4e91\u77ed\u4fe1\u6a21\u677f"},{"location":"sms/#14","text":"1. \u6bcf\u79cd\u901a\u9053\u7684\u77ed\u4fe1\u7b7e\u540d\u6700\u591a\u53ef\u521b\u5efa 20 \u4e2a\u7b7e\u540d\u3002 2. \u5355\u4e2a\u7b7e\u540d\u957f\u5ea6\u4ecb\u4e8e 3-8 \u4e2a\u5b57\u7b26\u4e4b\u95f4\uff1b 3. \u4e0d\u80fd\u542b\u8fdd\u7981\u5173\u952e\u5b57\uff0c\u4e0d\u80fd\u6709\u4efb\u4f55\u7279\u6b8a\u7b26\u53f7\uff08\u5982-.+.#); 4. \u65e0\u9700\u6dfb\u52a0\u3010\u3011\u7b26\u53f7\uff0c\u7cfb\u7edf\u5c06\u81ea\u52a8\u751f\u6210\u3002","title":"1.4 \u53c8\u62cd\u4e91\u77ed\u4fe1\u7b7e\u540d"},{"location":"sms/#15","text":"\u6bcf\u6761\u77ed\u4fe1\u5185\u5bb9\uff08\u5305\u62ec\u4f46\u4e0d\u9650\u4e8e\u6807\u70b9\u7b26\u53f7\u3001\u82f1\u6587\u5b57\u7b26\u3001\u6c49\u5b57\u7b49\uff09\u957f\u5ea6\u4e3a70\u4e2a\u5b57\u7b26\uff08\u5305\u542b\u7b7e\u540d\uff09\u5982\u53d1\u9001\u77ed\u4fe1\u5185\u5bb9\u8d85\u51fa 70 \u4e2a\u5b57\u7b26\uff0c\u5c06\u4ee5\u6bcf 67 \u5b57\u7b26\uff08\u5305\u62ec\u4f46\u4e0d\u9650\u4e8e\u6807\u70b9\u7b26\u53f7\u3001\u82f1\u6587\u5b57\u7b26\u3001\u6c49\u5b57\u7b49\uff09\u4e3a\u4e00\u6761\u77ed\u4fe1\u8fdb\u884c\u7d2f\u8ba1\u8ba1\u8d39\u3002\u5355\u6761\u77ed\u4fe1\u5b57\u7b26\u6570\u6700\u5927\u503c\u4e3a 350 \u4e2a\u5b57\u3002\u77ed\u4fe1\u670d\u52a1\u7684\u4ed8\u8d39\u65b9\u5f0f\u4e3a\u77ed\u4fe1\u8d44\u6e90\u5305\u8ba1\u8d39\uff0c\u6309\u7167\u77ed\u4fe1\u53d1\u9001\u6210\u529f\u91cf\u8fdb\u884c\u77ed\u4fe1\u6761\u6570\u7684\u6263\u9664\uff0c\u53d1\u9001\u591a\u5c11\u5373\u6263\u9664\u77ed\u4fe1\u8d44\u6e90\u5305\u5185\u5bf9\u5e94\u7684\u6761\u6570\u3002","title":"1.5 \u8ba1\u8d39\u6807\u51c6"},{"location":"sms/#16","text":"\u8fdb\u5165\u603b\u7ba1\u7406\u540e\u53f0\u4e2d\u3010\u4e91\u4ea7\u54c1\u3011-\u3010\u77ed\u4fe1\u670d\u52a1\u3011-\u3010\u5145\u503c\u3011-\u3010\u77ed\u4fe1\u5305\u7ba1\u7406\u3011\u4e2d\u8fdb\u884c\u5145\u503c\u8d2d\u4e70\u3002","title":"1.6 \u8d2d\u4e70\u6d41\u7a0b"},{"location":"sms/#2","text":"","title":"2. \u77ed\u4fe1\u63a5\u5165"},{"location":"sms/#21","text":"\u77ed\u4fe1\u670d\u52a1\u5c5e\u4e8e\u6536\u8d39\u529f\u80fd\uff0c\u7528\u6237\u53ef\u6839\u636e\u81ea\u8eab\u9700\u6c42\u901a\u8fc7\u8d2d\u4e70\u77ed\u4fe1\u8d44\u6e90\u5305\u8fdb\u884c\u4f7f\u7528\uff0c\u4e0d\u652f\u6301\u81ea\u9009\u77ed\u4fe1\u5305\u3002","title":"2.1 \u63a5\u5165\u8bf4\u660e"},{"location":"sms/#22","text":"1. \u6ce8\u518c\u53c8\u62cd\u4e91\u8d26\u53f7\uff08\u5df2\u6709\u53c8\u62cd\u4e91\u8d26\u53f7\u65e0\u9700\u6ce8\u518c\uff09 2. \u8fdb\u884c\u5b9e\u540d\u8ba4\u8bc1 3. \u521b\u5efa\u6a21\u677f 4. \u53d1\u9001\u77ed\u4fe1","title":"2.2 \u63a5\u5165\u6b65\u9aa4"},{"location":"sms/#23","text":"\u7528\u6237\u82e5\u9700\u5f00\u901a\u77ed\u4fe1\u670d\u52a1\uff0c\u9700\u5148\u5728\u5b98\u7f51\u6ce8\u518c\u53c8\u62cd\u4e91\u8d26\u53f7\uff0c\u5b98\u7f51\u5730\u5740\u5982\u4e0b: https://www.upyun.com/ ,\u521b\u5efa\u5b8c\u6210\u540e\u5b8c\u6210\u5b9e\u540d\u8ba4\u8bc1\uff0c\u5373\u53ef\u7533\u8bf7\u5f00\u901a\u3002\uff08\u5df2\u6709\u8d26\u53f7\u9700\u5b8c\u6210\u5b9e\u540d\u8ba4\u8bc1\u540e\u5373\u53ef\u5f00\u901a\u77ed\u4fe1\u670d\u52a1\uff09","title":"2.3 \u6ce8\u518c\u53c8\u62cd\u4e91\u8d26\u53f7"},{"location":"sms/#24","text":"\u6ce8\u518c\u6210\u529f\u53c8\u62cd\u4e91\u8d26\u53f7\u4e4b\u540e\uff0c\u5373\u53ef\u901a\u8fc7\u540e\u53f0\u7684\u3010\u4e91\u4ea7\u54c1\u3011-\u3010\u77ed\u4fe1\u670d\u52a1\u3011\u5165\u53e3\u8fdb\u5165\u77ed\u4fe1\u670d\u52a1\u754c\u9762\u3002\u77ed\u4fe1\u670d\u52a1\u9700\u5b8c\u6210\u5b9e\u540d\u8ba4\u8bc1\u540e\u624d\u53ef\u5f00\u901a\uff0c\u4e2a\u4eba\u7528\u6237\u9700\u5b8c\u6210\u4e2a\u4eba\u5b9e\u540d\u8ba4\u8bc1\uff0c\u4f01\u4e1a\u7528\u6237\u9700\u5b8c\u6210\u4f01\u4e1a\u5b9e\u540d\u8ba4\u8bc1\u3002 \u5b9e\u540d\u8ba4\u8bc1\u754c\u9762","title":"2.4 \u5b9e\u540d\u8ba4\u8bc1"},{"location":"sms/#25","text":"\u521b\u5efa\u6a21\u677f\u53ef\u5206\u522b\u521b\u5efa\u666e\u901a\u7b7e\u540d\u901a\u9053\u4e0e\u514d\u5ba1\u7b7e\u540d\u901a\u9053\u7684\u6a21\u677f\uff0c\u6a21\u677f\u7c7b\u578b\u5206\u4e3a\u884c\u4e1a\u77ed\u4fe1\u4e0e\u8425\u9500\u77ed\u4fe1\uff0c \u7279\u522b\u6ce8\u610f\u7684\u662f\u8425\u9500\u77ed\u4fe1\u5c3e\u90e8\u987b\u6dfb\u52a0\u201c\u9000\u8ba2\u56deT\u3001\u9000\u8ba2\u56deTD\u6216\u9000\u8ba2\u56deN\u201d\u5b57\u6837\uff0c\u5426\u5219\u4f1a\u53d1\u9001\u5931\u8d25\u3002 \u7528\u6237\u70b9\u51fb\u7ba1\u7406\u540e\u53f0\u7684\u3010\u4e91\u4ea7\u54c1\u3011-\u3010\u77ed\u4fe1\u670d\u52a1\u3011-\u3010\u6a21\u677f\u3011-\u3010\u521b\u5efa\u6a21\u677f\u3011\u8fdb\u884c\u6a21\u677f\u521b\u5efa\u3002 \u7528\u6237\u521b\u5efa\u597d\u6a21\u677f\u4e4b\u540e\uff0c\u7ba1\u7406\u5458\u8fdb\u884c\u5ba1\u6838\uff08\u514d\u7b7e\u901a\u9053\u65e0\u9700\u62a5\u5907\u7b7e\u540d\uff0c\u53ea\u9700\u5ba1\u6838\u6a21\u677f\uff0c\u975e\u7279\u6b8a\u60c5\u51b5\u4e0b\uff0c\u5ba1\u6838\u65f6\u95f4\u4e3a\u5de5\u4f5c\u65e5\u5185\u7684 1-3 \u5c0f\u65f6\uff1b\u666e\u901a\u901a\u9053\u975e\u7279\u6b8a\u60c5\u51b5\u4e0b\u5ba1\u6838\u65f6\u95f4\u4e3a 4-5 \u4e2a\u5de5\u4f5c\u65e5\uff0c\u82e5\u7b7e\u540d\u5df2\u62a5\u5907\u8fc7\uff0c\u5219\u4e5f\u662f\u5de5\u4f5c\u65e5\u5185\u7684 1-3 \u5c0f\u65f6\uff09\uff0c\u5ba1\u6838\u901a\u8fc7\u540e\u7528\u6237\u53ef\u4ee5\u4f7f\u7528\u540e\u53f0\u5bfc\u5165\u754c\u9762\u6216\u8c03\u7528\u53d1\u9001\u77ed\u4fe1\u63a5\u53e3\u8fdb\u884c\u53d1\u9001\u3002","title":"2.5 \u521b\u5efa\u6a21\u677f"},{"location":"sms/#26","text":"\u5728\u6a21\u677f\u5ba1\u6838\u901a\u8fc7\u4e4b\u540e\uff0c\u5c31\u53ef\u4ee5\u901a\u8fc7\u540e\u53f0\u5bfc\u5165\u754c\u9762\u6216\u8c03\u7528\u63a5\u53e3\uff08\u5177\u4f53\u63a5\u53e3\u4f7f\u7528\u65b9\u5f0f\u89c1\u63a5\u53e3\u6587\u6863\uff09\u8fdb\u884c\u77ed\u4fe1\u53d1\u9001\u3002 \u7528\u6237\u901a\u8fc7\u70b9\u51fb\u7ba1\u7406\u540e\u53f0\u7684\u3010\u5bfc\u5165\u3011-\u3010\u641c\u7d22\u3011-\u3010\u5bfc\u5165\u6587\u4ef6\u3011-\u3010\u63d0\u4ea4\u3011\u8fdb\u884c\u77ed\u4fe1\u53d1\u9001\u3002 \u9009\u62e9\u5177\u4f53\u6240\u9700\u7684\u901a\u9053\u3001\u77ed\u4fe1\u7c7b\u578b\u4ee5\u53ca\u6a21\u677f\u4e4b\u540e\uff0c\u5c31\u53ef\u4ee5\u901a\u8fc7\u5bfc\u5165 txt \u6216\u8005 csv \u683c\u5f0f\u7684\u6587\u672c\u6587\u4ef6\u8fdb\u884c\u53d1\u9001\u3002\u6587\u672c\u683c\u5f0f\u7b2c\u4e00\u5217\u4e3a\u624b\u673a\u53f7\uff0c2-5 \u5217\u586b\u53d8\u91cf\u53c2\u6570\uff0c\u65e0\u53d8\u91cf\u53c2\u6570\u7559\u7a7a\uff0ctxt \u4e0e csv \u9700\u7528\u82f1\u6587\u201c,\u201d\u5206\u9694\u5404\u5217\u3002\u6587\u672c\u683c\u5f0f\u5982\u4e0b\u56fe\uff1a \u5bfc\u5165\u5b8c\u6587\u4ef6\u540e\uff0c\u70b9\u63d0\u4ea4\u5373\u53ef\u5b8c\u6210\u77ed\u4fe1\u53d1\u9001\u3002","title":"2.6 \u53d1\u9001\u77ed\u4fe1"},{"location":"sms/#3","text":"","title":"3. \u6570\u636e\u7edf\u8ba1"},{"location":"sms/#31","text":"\u53c8\u62cd\u4e91\u77ed\u4fe1\u670d\u52a1\u5c5e\u4e8e\u9884\u4ed8\u8d39\u670d\u52a1\uff0c\u9700\u63d0\u524d\u8d2d\u4e70\u77ed\u4fe1\u8d44\u6e90\u5305\u4e4b\u540e\u65b9\u53ef\u4f7f\u7528\u3002\u8d2d\u4e70\u77ed\u4fe1\u8d44\u6e90\u5305\u4e4b\u540e\uff0c\u91d1\u989d\u4f1a\u81ea\u52a8\u8f6c\u5316\u4e3a\u77ed\u4fe1\u53ef\u4f7f\u7528\u6761\u6570\u3002\u5728\u7edf\u8ba1\u7528\u6237\u77ed\u4fe1\u6761\u6570\u65f6\uff0c\u82e5\u77ed\u4fe1\u53d1\u9001\u5931\u8d25\uff0c\u5219\u4e0d\u6263\u9664\u4f7f\u7528\u6761\u6570\u3002","title":"3.1 \u77ed\u4fe1\u8d44\u6e90\u5305"},{"location":"sms/#32","text":"\u5728\u53d1\u9001\u660e\u7ec6\u4e2d\uff0c\u53ef\u4ee5\u6839\u636e\u6240\u53d1\u9001\u77ed\u4fe1\u7684\u624b\u673a\u53f7\u3001\u53d1\u9001\u72b6\u6001\u3001\u65f6\u95f4\uff0c\u67e5\u8be2\u6240\u6709\u77ed\u4fe1\u7684\u53d1\u9001\u72b6\u6001\u3002","title":"3.2 \u62a5\u8868\u7edf\u8ba1"},{"location":"sms/#4","text":"1. \u77ed\u4fe1\u6a21\u677f\u6700\u591a\u652f\u6301\u521b\u5efa\u591a\u5c11\u4e2a\uff1f \u7b54\uff1a\u5355\u4e2a\u901a\u9053\u4e0b\u7684\u6a21\u677f\u4e0a\u9650\u4e3a40\u4e2a\uff0c\u5373\u666e\u901a\u7b7e\u540d\u901a\u9053\u4e0e\u514d\u5ba1\u7b7e\u540d\u901a\u9053\u7684\u6a21\u677f\u4e0a\u9650\u5404\u4e3a40\u4e2a\u3002 2. \u77ed\u4fe1\u8d85\u51fa\u5b57\u6570\u5982\u4f55\u6536\u8d39\uff1f \u7b54\uff1a\u6bcf\u6761\u77ed\u4fe1\u5185\u5bb9\uff08\u5305\u62ec\u4f46\u4e0d\u9650\u4e8e\u6807\u70b9\u7b26\u53f7\u3001\u82f1\u6587\u5b57\u7b26\u3001\u6c49\u5b57\u7b49\uff09\u957f\u5ea6\u4e3a70\u4e2a\u5b57\u7b26\uff08\u5305\u542b\u7b7e\u540d\uff09\u5982\u53d1\u9001\u77ed\u4fe1\u5185\u5bb9\u8d85\u51fa70\u4e2a\u5b57\u7b26\uff0c\u5c06\u4ee5\u6bcf67\u5b57\u7b26\uff08\u5305\u62ec\u4f46\u4e0d\u9650\u4e8e\u6807\u70b9\u7b26\u53f7\u3001\u82f1\u6587\u5b57\u7b26\u3001\u6c49\u5b57\u7b49\uff09\u4e3a\u4e00\u6761\u77ed\u4fe1\u8fdb\u884c\u7d2f\u8ba1\u8ba1\u8d39\u3002\u5355\u6761\u77ed\u4fe1\u5b57\u7b26\u6570\u6700\u5927\u503c\u4e3a350\u4e2a\u5b57\u3002 3. \u77ed\u4fe1\u6a21\u677f\u5982\u4f55\u521b\u5efa\uff1f \u7b54\uff1a\u5728\u7ba1\u7406\u540e\u53f0\u3010\u77ed\u4fe1\u670d\u52a1\u3011-\u3010\u6a21\u677f\u3011-\u3010\u521b\u5efa\u6a21\u677f\u3011\u4e2d\u521b\u5efa\u3002 4. \u77ed\u4fe1\u8d44\u6e90\u5305\u53ef\u9000\u6b3e\u5417\uff1f \u7b54\uff1a\u77ed\u4fe1\u8d44\u6e90\u5305\u5728\u8d2d\u4e70\u6210\u529f\u540e\u4e0d\u652f\u6301\u9000\u6b3e\uff0c\u5efa\u8bae\u60a8\u6309\u9700\u8d2d\u4e70\u3002 5. \u77ed\u4fe1\u53d1\u9001\u6210\u529f\uff0c\u4f46\u5b9e\u9645\u672a\u80fd\u6536\u5230\u77ed\u4fe1\u662f\u4ec0\u4e48\u539f\u56e0\uff1f \u7b54\uff1a 1\uff09\u624b\u673a\u662f\u5426\u957f\u65f6\u95f4\u672a\u5173\u673a\uff0c\u53ef\u4ee5\u91cd\u542f\u4e0b\uff1b 2\uff09\u662f\u5426\u662f\u53cc\u5361\u53cc\u5f85\u624b\u673a\uff0c\u6362\u4e2a\u5361\u69fd\u8bd5\u8bd5\uff1b 3\uff09\u662f\u90fd\u5b89\u88c5\u4e86\u5b89\u5168\u8f6f\u4ef6\uff0c\u77ed\u4fe1\u88ab\u62e6\u622a\u5230\u5783\u573e\u4fe1\u7bb1\u4e2d\uff1b 4\uff09\u662f\u90fd\u5904\u4e8e\u505c\u673a\u72b6\u6001\uff1b 5\uff09\u51fa\u4e8e\u9ed1\u540d\u5355\u72b6\u6001\uff0c\u6295\u8bc9\u8fc7\u8fd0\u8425\u5546\uff0c\u6216\u9000\u8ba2\u8fc7\u4e1a\u52a1\uff1b 6. \u77ed\u4fe1\u53d1\u9001\u5931\u8d25\uff0c\u8fd8\u4f1a\u6263\u8d39\u5417\uff1f \u7b54\uff1a\u4e0d\u4f1a\uff0c\u77ed\u4fe1\u53d1\u9001\u5931\u8d25\u7684\u8bdd\u4e0d\u4f1a\u6263\u8d39\u3002 7. \u77ed\u4fe1\u652f\u6301\u4e09\u7f51\u90fd\u53ef\u53d1\u9001\u5417\uff1f \u7b54\uff1a\u652f\u6301\u3002 8. \u53d8\u91cf\u4e2d\u662f\u5426\u53ef\u4ee5\u76f4\u63a5\u5199\u7f51\u7ad9\u94fe\u63a5\uff1f \u7b54\uff1a\u53ef\u4ee5\u3002","title":"4. \u5e38\u89c1\u95ee\u9898"},{"location":"sms/#5","text":"","title":"5. \u63a5\u53e3\u6587\u6863"},{"location":"sms/#51","text":"\u63a5\u53e3\u5730\u5740 POST https://sms-api.upyun.com/api/templates \u53c2\u6570\u5b9a\u4e49 \u53c2\u6570 \u8bf4\u660e Required\uff08\u5fc5\u586b\uff09 title \u6a21\u677f\u6807\u9898(\u5c11\u4e8e12\u4e2a\u5b57) \u2714\ufe0f content \u6a21\u677f\u5185\u5bb9\uff08\u6a21\u7248\u7b7e\u540d+\u6a21\u7248\u5185\u5bb9+2\u5c11\u4e8e350\u4e2a\u5b57\uff09 \u2714\ufe0f temp_sign \u6a21\u7248\u7b7e\u540d\uff083\uff5e8\u4e2a\u5b57\uff09 \u2714\ufe0f sign_location \u6a21\u7248\u7b7e\u540d\u4f4d\u7f6e (top,bottom) \u2714\ufe0f type \u6a21\u677f\u7c7b\u578b (industry, marketing) \u2714\ufe0f report_type \u5ba1\u6838\u7c7b\u578b\uff08vip, general\uff09 \u2714\ufe0f \u54cd\u5e94 \u521b\u5efa\u6210\u529f\u8fd4\u56de\u54cd\u5e94\u7801\u548c\u5185\u5bb9\u3002 201 Created { \"title\": \"title\", \"temp_sign\": \"sign\", \"content\": \"content\", \"sign_location\": \"top\", \"type\": \"industry\", \"status\": \"review\", \"updated_at\": \"2017-04-10T02:58:12.000Z\", \"report_type\": \"vip\", \"id\": 4, \"owner\": { \"id\": 1, \"name\": \"taevas\", \"general\": 8000, \"vip\": 0, \"industry\": 4, \"marketing\": 0 } } \u54cd\u5e94\u503c\u8bf4\u660e \u53c2\u6570 \u8bf4\u660e title \u6a21\u677f\u6807\u9898 temp_sign \u6a21\u677f\u7b7e\u540d content \u6a21\u677f\u5185\u5bb9 status \u6a21\u677f\u72b6\u6001\uff08\u5ba1\u6838\u4e2d\u3001\u901a\u8fc7\u3001\u5931\u8d25) type \u77ed\u4fe1\u7c7b\u578b(\u8425\u9500\u3001\u884c\u4e1a) updated_at \u521b\u5efa\u65f6\u95f4 report_type \u5ba1\u6838\u7c7b\u578b\uff08\u514d\u7b7e, \u666e\u901a\uff09 id \u6a21\u677f\u7f16\u53f7 owner \u521b\u5efa\u8005\u4fe1\u606f owner.id \u7528\u6237\u7f16\u53f7 owner.name \u7528\u6237\u6635\u79f0 owner.general \u666e\u901a\u77ed\u4fe1\u5269\u4f59\u6761\u6570 owner.vip \u514d\u7b7e\u77ed\u4fe1\u5269\u4f59\u6761\u6570 owner.industry \u5df2\u53d1\u9001\u884c\u4e1a\u77ed\u4fe1\u6761\u6570 owner.marketing \u5df2\u53d1\u9001\u8425\u9500\u77ed\u4fe1\u6761\u6570 \u8bf7\u6c42\u793a\u4f8b POST https://sms-api.upyun.com/api/templates HTTP/1.1 Authorization: <your token> { \"title\": \"title\", \"content\": \"content\", \"temp_sign\": \"sign\", \"sign_location\": \"top\", \"type\": \"industry\", \"report_type\": \"vip\" }","title":"5.1 \u77ed\u4fe1\u6a21\u677f\u65b0\u589e\u63a5\u53e3"},{"location":"sms/#52","text":"\u63a5\u53e3\u5730\u5740 DELETE https://sms-api.upyun.com/api/templates/{template_id} \u53c2\u6570\u5b9a\u4e49 \u53c2\u6570 \u8bf4\u660e Required\uff08\u5fc5\u586b\uff09 template_id \u6a21\u677f\u7f16\u53f7 \u2714\ufe0f \u54cd\u5e94 204 No Content \u8bf7\u6c42\u793a\u4f8b DELETE https://sms-api.upyun.com/api/templates/4 Authorization: <your token>","title":"5.2 \u77ed\u4fe1\u6a21\u677f\u5220\u9664\u63a5\u53e3"},{"location":"sms/#53","text":"\u63a5\u53e3\u5730\u5740 PATCH /api/templates/{template_id} \u53c2\u6570\u5b9a\u4e49 \u53c2\u6570 \u8bf4\u660e Required\uff08\u5fc5\u586b\uff09 template_id \u6a21\u677f\u7f16\u53f7 \u2714\ufe0f title \u6a21\u677f\u6807\u9898(\u5c11\u4e8e12\u4e2a\u5b57) content \u6a21\u677f\u5185\u5bb9\uff08\u6a21\u7248\u7b7e\u540d+\u6a21\u7248\u5185\u5bb9+2\u5c11\u4e8e350\u4e2a\u5b57\uff09 temp_sign \u6a21\u7248\u7b7e\u540d\uff083\uff5e8\u4e2a\u5b57\uff09 sign_location \u6a21\u7248\u7b7e\u540d\u4f4d\u7f6e (top,bottom) \u54cd\u5e94 200 OK { \"title\": \"hello\", \"temp_sign\": \"sign\", \"content\": \"content\", \"sign_location\": \"top\", \"type\": \"industry\", \"status\": \"review\", \"updated_at\": \"2017-04-10T03:31:18.000Z\", \"id\": 3, \"report_type\": \"vip\", \"owner\": { \"id\": 1, \"name\": \"taevas\", \"general\": 8000, \"vip\": 0, \"industry\": 4, \"marketing\": 0 } } \u54cd\u5e94\u503c\u8bf4\u660e \u53c2\u6570 \u8bf4\u660e title \u6a21\u677f\u6807\u9898 temp_sign \u6a21\u677f\u7b7e\u540d content \u6a21\u677f\u5185\u5bb9 status \u6a21\u677f\u72b6\u6001\uff08\u5ba1\u6838\u4e2d\u3001\u901a\u8fc7\u3001\u5931\u8d25) type \u77ed\u4fe1\u7c7b\u578b(\u8425\u9500\u3001\u884c\u4e1a) updated_at \u521b\u5efa\u65f6\u95f4 report_type \u5ba1\u6838\u7c7b\u578b\uff08\u514d\u7b7e, \u666e\u901a\uff09 id \u6a21\u677f\u7f16\u53f7 owner \u521b\u5efa\u8005\u4fe1\u606f owner.id \u7528\u6237\u7f16\u53f7 owner.name \u7528\u6237\u6635\u79f0 owner.general \u666e\u901a\u77ed\u4fe1\u5269\u4f59\u6761\u6570 owner.vip \u514d\u7b7e\u77ed\u4fe1\u5269\u4f59\u6761\u6570 owner.industry \u5df2\u53d1\u9001\u884c\u4e1a\u77ed\u4fe1\u6761\u6570 owner.marketing \u5df2\u53d1\u9001\u8425\u9500\u77ed\u4fe1\u6761\u6570 \u8bf7\u6c42\u793a\u4f8b PATCH https://sms-api.upyun.com/api/templates/3 Authorization: <your token> { \"title\": \"hello\" }","title":"5.3 \u77ed\u4fe1\u6a21\u677f\u4fee\u6539\u63a5\u53e3"},{"location":"sms/#54","text":"\u63a5\u53e3\u5730\u5740 GET https://sms-api.upyun.com/api/templates \u53c2\u6570\u5b9a\u4e49 \u53c2\u6570 \u8bf4\u660e Required\uff08\u5fc5\u586b\uff09 status \u6a21\u677f\u72b6\u6001 (review, success, defeat) type \u6a21\u677f\u7c7b\u578b (industry, marketing) report_type \u5ba1\u6838\u7c7b\u578b\uff08vip, general\uff09 \u54cd\u5e94 200 OK { \"templates\": [ { \"title\": \"hello\", \"temp_sign\": \"sign\", \"content\": \"content\", \"sign_location\": \"top\", \"type\": \"industry\", \"status\": \"review\", \"updated_at\": \"2017-04-10T03:31:18.000Z\", \"id\": 3, \"report_type\": \"vip\", \"owner\": { \"id\": 1, \"name\": \"taevas\", \"general\": 8000, \"vip\": 0, \"industry\": 4, \"marketing\": 0 } } ] } \u54cd\u5e94\u503c\u8bf4\u660e \u53c2\u6570 \u8bf4\u660e title \u6a21\u677f\u6807\u9898 temp_sign \u6a21\u677f\u7b7e\u540d content \u6a21\u677f\u5185\u5bb9 status \u6a21\u677f\u72b6\u6001\uff08\u5ba1\u6838\u4e2d\u3001\u901a\u8fc7\u3001\u5931\u8d25) type \u77ed\u4fe1\u7c7b\u578b(\u8425\u9500\u3001\u884c\u4e1a) updated_at \u521b\u5efa\u65f6\u95f4 report_type \u5ba1\u6838\u7c7b\u578b\uff08\u514d\u7b7e, \u666e\u901a\uff09 id \u6a21\u677f\u7f16\u53f7 owner \u521b\u5efa\u8005\u4fe1\u606f owner.id \u7528\u6237\u7f16\u53f7 owner.name \u7528\u6237\u6635\u79f0 owner.general \u666e\u901a\u77ed\u4fe1\u5269\u4f59\u6761\u6570 owner.vip \u514d\u7b7e\u77ed\u4fe1\u5269\u4f59\u6761\u6570 owner.industry \u5df2\u53d1\u9001\u884c\u4e1a\u77ed\u4fe1\u6761\u6570 owner.marketing \u5df2\u53d1\u9001\u8425\u9500\u77ed\u4fe1\u6761\u6570 \u8bf7\u6c42\u793a\u4f8b GET https://sms-api.upyun.com/api/templates?type=industry&report_type=vip Authorization: <your token>","title":"5.4 \u67e5\u8be2\u6a21\u677f\u63a5\u53e3"},{"location":"sms/#55","text":"\u63a5\u53e3\u5730\u5740 POST https://sms-api.upyun.com/api/messages \u53c2\u6570\u5b9a\u4e49 \u53c2\u6570 \u8bf4\u660e Required\uff08\u5fc5\u586b\uff09 mobile \u624b\u673a\u53f7\uff0c\u9017\u53f7\u5206\u9694 \u2714\ufe0f template_id \u6a21\u677f\u7f16\u53f7 \u2714\ufe0f vars \u77ed\u4fe1\u53c2\u6570\uff08\u4ee5 | \u5206\u9694\uff09 \u54cd\u5e94 200 OK { \"message_ids\": [ { \"error_code\": \"ILLEGAL_MOBILE\", \"mobile\": \"15757\" }, { \"message_id\": 30, \"mobile\": \"15757654321\u201d } ] } \u54cd\u5e94\u503c\u8bf4\u660e \u53c2\u6570 \u8bf4\u660e message_ids \u7ed9\u6240\u6709\u624b\u673a\u53f7\u53d1\u9001\u77ed\u4fe1\u7684\u7ed3\u679c error_code \u9519\u8bef\u60c5\u51b5 message_id message \u7f16\u53f7 mobile \u624b\u673a\u53f7 \u8bf7\u6c42\u793a\u4f8b POST https://sms-api.upyun.com/api/messages Authorization: <your token> { \"template_id\": 2, \"mobile\": \"15757,15757654321\u201d }","title":"5.5 \u77ed\u4fe1\u53d1\u9001\u63a5\u53e3"},{"location":"sms/#56","text":"\u63a5\u53e3\u5730\u5740 GET https://sms-api.upyun.com/api/messages \u53c2\u6570\u5b9a\u4e49 \u53c2\u6570 \u8bf4\u660e Required\uff08\u5fc5\u586b\uff09 date \u65e5\u671f mobile \u624b\u673a\u53f7 status \u6d88\u606f\u53d1\u9001\u7684\u72b6\u6001 page \u9875\u7801 per_page \u6bcf\u9875\u663e\u793a\u6570\u91cf \u54cd\u5e94 200 OK { \"messages\": [ { \"id\": 4, \"template_id\": 2, \"report_type\": \"vip\", \"title\": \"\u6d4b\u8bd5\u6d4b\u8bd5\", \"type\": \"industry\", \"content\": \"hello\uff0chello\", \"temp_sign\": \"\u843d\u5b50\u6642\", \"mobile\": \"15757654321\u201d, \"sent_at\": null, \"created_at\": \"2017-04-07T08:47:37.000Z\", \"status\": \"processing\", \"quantity\": 1, \"owner\": { \"id\": 1, \"name\": \"taevas\", \"general\": 8000, \"vip\": 0, \"industry\": 4, \"marketing\": 0 } } { \"id\": 2, \"template_id\": 2, \"report_type\": \"vip\", \"title\": \"\u6d4b\u8bd5\u6d4b\u8bd5\", \"type\": \"industry\", \"content\": \"hello\uff0chello\u3010\u843d\u5b50\u6642\u3011\", \"temp_sign\": \"\u843d\u5b50\u6642\", \"mobile\": \"15757123456\u201d, \"sent_at\": \"2017-04-06T08:36:01.000Z\", \"created_at\": \"2017-04-06T08:36:00.000Z\", \"status\": \"success\", \"quantity\": 1, \"owner\": { \"id\": 1, \"name\": \"taevas\", \"general\": 8000, \"vip\": 0, \"industry\": 4, \"marketing\": 0 } } ], \"total\": 2 } \u54cd\u5e94\u503c\u8bf4\u660e \u53c2\u6570 \u8bf4\u660e id \u77ed\u4fe1\u7f16\u53f7 template_id \u6a21\u677f\u7f16\u53f7 report_type \u5ba1\u6838\u7c7b\u578b title \u6a21\u677f\u6807\u9898 type \u77ed\u4fe1\u7c7b\u578b(\u8425\u9500\u3001\u884c\u4e1a) content \u6a21\u677f\u5185\u5bb9 temp_sign \u6a21\u677f\u7b7e\u540d mobile \u624b\u673a\u53f7 sent_at \u53d1\u9001\u65f6\u95f4 created_at \u521b\u5efa\u65f6\u95f4 status \u77ed\u4fe1\u53d1\u9001\u72b6\u6001 owner \u521b\u5efa\u8005\u4fe1\u606f owner.id \u7528\u6237\u7f16\u53f7 owner.name \u7528\u6237\u6635\u79f0 owner.general \u666e\u901a\u77ed\u4fe1\u5269\u4f59\u6761\u6570 owner.vip \u514d\u7b7e\u77ed\u4fe1\u5269\u4f59\u6761\u6570 owner.industry \u5df2\u53d1\u9001\u884c\u4e1a\u77ed\u4fe1\u6761\u6570 owner.marketing \u5df2\u53d1\u9001\u8425\u9500\u77ed\u4fe1\u6761\u6570 \u8bf7\u6c42\u793a\u4f8b curl -H \"Authorization: <your token>\" https://sms-api.upyun.com/api/messages?mobile=15757654321","title":"5.6 \u77ed\u4fe1\u62a5\u8868\u67e5\u8be2\u63a5\u53e3"},{"location":"sms/#6","text":"","title":"6. \u9519\u8bef\u7801"},{"location":"sms/#61","text":"\u9519\u8bef\u7801 \u8bf4\u660e \u72b6\u6001\u7801 INVALID_FILE \u6587\u4ef6\u4e0d\u5b58\u5728\u6216\u5927\u5c0f\u683c\u5f0f\u4e0d\u7b26\u5408\u89c4\u8303 400 MISSING_PARAMETER \u5fc5\u586b\u9879\u4e3a\u7a7a 400 INVALID_CREDENTIALS \u65e0\u6548\u7684\u8ba4\u8bc1 401 REQUIRE_TEMPLATE_OWNER \u6ca1\u6709\u6a21\u677f\u7684\u6743\u9650 403 REQUIRE_SIGNATURE_OWNER \u6ca1\u6709\u7b7e\u540d\u7684\u6743\u9650 403 USER_NOT_FOUND \u7528\u6237\u4e0d\u5b58\u5728 404 TEMPLATE_NOT_FOUND \u6a21\u677f\u4e0d\u5b58\u5728 404 NOT_FOUND \u9875\u9762\u4e0d\u5b58\u5728 404 INSUFFICIENT_FUNDS \u77ed\u4fe1\u989d\u5ea6\u4e0d\u8db3\uff0c\u8bf7\u5145\u503c 409 MOBILE_LIMIT \u624b\u673a\u53f7\u6570\u91cf\u4e0a\u9650 409 ILLEGAL_MOBILE \u624b\u673a\u53f7\u65e0\u6548 409 ILLEGAL_PARAMER \u53c2\u6570\u65e0\u6548 409 TEMPLATE_LIMIT \u6a21\u677f\u6570\u91cf\u8fbe\u5230\u4e0a\u9650 409 TEMPLATE_AUDITING \u6a21\u677f\u6b63\u5728\u5ba1\u6838\uff0c\u65e0\u6cd5\u4f7f\u7528 409 TEMPLATE_NOT_AUDITED \u6a21\u677f\u672a\u5ba1\u6838 409 ILLEGAL_SIGNATURE \u6a21\u7248\u7b7e\u540d\u957f\u5ea6\u4e0d\u5408\u6cd5\uff0c\u5fc5\u987b\u4e3a3\uff5e8\u4e2a\u5b57 409 ILLEGAL_TITLE \u6a21\u7248\u6807\u9898\u957f\u5ea6\u4e0d\u5408\u6cd5\uff0c\u5fc5\u987b\u5c0f\u4e8e12\u4e2a\u5b57 409 TEMPLATE_FAILED \u6a21\u677f\u5ba1\u6838\u5931\u8d25\uff0c\u8bf7\u91cd\u65b0\u63d0\u4ea4 409 ILLEGAL_CONTENT_LENGTH \u6a21\u7248\u5185\u5bb9\u957f\u5ea6\u4e0d\u5408\u6cd5\uff0c\u7b7e\u540d+\u5185\u5bb9\u5fc5\u987b\u5c0f\u4e8e348\u4e2a\u5b57 409 ILLEGAL_REPORT_TYPE \u65e0\u6548\u7684\u5ba1\u6838\u7c7b\u578b 409 ILLEGAL_TEMPLATE_ID \u65e0\u6548\u7684\u6a21\u677f\u7f16\u53f7 422 SMS_SYSTEM_ERROR SMS \u670d\u52a1\u5f02\u5e38 500 SYSTEM_ERROR \u7cfb\u7edf\u9519\u8bef 500","title":"6.1 \u9519\u8bef\u7801\u5217\u8868"},{"location":"sms/#62","text":"400 Bad Request { \u201cerror_code\u201d: \u201cINVALID_FILE\u201d, \u201cmessage\u201d: \u201c\u6587\u4ef6\u4e0d\u5b58\u5728\u6216\u5927\u5c0f\u683c\u5f0f\u4e0d\u7b26\u5408\u89c4\u8303\u201d }","title":"6.2 \u9519\u8bef\u7801\u54cd\u5e94"},{"location":"sms/#63","text":"\u53c2\u6570 \u8bf4\u660e \u72b6\u6001\u7801 error_code \u4ec5\u51fa\u73b0\u5728\u9519\u8bef\u7801\u5217\u8868\u4e2d message \u989d\u5916\u7684\u63cf\u8ff0\uff0c\u4e0d\u4e0e\u9519\u8bef\u7801\u5217\u8868\u4e2d\u7684\u8bf4\u660e\u76f8\u5339\u914d","title":"6.3 \u54cd\u5e94\u8bf4\u660e"},{"location":"sms/#7","text":"\u56e0\u8fd0\u8425\u5546\u5404\u4e2a\u7f51\u5173\u9488\u5bf9\u9519\u8bef\u7801\u5b9a\u4e49\u4e0d\u540c, \u8fd4\u56de\u7684\u542b\u4e49\u4e5f\u4e0d\u5c3d\u76f8\u540c\u6240\u4ee5\u8be5\u9519\u539f\u56e0\u67e5\u8be2\u5747\u4e3a\u7ecf\u9a8c\u503c, \u4ec5\u4f9b\u53c2\u8003\u3002 \u5982\u9700\u4e86\u89e3\u8be6\u7ec6\u539f\u56e0\uff0c\u8bf7\u8054\u7cfb\u5ba2\u670d\u3002 \u9644\u4ef6\uff1a \u53d1\u9001\u539f\u56e0\u67e5\u8be2\u5217\u8868","title":"7. \u53d1\u9001\u5931\u8d25\u539f\u56e0\u67e5\u8be2"},{"location":"sms/#8","text":"PHP \u53d1\u9001\u793a\u4f8b\u4ee3\u7801 <?php // \u6ce8\u610f\uff1a\u9700\u8981\u66ff\u6362\u8fd9\u91cc\u7684\u8bf7\u6c42\u53c2\u6570\u548c $options['http']['header'] \u4e2d\u7684 token $msg['mobile']='135xxxxxxxx'; // \u5fc5\u586b\u53c2\u6570\uff0c\u591a\u4e2a\u624b\u673a\u53f7\u4f7f\u7528\u9017\u53f7\u5206\u9694 $msg['template_id'] = 1; // \u5fc5\u586b\u53c2\u6570\uff0c\u77ed\u4fe1\u6a21\u677f ID $msg['vars'] = 'a|b'; // \u9009\u586b\u53c2\u6570\uff0c\u6a21\u677f\u53d8\u91cf $url = 'https://sms-api.upyun.com/api/messages'; $options = array( 'http' => array( 'header' => \"Content-type: application/x-www-form-urlencoded\\r\\nAuthorization: <YOUR_TOKEN>\", 'method' => 'POST', 'content' => http_build_query($msg) ) ); $context = stream_context_create($options); $result = file_get_contents($url, false, $context); JAVA \u53d1\u9001\u793a\u4f8b\u4ee3\u7801 URL url = new URL(\"https://sms-api.upyun.com/api/messages\"); //\u8bbe\u7f6e JSON \u53c2\u6570 JSONObject object = new JSONObject(); object.put(\"template_id\", 1); object.put(\"mobile\", \"135xxxxxxxx\"); HttpURLConnection conn = (HttpURLConnection) url.openConnection(); // \u8bbe\u7f6e\u5fc5\u8981\u53c2\u6570 conn.setConnectTimeout(10000); conn.setUseCaches(false); conn.setDoOutput(true); conn.setRequestMethod(\"POST\"); conn.setRequestProperty(\"Connection\", \"Keep-Alive\"); conn.setRequestProperty(\"Authorization\", \"<YOUR_TOKEN>\"); conn.setRequestProperty(\"Content-type\", \"application/json\"); // \u521b\u5efa\u94fe\u63a5 conn.connect(); OutputStream os = conn.getOutputStream(); os.write(object.toString().getBytes(\"UTF-8\")); //Gets the status code from an HTTP response message int code = conn.getResponseCode(); InputStreamReader reader = new InputStreamReader(conn.getInputStream()); BufferedReader br = new BufferedReader(reader); char[] chars = new char[1024]; int length = 0; StringBuilder result = new StringBuilder(); while ((length = br.read(chars)) != -1) { result.append(chars, 0, length); } System.out.println(\"code:\" + code + \"::\" + result.toString());","title":"8. \u5e38\u7528\u8bed\u8a00\u793a\u4f8b\u4ee3\u7801"},{"location":"video/","text":"\u6982\u8ff0 \u00b6 \u53c8\u62cd\u4e91\u77ed\u89c6\u9891\uff08UPYUN Short Video\uff09\u96c6\u77ed\u89c6\u9891\u91c7\u96c6\u3001\u4e0a\u4f20\u3001\u5b58\u50a8\u3001\u5206\u53d1\u3001\u64ad\u653e\u4e8e\u4e00\u4f53\uff0c\u501f\u52a9\u77ed\u89c6\u9891 SDK\u3001\u4e0a\u4f20\u52a0\u901f\u3001\u4e0d\u9650\u91cf\u5b58\u50a8\u3001\u7a33\u5b9a\u5feb\u901f\u7684 CDN \u53ca\u64ad\u653e\u5668 SDK\uff0c\u4e3a\u7528\u6237\u63d0\u4f9b\u4e13\u4e1a\u53ef\u9760\u7684\u77ed\u89c6\u9891\u89e3\u51b3\u65b9\u6848\u3002 \u89e3\u51b3\u65b9\u6848 \u00b6 \u77ed\u89c6\u9891 SDK \u00b6 \u7528\u4e8e\u77ed\u89c6\u9891\u7684\u5f55\u5236\uff0c\u5206\u4e3a\u62cd\u6444\u3001\u7f16\u8f91\u3001\u5408\u6210\u3001\u4e0a\u4f20\u56db\u90e8\u5206\u3002 \u62cd\u6444 \u62cd\u6444\u89c6\u9891\uff0c\u53ef\u4ee5\u8bbe\u7f6e\u62cd\u6444\u65f6\u957f\uff0c\u62cd\u6444\u7684\u8fc7\u7a0b\u53ef\u4ee5\u6dfb\u52a0\u7f8e\u989c\u3001\u6ee4\u955c\u3001\u8d34\u7eb8\u3001\u5927\u773c\u7626\u8138\u7b49\u3002 \u7f16\u8f91 \u5bf9\u62cd\u6444\u7684\u89c6\u9891\u8fdb\u884c\u5904\u7406\uff0c\u6bd4\u5982\u526a\u8f91\u3001\u52a0\u5165\u6ee4\u955c\u3001\u8c03\u6574\u80cc\u666f\u97f3\u4e50\u7b49\u3002 \u5408\u6210 \u628a\u7f16\u8f91\u597d\u540e\u7684\u89c6\u9891\u751f\u6210\u6587\u4ef6\u3002 \u4e0a\u4f20 \u4e0a\u4f20\u77ed\u89c6\u9891\u6587\u4ef6\u5230\u4e91\u5b58\u50a8\u3002 SDK \u53ca\u6587\u6863 \uff1a Android \u77ed\u89c6\u9891 SDK \u3001 iOS \u77ed\u89c6\u9891 SDK \u4e91\u5b58\u50a8 \u00b6 \u4e0a\u4f20\u4e0a\u6765\u7684\u77ed\u89c6\u9891\u5b58\u653e\u5728\u4e91\u5b58\u50a8\u3002 \u53c8\u62cd\u4e91\u5b58\u50a8\u662f\u5bf9\u8c61\u5b58\u50a8\uff0c\u4e00\u4efd\u6570\u636e\u5199\u4e09\u4efd\uff0c\u652f\u6301\u4e0d\u9650\u91cf\u5b58\u653e\u6570\u636e\uff0c\u6536\u8d39\u4ec5\u6309\u5b58\u653e\u6570\u636e\u91cf\u6536\u8d39\uff0c\u76f8\u6bd4\u5176\u4ed6\u4e91\u5382\u5546\uff0c\u5c11\u4e86\u8bf7\u6c42\u8d39\u7528\u3001\u6d41\u51fa\u6d41\u91cf\u8d39\u7528\u3002 \u53e6\u5916\uff0c\u548c\u53c8\u62cd\u4e91 CDN \u642d\u914d\u4f7f\u7528\uff0c\u63d0\u4f9b CDN \u4f7f\u7528\u6d41\u91cf 1:1 \u7684\u514d\u8d39\u5b58\u50a8\u7a7a\u95f4\uff0c\u8ba9\u5b58\u50a8\u6210\u672c\u66f4\u4f4e\u3002 \u76f8\u5173\u9605\u8bfb \uff1a \u5feb\u901f\u5165\u95e8 \u3001 \u5f00\u53d1\u8005\u5de5\u5177 CDN \u5206\u53d1 \u00b6 \u5f53\u7528\u6237\u8bbf\u95ee\u77ed\u89c6\u9891\u65f6\uff0c\u901a\u8fc7 CDN\u8fdb\u884c\u5168\u56fd\u548c\u6d77\u5916\u5206\u53d1\uff0c\u8ba9\u7528\u6237\u5c31\u8fd1\u8bbf\u95ee\u5230\u77ed\u89c6\u9891\u3002 \u53e6\u5916\uff0cCDN \u4f1a\u628a\u8bbf\u95ee\u8fc7\u7684\u77ed\u89c6\u9891\u7f13\u5b58\u8d77\u6765\uff0c\u4e0b\u6b21\u6709\u7528\u6237\u6765\u8bbf\u95ee\u65f6\uff0c\u76f4\u63a5\u628a\u5b83\u63d0\u4f9b\u7ed9\u7528\u6237\uff0c\u6781\u5927\u7684\u63d0\u5347\u4e86\u8bbf\u95ee\u901f\u5ea6\u3002 \u76ee\u524d\uff0c\u53c8\u62cd\u4e91 CDN \u5728\u56fd\u5185\u5efa\u8bbe\u4e86 200+ \u8282\u70b9\uff0c\u6d77\u5916\u5efa\u8bbe\u4e86 15+ \u8282\u70b9\uff0c\u6ee1\u8db3\u5168\u56fd\u5404\u5730\u548c\u6d77\u5916\u7684\u8bbf\u95ee\u9700\u6c42\u3002 \u76f8\u5173\u9605\u8bfb \uff1a \u5feb\u901f\u5165\u95e8 \u3001 \u670d\u52a1\u7ba1\u7406 \u64ad\u653e\u5668 SDK \u00b6 \u63d0\u4f9b Android \u64ad\u653e\u5668 SDK \u548c iOS \u64ad\u653e\u5668 SDK\uff0c\u652f\u6301 Android\u3001iPhone\u3001iPad \u7b49\u79fb\u52a8\u8bbe\u5907\u64ad\u653e\u77ed\u89c6\u9891\uff0c\u652f\u6301\u79d2\u64ad\u3001\u5206\u6bb5\u52a0\u8f7d\u3001\u62d6\u62c9\u7b49\u529f\u80fd\uff0c\u7701\u53bb\u4f01\u4e1a\u5f00\u53d1\u64ad\u653e\u5668\u7684\u65f6\u95f4\u3002 \u76f8\u5173\u9605\u8bfb \uff1a Android \u64ad\u653e\u5668 SDK \u3001 iOS \u64ad\u653e\u5668 SDK \u4e91\u7aef\u5904\u7406 \u00b6 \u4e91\u7aef\u5904\u7406\u662f\u4e2a\u53ef\u9009\u7684\u670d\u52a1\uff0c\u7531\u4e8e\u7ec8\u7aef\u7684\u8d44\u6e90\u6709\u9650\uff0c\u4e0d\u80fd\u505a\u590d\u6742\u5904\u7406\uff0c\u5982\u679c\u9700\u8981\u590d\u6742\u7684\u89c6\u9891\u5904\u7406\uff0c\u9700\u8981\u4f7f\u7528\u4e91\u7aef\u5904\u7406\u3002 \u4e91\u7aef\u77ed\u89c6\u9891\u5904\u7406\u662f\u5f02\u6b65\u8fdb\u884c\u7684\uff0c\u63d0\u4f9b\u8f6c\u7801\u3001\u5207\u7247\u3001\u526a\u8f91\u3001\u62fc\u63a5\u3001\u6c34\u5370\u3001\u622a\u56fe\u7b49\u529f\u80fd\uff0c\u63d0\u4f9b\u94fe\u5f0f\u5904\u7406\uff08\u987a\u5e8f\u6267\u884c\u591a\u4e2a\u529f\u80fd\uff09\uff0c\u6ee1\u8db3\u590d\u6742\u5904\u7406\u9700\u8981\u3002 \u76f8\u5173\u9605\u8bfb \uff1a \u5f02\u6b65\u97f3\u89c6\u9891\u5904\u7406 \u3001 \u540c\u6b65\u89c6\u9891\u5904\u7406 \u5e94\u7528\u573a\u666f \u00b6 \u641e\u7b11\u5e7d\u9ed8 \u4ee5\u7cd7\u4e8b\u767e\u79d1\u4e3a\u4f8b\uff0c\u7cd7\u4e8b\u767e\u79d1\u4f5c\u4e3a\u5e7d\u9ed8\u641e\u7b11\u7c7b\u7684\u5de8\u5934\uff0c\u6211\u4eec\u4e3a\u7cd7\u4e8b\u767e\u79d1\u63d0\u4f9b\u4e86\u4e0a\u4f20\u3001\u4e91\u5b58\u50a8\u3001\u5206\u53d1\u3001\u64ad\u653e\uff0c\u5e2e\u52a9\u7cd7\u4e8b\u767e\u79d1\u6784\u5efa\u641e\u7b11\u77ed\u89c6\u9891\u670d\u52a1\u3002 \u7535\u5546\u4e70\u5bb6\u5356\u5bb6\u79c0 \u4ee5\u6d0b\u7801\u5934\u4e3a\u4f8b\uff0c\u4f7f\u7528\u4e00\u6574\u5957\u65b9\u6848\uff0c\u5feb\u901f\u4e0a\u7ebf\u4e86\u4e70\u5bb6\u5356\u5bb6\u77ed\u89c6\u9891\u79c0\uff0c\u76f8\u6bd4\u4e4b\u524d\u7684\u6587\u5b57\u56fe\u7247\u8bc4\u8bba\uff0c\u77ed\u89c6\u9891\u5c55\u793a\u7684\u4fe1\u606f\u66f4\u4e30\u5bcc\u3001\u66f4\u6709\u8da3\uff0c\u7528\u6237\u6d3b\u8dc3\u5ea6\u66f4\u9ad8\u3002 \u6237\u5916&\u65c5\u6e38 \u8bb0\u5f55\u7f8e\u666f\u3001\u6237\u5916\u7ecf\u5386\uff0c\u901a\u8fc7\u65ad\u70b9\u7eed\u62cd\u3001\u56de\u5220\u529f\u80fd\uff0c\u628a\u5b83\u7f16\u8f91\u6210\u4e00\u4e2a\u76f8\u518c\u96c6\u6216\u8005 MV\uff0c\u4e92\u76f8\u5206\u4eab\u3002\u53e6\u5916\uff0c\u8fd8\u6709\u641e\u7b11\u8d34\u7eb8\u4f9b\u60a8\u9009\u62e9\u3002 \u7f8e\u98df \u4f5c\u4e3a\u4e00\u4e2a\u5403\u8d27\uff0c\u600e\u4e48\u5c11\u4e86\u8bb0\u5f55\u7f8e\u98df\u5462\u3002\u901a\u8fc7\u77ed\u89c6\u9891\u89e3\u51b3\u65b9\u6848\uff0c\u968f\u65f6\u968f\u5730\u8bb0\u5f55\u5403\u7f8e\u98df\u3001\u5236\u4f5c\u7f8e\u98df\u3001\u805a\u4f1a\u7b49\u7684\u524d\u540e\u8fc7\u7a0b\uff0c\u8ba9\u5feb\u4e50\u6c38\u4e45\u3002 \u6536\u8d39\u8bf4\u660e \u00b6 \u89e3\u51b3\u65b9\u6848\u6309\u77ed\u89c6\u9891 SDK\u3001\u4e91\u5b58\u50a8\u3001CDN \u6536\u8d39\uff0c\u4e0a\u4f20\u3001\u64ad\u653e\u5668 SDK \u514d\u8d39\u3002\u5982\u679c\u6709\u4f7f\u7528\u4e91\u7aef\u5904\u7406\uff0c\u4e91\u7aef\u5904\u7406\u9700\u8981\u6536\u8d39\u3002 \u76f8\u5173\u9605\u8bfb \uff1a \u4ef7\u683c SDK \u7248\u672c Key \u83b7\u53d6 \u00b6 \u77ed\u89c6\u9891 SDK \u63d0\u4f9b\u4e00\u4e2a\u514d\u8d39\u7248\u548c\u4e24\u4e2a\u6536\u8d39\u7248\uff0c\u4efb\u4f55\u7248\u672c\u4f7f\u7528\u90fd\u9700\u8981\u6388\u6743\uff08key\uff09\u3002 \u514d\u8d39\u7248\u7684 Key \u6709\u6548\u671f\u4e00\u5e74\uff0c\u5230\u671f\u540e\u53ef\u4ee5\u7eed\u671f\u3002\u6536\u8d39\u7248\u53ef\u4ee5\u514d\u8d39\u8bd5\u7528\u4e00\u4e2a\u6708\u3002 \u83b7\u53d6 Key\uff0c\u8bf7\u63d0\u4f9b\u5e94\u7528\u540d\u79f0\u3001\u7533\u8bf7\u4f7f\u7528\u7684 SDK \u7248\u672c\u3001\u4f7f\u7528\u7684\u5e73\u53f0\uff08\u5b89\u5353\u3001iOS\uff09\u3001bundleID\uff08iOS\uff09\u3001\u5305\u540d\uff08Android\uff09\u7ed9\u60a8\u7684\u5546\u52a1\u7ecf\u7406\uff0c\u6216\u8005 \u8054\u7cfb\u6211\u4eec \u3002 \u76f8\u5173\u9605\u8bfb \uff1a \u77ed\u89c6\u9891 SDK \u7248\u672c","title":"\u77ed\u89c6\u9891\u7b80\u4ecb"},{"location":"video/#_1","text":"\u53c8\u62cd\u4e91\u77ed\u89c6\u9891\uff08UPYUN Short Video\uff09\u96c6\u77ed\u89c6\u9891\u91c7\u96c6\u3001\u4e0a\u4f20\u3001\u5b58\u50a8\u3001\u5206\u53d1\u3001\u64ad\u653e\u4e8e\u4e00\u4f53\uff0c\u501f\u52a9\u77ed\u89c6\u9891 SDK\u3001\u4e0a\u4f20\u52a0\u901f\u3001\u4e0d\u9650\u91cf\u5b58\u50a8\u3001\u7a33\u5b9a\u5feb\u901f\u7684 CDN \u53ca\u64ad\u653e\u5668 SDK\uff0c\u4e3a\u7528\u6237\u63d0\u4f9b\u4e13\u4e1a\u53ef\u9760\u7684\u77ed\u89c6\u9891\u89e3\u51b3\u65b9\u6848\u3002","title":"\u6982\u8ff0"},{"location":"video/#_2","text":"","title":"\u89e3\u51b3\u65b9\u6848"},{"location":"video/#sdk","text":"\u7528\u4e8e\u77ed\u89c6\u9891\u7684\u5f55\u5236\uff0c\u5206\u4e3a\u62cd\u6444\u3001\u7f16\u8f91\u3001\u5408\u6210\u3001\u4e0a\u4f20\u56db\u90e8\u5206\u3002 \u62cd\u6444 \u62cd\u6444\u89c6\u9891\uff0c\u53ef\u4ee5\u8bbe\u7f6e\u62cd\u6444\u65f6\u957f\uff0c\u62cd\u6444\u7684\u8fc7\u7a0b\u53ef\u4ee5\u6dfb\u52a0\u7f8e\u989c\u3001\u6ee4\u955c\u3001\u8d34\u7eb8\u3001\u5927\u773c\u7626\u8138\u7b49\u3002 \u7f16\u8f91 \u5bf9\u62cd\u6444\u7684\u89c6\u9891\u8fdb\u884c\u5904\u7406\uff0c\u6bd4\u5982\u526a\u8f91\u3001\u52a0\u5165\u6ee4\u955c\u3001\u8c03\u6574\u80cc\u666f\u97f3\u4e50\u7b49\u3002 \u5408\u6210 \u628a\u7f16\u8f91\u597d\u540e\u7684\u89c6\u9891\u751f\u6210\u6587\u4ef6\u3002 \u4e0a\u4f20 \u4e0a\u4f20\u77ed\u89c6\u9891\u6587\u4ef6\u5230\u4e91\u5b58\u50a8\u3002 SDK \u53ca\u6587\u6863 \uff1a Android \u77ed\u89c6\u9891 SDK \u3001 iOS \u77ed\u89c6\u9891 SDK","title":"\u77ed\u89c6\u9891 SDK"},{"location":"video/#_3","text":"\u4e0a\u4f20\u4e0a\u6765\u7684\u77ed\u89c6\u9891\u5b58\u653e\u5728\u4e91\u5b58\u50a8\u3002 \u53c8\u62cd\u4e91\u5b58\u50a8\u662f\u5bf9\u8c61\u5b58\u50a8\uff0c\u4e00\u4efd\u6570\u636e\u5199\u4e09\u4efd\uff0c\u652f\u6301\u4e0d\u9650\u91cf\u5b58\u653e\u6570\u636e\uff0c\u6536\u8d39\u4ec5\u6309\u5b58\u653e\u6570\u636e\u91cf\u6536\u8d39\uff0c\u76f8\u6bd4\u5176\u4ed6\u4e91\u5382\u5546\uff0c\u5c11\u4e86\u8bf7\u6c42\u8d39\u7528\u3001\u6d41\u51fa\u6d41\u91cf\u8d39\u7528\u3002 \u53e6\u5916\uff0c\u548c\u53c8\u62cd\u4e91 CDN \u642d\u914d\u4f7f\u7528\uff0c\u63d0\u4f9b CDN \u4f7f\u7528\u6d41\u91cf 1:1 \u7684\u514d\u8d39\u5b58\u50a8\u7a7a\u95f4\uff0c\u8ba9\u5b58\u50a8\u6210\u672c\u66f4\u4f4e\u3002 \u76f8\u5173\u9605\u8bfb \uff1a \u5feb\u901f\u5165\u95e8 \u3001 \u5f00\u53d1\u8005\u5de5\u5177","title":"\u4e91\u5b58\u50a8"},{"location":"video/#cdn","text":"\u5f53\u7528\u6237\u8bbf\u95ee\u77ed\u89c6\u9891\u65f6\uff0c\u901a\u8fc7 CDN\u8fdb\u884c\u5168\u56fd\u548c\u6d77\u5916\u5206\u53d1\uff0c\u8ba9\u7528\u6237\u5c31\u8fd1\u8bbf\u95ee\u5230\u77ed\u89c6\u9891\u3002 \u53e6\u5916\uff0cCDN \u4f1a\u628a\u8bbf\u95ee\u8fc7\u7684\u77ed\u89c6\u9891\u7f13\u5b58\u8d77\u6765\uff0c\u4e0b\u6b21\u6709\u7528\u6237\u6765\u8bbf\u95ee\u65f6\uff0c\u76f4\u63a5\u628a\u5b83\u63d0\u4f9b\u7ed9\u7528\u6237\uff0c\u6781\u5927\u7684\u63d0\u5347\u4e86\u8bbf\u95ee\u901f\u5ea6\u3002 \u76ee\u524d\uff0c\u53c8\u62cd\u4e91 CDN \u5728\u56fd\u5185\u5efa\u8bbe\u4e86 200+ \u8282\u70b9\uff0c\u6d77\u5916\u5efa\u8bbe\u4e86 15+ \u8282\u70b9\uff0c\u6ee1\u8db3\u5168\u56fd\u5404\u5730\u548c\u6d77\u5916\u7684\u8bbf\u95ee\u9700\u6c42\u3002 \u76f8\u5173\u9605\u8bfb \uff1a \u5feb\u901f\u5165\u95e8 \u3001 \u670d\u52a1\u7ba1\u7406","title":"CDN \u5206\u53d1"},{"location":"video/#sdk_1","text":"\u63d0\u4f9b Android \u64ad\u653e\u5668 SDK \u548c iOS \u64ad\u653e\u5668 SDK\uff0c\u652f\u6301 Android\u3001iPhone\u3001iPad \u7b49\u79fb\u52a8\u8bbe\u5907\u64ad\u653e\u77ed\u89c6\u9891\uff0c\u652f\u6301\u79d2\u64ad\u3001\u5206\u6bb5\u52a0\u8f7d\u3001\u62d6\u62c9\u7b49\u529f\u80fd\uff0c\u7701\u53bb\u4f01\u4e1a\u5f00\u53d1\u64ad\u653e\u5668\u7684\u65f6\u95f4\u3002 \u76f8\u5173\u9605\u8bfb \uff1a Android \u64ad\u653e\u5668 SDK \u3001 iOS \u64ad\u653e\u5668 SDK","title":"\u64ad\u653e\u5668 SDK"},{"location":"video/#_4","text":"\u4e91\u7aef\u5904\u7406\u662f\u4e2a\u53ef\u9009\u7684\u670d\u52a1\uff0c\u7531\u4e8e\u7ec8\u7aef\u7684\u8d44\u6e90\u6709\u9650\uff0c\u4e0d\u80fd\u505a\u590d\u6742\u5904\u7406\uff0c\u5982\u679c\u9700\u8981\u590d\u6742\u7684\u89c6\u9891\u5904\u7406\uff0c\u9700\u8981\u4f7f\u7528\u4e91\u7aef\u5904\u7406\u3002 \u4e91\u7aef\u77ed\u89c6\u9891\u5904\u7406\u662f\u5f02\u6b65\u8fdb\u884c\u7684\uff0c\u63d0\u4f9b\u8f6c\u7801\u3001\u5207\u7247\u3001\u526a\u8f91\u3001\u62fc\u63a5\u3001\u6c34\u5370\u3001\u622a\u56fe\u7b49\u529f\u80fd\uff0c\u63d0\u4f9b\u94fe\u5f0f\u5904\u7406\uff08\u987a\u5e8f\u6267\u884c\u591a\u4e2a\u529f\u80fd\uff09\uff0c\u6ee1\u8db3\u590d\u6742\u5904\u7406\u9700\u8981\u3002 \u76f8\u5173\u9605\u8bfb \uff1a \u5f02\u6b65\u97f3\u89c6\u9891\u5904\u7406 \u3001 \u540c\u6b65\u89c6\u9891\u5904\u7406","title":"\u4e91\u7aef\u5904\u7406"},{"location":"video/#_5","text":"\u641e\u7b11\u5e7d\u9ed8 \u4ee5\u7cd7\u4e8b\u767e\u79d1\u4e3a\u4f8b\uff0c\u7cd7\u4e8b\u767e\u79d1\u4f5c\u4e3a\u5e7d\u9ed8\u641e\u7b11\u7c7b\u7684\u5de8\u5934\uff0c\u6211\u4eec\u4e3a\u7cd7\u4e8b\u767e\u79d1\u63d0\u4f9b\u4e86\u4e0a\u4f20\u3001\u4e91\u5b58\u50a8\u3001\u5206\u53d1\u3001\u64ad\u653e\uff0c\u5e2e\u52a9\u7cd7\u4e8b\u767e\u79d1\u6784\u5efa\u641e\u7b11\u77ed\u89c6\u9891\u670d\u52a1\u3002 \u7535\u5546\u4e70\u5bb6\u5356\u5bb6\u79c0 \u4ee5\u6d0b\u7801\u5934\u4e3a\u4f8b\uff0c\u4f7f\u7528\u4e00\u6574\u5957\u65b9\u6848\uff0c\u5feb\u901f\u4e0a\u7ebf\u4e86\u4e70\u5bb6\u5356\u5bb6\u77ed\u89c6\u9891\u79c0\uff0c\u76f8\u6bd4\u4e4b\u524d\u7684\u6587\u5b57\u56fe\u7247\u8bc4\u8bba\uff0c\u77ed\u89c6\u9891\u5c55\u793a\u7684\u4fe1\u606f\u66f4\u4e30\u5bcc\u3001\u66f4\u6709\u8da3\uff0c\u7528\u6237\u6d3b\u8dc3\u5ea6\u66f4\u9ad8\u3002 \u6237\u5916&\u65c5\u6e38 \u8bb0\u5f55\u7f8e\u666f\u3001\u6237\u5916\u7ecf\u5386\uff0c\u901a\u8fc7\u65ad\u70b9\u7eed\u62cd\u3001\u56de\u5220\u529f\u80fd\uff0c\u628a\u5b83\u7f16\u8f91\u6210\u4e00\u4e2a\u76f8\u518c\u96c6\u6216\u8005 MV\uff0c\u4e92\u76f8\u5206\u4eab\u3002\u53e6\u5916\uff0c\u8fd8\u6709\u641e\u7b11\u8d34\u7eb8\u4f9b\u60a8\u9009\u62e9\u3002 \u7f8e\u98df \u4f5c\u4e3a\u4e00\u4e2a\u5403\u8d27\uff0c\u600e\u4e48\u5c11\u4e86\u8bb0\u5f55\u7f8e\u98df\u5462\u3002\u901a\u8fc7\u77ed\u89c6\u9891\u89e3\u51b3\u65b9\u6848\uff0c\u968f\u65f6\u968f\u5730\u8bb0\u5f55\u5403\u7f8e\u98df\u3001\u5236\u4f5c\u7f8e\u98df\u3001\u805a\u4f1a\u7b49\u7684\u524d\u540e\u8fc7\u7a0b\uff0c\u8ba9\u5feb\u4e50\u6c38\u4e45\u3002","title":"\u5e94\u7528\u573a\u666f"},{"location":"video/#_6","text":"\u89e3\u51b3\u65b9\u6848\u6309\u77ed\u89c6\u9891 SDK\u3001\u4e91\u5b58\u50a8\u3001CDN \u6536\u8d39\uff0c\u4e0a\u4f20\u3001\u64ad\u653e\u5668 SDK \u514d\u8d39\u3002\u5982\u679c\u6709\u4f7f\u7528\u4e91\u7aef\u5904\u7406\uff0c\u4e91\u7aef\u5904\u7406\u9700\u8981\u6536\u8d39\u3002 \u76f8\u5173\u9605\u8bfb \uff1a \u4ef7\u683c","title":"\u6536\u8d39\u8bf4\u660e"},{"location":"video/#sdk-key","text":"\u77ed\u89c6\u9891 SDK \u63d0\u4f9b\u4e00\u4e2a\u514d\u8d39\u7248\u548c\u4e24\u4e2a\u6536\u8d39\u7248\uff0c\u4efb\u4f55\u7248\u672c\u4f7f\u7528\u90fd\u9700\u8981\u6388\u6743\uff08key\uff09\u3002 \u514d\u8d39\u7248\u7684 Key \u6709\u6548\u671f\u4e00\u5e74\uff0c\u5230\u671f\u540e\u53ef\u4ee5\u7eed\u671f\u3002\u6536\u8d39\u7248\u53ef\u4ee5\u514d\u8d39\u8bd5\u7528\u4e00\u4e2a\u6708\u3002 \u83b7\u53d6 Key\uff0c\u8bf7\u63d0\u4f9b\u5e94\u7528\u540d\u79f0\u3001\u7533\u8bf7\u4f7f\u7528\u7684 SDK \u7248\u672c\u3001\u4f7f\u7528\u7684\u5e73\u53f0\uff08\u5b89\u5353\u3001iOS\uff09\u3001bundleID\uff08iOS\uff09\u3001\u5305\u540d\uff08Android\uff09\u7ed9\u60a8\u7684\u5546\u52a1\u7ecf\u7406\uff0c\u6216\u8005 \u8054\u7cfb\u6211\u4eec \u3002 \u76f8\u5173\u9605\u8bfb \uff1a \u77ed\u89c6\u9891 SDK \u7248\u672c","title":"SDK \u7248\u672c Key \u83b7\u53d6"},{"location":"video/short_video_demo/","text":"\u6982\u8ff0 \u00b6 \u4e3a\u4e86\u8ba9\u60a8\u66f4\u597d\u7684\u4e86\u89e3\u77ed\u89c6\u9891 SDK \u548c\u64ad\u653e\u5668 SDK \uff0c\u6211\u4eec\u5236\u4f5c\u4e86\u6f14\u793a APP\u3002 APP \u5305\u542b\u77ed\u89c6\u9891 SDK \u548c\u64ad\u653e\u5668 SDK\uff0c\u6b22\u8fce\u4f53\u9a8c\u3002 \u76f8\u5173\u9605\u8bfb \uff1a \u77ed\u89c6\u9891 SDK \u7684\u529f\u80fd\u4ecb\u7ecd \u3001 \u64ad\u653e\u5668 SDK \u7684\u529f\u80fd\u4ecb\u7ecd SDK \u53ca\u6587\u6863 \uff1a Android \u77ed\u89c6\u9891 SDK \u3001 iOS \u77ed\u89c6\u9891 SDK \u4f7f\u7528\u8bf4\u660e \u00b6 \u6253\u5f00 APP\uff0c\u9996\u9875\u6709\u4e09\u4e2a\u6a21\u5757\uff0c\u62cd\u6444\u89c6\u9891\u3001\u7f16\u8f91\u89c6\u9891\u3001\u64ad\u653e\u89c6\u9891\u3002 \u62cd\u6444\u89c6\u9891 \u6f14\u793a\u77ed\u89c6\u9891 SDK \u7684\u62cd\u6444\u90e8\u5206\u3002 \u7f16\u8f91\u89c6\u9891 \u6f14\u793a\u77ed\u89c6\u9891 SDK \u7684\u7f16\u8f91\u90e8\u5206\uff0c\u7f16\u8f91\u5b8c\u6210\u540e\uff0c\u70b9 \u201c\u4fdd\u5b58\u201d\uff0c\u5408\u6210\u77ed\u89c6\u9891\uff08\u751f\u6210\u77ed\u89c6\u9891\uff09\u5e76\u4fdd\u5b58\u5230\u672c\u5730\u3002 \u7279\u522b\u5730\uff0c\u8fd9\u91cc\u6ca1\u6709\u6f14\u793a\u4e0a\u4f20\u90e8\u5206\uff0c\u5b9e\u9645 SDK \u91cc\u9762\u662f\u6709\u7684\u3002 \u64ad\u653e\u89c6\u9891 \u6f14\u793a\u64ad\u653e\u5668 SDK\u3002 \u8054\u7cfb\u65b9\u5f0f \u00b6 \u60a8\u5bf9 APP \u6709\u4efb\u4f55\u7591\u95ee\uff0c\u6216\u8005\u9700\u8981\u8fdb\u4e00\u6b65\u4e86\u89e3\u77ed\u89c6\u9891\u89e3\u51b3\u65b9\u6848\uff0c\u53ef\u4ee5\u901a\u8fc7\u5982\u4e0b\u65b9\u5f0f\u8054\u7cfb\u6211\u4eec\u3002 QQ\uff1a200576786 Tel\uff1a0571-81020203 Email\uff1asales@upyun.com","title":"\u77ed\u89c6\u9891 DEMO"},{"location":"video/short_video_demo/#_1","text":"\u4e3a\u4e86\u8ba9\u60a8\u66f4\u597d\u7684\u4e86\u89e3\u77ed\u89c6\u9891 SDK \u548c\u64ad\u653e\u5668 SDK \uff0c\u6211\u4eec\u5236\u4f5c\u4e86\u6f14\u793a APP\u3002 APP \u5305\u542b\u77ed\u89c6\u9891 SDK \u548c\u64ad\u653e\u5668 SDK\uff0c\u6b22\u8fce\u4f53\u9a8c\u3002 \u76f8\u5173\u9605\u8bfb \uff1a \u77ed\u89c6\u9891 SDK \u7684\u529f\u80fd\u4ecb\u7ecd \u3001 \u64ad\u653e\u5668 SDK \u7684\u529f\u80fd\u4ecb\u7ecd SDK \u53ca\u6587\u6863 \uff1a Android \u77ed\u89c6\u9891 SDK \u3001 iOS \u77ed\u89c6\u9891 SDK","title":"\u6982\u8ff0"},{"location":"video/short_video_demo/#_2","text":"\u6253\u5f00 APP\uff0c\u9996\u9875\u6709\u4e09\u4e2a\u6a21\u5757\uff0c\u62cd\u6444\u89c6\u9891\u3001\u7f16\u8f91\u89c6\u9891\u3001\u64ad\u653e\u89c6\u9891\u3002 \u62cd\u6444\u89c6\u9891 \u6f14\u793a\u77ed\u89c6\u9891 SDK \u7684\u62cd\u6444\u90e8\u5206\u3002 \u7f16\u8f91\u89c6\u9891 \u6f14\u793a\u77ed\u89c6\u9891 SDK \u7684\u7f16\u8f91\u90e8\u5206\uff0c\u7f16\u8f91\u5b8c\u6210\u540e\uff0c\u70b9 \u201c\u4fdd\u5b58\u201d\uff0c\u5408\u6210\u77ed\u89c6\u9891\uff08\u751f\u6210\u77ed\u89c6\u9891\uff09\u5e76\u4fdd\u5b58\u5230\u672c\u5730\u3002 \u7279\u522b\u5730\uff0c\u8fd9\u91cc\u6ca1\u6709\u6f14\u793a\u4e0a\u4f20\u90e8\u5206\uff0c\u5b9e\u9645 SDK \u91cc\u9762\u662f\u6709\u7684\u3002 \u64ad\u653e\u89c6\u9891 \u6f14\u793a\u64ad\u653e\u5668 SDK\u3002","title":"\u4f7f\u7528\u8bf4\u660e"},{"location":"video/short_video_demo/#_3","text":"\u60a8\u5bf9 APP \u6709\u4efb\u4f55\u7591\u95ee\uff0c\u6216\u8005\u9700\u8981\u8fdb\u4e00\u6b65\u4e86\u89e3\u77ed\u89c6\u9891\u89e3\u51b3\u65b9\u6848\uff0c\u53ef\u4ee5\u901a\u8fc7\u5982\u4e0b\u65b9\u5f0f\u8054\u7cfb\u6211\u4eec\u3002 QQ\uff1a200576786 Tel\uff1a0571-81020203 Email\uff1asales@upyun.com","title":"\u8054\u7cfb\u65b9\u5f0f"}]}