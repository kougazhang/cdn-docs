{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"\u6587\u6863\u9996\u9875","text":"\u641c\u7d22\u6587\u6863 CDN CDN Documents <ul> <li>\u4ea7\u54c1\u7b80\u4ecb</li> <li>\u5feb\u901f\u5165\u95e8</li> <li>\u670d\u52a1\u7ba1\u7406</li> <li>\u67e5\u770b\u66f4\u591a</li> </ul> \u76f4\u64ad Live Documents <ul> <li>\u4ea7\u54c1\u7b80\u4ecb</li> <li>\u5feb\u901f\u5165\u95e8</li> <li>\u57fa\u7840\u914d\u7f6e</li> <li>\u67e5\u770b\u66f4\u591a</li> </ul> \u70b9\u64ad&amp;\u77ed\u89c6\u9891 Video&amp;Short Video <ul> <li>\u77ed\u89c6\u9891\u7b80\u4ecb</li> <li>\u77ed\u89c6\u9891 DEMO</li> <li>\u67e5\u770b\u66f4\u591a</li> </ul> \u4e91\u5b58\u50a8 API Reference <ul> <li>\u4ea7\u54c1\u7b80\u4ecb</li> <li>REST API</li> <li>FORM API</li> <li>\u67e5\u770b\u66f4\u591a</li> </ul> \u4e91\u5904\u7406 Cloud Processing <ul> <li>\u4ea7\u54c1\u7b80\u4ecb</li> <li>\u56fe\u7247\u5904\u7406</li> <li>\u5f02\u6b65\u97f3\u89c6\u9891\u5904\u7406</li> <li>\u67e5\u770b\u66f4\u591a</li> </ul> \u4eba\u5de5\u667a\u80fd Artificial Intelligence <ul> <li>\u5185\u5bb9\u8bc6\u522b(\u6709\u5b58\u50a8)</li> <li>\u5185\u5bb9\u8bc6\u522b(\u65e0\u5b58\u50a8)</li> <li>\u4eba\u8138\u8bc6\u522b</li> <li>\u67e5\u770b\u66f4\u591a</li> </ul> SDK&amp;\u5de5\u5177 Download <ul> <li>\u5b58\u50a8&amp;\u5904\u7406 SDK </li> <li>\u76f4\u64ad SDK</li> <li>\u77ed\u89c6\u9891 SDK</li> <li>\u67e5\u770b\u66f4\u591a</li> </ul>"},{"location":"ai/api_console/","title":"\u5185\u5bb9\u5904\u7406","text":""},{"location":"ai/api_console/#_1","title":"\u5feb\u901f\u5165\u95e8","text":"<p>\u5185\u5bb9\u8bc6\u522b\u5904\u7406\u63a5\u53e3\u662f\u7528\u6237\u8c03\u6574\u5185\u5bb9(\u56fe\u7247\uff0c\u89c6\u9891)\u7684\u8bc6\u522b\u5206\u7c7b\uff0c\u63d0\u4ea4\u7ed9\u53c8\u62cd\u4e91\u5904\u7406(\u786e\u8ba4\u5c4f\u853d\uff0c\u5f7b\u5e95\u5220\u9664\uff0c\u53d6\u6d88\u5c4f\u853d)\u5185\u5bb9\uff0c\u5185\u5bb9\u5fc5\u987b\u662f\u4fdd\u5b58\u5728\u53c8\u62cd\u4e91\u5b58\u50a8\u3002\u8bf7\u786e\u4fdd\u60a8\u5df2\u7ecf\u6ce8\u518c\u53c8\u62cd\u4e91\u8d26\u53f7\u5e76\u5b8c\u6210\u5b9e\u540d\u9a8c\u8bc1\uff0c\u8bf7\u786e\u4fdd\u60a8\u5df2\u7ecf\u5f00\u901a\u5185\u5bb9\u8bc6\u522b\u670d\u52a1\u3002</p>"},{"location":"ai/api_console/#_2","title":"\u5185\u5bb9\u5904\u7406","text":"<p>\u63d0\u4ea4\u4efb\u52a1\u5230\u53c8\u62cd\u4e91\u8fdb\u884c\u5185\u5bb9\u76f8\u5173\u5904\u7406\uff0c\u5305\u62ec\u786e\u8ba4\u5c4f\u853d\uff0c\u5f7b\u5e95\u5220\u9664\uff0c\u53d6\u6d88\u5c4f\u853d\u3002</p>"},{"location":"ai/api_console/#_3","title":"\u8bf7\u6c42","text":"<p>\u8bf7\u6c42\u8bed\u6cd5</p> <pre><code>POST /console/identify?act=&lt;action&gt; HTTP/1.1\nHost: banma.api.upyun.com\nDate: GMT Date\nAuthorization: UPYUN &lt;ClientKey&gt;:&lt;Signature&gt;\nContent-Type: application/json\n\n{\"service\":\"&lt;\u670d\u52a1\u540d&gt;\", \"tasks\":[{\"kind\":&lt;\u6587\u4ef6\u7c7b\u578b&gt;, \"path\":\"&lt;\u6587\u4ef6\u8def\u5f84&gt;\"}]}\n</code></pre> <p>** \u7b7e\u540d\u8ba4\u8bc1 **</p> <p><code>Authorization</code> \u8be6\u89c1\u7b7e\u540d\u8ba4\u8bc1\u3002</p> <p>\u8bf7\u6c42\u53c2\u6570</p> \u53c2\u6570 \u7c7b\u578b \u5fc5\u9009 \u8bf4\u660e action string \u662f \u8bf7\u6c42\u7684\u5904\u7406\u4efb\u52a1\uff0c<code>shield</code> \u8868\u793a\u786e\u8ba4\u5c4f\u853d\uff0c<code>cancel_shield</code> \u8868\u793a\u53d6\u6d88\u5c4f\u853d\uff0c<code>delete</code> \u8868\u793a\u5f7b\u5e95\u5220\u9664 service string \u662f \u7528\u6237\u670d\u52a1\u540d tasks list \u662f \u4e00\u7ec4\u4efb\u52a1\u5217\u8868\uff0c\u8be6\u89c1 tasks \u53c2\u6570\u8bf4\u660e kind integer \u662f \u5185\u5bb9\u7684\u7c7b\u578b\uff0c<code>1</code> \u8868\u793a\u56fe\u7247\uff0c<code>2</code> \u8868\u793a\u89c6\u9891 path string \u662f \u5185\u5bb9\u7684\u8def\u5f84 <p> ** tasks \u53c2\u6570\u8bf4\u660e **</p> <p>\u6309 JSON \u683c\u5f0f\u7ec4\u88c5\u4efb\u52a1\uff0c\u4e00\u6b21\u8bf7\u6c42 <code>tasks</code> \u6700\u591a\u53ef\u4ee5\u63d0\u4ea4 10 \u4e2a\u4efb\u52a1\u3002</p> <pre><code>[\n    {\n        \"kind\": 1,     // \u63d0\u4ea4\u7684\u6587\u4ef6\u7c7b\u578b\uff0c1 \u8868\u793a\u56fe\u7247 2 \u8868\u793a\u89c6\u9891\n        \"path\": \"/upyun.jpg\"  // \u63d0\u4ea4\u7684\u6587\u4ef6\u8def\u5f84  \n    },\n    \u2026\n]\n</code></pre>"},{"location":"ai/api_console/#_4","title":"\u54cd\u5e94","text":"<p>\u54cd\u5e94\u53c2\u6570\u662f JSON \u5b57\u7b26\u4e32\uff0c\u53c2\u6570\u540d\u53ca\u8bf4\u660e\u5982\u4e0b\uff1a</p> \u53c2\u6570 \u7c7b\u578b \u8bf4\u660e status_code integer \u5904\u7406\u7ed3\u679c\u72b6\u6001\u7801\uff0c<code>200</code> \u8868\u793a\u6210\u529f\u5904\u7406 error string \u9519\u8bef\u4fe1\u606f\uff0c\u7a7a\u5b57\u7b26\u4e32\u8868\u793a\u65e0\u9519\u8bef\u4fe1\u606f"},{"location":"ai/api_console/#_5","title":"\u4e3e\u4f8b","text":"<p>\u8bf7\u6c42\u793a\u4f8b</p> <pre><code>POST /console/identify?act=shield HTTP/1.1\nHost: banma.api.upyun.com \nDate: Thu, 12 Oct 2017 07:32:34 GMT\nContent-Type: application/json\nAuthorization: UPYUN 2GO7K6NCPInWZqvJewohbDH5jmtaBY0x:mW7gtK0PRvhR0Mzn/x6RSAbh3cg=\nContent-Length: 61\n\n{\"service\":\"upyun\", \"tasks\":[{\"kind\":1, \"path\":\"/upyun.jpg\"}]}\n</code></pre> <p>\u54cd\u5e94\u793a\u4f8b</p> <pre><code>HTTP/1.1 200 OK\nServer: marco/1.8\nContent-Type: application/json\nContent-Length: 31\nDate: Thu, 12 Oct 2017 07:32:29 GMT\n\n{\"status_code\":200,\"error\":\"\"}\n</code></pre>"},{"location":"ai/api_console/#_6","title":"\u83b7\u53d6\u5185\u5bb9\u5c4f\u853d\u4fe1\u606f","text":"<p>\u83b7\u53d6\u6307\u5b9a\u5185\u5bb9\u662f\u5426\u88ab\u5c4f\u853d\u53ca\u5c4f\u853d\u5bc6\u94a5</p>"},{"location":"ai/api_console/#_7","title":"\u8bf7\u6c42","text":"<p>\u8bf7\u6c42\u8bed\u6cd5</p> <pre><code>GET /console/shield_info?service=&lt;service_name&gt;&amp;path=&lt;path&gt; HTTP/1.1\nHost: banma.api.upyun.com\nDate: GMT Date\nAuthorization: UPYUN &lt;ClientKey&gt;:&lt;Signature&gt;\n</code></pre> <p>** \u7b7e\u540d\u8ba4\u8bc1 **</p> <p><code>Authorization</code> \u8be6\u89c1\u7b7e\u540d\u8ba4\u8bc1\u3002</p> <p>\u8bf7\u6c42\u53c2\u6570</p> \u53c2\u6570 \u7c7b\u578b \u5fc5\u9009 \u8bf4\u660e service string \u662f \u7528\u6237\u670d\u52a1\u540d path string \u662f \u5185\u5bb9\u8def\u5f84"},{"location":"ai/api_console/#_8","title":"\u54cd\u5e94","text":"<p>\u54cd\u5e94\u53c2\u6570\u662f JSON \u5b57\u7b26\u4e32\uff0c\u53c2\u6570\u540d\u53ca\u8bf4\u660e\u5982\u4e0b\uff1a</p> \u53c2\u6570 \u7c7b\u578b \u8bf4\u660e status_code integer \u5904\u7406\u7ed3\u679c\u72b6\u6001\u7801\uff0c<code>200</code> \u8868\u793a\u6210\u529f\u5904\u7406 error string \u9519\u8bef\u4fe1\u606f\uff0c\u7a7a\u5b57\u7b26\u4e32\u8868\u793a\u65e0\u9519\u8bef\u4fe1\u606f shielded boolean \u6587\u4ef6\u662f\u5426\u88ab\u5c4f\u853d secret string \u5c4f\u853d\u6587\u4ef6\u7684 <code>secret</code> \u5185\u5bb9\uff0c\u6ca1\u6709\u5c4f\u853d\u8fd4\u56de\u7a7a\u5b57\u7b26\u4e32"},{"location":"ai/api_console/#_9","title":"\u4e3e\u4f8b","text":"<p>\u8bf7\u6c42\u793a\u4f8b</p> <pre><code>GET /console/shield_info?service=upyun&amp;path=/upyun.jpg HTTP/1.1\nHost: banma.api.upyun.com \nDate: Thu, 12 Oct 2017 07:32:34 GMT\nAuthorization: UPYUN 2GO7K6NCPInWZqvJewohbDH5jmtaBY0x:mW7gtK0PRvhR0Mzn/x6RSAbh3cg=\n</code></pre> <p>\u54cd\u5e94\u793a\u4f8b</p> <pre><code>HTTP/1.1 200 OK\nServer: marco/1.8\nContent-Type: application/json\nContent-Length: 57\nDate: Thu, 12 Oct 2017 07:32:29 GMT\n\n{\"status_code\":200,\"error\":\"\",\"shielded\":false,secret:\"\"}\n</code></pre>"},{"location":"ai/api_console/#_10","title":"\u793a\u4f8b\u4ee3\u7801","text":"<p>\u4f7f\u7528\u65f6\uff0c<code>client_key</code> \u548c <code>client_secret</code> \u66ff\u6362\u4e3a\u5185\u5bb9\u8bc6\u522b\u63a7\u5236\u53f0\u4e0a\u7684\u5bc6\u94a5</p> <p>\u8bf7\u6c42\u4fe1\u606f\u6839\u636e\u8bf7\u6c42\u53c2\u6570\u8981\u6c42\u586b\u5199</p> <pre><code># python\n# -*- coding: UTF-8 -*-\nimport base64\nimport datetime\nimport hashlib\nimport hmac\n\nimport requests\n\ndef b64(s):\n    return base64.b64encode(s.encode()).decode()\n\n# \u65f6\u95f4\u683c\u5f0f\u5316\ndef httpdate_rfc1123(dt=None):\n    dt = dt or datetime.datetime.utcnow()\n    return datetime.datetime.utcnow().strftime('%a, %d %b %Y %H:%M:%S GMT')\n\n\n# \u7b7e\u540d\ndef sign(client_key, client_secret, method, uri, date):\n    signarr = [method, uri, date]\n    signstr = '&amp;'.join(signarr)\n    signstr = base64.b64encode(\n        hmac.new(client_secret.encode(), signstr.encode(), digestmod=hashlib.sha1).digest()\n    ).decode()\n    return 'UPYUN %s:%s' % (client_key, signstr)\n\n# \u5bc6\u94a5\nclient_key = 'GO7K6NCPInWZqvJewohbDH5jmt'\nclient_secret = 'KQrAn5OjgG3HVlkJo78DbyiuL'\n\n# \u5185\u5bb9\u5c4f\u853d\ndef shield():\n    headers = {}\n    headers['Date'] = httpdate_rfc1123()\n    headers['Authorization'] = sign(client_key, client_secret, 'POST', '/console/identify?act=shield', headers['Date'])\n    data = {\n        \"service\":\"upyun\",\n        \"tasks\": [{\n        'kind':1,\n        'path': '/test.jpg',\n    }]}\n    resp = requests.post('http://banma.api.upyun.com/console/identify?act=shield', headers=headers, json=data)\n    print(resp.status_code, resp.text)\n\n# \u5185\u5bb9\u53d6\u6d88\u5c4f\u853d\ndef cancel_shield():\n    headers = {}\n    headers['Date'] = httpdate_rfc1123()\n    headers['Authorization'] = sign(client_key, client_secret, 'POST', '/console/identify?act=cancel_shield', headers['Date'])\n    data = {\n        \"service\":\"upyun\",\n        \"tasks\": [{\n        'kind':1,\n        'path': '/test.jpg',\n    }]}\n    resp = requests.post('http://banma.api.upyun.com/console/identify?act=cancel_shield', headers=headers, json=data)\n    print(resp.status_code, resp.text)\n\n# \u5185\u5bb9\u5220\u9664\ndef delete():\n    headers = {}\n    headers['Date'] = httpdate_rfc1123()\n    headers['Authorization'] = sign(client_key, client_secret, 'POST', '/console/identify?act=delete', headers['Date'])\n    data = {\n        \"service\":\"upyun\",\n        \"tasks\": [{\n        'kind':1,\n        'path': '/test.jpg',\n    }]}\n    resp = requests.post('http://banma.api.upyun.com/console/identify?act=delete', headers=headers, json=data)\n    print(resp.status_code, resp.text)\n\n# \u83b7\u53d6\u5185\u5bb9\u5c4f\u853d\u4fe1\u606f\ndef get_info():\n    headers = {}\n    headers['Date'] = httpdate_rfc1123()\n    headers['Authorization'] = sign(client_key, client_secret, 'GET', '/console/shield_info?service=upyun&amp;path=/test.jpg', headers['Date'])\n\n    resp = requests.get('http://banma.api.upyun.com/console/shield_info?service=upyun&amp;path=/test.jpg', headers=headers)\n    print(resp.status_code, resp.text)\n\n\ndef main():\n    shield()\n    cancel_shield()\n    delete()\n    get_info()\n\nif __name__ == '__main__':\n    main()\n</code></pre>"},{"location":"ai/audit/","title":"\u5185\u5bb9\u8bc6\u522b(\u6709\u5b58\u50a8)","text":""},{"location":"ai/audit/#_1","title":"\u5feb\u901f\u5165\u95e8","text":"<p>\u5185\u5bb9\u8bc6\u522b(\u6709\u5b58\u50a8)\u57fa\u4e8e\u4e91\u5b58\u50a8\u670d\u52a1\uff0c\u975e\u7ed3\u6784\u5316\u6570\u636e\u4f1a\u653e\u5728\u4e91\u5b58\u50a8\uff0c\u6216\u76f4\u63a5\u4ece\u4e91\u5b58\u50a8\u4e0a\u8bfb\u53d6\u6570\u636e\uff0c\u60a8\u5728\u4f7f\u7528\u5b83\u4e4b\u524d\uff0c\u8bf7\u786e\u4fdd\u60a8\u5df2\u7ecf\u6ce8\u518c\u53c8\u62cd\u4e91\u8d26\u53f7\u5e76\u5b8c\u6210\u5b9e\u540d\u9a8c\u8bc1\uff0c\u8bf7\u786e\u4fdd\u60a8\u5df2\u7ecf\u521b\u5efa\u4e91\u5b58\u50a8\u670d\u52a1\u548c\u5f00\u901a\u5185\u5bb9\u8bc6\u522b\u670d\u52a1\u3002</p> <p>\u6536\u8d39\u65b9\u9762\uff0c\u6536\u8d39\uff0c\u652f\u6301\u514d\u8d39\u8bd5\u7528\uff0c\u8be6\u60c5\u656c\u8bf7\u8054\u7cfb\u5546\u52a1\u3002</p>"},{"location":"ai/audit/#_2","title":"\u5f00\u53d1\u8005\u6307\u5357","text":""},{"location":"ai/audit/#_3","title":"\u56fe\u7247","text":""},{"location":"ai/audit/#_4","title":"\u4e0a\u4f20\u9884\u5904\u7406","text":"<p>\u5728\u4e0a\u4f20\u56fe\u7247\u65f6\uff0c\u63d0\u4f9b\u9884\u5904\u7406\u53c2\u6570\u3002\u5f85\u56fe\u7247\u4e0a\u4f20\u5b8c\u6210\u540e\uff0c\u81ea\u52a8\u8fdb\u884c\u5f02\u6b65\u5904\u7406\uff0c\u5904\u7406\u5b8c\u6210\u540e\uff0c\u56de\u8c03\u901a\u77e5\u7528\u6237\u5904\u7406\u7ed3\u679c\u3002</p> <p>\u652f\u6301\u7684 API\uff1a FORM API\u3002</p> <p>\u53c2\u6570\u540d\u662f <code>apps</code>\uff0c\u53c2\u6570\u503c\u662f JSON \u5b57\u7b26\u4e32\u3002\u4e00\u4e2a <code>apps</code> \u6700\u591a\u53ea\u5141\u8bb8\u5305\u542b\u4e00\u4e2a\u4efb\u52a1\u3002</p> <p>** apps \u53c2\u6570\u7ed3\u6784 **</p> <pre><code>apps = [\n    {\n        \"name\": \"imgaudit\",                         // \u5f02\u6b65\u4efb\u52a1\u540d\u79f0\uff0cimgaudit \u8868\u793a\u56fe\u7247\u8bc6\u522b\n        \"notify_url\": \"&lt;notify_url&gt;\"                // \u56de\u8c03\u5730\u5740\uff0c\u4e0d\u586b\u65f6\u4f7f\u7528\u4e0a\u4f20\u53c2\u6570\u4e2d\u7684 notify_url\n    }\n]\n</code></pre> <p>** \u56de\u8c03\u901a\u77e5 **</p> <p>\u4efb\u52a1\u5904\u7406\u5b8c\u6210\u540e\uff0c\u5411 <code>notify_url</code> \u5730\u5740\u53d1\u9001\u56de\u8c03\u901a\u77e5\u3002\u8be6\u89c1\u300c\u56de\u8c03\u901a\u77e5\u300d\u3002</p> <p></p>"},{"location":"ai/audit/#_5","title":"\u4e91\u5b58\u50a8\u4e2d\u7684\u56fe\u7247\u5904\u7406","text":"<p>** \u8bf7\u6c42\u65b9\u6cd5 **</p> <p>\u5bf9\u5df2\u7ecf\u5b58\u5728\u4e91\u5b58\u50a8\u4e2d\u7684\u56fe\u7247\uff0c\u4ee5 <code>POST</code> \u65b9\u6cd5\u5411 <code>http://p0.api.upyun.com/pretreatment/</code> \u63d0\u4ea4\u5904\u7406\u4efb\u52a1\uff0c\u54cd\u5e94\u4e2d\u8fd4\u56de\u4efb\u52a1 <code>task_id</code>\u3002\u4efb\u52a1\u4ee5\u5f02\u6b65\u7684\u65b9\u5f0f\u5904\u7406\uff0c\u5904\u7406\u5b8c\u6210\u540e\uff0c\u56de\u8c03\u901a\u77e5\u7528\u6237\u5904\u7406\u7ed3\u679c\u3002</p> <pre><code>curl -X POST \\\n    http://p0.api.upyun.com/pretreatment/ \\\n    -H \"Authorization: UPYUN &lt;Operator&gt;:&lt;Signature&gt;\" \\\n    -H \"Date: &lt;Wed, 29 Oct 2014 02:26:58 GMT&gt;\" \\\n    -H \"Content-MD5: &lt;Content-MD5&gt;\" \\\n    -d \"service=&lt;service&gt;\" \\\n    -d \"notify_url=&lt;notify_url&gt;\" \\\n    -d \"app_name=&lt;app_name&gt;\" \\\n    -d \"tasks=&lt;base64 \u7f16\u7801\u540e\u7684\u4efb\u52a1\u5b57\u7b26\u4e32&gt;\"\n</code></pre> <p>** \u8ba4\u8bc1\u9274\u6743 **</p> <p><code>Authorization</code> \u8be6\u89c1\u7b7e\u540d\u8ba4\u8bc1\u3002</p> <p>** \u8bf7\u6c42\u53c2\u6570 **</p> \u53c2\u6570 \u7c7b\u578b \u5fc5\u9009 \u8bf4\u660e service string \u662f \u56fe\u7247\u6240\u5728\u7684\u670d\u52a1\u540d notify_url string \u662f \u56de\u8c03\u901a\u77e5\u5730\u5740\uff0c\u8be6\u89c1\u56de\u8c03\u901a\u77e5 tasks string \u662f \u4efb\u52a1\u4fe1\u606f\uff0c\u8be6\u89c1 tasks \u53c2\u6570\u8bf4\u660e app_name string \u662f \u5904\u7406\u529f\u80fd\uff0c<code>imgaudit</code> \u8868\u793a\u56fe\u7247\u8bc6\u522b <p> ** tasks \u53c2\u6570\u8bf4\u660e **</p> <p>1. \u6309 JSON \u683c\u5f0f\u7ec4\u88c5\u4efb\u52a1\uff0c\u4e00\u6b21\u8bf7\u6c42 <code>tasks</code> \u6700\u591a\u53ef\u4ee5\u63d0\u4ea4 10 \u4e2a\u4efb\u52a1\u3002</p> <pre><code>[\n    {\n        \"source\": \"/upyun.jpg\",     // \u9700\u8981\u5ba1\u6838\u7684\u56fe\u7247\n    },\n    \u2026\n]\n</code></pre> <p>2. \u628a JSON \u5b57\u7b26\u4e32 Base64 \u7f16\u7801\uff0c\u5f97\u5230 <code>tasks</code>\u3002</p> <p>** \u54cd\u5e94\u4fe1\u606f **</p> <ul> <li>\u4efb\u52a1\u63d0\u4ea4\u6210\u529f\uff1a\u8fd4\u56de <code>200</code>\uff0c\u54cd\u5e94\u4f53\u662f\u4e00\u7ec4\u6309\u4efb\u52a1\u63d0\u4ea4\u5148\u540e\u987a\u5e8f\u6392\u5e8f\u7684 <code>task_id</code>\u3002\u4f8b\u5982\uff1a</li> </ul> <pre><code>[\n    \"35f0148d414a688a275bf915ba7cebb2\",\n    \"98adbaa52b2f63d6d7f327a0ff223348\",\n    \"c3103189fa906a5354d29bd807e8dc51\",\n    \u2026\n]\n</code></pre> <ul> <li>\u4efb\u52a1\u63d0\u4ea4\u5931\u8d25\uff1a\u8fd4\u56de\u76f8\u5e94\u7684\u51fa\u9519\u4fe1\u606f\uff0c\u5177\u4f53\u8bf7\u53c2\u9605\u300c\u72b6\u6001\u7801\u8868\u300d\u3002</li> </ul> <p>** \u56de\u8c03\u901a\u77e5 **</p> <p>\u4efb\u52a1\u5904\u7406\u5b8c\u6210\u540e\uff0c\u5411 <code>notify_url</code> \u5730\u5740\u53d1\u9001\u56de\u8c03\u901a\u77e5\u3002\u8be6\u89c1\u300c\u56de\u8c03\u901a\u77e5\u300d\u3002</p> <p></p>"},{"location":"ai/audit/#_6","title":"\u56de\u8c03\u901a\u77e5","text":"<p>\u4efb\u52a1\u5904\u7406\u5b8c\u6210\u540e\uff0c\u5411 <code>notify_url</code> \u53d1\u9001 <code>HTTP POST</code> \u8bf7\u6c42\uff0c\u8bf7\u6c42\u4f53\u662f\u56de\u8c03\u4fe1\u606f\u3002</p> <pre><code>curl -X POST \\\n    &lt;notify_url&gt; \\\n    -H \"Authorization: UPYUN &lt;Operator&gt;:&lt;Signature&gt;\" \\\n    -H \"Date: &lt;Wed, 29 Oct 2014 02:26:58 GMT&gt;\" \\\n    -H \"Content-MD5: &lt;Content-MD5&gt;\" \\\n    -d \"service=&lt;service&gt;\" \\\n    # \u5176\u4ed6\u53c2\u6570...\n</code></pre> <p>** \u56de\u8c03\u4fe1\u606f **</p> <p>\u56de\u8c03\u4fe1\u606f\u4e3a JSON \u5b57\u7b26\u4e32\uff0c\u53c2\u6570\u540d\u53ca\u8bf4\u660e\u5982\u4e0b\uff1a</p> \u53c2\u6570 \u7c7b\u578b \u8bf4\u660e service string \u56fe\u7247\u6240\u5728\u7684\u670d\u52a1\u540d status_code integer \u5904\u7406\u7ed3\u679c\u72b6\u6001\u7801\uff0c<code>200</code> \u8868\u793a\u6210\u529f\u5904\u7406\uff0c\u8be6\u89c1\u72b6\u6001\u7801\u8868 source string \u56fe\u7247\u8def\u5f84 result json \u8bc6\u522b\u7ed3\u679c\u96c6\uff0c\u5305\u542b <code>porn</code> porn json \u9274\u9ec4\u7ed3\u679c\uff0c\u5305\u542b <code>label</code>\u3001<code>rate</code>\u3001<code>review</code> label integer \u56fe\u7247\u88ab\u5224\u5b9a\u7684\u5206\u7c7b\uff0c\u53ef\u80fd\u503c <code>0</code>\u3001<code>1</code>\u3001<code>2</code>\uff0c<code>0</code> \u8868\u793a\u6b63\u5e38\uff0c<code>1</code> \u8868\u793a\u8272\u60c5\uff0c<code>2</code> \u8868\u793a\u6027\u611f rate float \u56fe\u7247\u88ab\u5224\u5b9a\u4e3a\u67d0\u4e2a\u5206\u7c7b\u7684\u6982\u7387\uff0c\u4ecb\u4e8e <code>[0-1]</code> \u4e4b\u95f4 review boolean \u662f\u5426\u9700\u8981\u4eba\u5de5\u590d\u5ba1\uff0c<code>true</code> \u8868\u793a\u9700\u8981\uff0c<code>false</code> \u8868\u793a\u4e0d\u9700\u8981 task_id string \u4efb\u52a1\u5bf9\u5e94\u7684 <code>task_id</code> error string \u9519\u8bef\u4fe1\u606f\uff0c\u7a7a\u5b57\u7b26\u4e32\u8868\u793a\u65e0\u9519\u8bef\u4fe1\u606f <p>** \u56de\u8c03\u7b7e\u540d **</p> <p><code>Authorization</code> \u8be6\u89c1\u7b7e\u540d\u8ba4\u8bc1\u3002</p> <p>** \u4e3e\u4f8b **</p> <pre><code>{\n    \"service\": \"upyun-temp\",\n    \"status_code\": 200,\n    \"source\": \"upyun.jpg\",\n    \"result\": {\n        \"porn\": {\n            \"label\": 0,\n            \"rate\": 0.9833183288574219,\n            \"review\": false\n        }\n    },\n    \"task_id\": \"7b01610c7fa700b56cd7c80be5e08d5c\",\n    \"error\": \"\"\n}\n</code></pre>"},{"location":"ai/audit/#_7","title":"\u89c6\u9891\u70b9\u64ad","text":""},{"location":"ai/audit/#_8","title":"\u4e0a\u4f20\u9884\u5904\u7406","text":"<p>\u5728\u4e0a\u4f20\u89c6\u9891\u70b9\u64ad\u65f6\uff0c\u63d0\u4f9b\u9884\u5904\u7406\u53c2\u6570\u3002\u5f85\u89c6\u9891\u4e0a\u4f20\u5b8c\u6210\u540e\uff0c\u81ea\u52a8\u8fdb\u884c\u5f02\u6b65\u5904\u7406\uff0c\u5904\u7406\u5b8c\u6210\u540e\uff0c\u56de\u8c03\u901a\u77e5\u7528\u6237\u5904\u7406\u7ed3\u679c\u3002</p> <p>\u652f\u6301\u7684 API\uff1a FORM API\u3002</p> <p>\u53c2\u6570\u540d\u662f <code>apps</code>\uff0c\u53c2\u6570\u503c\u662f JSON \u5b57\u7b26\u4e32\u3002\u4e00\u4e2a <code>apps</code> \u6700\u591a\u53ea\u5141\u8bb8\u5305\u542b\u4e00\u4e2a\u4efb\u52a1\u3002</p> <p>** apps \u53c2\u6570\u7ed3\u6784 **</p> <pre><code>apps = [\n    {\n        \"name\": \"videoaudit\",           // \u5f02\u6b65\u4efb\u52a1\u540d\u79f0\uff0cvideoaudit \u8868\u793a\u70b9\u64ad\u8bc6\u522b\n        \"notify_url\": \"&lt;notify_url&gt;\"    // \u56de\u8c03\u5730\u5740\uff0c\u4e0d\u586b\u65f6\u4f7f\u7528\u4e0a\u4f20\u53c2\u6570\u4e2d\u7684 notify_url\n        \"interval\": 10,                 // \u622a\u56fe\u95f4\u9694\u5468\u671f\uff0c\u975e\u5fc5\u586b\n        \"save_as\": \"/foo_{index}.jpg\",      // \u622a\u56fe\u4fdd\u5b58\u8def\u5f84\uff0c\u975e\u5fc5\u586b\n        \"resize\": \"640x480\",                // \u622a\u56fe\u4fdd\u5b58\u5c3a\u5bf8\uff0c\u975e\u5fc5\u586b\n    }\n]\n</code></pre> <p><code>interval</code>\u3001<code>save_as</code>\u3001<code>resize</code> \u53c2\u6570\u89e3\u91ca\u8bf4\u660e\uff0c\u89c1 tasks \u53c2\u6570\u8bf4\u660e\u3002</p> <p>** \u56de\u8c03\u901a\u77e5 **</p> <p>\u4efb\u52a1\u5904\u7406\u5b8c\u6210\u540e\uff0c\u5411 <code>notify_url</code> \u5730\u5740\u53d1\u9001\u56de\u8c03\u901a\u77e5\u3002\u8be6\u89c1\u300c\u56de\u8c03\u901a\u77e5\u300d\u3002</p> <p></p>"},{"location":"ai/audit/#_9","title":"\u4e91\u5b58\u50a8\u4e2d\u7684\u89c6\u9891\u70b9\u64ad\u5904\u7406","text":"<p>** \u8bf7\u6c42\u65b9\u6cd5 **</p> <p>\u5bf9\u5df2\u7ecf\u5b58\u5728\u4e91\u5b58\u50a8\u4e2d\u7684\u89c6\u9891\u70b9\u64ad\uff0c\u4ee5 <code>POST</code> \u65b9\u6cd5\u5411 <code>http://p0.api.upyun.com/pretreatment/</code> \u63d0\u4ea4\u5904\u7406\u4efb\u52a1\uff0c\u54cd\u5e94\u4e2d\u8fd4\u56de\u4efb\u52a1 <code>task_id</code>\u3002\u4efb\u52a1\u4ee5\u5f02\u6b65\u7684\u65b9\u5f0f\u5904\u7406\uff0c\u5904\u7406\u5b8c\u6210\u540e\uff0c\u56de\u8c03\u901a\u77e5\u7528\u6237\u5904\u7406\u7ed3\u679c\u3002</p> <pre><code>curl -X POST \\\n    http://p0.api.upyun.com/pretreatment/ \\\n    -H \"Authorization: UPYUN &lt;Operator&gt;:&lt;Signature&gt;\" \\\n    -H \"Date: &lt;Wed, 29 Oct 2014 02:26:58 GMT&gt;\" \\\n    -H \"Content-MD5: &lt;Content-MD5&gt;\" \\\n    -d \"service=&lt;service&gt;\" \\\n    -d \"notify_url=&lt;notify_url&gt;\" \\\n    -d \"app_name=&lt;app_name&gt;\" \\\n    -d \"tasks=&lt;base64 \u7f16\u7801\u540e\u7684\u4efb\u52a1\u5b57\u7b26\u4e32&gt;\"\n</code></pre> <p>** \u8ba4\u8bc1\u9274\u6743 **</p> <p><code>Authorization</code> \u8be6\u89c1\u7b7e\u540d\u8ba4\u8bc1\u3002</p> <p>** \u8bf7\u6c42\u53c2\u6570 **</p> \u53c2\u6570 \u7c7b\u578b \u5fc5\u9009 \u8bf4\u660e service string \u662f \u89c6\u9891\u70b9\u64ad\u6240\u5728\u7684\u670d\u52a1\u540d notify_url string \u662f \u56de\u8c03\u901a\u77e5\u5730\u5740\uff0c\u8be6\u89c1\u56de\u8c03\u901a\u77e5 tasks string \u662f \u4efb\u52a1\u4fe1\u606f\uff0c\u8be6\u89c1 tasks \u53c2\u6570\u8bf4\u660e app_name string \u662f \u5904\u7406\u529f\u80fd\uff0c<code>videoaudit</code> \u8868\u793a\u70b9\u64ad\u8bc6\u522b <p> ** tasks \u53c2\u6570\u8bf4\u660e **</p> \u53c2\u6570 \u7c7b\u578b \u5fc5\u9009 \u8bf4\u660e source string \u662f \u89c6\u9891\u70b9\u64ad\u7684\u8def\u5f84 interval integer \u5426 \u622a\u56fe\u95f4\u9694\u65f6\u95f4\uff0c\u9ed8\u8ba4 <code>10</code>\uff0c\u5355\u4f4d\u79d2 save_as string \u5426 \u622a\u56fe\u4fdd\u5b58\u8def\u5f84\uff0c\u9ed8\u8ba4\u4e0d\u4fdd\u5b58\u622a\u56fe  \u652f\u6301\u52a8\u6001\u53c2\u6570\u548c <code>{index}</code>(\u5fc5\u586b)\uff0c\u540e\u7f00\u4f5c\u4e3a\u622a\u56fe\u683c\u5f0f\uff0c\u652f\u6301 <code>jpg</code> \u548c <code>png</code> resize string \u5426 \u622a\u56fe\u4fdd\u5b58\u5c3a\u5bf8\uff0c\u9ed8\u8ba4\u539f\u56fe\u5927\u5c0f\uff0c\u683c\u5f0f\u5bbdx\u9ad8\uff0c\u5982 <code>640x480</code> <p>1. \u6309 JSON \u683c\u5f0f\u7ec4\u88c5\u4efb\u52a1\uff0c\u4e00\u6b21\u8bf7\u6c42 <code>tasks</code> \u6700\u591a\u53ef\u4ee5\u63d0\u4ea4 10 \u4e2a\u4efb\u52a1\u3002</p> <pre><code>[\n    {\n        \"source\": \"/upyun.mp4\",\n        \"save_as\": \"/foo_{index}.jpg\",   // {index} \u8868\u793a\u7b2c\u51e0\u5f20\u622a\u56fe\uff0c\u7b2c\u4e00\u5f20\u662f /foo_1.jpg\uff0c\u7b2c\u4e8c\u5f20\u662f /foo_2.jpg\n    },\n    \u2026\n]\n</code></pre> <p>2. \u628a JSON \u5b57\u7b26\u4e32 Base64 \u7f16\u7801\uff0c\u5f97\u5230 <code>tasks</code>\u3002</p> <p>** \u54cd\u5e94\u4fe1\u606f **</p> <ul> <li>\u4efb\u52a1\u63d0\u4ea4\u6210\u529f\uff1a\u8fd4\u56de <code>200</code>\uff0c\u54cd\u5e94\u4f53\u662f\u4e00\u7ec4\u6309\u4efb\u52a1\u63d0\u4ea4\u5148\u540e\u987a\u5e8f\u6392\u5e8f\u7684 <code>task_id</code>\u3002\u4f8b\u5982\uff1a</li> </ul> <pre><code>[\n    \"35f0148d414a688a275bf915ba7cebb2\",\n    \u2026\n]\n</code></pre> <ul> <li>\u4efb\u52a1\u63d0\u4ea4\u5931\u8d25\uff1a\u8fd4\u56de\u76f8\u5e94\u7684\u51fa\u9519\u4fe1\u606f\uff0c\u5177\u4f53\u8bf7\u53c2\u9605\u300c\u72b6\u6001\u7801\u8868\u300d\u3002</li> </ul> <p>** \u56de\u8c03\u901a\u77e5 **</p> <p>\u4efb\u52a1\u5904\u7406\u5b8c\u6210\u540e\uff0c\u5411 <code>notify_url</code> \u5730\u5740\u53d1\u9001\u56de\u8c03\u901a\u77e5\u3002\u8be6\u89c1\u300c\u56de\u8c03\u901a\u77e5\u300d\u3002</p> <p></p>"},{"location":"ai/audit/#_10","title":"\u56de\u8c03\u901a\u77e5","text":"<p>\u4efb\u52a1\u5904\u7406\u5b8c\u6210\u540e\uff0c\u5411 <code>notify_url</code> \u53d1\u9001 <code>HTTP POST</code> \u8bf7\u6c42\uff0c\u8bf7\u6c42\u4f53\u662f\u56de\u8c03\u4fe1\u606f\u3002</p> <pre><code>curl -X POST \\\n    &lt;notify_url&gt; \\\n    -H \"Authorization: UPYUN &lt;Operator&gt;:&lt;Signature&gt;\" \\\n    -H \"Date: &lt;Wed, 29 Oct 2014 02:26:58 GMT&gt;\" \\\n    -H \"Content-MD5: &lt;Content-MD5&gt;\" \\\n    -d \"service=&lt;service&gt;\" \\\n    # \u5176\u4ed6\u53c2\u6570...\n</code></pre> <p>** \u56de\u8c03\u4fe1\u606f **</p> <p>\u56de\u8c03\u4fe1\u606f\u4e3a JSON \u5b57\u7b26\u4e32\uff0c\u53c2\u6570\u540d\u53ca\u8bf4\u660e\u5982\u4e0b\uff1a</p> \u53c2\u6570 \u7c7b\u578b \u8bf4\u660e task_id string \u4efb\u52a1\u5bf9\u5e94\u7684 <code>task_id</code> status_code integer \u5904\u7406\u7ed3\u679c\u72b6\u6001\u7801\uff0c<code>200</code> \u8868\u793a\u6210\u529f\u5904\u7406\uff0c\u8be6\u89c1\u72b6\u6001\u7801\u8868 service string \u89c6\u9891\u70b9\u64ad\u6240\u5728\u7684\u670d\u52a1\u540d source string \u622a\u56fe\u4fdd\u5b58\u8def\u5f84\uff0c\u5982\u679c\u8bf7\u6c42\u53c2\u6570\u4e2d\u672a\u8bbe\u7f6e <code>save_as</code>\uff0c\u4e0d\u5b58\u5728 error string \u9519\u8bef\u4fe1\u606f\uff0c\u7a7a\u5b57\u7b26\u4e32\u8868\u793a\u65e0\u9519\u8bef\u4fe1\u606f result json \u8bc6\u522b\u7ed3\u679c\u96c6\uff0c\u5305\u542b <code>porn</code> result.porn json \u9274\u9ec4\u7ed3\u679c\uff0c\u5305\u542b <code>label</code>\u3001<code>rate</code>\u3001<code>review</code> result.porn.label integer \u56fe\u7247\u88ab\u5224\u5b9a\u7684\u5206\u7c7b\uff0c\u53ef\u80fd\u503c <code>0</code>\u3001<code>1</code>\u3001<code>2</code>\uff0c<code>0</code> \u8868\u793a\u6b63\u5e38\uff0c<code>1</code> \u8868\u793a\u8272\u60c5\uff0c<code>2</code> \u8868\u793a\u6027\u611f result.porn.rate float \u56fe\u7247\u88ab\u5224\u5b9a\u4e3a\u67d0\u4e2a\u5206\u7c7b\u7684\u6982\u7387\uff0c\u4ecb\u4e8e <code>[0-1]</code> \u4e4b\u95f4 result.porn.review boolean \u662f\u5426\u9700\u8981\u4eba\u5de5\u590d\u5ba1\uff0c<code>true</code> \u8868\u793a\u9700\u8981\uff0c<code>false</code> \u8868\u793a\u4e0d\u9700\u8981 filelist json \u622a\u56fe\u96c6, \u4e3a\u6bcf\u4e2a\u65f6\u95f4\u70b9\u7684\u622a\u56fe\u5ba1\u6838\u7ed3\u679c filelist.result json \u8bc6\u522b\u7ed3\u679c\u96c6\uff0c\u5305\u542b <code>porn</code> filelist.result.shot_time string \u622a\u56fe\u65f6\u95f4\u70b9 filelist.result.porn json \u9274\u9ec4\u7ed3\u679c\uff0c\u5305\u542b <code>label</code>\u3001<code>rate</code>\u3001<code>review</code> filelist.result.porn.label integer \u56fe\u7247\u88ab\u5224\u5b9a\u7684\u5206\u7c7b\uff0c\u53ef\u80fd\u503c <code>0</code>\u3001<code>1</code>\u3001<code>2</code>\uff0c<code>0</code> \u8868\u793a\u6b63\u5e38\uff0c<code>1</code> \u8868\u793a\u8272\u60c5\uff0c<code>2</code> \u8868\u793a\u6027\u611f filelist.result.porn.rate float \u56fe\u7247\u88ab\u5224\u5b9a\u4e3a\u67d0\u4e2a\u5206\u7c7b\u7684\u6982\u7387\uff0c\u4ecb\u4e8e <code>[0-1]</code> \u4e4b\u95f4 filelist.result.porn.review boolean \u662f\u5426\u9700\u8981\u4eba\u5de5\u590d\u5ba1\uff0c<code>true</code> \u8868\u793a\u9700\u8981\uff0c<code>false</code> \u8868\u793a\u4e0d\u9700\u8981 <p>** \u56de\u8c03\u7b7e\u540d **</p> <p><code>Authorization</code> \u8be6\u89c1\u7b7e\u540d\u8ba4\u8bc1\u3002</p> <p>** \u4e3e\u4f8b **</p> <pre><code>{\n    \"service\": \"upyun-temp\",\n    \"status_code\": 200,\n    \"source\": \"upyun.mp4\",\n    \"result\": {\n        \"porn\": {\n            \"label\": 0,\n            \"rate\": 0.9833183288574219,\n            \"review\": false\n        }\n    },\n    \"filelist\": [\n        {\n            \"result\": {\n                    \"porn\": {\n                    \"label\": 0,\n                    \"rate\": 0.9833183288574219,\n                    \"review\": false\n                }\n            },\n            \"shot_time\": 0,\n            \"save_as\": \"foo_1.jpg\"\n        }\n    ],\n    \"task_id\": \"7b01610c7fa700b56cd7c80be5e08d5c\",\n    \"error\": \"\"\n}\n</code></pre>"},{"location":"ai/audit/#_11","title":"\u89c6\u9891\u76f4\u64ad","text":""},{"location":"ai/audit/#_12","title":"\u521b\u5efa\u4efb\u52a1","text":"<p>\u4ee5 <code>POST</code> \u65b9\u6cd5\u5411 <code>http://p1.api.upyun.com/&lt;service&gt;/liveaudit/create</code> \u63d0\u4ea4\u4efb\u52a1\uff0c\u670d\u52a1\u6536\u5230\u8bf7\u6c42\u540e\u521b\u5efa\u5b9a\u65f6\u4efb\u52a1\uff0c\u83b7\u53d6\u6d41\u6700\u8fd1\u5173\u952e\u5e27\uff0c\u8bc6\u522b\u5e76\u8fd4\u56de\u7ed3\u679c\u3002\u7279\u522b\u5730\uff0c<code>&lt;service&gt;</code> \u9700\u66ff\u6362\u4e3a\u5177\u4f53\u7684\u670d\u52a1\u540d\u3002</p> <pre><code>curl -X POST \\\n    http://p1.api.upyun.com/&lt;service&gt;/liveaudit/create \\\n    -H \"Authorization: UPYUN &lt;Operator&gt;:&lt;Signature&gt;\" \\\n    -H \"Date: &lt;Wed, 29 Oct 2014 02:26:58 GMT&gt;\" \\\n    -H \"Content-MD5: &lt;Content-MD5&gt;\" \\\n    -d '{\"service\": \"&lt;service&gt;\", \"source\": \"&lt;source&gt;\", \"save_as\": \"&lt;save_as&gt;\", \"notify_url\": \"&lt;notify_url&gt;\"}'\n</code></pre> <p>** \u8ba4\u8bc1\u9274\u6743 **</p> <p><code>Authorization</code> \u8be6\u89c1\u7b7e\u540d\u8ba4\u8bc1\u3002</p> <p>** \u8bf7\u6c42\u53c2\u6570 **</p> \u53c2\u6570 \u7c7b\u578b \u5fc5\u9009 \u8bf4\u660e service string \u662f \u56fe\u7247\u5b58\u50a8\u7684\u670d\u52a1\u540d source string \u662f RTMP \u6d41\u5730\u5740\uff0c\u5fc5\u987b\u4ee5 <code>rtmp://</code> \u5f00\u5934 save_as string \u662f \u622a\u56fe\u4fdd\u5b58\u5730\u5740\uff0c\u652f\u6301\u52a8\u6001\u53c2\u6570\uff0c\u540e\u7f00\u4f5c\u4e3a\u622a\u56fe\u683c\u5f0f\uff0c\u652f\u6301 <code>jpg</code> \u548c <code>png</code> notify_url string \u662f \u56de\u8c03\u901a\u77e5\u5730\u5740\uff0c\u8be6\u89c1\u56de\u8c03\u901a\u77e5 interval string \u5426 \u622a\u56fe\u95f4\u9694\u65f6\u95f4\uff0c\u9ed8\u8ba4 <code>10</code>\uff0c\u5355\u4f4d\u79d2 resize string \u5426 \u622a\u56fe\u4fdd\u5b58\u5c3a\u5bf8\uff0c\u9ed8\u8ba4\u539f\u56fe\u5927\u5c0f\uff0c\u683c\u5f0f\u5bbdx\u9ad8\uff0c\u5982 <code>640x480</code> <p>** \u54cd\u5e94\u4fe1\u606f **</p> <ul> <li>\u4efb\u52a1\u63d0\u4ea4\u6210\u529f\uff1a\u8fd4\u56de <code>200</code>\uff0c\u54cd\u5e94\u4f53\u662f\u6d41\u6700\u8fd1\u5173\u952e\u5e27\u7684\u8bc6\u522b\u7ed3\u679c\u3002\u4f8b\u5982\uff1a</li> </ul> <pre><code>{\n    \"service\": \"upyun-temp\",\n    \"status_code\": 200,\n    \"source\": \"upyun.jpg\",\n    \"result\": {\n        \"porn\": {\n            \"label\": 0,\n            \"rate\": 0.9833183288574219,\n            \"review\": false\n        }\n    },\n    \"task_id\": \"7b01610c7fa700b56cd7c80be5e08d5c\"\n    \"error\": \"\"\n}\n</code></pre> <ul> <li>\u4efb\u52a1\u63d0\u4ea4\u5931\u8d25\uff1a\u8fd4\u56de\u76f8\u5e94\u7684\u51fa\u9519\u4fe1\u606f\uff0c\u5177\u4f53\u8bf7\u53c2\u9605\u300c\u72b6\u6001\u7801\u8868\u300d\u3002</li> </ul> <p> ** \u5468\u671f\u6027\u5904\u7406 **</p> <p>\u4e4b\u540e\uff0c\u7cfb\u7edf\u4f1a\u5468\u671f\u53bb\u83b7\u53d6\u6d41\uff0c\u5e76\u63d0\u53d6\u6700\u8fd1\u5173\u952e\u5e27\u8fdb\u884c\u8bc6\u522b\uff0c\u8bc6\u522b\u7ed3\u679c\u5411 <code>notify_url</code> \u53d1\u9001 <code>HTTP POST</code> \u8bf7\u6c42\uff0c\u8bf7\u6c42\u4f53\u662f\u56de\u8c03\u4fe1\u606f\u3002</p> <pre><code>curl -X POST \\\n    &lt;notify_url&gt; \\\n    -H \"Authorization: UPYUN &lt;Operator&gt;:&lt;Signature&gt;\" \\\n    -H \"Date: &lt;Wed, 29 Oct 2014 02:26:58 GMT&gt;\" \\\n    -H \"Content-MD5: &lt;Content-MD5&gt;\" \\\n    -d \"service=&lt;service&gt;\" \\\n    # \u5176\u4ed6\u53c2\u6570...\n</code></pre> <p>** \u56de\u8c03\u4fe1\u606f **</p> <p>\u56de\u8c03\u4fe1\u606f\u4e3a JSON \u5b57\u7b26\u4e32\uff0c\u53c2\u6570\u540d\u53ca\u8bf4\u660e\u5982\u4e0b\uff1a</p> \u53c2\u6570 \u7c7b\u578b \u8bf4\u660e service string \u56fe\u7247\u5b58\u50a8\u7684\u670d\u52a1\u540d status_code integer \u5904\u7406\u7ed3\u679c\u72b6\u6001\u7801\uff0c<code>200</code> \u8868\u793a\u6210\u529f\u5904\u7406\uff0c\u8be6\u89c1\u72b6\u6001\u7801\u8868 source string \u56fe\u7247\u8def\u5f84 result json \u8bc6\u522b\u7ed3\u679c\u96c6\uff0c\u5305\u542b <code>porn</code> porn json \u9274\u9ec4\u7ed3\u679c\uff0c\u5305\u542b <code>label</code>\u3001<code>rate</code>\u3001<code>review</code> label integer \u56fe\u7247\u88ab\u5224\u5b9a\u7684\u5206\u7c7b\uff0c\u53ef\u80fd\u503c <code>0</code>\u3001<code>1</code>\u3001<code>2</code>\uff0c<code>0</code> \u8868\u793a\u6b63\u5e38\uff0c<code>1</code> \u8868\u793a\u8272\u60c5\uff0c<code>2</code> \u8868\u793a\u6027\u611f rate float \u56fe\u7247\u88ab\u5224\u5b9a\u4e3a\u67d0\u4e2a\u5206\u7c7b\u7684\u6982\u7387\uff0c\u4ecb\u4e8e <code>[0-1]</code> \u4e4b\u95f4 review boolean \u662f\u5426\u9700\u8981\u4eba\u5de5\u590d\u5ba1\uff0c<code>true</code> \u8868\u793a\u9700\u8981\uff0c<code>false</code> \u8868\u793a\u4e0d\u9700\u8981 task_id string \u4efb\u52a1\u5bf9\u5e94\u7684 <code>task_id</code> error string \u9519\u8bef\u4fe1\u606f\uff0c\u7a7a\u5b57\u7b26\u4e32\u8868\u793a\u65e0\u9519\u8bef\u4fe1\u606f <p>** \u56de\u8c03\u7b7e\u540d **</p> <p><code>Authorization</code> \u8be6\u89c1\u7b7e\u540d\u8ba4\u8bc1\u3002</p> <p>** \u4e3e\u4f8b **</p> <pre><code>{\n    \"service\": \"upyun-temp\",\n    \"status_code\": 200,\n    \"source\": \"upyun.jpg\",\n    \"result\": {\n        \"porn\": {\n            \"label\": 0,\n            \"rate\": 0.9833183288574219,\n            \"review\": false\n        }\n    },\n    \"task_id\": \"7b01610c7fa700b56cd7c80be5e08d5c\"\n    \"error\": \"\"\n}\n</code></pre> <p></p>"},{"location":"ai/audit/#_13","title":"\u53d6\u6d88\u4efb\u52a1","text":"<p>\u4ee5 <code>POST</code> \u65b9\u6cd5\u5411 <code>http://p1.api.upyun.com/&lt;service&gt;/liveaudit/cancel</code> \u63d0\u4ea4\u4efb\u52a1\u3002\u7279\u522b\u5730\uff0c<code>&lt;service&gt;</code> \u9700\u66ff\u6362\u4e3a\u5177\u4f53\u7684\u670d\u52a1\u540d\u3002</p> <pre><code>curl -X POST \\\n    http://p1.api.upyun.com/&lt;service&gt;/liveaudit/cancel \\\n    -H \"Authorization: UPYUN &lt;Operator&gt;:&lt;Signature&gt;\" \\\n    -H \"Date: &lt;Wed, 29 Oct 2014 02:26:58 GMT&gt;\" \\\n    -H \"Content-MD5: &lt;Content-MD5&gt;\" \\\n    -d '{\"service\": &lt;service&gt;, \"task_id\": &lt;task_id&gt;}'\n</code></pre> <p>** \u8ba4\u8bc1\u9274\u6743 **</p> <p><code>Authorization</code> \u8be6\u89c1\u7b7e\u540d\u8ba4\u8bc1\u3002</p> <p>** \u8bf7\u6c42\u53c2\u6570 **</p> \u53c2\u6570 \u7c7b\u578b \u5fc5\u9009 \u8bf4\u660e service string \u662f \u56fe\u7247\u5b58\u50a8\u7684\u670d\u52a1\u540d task_id string \u662f \u4efb\u52a1 ID, \u4efb\u52a1\u521b\u5efa\u65f6\u7cfb\u7edf\u8fd4\u56de\u7684\u4efb\u52a1 ID <p>** \u54cd\u5e94\u4fe1\u606f **</p> <ul> <li>\u4efb\u52a1\u63d0\u4ea4\u6210\u529f\uff1a\u8fd4\u56de <code>200</code>\u3002\u4f8b\u5982\uff1a</li> </ul> <pre><code>{\"status\": 200}\n</code></pre> <ul> <li>\u4efb\u52a1\u63d0\u4ea4\u5931\u8d25\uff1a\u8fd4\u56de\u76f8\u5e94\u7684\u51fa\u9519\u4fe1\u606f\uff0c\u5177\u4f53\u8bf7\u53c2\u9605\u300c\u72b6\u6001\u7801\u8868\u300d\u3002</li> </ul> <p>** \u6ce8 **</p> <ul> <li>\u5982\u679c\u7cfb\u7edf\u5bf9\u6d41\u64cd\u4f5c\u5931\u8d25\u6b21\u6570\u8fc7\u591a\uff0c\u5982\u6d41\u5df2\u7ecf\u505c\u6b62, \u4f1a\u81ea\u52a8\u89e6\u53d1\u53d6\u6d88\u64cd\u4f5c\u3002</li> </ul> <p></p>"},{"location":"ai/audit/#_14","title":"\u72b6\u6001\u7801\u8868","text":"\u72b6\u6001\u7801 \u8bf4\u660e 200 \u5904\u7406\u6210\u529f 400 \u7f3a\u5931\u5fc5\u586b\u53c2\u6570\uff0cErrMissingRequiredArgument 400 \u53c2\u6570\u7c7b\u578b\u9519\u8bef\uff0cErrType 400 <code>interval</code> \u53c2\u6570\u9519\u8bef\uff0cErrInterval 403 \u4efb\u52a1\u5df2\u5b58\u5728\uff0cErrRepeat 404 \u6587\u4ef6\u4e0d\u5b58\u5728/\u76f4\u64ad\u6d41\u4e0d\u5b58\u5728/\u4efb\u52a1\u4e0d\u5b58\u5728 405 \u8bf7\u6c42\u65b9\u6cd5\u4e0d\u5141\u8bb8 413 \u6587\u4ef6\u5927\u5c0f\u8d85\u8fc7 10M 415 \u6587\u4ef6\u4e0d\u662f\u56fe\u7247 5xx \u670d\u52a1\u7aef\u9519\u8bef\u3002\u5982\u9047\u6b64\u7c7b\u9519\u8bef\uff0c\u8bf7\u53cd\u9988\u7ed9\u552e\u540e\u6216\u60a8\u7684\u5546\u52a1\u7ecf\u7406"},{"location":"ai/audit/#_15","title":"\u51c6\u786e\u7387","text":"<p>\u4ece\u67d0\u4e1a\u52a1\u7cfb\u7edf\u968f\u673a\u62bd\u53d6 24 \u4e07\u5f20\u56fe\u7247\uff0c\u5148\u8fdb\u884c\u673a\u5668\u5ba1\u6838\uff0c\u518d\u5bf9\u7ed3\u679c\u8fdb\u884c\u4eba\u5de5\u590d\u67e5\u4e24\u904d\uff0c\u6700\u7ec8\u786e\u5b9a\u51c6\u786e\u7387\u662f 99.68%\u3002\u5373 99.68% \u7684\u673a\u5668\u5224\u65ad\u662f\u51c6\u786e\u7684\uff0c\u7c7b\u4f3c\u4e8e\u4eba\u5de5\u5ba1\u6838\u7684\u51c6\u786e\u7387\uff0c\u53ef\u4ee5\u4ee3\u66ff\u4eba\u5de5\u8fdb\u884c\u5ba1\u6838\u3002</p>"},{"location":"ai/audit/#_16","title":"\u8272\u60c5\u8bc6\u522b","text":"<p>\u8bc6\u522b\u8272\u60c5\u3001\u6027\u611f\u3001\u6b63\u5e38\u5185\u5bb9\u3002\u5bf9\u4e8e\u4e0d\u786e\u5b9a\u5185\u5bb9\uff0c\u4f7f\u7528 <code>review\uff1atrue</code> \u8868\u793a\u3002</p>"},{"location":"ai/audit/#_17","title":"\u56fe\u7247","text":"<ul> <li> <p>\u5982\u679c\u662f\u65b0\u589e\u56fe\u7247\uff0c\u53ef\u4ee5\u4f7f\u7528\u4e0a\u4f20\u9884\u5904\u7406\u63a5\u53e3\uff0c\u628a\u56fe\u7247\u4e0a\u4f20\u81f3\u53c8\u62cd\u4e91\u5b58\u50a8\u7684\u540c\u65f6\uff0c\u8fdb\u884c\u9274\u9ec4\u3002</p> </li> <li> <p>\u5982\u679c\u56fe\u7247\u5df2\u7ecf\u5b58\u5728\u53c8\u62cd\u4e91\u5b58\u50a8\uff0c\u53ef\u4ee5\u4f7f\u7528\u76f4\u63a5\u5904\u7406\u63a5\u53e3\uff0c\u8fdb\u884c\u9274\u9ec4\u3002</p> </li> </ul>"},{"location":"ai/audit/#_18","title":"\u89c6\u9891\u70b9\u64ad","text":"<ul> <li> <p>\u5982\u679c\u662f\u65b0\u589e\u89c6\u9891\uff0c\u53ef\u4ee5\u4f7f\u7528\u4e0a\u4f20\u9884\u5904\u7406\u63a5\u53e3\uff0c\u628a\u89c6\u9891\u4e0a\u4f20\u81f3\u53c8\u62cd\u4e91\u5b58\u50a8\u7684\u540c\u65f6\uff0c\u8fdb\u884c\u9274\u9ec4\u3002</p> </li> <li> <p>\u5982\u679c\u89c6\u9891\u5df2\u7ecf\u5b58\u5728\u53c8\u62cd\u4e91\u5b58\u50a8 \uff0c\u53ef\u4ee5\u4f7f\u7528\u76f4\u63a5\u5904\u7406\u63a5\u53e3\uff0c\u8fdb\u884c\u9274\u9ec4\u3002</p> </li> <li> <p>\u7cfb\u7edf\u6309\u95f4\u9694\uff08<code>interval</code>\uff09\u5bf9\u70b9\u64ad\u8fdb\u884c\u622a\u56fe\uff08\u5173\u952e\u5e27\u63d0\u53d6\uff09\uff0c\u7136\u540e\u5bf9\u622a\u56fe\u8fdb\u884c\u9274\u9ec4\u3002\u9ed8\u8ba4\u95f4\u9694\u662f 6s\u3002\u5982\u679c\u89c6\u9891\u662f\u9ad8\u654f\u5185\u5bb9\uff0c\u95f4\u9694\u53ef\u4ee5\u8bbe\u7f6e\u7684\u66f4\u5c0f\u3002</p> </li> <li> <p>\u9274\u9ec4\u7ed3\u679c\u4e2d\u6709\u622a\u56fe\u65f6\u95f4\u70b9\u4fe1\u606f\uff0c\u5b83\u53ef\u4ee5\u5e2e\u52a9\u5b9a\u4f4d\u8fdd\u89c4\u5185\u5bb9\u7684\u4f4d\u7f6e\uff0c\u548c\u67e5\u770b\u8bc6\u522b\u5185\u5bb9\u7684\u4f4d\u7f6e\u3002</p> </li> </ul>"},{"location":"ai/audit/#_19","title":"\u89c6\u9891\u76f4\u64ad","text":"<ul> <li> <p>\u6839\u636e\u76f4\u64ad\u7684\u7279\u6027\uff0c\u4e3a\u89c6\u9891\u76f4\u64ad\u8bbe\u8ba1\u4e86\u4e13\u95e8\u7684\u63a5\u53e3\uff0c\u5305\u62ec\u521b\u5efa\u4efb\u52a1\u63a5\u53e3\u548c\u53d6\u6d88\u4efb\u52a1\u63a5\u53e3\u3002</p> </li> <li> <p>\u7cfb\u7edf\u6309\u95f4\u9694\uff08<code>interval</code>\uff09\u5bf9\u76f4\u64ad\u6d41\u8fdb\u884c\u622a\u56fe\uff08\u5173\u952e\u5e27\u63d0\u53d6\uff09\uff0c\u7136\u540e\u5bf9\u622a\u56fe\u8fdb\u884c\u9274\u9ec4\u3002\u9ed8\u8ba4\u95f4\u9694\u662f 6s\u3002\u5982\u679c\u6d41\u662f\u9ad8\u654f\u5185\u5bb9\uff0c\u95f4\u9694\u53ef\u4ee5\u8bbe\u7f6e\u7684\u66f4\u5c0f\u3002</p> </li> <li> <p>\u6ca1\u6709\u4efb\u52a1\u67e5\u8be2\u63a5\u53e3\uff0c\u9700\u8981\u5ba2\u6237\u7aef\u8bb0\u5f55\u76f4\u64ad\u6d41\u4e0e\u4efb\u52a1\uff08<code>task_id</code>\uff09\u7684\u5173\u7cfb\u3002</p> </li> </ul> <p>\u5982\u6709\u7591\u95ee\u8bf7 \u8054\u7cfb\u6211\u4eec</p>"},{"location":"ai/audit_nostorage/","title":"\u5185\u5bb9\u8bc6\u522b(\u65e0\u5b58\u50a8)","text":""},{"location":"ai/audit_nostorage/#_1","title":"\u5feb\u901f\u5165\u95e8","text":"<p>\u5185\u5bb9\u8bc6\u522b(\u65e0\u5b58\u50a8)\u662f\u76f4\u63a5\u628a\u5185\u5bb9\u63d0\u4ea4\u7ed9\u5e73\u53f0\uff0c\u63d0\u4ea4\u65b9\u5f0f\u53ef\u4ee5\u662f\u5185\u5bb9\u672c\u8eab\u6216 URL\uff0c\u5e73\u53f0\u5904\u7406\u5b8c\u6210\u540e\u8fd4\u56de\u7ed3\u679c\uff0c\u4e0d\u4fdd\u7559\u6570\u636e\u3002\u60a8\u5728\u4f7f\u7528\u5b83\u4e4b\u524d\uff0c\u8bf7\u786e\u4fdd\u60a8\u5df2\u7ecf\u6ce8\u518c\u53c8\u62cd\u4e91\u8d26\u53f7\u5e76\u5b8c\u6210\u5b9e\u540d\u9a8c\u8bc1\uff0c\u8bf7\u786e\u4fdd\u60a8\u5df2\u7ecf\u5f00\u901a\u5185\u5bb9\u8bc6\u522b\u670d\u52a1\u3002</p> <p>\u670d\u52a1\u9700\u8981\u6536\u8d39\uff0c\u53ef\u4ee5\u514d\u8d39\u8bd5\u7528\uff0c\u8be6\u60c5\u656c\u8bf7\u8054\u7cfb\u5546\u52a1\u3002</p>"},{"location":"ai/audit_nostorage/#_2","title":"\u56fe\u7247\u8bc6\u522b(\u56fe\u7247\u5185\u5bb9)","text":"<p>\u4e0a\u4f20\u56fe\u7247\u5185\u5bb9\uff0c\u8fdb\u884c\u8bc6\u522b\u3002<code>act=porn</code> \u8868\u793a\u8272\u60c5\u8bc6\u522b\uff0c<code>act=political</code> \u8868\u793a\u6d89\u653f\u8bc6\u522b\u3002</p>"},{"location":"ai/audit_nostorage/#_3","title":"\u8bf7\u6c42","text":"<p>\u8bf7\u6c42\u8bed\u6cd5</p> <pre><code>POST /image/bin/check?act=&lt;act&gt; HTTP/1.1\nHost: banma.api.upyun.com\nDate: GMT Date\nAuthorization: UPYUN &lt;ClientKey&gt;:&lt;Signature&gt;\nContent-Type: &lt;\u56fe\u7247\u5185\u5bb9\u7c7b\u578b\uff0c\u5fc5\u586b&gt;\n\n[Image Content...]\n</code></pre> <p>** \u7b7e\u540d\u8ba4\u8bc1 **</p> <p><code>Authorization</code> \u8be6\u89c1\u7b7e\u540d\u8ba4\u8bc1\u3002</p>"},{"location":"ai/audit_nostorage/#_4","title":"\u54cd\u5e94","text":"<p>\u54cd\u5e94\u53c2\u6570\u662f JSON \u5b57\u7b26\u4e32\uff0c\u53c2\u6570\u540d\u53ca\u8bf4\u660e\u5982\u4e0b\uff1a</p> \u53c2\u6570 \u7c7b\u578b \u8bf4\u660e status_code integer \u5904\u7406\u7ed3\u679c\u72b6\u6001\u7801\uff0c<code>200</code> \u8868\u793a\u6210\u529f\u5904\u7406 error string \u9519\u8bef\u4fe1\u606f\uff0c\u7a7a\u5b57\u7b26\u4e32\u8868\u793a\u65e0\u9519\u8bef\u4fe1\u606f porn json \u8272\u60c5\u8bc6\u522b\u7ed3\u679c porn.scores list \u5404\u4e2a\u5206\u7c7b\u53ca\u6982\u7387, \u4ece\u5de6\u81f3\u53f3\u4f9d\u6b21\u662f <code>\u6b63\u5e38\u6982\u7387</code>\u3001<code>\u8272\u60c5\u6982\u7387</code>\u3001<code>\u6027\u611f\u6982\u7387</code> porn.label integer \u63a8\u8350\u5206\u7c7b\uff0c\u53ef\u80fd\u503c <code>0</code>\u3001<code>1</code>\u3001<code>2</code>\uff0c<code>0</code> \u8868\u793a\u6b63\u5e38\uff0c<code>1</code> \u8868\u793a\u8272\u60c5\uff0c<code>2</code> \u8868\u793a\u6027\u611f porn.rate float \u63a8\u8350\u5206\u7c7b\u7684\u6982\u7387 porn.review bool \u662f\u5426\u9700\u8981\u4eba\u5de5\u5ba1\u6838 political json \u6d89\u653f\u8bc6\u522b\u7ed3\u679c political.label integer \u5206\u7c7b, \u53ef\u80fd\u503c <code>100</code>, <code>101</code>, <code>100</code> \u8868\u793a\u6b63\u5e38, <code>101</code> \u8868\u793a\u6d89\u653f political.name string \u56fe\u7247\u4e2d\u51fa\u73b0\u7684\u653f\u6cbb\u4eba\u7269\u59d3\u540d political.similarity float \u76f8\u4f3c\u5ea6"},{"location":"ai/audit_nostorage/#_5","title":"\u4e3e\u4f8b","text":"<p>\u8bf7\u6c42\u793a\u4f8b</p> <pre><code>POST /image/bin/check?act=porn HTTP/1.1\nHost: banma.api.upyun.com\nDate: Thu, 12 Oct 2017 07:32:34 GMT\nContent-Type: image/jpeg\nAuthorization: UPYUN 2GO7K6NCPInWZqvJewohbDH5jmtaBY0x:mW7gtK0PRvhR0Mzn/x6RSAbh3cg=\nContent-Length: 447330\n\n[Image Content...]\n</code></pre> <p>\u54cd\u5e94\u793a\u4f8b</p> <pre><code>HTTP/1.1 200 OK\nServer: marco/1.8\nContent-Type: application/json\nContent-Length: 163\nDate: Thu, 12 Oct 2017 07:32:29 GMT\n\n{\"status_code\":200,\"error\":\"\",\"porn\":{\"scores\":[0.999045193195343,0.00015256137703545392,0.0008022452238947153],\"rate\":0.999045193195343,\"label\":0,\"review\":false}}\n</code></pre>"},{"location":"ai/audit_nostorage/#url","title":"\u56fe\u7247\u8bc6\u522b(\u56fe\u7247 URL)","text":"<p>\u63d0\u4ea4\u56fe\u7247 URL\uff0c\u8fdb\u884c\u8bc6\u522b\u3002<code>act=porn</code> \u8868\u793a\u8272\u60c5\u8bc6\u522b\uff0c<code>act=political</code> \u8868\u793a\u6d89\u653f\u8bc6\u522b\u3002</p>"},{"location":"ai/audit_nostorage/#_6","title":"\u8bf7\u6c42","text":"<p>\u8bf7\u6c42\u8bed\u6cd5</p> <pre><code>POST /image/url/check?act=&lt;act&gt; HTTP/1.1\nHost: banma.api.upyun.com\nDate: GMT Date\nAuthorization: UPYUN &lt;ClientKey&gt;:&lt;Signature&gt;\nContent-Type: application/json\n\n{\"url\": \"&lt;\u56fe\u7247\u7684\u7edd\u5bf9\u8def\u5f84&gt;\"}\n</code></pre> <p>** \u7b7e\u540d\u8ba4\u8bc1 **</p> <p><code>Authorization</code> \u8be6\u89c1\u7b7e\u540d\u8ba4\u8bc1\u3002</p> <p>\u8bf7\u6c42\u53c2\u6570</p> \u53c2\u6570 \u7c7b\u578b \u5fc5\u9009 \u8bf4\u660e url string \u662f \u56fe\u7247\u7684 URL"},{"location":"ai/audit_nostorage/#_7","title":"\u54cd\u5e94","text":"<p>\u54cd\u5e94\u53c2\u6570\u662f JSON \u5b57\u7b26\u4e32\uff0c\u53c2\u6570\u540d\u53ca\u8bf4\u660e\u5982\u4e0b\uff1a</p> \u53c2\u6570 \u7c7b\u578b \u8bf4\u660e status_code integer \u5904\u7406\u7ed3\u679c\u72b6\u6001\u7801\uff0c<code>200</code> \u8868\u793a\u6210\u529f\u5904\u7406 error string \u9519\u8bef\u4fe1\u606f\uff0c\u7a7a\u5b57\u7b26\u4e32\u8868\u793a\u65e0\u9519\u8bef\u4fe1\u606f porn json \u8272\u60c5\u8bc6\u522b\u7ed3\u679c porn.scores list \u5404\u4e2a\u5206\u7c7b\u53ca\u6982\u7387, \u4ece\u5de6\u81f3\u53f3\u4f9d\u6b21\u662f <code>\u6b63\u5e38\u6982\u7387</code>\u3001<code>\u8272\u60c5\u6982\u7387</code>\u3001<code>\u6027\u611f\u6982\u7387</code> porn.label integer \u63a8\u8350\u5206\u7c7b\uff0c\u53ef\u80fd\u503c <code>0</code>\u3001<code>1</code>\u3001<code>2</code>\uff0c<code>0</code> \u8868\u793a\u6b63\u5e38\uff0c<code>1</code> \u8868\u793a\u8272\u60c5\uff0c<code>2</code> \u8868\u793a\u6027\u611f porn.rate float \u63a8\u8350\u5206\u7c7b\u7684\u6982\u7387 porn.review bool \u662f\u5426\u9700\u8981\u4eba\u5de5\u5ba1\u6838 political json \u6d89\u653f\u8bc6\u522b\u7ed3\u679c political.label integer \u5206\u7c7b, \u53ef\u80fd\u503c <code>100</code>, <code>101</code>, <code>100</code> \u8868\u793a\u6b63\u5e38, <code>101</code> \u8868\u793a\u6d89\u653f political.name string \u56fe\u7247\u4e2d\u51fa\u73b0\u7684\u653f\u6cbb\u4eba\u7269\u59d3\u540d political.similarity float \u76f8\u4f3c\u5ea6"},{"location":"ai/audit_nostorage/#_8","title":"\u4e3e\u4f8b","text":"<p>\u8bf7\u6c42\u793a\u4f8b</p> <pre><code>POST /image/url/check?act=porn HTTP/1.1\nHost: banma.api.upyun.com\nDate: Thu, 12 Oct 2017 06:57:50 GMT\nAuthorization: UPYUN 2GO7K6NCPInWZqvJewohbDH5jmtaBY0x:CKhrW8SSU0ctnmavfnRs1s1NFBY=\nContent-Length: 50\nContent-Type: application/json\n\n{\"url\": \"http://uprocess.b0.upaiyun.com/demo.jpg\"}\n</code></pre> <p>\u54cd\u5e94\u793a\u4f8b</p> <pre><code>HTTP/1.1 200 OK\nServer: marco/1.8\nContent-Type: application/json\nContent-Length: 164\nDate: Thu, 12 Oct 2017 06:57:45 GMT\n\n{\"status_code\":200,\"error\":\"\",\"porn\":{\"scores\":[0.9996986389160156,0.0001312318054260686,0.0001701978617347777],\"rate\":0.9996986389160156,\"label\":0,\"review\":false}}\n</code></pre>"},{"location":"ai/audit_nostorage/#url_1","title":"\u70b9\u64ad\u8bc6\u522b(\u70b9\u64ad URL)","text":"<p>\u63d0\u4ea4\u89c6\u9891\u70b9\u64ad URL\uff0c\u8fdb\u884c\u8bc6\u522b\u3002\u8bc6\u522b\u662f\u5f02\u6b65\u8fdb\u884c\u7684\uff0c\u6536\u5230\u8bf7\u6c42\u540e\uff0c\u4f1a\u5148\u8fd4\u56de\u4efb\u52a1\u7684 ID\uff0c\u5f85\u7ed3\u679c\u51fa\u6765\u540e\uff0c\u56de\u8c03\u8fd4\u56de\u8bc6\u522b\u7ed3\u679c\u3002<code>act=porn</code> \u8868\u793a\u8272\u60c5\u8bc6\u522b\u3002</p>"},{"location":"ai/audit_nostorage/#_9","title":"\u8bf7\u6c42","text":"<p>\u8bf7\u6c42\u8bed\u6cd5</p> <pre><code>POST /video/check?act=porn HTTP/1.1\nHost: banma.api.upyun.com\nDate: GMT Date\nAuthorization: UPYUN &lt;ClientKey&gt;:&lt;Signature&gt;\nContent-Type: application/json\n\n{\"url\": \"&lt;\u89c6\u9891\u70b9\u64ad\u7684\u7edd\u5bf9\u8def\u5f84&gt;\", \"notify_url\": \"&lt;\u56de\u8c03\u5730\u5740&gt;\"}\n</code></pre> <p>** \u7b7e\u540d\u8ba4\u8bc1 **</p> <p><code>Authorization</code> \u8be6\u89c1\u7b7e\u540d\u8ba4\u8bc1\u3002</p> <p>\u8bf7\u6c42\u53c2\u6570</p> \u53c2\u6570 \u7c7b\u578b \u5fc5\u9009 \u8bf4\u660e url string \u662f \u70b9\u64ad\u7684 URL notify_url string \u662f \u56de\u8c03\u5730\u5740, \u8bc6\u522b\u7ed3\u679c\u5c06\u4ee5 <code>POST</code> \u8bf7\u6c42\u53d1\u5f80\u8be5\u5730\u5740 interval integer \u5426 \u622a\u56fe\u95f4\u9694, \u9ed8\u8ba4\u6bcf 10s \u4ece\u70b9\u64ad\u4e2d\u53d6\u4e00\u5e27"},{"location":"ai/audit_nostorage/#_10","title":"\u54cd\u5e94","text":"<p>\u54cd\u5e94\u53c2\u6570\u662f JSON \u5b57\u7b26\u4e32\uff0c\u53c2\u6570\u540d\u53ca\u8bf4\u660e\u5982\u4e0b\uff1a</p> \u53c2\u6570 \u7c7b\u578b \u8bf4\u660e task_id string \u4efb\u52a1 ID"},{"location":"ai/audit_nostorage/#_11","title":"\u56de\u8c03","text":"<p>\u4efb\u52a1\u5904\u7406\u5b8c\u6210\u540e\uff0c\u5411 <code>notify_url</code> \u53d1\u9001 <code>HTTP POST</code> \u8bf7\u6c42\uff0c\u8bf7\u6c42\u4f53\u662f\u56de\u8c03\u4fe1\u606f\u3002</p> <pre><code>curl -X POST \\\n    &lt;notify_url&gt; \\\n    -H \"Authorization: UPYUN &lt;Operator&gt;:&lt;Signature&gt;\" \\\n    -H \"Date: &lt;Wed, 29 Oct 2014 02:26:58 GMT&gt;\" \\\n    -H \"Content-MD5: &lt;Content-MD5&gt;\" \\\n    -d \"service=&lt;service&gt;\" \\\n    # \u5176\u4ed6\u53c2\u6570...\n</code></pre> <p>** \u56de\u8c03\u53c2\u6570 **</p> <p>\u56de\u8c03\u53c2\u6570\u4e3a JSON \u5b57\u7b26\u4e32\uff0c\u53c2\u6570\u540d\u53ca\u8bf4\u660e\u5982\u4e0b\uff1a</p> \u53c2\u6570 \u7c7b\u578b \u8bf4\u660e task_id string \u4efb\u52a1\u5bf9\u5e94\u7684 <code>task_id</code> status_code integer \u5904\u7406\u7ed3\u679c\u72b6\u6001\u7801\uff0c<code>200</code> \u8868\u793a\u6210\u529f\u5904\u7406\uff0c\u8be6\u89c1\u72b6\u6001\u7801\u8868 service string \u89c6\u9891\u70b9\u64ad\u6240\u5728\u7684\u670d\u52a1\u540d source string \u622a\u56fe\u4fdd\u5b58\u8def\u5f84\uff0c\u5982\u679c\u8bf7\u6c42\u53c2\u6570\u4e2d\u672a\u8bbe\u7f6e <code>save_as</code>\uff0c\u4e0d\u5b58\u5728 error string \u9519\u8bef\u4fe1\u606f\uff0c\u7a7a\u5b57\u7b26\u4e32\u8868\u793a\u65e0\u9519\u8bef\u4fe1\u606f result json \u8bc6\u522b\u7ed3\u679c\u96c6\uff0c\u5305\u542b <code>porn</code> result.porn json \u9274\u9ec4\u7ed3\u679c\uff0c\u5305\u542b <code>label</code>\u3001<code>rate</code>\u3001<code>review</code> result.porn.label integer \u56fe\u7247\u88ab\u5224\u5b9a\u7684\u5206\u7c7b\uff0c\u53ef\u80fd\u503c <code>0</code>\u3001<code>1</code>\u3001<code>2</code>\uff0c<code>0</code> \u8868\u793a\u6b63\u5e38\uff0c<code>1</code> \u8868\u793a\u8272\u60c5\uff0c<code>2</code> \u8868\u793a\u6027\u611f result.porn.rate float \u56fe\u7247\u88ab\u5224\u5b9a\u4e3a\u67d0\u4e2a\u5206\u7c7b\u7684\u6982\u7387\uff0c\u4ecb\u4e8e <code>[0-1]</code> \u4e4b\u95f4 result.porn.review boolean \u662f\u5426\u9700\u8981\u4eba\u5de5\u590d\u5ba1\uff0c<code>true</code> \u8868\u793a\u9700\u8981\uff0c<code>false</code> \u8868\u793a\u4e0d\u9700\u8981 filelist json \u622a\u56fe\u96c6, \u4e3a\u6bcf\u4e2a\u65f6\u95f4\u70b9\u7684\u622a\u56fe\u5ba1\u6838\u7ed3\u679c filelist.result json \u8bc6\u522b\u7ed3\u679c\u96c6\uff0c\u5305\u542b <code>porn</code> filelist.result.shot_time string \u622a\u56fe\u65f6\u95f4\u70b9 filelist.result.porn json \u9274\u9ec4\u7ed3\u679c\uff0c\u5305\u542b <code>label</code>\u3001<code>rate</code>\u3001<code>review</code> filelist.result.porn.label integer \u56fe\u7247\u88ab\u5224\u5b9a\u7684\u5206\u7c7b\uff0c\u53ef\u80fd\u503c <code>0</code>\u3001<code>1</code>\u3001<code>2</code>\uff0c<code>0</code> \u8868\u793a\u6b63\u5e38\uff0c<code>1</code> \u8868\u793a\u8272\u60c5\uff0c<code>2</code> \u8868\u793a\u6027\u611f filelist.result.porn.rate float \u56fe\u7247\u88ab\u5224\u5b9a\u4e3a\u67d0\u4e2a\u5206\u7c7b\u7684\u6982\u7387\uff0c\u4ecb\u4e8e <code>[0-1]</code> \u4e4b\u95f4 filelist.result.porn.review boolean \u662f\u5426\u9700\u8981\u4eba\u5de5\u590d\u5ba1\uff0c<code>true</code> \u8868\u793a\u9700\u8981\uff0c<code>false</code> \u8868\u793a\u4e0d\u9700\u8981"},{"location":"ai/audit_nostorage/#_12","title":"\u4e3e\u4f8b","text":"<p>\u8bf7\u6c42\u793a\u4f8b</p> <pre><code>POST /video/check HTTP/1.1\nHost: banma.api.upyun.com\nDate: Thu, 12 Oct 2017 06:57:51 GMT\nAuthorization: UPYUN 2GO7K6NCPInWZqvJewohbDH5jmtaBY0x:qXT2W1ROzdO3WXVM2nlLguc370k=\nContent-Length: 109\nContent-Type: application/json\n\n{\"url\": \"http://uprocess.b0.upaiyun.com/demo/short_video/UPYUN.mp4\", \"notify_url\": \"http://httpbin.org/post\"}\n</code></pre> <p>\u54cd\u5e94\u793a\u4f8b</p> <pre><code>HTTP/1.1 200 OK\nServer: marco/1.8\nContent-Type: application/json\nContent-Length: 65\nDate: Thu, 12 Oct 2017 06:57:45 GMT\n\n{\"status_code\":200,\"task_id\":\"AIYgOOTk2OMav3iS64zPSS1Js0FzkT95\"}\n</code></pre> <p>\u56de\u8c03\u793a\u4f8b</p> <pre><code>POST &lt;notify_url&gt; HTTP/1.1\nContent-Type: application/json\nDate: Thu, 12 Oct 2017 04:06:43 GMT\nContent-Md5: d2acd6c01e1de9afa203b585f614c0cf\nContent-Length: 1775\nAuthorization: UPYUN 2GO7K6NCPInWZqvJewohbDH5jmtaBY0x:P8qmASfkbtM/6CMo1WlqW59W9+g=\n\n{\"error\":\"\",\"filelist\":[{\"result\":{\"porn\":{\"label\":0,\"rate\":0.9995450377464294,\"review\":false}},\"shot_time\":0},{\"result\":{\"porn\":{\"label\":0,\"rate\":0.9990586638450623,\"review\":false}},\"shot_time\":10},{\"result\":{\"porn\":{\"label\":0,\"rate\":0.9997151494026184,\"review\":false}},\"shot_time\":20},{\"result\":{\"porn\":{\"label\":0,\"rate\":0.9990173578262329,\"review\":false}},\"shot_time\":30},{\"result\":{\"porn\":{\"label\":0,\"rate\":0.9789921641349792,\"review\":false}},\"shot_time\":40},{\"result\":{\"porn\":{\"label\":0,\"rate\":0.9992973804473877,\"review\":false}},\"shot_time\":50},{\"result\":{\"porn\":{\"label\":0,\"rate\":0.9562959671020508,\"review\":false}},\"shot_time\":60},{\"result\":{\"porn\":{\"label\":0,\"rate\":0.9989614486694336,\"review\":false}},\"shot_time\":70}],\"result\":{\"porn\":{\"label\":0,\"rate\":0.9931503997908698,\"review\":false}},\"service\":\"\",\"source\":\"\",\"status_code\":200,\"task_id\":\"rDt7IaxKeQMGWVvX8YZ5MbwJtT0WuQbh\"}\n</code></pre>"},{"location":"ai/audit_nostorage/#_13","title":"\u6587\u672c\u8bc6\u522b","text":"<p>\u63d0\u4ea4\u6587\u672c\u5185\u5bb9\uff0c\u8fdb\u884c\u8bc6\u522b\u3002\u8bc6\u522b\u5305\u62ec\u8272\u60c5\u3001\u5e7f\u544a\u3001\u66b4\u6050\u7b49\uff0c<code>act=spam</code> \u8868\u793a\u8fdd\u89c4\u8bc6\u522b\u3002</p>"},{"location":"ai/audit_nostorage/#_14","title":"\u8bf7\u6c42","text":"<p>\u8bf7\u6c42\u8bed\u6cd5</p> <pre><code>POST /text/check?act=spam HTTP/1.1\nHost: banma.api.upyun.com\nDate: GMT Date\nAuthorization: UPYUN &lt;ClientKey&gt;:&lt;Signature&gt;\nContent-Type: application/json\n\n{\"text\": \"&lt;\u6587\u672c\u5185\u5bb9&gt;\"}\n</code></pre> <p>** \u7b7e\u540d\u8ba4\u8bc1 **</p> <p><code>Authorization</code> \u8be6\u89c1\u7b7e\u540d\u8ba4\u8bc1\u3002</p> <p>\u8bf7\u6c42\u53c2\u6570</p> \u53c2\u6570 \u7c7b\u578b \u5fc5\u9009 \u8bf4\u660e text string \u662f \u6587\u672c\u5185\u5bb9\uff0cJSON \u5b57\u7b26\u4e32\uff0c\u6700\u5927\u5141\u8bb8 64k"},{"location":"ai/audit_nostorage/#_15","title":"\u54cd\u5e94","text":"<p>\u54cd\u5e94\u53c2\u6570\u662f JSON \u5b57\u7b26\u4e32\uff0c\u53c2\u6570\u540d\u53ca\u8bf4\u660e\u5982\u4e0b\uff1a</p> \u53c2\u6570 \u7c7b\u578b \u8bf4\u660e status_code integer \u5904\u7406\u7ed3\u679c\u72b6\u6001\u7801\uff0c<code>200</code> \u8868\u793a\u6210\u529f\u5904\u7406 error string \u9519\u8bef\u4fe1\u606f\uff0c\u7a7a\u5b57\u7b26\u4e32\u8868\u793a\u65e0\u9519\u8bef\u4fe1\u606f spam json \u6587\u672c\u8bc6\u522b\u7ed3\u679c spam.task_id string \u4efb\u52a1 ID spam.scores list \u5404\u4e2a\u5206\u7c7b\u53ca\u6982\u7387, \u4ece\u5de6\u81f3\u53f3\u4f9d\u6b21\u662f <code>\u6b63\u5e38\u6982\u7387</code>\u3001<code>\u8fdd\u89c4\u6982\u7387</code> spam.label integer \u63a8\u8350\u5206\u7c7b\uff0c\u53ef\u80fd\u503c <code>0</code>\u3001<code>1</code>\u3001<code>2</code>\uff0c<code>0</code> \u8868\u793a\u6b63\u5e38\uff0c<code>1</code> \u8868\u793a\u8fdd\u89c4\uff0c<code>2</code> \u8868\u793a\u7591\u4f3c spam.rate float \u63a8\u8350\u5206\u7c7b\u7684\u6982\u7387 spam.review bool \u662f\u5426\u9700\u8981\u4eba\u5de5\u5ba1\u6838\uff0c<code>true</code> \u8868\u793a\u9700\u8981\uff0c<code>false</code> \u8868\u793a\u4e0d\u9700\u8981"},{"location":"ai/audit_nostorage/#_16","title":"\u4e3e\u4f8b","text":"<p>\u8bf7\u6c42\u793a\u4f8b</p> <pre><code>POST /text/check HTTP/1.1\nHost: banma.api.upyun.com\nDate: Tue, 19 Sep 2017 07:47:49 GMT\nAuthorization: UPYUN x2biJtrSOGhuYj4vzPg70nfZeLEIdmlH:Q+sPbbukYstHJprpSLsS+lnOrro=\nContent-Length: 30\nContent-Type: application/json\n\n{\"text\": \"\u8fd9\u662f\u6b63\u5e38\u6587\u672c\"}\n</code></pre> <p>\u54cd\u5e94\u793a\u4f8b</p> <pre><code>HTTP/1.1 200 OK\nServer: marco/1.8\nContent-Type: application/json\nContent-Length: 190\nDate: Tue, 19 Sep 2017 07:47:50 GMT\n\n{\"status_code\": 200, error: \"\", \"spam\":{\"task_id\":\"6583350f\",\"scores\":[0.9713295698165894,0.028670458123087883],\"rate\":0.028670458123087883,\"label\":1,\"review\":false}}\n</code></pre> <p></p>"},{"location":"ai/audit_nostorage/#_17","title":"\u72b6\u6001\u7801\u8bf4\u660e","text":"\u53c2\u6570 \u7c7b\u578b 200 \u5904\u7406\u6210\u529f 400 \u8bf7\u6c42\u53c2\u6570\u9519\u8bef 401 \u8bf7\u6c42\u8ba4\u8bc1\u5931\u8d25 5xx \u670d\u52a1\u7aef\u9519\u8bef\uff0c\u8bf7\u53cd\u9988\u7ed9\u552e\u540e\u6216\u60a8\u7684\u5546\u52a1\u7ecf\u7406"},{"location":"ai/audit_nostorage/#python","title":"Python \u6f14\u793a","text":"<pre><code>import base64\nimport datetime\nimport hashlib\nimport hmac\n\nimport requests\n\ndef b64(s):\n    return base64.b64encode(s.encode()).decode()\n\n# \u65f6\u95f4\u683c\u5f0f\u5316\ndef httpdate_rfc1123(dt=None):\n    dt = dt or datetime.datetime.utcnow()\n    return datetime.datetime.utcnow().strftime('%a, %d %b %Y %H:%M:%S GMT')\n\n\n# \u7b7e\u540d\ndef sign(client_key, client_secret, method, uri, date):\n    signarr = [method, uri, date]\n    signstr = '&amp;'.join(signarr)\n    signstr = base64.b64encode(\n        hmac.new(client_secret.encode(), signstr.encode(), digestmod=hashlib.sha1).digest()\n    ).decode()\n    return 'UPYUN %s:%s' % (client_key, signstr)\n\n\n# \u5bc6\u94a5\nclient_key = '2GO7K6NCPInWZqvJewohbDH5jmt'\nclient_secret = 'BKQrAn5OjgG3HVlkJo78DbyiuL'\n\n# \u56fe\u7247 URL \u8fdb\u884c\u8272\u60c5\u8bc6\u522b\ndef image_check():\n    headers = {}\n    headers['Date'] = httpdate_rfc1123()\n    headers['Authorization'] = sign(client_key, client_secret, 'POST', '/image/url/check', headers['Date'])\n    data = {\n        'url': 'http://uprocess.b0.upaiyun.com/demo.jpg'\n    }\n    resp = requests.post('http://banma.api.upyun.com/image/url/check', headers=headers, json=data)\n    print(resp.status_code, resp.text)\n\n\n# \u89c6\u9891\u70b9\u64ad URL \u8fdb\u884c\u8272\u60c5\u8bc6\u522b\ndef video_check():\n    headers = {}\n    headers['Date'] = httpdate_rfc1123()\n    headers['Authorization'] = sign(client_key, client_secret, 'POST', '/video/check', headers['Date'])\n    data = {\n        'url': 'http://uprocess.b0.upaiyun.com/demo/short_video/UPYUN.mp4',\n        'notify_url': 'http://httpbin.org/post'\n    }\n    resp = requests.post('http://banma.api.upyun.com/video/check', headers=headers, json=data)\n    print(resp.status_code, resp.text)\n\n\n# \u6587\u672c\u8bc6\u522b\ndef text_check():\n    # \u6587\u672c\u5ba1\u6838\n    headers = {}\n    headers['Date'] = httpdate_rfc1123()\n    headers['Authorization'] = sign(client_key, client_secret, 'POST', '/text/check', headers['Date'])\n    data = {\n        'text': '\u8fd9\u91cc\u653e\u6587\u672c\u5185\u5bb9'\n    }\n    resp = requests.post('http://banma.api.upyun.com/text/check', headers=headers, json=data)\n    print(resp.status_code, resp.text)\n\n\n# \u8c03\u7528\ndef main():\n    image_check()\n    video_check()\n    text_check()\n\n\nif __name__ == '__main__':\n    main()\n</code></pre>"},{"location":"ai/authorization/","title":"\u8ba4\u8bc1\u9274\u6743","text":"<p>\u4f7f\u7528 API \u65f6\uff0c\u9700\u8981\u5bf9\u8bf7\u6c42\u8fdb\u884c\u7b7e\u540d\u3002\u7cfb\u7edf\u53d1\u7ed9\u7528\u6237\u7684\u8bf7\u6c42\uff0c\u4e5f\u4f1a\u8fdb\u884c\u7b7e\u540d\uff0c\u4f9b\u7528\u6237\u9a8c\u8bc1\u8bf7\u6c42\u6765\u6e90\u3002</p>"},{"location":"ai/authorization/#_1","title":"\u7b7e\u540d\u8ba4\u8bc1","text":"<p>** \u7b7e\u540d\u8bed\u6cd5 **</p> <pre><code>Authorization: UPYUN &lt;ClientKey&gt;:&lt;Signature&gt;\n\n&lt;Signature&gt; = Base64 (HMAC-SHA1 (&lt;ClientSecret&gt;,\n&lt;Method&gt;&amp;\n&lt;URI&gt;&amp;\n&lt;Date&gt;&amp;\n&lt;Content-MD5&gt;\n))\n</code></pre> <p>** \u53c2\u6570\u8bf4\u660e **</p> \u53c2\u6570 \u5fc5\u9009 \u8bf4\u660e ClientKey \u662f \u7528\u6237\u5bc6\u94a5 KEY Method \u662f \u8bf7\u6c42\u65b9\u5f0f\uff0c\u5982\uff1aGET\u3001POST\u3001PUT\u3001HEAD \u7b49 URI \u662f \u8bf7\u6c42\u8def\u5f84 Date \u662f \u8bf7\u6c42\u65e5\u671f\u65f6\u95f4\uff0cGMT \u683c\u5f0f\u5b57\u7b26\u4e32 (RFC 1123)\uff0c\u5982 <code>Wed, 29 Oct 2014 02:26:58 GMT</code> Content-MD5 \u5426 \u8bf7\u6c42\u4f53\u7684 MD5 \u6821\u9a8c\u503c\uff0c\u5982\u679c\u8bf7\u6c42\u4f53\u4e3a\u7a7a\uff0c\u53ef\u4ee5\u4e3a\u7a7a ClientSecret \u662f \u7528\u6237\u5bc6\u94a5 Secret <p>** \u6ce8 **</p> <ul> <li>\u975e\u5fc5\u9009\u53c2\u6570\u4e3a\u7a7a\u65f6\uff0c\u8fde\u540c\u524d\u9762\u7684 <code>&amp;</code> \u4e00\u8d77\u4e0d\u53c2\u4e0e\u7b7e\u540d\u8ba1\u7b97\u3002\u6240\u6709\u8ba1\u7b97\u7684 MD5 \u503c\uff0c\u683c\u5f0f\u5747\u662f 32 \u4f4d\u5c0f\u5199\u3002</li> <li>HMAC-SHA1 \u8f93\u51fa\u7684\u5fc5\u987b\u662f\u539f\u751f\u7684\u4e8c\u8fdb\u5236\u6570\u636e\u3002</li> <li>\u8bf7\u6c42\u7b7e\u540d\u6709\u6548\u671f\u4e3a 30 \u5206\u949f\uff0c\u5982\u679c\u7b7e\u540d\u8d85\u8fc7\u6709\u6548\u671f\uff0c\u9700\u8981\u91cd\u65b0\u751f\u6210\u7b7e\u540d\u3002</li> <li>\u56de\u8c03\u7b7e\u540d\u6709\u6548\u671f\u7531\u7528\u6237\u81ea\u884c\u786e\u5b9a\uff0c\u5efa\u8bae\u8bbe\u7f6e\u4e3a 30 \u5206\u949f\u3002</li> </ul>"},{"location":"ai/authorization/#_2","title":"\u4e3e\u4f8b","text":"<p>** \u53c2\u6570\u4fe1\u606f **</p> <pre><code>// \u64cd\u4f5c\u5458\u4fe1\u606f\nClientKey = TSzF4Cd9JPt6Qcm3WqfDiuUpoAH1            \nClientSecret = KuGnZUD17aN9oyRkjSixBqlwQcH\n\n// \u53c2\u6570\nMethod = POST                           \nURI = /image/url/check\nDate = Thu, 12 Oct 2017 06:57:50 GMT\nBody = {'url': 'http://uprocess.b0.upaiyun.com/demo.jpg'}\nContent-MD5 = MD5(Body)\n            = DD0F8A735A45323A32EE4D6154E9985B\n</code></pre> <p>** \u751f\u6210 Signature **</p> <pre><code>Signature = Base64 (HMAC-SHA1 (&lt;ClientSecret&gt;,\n&lt;Method&gt;&amp;\n&lt;URI&gt;&amp;\n&lt;Date&gt;&amp;\n&lt;Content-MD5&gt;\n))\n// \u4e0d\u7528\u6362\u884c\u6216\u7a7a\u683c\uff0c\u4e0a\u9762\u683c\u5f0f\u7684\u6362\u884c\u6216\u7a7a\u683c\u662f\u4e3a\u4e86\u65b9\u4fbf\u9605\u8bfb\n= Base64 (HMAC-SHA1 (ClientSecret, Method&amp;URI&amp;Date&amp;Content-MD5))\n// HMAC-SHA1 \u8fd4\u56de\u7684\u539f\u751f\u4e8c\u8fdb\u5236\u6570\u636e\u8fdb\u884c Base64 \u7f16\u7801\n= CKhrW8SSU0ctnmavfnRs1s1NFBY=\n</code></pre> <p>** \u7b7e\u540d **</p> <pre><code>Authorization: UPYUN TSzF4Cd9JPt6Qcm3WqfDiuUpoAH1:CKhrW8SSU0ctnmavfnRs1s1NFBY=\n</code></pre> <p>** \u5b8c\u6574\u8bf7\u6c42 **</p> <pre><code>POST /image/url/check HTTP/1.1\nHost: banma.api.upyun.com\nDate: Thu, 12 Oct 2017 06:57:50 GMT\nContent-MD5: DD0F8A735A45323A32EE4D6154E9985B\nAuthorization: UPYUN TSzF4Cd9JPt6Qcm3WqfDiuUpoAH1:CKhrW8SSU0ctnmavfnRs1s1NFBY=\nContent-Length: 50\nContent-Type: application/json\n\n{\"url\": \"http://uprocess.b0.upaiyun.com/demo.jpg\"}\n</code></pre>"},{"location":"ai/authorization/#_3","title":"\u4ee3\u7801\u6f14\u793a","text":""},{"location":"ai/authorization/#_4","title":"\u6ce8\u610f\u4e8b\u9879","text":"<ol> <li>\u672c\u793a\u4f8b\u9002\u7528\u4e8e\u4e91\u5b58\u50a8\uff0c\u4e91\u5904\u7406\uff0c\u5185\u5bb9\u8bc6\u522b\uff0c\u5bb9\u5668\u4e91\u670d\u52a1\u3002</li> <li>\u4f7f\u7528\u65f6\uff0c\u6839\u636e\u81ea\u5df1\u7684\u9700\u6c42\u3001\u914d\u7f6e\uff0c\u4fee\u6539\u5bf9\u5e94\u53c2\u6570: <code>key</code>\uff0c<code>secret</code>\uff0c<code>uri</code>\uff0c<code>method</code>\uff0c<code>policy</code>\uff0c<code>md5</code>\u3002</li> <li>\u672c\u793a\u4f8b\u4f7f\u7528\u7684 <code>key</code>\uff0c<code>secret</code> \u5728\u4e0d\u540c\u670d\u52a1\u4e2d\u7684\u542b\u4e49\u4e0d\u4e00\u6837\uff0c\u4e91\u5b58\u50a8\u3001\u4e91\u5904\u7406\u3001\u5185\u5bb9\u8bc6\u522b(\u6709\u5b58\u50a8) \u4e2d\u8868\u793a <code>Operator</code> \u548c <code>Password</code>\uff0c \u5185\u5bb9\u8bc6\u522b(\u65e0\u5b58\u50a8)\u3001\u5bb9\u5668\u4e91\u8868\u793a\u5404\u81ea\u670d\u52a1\u63d0\u4f9b\u7684 <code>ClientKey</code> \u548c <code>ClientSecret</code>\u3002</li> <li>\u6839\u636e\u5bf9\u5e94 API \u6587\u6863\u8bf4\u660e\uff0c\u628a\u8ba4\u8bc1\u4fe1\u606f\uff0c\u586b\u5165\u76f8\u5e94\u7684 <code>http</code> \u8bf7\u6c42\u4fe1\u606f\u4e2d\u3002</li> <li>\u4f7f\u7528 <code>form API</code> \u4e0a\u4f20\u65f6\uff0c\u9700\u8981\u7528\u6237\u751f\u6210 <code>policy</code>\uff0c\u672c\u793a\u4f8b\u4e0d\u63d0\u4f9b\u751f\u6210 <code>policy</code> \u7684\u4f7f\u7528\u5b9e\u4f8b\u3002</li> </ol>"},{"location":"ai/authorization/#_5","title":"\u5e38\u7528\u8bed\u8a00\u4ee3\u7801\u793a\u4f8b","text":""},{"location":"ai/authorization/#go","title":"go \u4ee3\u7801\u6f14\u793a","text":"<pre><code>package main\n\nimport (\n    \"crypto/hmac\"\n    \"crypto/md5\"\n    \"crypto/sha1\"\n    \"encoding/base64\"\n    \"fmt\"\n    \"strings\"\n    \"time\"\n)\n\nvar (\n    key    = \"upyun\"\n    secret = \"secret\" // \u5bf9\u4e8e\u4e0a\u4f20\uff0c\u5904\u7406\uff0c\u8ddf\u5185\u5bb9\u8bc6\u522b\u9700\u8981MD5\u52a0\u5bc6\n    uri    = \"/v1/apps/\"\n    method = \"GET\"\n)\n\nfunc md5Str(s string) string {\n    return fmt.Sprintf(\"%x\", md5.Sum([]byte(s)))\n}\n\nfunc makeRFC1123Date(d time.Time) string {\n    utc := d.UTC().Format(time.RFC1123)\n    return strings.Replace(utc, \"UTC\", \"GMT\", -1)\n}\nfunc base64ToStr(b []byte) string {\n    return base64.StdEncoding.EncodeToString(b)\n}\n\nfunc sign(key, secret, method, uri, date, policy, md5 string) string {\n    mac := hmac.New(sha1.New, []byte(secret))\n    elems := []string{}\n    for _, v := range []string{method, uri, date, policy, md5} {\n        if v != \"\" {\n            elems = append(elems, v)\n        }\n    }\n    value := strings.Join(elems, \"&amp;\")\n    fmt.Println(value)\n    mac.Write([]byte(value))\n    signStr := base64ToStr(mac.Sum(nil))\n    return \"UPYUN \" + key + \":\" + signStr\n}\n\nfunc main() {\n    date := makeRFC1123Date(time.Now())\n    fmt.Println(date)\n    fmt.Println(md5Str(secret))\n\n    // \u4e0a\u4f20\uff0c\u5904\u7406\uff0c\u5185\u5bb9\u8bc6\u522b\u6709\u5b58\u50a8\n    fmt.Println(sign(key, md5Str(secret), method, uri, date, \"\", \"\"))\n\n    // \u5bb9\u5668\u4e91\uff0c\u5185\u5bb9\u8bc6\u522b\u65e0\u5b58\u50a8\n    fmt.Println(sign(key, secret, method, uri, date, \"\", \"\"))\n}\n\n</code></pre>"},{"location":"ai/authorization/#python","title":"python \u4ee3\u7801\u6f14\u793a","text":"<pre><code># -*- coding: UTF-8 -*-\nimport base64\nimport datetime\nimport hashlib\nimport hmac\n\n# Tip 1\n# \u4f7f\u7528\u65f6\u9700\u8981\u6839\u636e\u81ea\u5df1\u914d\u7f6e\u4e0e\u9700\u6c42\u63d0\u4f9b\u53c2\u6570 key secret uri method\nkey = 'upyun'\nsecret = 'secret'\nuri = '/v1/apps/'\nmethod = 'GET'\n\n\ndef httpdate_rfc1123(dt=None):\n    dt = dt or datetime.datetime.utcnow()\n    return dt.strftime('%a, %d %b %Y %H:%M:%S GMT')\n\ndef md5(value):\n    return hashlib.md5(value.encode()).hexdigest()\n\ndef sign(client_key, client_secret, method, uri, date, policy=None, md5=None):\n    # Tip 4\n    # MD5 \u4fe1\u606f\u53ef\u9009\n    signarr = []\n    for v in [method, uri, date, policy, md5]:\n        if v != None:\n            signarr.append(v)\n    signstr = '&amp;'.join(signarr)\n    signstr = base64.b64encode(\n        hmac.new(client_secret.encode(), signstr.encode(),\n                 digestmod=hashlib.sha1).digest()\n    ).decode()\n    return 'UPYUN %s:%s' % (client_key, signstr)\n\n\ndef main():\n    # Tip 2\n    # \u65f6\u95f4\u9700\u8981\u4e0e http \u5934 Date \u4fe1\u606f\u4fdd\u6301\u4e00\u81f4\n    # date = httpdate_rfc1123()\n    date = 'Thu, 14 Dec 2017 06:03:27 GMT'\n\n    # Tip 3\n    # sign \u51fd\u6570\u8fd4\u56de\u7684\u503c\u586b\u5165 http \u5934 Authorization \u4fe1\u606f\u4e2d\n    print date\n\n    print md5(secret)\n\n    # \u4e0a\u4f20\uff0c\u5904\u7406\uff0c\u5185\u5bb9\u8bc6\u522b\u6709\u5b58\u50a8\n    print sign(key, md5(secret), method, uri, date)\n\n    # \u5185\u5bb9\u8bc6\u522b\u65e0\u5b58\u50a8\uff0c\u5bb9\u5668\u4e91\n    print sign(key, secret, method, uri, date)\n\nif __name__ == '__main__':\n    main()\n</code></pre>"},{"location":"ai/authorization/#js","title":"js \u4ee3\u7801\u6f14\u793a","text":"<pre><code>var crypto = require('crypto');\n\nfunction sign(key, secret, method, uri, date, policy=null, md5=null) {\n    elems = [];\n    [method, uri, date, policy, md5].forEach(item =&gt; {\n        if (item != null) {\n            elems.push(item)\n        }\n    })\n    value = elems.join('&amp;');\n    auth = hmacsha1(secret, value);\n    return `UPYUN ${key}:${auth}`;\n}\n\nfunction MD5(value) {\n    return crypto.createHash('md5').update(value).digest('hex');\n}\n\nfunction hmacsha1(secret, value) {\n    return crypto.createHmac('sha1', secret).update(value, 'utf-8').digest().toString('base64');\n}\n\ndate = new Date().toGMTString();\nconsole.log(date);\n\nkey = 'upyun';\nsecret = 'secret';\nmethod = 'GET';\nuri = '/v1/apps/';\n\nconsole.log(MD5('secret'));\n\n// \u4e0a\u4f20\uff0c\u5904\u7406\uff0c\u5185\u5bb9\u8bc6\u522b\u6709\u5b58\u50a8\nconsole.log(sign(key, MD5(secret), method, uri, date));\n\n// \u5185\u5bb9\u8bc6\u522b\u65e0\u5b58\u50a8\uff0c\u5bb9\u5668\u4e91\nconsole.log(sign(key, secret, method, uri, date));\n</code></pre>"},{"location":"ai/authorization/#java","title":"java \u4ee3\u7801\u6f14\u793a","text":"<pre><code>import java.security.InvalidKeyException;\nimport java.security.NoSuchAlgorithmException;\nimport java.security.SignatureException;\n\nimport javax.crypto.Mac;\nimport javax.crypto.spec.SecretKeySpec;\n\nimport java.util.Base64;\nimport java.util.Calendar;\nimport java.text.SimpleDateFormat;\nimport java.util.Locale;\nimport java.util.TimeZone;\n\nimport java.security.*;\nimport java.io.*;\n\npublic class auth {\n    private static final String HMAC_SHA1_ALGORITHM = \"HmacSHA1\";\n\n    public static String md5(String string) {\n        byte[] hash;\n        try {\n            hash = MessageDigest.getInstance(\"MD5\").digest(string.getBytes(\"UTF-8\"));\n        } catch (UnsupportedEncodingException e) {\n            throw new RuntimeException(\"UTF-8 is unsupported\", e);\n        } catch (NoSuchAlgorithmException e) {\n            throw new RuntimeException(\"MessageDigest\u4e0d\u652f\u6301MD5Util\", e);\n        }\n        StringBuilder hex = new StringBuilder(hash.length * 2);\n        for (byte b : hash) {\n            if ((b &amp; 0xFF) &lt; 0x10) hex.append(\"0\");\n            hex.append(Integer.toHexString(b &amp; 0xFF));\n        }\n        return hex.toString();\n    }\n\n    public static byte[] hashHmac(String data, String key)\n            throws SignatureException, NoSuchAlgorithmException, InvalidKeyException {\n        SecretKeySpec signingKey = new SecretKeySpec(key.getBytes(), HMAC_SHA1_ALGORITHM);\n        Mac mac = Mac.getInstance(HMAC_SHA1_ALGORITHM);\n        mac.init(signingKey);\n        return mac.doFinal(data.getBytes());\n    }\n\n    public static String sign(String key, String secret, String method, String uri, String date, String policy,\n            String md5) throws Exception {\n        String value = method + \"&amp;\" + uri + \"&amp;\" + date;\n        if (policy != null &amp;&amp; policy.length() &gt; 0) {\n            value = value + \"&amp;\" + policy;\n        }\n\n        if (md5 != null &amp;&amp; md5.length() &gt; 0) {\n            value = value + \"&amp;\" + md5;\n        }\n        byte[] hmac = hashHmac(value, secret);\n        String sign = Base64.getEncoder().encodeToString(hmac);\n        return \"UPYUN \" + key + \":\" + sign;\n    }\n\n\n    public static String getRfc1123Time() {\n        Calendar calendar = Calendar.getInstance();\n        SimpleDateFormat dateFormat = new SimpleDateFormat(\n            \"EEE, dd MMM yyyy HH:mm:ss z\", Locale.US);\n        dateFormat.setTimeZone(TimeZone.getTimeZone(\"GMT\"));\n        return dateFormat.format(calendar.getTime());\n    }\n\n    public static void main(String[] args) throws Exception {\n        String key = \"upyun\";\n        String secret = \"secret\";\n        String method = \"GET\";\n        String uri = \"/v1/apps/\";\n\n        String date = getRfc1123Time();\n\n        System.out.println(date);\n\n        System.out.println(md5(secret));\n\n        // \u4e0a\u4f20\uff0c\u5904\u7406\uff0c\u5185\u5bb9\u8bc6\u522b\u6709\u5b58\u50a8\n        System.out.println(sign(key, md5(secret), method, uri, date, \"\", \"\"));\n\n        // \u5185\u5bb9\u8bc6\u522b\u65e0\u5b58\u50a8\uff0c\u5bb9\u5668\u4e91\n        System.out.println(sign(key, secret, method, uri, date, \"\", \"\"));\n    }\n}\n</code></pre>"},{"location":"ai/authorization/#php","title":"php \u4ee3\u7801\u6f14\u793a","text":"<pre><code>&lt;?php\n\nfunction sign($key, $secret, $method, $uri, $date, $policy=null, $md5=null)\n{\n    $elems = array();\n    foreach (array($method, $uri, $date, $policy, $md5) as $v)\n    {\n        if ($v)\n        {\n            $elems[] = $v;\n        }\n    }\n    $value = implode('&amp;', $elems);\n    $sign = base64_encode(hash_hmac('sha1', $value, $secret, true));\n    return 'UPYUN ' . $key . ':' . $sign;\n}\n\nfunction main()\n{\n    $key = 'upyun';\n    $secret = 'secret';\n    $uri = '/v1/apps/';\n    $method = 'GET';\n    $date = gmdate('D, d M Y H:i:s \\G\\M\\T');\n\n    $md = md5($secret);\n\n    echo $md . \"\\n\";\n\n    echo $date . \"\\n\";\n\n    // \u4e0a\u4f20\uff0c\u5904\u7406\uff0c\u5185\u5bb9\u8bc6\u522b\u6709\u5b58\u50a8\n    echo sign($key, md5($secret), $method, $uri, $date) . \"\\n\";\n\n    // \u5185\u5bb9\u8bc6\u522b\u65e0\u5b58\u50a8\uff0c\u5bb9\u5668\u4e91\n    echo sign($key, $secret, $method, $uri, $date);\n}\n\nmain();\n</code></pre> <p>\u5982\u6709\u7591\u95ee\u8bf7 \u8054\u7cfb\u6211\u4eec</p>"},{"location":"ai/face_detect/","title":"\u4eba\u8138\u8bc6\u522b","text":""},{"location":"ai/face_detect/#_1","title":"\u5feb\u901f\u5165\u95e8","text":"<p>\u53c8\u62cd\u4e91\u5904\u7406\uff08\u4eba\u8138\u8bc6\u522b\uff09\u57fa\u4e8e CDN \u6216\u4e91\u5b58\u50a8\u670d\u52a1\uff0c\u60a8\u5728\u4f7f\u7528\u5b83\u4e4b\u524d\uff0c\u8bf7\u786e\u4fdd\u60a8\u5df2\u7ecf\u6ce8\u518c\u53c8\u62cd\u4e91\u8d26\u53f7\u5e76\u5b8c\u6210\u5b9e\u540d\u9a8c\u8bc1\uff0c\u8bf7\u786e\u4fdd\u60a8\u5df2\u7ecf\u521b\u5efa CDN \u670d\u52a1\u6216\u4e91\u5b58\u50a8\u670d\u52a1\u3002</p> <p>\u6536\u8d39\u65b9\u9762\uff0c\u73b0\u5728\u514d\u8d39\u516c\u6d4b\u4e2d\uff0c\u540e\u7eed\u4f1a\u8fdb\u884c\u6536\u8d39\u3002</p>"},{"location":"ai/face_detect/#_2","title":"\u5f00\u53d1\u8005\u6307\u5357","text":""},{"location":"ai/face_detect/#_3","title":"\u8bf7\u6c42\u65b9\u6cd5","text":"<p>\u901a\u8fc7 URL \u8bbf\u95ee\u56fe\u7247\u65f6\uff0c\u5bf9\u56fe\u7247\u8fdb\u884c\u8bc6\u522b\u3002\u4efb\u52a1\u4ee5\u540c\u6b65\u7684\u65b9\u5f0f\u5904\u7406\uff0c\u5904\u7406\u5b8c\u6210\u540e\uff0c\u54cd\u5e94\u4fe1\u606f\u4e2d\u8fd4\u56de\u4eba\u8138\u8bc6\u522b\u7684\u4fe1\u606f\u3002</p> <p>** \u683c\u5f0f **</p> <pre><code>\u56fe\u7247 URL + \u95f4\u9694\u6807\u8bc6\u7b26 + \u53c2\u6570\n</code></pre> <p>\u95f4\u9694\u6807\u8bc6\u7b26\u8bf4\u660e\uff0c\u89c1\u95f4\u9694\u6807\u8bc6\u7b26\uff1b\u53c2\u6570\u8bf4\u660e\uff0c\u89c1\u529f\u80fd\u3002</p> <p>** \u4e3e\u4f8b **</p> <p>\u56fe\u7247 URL \u662f <code>https://p.upyun.com/docs/cloud/face.jpg</code> </p> <p>\u4eba\u8138\u68c0\u6d4b\u7684 URL \u662f <code>https://p.upyun.com/docs/cloud/face.jpg!/face/detection</code></p>"},{"location":"ai/face_detect/#_4","title":"\u54cd\u5e94\u4fe1\u606f","text":"<ul> <li>\u8bc6\u522b\u6210\u529f\uff1a\u8fd4\u56de <code>200</code>\uff0c\u54cd\u5e94\u4fe1\u606f\u662f\u4eba\u8138\u8bc6\u522b\u7ed3\u679c\u3002\u54cd\u5e94\u4fe1\u606f\u4e3a JSON \u683c\u5f0f\uff0c\u5b57\u6bb5\u540d\u53ca\u542b\u4e49\u5982\u4e0b\uff1a</li> </ul> \u53c2\u6570 \u7c7b\u578b \u8bf4\u660e face list \u4eba\u8138\u4f4d\u7f6e\u5750\u6807\u4fe1\u606f\uff0c\u5982\u679c\u6ca1\u6709\u4eba\u8138\uff0c\u8fd4\u56de\u7a7a\u4fe1\u606f size list \u56fe\u7247\u7684\u5bbd\u3001\u9ad8 <p>** \u4e3e\u4f8b **</p> <pre><code>{\n    \"size\": [\n        598,\n        960\n    ],\n    \"face\": [\n        {\n            \"x\": 179,\n            \"y\": 290,\n            \"width\": 288,\n            \"height\": 288\n        }\n    ]\n}\n</code></pre> <ul> <li>\u8bc6\u522b\u5931\u8d25\uff1a\u8fd4\u56de\u76f8\u5e94\u7684\u51fa\u9519\u4fe1\u606f\uff0c\u5177\u4f53\u8bf7\u53c2\u9605\u300c\u72b6\u6001\u7801\u8868\u300d\u3002</li> </ul> <p></p>"},{"location":"ai/face_detect/#_5","title":"\u72b6\u6001\u7801\u8868","text":"\u72b6\u6001\u7801 \u8bf4\u660e 200 \u5904\u7406\u6210\u529f 404 \u6587\u4ef6\u4e0d\u5b58\u5728 413 \u6587\u4ef6\u5927\u5c0f\u8d85\u51fa\u9650\u5236 415 \u4e0d\u652f\u6301\u7684\u6587\u4ef6\u7c7b\u578b 5xx \u670d\u52a1\u7aef\u9519\u8bef\u3002\u5982\u9047\u6b64\u7c7b\u9519\u8bef\uff0c\u8bf7\u53cd\u9988\u7ed9\u552e\u540e\u6216\u60a8\u7684\u5546\u52a1\u7ecf\u7406"},{"location":"ai/face_detect/#_6","title":"\u529f\u80fd","text":""},{"location":"ai/face_detect/#_7","title":"\u4eba\u8138\u68c0\u6d4b","text":"\u53c2\u6570 \u503c \u8bf4\u660e <code>/face/&lt;\u56fa\u5b9a\u503c&gt;</code> detection \u5206\u6790\u56fe\u7247\u4e0a\u662f\u5426\u6709\u4eba\u8138\uff0c\u5e76\u8fd4\u56de\u76f8\u5e94\u4fe1\u606f <p>** \u6ce8 **</p> <ul> <li>\u56fe\u7247\u5927\u5c0f\u4e0d\u80fd\u8d85\u8fc7 8M\uff0c\u5426\u5219\u4e0d\u5904\u7406\u3002</li> </ul> <p>\u5982\u6709\u7591\u95ee\u8bf7 \u8054\u7cfb\u6211\u4eec</p>"},{"location":"api/","title":"\u4ea7\u54c1\u7b80\u4ecb","text":""},{"location":"api/#_1","title":"\u53c8\u62cd\u4e91\u5b58\u50a8\u4ecb\u7ecd","text":"<p>\u53c8\u62cd\u4e91\u5b58\u50a8\u662f\u9762\u5411\u4e92\u8054\u7f51\u5e94\u7528\u7684\u5bf9\u8c61\u5b58\u50a8\u670d\u52a1\uff0c\u5177\u6709\u4f7f\u7528\u7b80\u5355\u3001\u9ad8\u53ef\u9760\u3001\u9ad8\u5b89\u5168\u7b49\u7279\u6027\uff0c\u6ee1\u8db3\u6d77\u91cf\u6570\u636e\u4e0a\u4f20\u3001\u9ad8 IO\uff08\u9ad8\u8bbf\u95ee\uff09\u3001\u9ad8\u53ef\u7528\u9700\u6c42\uff0c\u6ee1\u8db3\u5927\u6570\u636e\u4f01\u4e1a\u5e94\u7528\u80cc\u666f\u4e0b\u7684\u6570\u636e\u4f20\u8f93\u3001\u5904\u7406\u3001\u5b58\u50a8\u3001\u5206\u53d1\u4e0e\u5bb9\u707e\u9700\u6c42\u3002</p> <p></p>"},{"location":"api/#_2","title":"\u57fa\u672c\u6982\u5ff5","text":"<p>\u670d\u52a1</p> <p>\u4e00\u4e2a\u670d\u52a1\u76f8\u5f53\u4e8e\u4e00\u4e2a\u5b58\u50a8\u7a7a\u95f4\u6216\u5b58\u50a8\u5bb9\u5668\uff0c\u53ef\u4ee5\u5411\u91cc\u9762\u5b58\u653e\u975e\u7ed3\u6784\u5316\u6570\u636e\uff0c\u5982\u7f51\u9875\u3001\u56fe\u7247\u3001\u97f3\u9891\u3001\u89c6\u9891\u7b49\u3002</p> <p>\u64cd\u4f5c\u5458</p> <p>\u64cd\u4f5c\u5458\u662f\u60a8\u8bbf\u95ee\u4e91\u5b58\u50a8\u3001\u4e91\u5904\u7406\u7684\u51ed\u8bc1\uff0c\u5b83\u7531\u64cd\u4f5c\u5458\u540d\u79f0\u548c\u5bc6\u7801\u7ec4\u6210\uff0c\u64cd\u4f5c\u5458\u540d\u79f0\u7c7b\u4f3c\u8eab\u4efd\u6807\u8bc6\uff0c\u5bc6\u7801\u7684\u4f5c\u7528\u662f\u7b7e\u540d\u60a8\u7684\u8bbf\u95ee\u8bf7\u6c42\uff0c\u4ee5\u9632\u88ab\u7be1\u6539\u3002</p> <p>\u7279\u522b\u5730\uff0c\u64cd\u4f5c\u5458\u4e0e\u670d\u52a1\u540d\u662f N:N \u7684\u5173\u7cfb\uff0c\u4e00\u4e2a\u670d\u52a1\u540d\u53ef\u4ee5\u6709\u591a\u4e2a\u64cd\u4f5c\u5458\uff0c\u4e00\u4e2a\u64cd\u4f5c\u5458\u53ef\u4ee5\u5f52\u5c5e\u4e8e\u591a\u4e2a\u670d\u52a1\u540d\u3002</p> <p>\u64cd\u4f5c\u5458\u6743\u9650</p> <p>\u64cd\u4f5c\u5458\u6743\u9650\u6709 3 \u79cd\uff0c\u5206\u522b\u662f\u53ef\u8bfb\u53d6\u3001\u53ef\u5199\u5165\u3001\u53ef\u5220\u9664\uff0c\u652f\u6301\u591a\u9009\u3002\u60a8\u53ef\u4ee5\u6839\u636e\u9700\u8981\uff0c\u4e3a\u64cd\u4f5c\u5458\u914d\u7f6e\u5408\u9002\u7684\u6743\u9650\uff1b\u4e5f\u53ef\u4ee5\u521b\u5efa\u591a\u4e2a\u64cd\u4f5c\u5458\uff0c\u4e3a\u4e0d\u540c\u64cd\u4f5c\u5458\u5206\u914d\u4e0d\u540c\u6743\u9650\uff0c\u4f9b\u4e0d\u540c\u7ea7\u522b\u7684\u4eba\u4f7f\u7528\u3002</p> <p>\u8bbf\u95ee\u670d\u52a1</p> <p>\u501f\u52a9\u670d\u52a1\u540d\u79f0\u3001\u64cd\u4f5c\u5458\uff0c\u53ef\u4ee5\u901a\u8fc7 FTP/FTPS\u3001UPX\u3001API/SDK \u8bbf\u95ee\u4e91\u5b58\u50a8\uff0c\u7ba1\u7406\u60a8\u5728\u4e91\u5b58\u50a8\u7684\u6587\u4ef6\u3002</p>"},{"location":"api/#_3","title":"\u57fa\u7840\u67b6\u6784","text":""},{"location":"api/#_4","title":"\u4ea7\u54c1\u529f\u80fd","text":"<p>\u4e0a\u4f20</p> <p>\u4e0a\u4f20\u652f\u6301\u666e\u901a\u4e0a\u4f20\u3001\u8868\u5355\u4e0a\u4f20\uff08\u7f51\u9875\u76f4\u4f20\uff09\u3001\u6d41\u5f0f\u4e0a\u4f20\uff08\u8ffd\u52a0\u4e0a\u4f20\uff09\u3001\u65ad\u70b9\u7eed\u4f20\uff08\u5927\u6587\u4ef6\u4e0a\u4f20\uff09\u3002</p> <p>\u4e0b\u8f7d</p> <p>\u4e0b\u8f7d\u652f\u6301\u666e\u901a\u4e0b\u8f7d\u3001\u6d41\u5f0f\u4e0b\u8f7d\u3002</p> <p>\u76ee\u5f55</p> <p>\u652f\u6301\u5217\u76ee\u5f55\uff0c\u652f\u6301\u5927\u91cf\u6587\u4ef6\u76ee\u5f55\u5206\u9875\u83b7\u53d6\u6587\u4ef6\u4fe1\u606f\u3002</p> <p>\u5220\u9664</p> <p>\u652f\u6301\u6587\u4ef6\u3001\u76ee\u5f55\u5220\u9664\uff0c\u652f\u6301\u6279\u91cf\u6587\u4ef6\u5f02\u6b65\u5220\u9664\u3002</p>"},{"location":"api/#_5","title":"\u5e94\u7528\u573a\u666f","text":"<p>\u56fe\u7247\u3001\u70b9\u64ad\u97f3\u89c6\u9891\u3001\u6e38\u620f\u5ba2\u6237\u7aef\u7b49\u6d77\u91cf\u6587\u4ef6\u5b58\u50a8</p> <p>\u56fe\u7247\u3001\u70b9\u64ad\u97f3\u89c6\u9891\u3001\u6e38\u620f\u5ba2\u6237\u7aef\u7b49\u6587\u4ef6\u901a\u8fc7 CDN \u5c31\u8fd1\u4e0a\u4f20\u3001\u4e0a\u4f20\u52a0\u901f\u4f20\u8f93\u5230\u4e91\u5b58\u50a8\uff0c\u8bbf\u95ee\u7684\u65f6\u5019\uff0c\u901a\u8fc7 CDN \u4f7f\u7528\u5927\u6587\u4ef6\u5206\u6bb5\u7f13\u5b58\u3001\u89c6\u9891\u62d6\u62c9\u3001\u94fe\u8def\u4f18\u5316\u7b49\u529f\u80fd\u8fdb\u884c\u5168\u7f51\u5206\u53d1\uff0c\u63d0\u9ad8\u6d77\u91cf\u6587\u4ef6\u4e0a\u4f20\u3001\u5206\u53d1\u901f\u5ea6\u3001\u8d28\u91cf\u3002\u8fd8\u53ef\u4ee5\u4f7f\u7528\u56fe\u7247\u5904\u7406\u3001\u70b9\u64ad\u5904\u7406\u3001\u6587\u4ef6\u538b\u7f29\u89e3\u538b\u7f29\u5bf9\u6587\u4ef6\u8fdb\u884c\u5904\u7406\u3002</p> <p></p> <p>\u7f51\u7ad9\u3001\u79fb\u52a8 APP \u7b49\u52a8\u9759\u6001\u8d44\u6e90\u5206\u79bb</p> <p>\u52a8\u6001\u8d44\u6e90\u5206\u79bb\u540e\uff0c\u80fd\u4e3a\u9759\u6001\u8d44\u6e90\u63d0\u4f9b\u66f4\u5feb\u3001\u66f4\u7a33\u5b9a\u7684\u4f20\u8f93\uff0c\u4e0d\u9700\u8003\u8651\u9759\u6001\u8d44\u6e90\u5feb\u901f\u589e\u957f\u5e26\u6765\u7684\u5b58\u50a8\u538b\u529b\uff0c\u964d\u4f4e\u7528\u6237\u8ba1\u7b97\u670d\u52a1\u7684\u590d\u6742\u5ea6\u3002</p> <p></p> <p>\u76f4\u64ad\u6587\u4ef6\u5b58\u50a8</p> <p>\u6444\u50cf\u5934\u63a8\u7684\u76f4\u64ad\u6d41\uff0c\u901a\u8fc7 CDN \u6d41\u5f0f\u4e0a\u4f20\u3001\u76f4\u64ad\u8f6c\u5f55\u70b9\u64ad\u6587\u4ef6\u65b9\u5f0f\u628a\u6d41\u4e0a\u4f20\u5230\u4e91\u5b58\u50a8\uff0c\u5f53\u7528\u6237\u8fdb\u884c\u89c6\u9891\u5206\u4eab\u3001\u89c6\u9891\u56de\u653e\u65f6\uff0c\u901a\u8fc7 CDN \u7684\u6d41\u5f0f\u4e0b\u8f7d\u3001\u5927\u6587\u4ef6\u5206\u6bb5\u7f13\u5b58\u3001\u89c6\u9891\u62d6\u62c9\u7b49\u7279\u6027\uff0c\u628a\u89c6\u9891\u8fc5\u901f\u5c55\u73b0\u7ed9\u7528\u6237\u3002</p> <p></p>"},{"location":"api/#_6","title":"\u4ea7\u54c1\u4f18\u52bf","text":"<p>\u6d77\u91cf\u5b58\u50a8</p> <p>\u53c8\u62cd\u4e91\u5b58\u50a8\u5355\u5b58\u50a8\u96c6\u7fa4\u652f\u6301 PB \u7ea7\u5bb9\u91cf\uff0c\u5355\u6570\u636e\u4e2d\u5fc3\u652f\u6301 EB \u7ea7\u5bb9\u91cf\uff0c\u5168\u7f51\u8f7b\u677e\u5e94\u5bf9 ZB \u7ea7\u7684\u5f02\u6784\u5316\u6570\u636e\u3002</p> <p>\u5b89\u5168\u3001\u8010\u4e45</p> <p>\u5c06\u4e00\u4efd\u6570\u636e\u5199\u4e09\u4efd\uff0c\u652f\u6301\u8de8\u6570\u636e\u4e2d\u5fc3\u5b58\u50a8\uff0c\u591a\u5c42\u7ea7 ACL \u53ca DDOS \u9632\u62a4\uff0c\u786e\u4fdd\u4e1a\u52a1\u7684\u7a33\u5b9a\uff0c\u6301\u4e45\u53ef\u4fe1\u3002</p> <p>\u8d85\u4f4e\u6210\u672c</p> <p>\u652f\u6301\u6309\u4f7f\u7528\u91cf\u4ed8\u8d39\uff0c\u5e76\u63d0\u4f9b\u642d\u914d CDN \u4f7f\u7528\u6d41\u91cf 1:1 \u7684\u514d\u8d39\u5b58\u50a8\u5bb9\u91cf\uff0c\u4f7f\u7528\u6237\u5b58\u50a8\u6210\u672c\u66f4\u4f4e\u3002</p> <p>\u65b9\u4fbf\u63a5\u5165\uff0c\u4e00\u952e\u8fc1\u79fb</p> <p>\u7279\u8272\u7684\u955c\u50cf\u8fc1\u79fb\u529f\u80fd\uff0c\u53ef\u4e00\u952e\u901a\u8fc7 CDN \u5c06\u6e90\u7ad9\u8d44\u6e90\u8fc1\u79fb\u5230\u53c8\u62cd\u4e91\u5b58\u50a8\uff0c\u53e6\u5916\u652f\u6301\u6587\u4ef6\u62c9\u53d6\u3001\u6587\u4ef6\u538b\u7f29\u89e3\u538b\u7f29\u3001 FTP \u529f\u80fd\uff0c\u8ba9\u4e91\u5b58\u50a8\u63a5\u5165\u548c\u4f7f\u7528\u66f4\u7b80\u5355\u3002</p> <p>\u7075\u6d3b\u4e0a\u4f20</p> <p>\u63d0\u4f9b RESTful API \u548c\u591a\u79cd\u8bed\u8a00\u7684 SDK \u5305\uff0c\u652f\u6301\u8868\u5355/\u5206\u5757/\u6d41\u5f0f/FTP \u4e0a\u4f20\uff0c\u65ad\u70b9\u7eed\u4f20\uff0c\u4ee5\u4fbf\u7528\u6237\u8f7b\u677e\u96c6\u6210\u3002</p> <p>\u7b80\u5355\u6613\u7528</p> <p>\u53c8\u62cd\u4e91\u5c06\u4ea7\u54c1\u529f\u80fd\u6574\u5408\uff0c\u63d0\u4f9b\u96c6 CDN\u3001\u4e91\u5b58\u50a8\u3001\u4e91\u5904\u7406\u4e8e\u4e00\u4f53\u7684\u573a\u666f\u5316\u89e3\u51b3\u65b9\u6848\uff0c\u5316\u7e41\u4e3a\u7b80\uff0c\u63a5\u5165\u65b9\u4fbf\u3002</p>"},{"location":"api/#_7","title":"\u6587\u6848\u7ea6\u5b9a","text":"<p>\u5728\u60a8\u9605\u8bfb\u6587\u6863\u4e4b\u524d\uff0c\u8bf7\u5148\u719f\u6089\u6211\u4eec\u7684\u4e00\u4e9b\u7ea6\u5b9a\uff0c\u4ee5\u4fbf\u60a8\u7684\u7406\u89e3\u3002</p> <p>\u66ff\u4ee3\u5b57\u7b26 \u6240\u6709\u7528\u5c16\u62ec\u53f7 <code>&lt;&gt;</code> \u5305\u56f4\u7684\u5b57\u7b26\uff0c\u5747\u4e3a\u9700\u8981\u6839\u636e\u5b9e\u9645\u60c5\u51b5\u505a\u66ff\u6362\u7684\u5730\u65b9\uff0c\u7279\u522b\u7684\uff0c<code>&lt;&gt;</code> \u4ec5\u4f5c\u4e3a\u6587\u6863\u4e2d\u5c06\u5176\u533a\u5206\u4e8e\u5176\u4ed6\u5b57\u7b26\uff0c\u60a8\u5728\u5b9e\u9645\u4f7f\u7528\u7684\u65f6\u5019\uff0c\u4e0d\u9700\u8981\u52a0\u4e0a <code>&lt;&gt;</code>\u3002</p> <p>\u5982\u6709\u7591\u95ee\u8bf7 \u8054\u7cfb\u6211\u4eec</p>"},{"location":"api/authorization/","title":"\u8ba4\u8bc1\u9274\u6743","text":""},{"location":"api/authorization/#_1","title":"\u57fa\u672c\u8ba4\u8bc1","text":"<pre><code>curl -u &lt;operator&gt;:&lt;password&gt; http://v0.api.upyun.com/&lt;bucket&gt;/\n</code></pre> <p>\u6216\u8005\uff0c\u5c06\u64cd\u4f5c\u5458\u540d\u548c\u64cd\u4f5c\u5458\u7684\u5bc6\u7801\u6309 <code>operator:password</code> \u62fc\u63a5 Base64 \u7f16\u7801\u540e\u52a0\u5728\u8bf7\u6c42\u5934\u7684 <code>Authorization</code> \u5b57\u6bb5\u4e2d\uff1a</p> <pre><code>curl -X GET \\\n    http://v0.api.upyun.com/&lt;bucket&gt;/ \\\n    -H \"Authorization: Basic b3BlcmF0b3I6cGFzc3dvcmQ=\"\n</code></pre> <p>\u7279\u522b\u5730\uff0cHTTP \u57fa\u672c\u8ba4\u8bc1\u91c7\u7528 Base64 \u7f16\u7801\u548c\u4f20\u8f93\u64cd\u4f5c\u5458\u4fe1\u606f\uff0c\u5b58\u5728\u64cd\u4f5c\u5458\u4fe1\u606f\u6cc4\u9732\u7684\u98ce\u9669\u3002</p>"},{"location":"api/authorization/#_2","title":"\u7b7e\u540d\u8ba4\u8bc1","text":"<p>\u4e3a\u4e86\u907f\u514d\u57fa\u672c\u8ba4\u8bc1\u4e2d Base64 \u7f16\u7801\u53ef\u9006\u5e26\u6765\u7684\u5b89\u5168\u9690\u60a3\uff0c\u53c8\u62cd\u4e91\u63d0\u4f9b\u4e86\u7b7e\u540d\u8ba4\u8bc1\u8fd9\u79cd\u66f4\u5b89\u5168\u7684\u8ba4\u8bc1\u65b9\u5f0f\u3002\u5b83\u7ed3\u5408\u8bf7\u6c42\u5173\u952e\u4fe1\u606f\u548c\u7528\u6237\u8eab\u4efd\u4fe1\u606f\uff0c\u8ba1\u7b97\u4e00\u4e2a\u6d88\u606f\u6458\u8981\uff0c\u4f5c\u4e3a\u8bf7\u6c42\u7684 Authorization\uff0c\u4fdd\u8bc1\u8bf7\u6c42\u7684\u5b89\u5168\u3002</p>"},{"location":"api/authorization/#http-header","title":"\u653e\u5728 HTTP Header \u4e2d","text":"<p>\u8ba4\u8bc1\u4fe1\u606f Authorization \u653e\u5728 Header \u4e2d\uff0c\u5728\u4e91\u5b58\u50a8\u7684 API \u4e2d\uff0cREST API \u4ee5\u53ca FORM API \u7684\u56de\u8c03\u901a\u77e5\u4f7f\u7528\u8fd9\u79cd\u65b9\u5f0f\u3002</p> <p>** \u7b7e\u540d\u8ba1\u7b97\u65b9\u6cd5 **</p> <pre><code>Authorization: UPYUN &lt;Operator&gt;:&lt;Signature&gt;\n\n&lt;Signature&gt; = Base64 (HMAC-SHA1 (&lt;Password&gt;,\n&lt;Method&gt;&amp;\n&lt;URI&gt;&amp;\n&lt;Date&gt;&amp;\n&lt;Content-MD5&gt;\n))\n</code></pre> <p>\u76f8\u5173\u53c2\u6570\u8bf4\u660e\uff1a</p> \u53c2\u6570 \u5fc5\u9009 \u8bf4\u660e Operator \u662f \u670d\u52a1\u7684\u64cd\u4f5c\u5458\u540d\u79f0 Method \u662f \u8bf7\u6c42\u65b9\u5f0f\uff0c\u5982\uff1aGET\u3001POST\u3001PUT\u3001HEAD \u7b49 URI \u662f \u8bf7\u6c42\u8def\u5f84 Date \u662f \u8bf7\u6c42\u65e5\u671f\u65f6\u95f4\uff0cGMT \u683c\u5f0f\u5b57\u7b26\u4e32 (RFC 1123)\uff0c\u5982 <code>Wed, 29 Oct 2014 02:26:58 GMT</code> Content-MD5 \u5426 \u8bf7\u6c42\u4f53\u7684 MD5 \u503c\uff0c\u5982\u679c\u6587\u4ef6\u592a\u5927\u8ba1\u7b97 MD5 \u4e0d\u65b9\u4fbf\u6216\u8bf7\u6c42\u4f53\u4e3a\u7a7a\uff0c\u53ef\u4ee5\u4e3a\u7a7a Password \u662f \u670d\u52a1\u7684\u64cd\u4f5c\u5458\u5bc6\u7801\u7684 MD5 \u503c <p>** \u6ce8 **</p> <ul> <li>\u975e\u5fc5\u9009\u53c2\u6570\u4e3a\u7a7a\u65f6\uff0c\u8fde\u540c\u540e\u9762\u7684 <code>&amp;</code> \u4e00\u8d77\u4e0d\u53c2\u4e0e\u7b7e\u540d\u8ba1\u7b97\u3002\u6240\u6709\u8ba1\u7b97\u7684 MD5 \u503c\uff0c\u683c\u5f0f\u5747\u662f 32 \u4f4d\u5c0f\u5199\u3002</li> <li>HMAC-SHA1 \u8f93\u51fa\u7684\u5fc5\u987b\u662f\u539f\u751f\u7684\u4e8c\u8fdb\u5236\u6570\u636e\u3002</li> <li><code>Date</code> \u7528\u4e8e\u9a8c\u8bc1\u8be5\u7b7e\u540d\u662f\u5426\u6709\u6548\uff0cREST API \u7b7e\u540d\u6709\u6548\u65f6\u95f4\u4e3a\u8bf7\u6c42\u65f6\u95f4\u8d77\u7684 30 \u5206\u949f\u5185\uff1bFORM API \u56de\u8c03\u901a\u77e5\u7b7e\u540d\u6709\u6548\u671f\u7531\u7528\u6237\u81ea\u884c\u786e\u5b9a\uff0c\u5efa\u8bae\u8bbe\u7f6e\u4e3a 30 \u5206\u949f\u3002</li> </ul> <p>** \u4e3e\u4f8b **</p> <p>REST API \u4e0a\u4f20\u6587\u4ef6\u8bf7\u6c42\u7b7e\u540d</p> <pre><code>// \u64cd\u4f5c\u5458\u4fe1\u606f\nOperator = operator123          \nPassword = MD5(password123) = 482c811da5d5b4bc6d497ffa98491e38\n\n// \u53c2\u6570\u4fe1\u606f\nMethod = PUT                            \nURI = /upyun-temp/demo.jpg\nDate = Wed, 09 Nov 2016 14:26:58 GMT\n// \u4e0a\u4f20\u6587\u4ef6\u7684 MD5\nContent-MD5 = 7ac66c0f148de9519b8bd264312c4d64\n</code></pre> <p>\u751f\u6210 Signature\uff1a</p> <pre><code>Signature = Base64 (HMAC-SHA1 (&lt;Password&gt;,\n&lt;Method&gt;&amp;\n&lt;URI&gt;&amp;\n&lt;Date&gt;&amp;\n&lt;Content-MD5&gt;\n))\n= Base64 (HMAC-SHA1 (482c811da5d5b4bc6d497ffa98491e38,PUT&amp;/upyun-temp/demo.jpg&amp;Wed, 09 Nov 2016 14:26:58 GMT&amp;7ac66c0f148de9519b8bd264312c4d64))\n// HMAC-SHA1 \u8fd4\u56de\u7684\u539f\u751f\u4e8c\u8fdb\u5236\u6570\u636e\u8fdb\u884c Base64 \u7f16\u7801\n= YUaAZX+WNAcJdNGHS5SBlITME5A=\n</code></pre> <p>Authorization \u7b7e\u540d\uff1a</p> <pre><code>Authorization: UPYUN operator123:YUaAZX+WNAcJdNGHS5SBlITME5A=\n</code></pre> <p>\u8bf7\u6c42 Header\uff1a</p> <pre><code>PUT /upyun-temp/demo.jpg HTTP/1.1\nAuthorization: UPYUN operator123:YUaAZX+WNAcJdNGHS5SBlITME5A=\nContent-MD5: 7ac66c0f148de9519b8bd264312c4d64\nDate: Wed, 09 Nov 2016 14:26:58 GMT\nContent-Type: image/jpeg\nHost: v0.api.upyun.com\nContent-Length: 33456\n</code></pre> <p>FORM API \u56de\u8c03\u901a\u77e5\u7b7e\u540d</p> <pre><code>// \u64cd\u4f5c\u5458\u4fe1\u606f\nOperator = operator123          \nPassword = MD5(password123) = 482c811da5d5b4bc6d497ffa98491e38\n\n// \u53c2\u6570\u4fe1\u606f\nMethod = POST                           \nURI = /upyun_notify_url\nDate = Wed, 09 Nov 2016 14:26:58 GMT\nContent-MD5 = MD5(code=200&amp;message=ok&amp;url=%2F2011%2F12%2Ffd0e30047f81fa95.mp3&amp;time=1478701618)\n            = e861f9f2ccd323df87b975904ccf19bb\n</code></pre> <p>\u751f\u6210 Signature\uff1a</p> <pre><code>Signature = Base64 (HMAC-SHA1 (&lt;Password&gt;,\n&lt;Method&gt;&amp;\n&lt;URI&gt;&amp;\n&lt;Date&gt;&amp;\n&lt;Content-MD5&gt;\n))\n= Base64 (HMAC-SHA1 (482c811da5d5b4bc6d497ffa98491e38,POST&amp;/upyun_notify_url&amp;Wed, 09 Nov 2016 14:26:58 GMT&amp;e861f9f2ccd323df87b975904ccf19bb))\n// HMAC-SHA1 \u8fd4\u56de\u7684\u539f\u751f\u4e8c\u8fdb\u5236\u6570\u636e\u8fdb\u884c Base64 \u7f16\u7801\n= 8wTKBjONUWG+Zwzxo8EpJISy95E=\n</code></pre> <p>Authorization \u7b7e\u540d\uff1a</p> <pre><code>Authorization: UPYUN operator123:8wTKBjONUWG+Zwzxo8EpJISy95E=\n</code></pre> <p>\u5b8c\u6574\u7684\u8bf7\u6c42\uff1a</p> <pre><code>POST /upyun_notify_url HTTP/1.1\nAuthorization: UPYUN operator123:8wTKBjONUWG+Zwzxo8EpJISy95E=\nContent-MD5: e861f9f2ccd323df87b975904ccf19bb\nDate: Wed, 09 Nov 2016 14:26:58 GMT\nContent-Type: application/x-www-form-urlencoded;charset=utf-8\n\ncode=200&amp;message=ok&amp;url=%2F2011%2F12%2Ffd0e30047f81fa95.mp3&amp;time=1478701618\n</code></pre>"},{"location":"api/authorization/#http-body","title":"\u653e\u5728 HTTP Body \u4e2d","text":"<p>\u8ba4\u8bc1\u4fe1\u606f Authorization \u653e\u5728 Body \u4e2d\uff0c\u5728\u4e91\u5b58\u50a8\u7684 API \u4e2d\uff0cFORM API \u7684\u4e0a\u4f20\u6587\u4ef6\u4f7f\u7528\u8fd9\u79cd\u65b9\u5f0f\u3002</p> <p>** \u7b7e\u540d\u8ba1\u7b97\u65b9\u6cd5 **</p> <pre><code>authorization=UPYUN &lt;Operator&gt;:&lt;Signature&gt;\n\n&lt;Signature&gt; = Base64 (HMAC-SHA1 (&lt;Password&gt;,\n&lt;Method&gt;&amp;\n&lt;URI&gt;&amp;\n&lt;Date&gt;&amp;\n&lt;Policy&gt;&amp;\n&lt;Content-MD5&gt;\n))\n</code></pre> <p>\u76f8\u5173\u53c2\u6570\u8bf4\u660e\uff1a</p> \u53c2\u6570 \u5fc5\u9009 \u8bf4\u660e Operator \u662f \u670d\u52a1\u7684\u64cd\u4f5c\u5458\u540d\u79f0 Method \u662f \u8bf7\u6c42\u65b9\u5f0f\uff0c\u5982\uff1aGET\u3001POST\u3001PUT\u3001HEAD \u7b49 URI \u662f \u8bf7\u6c42\u8def\u5f84 Date \u5426 \u8bf7\u6c42\u65e5\u671f\u65f6\u95f4\uff0cGMT \u683c\u5f0f\u5b57\u7b26\u4e32 (RFC 1123)\uff0c\u5982 <code>Wed, 29 Oct 2014 02:26:58 GMT</code> Policy \u662f \u4e0a\u4f20\u53c2\u6570\u7684 Base64 \u7f16\u7801\uff0c\u8be6\u89c1 Policy \u7b97\u6cd5 Content-MD5 \u5426 \u4e0a\u4f20\u6587\u4ef6\u7684 MD5 \u503c Password \u662f \u670d\u52a1\u7684\u64cd\u4f5c\u5458\u5bc6\u7801\u7684 MD5 \u503c <p>** \u6ce8 **</p> <ul> <li>\u975e\u5fc5\u9009\u53c2\u6570\u4e3a\u7a7a\u65f6\uff0c\u8fde\u540c\u540e\u9762\u7684 <code>&amp;</code> \u4e00\u8d77\u4e0d\u53c2\u4e0e\u7b7e\u540d\u8ba1\u7b97\u3002\u6240\u6709\u8ba1\u7b97\u7684 MD5 \u503c\uff0c\u683c\u5f0f\u5747\u662f 32 \u4f4d\u5c0f\u5199\u3002</li> <li>HMAC-SHA1 \u8f93\u51fa\u7684\u5fc5\u987b\u662f\u539f\u751f\u7684\u4e8c\u8fdb\u5236\u6570\u636e\u3002</li> <li>\u81ea\u5b9a\u4e49\u7b7e\u540d\u6709\u6548\u671f\uff0c\u5efa\u8bae\u4e3a 30 \u5206\u949f\u3002\u5982\u679c\u7b7e\u540d\u8d85\u8fc7\u6709\u6548\u671f\uff0c\u9700\u8981\u91cd\u65b0\u751f\u6210\u7b7e\u540d\u3002</li> </ul> <p> ** Policy \u7b97\u6cd5 **</p> <p>\u751f\u6210\u6b65\u9aa4\uff1a</p> <ol> <li>\u5c06\u4e0a\u4f20\u53c2\u6570\u952e\u503c\u5bf9\u8f6c\u6362\u4e3a JSON \u5b57\u7b26\u4e32\uff1b</li> <li>\u5c06\u7b2c 1 \u6b65\u6240\u5f97\u5230\u7684\u5b57\u7b26\u4e32\u8fdb\u884c Base64 Encode \u5904\u7406\uff0c\u5f97\u5230 policy\u3002</li> </ol> <p>** \u6ce8 **</p> <ul> <li>\u53c2\u6570\u548c\u53c2\u6570\u503c\u5fc5\u987b\u662f UTF-8 \u7f16\u7801\uff0c\u4e14\u4e0d\u5305\u542b\u6362\u884c\u7b26\u3002</li> <li>\u53c2\u6570 <code>date</code> \u548c <code>content-md5</code> \u5c31\u662f\u7b7e\u540d\u4e2d\u7684 <code>Date</code> \u548c <code>Content-MD5</code>\u3002</li> </ul> <p>** \u4e3e\u4f8b **</p> <p>FORM API \u4e0a\u4f20\u6587\u4ef6\u8bf7\u6c42\u7b7e\u540d</p> <pre><code>// \u64cd\u4f5c\u5458\u4fe1\u606f\nOperator = operator123          \nPassword = MD5(password123) = 482c811da5d5b4bc6d497ffa98491e38\n\n// \u53c2\u6570\nMethod = POST                           \nURI = /upyun-temp\n\n// \u4e0a\u4f20\u53c2\u6570\uff0c\u9700\u8981\u8ba1\u7b97 Policy  \nbucket = upyun-temp\nsave-key = /demo.jpg\nexpiration = 1478674618\ndate = Wed, 09 Nov 2016 14:26:58 GMT\ncontent-md5 = 7ac66c0f148de9519b8bd264312c4d64\n</code></pre> <p>\u751f\u6210 Policy\uff1a</p> <pre><code>Policy = Base64 ({\"bucket\": \"upyun-temp\", \"save-key\": \"/demo.jpg\", \"expiration\": \"1478674618\", \"date\": \"Wed, 09 Nov 2016 14:26:58 GMT\", \"content-md5\": \"7ac66c0f148de9519b8bd264312c4d64\"})\n       = eyJidWNrZXQiOiAidXB5dW4tdGVtcCIsICJzYXZlLWtleSI6ICIvZGVtby5qcGciLCAiZXhwaXJhdGlvbiI6ICIxNDc4Njc0NjE4IiwgImRhdGUiOiAiV2VkLCA5IE5vdiAyMDE2IDE0OjI2OjU4IEdNVCIsICJjb250ZW50LW1kNSI6ICI3YWM2NmMwZjE0OGRlOTUxOWI4YmQyNjQzMTJjNGQ2NCJ9\n</code></pre> <p>\u751f\u6210 Signature\uff1a</p> <pre><code>Signature = Base64 (HMAC-SHA1 (&lt;Password&gt;,\n&lt;Method&gt;&amp;\n&lt;URI&gt;&amp;\n&lt;Date&gt;&amp;\n&lt;Policy&gt;&amp;\n&lt;Content-MD5&gt;\n))\n= Base64 (HMAC-SHA1 (482c811da5d5b4bc6d497ffa98491e38,POST&amp;/upyun-temp&amp;Wed, 09 Nov 2016 14:26:58 GMT&amp;eyJidWNrZXQiOiAidXB5dW4tdGVtcCIsICJzYXZlLWtleSI6ICIvZGVtby5qcGciLCAiZXhwaXJhdGlvbiI6ICIxNDc4Njc0NjE4IiwgImRhdGUiOiAiV2VkLCA5IE5vdiAyMDE2IDE0OjI2OjU4IEdNVCIsICJjb250ZW50LW1kNSI6ICI3YWM2NmMwZjE0OGRlOTUxOWI4YmQyNjQzMTJjNGQ2NCJ9&amp;7ac66c0f148de9519b8bd264312c4d64))\n// HMAC-SHA1 \u8fd4\u56de\u7684\u539f\u751f\u4e8c\u8fdb\u5236\u6570\u636e\u8fdb\u884c Base64 \u7f16\u7801\n= DTGOeaCa1yk1JWG4G3DH+u5sI5M=\n</code></pre> <p>Authorization \u7b7e\u540d\uff1a</p> <pre><code>authorization=UPYUN operator123:DTGOeaCa1yk1JWG4G3DH+u5sI5M=\n</code></pre> <p>\u5b8c\u6574\u7684\u8bf7\u6c42\uff1a</p> <pre><code>POST /upyun-temp HTTP/1.1\nHost: v0.api.upyun.com\nContent-Type:multipart/form-data; boundary=\u2014\u2014WebKitFormBoundaryE19zNvXGzXaLvS5C\n\n----WebKitFormBoundaryE19zNvXGzXaLvS5C\nContent-Disposition: form-data; name=\"policy\"\n\neyJidWNrZXQiOiAidXB5dW4tdGVtcCIsICJzYXZlLWtleSI6ICIvZGVtby5qcGciLCAiZXhwaXJhdGlvbiI6ICIxNDc4Njc0NjE4IiwgImRhdGUiOiAiV2VkLCA5IE5vdiAyMDE2IDE0OjI2OjU4IEdNVCIsICJjb250ZW50LW1kNSI6ICI3YWM2NmMwZjE0OGRlOTUxOWI4YmQyNjQzMTJjNGQ2NCJ9&amp;file=\n----WebKitFormBoundaryE19zNvXGzXaLvS5C\nContent-Disposition: form-data; name=\"file\"; filename=\"demo.jpg\"\n\ndef\n----WebKitFormBoundaryE19zNvXGzXaLvS5C\nContent-Disposition: form-data; name=\"authorization\"\n\nUPYUN operator123:DTGOeaCa1yk1JWG4G3DH+u5sI5M=\n----WebKitFormBoundaryE19zNvXGzXaLvS5C\n</code></pre>"},{"location":"api/authorization/#token","title":"token \u8ba4\u8bc1","text":"<p>\u7269\u8054\u7f51\u3001\u79fb\u52a8\u4e92\u8054\u7f51\u7b49\u884c\u4e1a\uff0c\u4e3a\u4e86\u533a\u5206\u4e0d\u540c\u7ec8\u7aef\uff0c\u63d0\u5347\u8ba4\u8bc1\u5b89\u5168\u6027\uff0c\u5728 REST API \u4e0a\u6dfb\u52a0\u4e86 token \u8ba4\u8bc1\uff0c\u4f7f\u7528 token \u8ba4\u8bc1\u53ef\u4ee5\u4e3a\u6bcf\u4e2a\u7ec8\u7aef\u7b7e\u53d1\u4e00\u4e2a\u72ec\u7acb\u7684\u6709\u8fc7\u671f\u65f6\u95f4\u7684\u201c\u5bc6\u7801\u201d\u3002</p>"},{"location":"api/authorization/#token_1","title":"token \u8ba4\u8bc1\u7684\u751f\u6210\u903b\u8f91","text":"<ol> <li>\u4f7f\u7528\u7ec8\u7aef\u4e0a\u4f20\u6587\u4ef6\u7684\u6807\u8bc6\u4fe1\u606f\uff0c\u8ba1\u7b97 token\u3002</li> <li>Server \u7aef\u751f\u6210 token\u3002</li> <li>\u7ec8\u7aef\u7f13\u5b58 token\uff0c\u5728\u6709\u6548\u671f\u5185\u7684\u4e0a\u4f20\u6587\u4ef6\u8bf7\u6c42\uff0c\u90fd\u53ef\u4ee5\u4f7f\u7528\u8be5 token\u3002</li> <li>\u7ec8\u7aef\u4e0a\u4f20\u6587\u4ef6\uff0c\u8bf7\u6c42\u4e2d\u9644\u5e26 token\u3002\u5982\u679c token \u6b63\u786e\u4e14\u5728\u6709\u6548\u671f\u5185\uff0c\u9a8c\u8bc1\u901a\u8fc7\uff0c\u5141\u8bb8\u4e0a\u4f20\u6587\u4ef6\uff1b\u5426\u5219\uff0c\u62d2\u7edd\u4e0a\u4f20\uff0c\u8fd4\u56de\u9519\u8bef\u7801 <code>401</code>\u3002</li> </ol>"},{"location":"api/authorization/#token_2","title":"token \u8ba4\u8bc1\u751f\u6210","text":"<p>** \u51c6\u5907\u5de5\u4f5c **</p> <ol> <li>\u51c6\u5907\u7528\u4e8e\u8fd0\u884c token \u751f\u6210\u7a0b\u5e8f\u7684 Server\u3002</li> <li>\u51c6\u5907 Operator\u3001Password\uff0c\u5373\u64cd\u4f5c\u5458\u4fe1\u606f\u3002</li> </ol> <p>** token \u8ba4\u8bc1\u8ba1\u7b97\u65b9\u6cd5 **</p> <pre><code>Authorization: UPYUN &lt;Operator&gt;:&lt;token&gt;\n\n&lt;token&gt; = Base64 (HMAC-SHA1 (&lt;Password&gt;,\n&lt;Method&gt;&amp;\n&lt;X-Upyun-Uri-Prefix&gt;&amp;\n&lt;X-Upyun-Uri-Postfix&gt;&amp;\n&lt;X-Upyun-Expire&gt;\n))\n</code></pre> <p>\u76f8\u5173\u53c2\u6570\u8bf4\u660e\uff1a</p> \u53c2\u6570 \u5fc5\u9009 \u8bf4\u660e Operator \u662f \u670d\u52a1\u7684\u64cd\u4f5c\u5458\u540d\u79f0 Method \u662f \u8bf7\u6c42\u65b9\u5f0f\uff0c\u5982\uff1aGET\u3001POST\u3001PUT\u3001HEAD \u7b49 X-Upyun-Uri-Prefix \u5426 \u4f7f\u7528\u8bf7\u6c42\u8def\u5f84\u4e2d\u524d\u9762\u90e8\u5206\u8ba1\u7b97 token\uff0c\u548c\u4e0b\u4e00\u4e2a\u53c2\u6570\u662f\u4e00\u7ec4\uff0c\u4e24\u4e2a\u5fc5\u987b\u586b\u4e00\u4e2a\uff0c\u5141\u8bb8\u4e24\u4e2a\u90fd\u586b X-Upyun-Uri-Postfix \u5426 \u4f7f\u7528\u8bf7\u6c42\u8def\u5f84\u4e2d\u540e\u9762\u90e8\u5206\u8ba1\u7b97 token\uff0c\u548c\u4e0a\u4e00\u4e2a\u53c2\u6570\u662f\u4e00\u7ec4\uff0c\u4e24\u4e2a\u5fc5\u987b\u586b\u4e00\u4e2a\uff0c\u5141\u8bb8\u4e24\u4e2a\u90fd\u586b X-Upyun-Expire \u662f token \u7684\u8fc7\u671f\u65f6\u95f4\uff0cUNIX UTC \u65f6\u95f4\u6233\uff0c\u5355\u4f4d\u79d2\uff0c\u5efa\u8bae 3 \u4e2a\u6708 Password \u662f \u670d\u52a1\u7684\u64cd\u4f5c\u5458\u5bc6\u7801\u7684 MD5 \u503c <p>** \u6ce8 **</p> <ul> <li>\u975e\u5fc5\u9009\u53c2\u6570\u4e3a\u7a7a\u65f6\uff0c\u8fde\u540c\u540e\u9762\u7684 <code>&amp;</code> \u4e00\u8d77\u4e0d\u53c2\u4e0e\u7b7e\u540d\u8ba1\u7b97\u3002\u6240\u6709\u8ba1\u7b97\u7684 MD5 \u503c\uff0c\u683c\u5f0f\u5747\u662f 32 \u4f4d\u5c0f\u5199\u3002</li> <li>HMAC-SHA1 \u8f93\u51fa\u7684\u5fc5\u987b\u662f\u539f\u751f\u7684\u4e8c\u8fdb\u5236\u6570\u636e\u3002</li> </ul> <p>** \u4e3e\u4f8b **</p> <pre><code>// \u64cd\u4f5c\u5458\u4fe1\u606f\nOperator = operator123          \nPassword = MD5(password123) = 482c811da5d5b4bc6d497ffa98491e38\n\n// \u53c2\u6570\u4fe1\u606f\nMethod = PUT                            \nX-Upyun-Uri-Prefix = /bucket/client_37ascii     // \u7ec8\u7aef\u8bbe\u5907\u7684\u6807\u8bc6\u524d\u7f00 \uff08\u4e5f\u53ef\u4ee5\u662f\u5b58\u50a8\u4e0a\u7684\u4e00\u4e2a\u76ee\u5f55\uff0c\u5982 /client_37ascii/ \uff09\nX-Upyun-Expire = 1528531186  // \u8fc7\u671f\u65f6\u95f4\uff1a2018/6/9 15:59:46\n</code></pre> <p>\u751f\u6210 Token\uff1a</p> <pre><code>Token = Base64 (HMAC-SHA1 (&lt;Password&gt;,\n&lt;Method&gt;&amp;\n&lt;X-Upyun-Uri-Prefix&gt;&amp;\n&lt;X-Upyun-Expire&gt;\n))\n= Base64 (HMAC-SHA1 (482c811da5d5b4bc6d497ffa98491e38,PUT&amp;/bucket/client_37ascii&amp;1528531186))\n// HMAC-SHA1 \u8fd4\u56de\u7684\u539f\u751f\u4e8c\u8fdb\u5236\u6570\u636e\u8fdb\u884c Base64 \u7f16\u7801\n= P2UZNhjF+wB4MPq8ONSFU2aVW+8=\n</code></pre> <p>Authorization \u7b7e\u540d\uff1a</p> <pre><code>Authorization: UPYUN operator123:P2UZNhjF+wB4MPq8ONSFU2aVW+8=\n</code></pre> <p>\u7ec8\u7aef\u4e0a\u4f20\u6587\u4ef6\u8bf7\u6c42 Header\uff1a</p> <pre><code>PUT /bucket/client_37ascii_xxx.jpg HTTP/1.1\nAuthorization: UPYUN operator123:P2UZNhjF+wB4MPq8ONSFU2aVW+8=\nX-Upyun-Uri-Prefix = /bucket/client_37ascii\nX-Upyun-Expire = 1528531186\nDate: Tue, 09 Jan 2018 15:39:40 GMT     \nContent-Type: image/jpeg\nHost: v0.api.upyun.com\nContent-Length: 33456\n</code></pre>"},{"location":"api/authorization/#_3","title":"\u4ee3\u7801\u6f14\u793a","text":""},{"location":"api/authorization/#_4","title":"\u6ce8\u610f\u4e8b\u9879","text":"<ol> <li>\u672c\u793a\u4f8b\u9002\u7528\u4e8e\u4e91\u5b58\u50a8\uff0c\u4e91\u5904\u7406\uff0c\u5185\u5bb9\u8bc6\u522b\uff0c\u5bb9\u5668\u4e91\u670d\u52a1\u3002</li> <li>\u4f7f\u7528\u65f6\uff0c\u6839\u636e\u81ea\u5df1\u7684\u9700\u6c42\u548c\u914d\u7f6e\uff0c\u4fee\u6539\u5bf9\u5e94\u53c2\u6570: <code>key</code>\uff0c<code>secret</code>\uff0c<code>uri</code>\uff0c<code>method</code>\uff0c<code>policy</code>\uff0c<code>md5</code>\u3002</li> <li>\u672c\u793a\u4f8b\u4f7f\u7528\u7684 <code>key</code> \u548c <code>secret</code> \u5728\u4e0d\u540c\u670d\u52a1\u4e2d\u7684\u542b\u4e49\u4e0d\u4e00\u6837\uff0c\u4e91\u5b58\u50a8\u3001\u4e91\u5904\u7406\u3001\u5185\u5bb9\u8bc6\u522b(\u6709\u5b58\u50a8) \u4e2d\u8868\u793a <code>Operator</code> \u548c <code>Password</code>\uff0c \u5185\u5bb9\u8bc6\u522b(\u65e0\u5b58\u50a8)\u3001\u5bb9\u5668\u4e91\u8868\u793a\u5404\u81ea\u670d\u52a1\u63d0\u4f9b\u7684 <code>ClientKey</code> \u548c <code>ClientSecret</code>\u3002</li> <li>\u6839\u636e\u5bf9\u5e94 API \u6587\u6863\u8bf4\u660e\uff0c\u628a\u8ba4\u8bc1\u4fe1\u606f\uff0c\u586b\u5165\u76f8\u5e94\u7684 <code>http</code> \u8bf7\u6c42\u4fe1\u606f\u4e2d\u3002</li> <li>\u4f7f\u7528 <code>form API</code> \u4e0a\u4f20\u65f6\uff0c\u9700\u8981\u7528\u6237\u751f\u6210 <code>policy</code>\uff0c\u672c\u793a\u4f8b\u4e0d\u63d0\u4f9b\u751f\u6210 <code>policy</code> \u7684\u4f7f\u7528\u5b9e\u4f8b\u3002</li> </ol>"},{"location":"api/authorization/#_5","title":"\u5e38\u7528\u8bed\u8a00\u4ee3\u7801\u793a\u4f8b","text":""},{"location":"api/authorization/#go","title":"go \u4ee3\u7801\u6f14\u793a","text":"<pre><code>package main\n\nimport (\n    \"crypto/hmac\"\n    \"crypto/md5\"\n    \"crypto/sha1\"\n    \"encoding/base64\"\n    \"fmt\"\n    \"strings\"\n    \"time\"\n)\n\nvar (\n    key    = \"upyun\"\n    secret = \"secret\" // \u5bf9\u4e8e\u4e0a\u4f20\uff0c\u5904\u7406\uff0c\u8ddf\u5185\u5bb9\u8bc6\u522b\u9700\u8981MD5\u52a0\u5bc6\n    uri    = \"/v1/apps/\"\n    method = \"GET\"\n)\n\nfunc md5Str(s string) string {\n    return fmt.Sprintf(\"%x\", md5.Sum([]byte(s)))\n}\n\nfunc makeRFC1123Date(d time.Time) string {\n    utc := d.UTC().Format(time.RFC1123)\n    return strings.Replace(utc, \"UTC\", \"GMT\", -1)\n}\nfunc base64ToStr(b []byte) string {\n    return base64.StdEncoding.EncodeToString(b)\n}\n\nfunc sign(key, secret, method, uri, date, policy, md5 string) string {\n    mac := hmac.New(sha1.New, []byte(secret))\n    elems := []string{}\n    for _, v := range []string{method, uri, date, policy, md5} {\n        if v != \"\" {\n            elems = append(elems, v)\n        }\n    }\n    value := strings.Join(elems, \"&amp;\")\n    fmt.Println(value)\n    mac.Write([]byte(value))\n    signStr := base64ToStr(mac.Sum(nil))\n    return \"UPYUN \" + key + \":\" + signStr\n}\n\nfunc main() {\n    date := makeRFC1123Date(time.Now())\n    fmt.Println(date)\n    fmt.Println(md5Str(secret))\n\n    // \u4e0a\u4f20\uff0c\u5904\u7406\uff0c\u5185\u5bb9\u8bc6\u522b\u6709\u5b58\u50a8\n    fmt.Println(sign(key, md5Str(secret), method, uri, date, \"\", \"\"))\n\n    // \u5bb9\u5668\u4e91\uff0c\u5185\u5bb9\u8bc6\u522b\u65e0\u5b58\u50a8\n    fmt.Println(sign(key, secret, method, uri, date, \"\", \"\"))\n}\n\n</code></pre>"},{"location":"api/authorization/#python","title":"python \u4ee3\u7801\u6f14\u793a","text":"<pre><code># -*- coding: UTF-8 -*-\nimport base64\nimport datetime\nimport hashlib\nimport hmac\n\n# Tip 1\n# \u4f7f\u7528\u65f6\u9700\u8981\u6839\u636e\u81ea\u5df1\u914d\u7f6e\u4e0e\u9700\u6c42\u63d0\u4f9b\u53c2\u6570 key secret uri method\nkey = 'upyun'\nsecret = 'secret'\nuri = '/v1/apps/'\nmethod = 'GET'\n\n\ndef httpdate_rfc1123(dt=None):\n    dt = dt or datetime.datetime.utcnow()\n    return dt.strftime('%a, %d %b %Y %H:%M:%S GMT')\n\ndef md5(value):\n    return hashlib.md5(value.encode()).hexdigest()\n\ndef sign(client_key, client_secret, method, uri, date, policy=None, md5=None):\n    # Tip 4\n    # MD5 \u4fe1\u606f\u53ef\u9009\n    signarr = []\n    for v in [method, uri, date, policy, md5]:\n        if v != None:\n            signarr.append(v)\n    signstr = '&amp;'.join(signarr)\n    signstr = base64.b64encode(\n        hmac.new(client_secret.encode(), signstr.encode(),\n                 digestmod=hashlib.sha1).digest()\n    ).decode()\n    return 'UPYUN %s:%s' % (client_key, signstr)\n\n\ndef main():\n    # Tip 2\n    # \u65f6\u95f4\u9700\u8981\u4e0e http \u5934 Date \u4fe1\u606f\u4fdd\u6301\u4e00\u81f4\n    # date = httpdate_rfc1123()\n    date = 'Thu, 14 Dec 2017 06:03:27 GMT'\n\n    # Tip 3\n    # sign \u51fd\u6570\u8fd4\u56de\u7684\u503c\u586b\u5165 http \u5934 Authorization \u4fe1\u606f\u4e2d\n    print date\n\n    print md5(secret)\n\n    # \u4e0a\u4f20\uff0c\u5904\u7406\uff0c\u5185\u5bb9\u8bc6\u522b\u6709\u5b58\u50a8\n    print sign(key, md5(secret), method, uri, date)\n\n    # \u5185\u5bb9\u8bc6\u522b\u65e0\u5b58\u50a8\uff0c\u5bb9\u5668\u4e91\n    print sign(key, secret, method, uri, date)\n\nif __name__ == '__main__':\n    main()\n</code></pre>"},{"location":"api/authorization/#js","title":"js \u4ee3\u7801\u6f14\u793a","text":"<pre><code>var crypto = require('crypto');\n\nfunction sign(key, secret, method, uri, date, policy=null, md5=null) {\n    elems = [];\n    [method, uri, date, policy, md5].forEach(item =&gt; {\n        if (item != null) {\n            elems.push(item)\n        }\n    })\n    value = elems.join('&amp;');\n    auth = hmacsha1(secret, value);\n    return `UPYUN ${key}:${auth}`;\n}\n\nfunction MD5(value) {\n    return crypto.createHash('md5').update(value).digest('hex');\n}\n\nfunction hmacsha1(secret, value) {\n    return crypto.createHmac('sha1', secret).update(value, 'utf-8').digest().toString('base64');\n}\n\ndate = new Date().toGMTString();\nconsole.log(date);\n\nkey = 'upyun';\nsecret = 'secret';\nmethod = 'GET';\nuri = '/v1/apps/';\n\nconsole.log(MD5('secret'));\n\n// \u4e0a\u4f20\uff0c\u5904\u7406\uff0c\u5185\u5bb9\u8bc6\u522b\u6709\u5b58\u50a8\nconsole.log(sign(key, MD5(secret), method, uri, date));\n\n// \u5185\u5bb9\u8bc6\u522b\u65e0\u5b58\u50a8\uff0c\u5bb9\u5668\u4e91\nconsole.log(sign(key, secret, method, uri, date));\n</code></pre>"},{"location":"api/authorization/#java","title":"java \u4ee3\u7801\u6f14\u793a","text":"<pre><code>import java.security.InvalidKeyException;\nimport java.security.NoSuchAlgorithmException;\nimport java.security.SignatureException;\n\nimport javax.crypto.Mac;\nimport javax.crypto.spec.SecretKeySpec;\n\nimport java.util.Base64;\nimport java.util.Calendar;\nimport java.text.SimpleDateFormat;\nimport java.util.Locale;\nimport java.util.TimeZone;\n\nimport java.security.*;\nimport java.io.*;\n\npublic class auth {\n    private static final String HMAC_SHA1_ALGORITHM = \"HmacSHA1\";\n\n    public static String md5(String string) {\n        byte[] hash;\n        try {\n            hash = MessageDigest.getInstance(\"MD5\").digest(string.getBytes(\"UTF-8\"));\n        } catch (UnsupportedEncodingException e) {\n            throw new RuntimeException(\"UTF-8 is unsupported\", e);\n        } catch (NoSuchAlgorithmException e) {\n            throw new RuntimeException(\"MessageDigest\u4e0d\u652f\u6301MD5Util\", e);\n        }\n        StringBuilder hex = new StringBuilder(hash.length * 2);\n        for (byte b : hash) {\n            if ((b &amp; 0xFF) &lt; 0x10) hex.append(\"0\");\n            hex.append(Integer.toHexString(b &amp; 0xFF));\n        }\n        return hex.toString();\n    }\n\n    public static byte[] hashHmac(String data, String key)\n            throws SignatureException, NoSuchAlgorithmException, InvalidKeyException {\n        SecretKeySpec signingKey = new SecretKeySpec(key.getBytes(), HMAC_SHA1_ALGORITHM);\n        Mac mac = Mac.getInstance(HMAC_SHA1_ALGORITHM);\n        mac.init(signingKey);\n        return mac.doFinal(data.getBytes());\n    }\n\n    public static String sign(String key, String secret, String method, String uri, String date, String policy,\n            String md5) throws Exception {\n        String value = method + \"&amp;\" + uri + \"&amp;\" + date;\n        if (policy != null &amp;&amp; policy.length() &gt; 0) {\n            value = value + \"&amp;\" + policy;\n        }\n\n        if (md5 != null &amp;&amp; md5.length() &gt; 0) {\n            value = value + \"&amp;\" + md5;\n        }\n        byte[] hmac = hashHmac(value, secret);\n        String sign = Base64.getEncoder().encodeToString(hmac);\n        return \"UPYUN \" + key + \":\" + sign;\n    }\n\n\n    public static String getRfc1123Time() {\n        Calendar calendar = Calendar.getInstance();\n        SimpleDateFormat dateFormat = new SimpleDateFormat(\n            \"EEE, dd MMM yyyy HH:mm:ss z\", Locale.US);\n        dateFormat.setTimeZone(TimeZone.getTimeZone(\"GMT\"));\n        return dateFormat.format(calendar.getTime());\n    }\n\n    public static void main(String[] args) throws Exception {\n        String key = \"upyun\";\n        String secret = \"secret\";\n        String method = \"GET\";\n        String uri = \"/v1/apps/\";\n\n        String date = getRfc1123Time();\n\n        System.out.println(date);\n\n        System.out.println(md5(secret));\n\n        // \u4e0a\u4f20\uff0c\u5904\u7406\uff0c\u5185\u5bb9\u8bc6\u522b\u6709\u5b58\u50a8\n        System.out.println(sign(key, md5(secret), method, uri, date, \"\", \"\"));\n\n        // \u5185\u5bb9\u8bc6\u522b\u65e0\u5b58\u50a8\uff0c\u5bb9\u5668\u4e91\n        System.out.println(sign(key, secret, method, uri, date, \"\", \"\"));\n    }\n}\n</code></pre>"},{"location":"api/authorization/#php","title":"php \u4ee3\u7801\u6f14\u793a","text":"<pre><code>&lt;?php\n\nfunction sign($key, $secret, $method, $uri, $date, $policy=null, $md5=null)\n{\n    $elems = array();\n    foreach (array($method, $uri, $date, $policy, $md5) as $v)\n    {\n        if ($v)\n        {\n            $elems[] = $v;\n        }\n    }\n    $value = implode('&amp;', $elems);\n    $sign = base64_encode(hash_hmac('sha1', $value, $secret, true));\n    return 'UPYUN ' . $key . ':' . $sign;\n}\n\nfunction main()\n{\n    $key = 'upyun';\n    $secret = 'secret';\n    $uri = '/v1/apps/';\n    $method = 'GET';\n    $date = gmdate('D, d M Y H:i:s \\G\\M\\T');\n\n    $md = md5($secret);\n\n    echo $md . \"\\n\";\n\n    echo $date . \"\\n\";\n\n    // \u4e0a\u4f20\uff0c\u5904\u7406\uff0c\u5185\u5bb9\u8bc6\u522b\u6709\u5b58\u50a8\n    echo sign($key, md5($secret), $method, $uri, $date) . \"\\n\";\n\n    // \u5185\u5bb9\u8bc6\u522b\u65e0\u5b58\u50a8\uff0c\u5bb9\u5668\u4e91\n    echo sign($key, $secret, $method, $uri, $date);\n}\n\nmain();\n</code></pre> <p>\u5982\u6709\u7591\u95ee\u8bf7 \u8054\u7cfb\u6211\u4eec</p>"},{"location":"api/developer_guide/","title":"\u5f00\u53d1\u8005\u6307\u5357","text":""},{"location":"api/developer_guide/#_1","title":"\u4e0a\u4f20\u4e0b\u8f7d\u7ecf\u5178\u67b6\u6784","text":"<p>\u4e0e\u4e91\u5b58\u50a8\u642d\u914d\u7684\u4f7f\u7528\u65b9\u5f0f\u4e3b\u8981\u6709\u4e24\u79cd\uff1a</p> <p>1. \u5ba2\u6237\u7aef\u76f4\u4f20\uff0c\u5ba2\u6237\u7aef\u628a\u6587\u4ef6\u76f4\u63a5\u4e0a\u4f20\u5230\u4e91\u5b58\u50a8\uff1b</p> <p></p> <p>\u4e3b\u8981\u9002\u7528\u4e8e\u5927\u91cf\u6587\u4ef6\uff08TB \u7ea7\u4ee5\u4e0a\uff09\u5b58\u50a8\u3001\u672c\u5730\u4e0d\u5b58\u50a8\u6587\u4ef6\u6216\u65b0\u5efa\u9879\u76ee\u3002</p> <p>2. \u7528\u6237\u670d\u52a1\u5668\u4e2d\u8f6c\uff0c\u5ba2\u6237\u7aef\u6587\u4ef6\u5148\u4e0a\u4f20\u5230\u7528\u6237\u670d\u52a1\u5668\uff0c\u518d\u4ece\u7528\u6237\u670d\u52a1\u5668\u4e0a\u4f20\u5230\u53c8\u62cd\u4e91\u5b58\u50a8\u3002</p> <p></p> <p>\u4e3b\u8981\u9002\u7528\u4e8e\u5c0f\u91cf\u6587\u4ef6\u5b58\u50a8\u3001\u5df2\u4f7f\u7528\u672c\u5730\u5b58\u50a8\u9879\u76ee\u3002</p>"},{"location":"api/developer_guide/#api","title":"API \u9009\u62e9","text":"<p>HTTP REST API</p> <ul> <li>\u652f\u6301\u7528\u6237\u670d\u52a1\u5668\u4e0a\u4f20\u6a21\u5f0f\uff1b</li> <li>\u501f\u52a9 JS \u652f\u6301\u5ba2\u6237\u7aef\u76f4\u4f20\u6a21\u5f0f\uff1b</li> <li>\u9ed8\u8ba4\u4f7f\u7528\u6d41\u5f0f\u4e0a\u4f20\uff1b</li> <li>\u652f\u6301\u4e0a\u4f20\u65ad\u70b9\u7eed\u4f20\uff1b</li> <li>\u652f\u6301\u4e91\u7aef\u5b9e\u65f6\u56fe\u7247\u9884\u5904\u7406\uff1b</li> </ul> <p>\u4e3b\u8981\u9002\u7528\u4e8e\u5927\u91cf\u5927\u6587\u4ef6\u4f20\u8f93\u3001\u79fb\u52a8\u7aef\u4e0a\u4f20\u3002</p> <p>HTTP FORM API</p> <ul> <li>\u901a\u8fc7\u8868\u5355\uff08FORM\uff09\u652f\u6301\u5ba2\u6237\u7aef\u76f4\u4f20\u6a21\u5f0f\uff1b</li> <li>\u652f\u6301\u7528\u6237\u670d\u52a1\u5668\u4e0a\u4f20\u6a21\u5f0f\uff1b</li> <li>\u9ed8\u8ba4\u4f7f\u7528\u8868\u5355\u4e0a\u4f20\uff1b</li> <li>\u652f\u6301\u4e91\u7aef\u6570\u636e\u9884\u5904\u7406\uff1b</li> </ul> <p>\u4e3b\u8981\u9002\u7528\u4e8e\u5927\u91cf\u5c0f\u6587\u4ef6\u4f20\u8f93\u3002</p>"},{"location":"api/developer_guide/#_2","title":"\u4e0a\u4f20\u65b9\u5f0f","text":"<p>\u4e91\u5b58\u50a8\u7684\u4e0a\u4f20\u65b9\u5f0f\uff0c\u90fd\u901a\u8fc7 CDN \u8fdb\u884c\u52a0\u901f\uff0c\u5305\u62ec\u5c31\u8fd1\u4e0a\u4f20\u3001\u94fe\u8def\u4f18\u5316\u3001\u8d1f\u8f7d\u5747\u8861\u3001\u4e13\u7ebf\u4f20\u8f93\u3001\u514d\u8d39\u7b49\u4f18\u52bf\u3002</p> <p>\u65ad\u70b9\u7eed\u4f20</p> <p>\u628a\u6587\u4ef6\u5207\u6210\u56fa\u5b9a\u5927\u5c0f\u5206\u7247\uff0c\u4e00\u4e2a\u5206\u7247\u4e00\u4e2a\u5206\u7247\u4e0a\u4f20\uff08\u53ef\u4ee5\u5e76\u53d1\u4f20\uff09\uff0c\u5f53\u56e0\u7f51\u7edc\u539f\u56e0\u6216\u5176\u4ed6\u60c5\u51b5\u4e0a\u4f20\u5931\u8d25\u540e\uff0c\u4ece\u5931\u8d25\u5206\u7247\u5f00\u59cb\u63a5\u7740\u4f20\uff0c\u4e0d\u9700\u8981\u91cd\u5934\u5f00\u59cb\u4f20\u3002</p> <p>\u4e3b\u8981\u9002\u7528\u4e8e MB \u53ca\u4ee5\u4e0a\u6587\u4ef6\u4e0a\u4f20\uff0c\u7279\u522b\u662f\u79fb\u52a8\u7aef\u4e0a\u4f20\uff0c\u907f\u514d\u4e86\u591a\u6b21\u5931\u8d25\u5e26\u6765\u7684\u5dee\u4e0a\u4f20\u4f53\u9a8c\u3002</p> <p>\u8868\u5355\u4e0a\u4f20</p> <p>\u901a\u8fc7 HTML FORM \uff0c\u628a\u6587\u4ef6\u76f4\u63a5\u4e0a\u4f20\u5230\u4e91\u5b58\u50a8\u3002</p> <p>\u4e3b\u8981\u9002\u7528\u4e8e\u7f51\u7ad9\u3001APP \u7b49\u5c0f\u6587\u4ef6\u4e0a\u4f20\u3002</p> <p>\u666e\u901a\u4e0a\u4f20</p> <p>\u901a\u8fc7\u4e00\u6b21 HTTP \u8bf7\u6c42\u4ea4\u4e92\u5b8c\u6210\u6587\u4ef6\u4e0a\u4f20\uff0c\u4e14\u4e0d\u5bf9\u6587\u4ef6\u8fdb\u884c\u5206\u7247\u3002</p> <p>\u4e3b\u8981\u9002\u7528\u4e8e\u7f51\u7edc\u73af\u5883\u826f\u597d\u7684\u60c5\u51b5\u4e0b\u5c0f\u6587\u4ef6\u4e0a\u4f20\u3002</p>"},{"location":"api/developer_guide/#_3","title":"\u4e0b\u8f7d\u65b9\u5f0f","text":"<p>\u4e91\u5b58\u50a8\u7684\u4e0b\u8f7d\u65b9\u5f0f\uff0c\u90fd\u901a\u8fc7 CDN \u8fdb\u884c\u52a0\u901f\uff0c\u5305\u62ec\u5c31\u8fd1\u8bbf\u95ee\u3001\u94fe\u8def\u4f18\u5316\u3001\u8d1f\u8f7d\u5747\u8861\u3001\u4e13\u7ebf\u4f20\u8f93\u7b49\u4f18\u52bf\u3002</p> <p>\u878d\u5408 CDN \u4e0b\u8f7d\u8bbf\u95ee</p> <p>\u4ee5 URL \u7684\u65b9\u5f0f\u8bbf\u95ee\u6587\u4ef6\uff0c\u6587\u4ef6\u501f\u52a9 CDN \u7684\u72ec\u7279\u7279\u6027\u5206\u53d1\u7ed9\u7528\u6237\uff0c\u8fd9\u4e9b\u7279\u6027\u5305\u62ec\uff08\u81ea\u52a8\uff09\u52a8\u9759\u6001\u6587\u4ef6\u5206\u79bb\u3001\u5927\u6587\u4ef6\u5206\u6bb5\u7f13\u5b58\u3001\u70b9\u64ad\u89c6\u9891\u6587\u4ef6\u62d6\u62c9\u7b49\uff0c\u5168\u9762\u89e3\u51b3\u5927\u5c0f\u6587\u4ef6\u3001\u4e0d\u540c\u7c7b\u578b\u6587\u4ef6\u7684\u5206\u53d1\u52a0\u901f\u9700\u6c42\u3002</p> <p>\u9002\u7528\u4e8e\u6240\u6709\u6587\u4ef6\u8bbf\u95ee\u65b9\u5f0f\u3002</p> <p>\u666e\u901a\u4e0b\u8f7d</p> <p>\u4ee5 API \u7684\u65b9\u5f0f\u4e0b\u8f7d\u6587\u4ef6\u3002</p>"},{"location":"api/developer_guide/#_4","title":"\u6570\u636e\u9884\u5904\u7406","text":"<p>\u56fe\u7247\u9884\u5904\u7406</p> <ul> <li>\u652f\u6301\u4e0a\u4f20\u540c\u6b65\u4f5c\u56fe\uff0c\u628a\u56fe\u7247\u5904\u7406\u5e76\u4fdd\u5b58\uff0c\u540c\u65f6\u4e22\u6389\u539f\u56fe\u3002</li> <li>\u652f\u6301\u4e0a\u4f20\u5f02\u6b65\u4f5c\u56fe\uff0c\u628a\u56fe\u7247\u5904\u7406\u6210\u591a\u5f20\u56fe\u5e76\u4fdd\u5b58\uff0c\u652f\u6301\u4fdd\u5b58\u539f\u56fe\u3002</li> </ul> <p>\u97f3\u89c6\u9891\u9884\u5904\u7406</p> <ul> <li>\u652f\u6301\u4e0a\u4f20\u5f02\u6b65\u97f3\u89c6\u9891\u5904\u7406\uff0c\u6587\u4ef6\u4e0a\u4f20\u5b8c\u540e\uff0c\u81ea\u52a8\u5f00\u59cb\u97f3\u89c6\u9891\u5904\u7406\u3002</li> </ul>"},{"location":"api/developer_guide/#_5","title":"\u6570\u636e\u8fc1\u79fb","text":"<p>FTP</p> <p>\u5bf9\u652f\u6301 FTP \u7684\u5b58\u50a8\u6e90\uff0c\u53ef\u4ee5\u4f7f\u7528 FTP \u628a\u6570\u636e\u4e0b\u8f7d\u4e0b\u6765\uff0c\u518d\u4e0a\u4f20\u5230\u53c8\u62cd\u4e91\u5b58\u50a8\u3002\u5728\u8fd9\u4e2a\u8fc7\u7a0b\uff0c\u4e3a\u4e86\u4fdd\u8bc1\u8fc1\u79fb\u6570\u636e\u7684\u4e00\u81f4\u6027\uff0c\u9700\u8981\u5904\u7406\u9519\u8bef\u65e5\u5fd7\u3002\u90e8\u5206 FTP \u5de5\u5177\uff0c\u5982 MAC \u4e0a\u7684 Transmit\uff08\u4e0b\u8f7d\uff09\uff0c\u652f\u6301\u76f4\u63a5\u4ece\u5b58\u50a8\u6e90\u628a\u6587\u4ef6\u3001\u76ee\u5f55\u62d6\u52a8\u53c8\u62cd\u4e91\u5b58\u50a8\uff0c\u51cf\u5c11\u4eba\u5de5\u64cd\u4f5c\u91cf\u3002</p> <p>\u4e3b\u8981\u9002\u7528\u4e8e\u4e0d\u60f3\u5f00\u53d1\u6570\u636e\u8fc1\u79fb\u7a0b\u5e8f\u3001\u4e2d\u5c0f\u89c4\u6a21\u6570\u636e\u8fc1\u79fb\u3002</p> <p>FTP/FTPS \u600e\u4e48\u4f7f\u7528\uff0c\u8bf7\u70b9\u8fd9\u91cc\u3002</p> <p>\u5f02\u6b65\u62c9\u53d6</p> <p>\u5bf9\u80fd\u83b7\u53d6\u5230\u6216\u5df2\u77e5\u6570\u636e URL \u5217\u8868\u7684\u5b58\u50a8\u6e90\uff0c\u53ef\u4ee5\u4f7f\u7528\u5f02\u6b65\u62c9\u53d6\uff0c\u901a\u8fc7\u6587\u4ef6 URL\uff0c\u5229\u7528\u53c8\u62cd\u4e91 CDN \u53bb\u83b7\u53d6\u6587\u4ef6\uff0c\u4f7f\u6587\u4ef6\u5feb\u901f\u3001\u7a33\u5b9a\u8fc1\u79fb\u3002</p> <p>\u4e3b\u8981\u9002\u7528\u4e8e\u4e2d\u5927\u89c4\u6a21\u6570\u636e\u8fc1\u79fb\u3002</p> <p>\u5f02\u6b65\u62c9\u53d6\u600e\u4e48\u4f7f\u7528\uff0c\u8bf7\u70b9\u8fd9\u91cc\u3002</p> <p>\u5982\u6709\u7591\u95ee\u8bf7 \u8054\u7cfb\u6211\u4eec</p>"},{"location":"api/developer_tools/","title":"\u5f00\u53d1\u8005\u5de5\u5177","text":""},{"location":"api/developer_tools/#ftpftps","title":"FTP/FTPS","text":"<p>\u901a\u8fc7 FTP/FTPS \u5ba2\u6237\u7aef\uff0c\u53ef\u4ee5\u8fde\u63a5\u4e91\u5b58\u50a8\u7684 FTP/FTPS \u670d\u52a1\u5668\uff0c\u5b9e\u73b0\u5bf9\u4e91\u5b58\u50a8\u7684\u7ba1\u7406\u3002\u63a8\u8350\u4f7f\u7528 FileZilla \u5ba2\u6237\u7aef \u3002</p> <p>FTP/FTPS \u767b\u5f55\u65b9\u5f0f</p> <p>\u5730\u5740\uff08\u4e3b\u673a)\uff1a</p> <ul> <li>\u667a\u80fd\u9009\u8def\uff08\u63a8\u8350\uff09\uff1av0.ftp.upyun.com</li> <li>\u7535\u4fe1\u7ebf\u8def\uff1av1.ftp.upyun.com</li> <li>\u8054\u901a\u7ebf\u8def\uff1av2.ftp.upyun.com</li> <li>\u79fb\u52a8\u7ebf\u8def\uff1av3.ftp.upyun.com</li> </ul> <p>\u52a0\u5bc6\uff1a\u9009\u62e9 <code>\u4e0d\u52a0\u5bc6</code> \u4f7f\u7528 FTP\uff0c\u9009\u62e9 <code>\u663e\u5f0f\u7684 FTP over TLS</code> \u6216 <code>TLS/SSL \u663e\u5f0f\u52a0\u5bc6</code> \u4f7f\u7528 FTPS</p> <p>\u7528\u6237\u540d\uff1a<code>\u64cd\u4f5c\u5458\u540d/\u670d\u52a1\u540d</code>\uff0c\u5982 <code>operator/mybucket</code></p> <p>\u5bc6\u7801\uff1a\u64cd\u4f5c\u5458\u7684\u5bc6\u7801</p> <p>\u7aef\u53e3\uff1a21</p> <p>\u672c\u6587\u6f14\u793a Windows \u4e0b\u7684 FTPS \u4f7f\u7528\u3002</p>"},{"location":"api/developer_tools/#_1","title":"\u767b\u5f55\u670d\u52a1","text":"<p>\u6253\u5f00 FileZilla\uff0c\u6309 FTP/FTPS \u4f7f\u7528\u8bf4\u660e\u8fdb\u884c\u767b\u5f55\u3002\u5982\u4e0b\u56fe\uff1a</p> <p></p>"},{"location":"api/developer_tools/#_2","title":"\u4e0a\u4f20\u6587\u4ef6","text":"<p>\u9009\u5b9a\u9700\u8981\u4e0a\u4f20\u7684\u6587\u4ef6\uff0c\u62d6\u52a8\u5230\u4e91\u5b58\u50a8\u670d\u52a1\u533a\u57df\u3002\u62d6\u52a8\u524d\uff0c\u8bf7\u6ce8\u610f\u4e91\u5b58\u50a8\u76ee\u5f55\u662f\u5426\u6b63\u786e\u3002</p> <p></p>"},{"location":"api/developer_tools/#_3","title":"\u4e0b\u8f7d\u6587\u4ef6","text":"<p>\u9009\u5b9a\u9700\u8981\u4e0b\u8f7d\u7684\u6587\u4ef6\uff0c\u62d6\u52a8\u5230\u672c\u5730\u76ee\u5f55\u6587\u4ef6\u533a\u57df\u3002\u62d6\u52a8\u524d\uff0c\u8bf7\u6ce8\u610f\u4e91\u5b58\u50a8\u76ee\u5f55\u662f\u5426\u6b63\u786e\u3002</p> <p></p>"},{"location":"api/developer_tools/#_4","title":"\u5220\u9664\u6587\u4ef6","text":"<p>\u9009\u5b9a\u9700\u8981\u5220\u9664\u7684\u6587\u4ef6\u3001\u76ee\u5f55\uff0c\u70b9\u51fb\u53f3\u952e\uff0c\u8fdb\u884c\u5220\u9664\u3002</p> <p></p>"},{"location":"api/developer_tools/#_5","title":"\u9000\u51fa\u670d\u52a1","text":"<p>\u5173\u95ed\u8fde\u63a5\u6216\u9000\u51fa FileZilla \u5373\u53ef\u3002</p>"},{"location":"api/developer_tools/#upx","title":"UPX \uff08\u547d\u4ee4\u884c\u5de5\u5177\uff09","text":"<p>UPX \u662f\u53c8\u62cd\u4e91\u4e13\u4e3a\u5f00\u53d1\u8005\u8bbe\u8ba1\uff0c\u57fa\u4e8e\u547d\u4ee4\u884c\u7684\u4e91\u5b58\u50a8\u7ba1\u7406\u5de5\u5177\u3002\u901a\u8fc7\u5b83\uff0c\u53ef\u4ee5\u5b9e\u73b0\u6587\u4ef6\u4e0a\u4e0b\u4f20\u3001\u589e\u91cf\u6587\u4ef6\u540c\u6b65\u3001\u76ee\u5f55\u521b\u5efa\u5220\u9664\u3001\u6587\u4ef6\u5220\u9664\uff08\u5305\u62ec\u5f02\u6b65\u6587\u4ef6\u6279\u91cf\u5220\u9664\uff09\u3002</p> <p>\u5728\u4f7f\u7528 UPX \u4e4b\u524d\uff0c\u9700\u8981\u4e0b\u8f7d\u5b83\uff0c\u70b9\u6b64\u8bbf\u95ee\u5230 Github \u4e0b\u8f7d UPX\u3002\u4e0b\u8f7d\u5b83\u540e\uff0c\u901a\u8fc7\u7ec8\u7aef\u4f7f\u7528\u3002</p> <p>\u672c\u6587\u6f14\u793a Windows DOS \u7a97\u53e3\u4e0b UPX \u4f7f\u7528\uff0cLinux \u7684\u4f7f\u7528\u8bf7\u89c2\u770b\u89c6\u9891\u3002 </p>"},{"location":"api/developer_tools/#_6","title":"\u8bed\u6cd5","text":"<pre><code>upx [global options] command [command options]\n</code></pre> <p>\u9009\u9879</p> command \u542b\u4e49 login \u767b\u5f55\u53c8\u62cd\u4e91\u5b58\u50a8 pwd \u663e\u793a\u5f53\u524d\u6240\u5904\u76ee\u5f55 ls \u663e\u793a\u5f53\u524d\u76ee\u5f55\u4e2d\u7684\u6587\u4ef6\u548c\u76ee\u5f55\u4fe1\u606f\uff0c\u52a0 <code>\u2013d</code>\uff0c \u4ec5\u663e\u793a\u76ee\u5f55\u4fe1\u606f cd \u6539\u53d8\u5de5\u4f5c\u76ee\u5f55\uff08\u8fdb\u5165\u4e00\u4e2a\u76ee\u5f55\uff09\uff0c\u52a0 <code>..</code>\uff0c\u56de\u5230\u4e0a\u4e00\u7ea7\u76ee\u5f55 get \u4e0b\u8f7d\u4e00\u4e2a\u6587\u4ef6\u6216\u76ee\u5f55 put \u4e0a\u4f20\u4e00\u4e2a\u6587\u4ef6\u6216\u76ee\u5f55 sync \u589e\u91cf\u6587\u4ef6\u540c\u6b65\uff0c\u7c7b\u4f3c rsync mkdir \u521b\u5efa\u76ee\u5f55 rm \u5220\u9664\u6587\u4ef6\uff0c\u652f\u6301\u901a\u914d\u7b26 <code>*</code>\uff1b\u52a0 <code>\u2013d</code>\uff0c\u5220\u9664\u76ee\u5f55\uff1b\u52a0 <code>\u2013a</code>\uff0c\u5220\u9664\u76ee\u5f55\u548c\u6587\u4ef6\uff1b\u52a0 <code>\u2013async</code>\uff0c\u5f02\u6b65\u65b9\u5f0f\u5220\u9664\u6587\u4ef6\u6216\u76ee\u5f55 info \u663e\u793a\u767b\u5f55\u7684\u670d\u52a1\u540d\u3001\u64cd\u4f5c\u5458\u4fe1\u606f\u548c\u5f53\u524d\u6240\u5728\u76ee\u5f55 logout \u9000\u51fa\u53c8\u62cd\u4e91\u5b58\u50a8 global options \u542b\u4e49 -h \u663e\u793a\u5e2e\u52a9\u4fe1\u606f -v \u663e\u793a UPX \u7248\u672c\u4fe1\u606f\u6216\u5904\u7406\u8fc7\u7a0b\u4fe1\u606f"},{"location":"api/developer_tools/#_7","title":"\u8bbf\u95ee\u670d\u52a1","text":"<pre><code>// \u767b\u5f55\u65b9\u5f0f\u4e00\nupx-windows-amd64-v0.1.4.exe login\n// \u4f9d\u6b21\u8f93\u5165\u670d\u52a1\u540d\u3001\u64cd\u4f5c\u5458\u3001\u64cd\u4f5c\u5458\u7684\u5bc6\u7801\nServiceName: &lt;bucket&gt;\nOperator: &lt;operator&gt;\nPassword: &lt;operator_password&gt;\n\n// \u767b\u5f55\u65b9\u5f0f\u4e8c\nupx-windows-amd64-v0.1.4.exe login &lt;bucket&gt; &lt;operator&gt; &lt;operator_password&gt;\n</code></pre> <pre><code>// \u767b\u5f55\u65b9\u5f0f\u4e09\uff0c\u7528\u4e8e\u591a\u64cd\u4f5c\u5458\u3001\u591a\u670d\u52a1\u767b\u5f55\nupx-windows-amd64-v0.1.4.exe login &lt;bucket&gt; &lt;operator&gt; &lt;operator_password&gt;\n// \u751f\u6210\u57fa\u4e8e\u670d\u52a1\u540d\u3001\u64cd\u4f5c\u5458\u3001\u64cd\u4f5c\u5458\u5bc6\u7801\u7684\u79d8\u94a5\nupx-windows-amd64-v0.1.4.exe auth &lt;bucket&gt; &lt;operator&gt; &lt;operator_password&gt;\n// \u6267\u884c\u64cd\u4f5c\u65f6\uff0c\u52a0\u4e0a --auth &lt;key&gt;\uff0c\u64cd\u4f5c\u57fa\u4e8e\u79d8\u94a5\u7684\u8eab\u4efd\u4fe1\u606f\u8fdb\u884c\nupx-windows-amd64-v0.1.4.exe info --auth &lt;key&gt;\n</code></pre>"},{"location":"api/developer_tools/#_8","title":"\u4e0a\u4f20\u6587\u4ef6","text":"<pre><code>// \u4e0a\u4f20\u6587\u4ef6\nupx-windows-amd64-v0.1.4.exe put &lt;\u672c\u5730\u8def\u5f84&gt; &lt;\u4e91\u5b58\u50a8\u8def\u5f84&gt;\n// \u83b7\u53d6\u670d\u52a1\u5f53\u524d\u76ee\u5f55\u4e0b\u7684\u6587\u4ef6\uff08\u542b\u76ee\u5f55\uff09\u5217\u8868\nupx-windows-amd64-v0.1.4.exe ls\n</code></pre>"},{"location":"api/developer_tools/#_9","title":"\u4e0b\u8f7d\u6587\u4ef6","text":"<pre><code>// \u4e0b\u8f7d\u6587\u4ef6\nupx-windows-amd64-v0.1.4.exe get &lt;\u4e91\u5b58\u50a8\u8def\u5f84&gt; &lt;\u672c\u5730\u8def\u5f84&gt;\n</code></pre>"},{"location":"api/developer_tools/#_10","title":"\u589e\u91cf\u6587\u4ef6\u540c\u6b65","text":"<pre><code>// \u589e\u91cf\u6587\u4ef6\u540c\u6b65,\u52a0 -v,\u663e\u793a\u589e\u91cf\u6587\u4ef6\u540c\u6b65\u8fc7\u7a0b\u4fe1\u606f\nupx-windows-amd64-v0.1.4.exe sync &lt;\u672c\u5730\u76ee\u5f55&gt; &lt;\u4e91\u5b58\u50a8\u76ee\u5f55&gt; -v\n</code></pre>"},{"location":"api/developer_tools/#_11","title":"\u521b\u5efa\u76ee\u5f55","text":"<pre><code>// \u663e\u793a\u5f53\u524d\u6240\u5728\u76ee\u5f55\nupx-windows-amd64-v0.1.4.exe pwd\n// \u5728\u5f53\u524d\u76ee\u5f55\u4e0b\uff0c\u521b\u5efa\u76ee\u5f55\nupx-windows-amd64-v0.1.4.exe mkdir &lt;\u76ee\u5f55\u540d\u79f0&gt;\n</code></pre>"},{"location":"api/developer_tools/#_12","title":"\u5220\u9664\u6587\u4ef6\u3001\u76ee\u5f55","text":"<p>\u6587\u4ef6\u6216\u76ee\u5f55\u5220\u9664\u540e\uff0c\u4e0d\u53ef\u6062\u590d\uff0c\u8bf7\u614e\u91cd\u64cd\u4f5c\uff01</p> <p></p> <pre><code>// \u5220\u9664\u6587\u4ef6\nupx-windows-amd64-v0.1.4.exe rm &lt;\u6587\u4ef6\u540d&gt;\n// \u52a0 -d\uff0c\u5220\u9664\u76ee\u5f55\nupx-windows-amd64-v0.1.4.exe rm -d &lt;\u76ee\u5f55\u540d&gt;\n// \u5f02\u6b65\u6587\u4ef6\u5220\u9664\uff0c\u901a\u914d\u7b26\u5339\u914d\uff0c\u6279\u91cf\u5220\u9664\nupx-windows-amd64-v0.1.4.exe rm --async /*\n</code></pre>"},{"location":"api/developer_tools/#_13","title":"\u9000\u51fa\u670d\u52a1","text":"<pre><code>// \u9000\u51fa\u670d\u52a1\nupx-windows-amd64-v0.1.4.exe logout\n</code></pre>"},{"location":"api/developer_tools/#curl","title":"cURL\uff08\u547d\u4ee4\u884c\u5de5\u5177\uff09","text":"<p>cURL \u662f\u4e00\u4e2a\u5229\u7528 URL \u8bed\u6cd5\u5728\u547d\u4ee4\u884c\u4e0b\u5de5\u4f5c\u7684\u6587\u4ef6\u4f20\u8f93\u5de5\u5177\u3002\u501f\u52a9 cURL\uff0c\u4f7f\u7528 REST API \u3001\u57fa\u672c\u8ba4\u8bc1\u8fdb\u884c\u5b58\u50a8\u7ba1\u7406\uff0c\u5305\u62ec\u5217\u76ee\u5f55\u3001\u6587\u4ef6\u4e0a\u4e0b\u4f20\u3001\u76ee\u5f55\u521b\u5efa\u5220\u9664\u3001\u6587\u4ef6\u5220\u9664\u7b49\u3002</p> <p>\u5728\u4f7f\u7528 cURL \u4e4b\u524d\uff0c\u8bf7\u786e\u4fdd\u60a8\u7684\u7ec8\u7aef\u652f\u6301\u5b83\u3002</p> <p>\u672c\u6587\u6f14\u793a Windows DOS \u7a97\u53e3\u4e0b cURL \u4f7f\u7528\uff0cLinux \u7684\u4f7f\u7528\u8bf7\u89c2\u770b\u89c6\u9891\u3002 </p>"},{"location":"api/developer_tools/#_14","title":"\u8bbf\u95ee\u670d\u52a1","text":"<pre><code>// \u8bbf\u95ee\u670d\u52a1\uff0c\u5217\u51fa\u670d\u52a1\u6839\u76ee\u5f55\u4e0b\u6587\u4ef6\u4fe1\u606f\uff0c\u5982\u679c\u6ca1\u6709\u6587\u4ef6\u4fe1\u606f\uff0c\u5219\u4e3a\u7a7a\ncurl http://v0.api.upyun.com/&lt;bucket&gt;/ -u &lt;operator&gt;:&lt;password&gt; -v\n</code></pre>"},{"location":"api/developer_tools/#_15","title":"\u4e0a\u4f20\u6587\u4ef6","text":"<pre><code>// \u4e0a\u4f20\u6587\u4ef6\ncurl -T &lt;\u4e0a\u4f20\u6587\u4ef6\u8def\u5f84&gt; http://v0.api.upyun.com/&lt;bucket&gt;/&lt;\u6587\u4ef6\u8def\u5f84&gt; -u &lt;operator&gt;:&lt;password&gt; -v\n</code></pre>"},{"location":"api/developer_tools/#_16","title":"\u4e0b\u8f7d\u6587\u4ef6","text":"<pre><code>// \u4e0b\u8f7d\u6587\u4ef6\ncurl http://v0.api.upyun.com/&lt;bucket&gt;/&lt;\u6587\u4ef6&gt; -o &lt;\u6587\u4ef6\u672c\u5730\u4fdd\u5b58\u8def\u5f84&gt; -u &lt;operator&gt;:&lt;password&gt; -v\n</code></pre>"},{"location":"api/developer_tools/#_17","title":"\u83b7\u53d6\u6587\u4ef6\u4fe1\u606f","text":"<pre><code>//\u83b7\u53d6\u6587\u4ef6/\u76ee\u5f55\u4fe1\u606f\ncurl http://v0.api.upyun.com/&lt;bucket&gt;/&lt;\u6587\u4ef6/\u76ee\u5f55\u540d&gt; -X HEAD -u &lt;operator&gt;:&lt;password&gt; -v\n// \u8fd4\u56de\u4fe1\u606f\nx-upyun-file-type: &lt;file \u8868\u793a\u6587\u4ef6\uff0cfolder \u8868\u793a\u6587\u4ef6\u5939&gt; \nx-upyun-file-size: &lt;\u6587\u4ef6/\u6587\u4ef6\u5939\u5927\u5c0f&gt;\nx-upyun-file-date: &lt;\u521b\u5efa\u65f6\u95f4\uff0cUnix \u65f6\u95f4\u6233&gt;\n</code></pre>"},{"location":"api/developer_tools/#_18","title":"\u5220\u9664\u6587\u4ef6","text":"<pre><code>//\u5220\u9664\u6587\u4ef6/\u76ee\u5f55\uff0c\u76ee\u5f55\u5fc5\u987b\u4e3a\u7a7a\u76ee\u5f55\uff0c\u624d\u80fd\u5220\u9664\ncurl http://v0.api.upyun.com/&lt;bucket&gt;/&lt;\u6587\u4ef6/\u76ee\u5f55\u540d&gt; -X DELETE -u &lt;operator&gt;:&lt;password&gt; -v\n</code></pre> <p>\u5982\u6709\u7591\u95ee\u8bf7 \u8054\u7cfb\u6211\u4eec</p>"},{"location":"api/errno/","title":"API \u9519\u8bef\u7801\u8868","text":""},{"location":"api/errno/#_1","title":"\u6982\u8ff0","text":"<p>API \u8bf7\u6c42\u5931\u8d25\u65f6\uff0c\u670d\u52a1\u7aef\u4f1a\u8fd4\u56de\u4e00\u4e2a JSON \u683c\u5f0f\u7684\u54cd\u5e94\u4f53\u3002\u5b83\u53ef\u4ee5\u7528\u4e8e\u5b9a\u4f4d\u5177\u4f53\u9519\u8bef\u539f\u56e0\u3002\u5982\uff1a</p> <pre><code>{\"msg\": \"file or directory not found\", \"code\": 40400001, \"id\": \"11e4a729d24943409933a5e8314cd32e\"}\n</code></pre> <p>** \u5b57\u6bb5\u8bf4\u660e **</p> <ul> <li><code>code</code>\uff1a\u9519\u8bef\u7801\u3002\u5177\u4f53\u542b\u4e49\u89c1 API \u9519\u8bef\u7801\u8868\u3002</li> <li><code>msg</code>\uff1a\u9519\u8bef\u7684\u7b80\u5355\u63cf\u8ff0\u3002</li> <li><code>id</code>\uff1a\u53c8\u62cd\u4e91\u4e3a\u8be5\u8bf7\u6c42\u751f\u6210\u7684\u552f\u4e00 ID\u3002</li> </ul>"},{"location":"api/errno/#api","title":"API \u9519\u8bef\u7801\u8868","text":"<p>\u5982\u9047 5xx \u9519\u8bef\uff0c\u8bf7\u53cd\u9988\u7ed9\u552e\u540e\u6216\u60a8\u7684\u5546\u52a1\u7ecf\u7406\u3002</p> HTTP \u72b6\u6001\u7801 \u8fd4\u56de\u4ee3\u7801 \u542b\u4e49 400 40001000 wrong uri 400 40001001 wrong content-md5 400 40001002 wrong content-length 400 40001003 meta invalid 400 40001004 folder args invalid 400 40001005 iter args invalid 400 40001006 type invalid 400 40001007 block invalid 400 40001008 list type not support 400 40001009 invalid update time 400 40001011 invalid append position 400 40001021 invalid utf8 key 400 40001022 wrong multipart action 400 40001023 wrong multipart uuid 400 40001024 wrong multipart type 400 40001025 wrong multipart length 400 40001027 wrong multipart size 400 40001030 wrong multipart part id 400 40001031 duplicate multipart part 400 40001032 oversize multipart part 400 40001033 overflow multipart part 400 40001034 unexpect multipart length 400 40001035 notfound multipart uuid 400 40001036 completed multipart 400 40001037 incomplete multipart parts 400 40001038 invalid append file 400 40001041 request wrong type 400 40001042 request wrong timestamp 400 40001043 request wrong column 400 40001044 request wrong list 400 40001045 not found 400 40001046 wrong length 400 40001047 wrong check column 400 40001051 encode data error 400 40001052 decode data error 400 40001055 put and check error 400 40001161 wrong range 400 40010001 not enough arguments 400 40010002 url not allowed 400 40010003 tasks number error 400 40010029 only 1~10 tasks supported in get 400 40010033 decode tasks error 400 40011001 invalid x-gmkerl-type 400 40011002 invalid x-gmkerl-value 400 40011003 invalid x-gmkerl-unsharp 400 40011004 invalid x-gmkerl-quality 400 40011005 invalid x-gmkerl-exif-switch 400 40011006 invalid x-gmkerl-gifto 400 40011007 invalid x-gmkerl-webp 400 40011008 invalid x-gmkerl-format 400 40011009 invalid x-gmkerl-crop 400 40011010 invalid x-gmkerl-rotate 400 40011011 invalid x-gmkerl-gaussblur 400 40011012 invalid x-gmkerl-compress 400 40011013 invalid x-gmkerl-progressive 400 40011014 invalid x-gmkerl-noicc 400 40011015 invalid x-gmkerl-watermark-switch 400 40011016 invalid x-gmkerl-watermark-align 400 40011017 invalid x-gmkerl-watermark-margin 400 40011018 invalid x-gmkerl-watermark-opacity 400 40011019 invalid x-gmkerl-watermark-animate 400 40011020 invalid x-gmkerl-watermark-font 400 40011021 invalid x-gmkerl-watermark-text 400 40011022 invalid x-gmkerl-watermark-color 400 40011023 invalid x-gmkerl-watermark-border 400 40011024 invalid x-gmkerl-watermark-size 400 40011025 invalid x-gmkerl-gradient-orientation 400 40011026 invalid x-gmkerl-gradient-pos 400 40011027 invalid x-gmkerl-gradient-startcolor 400 40011028 invalid x-gmkerl-gradient-stopcolor 400 40011029 invalid x-gmkerl-extract-func 400 40011030 invalid x-gmkerl-extract-color-count 400 40011031 invalid x-gmkerl-extract-offset 400 40011032 invalid x-gmkerl-extract-palette 400 40011033 invalid x-gmkerl-canvas 400 40011034 invalid x-gmkerl-canvas-color 400 40011035 invalid param in thumb 400 40011050 invalid app name 400 40011051 invalid x-upyun-part-id 400 40011052 invalid x-upyun-multi-length 400 40011053 invalid x-upyun-multi-type 400 40011054 invalid x-upyun-part-size 400 40011055 invalid invalid multipart stage 400 40011056 invalid invalid x-upyun-multi-uuid 400 40011057 invalid UTF8 Key 400 40011058 invalid x-upyun-multi-uuid not found 400 40011059 file already upload 400 40011060 file md5 not match 400 40011061 part id error 400 40011062 part already complete 400 40011091 invalid app name 400 40011092 invalid file ttl 400 40000000 storage bad request 400 40000001 need save-key 400 40000002 need body 400 40000003 need bucket name 400 40000004 need expiration 400 40000005 need file 400 40000006 content md5 not match 400 40000007 need policy 400 40000008 need signature 400 40000009 decode policy error 400 40000010 data too long for ext-param 400 40000011 chunked request bodies not supported yet 400 40000012 write file to fs error 400 40000013 need content-md5 but no body provided 400 40000014 need content-md5 but no content provided 400 40000015 missing required arguments 400 40000016 missing file_hash argument 400 40000017 missing file_blocks argument 400 40000018 too many file blocks 400 40000019 missing file_size argument 400 40000020 missing save_token argument 400 40000021 missing block_index argument 400 40000022 missing block_hash argument 400 40000023 block already exists 400 40000024 block not finished 400 40000025 file size not match 400 40000026 block index out of range 400 40000027 block size too small, at least 100KB 400 40000028 block size too large, at most 5MB 400 40000029 save-key encoding should be utf8 400 40000030 path encoding should be utf8 400 40000031 filename should be utf8 400 40000032 ffmpeg args error 400 40000033 failed to read firstchunk 400 40000034 client error 400 40000035 need purge body 400 40000036 uri bucket must be same as param bucket 400 40000037 unknown service 400 40000038 no boundary defined in Content-Type 400 40000039 Content-Length is equal to 0 400 40000040 source bucket not equal target bucket 400 40000041 source key equals to target key 400 40000042 source key wrong 400 40000043 wrong metadata directive 400 40000044 need metadata 401 40100001 need date header 401 40100002 date offset error 401 40100003 unknown realm in authorization header 401 40100004 need authorization header 401 40100005 signature error 401 40100006 user not exists 401 40100007 user blocked 401 40100008 user blocked in this bucket 401 40100009 user password error 401 40100010 account not exist 401 40100011 account blocked 401 40100012 bucket not exist 401 40100013 bucket blocked 401 40100014 bucket removed 401 40100015 bucket read only 401 40100016 invalid date value in header 401 40100017 user need permission 401 40100018 account inactivate 401 40100019 account forbidden 401 40100020 account reject 401 40100021 overdue account 401 40100022 uri prefix error 401 40100023 uri postfix error 401 40100024 expire error 401 40100025 auth error 403 40300001 file name contains invalid chars (\\r\\n\\t) 403 40300002 file path too long 403 40300003 file name too long 403 40300004 bucket is full 403 40300005 directory not empty 403 40300006 authorization has expired 403 40300007 content md5 not match 403 40300008 file too small 403 40300009 file too large 403 40300010 file type error 403 40300011 has no permission to delete 403 40300012 need content-type 403 40300013 form api disabled 403 40300014 order must be asc or desc 403 40300015 path is not a file, maybe a directory 403 40300016 content-secret only accept [a-zA-Z0-9] 403 40300017 no thumb setting found for bucket 403 40300018 not an image 403 40300019 image width too small or too big 403 40300020 image height too small or too big 403 40300021 image limit exceeded 403 40300022 invalid image-width-range 403 40300023 invalid image-height-range 403 40300024 exceed max size 403 40300025 wrong content-type header 403 40300026 need content-length header 403 40300027 request body too big 403 40300028 request has expired 403 40300029 purge too much items 403 40300030 wrong content-length header 403 40300031 only support that list flat files by bucket's root folder 403 40300032 start time format error 403 40300033 end time format error 403 40300034 start time bigger than end time 403 40300035 content-length of policy format error 403 40310007 Binded domain and source domain can't be the same 404 40400001 file or directory not found 404 40400002 base64 decoded err 404 40401004 Not found, mark as deleted 404 40401005 Not found, block deleted 404 40401006 type invalid 406 40600001 dir not acceptable 406 40600002 folder already exists 406 40600003 single-copy bucket not support form api 406 40600004 single-copy bucket not support breakpoint resume 408 40800001 read client request timeout 412 41200001 precondition failed 413 41300001 content length too large 415 41500001 media type error, need content-type 429 42900001 too many requests 429 42900002 too many requests of the same uri 429 42900003 too many requests of the same bucket 429 42900004 request banned 429 42900005 bandwidth limit 429 42900006 too many auth check 503 50300000 unknown error 503 50300001 write hub failed 503 50300002 decode error 503 50300003 ffmpeg error 503 50300006 get hub error 503 50300007 capture file from fs error 503 50300008 delete hub error 503 50300009 get body temp file error 503 50300010 read body temp file error 503 50300011 capture file from ffmpeg error 503 50300012 service error in thumb 503 50300013 put file capture timeout 503 50300014 get client socket error 503 50300015 decode image info error 503 50300016 get image info error 503 50300017 failed to new md5 503 50300018 failed to new form 503 50300020 put file capture error 503 50300021 put capture broken pipe 503 50300022 new resource error 503 50300023 connect to db error 503 50300024 get master failed 503 50300025 write info error 503 50300026 get data error 503 50300027 put file to fs error 503 50300028 get file from fs error 503 50300029 unknow error 503 50300030 upstream closed connection 503 50300031 read upstream timeout 503 50300032 wrong data 503 50300033 new resource error 503 50300034 get info errors 503 50300035 decode hub body error 503 50300036 send to message queue error 503 50300038 failed to new http 503 50300039 failed to get client body reader 503 50300040 wrong config 503 50300041 connect to database error 503 50300042 delete path error 503 50300043 put task to message queue error 503 50300044 avalon list dir error <p>\u5982\u6709\u7591\u95ee\u8bf7 \u8054\u7cfb\u6211\u4eec</p>"},{"location":"api/form_api/","title":"FORM API","text":"<p>\u901a\u8fc7\u7f51\u9875 FORM\uff0c\u4f7f\u7528 HTTP/HTTPS \u76f4\u63a5\u628a\u6587\u4ef6\u4e0a\u4f20\u5230\u53c8\u62cd\u4e91\u5b58\u50a8\u3002\u7279\u522b\u5730\uff0c\u6587\u4e2d\u8bf7\u6c42\u53c2\u6570\u653e\u5728 HTTP/HTTPS body \u4e2d\u4f20\u9012\uff0c\u8bf7\u786e\u4fdd\u60a8\u4e0a\u4f20\u8868\u5355\u683c\u5f0f\u7b26\u5408 RFC 1867 \u534f\u8bae\u89c4\u8303\u3002</p>"},{"location":"api/form_api/#_1","title":"\u8bf7\u6c42\u65b9\u6cd5","text":"<pre><code>curl http://v0.api.upyun.com/&lt;bucket&gt; \\\n    -F authorization=\"UPYUN &lt;Operator&gt;:&lt;Signature&gt;\" \\\n    -F file=@&lt;filename&gt; \\\n    -F policy=&lt;policy&gt; \\\n    # \u5176\u4ed6\u53c2\u6570...\n</code></pre> <p>\u57fa\u672c\u57df\u540d</p> <ul> <li>\u667a\u80fd\u9009\u8def\uff08\u63a8\u8350\uff09\uff1a<code>v0.api.upyun.com</code></li> <li>\u7535\u4fe1\u7ebf\u8def\uff1a<code>v1.api.upyun.com</code></li> <li>\u8054\u901a\uff08\u7f51\u901a\uff09\u7ebf\u8def\uff1a<code>v2.api.upyun.com</code></li> <li>\u79fb\u52a8\uff08\u94c1\u901a\uff09\u7ebf\u8def\uff1a<code>v3.api.upyun.com</code></li> </ul> <p>\u8ba4\u8bc1\u9274\u6743</p> <p>\u8be6\u89c1\u7b7e\u540d\u8ba4\u8bc1\u3002</p> <p>\u63a8\u8350\u4e0a\u4f20\u6d41\u7a0b</p> <pre><code>            +-----------------+ +-----------------+ +-----------------+\n            | Client/Browser  | |    FORM API     | | Customer Server |\n            +-----------------+ +-----------------+ +-----------------+\n                    |                   |                   |\n                    |                   |                   |\n                   +++        Request authorization        +++\n                   |-|====================================&gt;|-|\n                   |-|                  |                  |-|\n                   |-|                  |                  |-|\n                   |-|        Response authorization       |-|\n                   |-|&lt;====================================|-|\n                   +++                  |                  +++\n                    |                   |                   |\n                    |                   |                   |\n                    |                   |                   |\n                   +++     Upload      +++                 +++\n                   |-|================&gt;|-|     Notify      |-|\n                   |-|                 |-|----------------&gt;|-|\n                   |-|                 |-|                 |-|\n                   |-|     Response    |-|                 |-|\n                   |-|&lt;================|-|                 |-|\n                   +++                 +++                 +++\n                    |                   |                   |\n                    |                   |                   |                              \n</code></pre> <ol> <li>\u5ba2\u6237\u7aef\u8bf7\u6c42\u5ba2\u6237\u670d\u52a1\u5668\uff0c\u751f\u6210\u3001\u83b7\u53d6\u4e0a\u4f20\u6240\u9700\u7684 policy\u3001authorization\uff1b</li> <li>\u5ba2\u6237\u7aef\u901a\u8fc7 FORM API \u4e0a\u4f20\u6587\u4ef6\uff0c\u8fd4\u56de\u4e0a\u4f20\u7ed3\u679c\u4fe1\u606f\uff0c\uff08\u53ef\u9009\uff09\u56de\u8c03\u901a\u77e5\u5ba2\u6237\u670d\u52a1\u5668\uff1b</li> <li>\u5ba2\u6237\u7aef\u5904\u7406\u5176\u4ed6\u4e1a\u52a1\u6d41\u7a0b\u3002</li> </ol> <p></p>"},{"location":"api/form_api/#_2","title":"\u5c0f\u6587\u4ef6\u4e0a\u4f20","text":"<p>\u6587\u4ef6\u5927\u5c0f\u8d85\u8fc7 100M \u540e\uff0c\u5efa\u8bae\u4f7f\u7528\u5927\u6587\u4ef6\u4e0a\u4f20\uff1b\u79fb\u52a8\u7aef\u6216\u8005\u5f31\u7f51\u73af\u5883\u4e0a\u4f20\uff0c\u63a8\u8350\u4f7f\u7528 REST API \u65ad\u70b9\u7eed\u4f20\u4e0a\u4f20\u3002</p> \u53c2\u6570 \u5fc5\u9009 \u8bf4\u660e bucket \u662f \u6587\u4ef6\u4e0a\u4f20\u5230\u7684\u670d\u52a1 save-key \u662f \u6587\u4ef6\u4fdd\u5b58\u8def\u5f84\uff0c\u53ef\u7528\u5360\u4f4d\u7b26\uff0c\u89c1 \u8def\u5f84\u8bbe\u7f6e expiration \u662f \u8bf7\u6c42\u7684\u8fc7\u671f\u65f6\u95f4\uff0cUNIX UTC \u65f6\u95f4\u6233\uff0c\u5355\u4f4d\u79d2\u3002\u5efa\u8bae\u8bbe\u4e3a 30 \u5206\u949f date \u5426 \u8bf7\u6c42\u65e5\u671f\u65f6\u95f4\uff0cGMT \u683c\u5f0f\u5b57\u7b26\u4e32 (RFC 1123)\uff0c\u5982 <code>Wed, 29 Oct 2014 02:26:58 GMT</code> content-md5 \u5426 \u4e0a\u4f20\u6587\u4ef6\u7684 MD5 \u503c\uff0c\u5982\u679c\u8bf7\u6c42\u4e2d\u6587\u4ef6\u592a\u5927\u8ba1\u7b97 MD5 \u4e0d\u65b9\u4fbf\uff0c\u53ef\u4ee5\u4e3a\u7a7a return-url \u5426 \u540c\u6b65\u901a\u77e5 URL\uff0c\u89c1 \u901a\u77e5\u89c4\u5219 notify-url \u5426 \u5f02\u6b65\u901a\u77e5 URL\uff0c\u89c1 \u901a\u77e5\u89c4\u5219 content-secret \u5426 \u6587\u4ef6\u5bc6\u94a5\uff0c\u7528\u4e8e\u4fdd\u62a4\u6587\u4ef6\uff0c\u9632\u6b62\u6587\u4ef6\u88ab\u76f4\u63a5\u8bbf\u95ee\uff0c\u89c1 Content-Secret \u53c2\u6570\u8bf4\u660e content-type \u5426 \u6587\u4ef6\u7c7b\u578b\uff0c\u9ed8\u8ba4\u4f7f\u7528\u6587\u4ef6\u6269\u5c55\u540d\u4f5c\u4e3a\u6587\u4ef6\u7c7b\u578b allow-file-type \u5426 \u5141\u8bb8\u4e0a\u4f20\u7684\u6587\u4ef6\u6269\u5c55\u540d\uff0c\u4ee5 <code>,</code> \u5206\u9694\u3002\u5982 <code>jpg,jpeg,png</code> content-length-range \u5426 \u6587\u4ef6\u5927\u5c0f\u9650\u5236\uff0c\u683c\u5f0f\uff1a<code>min,max</code>\uff0c\u5355\u4f4d\uff1a\u5b57\u8282  \u5982 <code>102400,1024000</code>\uff0c\u8868\u793a\u5141\u8bb8\u4e0a\u4f20 100Kb\uff5e1Mb \u7684\u6587\u4ef6 image-width-range \u5426 \u56fe\u7247\u5bbd\u5ea6\u9650\u5236\uff0c\u683c\u5f0f\uff1a<code>min,max</code>\uff0c\u5355\u4f4d\uff1a\u50cf\u7d20  \u5982 <code>0,1024</code>\uff0c\u5141\u8bb8\u4e0a\u4f20\u5bbd\u5ea6\u4e3a 0\uff5e1024px \u4e4b\u95f4 image-height-range \u5426 \u56fe\u7247\u9ad8\u5ea6\u9650\u5236\uff0c\u683c\u5f0f\uff1a<code>min,max</code>\uff0c\u5355\u4f4d\uff1a\u50cf\u7d20  \u5982 <code>0,1024</code>\uff0c\u5141\u8bb8\u4e0a\u4f20\u9ad8\u5ea6\u5728 0\uff5e1024px \u4e4b\u95f4 x-gmkerl-thumb \u5426 \u56fe\u7247\u9884\u5904\u7406\uff0c\u89c1 \u4e0a\u4f20\u9884\u5904\u7406\uff08\u540c\u6b65\uff09 x-gmkerl-type \u5426 \u53ef\u9009\u503c\uff1a<code>get_meta</code>\uff0c\u83b7\u53d6\u56fe\u7247\u4fe1\u606f\uff1b<code>get_theme_color</code>\uff0c\u83b7\u53d6\u56fe\u7247\u4e3b\u9898\u8272 apps \u5426 \u5f02\u6b65\u9884\u5904\u7406\uff0c\u89c1 \u5f02\u6b65\u9884\u5904\u7406 b64encoded \u5426 \u5bf9\u901a\u8fc7 Base64 \u7f16\u7801\u4e0a\u4f20\u7684\u6587\u4ef6\u8fdb\u884c Base64 \u89e3\u7801\uff0c\u503c\u4e3a <code>on</code> ext-param \u5426 \u989d\u5916\u53c2\u6570\uff0c\u89c1 ext-param x-upyun-meta-ttl \u5426 \u6587\u4ef6\u5143\u4fe1\u606f, \u6307\u5b9a\u6587\u4ef6\u7684\u751f\u5b58\u65f6\u95f4\uff0c \u5355\u4f4d\u5929\uff0c\u6700\u5927\u652f\u6301180\u5929 <p>\u6ce8</p> <ul> <li>\u6bcf\u4e2a\u4e0a\u4f20\u8bf7\u6c42\u53ea\u80fd\u4e0a\u4f20\u4e00\u4e2a\u6587\u4ef6\uff0c\u8bf7\u6c42\u7684\u53c2\u6570\u540d\u548c\u53c2\u6570\u503c \u533a\u5206\u5927\u5c0f\u5199\u3002</li> <li>\u82e5\u5728\u4e0a\u4f20\u975e\u56fe\u7247\u6587\u4ef6\u65f6\u4f7f\u7528 <code>image-width-range</code>\uff0c<code>image-height-range</code>\uff0c\u4f1a\u8fd4\u56de\u300c\u4e0d\u662f\u56fe\u7247\u300d\u7684\u9519\u8bef\u3002</li> <li>\u82e5\u8bf7\u6c42\u4e2d\u5e26\u6709\u9884\u5904\u7406\u53c2\u6570\uff08<code>x-gmkerl-thumb</code>\uff09\uff0c\u56fe\u7247\u5904\u7406\u540e\u518d\u4fdd\u5b58\u3002</li> <li>\u82e5\u8bbe\u7f6e\u4e86 <code>x-gmkerl-type</code> \u53c2\u6570\uff0c\u5219\u56fe\u7247\u4e0a\u4f20\u5b8c\u6210\u540e\u4f1a\u8fd4\u56de\u56fe\u7247\u7684 meta \u4fe1\u606f\u6216\u4e3b\u9898\u8272\u3002</li> </ul>"},{"location":"api/form_api/#_3","title":"\u54cd\u5e94\u4fe1\u606f","text":"<ul> <li>\u4e0a\u4f20\u6210\u529f\uff1a\u8fd4\u56de <code>200</code> \u6216\u8bbf\u95ee\u6307\u5b9a\u7684 URL\uff08\u89c1 \u901a\u77e5\u89c4\u5219\uff09\u3002</li> <li>\u4e0a\u4f20\u5931\u8d25\uff1a\u8fd4\u56de\u76f8\u5e94\u7684\u51fa\u9519\u4fe1\u606f\uff0c\u5177\u4f53\u8bf7\u53c2\u9605\u300cAPI \u9519\u8bef\u7801\u8868\u300d\u3002</li> </ul>"},{"location":"api/form_api/#_4","title":"\u901a\u77e5\u89c4\u5219","text":"<p>return-url \u53c2\u6570\u8bf4\u660e</p> <ul> <li>\u5982\u679c\u6ca1\u6709\u8bbe\u7f6e <code>return-url</code>\uff0c\u6587\u4ef6\u4e0a\u4f20\u5b8c\u6210\u540e\uff0c\u7ed3\u679c\u4fe1\u606f\u5728\u54cd\u5e94\u4f53\u4e2d\u8fd4\u56de\u3002</li> <li>\u5982\u679c\u8bbe\u7f6e\u4e86 <code>return-url</code>\uff0c\u6587\u4ef6\u4e0a\u4f20\u5b8c\u6210\u540e\uff0c\u7ed3\u679c\u4fe1\u606f\u4ee5 Query String \u7684\u5f62\u5f0f\u8ffd\u52a0\u5230 <code>return-url</code> \u6307\u5b9a\u7684 URL \u540e\uff0c\u5e76\u8bbf\u95ee\u3002\u4f8b\u5982\uff0c<code>return-url</code> \u4e3a <code>http://www.yourdomain.com/return/</code>\uff0c\u8bbf\u95ee\u7684 URL \u662f\uff1a</li> </ul> <pre><code>http://yourdomain.com/return/?code=200&amp;message=ok&amp;url=%2F2011%2F12%2Ffd0e30047f81fa95.mp3&amp;time=1332129461\n</code></pre> <ul> <li>\u7ed3\u679c\u4fe1\u606f\u7684\u53c2\u6570\u540d\u53ca\u8bf4\u660e\u5982\u4e0b\uff1a</li> </ul> \u53c2\u6570 \u8bf4\u660e code \u72b6\u6001\u7801\uff0c<code>200</code> \u8868\u793a\u4e0a\u4f20\u6210\u529f message URL encoding \u7684\u63cf\u8ff0\u4fe1\u606f\uff0c<code>ok</code> \u8868\u793a\u4e0a\u4f20\u6210\u529f\uff0c\u5176\u4ed6\u7684\u8868\u793a\u9519\u8bef\u4fe1\u606f url URL encoding \u7684\u6587\u4ef6\u4fdd\u5b58\u8def\u5f84 time UNIX UTC \u65f6\u95f4\u6233\uff0c\u5355\u4f4d\u79d2 sign/no-sign \u7b7e\u540d\uff0c\u8be6\u89c1\u56de\u8c03\u7b7e\u540d\uff08\u65e7\uff09\u3002\u4f7f\u7528\u56de\u8c03\u7b7e\u540d\uff08\u65b0\uff09\u65f6\uff0c\u4e0d\u5b58\u5728 image-width \u56fe\u7247\u7684\u5bbd\u3002\u4e0a\u4f20\u6587\u4ef6\u662f\u56fe\u7247\u65f6\uff0c\u624d\u5b58\u5728 image-height \u56fe\u7247\u7684\u9ad8\u3002\u4e0a\u4f20\u6587\u4ef6\u662f\u56fe\u7247\u65f6\uff0c\u624d\u5b58\u5728 image-type \u56fe\u7247\u7c7b\u578b\u3002\u4e0a\u4f20\u6587\u4ef6\u662f\u56fe\u7247\u65f6\uff0c\u624d\u5b58\u5728 image-frames \u56fe\u7247\u5e27\u6570\u3002\u4e0a\u4f20\u6587\u4ef6\u662f\u56fe\u7247\u65f6\uff0c\u624d\u5b58\u5728 task_ids \u5f02\u6b65\u4efb\u52a1 ID \u96c6\u3002\u8bbe\u7f6e\u4e86 <code>apps</code> \u53c2\u6570\u65f6\uff0c\u624d\u5b58\u5728 <p>notify-url \u53c2\u6570\u8bf4\u660e</p> <ul> <li>\u5982\u679c\u6ca1\u6709\u8bbe\u7f6e <code>notify-url</code>\uff0c\u4e0d\u53d1\u8d77\u5f02\u6b65\u901a\u77e5\u3002</li> <li>\u5982\u679c\u8bbe\u7f6e\u4e86 <code>notify-url</code>\uff0c\u6587\u4ef6\u4e0a\u4f20\u5b8c\u6210\u540e\uff0c\u5411 <code>notify-url</code> \u53d1\u9001 <code>HTTP POST</code> \u8bf7\u6c42\uff0c\u8bf7\u6c42\u4f53\u662f\u56de\u8c03\u4fe1\u606f\u3002\u56de\u8c03\u4fe1\u606f\u662f URL encoding \u7684\u5b57\u7b26\u4e32\uff0c\u5185\u5bb9\u548c <code>return-url</code> \u4e2d\u7684\u7ed3\u679c\u4fe1\u606f\u76f8\u540c\u3002\u56de\u8c03\u901a\u77e5\u7b7e\u540d\uff0c\u89c1\u7b7e\u540d\u8ba4\u8bc1\uff0c\u5b83\u63d0\u4f9b\u7ed9\u5ba2\u6237\u7aef\u7528\u4e8e\u9a8c\u8bc1\u56de\u8c03\u901a\u77e5\u7684\u5408\u6cd5\u6027\u3002</li> </ul> <p></p>"},{"location":"api/form_api/#_5","title":"\u5927\u6587\u4ef6\u4e0a\u4f20","text":"<p>\u5927\u6587\u4ef6\u4e0a\u4f20\u57fa\u4e8e\u6570\u636e\u6d41\u5f0f\u4f20\u8f93\u7684\u539f\u7406\uff0c\u901a\u8fc7\u964d\u4f4e\u6570\u636e\u5728\u8fb9\u7f18\u8282\u70b9\u3001\u4e2d\u8f6c\u8282\u70b9\u7684\u65f6\u95f4\u5f00\u9500\uff0c\u8ba9\u4e0a\u4f20\u901f\u5ea6\u66f4\u5feb\u3002</p> <p>\u76f8\u6bd4\u5c0f\u6587\u4ef6\u4e0a\u4f20\uff0c\u5b83\u6709\u4e24\u70b9\u7ea6\u675f\uff0c\u5177\u4f53\u5982\u4e0b\uff1a</p> <p>1\u3001\u9700\u8981\u5728\u5c0f\u6587\u4ef6\u4e0a\u4f20\u7684\u53c2\u6570\u4e2d\u52a0\u5165 <code>content-length</code> \u53c2\u6570\uff0c\u6307\u5b9a\u6587\u4ef6\u957f\u5ea6\u3002</p> <p>2\u3001\u786e\u4fdd\u4e09\u4e2a\u5b57\u6bb5 <code>authorization</code>\u3001<code>policy</code>\u3001<code>file</code> \u4e2d\uff0c<code>file</code> \u5904\u4e8e\u6700\u540e\u7684\u4f4d\u7f6e\u3002</p> <p>\u4e3e\u4f8b\u8bf4\u660e</p> <pre><code>// policy \u4e2d\u52a0\u5165\u6587\u4ef6\u957f\u5ea6 content-length\n\nPOLICY = {\n    'bucket': 'bucket1',\n    'expiration': 1509200758,\n    'content-length': 10,\n    'save-key': '/img1.txt',\n}\n</code></pre> <pre><code>// file \u5b57\u6bb5\u5904\u4e8e\u6700\u540e\u7684\u4f4d\u7f6e\n\nPOST /bucket1 HTTP/1.1\nHost: v0.api.upyun.com\nContent-Type: multipart/form-data; boundary=xxxxxxx\nContent-Length: 386\n--xxxxxxx.\nContent-Disposition: form-data; name=\"policy\"\neyJjb250ZW50LWxlbmd0aCI6IDEwLCAiYnVja2V0IjogImJ1Y2tldDEiLCAiZXhwaXJhdGlvbiI6IDE1MDkyMDA3NTgsICJzYXZlLWtleSI6ICIvaW1nMS50eHQifQ==\n--xxxxxxx\nContent-Disposition: form-data; name=\"signature\"\n48f7ccda45cc3a5e25f4eb5eb1d6dbba\n--xxxxxxx\nContent-Disposition: form-data; name=\"file\"; filename=abc.txt.\nd63..`PPq.\n--xxxxxxx--\n</code></pre> <p></p>"},{"location":"api/form_api/#_6","title":"\u8def\u5f84\u8bbe\u7f6e","text":"<p><code>save-key</code> \u652f\u6301\u7684\u8bbe\u7f6e\u7c7b\u578b\uff1a</p> \u7c7b\u578b \u683c\u5f0f \u8bf4\u660e \u7edd\u5bf9\u503c String \u6307\u5b9a\u5177\u4f53\u7684\u8def\u5f84\uff0c\u5982: <code>/path/to/file.txt</code> \u65f6\u95f4\u7c7b {year} {mon} {day} {hour} {min} {sec} \u65e5\u671f\u3001\u65f6\u95f4\u76f8\u5173\u5185\u5bb9\uff08UTC \u65f6\u95f4\uff09 md5 \u7c7b {filemd5} \u6587\u4ef6\u7684 md5 \u503c \u968f\u673a\u7c7b {random} {random32} 16 \u4f4d\u6216 32 \u4f4d\u968f\u673a\u5b57\u7b26\u548c\u6570\u5b57 \u6587\u4ef6\u540d {filename} {suffix} {.suffix} \u4e0a\u4f20\u6587\u4ef6\u7684\u6587\u4ef6\u540d\u53ca\u6269\u5c55\u540d <p>\u4e3e\u4f8b\u8bf4\u660e</p> <p>\u4f8b 1\uff1a\u65f6\u95f4\u7c7b + \u968f\u673a\u7c7b</p> <pre><code>\u4e0a\u4f20\u6587\u4ef6\u540d\uff1asample.jpg\nUTC \u65f6\u95f4\uff1a2013-01-01 10:05:20\nsave-key\uff1a/{year}/{mon}/{day}/upload_{random32}{.suffix}\n\u4fdd\u5b58\u8def\u5f84\u4e3a\uff1a/2013/01/01/upload_b92c9cc21ce6a88ea696705c88b57c3f.jpg\n</code></pre> <p>\u4f8b 2\uff1a\u65f6\u95f4\u7c7b + \u6587\u4ef6\u540d</p> <pre><code>\u4e0a\u4f20\u6587\u4ef6\u540d\uff1asample.jpg\nUTC \u65f6\u95f4\uff1a2014-02-02 11:05:20\nsave-key\uff1a/{year}/{mon}/{day}/{hour}_{min}_{sec}_{filename}{.suffix}\n\u4fdd\u5b58\u8def\u5f84\u4e3a\uff1a/2014/02/02/11_05_20_sample.jpg\n</code></pre> <p>\u4e3a\u4e86\u907f\u514d\u8def\u5f84\u91cd\u540d\u5bfc\u81f4\u6587\u4ef6\u88ab\u8986\u76d6\uff0c\u5efa\u8bae\u4f7f\u7528\u590d\u6742\u7684\u4f4e\u91cd\u590d\u6027\u7684\u547d\u540d\u65b9\u5f0f\u3002</p> <p></p>"},{"location":"api/form_api/#_7","title":"\u5f02\u6b65\u9884\u5904\u7406","text":"<p>\u5982\u679c\u8bbe\u7f6e\u4e86 <code>apps</code> \u53c2\u6570\uff0c\u6587\u4ef6\u4e0a\u4f20\u5b8c\u6210\u540e\uff0c\u4f1a\u521b\u5efa\u5f02\u6b65\u5904\u7406\u4efb\u52a1\u3002\u76ee\u524d\uff0c\u5f02\u6b65\u9884\u5904\u7406\u652f\u6301\u5f02\u6b65\u56fe\u7247\u5904\u7406\u3001\u5f02\u6b65\u97f3\u89c6\u9891\u5904\u7406\u548c\u5f02\u6b65\u56fe\u7247\u9274\u522b\u3002</p>"},{"location":"api/form_api/#apps","title":"apps \u53c2\u6570\u7ed3\u6784","text":"<pre><code>apps = [\n    {                                           // \u5f02\u6b65\u56fe\u7247\u5904\u7406\u4efb\u52a1\n        \"name\": \"thumb\",                        // \u5f02\u6b65\u4efb\u52a1\u540d\u79f0\uff0c\u5fc5\u586b\u3002thumb \u8868\u793a\u5f02\u6b65\u56fe\u7247\u5904\u7406\u670d\u52a1\n        \"x-gmkerl-thumb\": \"&lt;\u56fe\u7247\u5904\u7406\u53c2\u6570&gt;\",       // \u5904\u7406\u53c2\u6570\uff0c\u5fc5\u586b\n        \"save_as\": \"&lt;save_as&gt;\",                 // \u7ed3\u679c\u56fe\u7247\u4fdd\u5b58\u8def\u5f84\uff0c\u9009\u586b\n        \"notify_url\": \"&lt;notify_url&gt;\"            // \u56de\u8c03\u5730\u5740\uff0c\u4e0d\u586b\u65f6\u4f7f\u7528\u4e0a\u4f20\u53c2\u6570\u4e2d\u7684  notify_url\n    },\n    ......\n]\n\napps = [\n    {                                               // \u5f02\u6b65\u97f3\u89c6\u9891\u5904\u7406\u4efb\u52a1\n        \"name\": \"naga\",                             // \u5f02\u6b65\u4efb\u52a1\u540d\u79f0\uff0c\u5fc5\u586b\u3002naga \u8868\u793a\u5f02\u6b65\u97f3\u89c6\u9891\u5904\u7406\u670d\u52a1\n        \"type\": \"&lt;type&gt;\",                           // \u89c6\u9891\u8f6c\u7801\uff0c\u5fc5\u586b\n        \"avopts\": \"&lt;avopts&gt;\",                       // \u5904\u7406\u53c2\u6570\uff0c\u5fc5\u586b\n        \"return_info\": true/false,                  // \u662f\u5426\u8fd4\u56de\u5143\u6570\u636e\uff0c\u9009\u586b\n        \"save_as\": \"&lt;save_as&gt;\",                     // \u7ed3\u679c\u97f3\u9891/\u89c6\u9891\u4fdd\u5b58\u8def\u5f84\uff0c\u9009\u586b\n        \"notify_url\": \"&lt;notify_url&gt;\"                // \u56de\u8c03\u5730\u5740\uff0c\u4e0d\u586b\u65f6\u4f7f\u7528\u4e0a\u4f20\u53c2\u6570\u4e2d\u7684 notify_url\n    },\n    ......\n]\n\napps = [\n    {                                               // \u5f02\u6b65\u56fe\u7247\u5ba1\u6838\u4efb\u52a1\n        \"name\": \"imgaudit\",                         // \u5f02\u6b65\u4efb\u52a1\u540d\u79f0\uff0c\u5fc5\u586b\u3002imgaudit \u8868\u793a\u5f02\u6b65\u56fe\u7247\u5ba1\u6838\u670d\u52a1\n        \"notify_url\": \"&lt;notify_url&gt;\"                // \u56de\u8c03\u5730\u5740\uff0c\u4e0d\u586b\u65f6\u4f7f\u7528\u4e0a\u4f20\u53c2\u6570\u4e2d\u7684 notify_url\n    },\n    ......\n]\n\napps = [\n    {                                               // \u5f02\u6b65\u6587\u672c\u5ba1\u6838\u4efb\u52a1\n        \"name\": \"textjudge\",                        // \u5f02\u6b65\u4efb\u52a1\u540d\u79f0\uff0c\u5fc5\u586b\u3002textjudge \u8868\u793a\u5f02\u6b65\u6587\u672c\u5ba1\u6838\u670d\u52a1\n        \"notify_url\": \"&lt;notify_url&gt;\"                // \u56de\u8c03\u5730\u5740\uff0c\u4e0d\u586b\u65f6\u4f7f\u7528\u4e0a\u4f20\u53c2\u6570\u4e2d\u7684 notify_url\n    },\n    ......\n]\n</code></pre> <p>\u6ce8</p> <ul> <li><code>apps</code> \u6309 JSON \u683c\u5f0f\u7ec4\u88c5\u4efb\u52a1\uff0c\u6700\u591a\u53ef\u4ee5\u5305\u542b 10 \u4e2a\u4efb\u52a1\uff0c\u6bcf\u4e2a\u4efb\u52a1\u5fc5\u987b\u6307\u5b9a <code>name</code> \u53c2\u6570\u3002</li> <li>\u539f\u6587\u4ef6\u7684\u4fdd\u5b58\u8def\u5f84\u7531\u4e0a\u4f20\u53c2\u6570\u4e2d\u7684 <code>save-key</code> \u6307\u5b9a\u3002</li> <li>\u5f02\u6b65\u56fe\u7247\u5904\u7406\uff0c\u8be6\u89c1 \u300c\u56fe\u7247\u5904\u7406\u300d &gt; \u300c\u4e0a\u4f20\u9884\u5904\u7406\uff08\u5f02\u6b65\uff09\u300d\uff1b\u5f02\u6b65\u97f3\u89c6\u9891\u5904\u7406\uff0c\u8be6\u89c1\u300c\u97f3\u89c6\u9891\u5904\u7406\u300d &gt; \u300c\u4e0a\u4f20\u9884\u5904\u7406\u300d\uff1b\u5f02\u6b65\u5185\u5bb9\u5ba1\u6838\uff0c\u8be6\u89c1 \u300c\u5185\u5bb9\u5ba1\u6838\u300d &gt; \u300c\u4e0a\u4f20\u9884\u5904\u7406\u300d\u3002</li> </ul>"},{"location":"api/form_api/#_8","title":"\u54cd\u5e94\u4fe1\u606f","text":"<p>\u5f02\u6b65\u5904\u7406\u4efb\u52a1\u521b\u5efa\u6210\u529f\u540e\uff0c\u5728\u4e0a\u4f20\u8fd4\u56de\u4fe1\u606f\u548c\u56de\u8c03\u4fe1\u606f\uff08\u8be6\u89c1\u901a\u77e5\u89c4\u5219\uff09\u4e2d\u4f1a\u5e26\u4e0a <code>task_ids</code> \u5b57\u6bb5\uff0c\u91cc\u9762\u5305\u542b\u6bcf\u4e2a\u4efb\u52a1\u7684 <code>task_id</code>\u3002</p>"},{"location":"api/form_api/#_9","title":"\u56de\u8c03\u901a\u77e5","text":"<p>\u5f02\u6b65\u5904\u7406\u4efb\u52a1\u5b8c\u6210\u540e\uff0c\u5982\u679c\u5b58\u5728 <code>notify_url</code>\uff08\u4efb\u52a1\u4e2d\u4e0d\u5b58\u5728 <code>notify_url</code>\uff0c\u4f7f\u7528\u4e0a\u4f20\u53c2\u6570\u4e2d\u7684 <code>notify_url</code>\uff0c\u5982\u679c\u4e0a\u4f20\u53c2\u6570\u4e2d\u4e5f\u4e0d\u5b58\u5728\uff0c\u4e0d\u56de\u8c03\uff09\uff0c\u4ee5\u56de\u8c03\u7684\u5f62\u5f0f\u53d1\u9001\u5904\u7406\u7ed3\u679c\uff0c\u91cc\u9762\u5305\u542b <code>task_id</code> \u7b49\u4fe1\u606f\uff0c\u5177\u4f53\u8be6\u89c1\u5404\u670d\u52a1\u7684\u56de\u8c03\u901a\u77e5\u3002</p> <p></p>"},{"location":"api/form_api/#ext-param","title":"ext-param","text":"<p>\u5f53\u4f7f\u7528 <code>return-url</code> \u6216 <code>notify-url</code> \u53c2\u6570\u53d1\u9001\u8fd4\u56de\u4fe1\u606f\u6216\u56de\u8c03\u4fe1\u606f\u65f6\uff0c\u7ed3\u679c\u4fe1\u606f\uff08\u8be6\u89c1\u901a\u77e5\u89c4\u5219\uff09\u4ec5\u5305\u542b\u53c8\u62cd\u4e91\u6307\u5b9a\u7684\u5185\u5bb9\uff0c\u65e0\u6cd5\u56de\u4f20\u7528\u6237\u81ea\u5b9a\u4e49\u7684\u5185\u5bb9\u3002\u5982\u679c\u9700\u8981\u56de\u4f20\u81ea\u5b9a\u4e49\u7684\u5185\u5bb9\uff0c\u53ef\u4ee5\u6307\u5b9a <code>ext-param</code> \u53c2\u6570\u3002</p> <ul> <li>\u81ea\u5b9a\u4e49\u7684\u5185\u5bb9\u5fc5\u987b\u662f UTF-8 \u7f16\u7801\uff0c\u4e14\u957f\u5ea6\u4e0d\u80fd\u8d85\u8fc7 255 \u4e2a\u5b57\u8282\u3002</li> <li><code>notify-url</code> \u56de\u8c03\u662f\u5f02\u6b65\u8fdb\u884c\u7684\uff0c\u5982\u679c\u56de\u8c03\u4fe1\u606f\u9700\u8981\u533a\u5206\u81ea\u5b9a\u4e49\u5185\u5bb9\u6765\u81ea\u90a3\u4e2a\u4e0a\u4f20\u8bf7\u6c42\uff0c\u53ef\u4ee5\u5728 <code>ext-param</code> \u53c2\u6570\u4e2d\u6dfb\u52a0\u4e2a clientId_xxx \u6807\u8bc6\u3002</li> </ul>"},{"location":"api/form_api/#_10","title":"\u7b7e\u540d\u8ba4\u8bc1\uff08\u65e7\uff09","text":""},{"location":"api/form_api/#_11","title":"\u8bf7\u6c42\u7b7e\u540d\uff08\u65e7\uff09","text":"<p>\u8bf7\u6c42\u65b9\u6cd5</p> <pre><code>curl http://v0.api.upyun.com/&lt;bucket&gt; \\\n    -F file=@&lt;filename&gt; \\\n    -F policy=&lt;policy&gt; \\\n    -F signature=&lt;signature&gt; \\\n    # \u5176\u4ed6\u53c2\u6570...\n</code></pre> <p>signature \u7b97\u6cd5</p> <p>\u4e3a\u4e86\u4fdd\u8bc1\u670d\u52a1\u7684\u5b89\u5168\u6027\uff0c\u4f7f\u7528\u670d\u52a1\u7684\u8868\u5355 API \u5bc6\u94a5\uff08\u53ef\u767b\u5f55\u53c8\u62cd\u4e91\u63a7\u5236\u53f0\u67e5\u770b\uff09\u5bf9 policy \u8fdb\u884c\u7b7e\u540d\uff0c\u7b7e\u540d\u7684\u7ed3\u679c\u5373\u662f signature\u3002</p> <p>signature \u751f\u6210\u6b65\u9aa4\uff1a</p> <ol> <li>\u751f\u6210 policy \u5b57\u7b26\u4e32\uff08\u89c1 policy \u7b97\u6cd5\uff09\uff1b</li> <li>\u5c06\u7b2c 1 \u6b65\u4e2d\u7684\u5b57\u7b26\u4e32\u4e0e\u8868\u5355 API \u5bc6\u94a5\u5b57\u7b26\u4e32\u7528 <code>&amp;</code> \u62fc\u63a5\uff1b</li> <li>\u5c06\u7b2c 2 \u6b65\u4e2d\u7684\u5b57\u7b26\u4e32\u8ba1\u7b97 md5\uff0c\u6240\u5f97\u5373\u4e3a <code>signature</code>\u3002</li> </ol> <p>\u4f8b\u5982\uff0c\u5047\u8bbe\u670d\u52a1\u7684\u8868\u5355 API \u9a8c\u8bc1\u5bc6\u94a5\u4e3a\uff1a<code>cAnyet74l9hdUag34h2dZu8z7gU=</code></p> <p>\u7b2c\u4e00\u6b65\uff0c\u751f\u6210 policy \u5b57\u7b26\u4e32\uff1a</p> <pre><code>eyJidWNrZXQiOiJkZW1vYnVja2V0IiwiZXhwaXJhdGlvbiI6MTQwOTIwMDc1OCwic2F2ZS1rZXkiOiIvaW1nLmpwZyJ9\n</code></pre> <p>\u7b2c\u4e8c\u6b65\uff0c\u7b2c\u4e00\u6b65\u7684\u5b57\u7b26\u4e32\u4e0e\u8868\u5355 API \u5bc6\u94a5\u5b57\u7b26\u4e32\u7528 <code>&amp;</code> \u62fc\u63a5\uff1a</p> <pre><code>eyJidWNrZXQiOiJkZW1vYnVja2V0IiwiZXhwaXJhdGlvbiI6MTQwOTIwMDc1OCwic2F2ZS1rZXkiOiIvaW1nLmpwZyJ9&amp;cAnyet74l9hdUag34h2dZu8z7gU=\n</code></pre> <p>\u7b2c\u4e09\u6b65\uff0c\u5c06\u7b2c\u4e8c\u6b65\u7684\u5b57\u7b26\u4e32\u8ba1\u7b97 md5 \u540e\u5373\u5f97\u5230 <code>signature</code>\uff1a</p> <pre><code>646a6a629c344ce0e6a10cadd49756d4\n</code></pre> <p></p>"},{"location":"api/form_api/#_12","title":"\u56de\u8c03\u7b7e\u540d\uff08\u65e7\uff09","text":"<p>sign \u7b97\u6cd5</p> <p><code>sign</code> \u662f\u6839\u636e <code>code</code>\u3001<code>message</code>\u3001<code>url</code>\u3001<code>time</code> \u548c\u8868\u5355 API \u9a8c\u8bc1\u5bc6\u5319(<code>form_api_secret</code>) \u4f7f\u7528 <code>&amp;</code> \u62fc\u63a5\u540e\u8fdb\u884c MD5 \u5904\u7406\u5f97\u5230\u3002\u62fc\u63a5\u65f6\u9700\u6ce8\u610f URL \u7684\u7f16\u7801\u4e0e\u89e3\u7801\u95ee\u9898\u3002\u5982\u679c\u4f7f\u7528\u4e86 <code>ext-param</code> \u53c2\u6570, <code>ext-param</code> \u4e5f\u9700\u8981\u4f7f\u7528 <code>&amp;</code> \u62fc\u63a5\u5728 <code>form_api_secret</code> \u4e4b\u540e\u3002</p> <p>\u5982\u679c\u4e0a\u4f20\u7684\u662f\u56fe\u7247\uff0c\u5b58\u5728 <code>image-width</code>\u3001<code>image-height</code>\u3001<code>image-frames</code> \u548c <code>image-type</code> \u56db\u4e2a\u53c2\u6570\uff0c\u8fd9\u56db\u4e2a\u53c2\u6570\u4e0d\u53c2\u4e0e\u7b7e\u540d\u8ba1\u7b97\u3002 \u5982\u679c\u8bbe\u7f6e\u4e86 <code>apps</code> \u53c2\u6570\uff0c\u5b58\u5728 <code>task_ids</code>\uff0c\u5b83\u4e5f\u4e0d\u53c2\u4e0e\u7b7e\u540d\u8ba1\u7b97\u3002</p> <p>\u4f8b\u5982\uff0ccode\uff1a<code>200</code></p> <p>message\uff1a<code>'ok'</code></p> <p>url\uff1a<code>'/2015/06/17/190623/upload_QQ \u56fe\u7247 201506011111206f7c696f0920f097d7eefd750334003e.png'</code></p> <p>time\uff1a<code>1434539183</code></p> <p>form_api_secret\uff1a<code>lGetaXubhGezKp89+6iuOb5IaS3=</code></p> <p>\u62fc\u63a5\u540e\u7684\u5b57\u7b26\u4e32\uff1a</p> <pre><code>200&amp;ok&amp;/2015/06/17/190623/upload_QQ \u56fe\u7247 201506011111206f7c696f0920f097d7eefd750334003e.png&amp;1434539183&amp;lGetaXubhGezKp89+6iuOb5IaS3=\n</code></pre> <p><code>sign</code> \u662f <code>'086c46cfedfc22bfa2e4971a77530a76'</code>\u3002</p> <p>\u56de\u8c03\u4fe1\u606f\uff08\u5df2\u7ecf\u7b7e\u540d\uff09\u662f\uff1a</p> <pre><code>{\"code\":200,\"message\":\"ok\",\"url\":\"\\/2015\\/06\\/17\\/190623\\/upload_QQ\\u56fe\\u7247201506011111206f7c696f0920f097d7eefd750334003e.png\",\"time\":1434539183,\"image-width\":1024,\"image-height\":768,\"image-frames\":1,\"image-type\":\"PNG\",\"sign\":\"086c46cfedfc22bfa2e4971a77530a76\"}\n</code></pre> <p>no-sign \u7b97\u6cd5</p> <p>\u5982\u679c\u53d1\u751f\u5f02\u5e38\uff0c\u8868\u5355 API \u9a8c\u8bc1\u5bc6\u94a5\u83b7\u53d6\u5931\u8d25\uff0c\u8fd4\u56de <code>no-sign</code>\u3002<code>no-sign</code> \u7b97\u6cd5\u8ddf <code>sign</code> \u76f8\u540c\uff0c\u53ea\u662f\u8868\u5355 API \u9a8c\u8bc1\u5bc6\u5319(<code>form_api_secret</code>) \u4e3a\u7a7a\u5b57\u7b26\u4e32 <code>''</code>\u3002</p> <p>\u4f8b\u5982\uff0c\u4f7f\u7528\u4e0a\u4f8b\u53c2\u6570\u62fc\u63a5\u540e\u7684\u5b57\u7b26\u4e32\u662f\uff1a</p> <pre><code>200&amp;ok&amp;/2015/06/17/190623/upload_QQ \u56fe\u7247 201506011111206f7c696f0920f097d7eefd750334003e.png&amp;1434539183\n</code></pre> <p><code>no-sign</code> \u662f <code>'bbaeeb9d05623fe1b380f756a291011a'</code>\u3002</p>"},{"location":"api/form_api/#_13","title":"\u56fe\u7247\u9884\u5904\u7406\uff08\u65e7\uff09","text":"\u53c2\u6570 \u5fc5\u9009 \u8bf4\u660e x-gmkerl-extract-color-count \u5426 \u4e3b\u9898\u8272\u63d0\u53d6\u7684\u989c\u8272\u6570\u91cf\uff0c\u9ed8\u8ba4 <code>256</code> x-gmkerl-extract-format \u5426 \u4e3b\u9898\u8272\u63d0\u53d6\u683c\u5f0f\uff0c\u9ed8\u8ba4 <code>dec</code> x-gmkerl-thumbnail \u5426 \u7f29\u7565\u56fe\u7248\u672c\u540d\u79f0\uff0c\u53ef\u642d\u914d\u5176\u4ed6 <code>x-gmkerl-*</code> \u53c2\u6570\u4f7f\u7528 x-gmkerl-type \u5426 \u7f29\u7565\u7c7b\u578b\uff0c\u89c1 x-gmkerl-type \u53ef\u9009\u503c\u5217\u8868 x-gmkerl-value \u5426 \u7f29\u7565\u7c7b\u578b\u5bf9\u5e94\u7684\u53c2\u6570\u503c\uff0c\u89c1 x-gmkerl-value \u503c\u8bf4\u660e x-gmkerl-quality \u5426 \u538b\u7f29\u8d28\u91cf\uff0c\u9ed8\u8ba4 <code>95</code> x-gmkerl-unsharp \u5426 \u662f\u5426\u9510\u5316\uff0c\u9ed8\u8ba4\u9510\u5316 x-gmkerl-rotate \u5426 \u56fe\u7247\u65cb\u8f6c\uff08\u987a\u65f6\u9488\uff09\uff0c\u53ef\u9009\u503c\uff1a<code>auto</code>\u3001<code>(0, 360]</code>\u3002\u8be6\u89c1\u65cb\u8f6c x-gmkerl-crop \u5426 \u56fe\u7247\u88c1\u526a\uff0c\u683c\u5f0f\uff1a<code>&lt;w&gt;x&lt;h&gt;a&lt;x&gt;a&lt;y&gt;</code>\u3002\u8be6\u89c1\u88c1\u526a x-gmkerl-exif-switch \u5426 \u662f\u5426\u4fdd\u7559 EXIF \u4fe1\u606f\uff0c\u9ed8\u8ba4\u4e0d\u4fdd\u7559  \u4ec5\u5728\u642d\u914d <code>x-gmkerl-crop</code>\u3001<code>x-gmkerl-type</code>\u3001<code>x-gmkerl-thumbnail</code> \u65f6\u6709\u6548 <p> x-gmkerl-type \u53ef\u9009\u503c\u5217\u8868</p> \u503c \u542b\u4e49 <code>fix_width</code> \u9650\u5b9a\u5bbd\u5ea6\uff0c\u9ad8\u5ea6\u81ea\u9002\u5e94 <code>fix_height</code> \u9650\u5b9a\u9ad8\u5ea6\uff0c\u5bbd\u5ea6\u81ea\u9002\u5e94 <code>fix_width_or_height</code> \u9650\u5b9a\u5bbd\u5ea6\u548c\u9ad8\u5ea6\uff0c\u5bbd\u9ad8\u4e0d\u8db3\u65f6\u4e0d\u7f29\u653e <code>fix_both</code> \u56fa\u5b9a\u5bbd\u5ea6\u548c\u9ad8\u5ea6\uff0c\u5bbd\u9ad8\u4e0d\u8db3\u65f6\u5f3a\u884c\u7f29\u653e <code>fix_max</code> \u9650\u5b9a\u6700\u957f\u8fb9\uff0c\u77ed\u8fb9\u81ea\u9002\u5e94 <code>fix_min</code> \u9650\u5b9a\u6700\u77ed\u8fb9\uff0c\u957f\u8fb9\u81ea\u9002\u5e94 <code>fix_scale</code> \u7b49\u6bd4\u4f8b\u7f29\u653e\uff081-1000\uff09 <p> x-gmkerl-value \u503c\u8bf4\u660e</p> <ul> <li>\u5f53 <code>x-gmkerl-type</code> \u6307\u5b9a\u4e3a <code>fix_width_or_height</code> \u6216 <code>fix_both</code> \u65f6\uff0c<code>x-gmkerl-value</code> \u503c\u7684\u683c\u5f0f\u4e3a <code>&lt;width&gt;x&lt;height&gt;</code>\uff0c\u5982 <code>480x576</code>\u3002</li> <li>\u5f53 <code>x-gmkerl-type</code>  \u4e3a\u5176\u4ed6\u7684\u7c7b\u578b\uff0c<code>x-gmkerl-value</code> \u503c\u53ea\u9700\u8981\u6307\u5b9a\u5355\u4e2a\u6570\u5b57\uff0c\u5982 <code>100</code>\uff0c\u610f\u601d\u4e3a\u9ad8\u548c/\u6216\u5bbd\u4e3a <code>100</code>\u3002</li> </ul> <p>\u5982\u6709\u7591\u95ee\u8bf7 \u8054\u7cfb\u6211\u4eec</p>"},{"location":"api/fusion_storage/","title":"\u878d\u5408\u4e91\u5b58\u50a8","text":"<p>\u9488\u5bf9\u5f88\u591a\u7528\u6237\u5728\u5e73\u53f0\u9009\u578b\u65f6\uff0c\u9700\u8981\u5c06\u6570\u636e\u5b58\u50a8\u5728\u591a\u5bb6\u5b58\u50a8\u5382\u5546\u4ee5\u4fdd\u8bc1\u670d\u52a1\u7684\u53ef\u7528\u6027\uff0c\u53c8\u62cd\u4e91\u63a8\u51fa\u4e86\u878d\u5408\u4e91\u5b58\u50a8\u3002\u5b83\u4ee5\u53c8\u62cd\u4e91\u5b58\u50a8\u4f5c\u4e3a\u4e3b\u5b58\u50a8\uff0c\u81ea\u52a8\u5c06\u589e\u91cf\u6587\u4ef6\u540c\u6b65\u5230\u7b2c\u4e09\u65b9\u5b58\u50a8\u5382\u5546\uff08\u5982\uff1a\u963f\u91cc\u4e91 OSS\u3001\u4e03\u725b\u4e91\u5b58\u50a8\u7b49\uff09\uff0c\u5e76\u5728\u53c8\u62cd\u4e91\u5b58\u50a8\u53d8\u52a8\u65f6\uff0c\u542f\u7528\u7b2c\u4e09\u65b9\u5b58\u50a8\u6e90\uff0c\u4fdd\u8bc1\u60a8\u670d\u52a1\u7684\u9ad8\u53ef\u7528\u3002</p>"},{"location":"api/fusion_storage/#_1","title":"\u57fa\u7840\u67b6\u6784","text":"<ul> <li> <p>\u5f53\u53c8\u62cd\u4e91\u5b58\u50a8\u6b63\u5e38\u65f6\uff0c\u7ec8\u7aef\u670d\u52a1\u4e0a\u4f20\u6587\u4ef6\u5230\u53c8\u62cd\u4e91\u5b58\u50a8\uff0c\u53c8\u62cd\u4e91\u5b58\u50a8\u81ea\u52a8\u540c\u6b65\u6587\u4ef6\u5230\u7b2c\u4e09\u65b9\u5b58\u50a8\u5382\u5546\u3002\u7528\u6237\u8bbf\u95ee\u6587\u4ef6\u65f6\uff0c\u901a\u8fc7\u53c8\u62cd\u4e91 CDN \u8bbf\u95ee\u53c8\u62cd\u4e91\u5b58\u50a8\u4e0a\u7684\u6587\u4ef6\u3002</p> </li> <li> <p>\u5f53\u53c8\u62cd\u4e91\u5b58\u50a8\u51fa\u73b0\u53d8\u52a8\uff08\u5f02\u5e38\uff09\u65f6\uff0cCDN \u611f\u77e5\u5230\u4e91\u5b58\u50a8\u53d8\u52a8\uff0c\u53bb\u7b2c\u4e09\u65b9\u5b58\u50a8\u5382\u5546\u83b7\u53d6\u6587\u4ef6\uff0c\u5206\u53d1\u7ed9\u7528\u6237\u3002\u540c\u65f6\uff0c\u7ec8\u7aef\u670d\u52a1\u7684\u6587\u4ef6\u9700\u8981\u4e0a\u4f20\u5230\u7b2c\u4e09\u65b9\u5b58\u50a8\u5382\u5546\u3002\u5f85\u53c8\u62cd\u4e91\u5b58\u50a8\u6062\u590d\u540e\uff0c\u81ea\u52a8\u540c\u6b65\u8be5\u671f\u95f4\u4e0a\u4f20\u5230\u7b2c\u4e09\u65b9\u5b58\u50a8\u5382\u5546\u7684\u6587\u4ef6\u5230\u53c8\u62cd\u4e91\u5b58\u50a8\u3002</p> </li> </ul> <p>\u4f7f\u7528\u878d\u5408\u4e91\u5b58\u50a8\u9700\u8981\u505a\u4e24\u65b9\u9762\u4e8b\u60c5\uff1a</p> <ul> <li> <p>\u5728\u53c8\u62cd\u4e91\u63a7\u5236\u53f0\u914d\u7f6e\u670d\u52a1\u878d\u5408\u7684\u7b2c\u4e09\u65b9\u5b58\u50a8\u5382\u5546\uff0c\u89c1\u529f\u80fd\u914d\u7f6e\uff1b</p> </li> <li> <p>\u4e0a\u4f20\u652f\u6301\u7b2c\u4e09\u65b9\u5b58\u50a8\u5382\u5546\uff0c\u89c1 SDK\u3002</p> </li> </ul> <p></p>"},{"location":"api/fusion_storage/#_2","title":"\u529f\u80fd\u914d\u7f6e","text":"<p>\u60a8\u5728\u4f7f\u7528\u63a7\u5236\u53f0\u8fdb\u884c\u529f\u80fd\u914d\u7f6e\u4e4b\u524d\uff0c\u8bf7\u786e\u4fdd\u60a8\u5df2\u7ecf\u6ce8\u518c\u53c8\u62cd\u4e91\u8d26\u53f7\u5e76\u5b8c\u6210\u5b9e\u540d\u9a8c\u8bc1\uff0c\u8bf7\u786e\u4fdd\u60a8\u5df2\u7ecf\u521b\u5efa\u4e91\u5b58\u50a8\u670d\u52a1\u3002</p>"},{"location":"api/fusion_storage/#_3","title":"\u914d\u7f6e\u5165\u53e3","text":"<p>1\uff09\u300c\u5de5\u5177\u7bb1\u300d &gt; \u300c\u878d\u5408\u4e91\u5b58\u50a8\u300d\u3002</p> <p></p> <p>2\uff09\u300c\u670d\u52a1\u300d \u5217\u8868 &gt; \u300c\u878d\u5408\u4e91\u300d\u3002\u7279\u522b\u5730\uff0c\u53ea\u6709\u6e90\u7ad9\u662f \u300c\u53c8\u62cd\u4e91\u300d\u7684\u670d\u52a1\uff0c\u624d\u6709\u300c\u878d\u5408\u4e91\u300d \u8fd9\u4e2a\u5165\u53e3\u3002 </p> <p></p>"},{"location":"api/fusion_storage/#_4","title":"\u6dfb\u52a0\u670d\u52a1","text":"<p>\u8fdb\u5165\u914d\u7f6e\u5217\u8868\u9875\u9762\u540e\uff0c\u70b9\u51fb\u53f3\u4e0a\u89d2\u7684 \u300c\u6dfb\u52a0\u670d\u52a1\u300d\u3002</p> <p></p>"},{"location":"api/fusion_storage/#_5","title":"\u914d\u7f6e","text":"<p>1\uff09\u9009\u62e9\u9700\u8981\u878d\u5408\u7684\u670d\u52a1</p> <p>\u901a\u8fc7\u5de6\u4fa7\u7684\u9009\u9879\uff0c\u9009\u62e9\u60a8\u9700\u8981\u914d\u7f6e\u878d\u5408\u4e91\u5b58\u50a8\u7684\u53c8\u62cd\u4e91\u670d\u52a1\uff0c\u652f\u6301\u901a\u8fc7\u5173\u952e\u5b57\u8fdb\u884c\u641c\u7d22\u7b5b\u9009\uff0c\u4ee5\u4fbf\u5feb\u901f\u627e\u5230\u60a8\u8981\u914d\u7f6e\u7684\u670d\u52a1\u3002</p> <p>2\uff09\u9009\u62e9\u7b2c\u4e09\u65b9\u5b58\u50a8\u5382\u5546</p> <p>\u76ee\u524d\u4ec5\u652f\u6301\u963f\u91cc\u4e91 OSS \u548c\u4e03\u725b\u4e91\u5b58\u50a8\uff0c\u4e14\u5355\u4e2a\u670d\u52a1\u53ea\u80fd\u9009\u62e9\u4e00\u5bb6\u7b2c\u4e09\u65b9\u5b58\u50a8\u5382\u5546\u3002</p> <p>3\uff09\u521b\u5efa\u7a7a\u95f4\u5e76\u8f93\u5165</p> <p>\u5728\u7b2c\u4e09\u65b9\u5b58\u50a8\u5382\u5546\u7684\u7ba1\u7406\u4e2d\u5fc3\u521b\u5efa\u4e00\u4e2a\u65b0\u7684\u5177\u5907\u516c\u5171\u8bfb\u6743\u9650\u7684\u7a7a\u95f4\u7528\u4e8e\u53c8\u62cd\u4e91\u670d\u52a1\u589e\u91cf\u6587\u4ef6\u540c\u6b65\uff0c\u4e0d\u540c\u5382\u5546\u9700\u8981\u63d0\u4f9b\u7684\u914d\u7f6e\u9879\u4e0d\u540c\u3002</p> <ul> <li> <p>\u963f\u91cc\u4e91 OSS \u9700\u8981\u63d0\u4f9b BucketName \u3001\u6240\u5c5e\u5730\u533a\u3001\u540c\u6b65\u51ed\u8bc1\uff08AccessKeyId \u3001AccessKeySecret\uff09\u3002</p> </li> <li> <p>\u4e03\u725b\u4e91\u5b58\u50a8\u9700\u8981\u63d0\u4f9b\u7a7a\u95f4\u540d\u79f0\u3001\u540c\u6b65\u51ed\u8bc1\uff08UploadToken\uff09\u3002</p> </li> </ul> <p>\u7279\u522b\u5730\uff0c\u4e0d\u8981\u4f7f\u7528\u4e00\u4e2a\u7b2c\u4e09\u65b9\u5b58\u50a8\u5382\u5546\u7a7a\u95f4\u914d\u7f6e\u53c8\u62cd\u4e91\u7684\u591a\u4e2a\u670d\u52a1\uff0c\u907f\u514d\u6587\u4ef6\u540c\u540d\u8986\u76d6\u3002\u540c\u6b65\u51ed\u8bc1\u83b7\u53d6\uff0c\u89c1\u540c\u6b65\u51ed\u8bc1\u751f\u6210\u6307\u5357\u3002</p> <p>4\uff09\u542f\u7528\u7b2c\u4e09\u65b9\u5b58\u50a8\u6e90</p> <p>\u6839\u636e\u9700\u8981\uff0c\u9009\u62e9\u662f\u5426\u542f\u7528\u7b2c\u4e09\u65b9\u5b58\u50a8\u6e90\u3002\u5982\u679c\u5f00\u542f\uff0c\u9700\u8981\u8f93\u5165\u7b2c\u4e09\u65b9\u5382\u5546\u914d\u7f6e\u7684\u7a7a\u95f4\u5bf9\u5e94\u56de\u6e90\u5730\u5740\u3002</p> <ul> <li> <p>\u963f\u91cc\u4e91 OSS \u662f\u7a7a\u95f4\u5bf9\u5e94\u7684\u5916\u7f51\u57df\u540d\u3002</p> </li> <li> <p>\u4e03\u725b\u4e91\u5b58\u50a8\u662f\u7a7a\u95f4\u5bf9\u5e94\u7684\u5916\u94fe\u57df\u540d\u3002\u9700\u5411\u4e03\u725b\u7533\u8bf7\u4e0d\u5e26\u52a0\u901f\u7684\u5916\u94fe\u57df\u540d\uff0c\u5426\u5219\u53ef\u80fd\u4f1a\u5f15\u8d77 CDN \u670d\u52a1\u5728\u591a\u5bb6 CDN \u5382\u5546\u8fdb\u884c\u8c03\u5ea6\uff0c\u6700\u7ec8\u5f71\u54cd\u4f53\u9a8c\u3002</p> </li> </ul> <p>5\uff09\u9a8c\u8bc1\u914d\u7f6e</p> <p>\u70b9\u51fb\u63d0\u4ea4\uff0c\u4f1a\u9a8c\u8bc1\u60a8\u7684\u914d\u7f6e\u662f\u5426\u6709\u6548\u3002\u914d\u7f6e\u9a8c\u8bc1\u65e0\u8bef\uff0c\u63d0\u793a\uff1a\u9a8c\u8bc1\u6210\u529f\uff0c\u670d\u52a1\u914d\u7f6e\u6210\u529f\uff01</p>"},{"location":"api/fusion_storage/#_6","title":"\u914d\u7f6e\u5217\u8868","text":"<p>\u914d\u7f6e\u6210\u529f\u540e\uff0c\u4f1a\u663e\u793a\u5728\u914d\u7f6e\u5217\u8868\u4e2d\u3002</p> <p></p>"},{"location":"api/fusion_storage/#_7","title":"\u5176\u4ed6\u64cd\u4f5c","text":"<p>1) \u65e5\u5fd7</p> <p>\u60a8\u53ef\u4ee5\u901a\u8fc7\u8be5\u529f\u80fd\u67e5\u770b\u589e\u91cf\u540c\u6b65\u7684\u65e5\u671f\u548c\u540c\u6b65\u8fdb\u5ea6\uff0c\u5e76\u53ef\u4ee5\u70b9\u51fb \u300c\u4e0b\u8f7d\u300d\uff0c\u628a\u65e5\u5fd7\u4fdd\u5b58\u5230\u672c\u5730\u3002</p> <p>2\uff09\u7981\u7528/\u542f\u7528</p> <p>\u60a8\u53ef\u4ee5\u901a\u8fc7\u8be5\u529f\u80fd\u968f\u65f6\u5bf9\u60a8\u7684\u914d\u7f6e\u8fdb\u884c\u7981\u7528\u548c\u542f\u7528\u3002\u7981\u7528\u540e\u5c06\u4f1a\u505c\u6b62\u5411\u7b2c\u4e09\u65b9\u5b58\u50a8\u5382\u5546\u8fdb\u884c\u589e\u91cf\u540c\u6b65\uff0c\u7b2c\u4e09\u65b9\u56de\u6e90\u4e5f\u5c06\u7981\u7528\u3002</p> <p>3\uff09\u4fee\u6539</p> <p>\u60a8\u53ef\u4ee5\u5bf9\u914d\u7f6e\u8fdb\u884c\u4fee\u6539\uff0c\u66f4\u6362\u7b2c\u4e09\u65b9\u5382\u5546\u6216\u7a7a\u95f4\u3002\u66f4\u6362\u7b2c\u4e09\u65b9\u5382\u5546\u5c06\u4f1a\u6309\u7167\u5f53\u524d\u540c\u6b65\u65f6\u95f4\u5f00\u59cb\u91cd\u65b0\u8fdb\u884c\u589e\u91cf\u540c\u6b65\u3002</p> <p>4\uff09\u5220\u9664</p> <p>\u60a8\u53ef\u4ee5\u5bf9\u914d\u7f6e\u8fdb\u884c\u5220\u9664\u64cd\u4f5c\u3002\u5220\u9664\u540e\u589e\u91cf\u540c\u6b65\u5c06\u4f1a\u505c\u6b62\uff0c\u7b2c\u4e09\u65b9\u56de\u6e90\u4e5f\u5c06\u7981\u7528\u3002</p> <p></p>"},{"location":"api/fusion_storage/#sdk","title":"SDK","text":"<p>\u5f53\u524d\uff0c\u878d\u5408\u4e91\u5b58\u50a8\u4e0a\u4f20 SDK \u4ec5\u5305\u62ec iOS \u548c Android\u3002\u5176\u4ed6\u8bed\u8a00\u7684\u5b9e\u73b0\uff0c\u9700\u8981\u7528\u6237\u81ea\u884c\u5904\u7406\u3002</p> <p></p>"},{"location":"api/fusion_storage/#_8","title":"\u540c\u6b65\u51ed\u8bc1\u751f\u6210\u6307\u5357","text":"<p>\u540c\u6b65\u51ed\u8bc1\u7684\u751f\u6210\u5404\u5b58\u50a8\u5382\u5546\u7684\u65b9\u5f0f\u548c\u65b9\u6cd5\u5404\u4e0d\u76f8\u540c\u3002\u8fd9\u91cc\u63a8\u8350\uff1a\u963f\u91cc\u4e91 OSS \u53ef\u901a\u8fc7 RAM \u7684\u65b9\u5f0f\u751f\u6210\uff0c\u4e03\u725b\u53ef\u624b\u52a8\u751f\u6210\u3002</p>"},{"location":"api/fusion_storage/#oss","title":"\u963f\u91cc\u4e91 OSS","text":"<p>\u963f\u91cc\u4e91\u63d0\u4f9b\u4e86 RAM \u548c STS \u4e24\u79cd\u6743\u9650\u7ba1\u7406\u7cfb\u7edf\u3002RAM \u4e3b\u8981\u7684\u4f5c\u7528\u662f\u63a7\u5236\u8d26\u53f7\u7cfb\u7edf\u7684\u6743\u9650\uff0c\u901a\u8fc7\u4f7f\u7528 RAM \u53ef\u4ee5\u5728\u4e3b\u8d26\u53f7\u7684\u6743\u9650\u8303\u56f4\u5185\u521b\u5efa\u5b50\u7528\u6237\uff0c\u7ed9\u4e0d\u540c\u7684\u5b50\u7528\u6237\u5206\u914d\u4e0d\u540c\u7684\u6743\u9650\u4ece\u800c\u8fbe\u5230\u6388\u6743\u7ba1\u7406\u7684\u76ee\u7684\u3002STS \u662f\u4e00\u4e2a\u5b89\u5168\u51ed\u8bc1\uff08Token\uff09\u7684\u7ba1\u7406\u7cfb\u7edf\uff0c\u7528\u6765\u6388\u4e88\u4e34\u65f6\u7684\u8bbf\u95ee\u6743\u9650\uff0c\u5b8c\u6210\u5bf9\u4e8e\u4e34\u65f6\u7528\u6237\u7684\u8bbf\u95ee\u6388\u6743\u3002\u7531\u4e8e STS \u65b9\u5f0f\u5177\u6709\u4e34\u65f6\u6027\uff0c\u4e0d\u9002\u7528\u4e8e\u672c\u65b9\u6848\uff0c\u6545\u63a8\u8350\u4f7f\u7528 RAM \u7684\u65b9\u5f0f\u6765\u751f\u6210\u540c\u6b65\u51ed\u8bc1\u3002</p> <p>** \u751f\u6210\u6b65\u9aa4 **</p> <p>1\uff09\u901a\u8fc7\u963f\u91cc\u4e91 RAM \u7ba1\u7406\u5e73\u53f0\u521b\u5efa\u7528\u6237\uff1b</p> <p>2\uff09\u81ea\u52a8\u751f\u6210 AccessKey\uff0c\u4fdd\u5b58 AK \u4fe1\u606f\uff1b</p> <p>3\uff09\u6dfb\u52a0\u6388\u6743\u7b56\u7565\uff08\u53ef\u6307\u5b9a\u5355\u4e2a OSS \u7a7a\u95f4\u6743\u9650\uff09\uff1b</p> <p>4\uff09\u6388\u6743\u7b56\u7565\u914d\u7f6e\u597d\u4e4b\u540e\uff0c\u5728 AK \u4fe1\u606f\u91cc\u9762\u4fbf\u53ef\u4ee5\u627e\u5230 AccessKeyID \u548c AccessKeySecret \u4fe1\u606f\u3002</p> <p>\u8be6\u60c5\u8bf7\u53c2\u8003\u963f\u91cc\u4e91 OSS RAM \u4f7f\u7528\u6307\u5357\u3002</p> <p>** \u6ce8\u610f\u4e8b\u9879 **</p> <p>1\uff09\u9700\u8981\u6388\u6743\u5bf9\u6307\u5b9a\u7684\u7a7a\u95f4\u8d44\u6e90\u5177\u6709\u516c\u5171\u8bfb\u6743\u9650\uff1b</p> <p>2\uff09\u5728\u9650\u5236\u6761\u4ef6\u65b9\u9762\uff0c\u6388\u6743\u7684\u65f6\u95f4\u8981\u5c3d\u53ef\u80fd\u7684\u957f\u3002\u5426\u5219\u6388\u6743\u65f6\u95f4\u5931\u6548\u4e4b\u540e\uff0c\u53c8\u62cd\u4e91\u5b58\u50a8\u65e0\u6cd5\u8fdb\u884c\u4e0a\u4f20\u540c\u6b65\u64cd\u4f5c\u3002</p>"},{"location":"api/fusion_storage/#_9","title":"\u4e03\u725b\u4e91\u5b58\u50a8","text":"<p>\u4e03\u725b\u4e91\u5b58\u50a8\u63d0\u4f9b\u4e00\u5bf9\u4e3b\u548c\u4ece Access Key \u548c Secret Key \u4f5c\u4e3a\u6743\u9650\u7ba1\u7406\u57fa\u7840\uff0c\u4e0a\u4f20\u3001\u4e0b\u8f7d\u7b49\u64cd\u4f5c\u7684\u6388\u6743\u51ed\u8bc1\uff0c\u901a\u8fc7\u5bf9\u5e94\u7684\u7a7a\u95f4\u4e0e Access Key \u548c Secret Key \u751f\u6210\u3002\u5176\u4e2d\uff0c\u4e0a\u4f20\u64cd\u4f5c\u7684\u4e0a\u4f20\u51ed\u8bc1 UploadToken\uff0c\u5373\u662f\u878d\u5408\u4e91\u5b58\u50a8\u914d\u7f6e\u4e2d\u9700\u8981\u7684\u540c\u6b65\u51ed\u8bc1\u3002</p> <p>** \u751f\u6210\u6b65\u9aa4 **</p> <p>1\uff09\u6784\u9020\u4e0a\u4f20\u7b56\u7565\uff1b</p> <p>2\uff09\u5c06\u4e0a\u4f20\u7b56\u7565\u5e8f\u5217\u5316\u6210\u4e3a JSON \u683c\u5f0f\uff1b</p> <p>3\uff09\u5bf9 JSON \u7f16\u7801\u7684\u4e0a\u4f20\u7b56\u7565\u8fdb\u884c URL \u5b89\u5168\u7684 Base64 \u7f16\u7801\uff0c\u5f97\u5230\u5f85\u7b7e\u540d\u5b57\u7b26\u4e32 encodedPutPolicy\uff1b</p> <p>4\uff09\u4f7f\u7528SecretKey\u5bf9\u4e0a\u4e00\u6b65\u751f\u6210\u7684\u5f85\u7b7e\u540d\u5b57\u7b26\u4e32\u8ba1\u7b97 HMAC-SHA1 \u7b7e\u540d\uff1b</p> <p>5\uff09\u5bf9\u7b7e\u540d\u8fdb\u884c URL \u5b89\u5168\u7684 Base64 \u7f16\u7801\uff0c\u5f97\u5230\u503c\uff1aencodedSign\uff1b</p> <p>6\uff09\u5c06 AccessKey\u3001encodedSign \u548c encodedPutPolicy \u7528\u82f1\u6587\u7b26\u53f7 : \u8fde\u63a5\u8d77\u6765\uff0c\u5f97\u5230 UploadToken\u3002</p> <p>\u8be6\u60c5\u8bf7\u53c2\u8003\u4e03\u725b\u4e0a\u4f20\u51ed\u8bc1\u751f\u6210\u6307\u5357\u3002</p> <p>** \u6ce8\u610f\u4e8b\u9879 **</p> <p>1) \u5728\u6784\u9020\u4e0a\u4f20\u7b56\u7565\u65f6\uff0c\u6388\u6743\u7684\u751f\u6548\u65f6\u95f4\u9700\u8981\u5c3d\u53ef\u80fd\u7684\u957f\uff0c\u5426\u5219\u6388\u6743\u65f6\u95f4\u622a\u6b62\uff0c\u6587\u4ef6\u5c06\u4e0d\u80fd\u591f\u8fdb\u884c\u540c\u6b65\u3002</p> <p>2\uff09\u6307\u5b9a\u4e0a\u4f20\u7684\u76ee\u6807\u8d44\u6e90\u7a7a\u95f4\uff08Bucket\uff09\u548c\u8d44\u6e90\u952e\u540d\uff08Key\uff09\uff0c\u9700\u8981\u548c\u878d\u5408\u4e91\u5b58\u50a8\u914d\u7f6e\u4e2d\u6307\u5b9a\u7684\u7a7a\u95f4\u540d\u4e00\u81f4\u3002</p>"},{"location":"api/fusion_storage/#_10","title":"\u5e38\u89c1\u95ee\u9898","text":"<p>** \u4ec0\u4e48\u662f\u878d\u5408\u4e91\u5b58\u50a8\uff1f **</p> <p>\u878d\u5408\u4e91\u5b58\u50a8\u662f\u53c8\u62cd\u4e91\u7ed3\u5408\u81ea\u6709\u4e91\u5b58\u50a8\u670d\u52a1\uff0c\u540c\u65f6\u878d\u5408\u7b2c\u4e09\u65b9\u4e91\u5b58\u50a8\u670d\u52a1\uff0c\u63a8\u51fa\u7684\u591a\u6e90\u5b58\u50a8\u65b9\u6848\u3002</p> <p>** \u878d\u5408\u4e91\u5b58\u50a8\u65b9\u6848\u53ea\u80fd\u5bf9\u589e\u91cf\u6587\u4ef6\u8fdb\u884c\u540c\u6b65\uff0c\u5b58\u91cf\u6587\u4ef6\u540c\u6b65\u53ef\u4ee5\u652f\u6301\u5417\uff1f **</p> <p>\u76ee\u524d\u4ec5\u652f\u6301\u589e\u91cf\u6587\u4ef6\u540c\u6b65\uff0c\u5b58\u91cf\u6587\u4ef6\u4e0d\u652f\u6301\u3002</p> <p>** \u662f\u5426\u652f\u6301\u5bf9\u589e\u91cf\u6587\u4ef6\u5220\u9664\u7684\u540c\u6b65\uff1f **</p> <p>\u4e0d\u652f\u6301\u3002</p> <p>** \u878d\u5408\u4e91\u5b58\u50a8\u65b9\u6848\u6536\u8d39\u5417\uff1f **</p> <p>\u5728\u516c\u6d4b\u9636\u6bb5\u8be5\u65b9\u6848\u4e0d\u6536\u53d6\u4efb\u4f55\u6d41\u91cf\u548c\u8d44\u6e90\u6d88\u8017\u8d39\u7528\uff0c\u5b8c\u5168\u514d\u8d39\u5f00\u653e\u7ed9\u7528\u6237\u4f7f\u7528\u3002</p> <p>** \u878d\u5408\u4e91\u5b58\u50a8\u65b9\u6848\u4e2d\u540c\u6b65\u51ed\u8bc1\u6709\u4ec0\u4e48\u4f5c\u7528\uff1f **</p> <p>\u4e3b\u8981\u662f\u5bf9\u589e\u91cf\u6587\u4ef6\u540c\u6b65\u4e0a\u4f20\u8fdb\u884c\u6388\u6743\u7684\uff0c\u5404\u5b58\u50a8\u5382\u5546\u4f1a\u7528\u6765\u9a8c\u8bc1\u4e0a\u4f20\u8bf7\u6c42\u5408\u6cd5\u6027\u7684\u673a\u5236\uff0c\u6b64\u5904\u6388\u6743\u5176\u5b9e\u5c31\u662f\u901a\u8fc7 \u300c\u540c\u6b65\u51ed\u8bc1\u300d \u6765\u5b9e\u73b0\u3002</p> <p>** \u4f7f\u7528\u878d\u5408\u4e91\u5b58\u50a8\u65b9\u6848\u540e\uff0c\u662f\u5426\u652f\u6301\u4f7f\u7528\u7b2c\u4e09\u65b9\u4e91\u5b58\u50a8\u5382\u5546\u7684\u4e91\u5904\u7406\u670d\u52a1\uff1f **</p> <p>\u4ec5\u652f\u6301\u878d\u5408\u4e03\u725b\u4e91\u56fe\u7247\u5904\u7406\u670d\u52a1\uff0c\u5982\u6709\u9700\u8981\uff0c\u8bf7\u8054\u7cfb\u552e\u540e\u6216\u60a8\u7684\u5546\u52a1\u7ecf\u7406\u3002</p> <p>\u5982\u6709\u7591\u95ee\u8bf7 \u8054\u7cfb\u6211\u4eec</p>"},{"location":"api/multipart_upload/","title":"\u5206\u5757\u4e0a\u4f20\uff08\u5df2\u5f03\u7528\uff09","text":"<p>\u5728\u4e0a\u4f20\u5927\u6587\u4ef6\u7684\u65f6\u5019\uff0c\u9762\u5bf9\u6709\u53ef\u80fd\u56e0\u4e3a\u7f51\u7edc\u8d28\u91cf\u7b49\u5176\u4ed6\u539f\u56e0\u800c\u9020\u6210\u7684\u4e0a\u4f20\u5931\u8d25\uff0c\u4f7f\u7528\u5206\u5757\u4e0a\u4f20\u548c\u65ad\u70b9\u7eed\u4f20\u673a\u5236\u5c31\u663e\u5f97\u975e\u5e38\u6709\u5fc5\u8981\u3002</p> <p>\u4e91\u5b58\u50a8\u5b8c\u5584\u4e86\u65ad\u70b9\u7eed\u4f20\u673a\u5236\uff0c\u65b0\u7684\u65ad\u70b9\u7eed\u4f20\u6bd4\u5206\u5feb\u4e0a\u4f20\u66f4\u5feb\u3001\u66f4\u7b80\u5355\uff0c\u56e0\u6b64\uff0c\u5206\u5757\u4e0a\u4f20\u4e0d\u518d\u66f4\u65b0\uff0c\u656c\u8bf7\u4f7f\u7528\u65b0\u7684\u65ad\u70b9\u7eed\u4f20\u3002</p>"},{"location":"api/multipart_upload/#api","title":"API \u57fa\u672c\u57df\u540d","text":"<pre><code>m0.api.upyun.com\n</code></pre>"},{"location":"api/multipart_upload/#_1","title":"\u540d\u79f0\u6982\u5ff5","text":"<ul> <li>\u6587\u4ef6\u5206\u5757\uff1a\u76f4\u63a5\u5207\u5206\u4e8c\u8fdb\u5236\u6587\u4ef6\u6210\u5c0f\u5757\u3002\u5177\u4f53\u6587\u4ef6\u7684\u6bcf\u4e2a\u5206\u5757\u7684\u5927\u5c0f\u4ee5\u53ca\u5206\u5757\u6570\u76ee\uff0c\u53ef\u4ee5\u6839\u636e\u81ea\u5df1\u60c5\u51b5\u8c03\u6574\uff08eg. 10MB \u7684\u6587\u4ef6\uff0c\u53ef\u4ee5\u5b9a\u6bcf\u4e2a\u5206\u5757 1MB\uff0c\u5219\u5206\u5757\u6570\u76ee\u5373\u4e3a 10 \u5757\uff09</li> <li>\u8bf7\u6c42\u53c2\u6570\uff08Request Params\uff09\uff1a \u5373\u662f\u6307\u5e38\u89c4\u7684\u8bf7\u6c42\u4e2d\u6240\u5e26\u53c2\u6570</li> <li>\u53c2\u6570\u7ec4\uff08Meta Params\uff09\uff1a \u5305\u542b\u6587\u4ef6\u4e0a\u4f20\u5b58\u50a8\u53ca\u6821\u9a8c\u76f8\u5173\u7684\u5fc5\u8981\u4fe1\u606f\uff0c\u4e5f\u662f\u6bcf\u6b21\u8bf7\u6c42\u65f6\u5019\u8ba1\u7b97 <code>policy</code> \u548c <code>signature</code> \u6240\u9700\u7684\u53c2\u6570\u7ec4\u3002</li> <li>signature\uff1a \u6821\u9a8c\u7b7e\u540d</li> <li>policy\uff1a \u5b58\u50a8/\u6821\u9a8c\u4fe1\u606f</li> </ul>"},{"location":"api/multipart_upload/#signature-policy","title":"signature \u548c policy \u7b97\u6cd5","text":"<p>signature \u548c policy \u7b97\u6cd5\u4e0e\u8868\u5355 API \u76f8\u540c\uff0c\u8bf7\u53c2\u8003 \u8fd9\u91cc\u3002</p> <p>\u6ce8\uff1a\u5728\u5206\u5757\u4e0a\u4f20\u6570\u636e\u548c\u5408\u5e76\u6587\u4ef6\u8bf7\u6c42\u4e2d\uff0c\u9700\u8981\u5c06\u6b64\u5904\u6240\u7528\u300e\u8868\u5355 API \u9a8c\u8bc1\u5bc6\u94a5\u300f\u66ff\u6362\u4e3a\u4e0a\u6b21\u8bf7\u6c42\u8fd4\u56de\u7684 <code>token_secret</code>\uff0c\u518d\u8fdb\u884c <code>signature</code> \u8ba1\u7b97</p> <p>\u5047\u8bbe\u4e00\u4e2a\u8bf7\u6c42\u6240\u9700\u7684\u7684\u7b56\u7565\u53c2\u6570\u5982\u4e0b\u8868:</p> \u952e \u503c path /demo.png expiration 1409200758 file_blocks 1 file_hash b1143cbc07c8e768d517fa5e73cb79ca file_size 653252 <p>\u53e6\u8bbe\uff0c\u8be5\u7a7a\u95f4\u300e\u8868\u5355 API \u9a8c\u8bc1\u5bc6\u94a5\u300f\u4e3a\uff1a<code>cAnyet74l9hdUag34h2dZu8z7gU=</code></p> <p>\u8ba1\u7b97 policy \u548c signature \u76f8\u5e94\u6b65\u9aa4\u6240\u5f97\u7ed3\u679c\u5982\u4e0b\uff1a</p> <p>\u7b2c\u4e00\u6b65\uff0c\u5c06\u53c2\u6570\u7ec4\u8f6c\u6362\u4e3a JSON \u5b57\u7b26\u4e32\u540e\uff1a</p> <pre><code>{\"path\":\"/demo.png\",\"expiration\":1409200758,\"file_blocks\":1,\"file_size\":653252,\"file_hash\":\"b1143cbc07c8e768d517fa5e73cb79ca\"}\n</code></pre> <p>\u7b2c\u4e8c\u6b65\uff0c\u5c06\u7b2c\u4e00\u6b65\u6240\u5f97\u5b57\u7b26\u4e32 base64 \u7f16\u7801\u540e\uff1a</p> <pre><code>eyJwYXRoIjoiL2RlbW8ucG5nIiwiZXhwaXJhdGlvbiI6MTQwOTIwMDc1OCwiZmlsZV9ibG9ja3MiOjEsImZpbGVfc2l6ZSI6NjUzMjUyLCJmaWxlX2hhc2giOiJiMTE0M2NiYzA3YzhlNzY4ZDUxN2ZhNWU3M2NiNzljYSJ9\n</code></pre> <p>\u7b2c\u4e09\u6b65\uff0c\u7b2c\u4e8c\u6b65\u7ed3\u679c\u4e0e\u300e\u8868\u5355 API \u9a8c\u8bc1\u5bc6\u94a5\u300f\u7528 <code>&amp;</code> \u62fc\u63a5\u540e\uff1a</p> <pre><code>eyJwYXRoIjoiL2RlbW8ucG5nIiwiZXhwaXJhdGlvbiI6MTQwOTIwMDc1OCwiZmlsZV9ibG9ja3MiOjEsImZpbGVfc2l6ZSI6NjUzMjUyLCJmaWxlX2hhc2giOiJiMTE0M2NiYzA3YzhlNzY4ZDUxN2ZhNWU3M2NiNzljYSJ9&amp;cAnyet74l9hdUag34h2dZu8z7gU=\n</code></pre> <p>\u6ce8\uff1a\u5728\u5206\u5757\u4e0a\u4f20\u6570\u636e\u548c\u5408\u5e76\u6587\u4ef6\u8bf7\u6c42\u4e2d\uff0c\u9700\u8981\u5c06\u6b64\u5904\u6240\u7528\u300e\u8868\u5355 API \u9a8c\u8bc1\u5bc6\u94a5\u300f\u66ff\u6362\u4e3a\u4e0a\u6b21\u8bf7\u6c42\u8fd4\u56de\u7684 <code>token_secret</code>\uff0c\u518d\u8fdb\u884c\u7b2c\u56db\u6b65\u8ba1\u7b97</p> <p>\u7b2c\u56db\u6b65\uff0c\u5c06\u7b2c\u4e09\u6b65\u6240\u5f97\u5b57\u7b26\u8ba1\u7b97 md5 \u540e\u5373\u5f97\u5230 signature\uff1a</p> <pre><code>98cf3f74698bfec04886eee446439ae3\n</code></pre>"},{"location":"api/multipart_upload/#_2","title":"\u4e0a\u4f20\u6b65\u9aa4","text":"<p>\u8868\u5355\u5206\u5757\u4e0a\u4f20\u7684\u6574\u4e2a\u6b65\u9aa4\u5206\u4e3a\uff1a</p> <ol> <li>\u521d\u59cb\u5316\u4e0a\u4f20</li> <li>\u5206\u5757\u4e0a\u4f20\u6570\u636e</li> <li>\u6587\u4ef6\u5408\u5e76\u5b8c\u6210\u4e0a\u4f20</li> </ol>"},{"location":"api/multipart_upload/#_3","title":"\u521d\u59cb\u5316\u4e0a\u4f20","text":"<pre><code>POST /&lt;bucket-name&gt;/\n</code></pre>"},{"location":"api/multipart_upload/#_4","title":"\u8bf7\u6c42\u7c7b\u578b","text":"<pre><code>Content-Type: application/x-www-form-urlencoded\n</code></pre>"},{"location":"api/multipart_upload/#_5","title":"\u8bf7\u6c42\u53c2\u6570","text":"\u53c2\u6570 \u53c2\u6570\u7c7b\u578b \u5fc5\u9009 \u53c2\u6570\u8bf4\u660e policy string true \u6587\u4ef6\u5b58\u50a8/\u6821\u9a8c\u4fe1\u606f\uff0c\u89c1\u7b97\u6cd5 signature string true \u6821\u9a8c\u7b7e\u540d\uff0c\u89c1\u7b97\u6cd5"},{"location":"api/multipart_upload/#_6","title":"\u53c2\u6570\u7ec4","text":"\u53c2\u6570 \u53c2\u6570\u8bf4\u660e path \u6587\u4ef6\u5b58\u50a8\u8def\u5f84 expiration \u6388\u6743\u6709\u6548\u671f\uff0cUnix UTC \u65f6\u95f4\u6233 file_blocks \u672c\u6b21\u6240\u4e0a\u4f20\u7684\u6587\u4ef6\u7684\u5206\u5757\u6570\u76ee file_hash \u6240\u4e0a\u4f20\u6587\u4ef6\u6574\u4e2a\u6587\u4ef6\u7684 md5 hash \u503c file_size \u6240\u4e0a\u4f20\u6587\u4ef6\u6574\u4e2a\u6587\u4ef6\u7684\u5927\u5c0f(\u5355\u4f4d Byte) <p>\u6ce8\uff1a\u8bf7\u9009\u53d6\u9002\u5f53\u7684 <code>file_blocks</code> \u4ee5\u4fdd\u8bc1\u5206\u5757\u7684\u5927\u5c0f \u4e0d\u8d85\u8fc7 5M \uff0c\u5e76\u4e14\u9664\u6700\u540e\u4e00\u5757\u5916\u5176\u4f59\u5206\u5757 \u4e0d\u5c0f\u4e8e 100K \u3002</p> <p>\u5176\u4ed6\u53ef\u9009\u53c2\u6570\u5982\u4e0b\uff1a</p> \u53c2\u6570 \u53ef\u9009\u6027 \u5907\u6ce8 allow-file-type \u5426 \u6587\u4ef6\u7c7b\u578b\u9650\u5236\uff0c\u5236\u5b9a\u5141\u8bb8\u4e0a\u4f20\u7684\u6587\u4ef6\u6269\u5c55\u540d content-length-range \u5426 \u6587\u4ef6\u5927\u5c0f\u9650\u5236\uff0c\u683c\u5f0f\uff1a<code>min,max</code>\uff0c\u5355\u4f4d\uff1a\u5b57\u8282\uff0c\u5982 <code>102400,1024000</code>\uff0c\u5141\u8bb8\u4e0a\u4f20 100Kb\uff5e1Mb \u7684\u6587\u4ef6 content-md5 \u5426 \u6240\u4e0a\u4f20\u7684\u6587\u4ef6\u7684 MD5 \u6821\u9a8c\u503c\uff0c\u53c8\u62cd\u4e91\u6839\u636e\u6b64\u6765\u6821\u9a8c\u6587\u4ef6\u4e0a\u4f20\u662f\u5426\u6b63\u786e content-secret \u5426 \u539f\u56fe\u8bbf\u95ee\u5bc6\u94a5 [\u8868\u5355 API \u6ce8 2] content-type \u5426 \u53c8\u62cd\u4e91\u9ed8\u8ba4\u6839\u636e\u6269\u5c55\u540d\u5224\u65ad\uff0c\u624b\u52a8\u6307\u5b9a\u53ef\u63d0\u9ad8\u7cbe\u786e\u6027 image-width-range \u5426 \u56fe\u7247\u5bbd\u5ea6\u9650\u5236\uff0c\u683c\u5f0f\uff1a<code>min,max</code>\uff0c\u5355\u4f4d\uff1a\u50cf\u7d20\uff0c\u5982 <code>0,1024</code>\uff0c\u5141\u8bb8\u4e0a\u4f20\u5bbd\u5ea6\u4e3a 0\uff5e1024px \u4e4b\u95f4 image-height-range \u5426 \u56fe\u7247\u9ad8\u5ea6\u9650\u5236\uff0c\u683c\u5f0f\uff1a<code>min,max</code>\uff0c\u5355\u4f4d\uff1a\u50cf\u7d20\uff0c\u5982 <code>0,1024</code>\uff0c\u5141\u8bb8\u4e0a\u4f20\u9ad8\u5ea6\u5728 0\uff5e1024px \u4e4b\u95f4 notify-url \u5426 \u5f02\u6b65\u901a\u77e5 URL\uff0c\u89c1 [\u8868\u5355 API \u901a\u77e5\u89c4\u5219] return-url \u5426 \u540c\u6b65\u901a\u77e5 URL\uff0c\u89c1 [\u8868\u5355 API \u901a\u77e5\u89c4\u5219] x-gmkerl-thumb \u5426 \u56fe\u7247\u5904\u7406\u53c2\u6570\uff0c\u89c1 \u4e0a\u4f20\u4f5c\u56fe x-gmkerl-type \u5426 <code>get_meta</code>\uff08\u83b7\u53d6\u56fe\u7247\u4fe1\u606f\uff09\u6216 <code>get_theme_color</code>\uff08\u4e3b\u9898\u8272\u63d0\u53d6\uff09 x-gmkerl-extract-color-count \u5426 \u4e3b\u9898\u8272\u63d0\u53d6\u989c\u8272\u6570\u91cf\uff0c\u9ed8\u8ba4 <code>256</code> x-gmkerl-extract-format \u5426 \u4e3b\u9898\u8272\u63d0\u53d6\u683c\u5f0f\uff0c\u9ed8\u8ba4 <code>hex</code> ext-param \u5426 \u989d\u5916\u53c2\u6570\uff0cUTF-8 \u7f16\u7801\uff0c\u5e76\u5c0f\u4e8e 255 \u4e2a\u5b57\u7b26 [\u8868\u5355 API \u6ce8 5] apps \u5426 json \u683c\u5f0f\u7684\u5f02\u6b65\u5904\u7406\u4efb\u52a1\u5217\u8868\u3002\u89c1 \u5f02\u6b65\u5904\u7406\u4efb\u52a1 x-gmkerl-thumbnail DEPRECATED \u5426 \u7f29\u7565\u56fe\u7248\u672c\u540d\u79f0\uff0c\u4ec5\u652f\u6301\u56fe\u7247\u7c7b\u7a7a\u95f4\uff0c\u53ef\u642d\u914d\u5176\u4ed6 <code>x-gmkerl-*</code> \u53c2\u6570\u4f7f\u7528 [\u8868\u5355 API \u6ce8 3] x-gmkerl-type DEPRECATED \u5426 \u7f29\u7565\u7c7b\u578b [\u8868\u5355 API \u6ce8 4] x-gmkerl-value DEPRECATED \u5426 \u7f29\u7565\u7c7b\u578b\u5bf9\u5e94\u7684\u53c2\u6570\u503c [\u8868\u5355 API \u6ce8 4] x-gmkerl-quality DEPRECATED \u5426 \u9ed8\u8ba4 95\u7f29\u7565\u56fe\u538b\u7f29\u8d28\u91cf x-gmkerl-unsharp DEPRECATED \u5426 \u9ed8\u8ba4\u9510\u5316\uff08true\uff09\u662f\u5426\u8fdb\u884c\u9510\u5316\u5904\u7406 x-gmkerl-rotate DEPRECATED \u5426 \u56fe\u7247\u65cb\u8f6c\uff08\u987a\u65f6\u9488\uff09\uff0c\u53ef\u9009\uff1a<code>auto\uff0c90\uff0c180\uff0c270</code> \u4e4b\u4e00 x-gmkerl-crop DEPRECATED \u5426 \u56fe\u7247\u88c1\u526a\uff0c\u683c\u5f0f\uff1a<code>&lt;w&gt;x&lt;h&gt;a&lt;x&gt;a&lt;y&gt;</code>\u3002 \u5176\u4e2d w, h \u5206\u522b\u8868\u793a\u88c1\u526a\u540e\u7684\u5bbd\u548c\u9ad8\uff0cx, y \u8868\u793a\u5de6\u4e0a\u89d2\u5750\u6807\u3002\u5982 100x100a0a0\u3002 x-gmkerl-exif-switch DEPRECATED \u5426 \u662f\u5426\u4fdd\u7559 EXIF \u4fe1\u606f\uff0c\u4ec5\u5728\u642d\u914d <code>x-gmkerl-crop\uff0cx-gmkerl-type\uff0cx-gmkerl-thumbnail</code> \u65f6\u6709\u6548\u3002"},{"location":"api/multipart_upload/#_7","title":"\u8fd4\u56de\u7ed3\u679c","text":"<pre><code>{\n  save_token: '68640c7ab4120b4992907cabc6ea2c48',\n  token_secret: \"89a3d8d8a26a8adb32a3651a63c0d5cc\",\n  bucket_name: 'example',\n  blocks: 5,\n  status: [0,0,0,0,0],\n  expired_at: 1401784219\n}\n</code></pre> <p>\u8fd4\u56de\u53c2\u6570\u8bf4\u660e</p> \u53c2\u6570 \u8bf4\u660e save_token \u5206\u5757\u4e0a\u4f20\u7d22\u5f15 key\uff0c\u4e0b\u4e00\u6b65\u5206\u5757\u4e0a\u4f20\u6570\u636e\u65f6\u5fc5\u987b\u643a\u5e26\u672c\u53c2\u6570 token_secret \u7528\u4e8e\u4e4b\u540e\u8bf7\u6c42\u8ba1\u7b97 <code>policy</code> \u548c <code>signature</code> \u6240\u7528\uff0c\u4ee3\u66ff\u300e\u8868\u5355 API \u9a8c\u8bc1\u5bc6\u94a5\u300f bucket_name \u6587\u4ef6\u4fdd\u5b58\u7a7a\u95f4 blocks \u6587\u4ef6\u5206\u5757\u6570\u91cf status \u5206\u5757\u6587\u4ef6\u4e0a\u4f20\u72b6\u6001\uff0c<code>1</code>\u8868\u793a\u5df2\u5b8c\u6210\u4e0a\u4f20\uff0c<code>0</code>\u8868\u793a\u5206\u5757\u672a\u5b8c\u6210\u4e0a\u4f20\u3002\u6570\u7ec4\u7d22\u5f15\u8868\u793a\u5206\u5757\u5e8f\u53f7\uff0c \u4ece 0 \u5f00\u59cb \uff1b expired_at \u5f53\u524d\u5206\u5757\u4e0a\u4f20\u6570\u636e\u6709\u6548\u671f\uff0c\u8d85\u8fc7\u6709\u6548\u671f\u4e4b\u540e\u6570\u636e\u5c06\u4f1a\u88ab\u6e05\u7406"},{"location":"api/multipart_upload/#_8","title":"\u5206\u5757\u4e0a\u4f20\u6570\u636e","text":"<pre><code>POST /&lt;bucket-name&gt;/\n</code></pre>"},{"location":"api/multipart_upload/#_9","title":"\u8bf7\u6c42\u7c7b\u578b","text":"<pre><code>Content-Type: multipart/form-data\n</code></pre>"},{"location":"api/multipart_upload/#_10","title":"\u8bf7\u6c42\u53c2\u6570","text":"\u53c2\u6570 \u53c2\u6570\u7c7b\u578b \u5fc5\u9009 \u53c2\u6570\u8bf4\u660e policy String true \u6587\u4ef6\u5b58\u50a8/\u6821\u9a8c\u4fe1\u606f\uff0c\u89c1\u7b97\u6cd5 signature String true \u6821\u9a8c\u7b7e\u540d\uff0c\u89c1\u7b97\u6cd5 file Blob true \u4e0a\u4f20\u7684\u6587\u4ef6\u5206\u5757\u6570\u636e"},{"location":"api/multipart_upload/#_11","title":"\u53c2\u6570\u7ec4","text":"\u53c2\u6570 \u53c2\u6570\u8bf4\u660e save_token \u5373\u521d\u59cb\u5316\u4e0a\u4f20\u8bf7\u6c42\u8fd4\u56de\u7ed3\u679c\u4e2d\u7684 <code>save_token</code> expiration Unix UTC \u65f6\u95f4\u6233\uff0c\u6388\u6743\u6709\u6548\u671f\uff0c\u8d85\u8fc7\u8fd9\u4e2a\u65f6\u95f4\u4e4b\u540e\u6388\u6743\u5c06\u4f1a\u5931\u6548 block_index \u8be5\u5206\u5757\u5728\u5b8c\u6574\u6587\u4ef6\u4e2d\u7684\u5206\u5757\u7d22\u5f15 block_hash \u8be5\u5206\u5757\u6587\u4ef6\u7684 md5 \u503c"},{"location":"api/multipart_upload/#_12","title":"\u8fd4\u56de\u7ed3\u679c","text":"<p>\u4e0a\u4f20\u6210\u529f\u8fd4\u56de:</p> <pre><code>{\n  save_token: '68640c7ab4120b4992907cabc6ea2c48',\n  token_secret: \"89a3d8d8a26a8adb32a3651a63c0d5cc\",\n  bucket_name: 'example',\n  blocks: 5,\n  status: [1,1,1,1,0],\n  expired_at: 1401784219\n}\n</code></pre> <p>\u8fd4\u56de\u53c2\u6570\u8bf4\u660e</p> \u53c2\u6570 \u8bf4\u660e save_token \u5206\u5757\u4e0a\u4f20\u7d22\u5f15 key\uff0c\u4e0b\u4e00\u6b65\u5206\u5757\u4e0a\u4f20\u6570\u636e\u65f6\u5fc5\u987b\u643a\u5e26\u672c\u53c2\u6570 token_secret \u7528\u4e8e\u4e4b\u540e\u8bf7\u6c42\u8ba1\u7b97 <code>policy</code> \u548c <code>signature</code> \u6240\u7528\uff0c\u4ee3\u66ff\u300e\u8868\u5355 API \u9a8c\u8bc1\u5bc6\u94a5\u300f bucket_name \u6587\u4ef6\u4fdd\u5b58\u7a7a\u95f4 blocks \u6587\u4ef6\u5206\u5757\u6570\u91cf status \u5206\u5757\u6587\u4ef6\u4e0a\u4f20\u72b6\u6001\uff0c<code>1</code>\u8868\u793a\u5df2\u5b8c\u6210\u4e0a\u4f20\uff0c<code>0</code>\u8868\u793a\u5206\u5757\u672a\u5b8c\u6210\u4e0a\u4f20\u3002\u6570\u7ec4\u7d22\u5f15\u8868\u793a\u5206\u5757\u5e8f\u53f7\uff0c \u4ece 0 \u5f00\u59cb \uff1b expired_at \u5f53\u524d\u5206\u5757\u4e0a\u4f20\u6570\u636e\u6709\u6548\u671f\uff0c\u8d85\u8fc7\u6709\u6548\u671f\u4e4b\u540e\u6570\u636e\u5c06\u4f1a\u88ab\u6e05\u7406"},{"location":"api/multipart_upload/#_13","title":"\u6587\u4ef6\u5408\u5e76\u5b8c\u6210\u4e0a\u4f20","text":"<pre><code>POST /&lt;bucket-name&gt;/\n</code></pre>"},{"location":"api/multipart_upload/#_14","title":"\u8bf7\u6c42\u7c7b\u578b","text":"<pre><code>Content-Type: application/x-www-form-urlencoded\n</code></pre>"},{"location":"api/multipart_upload/#_15","title":"\u8bf7\u6c42\u53c2\u6570","text":"\u53c2\u6570 \u53c2\u6570\u7c7b\u578b \u5fc5\u9009 \u53c2\u6570\u8bf4\u660e policy string true \u6587\u4ef6\u5b58\u50a8/\u6821\u9a8c\u4fe1\u606f\uff0c\u89c1\u7b97\u6cd5 signature string true \u6821\u9a8c\u7b7e\u540d\uff0c\u89c1\u7b97\u6cd5"},{"location":"api/multipart_upload/#_16","title":"\u53c2\u6570\u7ec4","text":"\u53c2\u6570 \u53c2\u6570\u8bf4\u660e save_token \u5373\u521d\u59cb\u5316\u4e0a\u4f20\u8bf7\u6c42\u8fd4\u56de\u7ed3\u679c\u4e2d\u7684 <code>save_token</code> expiration Unix UTC \u65f6\u95f4\u6233\uff0c\u6388\u6743\u6709\u6548\u671f\uff0c\u8d85\u8fc7\u8fd9\u4e2a\u65f6\u95f4\u4e4b\u540e\u6388\u6743\u5c06\u4f1a\u5931\u6548"},{"location":"api/multipart_upload/#_17","title":"\u8fd4\u56de\u7ed3\u679c","text":"<p>\u8868\u5355 API \u7ed3\u5408 <code>return-url</code> \u548c <code>notify-url</code> \u4e24\u4e2a\uff0c\u6709\u4e09\u79cd\u65b9\u5f0f\u5c06\u4e0a\u4f20\u7ed3\u679c\u8fd4\u56de: * HTTP Body \u540c\u6b65\u8fd4\u56de\uff1b\u5728\u6ca1\u6709\u4f20\u9012 <code>return-url</code> \u65f6\uff0c\u90fd\u4f1a\u4f7f\u7528\u8fd9\u79cd\u65b9\u5f0f\u4ee5 JSON \u5b57\u7b26\u4e32\u7684\u65b9\u5f0f\u8fd4\u56de\u6570\u636e\u5230\u5ba2\u6237\u7aef\uff1b * \u5ba2\u6237\u7aef\u540c\u6b65\u8df3\u8f6c\u56de\u8c03\uff1b\u4f20\u9012 <code>return-url</code> \u53c2\u6570\u65f6\uff0c\u4f1a\u901a\u8fc7 HTTP 302 \u7684\u65b9\u5f0f\u5728\u5ba2\u6237\u7aef\u8df3\u8f6c\u5230\u56de\u8c03\u5730\u5740\uff0c\u901a\u8fc7 GET \u53c2\u6570\u4f20\u9012\uff1b * \u670d\u52a1\u5668\u5f02\u6b65\u961f\u5217\u901a\u77e5\uff1b\u4f20\u9012\u4e86 <code>notify-url</code> \u53c2\u6570\u65f6\uff0c\u4f1a\u901a\u8fc7\u53c8\u62cd\u4e91\u7684\u670d\u52a1\u7aef\u5f02\u6b65\u961f\u5217\u53d1\u9001 POST \u8bf7\u6c42\u4ee5\u6807\u51c6\u7684x-www-form-urlencoded\u8868\u5355\u8fdb\u884c\u901a\u77e5\uff0c\u5982\u679c\u56de\u8c03\u901a\u77e5\u5931\u8d25\uff0c\u518d\u91cd\u8bd5 10 \u6b21\uff08\u7d2f\u8ba1\u4e00\u5929\u65f6\u95f4\uff09\u4e4b\u540e\u5c06\u4e22\u5f03\u8fd9\u6761\u56de\u8c03\u4efb\u52a1\uff1b</p> <p>\u4e09\u79cd\u65b9\u5f0f\u5c06\u8fd4\u56de/\u63d0\u4ea4\u4e00\u6837\u7684\u6570\u636e\uff0c\u7b7e\u540d\u9a8c\u8bc1\u673a\u5236\u4e5f\u5b8c\u5168\u4e00\u6837\uff0c\u4ee5 HTTP Body \u8fd4\u56de\u7684\u6570\u636e\u4e3a\u4f8b\u4e0a\u4f20\u6210\u529f\u8fd4\u56de\uff1a</p> <pre><code>{\n  bucket_name: 'example',\n  path: '/demo.png',\n  mimetype: 'image/png',\n  file_size: 65422,\n  image_width: 800,\n  image_height: 600,\n  image_frames: 1,\n  image_type: 'PNG',\n  last_modified: 1402021925,\n  signature: 'c0ec4d6b0bb0515b4b889a12436118aa'\n}\n</code></pre> <p>\u8fd4\u56de\u53c2\u6570\u8bf4\u660e</p> \u53c2\u6570 \u8bf4\u660e bucket_name \u7a7a\u95f4\u540d path \u6587\u4ef6\u4fdd\u5b58\u8def\u5f84 mimetype \u4fdd\u5b58\u6587\u4ef6\u7684 content-type file_size \u6587\u4ef6\u5927\u5c0f image_width \u56fe\u7247\u5bbd\u5ea6\uff0c\u4ec5\u56fe\u7247\u8fd4\u56de image_height \u56fe\u7247\u9ad8\u5ea6\uff0c\u4ec5\u56fe\u7247\u8fd4\u56de image_frames \u56fe\u7247\u5e27\u6570\uff0c\u4ec5\u56fe\u7247\u8fd4\u56de image_type \u56fe\u7247\u7c7b\u578b\uff0c\u4ec5\u56fe\u7247\u8fd4\u56de last_modified \u6587\u4ef6\u6700\u540e\u4fee\u6539\u65f6\u95f4\uff0c\u65e2\u672c\u6b21\u4e0a\u4f20\u64cd\u4f5c\u6210\u529f\u521b\u5efa\u6587\u4ef6\u7684\u65f6\u95f4 signature \u6821\u9a8c\u7b7e\u540d\uff0c\u7528\u4e8e\u6821\u9a8c\u8fd4\u56de\u6570\u636e\u7684\u5408\u6cd5\u6027 \uff0c\u751f\u6210\u65b9\u5f0f\u53c2\u89c1\u7b7e\u540d\u7b97\u6cd5 ext-param \u521d\u59cb\u5316\u65f6\u6307\u5b9a\u7684\u989d\u5916\u53c2\u6570\uff08\u5982\u679c\u6ca1\u6709\u6307\u5b9a\u5219\u4e0d\u8fd4\u56de\u8fd9\u4e2a\u5b57\u6bb5\uff09 <p>\u540c\u6b65\u56de\u8c03\u65b9\u5f0f\u4f1a\u901a\u8fc7 HTTP 302 \u7684\u65b9\u5f0f\u8fdb\u884c\u8df3\u8f6c\uff1a</p> <pre><code>&gt; Access-Control-Allow-Methods:PUT,POST\n&gt; Access-Control-Allow-Origin:*\n&gt; X-Powered-By:Crocodile/0.0.1\n&gt; ...\n&gt; Location: http://www.example.com/callback/return.php?path=%2Fdemo.png&amp;content_type=image%2Fpng&amp;file_size=65422&amp;image_width=800&amp;image_height=600&amp;image_frames=1&amp;last_modified=1402021925&amp;signature=bc0b1ee186486c050146616a6ec74747\n</code></pre>"},{"location":"api/multipart_upload/#_18","title":"\u9519\u8bef\u4ee3\u7801\u8bf4\u660e","text":"<p>\u8bf7\u53c2\u8003 API \u9519\u8bef\u7801\u8868</p>"},{"location":"api/old_thumb/","title":"Old thumb","text":"<p>** \u8be5\u6587\u6863\u4e3a\u65e7\u7248\u4f5c\u56fe\u53c2\u6570\uff0c\u76ee\u524d\u5df2\u4e0d\u518d\u66f4\u65b0\uff0c\u65b0\u7248\u8bf7\u53c2\u8003 \u65b0\u7248\u4f5c\u56fe\u53c2\u6570 **</p> \u53c2\u6570 \u8bf4\u660e <code>x-gmkerl-type</code> \u7f29\u7565\u7c7b\u578b\uff08\u5177\u4f53\u8bf7\u53c2\u89c1\u6ce8 1\uff09 <code>x-gmkerl-value</code> \u7f29\u7565\u7c7b\u578b\u5bf9\u5e94\u7684\u53c2\u6570\u503c\uff0c\u5355\u4f4d\u4e3a\u50cf\u7d20\uff0c\u987b\u642d\u914d <code>x-gmkerl-type</code> \u4f7f\u7528\uff08\u5177\u4f53\u8bf7\u53c2\u89c1\u6ce8 2\uff09 <code>x-gmkerl-quality</code> \u56fe\u7247\u8d28\u91cf\uff0c\u9ed8\u8ba4 <code>95</code>\uff0c\u53ef\u9009\uff081~100\uff09 <code>x-gmkerl-unsharp</code> \u56fe\u7247\u9510\u5316\uff0c\u9ed8\u8ba4 <code>true</code> \u5373\u5f00\u542f\u9510\u5316 <code>x-gmkerl-thumbnail</code> \u5728\u53c8\u62cd\u4e91\u7ba1\u7406\u5e73\u53f0\u521b\u5efa\u597d\u7f29\u7565\u56fe\u7248\u672c\u8be5\u7f29\u7565\u65b9\u5f0f\u5305\u542b\u4e86\u6240\u9700\u7684\u7f29\u7565\u53c2\u6570\uff0c\u53c2\u6570\u66f4\u7b80\u6d01\uff0c\u4f7f\u7528\u66f4\u65b9\u4fbf <code>x-gmkerl-exif-switch</code> \u662f\u5426\u4fdd\u7559\u539f\u56fe\u7684 EXIF \u4fe1\u606f\uff0c\u9ed8\u8ba4 <code>false</code> \u5373\u4e0d\u4fdd\u7559 <code>x-gmkerl-crop</code> \u683c\u5f0f\u4e3a <code>x,y,width,height</code>\uff0c\u5982\uff1a<code>0,0,100,200</code> \uff08\u5177\u4f53\u8bf7\u53c2\u89c1\u6ce8 3\uff09 <code>x-gmkerl-rotate</code> \u65cb\u8f6c\u89d2\u5ea6\uff0c\u76ee\u524d\u53ea\u5141\u8bb8\u8bbe\u7f6e\uff1a<code>auto\uff0c90\uff0c180\uff0c270</code> \uff08\u5177\u4f53\u8bf7\u53c2\u89c1\u6ce8 4\uff09 <p>\u6ce8 1\uff1ax-gmkerl-type \u503c\u53ef\u9009\u5217\u8868</p> \u503c \u542b\u4e49 <code>fix_width</code> \u9650\u5b9a\u5bbd\u5ea6\uff0c\u9ad8\u5ea6\u81ea\u9002\u5e94 <code>fix_height</code> \u9650\u5b9a\u9ad8\u5ea6\uff0c\u5bbd\u5ea6\u81ea\u9002\u5e94 <code>fix_width_or_height</code> \u9650\u5b9a\u5bbd\u5ea6\u548c\u9ad8\u5ea6\uff0c\u5bbd\u9ad8\u4e0d\u8db3\u65f6\u4e0d\u7f29\u653e <code>fix_both</code> \u56fa\u5b9a\u5bbd\u5ea6\u548c\u9ad8\u5ea6\uff0c\u5bbd\u9ad8\u4e0d\u8db3\u65f6\u5f3a\u884c\u7f29\u653e <code>fix_max</code> \u9650\u5b9a\u6700\u957f\u8fb9\uff0c\u77ed\u8fb9\u81ea\u9002\u5e94 <code>fix_min</code> \u9650\u5b9a\u6700\u77ed\u8fb9\uff0c\u957f\u8fb9\u81ea\u9002\u5e94 <code>fix_scale</code> \u7b49\u6bd4\u4f8b\u7f29\u653e\uff081-99\uff09 <p>\u6ce8 2\uff1ax-gmkerl-value \u503c\u7684\u4f7f\u7528</p> <ul> <li>\u82e5 <code>x-gmkerl-type</code> \u6307\u5b9a\u4e3a <code>fix_width_or_height</code> \u6216 <code>fix_both</code>\uff0c\u5219\uff0c<code>x-gmkerl-value</code> \u503c\u7684\u683c\u5f0f\u4e3a <code>&lt;width&gt;x&lt;height&gt;</code>\uff0c\u5982 <code>480x576</code>\u3002</li> <li>\u82e5 <code>x-gmkerl-type</code>  \u4e3a\u5176\u4ed6\u7684\u7c7b\u578b\uff0c\u5219 <code>x-gmkerl-value</code> \u53ea\u9700\u6307\u5b9a\u5355\u4e2a\u6570\u5b57\uff0c\u5982 <code>42</code>\uff0c\u610f\u4e3a\u9ad8\u5bbd\u540c\u4e3a 42\u3002</li> </ul> <p>\u6ce8 3\uff1ax-gmkerl-crop \u503c\u7684\u4f7f\u7528</p> <ul> <li><code>(x, y)</code>\u5de6\u4e0a\u89d2\u5750\u6807\uff1b<code>width</code>\uff1a\u8981\u88c1\u526a\u7684\u5bbd\u5ea6\uff1b<code>height</code>\uff1a\u8981\u88c1\u526a\u7684\u9ad8\u5ea6\u3002x &gt;= 0 &amp;&amp; y &gt;=0 &amp;&amp; width &gt; 0 &amp;&amp; height &gt; 0 \u4e14\u5fc5\u987b\u662f\u6b63\u6574\u578b\u3002</li> <li>\u88c1\u526a\u53c2\u6570<code>(x,y)</code>\u82e5\u5927\u4e8e\u539f\u56fe\u5927\u5c0f\uff0c\u5219\u5c06<code>(x,y)</code>\u91cd\u7f6e\u4e3a<code>(0,0)</code>\u8fdb\u884c\u88c1\u526a\u3002</li> <li><code>width+x</code> \u82e5\u5927\u4e8e\u539f\u56fe\u7684\u5bbd\u5ea6\uff0c\u5219\u53ea\u88c1\u526a\u5230\u539f\u56fe\u7684\u6700\u5927\u5bbd\u5ea6\u4e3a\u6b62\uff0c\u4e0d\u8fdb\u884c\u7a7a\u767d\u753b\u5e03\u586b\u5145\u3002</li> <li><code>heigth+y</code> \u82e5\u5927\u4e8e\u539f\u56fe\u7684\u9ad8\u5ea6\uff0c\u5219\u53ea\u88c1\u526a\u5230\u539f\u56fe\u7684\u6700\u5927\u9ad8\u5ea6\u4e3a\u6b62\uff0c\u4e0d\u8fdb\u884c\u7a7a\u767d\u753b\u5e03\u586b\u5145\u3002</li> </ul> <p>\u6ce8 4\uff1ax-gmkerl-rotate \u503c\u7684\u4f7f\u7528</p> <ul> <li>\u82e5\u53c2\u6570\u8bbe\u7f6e\u4e3a<code>auto</code>\uff0c\u5219\u6839\u636e\u539f\u56fe\u7684 EXIF \u4fe1\u606f\u8fdb\u884c\u65cb\u8f6c\uff08\u65cb\u8f6c\u540e\u5c06\u4fee\u6539\u539f\u56fe\u7684 EXIF \u4fe1\u606f\uff09\uff0c\u5176\u4ed6\u53c2\u6570\u5219\u8fdb\u884c\u5f3a\u5236\u65cb\u8f6c\u3002</li> <li>\u65cb\u8f6c\u5931\u8d25\u65f6\u82e5\u53c2\u6570\u4e3a<code>auto</code>\uff0c\u5219\u5ffd\u7565\u9519\u8bef\u8fdb\u884c\u4fdd\u5b58\u64cd\u4f5c\uff1b\u5176\u4ed6\u53c2\u6570\u5219\u76f4\u63a5\u8fd4\u56de\u9519\u8bef\u4fe1\u606f\u3002</li> </ul>"},{"location":"api/old_thumb/#_1","title":"\u6c34\u5370\u53c2\u6570","text":"<p>\u5728\u4e0a\u4f20\u56fe\u7247\u6587\u4ef6\u65f6\uff0c\u53ef\u4ee5\u901a\u8fc7\u6dfb\u52a0\u4e0b\u9762\u7684\u53c2\u6570\u8fdb\u884c\u6dfb\u52a0\u6587\u5b57\u6c34\u5370\u7684\u5904\u7406</p> \u53c2\u6570 \u8bf4\u660e <code>x-gmkerl-watermark-text</code> \u6587\u5b57\u6c34\u5370\u5185\u5bb9\uff0c\u5fc5\u987b\u7ecf\u8fc7 urlencode \u5904\u7406 <code>x-gmkerl-watermark-font</code> \u9ed8\u8ba4 <code>simsun</code> \u6587\u5b57\u6c34\u5370\u5b57\u4f53\uff08\u5177\u4f53\u8bf7\u53c2\u89c1\u6ce8 1\uff09 <code>x-gmkerl-watermark-size</code> \u9ed8\u8ba4 <code>32</code>\uff1b\u6587\u5b57\u6c34\u5370\u5c3a\u5bf8\uff0c\u53d6\u503c\u5fc5\u987b\u4e3a\u6574\u6570\uff0c\u5355\u4f4d\u50cf\u7d20 <code>x-gmkerl-watermark-align</code> \u9ed8\u8ba4 <code>top,left</code> \u6c34\u5370\u5bf9\u9f50\u65b9\u5f0f \uff08\u5177\u4f53\u8bf7\u53c2\u89c1\u6ce8 2\uff09 <code>x-gmkerl-watermark-margin</code> \u9ed8\u8ba4 <code>20,20</code> \u6c34\u5370\u8fb9\u8ddd\uff0c\u683c\u5f0f <code>x,y</code>\uff0c\u65e2 <code>\u6c34\u5e73\u8fb9\u8ddd,\u5782\u76f4\u8fb9\u8ddd</code>\uff08\u5982 <code>20,20</code>\uff09\uff0c\u5355\u4f4d\u50cf\u7d20 <code>x-gmkerl-watermark-opacity</code> \u9ed8\u8ba4 <code>0</code> \u6c34\u5370\u900f\u660e\u5ea6\uff0c\u53d6\u503c\u8303\u56f4 0 ~ 100 \u7684\u6574\u6570 <code>x-gmkerl-watermark-color</code> \u9ed8\u8ba4 <code>#000000</code> \u6587\u5b57\u6c34\u5370\u989c\u8272\uff0cRGB \u503c <code>x-gmkerl-watermark-border</code> \u6587\u5b57\u6c34\u5370\u8fb9\u6846\uff0c\u9ed8\u8ba4\u65e0\u8fb9\u6846\uff0c\uff08\u5177\u4f53\u8bf7\u53c2\u89c1\u6ce8 3\uff09 <p>\u6ce8 1\uff1ax-gmkerl-watermark-font \u503c\u53ef\u9009\u5217\u8868</p> <p>\u76ee\u524d\u652f\u6301\u7684\u4e2d\u6587\u5b57\u4f53\u5305\u62ec\uff1a</p> <ul> <li><code>simsun</code>\uff1a\u5b8b\u4f53(simsun)</li> <li><code>simhei</code>\uff1a\u9ed1\u4f53 (simhei)</li> <li><code>simkai</code>\uff1a\u6977\u4f53 (simkai)</li> <li><code>simli</code>\uff1a\u96b6\u4e66 (simli)</li> <li><code>simyou</code>\uff1a\u5e7c\u5706 (simyou)</li> <li><code>simfang</code>\uff1a\u4eff\u5b8b (simfang)</li> </ul> <p>\u6ce8 2\uff1ax-gmkerl-watermark-align \u503c\u7684\u4f7f\u7528</p> <p>\u683c\u5f0f <code>valign,halign</code>\uff0c\u65e2 <code>\u5782\u76f4\u5bf9\u9f50,\u6c34\u5e73\u5bf9\u9f50</code>\uff08\u5982 <code>bottom,right</code>\uff09\uff0c\u53ef\u9009\u503c\u5305\u62ec\uff1a</p> <ul> <li>\u5782\u76f4\u5bf9\u9f50\uff1a<code>top</code>\uff0c<code>middle</code>\uff0c<code>bottom</code></li> <li>\u6c34\u5e73\u5bf9\u9f50\uff1a<code>left</code>\uff0c<code>center</code>\uff0c<code>right</code></li> </ul> <p>\u6ce8 3\uff1ax-gmkerl-watermark-border \u503c\u7684\u4f7f\u7528</p> <p>\u683c\u5f0f <code>rgba</code>\uff0c\u65e2 <code>RGB \u503c\u900f\u660e\u5ea6</code>\uff0c\u5982 <code>#cccccccc</code></p>"},{"location":"api/purge/","title":"\u7f13\u5b58\u5237\u65b0","text":"<p>\u5f53\u6e90\u7ad9\u7684\u8d44\u6e90\u53d1\u751f\u53d8\u66f4\u540e\uff0c\u53ef\u4ee5\u8c03\u7528\u8be5 API \u63a5\u53e3\u544a\u77e5\u53c8\u62cd\u4e91\u5237\u65b0\u7f13\u5b58\uff0c\u7f13\u5b58\u66f4\u65b0\u540e\uff0c\u7528\u6237\u8bbf\u95ee\u65f6\u4f1a\u83b7\u53d6\u5230\u66f4\u65b0\u540e\u7684\u8d44\u6e90\u3002</p> <p>\u7279\u522b\u5730\uff0c\u4f7f\u7528\u53c8\u62cd\u4e91\u5b58\u50a8\u4f1a\u5728\u8d44\u6e90\u53d8\u66f4\u540e\uff0c\u81ea\u52a8\u5237\u65b0\u7f13\u5b58\uff0c\u7701\u53bb\u4f7f\u7528\u81ea\u4e3b\u6e90\u7ad9\u7f13\u5b58\u5237\u65b0\u8fd9\u4e00\u6b65\u3002</p>"},{"location":"api/purge/#api","title":"API \u5730\u5740","text":"<pre><code>http://purge.upyun.com/purge/\n</code></pre>"},{"location":"api/purge/#_1","title":"\u8bf7\u6c42\u65b9\u6cd5","text":"<pre><code>curl -X POST \\\n    http://purge.upyun.com/purge/ \\\n    -H \"Authorization: &lt;your_authorization&gt;\" \\\n    -H \"Date: &lt;date&gt;\" \\\n    -F purge=&lt;url-list&gt;\n</code></pre> <p>\u5176\u4e2d\uff0c\u8bf7\u6c42\u5934\u90e8\u7684 <code>Authorization</code> \u7684\u5934\u90e8\u7b7e\u540d\u7b97\u6cd5\u5982\u4e0b\u6240\u793a\uff1a</p> <ol> <li>\u5c06\u9700\u8981\u5237\u65b0\u7684\u6587\u4ef6 URL\uff08\u4ee5 <code>http://</code> \u5f00\u5934\uff09 \u4ee5 <code>\\n</code> \u4e3a\u95f4\u9694\u7b26\u8fde\u63a5</li> <li>\u5c06\u7b2c 1 \u6b65\u6240\u5f97\u5b57\u7b26\u4e32\u3001\u7a7a\u95f4\u540d\u3001\u65e5\u671f\uff08GMT \u683c\u5f0f\uff09\u3001\u7ecf\u8fc7 MD5 \u5904\u7406\u540e\u7684\u64cd\u4f5c\u5458\u5bc6\u7801\u7528 <code>&amp;</code> \u62fc\u63a5</li> <li>\u5c06\u7b2c 2 \u6b65\u6240\u5f97\u5b57\u7b26\u4e32\u8fdb\u884c MD5 \u7f16\u7801\u5904\u7406\uff0c\u6240\u5f97\u8bb0\u4e3a <code>sign</code>,</li> <li>\u6700\u540e\uff0c\u5c06\u7a7a\u95f4\u540d\uff0c\u64cd\u4f5c\u5458\u540d\u548c\u7b2c 3 \u6b65\u6240\u5f97\u7684 <code>sign</code> \u4ee5\u5982\u4e0b\u683c\u5f0f\u4f5c\u4e3a\u8bf7\u6c42\u5934\u53c2\u6570\u4f20\u9012\uff1a</li> </ol> <pre><code>Authorization: UpYun &lt;bucket-name&gt;:&lt;operator-name&gt;:&lt;sign&gt;\n</code></pre> <p>\u53e6\u5916\uff0c\u9700\u5c06\u5f85\u5237\u65b0\u7684 URL \u5217\u8868\u5728\u4ee5\u6362\u884c\u7b26 <code>\\n</code> \u8fde\u63a5\u540e\u4ee5\u8868\u5355\u5b57\u6bb5 <code>purge</code> \u968f\u8bf7\u6c42\u53d1\u9001\u3002</p>"},{"location":"api/purge/#_2","title":"\u54cd\u5e94\u72b6\u6001","text":"\u72b6\u6001\u7801 \u8bf4\u660e 200 json \u683c\u5f0f\u7684\u5b57\u7b26\u4e32{invalid_domain_of_url:\u4e0d\u5c5e\u4e8e\u81ea\u5df1\u57df\u540d\u7684 url \u5217\u8868} 401 \u65e0\u8ba4\u8bc1\u5934\u90e8\u4fe1\u606f\uff08Authorization\uff09\uff08\u63d0\u793a\u4fe1\u606f\uff1aNeed Authorization Header\uff09 401 \u65e0\u8ba4\u8bc1\u5934\u90e8\u4fe1\u606f\uff08Date\uff09\uff08\u63d0\u793a\u4fe1\u606f\uff1aNeed Date Header\uff09 401 \u64cd\u4f5c\u5458\u4e0d\u5b58\u5728\uff08\u63d0\u793a\u4fe1\u606f\uff1aUser is not exists\uff09 401 \u7a7a\u95f4\u540d\u4e0d\u5b58\u5728\uff08\u63d0\u793a\u4fe1\u606f\uff1aBucket is not exists\uff09 401 \u8bf7\u6c42\u65f6\u95f4\u8d85\u51fa 30 \u5206\u949f\uff08\u63d0\u793a\u4fe1\u606f\uff1aDate offset error\uff09 401 \u7b7e\u540d\u9519\u8bef\uff08\u63d0\u793a\u4fe1\u606f\uff1aSign error\uff09 406 \u6bcf\u5206\u949f\u5237\u65b0 URL \u4e2a\u6570\u8d85\u8fc7 600 \u9650\u5236"},{"location":"api/quick_start/","title":"\u5feb\u901f\u5165\u95e8","text":""},{"location":"api/quick_start/#_1","title":"\u5f00\u59cb\u4f7f\u7528\u53c8\u62cd\u4e91\u5b58\u50a8","text":"<p>\u53c8\u62cd\u4e91\u5b58\u50a8\u662f\u9762\u5411\u5bf9\u8c61\u7684\u5b58\u50a8\u670d\u52a1\uff0c\u5b83\u4e0e\u53c8\u62cd\u4e91 CDN \u65e0\u7f1d\u8854\u63a5\u5728\u4e00\u8d77\uff0c\u5728\u60a8\u4f7f\u7528\u5b83\u7684\u540c\u65f6\uff0c\u4e5f\u5728\u4f7f\u7528\u53c8\u62cd\u4e91 CDN\u3002\u5728\u4f7f\u7528\u53c8\u62cd\u4e91\u5b58\u50a8\u4e4b\u524d\uff0c\u8bf7\u786e\u4fdd\u60a8\u5df2\u7ecf\u6ce8\u518c\u4e86\u53c8\u62cd\u4e91\u8d26\u53f7\u5e76\u5b8c\u6210\u5b9e\u540d\u9a8c\u8bc1\u3002</p>"},{"location":"api/quick_start/#_2","title":"\u521b\u5efa\u670d\u52a1","text":"<p>\u767b\u5f55\u53c8\u62cd\u4e91\u63a7\u5236\u53f0\uff0c\u5728 \u300c\u4e91\u4ea7\u54c1\u300d \u4e2d\u9009\u62e9 \u300c\u4e91\u5b58\u50a8\u300d\uff0c\u70b9\u51fb \u300c\u521b\u5efa\u670d\u52a1\u300d \u3002</p> <p></p> <p>\u8f93\u5165 \u300c\u670d\u52a1\u540d\u79f0\u300d\uff0c\u5e76\u4e3a\u8be5\u670d\u52a1\u521b\u5efa\u6216\u6388\u6743\u64cd\u4f5c\u5458\u3002</p> <p></p> <p>\u70b9\u51fb \u300c\u521b\u5efa\u300d\uff0c\u4e91\u5b58\u50a8\u670d\u52a1\u521b\u5efa\u6210\u529f\u3002</p>"},{"location":"api/quick_start/#_3","title":"\u670d\u52a1\u4f7f\u7528","text":"<p>\u53c8\u62cd\u4e91\u5b58\u50a8\u63d0\u4f9b\u4e86\u591a\u79cd\u65b9\u5f0f\u4f7f\u7528\u670d\u52a1\uff0c\u60a8\u53ef\u4ee5\u6839\u636e\u60c5\u51b5\uff0c\u9009\u62e9\u5408\u9002\u7684\u65b9\u5f0f\u3002</p> <ul> <li>\u56fe\u5f62\u5316\u5de5\u5177\uff1aFTP/FTPS</li> <li>\u547d\u4ee4\u884c\u5de5\u5177\uff1aUPX\uff0ccURL</li> <li>SDK\uff1a\u5404\u8bed\u8a00 SDK </li> <li>API\uff1aREST API \uff0cFORM API</li> </ul> <p></p>"},{"location":"api/quick_start/#_4","title":"\u64cd\u4f5c\u5458\u4f7f\u7528","text":"<ul> <li>\u5728\u521b\u5efa\u670d\u52a1\u65f6\uff0c\u521b\u5efa\u6216\u6388\u6743\u64cd\u4f5c\u5458\u3002</li> <li>\u5728\u300c\u914d\u7f6e\u300d&gt;\u300c\u5185\u5bb9\u7ba1\u7406\u300d&gt;\u300c\u64cd\u4f5c\u5458\u6388\u6743\u300d\u4e2d\uff0c\u521b\u5efa\u6216\u6388\u6743\u64cd\u4f5c\u5458\u3002</li> <li>\u5728\u300c\u8d26\u53f7\u300d&gt;\u300c\u8d26\u53f7\u7ba1\u7406\u300d&gt;\u300c\u64cd\u4f5c\u5458\u7ba1\u7406\u300d\u4e2d\uff0c\u7ba1\u7406\u64cd\u4f5c\u5458\u3002</li> <li>\u64cd\u4f5c\u5458\u7684\u89e3\u91ca\u8bf4\u660e\uff0c\u89c1\u57fa\u672c\u6982\u5ff5\u3002</li> </ul>"},{"location":"api/quick_start/#_5","title":"\u5220\u9664\u670d\u52a1","text":"<p>\u767b\u5f55\u53c8\u62cd\u4e91\u63a7\u5236\u53f0\uff0c\u9009\u62e9 \u300c\u4e91\u5b58\u50a8\u300d\uff0c\u5148 \u300c\u5173\u95ed\u300d \u9700\u8981\u5220\u9664\u7684\u670d\u52a1\uff0c\u7136\u540e\u70b9 \u300c\u5220\u9664\u300d\uff0c\u5373\u53ef\u4ee5\u5220\u9664\u670d\u52a1\u3002</p> <p>\u7279\u522b\u5730\uff0c\u670d\u52a1\u5220\u9664\u524d\uff0c\u9700\u8981\u6e05\u7a7a\u670d\u52a1\u4e0b\u7684\u6570\u636e\uff1b\u670d\u52a1\u5220\u9664\u540e\uff0c\u4e03\u5929\u5185\u4e0d\u80fd\u521b\u5efa\u540c\u540d\u670d\u52a1\u3002</p> <p>\u5982\u6709\u7591\u95ee\u8bf7 \u8054\u7cfb\u6211\u4eec</p>"},{"location":"api/rest_api/","title":"REST API","text":"<p>\u57fa\u4e8e RESTful \u67b6\u6784\u7684 API\uff0c\u60a8\u53ef\u4ee5\u4f7f\u7528\u4efb\u4f55\u7f16\u7a0b\u8bed\u8a00\u53d1\u9001 HTTP/HTTPS \u8bf7\u6c42\u4e0e\u4e91\u5b58\u50a8\u901a\u4fe1\u3002\u7279\u522b\u5730\uff0c\u6587\u4e2d\u8bf7\u6c42\u53c2\u6570\u5747\u901a\u8fc7 HTTP/HTTPS \u8bf7\u6c42\u5934\u4ee5 <code>Key: Value</code> \u7684\u5f62\u5f0f\u4f20\u9012\u3002</p>"},{"location":"api/rest_api/#_1","title":"\u8bf7\u6c42\u65b9\u6cd5","text":"<pre><code>curl -X GET \\\n    http://v0.api.upyun.com/&lt;bucket&gt;/&lt;path&gt; \\\n    -H \"Authorization: UPYUN &lt;Operator&gt;:&lt;Signature&gt;\" \\\n    -H \"Date: &lt;Wed, 29 Oct 2014 11:26:58 GMT&gt;\"\\\n    -H \"Content-MD5: &lt;Content-MD5&gt;\"\\\n    # \u5176\u4ed6\u53ef\u9009\u53c2\u6570...\n</code></pre> <p>\u57fa\u672c\u57df\u540d</p> <ul> <li>\u667a\u80fd\u9009\u8def\uff08\u63a8\u8350\uff09\uff1a<code>v0.api.upyun.com</code></li> <li>\u7535\u4fe1\u7ebf\u8def\uff1a<code>v1.api.upyun.com</code></li> <li>\u8054\u901a\uff08\u7f51\u901a\uff09\u7ebf\u8def\uff1a<code>v2.api.upyun.com</code></li> <li>\u79fb\u52a8\uff08\u94c1\u901a\uff09\u7ebf\u8def\uff1a<code>v3.api.upyun.com</code></li> </ul> <p>\u8ba4\u8bc1\u9274\u6743</p> <p>\u8be6\u89c1\u7b7e\u540d\u8ba4\u8bc1\u3002</p> <p></p>"},{"location":"api/rest_api/#_2","title":"\u4e0a\u4f20\u6587\u4ef6","text":"<p>\u628a\u6587\u4ef6\u4e0a\u4f20\u81f3\u53c8\u62cd\u4e91\u5b58\u50a8\u3002\u5728\u4e0a\u4f20\u56fe\u7247\u6587\u4ef6\u65f6\uff0c\u53ef\u4ee5\u8bbe\u7f6e\u9884\u5904\u7406\u53c2\u6570\uff0c\u56fe\u7247\u4f1a\u5904\u7406\u540e\u518d\u4fdd\u5b58\u3002</p> <pre><code>PUT /&lt;bucket&gt;/path/to/file\n</code></pre> <p>\u4e0a\u4f20\u53c2\u6570</p> \u53c2\u6570 \u5fc5\u9009 \u7c7b\u578b \u8bf4\u660e Date \u662f String \u8bf7\u6c42\u65e5\u671f\u65f6\u95f4\uff0cGMT \u683c\u5f0f\u5b57\u7b26\u4e32 (RFC 1123)\uff0c\u5982 <code>Wed, 29 Oct 2014 02:26:58 GMT</code> Content-Length \u662f String \u8bf7\u6c42\u5185\u5bb9\u957f\u5ea6 Content-MD5 \u5426 String \u4e0a\u4f20\u6587\u4ef6\u7684 MD5 \u503c\uff0c\u5982\u679c\u8bf7\u6c42\u4e2d\u6587\u4ef6\u592a\u5927\u8ba1\u7b97 MD5 \u4e0d\u65b9\u4fbf\uff0c\u53ef\u4ee5\u4e3a\u7a7a Content-Type \u5426 String \u6587\u4ef6\u7c7b\u578b\uff0c\u9ed8\u8ba4\u4f7f\u7528\u6587\u4ef6\u6269\u5c55\u540d\u4f5c\u4e3a\u6587\u4ef6\u7c7b\u578b Content-Secret \u5426 String \u6587\u4ef6\u5bc6\u94a5\uff0c\u7528\u4e8e\u4fdd\u62a4\u6587\u4ef6\uff0c\u9632\u6b62\u6587\u4ef6\u88ab\u76f4\u63a5\u8bbf\u95ee\uff0c\u89c1 Content-Secret \u53c2\u6570\u8bf4\u660e x-upyun-meta-x \u5426 String \u6587\u4ef6\u5143\u4fe1\u606f\uff0c\u89c1 Metadata x-upyun-meta-ttl \u5426 Integer \u6587\u4ef6\u5143\u4fe1\u606f, \u6307\u5b9a\u6587\u4ef6\u7684\u751f\u5b58\u65f6\u95f4\uff0c\u5355\u4f4d\u5929\uff0c\u6700\u5927\u652f\u6301180\u5929\uff0c\u89c1 Metadata x-gmkerl-thumb \u5426 String \u56fe\u7247\u9884\u5904\u7406\u53c2\u6570\uff0c\u89c1\u4e0a\u4f20\u9884\u5904\u7406\uff08\u540c\u6b65\uff09 <p>\u54cd\u5e94\u4fe1\u606f</p> <ul> <li>\u4e0a\u4f20\u6210\u529f\uff1a\u8fd4\u56de <code>200</code>\uff0c\u5f53\u4e0a\u4f20\u6587\u4ef6\u662f\u56fe\u7247\u4e14\u8bbe\u7f6e <code>x-gmkerl-xxx</code> \u65f6\uff0c\u5305\u542b\u56fe\u7247\u57fa\u672c\u4fe1\u606f\uff08\u5305\u62ec\u56fe\u7247\u5bbd\u3001\u9ad8\u3001\u683c\u5f0f\u3001\u5e27\u6570\uff09\uff0c\u4f8b\u5982\uff1a</li> </ul> <pre><code>&gt; HTTP/1.1 200 OK\n&gt; x-upyun-width: 50\n&gt; x-upyun-height: 50\n&gt; x-upyun-file-type: JPEG\n&gt; x-upyun-frames: 1\n</code></pre> <ul> <li>\u4e0a\u4f20\u5931\u8d25\uff1a\u8fd4\u56de\u76f8\u5e94\u7684\u51fa\u9519\u4fe1\u606f\uff0c\u5177\u4f53\u8bf7\u53c2\u9605\u300cAPI \u9519\u8bef\u7801\u8868\u300d\u3002</li> </ul> <p> Content-Secret \u53c2\u6570\u8bf4\u660e</p> <ul> <li> <p>\u6587\u4ef6\u8bbe\u7f6e <code>Content-Secret</code> \u540e\uff0c\u6587\u4ef6\u5c06\u4e0d\u80fd\u88ab\u76f4\u63a5\u8bbf\u95ee\uff0c\u82e5\u9700\u8bbf\u95ee\uff0c\u9700\u8981\u5728 URL \u540e\u52a0\u4e0a \u300c\u95f4\u9694\u6807\u8bc6\u7b26\u300d \u548c \u300c\u6587\u4ef6\u5bc6\u94a5\u300d\u3002\u5982\uff1a \u95f4\u9694\u7b26\u4e3a <code>!</code>\uff0c<code>Content-Secret</code> \u4e3a <code>abc</code>\uff0c\u56fe\u7247\u8bbf\u95ee\u65b9\u5f0f\u4e3a\uff1a <code>https://p.upyun.com/docs/cloud/secret.jpg!abc</code>\u3002</p> </li> <li> <p>\u95f4\u9694\u6807\u8bc6\u7b26 \u7528\u4e8e\u5206\u9694\u6587\u4ef6 URL \u548c\u6587\u4ef6\u5bc6\u94a5\uff0c\u6709 3 \u79cd\u53ef\u9009\uff0c\u5206\u522b\u662f\uff1a!\uff08\u611f\u53f9\u53f7/\u9ed8\u8ba4\u503c\uff09\u3001-\uff08\u4e2d\u5212\u7ebf\uff09\u548c _\uff08\u4e0b\u5212\u7ebf\uff09\uff0c\u53ef\u767b\u5f55\u53c8\u62cd\u4e91\u63a7\u5236\u53f0\uff0c\u5728 \u300c\u670d\u52a1\u300d &gt; \u300c\u529f\u80fd\u914d\u7f6e\u300d &gt; \u300c\u4e91\u5904\u7406\u300d \u4e2d\u8bbe\u7f6e\u3002</p> </li> <li> <p>\u5220\u9664\u6216\u4fee\u6539 <code>Content-Secret</code>\uff0c\u89c1 Metadata \u7684\u5e38\u89c1\u5e94\u7528\u6848\u4f8b\u3002</p> </li> <li> <p>\u5982\u679c\u539f\u6587\u4ef6\u662f\u4e00\u5f20\u56fe\u7247\uff0c\u9664\u4e86\u901a\u8fc7\u6587\u4ef6\u5bc6\u7801\u8fdb\u884c\u8bbf\u95ee\u5916\uff0c\u8fd8\u53ef\u4ee5\u901a\u8fc7\u56fe\u7247\u5904\u7406\u8fdb\u884c\u8bbf\u95ee\u3002</p> </li> <li> <p>\u5982\u679c\u539f\u6587\u4ef6\u662f\u4e00\u5f20\u56fe\u7247\uff0c\u6587\u4ef6\u5bc6\u94a5\u5e94\u907f\u514d\u4e0e\u7f29\u7565\u56fe\u7248\u672c\u51b2\u7a81\uff0c\u5982\u679c\u51b2\u7a81\uff0c\u6587\u4ef6\u5bc6\u94a5\u7684\u4f18\u5148\u7ea7\u5927\u4e8e\u7f29\u7565\u56fe\u7248\u672c\u3002</p> </li> </ul> <p></p>"},{"location":"api/rest_api/#_3","title":"\u65ad\u70b9\u7eed\u4f20","text":"<p>\u5728\u4e0a\u4f20\u5927\u6587\u4ef6\u6216\u79fb\u52a8\u7aef\u4e0a\u4f20\u6587\u4ef6\u65f6\uff0c\u56e0\u4e3a\u7f51\u7edc\u8d28\u91cf\u3001\u4f20\u8f93\u65f6\u95f4\u8fc7\u957f\u7b49\u539f\u56e0\u9020\u6210\u4e0a\u4f20\u5931\u8d25\uff0c\u53ef\u4ee5\u4f7f\u7528\u65ad\u70b9\u7eed\u4f20\u3002\u7279\u522b\u5730\uff0c\u65ad\u70b9\u7eed\u4f20\u4e0a\u4f20\u7684\u56fe\u7247\u4e0d\u652f\u6301\u9884\u5904\u7406\u3002\u7279\u522b\u5730\uff0c\u65ad\u70b9\u7eed\u4f20\u4e0a\u4f20\u7684\u6587\u4ef6\u4e0d\u80fd\u4f7f\u7528\u5176\u4ed6\u4e0a\u4f20\u65b9\u5f0f\u8986\u76d6\uff0c\u5982\u679c\u9700\u8981\u8986\u76d6\uff0c\u987b\u5148\u5220\u9664\u6587\u4ef6\u3002</p>"},{"location":"api/rest_api/#_4","title":"\u540d\u79f0\u6982\u5ff5","text":"<ul> <li>\u6587\u4ef6\u5206\u5757\uff1a\u76f4\u63a5\u5207\u5206\u4e8c\u8fdb\u5236\u6587\u4ef6\u6210\u5c0f\u5757\u3002\u5206\u5757\u5927\u5c0f\u56fa\u5b9a\u4e3a 1M\u3002\u6700\u540e\u4e00\u4e2a\u5206\u5757\u9664\u5916\u3002</li> <li>\u4e0a\u4f20\u9636\u6bb5\uff1a\u4f7f\u7528 <code>x-upyun-multi-stage</code> \u53c2\u6570\u6765\u6307\u793a\u65ad\u70b9\u7eed\u4f20\u7684\u9636\u6bb5\u3002\u5206\u4e3a\u4ee5\u4e0b\u4e09\u4e2a\u9636\u6bb5: <code>initate</code>(\u4e0a\u4f20\u521d\u59cb\u5316), <code>upload</code>(\u4e0a\u4f20\u4e2d), <code>complete</code>(\u4e0a\u4f20\u7ed3\u675f)\u3002\u5404\u9636\u6bb5\u4f9d\u6b21\u8fdb\u884c\u3002</li> <li>\u5206\u7247\u5e8f\u53f7\uff1a\u4f7f\u7528 <code>x-upyun-part-id</code> \u53c2\u6570\u6765\u6307\u793a\u5f53\u524d\u7684\u5206\u7247\u5e8f\u53f7\uff0c\u5e8f\u53f7\u4ece 0 \u8d77\u7b97\u3002</li> <li>\u987a\u5e8f\u4e0a\u4f20\uff1a\u5bf9\u4e8e\u540c\u4e00\u4e2a\u65ad\u70b9\u7eed\u4f20\u4efb\u52a1\uff0c\u53ea\u652f\u6301\u987a\u5e8f\u4e0a\u4f20\u3002</li> <li>\u4e0a\u4f20\u6807\u8bc6\uff1a\u4f7f\u7528 <code>x-upyun-multi-uuid</code> \u53c2\u6570\u6765\u552f\u4e00\u6807\u8bc6\u4e00\u6b21\u4e0a\u4f20\u4efb\u52a1, \u7c7b\u578b\u4e3a\u5b57\u7b26\u4e32, \u957f\u5ea6\u4e3a 36 \u4f4d\u3002</li> <li>\u4e0a\u4f20\u6e05\u7406\uff1a\u65ad\u70b9\u7eed\u4f20\u672a\u5b8c\u6210\u7684\u6587\u4ef6\uff0c\u4f1a\u4fdd\u5b58 24 \u5c0f\u65f6\uff0c\u8d85\u8fc7\u540e\uff0c\u6587\u4ef6\u4f1a\u88ab\u5220\u9664\u3002</li> </ul>"},{"location":"api/rest_api/#_5","title":"\u521d\u59cb\u5316\u65ad\u70b9\u7eed\u4f20","text":"<pre><code>PUT /&lt;bucket&gt;/path/to/file\n</code></pre> <p>\u8bf7\u6c42\u53c2\u6570</p> \u53c2\u6570 \u5fc5\u9009 \u7c7b\u578b \u8bf4\u660e Content-Length \u662f String \u8bf7\u6c42\u5185\u5bb9\u957f\u5ea6 x-upyun-multi-stage \u662f String \u503c\u4e3a <code>initiate</code>\uff0c \u8868\u793a\u521d\u59cb\u5316\u4e0a\u4f20\u4efb\u52a1 x-upyun-multi-length \u662f String \u5f85\u4e0a\u4f20\u6587\u4ef6\u5927\u5c0f\uff0c\u6574\u578b\uff0c\u5355\u4f4d Byte x-upyun-multi-type \u5426 String \u5f85\u4e0a\u4f20\u6587\u4ef6\u7684 <code>MIME</code> \u7c7b\u578b\uff0c\u9ed8\u8ba4 <code>application/octet-stream</code>\uff0c\u5efa\u8bae\u81ea\u884c\u8bbe\u7f6e x-upyun-meta-x \u5426 String \u7528\u4e8e\u989d\u5916\u6307\u5b9a\u6587\u4ef6\u7684\u5143\u4fe1\u606f\uff0c\u8be6\u89c1 Metadata x-upyun-meta-ttl \u5426 Integer \u6587\u4ef6\u5143\u4fe1\u606f, \u6307\u5b9a\u6587\u4ef6\u7684\u751f\u5b58\u65f6\u95f4\uff0c\u5355\u4f4d\u5929\uff0c\u6700\u5927\u652f\u6301180\u5929\uff0c\u89c1 Metadata <p>\u54cd\u5e94\u4fe1\u606f</p> <p>\u521d\u59cb\u5316\u65ad\u70b9\u7eed\u4f20\u6210\u529f\u8fd4\u56de <code>204</code> \u72b6\u6001\u7801, \u5305\u62ec\u4ee5\u4e0b\u54cd\u5e94\u53c2\u6570\uff1a</p> \u53c2\u6570 \u7c7b\u578b \u8bf4\u660e x-upyun-multi-uuid String \u672c\u6b21\u4e0a\u4f20\u4efb\u52a1\u7684\u6807\u8bc6 x-upyun-next-part-id String \u4e0b\u4e00\u4e2a\u5206\u5757\u5e8f\u53f7\u3002\u56e0\u4e3a\u662f\u521d\u59cb\u5316\u9636\u6bb5\uff0c\u6240\u4ee5\u503c\u4e3a <code>0</code> <p>\u4e0a\u4f20\u5931\u8d25\u65f6\u8fd4\u56de\u76f8\u5e94\u7684\u51fa\u9519\u4fe1\u606f\uff0c\u5177\u4f53\u8bf7\u53c2\u9605\u300cAPI \u9519\u8bef\u7801\u8868\u300d\u3002</p>"},{"location":"api/rest_api/#_6","title":"\u7eed\u4f20\u6570\u636e","text":"<pre><code>PUT /&lt;bucket&gt;/path/to/file\n</code></pre> <p>\u8bf7\u6c42\u53c2\u6570</p> \u53c2\u6570 \u5fc5\u9009 \u7c7b\u578b \u8bf4\u660e Content-Length \u662f String \u8bf7\u6c42\u5185\u5bb9\u957f\u5ea6 x-upyun-multi-stage \u662f String \u503c\u4e3a <code>upload</code>\uff0c \u8868\u793a\u5f00\u59cb\u4e0a\u4f20\u6587\u4ef6\u6570\u636e x-upyun-multi-uuid \u662f String \u672c\u6b21\u4e0a\u4f20\u4efb\u52a1\u7684\u6807\u8bc6\uff0c\u662f\u521d\u59cb\u5316\u65ad\u70b9\u7eed\u4f20\u4efb\u52a1\u65f6\u54cd\u5e94\u4fe1\u606f\u4e2d\u7684 <code>x-upyun-multi-uuid</code> x-upyun-part-id \u662f String \u6307\u5b9a\u6b64\u6b21\u5206\u7247\u7684\u552f\u4e00 ID\uff0c\u5e94\u4e25\u683c\u7b49\u4e8e\u4e0a\u4e00\u6b21\u8bf7\u6c42\u8fd4\u56de\u7684 <code>x-upyun-next-part-id</code> Content-MD5 \u5426 String \u6240\u4e0a\u4f20\u5206\u5757\u7684 MD5 \u503c\uff0c\u7b49\u6548\u4e8e\u7b7e\u540d\u8ba4\u8bc1\u4e2d\u7684 <code>Content-MD5</code> <p>\u54cd\u5e94\u4fe1\u606f</p> <p>\u65ad\u70b9\u7eed\u4f20\u6b64\u5206\u5757\u6210\u529f\u8fd4\u56de <code>204</code> \u72b6\u6001\u7801, \u5305\u62ec\u4ee5\u4e0b\u54cd\u5e94\u53c2\u6570\uff1a</p> \u53c2\u6570 \u7c7b\u578b \u8bf4\u660e x-upyun-multi-uuid String \u672c\u6b21\u4e0a\u4f20\u4efb\u52a1\u7684\u6807\u8bc6 x-upyun-next-part-id String \u4e0b\u4e00\u4e2a\u5206\u5757\u5e8f\u53f7\u3002\u82e5\u5168\u90e8\u5206\u5757\u90fd\u5df2\u7ecf\u4f20\u5b8c\uff0c\u5219\u8be5\u54cd\u5e94\u5934\u503c\u4e3a <code>-1</code> <p>\u4e0a\u4f20\u5931\u8d25\u65f6\u8fd4\u56de\u76f8\u5e94\u7684\u51fa\u9519\u4fe1\u606f\uff0c\u5177\u4f53\u8bf7\u53c2\u9605\u300cAPI \u9519\u8bef\u7801\u8868\u300d\u3002</p>"},{"location":"api/rest_api/#_7","title":"\u7ed3\u675f\u65ad\u70b9\u7eed\u4f20","text":"<pre><code>PUT /&lt;bucket&gt;/path/to/file\n</code></pre> <p>\u8bf7\u6c42\u53c2\u6570</p> \u53c2\u6570 \u5fc5\u9009 \u7c7b\u578b \u8bf4\u660e Content-Length \u662f String \u8bf7\u6c42\u5185\u5bb9\u957f\u5ea6 x-upyun-multi-stage \u662f String \u503c\u4e3a <code>complete</code>\uff0c \u8868\u793a\u5b8c\u6210\u65ad\u70b9\u7eed\u4f20\u4efb\u52a1 x-upyun-multi-uuid \u662f String \u672c\u6b21\u4e0a\u4f20\u4efb\u52a1\u7684\u6807\u8bc6\uff0c\u662f\u521d\u59cb\u5316\u65ad\u70b9\u7eed\u4f20\u4efb\u52a1\u65f6\u54cd\u5e94\u4fe1\u606f\u4e2d\u7684 <code>x-upyun-multi-uuid</code> Content-MD5 \u5426 String \u8bf7\u6c42\u7684 MD5 \u503c\uff0c\u7b49\u6548\u4e8e\u7b7e\u540d\u8ba4\u8bc1\u4e2d\u7684 <code>Content-MD5</code> x-upyun-multi-md5 \u5426 String \u6574\u4e2a\u6587\u4ef6\u7684 MD5 \u503c\uff0c\u7528\u4e8e\u670d\u52a1\u7aef\u6821\u9a8c <p>\u54cd\u5e94\u4fe1\u606f</p> <p>\u7ed3\u675f\u65ad\u70b9\u7eed\u4f20\u6210\u529f\uff0c\u5982\u679c\u8fd4\u56de <code>204</code> \u72b6\u6001\u7801\uff0c\u8868\u793a\u6587\u4ef6\u8986\u76d6\u540c\u540d\u6587\u4ef6\uff1b\u5982\u679c\u8fd4\u56de <code>201</code> \u72b6\u6001\u7801\uff0c\u8868\u793a\u6587\u4ef6\u662f\u65b0\u6587\u4ef6\u3002</p> <p>\u54cd\u5e94\u4fe1\u606f\u8fd8\u5305\u62ec\u4ee5\u4e0b\u54cd\u5e94\u53c2\u6570\uff1a</p> \u53c2\u6570 \u7c7b\u578b \u8bf4\u660e x-upyun-multi-uuid String \u672c\u6b21\u4e0a\u4f20\u4efb\u52a1\u7684\u6807\u8bc6 x-upyun-multi-type String \u672c\u6b21\u4e0a\u4f20\u6587\u4ef6\u7684 <code>MIME</code> \u7c7b\u578b x-upyun-multi-length String \u672c\u6b21\u4e0a\u4f20\u6587\u4ef6\u5927\u5c0f\uff0c\u6574\u578b\uff0c\u5355\u4f4d Byte <p>\u4e0a\u4f20\u5931\u8d25\u65f6\u8fd4\u56de\u76f8\u5e94\u7684\u51fa\u9519\u4fe1\u606f\uff0c\u5177\u4f53\u8bf7\u53c2\u9605\u300cAPI \u9519\u8bef\u7801\u8868\u300d\u3002</p>"},{"location":"api/rest_api/#_8","title":"\u4e0b\u8f7d\u6587\u4ef6","text":"<pre><code>GET /&lt;bucket&gt;/path/to/file\n</code></pre> <p>\u54cd\u5e94\u4fe1\u606f</p> <ul> <li>\u4e0b\u8f7d\u6210\u529f\uff1a\u8fd4\u56de <code>200</code>\uff0cHTTP body \u4e2d\u8fd4\u56de\u6587\u4ef6\u5185\u5bb9\u3002</li> <li>\u4e0b\u8f7d\u5931\u8d25\uff1a\u8fd4\u56de\u76f8\u5e94\u7684\u51fa\u9519\u4fe1\u606f\uff0c\u5177\u4f53\u8bf7\u53c2\u9605\u300cAPI \u9519\u8bef\u7801\u8868\u300d\u3002</li> </ul>"},{"location":"api/rest_api/#_9","title":"\u5220\u9664\u6587\u4ef6","text":"<pre><code>DELETE /&lt;bucket&gt;/path/to/file\n</code></pre> <p>\u8bf7\u6c42\u53c2\u6570</p> \u53c2\u6570 \u5fc5\u9009 \u8bf4\u660e x-upyun-async \u5426 <code>true</code> \u8868\u793a\u8fdb\u884c\u5f02\u6b65\u5220\u9664\uff0c\u4e0d\u8bbe\u7f6e\u8868\u793a\u540c\u6b65\u5220\u9664\uff08\u9ed8\u8ba4\uff09 <p>\u54cd\u5e94\u4fe1\u606f</p> <ul> <li>\u5220\u9664\u6210\u529f\uff1a\u8fd4\u56de <code>200</code>\u3002</li> <li>\u5220\u9664\u5931\u8d25\uff1a\u8fd4\u56de\u76f8\u5e94\u7684\u51fa\u9519\u4fe1\u606f\uff0c\u5177\u4f53\u8bf7\u53c2\u9605\u300cAPI \u9519\u8bef\u7801\u8868\u300d\u3002</li> </ul> <p>\u6ce8</p> <ul> <li>\u540c\u6b65\u5220\u9664\u6709\u9891\u7387\u9650\u5236\uff0c\u6279\u91cf\u5220\u9664\u8bf7\u5728\u8bf7\u6c42\u5934\u91cc\u52a0\u4e0a <code>x-upyun-async: true</code> \u8fdb\u884c\u5f02\u6b65\u5220\u9664\uff08\u65e0\u9891\u7387\u9650\u5236\uff09\u3002</li> <li>\u5f02\u6b65\u5220\u9664\u8bf7\u6c42\u6210\u529f\uff0c\u8fd4\u56de <code>200</code>\uff0c\u4f46\u5220\u9664\u64cd\u4f5c\u4f1a\u5ef6\u671f\u6267\u884c\u3002</li> </ul>"},{"location":"api/rest_api/#_10","title":"\u521b\u5efa\u76ee\u5f55","text":"<pre><code>POST /&lt;bucket&gt;/path/to/folder\n</code></pre> <p>\u8bf7\u6c42\u53c2\u6570</p> \u53c2\u6570 \u5fc5\u9009 \u8bf4\u660e folder \u662f \u503c\u4e3a <code>true</code> <p>\u54cd\u5e94\u4fe1\u606f</p> <ul> <li>\u521b\u5efa\u6210\u529f\uff1a\u8fd4\u56de <code>200</code>\u3002</li> <li>\u521b\u5efa\u5931\u8d25\uff1a\u8fd4\u56de\u76f8\u5e94\u7684\u51fa\u9519\u4fe1\u606f\uff0c\u5177\u4f53\u8bf7\u53c2\u9605\u300cAPI \u9519\u8bef\u7801\u8868\u300d\u3002</li> </ul>"},{"location":"api/rest_api/#_11","title":"\u5220\u9664\u76ee\u5f55","text":"<pre><code>DELETE /&lt;bucket&gt;/path/to/folder\n</code></pre> <p>\u54cd\u5e94\u4fe1\u606f</p> <ul> <li>\u5220\u9664\u6210\u529f\uff1a\u8fd4\u56de <code>200</code>\u3002</li> <li>\u5220\u9664\u5931\u8d25\uff1a\u8fd4\u56de\u76f8\u5e94\u7684\u51fa\u9519\u4fe1\u606f\uff0c\u5177\u4f53\u8bf7\u53c2\u9605\u300cAPI \u9519\u8bef\u7801\u8868\u300d\u3002</li> </ul> <p>\u6ce8</p> <ul> <li>\u53ea\u5141\u8bb8\u5220\u9664\u7a7a\u7684\u76ee\u5f55\uff0c\u975e\u7a7a\u76ee\u5f55\u9700\u8981\u5148\u5220\u9664\u91cc\u9762\u7684\u6587\u4ef6\uff0c\u5426\u5219\u5220\u9664\u8bf7\u6c42\u4f1a\u88ab\u62d2\u7edd\u3002</li> </ul>"},{"location":"api/rest_api/#_12","title":"\u83b7\u53d6\u6587\u4ef6\u4fe1\u606f","text":"<pre><code>HEAD /&lt;bucket&gt;/path/to/file\n</code></pre> <p>\u54cd\u5e94\u4fe1\u606f</p> <ul> <li> <p>\u83b7\u53d6\u6210\u529f\uff1a\u8fd4\u56de <code>200</code>\uff0c\u8fd4\u56de\u5934\u4fe1\u606f\u5982\u4e0b\u6240\u793a\uff1a</p> \u53c2\u6570 \u8bf4\u660e x-upyun-file-type \u6587\u4ef6\u4e3a <code>file</code>\uff0c\u6587\u4ef6\u5939\u4e3a <code>folder</code> x-upyun-file-size \u6587\u4ef6\u5927\u5c0f x-upyun-file-date \u6587\u4ef6\u521b\u5efa\u65f6\u95f4 Content-Md5 \u6587\u4ef6\u7684 MD5 \u503c </li> <li> <p>\u83b7\u53d6\u5931\u8d25\uff1a\u8fd4\u56de\u76f8\u5e94\u7684\u51fa\u9519\u4fe1\u606f\uff0c\u5177\u4f53\u8bf7\u53c2\u9605\u300cAPI \u9519\u8bef\u7801\u8868\u300d\u3002</p> </li> </ul>"},{"location":"api/rest_api/#_13","title":"\u83b7\u53d6\u76ee\u5f55\u6587\u4ef6\u5217\u8868","text":"<pre><code>GET /&lt;bucket&gt;/path/to/folder\n</code></pre> <p>\u5206\u9875\u53c2\u6570</p> <p>\u5982\u679c\u76ee\u5f55\u4e2d\u6587\u4ef6\u6570\u91cf\u8fc7\u591a\uff0c\u4e3a\u4e86\u66f4\u53cb\u597d\u7684\u83b7\u53d6\u6587\u4ef6\u4fe1\u606f\uff0c\u53ef\u4ee5\u5206\u9875\u83b7\u53d6\uff1a</p> \u53c2\u6570 \u5fc5\u9009 \u7c7b\u578b \u8bf4\u660e x-list-iter \u5426 string \u5206\u9875\u5f00\u59cb\u4f4d\u7f6e\uff0c\u901a\u8fc7<code>x-upyun-list-iter</code> \u54cd\u5e94\u5934\u8fd4\u56de\uff0c\u6240\u4ee5\u7b2c\u4e00\u6b21\u8bf7\u6c42\u4e0d\u9700\u8981\u586b\u5199 x-list-limit \u5426 string \u83b7\u53d6\u7684\u6587\u4ef6\u6570\u91cf\uff0c\u9ed8\u8ba4 100\uff0c\u6700\u5927 10000 x-list-order \u5426 string <code>asc</code> \u6216 <code>desc</code>\uff0c\u6309\u6587\u4ef6\u540d\u5347\u5e8f\u6216\u964d\u5e8f\u6392\u5217\u3002\u9ed8\u8ba4 <code>asc</code> Accept \u5426 string <code>application/json</code>,\u8fd4\u56dejson\u683c\u5f0f <p>\u54cd\u5e94\u4fe1\u606f</p> <ul> <li>\u83b7\u53d6\u6210\u529f\uff1a\u8fd4\u56de <code>200</code>\u3002</li> <li>\u83b7\u53d6\u5931\u8d25\uff1a\u8fd4\u56de\u76f8\u5e94\u7684\u51fa\u9519\u4fe1\u606f\uff0c\u5177\u4f53\u8bf7\u53c2\u9605\u300cAPI \u9519\u8bef\u7801\u8868\u300d\u3002</li> </ul> <p>\u4f8b\u5982\uff1a</p> <pre><code>&gt; HTTP/1.1 200 OK\n&gt; x-upyun-list-iter: c2Rmc2Rsamdvc2pnb3dlam9pd2Vmd2Z3Zg==\nfoo.jpg\\tN\\t4237\\t1415096225\\nbar\\tF\\t423404\\t1415096260\n</code></pre> <ul> <li><code>x-upyun-list-iter</code> \u8fd4\u56de\u4e0b\u4e00\u6b21\u5206\u9875\u5f00\u59cb\u4f4d\u7f6e\u3002\u5b83\u7531\u4e00\u4e32 Base64 \u7f16\u7801\u7684\u968f\u673a\u6570\u7ec4\u6210\uff0c\u5f53\u5b83\u662f <code>g2gCZAAEbmV4dGQAA2VvZg</code> \u65f6\uff0c\u8868\u793a\u6700\u540e\u4e00\u4e2a\u5206\u9875\u3002</li> <li>HTTP body \u4e3a\u5404\u4e2a\u6587\u4ef6/\u76ee\u5f55\u7684\u4fe1\u606f\uff0c\u6587\u4ef6/\u76ee\u5f55\u4e4b\u95f4\u4ee5 <code>\\n</code> \u5206\u9694\uff0c\u5c5e\u6027\u6309 \u300c\u6587\u4ef6\\t\u7c7b\u578b\\t\u5927\u5c0f\\t\u6700\u540e\u4fee\u6539\u65f6\u95f4\u300d \u6392\u5217\uff0c\u7c7b\u578b\u53ef\u9009\u503c\uff1a<code>N</code> \u8868\u793a\u6587\u4ef6\uff0c<code>F</code> \u8868\u793a\u76ee\u5f55\u3002</li> </ul> <p>\u82e5\u8bbe\u7f6e\u4e86<code>Accept: application/json</code>\u8bf7\u6c42\u5934\u5219\u8fd4\u56de:</p> <pre><code>{\n    \"files\": [{\n        \"type\": \"image/jpeg\",\n        \"length\": 4237,\n        \"name\": \"foo.jpg\",\n        \"last_modified\": 1415096225\n    }, {\n        \"type\": \"folder\",\n        \"length\": 423404,\n        \"name\": \"bar\",\n        \"last_modified\": 1415096260\n    }],\n    \"iter\": \"c2Rmc2Rsamdvc2pnb3dlam9pd2Vmd2Z3Zg==\"\n}\n</code></pre>"},{"location":"api/rest_api/#_14","title":"\u83b7\u53d6\u670d\u52a1\u4f7f\u7528\u91cf","text":"<pre><code>GET /&lt;bucket&gt;/?usage\n</code></pre> <p>\u54cd\u5e94\u4fe1\u606f</p> <ul> <li>\u83b7\u53d6\u6210\u529f\uff1a\u8fd4\u56de <code>200</code>\u3002HTTP body \u5185\u5bb9\u4e3a\u670d\u52a1\u7684\u4f7f\u7528\u91cf\uff08\u5355\u4f4d\u4e3a<code>Byte</code>\uff09\u3002</li> <li>\u83b7\u53d6\u5931\u8d25\uff1a\u8fd4\u56de\u76f8\u5e94\u7684\u51fa\u9519\u4fe1\u606f\uff0c\u5177\u4f53\u8bf7\u53c2\u9605\u300cAPI \u9519\u8bef\u7801\u8868\u300d\u3002</li> </ul>"},{"location":"api/rest_api/#metadata","title":"Metadata","text":"<p>\u4e0b\u8f7d\u6587\u4ef6\u65f6\uff0c\u5728\u54cd\u5e94\u5934\u91cc\u8fd4\u56de\u6587\u4ef6\u7684\u6240\u6709\u5143\u6570\u636e\u3002</p>"},{"location":"api/rest_api/#metadata_1","title":"\u6dfb\u52a0 Metadata","text":"<p>\u4e0a\u4f20\u6587\u4ef6\u65f6\uff0c\u5982\u679c\u5728\u8bf7\u6c42\u5934\u91cc\u5e26\u4e0a\u4ee5 <code>x-upyun-meta-</code> \u5f00\u5934\u7684\u53c2\u6570\uff0c\u90a3\u4e48\u8be5\u53c2\u6570\u4f1a\u4f5c\u4e3a\u6587\u4ef6\u7684\u5143\u6570\u636e\u5b58\u50a8\u5230\u4e91\u5b58\u50a8\u3002\u4f8b\u5982\uff1a</p> <pre><code>curl -d 'abc' \\\n    http://v0.api.upyun.com/&lt;bucket&gt;/abc.txt \\\n    -H \"Authorization: UPYUN &lt;Operator&gt;:&lt;Signature&gt;\" \\\n    -H \"Date: &lt;Wed, 30 Oct 2016 11:26:58 GMT&gt;\"\\\n    -H \"x-upyun-meta-foo: Bar\"\\\n    -H \"x-upyun-meta-a: 2\"\n</code></pre> <p>\u6587\u4ef6 <code>abc.txt</code> \u4f1a\u589e\u52a0 <code>x-upyun-meta-foo: bar</code> \u548c <code>x-upyun-meta-a: 2</code> \u8fd9\u4e24\u4e2a\u5143\u4fe1\u606f\u3002</p>"},{"location":"api/rest_api/#metadata_2","title":"\u4fee\u6539 Metadata","text":"<pre><code>PATCH /&lt;bucket&gt;/path/to/file?metadata=&lt;option&gt;\n</code></pre> <p>option \u7684\u53d6\u503c\u5982\u4e0b\uff1a</p> option \u8bf4\u660e merge\uff08\u9ed8\u8ba4\uff09 \u5408\u5e76\u6587\u4ef6\u5143\u4fe1\u606f\uff0c\u5982\u679c\u662f\u76f8\u540c\u7684\u5143\u4fe1\u606f\uff0c\u5c06\u88ab\u65b0\u4e0a\u4f20\u7684\u503c\u66ff\u6362 replace \u66ff\u6362\u6587\u4ef6\u5143\u4fe1\u606f\u4e3a\u65b0\u4e0a\u4f20\u7684\u6587\u4ef6\u5143\u4fe1\u606f delete \u5220\u9664\u6587\u4ef6\u5143\u4fe1\u606f <p>\u54cd\u5e94\u4fe1\u606f</p> <ul> <li>\u4fee\u6539\u6210\u529f\uff1a\u8fd4\u56de <code>200</code>\u3002</li> <li>\u4fee\u6539\u5931\u8d25\uff1a\u8fd4\u56de\u76f8\u5e94\u7684\u51fa\u9519\u4fe1\u606f\uff0c\u5177\u4f53\u8bf7\u53c2\u9605\u300cAPI \u9519\u8bef\u7801\u8868\u300d\u3002</li> </ul> <p>\u4e3e\u4f8b</p> <p>\u4f8b 1\uff1a\u5408\u5e76\u5143\u4fe1\u606f\uff0c<code>metadata=merge</code></p> <pre><code>curl -d 'abc' http://v0.api.upyun.com/&lt;bucket&gt;/abc.txt \\\n    -H \"Authorization: Basic b3BlcmF0b3I6cGFzc3dvcmQ=\" \\\n    -H \"x-upyun-meta-a: 1\"\n\ncurl -XPATCH http://v0.api.upyun.com/&lt;bucket&gt;/abc.txt?metadata=merge \\\n    -H \"Authorization: Basic b3BlcmF0b3I6cGFzc3dvcmQ=\" \\\n    -H \"x-upyun-meta-a: 2\" \\\n    -H \"x-upyun-meta-b: 3\"\n</code></pre> <p>\u6587\u4ef6 abc.txt \u7684\u5143\u4fe1\u606f\u662f\uff1a</p> <pre><code>x-upyun-meta-a: 2\nx-upyun-meta-b: 3\n</code></pre> <p>\u4f8b 2\uff1a\u66ff\u6362\u5143\u4fe1\u606f\uff0c<code>metadata=replace</code></p> <pre><code>curl -d 'abc' http://v0.api.upyun.com/&lt;bucket&gt;/abc.txt \\\n    -H \"Authorization: Basic b3BlcmF0b3I6cGFzc3dvcmQ=\" \\\n    -H \"x-upyun-meta-a: 1\" \\\n    -H \"x-upyun-meta-b: 2\"\n\ncurl -XPATCH http://v0.api.upyun.com/&lt;bucket&gt;/abc.txt?metadata=replace \\\n    -H \"Authorization: Basic b3BlcmF0b3I6cGFzc3dvcmQ=\" \\\n    -H \"x-upyun-meta-a: 3\" \\\n    -H \"x-upyun-meta-c: 4\"\n</code></pre> <p>\u6587\u4ef6 abc.txt \u7684\u5143\u4fe1\u606f\u4e3a\uff1a</p> <pre><code>x-upyun-meta-a: 3\nx-upyun-meta-c: 4\n</code></pre> <p>\u4f8b 3\uff1a\u5220\u9664\u5143\u4fe1\u606f\uff0c<code>metadata=delete</code></p> <pre><code>curl -d 'abc' http://v0.api.upyun.com/&lt;bucket&gt;/abc.txt \\\n    -H \"Authorization: Basic b3BlcmF0b3I6cGFzc3dvcmQ=\" \\\n    -H \"x-upyun-meta-a: 1\" \\\n    -H \"x-upyun-meta-b: 2\"\n\ncurl -XPATCH http://v0.api.upyun.com/&lt;bucket&gt;/abc.txt?metadata=delete \\\n    -H \"Authorization: Basic b3BlcmF0b3I6cGFzc3dvcmQ=\" \\\n    -H \"x-upyun-meta-a: true\"\n</code></pre> <p>\u6587\u4ef6 abc.txt \u7684\u5143\u4fe1\u606f\u4e3a\uff1a</p> <pre><code>x-upyun-meta-b: 2\n</code></pre> <p></p>"},{"location":"api/rest_api/#_15","title":"\u5e38\u89c1\u5e94\u7528\u6848\u4f8b","text":"<p>\u4f8b 1\uff1a\u4fee\u6539 Metadata \u9ed8\u8ba4\u4e0d\u66f4\u65b0\u6587\u4ef6\u7684 <code>Last-Modified</code>\uff0c\u5982\u679c\u9700\u8981\u66f4\u65b0\uff0c\u5728\u53c2\u6570\u4e2d\u6307\u5b9a <code>update_last_modified=true</code>\uff1a</p> <pre><code>curl -XPATCH http://v0.api.upyun.com/&lt;bucket&gt;/abc.txt?metadata=replace&amp;update_last_modified=true \\\n    -H \"Authorization: Basic b3BlcmF0b3I6cGFzc3dvcmQ=\" \\\n    -H \"x-upyun-meta-a: 3\" \\\n    -H \"x-upyun-meta-c: 4\"\n</code></pre> <p>\u4f8b 2\uff1a<code>Content-Secret</code> \u662f\u88ab\u5b58\u50a8\u4e3a <code>x-upyun-meta-secret</code> \u5143\u4fe1\u606f\uff0c\u5982\u679c\u9700\u8981\u4fee\u6539\u6216\u5220\u9664\uff0c\u53ef\u4ee5\u5bf9 <code>x-upyun-meta-secret</code> \u8fdb\u884c\u64cd\u4f5c\uff1a</p> <pre><code>curl -XPATCH http://v0.api.upyun.com/&lt;bucket&gt;/abc.txt?metadata=delete \\\n    -H \"Authorization: Basic b3BlcmF0b3I6cGFzc3dvcmQ=\" \\\n    -H \"x-upyun-meta-secret: upyun520\"\n</code></pre>"},{"location":"api/rest_api/#_16","title":"\u7b7e\u540d\u8ba4\u8bc1\uff08\u65e7\uff09","text":"<p>\u7b7e\u540d\u683c\u5f0f</p> <pre><code>Authorization: UpYun &lt;operator&gt;:&lt;signature&gt;\n</code></pre> <p>\u7b7e\u540d\uff08signature\uff09\u7b97\u6cd5</p> <p>\u7b7e\u540d\u6240\u9700\u7684\u76f8\u5173\u4fe1\u606f\u5982\u4e0b\u8868\uff1a</p> \u6240\u9700\u4fe1\u606f \u8bf4\u660e METHOD \u8bf7\u6c42\u65b9\u5f0f\uff0c\u5982\uff1aGET\u3001POST\u3001PUT\u3001HEAD \u7b49 PATH \u8bf7\u6c42\u8def\u5f84\uff0c\u9700 URL \u7f16\u7801\u5904\u7406 (RFC 1738) DATE \u8bf7\u6c42\u65e5\u671f\uff0cGMT \u683c\u5f0f\u5b57\u7b26\u4e32 (RFC 1123) CONTENT_LENGTH \u8bf7\u6c42\u5185\u5bb9\u957f\u5ea6\uff0c\u9664 GET \u7b49\u65e0\u5b9e\u4f53\u8bf7\u6c42\u5916\uff0c\u9700\u548c\u8bf7\u6c42\u5934\u90e8\u7684 <code>Content-Length</code> \u4e00\u81f4 PASSWORD \u670d\u52a1\u7684\u64cd\u4f5c\u5458\u7684\u5bc6\u7801 <p>\u5c06 <code>PASSWORD</code> md5 \u4e4b\u540e\uff08\u6211\u4eec\u6682\u4e14\u5c06\u5176\u8bb0\u4f5c <code>PASSWORD_MD5</code>\uff09\uff0c\u4e0a\u8868\u6240\u6ce8\u7684\u5176\u4ed6\u4fe1\u606f\u4ee5 <code>&amp;</code> \u5b57\u7b26\u8fdb\u884c\u62fc\u63a5\uff08\u6309\u8868\u683c\u4ece\u4e0a\u81f3\u4e0b\u7684\u987a\u5e8f\uff09\u5373\uff08<code>METHOD&amp;PATH&amp;DATE&amp;CONTENT-LENGTH&amp;PASSWORD_MD5</code>\uff09\uff0c\u5e76\u5c06\u6240\u5f97\u5b57\u7b26\u4e32\u8fdb\u884c MD5 \u52a0\u5bc6\uff0c\u5373\u5f97\u6211\u4eec\u6240\u9700\u7684 \u7b7e\u540d\uff08signature\uff09</p> <p>\u6ce8</p> <ul> <li>\u7b7e\u540d\u7684\u6709\u6548\u671f\u4e3a 30 \u5206\u949f\u3002\u5982\u679c\u8d85\u8fc7 30 \u5206\u949f\uff0c\u5219\u9700\u91cd\u65b0\u751f\u6210\u7b7e\u540d\u3002</li> <li>GET\uff0cDELETE \u64cd\u4f5c\u7684 CONTENT_LENGTH \u4e3a 0\u3002</li> </ul> <p>\u4f8b\u5982</p> <p>\u8bf7\u6c42\u65b9\u5f0f\u4e3a <code>GET</code>\uff0cURI \u4e3a <code>bucket</code> \u670d\u52a1\u7684\u5b50\u76ee\u5f55 <code>/sub</code>\uff0c\u8bf7\u6c42\u65f6\u95f4\u4e3a <code>Wed, 29 Oct 2014 02:26:58 GMT</code>\uff0c\u56e0\u4e3a\u662f <code>GET</code>\uff0c\u6240\u4ee5 <code>CONTENT-LENGTH</code> \u4e3a <code>0</code>\uff0c\u5047\u8bbe\u8be5\u670d\u52a1\u6709\u4e00\u4e2a\u6388\u6743\u64cd\u4f5c\u5458\u540d\u4e3a <code>upyun</code>\uff0c\u8be5\u64cd\u4f5c\u5458\u5bc6\u7801\u4e3a <code>password</code>\uff08\u5bc6\u7801 md5 \u540e\u4e3a <code>5f4dcc3b5aa765d61d8327deb882cf99</code>\uff09\uff0c\u90a3\u4e48\uff1a</p> <p>\u7b7e\u540d\uff08signature\uff09\u5373\u662f\u5bf9\u5b57\u7b26\u4e32 <code>GET&amp;/bucket/sub&amp;Wed, 29 Oct 2014 02:26:58 GMT&amp;0&amp;5f4dcc3b5aa765d61d8327deb882cf99</code> \u8ba1\u7b97 MD5 \u6240\u5f97\uff0c\u5373\uff1a<code>03db45e2904663c5c9305a9c6ed62af3</code>\uff0c\u56e0\u6b64\uff0c\u53ea\u9700\u5728\u8bf7\u6c42\u5934\u90e8\u52a0\u4e0a\u5982\u4e0b\u5b57\u6bb5\u5373\u53ef\uff1a</p> <pre><code>Authorization: UpYun upyun:03db45e2904663c5c9305a9c6ed62af3\n</code></pre>"},{"location":"api/rest_api/#_17","title":"\u56fe\u7247\u9884\u5904\u7406\uff08\u65e7\uff09","text":"\u53c2\u6570 \u5fc5\u9009 \u8bf4\u660e x-gmkerl-extract-color-count \u5426 \u4e3b\u9898\u8272\u63d0\u53d6\u7684\u989c\u8272\u6570\u91cf\uff0c\u9ed8\u8ba4 <code>256</code> x-gmkerl-extract-format \u5426 \u4e3b\u9898\u8272\u63d0\u53d6\u683c\u5f0f\uff0c\u9ed8\u8ba4 <code>hex</code> x-gmkerl-thumbnail \u5426 \u7f29\u7565\u56fe\u7248\u672c\u540d\u79f0\uff0c\u53ef\u642d\u914d\u5176\u4ed6 <code>x-gmkerl-*</code> \u53c2\u6570\u4f7f\u7528 x-gmkerl-type \u5426 \u7f29\u7565\u7c7b\u578b\uff0c\u89c1 x-gmkerl-type \u53ef\u9009\u503c\u5217\u8868 x-gmkerl-value \u5426 \u7f29\u7565\u7c7b\u578b\u5bf9\u5e94\u7684\u53c2\u6570\u503c\uff0c\u89c1 x-gmkerl-value \u503c\u8bf4\u660e x-gmkerl-quality \u5426 \u538b\u7f29\u8d28\u91cf\uff0c\u9ed8\u8ba4 <code>95</code> x-gmkerl-unsharp \u5426 \u662f\u5426\u9510\u5316\uff0c\u9ed8\u8ba4\u9510\u5316 x-gmkerl-rotate \u5426 \u56fe\u7247\u65cb\u8f6c\uff08\u987a\u65f6\u9488\uff09\uff0c\u53ef\u9009\u503c\uff1a<code>auto</code>\u3001<code>(0, 360]</code>\u3002\u8be6\u89c1\u65cb\u8f6c x-gmkerl-crop \u5426 \u56fe\u7247\u88c1\u526a\uff0c\u683c\u5f0f\uff1a<code>&lt;w&gt;x&lt;h&gt;a&lt;x&gt;a&lt;y&gt;</code>\u3002\u8be6\u89c1\u88c1\u526a x-gmkerl-exif-switch \u5426 \u662f\u5426\u4fdd\u7559 EXIF \u4fe1\u606f\uff0c\u9ed8\u8ba4\u4e0d\u4fdd\u7559  \u4ec5\u5728\u642d\u914d <code>x-gmkerl-crop</code>\u3001<code>x-gmkerl-type</code>\u3001<code>x-gmkerl-thumbnail</code> \u65f6\u6709\u6548 x-gmkerl-watermark-text \u5426 \u6587\u5b57\u6c34\u5370\u5185\u5bb9\uff0c\u5fc5\u987b\u7ecf\u8fc7 urlencode \u5904\u7406 x-gmkerl-watermark-font \u5426 \u6587\u5b57\u6c34\u5370\u5b57\u4f53\uff0c\u9ed8\u8ba4 <code>simsun</code>\uff0c\u89c1 x-gmkerl-watermark-font \u53ef\u9009\u503c\u5217\u8868 x-gmkerl-watermark-size \u5426 \u6587\u5b57\u6c34\u5370\u5b57\u4f53\u5927\u5c0f\uff0c\u6b63\u6574\u6570\uff0c\u5355\u4f4d\u50cf\u7d20\uff0c\u9ed8\u8ba4 <code>32</code> x-gmkerl-watermark-align \u5426 \u6c34\u5370\u5bf9\u9f50\u65b9\u5f0f\uff0c\u9ed8\u8ba4 <code>top,left</code>\uff0c\u89c1 x-gmkerl-watermark-align \u503c\u8bf4\u660e x-gmkerl-watermark-margin \u5426 \u6c34\u5370\u8fb9\u8ddd\uff0c\u683c\u5f0f <code>x,y</code>\uff0c\u65e2 <code>\u6c34\u5e73\u8fb9\u8ddd,\u5782\u76f4\u8fb9\u8ddd</code>\uff0c\u5355\u4f4d\u50cf\u7d20\uff0c\u9ed8\u8ba4 <code>20,20</code> x-gmkerl-watermark-opacity \u5426 \u6c34\u5370\u900f\u660e\u5ea6\uff0c\u53d6\u503c\u8303\u56f4 0 ~ 100 \u7684\u6574\u6570\uff0c\u9ed8\u8ba4 <code>0</code> x-gmkerl-watermark-color \u5426 \u6587\u5b57\u6c34\u5370\u989c\u8272\uff0cRGB \u503c\uff0c\u9ed8\u8ba4 <code>#000000</code> x-gmkerl-watermark-border \u5426 \u6587\u5b57\u6c34\u5370\u8fb9\u6846\uff0c\u9ed8\u8ba4\u65e0\u8fb9\u6846\uff0c\u89c1 x-gmkerl-watermark-border \u503c\u8bf4\u660e <p> x-gmkerl-type \u53ef\u9009\u503c\u5217\u8868</p> \u503c \u542b\u4e49 <code>fix_width</code> \u9650\u5b9a\u5bbd\u5ea6\uff0c\u9ad8\u5ea6\u81ea\u9002\u5e94 <code>fix_height</code> \u9650\u5b9a\u9ad8\u5ea6\uff0c\u5bbd\u5ea6\u81ea\u9002\u5e94 <code>fix_width_or_height</code> \u9650\u5b9a\u5bbd\u5ea6\u548c\u9ad8\u5ea6\uff0c\u5bbd\u9ad8\u4e0d\u8db3\u65f6\u4e0d\u7f29\u653e <code>fix_both</code> \u56fa\u5b9a\u5bbd\u5ea6\u548c\u9ad8\u5ea6\uff0c\u5bbd\u9ad8\u4e0d\u8db3\u65f6\u5f3a\u884c\u7f29\u653e <code>fix_max</code> \u9650\u5b9a\u6700\u957f\u8fb9\uff0c\u77ed\u8fb9\u81ea\u9002\u5e94 <code>fix_min</code> \u9650\u5b9a\u6700\u77ed\u8fb9\uff0c\u957f\u8fb9\u81ea\u9002\u5e94 <code>fix_scale</code> \u7b49\u6bd4\u4f8b\u7f29\u653e\uff081-1000\uff09 <p> x-gmkerl-value \u503c\u8bf4\u660e</p> <ul> <li>\u5f53 <code>x-gmkerl-type</code> \u6307\u5b9a\u4e3a <code>fix_width_or_height</code> \u6216 <code>fix_both</code> \u65f6\uff0c<code>x-gmkerl-value</code> \u503c\u7684\u683c\u5f0f\u4e3a <code>&lt;width&gt;x&lt;height&gt;</code>\uff0c\u5982 <code>480x576</code>\u3002</li> <li>\u5f53 <code>x-gmkerl-type</code>  \u4e3a\u5176\u4ed6\u7684\u7c7b\u578b\uff0c<code>x-gmkerl-value</code> \u503c\u53ea\u9700\u8981\u6307\u5b9a\u5355\u4e2a\u6570\u5b57\uff0c\u5982 <code>100</code>\uff0c\u610f\u601d\u4e3a\u9ad8\u548c/\u6216\u5bbd\u4e3a <code>100</code>\u3002</li> </ul> <p> x-gmkerl-watermark-font \u53ef\u9009\u503c\u5217\u8868</p> <ul> <li><code>simsun</code>\uff1a\u5b8b\u4f53(simsun)</li> <li><code>simhei</code>\uff1a\u9ed1\u4f53 (simhei)</li> <li><code>simkai</code>\uff1a\u6977\u4f53 (simkai)</li> <li><code>simli</code>\uff1a\u96b6\u4e66 (simli)</li> <li><code>simyou</code>\uff1a\u5e7c\u5706 (simyou)</li> <li><code>simfang</code>\uff1a\u4eff\u5b8b (simfang)</li> </ul> <p> x-gmkerl-watermark-align \u503c\u8bf4\u660e</p> <p>\u683c\u5f0f <code>valign,halign</code>\uff0c\u65e2 <code>\u5782\u76f4\u5bf9\u9f50,\u6c34\u5e73\u5bf9\u9f50</code>\uff0c<code>valign</code>\u3001<code>halign</code> \u53ef\u9009\u503c\uff1a</p> <ul> <li>\u5782\u76f4\u5bf9\u9f50\uff1a<code>top</code>\uff0c<code>middle</code>\uff0c<code>bottom</code>\uff1b</li> <li>\u6c34\u5e73\u5bf9\u9f50\uff1a<code>left</code>\uff0c<code>center</code>\uff0c<code>right</code>\u3002</li> </ul> <p> x-gmkerl-watermark-border \u503c\u8bf4\u660e</p> <ul> <li>\u683c\u5f0f <code>rgba</code>\uff0c <code>RGB</code> \u8868\u793a\u8fb9\u6846\u7684\u989c\u8272\uff0c<code>a</code> \u8868\u793a\u8fb9\u6846\u7684\u900f\u660e\u5ea6\uff0c\u5982 <code>#cccccccc</code></li> </ul> <p>\u5982\u6709\u7591\u95ee\u8bf7 \u8054\u7cfb\u6211\u4eec</p>"},{"location":"api/sdk/","title":"SDK \u4f7f\u7528\u6587\u6863","text":""},{"location":"api/sdk/#php-sdk","title":"PHP SDK","text":"<p>\u53c8\u62cd\u4e91 PHP SDK \u6258\u7ba1\u5728 github \uff0c\u5b83\u5305\u542b\u5982\u4e0b\u529f\u80fd\uff1a1\uff09\u5b58\u50a8\u7ba1\u7406\uff1b2\uff09\u56fe\u7247\u5904\u7406\uff1b3\uff09\u97f3\u89c6\u9891\u5904\u7406\uff1b4\uff09\u7f13\u5b58\u5237\u65b0\u3002\u672c\u6bb5\u4ecb\u7ecd PHP SDK \u7684\u4f7f\u7528\u3002</p>"},{"location":"api/sdk/#_1","title":"\u5f00\u53d1\u51c6\u5907","text":"<p>** \u8fd0\u884c\u73af\u5883 **</p> <p>PHP SDK version 3.0\uff0c\u9700\u8981 PHP \u7248\u672c &gt;= 5.5\u3002\u60a8\u53ef\u4ee5\u901a\u8fc7 <code>php -v</code> \u547d\u4ee4\u67e5\u770b\u5f53\u524d\u7684 PHP \u7248\u672c\u3002</p> <p>** \u5b89\u88c5 **</p> <ul> <li>Composer \u65b9\u5f0f</li> </ul> <p>Composer \u662f PHP \u7684\u4f9d\u8d56\u7ba1\u7406\u5de5\u5177\u3002\u60a8\u53ef\u4ee5\u5728\u81ea\u5df1\u7684\u9879\u76ee\u4e2d\u58f0\u660e\u6240\u4f9d\u8d56\u7684\u5916\u90e8\u5de5\u5177\u5e93\uff0cComposer \u4f1a\u81ea\u52a8\u5e2e\u60a8\u5b89\u88c5\u8fd9\u4e9b\u4f9d\u8d56\u7684\u5e93\u6587\u4ef6\u3002</p> <p>\u5728\u9879\u76ee\u6839\u76ee\u5f55\u8fd0\u884c\uff1a</p> <pre><code>composer require upyun/sdk\n</code></pre> <ul> <li>\u6e90\u7801\u65b9\u5f0f</li> </ul> <p>\u5982\u679c\u4f7f\u7528 Composer \u65b9\u5f0f\u8f83\u6162\uff0c\u53ef\u4ee5\u76f4\u63a5\u4e0b\u8f7d SDK \u5305\uff0c\u653e\u5230\u9879\u76ee\u6839\u76ee\u5f55\uff0c\u7136\u540e\u628a\u5305\u5bfc\u5165\u5de5\u7a0b\u4e2d\u3002</p>"},{"location":"api/sdk/#_2","title":"\u521d\u59cb\u5316","text":"<p>Config\uff08\u914d\u7f6e\uff09\u548c Upyun\uff08\u8fde\u63a5\uff09\u662f PHP SDK \u7684\u521d\u59cb\u5316\u7c7b\uff0c\u5728\u64cd\u4f5c\u4e91\u5b58\u50a8\u3001\u4e91\u5904\u7406\u4e4b\u524d\uff0c\u9700\u8981\u5148\u5b9e\u4f8b\u5316\u5b83\u4eec\u3002</p> <pre><code>&lt;?php\n// \u5305\u542b\u6587\u4ef6\nrequire_once('vendor/autoload.php');\n\nuse Upyun\\Upyun;\nuse Upyun\\Config;\n\n// \u521b\u5efa\u5b9e\u4f8b\n$bucketConfig = new Config('\u60a8\u7684\u670d\u52a1\u540d', '\u60a8\u7684\u64cd\u4f5c\u5458\u540d', '\u60a8\u7684\u64cd\u4f5c\u5458\u5bc6\u7801');\n$client = new Upyun($bucketConfig);\n?&gt;\n</code></pre> <p>\u8bf4\u660e\uff0c\u4e3a\u4e86\u907f\u514d\u91cd\u590d\uff0c\u540e\u7eed \u300c\u529f\u80fd\u4f7f\u7528\u300d \u4e2d\u7684 DEMO \u4e0d\u518d\u5305\u542b\u8fd9\u6bb5\u4ee3\u7801\uff0c\u8bf7\u5728\u4f7f\u7528\u65f6\u6ce8\u610f\u3002</p>"},{"location":"api/sdk/#_3","title":"\u529f\u80fd\u4f7f\u7528","text":"<p>\u5217\u8868\uff1a\u6587\u4ef6\u4e0a\u4f20\u3001\u6587\u4ef6\u5220\u9664\u3001\u76ee\u5f55\u521b\u5efa\u548c\u5220\u9664\u3001\u5217\u76ee\u5f55\u3001\u83b7\u53d6\u6587\u4ef6\u4fe1\u606f\u3001\u83b7\u53d6\u670d\u52a1\u5bb9\u91cf</p> <p> ** \u6587\u4ef6\u4e0a\u4f20\u3001\u56fe\u7247\u5904\u7406\uff08\u540c\u6b65\uff09 **</p> <pre><code>&lt;?php\n// \u7701\u7565\u521d\u59cb\u5316\u4ee3\u7801\n\n// \u8bfb\u6587\u4ef6\n$file = fopen('/root/13.jpg', 'r');         \n// \u4e0a\u4f20\u6587\u4ef6\n$res = $client-&gt;write('/up/dd.jpg', $file);\n// \u6253\u5370\u4e0a\u4f20\u7ed3\u679c\nprint_r($res);\n?&gt;\n</code></pre> <p>\u8bf4\u660e\uff0c<code>/root/13.jpg</code> \u4e3a\u672c\u5730\u6587\u4ef6\u7edd\u5bf9\u8def\u5f84\uff0c<code>/up/dd.jpg</code> \u4e3a\u4fdd\u5b58\u5230\u53c8\u62cd\u4e91\u5b58\u50a8\u7684\u8def\u5f84\u53ca\u6587\u4ef6\u540d\u3002</p> <pre><code>&lt;?php\n// \u7701\u7565\u521d\u59cb\u5316\u4ee3\u7801\n\n// \u8bfb\u6587\u4ef6\n$file = fopen('/root/13.jpg', 'r');\n// \u6dfb\u52a0\u4f5c\u56fe\u53c2\u6570\n$tasks = array('x-gmkerl-thumb' =&gt; '/format/png/fw/100');\n// \u4e0a\u4f20\u6587\u4ef6\n$res = $client-&gt;write('/up/dd.png', $file, $tasks);\n// \u6253\u5370\u4e0a\u4f20\u7ed3\u679c\nprint_r($res);\n?&gt;\n</code></pre> <p>\u8bf4\u660e\uff0c\u4e0a\u4f20\u56fe\u7247\u540c\u65f6\uff0c\u5bf9\u56fe\u7247\u8fdb\u884c\u5904\u7406\uff0c\u628a\u5904\u7406\u540e\u7684\u56fe\u7247\u5b58\u8fdb\u5b58\u50a8\u3002\u5177\u4f53\u8be6\u89c1\u56fe\u7247\u5904\u7406\uff08\u540c\u6b65\uff09\u3002</p> <p> ** \u6587\u4ef6\u5220\u9664 **</p> <pre><code>&lt;?php\n// \u7701\u7565\u521d\u59cb\u5316\u4ee3\u7801\n\n// \u5355\u6587\u4ef6\u5220\u9664\n$res=$client-&gt;delete('/up/dd.txt');\necho $res;\n?&gt;\n</code></pre> <p>\u8bf4\u660e\uff0c<code>/up/dd.txt</code> \u4e3a\u6587\u4ef6\u5728\u53c8\u62cd\u4e91\u5b58\u50a8\u7684\u8def\u5f84\u3002\u7ed3\u679c\u4e3a <code>1</code>\uff0c\u8868\u793a\u5220\u9664\u6210\u529f\u3002\u5f02\u5e38\u76f4\u63a5\u629b\u51fa\u3002</p> <p> ** \u76ee\u5f55\u521b\u5efa\u548c\u5220\u9664 **</p> <pre><code>&lt;?php\n// \u7701\u7565\u521d\u59cb\u5316\u4ee3\u7801\n\n// \u521b\u5efa\u76ee\u5f55\n$res=$client-&gt;createDir('/up/tt/ss');\necho $res;\n\n// \u5220\u9664\u7a7a\u76ee\u5f55\n$res=$client-&gt;deleteDir('/up/tt/ss');\necho $res;\n?&gt;\n</code></pre> <p>\u8bf4\u660e\uff0c<code>/up/tt/ss</code> \u4e3a\u76ee\u5f55\u7684\u8def\u5f84\u3002\u7ed3\u679c\u4e3a <code>1</code>\uff0c\u8868\u793a\u6210\u529f\u3002\u5f02\u5e38\u76f4\u63a5\u629b\u51fa\u3002</p> <p> ** \u83b7\u53d6\u6587\u4ef6\u4fe1\u606f **</p> <pre><code>&lt;?php\n// \u7701\u7565\u521d\u59cb\u5316\u4ee3\u7801\n\n$res=$client-&gt;info('/up/dd.jpg');\nprint_r($res);\n?&gt;\n</code></pre> <p>\u8bf4\u660e\uff0c<code>/up/dd.jpg</code> \u4e3a\u6587\u4ef6\u5728\u53c8\u62cd\u4e91\u5b58\u50a8\u7684\u8def\u5f84\u3002\u7ed3\u679c\u4ee5\u6570\u7ec4\u5f62\u5f0f\u8fd4\u56de\uff0c\u5185\u5bb9\u5305\u62ec\uff1a\u6587\u4ef6\u7c7b\u578b\u3001\u6587\u4ef6\u5927\u5c0f\u548c\u6587\u4ef6\u6700\u540e\u4fee\u6539\u65f6\u95f4\u3002</p> <p> ** \u83b7\u53d6\u670d\u52a1\u5bb9\u91cf **</p> <pre><code>&lt;?php\n// \u7701\u7565\u521d\u59cb\u5316\u4ee3\u7801\n\n$res=$client-&gt;usage();\necho $res;\n?&gt;\n</code></pre> <p>\u8bf4\u660e\uff0c\u7ed3\u679c\u4e3a\u5bb9\u91cf\u6570\u503c\uff0c\u5355\u4f4d\u5b57\u8282\u3002\u5f02\u5e38\u76f4\u63a5\u629b\u51fa\u3002</p>"},{"location":"api/sdk/#java-sdk","title":"Java SDK","text":"<p>\u53c8\u62cd\u4e91 Java SDK \u6258\u7ba1\u5728 github \uff0c\u5b83\u5305\u542b\u5982\u4e0b\u529f\u80fd\uff1a1\uff09\u5b58\u50a8\u7ba1\u7406\uff1b2\uff09\u56fe\u7247\u5904\u7406\uff1b3\uff09\u97f3\u89c6\u9891\u5904\u7406\uff1b4\uff09\u7f13\u5b58\u5237\u65b0\u3002\u672c\u6bb5\u4ecb\u7ecd Java SDK \u7684\u4f7f\u7528\u3002</p>"},{"location":"api/sdk/#_4","title":"\u5f00\u53d1\u51c6\u5907","text":"<p>** \u8fd0\u884c\u73af\u5883 **</p> <p>Java SDK version 3.0+\uff0c\u9700\u8981 Java \u7248\u672c &gt;= 6\u3002\u53ef\u4ee5\u901a\u8fc7 <code>java -version</code> \u547d\u4ee4\u67e5\u770b\u5f53\u524d\u7684 Java \u7248\u672c\u3002</p> <p>** \u5b89\u88c5 **</p> <ul> <li>Maven \u65b9\u5f0f</li> </ul> <p>Maven \u662f\u4e00\u4e2a\u9879\u76ee\u7ba1\u7406\u53ca\u81ea\u52a8\u6784\u5efa\u5de5\u5177\u3002\u60a8\u53ef\u4ee5\u5728\u81ea\u5df1\u7684\u9879\u76ee\u4e2d\u58f0\u660e\u6240\u4f9d\u8d56\u7684\u5916\u90e8\u5de5\u5177\u5e93\uff0cMaven \u4f1a\u81ea\u52a8\u5e2e\u60a8\u5b89\u88c5\u8fd9\u4e9b\u4f9d\u8d56\u7684\u5e93\u6587\u4ef6\u3002</p> <pre><code>&lt;dependency&gt;\n  &lt;groupId&gt;com.upyun&lt;/groupId&gt;\n  &lt;artifactId&gt;java-sdk&lt;/artifactId&gt;\n  &lt;version&gt;4.0.1&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre> <ul> <li>\u6e90\u7801\u65b9\u5f0f</li> </ul> <p>\u9664\u4e86 Maven \u65b9\u5f0f\u5916\uff0c\u8fd8\u53ef\u4ee5\u76f4\u63a5\u4e0b\u8f7d SDK \u5305\uff0c\u653e\u5230\u9879\u76ee\u6839\u76ee\u5f55\uff0c\u7136\u540e\u628a\u5305\u5bfc\u5165\u5de5\u7a0b\u4e2d\u3002</p>"},{"location":"api/sdk/#_5","title":"\u521d\u59cb\u5316","text":"<p>UpYun \u662f Java SDK \u7684\u521d\u59cb\u5316\u7c7b\uff0c\u5728\u64cd\u4f5c\u4e91\u5b58\u50a8\u3001\u4e91\u5904\u7406\u4e4b\u524d\uff0c\u9700\u8981\u5148\u5b9e\u4f8b\u5316\u5b83\u3002</p> <pre><code>// \u521b\u5efa\u5b9e\u4f8b\nUpYun upyun = new UpYun('\u60a8\u7684\u670d\u52a1\u540d', '\u60a8\u7684\u64cd\u4f5c\u5458\u540d', '\u60a8\u7684\u64cd\u4f5c\u5458\u5bc6\u7801');\n\n// \u53ef\u9009\u5c5e\u60271\uff0c\u662f\u5426\u5f00\u542f debug \u6a21\u5f0f\uff0c\u9ed8\u8ba4\u4e0d\u5f00\u542f\nupyun.setDebug(false);\n// \u53ef\u9009\u5c5e\u60272\uff0c\u8d85\u65f6\u65f6\u95f4\uff0c\u9ed8\u8ba4 30s\nupyun.setTimeout(30);\n</code></pre> <p>\u8bf4\u660e\uff0c\u4e3a\u4e86\u907f\u514d\u91cd\u590d\uff0c\u540e\u7eed \u300c\u529f\u80fd\u4f7f\u7528\u300d \u4e2d\u7684 DEMO \u4e0d\u518d\u5305\u542b\u521d\u59cb\u5316\u8fd9\u6bb5\u4ee3\u7801\uff0c\u8bf7\u5728\u4f7f\u7528\u65f6\u6ce8\u610f\u3002</p>"},{"location":"api/sdk/#_6","title":"\u529f\u80fd\u4f7f\u7528","text":"<p>\u5217\u8868\uff1a\u6587\u4ef6\u4e0a\u4f20\u3001\u8868\u5355\u4e0a\u4f20\u3001\u6587\u4ef6\u5220\u9664\u3001\u76ee\u5f55\u521b\u5efa\u548c\u5220\u9664\u3001\u5217\u76ee\u5f55\u3001\u83b7\u53d6\u6587\u4ef6\u4fe1\u606f\u3001\u83b7\u53d6\u670d\u52a1\u5bb9\u91cf</p> <p> ** \u6587\u4ef6\u4e0a\u4f20\u3001\u6279\u91cf\u4e0a\u4f20 **</p> <p>REST API\u3001FORM API</p> <pre><code>// \u6587\u4ef6\u4e0a\u4f20\nupyun.setContentMD5(UpYun.md5('/root/13.jpg'));     // \u8ba1\u7b97\u6587\u4ef6 MD5\uff0c\u5982\u679c\u6587\u4ef6\u592a\u5927\u6216\u8ba1\u7b97\u4e0d\u4fbf\uff0c\u53ef\u4ee5\u4e0d\u8ba1\u7b97\nboolean result4 = upyun.writeFile('/up/dd.jpg', '/root/13.jpg');\n</code></pre> <p>\u8bf4\u660e\uff0c<code>/root/13.jpg</code> \u4e3a\u672c\u5730\u6587\u4ef6\u7edd\u5bf9\u8def\u5f84\uff0c<code>/up/dd.jpg</code> \u4e3a\u4fdd\u5b58\u5230\u53c8\u62cd\u4e91\u5b58\u50a8\u7684\u8def\u5f84\u53ca\u6587\u4ef6\u540d\u3002</p> <p> ** \u8868\u5355\u4e0a\u4f20 **</p> <pre><code>// \u5b9a\u4e49\u4fdd\u5b58\u8def\u5f84\nString savePath = \"/uploads/{year}{mon}{day}/{random32}{.suffix}\";\nparamsMap.put(Params.SAVE_KEY, savePath);\n\n// \u4e0a\u4f20\u6587\u4ef6\nFormUploader uploader = new FormUploader(BUCKET_NAME, APIKEY, null);\nResult result = uploader.upload(paramsMap, file);   // file\uff08File \u7c7b\u578b\uff09 \u8868\u793a\u4e00\u4e2a\u5f85\u4e0a\u4f20\u7684\u6587\u4ef6\n</code></pre> <p>\u8bf4\u660e\uff0c<code>savePath</code> \u7684\u89e3\u91ca\u8be6\u89c1 FORM API \u8def\u5f84\u8bbe\u7f6e\u3002</p> <p>** \u4e0a\u4f20\u9884\u5904\u7406 **</p> <pre><code>// \u6587\u4ef6\u4e0a\u4f20\nboolean result3 = upyun.writeFile('/up/dd.jpg', '/root/13.jpg');\n\n// \u56fe\u7247\u4e0a\u4f20\u9884\u5904\u7406\uff08\u540c\u6b65\uff09\nparams.put(\u201cx-gmkerl-thumb\u201d,\"/fw/300/unsharp/true/quality/80/format/png\")\n</code></pre> <p> ** \u6587\u4ef6\u5220\u9664 **</p> <pre><code>// \u5355\u4e2a\u6587\u4ef6\u5220\u9664\nboolean result = upyun.deleteFile('/up/dd.jpg');\n</code></pre> <p>\u8bf4\u660e\uff0c<code>/up/dd.jpg</code> \u4e3a\u6587\u4ef6\u7684\u8def\u5f84\u3002</p> <p> ** \u76ee\u5f55\u521b\u5efa\u548c\u5220\u9664 **</p> <pre><code>// \u521b\u5efa\u76ee\u5f55\nboolean result = upyun.mkDir('/up/tt/');\n\n// \u5220\u9664\u76ee\u5f55\nboolean result = upyun.rmDir('/up/tt/');\n</code></pre> <p>\u8bf4\u660e\uff0c<code>/up/tt/</code> \u4e3a\u76ee\u5f55\u7684\u8def\u5f84\u3002</p> <p> ** \u5217\u76ee\u5f55 **</p> <pre><code>List&lt;UpYun.FolderItem&gt; items = upyun.readDir('/up/tt/');\n</code></pre> <p>\u8bf4\u660e\uff0c<code>/up/tt/</code> \u4e3a\u76ee\u5f55\u7684\u8def\u5f84\u3002\u7ed3\u679c\u8fd4\u56de\u76ee\u5f55\u4e0b\u524d 10000 \u4e2a\u6587\u4ef6\u5217\u8868\uff0c\u8d85\u51fa 10000 \u4e2a\u7684\u4e0d\u4f1a\u8fd4\u56de\uff0c\u5982\u679c\u9700\u8981\u5217\u51fa\u6765\uff0c\u9700\u8981\u4f7f\u7528\u5206\u9875\u53c2\u6570\u5faa\u73af\u83b7\u53d6\uff0c\u76f4\u5230\u53d6\u5b8c\u3002</p> <p> ** \u83b7\u53d6\u6587\u4ef6\u4fe1\u606f **</p> <pre><code>Map&lt;String,String&gt; result = upyun.getFileInfo('/up/dd.jpg');\n</code></pre> <p>\u8bf4\u660e\uff0c<code>/up/dd.jpg</code> \u4e3a\u6587\u4ef6\u5728\u53c8\u62cd\u4e91\u5b58\u50a8\u7684\u8def\u5f84\u3002\u7ed3\u679c\u4ee5 Map \u5f62\u5f0f\u8fd4\u56de\uff0c\u5185\u5bb9\u5305\u62ec\uff1a\u6587\u4ef6\u7c7b\u578b\u3001\u6587\u4ef6\u5927\u5c0f\u548c\u6587\u4ef6\u6700\u540e\u4fee\u6539\u65f6\u95f4\u3002</p> <p> ** \u83b7\u53d6\u7a7a\u95f4\u5bb9\u91cf **</p> <pre><code>long usage = upyun.getBucketUsage();\n</code></pre> <p>\u8bf4\u660e\uff0c\u7ed3\u679c\u4e3a\u5bb9\u91cf\u6570\u503c\uff0c\u5355\u4f4d\u5b57\u8282\u3002</p>"},{"location":"api/sdk/#python-sdk","title":"Python SDK","text":"<p>\u53c8\u62cd\u4e91 Python SDK \u6258\u7ba1\u5728 github \uff0c\u5b83\u5305\u542b\u5982\u4e0b\u529f\u80fd\uff1a1\uff09\u5b58\u50a8\u7ba1\u7406\uff1b2\uff09\u56fe\u7247\u5904\u7406\uff1b3\uff09\u97f3\u89c6\u9891\u5904\u7406\uff1b4\uff09\u7f13\u5b58\u5237\u65b0\u3002\u672c\u6bb5\u4ecb\u7ecd Python SDK \u7684\u4f7f\u7528\u3002</p>"},{"location":"api/sdk/#_7","title":"\u5f00\u53d1\u51c6\u5907","text":"<p>** \u8fd0\u884c\u73af\u5883 **</p> <ul> <li>Python SDK version 2.2+\uff0c\u9002\u7528\u4e8e Python 2.6\u30012.7\u30013.3\u30013.4 \u7248\u672c\u3002\u53ef\u4ee5\u901a\u8fc7 <code>python -V</code> \u547d\u4ee4\u67e5\u770b\u5f53\u524d\u7684 Python \u7248\u672c\u3002</li> <li>Python SDK version 2.3+\uff0c\u4e0d\u518d\u76f4\u63a5\u4f7f\u7528\u9ed8\u8ba4\u6807\u51c6\u5e93 httplib\uff0c\u4f7f\u7528\u57fa\u4e8e httplib \u7684 requests \u8fd9\u4e2a\u7b2c\u4e09\u65b9\u5e93\u3002</li> </ul> <p>** \u5b89\u88c5 **</p> <ul> <li>pip \u65b9\u5f0f</li> </ul> <p>pip \u662f Python \u7684\u4f9d\u8d56\u7ba1\u7406\u5de5\u5177\u3002\u60a8\u53ef\u4ee5\u5728\u81ea\u5df1\u7684\u9879\u76ee\u4e2d\u58f0\u660e\u6240\u4f9d\u8d56\u7684\u5916\u90e8\u5de5\u5177\u5e93\uff0cpip \u4f1a\u81ea\u52a8\u5e2e\u60a8\u5b89\u88c5\u8fd9\u4e9b\u4f9d\u8d56\u7684\u5e93\u6587\u4ef6\u3002</p> <p>\u5b89\u88c5 requests</p> <pre><code>pip install requests\n</code></pre> <p>\u5b89\u88c5 Python SDK</p> <pre><code>pip install upyun\n</code></pre> <p>\u8fd0\u884c\u6d4b\u8bd5\u7528\u4f8b\uff0c\u5224\u65ad\u5b89\u88c5\u6210\u529f\u4e0e\u5426</p> <pre><code># \u914d\u7f6e\u53c2\u6570\nexport UPYUN_SERVICE=&lt;service&gt;\nexport UPYUN_USERNAME=&lt;username&gt;\nexport UPYUN_PASSWORD=&lt;password&gt;\n\n# \u6267\u884c\u6d4b\u8bd5\u7528\u4f8b\nmake init test\n</code></pre> <ul> <li>\u6e90\u7801\u65b9\u5f0f</li> </ul> <p>\u9664\u4e86 pip \u65b9\u5f0f\u5916\uff0c\u8fd8\u53ef\u4ee5\u76f4\u63a5\u4e0b\u8f7d SDK \u5305\uff0c\u653e\u5230\u9879\u76ee\u6839\u76ee\u5f55\uff0c\u7136\u540e\u628a\u5305\u5bfc\u5165\u5de5\u7a0b\u4e2d\u3002</p>"},{"location":"api/sdk/#_8","title":"\u521d\u59cb\u5316","text":"<p>UpYun \u662f Python SDK \u7684\u521d\u59cb\u5316\u7c7b\uff0c\u5728\u64cd\u4f5c\u4e91\u5b58\u50a8\u3001\u4e91\u5904\u7406\u4e4b\u524d\uff0c\u9700\u8981\u5148\u5b9e\u4f8b\u5316\u5b83\u3002</p> <pre><code># \u5305\u542b\u6587\u4ef6\nimport upyun\n\n# \u521b\u5efa\u5b9e\u4f8b\nup = upyun.UpYun('\u60a8\u7684\u670d\u52a1\u540d', '\u60a8\u7684\u64cd\u4f5c\u5458\u540d', '\u60a8\u7684\u64cd\u4f5c\u5458\u5bc6\u7801')\n</code></pre> <p>\u8bf4\u660e\uff0c\u4e3a\u4e86\u907f\u514d\u91cd\u590d\uff0c\u540e\u7eed \u300c\u529f\u80fd\u4f7f\u7528\u300d \u4e2d\u7684 DEMO \u4e0d\u518d\u5305\u542b\u521d\u59cb\u5316\u8fd9\u6bb5\u4ee3\u7801\uff0c\u8bf7\u5728\u4f7f\u7528\u65f6\u6ce8\u610f\u3002</p>"},{"location":"api/sdk/#_9","title":"\u529f\u80fd\u4f7f\u7528","text":"<p>\u5217\u8868\uff1a\u6587\u4ef6\u4e0a\u4f20\u3001\u8868\u5355\u4e0a\u4f20\u3001\u65ad\u70b9\u7eed\u4f20\u4e0a\u4f20\u3001\u6587\u4ef6\u5220\u9664\u3001\u76ee\u5f55\u521b\u5efa\u548c\u5220\u9664\u3001\u5217\u76ee\u5f55\u3001\u83b7\u53d6\u6587\u4ef6\u4fe1\u606f\u3001\u83b7\u53d6\u670d\u52a1\u5bb9\u91cf</p> <p> ** \u6587\u4ef6\u4e0a\u4f20\u3001\u56fe\u7247\u5904\u7406\uff08\u540c\u6b65\uff09 **</p> <pre><code>/*\n* \u53c2\u6570\u8bf4\u660e\n* checksum\uff0c\u8868\u793a\u662f\u5426\u8fdb\u884c MD5 \u6821\u9a8c\uff0c\u5982\u679c\u662f\u5c0f\u6587\u4ef6\uff0c\u5efa\u8bae\u8fdb\u884c\uff0c\u4e3a True\uff1b\u5982\u679c\u662f\u5927\u6587\u4ef6\uff0c\u5efa\u8bae\u4e0d\u8fdb\u884c\uff0c\u4e3a False\n* headers\uff0c\u8868\u793a\u9700\u8981\u7684\u5934\u4fe1\u606f\uff0c\u89c1 REST API \u4e0a\u4f20\u6587\u4ef6\n*/\nheaders = { 'x-gmkerl-thumb': '/fw/300' }\n\nwith open('dd.png', 'rb') as f:\n    res = up.put('/up/dd.png', f, checksum=True, headers=headers)\n</code></pre> <p>\u8bf4\u660e\uff0c\u4e0a\u4f20\u6210\u529f\uff0c\u5982\u679c\u662f\u56fe\u7247\uff0c\u8fd4\u56de\u5305\u542b\u56fe\u7247\u5bbd\u3001\u9ad8\u3001\u683c\u5f0f\u3001\u5e27\u6570\u7684 Python Dict \u5bf9\u8c61\uff0c\u5982\u679c\u4e0d\u662f\uff0c\u662f\u7a7a Python Dict \u5bf9\u8c61\uff1b\u4e0a\u4f20\u5931\u8d25\uff0c\u629b\u51fa\u5f02\u5e38\u3002</p> <p> ** \u8868\u5355\u4e0a\u4f20\u3001\u56fe\u7247\u5904\u7406\uff08\u540c\u6b65\uff09 **</p> <pre><code>// \u8bbe\u5b9a\u53c2\u6570\nkwargs = { 'allow-file-type': 'jpg,jpeg,png',\n           'notify-url': 'http://notify-url/',\n           'x-gmkerl-thumb':'/fw/300' }\n\n// checksum\uff0c\u8868\u793a\u662f\u5426\u8fdb\u884c MD5 \u6821\u9a8c\uff0c\u5982\u679c\u662f\u5c0f\u6587\u4ef6\uff0c\u5efa\u8bae\u8fdb\u884c\uff0c\u4e3a True\uff1b\u5982\u679c\u662f\u5927\u6587\u4ef6\uff0c\u5efa\u8bae\u4e0d\u8fdb\u884c\uff0c\u4e3a False\nwith open('dd.png', 'rb') as f:\n    res = up.put('/up/dd.png', f, checksum=True, form=True, **kwargs)\n</code></pre> <p>\u8bf4\u660e\uff0c\u4e0a\u4f20\u6210\u529f\uff0c\u8fd4\u56de\u5185\u5bb9\u89c1 FORM API \u7684\u901a\u77e5\u8bbe\u7f6e\uff1b\u4e0a\u4f20\u5931\u8d25\uff0c\u629b\u51fa\u5f02\u5e38\u3002</p> <p> ** \u65ad\u70b9\u7eed\u4f20\u4e0a\u4f20 **</p> <pre><code>from upyun import FileStore\nfrom upyun import print_reporter\n\n/*\n* \u53c2\u6570\u8bf4\u660e\n* need_resume\uff0c\u8868\u793a\u662f\u5426\u9700\u8981\u65ad\u70b9\u7eed\u4f20\uff0c\u9ed8\u8ba4 False\n* headers\uff0c\u8868\u793a\u9700\u8981\u7684\u5934\u4fe1\u606f\uff0c\uff0c\u89c1 REST API \u65ad\u70b9\u7eed\u4f20\n* store\uff0c\u8868\u793a\u65ad\u70b9\u4fe1\u606f\u5b58\u50a8\u4f4d\u7f6e\uff0c\u9ed8\u8ba4 memory_store\u3002memory_store \u8868\u793a\u5b58\u653e\u5728\u5185\u5b58\uff0cFileStore() \u8868\u793a\u5b58\u653e\u5728\u6587\u4ef6\uff0c\u9ed8\u8ba4\u662f ~/.up-python-resume/\n* reporter\uff0c\u8868\u793a\u62a5\u544a\u4e0a\u4f20\u8fdb\u5ea6\uff0c\u9ed8\u8ba4\u5ffd\u7565\u3002print_reporter \u53ea\u662f print \u4e0a\u4f20\u8fdb\u5ea6\uff0c\u6709\u5176\u4ed6\u9700\u8981\u7684\u7528\u6237\u53ef\u4ee5\u81ea\u884c\u5b9e\u73b0\n*/\nwith open('dd.png', 'rb') as f:\n    res = up.put('/up/dd.png', f, checksum=True, need_resume=True, headers={}, store=None, reporter=print_reporter)\n</code></pre> <p>\u8bf4\u660e\uff0c\u4e0a\u4f20\u6210\u529f\uff0c\u8fd4\u56de\u7a7a Python Dict \u5bf9\u8c61\uff1b\u4e0a\u4f20\u5931\u8d25\uff0c\u629b\u51fa\u5f02\u5e38\u3002</p> <p> ** \u6587\u4ef6\u5220\u9664 **</p> <pre><code>up.delete('/up/dd.png') \n</code></pre> <p>\u8bf4\u660e\uff0c\u6210\u529f\uff0c\u8fd4\u56de Python None \u5bf9\u8c61\uff1b\u5931\u8d25\uff0c\u629b\u51fa\u5f02\u5e38\u3002</p> <p> ** \u76ee\u5f55\u521b\u5efa\u548c\u5220\u9664**</p> <pre><code>up.mkdir('/up/temp/')   // \u521b\u5efa\n\nup.delete('/up/temp/')  // \u5220\u9664\n</code></pre> <p>\u8bf4\u660e\uff0c\u6210\u529f\uff0c\u8fd4\u56de Python None \u5bf9\u8c61\uff1b\u5931\u8d25\uff0c\u629b\u51fa\u5f02\u5e38\u3002\u6ce8\uff0c\u76ee\u5f55\u5220\u9664\u53ea\u80fd\u5220\u9664\u7a7a\u76ee\u5f55\u3002</p> <p> ** \u5217\u76ee\u5f55 **</p> <pre><code>res = up.getlist('/up/', limit=100, order='asc', begin='')\n</code></pre> <p>\u8bf4\u660e\uff0c\u83b7\u53d6\u6210\u529f\uff0c\u8fd4\u56de Python List \u5bf9\u8c61\uff1b\u83b7\u53d6\u5931\u8d25\uff0c\u629b\u51fa\u5f02\u5e38\u3002</p> <p> ** \u83b7\u53d6\u6587\u4ef6\u4fe1\u606f **</p> <pre><code>res = up.getinfo('/up/dd.png')\nprint res['file-type']\nprint res['file-size']\nprint res['file-date']\n</code></pre> <p>\u8bf4\u660e\uff0c\u83b7\u53d6\u6210\u529f\uff0c\u8fd4\u56de Python List \u5bf9\u8c61\uff0c\u5185\u5bb9\u5305\u62ec\uff1a\u6587\u4ef6\u7c7b\u578b\u3001\u6587\u4ef6\u5927\u5c0f\u548c\u6587\u4ef6\u6700\u540e\u4fee\u6539\u65f6\u95f4\uff1b\u83b7\u53d6\u5931\u8d25\uff0c\u629b\u51fa\u5f02\u5e38\u3002</p> <p> ** \u83b7\u53d6\u670d\u52a1\u5bb9\u91cf **</p> <pre><code>res = up.usage()\n</code></pre> <p>\u8bf4\u660e\uff0c\u83b7\u53d6\u6210\u529f\uff0c\u8fd4\u56de Python String \u5bf9\u8c61\uff0c\u5355\u4f4d Bytes\uff1b\u83b7\u53d6\u5931\u8d25\uff0c\u629b\u51fa\u5f02\u5e38\u3002</p>"},{"location":"api/small_program/","title":"\u5fae\u4fe1\u5c0f\u7a0b\u5e8f","text":""},{"location":"api/small_program/#1","title":"1.\u524d\u8a00","text":"<p>\u5fae\u4fe1\u5c0f\u7a0b\u5e8f\u662f\u4e00\u79cd\u5168\u65b0\u7684\u8fde\u63a5\u7528\u6237\u4e0e\u670d\u52a1\u7684\u65b9\u5f0f\uff0c\u5b83\u53ef\u4ee5\u5728\u5fae\u4fe1\u5185\u88ab\u4fbf\u6377\u5730\u83b7\u53d6\u548c\u4f20\u64ad\uff0c\u62e5\u6709\u7c7b\u4f3c App \u7684\u4f7f\u7528\u4f53\u9a8c\u3002\u5fae\u4fe1\u5c0f\u7a0b\u5e8f\u7684\u51fa\u73b0\uff0c\u5f00\u542f\u4e86\u65b0\u7684\u8de8\u5e73\u53f0\u79fb\u52a8\u5e94\u7528\u65b9\u5f0f\uff0c\u53c8\u62cd\u4e91\u63a8\u51fa\u4e86\u5fae\u4fe1\u5c0f\u7a0b\u5e8f SDK\uff0c\u5e2e\u52a9\u5f00\u53d1\u8005\u51cf\u8f7b\u540e\u7aef\u90e8\u7f72\u3001\u8fd0\u7ef4\u3001\u8bc1\u4e66\u914d\u7f6e\u7b49\u7e41\u7410\u5de5\u4f5c\uff0c\u63d0\u5347\u5c0f\u7a0b\u5e8f\u6027\u80fd\u7684\u540c\u65f6\uff0c\u51cf\u5c11\u5f00\u53d1\u6210\u672c\u3002</p> <p>\u4e3a\u4e86\u65b9\u4fbf\u5fae\u4fe1\u5c0f\u7a0b\u5e8f\u5f00\u53d1\u8005\u4fbf\u6377\u4f7f\u7528\u53c8\u62cd\u4e91\u7684\u4e91\u670d\u52a1\uff0c\u672c\u6587\u6848\u5c06\u4f1a\u7ed3\u5408\u53c8\u62cd\u4e91\u5bf9\u8c61\u5b58\u50a8\u3001SSL \u8bc1\u4e66\u3001CDN \u52a0\u901f\u3001\u56fe\u7247\u5904\u7406\u3001\u97f3\u89c6\u9891\u5904\u7406\u7b49\u670d\u52a1\uff0c\u5feb\u901f\u6784\u5efa\u5177\u5907\u4e91\u7aef\u80fd\u529b\u7684\u4e13\u5c5e\u5c0f\u7a0b\u5e8f\u3002</p>"},{"location":"api/small_program/#2","title":"2.\u51c6\u5907\u5de5\u4f5c","text":"<p>2.1 \u6ce8\u518c\u5fae\u4fe1\u5c0f\u7a0b\u5e8f</p> <p>\u5f00\u53d1\u5c0f\u7a0b\u5e8f\u7684\u7b2c\u4e00\u6b65\uff0c\u60a8\u9700\u8981\u6ce8\u518c\u4e00\u4e2a\u5fae\u4fe1\u5c0f\u7a0b\u5e8f\u7684\u8d26\u53f7\uff0c\u901a\u8fc7\u6b64\u8d26\u53f7\u60a8\u53ef\u4ee5\u7ba1\u7406\u60a8\u7684\u5c0f\u7a0b\u5e8f\uff0c\u5fae\u4fe1\u5c0f\u7a0b\u5e8f\u8d26\u53f7\u6ce8\u518c\u5730\u5740\u8bf7\u79fb\u6b65\u5fae\u4fe1\u516c\u4f17\u5e73\u53f0\uff0c\u8be6\u7ec6\u4f7f\u7528\u6307\u5357\u8bf7\u53c2\u89c1\u5fae\u4fe1\u5c0f\u7a0b\u5e8f\u7b80\u6613\u6559\u7a0b\u6587\u6863\u3002</p> <p>2.2 \u53c8\u62cd\u4e91\u8d26\u6237\u5b9e\u540d\u8ba4\u8bc1</p> <p>\u4e3a\u4e86\u987a\u5229\u4f7f\u7528\u53c8\u62cd\u4e91\u7684\u4e91\u670d\u52a1\uff0c\u60a8\u9700\u8981\u5728\u53c8\u62cd\u4e91\u6ce8\u518c\u4e00\u4e2a\u8d26\u53f7\uff0c\u5e76\u8fdb\u884c\u8d26\u6237\u7684\u5b9e\u540d\u8ba4\u8bc1\u3002\u6253\u5f00\u6ce8\u518c\u754c\u9762\u6216\u8005\u5728\u53c8\u62cd\u4e91\u5b98\u7f51\u9875\u9762\u53f3\u4e0a\u89d2\u70b9\u51fb\u300c\u6ce8\u518c\u300d\u6309\u94ae\u3002\u66f4\u591a\u4e86\u89e3\uff0c\u8bf7\u53c2\u8003\u4e91\u670d\u52a1\u5feb\u901f\u5165\u95e8\u6307\u5357\u3002</p> <p>2.3 \u8d2d\u4e70\u4e91\u670d\u52a1\u5668\u548c\u4e91\u6570\u636e\u5e93</p> <p>\u4e3a\u4e86\u66f4\u597d\u7684\u8fd0\u884c\u670d\u52a1\u7aef\u4ee3\u7801\uff0c\u60a8\u8fd8\u9700\u8981\u8d2d\u4e70\u4e1a\u52a1\u670d\u52a1\u5668\u548c\u4e91\u6570\u636e\u5e93\uff0c\u5177\u4f53\u914d\u7f6e\u6839\u636e\u60a8\u7684\u4e1a\u52a1\u9700\u6c42\u800c\u5b9a\u3002\u53c8\u62cd\u4e91\u6682\u672a\u63d0\u4f9b\u8be5\u670d\u52a1\uff0c\u8fd9\u91cc\u63a8\u8350\u53c8\u62cd\u4e91\u6218\u7565\u5408\u4f5c\u4f19\u4f34\u7684\u4e91\u7aef\u7f51\u7edc\u7684\u4e91\u4e3b\u673a\u670d\u52a1\uff0c\u6216\u8005\u81ea\u884c\u91c7\u8d2d\u5e76\u8fdb\u884c\u6258\u7ba1\u3002</p>"},{"location":"api/small_program/#3","title":"3.\u57df\u540d\u53ca\u8bc1\u4e66\u7533\u8bf7","text":"<p>3.1 \u57df\u540d\u7533\u8bf7\u53ca\u5907\u6848</p> <p>\u642d\u5efa\u4f01\u4e1a\u7ea7\u7684\u5fae\u4fe1\u5c0f\u7a0b\u5e8f\uff0c\u9700\u8981\u6ce8\u518c\u81ea\u6709\u57df\u540d\u5e76\u8fdb\u884c\u5907\u6848\u3002\u5982\u679c\u60a8\u5df2\u7ecf\u6ce8\u518c\u4f01\u4e1a\u57df\u540d\u5e76\u4e14\u5df2\u5907\u6848\uff0c\u8bf7\u5ffd\u7565\u672c\u6b65\u9aa4\u3002</p> <p>3.2 SSL \u8bc1\u4e66\u7533\u8bf7</p> <p>\u53c8\u62cd\u4e91\u63d0\u4f9b\u4e86 Symantec\u3001GeoTrust\u3001TrustAsia\u3001Let\u2019s Encrypt \u7684\u5404\u7c7b DV/OV/EV SSL \u8bc1\u4e66\u7684\u7533\u8d2d\u670d\u52a1\uff0c\u5176\u4e2d TrustAsia\u3001Let\u2019s Encrypt DV SSL \u5355\u57df\u540d\u8bc1\u4e66\u53ef\u514d\u8d39\u7533\u8bf7\u3002\u7acb\u5373\u8d2d\u4e70\u8bf7\u70b9\u51fb SSL \u8bc1\u4e66\u8d2d\u4e70\uff0c\u8be6\u7ec6\u64cd\u4f5c\u6b65\u9aa4\u53ef\u53c2\u89c1\u5feb\u901f\u5165\u95e8\u3002\u5982\u4e0b\u56fe\u4e3a SSL \u8bc1\u4e66\u7533\u8d2d\u754c\u9762\uff1a</p> <p></p> <p>3.3 SSL \u8bc1\u4e66\u90e8\u7f72</p> <p>SSL \u8bc1\u4e66\u90e8\u7f72\u5206\u4e3a\u4e24\u4e2a\u90e8\u5206\uff0c\u60a8\u9700\u8981\u5728\u670d\u52a1\u7aef\u548c CDN \u5e73\u53f0\u540c\u65f6\u8fdb\u884c SSL \u8bc1\u4e66\u7684\u90e8\u7f72\u3002</p> <p>1\uff09\u5728\u670d\u52a1\u7aef\u8fdb\u884c SSL \u8bc1\u4e66\u7684\u90e8\u7f72</p> <p>\u5fae\u4fe1\u5c0f\u7a0b\u5e8f\u5fc5\u987b\u4f7f\u7528 HTTPS \u8fdb\u884c\u52a0\u5bc6\u901a\u4fe1\uff0c\u6240\u4ee5\u60a8\u9700\u8981\u5728\u6e90\u7ad9\u8fdb\u884c SSL \u8bc1\u4e66\u7684\u90e8\u7f72\u548c\u914d\u7f6e\u3002</p> <p>\u8fd9\u91cc\u4ee5 Nginx \u4e3a\u4f8b\uff0c\u6253\u5f00 Nginx \u6839\u76ee\u5f55\uff0c\u8f93\u5165\u547d\u4ee4\uff1a</p> <pre><code>vim nginx.conf\n</code></pre> <p>\u5177\u4f53\u914d\u7f6e\u4fe1\u606f\u53c2\u89c1\u5982\u4e0b\u6837\u4f8b\uff1a</p> <pre><code>server {\n\nlisten 443;  #SSL \u8bbf\u95ee\u7aef\u53e3\u53f7\u4e3a 443\nserver_name  www.example.com  #\u60a8\u7684\u57df\u540d\n...\nssl on;  #\u5f00\u542f SSL \u529f\u80fd \nssl_certificate     /xxx/xxx/www.example.com.pem;  #\u8bc1\u4e66\u6587\u4ef6 \nssl_certificate_key /xxx/xxx/www.example.com.key;\n#\u79c1\u94a5\u6587\u4ef6\nssl_protocols TLSv1 TLSv1.1 TLSv1.2; #\u652f\u6301\u7684 TLS \u534f\u8bae \nssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:ECDHE:ECDH:AES:HIGH:!NULL:!aNULL:!MD5:!ADH:!RC4;  #\u914d\u7f6e\u52a0\u5bc6\u5957\u4ef6,\u63a8\u8350\u914d\u7f6e\u3002\n\nlocation / {\n        root   html;  #\u7ad9\u70b9\u76ee\u5f55\n        index  index.html index.htm;\n    }\n...\n}\n</code></pre> <p>\u914d\u7f6e\u5b8c\u6210\u540e\uff0c\u7136\u540e\u901a\u8fc7\u5982\u4e0b\u547d\u4ee4\u6765\u5224\u65ad\u914d\u7f6e\u6587\u4ef6\u8bed\u6cd5\u662f\u5426\u6b63\u786e</p> <pre><code>sudo nginx -t -c /etc/nginx/nginx.conf\n</code></pre> <p>\u786e\u4fdd\u914d\u7f6e\u65e0\u8bef\u7684\u8bdd\uff0c\u5efa\u8bae\u91cd\u65b0\u542f\u52a8 Nginx\u3002</p> <p>2\uff09\u5728\u53c8\u62cd\u4e91 CDN \u5e73\u53f0\u8fdb\u884c SSL \u8bc1\u4e66\u7684\u90e8\u7f72</p> <p>\u5728 CDN \u5e73\u53f0\u8fdb\u884c SSL \u8bc1\u4e66\u7684\u90e8\u7f72\u8bf7\u8fdb\u5165 SSL \u8bc1\u4e66\u7ba1\u7406\uff0c\u53ef\u4e00\u952e\u5f00\u542f HTTPS \u52a0\u901f\u3002\u66f4\u591a\u4e86\u89e3\u8bf7\u53c2\u89c1 HTTPS \u914d\u7f6e\u6587\u6863\u3002</p> <p>3.4 \u901a\u4fe1\u57df\u540d\u914d\u7f6e</p> <p>\u524d\u5f80\u5fae\u4fe1\u516c\u4f17\u5e73\u53f0\uff0c\u4f9d\u6b21\u8fdb\u5165\uff1a\u3010\u8bbe\u7f6e\u3011-\u300b\u3010\u5f00\u53d1\u8bbe\u7f6e\u3011-\u300b\u3010\u670d\u52a1\u5668\u57df\u540d\u3011-\u300b\u3010\u4fee\u6539\u3011\uff0c\u4f7f\u7528\u4e8c\u7ea7\u57df\u540d\u5b8c\u6210\u901a\u4fe1\u57df\u540d\u8bbe\u7f6e\u3002\u914d\u7f6e\u622a\u56fe\u5982\u4e0b\u56fe\uff1a</p> <p></p> <ul> <li> <p>request \u5408\u6cd5\u57df\u540d\uff1a\u8bf7\u6c42\u7684\u5408\u6cd5\u57df\u540d</p> </li> <li> <p>socket \u5408\u6cd5\u57df\u540d\uff1asocket \u901a\u8baf\u7684\u5408\u6cd5\u57df\u540d</p> </li> <li> <p>uploadFile \u5408\u6cd5\u57df\u540d\uff1a\u8d44\u6e90\u4e0a\u4f20\u7684\u5408\u6cd5\u57df\u540d</p> </li> <li> <p>downloadFile \u5408\u6cd5\u57df\u540d\uff1a\u8d44\u6e90\u4e0b\u8f7d\u7684\u5408\u6cd5\u57df\u540d</p> </li> </ul> <p>\u8bf7\u6839\u636e\u9700\u6c42\u5408\u7406\u914d\u7f6e\u3002\u5173\u4e8e <code>uploadFile</code> \u5408\u6cd5\u57df\u540d\u914d\u7f6e\u8bf7\u53c2\u89c1 <code>5.4</code> \u57fa\u7840\u914d\u7f6e\u3002</p>"},{"location":"api/small_program/#4","title":"4.\u642d\u5efa\u5f00\u53d1\u73af\u5883","text":"<p>4.1 \u4e0b\u8f7d\u5c0f\u7a0b\u5e8f\u5f00\u53d1\u8005\u5de5\u5177</p> <p>\u4e0b\u8f7d\u5e76\u5b89\u88c5\u6700\u65b0\u7248\u672c\u7684\u5c0f\u7a0b\u5e8f\u5f00\u53d1\u8005\u5de5\u5177\uff0c\u4f7f\u7528\u5c0f\u7a0b\u5e8f\u7ed1\u5b9a\u7684\u5fae\u4fe1\u53f7\u626b\u7801\u767b\u5f55\u5f00\u53d1\u8005\u5de5\u5177\u3002</p> <p>4.2 \u7b80\u5355\u64cd\u4f5c</p> <ul> <li>\u5fae\u4fe1\u626b\u4e8c\u7ef4\u7801\u767b\u9646</li> </ul> <p></p> <ul> <li>\u521b\u5efa\u9879\u76ee</li> </ul> <p></p> <p>\u9009\u62e9\u3010\u5c0f\u7a0b\u5e8f\u9879\u76ee\u3011\u5373\u53ef\u6dfb\u52a0\u9879\u76ee\u3002</p> <p>\u8be6\u7ec6\u64cd\u4f5c\u6b65\u9aa4\u8bf7\u79fb\u6b65\u5c0f\u7a0b\u5e8f\u5f00\u53d1\u8005\u5de5\u5177\u64cd\u4f5c\u6307\u5357\u3002</p>"},{"location":"api/small_program/#5","title":"5.\u53c8\u62cd\u4e91\u5c0f\u7a0b\u5e8f\u4e0a\u4f20\u65b9\u6848","text":"<p>\u5fae\u4fe1\u5c0f\u7a0b\u5e8f\u8981\u6c42\u5b89\u88c5\u5305\u5927\u5c0f\u4e0d\u8d85\u8fc7 2MB\uff0c\u800c\u56fe\u7247\u3001\u97f3\u9891\u3001\u77ed\u89c6\u9891\u7b49\u591a\u5a92\u4f53\u6587\u4ef6\u5f80\u5f80\u5360\u636e\u4e86 App \u5927\u90e8\u5206\u7a7a\u95f4\uff0c\u53ef\u4ee5\u628a\u8fd9\u4e9b\u6587\u4ef6\u4e0a\u4f20\u81f3\u4e91\u7aef\u5b58\u50a8\uff0c\u7a0b\u5e8f\u5305\u8fdb\u884c\u591a\u5a92\u4f53\u6587\u4ef6\u8bfb\u53d6\uff0c\u8ba9\u5c0f\u7a0b\u5e8f\u8f7b\u677e \u201c\u8df3\u8131\u201d 2MB \u7684\u5bb9\u91cf\u9650\u5236\u3002\u53c8\u62cd\u4e91\u5b58\u50a8\u62e5\u6709\u4e0a\u4f20\u52a0\u901f\uff0c\u4e0b\u8f7d\u52a0\u901f\uff0c\u4e0d\u9650\u91cf\u5b58\u50a8\u7b49\u529f\u80fd\uff0c\u6ee1\u8db3\u60a8\u6587\u4ef6\u7684\u65e0\u9650\u5b58\u50a8\u548c\u5feb\u901f\u8bfb\u53d6\u3002</p> <p>\u53e6\u5916\uff0c\u901a\u8fc7\u53c8\u62cd\u4e91\u5fae\u4fe1\u5c0f\u7a0b\u5e8f SDK\uff0c\u53ef\u8f7b\u677e\u5c06\u6587\u4ef6\u4e0a\u4f20\u5230\u53c8\u62cd\u4e91\u5bf9\u8c61\u5b58\u50a8\u670d\u52a1\u3002</p> <p>5.1 \u4e0b\u8f7d\u5fae\u4fe1\u5c0f\u7a0b\u5e8f SDK</p> <p>\u70b9\u51fb\u53c8\u62cd\u4e91\u5fae\u4fe1\u5c0f\u7a0b\u5e8f SDK\u8fdb\u884c\u4e0b\u8f7d\u3002</p> <p>5.2 \u51c6\u5907\u5de5\u4f5c</p> <p>1) \u521b\u5efa\u4e91\u5b58\u50a8\u670d\u52a1\uff0c\u8be6\u7ec6\u64cd\u4f5c\u53c2\u89c1\u57df\u540d\u63a5\u5165(\u53c8\u62cd\u5b58\u50a8\u6e90)\uff0c\u5982\u622a\u56fe\u6240\u793a\uff1a</p> <p></p> <p>\u4ece\u622a\u56fe\u53ef\u4ee5\u5f97\u77e5\uff0c\u670d\u52a1\u540d\u79f0\u4e3a\uff08\u4e5f\u5373 bucket\uff09<code>video-upyun-com</code>\u3002</p> <p>2) \u4e3a\u5b58\u50a8\u670d\u52a1 <code>video-upyun-com</code> \u6388\u6743\u4e00\u4e2a\u64cd\u4f5c\u5458\uff0c\u8be6\u7ec6\u64cd\u4f5c\u53c2\u52a0\u6587\u6863\u64cd\u4f5c\u5458\u4f7f\u7528\uff0c\u914d\u7f6e\u53c2\u52a0\u622a\u56fe\u6240\u793a\uff1a</p> <p></p> <p>\u4ece\u622a\u56fe\u53ef\u4ee5\u770b\u51fa\uff0c\u64cd\u4f5c\u5458\u540d\uff08\u4e5f\u5373 Operator \uff09\u4e3a <code>wxj2017</code>\uff0c\u4e0e\u6b64\u540c\u65f6\u8bf7\u8bb0\u4f4f\u64cd\u4f5c\u5458\u5bc6\u7801\u3002</p> <p>5.3 \u4e0a\u4f20\u548c\u90e8\u7f72\u4ee3\u7801</p> <p>\u8be5\u6b65\u9aa4\uff0c\u9996\u5148\u9700\u8981\u4e0b\u8f7d\u5c0f\u7a0b\u5e8f SDK+Demo\uff0c\u83b7\u53d6\u5c0f\u7a0b\u5e8f Demo \u53ca\u6e90\u7801\u3002\u63a5\u4e0b\u6765\u7684\u64cd\u4f5c\u6b65\u9aa4\u4e3a\uff1a</p> <p>1\uff09\u6253\u5f00\u7b2c\u56db\u6b65\u5b89\u88c5\u7684\u5fae\u4fe1\u5f00\u53d1\u8005\u5de5\u5177\uff0c\u70b9\u51fb\u3010\u5c0f\u7a0b\u5e8f\u9879\u76ee\u3011\u6a21\u5757\uff0c\u8fdb\u5165\u5982\u4e0b\u754c\u9762\uff1a</p> <p></p> <p>2) \u70b9\u51fb\u4e0a\u56fe\u5de6\u4e0b\u89d2\u7684\u3010\u6dfb\u52a0\u3011\u6309\u94ae\uff0c\u8fdb\u5165\u5982\u4e0b\u754c\u9762\uff0c\u8f93\u5165\u5c0f\u7a0b\u5e8f AppID\uff0c\u9879\u76ee\u76ee\u5f55\u9009\u62e9\u4e0a\u4e00\u6b65\u4e0b\u8f7d\u4e0b\u6765\u7684\u4ee3\u7801\u76ee\u5f55\uff1a</p> <p></p> <p>\u6ce8\u610f\uff1aAppID \u53ef\u4ee5\u4ece\u5fae\u4fe1\u516c\u4f17\u53f7\u91cc\u9762\u83b7\u53d6\uff0c\u5982\u622a\u56fe\u6240\u793a\uff1a</p> <p></p> <p>3\uff09\u70b9\u51fb\u3010\u786e\u5b9a\u3011\u521b\u5efa\u5c0f\u7a0b\u5e8f\u9879\u76ee\uff0c\u8fdb\u5165\u5fae\u4fe1\u5f00\u53d1\u8005\u5de5\u5177\u754c\u9762\uff1a</p> <p></p> <p>5.4 \u57fa\u7840\u914d\u7f6e</p> <p>1\uff09\u5b57\u6bb5\u66ff\u6362</p> <p>\u60a8\u9700\u8981\u8fdb\u5165 <code>/pages/index/index.js</code> \u6587\u4ef6\uff0c\u5c06\u76f8\u5173\u5b57\u6bb5\u8fdb\u884c\u4fee\u6539\u548c\u66ff\u6362\uff0c\u53c2\u89c1\u5982\u4e0b\u622a\u56fe\uff1a</p> <p></p> <pre><code>\nconst upyun = new Upyun({\n  bucket: 'sdkimg',\n  operator: 'tester',\n  getSignatureUrl: 'http://localhost:8080'\n})\n</code></pre> <p>\u9700\u8981\u66ff\u6362\u7684\u5b57\u6bb5\u4e3a\uff1a</p> <ul> <li>bucket:\u670d\u52a1\u540d\u79f0</li> <li>operator\uff1a\u64cd\u4f5c\u5458</li> <li>getSignatureUrl\uff1a\u8ba1\u7b97 signature \u7684\u670d\u52a1\u5668\u63a5\u53e3\u5730\u5740</li> </ul> <pre><code>\nupyun.upload({\n          localPath: imageSrc,\n          remotePath: '/wxapp/demo',\n          success: function (res) {\n            console.log('uploadImage success, res is:', res)\n\n            wx.showToast({\n              title: '\u4e0a\u4f20\u6210\u529f',\n              icon: 'success',\n              duration: 1000\n            })\n\n            self.setData({\n              imageSrc\n            })\n          },\n\n</code></pre> <p>\u9700\u8981\u66ff\u6362\u7684\u5b57\u6bb5\u4e3a\uff1a</p> <ul> <li>remotePath\uff1a\u5728\u53c8\u62cd\u4e91\u5b58\u50a8\u7684\u6587\u4ef6\u8def\u5f84\u3002</li> </ul> <p>2\uff09\u4e0a\u4f20\u57df\u540d\u914d\u7f6e</p> <p>\u767b\u5f55\u5fae\u4fe1\u5c0f\u7a0b\u5e8f\u8d26\u6237\u5e76\u914d\u7f6e <code>uploadFile</code> \u5408\u6cd5\u57df\u540d\u4e3a <code>https://v0.api.upyun.com</code>\uff0c\u914d\u7f6e\u5982\u622a\u56fe\u6240\u793a\uff1a</p> <p></p> <p>5.5 \u8ba4\u8bc1\u9274\u6743</p> <p>\u4e91\u5b58\u50a8\u670d\u52a1\u7684\u8ba4\u8bc1\u9274\u6743\u8be6\u7ec6\u53c2\u89c1\u6587\u6863\u8ba4\u8bc1\u9274\u6743\u3002\u5173\u4e8e\u8ba4\u8bc1\u9274\u6743\u90e8\u5206\uff0c\u53ef\u901a\u8fc7\u5982\u4e0b\u4e09\u4e2a\u90e8\u5206\u6765\u5206\u5f00\u4ecb\u7ecd\uff1a</p> <p>1\uff09\u5fae\u4fe1\u5c0f\u7a0b\u5e8f\u5ba2\u6237\u7aef\u4e0a\u4f20 <code>data</code> \u53c2\u6570</p> <p>\u53ef\u4ee5\u76f4\u63a5\u53c2\u8003\u5fae\u4fe1\u5c0f\u7a0b\u5e8f <code>/utils/upyun-wxapp-sdk.js</code> \u4e2d\u7684\u4ee3\u7801\u3002\u4e0b\u9762\u4e3a\u90e8\u5206\u4ee3\u7801\u793a\u4f8b\uff1a</p> <pre><code>\nfunction Upyun (options) {\n  this.bucket = options.bucket\n  this.operator = options.operator\n  this.getSignatureUrl = options.getSignatureUrl\n}\n\nUpyun.prototype.upload = function (options) {\n  var self = this\n  if (!options.remotePath) {\n    options.remotePath = options.localPath.split('//')[1]\n  }\n  var date = (new Date()).toGMTString()\n  var opts = {\n    'save-key': options.remotePath,\n    bucket: self.bucket,\n    expiration: Math.round(new Date().getTime() / 1000) + 3600,\n    date: date\n  }\n  var policy = Base64.encode(JSON.stringify(opts))\n  var data = [ 'POST', '/' + self.bucket, date, policy ].join('&amp;')\n  self.getSignature(data, function (err, signature) {\n    if (err) {\n      options.fail &amp;&amp; options.fail(err)\n      options.complete &amp;&amp; options.complete(err)\n      return\n    }\n    wx.uploadFile({\n      url: `https://v0.api.upyun.com/${self.bucket}`,\n      filePath: options.localPath,\n      name: 'file',\n      formData: {\n        authorization: `UPYUN ${self.operator}:${signature}`,\n        policy: policy\n      },\n      success: options.success,\n      fail: options.fail,\n      complete: options.complete\n    })\n  })\n}\n\n</code></pre> <p>\u4ece\u4ee3\u7801\u4e2d\u53ef\u4ee5\u5f97\u77e5\uff0c\u9700\u8981\u83b7\u53d6\u7684\u5b57\u6bb5\u5305\u62ec\uff1a</p> <ul> <li>bucket\uff1a\u670d\u52a1\u540d\u79f0</li> <li>save-key\uff1a\u6587\u4ef6\u4fdd\u5b58\u8def\u5f84\uff0c\u4e5f\u5373 <code>remotePath</code></li> <li>expiration\uff1a\u8bf7\u6c42\u7684\u8fc7\u671f\u65f6\u95f4\uff0cUNIX UTC \u65f6\u95f4\u6233\uff0c\u5355\u4f4d\u79d2</li> <li>date\uff1a\u8bf7\u6c42\u65e5\u671f\u65f6\u95f4\uff0cGMT \u683c\u5f0f\u5b57\u7b26\u4e32</li> <li>Method\uff1a\u8fd9\u91cc\u4e3a <code>POST</code></li> <li>URI\uff1a\u8bf7\u6c42\u8def\u5f84\uff0c\u672c\u4f8b\u4e3a <code>/</code></li> </ul> <p>\u6700\u7ec8\u5ba2\u6237\u7aef\u751f\u6210 <code>data</code> \u53c2\u6570\u4f20\u9012\u7ed9\u670d\u52a1\u7aef\u7b7e\u540d\u63a5\u53e3\uff08 \u4e5f\u5373 <code>getSignatureUrl</code> \u5730\u5740 \uff09\uff0c\u7b7e\u540d\u670d\u52a1\u5668\u751f\u6210 <code>signature</code> \u5e76\u8fd4\u56de\u7ed9\u5ba2\u6237\u7aef\u3002</p> <p>2\uff09\u7b7e\u540d\u670d\u52a1\u7aef\u751f\u6210 <code>signature</code></p> <p>\u4e3a\u4e86\u8003\u8651\u5b89\u5168\u6027\uff0c\u64cd\u4f5c\u5458\u5bc6\u7801\u4e0d\u5b9c\u76f4\u63a5\u66b4\u9732\uff0c<code>signature</code> \u76f4\u63a5\u7531\u7b7e\u540d\u670d\u52a1\u7aef\u751f\u6210\uff0c\u5fae\u4fe1\u5c0f\u7a0b\u5e8f\u9700\u8981\u643a\u5e26 <code>data</code> \u53c2\u6570\uff0c\u5177\u4f53\u53c2\u89c1\u4e0a\u4e2a\u6b65\u9aa4\u7684\u4ee3\u7801\u3002</p> <p>\u63a5\u53e3\u5730\u5740\u5b57\u6bb5\u4e3a <code>getSignatureUrl</code>\uff0c\u5728 <code>5.4</code> \u57fa\u7840\u914d\u7f6e\u4e2d\u5df2\u7ecf\u6709\u4ecb\u7ecd\uff0c\u8be5\u63a5\u53e3\u63a5\u53d7 <code>GET</code> \u8bf7\u6c42\uff0c\u5e76\u63a5\u53d7\u4e00\u4e2a\u53c2\u6570 <code>data</code>\uff0c\u8ba1\u7b97\u5e76\u8fd4\u56de\u5e26\u6709 <code>signature</code> \u5b57\u6bb5\u7684\u54cd\u5e94\u3002</p> <p><code>signature</code> \u7684\u8ba1\u7b97\u516c\u5f0f\u662f\uff1a</p> <pre><code>\nBase64 (HMAC-SHA1 (&lt;md5_password&gt;, &lt;data&gt;)\n\n</code></pre> <p>\u5176\u4e2d\uff0cmd5_password \u662f\u64cd\u4f5c\u5458\u5bc6\u7801\u7684 <code>MD5</code> \u503c\uff0c\u64cd\u4f5c\u5458\u5bc6\u7801\u8bf7\u59a5\u5584\u4fdd\u7ba1\uff0c\u4e0d\u5b9c\u66b4\u9732\u3002</p> <p>3\uff09\u5ba2\u6237\u7aef\u5411\u53c8\u62cd\u4e91 API \u670d\u52a1\u7aef\u8fdb\u884c\u8ba4\u8bc1\u9274\u6743</p> <p>\u6839\u636e\u4e0a\u9762\u4e24\u4e2a\u6b65\u9aa4\uff0c\u6700\u7ec8\u751f\u6210\u7b7e\u540d\u4fe1\u606f\uff0c\u8be6\u89c1\u4ee3\u7801\uff1a</p> <pre><code>wx.uploadFile({\n      url: `https://v0.api.upyun.com/${self.bucket}`,\n      filePath: options.localPath,\n      name: 'file',\n      formData: {\n        authorization: `UPYUN ${self.operator}:${signature}`,\n        policy: policy\n      },\n      success: options.success,\n      fail: options.fail,\n      complete: options.complete\n    })\n\n</code></pre> <p>5.6 \u4e0a\u4f20\u4ee3\u7801</p> <p>\u4ee5\u4e0a\u64cd\u4f5c\u6b65\u9aa4\u8fdb\u884c\u5b8c\u4e4b\u540e\uff0c\u60a8\u53ef\u4ee5\u4e0a\u4f20\u5fae\u4fe1\u5c0f\u7a0b\u5e8f\u4ee3\u7801\u81f3\u5fae\u4fe1\u5c0f\u7a0b\u5e8f\u670d\u52a1\u7aef\u3002\u8fdb\u5165\u5fae\u4fe1\u5f00\u53d1\u8005\u5de5\u5177\uff0c\u70b9\u51fb\u3010\u4e0a\u4f20\u3011\u6309\u94ae\uff0c\u586b\u5199\u7248\u672c\u53f7\u53ca\u9879\u76ee\u5907\u6ce8\u3002</p> <p></p> <p>\u8fdb\u5165\u5fae\u4fe1\u516c\u4f17\u5e73\u53f0\uff0c\u4f9d\u6b21\u8fdb\u5165\uff1a\u3010\u5f00\u53d1\u7ba1\u7406\u3011-\u300b\u3010\u5f00\u53d1\u7248\u672c\u3011-\u300b\u9009\u62e9\u4f53\u9a8c\u7248\u672c\u3002</p> <p></p> <p>\u8bbe\u7f6e\u9875\u9762\u8def\u5f84\u53ca\u53c2\u6570\uff0c\u5177\u4f53\u914d\u7f6e\u4e3a\uff1apages/index/index\uff0c\u63d0\u4ea4\u4e4b\u540e\uff0c\u8fdb\u5165\u5982\u4e0b\u9875\u9762\u3002</p> <p></p> <p>\u626b\u63cf\u4e8c\u7ef4\u7801\uff0c\u53ef\u4ee5\u8fdb\u5165\u5fae\u4fe1\u5c0f\u7a0b\u5e8f\u4f53\u9a8c\u7248\u3002</p>"},{"location":"api/small_program/#6-cdn","title":"6.\u5f00\u901a CDN \u670d\u52a1","text":"<p>\u4e3a\u4e86\u63d0\u5347\u5fae\u4fe1\u5c0f\u7a0b\u5e8f\u7684\u8bbf\u95ee\u4f53\u9a8c\uff0c\u8bbf\u95ee\u57df\u540d\u53ef\u4ee5\u8fdb\u884c CDN \u52a0\u901f\u3002\u53ef\u4ee5\u5728 5.2 \u4e2d\u521b\u5efa\u7684\u5b58\u50a8\u670d\u52a1\u4e0b\u76f4\u63a5\u7ed1\u5b9a\u52a0\u901f\u57df\u540d\u3002</p> <p>6.1 \u7ed1\u5b9a\u52a0\u901f\u57df\u540d</p> <p>\u7ed3\u5408\u524d\u9762\u6b65\u9aa4\u7533\u8bf7\u7684\u8bbf\u95ee\u57df\u540d\u4ee5\u53ca\u5fae\u4fe1\u516c\u4f17\u5e73\u53f0\u8bbe\u7f6e\u7684\u901a\u4fe1\u57df\u540d\uff0c\u60a8\u53ef\u4ee5\u5c06\u8bbf\u95ee\u57df\u540d\u5728\u53c8\u62cd\u4e91 CDN \u5e73\u53f0\u8fdb\u884c\u914d\u7f6e\u3002\u8fdb\u5165\u7b2c\u4e94\u6b65\u5df2\u5f00\u901a\u7684\u670d\u52a1\uff0c\u76f4\u63a5\u8fdb\u5165\u529f\u80fd\u914d\u7f6e\u6a21\u5757\u8fdb\u884c\u52a0\u901f\u57df\u540d\u7684\u7ed1\u5b9a\uff0c\u8be6\u60c5\u53c2\u89c1\u52a0\u901f\u57df\u540d\u3002</p> <p>6.2 \u4e00\u952e\u5f00\u542f HTTPS \u52a0\u901f</p> <p>\u8fdb\u5165\u3010\u529f\u80fd\u914d\u7f6e\u3011\u6a21\u5757\uff0c\u627e\u5230 HTTPS \u914d\u7f6e\uff0c\u53ef\u4ee5\u4e00\u952e\u5f00\u542f HTTPS \u52a0\u901f\u3002\u66f4\u591a\u64cd\u4f5c\u6b65\u9aa4\u53c2\u89c1HTTPS \u914d\u7f6e\u3002</p> <p>6.3 \u5c06\u57df\u540d\u5207\u6362\u5230 CDN</p> <p>\u5177\u4f53\u64cd\u4f5c\u8bf7\u53c2\u89c1 CNAME \u914d\u7f6e\u3002</p>"},{"location":"api/small_program/#7","title":"7.\u5176\u4ed6\u670d\u52a1","text":"<p>7.1 \u56fe\u7247\u5904\u7406</p> <p>\u7ed3\u5408\u56fe\u7247\u5904\u7406\u7684\u4f7f\u7528\u65b9\u5f0f\u6765\u5408\u7406\u4f7f\u7528\uff0c\u8bf7\u53c2\u89c1\u5982\u4e0b\u94fe\u63a5\u3002</p> <ul> <li>URL \u4f5c\u56fe</li> <li>\u7f29\u7565\u56fe\u7248\u672c</li> <li>\u4e0a\u4f20\u9884\u5904\u7406\uff08\u540c\u6b65\uff09</li> <li>\u4e0a\u4f20\u9884\u5904\u7406\uff08\u5f02\u6b65\uff09</li> </ul> <p>7.2 \u97f3\u89c6\u9891\u5904\u7406</p> <p>\u97f3\u89c6\u9891\u5904\u7406\u7684\u573a\u666f\u5305\u62ec\u5f02\u6b65\u97f3\u89c6\u9891\u5904\u7406\u548c\u540c\u6b65\u97f3\u89c6\u9891\u5904\u7406\uff0c\u8be6\u7ec6\u53c2\u89c1\u6587\u6863\uff1a</p> <ul> <li>\u5f02\u6b65\u97f3\u89c6\u9891\u5904\u7406</li> <li>\u540c\u6b65\u89c6\u9891\u5904\u7406</li> <li>\u540c\u6b65\u97f3\u9891\u5904\u7406</li> </ul>"},{"location":"cdn/","title":"\u5185\u5bb9\u603b\u89c8","text":"<p>\u4ea7\u54c1\u4ecb\u7ecd</p> <p>\u4ea7\u54c1\u6982\u8ff0 \uff5c            \u4ea7\u54c1\u67b6\u6784\uff5c \u4e3b\u8981\u529f\u80fd\uff5c \u4ea7\u54c1\u4f18\u52bf\uff5c\u5e94\u7528\u573a\u666f\uff5c\u8d44\u6e90\u5206\u5e03</p> <p>\u5feb\u901f\u5165\u95e8</p> <p>\u51c6\u5907\u5de5\u4f5c \uff5c\u5e10\u53f7\u6ce8\u518c\uff5c \u5e10\u53f7\u8ba4\u8bc1 \uff5c\u521b\u5efa\u670d\u52a1 \uff5c\u914d\u7f6e\u6d4b\u8bd5 \uff5c\u7f13\u5b58\u9a8c\u8bc1 \uff5cCNAME \u914d\u7f6e</p> <p>\u8d2d\u4e70\u6307\u5357</p> <p>\u4ef7\u683c\u603b\u89c8 \uff5c\u6d41\u91cf\u5305\u8d2d\u4e70</p> <p>\u670d\u52a1\u7ba1\u7406</p> <p>\u57df\u540d\u63a5\u5165\uff08\u81ea\u6709\u6e90\uff09 \uff5c \u00a0\u57df\u540d\u63a5\u5165\uff08\u53c8\u62cd\u5b58\u50a8\u6e90\uff09\uff5c \u64cd\u4f5c\u7ba1\u7406</p> <p>\u914d\u7f6e\u6307\u5357</p> <p>\u57df\u540d\u7ba1\u7406\uff5c \u56de\u6e90\u7ba1\u7406\uff5c \u7f13\u5b58\u914d\u7f6e \uff5c \u6027\u80fd\u4f18\u5316 \uff5c HTTPS\u914d\u7f6e \uff5c \u8bbf\u95ee\u63a7\u5236 \uff5c \u56fe\u7247\u5904\u7406 \uff5c \u5176\u4ed6\u529f\u80fd </p> <p>\u8fb9\u7f18\u89c4\u5219</p> <p>\u529f\u80fd\u6982\u8ff0\uff5c \u8bed\u6cd5\u89c4\u5219\uff5c\u914d\u7f6e\u6307\u5357 \uff5c \u7ecf\u5178\u6848\u4f8b </p> <p>\u7edf\u8ba1\u5206\u6790</p> <p>\u7edf\u8ba1\u5206\u6790 \uff5c \u6027\u80fd\u76d1\u63a7</p> <p>\u5237\u65b0\u9884\u70ed</p> <p>URL\u5237\u65b0\uff5c    \u89c4\u5219\u5237\u65b0\uff5c URL\u9884\u70ed \uff5c \u64cd\u4f5c\u8bb0\u5f55 </p> <p>\u65e5\u5fd7\u7ba1\u7406</p> <p>\u65e5\u5fd7\u5206\u6790\uff5c    \u65e5\u5fd7\u4e0b\u8f7d</p> <p>\u8bc1\u4e66\u670d\u52a1</p> <p>\u4ea7\u54c1\u4ecb\u7ecd \uff5c            \u540d\u8bcd\u89e3\u91ca\uff5c \u4ea7\u54c1\u529f\u80fd \uff5c\u4ea7\u54c1\u4f18\u52bf \uff5c\u4f7f\u7528\u573a\u666f \uff5c\u7248\u672c\u8fed\u4ee3 \uff5c\u8d2d\u4e70\u6307\u5bfc\uff5c\u5feb\u901f\u5165\u95e8\uff5c\u6ce8\u610f\u4e8b\u9879</p> <p>\u8f85\u52a9\u5de5\u5177</p> <p>IP\u68c0\u6d4b\u5de5\u5177\uff5cCDN\u5065\u5eb7\u68c0\u6d4b</p> <p>\u5e38\u89c1\u95ee\u9898</p> <p>\u7f13\u5b58\u76f8\u5173\uff5c\u5237\u65b0\u76f8\u5173\uff5c\u6027\u80fd\u76f8\u5173\uff5c\u529f\u80fd\u76f8\u5173\uff5c\u5b89\u5168\u76f8\u5173\uff5c\u8d44\u6e90\u76f8\u5173\uff5c\u8bc1\u4e66\u76f8\u5173</p>"},{"location":"cdn/advanced/","title":"Advanced","text":""},{"location":"cdn/advanced/#_1","title":"\u8bbf\u95ee\u63a7\u5236","text":"<p>IP \u7981\u7528</p> <p>\u5047\u5982\u9700\u8981\u7981\u7528\u67d0\u4e2a IP \u6216\u8005\u67d0\u4e2a IP \u6bb5\uff0c\u5219\u9700\u8981\u8fdb\u884c\u8be5\u529f\u80fd\u914d\u7f6e\u3002\u7279\u522b\u5730\uff0cIP \u9632\u76d7\u94fe\u76ee\u524d\u6682\u65f6\u53ea\u652f\u6301\u9ed1\u540d\u5355\u903b\u8f91\u3002</p> <p>\u914d\u7f6e\u5f15\u5bfc</p> <p>\u767b\u9646 \u53c8\u62cd\u4e91\u7ba1\u7406\u63a7\u5236\u53f0\uff0c\u4f9d\u6b21\u8fdb\u5165\uff1a\u670d\u52a1 &gt; \u529f\u80fd\u914d\u7f6e &gt; \u9632\u76d7\u94fe &gt; IP \u7981\u7528\uff0c\u70b9\u51fb\u300c\u7ba1\u7406\u300d\u6309\u94ae\u5373\u53ef\u5f00\u59cb\u914d\u7f6e\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff1a</p> <p></p> <p>\u6ce8\u610f\u4e8b\u9879\uff1a</p> <p>1.\u652f\u6301 <code>*</code> \u901a\u914d\u7b26\uff0c\u5982 <code>10.11.12.*</code> \u5c06\u7981\u6b62 <code>10.11.12.0~10.11.12.255</code> \u7684 IP \u8bbf\u95ee</p> <p>2.\u7981\u7528 IP \u4e0a\u9650 100 \u6761\uff0c\u88ab\u7981\u6b62\u7684 IP \u8bbf\u95ee\u8d44\u6e90\u65f6\uff0c\u5c06\u63d0\u793a 403</p> <p>\u5730\u533a\u8bbf\u95ee\u9650\u5236</p> <p>\u5730\u533a\u8bbf\u95ee\u9650\u5236\u662f\u6307\u6839\u636e\u52a0\u901f\u7f51\u7ad9\u7684\u9700\u6c42\uff0c\u5141\u8bb8\u6216\u7981\u6b62\u7279\u5b9a\u533a\u57df\u7684\u7ec8\u7aef\u7528\u6237\u5bf9\u7f51\u7ad9\u8d44\u6e90\u7684\u8bbf\u95ee\u3002\u5373\u7f51\u7ad9\u6307\u5b9a\u5730\u533a\uff0c\u5141\u8bb8\u8be5\u5730\u533a\u7ec8\u7aef\u7528\u6237\u8bbf\u95ee\uff0c\u800c\u9650\u5236\u5176\u4ed6\u5730\u533a\u7528\u6237\u8bbf\u95ee\uff0c\u6216\u8005\u76f8\u53cd\u3002</p> <p>\u914d\u7f6e\u5f15\u5bfc</p> <p>\u767b\u9646 \u53c8\u62cd\u4e91\u7ba1\u7406\u63a7\u5236\u53f0\uff0c\u4f9d\u6b21\u8fdb\u5165\uff1a\u670d\u52a1 &gt; \u529f\u80fd\u914d\u7f6e &gt; \u9632\u76d7\u94fe &gt; \u5730\u533a\u8bbf\u95ee\u9650\u5236\uff0c\u70b9\u51fb\u300c\u7ba1\u7406\u300d\u6309\u94ae\u5373\u53ef\u5f00\u59cb\u914d\u7f6e\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff1a</p> <p></p> <p>\u8be6\u7ec6\u914d\u7f6e\u8bf7\u53c2\u89c1 \u5730\u533a\u8bbf\u95ee\u9650\u5236\u7528\u6237\u6307\u5357\u3002</p> <p>Referer \u9632\u76d7\u94fe</p> <p>\u5f53\u8bf7\u6c42\u53d1\u9001\u5230 CDN \u670d\u52a1\u5668\u540e\uff0cCDN \u670d\u52a1\u5668\u68c0\u67e5 HTTP \u8bf7\u6c42\u5934\u4e2d\u7684 Referer \u5b57\u6bb5\u7684\u4fe1\u606f\uff0c\u7981\u6b62\u6216\u8005\u5141\u8bb8\u7b26\u5408\u7279\u5b9a\u89c4\u5219\u7684 Referer \u7684\u8bf7\u6c42\u3002</p> <p>\u914d\u7f6e\u5f15\u5bfc</p> <p>\u767b\u9646 \u53c8\u62cd\u4e91\u7ba1\u7406\u63a7\u5236\u53f0\uff0c\u4f9d\u6b21\u8fdb\u5165\uff1a\u670d\u52a1 &gt; \u529f\u80fd\u914d\u7f6e &gt; \u9632\u76d7\u94fe &gt; \u57df\u540d\u9632\u76d7\u94fe\uff0c\u70b9\u51fb\u300c\u7ba1\u7406\u300d\u6309\u94ae\u5373\u53ef\u5f00\u59cb\u914d\u7f6e\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff1a</p> <p></p> <p>\u6ce8\u610f\u4e8b\u9879\uff1a</p> <p>1.\u767d\u540d\u5355\uff1a\u4ec5\u5141\u8bb8\u540d\u5355\u4e2d\u7684\u57df\u540d\u7f51\u7ad9\u8bbf\u95ee\u6587\u4ef6\uff0c\u5176\u4ed6\u57df\u540d\u7f51\u7ad9\u90fd\u4e0d\u5141\u8bb8\u8bbf\u95ee</p> <p>2.\u9ed1\u540d\u5355\uff1a\u4ec5\u7981\u6b62\u540d\u5355\u4e2d\u7684\u57df\u540d\u7f51\u7ad9\u8bbf\u95ee\u6587\u4ef6\uff0c\u5176\u4ed6\u57df\u540d\u7f51\u7ad9\u90fd\u5141\u8bb8\u8bbf\u95ee</p> <p>3.\u652f\u6301 <code>*</code> \u901a\u914d\u7b26\uff0c\u6bd4\u5982\u767d\u540d\u5355\u7684 <code>*upyun.com</code> \u5c06\u5141\u8bb8 <code>www.upyun.com</code>\u3001<code>abcupyun.com</code> \u7b49\u7f51\u7ad9\u8bbf\u95ee</p> <p>4.\u7279\u522b\u5730\uff0c\u9ed8\u8ba4 <code>\u5141\u8bb8 Referer \u4e3a\u7a7a</code> \u8fd9\u79cd\u60c5\u51b5\u4f1a\u7ed5\u8fc7\u9632\u76d7\u94fe\u7684\u903b\u8f91\uff0c\u82e5\u8fd9\u91cc\u542f\u7528 <code>\u7981\u6b62 Referer \u4e3a\u7a7a</code>\uff0c\u90a3\u4e48\u8fd9\u7c7b\u8bf7\u6c42\u5c31\u76f4\u63a5\u88ab\u7981\u6b62\u8bbf\u95ee\u4e86</p> <p>User-Agent \u9632\u76d7\u94fe</p> <p>\u53ea\u5141\u8bb8\u7279\u5b9a\u7684\u6d4f\u89c8\u5668\u6216\u8005\u5e26\u6709\u7279\u6b8a <code>User-Agent</code> \u6807\u8bc6\u7684\u4e13\u5c5e\u7684\u5ba2\u6237\u7aef\u8fdb\u884c\u8bbf\u95ee\u3002\u76ee\u524d\u6682\u65f6\u53ea\u652f\u6301\u767d\u540d\u5355\u903b\u8f91\u3002</p> <p>\u914d\u7f6e\u5f15\u5bfc</p> <p>\u767b\u9646 \u53c8\u62cd\u4e91\u7ba1\u7406\u63a7\u5236\u53f0\uff0c\u4f9d\u6b21\u8fdb\u5165\uff1a\u670d\u52a1 &gt; \u529f\u80fd\u914d\u7f6e &gt; \u9632\u76d7\u94fe &gt; \u5ba2\u6237\u7aef\u9632\u76d7\u94fe\uff0c\u70b9\u51fb\u300c\u7ba1\u7406\u300d\u6309\u94ae\u5373\u53ef\u5f00\u59cb\u914d\u7f6e\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff1a</p> <p></p> <p>\u6ce8\u610f\u4e8b\u9879\uff1a</p> <p>1.\u6dfb\u52a0\u6570\u91cf\u4e0a\u9650 50 \u6761</p> <p>2.<code>User-Agent</code> \u4e0d\u533a\u5206\u5927\u5c0f\u5199\uff0c\u4e14\u652f\u6301 <code>*</code> \u901a\u914d\u7b26</p> <p>3.<code>User-Agent</code> \u9632\u76d7\u94fe\u7684\u4f18\u5148\u7ea7\u9ad8\u4e8e Referer \u9632\u76d7\u94fe</p> <p>Token \u9632\u76d7\u94fe</p> <p>\u53ef\u8bbe\u7f6e\u7b7e\u540d\u8fc7\u671f\u65f6\u95f4\u6765\u63a7\u5236\u6587\u4ef6\u7684\u8bbf\u95ee\u65f6\u9650\u3002Token \u9632\u76d7\u94fe\u7684\u76ee\u7684\u662f\u4f7f\u5f97\u6bcf\u4e2a\u8bf7\u6c42\u7684 URL \u90fd\u5177\u6709\u4e00\u5b9a\u7684\u201c\u65f6\u6548\u6027\u201d\uff0c\u56e0\u6b64 URL \u672c\u8eab\u9700\u8981\u643a\u5e26\u8fc7\u671f\u65f6\u95f4\u76f8\u5173\u7684\u4fe1\u606f\uff0c\u540c\u65f6\u8fd8\u9700\u8981\u786e\u4fdd\u8fd9\u4e2a\u8fc7\u671f\u65f6\u95f4\uff0c\u4e0d\u80fd\u88ab\u6076\u610f\u4fee\u6539\uff0c\u56e0\u6b64\u91c7\u7528 md5 \u7b97\u6cd5\uff0c\u5c06\u5bc6\u6587\uff08\u901a\u5e38\u662f\u4e00\u4e2a\u666e\u901a\u5b57\u7b26\u4e32\uff09\u3001\u8fc7\u671f\u65f6\u95f4\u3001\u6587\u4ef6\u8def\u5f84\uff08\u8fc7\u671f\u65f6\u95f4\u548c\u6587\u4ef6\u8def\u5f84\u901a\u5e38\u662f\u6709\u5bf9\u5e94\u5173\u7cfb\u7684\uff0c\u56e0\u6b64\u4e5f\u53c2\u4e0e md5 \u7684\u8ba1\u7b97\uff09\u7b49\u4fe1\u606f\u6240\u8ba1\u7b97\u7684 md5 \u503c\u4e5f\u52a0\u5165\u5230 URL \u4e2d\uff0cCDN \u8282\u70b9\u5728\u9a8c\u8bc1\u8bf7\u6c42\u65f6\uff0c\u9664\u4e86\u9a8c\u8bc1\u8fc7\u671f\u65f6\u95f4\uff0c\u540c\u65f6\u8fd8\u4f1a\u9a8c\u8bc1\u8be5 md5 \u503c\u662f\u5426\u5339\u914d\uff0c\u5bf9\u4e8e\u4e0d\u5339\u914d\u7684 md5\uff0c\u8bf4\u660e URL \u88ab\u7be1\u6539\uff0c\u5373\u4f7f\u8bf7\u6c42\u672a\u8fc7\u671f\u4e5f\u9700\u8981\u7981\u6b62\u670d\u52a1\u3002</p> <p>\u5b9e\u73b0\u539f\u7406</p> <p></p> <p>\u914d\u7f6e\u5f15\u5bfc</p> <p>\u767b\u9646 \u53c8\u62cd\u4e91\u7ba1\u7406\u63a7\u5236\u53f0\uff0c\u4f9d\u6b21\u8fdb\u5165\uff1a\u670d\u52a1 &gt; \u529f\u80fd\u914d\u7f6e &gt; \u9632\u76d7\u94fe &gt; Token \u9632\u76d7\u94fe\uff0c\u70b9\u51fb\u300c\u7ba1\u7406\u300d\u6309\u94ae\u5373\u53ef\u5f00\u59cb\u914d\u7f6e\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff1a</p> <p></p> <p>\u7b7e\u540d\u65b9\u5f0f</p> <p>\u7b7e\u540d\uff1a</p> <pre><code>_upt = MD5(token \u5bc6\u94a5 &amp; etime &amp; URI){\u4e2d\u95f4 8 \u4f4d} + etime\n</code></pre> <p>\u53c2\u6570\uff1a</p> <ul> <li>token \u5bc6\u94a5\uff1a\u7528\u6237\u6240\u586b\u7684\u5bc6\u94a5</li> <li>etime\uff1a\u8fc7\u671f\u65f6\u95f4\uff0c\u5fc5\u987b\u662f UNIX TIME \u683c\u5f0f\uff0c\u5982\uff1a 1378092990</li> <li>URI\uff1a\u8bf7\u6c42\u5730\u5740\uff08\u4e0d\u5305\u542b?\u53ca\u540e\u9762\u7684 Query String\uff09\uff0c\u5982\uff1a /dir/pic.jpg</li> </ul> <p>\u793a\u4f8b</p> <pre><code>\u8bbe\u7f6e\u56fe\u7247\u94fe\u63a5 http://&lt;bucket&gt;/dir/pic.jpg  10 \u5206\u949f\u6709\u6548\n\u5f53\u524d Unix \u65f6\u95f4 = 1370000000\netime = 1370000000 + 600 = 1370000600\nURI = '/dir/pic.jpg'\nsign = MD5(token \u5bc6\u94a5&amp;etime&amp;URI) = xxxxxxxxxxxxabcdefghyyyyyyyyyyyy\n_upt = MD5(token \u5bc6\u94a5&amp;etime&amp;URI){\u4e2d\u95f4 8 \u4f4d} + etime = abcdefgh1370000600\n\n\u8be5\u7b7e\u540d\u62fc\u63a5\u5728 URL \u5730\u5740\u6216\u7528\u6237 Cookie \u4e2d\uff0c\u5747\u53ef\u8d77\u5230\u9632\u76d7\u94fe\u4f5c\u7528:\nURL: http://&lt;bucket&gt;/dir/pic.jpg?_upt=abcdefgh1370000600\nCookie: _upt=abcdefgh1370000600;\n</code></pre> <p>\u4ee3\u7801\u5b9e\u4f8b (PHP)</p> <pre><code>&lt;?php\n$etime = time() + 600; // \u6388\u6743\u5341\u5206\u949f\u540e\u8fc7\u671f\n$key = 'token \u5bc6\u94a5';   // token \u9632\u76d7\u94fe\u5bc6\u94a5\n$path = '/dir/pic.jpg'; // \u56fe\u7247\u76f8\u5bf9\u8def\u5f84\n$sign = substr(md5($key.'&amp;'.$etime.'&amp;'.$path), 12,8).$etime;\n?&gt;\n</code></pre> <p>\u56de\u6e90\u9274\u6743</p> <p>\u56de\u6e90\u9274\u6743\u662f\u4e00\u79cd\u9ad8\u7ea7\u7684\u9632\u76d7\u94fe\u65b9\u5f0f\uff0c\u9002\u7528\u4e8e\u5bf9\u9632\u76d7\u94fe\u6709\u5f88\u9ad8\u5b9e\u65f6\u6027\u8981\u6c42\u7684\u573a\u666f\u3002\u5927\u6982\u539f\u7406\u662f CDN \u8fb9\u7f18\u8282\u70b9\u6bcf\u6b21\u63a5\u53d7\u5230\u8bf7\u6c42\u4e4b\u540e\uff0c\u90fd\u9700\u8981\u56de\u5ba2\u6237\u6e90\u7ad9\u8fdb\u884c\u9a8c\u8bc1\uff0c\u9a8c\u8bc1\u901a\u8fc7\u4e4b\u540e\u624d\u8ba4\u4e3a\u662f\u5408\u6cd5\u8bf7\u6c42\uff0c\u8fd9\u6837 CDN \u53ef\u4ee5\u7ee7\u7eed\u63d0\u4f9b\u670d\u52a1\u3002</p> <p>\u914d\u7f6e\u5f15\u5bfc</p> <p>\u767b\u9646 \u53c8\u62cd\u4e91\u7ba1\u7406\u63a7\u5236\u53f0\uff0c\u4f9d\u6b21\u8fdb\u5165\uff1a\u670d\u52a1 &gt; \u529f\u80fd\u914d\u7f6e &gt; \u9632\u76d7\u94fe &gt; \u56de\u6e90\u9274\u6743\uff0c\u70b9\u51fb\u300c\u7ba1\u7406\u300d\u6309\u94ae\u5373\u53ef\u5f00\u59cb\u914d\u7f6e\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff1a</p> <p></p> <p>\u8be6\u7ec6\u914d\u7f6e\u8bf7\u53c2\u89c1 \u56de\u6e90\u9274\u6743\u7528\u6237\u6307\u5357\u3002</p> <p>\u5916\u94fe\u529f\u80fd</p> <p>\u901a\u8fc7\u7ba1\u7406\u540e\u53f0\uff0c\u53ef\u4ee5\u4e00\u952e\u7981\u6b62\u6574\u4e2a\u670d\u52a1\u57df\u540d\u4e0b\u6240\u6709\u8d44\u6e90\u7684\u8bbf\u95ee\uff0c\u7279\u522b\u5730\uff0c\u6b64\u65f6\u4f1a\u54cd\u5e94 405 \u72b6\u6001\u7801\u7ed9\u5ba2\u6237\u7aef\u3002</p> <p>\u914d\u7f6e\u5f15\u5bfc</p> <p>\u767b\u9646 \u53c8\u62cd\u4e91\u7ba1\u7406\u63a7\u5236\u53f0\uff0c\u4f9d\u6b21\u8fdb\u5165\uff1a\u670d\u52a1 &gt; \u529f\u80fd\u914d\u7f6e &gt; \u57fa\u7840\u914d\u7f6e &gt; \u5916\u94fe\u529f\u80fd\uff0c\u5173\u95ed\u5916\u94fe\u529f\u80fd\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff1a</p> <p></p> <p>\u6ce8\u610f\u4e8b\u9879\uff1a</p> <p>1.\u670d\u52a1\u521b\u5efa\u5b8c\u6bd5\u4e4b\u540e\uff0c\u5916\u94fe\u529f\u80fd\u9ed8\u8ba4\u5f00\u542f</p> <p>2.\u5173\u95ed\u5916\u94fe\u529f\u80fd\uff0c\u4f1a\u5bfc\u81f4\u8d44\u6e90\u65e0\u6cd5\u8bbf\u95ee\uff0c\u8bf7\u8c28\u614e\u64cd\u4f5c</p>"},{"location":"cdn/advanced/#_2","title":"\u5b89\u5168\u9632\u62a4","text":"<p>WAF \u9632\u62a4</p> <p>WAF \u9632\u62a4\u4e3b\u8981\u9632\u62a4\u7684\u662f\u6765\u81ea\u5bf9\u7f51\u7ad9\u6e90\u7ad9\u7684\u52a8\u6001\u6570\u636e\u653b\u51fb\uff0c\u53ef\u9632\u62a4\u7684\u653b\u51fb\u7c7b\u578b\u5305\u62ec SQL \u6ce8\u5165\u3001XSS \u653b\u51fb\u3001CSRF \u653b\u51fb\u3001\u6076\u610f\u722c\u866b\u3001\u626b\u63cf\u5668\u3001\u8fdc\u7a0b\u6587\u4ef6\u5305\u542b\u7b49\u653b\u51fb\u3002</p> <p>\u914d\u7f6e\u5f15\u5bfc</p> <p>\u767b\u9646 \u53c8\u62cd\u4e91\u7ba1\u7406\u63a7\u5236\u53f0\uff0c\u4f9d\u6b21\u8fdb\u5165\uff1a\u670d\u52a1 &gt; \u529f\u80fd\u914d\u7f6e &gt; \u4e91\u5b89\u5168 &gt; WAF \u9632\u62a4\uff0c\u5f00\u542f WAF \u4fdd\u62a4\u5373\u53ef\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff1a</p> <p></p> <p>\u6ce8\u610f\u4e8b\u9879\uff1a\u9002\u7528\u4e8e\u52a8\u6001\u8d44\u6e90\u52a0\u901f\uff0c\u5168\u9759\u6001\u8d44\u6e90\u52a0\u901f\u5efa\u8bae\u4e0d\u542f\u7528\u8be5\u529f\u80fd</p> <p>CC \u9632\u62a4</p> <p>CC \u9632\u62a4\u4e3b\u8981\u662f\u9488\u5bf9\u7f51\u7edc\u5b89\u5168\u9886\u57df\u4e2d\u7684 CC \u653b\u51fb\u800c\u8fdb\u884c\u7684\u4e00\u79cd\u5e94\u7528\u5c42\u653b\u51fb\u9632\u62a4\uff0c\u8be5\u529f\u80fd\u901a\u8fc7\u81ea\u5b9a\u4e49\u5339\u914d\u89c4\u5219\u5bf9\u76ee\u6807\u8d44\u6e90\u8fdb\u884c\u76d1\u63a7\uff0c\u5f53\u8bf7\u6c42\u9891\u7387\u8fbe\u5230\u89e6\u53d1\u9891\u7387\u65f6\u5bf9\u7591\u4f3c\u653b\u51fb\u8bf7\u6c42\u8fdb\u884c\u6821\u9a8c\uff0c\u6821\u9a8c\u901a\u8fc7\u5219\u5141\u8bb8\u8bbf\u95ee\uff1b\u6821\u9a8c\u4e0d\u901a\u8fc7\uff0c\u5219\u76f4\u63a5\u7981\u6b62\u8bbf\u95ee\u3002</p> <p>\u914d\u7f6e\u5f15\u5bfc</p> <p>\u767b\u9646 \u53c8\u62cd\u4e91\u7ba1\u7406\u63a7\u5236\u53f0\uff0c\u4f9d\u6b21\u8fdb\u5165\uff1a\u670d\u52a1 &gt; \u529f\u80fd\u914d\u7f6e &gt; \u4e91\u5b89\u5168 &gt; CC \u9632\u62a4\uff0c\u70b9\u51fb\u300c\u7ba1\u7406\u300d\u6309\u94ae\u5373\u53ef\u5f00\u59cb\u914d\u7f6e\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff1a</p> <p></p> <p>\u5177\u4f53\u914d\u7f6e\u53ef\u4ee5\u8d70\u5982\u4e0b\u56db\u4e2a\u6b65\u9aa4\uff1a</p> <ul> <li>\u7b2c\u4e00\u6b65\uff1a\u6dfb\u52a0\u9632\u62a4\u7b56\u7565\uff0c\u8bbe\u7f6e URI \u5339\u914d\u89c4\u5219\uff0c\u4f8b\u5982\uff1a/image/*.jpg</li> <li>\u7b2c\u4e8c\u6b65\uff1a\u586b\u5199\u8bbf\u95ee\u9891\u7387\u9608\u503c\uff0c\u4f8b\u5982\uff1a500\u6b21/\u5206\u949f\uff0c\u5728\u667a\u80fd\u9632\u62a4\u6a21\u5f0f\u4e0b\u624d\u6709\u6548</li> <li>\u7b2c\u4e09\u6b65\uff1a\u8bbe\u7f6e IP \u767d\u540d\u5355\uff0c\u5982\u679c\u8981\u7ed5\u8fc7 CC \u9632\u62a4\u7b56\u7565\uff0c\u6b64\u5904\u53ef\u8fdb\u884c\u8bbe\u7f6e</li> <li>\u7b2c\u56db\u6b65\uff1a\u9009\u62e9 CC \u9632\u62a4\u6a21\u5f0f\uff0c\u5305\u62ec\u5f3a\u5236\u9632\u62a4\u3001\u667a\u80fd\u9632\u62a4\u3001\u6682\u505c\u9632\u62a4\uff0c\u5f53\u6b63\u5728\u906d\u53d7\u653b\u51fb\u65f6\uff0c\u5efa\u8bae\u9009\u62e9\u5f3a\u5236\u9632\u62a4\u6a21\u5f0f</li> </ul> <p>\u6ce8\u610f\u4e8b\u9879\uff1a</p> <p>1.CC \u9632\u62a4\u5206\u4e3a\u5f3a\u5236\u9632\u62a4\u548c\u667a\u80fd\u9632\u62a4\u4e24\u79cd\u6a21\u5f0f\uff0c\u5728\u667a\u80fd\u9632\u62a4\u6a21\u5f0f\u4e0b\uff0c\u5219\u4f1a\u5339\u914d URI \u89c4\u5219\uff0c\u8bf7\u6c42\u4e00\u65e6\u8fbe\u5230\u8bbf\u95ee\u9891\u7387\u9608\u503c\uff0c\u5219\u4f1a\u89e6\u53d1 JavaScript \u6821\u9a8c\uff0c\u6821\u9a8c\u901a\u8fc7\u5219\u53ef\u6b63\u5e38\u8bbf\u95ee\uff0c\u6821\u9a8c\u4e0d\u901a\u8fc7\u5219\u76f4\u63a5\u62d2\u7edd\u3002\u5728\u5f3a\u5236\u9632\u62a4\u6a21\u5f0f\u4e0b\uff0c\u5219\u4f1a\u5ffd\u7565\u8bbf\u95ee\u9891\u7387\u9608\u503c\uff0c\u76f4\u63a5\u89e6\u53d1 JavaScript \u6821\u9a8c\uff0c\u4ee5\u6b64\u7c7b\u63a8</p> <p>2.\u5728\u667a\u80fd\u9632\u62a4\u6a21\u5f0f\u4e0b\uff0c\u8bbf\u95ee\u9608\u503c\u8bbe\u7f6e\u5f97\u8fc7\u4f4e\uff0c\u53ef\u80fd\u4e0d\u4f1a\u89e6\u53d1 JavaScript \u6821\u9a8c\uff0c\u5efa\u8bae\u9608\u503c\u8bbe\u7f6e\u9ad8\u4e00\u4e9b</p> <p>HTTP \u8bf7\u6c42\u5927\u5c0f\u9650\u5236</p> <p>\u53ef\u9650\u5236\u5355\u6b21\u8bf7\u6c42\u4f53\u7684\u5185\u5bb9\u5927\u5c0f\uff0c\u80fd\u6709\u6548\u4fdd\u8bc1\u8bf7\u6c42\u7684\u5b89\u5168\u6027\uff0c\u9ed8\u8ba4\u662f 512M \u3002</p> <p>\u914d\u7f6e\u5f15\u5bfc</p> <p>\u767b\u9646 \u53c8\u62cd\u4e91\u7ba1\u7406\u63a7\u5236\u53f0\uff0c\u4f9d\u6b21\u8fdb\u5165\uff1a\u670d\u52a1 &gt; \u529f\u80fd\u914d\u7f6e &gt; \u4e91\u5b89\u5168 &gt; HTTP \u8bf7\u6c42\u5927\u5c0f\u9650\u5236\uff0c\u70b9\u51fb\u300c\u7ba1\u7406\u300d\u6309\u94ae\u5373\u53ef\u5f00\u59cb\u914d\u7f6e\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff1a</p> <p></p> <p>IP \u8bbf\u95ee\u9650\u5236</p> <p>\u53ef\u6839\u636e\u5355\u4e2a IP \u7684\u8bbf\u95ee\u9891\u7387\u6765\u8fdb\u884c\u9632\u5fa1\uff0c\u5728\u6b63\u5e38\u7684\u60c5\u51b5\u4e0b\uff0c\u7528\u6237\u8bbf\u95ee\u7f51\u7ad9\u662f\u6709\u4e00\u5b9a\u9891\u7387\u7684\uff0c\u53ef\u901a\u8fc7\u5339\u914d\u81ea\u5b9a\u4e49\u7684\u9650\u5236\u89c4\u5219\u5bf9\u5355\u4e2a IP \u8fdb\u884c\u76d1\u63a7\uff0c\u5c06\u8d85\u8fc7\u8bbe\u5b9a\u9608\u503c\u7684 IP \u7684\u8bbf\u95ee\u8fdb\u884c\u62e6\u622a\u6216\u8005\u5ef6\u8fdf\u54cd\u5e94\uff0c\u4ece\u800c\u8fbe\u5230\u5b89\u5168\u9632\u62a4\u6548\u679c\u3002</p> <p>\u914d\u7f6e\u5f15\u5bfc</p> <p>\u767b\u9646 \u53c8\u62cd\u4e91\u7ba1\u7406\u63a7\u5236\u53f0\uff0c\u4f9d\u6b21\u8fdb\u5165\uff1a\u670d\u52a1 &gt; \u529f\u80fd\u914d\u7f6e &gt; \u4e91\u5b89\u5168 &gt; IP \u8bbf\u95ee\u9650\u5236\uff0c\u70b9\u51fb\u300c\u7ba1\u7406\u300d\u6309\u94ae\u5373\u53ef\u5f00\u59cb\u914d\u7f6e\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff1a</p> <p></p> <p>\u914d\u7f6e\u6b65\u9aa4\u5982\u4e0b\uff1a</p> <p>\u7b2c\u4e00\u6b65\uff1a\u586b\u5199\u8bbf\u95ee\u7684\u8d44\u6e90\u8def\u5f84\u89c4\u5219\uff0c\u652f\u6301 <code>\uff0a</code> \u901a\u914d\u7b26\uff0c\u5982\uff1a<code>/a/*.mp4</code>\u3001<code>/b/*.flv</code></p> <p>\u7b2c\u4e8c\u6b65\uff1a\u9009\u62e9\u9650\u5236\u65b9\u5f0f\uff1a<code>\u76f4\u63a5\u7981\u6b62</code>\u6216<code>\u5ef6\u8fdf\u54cd\u5e94</code></p> <p>\u7b2c\u4e09\u6b65\uff1a\u8bbe\u7f6e\u8bbf\u95ee\u9891\u7387\u53ca\u76f8\u5e94\u7684\u65f6\u95f4\u9650\u5236</p> <p>\u6ce8\u610f\u4e8b\u9879\uff1a</p> <p>1.\u76f4\u63a5\u7981\u6b62\u3001\u5ef6\u65f6\u54cd\u5e94\u90fd\u662f\u4ee5 60s \u4e3a\u4e00\u4e2a\u8ba1\u6570\u5468\u671f\uff0c\u5373\u4e0a\u4e00\u4e2a 60s \u7684\u8ba1\u6570\u4e0d\u4f1a\u7d2f\u8ba1\u53e0\u52a0\u5230\u4e0b\u4e00\u4e2a 60s \u5185</p> <p>2.\u7981\u6b62\u8bbf\u95ee\u65f6\u95f4\u7684\u8bbe\u7f6e\u9700\u5927\u4e8e\u7b49\u4e8e 60s\uff0c\u5ef6\u8fdf\u54cd\u5e94\u65f6\u95f4\u7684\u8bbe\u7f6e\u9700\u5c0f\u4e8e\u7b49\u4e8e 30s</p> <p>3.\u8bf7\u52ff\u5c06\u8bbf\u95ee\u9891\u7387\u503c\u8bbe\u7f6e\u8fc7\u4f4e\uff0c\u4ee5\u514d\u5f71\u54cd\u6b63\u5e38\u7528\u6237\u7684\u8bbf\u95ee\u8bf7\u6c42</p> <p>\u8be6\u7ec6\u914d\u7f6e\u8bf7\u53c2\u89c1 IP \u8bbf\u95ee\u9650\u5236\u7528\u6237\u6307\u5357\u3002</p>"},{"location":"cdn/advanced/#https","title":"HTTPS \u914d\u7f6e","text":"<p>\u53c8\u62cd\u4e91 HTTPS \u52a0\u901f\u670d\u52a1\u5efa\u7acb\u5728\u81ea\u4e3b\u7814\u53d1\u7684\u5185\u5bb9\u5206\u53d1\u7f51\u7edc\u57fa\u7840\u4e4b\u4e0a\uff0c\u5168\u9762\u652f\u6301\u4e86 HTTPS \u534f\u8bae\u52a0\u901f\u3002\u901a\u8fc7\u4f1a\u8bdd\u91cd\u7528\u53ca\u4f1a\u8bdd\u4fdd\u6301\u3001\u5728\u7ebf\u8bc1\u4e66\u72b6\u6001\u68c0\u67e5\u3001\u534f\u8bae\u4f18\u5316\u3001SSL \u534f\u8bae\u63e1\u624b\u4f18\u5316\u3001HTTP/2 \u7b49\u6280\u672f\u624b\u6bb5\uff0c\u5168\u9762\u63d0\u5347\u4e86 HTTPS \u534f\u8bae\u52a0\u901f\u6027\u80fd\u3002</p>"},{"location":"cdn/advanced/#_3","title":"\u914d\u7f6e\u5f15\u5bfc","text":"<p>\u7b2c\u4e00\u6b65\uff1a\u4f9d\u6b21\u8fdb\u5165 \u670d\u52a1 &gt; \u529f\u80fd\u914d\u7f6e &gt; HTTPS, \u70b9\u51fb <code>\u7ba1\u7406</code> \u5373\u53ef\u5f00\u59cb\u914d\u7f6e\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff1a</p> <p></p> <p>\u7b2c\u4e8c\u6b65\uff1a\u53ef\u9488\u5bf9\u5355\u4e2a\u57df\u540d\u9009\u62e9\u76f8\u5e94\u7684\u8bc1\u4e66\uff0c\u7136\u540e\u4fdd\u5b58\u3002\u5982\u679c\u65e0\u8bc1\u4e66\u53ef\u9009\uff0c\u53ef\u524d\u5f80 SSL \u8bc1\u4e66\u670d\u52a1\u5e73\u53f0\u6dfb\u52a0\u57df\u540d\u7684\u81ea\u6709\u8bc1\u4e66\uff1b\u7528\u6237\u4e5f\u53ef\u76f4\u63a5\u5728 SSL \u8bc1\u4e66\u7533\u8d2d\u5e73\u53f0\u7533\u8d2d Symantec\u3001GeoTrust\u3001TrustAsia\u3001Let\u2019s Encrypt \u7684\u5404\u7c7b SSL \u8bc1\u4e66\uff0c\u5176\u4e2d TrustAsia\u3001Let\u2019s Encrypt \u7684 DV SSL \u5355\u57df\u540d\u8bc1\u4e66\u53ef\u514d\u8d39\u7533\u8bf7\u3002</p> <p></p> <p>\u7b2c\u4e09\u6b65\uff1a\u53ef\u9009\u62e9\u662f\u5426\u5f00\u542f HTTPS \u8bbf\u95ee\u548c\u5f3a\u5236 HTTPS \u529f\u80fd\u3002\u5728\u5f00\u542f HTTPS \u8bbf\u95ee\u540e\uff0c\u53ef\u901a\u8fc7\u70b9\u51fb <code>\u4fee\u6539</code> \u5207\u6362\u57df\u540d\u6240\u5bf9\u5e94\u7684\u8bc1\u4e66\uff0c\u70b9\u51fb <code>\u8be6\u60c5</code> \u53ef\u67e5\u770b\u76f8\u5e94\u8bc1\u4e66\u7684\u8be6\u7ec6\u4fe1\u606f\uff1b</p> <p></p> <p>\u201c HTTPS \u8bbf\u95ee\u201d\uff1a\u5f00\u542f\u8be5\u529f\u80fd\u540e\uff0c\u5ba2\u6237\u7aef\u624d\u80fd\u4f7f\u7528 HTTPS \u534f\u8bae\u8fdb\u884c\u8bbf\u95ee\uff0c\u9ed8\u8ba4\u5173\u95ed\u3002</p> <p>\u201c\u5f3a\u5236 HTTPS \u201d\uff1a\u52fe\u9009\u6b64\u529f\u80fd\u540e\uff0c\u53c8\u62cd\u4e91\u8fb9\u7f18\u8282\u70b9\u6536\u5230\u7528\u6237\u7684 HTTP \u8bf7\u6c42\u540e\u4f1a\u5c06\u5176\u5f3a\u5236\u8df3\u8f6c\u5230 HTTPS \u8fdb\u884c\u8bbf\u95ee\u3002\u9ed8\u8ba4\uff1a\u517c\u5bb9\u7528\u6237\u7684 HTTP \u548c HTTPS \u8bf7\u6c42\u3002</p> <p>\u5907\u6ce8\uff1a\u5176\u4e2d <code>HTTPS \u914d\u7f6e</code> \u4e5f\u53ef\u4ee5\u5728 <code>SSL \u8bc1\u4e66\u7ba1\u7406</code>\u91cc\u9762\u914d\u7f6e\uff0c\u53c2\u89c1\u4e0b\u6587<code>SSL \u8bc1\u4e66\u7ba1\u7406</code>\u90e8\u5206\u3002</p>"},{"location":"cdn/advanced/#_4","title":"\u81ea\u6709\u8bc1\u4e66\u4e0a\u4f20","text":"<p>\u5982\u679c\u57df\u540d\u5f53\u524d\u5df2\u6709\u8bc1\u4e66\uff0c\u53c8\u62cd\u4e91\u63d0\u4f9b\u4e86\u81ea\u6709\u8bc1\u4e66\u7684\u4e0a\u4f20\u65b9\u5f0f\uff0c\u65e0\u9700\u4eba\u5de5\u534f\u52a9\uff0c\u5b89\u5168\u4fbf\u6377\u3002</p> <p>\u7b2c\u4e00\u6b65\uff1a\u8fdb\u5165 SSL \u8bc1\u4e66\u670d\u52a1\uff0c\u5de5\u5177\u7bb1 -&gt; SSL \u8bc1\u4e66\u670d\u52a1 -&gt; \u8bc1\u4e66\u7ba1\u7406 -&gt; \u6dfb\u52a0\u81ea\u6709\u8bc1\u4e66 </p> <p></p> <p>\u7b2c\u4e8c\u6b65\uff1a\u7c98\u8d34\u8bc1\u4e66\u5185\u5bb9:</p> <p></p> <p>\u70b9\u51fb <code>\u4fdd\u5b58</code> \u4e4b\u540e\uff0c\u53ef\u67e5\u770b SSL \u8bc1\u4e66\u4fe1\u606f\u5982\u4e0b\u56fe\u6240\u793a\uff1a</p> <p></p>"},{"location":"cdn/advanced/#ssl","title":"SSL \u8bc1\u4e66\u7ba1\u7406","text":"<p>\u5728\u8bc1\u4e66\u7ba1\u7406\u5217\u8868\u4e2d\uff0c\u53ef\u6839\u636e\u9700\u6c42\u9009\u62e9\u7533\u8d2d\u6210\u529f\u5e76\u5df2\u90e8\u7f72\u4e8e CDN \u5e73\u53f0\u7684\u8bc1\u4e66\u6216\u5df2\u4e0a\u4f20\u7684\u81ea\u6709\u8bc1\u4e66\uff0c\u70b9\u51fb <code>HTTPS \u914d\u7f6e</code>\u8fdb\u884c\u64cd\u4f5c \uff0c\u5982\u4e0b\u56fe\u6240\u793a\uff1a</p> <p></p> <p>\u201cHTTPS \u8bbf\u95ee\u201d\uff1a\u5f00\u542f\u8be5\u529f\u80fd\u540e\uff0c\u5ba2\u6237\u7aef\u4f7f\u7528 HTTPS \u534f\u8bae\u8bbf\u95ee\u65f6\u624d\u80fd\u6210\u529f\uff0c\u9ed8\u8ba4\u5173\u95ed\u3002</p> <p>\u201c\u5f3a\u5236 HTTPS\u201d\uff1a\u52fe\u9009\u6b64\u529f\u80fd\u540e\uff0c\u53c8\u62cd\u4e91\u8fb9\u7f18\u8282\u70b9\u6536\u5230\u7528\u6237\u7684 HTTP \u8bf7\u6c42\u540e\u4f1a\u5c06\u5176\u5f3a\u5236\u8df3\u8f6c\u5230 HTTPS \u8fdb\u884c\u8bbf\u95ee\u3002\u9ed8\u8ba4\uff1a\u517c\u5bb9\u7528\u6237\u7684 HTTP \u548c HTTPS \u8bf7\u6c42\u3002</p>"},{"location":"cdn/advanced/#http2","title":"HTTP/2","text":"<p>HTTP/2 \u5373\u8d85\u6587\u672c\u4f20\u8f93\u534f\u8bae 2.0\uff0c\u662f\u4e0b\u4e00\u4ee3 HTTP \u534f\u8bae\u3002\u5b83\u7531\u56fd\u9645\u4e92\u8054\u7f51\u5de5\u7a0b\u4efb\u52a1\u7ec4 \uff08IETF\uff09\u7684 Hypertext Transfer Protocol Bis (httpbis) \u5de5\u4f5c\u5c0f\u7ec4\u8fdb\u884c\u5f00\u53d1\uff0c\u4ee5 SPDY \u4e3a\u539f\u578b\uff0c\u7ecf\u8fc7\u4e24\u5e74\u591a\u7684\u8ba8\u8bba\u548c\u5b8c\u5584\u6700\u7ec8\u786e\u5b9a\u3002</p> <p>HTTP/2 \u4f18\u52bf\u5982\u4e0b\uff1a</p> <p>1\uff09HTTP/2 \u91c7\u7528\u4e8c\u8fdb\u5236\u683c\u5f0f\u4f20\u8f93\u6570\u636e\uff0c\u5176\u5728\u534f\u8bae\u7684\u89e3\u6790\u548c\u4f18\u5316\u6269\u5c55\u4e0a\u5e26\u6765\u66f4\u591a\u7684\u4f18\u52bf\u548c\u53ef\u80fd\u3002</p> <p>2\uff09HTTP/2 \u5bf9\u6d88\u606f\u5934\u91c7\u7528 HPACK \u8fdb\u884c\u538b\u7f29\u4f20\u8f93\uff0c\u80fd\u591f\u8282\u7701\u6d88\u606f\u5934\u5360\u7528\u7684\u7f51\u7edc\u7684\u6d41\u91cf\u3002</p> <p>3\uff09\u591a\u8def\u590d\u7528\uff0c\u7b80\u5355\u8bf4\u5c31\u662f\u6240\u6709\u7684\u8bf7\u6c42\u53ef\u4ee5\u901a\u8fc7\u4e00\u4e2a TCP \u8fde\u63a5\u5e76\u53d1\u5b8c\u6210\u3002</p> <p>4\uff09Server Push\uff1a\u670d\u52a1\u7aef\u80fd\u591f\u66f4\u5feb\u7684\u628a\u8d44\u6e90\u63a8\u9001\u7ed9\u5ba2\u6237\u7aef\u3002</p> <p>\u53c8\u62cd\u4e91 CDN \u5f53\u524d\u5df2\u5168\u5e73\u53f0\u652f\u6301 HTTP/2\uff0c\u5e76\u5df2\u9ed8\u8ba4\u5f00\u542f\u3002\u53c8\u56e0 HTTP/2 \u662f\u5728 HTTPS \u534f\u8bae\u7684\u57fa\u7840\u4e0a\u5b9e\u73b0\u7684\uff0c\u6240\u4ee5\u53ea\u8981\u4f7f\u7528\u53c8\u62cd\u4e91 HTTPS \u52a0\u901f\u670d\u52a1\u7684\u57df\u540d\uff0c\u90fd\u53ef\u514d\u8d39\u4eab\u53d7 HTTP/2 \u670d\u52a1\uff0c\u65e0\u9700\u505a\u4efb\u4f55\u7279\u6b8a\u914d\u7f6e\uff0c\u5982\u4e0b\u56fe\u6240\u793a\uff1a</p> <p></p>"},{"location":"cdn/advanced/#_5","title":"\u6ce8\u610f\u4e8b\u9879","text":"<p>\u53c8\u62cd\u4e91 HTTPS \u52a0\u901f\u670d\u52a1\u662f\u57fa\u4e8e SNI \u6280\u672f\u5b9e\u73b0\u7684\uff0c\u56e0\u6b64\u67d0\u4e9b\u4e0d\u652f\u6301 SNI \u7684\u6d4f\u89c8\u5668\u6216\u5ba2\u6237\u7aef\u8bbf\u95ee\u53ef\u80fd\u51fa\u73b0\u95ee\u9898\u3002\u652f\u6301 SNI \u7684\u5ba2\u6237\u7aef\u5217\u8868\u5982\u4e0b\uff1a</p> <p></p> <p>\u58f0\u660e\uff1a\u8fd0\u884c\u5728 Windows XP \u4e0a\u7684\u6240\u6709\u7248\u672c\u7684 Internet Explorer \u90fd\u4e0d\u652f\u6301 SNI \uff0c\u8be6\u7ec6\u8bf7\u53c2\u8003\u8fd9\u91cc\u3002</p>"},{"location":"cdn/advanced/#_6","title":"\u6027\u80fd\u4f18\u5316","text":"<p>GZIP \u538b\u7f29</p> <p>\u76ee\u524d\u53c8\u62cd\u4e91 CDN \u5f00\u542f\u4e86 GZIP \u538b\u7f29\u7684\u76f8\u5173\u7279\u6027\uff0c\u5177\u4f53\u5bf9\u5e94\u7684 NGINX \u914d\u7f6e\u5982\u4e0b\uff1a</p> <pre><code>gzip on;\ngzip_min_length 256;\ngzip_types &lt;\u89c1\u4e0b\u9762\u7684\u5217\u8868&gt;;\ngzip_disable \"MSIE [1-6]\\.\";\ngzip_vary on;\n</code></pre> <p>\u89e6\u53d1\u5b9e\u9645\u7684 GZIP \u538b\u7f29\u884c\u4e3a\u9700\u8981\u540c\u65f6\u6ee1\u8db3\u5982\u4e0b\u6761\u4ef6\uff1a</p> <p><code>Content-Type</code> \u6ee1\u8db3\u4ee5\u4e0b\u5217\u8868\u5176\u4e2d\u4e4b\u4e00\uff1a</p> <pre><code>text/plain\ntext/javascript\ntext/css\ntext/xml\ntext/x-component\napplication/javascript\napplication/x-javascript\napplication/xml\napplication/json\napplication/xhtml+xml\napplication/rss+xml\napplication/atom+xml\napplication/x-font-ttf\napplication/vnd.ms-fontobject\nimage/svg+xml\nimage/x-icon\nfont/opentype\n\ntext/html -- default\n</code></pre> <p><code>Content-Length</code> \u5927\u4e8e 256 \u5b57\u8282</p> <p>\u5ba2\u6237\u7aef\u8bf7\u6c42\u5934\u5e26\u4e86 <code>Accept-Encoding: gzip</code></p> <p>\u4ee3\u7801\u538b\u7f29</p> <p>\u5f00\u542f\u540e\uff0c\u4f1a\u81ea\u52a8\u53bb\u9664 HTML \u6587\u4ef6\u4e2d\u975e\u5fc5\u8981\u7684\u5b57\u7b26\uff08\u7a7a\u767d\u3001\u6ce8\u91ca\u7b49\uff09\uff0c\u81ea\u52a8\u538b\u7f29\u6587\u4ef6\u5927\u5c0f\uff0c\u63d0\u5347\u8bbf\u95ee\u901f\u5ea6\u3002\u7279\u522b\u5730\uff0c\u76ee\u524d\u4ec5\u652f\u6301 HTML \u4ee3\u7801\u7684\u4f18\u5316\u3002</p> <p>\u914d\u7f6e\u5f15\u5bfc</p> <p>\u767b\u9646 \u53c8\u62cd\u4e91\u7ba1\u7406\u63a7\u5236\u53f0\uff0c\u4f9d\u6b21\u8fdb\u5165\uff1a\u670d\u52a1 &gt; \u529f\u80fd\u914d\u7f6e &gt; \u9ad8\u7ea7\u529f\u80fd &gt; \u4ee3\u7801\u538b\u7f29\uff0c\u5f00\u542f\u5f00\u5173\u5373\u53ef\uff0c\u5982\u4e0b\u56fe\u6240\u793a\uff1a</p> <p></p> <p>\u53c2\u6570\u8ddf\u968f</p> <p>\u53c2\u6570\u8ddf\u968f\u529f\u80fd\u5305\u62ec\u4e09\u79cd\u6a21\u5f0f\uff0c\u5206\u522b\u662f <code>\u53c2\u6570\u4e0d\u8ddf\u968f</code> \u3001<code>\u5168\u7a0b\u8ddf\u968f</code> \u3001<code>\u56de\u6e90\u8ddf\u968f</code> \uff0c\u7cfb\u7edf\u9ed8\u8ba4\u4e3a <code>\u5168\u7a0b\u8ddf\u968f</code> \u6a21\u5f0f\u3002\u4e00\u822c\u60c5\u51b5\u4e0b\uff0c\u6839\u636e\u4e1a\u52a1\u60c5\u51b5\uff0c\u5efa\u8bae\u9009\u62e9 <code>\u53c2\u6570\u4e0d\u8ddf\u968f</code> \u6765\u63d0\u9ad8\u8d44\u6e90\u6587\u4ef6\u7f13\u5b58\u547d\u4e2d\u7387\u3002\u8be6\u7ec6\u4ecb\u7ecd\u5982\u4e0b\uff1a</p> <p>\u53c2\u6570\u4e0d\u8ddf\u968f\uff1a</p> <p>\u5f00\u542f\u540e\uff0c\u7cfb\u7edf\u4f1a\u8fc7\u6ee4\u8bf7\u6c42\u4e2d\u7684\u67e5\u8be2\u5b57\u7b26\u4e32\uff0c\u5e76\u4e14\u67e5\u8be2\u5b57\u7b26\u4e32\u4e0d\u4f1a\u4f20\u9012\u7ed9\u6e90\u7ad9</p> <p>\u5168\u7a0b\u8ddf\u968f\uff1a</p> <p>\u5f00\u542f\u540e\uff0c\u5c06\u4e0d\u518d\u8fc7\u6ee4\u8bf7\u6c42\u4e2d\u7684\u67e5\u8be2\u5b57\u7b26\u4e32\uff0c\u5e76\u5c06\u67e5\u8be2\u5b57\u7b26\u4e32\u4f20\u9012\u7ed9\u6e90\u7ad9</p> <p>\u56de\u6e90\u8ddf\u968f\uff1a</p> <p>\u5f00\u542f\u540e\uff0c\u4f1a\u8fc7\u6ee4\u8bf7\u6c42\u4e2d\u7684\u67e5\u8be2\u5b57\u7b26\u4e32\uff0c\u5728\u8bbf\u95ee\u56de\u6e90\u9636\u6bb5\u4f1a\u5c06\u67e5\u8be2\u5b57\u7b26\u4e32\u4f20\u9012\u7ed9\u6e90\u7ad9</p> <p>\u914d\u7f6e\u5f15\u5bfc</p> <p>\u767b\u9646 \u53c8\u62cd\u4e91\u7ba1\u7406\u63a7\u5236\u53f0\uff0c\u4f9d\u6b21\u8fdb\u5165\uff1a\u670d\u52a1 &gt; \u529f\u80fd\u914d\u7f6e &gt; \u57fa\u7840\u914d\u7f6e &gt; \u53c2\u6570\u8ddf\u968f\uff0c\u70b9\u51fb\u7ba1\u7406\u5373\u53ef\u5f00\u59cb\u914d\u7f6e\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff1a</p> <p></p> <p>\u6ce8\u610f\uff1a\u53c2\u6570\u8ddf\u968f\u529f\u80fd\uff0c\u53ef\u4ee5\u914d\u5408\u7f13\u5b58\u914d\u7f6e\u529f\u80fd\u6765\u4f7f\u7528\u3002</p> <p>\u91cd\u5b9a\u5411\u4f18\u5316</p> <p>\u5f53 CDN \u8282\u70b9\u56de\u6e90\u7ad9\u65f6\uff0c\u82e5\u6e90\u7ad9\u54cd\u5e94\u7684\u72b6\u6001\u7801\u4e3a 301/302\uff0cCDN \u8282\u70b9\u5bf9\u91cd\u5b9a\u5411\u4e4b\u540e\u7684\u76ee\u6807 URL \uff08\u4e5f\u5373 301/302 \u54cd\u5e94\u5934 <code>Location</code> \u5b57\u6bb5\u5bf9\u5e94\u7684\u4fe1\u606f\uff09\u53d1\u8d77\u8bf7\u6c42\uff0c\u5c06\u83b7\u53d6\u540e\u7684\u5185\u5bb9\u54cd\u5e94\u7ed9\u6700\u7ec8\u7528\u6237\uff0c\u5e76\u5728 CDN \u8282\u70b9\u8fdb\u884c\u7f13\u5b58\u3002\u8fd9\u6837\u5411\u6700\u7ec8\u7528\u6237\u5c4f\u853d\u4e86\u91cd\u5b9a\u5411\u8fc7\u7a0b\uff0c\u514d\u53bb\u4e86\u6700\u7ec8\u7528\u6237\u518d\u6b21\u5411\u91cd\u5b9a\u5411\u540e\u7684 URL \u91cd\u65b0\u53d1\u8d77\u8bf7\u6c42\u7684\u8fde\u63a5\u65f6\u95f4\uff0c\u4ece\u800c\u52a0\u5feb\u4e86\u8bbf\u95ee\u901f\u5ea6\u3002</p> <p>\u539f\u7406\u4ecb\u7ecd</p> <p>\u4e00\u822c\u60c5\u51b5\u4e0b\uff0c\u5f53 CDN \u8282\u70b9\u56de\u6e90\u7ad9\u8bf7\u6c42\u6587\u4ef6\u65f6\uff0c\u82e5\u6e90\u7ad9\u8fd4\u56de\u7684\u662f HTTP 301/302 \u7684\u54cd\u5e94\uff0cCDN \u8282\u70b9\u4f1a\u5c06\u8be5\u54cd\u5e94\u8fd4\u56de\u7ed9\u5ba2\u6237\u7aef\uff0c\u5ba2\u6237\u7aef\u6839\u636e\u54cd\u5e94\u5934\u4e2d\u7684 <code>Location</code> \u5934\u4fe1\u606f\u8fdb\u884c\u518d\u6b21\u8bf7\u6c42\u3002\u914d\u7f6e\u4e86\u91cd\u5b9a\u5411\u4f18\u5316\u529f\u80fd\u4e4b\u540e\uff0c\u8bbf\u95ee\u6d41\u7a0b\u5982\u4e0b\u56fe\u6240\u793a\uff1a</p> <p></p> <p>1\uff09\u5ba2\u6237\u7aef\u5411 CDN \u8282\u70b9\u53d1\u8d77\u8bf7\u6c42\u5e76\u4f20\u9012\u81f3\u6e90\u7ad9\uff0c\u4f8b\u5982\uff1a<code>http://example.com/123.html</code>\uff1b</p> <p>2\uff09\u6e90\u7ad9\u7ed9 CDN \u8282\u70b9\u54cd\u5e94 301/302 \u72b6\u6001\u7801\uff0c\u5e76\u6307\u660e\u91cd\u5b9a\u5411\u540e\u7684 URL \u4e3a <code>http://example.com/456.html</code></p> <p>3\uff09CDN \u8282\u70b9\u5bf9\u91cd\u5b9a\u5411\u4e4b\u540e\u5bf9\u76ee\u6807 URL \u53d1\u8d77\u8bf7\u6c42\uff1b</p> <p>4\uff09\u6e90\u7ad9\u54cd\u5e94\u5185\u5bb9\u7ed9\u6700\u7ec8\u7528\u6237\uff0c\u5e76\u5c06\u5185\u5bb9\u5728 CDN \u8282\u70b9\u8fdb\u884c\u7f13\u5b58\uff1b</p> <p>\u914d\u7f6e\u5f15\u5bfc</p> <p>\u767b\u9646 \u53c8\u62cd\u4e91\u7ba1\u7406\u63a7\u5236\u53f0\uff0c\u4f9d\u6b21\u8fdb\u5165\uff1a\u670d\u52a1 &gt; \u529f\u80fd\u914d\u7f6e &gt; \u9ad8\u7ea7\u529f\u80fd &gt; \u91cd\u5b9a\u5411\u4f18\u5316\uff0c\u6ed1\u52a8\u5f00\u5173\u5373\u53ef\u5f00\u542f\u8be5\u529f\u80fd\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff1a</p> <p></p> <p>\u6587\u4ef6\u5408\u5e76</p> <p><code>\u53c8\u62cd\u4e91\u5b58\u50a8</code> \u548c  <code>\u81ea\u4e3b\u6e90\u7ad9</code> CDN \u52a0\u901f\u670d\u52a1\u5747\u652f\u6301 JS\uff0cCSS Combo\uff08\u7ec4\u5408\u7279\u6027\uff09\uff0c\u5373\u53ef\u4ee5\u628a\u591a\u4e2a JS, CSS \u8bf7\u6c42\u5408\u5e76\u6210\u4e00\u4e2a\u3002</p> <p>\u5982\u4f55\u4f7f\u7528</p> <p>\u7279\u522b\u5730\uff0c\u6211\u4eec\u4ee5 <code>!!</code> \u4f5c\u4e3a\u5206\u9694\u7b26\u3002</p> <pre><code>http://upyun-assets.b0.upaiyun.com/foo/!!a.js,b.js\n</code></pre> <p>\u4e00\u4e2a\u5f15\u7528\u4e86\u5982\u4e0a URL \u7684 Demo:</p> <pre><code>http://upyun-assets.b0.upaiyun.com/jscombo.html\n</code></pre>"},{"location":"cdn/advanced/#_7","title":"\u5206\u6bb5\u7f13\u5b58","text":"<p>\u53c8\u62cd\u4e91 CDN \u670d\u52a1\u53ef\u63d0\u4f9b\u5206\u6bb5\u7f13\u5b58\u529f\u80fd\u914d\u7f6e\uff0c\u5f00\u542f\u8be5\u529f\u80fd\u53ef\u6709\u6548\u964d\u4f4e\u5927\u6587\u4ef6\u56de\u6e90\u7387\uff0c\u63d0\u5347\u54cd\u5e94\u901f\u5ea6\uff0c\u4e0e\u6b64\u540c\u65f6\uff0c\u53ef\u4ee5\u63d0\u9ad8\u6587\u4ef6\u5728 CDN \u8282\u70b9\u7684\u7f13\u5b58\u547d\u4e2d\u7387\u3002\u7279\u522b\u5730\uff0c\u5f00\u542f\u8be5\u7279\u6027\u4e4b\u540e\uff0cCDN \u8282\u70b9\u4f1a\u4ee5 Range \u8bf7\u6c42\u56de\u6e90\u3002</p> <p>\u914d\u7f6e\u5f15\u5bfc</p> <p>\u767b\u9646 \u53c8\u62cd\u4e91\u7ba1\u7406\u63a7\u5236\u53f0\uff0c\u4f9d\u6b21\u8fdb\u5165\uff1a\u670d\u52a1 &gt; \u529f\u80fd\u914d\u7f6e &gt; \u9ad8\u7ea7\u670d\u52a1 &gt; \u5206\u6bb5\u7f13\u5b58\uff0c\u70b9\u51fb\u300c\u7ba1\u7406\u300d\u6309\u94ae\u5373\u53ef\u5f00\u59cb\u914d\u7f6e\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff1a</p> <p></p> <p>\u9ed8\u8ba4\u914d\u7f6e\uff1a\u8be5\u7279\u6027\u4f1a\u9ed8\u8ba4\u5173\u95ed\uff0c\u60a8\u53ef\u4ee5\u6709\u9009\u62e9\u6027\u7684\u5f00\u542f\u8be5\u7279\u6027\u3002\u7279\u522b\u5730\uff0c\u6211\u4eec\u9488\u5bf9\u5206\u6bb5\u7f13\u5b58\u9884\u7f6e\u4e86\u6587\u4ef6\u540e\u7f00\u6a21\u677f\uff0c\u4e5f\u5373\u53ef\u4ee5\u6839\u636e\u6587\u4ef6\u540e\u7f00\u6216\u8005\u901a\u914d\u7b26\u89c4\u5219\u6765\u914d\u7f6e\u662f\u5426\u5f00\u542f\u5206\u6bb5\u7f13\u5b58\u529f\u80fd\u3002\u9ed8\u8ba4\u9884\u7f6e\u540e\u7f00\u5982\u4e0b\uff1a</p> <pre><code>\u89c6\u9891\uff1aAVI\u3001MP4\u3001FLV\u3001MOV\u30013GP\u3001ASF\u3001WMV\u3001MPG\u3001F4V\u3001M4V\u3001MKV\u3001VOB\u3001M3U8\u3001TS \u3001RMVB\u3001DAT\u3001RM\n\u97f3\u9891\uff1aMP3\u3001OGG\u3001M4A\u3001WMA\u3001AIF\u3001AU\n\u5b89\u88c5\u5305\uff1aAPK\u3001ZIP\u3001EXE\u3001RAR\u3001IPA\u3001PXL\u3001DEB\u3001SIS\u3001SISX\u3001JAR\u3001XAP\n\u6e38\u620f\u4e0b\u8f7d\uff1aSO\u3001CUE\u3001CCD\u3001MDS\u3001IMG\u30017Z\n\u5176\u5b83\uff1aCAB\u3001DHP\u3001GZ\u3001ISO\u3001MPQ\u3001PBCV\u3001PXL\u3001QNP\u3001R00\u3001XY\u3001XY2\n</code></pre> <p>\u914d\u7f6e\u6548\u679c</p> <p>\u5047\u8bbe\u6700\u7ec8\u7528\u6237\u53d1\u8d77\u4e86\u8d44\u6e90\u8bf7\u6c42\uff0c\u8bf7\u6c42\u7684 URL \u4e3a\uff1a<code>http://www.example.com/download/game.zip</code>\uff0cCDN \u8282\u70b9\u6536\u5230\u8bf7\u6c42\u540e\uff0c\u82e5\u547d\u4e2d\u5219\u54cd\u5e94\u5bf9\u5e94\u5206\u6bb5\u6587\u4ef6\u7ed9\u6700\u7ec8\u7528\u6237\uff0c\u672a\u547d\u4e2d\u7684\u5206\u6bb5 CDN \u8282\u70b9\u5219\u56de\u6e90\u53d1\u8d77 Range \u8bf7\u6c42\u83b7\u53d6\u8d44\u6e90\u6587\u4ef6\u3002</p> <p>\u5f00\u542f\u5206\u6bb5\u7f13\u5b58\uff1a</p> <ul> <li>\u82e5\u6700\u7ec8\u7528\u6237\u53d1\u8d77\u8d44\u6e90\u8bf7\u6c42\uff0cCDN \u8282\u70b9\u4e0a\u5df2\u7ecf\u547d\u4e2d\u8be5\u5206\u6bb5\uff0c\u5219\u76f4\u63a5\u54cd\u5e94\u7ed9\u6700\u7ec8\u7528\u6237</li> <li>\u82e5 CDN \u8282\u70b9\u672a\u547d\u4e2d\u7f13\u5b58\uff0c\u5219 CDN \u8282\u70b9\u56de\u6e90\u4f7f\u7528 Range \u8bf7\u6c42\uff0c\u5206\u6bb5\u83b7\u53d6\u8d44\u6e90\u6587\u4ef6</li> </ul> <p>\u5173\u95ed\u5206\u6bb5\u7f13\u5b58\uff1a</p> <ul> <li>\u8282\u70b9\u6587\u4ef6\u7f13\u5b58\u8fc7\u671f\u4e4b\u540e\uff0c\u4f1a\u5411\u6e90\u7ad9\u83b7\u53d6\u6574\u4e2a\u8d44\u6e90\u6587\u4ef6</li> </ul> <p>\u5206\u6bb5\u9884\u52a0\u8f7d\uff1a</p> <ul> <li>\u5f00\u542f\u5206\u6bb5\u7f13\u5b58\u529f\u80fd\u4e4b\u540e\uff0c\u8be5\u7279\u6027\u4f1a\u9ed8\u8ba4\u5f00\u542f\u3002\u5f53\u6700\u7ec8\u7528\u6237\u8bf7\u6c42\u7b2c\u4e00\u4e2a\u5206\u6bb5\u6587\u4ef6\u65f6\uff0c\u6211\u4eec\u4f1a\u63d0\u524d\u53bb\u4e0b\u8f7d\u540e\u9762\u51e0\u4e2a\u5206\u6bb5\u6587\u4ef6\uff0c\u8fdb\u800c\u63d0\u9ad8\u6587\u4ef6\u4e0b\u8f7d\u901f\u5ea6</li> </ul> <p>\u6ce8\u610f\u4e8b\u9879</p> <p>1\u3001\u6e90\u7ad9\u9700\u8981\u652f\u6301 Range \u8bf7\u6c42\uff0c\u5426\u5219\u4f1a\u5bfc\u81f4\u56de\u6e90\u5931\u8d25\uff1b\u4e25\u683c\u6765\u8bf4\uff0c\u6211\u4eec\u53ea\u901a\u8fc7 <code>Accept-Ranges: bytes</code> \u8fd9\u4e2a\u5934\u6765\u5224\u65ad\u6e90\u652f\u4e0d\u652f\u6301 Range \u8bf7\u6c42 \uff0c\u5426\u5219\u5373\u4f7f\u5f00\u542f\u4e86\u5206\u6bb5\u7f13\u5b58\u7279\u6027\uff0c\u4e5f\u4e0d\u4f1a\u751f\u6548\uff1b</p> <p>2\u3001\u8be5\u529f\u80fd\u914d\u7f6e\u540e\u4e0d\u4f1a\u7acb\u5373\u751f\u6548\uff0c\u9700\u5728\u6587\u4ef6\u7f13\u5b58\u8fc7\u671f\u6216\u8005\u6587\u4ef6\u7f13\u5b58\u88ab\u4e3b\u52a8\u5237\u65b0\u4e4b\u540e\u65b9\u53ef\u751f\u6548\uff1b</p> <p>3\u3001\u8be5\u529f\u80fd\u4ec5\u9488\u5bf9\u9759\u6001\u6587\u4ef6\uff0c\u52a8\u6001\u5185\u5bb9\u5f00\u542f\u5206\u6bb5\u7f13\u5b58\u4f1a\u53ef\u80fd\u4f1a\u53d1\u751f\u9519\u8bef\uff0c\u8bf7\u8c28\u614e\u4f7f\u7528\uff1b</p> <p>4\u3001\u8be5\u529f\u80fd\u5f00\u542f\u540e\uff0c\u8d44\u6e90\u5728 CDN \u8282\u70b9\u4e0a\u4f1a\u8fdb\u884c\u5206\u6bb5\u7f13\u5b58\uff0c\u5982\u679c\u8981\u7acb\u9a6c\u5173\u95ed\u8be5\u7279\u6027\uff0c\u53ef\u901a\u8fc7\u624b\u52a8\u5237\u65b0\u6587\u4ef6\u6765\u89e3\u51b3\uff1b</p> <p>5\u3001\u5982\u679c\u60a8\u5df2\u7ecf\u4f7f\u7528\u53c8\u62cd\u4e91\u5bf9\u8c61\u5b58\u50a8\u670d\u52a1\uff0c\u8be5\u7279\u6027\u5df2\u7ecf\u9ed8\u8ba4\u5f00\u542f\uff0c\u65e0\u9700\u505a\u4efb\u4f55\u914d\u7f6e\uff1b</p>"},{"location":"cdn/advanced/#_8","title":"\u89c6\u9891\u62d6\u62c9","text":"<p>\u89c6\u9891\u62d6\u62c9\u529f\u80fd\u7528\u4e8e\u89c6\u9891\u70b9\u64ad\u7684\u589e\u5f3a\u4f53\u9a8c\uff0c\u65b9\u4fbf\u6700\u7ec8\u7528\u6237\u901a\u8fc7\u62d6\u62c9\u64ad\u653e\u5668\u7684\u8fdb\u5ea6\u6761\uff0c\u89c2\u770b\u4efb\u610f\u8d77\u59cb\u4f4d\u7f6e\u7684\u89c6\u9891\uff0c\u800c\u65e0\u9700\u4ece\u5934\u89c2\u770b\u3002\u8be5\u529f\u80fd\u8fd8\u53ef\u4ee5\u6269\u5c55\u4e3a\u8df3\u8fc7\u7247\u5934\u3001\u7eed\u64ad\u3001\u9884\u64ad\u653e\u7b49\u529f\u80fd\u3002\u53d1\u9001\u62d6\u62c9\u64ad\u653e\u8fdb\u5ea6\u65f6\uff0c\u5ba2\u6237\u7aef\u53d1\u8d77\u7684\u8bf7\u6c42\u7c7b\u4f3c <code>http://video.upyun.com/test.mp4?start=100</code> \u8fd9\u6837\u7684 URL \u8bf7\u6c42\u3002</p> <p>\u914d\u7f6e\u5f15\u5bfc</p> <p>\u767b\u9646 \u53c8\u62cd\u4e91\u7ba1\u7406\u63a7\u5236\u53f0\uff0c\u4f9d\u6b21\u8fdb\u5165\uff1a\u670d\u52a1 &gt; \u529f\u80fd\u914d\u7f6e &gt; \u9ad8\u7ea7\u529f\u80fd &gt; \u89c6\u9891\u62d6\u62c9\uff0c\u70b9\u51fb\u7ba1\u7406\u5373\u53ef\u5f00\u59cb\u914d\u7f6e\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff1a</p> <p></p> <p>\u8be6\u7ec6\u914d\u7f6e\u8bf7\u53c2\u89c1 \u300c\u652f\u6301\u4ece\u4efb\u610f\u8d77\u70b9\u89c2\u770b\u300d\u89c6\u9891\u62d6\u62c9\u7528\u6237\u6307\u5357</p> <p>\u6ce8\u610f\u4e8b\u9879\uff1a</p> <p>1.\u4e3a\u4e86\u4fdd\u8bc1\u6b63\u5e38\u62d6\u62c9\uff0c\u64ad\u653e\u5668\u53ef\u4ee5\u53d1\u8d77\u7ea6\u5b9a\u683c\u5f0f\u7684\u8bf7\u6c42\uff0c\u4f8b\u5982\uff1a<code>http://example.com/video/test.mp4?start=xxx&amp;end=xxx</code></p> <p>2.\u89c6\u9891\u6587\u4ef6\u9700\u542b\u6709\u5173\u952e\u5e27\uff0c\u8fd9\u662f\u5b9e\u73b0\u62d6\u62c9\u7684\u524d\u63d0\u6761\u4ef6\uff0c\u5173\u952e\u5e27\u592a\u5c11\u6216\u8005\u6ca1\u6709\u5173\u952e\u5e27\uff0c\u89c6\u9891\u6587\u4ef6\u9700\u8981\u91cd\u65b0\u7f16\u7801</p> <p>3.\u89c6\u9891\u6587\u4ef6 <code>metedata</code> \u4e2d\u7f3a\u5c11\u5173\u952e\u5e27\u7684\u7d22\u5f15\u4fe1\u606f\uff0c\u5982 FLV \u7f3a\u5c11 <code>keyframes</code> \u4fe1\u606f\uff0cMP4 \u7f3a\u5c11 <code>seekpoint</code> \u4fe1\u606f\uff0c\u6216\u7f3a\u5931 <code>moov box</code>\uff0c\u90fd\u4f1a\u5bfc\u81f4\u62d6\u62c9\u5931\u8d25</p> <p>4.\u652f\u6301\u6839\u636e\u4e0d\u540c\u8d44\u6e90\u8def\u5f84\u6dfb\u52a0\u914d\u7f6e\uff0c\u6700\u591a\u4ec5\u652f\u6301 20 \u6761</p> <p>5.\u76ee\u524d\u652f\u6301\u6587\u4ef6\u683c\u5f0f\u6709\uff1aMP4 \u548c FLV\uff0cMP4 \u652f\u6301\u6309\u65f6\u95f4\u62d6\u62c9\uff0cFLV \u652f\u6301\u6309\u5b57\u8282\u62d6\u62c9</p>"},{"location":"cdn/advanced/#_9","title":"\u955c\u50cf\u5b58\u50a8","text":"<p>\u4f7f\u7528\u53c8\u62cd\u4e91 CDN \u670d\u52a1\u65f6\uff0c\u6e90\u7ad9\u7c7b\u578b\u9009\u62e9\u7684\u662f <code>\u81ea\u4e3b\u6e90</code>  \u6a21\u5f0f\uff08\u4e5f\u5373\u5ba2\u6237\u7684\u7f51\u7ad9\u8d44\u6e90\u90fd\u6258\u7ba1\u5728\u81ea\u5df1\u7684\u670d\u52a1\u5668\u6216\u8005\u7b2c\u4e09\u65b9\u5b58\u50a8\u5e73\u53f0\u4e0a\uff09\u7684\u8bdd\uff0c\u53ef\u4ee5\u5f00\u542f\u955c\u50cf\u5b58\u50a8\u529f\u80fd\uff0c\u53ef\u4ee5\u5c06\u7f51\u7ad9\u6570\u636e\u5e73\u6ed1\u8fc1\u79fb\u81f3\u53c8\u62cd\u4e91\u5b58\u50a8\u5e73\u53f0\uff0c\u5e76\u51cf\u5c0f\u7f51\u7ad9\u56de\u6e90\u6bd4\u4f8b\u3002</p> <p>\u5b9e\u73b0\u6d41\u7a0b</p> <p>\u5b9e\u73b0\u673a\u5236\u53ef\u4ee5\u53c2\u7167\u5982\u4e0b\u6d41\u7a0b\uff1a</p> <p></p> <ul> <li>\u7ec8\u7aef\u7528\u6237\u8bbf\u95ee\u8d44\u6e90\uff1b</li> <li>\u53c8\u62cd\u4e91 CDN \u8282\u70b9\u4ece\u7528\u6237\u81ea\u4e3b\u6e90\u7ad9\u83b7\u53d6\u8d44\u6e90\uff1b</li> <li>\u8fd4\u56de\u8d44\u6e90\u7ed9\u7ec8\u7aef\uff0c\u5e76\u6301\u4e45\u5316\u5b58\u50a8\u5230\u53c8\u62cd\u4e91\u5b58\u50a8\u5e73\u53f0\uff1b</li> <li>\u7ec8\u7aef\u7528\u6237\u518d\u6b21\u8bbf\u95ee\u65f6\uff0c\u5c06\u76f4\u63a5\u4ece\u53c8\u62cd\u4e91\u83b7\u53d6\u8d44\u6e90\uff0c\u4e0d\u518d\u56de\u6e90\u83b7\u53d6\uff1b</li> <li>\u968f\u7740\u7ec8\u7aef\u7528\u6237\u7684\u4e0d\u65ad\u8bbf\u95ee\uff0c\u6e90\u7ad9\u7684\u8d44\u6e90\u9010\u6b65\u81ea\u52a8\u5b58\u50a8\u5230\u53c8\u62cd\u4e91\u5b58\u50a8\u5e73\u53f0\u3002</li> </ul> <p>\u914d\u7f6e\u5f15\u5bfc</p> <p>\u767b\u9646 \u53c8\u62cd\u4e91\u7ba1\u7406\u63a7\u5236\u53f0\uff0c\u4f9d\u6b21\u8fdb\u5165\uff1a\u670d\u52a1 &gt; \u529f\u80fd\u914d\u7f6e &gt; \u9ad8\u7ea7\u529f\u80fd &gt; \u955c\u50cf\u5b58\u50a8\uff0c\u70b9\u51fb\u5f00\u542f\u5373\u53ef\u5f00\u59cb\u914d\u7f6e\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff1a</p> <p></p> <p>\u53c8\u62cd\u4e91\u955c\u50cf\u5b58\u50a8\u529f\u80fd\u5305\u62ec\u4e09\u79cd\u72b6\u6001\uff0c\u5206\u522b\u662f\u5f00\u542f\u3001\u6682\u505c\u3001\u5173\u95ed\uff0c\u8be6\u7ec6\u63cf\u8ff0\u5982\u4e0b\uff1a</p> <p>\u5f00\u542f\u72b6\u6001</p> <p>\u5f00\u542f\u4e4b\u540e\uff0c\u5f53 CDN \u8282\u70b9\u7f13\u5b58\u5931\u6548\u65f6\uff0c\u4f1a\u4f18\u5148\u56de\u53c8\u62cd\u4e91\u5b58\u50a8\u83b7\u53d6\u8d44\u6e90\uff0c\u5982\u679c\u53c8\u62cd\u4e91\u5b58\u50a8\u6ca1\u6709\u547d\u4e2d\u8d44\u6e90\uff0c\u5219\u76f4\u63a5\u56de\u81ea\u6709\u6e90\u7ad9\u83b7\u53d6\u8d44\u6e90\u5e76\u54cd\u5e94\u7ed9\u6700\u7ec8\u7528\u6237\uff0c\u4e0e\u6b64\u540c\u65f6\uff0c\u8d44\u6e90\u4f1a\u88ab\u6254\u8fdb\u955c\u50cf\u5b58\u50a8\u961f\u5217\u5e76\u8fdb\u884c\u5b58\u50a8\uff0c\u4e0b\u4e00\u4e2a\u76f8\u540c\u7684\u8d44\u6e90\u8bf7\u6c42\u8fc7\u6765\u65f6\u5219\u4f1a\u76f4\u63a5\u7531\u5b58\u50a8\u547d\u4e2d\u7684\u8d44\u6e90\u76f4\u63a5\u63d0\u4f9b\u670d\u52a1\u3002</p> <p>\u6682\u505c\u72b6\u6001</p> <p>\u76f4\u63a5\u5173\u95ed\u955c\u50cf\u5b58\u50a8\u529f\u80fd\uff0c\u53ef\u80fd\u4f1a\u5bfc\u81f4\u56de\u6e90\u538b\u529b\u8fc7\u5927\uff0c\u6211\u4eec\u4f1a\u5148\u8fdb\u5165\u6682\u505c\u72b6\u6001\uff0c\u8be5\u72b6\u6001\u4e0b\u4e0d\u4f1a\u8fdb\u884c\u8d44\u6e90\u8fc1\u79fb\u52a8\u4f5c\uff0c\u8bbf\u95ee\u8d44\u6e90\u65f6\uff0c\u4ecd\u7136\u5148\u8bbf\u95ee\u53c8\u62cd\u4e91\u5b58\u50a8\uff0c\u5982\u679c\u5b58\u50a8\u4e0a\u6ca1\u6709\u547d\u4e2d\u8d44\u6e90\uff0c\u5219\u4f1a\u8bbf\u95ee\u81ea\u4e3b\u6e90\u7ad9\u3002</p> <p>\u5173\u95ed\u72b6\u6001</p> <p>\u8be5\u529f\u80fd\u5173\u95ed\u4e4b\u540e\uff0c\u65b0\u7684\u8bf7\u6c42\u8fc7\u6765\u7684\u8bdd\uff0cCDN \u8282\u70b9\u4e0d\u4f1a\u56de\u53c8\u62cd\u4e91\u5b58\u50a8\u5e73\u53f0\u83b7\u53d6\u8d44\u6e90\uff0c\u5219\u4f1a\u76f4\u63a5\u56de\u5ba2\u6237\u6e90\u7ad9\u83b7\u53d6\u8d44\u6e90\u3002</p> <p>\u6ce8\u610f\u4e8b\u9879</p> <p>1.\u5f53\u7528\u6237\u66f4\u65b0\u4e86\u6e90\u7ad9\u8d44\u6e90\u65f6\uff0c\u4e3a\u4e86\u4fdd\u8bc1\u8bf7\u6c42\u8bbf\u95ee\u5230\u7684\u8d44\u6e90\u662f\u6700\u65b0\u7684\uff0c\u6b64\u65f6\u9700\u8981\u901a\u8fc7 API \u6216 FTP \u7684\u65b9\u5f0f\u5bf9\u5df2\u7ecf\u5b58\u50a8\u5728\u53c8\u62cd\u4e91\u5b58\u50a8\u4e0a\u7684\u6587\u4ef6\u8fdb\u884c\u5220\u9664\u548c\u66ff\u6362\u64cd\u4f5c</p> <p>2.\u5f53\u955c\u50cf\u5b58\u50a8\u529f\u80fd\u5904\u4e8e\u6682\u505c\u72b6\u6001\u65f6\uff0c\u60a8\u53ef\u4ee5\u901a\u8fc7 API \u63a5\u53e3\u9010\u6b65\u5220\u9664\u53c8\u62cd\u4e91\u4e0a\u5bf9\u5e94\u7684\u6587\u4ef6\uff0c\u5c06\u56de\u6e90\u6d41\u91cf\u5e73\u6ed1\u8fc1\u79fb\u81f3\u6e90\u7ad9\uff0c\u6216\u8c03\u6574\u6e90\u7ad9\u5e26\u5bbd\uff0c\u6700\u540e\u518d\u6267\u884c\u5173\u95ed\u64cd\u4f5c</p>"},{"location":"cdn/advanced/#_10","title":"\u8de8\u57df\u914d\u7f6e","text":"<p>\u8de8\u57df\u8d44\u6e90\u5171\u4eab \uff08 Cross-Origin Resource Sharing\uff09\u662f\u4e00\u79cd\u7f51\u7edc\u6d4f\u89c8\u5668\u7684\u6280\u672f\u89c4\u8303\uff0c\u4ed6\u4e3a  Web \u670d\u52a1\u5668\u5b9a\u4e49\u4e86\u4e00\u79cd\u65b9\u5f0f\uff0c\u5141\u8bb8\u7f51\u9875\u4ece\u4e0d\u540c\u7684\u57df\u8bbf\u95ee\u5176\u8d44\u6e90\u3002\u8de8\u6e90\u8d44\u6e90\u5171\u4eab\u6807\u51c6\u901a\u8fc7\u65b0\u589e\u4e00\u7cfb\u5217 HTTP \u5934\uff0c\u8ba9\u670d\u52a1\u5668\u80fd\u58f0\u660e\u90a3\u4e9b\u6765\u6e90\u53ef\u4ee5\u901a\u8fc7\u6d4f\u89c8\u5668\u8bbf\u95ee\u8be5\u670d\u52a1\u5668\u4e0a\u7684\u8d44\u6e90\u3002\u6b64\u65f6\u9700\u8981\u5728 Response Header \u4e2d\u589e\u52a0\u8de8\u57df\u76f8\u5173\u914d\u7f6e\uff0c\u8fd9\u6837\u5c31\u53ef\u4ee5\u4f7f\u5f97\u8d44\u6e90\u7684\u5b89\u5168\u8bbf\u95ee\u6210\u4e3a\u53ef\u80fd\u3002</p> <p>\u914d\u7f6e\u5f15\u5bfc</p> <p>\u767b\u9646 \u53c8\u62cd\u4e91\u7ba1\u7406\u63a7\u5236\u53f0\uff0c\u4f9d\u6b21\u8fdb\u5165\uff1a\u670d\u52a1 &gt; \u529f\u80fd\u914d\u7f6e &gt; \u9ad8\u7ea7\u529f\u80fd &gt; CORS \u8de8\u57df\u5171\u4eab\uff0c\u70b9\u51fb\u7ba1\u7406\u5373\u53ef\u5f00\u59cb\u914d\u7f6e\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff1a</p> <p></p> <p>Access-Control-Allow-Origin</p> <p>\u8fd4\u56de\u7684\u8d44\u6e90\u9700\u8981\u6709\u4e00\u4e2a <code>Access-Control-Allow-Origin</code> \u5934\u4fe1\u606f\uff0c\u4e5f\u53ef\u4ee5\u8bbe\u7f6e\u901a\u914d\u7b26\uff0a\uff0c\u5141\u8bb8\u88ab\u6240\u6709\u57df\u4f7f\u7528\u3002\u8bed\u6cd5\u5982\u4e0b:</p> <p>Access-Control-Allow-Origin:  | * <p>\u4e3e\u4e2a\u6817\u5b50\uff0c\u5141\u8bb8\u6765\u81ea <code>http://www.upyun.com</code> \u7684\u8bf7\u6c42\uff0c\u4f60\u53ef\u4ee5\u8fd9\u6837\u6307\u5b9a:</p> <p>Access-Control-Allow-Origin: http://www.upyun.com</p> <p>Access-Control-Allow-Methods</p> <p>\u8868\u793a\u5141\u8bb8\u7684\u8de8\u57df\u8bf7\u6c42\u7684\u65b9\u6cd5\uff0c\u5728\u5f53\u524d\u8bf7\u6c42\u7684\u57df\u88ab\u5141\u8bb8\u540e\uff0c\u8fd8\u8981\u68c0\u67e5\u5f53\u524d\u8bf7\u6c42\u7684\u65b9\u6cd5\u662f\u5426\u88ab\u5141\u8bb8\uff0c\u793a\u4f8b\u5982\u4e0b\uff1a</p> <p>Access-Control-Allow-Methods: POST, GET, OPTIONS</p> <p>Access-Control-Allow-Headers</p> <p>\u4e5f\u662f\u5728\u54cd\u5e94\u9884\u68c0\u8bf7\u6c42\u7684\u65f6\u5019\u4f7f\u7528\uff0c\u7528\u6765\u6307\u660e\u5728\u5b9e\u9645\u7684\u8bf7\u6c42\u4e2d\uff0c\u53ef\u4ee5\u4f7f\u7528\u54ea\u4e9b\u81ea\u5b9a\u4e49 HTTP \u8bf7\u6c42\u5934\uff0c\u6bd4\u5982\uff1a</p> <p>Access-Control-Allow-Headers: X-PINGOTHER\uff0cX-UPYUN</p> <p>\u8fd9\u6837\u5728\u5b9e\u9645\u7684\u8bf7\u6c42\u91cc,\u8bf7\u6c42\u5934\u4fe1\u606f\u91cc\u5c31\u53ef\u4ee5\u6709\u8fd9\u4e48\u4e00\u6761\uff1a</p> <p>X-PINGOTHER: hello</p> <p>Access-Control-Expose-Headers</p> <p>\u8bbe\u7f6e\u6d4f\u89c8\u5668\u5141\u8bb8\u8bbf\u95ee\u7684\u670d\u52a1\u5668\u7684\u5934\u4fe1\u606f\u7684\u767d\u540d\u5355\uff0c\u793a\u4f8b\u5982\u4e0b\uff1a</p> <p>Access-Control-Expose-Headers: X-My-Custom-Header, X-Another-Custom-Header</p> <p>\u8fd9\u6837\uff0c<code>X-My-Custom-Header</code> \u548c <code>X-Another-Custom-Header</code> \u8fd9\u4e24\u4e2a\u5934\u4fe1\u606f\uff0c\u90fd\u53ef\u4ee5\u88ab\u6d4f\u89c8\u5668\u5f97\u5230\u3002</p> <p>Access-Control-Max-Age</p> <p>\u8fd9\u4e2a\u5934\u544a\u8bc9\u6211\u4eec\u8fd9\u6b21\u9884\u8bf7\u6c42\u7684\u7ed3\u679c\u7684\u6709\u6548\u671f\u662f\u591a\u4e45\uff0c\u5355\u4f4d\u4e3a\u79d2\uff0c\u8bbe\u7f6e\u793a\u4f8b\u5982\u4e0b\uff1a</p> <p>Access-Control-Max-Age: 864000</p> <p>\u8868\u660e\u5728 86400s\uff0810\u5929\uff09\u5185\uff0c\u5bf9\u8be5\u8d44\u6e90\u7684\u8de8\u57df\u8bbf\u95ee\u4e0d\u518d\u53d1\u9001\u53e6\u5916\u4e00\u6761\u9884\u8bf7\u6c42\u3002</p> <p>\u6ce8\u610f\u4e8b\u9879\uff1a</p> <p>1\uff09\u6700\u591a\u652f\u6301\u6dfb\u52a0 10 \u6761\u89c4\u5219\uff0c\u5339\u914d\u65f6\u4ece\u7b2c\u4e00\u6761\u5f00\u59cb\u9010\u6761\u5339\u914d\uff0c\u4ee5\u6700\u65e9\u5339\u914d\u4e0a\u7684\u89c4\u5219\u4e3a\u51c6</p> <p>2\uff09<code>\u5141\u8bb8\u7684\u57df</code>\u3001<code>Allow Header</code> \u3001<code>Expose Header</code> \u6700\u591a\u5141\u8bb8 20 \u884c</p> <p>3\uff09<code>\u5141\u8bb8\u7684\u57df</code> \u53ca <code>Methods</code> \u5efa\u8bae\u6839\u636e\u9700\u8981\u4f7f\u7528\u6700\u5c0f\u7684\u914d\u7f6e\u6765\u4fdd\u8bc1\u5b89\u5168\u6027\uff0c\u591a\u6761\u89c4\u5219\u95f4\u4e0d\u8981\u6709\u8986\u76d6\u548c\u51b2\u7a81</p> <p>4\uff09<code>\u5141\u8bb8\u7684\u57df</code> \u9700\u5e26\u4e0a\u5b8c\u6574\u7684\u57df\u4fe1\u606f\uff0c\u5373\u6307\u5b9a https \u6216\u8005 http\uff0c\u6216\u8005 <code>*://foo.com</code> \u8fd9\u6837\u7684\u5f62\u5f0f</p> <p>5\uff09<code>Allow Header</code>\u3001<code>Expose Header</code> \u4e0d\u5141\u8bb8\u4f7f\u7528\u901a\u914d\u7b26\uff0c\u5927\u5c0f\u5199\u4e0d\u654f\u611f</p> <p>6\uff09 <code>\u7f13\u5b58\u65f6\u95f4</code> \u5982\u679c\u6ca1\u6709\u7279\u6b8a\u60c5\u51b5\u53ef\u4ee5\u914c\u60c5\u8bbe\u7f6e\u5f97\u5927\u4e00\u70b9\uff0c\u9ed8\u8ba4\u4e3a 86400 \u79d2\uff0c\u6700\u5927\u4e3a 604800 \u79d2</p>"},{"location":"cdn/advanced/#_11","title":"\u6587\u4ef6\u53e6\u5b58\u4e3a","text":"<p>\u53c8\u62cd\u4e91 CDN \u670d\u52a1\u652f\u6301\u5bf9\u54cd\u5e94\u5934 <code>Content-Disposition</code> \u5b57\u6bb5\u7684\u7279\u6b8a\u8bbe\u7f6e\uff0c\u4e5f\u5373\u5728\u8bf7\u6c42 URL \u4e2d\u52a0\u5165 <code>_upd</code> \u53c2\u6570\u53ef\u5bf9 <code>Content-Disposition</code> \u8fdb\u884c\u7279\u6b8a\u5316\u914d\u7f6e\u3002\u901a\u8fc7\u5bf9\u8be5\u53c2\u6570\u7684\u914d\u7f6e\u5c31\u53ef\u4ee5\u5f3a\u5236\u6d4f\u89c8\u5668\u89e6\u53d1\u4e0b\u8f7d\u884c\u4e3a\uff0c\u540c\u65f6\u8be5\u53c2\u6570\u7684\u503c\u4f1a\u4f5c\u4e3a\u6587\u4ef6\u4e0b\u8f7d\u540e\u4fdd\u5b58\u5230\u672c\u5730\u7684\u6587\u4ef6\u540d\u3002\u7279\u522b\u5730\uff0c\u5f53\u5176\u503c\u4e3a <code>true</code> \u65f6\uff0c\u4fdd\u6301\u539f\u6587\u4ef6\u540d\u4e0d\u53d8\u3002</p> <p>\u914d\u7f6e\u5f15\u5bfc</p> <p>\u793a\u4f8b\u4e00\uff1a</p> <pre><code>\u8bf7\u6c42\u53c2\u6570\u4e2d\u52a0\u5165 \u201c_upd=true\u201d \uff0c\u4ee3\u8868\u6dfb\u52a0\u54cd\u5e94\u5934\u4e3a\uff1a Content-Disposition: attachment\n</code></pre> <pre><code>$ curl http://upyun-assets.b0.upaiyun.com/docs/cdn/upyun-cdn-architecture.png?_upd=true -I\n\n&gt; HTTP/1.1 200 OK\n&gt; Content-Type: image/png\n&gt; Content-Length: 57371\n&gt; ...\n&gt; Accept-Ranges: bytes\n&gt; Content-Disposition: attachment;\n\n</code></pre> <p>\u793a\u4f8b\u4e00\uff1a</p> <pre><code>\u8bf7\u6c42\u53c2\u6570\u4e2d\u52a0\u5165 \u201c_upd=abc.png\u201d\uff0c\u4ee3\u8868\u6dfb\u52a0\u54cd\u5e94\u5934\u4e3a\uff1a Content-Disposition: attachment; filename=\"abc.png\"\n</code></pre> <pre><code>$ curl http://upyun-assets.b0.upaiyun.com/docs/cdn/upyun-cdn-architecture.png?_upd=abc.png -I\n\n&gt; HTTP/1.1 200 OK\n&gt; Content-Type: image/png\n&gt; Content-Length: 57371\n&gt; ...\n&gt; Accept-Ranges: bytes\n&gt; Content-Disposition: attachment; filename=\"abc.png\"\n\n</code></pre> <p>\u6ce8\u610f\u4e8b\u9879</p> <p>\u7279\u522b\u5730\uff0c <code>\u53c2\u6570\u8ddf\u968f</code> \u5f00\u542f\u7684\u60c5\u51b5\u4e0b\uff0c\u6b64\u53c2\u6570\u65e0\u6548\u3002</p>"},{"location":"cdn/advanced/#ip","title":"\u4f20\u9012\u6700\u7ec8\u7528\u6237 IP","text":"<p>\u53c8\u62cd\u4e91 CDN \u56de\u5ba2\u6237\u6e90\u7684\u65f6\u5019\u4f1a\u5e26\u4e0a <code>X-Real-IP</code> \u548c <code>X-Forwarded-For</code> \u7684\u8bf7\u6c42\u5934\u4e0b\u53bb\uff0c\u503c\u4e3a\u7528\u6237\u5b9e\u9645\u8bbf\u95ee CDN \u7684\u6765\u6e90 IP \u5730\u5740\u3002\u7279\u522b\u5730\uff0c\u4e3a\u4e86\u517c\u5bb9\u90e8\u5206\u670d\u52a1\u7aef\u7a0b\u5e8f\uff0c\u6211\u4eec\u989d\u5916\u8fd8\u63d0\u4f9b\u4e86 <code>Client-IP</code> \u8bf7\u6c42\u5934\u7684\u652f\u6301\uff0c\u5176\u503c\u548c <code>X-Real-IP</code>\u3001<code>X-Forwarded-For</code> \u76f8\u540c\u3002</p> <p>\u5982\u4f55\u4f7f\u7528</p> <p>1\u3001X-Real-IP \u4f20\u9012\u7528\u6237 IP</p> <p>\u4f7f\u7528\u8be5\u65b9\u5f0f\u4f20\u9012\u6700\u7ec8\u7528\u6237 IP \uff0c\u9700\u8981\u670d\u52a1\u7aef\u4ee3\u7801\u8fdb\u884c\u4e00\u4e9b\u6539\u9020\uff0c\u7f51\u7ad9\u9700\u8981\u6839\u636e\u4f7f\u7528\u7f16\u7a0b\u8bed\u8a00\u7684\u4e0d\u540c\uff0c\u4fee\u6539\u76f8\u5e94\u7684\u4ee3\u7801\u6a21\u5757\uff0c\u624d\u53ef\u4ee5\u4f20\u9012\u6700\u7ec8\u7528\u6237 IP\u3002\u4ee3\u7801\u793a\u4f8b\u5982\u4e0b\uff1a</p> <p>\u793a\u4f8b\u4e00\uff1aPHP \u4ee3\u7801\u00b6</p> <pre><code> &lt;?php\n        $ip = $_SERVER[\"HTTP_X_REAL_IP\"];\n        echo $ip;\n ?&gt;\n</code></pre> <p>\u793a\u4f8b\u4e8c\uff1a Nginx \u914d\u7f6e\u00b6</p> <pre><code>server\n    {\n        listen 80;\n        add_header X-Real-IP $http_x_real_ip;\n    }\n</code></pre> <p>2\u3001X-Forward-For \u4f20\u9012\u7528\u6237 IP</p> <p>\u56de\u6e90\u8bf7\u6c42\u5934\u4f1a\u9ed8\u8ba4\u4f20\u9012 <code>X-Forwarded-For</code> \u7684\u503c\uff0c\u7528\u6237\u7f51\u7ad9\u65e0\u9700\u4efb\u4f55\u6539\u9020\u3002</p> <p>\u6ce8\u610f\u4e8b\u9879</p> <p>1\u3001\u65b0\u589e\u52a0\u901f\u670d\u52a1\u65f6\u6211\u4eec\u4f1a\u9ed8\u8ba4\u4f7f\u7528 <code>X-Real-IP</code> \u548c <code>X-Forwarded-For</code> \u65b9\u5f0f\uff0c\u7f51\u7ad9\u53ea\u9700\u8981\u6309\u7167 \u201c\u5982\u4f55\u4f7f\u7528\u201d \u7ae0\u8282\u4e2d\uff0c\u5bf9\u539f\u5148\u7684\u7528\u6237 IP \u83b7\u53d6\u4ee3\u7801\u8fdb\u884c\u66ff\u6362\u5373\u53ef\uff1b</p> <p>2\u3001\u7531\u4e8e <code>X-Real-IP</code>  \u662f\u53c8\u62cd\u4e91 CDN \u670d\u52a1\u7279\u6709\u7684\u56de\u6e90\u8bf7\u6c42\u5934 \uff0c\u6545\u7ec8\u6b62 CDN \u540e\uff0c\u7f51\u7ad9\u9700\u5c06\u83b7\u53d6\u7528\u6237 IP \u7684\u4ee3\u7801\u4fee\u6539\u4e3a\u539f\u59cb\u4ee3\u7801\uff1b</p> <p>3\u3001\u5728\u9009\u62e9\u4f7f\u7528 <code>X-Forwarded-For</code> \u8fdb\u884c\u6700\u7ec8\u7528\u6237 IP \u4f20\u9012\u65f6  \uff0c<code>X-Real-IP</code>\u3001<code>Client-IP</code>\u4e5f\u662f\u540c\u65f6\u4f20\u9012\u7684\uff1b</p>"},{"location":"cdn/advanced/#_12","title":"\u81ea\u5b9a\u4e49\u63d0\u793a\u56fe","text":"<p>\u652f\u6301\u81ea\u5b9a\u4e49\u9519\u8bef\u72b6\u6001\u8bbe\u7f6e\uff0c\u76ee\u524d\u652f\u6301 403\u3001404\u3001405 \u9519\u8bef\u7801\u81ea\u5b9a\u4e49\u63d0\u793a\u56fe\u7684\u8bbe\u7f6e\u3002\u5982\u672a\u8bbe\u7f6e\uff0c\u5219\u9ed8\u8ba4\u9075\u5faa\u53c8\u62cd\u4e91 CDN \u670d\u52a1\u9ed8\u8ba4\u9519\u8bef\u72b6\u6001\u63d0\u793a\u56fe\u3002</p> <p>\u914d\u7f6e\u5f15\u5bfc</p> <p>\u767b\u9646 \u53c8\u62cd\u4e91\u7ba1\u7406\u63a7\u5236\u53f0\uff0c\u4f9d\u6b21\u8fdb\u5165\uff1a\u670d\u52a1 &gt; \u529f\u80fd\u914d\u7f6e &gt; \u9ad8\u7ea7\u670d\u52a1 &gt; \u81ea\u5b9a\u4e49\u63d0\u793a\u56fe\uff0c\u5728\u6b64\u680f\u76ee\u4e0b\u8fdb\u884c\u76f8\u5e94\u56fe\u7247\u7684\u63d0\u793a\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff1a</p> <p></p> <p>403 \u63d0\u793a\u56fe</p> <p>\u5f53\u7528\u6237\u8bbe\u7f6e\u4e86\u4f8b\u5982 IP \u7981\u7528\u3001Referer \u7b49\u9632\u76d7\u94fe\u914d\u7f6e\u5e76\u4e14\u5f53\u524d\u7684\u8bf7\u6c42\u4e0e\u89c4\u5219\u4e0d\u5339\u914d\u65f6\uff0c\u5373\u4f1a\u54cd\u5e94 403 \u7ed9\u5ba2\u6237\u7aef\uff0c\u8868\u793a\u8be5\u6b21\u8bf7\u6c42\u88ab\u7981\u6b62\u3002\u53e6\u5916\uff0c\u82e5\u8be5\u670d\u52a1\u8bbe\u7f6e\u4e86\u81ea\u5b9a\u4e49 403 \u63d0\u793a\u56fe\uff0c\u90a3\u4e48\u6b64\u7c7b\u60c5\u51b5\u4e0b\u5c31\u4f1a\u54cd\u5e94\u4e00\u4e2a 302 \u8df3\u8f6c\u5230\u76f8\u5e94\u7684\u56fe\u7247\u3002</p> <p>404 \u63d0\u793a\u56fe</p> <p>\u5f53\u8bf7\u6c42\u7684\u6587\u4ef6\u4e0d\u5b58\u5728\u65f6\uff0c\u4f1a\u54cd\u5e94 404 \u72b6\u6001\u7801\uff0c\u53ef\u901a\u8fc7\u81ea\u5b9a\u4e49\u63d0\u793a\u56fe\u6765\u5c55\u793a\u3002</p> <p>405 \u63d0\u793a\u56fe</p> <p>\u6b63\u5e38\u4f7f\u7528\u4e2d\u7684\u670d\u52a1\uff0c\u82e5\u88ab\u4eba\u4e3a\u5730\u8bbe\u7f6e\u4e3a\u7981\u6b62\u5916\u94fe\uff0c\u6b64\u65f6\u8bbf\u95ee\u5c31\u4f1a\u54cd\u5e94 405 \u72b6\u6001\u7801\u3002\u540c\u6837\uff0c405 \u4e5f\u652f\u6301\u81ea\u5b9a\u4e49\u63d0\u793a\u56fe\u8bbe\u7f6e\u3002</p> <p>\u6ce8\u610f\u4e8b\u9879</p> <p>1\u3001\u82e5\u6b64\u5904\u672a\u8bbe\u7f6e\u4efb\u4f55\u81ea\u5b9a\u4e49\u63d0\u793a\u56fe\uff0cCDN \u670d\u52a1\u4f1a\u9ed8\u8ba4\u54cd\u5e94\u4e00\u4e2a\u9519\u8bef\u72b6\u6001\u7801\u63d0\u793a\u56fe\uff1b</p> <p>2\u3001\u6b64\u5904\u81ea\u5b9a\u4e49\u63d0\u793a\u56fe\u7684\u6587\u4ef6\u5927\u5c0f\u9650\u5236\u5728 30KB \u4ee5\u5185\uff1b</p>"},{"location":"cdn/advanced/#rewrite","title":"\u81ea\u5b9a\u4e49 Rewrite","text":""},{"location":"cdn/advanced/#_13","title":"\u529f\u80fd\u7b80\u4ecb","text":"<p>\u81ea\u5b9a\u4e49 rewrite \u662f\u57fa\u4e8e DSL ( Domain Specific Language ) \u7406\u5ff5\u6765\u8bbe\u8ba1\u7684\uff0c\u4e3b\u8981\u9762\u5411\u5f00\u53d1\u8005\u4f7f\u7528\u3002\u5145\u5206\u5229\u7528\u53c8\u62cd\u4e91 CDN ( Content Delivery Network )\u5206\u5e03\u5f0f\u8fb9\u7f18\u7f51\u7edc\u7684\u6027\u80fd\u53ca\u89c4\u6a21\uff0c\u901a\u8fc7\u53c8\u62cd\u4e91\u7ba1\u7406\u63a7\u5236\u53f0\u53ef\u8f7b\u677e\u521b\u5efa rewrite \u89c4\u5219\uff0c\u89c4\u5219\u652f\u6301\u51fd\u6570\u3001\u53d8\u91cf\u3001\u5b57\u7b26\u4e32\u5e38\u91cf\uff0c\u7528\u6237\u53ef\u4ee5\u5c06\u8fd9\u4e9b\u81ea\u7531\u7ec4\u5408\uff0c\u53ef\u4ee5\u5b9e\u73b0\u5bf9 URL \u7684\u6539\u5199\u3001\u91cd\u5b9a\u5411\u3001\u81ea\u5b9a\u4e49 HTTP \u5934\u3001\u8bf7\u6c42\u7981\u6b62\u7b49\u5904\u7406\u903b\u8f91\u3002</p>"},{"location":"cdn/advanced/#_14","title":"\u5e94\u7528\u573a\u666f","text":"<ul> <li> <p>\u63d0\u9ad8\u5b89\u5168\u6027\uff1a\u53ef\u4ee5\u6709\u6548\u7684\u907f\u514d\u4e00\u4e9b\u53c2\u6570\u540d\u3001ID \u7b49\u5b8c\u5168\u66b4\u9732\u5728\u7528\u6237\u9762\u524d\uff1b</p> </li> <li> <p>URL \u7f8e\u5316\uff1a\u53bb\u9664\u4e86\u90a3\u4e9b\u6bd4\u5982 <code>*.do</code> \u4e4b\u7c7b\u7684\u540e\u7f00\u540d\u3001\u957f\u957f\u7684\u53c2\u6570\u4e32\u7b49\uff0c\u53ef\u4ee5\u81ea\u5df1\u7ec4\u7ec7\u7cbe\u7b80\u66f4\u80fd\u53cd\u6620\u8bbf\u95ee\u6a21\u5757\u5185\u5bb9\u7684 URL\uff1b</p> </li> <li> <p>\u63d0\u9ad8\u7f51\u7ad9 SEO\uff1a\u901a\u8fc7 URL Rewrite \u4e4b\u540e\uff0c\u66f4\u6709\u5229\u4e8e\u641c\u7d22\u5f15\u64ce\u7684\u6536\u5165\uff0c\u901a\u8fc7\u5bf9 URL \u7684\u4e00\u4e9b\u4f18\u5316\uff0c\u53ef\u4ee5\u4f7f\u641c\u7d22\u5f15\u64ce\u66f4\u597d\u7684\u8bc6\u522b\u4e0e\u6536\u5f55\u7f51\u7ad9\u7684\u4fe1\u606f\uff1b</p> </li> <li> <p>HTTP \u5934\u6539\u5199\uff1a\u65b0\u589e\u3001\u5220\u9664 HTTP \u8bf7\u6c42\u5934\uff0c\u65b0\u589e\u3001\u5220\u9664 HTTP \u54cd\u5e94\u5934\u7b49\u5904\u7406\u903b\u8f91\uff1b</p> </li> <li> <p>\u9632\u76d7\u94fe\u8bbe\u7f6e\uff1a\u53ef\u4ee5\u5f88\u7075\u6d3b\u3001\u9ad8\u6548\u7684\u7f16\u5199\u9632\u76d7\u94fe\u89c4\u5219\u548c\u5904\u7406\u903b\u8f91\uff0c\u53ef\u4ee5\u5b9e\u73b0\u9ad8\u5f3a\u5ea6\u7684\u9632\u76d7\u94fe\u89c4\u5219\uff1b</p> </li> <li> <p>\u8fb9\u7f18\u91cd\u5b9a\u5411\uff1a\u53ef\u4ee5\u6839\u636e\u7279\u6b8a\u7684\u4e1a\u52a1\u903b\u8f91\uff0c\u89e6\u53d1\u67d0\u4e2a\u6761\u4ef6\u4e4b\u540e\uff0c\u53ef\u5c06\u8bf7\u6c42\u91cd\u5b9a\u5411\u5230\u7279\u5b9a\u7684\u5730\u5740\u7b49\u7b49\uff1b</p> </li> </ul>"},{"location":"cdn/advanced/#_15","title":"\u89c4\u5219\u8bf4\u660e","text":"<p>\u4e3a\u4e86\u66f4\u597d\u7684\u7406\u89e3 rewrite \u89c4\u5219\uff0c\u672c\u8282\u56f4\u7ed5 rewrite \u89c4\u5219\u914d\u7f6e\u9879\u548c\u89c4\u5219\u793a\u4f8b\u6765\u8fdb\u884c\u8be6\u7ec6\u8bf4\u660e\uff0c\u5148\u6765\u4e86\u89e3\u4e0b\u914d\u7f6e\u622a\u56fe\uff0c\u5982\u4e0b\u622a\u56fe\u6240\u793a\uff1a</p> <p></p> <p>\u5982\u4e0a\u6240\u793a\uff0c\u914d\u7f6e\u4e00\u6761\u5b8c\u6574\u7684 rewrite \u89c4\u5219\u9700\u8981\u5b8c\u6210 <code>Rewrite \u89c4\u5219</code> \u3001<code>URI \u63d0\u53d6\u6b63\u5219</code> \u3001<code>break</code> \u3001<code>\u8c03\u8bd5\u6a21\u5f0f</code> \u3001<code>\u5907\u6ce8</code> \u8fd9 5 \u4e2a\u9009\u9879\u7684\u914d\u7f6e\uff0c\u5176\u4e2d <code>Rewrite \u89c4\u5219</code> \u4e3a\u5fc5\u586b\u9879\uff0c<code>URI \u63d0\u53d6\u6b63\u5219</code> \u548c<code>\u5907\u6ce8</code> \u4e3a\u53ef\u586b\u9879\uff0c<code>break</code>  \u548c <code>\u8c03\u8bd5\u6a21\u5f0f</code> \u4e3a\u63a7\u5236\u5f00\u5173\uff0c\u53ef\u6839\u636e\u9700\u8981\u6765\u8fdb\u884c\u5f00\u542f\u548c\u5173\u95ed\u3002</p> <p>\u4e0b\u9762\u6211\u4eec\u6765\u7ed3\u5408\u914d\u7f6e\u597d\u7684\u89c4\u5219\u793a\u4f8b\u6765\u8bf4\u660e\u4e0b\u6bcf\u4e2a\u914d\u7f6e\u9879\u7684\u4f5c\u7528\uff0c\u5982\u4e0b\u4e3a\u4e00\u7ec4 rewrite \u89c4\u5219\u96c6\uff0c\u5305\u62ec\u4e24\u6761 rewrite \u89c4\u5219\uff1a</p> <pre><code>-- JSON\n[\nrules[\n{\n    rule :  $WHEN($EQ($_HOST, 'images.foo.com'))/$1,\n    pattern :  ^/images/(.*)$\n    break :  true,\n    debug :  true,\n    description :  URL\u6539\u5199,\n\n},\n{\n    rule :  /movies/$1,\n    pattern :  /download/(.*)$\n    break :  true,\n    debug :  true,\n    description :  \u76ee\u5f55\u6539\u5199,\n\n},\n]\n</code></pre> <p>\u901a\u8fc7\u4ee5\u4e0a\u89c4\u5219\u96c6\u7684\u4e86\u89e3\uff0c\u4e0b\u9762\u6211\u4eec\u9488\u5bf9\u89c4\u5219\u96c6\u91cc\u9762\u7684\u6bcf\u4e2a\u90e8\u5206\u505a\u76f8\u5e94\u7684\u4ecb\u7ecd\u548c\u89e3\u91ca\uff1a</p> <p><code>pattern</code> \u4e3a\u5bf9\u5f53\u524d\u8bf7\u6c42 URI \u8fdb\u884c\u5339\u914d\u7684 <code>PCRE</code>  \u6b63\u5219\u8868\u8fbe\u5f0f\uff0c\u5339\u914d\u540e\uff0c\u4ea7\u751f <code>$1, $2 ...</code>  \u8fd9\u6837\u7684\u53d8\u91cf\uff0c\u5bf9\u5e94\u914d\u7f6e\u9879\u91cc\u9762\u7684<code>URI \u63d0\u53d6\u6b63\u5219</code>\uff1b</p> <p><code>rule</code> rewrite \u89c4\u5219\u4e3b\u8981\u7ec4\u6210\u90e8\u5206\uff0c\u4ee3\u8868\u6700\u7ec8\u7684\u5904\u7406\u903b\u8f91\uff0c\u8be6\u7ec6\u8bf7\u770b\u8bed\u6cd5\u89c4\u5219\u90e8\u5206\uff0c\u5bf9\u5e94\u914d\u7f6e\u9879\u91cc\u9762\u7684 <code>rewrite \u89c4\u5219</code>\uff1b</p> <p><code>break</code> \u8868\u793a\u5982\u679c\u6b64\u6b21 rewrite \u6210\u529f\u540e\u662f\u5426\u8981\u7ec8\u6b62\u5269\u4e0b\u7684\u7684 rewrite \u8fc7\u7a0b\uff1b</p> <p><code>debug</code> \u662f\u4e00\u4e2a\u8c03\u8bd5\u5f00\u5173\uff0c\u9ed8\u8ba4\u5f00\u542f\uff0c\u5bf9\u5e94\u914d\u7f6e\u622a\u56fe\u91cc\u9762\u7684 <code>\u8c03\u8bd5\u6a21\u5f0f</code>\uff1b</p> <p><code>description</code> \u7528\u6765\u63cf\u8ff0\u8be5\u89c4\u5219\u7684\u7528\u9014\uff1b \u5bf9\u5e94\u914d\u7f6e\u9879\u91cc\u9762\u7684 <code>\u5907\u6ce8</code> \u3002</p> <p>\u8c03\u8bd5\u6a21\u5f0f</p> <p>\u7531\u4e8e rewrite \u8fc7\u7a0b\u4f1a\u5bf9\u5f53\u524d\u8bf7\u6c42\u4ea7\u751f\u526f\u4f5c\u7528\uff0c\u8fd9\u662f\u975e\u5e38\u5371\u9669\u7684\uff0c\u4f8b\u5982\u968f\u610f\u7684\u586b\u5199\u4e00\u6761 rewrite \u89c4\u5219\uff1a</p> <p>/foo</p> <p>\u6b64\u89c4\u5219\u4f1a\u5c06\u6240\u6709\u8bf7\u6c42\u7684 URI \u6539\u5199\u6210 <code>/foo</code>\uff0c\u8fd9\u6837\u5ba2\u6237\u7aef\u6240\u6709\u8bf7\u6c42\u7684\u54cd\u5e94\u5c31\u53d8\u6210 404 \u4e86\uff0c \u8fd9\u662f\u60a8\u6781\u4e0d\u613f\u610f\u770b\u5230\u7684\u7ed3\u679c\u3002\u6211\u4eec\u5141\u8bb8\u5bf9 rewrite \u89c4\u5219\u8fdb\u884c\u8c03\u8bd5\uff0c\u5373\u65b0\u589e\u52a0\u4e00\u6761\u89c4\u5219\u65f6\uff0c<code>\u8c03\u8bd5\u6a21\u5f0f</code> \u5f00\u5173\u4f1a\u9ed8\u8ba4\u6253\u5f00\uff0c\u8fd9\u6837\u6dfb\u52a0\u89c4\u5219\u540e\uff0c\u5373\u4f7f\u5f53\u524d\u8bf7\u6c42\u547d\u4e2d\u8be5 rewrite \u89c4\u5219\uff0c rewrite \u8fc7\u7a0b\u4e5f\u4e0d\u4f1a\u751f\u6548\uff0c\u53ea\u6709\u5f53\u5305\u542b\u4ee5\u4e0b\u8bf7\u6c42\u5934\u65f6\uff0crewrite \u8fc7\u7a0b\u624d\u4f1a\u751f\u6548\uff1a</p> <p>X-Upyun-Rewrite-Preview: true</p> <p>\u4f7f\u7528\u547d\u4ee4\u884c\u5de5\u5177 curl \u5373\u53ef\u5bf9\u89c4\u5219\u8c03\u8bd5\uff1a</p> <p>curl -H \"X-Upyun-Rewrite-Preview: true\" http://your-domain/foo/bar.html -v</p> <p>\u8fd9\u6837\u7ecf\u8fc7\u8c03\u8bd5\uff0c\u786e\u5b9a\u8be5 rewrite \u8fc7\u7a0b\u7b26\u5408\u9884\u671f\u540e\uff0c\u5373\u53ef\u5c06 <code>\u8c03\u8bd5\u6a21\u5f0f</code> \u5173\u95ed\uff0c\u6b64\u65f6\u8be5 rewrite \u8fc7\u7a0b\u4f1a\u5bf9\u6240\u6709\u547d\u4e2d\u7684\u8bf7\u6c42\u751f\u6548\u3002</p> <p>\u6ce8\u610f\uff1a\u7279\u522b\u5730\uff0c\u8c03\u8bd5\u6a21\u5f0f\u76ee\u524d\u4ec5\u9488\u5bf9 URI \u548c ARGS \u4fee\u6539\u4ee5\u53ca\u4e00\u4e9b\u51fd\u6570\u6709\u6548\uff0c\u53d7 <code>\u8c03\u8bd5\u6a21\u5f0f</code> \u5f00\u5173\u5f71\u54cd\u7684 rewrite \u64cd\u4f5c\u6709\uff1a</p> <pre><code> - $LIMIT_RATE_AFTER()\n - $LIMIT_RATE\n - $DEL_REQ_HEADER(E)\n - $REDIRECT(E1,E2)\n - $DEL_ARG(E)\n - $EXIT(E1,E2)\n - $ADD_REQ_HEADER\n - \u4fee\u6539 URI \u548c ARGS \u7684\u64cd\u4f5c\n</code></pre>"},{"location":"cdn/advanced/#_16","title":"\u8bed\u6cd5\u89c4\u5219","text":"<p>\u51fd\u6570</p> <p>\u51fd\u6570\u8c03\u7528\u4ee5 <code>$</code> \u5f00\u5934\uff0c\u540e\u8ddf\u4e00\u7ec4\u5927\u5199\u5b57\u6bcd\uff0c\u5b57\u6bcd\u4e4b\u95f4\u53ef\u4ee5\u5305\u542b\u4e0b\u5212\u7ebf <code>_</code>\uff0c\u51fd\u6570\u9700\u8981\u7684\u53c2 \u6570\u653e\u5728<code>()</code>\u4e2d\uff0c\u4ee5 <code>,</code> \u5206\u9694\u3002\u5982\u679c\u6ca1\u6709\u7279\u522b\u8bf4\u660e\uff0crewrite \u4e2d\u7684\u51fd\u6570\u53c2\u6570\u4e2a\u6570\u4e0d\u80fd\u5c11\u4e8e\u8981\u6c42\u7684\u53c2\u6570\u4e2a\u6570\uff0c\u5426\u5219\u89c6\u4e3a\u8bed\u6cd5\u9519\u8bef\uff0c\u7136\u540e\u7ec8\u6b62 rewrite \u8fc7\u7a0b\uff0c\u591a\u4f59\u7684\u53c2\u6570\u4f1a\u88ab\u6c42\u503c\uff0c\u4f46\u4e0d\u5f71\u54cd\u8c03\u7528\u3002\u51fd\u6570\u8c03\u7528\u662f\u6709\u4e0a\u4e0b\u6587\u7684\uff0c\u8b6c\u5982 <code>$WHEN</code> \u8fd9\u4e2a\u51fd\u6570\uff0c\u53c2\u6570\u662f <code>bool</code> \u7c7b \u578b\uff0c\u53c2\u6570\u4e2d\u6709\u4e0d\u6210\u7acb\u7684\u6761\u4ef6 <code>false</code> \u65f6\uff0c\u4f1a\u7ec8\u6b62 rewrite \u8fc7\u7a0b\u3002\u652f\u6301\u7684\u51fd\u6570\u6709\uff1a</p> <p>\u6761\u4ef6\u9009\u62e9\u548c\u5224\u65ad</p> \u51fd\u6570 \u542b\u4e49 <code>$WHEN(E1, E2, ...)</code> \u6240\u6709\u6761\u4ef6\u90fd\u6210\u7acb\u65f6\u624d\u8fdb\u884c <code>rewrite</code>\uff0c\u5e76\u8fd4\u56de\u7a7a\u5b57\u7b26\u4e32 <code>$NOT(E)</code> <code>E</code> \u4e0d\u6210\u7acb\u65f6\u8fd4\u56de <code>true</code>\uff0c \u5426\u5219\u8fd4\u56de <code>false</code> <code>$ALL(E1, E2, ...)</code> \u6240\u6709\u6761\u4ef6\u90fd\u6210\u7acb\u65f6\u8fd4\u56de <code>true</code>\uff0c\u5426\u5219\u8fd4\u56de <code>false</code>\uff0c\u53c2\u6570\u4e2a\u6570\u4e0d\u9650 <code>$ANY(E1, E2, ...)</code> \u5176\u4e2d\u4e00\u4e2a\u6761\u4ef6\u6210\u7acb\u65f6\u8fd4\u56de <code>true</code>\uff0c\u5426\u5219\u8fd4\u56de <code>false</code>\uff0c\u53c2\u6570\u4e2a\u6570\u4e0d\u9650 <code>$OR(E1, E2, ...)</code> \u503c\u4e3a\u7b2c\u4e00\u4e2a\u4e3a\u771f\u7684\u8868\u8fbe\u5f0f <code>$SELECT(E1, E2, E3)</code> <code>E1</code> \u4e3a\u771f\u65f6\u503c\u4e3a <code>E2</code>\uff0c\u5426\u5219\u4e3a <code>E3</code> <code>$PCALL(E)</code> \u4fdd\u62a4\u6a21\u5f0f\u4e0b\u89e3\u6790 <code>E</code>\uff0c\u5931\u8d25\u65f6\u8fd4\u56de\u7a7a\u5b57\u7b26\u4e32 <p>\u5b57\u7b26\u5339\u914d\u548c\u6355\u83b7</p> \u51fd\u6570 \u542b\u4e49 <code>$MATCH(E1, E2)</code> PCRE \u5339\u914d\uff0c<code>E2</code> \u4e3a\u8981\u5339\u914d\u7684 pattern\uff0c\u8fd4\u56de <code>true</code> \u6216\u8005 <code>false</code> <code>$CAPTURE(E1, E2, E3)</code> \u6309 <code>E2</code> pattern \u5bf9 <code>E1</code> \u8fdb\u884c\u6355\u83b7\uff0c<code>E3</code> \u8868\u793a\u662f\u5426\u5ffd\u7565\u5927\u5c0f\u5199\uff0c\u6355\u83b7\u540e\u751f\u6210 <code>$n.m</code> \u5f62\u5f0f\u7684\u53d8\u91cf\uff0c<code>n</code> \u4e3a\u5f53\u524d <code>CAPTURE</code> \u51fa\u73b0\u7684\u6b21\u5e8f\uff0c<code>m</code> \u8868\u793a\u5339\u914d\u5206\u7ec4\uff1b<code>E2</code> \u4e3a\u7a7a\u65f6\uff0c\u8868\u793a\u5bf9 <code>E1</code> \u8fdb\u884c\u6355\u83b7\uff0c\u6b64\u65f6 <code>E1</code> \u5bf9\u5e94 <code>$n.0</code> <p>\u8bf7\u6c42/\u54cd\u5e94\u4fee\u6539</p> \u51fd\u6570 \u542b\u4e49 <code>$ADD_REQ_HEADER(E1, E2)</code> \u6dfb\u52a0\u8bf7\u6c42\u5934 <code>E1</code> \u4e3a <code>E2</code> <code>$DEL_REQ_HEADER(E)</code> \u5220\u9664\u8bf7\u6c42\u5934 <code>E</code> <code>$ADD_RSP_HEADER(E1, E2)</code> \u6dfb\u52a0\u54cd\u5e94\u5934 <code>E1</code> \u4e3a <code>E2</code> <code>$DEL_ARG(E)</code> \u5220\u9664\u8bf7\u6c42\u53c2\u6570\u9879 <code>E</code> <code>$SET_METHOD(E)</code> \u4fee\u6539\u5f53\u524d HTTP \u8bf7\u6c42\u65b9\u6cd5\u4e3a <code>E</code>\uff0c<code>E</code> \u53ef\u9009\u503c\u6709\uff1a<code>GET</code>, <code>HEAD</code>, <code>PUT</code>, <code>POST</code>, <code>DELETE</code>, <code>OPTIONS</code>, <code>PATCH</code>; \u6ce8 1 <code>$SET_BODY(E)</code> \u4fee\u6539\u5f53\u524d HTTP \u8bf7\u6c42\u4f53\u7684\u5185\u5bb9\u4e3a <code>E</code>\uff0c\u4ec5\u5728 <code>PUT</code> \u6216 <code>POST</code> \u8bf7\u6c42\u4e0b\u6709\u6548 <code>$REDIRECT(E1, E2)</code> \u91cd\u5b9a\u5411\u5730\u5740\u5230 <code>E1</code>\uff0c\u72b6\u6001\u7801\u4e3a <code>E2(301, 302)</code> <code>$EXIT(E1, E2)</code> \u4ee5\u72b6\u6001\u7801 <code>E1</code> \u9000\u51fa\uff0c\u54cd\u5e94\u4f53\u4e3a <code>E2</code> <p>\u6570\u503c\u8ba1\u7b97</p> \u51fd\u6570 \u542b\u4e49 <code>$ADD(E1, E2)</code> \u6570\u5b57\u76f8\u52a0\uff0c\u8fd4\u56de <code>E1 + E2</code> \u7ed3\u679c\u6570\u503c <code>$MOD(E1, E2)</code> \u6570\u5b57\u53d6\u4f59\uff0c\u8fd4\u56de <code>E1 % E2</code> \u7ed3\u679c\u6570\u503c\uff0c\u5176\u4e2d <code>E2</code> \u4e0d\u80fd\u4e3a <code>0</code> <code>$MSUB(E1, E2)</code> \u6570\u5b57\u76f8\u51cf\uff0c\u8fd4\u56de <code>E1 - E2</code> \u7ed3\u679c\u6570\u503c <code>$MULTIPLY(E1, E2)</code> \u6570\u5b57\u76f8\u4e58\uff0c\u8fd4\u56de <code>E1 * E2</code> \u7ed3\u679c\u6570\u503c <code>$DIVIDE(E1, E2)</code> \u6570\u5b57\u76f8\u9664\uff0c\u8fd4\u56de <code>E1 / E2</code> \u7ed3\u679c\u6570\u503c\uff0c\u5176\u4e2d <code>E2</code> \u4e0d\u80fd\u4e3a <code>0</code> <code>$BYTE(E)</code> \u8fd4\u56de\u5b57\u7b26 <code>E</code> \u7684 ASCII \u7f16\u7801\u503c <code>$FLOOR(E)</code> \u8fd4\u56de\u5c0f\u4e8e\u6216\u7b49\u4e8e\u6570\u5b57 <code>E</code> \u7684\u6700\u5927\u6574\u6570 <code>$CEIL(E)</code> \u8fd4\u56de\u5927\u4e8e\u6216\u7b49\u4e8e\u6570\u5b57 <code>E</code> \u7684\u6700\u5c0f\u6574\u6570 <code>$GT(E1, E2)</code> \u6570\u5b57\u6bd4\u8f83\uff0c\u662f\u5426\u5927\u4e8e\uff0c\u8fd4\u56de <code>true</code> \u6216\u8005 <code>false</code> <code>$GE(E1, E2)</code> \u6570\u5b57\u6bd4\u8f83\uff0c\u662f\u5426\u5927\u4e8e\u7b49\u4e8e\uff0c\u8fd4\u56de <code>true</code> \u6216\u8005 <code>false</code> <p>\u5b57\u7b26\u4e32\u64cd\u4f5c</p> \u51fd\u6570 \u542b\u4e49 <code>$SUB(E1, from, to)</code> \u5b57\u7b26\u4e32\u622a\u53d6\uff0c\u4ece <code>from</code> \u5230 <code>to</code> <code>$EQ(E1, E2)</code> \u5b57\u7b26\u4e32\u662f\u5426\u76f8\u7b49\uff0c\u8fd4\u56de <code>true</code> \u6216\u8005 <code>false</code> <code>$UPPER(E)</code> \u5c06 <code>E</code> \u8f6c\u6362\u4e3a\u5927\u5199 <code>$LOWER(E)</code> \u5c06 <code>E</code> \u8f6c\u6362\u4e3a\u5c0f\u5199 <code>$LEN(E)</code> \u8fd4\u56de\u5b57\u7b26\u4e32 <code>E</code> \u7684\u957f\u5ea6 <p>\u901a\u7528\u529f\u80fd\u7c7b\u51fd\u6570</p> \u51fd\u6570 \u542b\u4e49 <code>$ENCODE_BASE64(E)</code> \u5c06\u5b57\u7b26\u4e32 E \u6309 base64 \u7f16\u7801\u538b\u7f29 <code>$DECODE_BASE64(E)</code> \u5c06\u5b57\u7b26\u4e32 E \u6309 base64 \u7f16\u7801\u89e3\u538b <code>$MD5(E)</code> \u8ba1\u7b97 <code>E</code> \u7684 md5 \u503c <code>$RANDI(E1, E2)</code> \u8fd4\u56de\u5927\u4e8e <code>E1</code> \u5e76\u5c0f\u4e8e <code>E2</code> \u7684\u968f\u673a\u6570\u503c <code>$UNIXT(y, m, d, h, min, sec)</code> \u6307\u5b9a\u5e74\uff0c\u6708\uff0c\u65e5\uff0c\u5c0f\u65f6\uff0c\u5206\u949f\uff0c\u79d2\uff0c\u8fd4\u56de\u76f8\u5e94\u7684 UNIX TIME <code>$INT(E1, E2, E3)</code> \u8fdb\u5236\u8f6c\u6362\uff0c\u5c06 <code>E2</code> \u8fdb\u5236\u7684\u6570\u5b57\uff08\u5b57\u7b26\u4e32\u5f62\u5f0f\uff09 <code>E1</code> \u8f6c\u6362\u6210 <code>E3</code> \u8fdb\u5236\u5e76\u8fd4\u56de\uff0c<code>E2</code>, <code>E3</code> \u53ef\u9009\uff0c<code>E2</code> \u9ed8\u8ba4\u4e3a <code>10</code> <p>\u9650\u901f\u76f8\u5173</p> \u51fd\u6570 \u542b\u4e49 <code>$LIMIT_RATE_AFTER(E1, E2)</code> \u9650\u901f\u7b56\u7565\u8bbe\u7f6e\uff0c\u53d1\u9001 <code>E1</code> \u5927\u5c0f\u5355\u4f4d\u4e3a <code>E2</code> \u5b57\u8282\u6570\u636e\u540e\uff0c\u8fdb\u884c\u9650\u901f\uff0c<code>E2</code> \u53ef\u9009\u503c\u6709\uff1a<code>k</code>\uff08KB)\uff0c<code>m</code>\uff08MB\uff09 <code>$LIMIT_RATE(E1, E2)</code> \u9650\u901f\u7b56\u7565\u8bbe\u7f6e\uff0c\u6309 <code>E1</code> \u5927\u5c0f\u6bcf\u79d2\u8fdb\u884c\u9650\u901f\uff0c\u5355\u4f4d\u4e3a <code>E2</code>\uff0c<code>E2</code> \u53ef\u9009\u503c\u6709\uff1a<code>k</code>\uff08KB)\uff0c<code>m</code>\uff08MB\uff09 <p>\u6ce8 1\uff1a\u82e5\u5f53\u524d\u8bf7\u6c42\u5e26\u6709\u8bf7\u6c42\u4f53\u7684\u60c5\u51b5\u4e0b\uff0c<code>$SET_METHOD(E)</code> \u4e0d\u5141\u8bb8\u8bbe\u7f6e\u4e3a\u9664 <code>PUT</code> \u548c <code>POST</code> \u4ee5\u5916\u7684\u65b9\u6cd5\u3002</p> <p>\u5176\u4e2d <code>E[n]</code> \u4ee3\u8868\u5408\u6cd5\u7684\u8868\u8fbe\u5f0f\uff0c\u4e5f\u5c31\u662f\u8bf4\u51fd\u6570\u53ef\u4ee5\u76f8\u4e92\u5d4c\u5957\uff0c\u4f8b\u5982\u89c4\u5219\u53ef\u4ee5\u4e3a\uff1a</p> <p><code>/$SUB($DECODE_BASE64($_HEADER_foo), $_GET_from, $_GET_to)/</code>\uff1b\u5e03\u5c14\u51fd\u6570\u5305\u62ec <code>WHEN , ALL, ANY</code> \u90fd\u662f\u77ed\u8def\u7684\uff0c\u8b6c\u5982 <code>$WHEN($ALL(), $EXIT(403))</code> \u4e0d\u4f1a\u8fd4\u56de <code>403</code>\uff0c\u56e0\u4e3a <code>$ALL()</code> \u7684\u503c\u4e3a <code>false</code></p> <p>\u4f7f\u7528 <code>''</code> \u80fd\u5bf9\u53d8\u91cf\u8fdb\u884c\u8f6c\u4e49\uff0c\u4f7f\u5176\u4e0d\u88ab\u89e3\u91ca\uff0c\u4f8b\u5982\u4ee5\u4e0b\u89c4\u5219\uff1a</p> <pre><code>/foo/'$_HOST'\n</code></pre> <p>\u4f1a\u88ab\u8f6c\u6362\u4e3a:</p> <pre><code>/foo/$_HOST\n</code></pre> <p>\u5bf9\u4e8e\u542b\u6709\u8bf7\u6c42\u53c2\u6570\u7684\u89c4\u5219\uff0c\u539f\u5148\u7684\u8bf7\u6c42\u53c2\u6570\u4f1a\u9644\u52a0\u5230\u540e\u9762\uff0c\u5982\u679c\u4e0d\u5e0c\u671b\u8fd9\u6837\uff0c\u53ef\u4ee5\u653e\u7f6e\u4e00\u4e2a '?' \u5728\u89c4\u5219\u7684\u6700\u540e\u9762\uff0c\u4f8b\u5982\u8fd9\u6837\uff1a</p> <pre><code>/foo?bar=$1?\n</code></pre> <p>\u7279\u522b\u5730\uff0c\u5982\u679c\u91cd\u5199\u540e\u7684 URL \u6ca1\u6709\u53c2\u6570\uff0c\u90a3\u4e48\u6b64\u65f6\u9700\u8981\u5728\u6700\u540e\u52a0\u4e24\u4e2a <code>?</code>\uff0c\u4f8b\u5982\u8fd9\u6837\uff1a</p> <pre><code>/foo??\n</code></pre> <p>\u53d8\u91cf</p> <p>\u53d8\u91cf\u4ee5 <code>$_</code> \u5f00\u5934\uff0c\u8fd9\u4e9b\u53d8\u91cf\u90fd\u662f\u5bf9\u6b64\u6b21\u8bf7\u6c42\u4e0a\u4e0b\u6587\u4e2d\u4e00\u4e9b\u53c2\u6570\u7684\u6620\u5c04\uff0c\u8b6c\u5982 <code>$_HOST</code> \u5bf9\u5e94\u6b64\u6b21\u8bf7\u6c42\u5934\u4e2d\u7684 <code>Host</code> \u5b57\u6bb5\uff0c<code>$_GET_foo</code> \u5bf9\u5e94\u6b64\u6b21\u8bf7\u6c42 URL \u53c2\u6570 foo \u7684\u503c\uff0c\u7b49\u7b49\u3002\u82e5\u5c06\u53d8\u91cf\u5185\u63d2\u5230\u91cd\u5199\u540e\u7684 URL \u4e2d\uff0c\u8b6c\u5982 rewrite <code>/$_GET_foo/bar</code>\uff0c\u5982\u679c\u8bf7\u6c42\u53c2\u6570\u4e2d\u6ca1\u6709 <code>foo</code>\u5219\u89c6\u4e3a\u6b64\u6b21 rewrite \u5931\u8d25\uff1b\u82e5\u5c06\u53d8\u91cf\u653e\u5728\u51fd\u6570\u4e2d\uff0c\u5219\u7531\u8be5\u51fd\u6570\u786e\u5b9a\u8fd4\u56de\u7684\u503c\uff0c\u4f8b\u5982 <code>$NOT($_GET_foo)</code>\uff0c\u5982\u679c\u53c2\u6570\u4e2d\u5305\u542b <code>foo</code>\uff0c\u5219\u8fd4\u56de <code>false</code>\uff0c\u5426\u5219\u8fd4\u56de<code>true</code>\u3002\u76ee\u524d\u652f\u6301\u7684\u53d8\u91cf\u6709\uff1a</p> \u53d8\u91cf \u542b\u4e49 <code>$_IP</code> \u5ba2\u6237\u7aef IP <code>$_HOST</code> \u8bf7\u6c42\u5934\u4e2d\u7684 Host \u5b57\u6bb5 <code>$_HOST_n</code> <code>$_HOST_n</code> \u6307 Host \u4e2d\u7684\u7b2c n \u4e2a\u5b50\u57df\uff0c\u4f8b\u5982\u5bf9\u4e8e foo.bar.baz.com\uff1a<code>$_HOST_1 = foo\uff0c$_HOST_2 = bar\uff0c$_HOST_3 = baz</code> <code>$_GET_name</code> \u4f7f\u7528 Query String \u4e2d\u7684\u53d8\u91cf\uff08\u65e0\u9700 urldecode\uff09 <code>$_POST_name</code> \u4f7f\u7528 POST \u8868\u5355\u4e2d\u7684\u53d8\u91cf\uff08\u53ea\u652f\u6301 www form \uff09 <code>$_HEADER_name</code> \u4f7f\u7528 Header \u4e2d\u7684\u503c\uff0c\u6ce8\u610f name \u5168\u4e3a\u5c0f\u5199 <code>$_COOKIE_name</code> \u4f7f\u7528 Cookie \u4e2d\u7684\u5b57\u6bb5\u503c <code>$_RANDOM</code> \u968f\u673a\u5b57\u7b26\u4e32\uff0c\u5b57\u7b26\u96c6\u4e3a <code>[a-zA-Z0-9]</code>\uff0c\u9ed8\u8ba4 8 \u4f4d <code>$_RANDOM_n</code> <code>n</code> \u4f4d\u968f\u673a\u5b57\u7b26\u4e32\uff0c\u5176\u4e2d <code>1 &lt;= n &lt;= 32</code> <code>$_URI</code> \u8bf7\u6c42\u7684 URI\uff0c\u4e0d\u5305\u542b\u53c2\u6570 <code>$_QUERY</code> Query String\uff0c\u4e0d\u5e26\u524d\u7f00 '?' <code>$_METHOD</code> GET/POST/PUT/POST/DELETE/OPTIONS/PATCH <code>$_SCHEME</code> HTTP/HTTPS <code>$_TIME</code> \u83b7\u53d6\u5f53\u524d\u670d\u52a1\u5668\u65f6\u95f4\uff0c\u683c\u5f0f\u4e3a UNIX TIME <code>$_BODY</code> \u83b7\u53d6\u5f53\u524d\u8bf7\u6c42\u7684 BODY\uff08\u8bf7\u6c42\u4f53\uff09\u5185\u5bb9\uff0c\u5927\u5c0f\u9650\u5236\u4e3a 16KB <p>\u5b57\u7b26\u4e32\u5e38\u91cf</p> <p>\u5b57\u7b26\u4e32\u5e38\u91cf\u6709\u4e24\u79cd\u5f62\u5f0f\uff0c\u7b2c\u4e00\u79cd\u5c31\u662f\u666e\u901a\u7684\u5b57\u7b26\u4e32\u4f8b\u5982<code>/foo/bar</code>\uff0c\u4f46\u662f\u5982\u679c\u5b57\u7b26\u4e32\u4e2d\u5305\u542b\u4e86\u4e00\u4e9b\u7279\u6b8a\u5b57\u7b26\uff0c\u4f8b\u5982\u7a7a\u767d\u5b57\u7b26\u5c06\u88ab\u7701\u7565\uff0c\u4f8b\u5982 <code>$(),'</code> \u8fd9\u4e9b\u5b57\u7b26\u6709\u7279\u6b8a\u7684\u7528\u9014\uff0c\u4e0d\u80fd\u88ab\u76f4\u63a5\u4f7f\u7528\uff0c\u8981\u4f7f\u7528\u8fd9\u4e9b\u7279\u6b8a\u7684\u5b57\u7b26\uff0c\u8981\u52a0 <code>\\</code> \u524d\u7f00\u5bf9\u5176\u8f6c\u4e49\uff0c\u4f8b\u5982 <code>/foo/bar\\,</code>\uff1b\u7b2c\u4e8c\u79cd\u662f\u52a0\u5355\u5f15\u53f7\u7684\u5b57\u7b26\u4e32 <code>''</code>\uff0c\u5355\u5f15\u53f7\u4e2d\u7684\u5b57\u7b26\u53ea\u6709 <code>\\</code> \u662f\u7279\u6b8a\u8f6c\u4e49\u5b57\u7b26\u524d\u7f00\uff0c\u5176\u4ed6\u7684\u90fd\u89c6\u4e3a\u666e\u901a\u5b57\u7b26\uff0c\u4f8b\u5982\u8fd9\u6837\u4e00\u6761 rewrite \u89c4\u5219 <code>/foo/'$\\\\,\\''</code>\uff0crewrite \u8fc7\u540e\u5bf9\u5e94 <code>/foo/$\\,'</code>\u3002</p> <p>break</p> <p>\u9664\u4e86\u80fd\u52fe\u9009 <code>break \u9009\u9879</code> \u6307\u5b9a\u662f\u5426 <code>break</code>\uff0c\u4e5f\u53ef\u4ee5\u76f4\u63a5\u5728 rewrite \u89c4\u5219\u6700\u540e\u52a0\u4e0a <code>$$</code> \u8868\u793a <code>break</code>\u3002</p>"},{"location":"cdn/advanced/#_17","title":"\u914d\u7f6e\u5f15\u5bfc","text":"<p>\u767b\u9646 \u7ba1\u7406\u63a7\u5236\u53f0\uff0c\u4f9d\u6b21\u8fdb\u5165\uff1a\u670d\u52a1 &gt; \u529f\u80fd\u914d\u7f6e &gt; \u9ad8\u7ea7\u529f\u80fd &gt; \u81ea\u5b9a\u4e49 Rewrite\uff0c\u70b9\u51fb\u7ba1\u7406\u5373\u53ef\u5f00\u59cb\u914d\u7f6e\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff1a</p> <p></p>"},{"location":"cdn/advanced/#_18","title":"\u7ecf\u5178\u6848\u4f8b","text":"<p>1\u3001\u81ea\u5b9a\u4e49\u9632\u76d7\u94fe</p> <p>\u9700\u6c42\u63cf\u8ff0\uff1a\u5c06\u8bf7\u6c42 URL \u6309\u7167\u4e00\u5b9a\u7684\u7b97\u6cd5\u89c4\u5219\u5b9e\u73b0 token \u9632\u76d7\u94fe\uff0c\u4f7f\u7528\u81ea\u5b9a\u4e49 rewrite \u6765\u5b9e\u73b0\uff0c\u4f1a\u66f4\u52a0\u7075\u6d3b\u548c\u9ad8\u6548\u3002token \u9632\u76d7\u94fe\u8be6\u89e3\u8bf7\u53c2\u89c1\uff1ahttps://blog.upyun.com/?p=1177</p> <p>\u8bf7\u6c42 URL \u793a\u4f8b\uff1a</p> <pre><code>/test.ts?key=68ddbe535557d6630a19cebde0cb9252&amp;t=1481106349\n</code></pre> <p>\u4ee5\u4e0a\u8bf7\u6c42 URL \u662f\u6309\u7167\u5982\u4e0b\u7b97\u6cd5\u751f\u6210\u7684\uff0c\u53c2\u89c1\u5982\u4e0b\u7b97\u6cd5\u8bf4\u660e\uff1a</p> <pre><code>&lt;?php\n$etime = time() + 600; // \u6388\u6743 10 \u5206\u949f\u540e\u8fc7\u671f \n$key = 'abc'; // token \u9632\u76d7\u94fe\u5bc6\u94a5\n$path = '/test.ts'; // \u6587\u4ef6\u76f8\u5bf9\u8def\u5f84\n$url = $path.'?key='.md5($key.$etime.$path).'&amp;t='.$etime;\necho $url; \n?&gt;\n</code></pre> <p>CDN \u8282\u70b9\u9700\u8981\u8fdb\u884c\u4e24\u5c42\u5224\u65ad\uff0c\u4e00\u5c42\u5c31\u662f\u5bf9\u65f6\u95f4\u6233\u8fdb\u884c\u6bd4\u8f83\uff0c\u53e6\u5916\u4e00\u5c42\u5c31\u662f\u6309\u7167\u7ea6\u5b9a\u7684\u89c4\u5219\u751f\u6210\u9a8c\u8bc1\u4fe1\u606f\u5e76\u8fdb\u884c\u6bd4\u8f83\uff0c\u770b\u662f\u5426\u4e00\u81f4\u3002\u6309\u7167\u8981\u6c42\uff0c\u53ef\u7f16\u5199\u5982\u4e0b\u89c4\u5219\u96c6\u6765\u5b9e\u73b0\u4ee5\u4e0a\u8981\u6c42\uff1a</p> <pre><code>rules:\n{\n  \"rule\": \"$WHEN($MATCH($_URI, '.ts$'),$OR($NOT($_GET_t),$NOT($_GET_key)))$EXIT(403)\",\n  \"pattern\": \"\"\n}, \n{\n   \"rule\": \"$WHEN($MATCH($_URI, '.ts$'),$GT($_TIME, $_GET_t))$EXIT(401)\",\n   \"pattern\": \"\"\n}, \n{\n  \"rule\": \"$WHEN(($MATCH($_URI, '.ts$'),$NOT($EQ($MD5('abc'$_GET_t$_URI),$LOWER($_GET_key))))$EXIT(403)\",\n  \"pattern\": \"\"\n}\n</code></pre> <p>\u89c4\u5219\u91ca\u4e49\uff1a</p> <p>\u7b2c\u4e00\u6761\uff1a\u5f53\u6587\u4ef6\u540e\u7f00\u4e3a ts \u65f6\uff0c\u5224\u65ad\u8bf7\u6c42 URL \u91cc\u9762\u662f\u5426\u5b58\u5728 t \u548c key \u53c2\u6570\uff0c\u5982\u679c\u5176\u4e2d\u4e00\u4e2a\u4e0d\u5b58\u5728\uff0c\u5219\u8fd4\u56de 403\uff1b</p> <p>\u7b2c\u4e8c\u6761\uff1a\u5f53\u6587\u4ef6\u540e\u7f00\u4e3a ts \u65f6\uff0c\u5224\u65ad\u5f53\u524d CDN \u8282\u70b9 UNIX \u65f6\u95f4\u662f\u5426\u5927\u4e8e\u8bf7\u6c42\u53c2\u6570\u91cc\u9762\u7684\u65f6\u95f4\u6233\uff08\u4e5f\u5373\u53c2\u6570 t \u7684\u503c\uff09\uff0c\u5426\u5219\u8fd4\u56de 401\uff1b</p> <p>\u7b2c\u4e09\u6761\uff1a\u5f53\u6587\u4ef6\u540e\u7f00\u4e3a ts \u65f6\uff0cCDN \u8282\u70b9\u6309\u7167\u7ea6\u5b9a\u7684\u7b97\u6cd5\u89c4\u5219\u751f\u6210\u9a8c\u8bc1\u4fe1\u606f\uff08\u4e5f\u5373 MD5 \u503c\uff09\uff0c\u5224\u65ad\u751f\u6210\u7684 MD5 \u503c\u548c\u8bf7\u6c42\u53c2\u6570 key \u7684\u503c\u662f\u5426\u4e00\u81f4\uff0c\u4e0d\u4e00\u81f4\u5219\u8fd4\u56de 403\uff1b</p> <p>2\u3001\u8fb9\u7f18\u91cd\u5b9a\u5411</p> <p>\u793a\u4f8b\u4e00\uff1a\u5339\u914d <code>cookie</code> \u8fdb\u884c\u8df3\u8f6c</p> <pre><code>\"rule\": \"$WHEN($NOT($EQ($_URI, /live.html)), $NOT($_COOKIE_token))$REDIRECT(http://test.example.com/no_token.html)\",\n\"pattern\": \"\"\n</code></pre> <p>\u89c4\u5219\u91ca\u4e49\uff1a\u9996\u5148\u5339\u914d\u8bf7\u6c42 <code>URI</code> \u662f\u5426\u4e3a <code>/live.html</code>,\u5f53 <code>cookie</code> \u4e2d <code>token</code> \u503c\u4e3a\u7a7a\u65f6\uff0c\u5219\u8df3\u8f6c\u5230\u6307\u5b9a\u5230\u5730\u5740 <code>http://test.example.com/no_token.html</code>\u3002</p> <p>3\u3001URL \u6539\u5199</p> <p>\u793a\u4f8b\u4e00\uff1a\u76ee\u5f55\u53ca\u53c2\u6570\u6539\u5199</p> <p>\u5c06\u8bf7\u6c42 URL \u8f6c\u6362\u4e3a\u5e26\u53c2\u6570\u7684\u52a8\u6001 URL\uff0c\u4f8b\u5982\u8bf7\u6c42\u7684 URL \u4e3a\uff1a</p> <pre><code>http://example.com/pay/25/8/...\n</code></pre> <p>\u9700\u8981 CDN \u8fb9\u7f18\u8282\u70b9\u8f6c\u6362\u4e3a\u5982\u4e0b\u8bf7\u6c42\uff1a</p> <pre><code>http://example.com/pay.php?payid=25&amp;categoryid=8...\n</code></pre> <p>\u8fd9\u4e2a\u65f6\u5019\uff0c<code>pattern</code> \u90e8\u5206\u9700\u8981\u63d0\u53d6\u76ee\u5f55\u6570\u5b57\uff0c\u9700\u8981\u751f\u6210 <code>$1</code> \u548c <code>$2</code> \u8fd9\u6837\u7684\u53d8\u91cf\uff0c\u5982\u4e0b\u89c4\u5219\u6240\u793a\uff1a</p> <pre><code>\"rule\": \"/product.php?productid=$1&amp;categoryid=$2\",\n\"pattern\": \"^product/([0-9]+)/([0-9]+)/(.*?).html$\"\n</code></pre> <p>\u89c4\u5219\u91ca\u4e49\uff1a\u5f53\u89e3\u6790\u7684 url \u7b26\u5408\u89c4\u5219 <code>^product/([0-9]+)/([0-9]+)/(.*?).html$</code>\uff0c\u90a3\u4e48\u5c06\u8bf7\u6c42\u5bfc\u5411\u5230 <code>/product.php?productid=$1&amp;categoryid=$2</code>\u3002</p> <pre><code>\u4e5f\u5373\u5c06 http://example.com/pay/25/8/... \u8f6c\u6362\u4e3a http://example.com/pay.php?payid=25&amp;categoryid=8...\n</code></pre> <p>\u793a\u4f8b\u4e8c\uff1a\u6587\u4ef6\u540d\u6539\u5199</p> <pre><code>pattern: /(.*)/playlist\\.m3u8$\nrule: /$1'.m3u8'\n</code></pre> <p>\u89c4\u5219\u91ca\u4e49\uff1a\u5f53\u8bbf\u95ee\u5730\u5740\u4e3a <code>http://domain/app/stream/playlist.m3u8</code> \u65f6\uff0c\u5c06\u8bbf\u95ee\u5730\u5740\u6539\u5199\u4e3a <code>http://domain/app/stream.m3u8</code>\u3002</p> <p>\u5e94\u7528\u573a\u666f\uff1a\u5728\u76f4\u64ad\u5e94\u7528\u573a\u666f\u4e2d\uff0c\u56e0\u4e3a\u5ba2\u6237\u7aef\u673a\u5236\u65e0\u6cd5\u6216\u8005\u4e0d\u65b9\u4fbf\u5347\u7ea7\u7684\u60c5\u51b5\uff0c\u53ef\u4ee5\u901a\u8fc7 URL \u6539\u5199\uff0c\u5c06 <code>/stream/playlist.m3u8</code> \u6539\u4e3a <code>/stream.m3u8</code>\uff0c\u5176\u4e2d <code>app</code> \u4ee3\u8868\u53d1\u5e03\u70b9\uff0c<code>stream</code> \u4ee3\u8868\u6d41\u540d\u3002</p> <p>4\u3001\u8bf7\u6c42/\u54cd\u5e94\u5934\u4fee\u6539</p> <p>\u793a\u4f8b\u4e00\uff1a\u6dfb\u52a0\u3001\u5220\u9664\u8bf7\u6c42\u5934</p> <pre><code>\"rule\": \"$ADD_REQ_HEADER(X-From-Cdn, upyun)\",\n\"pattern\": \"\"\n</code></pre> <p>\u89c4\u5219\u91ca\u4e49\uff1a\u6dfb\u52a0\u8bf7\u6c42\u5934 <code>X-From-Cdn:upyun</code>\uff0c\u8bc6\u522b CDN \u5382\u5546\u3002</p> <pre><code>\"rule\": \"$DEL_REQ_HEADER(Accept-Encoding) \",\n\"pattern\": \"\"\n</code></pre> <p>\u89c4\u5219\u91ca\u4e49\uff1a\u5220\u9664\u8bf7\u6c42\u5934 <code>Accept-Encoding</code> \uff0c\u65e0\u8bba\u7ec8\u7aef\u662f\u5426\u53d1\u8d77 <code>gzip</code> \u7684\u8bf7\u6c42\uff0c\u90fd\u8fdb\u884c <code>ungzip</code> \u7684\u8fd4\u56de\u3002</p> <p>\u793a\u4f8b\u4e8c\uff1a\u6dfb\u52a0\u54cd\u5e94\u5934</p> <pre><code>\"rule\": \"$ADD_RSP_HEADER(CDN, UPYUN, 1) \",\n\"pattern\": \"\"\n</code></pre> <p>\u89c4\u5219\u91ca\u4e49\uff1a\u6dfb\u52a0\u54cd\u5e94\u5934 <code>CDN</code>  \u4e3a <code>UPYUN</code>, <code>1</code> \u8868\u793a\u4f1a\u8986\u76d6\u6389\u5df2\u6709\u7684\u54cd\u5e94\u5934\uff0c\u901a\u8fc7\u54cd\u5e94\u5934\u4e5f\u53ef\u4ee5\u8bc6\u522b CDN \u5382\u5546\u3002</p> <p>5\u3001URL \u9650\u901f</p> <p>\u5047\u5982\u8bf7\u6c42\u7684 URL \u4e3a\uff1a<code>http://test.example.com/mp4/4E10F356C0FEAD359C33DC5901307461-10.mp4</code> \uff0c\u9700\u8981\u5bf9\u8be5\u7c7b\u578b\u6587\u4ef6\u8fdb\u884c\u9650\u901f\uff0c\u9650\u901f\u8981\u6c42\u4e3a\uff1a\u524d 20MB \u4e0d\u9650\u901f\uff0c20MB \u4e4b\u540e\u9650\u901f 800 KB/s\uff0c\u89c4\u5219\u53ef\u8fd9\u6837\u7f16\u5199\uff1a</p> <pre><code>\"rule\": \"$WHEN($1, $EQ($_HOST, 'test.example.com'))$LIMIT_RATE_AFTER(20, m)$LIMIT_RATE(800, k)\",\n\"pattern\": \"^(/).+-10\\.mp4$\"\n</code></pre> <p>\u89c4\u5219\u91ca\u4e49\uff1a\u5f53 <code>$1</code> \u4e3a\u771f\uff0c\u4e14\u6ee1\u8db3\u8bf7\u6c42 <code>HOST</code> \u4e3a <code>test.example.com</code> \u65f6 \uff0c\u5f00\u59cb 20MB \u4e0d\u9650\u901f\uff0c\u540e\u9762\u9650\u5236\u5230 <code>800KB/s</code>\u3002</p> <p>6\u3001\u5927\u5c0f\u5199\u8f6c\u6362</p> <p>\u8be5\u90e8\u5206\u4f1a\u4f7f\u7528\u5230<code>$LOWER(E)</code> \u51fd\u6570\uff0c\u76f4\u63a5\u770b\u89c4\u5219\uff1a</p> <pre><code>\"rule\": \"$WHEN($MATCH($LOWER($_URI), /uptest.png)) /UPtest.png\",\n\"pattern\": \"\"\n</code></pre> <p>\u89c4\u5219\u91ca\u4e49\uff1a\u9996\u5148\u662f\u83b7\u53d6\u8bf7\u6c42 <code>URI</code> \uff0c\u4f7f\u7528 <code>$LOWER(E)</code> \u51fd\u6570\u5c06 <code>URI</code> \u8f6c\u6362\u4e3a\u5c0f\u5199\uff0c\u548c <code>/uptest.png</code> \u8fdb\u884c\u5339\u914d\uff0c\u5339\u914d\u6210\u529f\uff0c\u5219\u76f4\u63a5\u5c06 <code>URI</code> \u6539\u5199\u4e3a<code>/UPtest.png</code>\u3002\u5982\u679c\u9700\u8981\u5c06\u5b57\u7b26\u4e32\u8f6c\u6362\u4e3a\u5927\u5199\uff0c\u4f7f\u7528 <code>$UPPER(E)</code> \u51fd\u6570\u3002</p> <p>7\u3001\u6570\u503c\u6bd4\u8f83</p> <p>\u4e5f\u5373\u5c06\u5b57\u7b26\u4e32\u6216\u8005\u6570\u5b57\u8fdb\u884c\u6bd4\u8f83\u3002\u4f8b\u5982\uff1a <code>A</code> \u548c <code>B</code> \u8fdb\u884c\u6bd4\u8f83\uff0c\u662f\u5426\u5927\u4e8e\u3001\u5927\u4e8e\u7b49\u4e8e\u3001\u76f8\u7b49\u7b49\u903b\u8f91\uff0c\u53c2\u89c1\u5982\u4e0b\u89c4\u5219\u793a\u4f8b\uff1a</p> <pre><code>\"rule\": \"$GT($_TIME,$ADD($INT($_GET_t,16,10),3600))\",\n\"pattern\": \"\"\n</code></pre> <p>\u89c4\u5219\u91ca\u4e49\uff1a\u5c06\u8bf7\u6c42 URL \u4e2d\u7684 t \u53c2\u6570 \u7531 16 \u8fdb\u5236\u8f6c\u6362\u4e3a 10 \u8fdb\u5236\uff0c\u7136\u540e\u52a0\u4e0a 3600 \uff0c\u5c06\u76f8\u52a0\u5f97\u5230\u7684\u503c\u548c\u5f53\u524d\u7cfb\u7edf\u65f6\u95f4\u8fdb\u884c\u6bd4\u8f83\u3002\u8fd9\u91cc\u4f7f\u7528\u5230\u4e86 <code>$GT(E1\uff0cE2\uff09</code> \u51fd\u6570\uff0c\u4e5f\u5373 <code>E1</code> \u662f\u5426\u5927\u4e8e <code>E2</code>\uff0c\u5927\u4e8e\u5373\u8fd4\u56de true \u3002\u53e6\u5916\uff0c\u7b49\u4e8e\u4f7f\u7528 <code>$EQ(E1\uff0cE2\uff09</code> \u51fd\u6570\uff0c\u5927\u4e8e\u7b49\u4e8e\u4f7f\u7528 <code>$GE(E1\uff0cE2\uff09</code> \u51fd\u6570\u3002</p> <p>\u5982\u6709\u7591\u95ee\u8bf7 \u8054\u7cfb\u6211\u4eec</p>"},{"location":"cdn/analysis/","title":"\u7edf\u8ba1\u5206\u6790","text":""},{"location":"cdn/analysis/#_1","title":"\u7edf\u8ba1\u5206\u6790","text":"<p>\u4e3a\u4e86\u66f4\u52a0\u900f\u660e\u7684\u5c55\u793a\u7ec8\u7aef\u7528\u6237\u8bbf\u95ee CDN \u4ee5\u53ca CDN \u56de\u6e90\u7684\u8bbf\u95ee\u60c5\u51b5\uff0c\u53c8\u62cd\u4e91 CDN \u670d\u52a1\u4ece\u5e26\u5bbd\u3001\u6d41\u91cf\u3001\u8bf7\u6c42\u6570\u7b49\u7ef4\u5ea6\u8fdb\u884c\u4e86\u6570\u636e\u7edf\u8ba1\u548c\u5206\u6790\uff0c\u65b9\u4fbf\u7528\u6237\u67e5\u770b\u548c\u5206\u6790\uff0c\u5177\u4f53\u529f\u80fd\u9879\u53c2\u89c1\u5982\u4e0b\u63cf\u8ff0\uff1a</p> <ul> <li> <p>\u5e26\u5bbd\u53ca\u6d41\u91cf\u67e5\u8be2 \u60a8\u53ef\u4ee5\u67e5\u8be2\u6307\u5b9a\u65f6\u95f4\u533a\u95f4\u3001\u57df\u540d\u3001\u670d\u52a1\u540d\u3001\u5730\u533a\u3001\u8fd0\u8425\u5546\u7b49\u6761\u4ef6\u4e0b\uff0c\u5e26\u5bbd\u53ca\u6d41\u91cf\u7684\u66f2\u7ebf\u56fe\uff0c\u4ee5\u53ca\u8fd0\u8425\u5546\u3001\u5730\u533a\u5206\u5e03\u53ca\u6392\u540d\u60c5\u51b5\uff1b</p> </li> <li> <p>\u8bf7\u6c42\u6570\u67e5\u8be2\uff1a\u60a8\u53ef\u4ee5\u67e5\u8be2\u6307\u5b9a\u65f6\u95f4\u533a\u95f4\u3001\u57df\u540d\u3001\u670d\u52a1\u540d\u3001\u5730\u533a\u3001\u8fd0\u8425\u5546\u7b49\u6761\u4ef6\u4e0b\uff0c\u7528\u6237\u8bf7\u6c42\u6570\u7684\u66f2\u7ebf\u56fe\uff1b</p> </li> <li> <p>\u56de\u6e90\u7edf\u8ba1\uff1a\u60a8\u53ef\u4ee5\u67e5\u770b\u6307\u5b9a\u65f6\u95f4\u533a\u95f4\u3001\u57df\u540d\u3001\u670d\u52a1\u540d\u7b49\u6761\u4ef6\u4e0b\uff0c\u5e26\u5bbd\u53ca\u6d41\u91cf\u66f2\u7ebf\u4ee5\u53ca\u6e90\u7ad9\u6d41\u91cf\u5206\u5e03\uff1b</p> </li> <li> <p>\u67e5\u8be2\u660e\u7ec6\u6570\u636e\uff1a\u60a8\u53ef\u4ee5\u67e5\u8be2\u6307\u5b9a\u65f6\u95f4\u533a\u95f4\u3001\u57df\u540d\u3001\u670d\u52a1\u540d\u3001\u5730\u533a\u3001\u8fd0\u8425\u5546\u7b49\u6761\u4ef6\u4e0b\uff0c\u67e5\u8be2\u6bcf\u65e5\u7684\u6d41\u91cf\u3001\u8bf7\u6c42\u91cf\u3001\u9759\u6001\u8bf7\u6c42\u3001\u52a8\u6001\u8bf7\u6c42\u3001HTTPS \u8bf7\u6c42\u3001\u5cf0\u503c\u5e26\u5bbd\u3001\u5cf0\u503c\u5e26\u5bbd\u65f6\u95f4\u7b49\u660e\u7ec6\u6570\u636e\u3002</p> </li> <li> <p>\u5bfc\u51fa Excel \u62a5\u8868\uff1a\u60a8\u53ef\u4ee5\u67e5\u8be2\u6307\u5b9a\u65f6\u95f4\u533a\u95f4\u3001\u57df\u540d\u3001\u670d\u52a1\u540d\u3001\u5730\u533a\u3001\u8fd0\u8425\u5546\u7b49\u6761\u4ef6\u4e0b\uff0c\u53ef\u4ee5\u5bfc\u51fa 5 \u5206\u949f\u7c92\u5ea6\u8be6\u7ec6\u7684\u8bf7\u6c42\u6570\u3001\u6d41\u91cf\u3001\u5e26\u5bbd\u3001\u5cf0\u503c\u5e26\u5bbd\u65f6\u95f4\u7b49\u8be6\u7ec6\u6570\u636e\u3002</p> </li> </ul> <p>\u914d\u7f6e\u5f15\u5bfc</p> <p>\u767b\u9646 CDN \u63a7\u5236\u53f0\uff0c\u5728\u7f6e\u9876\u83dc\u5355\u8fdb\u5165 <code>\u7edf\u8ba1</code> \u680f\u76ee\uff0c\u53ef\u67e5\u8be2\u5982\u4e0a\u7edf\u8ba1\u5206\u6790\u6570\u636e\uff1a</p> <p>\u67e5\u8be2\u793a\u4f8b\u4e00\uff1a\u67e5\u8be2\u5e26\u5bbd\u53ca\u8bf7\u6c42\u6570\u66f2\u7ebf\u56fe</p> <p></p> <p>\u67e5\u8be2\u793a\u4f8b\u4e8c\uff1a\u67e5\u8be2\u6d41\u91cf\u5730\u533a\u53ca\u8fd0\u8425\u5546\u5206\u5e03\u53ca\u6392\u884c</p> <p></p> <p>\u67e5\u8be2\u793a\u4f8b\u4e09\uff1a\u67e5\u8be2\u660e\u7ec6\u6570\u636e</p> <p></p> <p>\u67e5\u8be2\u793a\u4f8b\u56db\uff1a\u56de\u6e90\u5e26\u5bbd\u53ca\u8bf7\u6c42</p> <p></p> <p>\u76f8\u5173\u8bf4\u660e\uff1a</p> <p>1.\u4ee5\u5929\u4e3a\u5355\u4f4d\u67e5\u8be2\u6570\u636e\u65f6\uff0c\u60a8\u53ef\u4ee5\u67e5\u8be2 5 \u5206\u949f\u65f6\u95f4\u7c92\u5ea6\u7684\u6570\u636e</p> <p>2.\u65f6\u95f4\u533a\u95f4\u4e3a\u5927\u4e8e\u7b49\u4e8e 2 \u5929\u65f6\uff0c\u60a8\u53ef\u4ee5\u67e5\u8be2 1 \u5c0f\u65f6\u65f6\u95f4\u7c92\u5ea6\u7684\u6570\u636e</p>"},{"location":"cdn/analysis/#_2","title":"\u6027\u80fd\u76d1\u63a7","text":"<p>\u901a\u8fc7\u6027\u80fd\u76d1\u63a7\uff0c\u53ef\u4ee5\u7b80\u5355\u3001\u76f4\u89c2\u5730\u4e86\u89e3\u5230 CDN \u670d\u52a1\u8d28\u91cf\u60c5\u51b5\uff0c\u53ca\u65f6\u53d1\u73b0\u548c\u5b9a\u4f4d\u95ee\u9898\uff0c\u5e76\u534f\u52a9\u89e3\u51b3\u95ee\u9898\u3002\u5728\u754c\u9762\u7684\u4e3b\u7a97\u53e3\u4e2d\uff0c\u60a8\u53ef\u4ee5\u67e5\u8be2\u6307\u5b9a\u65f6\u95f4\u533a\u95f4\u3001\u57df\u540d\u3001\u670d\u52a1\u540d\u3001\u5730\u533a\u3001\u8fd0\u8425\u5546\u7b49\u6761\u4ef6\u4e0b\uff0c\u5bf9\u5e94\u670d\u52a1\u7684\u5065\u5eb7\u5ea6\u3001\u7f13\u5b58\u547d\u4e2d\u7387\u3001\u5e73\u5747\u4e0b\u8f7d\u901f\u5ea6\u7b49\u6570\u636e\u3002\u5177\u4f53\u529f\u80fd\u9879\u63cf\u8ff0\u5982\u4e0b\uff1a</p> <ul> <li> <p>\u5065\u5eb7\u5ea6\uff1a\u7edf\u8ba1\u6240\u6709\u8bf7\u6c42\u7684 HTTP \u72b6\u6001\u7801\uff0c\u8ba1\u7b97 2xx \u548c 3xx \u8bf7\u6c42\u6b21\u6570\u6240\u5360\u7684\u6bd4\u4f8b</p> </li> <li> <p>\u7f13\u5b58\u547d\u4e2d\u7387\uff1a\u7edf\u8ba1\u6240\u6709\u8bf7\u6c42\u6570\u4e2d\uff0c\u547d\u4e2d\u7f13\u5b58\u7684\u8bf7\u6c42\u6570\u6240\u5360\u7684\u6bd4\u4f8b</p> </li> <li> <p>\u5e73\u5747\u4e0b\u8f7d\u901f\u5ea6\uff1a\u53ef\u4ee5\u6839\u636e\u5730\u533a\u548c\u8fd0\u8425\u5546\u6765\u533a\u5206\u8d44\u6e90\u6587\u4ef6\u4e0b\u8f7d\u901f\u5ea6\u548c\u8bf7\u6c42\u8017\u65f6</p> </li> <li> <p>\u62e6\u622a\u653b\u51fb\u6b21\u6570\uff1a\u62e6\u622a\u7684\u8de8\u7ad9\u653b\u51fb\u3001SQL \u6ce8\u5165\u548c\u5176\u4ed6\u4ee3\u7801\u6267\u884c\u7b49\u591a\u79cd\u653b\u51fb\u7684\u6570\u91cf\uff08\u4ec5\u9650\u5f00\u542f WAF \u529f\u80fd\uff09</p> </li> </ul> <p>\u914d\u7f6e\u5f15\u5bfc</p> <p>\u767b\u9646 CDN \u63a7\u5236\u53f0\uff0c\u5728\u7f6e\u9876\u83dc\u5355\u8fdb\u5165 <code>\u76d1\u63a7</code> \u680f\u76ee\uff0c\u53ef\u67e5\u8be2\u5982\u4e0a\u6027\u80fd\u76d1\u6d4b\u6570\u636e\uff0c\u5982\u4e0b\u56fe\u6240\u793a\uff1a</p> <p></p> <p>\u67e5\u8be2\u793a\u4f8b\u4e00\uff1a\u670d\u52a1\u72b6\u51b5\u5386\u53f2\u6570\u636e\uff08\u5065\u5eb7\u5ea6\uff09</p> <p></p> <p>\u67e5\u8be2\u793a\u4f8b\u4e8c\uff1a\u5065\u5eb7\u5ea6\u8be6\u60c5\uff08\u56de\u6e90\u8bbf\u95ee\uff09</p> <p></p> <p>\u67e5\u8be2\u793a\u4f8b\u4e09\uff1a\u670d\u52a1\u72b6\u51b5\u5386\u53f2\u6570\u636e\uff08\u7f13\u5b58\u547d\u4e2d\u7387\uff09</p> <p></p> <p>\u67e5\u8be2\u793a\u4f8b\u56db\uff1a\u5730\u533a\u5e73\u5747\u4e0b\u8f7d\u901f\u5ea6</p> <p></p>"},{"location":"cdn/basic/","title":"Basic","text":""},{"location":"cdn/basic/#_1","title":"\u521b\u5efa\u670d\u52a1","text":"<p>\u7b2c\u4e00\u6b65\uff1a\u9009\u62e9\u670d\u52a1\u7c7b\u578b</p> <p>\u767b\u5f55 \u53c8\u62cd\u4e91\u7ba1\u7406\u63a7\u5236\u53f0\uff0c\u5728\u63a7\u5236\u53f0\u9875\u9762\uff0c\u5206\u522b\u70b9\u51fb\u53f3\u4e0a\u89d2\u7684 <code>\u670d\u52a1</code> \u3001<code>\u521b\u5efa\u670d\u52a1</code> \u7b49\u6309\u94ae\uff0c\u9009\u62e9\u670d\u52a1\u7c7b\u578b\u3002\u6839\u636e\u4e1a\u52a1\u60c5\u51b5\uff0c\u53ef\u9009\u62e9 <code>\u5168\u7f51\u52a0\u901f\u670d\u52a1</code> \u6216 <code>\u76f4\u64ad\u52a0\u901f\u670d\u52a1</code> \u3002\u5177\u4f53\u64cd\u4f5c\u5982\u4e0b\u56fe\u6240\u793a\uff1a</p> <p></p> <p>\u7b2c\u4e8c\u6b65\uff1a\u586b\u5199\u914d\u7f6e\u4fe1\u606f</p> <p>\u9009\u62e9\u670d\u52a1\u7c7b\u578b\u4e4b\u540e\uff0c\u5219\u8fdb\u5165\u670d\u52a1\u521b\u5efa\u9636\u6bb5\uff0c\u9700\u8981\u8fdb\u884c\u6e90\u7ad9\u7c7b\u578b\u3001\u56de\u6e90\u914d\u7f6e\u3001\u64cd\u4f5c\u5458\u8bbe\u7f6e\u7b49\u6b65\u9aa4\u3002\u5177\u4f53\u914d\u7f6e\u754c\u9762\u53ef\u53c2\u89c1\u5982\u4e0b\u56fe\u6240\u793a\uff1a</p> <p>\u521b\u5efa\u670d\u52a1\uff1a</p> <p></p> <p>\u521b\u5efa\u64cd\u4f5c\u5458\uff1a</p> <p></p> <p>\u6e90\u7ad9\u7c7b\u578b</p> <p>\u76ee\u524d\u6e90\u7ad9\u7c7b\u578b\u5305\u62ec <code>\u53c8\u62cd\u4e91</code> \u548c <code>\u81ea\u4e3b\u6e90</code>\u3002\u5176\u4e2d <code>\u53c8\u62cd\u4e91</code> \u8868\u793a\u8d44\u6e90\u90fd\u5b58\u653e\u5728\u53c8\u62cd\u4e91\u5206\u5e03\u5f0f\u5bf9\u8c61\u5b58\u50a8\u670d\u52a1\u4e0a\uff0c\u540c\u65f6\u9644\u52a0\u4e86 CDN \u670d\u52a1\u7684\u652f\u6301\uff0c\u56e0\u6b64\u4e5f\u62e5\u6709\u7edd\u5927\u591a\u6570\u53c8\u62cd\u4e91 CDN \u7684\u529f\u80fd\uff1b\u800c <code>\u81ea\u4e3b\u6e90</code> \u5219\u8868\u793a\u8d44\u6e90\u90fd\u5b58\u653e\u5728\u5ba2\u6237\u81ea\u5df1\u7684\u6e90\u7ad9\u6216\u7b2c\u4e09\u65b9\u4e91\u5b58\u50a8\u670d\u52a1\u4e0a\uff0c\u4ec5\u4f7f\u7528\u53c8\u62cd\u4e91 CDN \u670d\u52a1\u3002</p> <p>\u914d\u7f6e\u5f15\u5bfc</p> <p>\u7cfb\u7edf\u9ed8\u8ba4\u4f1a\u9009\u62e9 <code>\u81ea\u4e3b\u6e90</code>\uff0c\u8bf7\u6839\u636e\u5177\u4f53\u4e1a\u52a1\u9700\u6c42\u8fdb\u884c\u9009\u62e9\u3002\u914d\u7f6e\u754c\u9762\u5982\u4e0b\u56fe\u6240\u793a\uff1a</p> <p></p> <p>\u5982\u679c\u60a8\u7684\u8d44\u6e90\u90fd\u6258\u7ba1\u5728\u7b2c\u4e09\u65b9\u4e91\u5b58\u50a8\u5e73\u53f0\u6216\u8005\u81ea\u6709\u6e90\u4e0a\uff0c\u8bf7\u9009\u62e9 <code>\u81ea\u4e3b\u6e90</code></p> <p>\u5982\u679c\u60a8\u51c6\u5907\u628a\u9759\u6001\u8d44\u6e90\u90fd\u6258\u7ba1\u5728\u53c8\u62cd\u4e91\u5bf9\u8c61\u5b58\u50a8\u5e73\u53f0\u4e0a\uff0c\u8bf7\u9009\u62e9 <code>\u53c8\u62cd\u4e91</code></p> <p>\u56de\u6e90\u914d\u7f6e</p> <p>\u56de\u6e90\u914d\u7f6e\u662f CDN \u670d\u52a1\u521b\u5efa\u6700\u91cd\u8981\u7684\u73af\u8282\uff0c\u8bf7\u8c28\u614e\u914d\u7f6e\u3002\u4e5f\u53ef\u53bb\u529f\u80fd\u914d\u7f6e\u754c\u9762\u8fdb\u884c\u8bbe\u7f6e\uff0c\u4f9d\u6b21\u8fdb\u5165\uff1a\u670d\u52a1 &gt; \u529f\u80fd\u914d\u7f6e &gt; \u57fa\u7840\u914d\u7f6e &gt; \u56de\u6e90\u914d\u7f6e\uff0c\u70b9\u51fb\u7ba1\u7406\u6309\u94ae\u5373\u53ef\u914d\u7f6e\u3002\u5982\u4e0b\u622a\u56fe\u6240\u793a\uff1a</p> <p></p> <p>\u56de\u6e90 Host</p> <p>\u8be5\u914d\u7f6e\u662f\u6307 CDN \u8282\u70b9\u56de\u6e90\u8fc7\u7a0b\u4e2d\u6240\u9700\u8bbf\u95ee\u7684\u6e90\u7ad9\u670d\u52a1\u5668\u4e0a\u7684\u57df\u540d\u3002CDN \u8282\u70b9\u56de\u6e90\u65f6\u4f1a\u5728 HTTP \u8bf7\u6c42\u5934\u4e2d Host \u5b57\u6bb5\u91cc\u586b\u5199\u8be5\u57df\u540d\uff0c\u4ee5\u652f\u6301\u6e90\u670d\u52a1\u5668\u53ef\u901a\u8fc7\u6b64 Host \u505a\u7684\u7279\u6b8a\u5904\u7406\u903b\u8f91\uff0c\u4e00\u822c\u662f\u57df\u540d\u5f62\u5f0f\u7684\u5b57\u7b26\u4e32\uff0c\u5f53\u7136\u4e5f\u652f\u6301\u4efb\u610f\u5b57\u7b26\u4e32\u5f62\u5f0f\u3002</p> <p>\u914d\u7f6e\u5f15\u5bfc</p> <p>1.\u56de\u6e90 Host \u4e3a\u53ef\u9009\u914d\u7f6e\u9879\uff0c\u7279\u522b\u5730\uff0c\u5982\u679c\u8be5\u81ea\u5b9a\u4e49\u503c\u4e3a\u7a7a\uff0c\u5219\u8be5\u670d\u52a1\u4e0b\u7684\u52a0\u901f\u57df\u540d\u5c31\u4f1a\u4f5c\u4e3a\u56de\u6e90HOST</p> <p>2.\u81ea\u5b9a\u4e49\uff1a\u53ef\u4ee5\u6839\u636e\u9700\u8981\u4fee\u6539\u56de\u6e90 Host\uff0c\u8bf7\u4fdd\u8bc1\u8be5\u57df\u540d\u53ef\u4ee5\u6b63\u786e\u8bbf\u95ee\uff0c\u5426\u5219\u4f1a\u51fa\u73b0\u56de\u6e90\u5931\u8d25\u7684\u60c5\u51b5</p> <p>\u56de\u6e90\u534f\u8bae</p> <p>\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u6211\u4eec\u90fd\u4f1a\u4ee5 HTTP \u534f\u8bae\u56de\u6e90\uff0c\u60a8\u4e5f\u53ef\u4ee5\u91c7\u7528 HTTPS \u534f\u8bae\u56de\u6e90\u3002\u53e6\u5916\u4e00\u4e2a\u7279\u522b\u7684\u9009\u9879\u662f\u534f\u8bae\u8ddf\u968f\uff0c\u5f53\u542f\u7528\u8be5\u7279\u6027\u65f6\uff0c\u56de\u6e90\u534f\u8bae\u59cb\u7ec8\u4f1a\u548c\u5ba2\u6237\u7aef\u8bbf\u95ee CDN \u7684\u534f\u8bae\u4fdd\u6301\u4e00\u81f4\uff0c\u5373\u5ba2\u6237\u7aef\u7528 HTTP \u534f\u8bae\u8bbf\u95ee\u6211\u4eec CDN\uff0c\u90a3\u4e48\u56de\u6e90\u65f6\u6211\u4eec\u4e5f\u4f1a\u7528 HTTP \u534f\u8bae\u8fdb\u884c\u56de\u6e90\uff0c\u540c\u6837\uff0c\u82e5\u91c7\u7528 HTTPS \u8bbf\u95ee\uff0c\u90a3\u4e48\u56de\u6e90\u4e5f\u662f HTTPS\u3002</p> <p>\u914d\u7f6e\u5f15\u5bfc</p> <p>\u5f53\u6211\u4eec\u9009\u62e9 HTTP \u534f\u8bae\u56de\u6e90\u65f6\uff0c\u56de\u6e90\u5730\u5740\u7684\u7aef\u53e3\u53f7\u9ed8\u8ba4\u4e3a 80\uff0c\u800c\u9009\u62e9 HTTPS \u534f\u8bae\u56de\u6e90\u65f6\uff0c\u7aef\u53e3\u53f7\u9ed8\u8ba4\u4e3a 443\u3002\u5f53\u7136\uff0c\u4f60\u4e5f\u53ef\u4ee5\u624b\u52a8\u6307\u5b9a\u7279\u6b8a\u7684\u7aef\u53e3\u53f7\uff0c\u4f8b\u5982 8080 \u6216 8443\u3002</p> <p>\u6ce8\u610f\u4e8b\u9879</p> <p>\u9009\u62e9 <code>\u534f\u8bae\u8ddf\u968f</code> \u540e\uff0c\u56de\u6e90\u5730\u5740\u7684\u7aef\u53e3\u53f7\u914d\u7f6e\u5c06\u4ec5\u4f5c\u7528\u4e8e\u56de\u6e90\u534f\u8bae\u4e3a HTTP \u7684\u60c5\u51b5\uff0c\u9ed8\u8ba4 80\uff0c\u5f53\u7136\u4f60\u4e5f\u53ef\u4ee5\u81ea\u5b9a\u4e49\u4e3a\u5176\u4ed6\u503c\uff0c\u800c\u56de\u6e90\u534f\u8bae\u4e3a HTTPS \u65f6\u7aef\u53e3\u53f7\u5219\u59cb\u7ec8\u56fa\u5b9a\u4e3a 443\uff0c\u4e14\u76ee\u524d\u6682\u65f6\u4e0d\u652f\u6301\u4fee\u6539\u6b64\u56fa\u5b9a\u503c\u3002\u56e0\u6b64\uff0c\u82e5\u4e4b\u524d\u9009\u62e9 HTTPS \u534f\u8bae\u56de\u6e90 \u4e14\u81ea\u5b9a\u4e49\u8bbe\u7f6e\u8fc7\u7aef\u53e3\u53f7\u7684\u7528\u6237\u9700\u8981\u6ce8\u610f\uff0c\u5207\u6362\u5230 <code>\u534f\u8bae\u8ddf\u968f</code> \u6a21\u5f0f\u4e0b\u65f6\uff0c\u81ea\u5b9a\u4e49\u7684\u7aef\u53e3\u53f7\u5c06\u4ec5\u4f5c\u7528\u4e8e\u56de\u6e90\u534f\u8bae\u4e3a HTTP \u7684\u60c5\u51b5\u3002</p> <p>\u7ebf\u8def\u914d\u7f6e</p> <p>\u7ebf\u8def\u914d\u7f6e\u5305\u62ec\u56de\u6e90\u5730\u5740\u3001\u7aef\u53e3\u53f7\u3001\u4e3b\u5907\u7ebf\u8def\u3001\u8f6e\u8be2\u6743\u91cd\u3001\u6700\u5927\u5931\u8d25\u6b21\u6570\u3001\u9759\u9ed8\u65f6\u95f4\u7b49\u9ad8\u7ea7\u8bbe\u7f6e\u3002\u5176\u4e2d\u56de\u6e90\u5730\u5740\u5219\u8868\u793a\u6e90\u7ad9\u5b9e\u9645\u53ef\u8bbf\u95ee\u7684\u7f51\u7edc\u5730\u5740\uff0c\u53ef\u586b IP \u5730\u5740\u6216\u57df\u540d\u5730\u5740\uff0c\u5982\u679c\u662f\u57df\u540d\u5730\u5740\uff0c\u90a3\u4e48 CDN \u5728\u56de\u6e90\u65f6\u4f1a\u5bf9\u8be5\u57df\u540d\u5730\u5740\u8fdb\u884c DNS \u89e3\u6790\uff0c\u7136\u540e\u9488\u5bf9\u89e3\u6790\u51fa\u6765\u7684 IP \u5730\u5740\u8fdb\u884c\u8bbf\u95ee\uff0c\u56e0\u6b64\u82e5\u89e3\u6790\u5931\u8d25\u5c06\u4f1a\u5bfc\u81f4\u56de\u6e90\u5f02\u5e38\u3002</p> <p>\u914d\u7f6e\u5f15\u5bfc</p> <p>\u914d\u7f6e\u754c\u9762\u5982\u4e0b\u622a\u56fe\u6240\u793a\uff0c\u4ee5\u4e0b\u5c06\u91cd\u70b9\u4ecb\u7ecd\u4e3b\u5907\u7ebf\u8def\u3001\u8f6e\u8be2\u6743\u91cd\u3001\u6700\u5927\u5931\u8d25\u6b21\u6570\u548c\u9759\u9ed8\u65f6\u95f4\u3002</p> <p></p> <ul> <li>\u4e3b\u3001\u5907\u7ebf\u8def</li> </ul> <p>\u56de\u6e90\u5730\u5740\u914d\u7f6e\u4e2d\u9664\u4e86\u9ed8\u8ba4\u7684 <code>\u4e3b\u7ebf\u8def</code> \u5916\uff0c\u6211\u4eec\u8fd8\u652f\u6301 <code>\u5907\u4efd\u7ebf\u8def</code>  \u7684\u914d\u7f6e\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c <code>\u4e3b\u7ebf\u8def</code> \u591a\u4e2a\u56de\u6e90\u5730\u5740\u4f1a\u4ee5 RR \u8f6e\u8be2\u65b9\u5f0f\u8fdb\u884c\u8c03\u5ea6\uff0c\u5f53\u4e14\u4ec5\u5f53\u6240\u6709 <code>\u4e3b\u7ebf\u8def</code> \u56de\u6e90\u5730\u5740\u5747\u4e0d\u53ef\u8fbe\u65f6\uff0c\u6b64\u65f6\u6211\u4eec\u5c06\u4f7f\u7528 <code>\u5907\u4efd\u7ebf\u8def</code> \u8fdb\u884c\u8f6c\u53d1\uff0c\u82e5 <code>\u5907\u4efd\u7ebf\u8def</code> \u6709\u591a\u4e2a\u56de\u6e90\u5730\u5740\uff0c\u90a3\u4e48\u8d1f\u8f7d\u5747\u8861\u65b9\u5f0f\u4e5f\u548c <code>\u4e3b\u7ebf\u8def</code> \u4e00\u6837\uff0c\u4ee5 Round-Robin \u8f6e\u8be2\uff08\u8be6\u60c5\u8bf7\u70b9\u51fb\u94fe\u63a5\uff09\u65b9\u5f0f\u8fdb\u884c\u8c03\u5ea6\u3002</p> <ul> <li>\u8f6e\u8be2\u6743\u91cd</li> </ul> <p>\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u8f6e\u8be2\u6743\u91cd\u90fd\u4e3a 1\uff0c\u8868\u793a\u6240\u6709\u56de\u6e90\u5730\u5740\u8f6e\u8be2\u5230\u7684\u6982\u7387\u5747\u7b49\u3002\u5f53\u7136\u4e5f\u53ef\u4ee5\u5982\u4e0a\u56fe\u90a3\u6837\u81ea\u5b9a\u4e49\u8f6e\u8be2\u6743\u91cd\uff0c\u6211\u4eec\u770b\u5230\u4e3b\u7ebf\u8def\u4e24\u4e2a\u56de\u6e90\u5730\u5740\u6743\u91cd\u5206\u522b\u662f 1 \u548c 2\uff0c\u6b64\u65f6\u4e3b\u7ebf\u8def\u96c6\u7fa4\u5728\u8f6e\u8be2\u8c03\u5ea6\u4e2d\u4f1a\u6709 1/3 \u7684\u6982\u7387\u56de <code>192.168.11.1:80</code> \u8fd9\u4e2a\u5730\u5740\uff0c\u800c\u56de <code>192.168.11.2:80</code> \u8fd9\u4e2a\u5730\u5740\u7684\u6982\u7387\u5219\u4e3a 2/3\u3002\u5373\u5f53\u524d\u56de\u6e90\u5730\u5740\u8f6e\u8be2\u5230\u7684\u6982\u7387\u53ef\u6309\uff08\u5f53\u524d\u8282\u70b9\u6743\u91cd/\u96c6\u7fa4\u6240\u6709\u8282\u70b9\u6743\u91cd\u4e4b\u548c\uff09\u8fd9\u4e2a\u516c\u5f0f\u8ba1\u7b97\u3002</p> <ul> <li>\u6700\u5927\u5931\u8d25\u6b21\u6570\u548c\u9759\u9ed8\u65f6\u95f4</li> </ul> <p>\u8868\u793a\u5728\u4e00\u4e2a <code>\u9759\u9ed8\u65f6\u95f4 (fail_timeout)</code> \u5185\u5982\u679c\u5bf9\u5e94\u6e90\u7ad9\u7684\u5f02\u5e38\u6b21\u6570\u7d2f\u8ba1\u8fbe\u5230\u5f53\u524d\u8bbe\u7f6e\u7684 <code>\u6700\u5927\u5931\u8d25\u6b21\u6570 (max_fails)</code> \uff0c\u90a3\u4e48\u5728\u4e0b\u4e00\u4e2a  <code>\u9759\u9ed8\u65f6\u95f4 (fail_timeout)</code> \u5185\uff0cCDN \u5c31\u4f1a\u8ba4\u4e3a\u8fd9\u4e2a\u6e90\u7ad9\u5b95\u673a\u4e86\uff0c\u5373\u5728\u8fd9\u6bb5\u65f6\u95f4\u5185\u4e0d\u4f1a\u518d\u5c06\u8bf7\u6c42\u8f6c\u53d1\u7ed9\u5b83\u3002\u7279\u522b\u5730\uff0c\u5f53 <code>\u6700\u5927\u5931\u8d25\u6b21\u6570 (max_fails)</code> \u5176\u503c\u4e3a 0 \u65f6\uff0c\u8868\u793a\u4e0d\u4f1a\u8fdb\u884c\u5931\u8d25\u7d2f\u8ba1\uff0c<code>\u9759\u9ed8\u65f6\u95f4 (fails_timeout)</code> \u4e5f\u540c\u65f6\u5931\u6548\u3002</p> <p>\u5408\u7406\u8bbe\u7f6e\u6700\u5927\u5931\u8d25\u6b21\u6570\u548c\u9759\u9ed8\u65f6\u95f4\uff0c\u6709\u52a9\u4e8e\u5728\u6e90\u7ad9\u5f02\u5e38\u7684\u60c5\u51b5\u4e0b\u6700\u5927\u7a0b\u5ea6\u51cf\u5c11\u5bf9\u7ebf\u4e0a\u8bf7\u6c42\u7684\u5f71\u54cd\u3002\u8fd9\u91cc\u5b9e\u9645\u4e0a\u8ddf Nginx \u6838\u5fc3\u7684 upstream \u6a21\u5757\u5b9e\u73b0\u673a\u5236\u7c7b\u4f3c\uff0c\u8fdb\u4e00\u6b65\u4e86\u89e3\u53ef\u53c2\u8003 \u94fe\u63a5 \u3002</p> <p>\u521b\u5efa\u64cd\u4f5c\u5458</p> <p>\u5f53\u60a8\u5728\u521b\u5efa\u670d\u52a1\u7684\u8fc7\u7a0b\u4e2d\uff0c\u6e90\u7ad9\u7c7b\u578b\u9009\u62e9\u4e3a <code>\u53c8\u62cd\u4e91</code> \u65f6 \uff0c\u5219\u521b\u5efa\u548c\u6388\u6743\u64cd\u4f5c\u5458\u662f\u4e00\u4e2a\u5fc5\u987b\u7684\u6b65\u9aa4\u3002\u60a8\u53ef\u4ee5\u521b\u5efa\u4e00\u5230\u591a\u4e2a\u64cd\u4f5c\u5458\uff0c\u6ee1\u8db3\u4e0d\u540c\u7684\u7ba1\u7406\u9700\u6c42\uff0c\u53ef\u7528\u4e8e\u5bf9\u5b58\u50a8\u5728\u53c8\u62cd\u4e91\u7684\u8d44\u6e90\u8fdb\u884c API \u4e0a\u4f20\u3001\u5220\u9664\u65f6\u7684\u8ba4\u8bc1\u6388\u6743\u548c FTP \u767b\u5f55\u7b49\u3002</p> <p>\u914d\u7f6e\u5f15\u5bfc</p> <p>\u60a8\u53ef\u4ee5\u9009\u62e9\u65b0\u521b\u5efa\u4e00\u4e2a\u64cd\u4f5c\u5458\uff0c\u4e5f\u53ef\u4ee5\u6388\u6743\u5df2\u6709\u64cd\u4f5c\u5458\uff0c\u5e76\u4e14\u53ef\u4ee5\u9488\u5bf9\u6743\u9650\u8fdb\u884c\u8bbe\u7f6e\uff0c\u5305\u62ec\u53ef\u8bfb\u53d6\u3001\u53ef\u5199\u5165\u3001\u53ef\u5220\u9664\u3002\u914d\u7f6e\u754c\u9762\u5982\u4e0b\u56fe\u6240\u793a\uff1a</p> <p></p> <p>\u4f60\u4e5f\u53ef\u4ee5\u5728\u7ba1\u7406\u540e\u53f0\u53f3\u4e0a\u89d2\u7684\u5e10\u53f7\u4e0b\u62c9\u83dc\u5355\u4e2d\u9009\u62e9 <code>\u8d26\u6237\u7ba1\u7406\uff0d&gt; \u64cd\u4f5c\u5458\u7ba1\u7406 -&gt; \u7f16\u8f91</code> \u8fdb\u884c\u8bbe\u7f6e\u3002</p> <p>\u57df\u540d\u7ed1\u5b9a</p> <p>\u9488\u5bf9\u4e00\u4e2a CDN \u670d\u52a1\uff0c\u5047\u5982\u56de\u6e90\u5730\u5740\u76f8\u540c\uff0c\u53ef\u4ee5\u7ed1\u5b9a\u591a\u4e2a\u81ea\u5b9a\u4e49\u57df\u540d( \u76ee\u524d\u6700\u591a\u53ef\u7ed1\u5b9a 10 \u4e2a\u57df\u540d )\u3002\u7279\u522b\u5730\uff0c\u9700\u8981\u786e\u4fdd\u8be5\u57df\u540d\u5df2\u7ecf\u5907\u6848\u6210\u529f\uff0c\u5426\u5219\u65e0\u6cd5\u901a\u8fc7\u57df\u540d\u7ed1\u5b9a\u5ba1\u6838\u3002\u53e6\u5916\uff0c\u5ba1\u6838\u6210\u529f\u540e\u4f1a\u4ee5\u90ae\u4ef6\u5f62\u5f0f\u8fdb\u884c\u901a\u77e5\u3002</p> <p>\u914d\u7f6e\u5f15\u5bfc</p> <p>1.\u8fdb\u5165\u529f\u80fd\u914d\u7f6e\u754c\u9762\uff0c\u9009\u62e9 <code>\u52a0\u901f\u57df\u540d</code> \u6a21\u5757\uff0c\u70b9\u51fb <code>\u57df\u540d\u7ed1\u5b9a</code> \u6309\u94ae\uff0c\u6dfb\u52a0\u57df\u540d\u7ed1\u5b9a\u3002</p> <p></p> <p>2.\u9664\u5e38\u89c4\u5f62\u5f0f\u7684\u57df\u540d\u5916\uff08\u5305\u62ec\u9876\u7ea7\u57df\u540d\uff09\uff0c\u6211\u4eec\u8fd8\u652f\u6301\u6cdb\u57df\u540d\u7ed1\u5b9a\uff0c\u6bd4\u5982 <code>*.yourdomain.com</code>\uff1b\u7279\u522b\u5730\uff0c\u5176\u4e2d <code>*</code> \u6700\u591a\u652f\u6301\u5339\u914d     4 \u5c42\uff1a</p> <pre><code>[v] *.yourdomain.com =&gt; foo.yourdomain.com\n[v] *.yourdomain.com =&gt; bar.yourdomain.com\n[v] *.yourdomain.com =&gt; foo.bar.yourdomain.com\n[v] *.yourdomain.com =&gt; foo.bar.baz.yourdomain.com\n[v] *.yourdomain.com =&gt; foo.bar.baz.qux.yourdomain.com\n[x] *.yourdomain.com =&gt; foo.bar.baz.qux.quxx.yourdomain.com\n\n[v] *.bar.yourdomain.com =&gt; foo.bar.yourdomain.com\n[v] *.bar.yourdomain.com =&gt; baz.foo.bar.yourdomain.com\n[x] *.bar.yourdomain.com =&gt; foo.bar.baz.yourdomain.com\n</code></pre> <p>3.\u6dfb\u52a0\u57df\u540d\u7ed1\u5b9a\u540e\uff0c\u9700\u8981\u5230\u57df\u540d\u670d\u52a1\u5546\u7684 DNS \u89e3\u6790\u7ba1\u7406\u4e2d\uff0c\u5c06\u57df\u540d\u7684 CNAME \u89e3\u6790\u5230 <code>&lt;bucket&gt;.b0.aicdn.com</code>\u3002</p> <p>\u7b2c\u4e09\u6b65\uff1a\u67e5\u770b\u670d\u52a1\u72b6\u6001</p> <p>\u4ee5\u4e0a\u6b65\u9aa4\u90fd\u914d\u7f6e\u5b8c\u6210\u4e4b\u540e\uff0c\u9700\u8981\u67e5\u770b\u6240\u521b\u5efa\u7684\u670d\u52a1\u4ee5\u53ca\u7ed1\u5b9a\u7684\u57df\u540d\u662f\u5426\u5904\u4e8e\u6b63\u5e38\u72b6\u6001\uff0c\u5426\u5219\u65e0\u6cd5\u6b63\u5e38\u63d0\u4f9b\u670d\u52a1\u3002</p> <p>\u914d\u7f6e\u5f15\u5bfc</p> <p>1.\u9996\u5148\u8fdb\u5165\u670d\u52a1\u7ba1\u7406\u5217\u8868\uff0c\u786e\u4fdd\u6240\u9009\u670d\u52a1\u5904\u4e8e <code>\u670d\u52a1\u4e2d</code> \u72b6\u6001\uff0c\u5982\u4e0b\u56fe\u6240\u793a\uff1a</p> <p></p> <p>2.\u9009\u62e9\u76f8\u5e94\u670d\u52a1\uff0c\u5728\u7ba1\u7406\u754c\u9762\uff0c\u70b9\u51fb <code>\u914d\u7f6e</code> \u6309\u94ae\u8fdb\u5165 <code>\u52a0\u901f\u57df\u540d</code> \u9009\u9879\uff0c\u67e5\u770b\u7ed1\u5b9a\u7684\u57df\u540d\u662f\u5426\u662f <code>\u6b63\u5e38</code> \u72b6\u6001\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff1a</p> <p></p>"},{"location":"cdn/basic/#_2","title":"\u7f13\u5b58\u914d\u7f6e","text":"<p>\u7f13\u5b58\u914d\u7f6e\u662f\u6307\u53c8\u62cd\u4e91 CDN \u52a0\u901f\u8282\u70b9\uff08\u5305\u62ec\u8fb9\u7f18\u8282\u70b9\u548c\u4e2d\u5fc3\u8282\u70b9\uff09\u5728\u7f13\u5b58\u60a8\u7684\u8d44\u6e90\u6587\u4ef6\u65f6\u9075\u5faa\u7684\u4e00\u5957\u8fc7\u671f\u89c4\u5219\u3002\u5f53\u8d44\u6e90\u6587\u4ef6\u5904\u4e8e\u8fc7\u671f\u72b6\u6001\u65f6\uff0c\u6b64\u65f6\u7528\u6237\u8bf7\u6c42\u4f1a\u7531\u8282\u70b9\u53d1\u9001\u81f3\u6e90\u7ad9\uff0c\u91cd\u65b0\u83b7\u53d6\u8d44\u6e90\u5185\u5bb9\u5e76\u7f13\u5b58\u81f3\u8282\u70b9\uff0c\u540c\u65f6\u8fd4\u56de\u7ed9\u6700\u7ec8\u7528\u6237\uff1b\u5f53\u8d44\u6e90\u5185\u5bb9\u5904\u4e8e\u672a\u8fc7\u671f\u72b6\u6001\u65f6\uff0c\u60a8\u7684\u7528\u6237\u8bf7\u6c42\u5230\u8fbe\u8282\u70b9\u540e\uff0c\u4f1a\u7531\u8282\u70b9\u76f4\u63a5\u54cd\u5e94\u6700\u7ec8\u7528\u6237\u7684\u8bf7\u6c42\u3002\u5408\u7406\u7684\u914d\u7f6e\u8d44\u6e90\u6587\u4ef6\u7f13\u5b58\u65f6\u95f4\uff0c\u80fd\u591f\u6709\u6548\u7684\u63d0\u5347\u7f13\u5b58\u547d\u4e2d\u7387\uff0c\u964d\u4f4e\u56de\u6e90\u7387\uff0c\u8282\u7701\u60a8\u7684\u6e90\u7ad9\u5e26\u5bbd\u3002</p> <p>\u914d\u7f6e\u5f15\u5bfc</p> <p>\u767b\u5f55 \u53c8\u62cd\u4e91\u7ba1\u7406\u63a7\u5236\u53f0\uff0c\u9009\u62e9\u9700\u8981\u914d\u7f6e\u7684\u670d\u52a1\uff0c\u4f9d\u6b21\u8fdb\u5165\uff1a\u670d\u52a1 &gt; \u529f\u80fd\u914d\u7f6e &gt; \u57fa\u7840\u914d\u7f6e &gt; \u7f13\u5b58\u914d\u7f6e\uff0c\u70b9\u51fb\u7ba1\u7406\u5373\u53ef\u5f00\u59cb\u914d\u7f6e\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff1a</p> <p></p> <p>\u81ea\u5b9a\u4e49\u914d\u7f6e</p> <p>\u60a8\u53ef\u4ee5\u6839\u636e\u81ea\u8eab\u4e1a\u52a1\u9700\u6c42\uff0c\u5728\u914d\u7f6e\u754c\u9762\u7684\u53f3\u4e0a\u89d2\uff0c\u70b9\u51fb\u53f3\u4e0a\u89d2\u7684 <code>\u6dfb\u52a0</code> \u6309\u94ae\u8fdb\u884c\u8d44\u6e90\u6587\u4ef6\u7f13\u5b58\u65f6\u95f4\u7684\u914d\u7f6e\uff0cCDN \u652f\u6301\u4e09\u79cd\u7ef4\u5ea6\u7684\u7f13\u5b58\u65f6\u95f4\u914d\u7f6e\u89c4\u5219\uff1a</p> <p>\u6839\u636e\u6587\u4ef6\u7c7b\u578b\u8bbe\u7f6e\u7f13\u5b58\u7b56\u7565</p> <p>\u60a8\u53ef\u4ee5\u6839\u636e\u6a21\u677f\u586b\u5145\u6587\u4ef6\u7c7b\u578b\u540e\u7f00\uff0c\u6839\u636e\u6587\u4ef6\u7c7b\u578b\u6765\u8bbe\u7f6e\u7f13\u5b58\u65f6\u95f4\uff0c\u5982\u4e0b\u793a\u4f8b\u6240\u793a\uff1a</p> <p>/*.(txt,doc,wri,docs)   \u7f13\u5b58\u65f6\u95f4 1 \u5929\uff1b</p> <p>\u8bbe\u7f6e\u5b8c\u6210\u540e\uff0c\u57df\u540d\u4e0b\u6240\u6709\u5339\u914d <code>.txt .doc .wri .docs</code> \u7684\u6587\u672c\u8d44\u6e90\uff0c\u5728\u8282\u70b9\u7684\u7f13\u5b58\u6709\u6548\u65f6\u95f4\u5747\u4e3a 1 \u5929\u3002</p> <p>\u6839\u636e\u6587\u4ef6\u76ee\u5f55\u8bbe\u7f6e\u7f13\u5b58\u7b56\u7565</p> <p>\u60a8\u53ef\u4ee5\u81ea\u5b9a\u4e49\u914d\u7f6e\u6587\u4ef6\u8def\u5f84\uff0c\u6839\u636e\u6587\u4ef6\u8def\u5f84\u6765\u8bbe\u7f6e\u7f13\u5b58\u65f6\u95f4\uff0c\u5982\u4e0b\u793a\u4f8b\u6240\u793a\uff1a</p> <p>/dir/*   \u7f13\u5b58\u65f6\u95f4 12 \u5c0f\u65f6</p> <p>\u5168\u5c40\u914d\u7f6e</p> <p>\u5168\u5c40\u7f13\u5b58\u7b56\u7565\u9002\u5408\u6e90\u7ad9\u5168\u662f\u9759\u6001\u8d44\u6e90\u7684\u5ba2\u6237\uff0c\u53ef\u4ee5\u9488\u5bf9\u8be5\u670d\u52a1\u4e00\u952e\u5f00\u542f\u914d\u7f6e\u7f13\u5b58\u65f6\u95f4\uff0c\u5f00\u542f\u8bf7\u8c28\u614e\u3002\u8be6\u7ec6\u914d\u7f6e\u53ef\u53c2\u7167\u5982\u4e0b\u56fe\u6240\u793a\uff1a</p> <p></p> <p>\u8bbe\u7f6e\u5b8c\u6210\u540e\uff0c\u8be5\u670d\u52a1\u4e0b\u6240\u6709\u57df\u540d\u5339\u914d\u7684\u8d44\u6e90\uff0c\u5728\u8282\u70b9\u7684\u7f13\u5b58\u6709\u6548\u65f6\u95f4\u5747\u4e3a 7 \u5929\u3002</p> <p>\u6ce8\u610f\u4e8b\u9879\uff1a</p> <p>1.\u5168\u5c40\u7f13\u5b58\u5728\u81ea\u5b9a\u4e49\u7f13\u5b58\u914d\u7f6e\u91cc\u9762\u7684\u4f18\u5148\u7ea7\u662f\u6700\u4f4e\u7684\uff0c\u4e14\u4f18\u5148\u7ea7\u4e0d\u53ef\u8c03\u8282\uff0c\u5982\u4e0b\u56fe\u6240\u793a\uff1a</p> <p></p> <p>2.\u5168\u5c40\u7f13\u5b58\u8bbe\u7f6e\u6709\u4e00\u4e2a\u5355\u72ec\u7684\u5f00\u5173\uff0c\u9700\u8981\u5f00\u542f\u4e4b\u540e\uff0c\u624d\u53ef\u4ee5\u8fdb\u884c\u914d\u7f6e</p> <p>\u9ed8\u8ba4\u6a21\u677f</p> <p>\u7279\u522b\u5730\uff0c\u6211\u4eec\u9488\u5bf9\u81ea\u5b9a\u4e49\u7f13\u5b58\u914d\u7f6e\uff0c\u9ed8\u8ba4\u89c4\u5212\u4e86\u6a21\u677f\uff0c\u5e76\u4e14\u9884\u8bbe\u4e86\u7f13\u5b58\u65f6\u95f4\uff0c\u60a8\u53ef\u4ee5\u6839\u636e\u5177\u4f53\u60c5\u51b5\u8fdb\u884c\u4fee\u6539\u3002\u5177\u4f53\u6a21\u677f\u5982\u4e0b\uff1a</p> <pre><code>\u9996\u9875\uff1a/  \u7f13\u5b58 12 \u5c0f\u65f6\uff1b\n\u76ee\u5f55\u9875\uff1a/*/    \u7f13\u5b58 12 \u5c0f\u65f6\uff1b\n\u56fe\u7247\u6587\u4ef6\uff1a/*.(jpg,jpeg,png,bmp,gif,psd,ico,tga,imb,tiff)      \u7f13\u5b58 7 \u5929\uff1b\n\u6587\u672c\u6587\u4ef6\uff1a/*.(txt,doc,wri,docs,css,js,dot,xml,log,bat,csv)    \u7f13\u5b58 1 \u5929\uff1b\n\u97f3\u89c6\u9891\u6587\u4ef6\uff1a/*.(wav,mp3,wmv,rmi,aac,mp4,rmvb,mkv,avi,flv,swf,rm,mov,movie,qt)  \u7f13\u5b58  7 \u5929\uff1b\n\u4e0b\u8f7d\u7c7b\u6587\u4ef6\uff1a/*.(exe,ios,apk,ipa,pxl,sis,cab,deb,rar,zip,gzip,tar,7z,bzip2,dmg,gz,wim,tbz,tpz,z,jar)      \u7f13\u5b58 7 \u5929\uff1b\n</code></pre> <p>\u4e0d\u7f13\u5b58\u914d\u7f6e</p> <p>\u6839\u636e\u4e1a\u52a1\u60c5\u51b5\uff0c\u53ef\u4ee5\u9488\u5bf9\u4e00\u4e9b\u52a8\u6001\u8d44\u6e90\u6587\u4ef6\uff08 \u4f8b\u5982\uff1aphp\u3001jsp\u3001asp\u3001do\u3001cgi\u3001action\u3001json\u7b49\uff09\u5f3a\u5236\u914d\u7f6e\u4e0d\u7f13\u5b58\uff0c \u8be6\u7ec6\u914d\u7f6e\u53ef\u53c2\u7167\u5982\u4e0b\u6240\u793a\uff1a</p> <p></p> <p>/*.(asp,php,jsp,do,json)     \u914d\u7f6e\u4e0d\u7f13\u5b58</p> <p>\u9ed8\u8ba4\u7f13\u5b58\u7b56\u7565</p> <p>\u5728\u6ca1\u6709\u5339\u914d\u5230\u81ea\u5b9a\u4e49\u7f13\u5b58\u89c4\u5219\u4e14\u6e90\u7ad9\u4e5f\u6ca1\u6709\u8fd4\u56de\u4efb\u4f55\u6709\u6548\u7f13\u5b58\u5934\u7684\u60c5\u51b5\u4e0b\uff0c\u6211\u4eec\u7684\u9ed8\u8ba4\u914d\u7f6e\u7b56\u7565\u5982\u4e0b\uff1a</p> <p>\u9488\u5bf9\u9759\u6001\u8d44\u6e90\uff0c\u6240\u6709\u6b63\u5e38\u72b6\u6001\u7801\uff08\u5927\u4e8e\u7b49\u4e8e 200 \u5c0f\u4e8e 400\uff09\u5747\u7f13\u5b58 8  \u5929\u3002\u7279\u522b\u5730\uff0c301 \u54cd\u5e94\u7f13\u5b58 2 \u5c0f\u65f6\uff0c302 \u54cd\u5e94\u7f13\u5b58 20 \u5206\u949f</p> <p>\u9488\u5bf9\u52a8\u6001\u8d44\u6e90\uff0c\u7a0b\u5e8f\u4f1a\u81ea\u52a8\u8bc6\u522b\uff0c\u5219\u4e0d\u8fdb\u884c\u7f13\u5b58</p> <p>\u5bf9\u4e8e\u5176\u4ed6\u5927\u4e8e\u7b49\u4e8e 400 \u7684\u4e0d\u6b63\u5e38\u54cd\u5e94\uff0c\u5219\u4e0d\u8fdb\u884c\u7f13\u5b58</p> <p>\u7f13\u5b58\u4f18\u5148\u7ea7</p> <p>\u8bf7\u6839\u636e\u5177\u4f53\u7f13\u5b58\u4f18\u5148\u7ea7\u60c5\u51b5\u5408\u7406\u914d\u7f6e\u7f13\u5b58\u7b56\u7565\uff0c\u53c8\u62cd\u4e91 CDN \u52a0\u901f\u5e73\u53f0\u76ee\u524d\u7684\u7f13\u5b58\u4f18\u5148\u7ea7\u5982\u4e0b\uff1a</p> <p>\u4e0d\u7f13\u5b58\u914d\u7f6e\uff08\u540e\u53f0\u8bbe\u7f6e\uff09 &gt; \u81ea\u5b9a\u4e49\u7f13\u5b58\u914d\u7f6e\uff08\u540e\u53f0\u914d\u7f6e\uff09 &gt; \u6e90\u7ad9\u7f13\u5b58\u914d\u7f6e &gt; \u9ed8\u8ba4\u7f13\u5b58\u7b56\u7565\u3002</p> <p>\u6ce8\u610f\u4e8b\u9879\uff1a</p> <p>1.\u6e90\u7ad9\u7f13\u5b58\u914d\u7f6e\uff0c\u6307 Cache-Control \u548c Expires \u8bf7\u6c42\u5934\u7684\u8bbe\u7f6e</p> <p>2.\u4ee5\u4e0a\u7f13\u5b58\u914d\u7f6e\u4f18\u5148\u7ea7\u76ee\u524d\u4e0d\u652f\u6301\u987a\u5e8f\u8c03\u8282\uff0c\u540e\u7eed\u6211\u4eec\u4f1a\u8003\u8651\u652f\u6301</p> <p>\u7279\u522b\u58f0\u660e</p> <p>\u9488\u5bf9\u4f7f\u7528\u53c8\u62cd\u4e91\u5b58\u50a8\u670d\u52a1\u7684\u5ba2\u6237\uff0c\u6211\u4eec\u6682\u65f6\u4e0d\u652f\u6301\u7f13\u5b58\u914d\u7f6e\u7684\u81ea\u5b9a\u4e49\u8bbe\u7f6e\uff0c\u6211\u4eec\u9ed8\u8ba4\u7ed9\u51fa\u4e86\u4e00\u4e2a\u9ed8\u8ba4\u7684\u7f13\u5b58\u914d\u7f6e\u89c4\u5219\uff0c\u5177\u4f53\u5982\u4e0b\uff1a</p> <p>\u5bf9\u4e8e\u6b63\u5e38\u7684\u72b6\u6001\u7801\uff08\u5927\u4e8e\u7b49\u4e8e 200 \u5c0f\u4e8e 400\uff09\uff1a8 \u5929</p> <p>\u5bf9\u4e8e\u5176\u4ed6\u5927\u4e8e\u7b49\u4e8e 400 \u7684\u4e0d\u6b63\u5e38\u54cd\u5e94\u7f13\u5b58 5 \u5206\u949f</p> <p>\u52a8\u9759\u81ea\u52a8\u5206\u79bb</p> <p>\u9488\u5bf9 <code>\u81ea\u4e3b\u6e90</code> \u7684 CDN \u670d\u52a1\u800c\u8a00\uff0c\u5f53\u6ca1\u6709\u5339\u914d\u5230\u81ea\u5b9a\u4e49\u7f13\u5b58\u89c4\u5219\u4e14\u6e90\u7ad9\u4e5f\u6ca1\u6709\u8fd4\u56de\u4efb\u4f55\u6709\u6548\u7684\u7f13\u5b58\u5934\u65f6\uff0c\u6211\u4eec\u5c31\u4f1a\u5bf9\u56de\u6e90\u5185\u5bb9\u8fdb\u884c\u52a8\u9759\u8bc6\u522b\u3002\u7279\u522b\u5730\uff0c\u6211\u4eec\u4f1a\u6839\u636e\u54cd\u5e94\u5934\u4e2d\u7684 <code>Content-Type</code> \u5b57\u6bb5\u548c URL \u4e2d\u7684\u6587\u4ef6\u540e\u7f00\u540d\u6765\u5224\u65ad\u662f\u5426\u662f\u9759\u6001\u5185\u5bb9\uff0c\u5176\u4e2d <code>Content-Type</code> \u5339\u914d\u4f18\u5148\u7ea7\u9ad8\u4e8e\u6587\u4ef6\u540e\u7f00\u540d\u3002</p> <p>\u53c2\u8003\u5217\u8868</p> <p>\u4ee5\u4e0b\u662f\u6211\u4eec\u7ef4\u62a4\u7684\u4e00\u4efd <code>Content-Type</code> \u548c\u6587\u4ef6\u540e\u7f00\u540d\u5217\u8868\uff0c\u82e5\u6ee1\u8db3\u5339\u914d\u6211\u4eec\u5c31\u8ba4\u4e3a\u662f\u9759\u6001\u5185\u5bb9\uff1a</p> <p>Content-Type \u5217\u8868</p> <pre><code>text/css\ntext/javascript\napplication/javascript\napplication/x-javascript\n\nimage/gif\nimage/png\nimage/jpeg\nimage/webp\nimage/tiff\nimage/x-icon\nimage/x-ms-bmp\nimage/svg+xml\n\napplication/font-woff\napplication/java-archive\napplication/msword\napplication/pdf\napplication/postscript\napplication/zip\napplication/octet-stream\n\napplication/vnd.openxmlformats-officedocument.wordprocessingml.document\napplication/vnd.openxmlformats-officedocument.spreadsheetml.sheet\napplication/vnd.openxmlformats-officedocument.presentationml.presentation\n\naudio/mpeg\naudio/ogg\naudio/x-m4a\n\nvideo/mp4\nvideo/x-flv\nvideo/x-m4v\n</code></pre> <p>\u6587\u4ef6\u540e\u7f00\u540d\u5217\u8868</p> css js jpg jpeg gif ico png bmp pict csv doc pdf pls ppt tif tiff eps ejs swf midi mida ttf eot woff otf svg svgz webp docx xlsx xls pptx ps class jar bz2 bzip exe flv gzip rar rtf tgz gz txt zip mp3 mp4 ogg m4a m4v apk"},{"location":"cdn/basic/#_3","title":"\u7f13\u5b58\u5237\u65b0","text":"<p>\u4e0a\u4e00\u4e2a\u7ae0\u8282\u6211\u4eec\u4ecb\u7ecd\u4e86\u7f13\u5b58\u914d\u7f6e\uff0c\u5f53 CDN \u7684\u8d44\u6e90\u6587\u4ef6\u7f13\u5b58\u8fc7\u671f\u4e4b\u540e\u4f1a\u56de\u6e90\u83b7\u53d6\u6587\u4ef6\u5e76\u7f13\u5b58\uff0c\u4f46\u662f\u8fd9\u662f\u4e00\u4e2a\u88ab\u52a8\u66f4\u65b0\u7684\u8fc7\u7a0b\uff0c\u8d44\u6e90\u66f4\u65b0\u53d7\u9650\u4e8e\u7f13\u5b58\u8fc7\u671f\u65f6\u95f4\u3002\u5f53\u6e90\u7ad9\u8d44\u6e90\u66f4\u65b0\u4e4b\u540e\u9700\u8981\u5feb\u901f\u56de\u6e90\u4e0b\u53d1\u5230 CDN \u8282\u70b9\u65f6\uff0c\u53ef\u4ee5\u4f7f\u7528\u7f13\u5b58\u5237\u65b0\u529f\u80fd\u6765\u5b9e\u73b0\uff0c\u8fd9\u662f\u4e00\u79cd\u4e3b\u52a8\u66f4\u65b0\u7684\u65b9\u5f0f\u3002</p> <p>\u914d\u7f6e\u5f15\u5bfc</p> <p>\u767b\u5f55 \u53c8\u62cd\u4e91\u7ba1\u7406\u63a7\u5236\u53f0\uff0c\u8fdb\u5165 <code>\u5237\u65b0</code> \u680f\u76ee\uff0c\u60a8\u53ef\u4ee5\u9009\u62e9 <code>URL \u5237\u65b0</code>\u3001<code>\u89c4\u5219\u5237\u65b0</code>\u6765\u5f3a\u5236\u56de\u6e90\u66f4\u65b0\u6587\u4ef6\u53ca\u76ee\u5f55\u3002\u60a8\u4e5f\u53ef\u4ee5\u5728 <code>\u64cd\u4f5c\u8bb0\u5f55</code> \u9009\u9879\u67e5\u8be2\u5237\u65b0\u8fdb\u5ea6\u53ca\u76f8\u5173\u72b6\u6001\u3002</p> <p>URL \u5237\u65b0</p> <p>\u5f53\u6e90\u7ad9\u6709\u5c11\u91cf\u6587\u4ef6\u66f4\u65b0\u65f6\uff0c\u53ef\u4ee5\u4f7f\u7528 <code>URL \u5237\u65b0</code> \u6765\u4e3b\u52a8\u5220\u9664 CDN \u8282\u70b9\u4e0a\u7684\u8d44\u6e90\u6587\u4ef6\u3002\u65b0\u7684\u8bf7\u6c42\u8fdb\u6765\u65f6\uff0cCDN \u8282\u70b9\u4f1a\u56de\u6e90\u83b7\u53d6\u6587\u4ef6\u5e76\u5c06\u65b0\u7684\u8d44\u6e90\u6587\u4ef6\u7f13\u5b58\u81f3 CDN \u8282\u70b9\uff0c\u6240\u4ee5\u8fd9\u662f\u4e00\u4e2a\u4e3b\u52a8\u66f4\u65b0\u7684\u8fc7\u7a0b\u3002\u64cd\u4f5c\u754c\u9762\u5982\u4e0b\u56fe\u6240\u793a\uff1a</p> <p></p> <p>\u6ce8\u610f\u4e8b\u9879\uff1a</p> <p>1.\u6bcf\u884c\u4e00\u4e2aURL\u5730\u5740\uff0c\u6bcf\u4e2a URL \u5730\u5740\u4ee5 http://\u6216https://\u5f00\u5934\uff0c\u4f8b\u5982\uff1a<code>http://example.com/image/test.jpg</code></p> <p>2.\u6bcf\u6b21\u8f93\u5165\u4e0d\u8d85\u8fc7 50 \u4e2a\uff0c\u5237\u65b0\u4efb\u52a1\u5168\u7f51\u751f\u6548\u65f6\u95f4\u5927\u7ea6 5 \u5230 10 \u5206\u949f</p> <p>\u89c4\u5219\u5237\u65b0</p> <p>\u5f53\u6e90\u7ad9\u6709\u9488\u5bf9\u8d44\u6e90\u8fdb\u884c\u6279\u91cf\u66f4\u65b0\u65f6\uff0c\u53ef\u4ee5\u901a\u8fc7 <code>\u89c4\u5219\u5237\u65b0</code> \u6765\u5237\u65b0\u8282\u70b9\u7f13\u5b58\u6587\u4ef6\u3002\u5b9e\u9645\u4e0a\uff0c\u89c4\u5219\u5237\u65b0\u5e76\u6ca1\u6709\u5220\u9664\u8282\u70b9\u8d44\u6e90\u6587\u4ef6\uff0c\u89c4\u5219\u4e00\u65e6\u751f\u6548\u4e4b\u540e\uff0c\u7f13\u5b58\u5728 CDN \u8282\u70b9\u7684\u6587\u4ef6\u4f1a\u88ab\u81f4\u8fc7\u671f\uff0c\u65b0\u7684\u8bf7\u6c42\u4f1a\u56de\u6e90\u6821\u9a8c\u4e00\u6b21\uff0c\u5982\u679c\u6e90\u7ad9\u6587\u4ef6\u6709\u66f4\u65b0\uff0c\u5219\u5c06\u65b0\u7684\u6587\u4ef6\u54cd\u5e94\u7ed9\u6700\u7ec8\u7528\u6237\u5e76\u66ff\u6362\u8282\u70b9\u4e0a\u7684\u65e7\u6587\u4ef6\u3002\u64cd\u4f5c\u754c\u9762\u5982\u4e0b\u56fe\u6240\u793a\uff1a</p> <p></p> <p>\u89c4\u5219\u793a\u4f8b\uff1a</p> <pre><code>http://example.com/image/\uff0a\nhttp://example.com/image/\uff0a.jpg\nhttp://example.com/image/\uff0a!upyun\uff08 \u9002\u7528\u4e8e\u81ea\u5b9a\u4e49\u7f29\u7565\u56fe\u7248\u672c \uff09\n</code></pre> <p>\u6ce8\u610f\u4e8b\u9879\uff1a</p> <p>1.\u6bcf\u884c\u4e00\u4e2a\u8def\u5f84\u89c4\u5219\uff0c\u6bcf\u4e2a\u8def\u5f84\u89c4\u5219\u4ee5 http:// \u6216 https:// \u5f00\u5934\uff0c\u6bcf\u6b21\u8f93\u5165\u4e0d\u8d85\u8fc7 10    \u4e2a\uff0c\u4f8b\u5982\uff1a<code>http://example.com/image/\uff0a</code></p> <p>2.\u89c4\u5219\u5237\u65b0\u4e3b\u8981\u7528\u4e8e\u5bf9\u4f7f\u7528\u5ba2\u6237\u81ea\u4e3b\u6e90\u7ad9\u7684 CDN \u670d\u52a1\uff0c\u6267\u884c\u540e\u4f1a\u5728 10 \u5206\u949f\u5185\u751f\u6548</p> <p>\u7279\u522b\u58f0\u660e\uff1a</p> <p>1.\u5982\u60a8\u4f7f\u7528\u4e86\u53c8\u62cd\u4e91\u5bf9\u8c61\u5b58\u50a8\u670d\u52a1\u65f6\uff0c\u5982\u679c\u60a8\u901a\u8fc7 <code>\u89c4\u5219\u5237\u65b0</code> \u6765\u5237\u65b0\u7f13\u5b58\u7684\u8bdd\uff0c\u57fa\u4e8e\u5e73\u53f0\u4fdd\u62a4\uff0c<code>\u89c4\u5219\u5237\u65b0</code> \u751f\u6548\u65f6\u95f4\u662f 1 \u4e2a\u5c0f\u65f6\uff0c\u8bf7\u8c28\u614e\u64cd\u4f5c</p> <p>2.\u7279\u522b\u5730\uff0c\u4f7f\u7528\u4e86\u53c8\u62cd\u4e91\u5bf9\u8c61\u5b58\u50a8\u670d\u52a1\u65f6\uff0c\u5b58\u50a8\u4e2d\u8d44\u6e90\u66f4\u65b0\uff08\u66ff\u6362\u6216\u5220\u9664\uff09\u65f6\u4f1a\u81ea\u52a8\u89e6\u53d1 CDN \u8282\u70b9\u5237\u65b0\u7f13\u5b58\uff0c\u4f1a\u5728 5 \u5206\u949f\u5185\u751f\u6548\uff0c\u6240\u4ee5\u60a8\u65e0\u9700\u8fdb\u884c\u624b\u52a8\u5237\u65b0\u64cd\u4f5c</p> <p>URL \u9884\u70ed</p> <p>\u5f53\u6e90\u7ad9\u6709\u65b0\u589e\u65b0\u7684\u8d44\u6e90\u6587\u4ef6\u65f6\uff0c\u53ef\u5c06\u8fd9\u4e9b\u65b0\u6587\u4ef6\u63d0\u524d\u7f13\u5b58\u81f3 CDN \u8282\u70b9\uff0c\u6700\u7ec8\u7528\u6237\u7b2c\u4e00\u6b21\u8bbf\u95ee\u8fd9\u4e9b\u8d44\u6e90\u6587\u4ef6\u65f6\uff0c CDN \u8282\u70b9\u4e0d\u9700\u8981\u56de\u6e90\u7ad9\u8bf7\u6c42\u6587\u4ef6\u8d44\u6e90\u4e86\u3002\u4e00\u65b9\u9762\u53ef\u51cf\u5c11\u7528\u6237\u7a81\u53d1\u8bbf\u95ee\u65f6\u7684\u56de\u6e90\u91cf\uff0c\u53e6\u4e00\u65b9\u9762\u53ef\u4ee5\u52a0\u5feb\u8d44\u6e90\u6587\u4ef6\u7684\u9996\u6b21\u8bbf\u95ee\u901f\u5ea6\u3002\u64cd\u4f5c\u754c\u9762\u5982\u4e0b\u56fe\u6240\u793a\uff1a</p> <p></p> <p>\u6ce8\u610f\u4e8b\u9879\uff1a\u5efa\u8bae\u4e0d\u8981\u540c\u65f6\u9884\u70ed\u592a\u591a\u8d44\u6e90\u6587\u4ef6\uff0c\u5426\u5219\u4f1a\u5bf9\u6e90\u7ad9\u9020\u6210\u56de\u6e90\u538b\u529b</p> <p>\u64cd\u4f5c\u8bb0\u5f55</p> <p>\u8fdb\u884c <code>URL \u5237\u65b0</code> \u3001 <code>\u89c4\u5219\u5237\u65b0</code> \u3001<code>URL \u9884\u70ed</code> \u64cd\u4f5c\u4e4b\u540e\uff0c\u754c\u9762\u7a97\u53e3\u4f1a\u7acb\u9a6c\u8df3\u81f3\u64cd\u4f5c\u8bb0\u5f55\u754c\u9762\uff0c\u60a8\u53ef\u4ee5\u5b9e\u65f6\u67e5\u770b\u5f53\u524d\u64cd\u4f5c\u7684\u8fdb\u5ea6\u53cd\u9988\u53ca\u76f8\u5173\u72b6\u6001\u3002\u60a8\u4e5f\u53ef\u4ee5\u67e5\u770b\u5386\u53f2\u64cd\u4f5c\u8bb0\u5f55\uff0c\u6211\u4eec\u9ed8\u8ba4\u4fdd\u7559\u4e86 3 \u5929\u7684\u6570\u636e\u3002</p>"},{"location":"cdn/basic/#_4","title":"\u7edf\u8ba1\u5206\u6790","text":"<p>\u4e3a\u4e86\u66f4\u52a0\u900f\u660e\u7684\u5c55\u793a\u7ec8\u7aef\u7528\u6237\u8bbf\u95ee CDN \u4ee5\u53ca CDN \u56de\u6e90\u7684\u8bbf\u95ee\u60c5\u51b5\uff0c\u53c8\u62cd\u4e91 CDN \u670d\u52a1\u4ece\u5e26\u5bbd\u3001\u6d41\u91cf\u3001\u8bf7\u6c42\u6570\u7b49\u7ef4\u5ea6\u8fdb\u884c\u4e86\u6570\u636e\u7edf\u8ba1\u548c\u5206\u6790\uff0c\u65b9\u4fbf\u7528\u6237\u67e5\u770b\u548c\u5206\u6790\uff0c\u5177\u4f53\u529f\u80fd\u9879\u53c2\u89c1\u5982\u4e0b\u63cf\u8ff0\uff1a</p> <ul> <li> <p>\u5e26\u5bbd\u53ca\u6d41\u91cf\u67e5\u8be2\uff1a\u60a8\u53ef\u4ee5\u67e5\u8be2\u6307\u5b9a\u65f6\u95f4\u533a\u95f4\u3001\u57df\u540d\u3001\u670d\u52a1\u540d\u3001\u5730\u533a\u3001\u8fd0\u8425\u5546\u7b49\u6761\u4ef6\u4e0b\uff0c\u5e26\u5bbd\u53ca\u6d41\u91cf\u7684\u66f2\u7ebf\u56fe\uff0c\u4ee5\u53ca\u8fd0\u8425\u5546\u3001\u5730\u533a\u5206\u5e03\u53ca\u6392\u540d\u60c5\u51b5\uff1b</p> </li> <li> <p>\u8bf7\u6c42\u6570\u67e5\u8be2\uff1a\u60a8\u53ef\u4ee5\u67e5\u8be2\u6307\u5b9a\u65f6\u95f4\u533a\u95f4\u3001\u57df\u540d\u3001\u670d\u52a1\u540d\u3001\u5730\u533a\u3001\u8fd0\u8425\u5546\u7b49\u6761\u4ef6\u4e0b\uff0c\u7528\u6237\u8bf7\u6c42\u6570\u7684\u66f2\u7ebf\u56fe\uff1b</p> </li> <li> <p>\u56de\u6e90\u7edf\u8ba1\uff1a\u60a8\u53ef\u4ee5\u67e5\u770b\u6307\u5b9a\u65f6\u95f4\u533a\u95f4\u3001\u57df\u540d\u3001\u670d\u52a1\u540d\u7b49\u6761\u4ef6\u4e0b\uff0c\u5e26\u5bbd\u53ca\u6d41\u91cf\u66f2\u7ebf\u4ee5\u53ca\u6e90\u7ad9\u6d41\u91cf\u5206\u5e03\uff1b</p> </li> <li> <p>\u67e5\u8be2\u660e\u7ec6\u6570\u636e\uff1a\u60a8\u53ef\u4ee5\u67e5\u8be2\u6307\u5b9a\u65f6\u95f4\u533a\u95f4\u3001\u57df\u540d\u3001\u670d\u52a1\u540d\u3001\u5730\u533a\u3001\u8fd0\u8425\u5546\u7b49\u6761\u4ef6\u4e0b\uff0c\u67e5\u8be2\u6bcf\u65e5\u7684\u6d41\u91cf\u3001\u8bf7\u6c42\u91cf\u3001\u9759\u6001\u8bf7\u6c42\u3001\u52a8\u6001\u8bf7\u6c42\u3001HTTPS \u8bf7\u6c42\u3001\u5cf0\u503c\u5e26\u5bbd\u3001\u5cf0\u503c\u5e26\u5bbd\u65f6\u95f4\u7b49\u660e\u7ec6\u6570\u636e\u3002</p> </li> <li> <p>\u5bfc\u51fa Excel \u62a5\u8868\uff1a\u60a8\u53ef\u4ee5\u67e5\u8be2\u6307\u5b9a\u65f6\u95f4\u533a\u95f4\u3001\u57df\u540d\u3001\u670d\u52a1\u540d\u3001\u5730\u533a\u3001\u8fd0\u8425\u5546\u7b49\u6761\u4ef6\u4e0b\uff0c\u53ef\u4ee5\u5bfc\u51fa 5 \u5206\u949f\u7c92\u5ea6\u8be6\u7ec6\u7684\u8bf7\u6c42\u6570\u3001\u6d41\u91cf\u3001\u5e26\u5bbd\u3001\u5cf0\u503c\u5e26\u5bbd\u65f6\u95f4\u7b49\u8be6\u7ec6\u6570\u636e\u3002</p> </li> </ul> <p>\u914d\u7f6e\u5f15\u5bfc</p> <p>\u767b\u9646 \u53c8\u62cd\u4e91\u7ba1\u7406\u63a7\u5236\u53f0\uff0c\u5728\u7f6e\u9876\u83dc\u5355\u8fdb\u5165 <code>\u7edf\u8ba1</code> \u680f\u76ee\uff0c\u53ef\u67e5\u8be2\u5982\u4e0a\u7edf\u8ba1\u5206\u6790\u6570\u636e\uff1a</p> <p>\u67e5\u8be2\u793a\u4f8b\u4e00\uff1a\u67e5\u8be2\u5e26\u5bbd\u53ca\u8bf7\u6c42\u6570\u66f2\u7ebf\u56fe</p> <p></p> <p>\u67e5\u8be2\u793a\u4f8b\u4e8c\uff1a\u67e5\u8be2\u6d41\u91cf\u5730\u533a\u53ca\u8fd0\u8425\u5546\u5206\u5e03\u53ca\u6392\u884c</p> <p></p> <p>\u67e5\u8be2\u793a\u4f8b\u4e09\uff1a\u67e5\u8be2\u660e\u7ec6\u6570\u636e</p> <p></p> <p>\u67e5\u8be2\u793a\u4f8b\u56db\uff1a\u56de\u6e90\u5e26\u5bbd\u53ca\u8bf7\u6c42</p> <p></p> <p>\u76f8\u5173\u8bf4\u660e\uff1a</p> <p>1.\u4ee5\u5929\u4e3a\u5355\u4f4d\u67e5\u8be2\u6570\u636e\u65f6\uff0c\u60a8\u53ef\u4ee5\u67e5\u8be2 5 \u5206\u949f\u65f6\u95f4\u7c92\u5ea6\u7684\u6570\u636e</p> <p>2.\u65f6\u95f4\u533a\u95f4\u4e3a\u5927\u4e8e\u7b49\u4e8e 2 \u5929\u65f6\uff0c\u60a8\u53ef\u4ee5\u67e5\u8be2 1 \u5c0f\u65f6\u65f6\u95f4\u7c92\u5ea6\u7684\u6570\u636e</p>"},{"location":"cdn/basic/#_5","title":"\u6027\u80fd\u76d1\u63a7","text":"<p>\u901a\u8fc7\u6027\u80fd\u76d1\u63a7\uff0c\u53ef\u4ee5\u7b80\u5355\u3001\u76f4\u89c2\u5730\u4e86\u89e3\u5230 CDN \u670d\u52a1\u8d28\u91cf\u60c5\u51b5\uff0c\u53ca\u65f6\u53d1\u73b0\u548c\u5b9a\u4f4d\u95ee\u9898\uff0c\u5e76\u534f\u52a9\u89e3\u51b3\u95ee\u9898\u3002\u5728\u754c\u9762\u7684\u4e3b\u7a97\u53e3\u4e2d\uff0c\u60a8\u53ef\u4ee5\u67e5\u8be2\u6307\u5b9a\u65f6\u95f4\u533a\u95f4\u3001\u57df\u540d\u3001\u670d\u52a1\u540d\u3001\u5730\u533a\u3001\u8fd0\u8425\u5546\u7b49\u6761\u4ef6\u4e0b\uff0c\u5bf9\u5e94\u670d\u52a1\u7684\u5065\u5eb7\u5ea6\u3001\u7f13\u5b58\u547d\u4e2d\u7387\u3001\u5e73\u5747\u4e0b\u8f7d\u901f\u5ea6\u7b49\u6570\u636e\u3002\u5177\u4f53\u529f\u80fd\u9879\u63cf\u8ff0\u5982\u4e0b\uff1a</p> <ul> <li> <p>\u5065\u5eb7\u5ea6\uff1a\u7edf\u8ba1\u6240\u6709\u8bf7\u6c42\u7684 HTTP \u72b6\u6001\u7801\uff0c\u8ba1\u7b97 2xx \u548c 3xx \u8bf7\u6c42\u6b21\u6570\u6240\u5360\u7684\u6bd4\u4f8b</p> </li> <li> <p>\u7f13\u5b58\u547d\u4e2d\u7387\uff1a\u7edf\u8ba1\u6240\u6709\u8bf7\u6c42\u6570\u4e2d\uff0c\u547d\u4e2d\u7f13\u5b58\u7684\u8bf7\u6c42\u6570\u6240\u5360\u7684\u6bd4\u4f8b</p> </li> <li> <p>\u5e73\u5747\u4e0b\u8f7d\u901f\u5ea6\uff1a\u53ef\u4ee5\u6839\u636e\u5730\u533a\u548c\u8fd0\u8425\u5546\u6765\u533a\u5206\u8d44\u6e90\u6587\u4ef6\u4e0b\u8f7d\u901f\u5ea6\u548c\u8bf7\u6c42\u8017\u65f6</p> </li> <li> <p>\u62e6\u622a\u653b\u51fb\u6b21\u6570\uff1a\u62e6\u622a\u7684\u8de8\u7ad9\u653b\u51fb\u3001SQL \u6ce8\u5165\u548c\u5176\u4ed6\u4ee3\u7801\u6267\u884c\u7b49\u591a\u79cd\u653b\u51fb\u7684\u6570\u91cf\uff08\u4ec5\u9650\u5f00\u542f WAF \u529f\u80fd\uff09</p> </li> </ul> <p>\u914d\u7f6e\u5f15\u5bfc</p> <p>\u767b\u9646 \u53c8\u62cd\u4e91\u7ba1\u7406\u63a7\u5236\u53f0\uff0c\u5728\u7f6e\u9876\u83dc\u5355\u8fdb\u5165 <code>\u76d1\u63a7</code> \u680f\u76ee\uff0c\u53ef\u67e5\u8be2\u5982\u4e0a\u6027\u80fd\u76d1\u6d4b\u6570\u636e\uff0c\u5982\u4e0b\u56fe\u6240\u793a\uff1a</p> <p></p> <p>\u67e5\u8be2\u793a\u4f8b\u4e00\uff1a\u670d\u52a1\u72b6\u51b5\u5386\u53f2\u6570\u636e\uff08\u5065\u5eb7\u5ea6\uff09</p> <p></p> <p>\u67e5\u8be2\u793a\u4f8b\u4e8c\uff1a\u5065\u5eb7\u5ea6\u8be6\u60c5\uff08\u56de\u6e90\u8bbf\u95ee\uff09</p> <p></p> <p>\u67e5\u8be2\u793a\u4f8b\u4e09\uff1a\u670d\u52a1\u72b6\u51b5\u5386\u53f2\u6570\u636e\uff08\u7f13\u5b58\u547d\u4e2d\u7387\uff09</p> <p></p> <p>\u67e5\u8be2\u793a\u4f8b\u56db\uff1a\u5730\u533a\u5e73\u5747\u4e0b\u8f7d\u901f\u5ea6</p> <p></p>"},{"location":"cdn/basic/#_6","title":"\u65e5\u5fd7\u5206\u6790","text":"<p>\u53ef\u6839\u636e\u65f6\u95f4\u7c92\u5ea6\uff0c\u67e5\u770b\u76f8\u5e94\u8bbf\u95ee\u57df\u540d\u4e0b\u70ed\u95e8\u6587\u4ef6\u3001\u70ed\u95e8\u5ba2\u6237\u7aef\u3001\u70ed\u95e8\u5f15\u7528\u6587\u4ef6\u3001\u8d44\u6e90\u72b6\u6001\u7801\u3001\u6587\u4ef6\u5927\u5c0f\u3001\u70ed\u95e8 IP \u7b49\u7ef4\u5ea6 top1000 \u7684\u7edf\u8ba1\u5206\u6790\u6570\u636e\u3002\u65e5\u5fd7\u5206\u6790\u662f\u4ee5\u5929\u4e3a\u7c92\u5ea6\u8fdb\u884c\u5206\u6790\u7684\uff0c\u7b2c\u4e8c\u5929\u51cc\u6668\u4f1a\u5f00\u59cb\u8fdb\u884c\u65e5\u5fd7\u5206\u6790\u5de5\u4f5c\uff0c\u6b63\u5e38\u60c5\u51b5\u4e0b\uff0c\u7b2c\u4e8c\u5929\u65e9\u6668 09:00:00 \u4e4b\u524d\u4f1a\u7edf\u8ba1\u8ba1\u7b97\u5b8c\u6bd5\u3002</p> <p>\u914d\u7f6e\u5f15\u5bfc</p> <p>\u767b\u9646 \u53c8\u62cd\u4e91\u7ba1\u7406\u63a7\u5236\u53f0\uff0c\u5728\u7f6e\u9876\u83dc\u5355\u8fdb\u5165 <code>\u5de5\u5177\u7bb1</code>\uff0c\u627e\u5230 <code>\u65e5\u5fd7\u7ba1\u7406</code> \u680f\u76ee\uff0c\u9009\u62e9 <code>\u65e5\u5fd7\u5206\u6790</code> \u9009\u9879\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff1a</p> <p></p>"},{"location":"cdn/basic/#_7","title":"\u65e5\u5fd7\u4e0b\u8f7d","text":"<p>\u652f\u6301\u4ee5\u5c0f\u65f6\u7c92\u5ea6\u7684\u65e5\u5fd7\u4e0b\u8f7d\uff0c\u53ef\u6536\u96c6\u8be6\u7ec6\u7684\u7ec8\u7aef\u8bbf\u95ee\u65e5\u5fd7\uff1b\u65e5\u5fd7\u6587\u4ef6\u5ef6\u8fdf 1 \u5c0f\u65f6\uff0c\u53ef\u4ee5\u5728\u65e5\u5fd7\u7ba1\u7406\u6a21\u5757\u67e5\u8be2\u5230 1 \u5c0f\u65f6\u4e4b\u524d\u7684\u65e5\u5fd7\u6587\u4ef6\u3002</p> <p>\u65e5\u5fd7\u547d\u540d\u89c4\u5219\uff1a\u65f6\u95f4\u6bb5-\u8bbf\u95ee\u57df\u540d-\u968f\u673a\u6570.gz\uff0c\u65e5\u5fd7\u547d\u540d\u793a\u4f8b\uff1a</p> <p>10_00-impress-demo.b0.upaiyun.com-9571272666104702574.gz</p> <p>\u65e5\u5fd7\u6837\u4f8b</p> <pre><code>122.96.42.186 - - [13/Dec/2016:00:00:02 +0800] \"GET http://impress-demo.b0.upaiyun.com/kphone/icons/weihui_icon3.png?v=1.0 HTTP/1.1\" 200 1851 \"-\" \"Mozilla/4.0\" \"image/png\" 0 Hit \"C/200\" Static \"max-age=900\" 0.014 153.101.64.13\n</code></pre> <p>\u5b57\u6bb5\u8bf4\u660e</p> \u5e8f\u53f7 \u5b57\u6bb5 \u793a\u4f8b\u503c 1 \u5ba2\u6237\u7aef IP \u5730\u5740 122.96.42.186 2 \u5ba2\u6237\u7aef\u7528\u6237\u540d - 3 \u8bbf\u95ee\u65f6\u95f4\u4e0e\u65f6\u533a [13/Dec/2016:00:00:02 +0800] 4 \u5ba2\u6237\u7aef\u8bf7\u6c42\u65b9\u6cd5 GET 5 \u8bf7\u6c42\u534f\u8bae HTTP 6 \u00a0 \u00a0 \u00a0 \u8bbf\u95ee\u57df\u540d\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 impress-demo.b0.upaiyun.com \u00a0 7 \u5ba2\u6237\u7aef\u8bf7\u6c42 URI /kphone/icons/weihui_icon3.png 8\u00a0 \u00a0 \u00a0 \u8bf7\u6c42\u53c2\u6570\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0v=1.0  \u00a0 9\u00a0 \u8bf7\u6c42\u534f\u8bae\u7248\u672c\u4fe1\u606f \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 HTTP/1.1 10 \u54cd\u5e94\u72b6\u6001\u7801 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 200 \u00a0 11 \u00a0 \u00a0 \u53d1\u9001\u7ed9\u5ba2\u6237\u7aef\u7684\u5b57\u8282\u6570 1851 \u00a0 12 \u00a0 Referer \u8bf7\u6c42\u5934 \u00a0 \u00a0 - 13 \u00a0 User-Agent \u5934 Mozilla/4.0 14 \u00a0 \u5185\u5bb9\u7c7b\u578b image/png 15 \u00a0 \u8bf7\u6c42\u5185\u5bb9\u5927\u5c0f 0 16 \u00a0 \u7f13\u5b58\u547d\u4e2d\u72b6\u6001 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 Hit \u00a0 17 \u00a0 \u6e90\u7ad9\u7c7b\u578b (U: \u4e91\u5b58\u50a8 C\uff1a\u81ea\u4e3b\u6e90)/\u72b6\u6001\u7801 \u00a0 \u00a0 \u00a0 \u00a0 C/200 18 \u00a0 \u52a8\u6001\u8bf7\u6c42\u6807\u8bb0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 Static \u00a0 19 \u00a0 \u7f13\u5b58\u65f6\u95f4 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 max-age=900\u00a0 20\u00a0 \u00a0 \u8bf7\u6c42\u5904\u7406\u65f6\u95f4\uff08\u5355\u4f4ds\uff09 \u00a0 0.014 21 \u00a0 CDN \u8fb9\u7f18\u8282\u70b9 IP \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 153.101.64.13 <p>\u914d\u7f6e\u5f15\u5bfc</p> <p>\u767b\u9646 \u53c8\u62cd\u4e91\u7ba1\u7406\u63a7\u5236\u53f0\uff0c\u5728\u7f6e\u9876\u83dc\u5355\u8fdb\u5165 <code>\u5de5\u5177\u7bb1</code>\uff0c\u627e\u5230 <code>\u65e5\u5fd7\u7ba1\u7406</code> \u680f\u76ee\uff0c\u9009\u62e9 <code>\u65e5\u5fd7\u4e0b\u8f7d</code> \u9009\u9879\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff1a</p> <p></p> <p>\u5173\u4e8e\u65e5\u5fd7\u5206\u6790\u548c\u4e0b\u8f7d\u89c6\u9891\u6559\u7a0b\u8bf7\u70b9\u51fb \u65e5\u5fd7\u7ba1\u7406\u89c6\u9891\u6559\u7a0b\u3002</p> <p>\u5982\u6709\u7591\u95ee\u8bf7 \u8054\u7cfb\u6211\u4eec</p>"},{"location":"cdn/buy/","title":"\u8d2d\u4e70\u6307\u5357","text":""},{"location":"cdn/buy/#_1","title":"\u4ef7\u683c\u603b\u89c8","text":"<p>\u53c8\u62cd\u4e91 CDN \u4ef7\u683c\u5206\u4e3a\u4e24\u4e2a\u90e8\u5206\uff0c\u5206\u522b\u662f\u57fa\u7840\u670d\u52a1\u8d39\u7528\u548c\u589e\u503c\u670d\u52a1\u8bf7\u6c42\u8d39\u7528\u3002\u5176\u4e2d\u57fa\u7840\u670d\u52a1\u8d39\u7528\u5305\u62ec\u6309\u6d41\u91cf\u8ba1\u8d39\u548c\u6309\u5e26\u5bbd\u8ba1\u8d39\uff0c\u589e\u503c\u670d\u52a1\u5305\u62ec\u52a8\u6001\u8bf7\u6c42\u6570\u8ba1\u8d39\u548c HTTPS \u8bf7\u6c42\u6570\u8ba1\u8d39\u3002</p> <p>\u666e\u901a\u8ba1\u8d39\u65b9\u5f0f</p> <p>\u8be6\u7ec6\u4ecb\u7ecd\u53c2\u89c1\uff1a\u53c8\u62cd\u4e91\u8ba1\u8d39\u8bf4\u660e</p> <p>\u5728 CDN \u63a7\u5236\u53f0\u4e0a\uff0c\u9488\u5bf9\u5e38\u89c4\u7528\u6237\u76ee\u524d\u53ea\u652f\u6301\u6309\u6d41\u91cf\u8ba1\u8d39\uff0c\u6682\u65f6\u4e0d\u652f\u6301\u6309\u5e26\u5bbd\u8ba1\u8d39\uff0c\u6309\u5e26\u5bbd\u8ba1\u8d39\u8bf7\u53c2\u89c1\u3010\u5927\u5ba2\u6237\u8ba1\u8d39\u65b9\u5f0f\u3011\u3002\u5177\u4f53\u8ba1\u8d39\u8be6\u60c5\u65b9\u5f0f\uff0c\u53c2\u89c1\u5982\u4e0b\u8868\u683c\u6240\u793a\uff1a</p> <p>1.\u57fa\u7840\u670d\u52a1</p> <ul> <li>\u6309\u6d41\u91cf\u8ba1\u8d39</li> </ul> \u8ba1\u8d39\u9879 \u56fd\u5185\uff08\u5143/GB\uff09 \u00a0\u4e9a\u592a\uff08\u5143/GB\uff09 \u6b27\u7f8e\uff08\u5143/GB\uff09 \u00a0 \u6d41\u5165\u6d41\u91cf\u00a0 0 \u00a0 0 \u00a00 \u00a0 \u6d41\u51fa\u6d41\u91cf 0.29\u00a0 0.89 0.39\u00a0 <p>2.\u589e\u503c\u670d\u52a1</p> <ul> <li>\u52a8\u6001\u8bf7\u6c42\u8ba1\u8d39</li> </ul> \u8ba1\u8d39\u9879 \u56fd\u5185\uff08\u5143/\u5343\u6b21\uff09 \u00a0\u4e9a\u592a\uff08\u5143/\u5343\u6b21 \u6b27\u7f8e\uff08\u5143/\u5343\u6b21\uff09 \u9759\u6001\u8bf7\u6c42\u00a0 0 \u00a0 0 \u00a00 \u52a8\u6001\u8bf7\u6c42 0.02\u00a0 0.06 0.03 <ul> <li>HTTPS \u8bf7\u6c42\u8ba1\u8d39</li> </ul> \u8ba1\u8d39\u9879 \u56fd\u5185\uff08\u5143/\u4e07\u6b21\uff09 \u00a0\u4e9a\u592a\uff08\u5143/\u4e07\u6b21\uff09 \u6b27\u7f8e\uff08\u5143/\u4e07\u6b21\uff09 \u7ed1\u5b9a\u57df\u540d\u4e2a\u6570\u00a0 0 \u00a0 0 \u00a00 HTTPS \u8bf7\u6c42 0.05\u00a0 0.15 0.07 <p>\u5927\u5ba2\u6237\u8ba1\u8d39\u65b9\u5f0f</p> <p>\u82e5\u60a8\u5df2\u7ecf\u5728\u53c8\u62cd\u4e91\uff0c\u6216\u672a\u6765\u9884\u671f\u5728\u53c8\u62cd\u4e91\u7684\u6708\u6d88\u8017\u91d1\u989d\u5927\u4e8e 3 \u4e07\u5143\uff0c\u60a8\u53ef\u4ee5\u901a\u8fc7\u5546\u52a1\u6d3d\u8c08\u7684\u65b9\u5f0f\u83b7\u5f97\u66f4\u4f18\u60e0\u7684\u4ef7\u683c\u53ca\u6708\u7ed3\u7b49\u66f4\u52a0\u7075\u6d3b\u7684\u8ba1\u8d39\u65b9\u5f0f\u3002\u9488\u5bf9\u5927\u5ba2\u6237\uff0c\u53c8\u62cd\u4e91 CDN \u670d\u52a1 \u53ef\u4ee5\u9009\u62e9\u6309\u6708 95 \u8ba1\u8d39\u3001\u7b2c 4 \u5cf0\u503c\u8ba1\u8d39\uff0c\u8ba1\u8d39\u65b9\u5f0f\u9700\u8981\u72ec\u7acb\u914d\u7f6e\u3002\u5982\u9700\u5347\u7ea7\u4e3a\u5927\u5ba2\u6237\uff0c\u8bf7\u8054\u7cfb\u60a8\u7684\u5ba2\u6237\u7ecf\u7406\u3002</p> <ul> <li>\u6708 95 \u5e26\u5bbd\u8ba1\u8d39</li> </ul> <p>CDN \u6bcf 5 \u5206\u949f\u7edf\u8ba1\u4e00\u4e2a\u5e26\u5bbd\u5cf0\u503c\uff08\u5355\u4f4d\uff1aMbps\uff09\uff0c\u4e00\u4e2a\u6708\u6309 30 \u5929\u7b97\uff0c\u6709 288 \uff0a 30 \u4e2a\u70b9\uff0c\u6bcf\u4e00\u4e2a\u6709\u6548\u65e5\uff08\u4ea7\u751f\u6d88\u8017\uff09\u7684\u6240\u6709\u7edf\u8ba1\u70b9\u8fdb\u884c\u6392\u5e8f\uff0c\u628a\u6570\u503c\u6700\u9ad8\u7684 5% \u53bb\u6389\uff0c\u5269\u4e0b\u7684\u6700\u9ad8\u7684\u70b9\u5c31\u662f\u6708 95 \u5cf0\u503c\u8ba1\u8d39\u3002</p> <ul> <li>\u7b2c 4 \u5cf0\u503c\u8ba1\u8d39</li> </ul> <p>\u6bcf\u6708\u6309\u7b2c\u56db\u5cf0\u503c\u5e26\u5bbd\u8ba1\u8d39\u4ee5\u81ea\u7136\u6708\u4e3a\u8ba1\u8d39\u5468\u671f\uff0c\u4ee5\u65e5\u4e3a\u5355\u4f4d\u8fdb\u884c\u5cf0\u503c\u7531\u9ad8\u5230\u4f4e\u6392\u5e8f\uff0c\u53d6\u7b2c\u56db\u9ad8\u5cf0\u503c\u4e3a\u8be5\u81ea\u7136\u6708\u5e26\u5bbd\u503c\u8fdb\u884c\u8ba1\u8d39\u3002 </p> <ul> <li>\u6708\u6d41\u91cf\u8ba1\u8d39</li> </ul> <p>\u6708\u5ea6\u7d2f\u8ba1\u4f7f\u7528\u7684\u6240\u6709\u6d41\u91cf\u548c\uff0c\u6839\u636e\u5408\u540c\u4ef7\u683c\u8ba1\u7b97\u8d39\u7528\uff0c\u6d41\u91cf\u8ba1\u8d39\u5355\u4ef7\u8bf7\u53c2\u89c1\uff3b\u666e\u901a\u8ba1\u8d39\u65b9\u5f0f\uff3d\u91cc\u9762\u7684\u6d41\u91cf\u5355\u4ef7\u3002</p> <p>\u8be6\u7ec6\u62a5\u4ef7\u4ee5\u53ca\u8ba1\u8d39\u914d\u7f6e\uff0c\u8bf7\u54a8\u8be2\u60a8\u7684\u5ba2\u6237\u7ecf\u7406\u3002</p>"},{"location":"cdn/buy/#cdn","title":"CDN\u6d41\u91cf\u5305","text":"<p>\u6d41\u91cf\u5305\u8bf4\u660e</p> <p>\u91c7\u7528\u3010\u6d41\u91cf\u8ba1\u8d39\u3011\u6a21\u5f0f\u7684\u5ba2\u6237\uff0c\u53ef\u4ee5\u8d2d\u4e70\u6d41\u91cf\u5305\u8fdb\u884c\u62b5\u6263\u3002\u7cfb\u7edf\u5728\u8ba1\u8d39\u65f6\u4f1a\u4f18\u5148\u62b5\u6263\u6d41\u91cf\u5305\uff0c\u8d85\u51fa\u90e8\u5206\u518d\u7ee7\u7eed\u6309\u7167\u9636\u68af\u4ef7\u683c\u8fdb\u884c\u8ba1\u8d39\u3002\u6d41\u91cf\u5305\u89c4\u683c\u5982\u4e0b\u8868\u6240\u793a\uff1a</p> \u6d41\u91cf\u5305\u89c4\u683c \u4ef7\u683c\uff08\u5143/\u4e2a\uff09 \u6298\u6263\u6bd4\u4f8b \u6709\u6548\u671f 100GB \u00a0 20.00\u00a0 69\u6298 \u00a03\u4e2a\u6708 500GB \u00a0 100.00\u00a0 69\u6298 \u00a03\u4e2a\u6708 1TB 270.00 \u00a0 91\u6298 3\u4e2a\u6708 2TB\u00a0 540.00 91\u6298 \u00a03\u4e2a\u6708 5TB 1335.00\u00a0 90\u6298 3\u4e2a\u6708 10TB \u00a0 2670.00 90\u6298 \u00a03\u4e2a\u6708 <p>\u6d41\u91cf\u5305\u4f18\u60e0\u6d3b\u52a8\u706b\u70ed\u8fdb\u884c\u4e2d\uff0c\u70b9\u51fb\u8d2d\u4e70\u3002</p> <p>\u6298\u6263\u8bf4\u660e</p> <ul> <li> <p>\u6d41\u91cf\u5305\u8d2d\u4e70\u5f53\u65e5\u751f\u6548\uff0c\u666e\u901a\u6d41\u91cf\u5305\u7684\u6709\u6548\u671f\u4e3a\u81ea\u8d2d\u4e70\u65e5\u8d77 3 \u4e2a\u6708\uff0c\u6d41\u91cf\u4e00\u65e6\u8fc7\u671f\u5219\u65e0\u6cd5\u8fdb\u884c\u62b5\u6263\uff1b</p> </li> <li> <p>100GB\u3001500GB \u5c5e\u4e8e\u7279\u60e0\u6d41\u91cf\u5305\uff0c\u53ea\u80fd\u4e8c\u9009\u4e00\uff0c\u4e14\u5728\u6709\u6548\u671f\u4e09\u4e2a\u6708\u5185\u4ec5\u53ef\u8d2d\u4e70\u4e00\u6b21\uff1b</p> </li> </ul> <p>\u8d2d\u4e70\u6307\u5f15</p> <p>\u6d41\u91cf\u5305\u4f18\u60e0\u6d3b\u52a8\u706b\u70ed\u8fdb\u884c\u4e2d\uff0c\u53ef\u70b9\u51fb\u8d2d\u4e70\u3002</p> <p>\u7b2c\u4e00\u6b65\uff1a\u767b\u9646 CDN \u63a7\u5236\u53f0\uff0c\u8fdb\u5165\u300c\u8d39\u7528\u4e2d\u5fc3\u300d\u529f\u80fd\u6a21\u5757\uff0c\u9009\u62e9\u300c\u6d41\u91cf\u5305\u7ba1\u7406\u300d\u6a21\u5757\uff0c\u70b9\u51fb\u3010\u8d2d\u4e70\u6d41\u91cf\u5305\u3011\u6309\u94ae\u5373\u53ef\u5f00\u59cb\u8d2d\u4e70\uff0c\u5982\u622a\u56fe\u6240\u793a\uff1a</p> <p></p> <p>\u7b2c\u4e8c\u6b65\uff1a\u8fdb\u5165\u3010\u6d41\u91cf\u5305\u3011\u8d2d\u4e70\u754c\u9762\uff0c\u9009\u62e9\u9700\u8981\u8d2d\u4e70\u7684\u6d41\u91cf\u5305\u89c4\u683c\uff1a</p> <p></p> <p>\u7b2c\u4e09\u6b65\uff1a\u8fdb\u5165\u4ea7\u54c1\u8d2d\u4e70\u4fe1\u606f\u6838\u5bf9\u9875\u9762\uff0c\u70b9\u51fb\u3010\u786e\u8ba4\u8d2d\u4e70\u3011\u5373\u53ef\u3002</p> <p></p> <p>\u4f9d\u6b21\u8d70\u5b8c\u63a5\u4e0b\u6765\u7684\u8d2d\u4e70\u6d41\u7a0b\u5373\u53ef\u3002</p>"},{"location":"cdn/config/","title":"\u529f\u80fd\u914d\u7f6e","text":"<p>\u53c8\u62cd\u4e91 CDN \u670d\u52a1\u652f\u6301\u591a\u9879\u529f\u80fd\u81ea\u5b9a\u4e49\u914d\u7f6e\uff0c\u60a8\u53ef\u4ee5\u6839\u636e\u81ea\u8eab\u4e1a\u52a1\u9700\u8981\u8fdb\u884c\u8bbe\u7f6e\uff0c\u4f18\u5316\u60a8\u7684 CDN \u52a0\u901f\u6548\u679c\u6216\u914d\u5408\u5b9e\u73b0\u67d0\u4e9b\u4e1a\u52a1\u903b\u8f91\u3002</p>"},{"location":"cdn/config/#1","title":"1.\u57df\u540d\u7ba1\u7406","text":""},{"location":"cdn/config/#11","title":"1.1 \u57fa\u672c\u4fe1\u606f","text":"<p>\u529f\u80fd\u8bf4\u660e</p> <p>\u901a\u8fc7\u8be5\u6a21\u5757\uff0c\u53ef\u4ee5\u67e5\u770b\u670d\u52a1\u7684\u57fa\u672c\u4fe1\u606f\uff0c\u5305\u62ec\uff1a\u670d\u52a1\u540d\u79f0\u3001\u521b\u5efa\u65f6\u95f4\u3001\u670d\u52a1\u72b6\u6001\u3001\u5e94\u7528\u573a\u666f\u7b49\u76f8\u5173\u4fe1\u606f\u3002\u6b64\u5904\u53ef\u4ee5\u5feb\u901f\u83b7\u53d6\u670d\u52a1\u7684 CNAME \u5730\u5740\uff0c\u65b9\u4fbf\u8fdb\u884c CDN \u5207\u6362\u3002</p> <p>\u67e5\u770b\u5f15\u5bfc</p> <p>\u767b\u9646 CDN \u63a7\u5236\u53f0\uff0c\u8fdb\u5165\u300c\u57df\u540d\u7ba1\u7406\u300d\u529f\u80fd\u6a21\u5757\uff0c\u627e\u5230\u300c\u57fa\u672c\u4fe1\u606f\u300d\u4e00\u680f\uff0c\u5373\u53ef\u67e5\u8be2\u670d\u52a1\u57fa\u672c\u4fe1\u606f\uff0c\u5982\u4e0b\u56fe\u6240\u793a\uff1a</p> <p></p>"},{"location":"cdn/config/#12","title":"1.2 \u52a0\u901f\u57df\u540d","text":"<p>\u529f\u80fd\u8bf4\u660e</p> <p>\u5728\u540c\u4e00\u4e2a\u670d\u52a1\u4e0b\u9762\uff0c\u5982\u679c\u56de\u6e90\u5730\u5740\u76f8\u540c\uff08 \u4e5f\u5373\u5171\u7528\u540c\u4e00\u4e2a\u6e90\u7ad9 \uff09\uff0c\u6b64\u65f6\u53ef\u4ee5\u7ed1\u5b9a\u591a\u4e2a\u81ea\u6709\u57df\u540d\u3002\u9664\u5e38\u89c4\u5f62\u5f0f\u7684\u57df\u540d\u5916\uff0c\u8fd8\u652f\u6301\u7ed1\u5b9a\u591a\u4e2a\u6cdb\u57df\u540d\uff0c\u6bd4\u5982\uff1a*.yourdomain.com\u3002\u7279\u522b\u5730\uff0c\u5176\u4e2d * \u6700\u591a\u652f\u6301\u5339\u914d 4 \u5c42\uff1a</p> <pre><code>[\u221a] *.yourdomain.com =&gt; foo.yourdomain.com\n[\u221a] *.yourdomain.com =&gt; bar.yourdomain.com\n[\u221a] *.yourdomain.com =&gt; foo.bar.yourdomain.com\n[\u221a] *.yourdomain.com =&gt; foo.bar.baz.yourdomain.com\n[\u221a] *.yourdomain.com =&gt; foo.bar.baz.qux.yourdomain.com\n[x] *.yourdomain.com =&gt; foo.bar.baz.qux.quxx.yourdomain.com\n[\u221a] *.bar.yourdomain.com =&gt; foo.bar.yourdomain.com\n[\u221a] *.bar.yourdomain.com =&gt; baz.foo.bar.yourdomain.com\n[x] *.bar.yourdomain.com =&gt; foo.bar.baz.yourdomain.com\n</code></pre> <p>\u63d0\u793a\uff1a\u4ee5\u4e0a [\u221a] \u7279\u6307\u6cdb\u57df\u540d\u5bf9\u5e94\u7684\u6b63\u786e\u793a\u4f8b\uff0c\u53cd\u4e4b [x] \u4e3a\u4e0d\u6b63\u786e\u7684\u3002</p> <p>\u64cd\u4f5c\u5f15\u5bfc</p> <p>\u52a0\u901f\u57df\u540d\u7684\u7ba1\u7406\u6709\u57df\u540d\u7ed1\u5b9a\u3001\u5220\u9664\u57df\u540d\u7b49\u64cd\u4f5c\uff0c\u60a8\u53ef\u4ee5\u901a\u8fc7\u8be5\u6a21\u5757\u6765\u7ba1\u7406\u60a8\u7684\u57df\u540d\u3002\u60a8\u53ef\u767b\u9646 CDN \u63a7\u5236\u53f0\uff0c\u8fdb\u5165\u300c\u57df\u540d\u7ba1\u7406\u300d\u529f\u80fd\u6a21\u5757\uff0c\u627e\u5230\u300c\u52a0\u901f\u57df\u540d\u300d\u4e00\u680f\uff0c\u5373\u53ef\u8fdb\u884c\u5982\u4e0b\u64cd\u4f5c\uff1a</p> <p>1.\u7ed1\u5b9a\u57df\u540d</p> <p>\u7b2c\u4e00\u6b65\uff1a\u70b9\u51fb\u3010\u57df\u540d\u7ed1\u5b9a\u3011\u6309\u94ae</p> <p></p> <p>\u7b2c\u4e8c\u6b65\uff1a\u586b\u5199\u5f85\u6dfb\u52a0\u7684\u57df\u540d</p> <p></p> <p>\u70b9\u51fb\u3010\u6dfb\u52a0\u3011\u6309\u94ae\uff0c\u5373\u53ef\u6dfb\u52a0\u5f85\u7ed1\u5b9a\u7684\u57df\u540d\u3002</p> <p>\u7b2c\u4e09\u6b65\uff1a\u67e5\u770b\u5df2\u6dfb\u52a0\u57df\u540d\u7684\u72b6\u6001</p> <p></p> <p>\u5982\u679c\u6b64\u65f6\u5df2\u7ecf\u6dfb\u52a0\u7684\u57df\u540d\u4e3a\u3010\u6b63\u5e38\u3011\u72b6\u6001\uff0c\u5219\u5df2\u5ba1\u6838\u901a\u8fc7\uff0c\u5982\u679c\u4e3a\u3010\u62d2\u7edd\u3011\u72b6\u6001\uff0c\u5219\u6b64\u65f6\u57df\u540d\u53ef\u80fd\u672a\u5907\u6848\uff0c\u672a\u88ab\u5ba1\u6838\u901a\u8fc7\u3002</p> <p>2.\u5220\u9664\u57df\u540d</p> <p>\u7b2c\u4e00\u6b65\uff1a\u70b9\u51fb\u3010\u5220\u9664\u3011\u6309\u94ae</p> <p></p> <p>\u7b2c\u4e8c\u6b65\uff1a\u5f85\u5220\u9664\u57df\u540d\u786e\u8ba4</p> <p></p> <p>\u70b9\u51fb\u3010\u5220\u9664\u3011\u6309\u94ae\u5373\u53ef\u5c06\u8be5\u57df\u540d\u8fdb\u884c\u5220\u9664\u3002</p> <p>\u6ce8\u610f\u4e8b\u9879</p> <ul> <li>\u4e00\u4e2a\u670d\u52a1\u53ef\u4ee5\u7ed1\u5b9a\u591a\u4e2a\u57df\u540d\uff0c\u4e14\u6700\u591a\u652f\u6301\u7ed1\u5b9a 10 \u4e2a\u81ea\u6709\u57df\u540d\uff0c\u5f85\u7ed1\u5b9a\u7684\u57df\u540d\u9700\u8981\u5df2\u5907\u6848\uff0c\u5426\u5219\u4f1a\u65e0\u6cd5\u901a\u8fc7\u5ba1\u6838\uff1b</li> <li>\u57df\u540d\u5ba1\u6838\u901a\u5e38\u5728 1 \u5c0f\u65f6\u4ee5\u5185\u5b8c\u6210\uff0c\u5ba1\u6838\u901a\u8fc7\u4e4b\u540e\u7684\u72b6\u6001\u4e3a\u201c\u6b63\u5e38\u201d\uff0c\u8bf7\u5728\u5ba1\u6838\u901a\u8fc7\u4e4b\u540e\u518d\u8fdb\u884c CNAME \u5207\u6362\uff1b</li> <li>\u65b0\u5907\u6848\u57df\u540d\u7531\u4e8e\u4fe1\u606f\u540c\u6b65\u6709\u5ef6\u65f6\uff0c\u8bf7\u5728\u5907\u6848 1-2 \u5929\u540e\u518d\u8fdb\u884c\u7ed1\u5b9a\uff0c\u5426\u5219\u4f1a\u5bfc\u81f4\u57df\u540d\u5ba1\u6838\u65f6\u65e0\u6cd5\u67e5\u8be2\u5907\u6848\u4fe1\u606f\u800c\u88ab\u62d2\u7edd\uff1b</li> <li>\u5e73\u53f0\u5c06\u5b9a\u671f\u68c0\u67e5\u57df\u540d\u662f\u5426\u5907\u6848\uff0c\u5f53\u6709\u4e00\u4e2a\u57df\u540d\u5907\u6848\u8fc7\u671f\u6216\u5931\u6548\u65f6\uff0c\u4e3a\u786e\u4fdd\u6b63\u5e38\u8bbf\u95ee\uff0c\u57df\u540d\u6240\u5728\u670d\u52a1\u5c06\u4e34\u65f6\u89e3\u6790\u5230\u53c8\u62cd\u4e91\u6d77\u5916\u52a0\u901f\u8282\u70b9\uff0c\u671f\u95f4\u6240\u4ea7\u751f\u7684\u8bbf\u95ee\u6d41\u91cf\u5c06\u6309\u6d77\u5916\u5b9a\u4ef7\u8ba1\u8d39\uff1b7 \u5929\u4e4b\u540e\uff0c\u5982\u679c\u5907\u6848\u4ecd\u4e3a\u5931\u6548\uff0c\u8be5\u57df\u540d\u7ed1\u5b9a\u72b6\u6001\u5c06\u53d8\u4e3a\u201c\u62d2\u7edd\u201d\u72b6\u6001\uff0cCDN \u4f1a\u8fd4\u56de 400 \u72b6\u6001\u7801\uff1b</li> </ul>"},{"location":"cdn/config/#13","title":"1.3 \u6d4b\u8bd5\u57df\u540d","text":"<p>\u529f\u80fd\u8bf4\u660e</p> <p>\u4e3a\u4e86\u914d\u5408\u53c8\u62cd\u4e91\u5b58\u50a8\u4ee5\u53ca CDN \u670d\u52a1\u4f7f\u7528\uff0c\u53c8\u62cd\u4e91\u63d0\u4f9b\u4e86\u6d4b\u8bd5\u57df\u540d\uff0c\u4ec5\u7528\u4e8e\u6d4b\u8bd5\u670d\u52a1\u7684\u53ef\u7528\u6027\u3002\u5173\u4e8e\u6d4b\u8bd5\u57df\u540d\u7684\u4f7f\u7528\u89c4\u8303\u53ca\u6ce8\u610f\u4e8b\u9879\uff0c\u8fd9\u91cc\u8bf4\u660e\u5982\u4e0b\uff1a</p> <ul> <li>\u65b0\u521b\u5efa\u7684\u670d\u52a1\u542f\u7528\u65b0\u7684\u6d4b\u8bd5\u57df\u540d\uff08\u547d\u540d\u89c4\u5219\u4e3a\uff1a\u670d\u52a1\u540d\u79f0.test.upcdn.net\uff09\uff1b</li> <li>\u8001\u7684\u5b58\u50a8\u53ca CDN \u670d\u52a1\uff0c\u6d4b\u8bd5\u57df\u540d\u7684\u683c\u5f0f\u4e3a\uff1a\u670d\u52a1\u540d\u79f0.b0.upaiyun.com\uff0c\u4ecd\u53ef\u7ee7\u7eed\u4f7f\u7528\uff0c\u4f46\u662f\u9650\u4e8e\u6d4b\u8bd5\u57df\u540d\u662f\u516c\u5171\u8d44\u6e90\uff0c\u53ef\u80fd\u4f1a\u53d7\u5230\u5176\u4ed6\u7528\u6237\u5f71\u54cd\uff0c\u5df2\u7ecf\u7528\u4e8e\u6b63\u5f0f\u751f\u4ea7\u73af\u5883\u7684\u7528\u6237\uff0c\u8bf7\u5c3d\u5feb\u5c06\u4e1a\u52a1\u5207\u6362\u5230\u81ea\u6709\u7ed1\u5b9a\u7684\u57df\u540d\uff1b</li> <li>\u6d4b\u8bd5\u57df\u540d\u6709\u8bf8\u591a\u9650\u5236\uff08\u4f8b\u5982\uff1a\u9650\u901f\u3001\u9650\u5236 CDN \u8282\u70b9\u6570\u91cf\uff09\uff0c\u4e0d\u80fd\u7528\u4e8e\u6b63\u5f0f\u7684\u751f\u4ea7\u73af\u5883\uff0c\u4ec5\u4f9b\u6d4b\u8bd5\u4f7f\u7528\uff0c\u5b9e\u9645\u7ebf\u4e0a\u4e1a\u52a1\u8bf7\u7ed1\u5b9a\u81ea\u6709\u57df\u540d\u3002</li> </ul> <p>\u67e5\u770b\u5f15\u5bfc</p> <p>\u60a8\u53ef\u767b\u9646 CDN \u63a7\u5236\u53f0\uff0c\u8fdb\u5165\u300c\u57df\u540d\u7ba1\u7406\u300d\u529f\u80fd\u6a21\u5757\uff0c\u627e\u5230\u300c\u52a0\u901f\u57df\u540d\u300d\u4e00\u680f\uff0c\u5373\u53ef\u67e5\u770b\uff1a</p> <p></p>"},{"location":"cdn/config/#2","title":"2.\u56de\u6e90\u7ba1\u7406","text":""},{"location":"cdn/config/#21","title":"2.1 \u6e90\u7ad9\u8bbe\u7f6e","text":"<p>\u6e90\u7ad9\u8bbe\u7f6e\u4e3b\u8981\u662f\u5bf9\u8d44\u6e90\u6587\u4ef6\u7684\u56de\u6e90\u5730\u5740\u8fdb\u884c\u7ba1\u7406\u4ee5\u53ca\u914d\u5408\u6e90\u7ad9\u5b9e\u9645\u8d44\u6e90\u60c5\u51b5\u8fdb\u884c\u4e00\u4e9b\u66f4\u9ad8\u7ea7\u7684\u8bbe\u7f6e\uff0c\u5305\u62ec\u4e3b\u5907\u7ebf\u8def\u3001\u7aef\u53e3\u53f7\u3001\u8f6e\u8be2\u6743\u91cd\u7b49\u3002\u5176\u4e2d\uff0c\u56de\u6e90\u5730\u5740\u652f\u6301 IP \u6e90\u7ad9\u548c\u57df\u540d\u6e90\u7ad9\uff0c\u4f8b\u5982\uff1a</p> <pre><code>IP\uff1a1.1.1.1\n\u57df\u540d\uff1asrc.example.com\n</code></pre> <p>\u9488\u5bf9\u56de\u6e90\u5730\u5740\u4e3a\u57df\u540d\u6e90\u7ad9\u7684\u60c5\u51b5\uff0cCDN \u8282\u70b9\u4f1a\u8fdb\u884c\u4e00\u6b21 DNS \u89e3\u6790\uff0c\u89e3\u6790\u5230\u7684 IP \u5373\u4e3a\u771f\u5b9e\u7684\u56de\u6e90\u5730\u5740\u3002</p> <p>\u56de\u6e90\u534f\u8bae</p> <p>\u56de\u6e90\u534f\u8bae\u987e\u540d\u601d\u4e49\u4e5f\u5c31\u662f CDN \u8282\u70b9\u56de\u6e90\u4f7f\u7528\u7684\u534f\u8bae\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0cCDN \u4f1a\u4ee5 HTTP \u534f\u8bae\u56de\u6e90\uff0c\u60a8\u4e5f\u53ef\u4ee5\u91c7\u7528 HTTPS \u534f\u8bae\u56de\u6e90\u3002</p> <p>\u914d\u7f6e\u5f15\u5bfc</p> <p>\u767b\u9646 CDN \u63a7\u5236\u53f0\uff0c\u8fdb\u5165 \u300c\u56de\u6e90\u7ba1\u7406\u300d\u9875\u9762\uff0c\u627e\u5230\u300c\u6e90\u7ad9\u8bbe\u7f6e\u300d\u914d\u7f6e\u9879\uff0c\u70b9\u51fb\u3010\u7ba1\u7406\u3011\u6309\u94ae\u8fdb\u5165\u7ba1\u7406\u9875\u9762\uff1a</p> <p></p> <p>\u901a\u8fc7\u914d\u7f6e\u9879\u53ef\u4ee5\u770b\u5230\uff0cCDN \u6709\u4e09\u79cd\u56de\u6e90\u65b9\u5f0f\uff0c\u5206\u522b\u4e3a\uff1a</p> <p>1\u3001HTTP \u56de\u6e90</p> <p>\u9ed8\u8ba4\u91c7\u7528 HTTP \u534f\u8bae\u56de\u6e90\uff0c\u6b64\u65f6\u56de\u6e90\u5730\u5740\u7684\u7aef\u53e3\u53f7\u9ed8\u8ba4\u4e3a 80\u3002</p> <p>2\u3001HTTPS \u56de\u6e90</p> <p>\u4e5f\u53ef\u4ee5\u9009\u62e9 HTTPS \u534f\u8bae\u56de\u6e90\uff0c\u9009\u62e9 HTTPS \u534f\u8bae\u56de\u6e90\u65f6\uff0c\u7aef\u53e3\u53f7\u4f1a\u53d8\u4e3a 443 \u7aef\u53e3\u3002</p> <p>3\u3001\u534f\u8bae\u8ddf\u968f\uff08following\uff09</p> <p>\u5f53\u542f\u7528\u8be5\u7279\u6027\u65f6\uff0c\u56de\u6e90\u534f\u8bae\u59cb\u7ec8\u4f1a\u548c\u5ba2\u6237\u7aef\u8bbf\u95ee CDN \u7684\u534f\u8bae\u4fdd\u6301\u4e00\u81f4\uff0c\u5373\u5ba2\u6237\u7aef\u7528 HTTP \u534f\u8bae\u8bbf\u95ee CDN\uff0c\u90a3\u4e48 CDN \u56de\u6e90\u65f6\u4e5f\u4f1a\u7528 HTTP \u534f\u8bae\u8fdb\u884c\u56de\u6e90\uff0c\u540c\u6837\uff0c\u82e5\u91c7\u7528 HTTPS \u8bbf\u95ee\uff0c\u90a3\u4e48\u56de\u6e90\u4e5f\u662f HTTPS\u3002</p> <p>\u8865\u5145: \u56de\u6e90\u8ddf\u968f 301/302 \u914d\u7f6e</p> <p>\u82e5\u57df\u540dcloud.tencent.com\uff0c\u5f00\u542f\u56de\u6e90\u8ddf\u968f\uff1a</p> <p>\u7528\u6237 A \u8bf7\u6c42\u8d44\u6e90\uff1ahttp://cloud.tencent.com/1.jpg\uff0c\u5728\u8282\u70b9\u672a\u547d\u4e2d\u7f13\u5b58\uff0c\u5219\u8282\u70b9\u4f1a\u8bf7\u6c42\u6e90\u7ad9\u83b7\u53d6\u6240\u9700\u8d44\u6e90\uff0c\u82e5\u6e90\u7ad9\u8fd4\u56de\u7684 HTTP Response \u72b6\u6001\u7801\u4e3a302\uff0c\u8df3\u8f6c\u6307\u5411\u5730\u5740\u4e3a http://cloud.tencent.com/2.jpg \uff0c\u5219\uff1a 1. \u5f00\u542f\u56de\u6e90\u8ddf\u968f301/302\u914d\u7f6e\u540e\uff0c\u8282\u70b9\u6536\u5230\u72b6\u6001\u7801\u4e3a301/302\u7684 HTTP Response \u540e\uff0c\u4f1a\u76f4\u63a5\u5411\u8df3\u8f6c\u6307\u5411\u7684\u5730\u5740\u53d1\u8d77\u8bf7\u6c42\u3002 2. \u83b7\u53d6\u5230\u6240\u9700\u8d44\u6e90\u540e\uff0c\u7f13\u5b58\u81f3\u8282\u70b9\uff0c\u5e76\u8fd4\u56de\u7ed9\u7528\u6237\u3002 3. \u6b64\u65f6\u7528\u6237 B \u4e5f\u5411http://cloud.tencent.com/1.jpg\u53d1\u8d77\u8bf7\u6c42\uff0c\u5219\u4f1a\u5728\u8282\u70b9\u76f4\u63a5\u547d\u4e2d\u5e76\u8fd4\u56de\u7ed9\u7528\u6237\u3002 4. \u5f00\u542f\u56de\u6e90\u8ddf\u968f301/302\u914d\u7f6e\u540e\uff0c\u6700\u591a\u4ec5\u8ddf\u968f3\u6b21\u8df3\u8f6c\uff0c\u8d85\u51fa\u9650\u5236\u5219\u4f1a\u76f4\u63a5\u8fd4\u56de301/302\u7ed9\u5ba2\u6237\u3002</p> <p>\u82e5\u57df\u540dcloud.tencent.com\uff0c\u672a\u5f00\u542f\u56de\u6e90\u8ddf\u968f\uff1a</p> <p>\u7528\u6237 A \u8bf7\u6c42\u8d44\u6e90\uff1ahttp://cloud.tencent.com/1.jpg\uff0c\u5728\u8282\u70b9\u672a\u547d\u4e2d\u7f13\u5b58\uff0c\u5219\u8282\u70b9\u4f1a\u8bf7\u6c42\u6e90\u7ad9\u83b7\u53d6\u6240\u9700\u8d44\u6e90\uff0c\u82e5\u6e90\u7ad9\u8fd4\u56de\u7684 HTTP Response \u72b6\u6001\u7801\u4e3a301/302\uff0c\u8df3\u8f6c\u6307\u5411\u5730\u5740\u4e3ahttp://xxx.tencent.com/1.jpg\uff0c\u5219\uff1a 1. \u8282\u70b9\u5c06\u8be5 HTTP Response \u76f4\u63a5\u8fd4\u56de\u7ed9\u7528\u6237\u3002 2. \u7528\u6237\u5411http://xxx.tencent.com/1.jpg\u53d1\u8d77\u8bf7\u6c42\uff0c\u82e5\u8be5\u57df\u540d\u672a\u63a5\u5165 CDN\uff0c\u5219\u4e0d\u4f1a\u6709\u52a0\u901f\u6548\u679c\u3002 3. \u82e5\u6b64\u65f6\u7528\u6237 B \u4e5f\u5411http://cloud.tencent.com/1.jpg \u53d1\u8d77\u8bf7\u6c42\uff0c\u5219\u4f1a\u91cd\u590d\u4e0a\u8ff0\u6d41\u7a0b\u3002</p> <p>\u6ce8\u610f\u4e8b\u9879</p> <ul> <li>\u7279\u522b\u5730\uff0c\u56de\u6e90\u5730\u5740\u7684\u7aef\u53e3\u53f7\u914d\u7f6e\u5c06\u4ec5\u4f5c\u7528\u4e8e\u56de\u6e90\u534f\u8bae\u4e3a HTTP \u7684\u60c5\u51b5\uff0c\u9ed8\u8ba4 \u4e3a 80 \u7aef\u53e3\uff1b\u5f53\u7136\u4f60\u4e5f\u53ef\u4ee5\u81ea\u5b9a\u4e49\u4e3a\u5176\u4ed6\u503c\uff0c\u4f8b\u5982 8080 \u6216    8443\u3002</li> <li>\u5f53\u56de\u6e90\u534f\u8bae\u4e3a HTTPS \u65f6\uff0c\u7aef\u53e3\u53f7\u5219\u59cb\u7ec8\u56fa\u5b9a\u4e3a 443\uff0c\u4e14\u76ee\u524d\u6682\u65f6\u4e0d\u652f\u6301\u4fee\u6539\u6b64\u56fa\u5b9a\u503c\uff1b</li> <li>\u82e5\u4e4b\u524d\u9009\u62e9 HTTPS \u534f\u8bae\u56de\u6e90 \u4e14\u81ea\u5b9a\u4e49\u8bbe\u7f6e\u8fc7\u7aef\u53e3\u53f7\u7684\u7528\u6237\u9700\u8981\u6ce8\u610f\uff0c\u5207\u6362\u5230 <code>\u534f\u8bae\u8ddf\u968f</code> \u6a21\u5f0f\u4e0b\u65f6\uff0c\u81ea\u5b9a\u4e49\u7684\u7aef\u53e3\u53f7\u5c06\u4ec5\u4f5c\u7528\u4e8e\u56de\u6e90\u534f\u8bae\u4e3a    HTTP \u7684\u60c5\u51b5\u3002</li> </ul> <p>\u5206\u7247\u56de\u6e90</p> <p>\u5206\u7247\u56de\u6e90\u4f7f\u7528\u573a\u666f\uff1a\u5927\u6587\u4ef6</p> <p>\u5f00\u542f\uff1a\u5f53\u5f00\u542f\u5206\u7247\u56de\u6e90\u65f6\uff0c\u56de\u6e90\u8bf7\u6c42\u65f6\u5c06\u4f7f\u7528 range \u56de\u6e90\u8bf7\u6c42\u3002\u5f00\u542f\u540e\uff0c\u5f53\u7528\u6237\u8bf7\u6c42\u672a\u643a\u5e26 range \u8bf7\u6c42\u65f6\uff0c\u5982\u679c\u8bf7\u6c42\u6587\u4ef6\u5927\u4e8e4M\uff0c CDN \u8282\u70b9\u5c06\u6309\u71671M\u7684\u5206\u7247\u5927\u5c0f\u56de\u6e90\u5206\u7247\u8bf7\u6c42\uff0c\u5982\u679c\u6587\u4ef6\u5c0f\u4e8e4M\uff0c\u5219CDN\u8282\u70b9\u5c06\u56de\u6e90\u62c9\u53d6\u5b8c\u6574\u6587\u4ef6\u3002\u5f53\u7528\u6237\u8bf7\u6c42\u643a\u5e26 range \u8bf7\u6c42\u65f6\uff0c \u5c06\u6309\u7167\u643a\u5e26\u7684 range \u8bf7\u6c42\u8fdb\u884c\u56de\u6e90\u8bf7\u6c42\u3002</p> <p>\u5173\u95ed\uff1a\u5f53\u5173\u95ed\u5206\u7247\u56de\u6e90\u65f6\uff0c\u5f53\u7528\u6237\u8bf7\u6c42\u643a\u5e26 range \u8bf7\u6c42\u65f6\uff0c\u5728 CDN \u6ca1\u6709\u7f13\u5b58\u7684\u60c5\u51b5\u4e0b\uff0c\u56de\u6e90\u8bf7\u6c42\u4ecd\u4f1a\u4f7f\u7528 range \u56de\u6e90\u8bf7\u6c42\u3002</p> <p>\u6e90\u7ad9\u8bc1\u4e66\u6821\u9a8c</p> <p>\u8868\u793a\u56de\u6e90\u4f1a\u6821\u9a8c\u6e90\u7ad9 SSL \u8bc1\u4e66\u7684\u5408\u6cd5\u6027\uff0c\u4f1a\u6821\u9a8c\u8bc1\u4e66\u662f\u5426\u8fc7\u671f\u3001\u8bc1\u4e66\u57df\u540d\u662f\u5426\u5339\u914d\u3001\u662f\u5426\u662f\u81ea\u7b7e\u540d\u8bc1\u4e66\uff0c\u5982\u679c\u6821\u9a8c\u4e0d\u901a\u8fc7\uff0c\u5219\u4f1a\u62d2\u7edd\u8bbf\u95ee\uff0c\u8fd9\u6837\u6781\u5927\u7684\u4fdd\u969c\u4e86\u56de\u6e90\u5b89\u5168\u6027\u3002</p> <p>\u7ebf\u8def\u914d\u7f6e</p> <p>\u7ebf\u8def\u914d\u7f6e\u5305\u62ec\u56de\u6e90\u5730\u5740\u3001\u7aef\u53e3\u53f7\u3001\u4e3b\u5907\u7ebf\u8def\u3001\u8f6e\u8be2\u6743\u91cd\u3001\u6700\u5927\u5931\u8d25\u6b21\u6570\u3001\u9759\u9ed8\u65f6\u95f4\u7b49\u9ad8\u7ea7\u8bbe\u7f6e\u3002\u5176\u4e2d\u56de\u6e90\u5730\u5740\u5219\u8868\u793a\u6e90\u7ad9\u5b9e\u9645\u53ef\u8bbf\u95ee\u7684\u7f51\u7edc\u5730\u5740\uff0c\u53ef\u586b IP \u5730\u5740\u6216\u57df\u540d\uff0c\u5982\u679c\u662f\u57df\u540d\u5730\u5740\uff0c\u90a3\u4e48 CDN \u5728\u56de\u6e90\u65f6\u4f1a\u5bf9\u8be5\u57df\u540d\u5730\u5740\u8fdb\u884c DNS \u89e3\u6790\uff0c\u7136\u540e\u9488\u5bf9\u89e3\u6790\u51fa\u6765\u7684 IP \u5730\u5740\u8fdb\u884c\u8bbf\u95ee\uff0c\u56e0\u6b64\u82e5\u89e3\u6790\u5931\u8d25\u5c06\u4f1a\u5bfc\u81f4\u56de\u6e90\u5f02\u5e38\u3002</p> <p>Tips: \u901a\u5e38\u60c5\u51b5\u4e0b\uff0c\u76f4\u63a5\u4f7f\u7528 IP \u8fdb\u884c\u56de\u6e90\uff0c\u4f46\u662f\u5982\u679c\u5ba2\u6237\u6709\u591a\u4e2a IP\uff0c\u5e76\u4e14 IP \u5730\u5740\u4f1a\u7ecf\u5e38\u53d8\u5316\uff0c\u5bf9\u4e8e CDN \u5382\u5546\u6765\u8bf4\uff0c\u4e3a\u4e86\u907f\u514d\u7ecf\u5e38\u66f4\u6539\u914d\u7f6e\uff08\u56de\u6e90IP\uff09\uff0c\u4f1a\u91c7\u53d6\u56de\u6e90\u57df\u540d\u65b9\u5f0f\u8fdb\u884c\u56de\u6e90\u3002</p> <p>\u914d\u7f6e\u5f15\u5bfc</p> <p>\u767b\u9646 CDN \u63a7\u5236\u53f0\uff0c\u8fdb\u5165 \u300c\u56de\u6e90\u7ba1\u7406\u300d\u9875\u9762\uff0c\u627e\u5230\u300c\u6e90\u7ad9\u8bbe\u7f6e\u300d\u914d\u7f6e\u9879\uff0c\u70b9\u51fb\u3010\u7ba1\u7406\u3011\u6309\u94ae\u8fdb\u5165\u7ba1\u7406\u9875\u9762\uff1a</p> <p></p> <p>\u4ee5\u4e0b\u5c06\u91cd\u70b9\u4ecb\u7ecd\u4e3b\u5907\u7ebf\u8def\u3001\u8f6e\u8be2\u6743\u91cd\u3001\u6700\u5927\u5931\u8d25\u6b21\u6570\u548c\u9759\u9ed8\u65f6\u95f4\uff1a</p> <ul> <li>\u4e3b\u3001\u5907\u7ebf\u8def (backup)</li> </ul> <p>\u56de\u6e90\u5730\u5740\u914d\u7f6e\u4e2d\u9664\u4e86\u9ed8\u8ba4\u7684 <code>\u4e3b\u7ebf\u8def</code> \u5916\uff0c\u6211\u4eec\u8fd8\u652f\u6301 <code>\u5907\u4efd\u7ebf\u8def</code>  \u7684\u914d\u7f6e\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c <code>\u4e3b\u7ebf\u8def</code> \u591a\u4e2a\u56de\u6e90\u5730\u5740\u4f1a\u4ee5 RR \u8f6e\u8be2\u65b9\u5f0f\u8fdb\u884c\u8c03\u5ea6\uff0c\u5f53\u4e14\u4ec5\u5f53\u6240\u6709 <code>\u4e3b\u7ebf\u8def</code> \u56de\u6e90\u5730\u5740\u5747\u4e0d\u53ef\u8fbe\u65f6\uff0c\u6b64\u65f6\u6211\u4eec\u5c06\u4f7f\u7528 <code>\u5907\u4efd\u7ebf\u8def</code> \u8fdb\u884c\u8f6c\u53d1\uff0c\u82e5 <code>\u5907\u4efd\u7ebf\u8def</code> \u6709\u591a\u4e2a\u56de\u6e90\u5730\u5740\uff0c\u90a3\u4e48\u8d1f\u8f7d\u5747\u8861\u65b9\u5f0f\u4e5f\u548c <code>\u4e3b\u7ebf\u8def</code> \u4e00\u6837\uff0c\u4ee5 Round-Robin \u8f6e\u8be2\uff08\u8be6\u60c5\u8bf7\u70b9\u51fb\u94fe\u63a5\uff09\u65b9\u5f0f\u8fdb\u884c\u8c03\u5ea6\u3002</p> <ul> <li>\u8f6e\u8be2\u6743\u91cd (weight)</li> </ul> <p>\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u8f6e\u8be2\u6743\u91cd\u90fd\u4e3a 1\uff0c\u8868\u793a\u6240\u6709\u56de\u6e90\u5730\u5740\u8f6e\u8be2\u5230\u7684\u6982\u7387\u5747\u7b49\u3002\u5f53\u7136\u4e5f\u53ef\u4ee5\u5982\u4e0a\u56fe\u90a3\u6837\u81ea\u5b9a\u4e49\u8f6e\u8be2\u6743\u91cd\uff0c\u6211\u4eec\u770b\u5230\u4e3b\u7ebf\u8def\u4e24\u4e2a\u56de\u6e90\u5730\u5740\u6743\u91cd\u5206\u522b\u662f 1 \u548c 2\uff0c\u6b64\u65f6\u4e3b\u7ebf\u8def\u96c6\u7fa4\u5728\u8f6e\u8be2\u8c03\u5ea6\u4e2d\u4f1a\u6709 1/3 \u7684\u6982\u7387\u56de <code>192.168.11.1:80</code> \u8fd9\u4e2a\u5730\u5740\uff0c\u800c\u56de <code>192.168.11.2:80</code> \u8fd9\u4e2a\u5730\u5740\u7684\u6982\u7387\u5219\u4e3a 2/3\u3002\u5373\u5f53\u524d\u56de\u6e90\u5730\u5740\u8f6e\u8be2\u5230\u7684\u6982\u7387\u53ef\u6309\uff08\u5f53\u524d\u8282\u70b9\u6743\u91cd/\u96c6\u7fa4\u6240\u6709\u8282\u70b9\u6743\u91cd\u4e4b\u548c\uff09\u8fd9\u4e2a\u516c\u5f0f\u8ba1\u7b97\u3002</p> <ul> <li>\u6700\u5927\u5931\u8d25\u6b21\u6570\u548c\u9759\u9ed8\u65f6\u95f4</li> </ul> <p>\u8868\u793a\u5728\u4e00\u4e2a <code>\u9759\u9ed8\u65f6\u95f4</code> \u5185\u5982\u679c\u5bf9\u5e94\u6e90\u7ad9\u7684\u5f02\u5e38\u6b21\u6570\u7d2f\u8ba1\u8fbe\u5230\u5f53\u524d\u8bbe\u7f6e\u7684 <code>\u6700\u5927\u5931\u8d25\u6b21\u6570</code> \uff0c\u90a3\u4e48\u5728\u4e0b\u4e00\u4e2a  <code>\u9759\u9ed8\u65f6\u95f4</code> \u5185\uff0cCDN \u5c31\u4f1a\u8ba4\u4e3a\u8fd9\u4e2a\u6e90\u7ad9\u5b95\u673a\u4e86\uff0c\u5373\u5728\u8fd9\u6bb5\u65f6\u95f4\u5185\u4e0d\u4f1a\u518d\u5c06\u8bf7\u6c42\u8f6c\u53d1\u7ed9\u5b83\u3002\u7279\u522b\u5730\uff0c\u5f53 <code>\u6700\u5927\u5931\u8d25\u6b21\u6570</code> \u5176\u503c\u4e3a 0 \u65f6\uff0c\u8868\u793a\u4e0d\u4f1a\u8fdb\u884c\u5931\u8d25\u7d2f\u8ba1\uff0c<code>\u9759\u9ed8\u65f6\u95f4</code> \u4e5f\u540c\u65f6\u5931\u6548\u3002</p> <p>\u5408\u7406\u8bbe\u7f6e\u6700\u5927\u5931\u8d25\u6b21\u6570\u548c\u9759\u9ed8\u65f6\u95f4\uff0c\u6709\u52a9\u4e8e\u5728\u6e90\u7ad9\u5f02\u5e38\u7684\u60c5\u51b5\u4e0b\u6700\u5927\u7a0b\u5ea6\u51cf\u5c11\u5bf9\u7ebf\u4e0a\u8bf7\u6c42\u7684\u5f71\u54cd\u3002\u8fd9\u91cc\u5b9e\u9645\u4e0a\u8ddf Nginx \u6838\u5fc3\u7684 upstream \u6a21\u5757\u5b9e\u73b0\u673a\u5236\u7c7b\u4f3c\uff0c\u8fdb\u4e00\u6b65\u4e86\u89e3\u53ef\u53c2\u8003 \u94fe\u63a5 \u3002</p> <p>\u6ce8\u610f\u4e8b\u9879</p> <ul> <li>\u5173\u4e8e\u4e3b\u3001\u5907\u56de\u6e90\uff0c\u5f53\u4e3b\u6e90\u51fa\u73b0\u9519\u8bef\u65f6\uff0cPOST \u4ee5\u53ca\u5e26 BODY \u7684 GET \u65b9\u6cd5\u7684\u8bf7\u6c42\u4e0d\u4f1a\u56de\u5907\u6e90\u8fdb\u884c\u91cd\u8bd5\u64cd\u4f5c\u3002</li> </ul>"},{"location":"cdn/config/#22-host","title":"2.2 \u56de\u6e90 Host","text":"<p>\u529f\u80fd\u8bf4\u660e</p> <p>\u8be5\u914d\u7f6e\u662f\u6307 CDN \u8282\u70b9\u56de\u6e90\u8fc7\u7a0b\u4e2d\u6240\u9700\u8bbf\u95ee\u7684\u6e90\u7ad9\u670d\u52a1\u5668 Web \u7ad9\u70b9\u8d44\u6e90\u7684\u8bbf\u95ee\u57df\u540d\u3002CDN \u8282\u70b9\u56de\u6e90\u65f6\u4f1a\u5728 HTTP \u8bf7\u6c42\u5934 Host \u5b57\u6bb5\u91cc\u66ff\u6362\u8be5\u57df\u540d\uff0c\u4ee5\u652f\u6301\u6e90\u670d\u52a1\u5668\u53ef\u901a\u8fc7\u6b64 Host \u505a\u7684\u7279\u6b8a\u5904\u7406\u903b\u8f91\uff0c\u4e00\u822c\u662f\u57df\u540d\u5f62\u5f0f\u7684\u5b57\u7b26\u4e32\uff0c\u5f53\u7136\u4e5f\u652f\u6301\u4efb\u610f\u5b57\u7b26\u4e32\u5f62\u5f0f\u3002</p> <p>\u914d\u7f6e\u5f15\u5bfc</p> <p>\u767b\u9646 CDN \u63a7\u5236\u53f0\uff0c\u8fdb\u5165 \u300c\u56de\u6e90\u7ba1\u7406\u300d\u914d\u7f6e\u9875\u9762\uff0c\u627e\u5230\u300c\u56de\u6e90 Host\u300d\u914d\u7f6e\u9879\uff0c\u70b9\u51fb\u3010\u7ba1\u7406\u3011\u6309\u94ae\u8fdb\u5165\u7ba1\u7406\u9875\u9762\uff1a</p> <p></p> <p>\u5982\u4e0a\u622a\u56fe\u6240\u793a\uff0c\u56de\u6e90 Host \u914d\u7f6e\u4e3a\uff1a<code>src.image.upyun.com</code></p> <p>1.\u56de\u6e90 Host \u4e3a\u53ef\u9009\u914d\u7f6e\u9879\uff0c\u9ed8\u8ba4\u4e3a\u7a7a\u3002\u7279\u522b\u5730\uff0c\u5982\u679c\u8be5\u81ea\u5b9a\u4e49\u503c\u4e3a\u7a7a\uff0c\u5b50\u57df\u540d\u7684\u56de\u6e90 Host \u4e3a\u6240\u914d\u7f6e\u7684\u52a0\u901f\u57df\u540d\uff0c\u6cdb\u57df\u540d\u56de\u6e90 Host \u4e3a\u8bbf\u95ee\u57df\u540d\uff1b</p> <p>2.\u81ea\u5b9a\u4e49\u914d\u7f6e\uff1a\u60a8\u53ef\u4ee5\u6839\u636e\u4e1a\u52a1\u60c5\u51b5\u914d\u7f6e\u56de\u6e90 Host\uff0c\u6ee1\u8db3\u7279\u5b9a\u4e1a\u52a1\u9700\u6c42\uff1b</p> <p>\u6ce8\u610f\u4e8b\u9879</p> <ul> <li>\u56de\u6e90 Host \u914d\u7f6e\u76ee\u524d\u4ec5\u652f\u6301\u4f7f\u7528\u81ea\u6709\u6e90\u63a5\u5165\u7684 CDN \u670d\u52a1\uff1b</li> <li>\u914d\u7f6e\u81ea\u5b9a\u4e49\u56de\u6e90 Host \u4e4b\u540e\uff0c\u8bf7\u4fdd\u8bc1\u8be5\u57df\u540d\u53ef\u4ee5\u6b63\u5e38\u8bbf\u95ee\uff0c\u5426\u5219\u4f1a\u51fa\u73b0\u56de\u6e90\u5931\u8d25\u7684\u60c5\u51b5\uff1b</li> <li>\u56de\u6e90\u5730\u5740\u548c\u56de\u6e90 Host \u7684\u533a\u522b\uff1a\u56de\u6e90\u5730\u5740\u662f CDN \u8282\u70b9\u56de\u6e90\u65f6\u80fd\u591f\u627e\u5230\u5bf9\u5e94\u7684\u6e90\u7ad9\u670d\u52a1\u5668\uff0c\u6e90\u7ad9\u53ef\u80fd\u6709\u591a\u4e2a Web \u7ad9\u70b9\uff0c\u56de\u6e90 Host \u5219\u6307\u660e\u4e86\u8d44\u6e90\u6240\u5728\u7684\u7ad9\u70b9\u3002</li> </ul>"},{"location":"cdn/config/#23","title":"2.3 \u6e90\u7ad9\u8d44\u6e90\u8fc1\u79fb","text":"<p>\u529f\u80fd\u8bf4\u660e</p> <p>\u6e90\u7ad9\u8d44\u6e90\u8fc1\u79fb\u529f\u80fd\u7684\u573a\u666f\u662f\u65e0\u7f1d\u5c06\u7528\u6237\u6e90\u7ad9\u9759\u6001\u8d44\u6e90\u8fc1\u79fb\u5230\u53c8\u62cd\u4e91\u5b58\u50a8\u4e0a\u6765\uff0c\u5f53\u4e0b\u6b21\u7ec8\u7aef\u7528\u6237\u8bbf\u95ee\u76f8\u540c\u8d44\u6e90\u65f6\uff0cCDN \u5c06\u76f4\u63a5\u8fd4\u56de\u5df2\u7ecf\u8fc1\u79fb\u5230\u4e91\u5b58\u50a8\u4e0a\u7684\u8d44\u6e90\u6587\u4ef6\uff0c\u800c\u65e0\u9700\u56de\u7528\u6237\u81ea\u4e3b\u6e90\uff0c\u53ef\u51cf\u5c0f\u81ea\u4e3b\u6e90\u538b\u529b\uff0c\u4e5f\u65b9\u4fbf\u8fdb\u884c\u8d44\u6e90\u6587\u4ef6\u7684\u65e0\u7f1d\u8fc1\u79fb\u3002</p> <p>\u5b9e\u73b0\u673a\u5236</p> <p>\u8fdb\u884c\u8d44\u6e90\u8fc1\u79fb\u9700\u8981\u8003\u8651\u5982\u4e0b\u4e24\u79cd\u573a\u666f\uff1a</p> <p>1\uff09\u67d0\u4e2a\u8d44\u6e90\u672a\u8fc1\u79fb\u4e4b\u524d\uff0c\u4f1a\u4f18\u5148\u56de\u5b58\u50a8\uff0c\u5176\u6b21\u56de\u81ea\u4e3b\u6e90\uff0c\u6700\u7ec8\u8fdb\u884c\u8d44\u6e90\u8fc1\u79fb\uff0c\u8be6\u7ec6\u8bbf\u95ee\u6d41\u7a0b\u53c2\u89c1\u5982\u4e0b\u56fe\u6240\u793a\uff1a</p> <p></p> <p>\u5927\u81f4\u7684\u8bbf\u95ee\u6d41\u7a0b\u4e3a\uff1a</p> <ul> <li>\u7ec8\u7aef\u7528\u6237\u5411 CDN \u8bf7\u6c42\u8d44\u6e90\u6587\u4ef6\uff0cCDN \u4f1a\u4f18\u5148\u56de\u53c8\u62cd\u4e91\u5b58\u50a8\u83b7\u53d6\u8d44\u6e90\uff1b</li> <li>\u6b64\u65f6\u53c8\u62cd\u4e91\u5b58\u50a8\u6ca1\u6709\u8be5\u8d44\u6e90\uff0cCDN \u8282\u70b9\u4f1a\u4ece\u7528\u6237\u81ea\u4e3b\u6e90\u7ad9\u83b7\u53d6\u8d44\u6e90\u6587\u4ef6\uff1b</li> <li>\u6700\u7ec8 CDN \u8fd4\u56de\u8d44\u6e90\u6587\u4ef6\u7ed9\u7ec8\u7aef\u7528\u6237\uff0c\u5e76\u5c06\u8d44\u6e90\u6587\u4ef6\u6301\u4e45\u5316\u5b58\u50a8\u5230\u53c8\u62cd\u4e91\u5bf9\u8c61\u5b58\u50a8\u4e0a\uff1b</li> </ul> <p>2\uff09\u67d0\u4e2a\u8d44\u6e90\u8fc1\u79fb\u6210\u529f\u4e4b\u540e\uff0c\u76f4\u63a5\u8bbf\u95ee\u4e91\u5b58\u50a8\uff0c\u4e0d\u518d\u8fdb\u884c\u8d44\u6e90\u8fc1\u79fb\uff0c\u8bbf\u95ee\u6d41\u7a0b\u53c2\u89c1\u5982\u4e0b\u56fe\u6240\u793a\uff1a</p> <p></p> <p>\u5927\u81f4\u7684\u8bbf\u95ee\u6d41\u7a0b\u662f\uff1a</p> <ul> <li>\u7ec8\u7aef\u7528\u6237\u518d\u6b21\u8bbf\u95ee\u76f8\u540c\u8d44\u6e90\u6587\u4ef6\u65f6\uff0c\u5c06\u76f4\u63a5\u4ece\u53c8\u62cd\u4e91\u5b58\u50a8\u83b7\u53d6\u8d44\u6e90\uff0c\u4e0d\u518d\u56de\u7528\u6237\u81ea\u4e3b\u6e90\u83b7\u53d6\u8d44\u6e90\uff1b</li> <li>\u968f\u7740\u7ec8\u7aef\u7528\u6237\u7684\u4e0d\u65ad\u8bbf\u95ee\uff0c\u6e90\u7ad9\u7684\u9759\u6001\u8d44\u6e90\u5c06\u9010\u6b65\u8fc1\u79fb\u5230\u53c8\u62cd\u4e91\u5b58\u50a8\u6e90\u4e0a\u6765\u3002</li> </ul> <p>\u914d\u7f6e\u5f15\u5bfc</p> <p>\u767b\u9646 CDN \u63a7\u5236\u53f0\uff0c\u8fdb\u5165 \u300c\u56de\u6e90\u7ba1\u7406\u300d\u914d\u7f6e\u9875\u9762\uff0c\u627e\u5230\u300c\u6e90\u7ad9\u8d44\u6e90\u8fc1\u79fb\u300d\u914d\u7f6e\u9879\uff0c\u70b9\u51fb\u3010\u7ba1\u7406\u3011\u6309\u94ae\uff0c\u8fdb\u5165\u5982\u4e0b\u914d\u7f6e\u754c\u9762\uff1a</p> <p></p> <ul> <li>\u7b2c\u4e00\u6b65\uff1a\u914d\u7f6e\u8d44\u6e90\u8fc1\u79fb\u72b6\u6001</li> </ul> <p>\u6e90\u7ad9\u8d44\u6e90\u8fc1\u79fb\u529f\u80fd\u5305\u62ec\u4e09\u79cd\u72b6\u6001\uff0c\u5206\u522b\u662f\u5f00\u542f\u3001\u6682\u505c\u3001\u5173\u95ed\uff0c\u9ed8\u8ba4\u4e3a\u5173\u95ed\u72b6\u6001\u3002\u8be6\u7ec6\u63cf\u8ff0\u5982\u4e0b\uff1a</p> <p></p> <p>\u5f00\u542f\u72b6\u6001</p> <p>\u5f00\u542f\u4e4b\u540e\uff0c\u5f53 CDN \u8282\u70b9\u7f13\u5b58\u5931\u6548\u6216\u672a\u547d\u4e2d\u65f6\uff0c\u4f1a\u4f18\u5148\u56de\u53c8\u62cd\u4e91\u5b58\u50a8\u83b7\u53d6\u8d44\u6e90\uff0c\u5982\u679c\u53c8\u62cd\u4e91\u5b58\u50a8\u8fd4\u56de 4XX\u30015XX \u72b6\u6001\u7801\u65f6\uff0c\u5219\u76f4\u63a5\u56de\u81ea\u6709\u6e90\u7ad9\u83b7\u53d6\u8d44\u6e90\u5e76\u54cd\u5e94\u7ed9\u6700\u7ec8\u7528\u6237\u3002\u4e0e\u6b64\u540c\u65f6\uff0c\u8d44\u6e90\u4f1a\u88ab\u6254\u8fdb\u8d44\u6e90\u8fc1\u79fb\u961f\u5217\u5e76\u8fdb\u884c\u5b58\u50a8\uff0c\u4e0b\u4e00\u4e2a\u76f8\u540c\u7684\u8d44\u6e90\u8bf7\u6c42\u8fc7\u6765\u65f6\u5219\u4f1a\u76f4\u63a5\u7531\u5b58\u50a8\u547d\u4e2d\u7684\u8d44\u6e90\u76f4\u63a5\u63d0\u4f9b\u670d\u52a1\u3002</p> <p>\u6682\u505c\u72b6\u6001</p> <p>\u76f4\u63a5\u5173\u95ed\u6e90\u7ad9\u8d44\u6e90\u8fc1\u79fb\u529f\u80fd\uff0c\u53ef\u80fd\u4f1a\u5bfc\u81f4\u56de\u81ea\u4e3b\u6e90\u538b\u529b\u8fc7\u5927\uff0c\u5728\u6682\u505c\u72b6\u6001\u4e0b\uff0c\u4e0d\u4f1a\u8fdb\u884c\u8d44\u6e90\u8fc1\u79fb\u52a8\u4f5c\uff0c\u8bbf\u95ee\u8d44\u6e90\u65f6\uff0c\u4ecd\u7136\u5148\u8bbf\u95ee\u53c8\u62cd\u4e91\u5b58\u50a8\uff0c\u5982\u679c\u53c8\u62cd\u4e91\u5b58\u50a8\u8fd4\u56de 4XX\u30015XX \u72b6\u6001\u7801\u65f6\uff0c\u5219\u4f1a\u8bbf\u95ee\u81ea\u4e3b\u6e90\u7ad9\u3002\u4e5f\u5373\u8d44\u6e90\u8bbf\u95ee\u7684\u6d41\u7a0b\u4e0d\u53d8\uff0c\u53ea\u4e0d\u8fc7\u4e0d\u4f1a\u8fdb\u884c\u8d44\u6e90\u7684\u8fc1\u79fb\u64cd\u4f5c\uff0c\u8d77\u5230\u4e86\u4e00\u4e2a\u7f13\u51b2\u7684\u4f5c\u7528\u3002</p> <p>\u5173\u95ed\u72b6\u6001</p> <p>\u8be5\u529f\u80fd\u5173\u95ed\u4e4b\u540e\uff0c\u65b0\u7684\u8bf7\u6c42\u8fc7\u6765\u7684\u8bdd\uff0cCDN \u8282\u70b9\u4e0d\u4f1a\u56de\u53c8\u62cd\u4e91\u5b58\u50a8\u5e73\u53f0\u83b7\u53d6\u8d44\u6e90\uff0c\u800c\u4f1a\u76f4\u63a5\u56de\u5ba2\u6237\u6e90\u7ad9\u83b7\u53d6\u8d44\u6e90\u3002</p> <ul> <li>\u7b2c\u4e8c\u6b65\uff1a\u914d\u7f6e\u8d44\u6e90\u8def\u5f84</li> </ul> <p>\u5728\u914d\u7f6e\u7684\u8fc7\u7a0b\u4e2d\uff0c\u60a8\u9700\u8981\u914d\u7f6e\u8d44\u6e90\u8def\u5f84\uff0c\u6307\u5b9a\u67d0\u4e9b\u8d44\u6e90\u8fdb\u884c\u8fc1\u79fb\uff0c\u4f8b\u5982\u9700\u8981\u6307\u5b9a <code>html</code>\u3001<code>mp4</code>\u3001<code>flv</code>\u3001<code>jpg</code>\u3001<code>png</code> \u7b49\u8d44\u6e90\u8fdb\u884c\u8fc1\u79fb\u3002\u5982\u622a\u56fe\u6240\u793a\uff1a</p> <p></p> <p>\u914d\u7f6e\u793a\u4f8b\u4e3a\uff1a</p> <pre><code>/*.html\n/*.mp4\n/*.flv\n/*.jpg\n/*.png\n\n</code></pre> <p>\u503c\u5f97\u6ce8\u610f\u7684\u662f\uff0c\u8be5\u9879\u5982\u672a\u914d\u7f6e\uff0c\u5219\u9ed8\u8ba4\u8fc1\u79fb\u670d\u52a1\u4e0b\u9762\u7684\u6240\u6709\u9759\u6001\u8d44\u6e90\u6587\u4ef6\u3002</p> <ul> <li>\u7b2c\u4e09\u6b65\uff1a\u9009\u62e9\u4e91\u5b58\u50a8\u670d\u52a1</li> </ul> <p>\u8be5\u6b65\u9aa4\u9700\u8981\u786e\u4fdd\u60a8\u5df2\u7ecf\u521b\u5efa\u4e86\u4e00\u4e2a\u4e91\u5b58\u50a8\u670d\u52a1\uff0c\u5426\u5219\u65e0\u6cd5\u914d\u7f6e\u6210\u529f\u3002\u6211\u4eec\u4f1a\u901a\u8fc7\u4e0b\u62c9\u5217\u8868\u7684\u5f62\u5f0f\u5c55\u793a\u5f53\u524d\u8d26\u53f7\u4e0b\u5df2\u521b\u5efa\u7684\u4e91\u5b58\u50a8\u670d\u52a1\uff0c\u4ee5\u4f9b\u9009\u62e9\u3002\u5982\u622a\u56fe\u6240\u793a\uff1a</p> <p></p> <p>\u786e\u4fdd\u4ee5\u4e0a\u914d\u7f6e\u6b63\u786e\u4e4b\u540e\uff0c\u70b9\u51fb\u914d\u7f6e\u754c\u9762\u53f3\u4e0b\u89d2\u7684\u3010\u786e\u5b9a\u3011\u6309\u94ae\u5373\u53ef\u3002</p> <p>\u6ce8\u610f\u4e8b\u9879</p> <ul> <li> <p>\u5f53\u7528\u6237\u66f4\u65b0\u4e86\u6e90\u7ad9\u8d44\u6e90\u65f6\uff0c\u4e3a\u4e86\u4fdd\u8bc1\u8bf7\u6c42\u8bbf\u95ee\u5230\u7684\u8d44\u6e90\u662f\u6700\u65b0\u7684\uff0c\u6b64\u65f6\u9700\u8981\u901a\u8fc7 API \u6216 FTP \u7684\u65b9\u5f0f\u5bf9\u5df2\u7ecf\u5b58\u50a8\u5728\u53c8\u62cd\u4e91\u5b58\u50a8\u4e0a\u7684\u6587\u4ef6\u8fdb\u884c\u5220\u9664\u548c\u66ff\u6362\u64cd\u4f5c\uff1b</p> </li> <li> <p>\u5f53\u6e90\u7ad9\u8d44\u6e90\u8fc1\u79fb\u529f\u80fd\u5904\u4e8e\u6682\u505c\u72b6\u6001\u65f6\uff0c\u60a8\u53ef\u4ee5\u901a\u8fc7 API    \u63a5\u53e3\u9010\u6b65\u5220\u9664\u53c8\u62cd\u4e91\u4e0a\u5bf9\u5e94\u7684\u6587\u4ef6\uff0c\u5c06\u56de\u6e90\u6d41\u91cf\u5e73\u6ed1\u8fc1\u79fb\u81f3\u6e90\u7ad9\uff0c\u6216\u8c03\u6574\u6e90\u7ad9\u5e26\u5bbd\uff0c\u6700\u540e\u518d\u6267\u884c\u5173\u95ed\u64cd\u4f5c\u3002</p> </li> <li>\u8d44\u6e90\u8fc1\u79fb\u7684\u751f\u6548\u6709\u4e00\u4e2a\u524d\u63d0\u6761\u4ef6\uff0c\u90a3\u5c31\u662f\u8d44\u6e90\u6587\u4ef6\u5728 CDN \u7684\u7f13\u5b58\u8fc7\u671f\u65f6\u95f4\u5fc5\u987b\u5927\u4e8e 24 \u5c0f\u65f6\uff0c\u624d\u4f1a\u6267\u884c\u8fc1\u79fb\u52a8\u4f5c\uff1b</li> </ul>"},{"location":"cdn/config/#24","title":"2.4 \u79bb\u7ebf\u6a21\u5f0f","text":"<p>\u529f\u80fd\u8bf4\u660e</p> <p>\u79bb\u7ebf\u6a21\u5f0f\u662f\u6307\u5728\u7f51\u7ad9\u6e90\u670d\u52a1\u5668\u672a\u80fd\u6b63\u5e38\u63d0\u4f9b\u670d\u52a1\u671f\u95f4\uff0c\u4e5f\u5373\u5f53\u6e90\u7ad9\u51fa\u73b0\u5b95\u673a\u3001\u7f51\u7edc\u4e2d\u65ad\u7b49\u60c5\u51b5\u65f6\uff0cCDN \u8282\u70b9\u5728\u8be5\u65f6\u95f4\u6bb5\u5185\u4e0d\u518d\u56de\u6e90\u8bf7\u6c42\u8d44\u6e90\u6587\u4ef6\uff0c\u800c\u7531 CDN \u8282\u70b9\u76f4\u63a5\u8fd4\u56de\u8282\u70b9\u4e0a\u5df2\u7f13\u5b58\u8d44\u6e90\u5185\u5bb9\uff0c\u8be5\u529f\u80fd\u80fd\u591f\u6709\u6548\u964d\u4f4e\u6e90\u6545\u969c\u671f\u95f4\u5e26\u6765\u7684\u635f\u5931\uff0c\u63d0\u5347\u7f51\u7ad9\u7684\u7528\u6237\u4f53\u9a8c\u3002</p> <p>\u914d\u7f6e\u5f15\u5bfc</p> <p>\u767b\u9646 CDN \u63a7\u5236\u53f0\uff0c\u9009\u62e9\u9700\u8981\u914d\u7f6e\u7684\u670d\u52a1\uff0c\u4f9d\u6b21\u8fdb\u5165\u300c\u529f\u80fd\u914d\u7f6e\u300d\u548c\u300c\u56de\u6e90\u7ba1\u7406\u300d\u914d\u7f6e\u754c\u9762\uff0c\u627e\u5230\u300c\u79bb\u7ebf\u6a21\u5f0f\u300d\u914d\u7f6e\u9879\uff0c\u5982\u4e0b\u622a\u56fe\u6240\u793a\uff1a</p> <p>\u7b2c\u4e00\u6b65\uff1a\u4f9d\u6b21\u8fdb\u5165\u914d\u7f6e\u7ba1\u7406\u3001\u56de\u6e90\u7ba1\u7406\u9875\u9762</p> <p>\u8fdb\u5165\u529f\u80fd\u914d\u7f6e\u9875\u9762\uff1a</p> <p></p> <p>\u8fdb\u5165\u56de\u6e90\u7ba1\u7406\u914d\u7f6e\u9875\u9762\uff1a</p> <p></p> <p>\u7b2c\u4e8c\u6b65\uff1a\u5728\u56de\u6e90\u7ba1\u7406\u6a21\u5757\uff0c\u627e\u5230\u3010\u79bb\u7ebf\u6a21\u5f0f\u3011\u914d\u7f6e\u9879</p> <p></p> <p>\u70b9\u51fb\u3010\u786e\u5b9a\u3011\u6309\u94ae\uff0c\u5373\u53ef\u5f00\u542f\u79bb\u7ebf\u6a21\u5f0f\u529f\u80fd\u3002</p> <p>\u6ce8\u610f\u4e8b\u9879</p> <ul> <li>\u6e90\u7ad9\u8fd4\u56de 502\u3001504 \u72b6\u6001\u7801\u65f6\u3001CDN \u8282\u70b9\u56de\u6e90\u8fde\u63a5\u51fa\u9519\u6216\u8005\u54cd\u5e94\u4f53\u8d85\u65f6\u65f6\uff0c\u90fd\u4f1a\u89e6\u53d1\u79bb\u7ebf\u6a21\u5f0f\uff1b</li> <li>\u79bb\u7ebf\u6a21\u5f0f\u7684\u65f6\u95f4\u5468\u671f\u4e3a\u8d44\u6e90\u5185\u5bb9\u5728 CDN \u8282\u70b9\u7684\u7f13\u5b58\u8fc7\u671f\u65f6\u95f4\uff0c\u5728\u8be5\u671f\u95f4\u5185\u4e0d\u518d\u56de\u6e90\u8bf7\u6c42\u8d44\u6e90\u5185\u5bb9\uff1b</li> <li>\u79bb\u7ebf\u6a21\u5f0f\u53ea\u6709\u8d44\u6e90\u5185\u5bb9\u5728 CDN \u8282\u70b9\u7f13\u5b58\u7684\u60c5\u51b5\u4e0b\u624d\u4f1a\u51d1\u6548\uff0c\u5426\u5219\u4e5f\u4f1a\u51fa\u73b0\u8d44\u6e90\u6587\u4ef6\u8bbf\u95ee\u5931\u8d25\u3002</li> </ul>"},{"location":"cdn/config/#25","title":"2.5 \u64cd\u4f5c\u5458\u6388\u6743","text":"<p>\u529f\u80fd\u8bf4\u660e</p> <p>\u9488\u5bf9\u5177\u5907\u5b58\u50a8\u7279\u6027\u7684 CDN \u670d\u52a1\uff0c\u53ef\u4ee5\u521b\u5efa\u64cd\u4f5c\u5458\uff0c\u5e76\u6388\u6743\u67d0\u4e9b\u64cd\u4f5c\u5458\u5bf9\u5728\u53c8\u62cd\u5bf9\u8c61\u5b58\u50a8\u670d\u52a1\u4e0a\u9762\u7684\u975e\u7ed3\u6784\u5316\u6570\u636e\u8fdb\u884c\u8bfb\u53d6\u3001\u5199\u5165\u3001\u5220\u9664\u7b49\u64cd\u4f5c\u3002\u529f\u80fd\u8bf4\u660e\u5982\u4e0b\uff1a</p> <ul> <li>\u53ef\u8bfb\u53d6\uff1a\u62e5\u6709\u4e0b\u8f7d\u6587\u4ef6\u3001\u83b7\u53d6\u6587\u4ef6\u3001\u76ee\u5f55\u4fe1\u606f\u53ca\u7a7a\u95f4\u4f7f\u7528\u60c5\u51b5\u7684\u6743\u9650\uff1b</li> <li>\u53ef\u5199\u5165\uff1a\u62e5\u6709\u4e0a\u4f20\u6587\u4ef6\u3001\u521b\u5efa\u76ee\u5f55\u3001\u64cd\u4f5c\u7f13\u5b58\u5237\u65b0\u7684\u6743\u9650\uff1b</li> <li>\u53ef\u5220\u9664\uff1a\u62e5\u6709\u5220\u9664\u6587\u4ef6\u3001\u5220\u9664\u76ee\u5f55\u7684\u6743\u9650\u3002</li> </ul> <p>\u6ce8\u610f\uff1a\u9488\u5bf9\u4f7f\u7528\u81ea\u4e3b\u6e90\u7684 CDN \u670d\u52a1\uff0c\u53ea\u6709\u5f53\u5f00\u542f\u3010\u6e90\u7ad9\u8d44\u6e90\u8fc1\u79fb\u3011\u529f\u80fd\u65f6\uff0c\u624d\u4f1a\u4f7f\u7528\u5230\u64cd\u4f5c\u5458\u6388\u6743\u529f\u80fd\u3002</p> <p>\u914d\u7f6e\u5f15\u5bfc</p> <p>\u767b\u9646 CDN \u63a7\u5236\u53f0\uff0c\u9009\u62e9\u9700\u8981\u914d\u7f6e\u7684\u670d\u52a1\uff0c\u4f9d\u6b21\u8fdb\u5165\u300c\u529f\u80fd\u914d\u7f6e\u300d\u548c\u300c\u56de\u6e90\u7ba1\u7406\u300d\u914d\u7f6e\u754c\u9762\uff0c\u627e\u5230\u300c\u64cd\u4f5c\u5458\u6388\u6743\u300d\u914d\u7f6e\u9879\uff0c\u5982\u4e0b\u622a\u56fe\u6240\u793a\uff1a</p> <p>\u7b2c\u4e00\u6b65\uff1a\u4f9d\u6b21\u8fdb\u5165\u914d\u7f6e\u7ba1\u7406\u3001\u56de\u6e90\u7ba1\u7406\u9875\u9762</p> <p>\u8fdb\u5165\u3010\u529f\u80fd\u914d\u7f6e\u3011\u9875\u9762</p> <p></p> <p>\u8fdb\u5165\u3010\u56de\u6e90\u7ba1\u7406\u3011\u914d\u7f6e\u9875\u9762</p> <p></p> <p>\u7b2c\u4e8c\u6b65\uff1a\u5728\u3010\u56de\u6e90\u7ba1\u7406\u3011\u6a21\u5757\uff0c\u627e\u5230\u3010\u64cd\u4f5c\u5458\u6388\u6743\u3011\u914d\u7f6e\u9879</p> <p></p> <p>\u672a\u521b\u5efa\u64cd\u4f5c\u5458\uff0c\u9700\u8981\u521b\u5efa\u64cd\u4f5c\u5458\u5e76\u6388\u6743</p> <p></p> <p>\u586b\u5199\u57fa\u672c\u4fe1\u606f\u5e76\u9009\u62e9\u64cd\u4f5c\u6743\u9650\uff0c\u70b9\u51fb\u3010\u521b\u5efa\u5e76\u6388\u6743\u3011\u6309\u94ae\uff0c\u5373\u53ef\u521b\u5efa\u64cd\u4f5c\u5458\u5e76\u5bf9\u670d\u52a1\u8fdb\u884c\u6388\u6743\u3002</p> <p>\u5df2\u521b\u5efa\u64cd\u4f5c\u5458\uff0c\u9700\u8981\u5bf9\u64cd\u4f5c\u5458\u8fdb\u884c\u6388\u6743</p> <p></p> <p>\u5728\u64cd\u4f5c\u5458\u53ef\u9009\u5217\u8868\u4e2d\uff0c\u6839\u636e\u4e1a\u52a1\u8981\u6c42\uff0c\u9009\u62e9\u5df2\u7ecf\u521b\u5efa\u597d\u7684\u64cd\u4f5c\u5458\u5373\u53ef\uff0c\u70b9\u51fb\u3010\u6388\u6743\u3011\u6309\u94ae\uff0c\u5373\u53ef\u6388\u6743\u3002</p> <p>\u6ce8\u610f\u4e8b\u9879</p> <ul> <li>\u64cd\u4f5c\u5458\u6743\u9650\u5177\u5907\u53ef\u8bfb\u53d6\u3001\u53ef\u5199\u5165\u3001\u53ef\u5220\u9664\u7b49\u529f\u80fd\uff0c\u8bf7\u8c28\u614e\u5206\u914d\u6743\u9650\uff1b</li> <li>\u64cd\u4f5c\u5458\u8d26\u53f7\u548c\u5bc6\u7801\u8bf7\u8c28\u614e\u4fdd\u7ba1\uff0c\u4e00\u65e6\u6cc4\u9732\uff0c\u8bf7\u53ca\u65f6\u66f4\u6362\u3002</li> </ul>"},{"location":"cdn/config/#3","title":"3.\u7f13\u5b58\u914d\u7f6e","text":""},{"location":"cdn/config/#31","title":"3.1 \u7f13\u5b58\u8fc7\u671f\u914d\u7f6e","text":"<p>\u529f\u80fd\u8bf4\u660e</p> <p>\u7f13\u5b58\u914d\u7f6e\u662f\u6307\u53c8\u62cd\u4e91 CDN \u52a0\u901f\u8282\u70b9\uff08\u5305\u62ec\u8fb9\u7f18\u8282\u70b9\u548c\u4e2d\u5fc3\u8282\u70b9\uff09\u5728\u7f13\u5b58\u60a8\u7684\u8d44\u6e90\u6587\u4ef6\u65f6\u9075\u5faa\u7684\u4e00\u5957\u8fc7\u671f\u89c4\u5219\u3002\u5f53\u8d44\u6e90\u6587\u4ef6\u5904\u4e8e\u8fc7\u671f\u72b6\u6001\u65f6\uff0c\u6b64\u65f6\u7528\u6237\u8bf7\u6c42\u4f1a\u7531\u8282\u70b9\u53d1\u9001\u81f3\u6e90\u7ad9\uff0c\u91cd\u65b0\u83b7\u53d6\u8d44\u6e90\u5185\u5bb9\u5e76\u7f13\u5b58\u81f3\u8282\u70b9\uff0c\u540c\u65f6\u8fd4\u56de\u7ed9\u6700\u7ec8\u7528\u6237\uff1b\u5f53\u8d44\u6e90\u5185\u5bb9\u5904\u4e8e\u672a\u8fc7\u671f\u72b6\u6001\u65f6\uff0c\u60a8\u7684\u7528\u6237\u8bf7\u6c42\u5230\u8fbe\u8282\u70b9\u540e\uff0c\u4f1a\u7531\u8282\u70b9\u76f4\u63a5\u54cd\u5e94\u6700\u7ec8\u7528\u6237\u7684\u8bf7\u6c42\u3002\u5408\u7406\u7684\u914d\u7f6e\u8d44\u6e90\u6587\u4ef6\u7f13\u5b58\u65f6\u95f4\uff0c\u80fd\u591f\u6709\u6548\u7684\u63d0\u5347\u7f13\u5b58\u547d\u4e2d\u7387\uff0c\u964d\u4f4e\u56de\u6e90\u7387\uff0c\u8282\u7701\u60a8\u7684\u6e90\u7ad9\u5e26\u5bbd\u3002</p> <p>\u914d\u7f6e\u5f15\u5bfc</p> <p>\u767b\u5f55 CDN\u63a7\u5236\u53f0\uff0c\u9009\u62e9\u9700\u8981\u914d\u7f6e\u7684\u670d\u52a1\uff0c\u4f9d\u6b21\u8fdb\u5165\uff1a\u670d\u52a1\u7ba1\u7406 &gt; \u529f\u80fd\u914d\u7f6e &gt; \u7f13\u5b58\u914d\u7f6e &gt; \u7f13\u5b58\u8fc7\u671f\u914d\u7f6e\uff0c\u70b9\u51fb\u3010\u7ba1\u7406\u3011\u6309\u94ae\u5373\u53ef\u5f00\u59cb\u914d\u7f6e\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff1a</p> <p></p> <p>\u81ea\u5b9a\u4e49\u7f13\u5b58\u914d\u7f6e</p> <p>\u60a8\u53ef\u4ee5\u6839\u636e\u81ea\u8eab\u4e1a\u52a1\u9700\u6c42\uff0c\u5728\u914d\u7f6e\u754c\u9762\u7684\u53f3\u4e0a\u89d2\uff0c\u70b9\u51fb\u53f3\u4e0a\u89d2\u7684\u3010\u6dfb\u52a0\u3011 \u6309\u94ae\u8fdb\u884c\u8d44\u6e90\u6587\u4ef6\u7f13\u5b58\u8fc7\u671f\u65f6\u95f4\u7684\u914d\u7f6e\uff0c\u5982\u622a\u56fe\u6240\u793a\uff1a</p> <p>\u8fdb\u5165\u7f13\u5b58\u8fc7\u671f\u7ba1\u7406\u914d\u7f6e\u754c\u9762</p> <p></p> <p>\u8fdb\u5165\u81ea\u5b9a\u4e49\u7f13\u5b58\u8fc7\u671f\u914d\u7f6e\u754c\u9762</p> <p></p> <p>\u5728\u8be5\u914d\u7f6e\u754c\u9762\uff0c\u60a8\u53ef\u4ee5\u9488\u5bf9\u6a21\u677f\u3001\u7f13\u5b58\u65f6\u95f4\u3001\u8d44\u6e90\u8def\u5f84\u3001\u72b6\u6001\u7801\u7b49\u8fdb\u884c\u9009\u62e9\u548c\u914d\u7f6e\u3002CDN \u652f\u6301\u4e09\u79cd\u7ef4\u5ea6\u7684\u7f13\u5b58\u8fc7\u671f\u89c4\u5219\u914d\u7f6e\uff0c\u5206\u522b\u4e3a\uff1a</p> <p>1.\u6839\u636e\u6587\u4ef6\u7c7b\u578b\u8bbe\u7f6e\u7f13\u5b58\u8fc7\u671f\u7b56\u7565</p> <p>\u60a8\u53ef\u4ee5\u6839\u636e\u6a21\u677f\u586b\u5145\u6587\u4ef6\u7c7b\u578b\u540e\u7f00\uff0c\u6839\u636e\u6587\u4ef6\u7c7b\u578b\u6765\u8bbe\u7f6e\u7f13\u5b58\u65f6\u95f4\uff0c\u5982\u4e0b\u793a\u4f8b\u6240\u793a\uff1a</p> <p>/*.(txt,doc,wri,docs)   \u7f13\u5b58\u65f6\u95f4 1 \u5929\uff1b</p> <p>\u8bbe\u7f6e\u5b8c\u6210\u540e\uff0c\u57df\u540d\u4e0b\u6240\u6709\u5339\u914d <code>.txt .doc .wri .docs</code> \u7684\u6587\u672c\u8d44\u6e90\uff0c\u5728\u8282\u70b9\u7684\u7f13\u5b58\u6709\u6548\u65f6\u95f4\u5747\u4e3a 1 \u5929\u3002</p> <p>2.\u6839\u636e\u6587\u4ef6\u76ee\u5f55\u8bbe\u7f6e\u7f13\u5b58\u8fc7\u671f\u7b56\u7565</p> <p>\u60a8\u53ef\u4ee5\u81ea\u5b9a\u4e49\u914d\u7f6e\u6587\u4ef6\u8def\u5f84\uff0c\u6839\u636e\u6587\u4ef6\u8def\u5f84\u6765\u8bbe\u7f6e\u7f13\u5b58\u65f6\u95f4\uff0c\u5982\u4e0b\u793a\u4f8b\u6240\u793a\uff1a</p> <p>/dir/*   \u7f13\u5b58\u65f6\u95f4 12 \u5c0f\u65f6</p> <p>3.\u5168\u5c40\u7f13\u5b58\u8fc7\u671f\u7b56\u7565\u914d\u7f6e</p> <p>\u5168\u5c40\u7f13\u5b58\u7b56\u7565\u9002\u5408\u6e90\u7ad9\u5168\u662f\u9759\u6001\u8d44\u6e90\u7684\u5ba2\u6237\uff0c\u53ef\u4ee5\u9488\u5bf9\u8be5\u670d\u52a1\u4e00\u952e\u5f00\u542f\u914d\u7f6e\u7f13\u5b58\u8fc7\u671f\u65f6\u95f4\uff0c\u5f00\u542f\u8bf7\u8c28\u614e\u3002\u8be6\u7ec6\u914d\u7f6e\u53ef\u53c2\u7167\u5982\u4e0b\u56fe\u6240\u793a\uff1a</p> <p></p> <p>\u8bbe\u7f6e\u5b8c\u6210\u540e\uff0c\u8be5\u670d\u52a1\u4e0b\u6240\u6709\u57df\u540d\u5339\u914d\u7684\u8d44\u6e90\uff0c\u5728\u8282\u70b9\u7684\u7f13\u5b58\u6709\u6548\u65f6\u95f4\u5747\u4e3a 7 \u5929\u3002</p> <p>\u6ce8\u610f\u4e8b\u9879\uff1a</p> <ul> <li>\u5168\u5c40\u7f13\u5b58\u5728\u81ea\u5b9a\u4e49\u7f13\u5b58\u914d\u7f6e\u91cc\u9762\u7684\u4f18\u5148\u7ea7\u662f\u6700\u4f4e\u7684\uff0c\u4e14\u4f18\u5148\u7ea7\u4e0d\u53ef\u8c03\u8282\uff0c\u5982\u4e0b\u56fe\u6240\u793a\uff1a</li> </ul> <p></p> <ul> <li>\u5168\u5c40\u7f13\u5b58\u8bbe\u7f6e\u6709\u4e00\u4e2a\u5355\u72ec\u7684\u5f00\u5173\uff0c\u9700\u8981\u5f00\u542f\u4e4b\u540e\uff0c\u624d\u53ef\u4ee5\u8fdb\u884c\u914d\u7f6e\u3002</li> </ul> <p>\u9ed8\u8ba4\u914d\u7f6e\u6a21\u677f</p> <p>\u7279\u522b\u5730\uff0c\u6211\u4eec\u9488\u5bf9\u81ea\u5b9a\u4e49\u7f13\u5b58\u914d\u7f6e\uff0c\u9ed8\u8ba4\u89c4\u5212\u4e86\u6a21\u677f\uff0c\u5e76\u4e14\u9884\u8bbe\u4e86\u7f13\u5b58\u65f6\u95f4\uff0c\u60a8\u53ef\u4ee5\u6839\u636e\u5177\u4f53\u60c5\u51b5\u8fdb\u884c\u4fee\u6539\u3002\u5177\u4f53\u6a21\u677f\u5982\u4e0b\uff1a</p> <pre><code>\u9996\u9875\uff1a/  \u7f13\u5b58 12 \u5c0f\u65f6\uff1b\n\u76ee\u5f55\u9875\uff1a/*/    \u7f13\u5b58 12 \u5c0f\u65f6\uff1b\n\u56fe\u7247\u6587\u4ef6\uff1a/*.(jpg,jpeg,png,bmp,gif,psd,ico,tga,imb,tiff)      \u7f13\u5b58 7 \u5929\uff1b\n\u6587\u672c\u6587\u4ef6\uff1a/*.(txt,doc,wri,docs,css,js,dot,xml,log,bat,csv)    \u7f13\u5b58 1 \u5929\uff1b\n\u97f3\u89c6\u9891\u6587\u4ef6\uff1a/*.(wav,mp3,wmv,rmi,aac,mp4,rmvb,mkv,avi,flv,swf,rm,mov,movie,qt)  \u7f13\u5b58  7 \u5929\uff1b\n\u4e0b\u8f7d\u7c7b\u6587\u4ef6\uff1a/*.(exe,ios,apk,ipa,pxl,sis,cab,deb,rar,zip,gzip,tar,7z,bzip2,dmg,gz,wim,tbz,tpz,z,jar)      \u7f13\u5b58 7 \u5929\uff1b\n</code></pre> <p>4.URI \u5e26\u53c2\u6570\u914d\u7f6e\u7f13\u5b58\u8fc7\u671f\u7b56\u7565</p> <p>\u9664\u4e86\u6309\u7167\u6587\u4ef6\u7c7b\u578b\uff08\u6587\u4ef6\u6269\u5c55\u540d\uff09\u3001\u6587\u4ef6\u76ee\u5f55\u4ee5\u53ca\u5168\u5c40\u7f13\u5b58\u6765\u914d\u7f6e\u7f13\u5b58\u8fc7\u671f\u65f6\u95f4\uff0c\u60a8\u8fd8\u53ef\u4ee5\u6839\u636e <code>URI</code> \u5e26\u53c2\u6570\u6765\u914d\u7f6e\u7f13\u5b58\u8fc7\u671f\u65f6\u95f4\uff0c\u5177\u4f53\u683c\u5f0f\u5982\u4e0b\uff1a</p> <p>/dir/*?foo&amp;bar=123      \u7f13\u5b58\u65f6\u95f4 <code>1</code> \u5c0f\u65f6</p> <p>\u4ee5\u4e0a\u89c4\u5219\u4e2d\uff0c<code>?</code>\u540e\u9762\u8ddf\u968f\u7684\u5c31\u662f\u53c2\u6570\u7b5b\u9009\u89c4\u5219\uff1b<code>*</code>\u7279\u6307\u901a\u914d\u7b26\uff0c\u5982\u4e0d\u9700\u914d\u7f6e\u901a\u914d\u7b26\uff0c\u53ef\u4ee5\u4f7f\u7528\u5177\u4f53\u8d44\u6e90\u8def\u5f84\uff0c\u5982\u4e0b\u89c4\u5219\u6240\u793a\uff1a</p> <p>/dir/index.html?foo&amp;bar=123     \u7f13\u5b58\u65f6\u95f4 <code>1</code> \u5c0f\u65f6</p> <p>\u5173\u4e8e <code>?</code>\u540e\u9762\u7684\u53c2\u6570\u7b5b\u9009\u89c4\u5219\u914d\u7f6e\u8bf7\u53c2\u8003\u5982\u4e0b\u5206\u7c7b\uff1a</p> \u5206\u7c7b \u8bf4\u660e \u793a\u4f8b \u53ea\u6709 <code>KEY</code> \u6ca1\u6709 <code>VALUE</code> \u5339\u914d\u8be5\u53c2\u6570 <code>KEY</code> \u6240\u6709\u5bf9\u5e94\u7684\u503c\u4ee5\u53ca\u503c\u4e3a\u7a7a\u8fd9\u79cd\u7279\u6b8a\u7684\u60c5\u51b5 <code>/dir/*?bar&amp;foo</code> \u65e2\u6709 <code>KEY</code> \u4e5f\u6709 <code>VALUE</code>\uff08\u683c\u5f0f\uff1aK=V\uff09 \u4f1a\u7cbe\u786e\u5339\u914d <code>KEY</code> \u548c <code>VALUE</code> <code>/dir/*?foo=123&amp;bar=456</code> \u53ea\u6709 <code>\uff1f</code>\uff0c\u4e0d\u5e26\u4efb\u4f55\u53c2\u6570 \u8868\u793a\u53c2\u6570\u4e3a\u7a7a <code>/dir/*?</code> \u4e0d\u5e26 <code>\uff1f</code> \u8868\u793a\u4e0d\u9a8c\u8bc1\u53c2\u6570 <code>/dir/*</code> <p>\u6ce8\u610f\uff1a</p> <ul> <li>\u53c2\u6570\u89c4\u5219\u914d\u7f6e\u987a\u5e8f\u4e0d\u654f\u611f\uff0c\u53c2\u6570\u4e4b\u95f4\u901a\u8fc7 <code>&amp;</code> \u8fdb\u884c\u8fde\u63a5\uff1b</li> <li>URI \u4ec5\u9650 PATH\uff08\u8def\u5f84\uff09\u4ee5\u53ca ARGS\uff08\u53c2\u6570\uff09\u90e8\u5206\uff0c\u4f8b\u5982\uff1a<code>/m/n/*?bar&amp;foo=123</code>\u3002</li> </ul> <p>\u4e0d\u7f13\u5b58\u914d\u7f6e</p> <p>\u6839\u636e\u4e1a\u52a1\u60c5\u51b5\uff0c\u53ef\u4ee5\u9488\u5bf9\u4e00\u4e9b\u52a8\u6001\u8d44\u6e90\u6587\u4ef6\uff08 \u4f8b\u5982\uff1aphp\u3001jsp\u3001asp\u3001do\u3001cgi\u3001action\u3001json \u7b49\uff09\u5f3a\u5236\u914d\u7f6e\u4e0d\u7f13\u5b58\uff0c \u8be6\u7ec6\u914d\u7f6e\u53ef\u53c2\u7167\u5982\u4e0b\u6240\u793a\uff1a</p> <p></p> <p>/*.(asp,php,jsp,do,json)     \u914d\u7f6e\u4e0d\u7f13\u5b58</p> <p>\u9ed8\u8ba4\u7f13\u5b58\u7b56\u7565</p> <p>\u5728\u6ca1\u6709\u5339\u914d\u5230\u81ea\u5b9a\u4e49\u7f13\u5b58\u89c4\u5219\u4e14\u6e90\u7ad9\u4e5f\u6ca1\u6709\u8fd4\u56de\u4efb\u4f55\u6709\u6548\u7f13\u5b58\u5934\u7684\u60c5\u51b5\u4e0b\uff0c\u6211\u4eec\u7684\u9ed8\u8ba4\u914d\u7f6e\u7b56\u7565\u5982\u4e0b\uff1a</p> <p>1.\u9488\u5bf9\u9759\u6001\u8d44\u6e90\uff0c\u6240\u6709\u6b63\u5e38\u72b6\u6001\u7801\uff08\u5927\u4e8e\u7b49\u4e8e 200 \u5c0f\u4e8e 400\uff09\u5747\u7f13\u5b58 8  \u5929\u3002\u7279\u522b\u5730\uff0c301 \u54cd\u5e94\u7f13\u5b58 2 \u5c0f\u65f6\uff0c302 \u54cd\u5e94\u7f13\u5b58 20 \u5206\u949f</p> <p>2.\u9488\u5bf9\u52a8\u6001\u8d44\u6e90\uff0c\u7a0b\u5e8f\u4f1a\u81ea\u52a8\u8bc6\u522b\uff0c\u5219\u4e0d\u8fdb\u884c\u7f13\u5b58</p> <p>3.\u5bf9\u4e8e\u5176\u4ed6\u5927\u4e8e\u7b49\u4e8e 400 \u7684\u4e0d\u6b63\u5e38\u54cd\u5e94\uff0c\u5219\u4e0d\u8fdb\u884c\u7f13\u5b58</p> <p>\u7f13\u5b58\u4f18\u5148\u7ea7</p> <p>\u8bf7\u6839\u636e\u5177\u4f53\u7f13\u5b58\u4f18\u5148\u7ea7\u60c5\u51b5\u5408\u7406\u914d\u7f6e\u7f13\u5b58\u7b56\u7565\uff0c\u53c8\u62cd\u4e91 CDN \u52a0\u901f\u5e73\u53f0\u76ee\u524d\u7684\u7f13\u5b58\u4f18\u5148\u7ea7\u5982\u4e0b\uff1a</p> <p>\u4e0d\u7f13\u5b58\u914d\u7f6e\uff08\u540e\u53f0\u8bbe\u7f6e\uff09 &gt; \u81ea\u5b9a\u4e49\u7f13\u5b58\u914d\u7f6e\uff08\u540e\u53f0\u914d\u7f6e\uff09 &gt; \u6e90\u7ad9\u7f13\u5b58\u914d\u7f6e &gt; \u9ed8\u8ba4\u7f13\u5b58\u7b56\u7565\u3002</p> <p>\u6ce8\u610f\u4e8b\u9879\uff1a</p> <ul> <li>\u6e90\u7ad9\u7f13\u5b58\u914d\u7f6e\uff0c\u6307 Cache-Control \u548c Expires \u8bf7\u6c42\u5934\u7684\u8bbe\u7f6e</li> <li>\u4ee5\u4e0a\u7f13\u5b58\u914d\u7f6e\u4f18\u5148\u7ea7\u76ee\u524d\u4e0d\u652f\u6301\u987a\u5e8f\u8c03\u8282\uff0c\u540e\u7eed\u6211\u4eec\u4f1a\u8003\u8651\u652f\u6301</li> </ul> <p>\u7279\u522b\u58f0\u660e</p> <p>\u9488\u5bf9\u4f7f\u7528\u53c8\u62cd\u4e91\u5b58\u50a8\u670d\u52a1\u7684\u5ba2\u6237\uff0c\u6211\u4eec\u6682\u65f6\u4e0d\u652f\u6301\u7f13\u5b58\u914d\u7f6e\u7684\u81ea\u5b9a\u4e49\u8bbe\u7f6e\uff0c\u6211\u4eec\u9ed8\u8ba4\u7ed9\u51fa\u4e86\u4e00\u4e2a\u9ed8\u8ba4\u7684\u7f13\u5b58\u914d\u7f6e\u89c4\u5219\uff0c\u5177\u4f53\u5982\u4e0b\uff1a</p> <p>\u5bf9\u4e8e\u6b63\u5e38\u7684\u72b6\u6001\u7801\uff08\u5927\u4e8e\u7b49\u4e8e 200 \u5c0f\u4e8e 400\uff09\uff1a8 \u5929</p> <p>\u5bf9\u4e8e\u5176\u4ed6\u5927\u4e8e\u7b49\u4e8e 400 \u7684\u4e0d\u6b63\u5e38\u54cd\u5e94\u7f13\u5b58 5 \u5206\u949f</p> <p>\u52a8\u9759\u81ea\u52a8\u5206\u79bb</p> <p>\u9488\u5bf9\u4f7f\u7528 <code>\u81ea\u6709\u6e90</code> \u7684 CDN \u670d\u52a1\u800c\u8a00\uff0c\u5f53\u6ca1\u6709\u5339\u914d\u5230\u81ea\u5b9a\u4e49\u7f13\u5b58\u89c4\u5219\u4e14\u6e90\u7ad9\u4e5f\u6ca1\u6709\u8fd4\u56de\u4efb\u4f55\u6709\u6548\u7684\u7f13\u5b58\u5934\u65f6\uff0c\u6211\u4eec\u5c31\u4f1a\u5bf9\u56de\u6e90\u5185\u5bb9\u8fdb\u884c\u52a8\u9759\u5185\u5bb9\u8bc6\u522b\u3002\u7279\u522b\u5730\uff0c\u6211\u4eec\u4f1a\u6839\u636e\u54cd\u5e94\u5934\u4e2d\u7684 <code>Content-Type</code> \u5b57\u6bb5\u548c URL \u4e2d\u7684\u6587\u4ef6\u540e\u7f00\u540d\u6765\u5224\u65ad\u662f\u5426\u662f\u9759\u6001\u5185\u5bb9\uff0c\u5176\u4e2d <code>Content-Type</code> \u5339\u914d\u4f18\u5148\u7ea7\u9ad8\u4e8e\u6587\u4ef6\u540e\u7f00\u540d\u3002</p> <p>\u53c2\u8003\u5217\u8868</p> <p>\u4ee5\u4e0b\u662f\u6211\u4eec\u7ef4\u62a4\u7684\u4e00\u4efd <code>Content-Type</code> \u548c\u6587\u4ef6\u540e\u7f00\u540d\u5217\u8868\uff0c\u82e5\u6ee1\u8db3\u5339\u914d\u6211\u4eec\u5c31\u8ba4\u4e3a\u662f\u9759\u6001\u5185\u5bb9\uff1a</p> <p>Content-Type \u5217\u8868</p> <pre><code>text/css\ntext/javascript\napplication/javascript\napplication/x-javascript\n\nimage/gif\nimage/png\nimage/jpeg\nimage/webp\nimage/tiff\nimage/x-icon\nimage/x-ms-bmp\nimage/svg+xml\n\napplication/font-woff\napplication/java-archive\napplication/msword\napplication/pdf\napplication/postscript\napplication/zip\napplication/octet-stream\n\napplication/vnd.openxmlformats-officedocument.wordprocessingml.document\napplication/vnd.openxmlformats-officedocument.spreadsheetml.sheet\napplication/vnd.openxmlformats-officedocument.presentationml.presentation\n\naudio/mpeg\naudio/ogg\naudio/x-m4a\n\nvideo/mp4\nvideo/x-flv\nvideo/x-m4v\n</code></pre> <p>\u6587\u4ef6\u540e\u7f00\u540d\u5217\u8868</p> css js jpg jpeg gif ico png bmp pict csv doc pdf pls ppt tif tiff eps ejs swf midi mida ttf eot woff otf svg svgz webp docx xlsx xls pptx ps class jar bz2 bzip exe flv gzip rar rtf tgz gz txt zip mp3 mp4 ogg m4a m4v apk"},{"location":"cdn/config/#32","title":"3.2 \u53c2\u6570\u8ddf\u968f","text":"<p>\u529f\u80fd\u8bf4\u660e</p> <p>CDN \u63d0\u4f9b\u53c2\u6570\u8fc7\u6ee4\u914d\u7f6e\u7b49\u9009\u9879\uff0c\u60a8\u53ef\u4ee5\u6839\u636e\u5b9e\u9645\u4e1a\u52a1\u60c5\u51b5\uff0c\u63a7\u5236\u662f\u5426\u5bf9\u8bbf\u95ee\u6216\u8005\u56de\u6e90 URL \u4e2d\u7684\u5e26 \u201c\uff1f\u201d \u540e\u7684\u53c2\u6570\u8fdb\u884c\u8fc7\u6ee4\u64cd\u4f5c\u3002\u53c2\u6570\u8ddf\u968f\u529f\u80fd\u5305\u62ec\u4e09\u79cd\u6a21\u5f0f\uff0c\u5206\u522b\u662f <code>\u53c2\u6570\u4e0d\u8ddf\u968f</code> \u3001<code>\u5168\u7a0b\u8ddf\u968f</code> \u3001<code>\u56de\u6e90\u8ddf\u968f</code> \uff0c\u7cfb\u7edf\u9ed8\u8ba4\u4e3a <code>\u5168\u7a0b\u8ddf\u968f</code> \u6a21\u5f0f\u3002\u4e00\u822c\u60c5\u51b5\u4e0b\uff0c\u6839\u636e\u4e1a\u52a1\u60c5\u51b5\uff0c\u5efa\u8bae\u9009\u62e9 <code>\u53c2\u6570\u4e0d\u8ddf\u968f</code> \u6765\u63d0\u9ad8\u8d44\u6e90\u6587\u4ef6\u7f13\u5b58\u547d\u4e2d\u7387\u3002\u8be6\u7ec6\u4ecb\u7ecd\u5982\u4e0b\uff1a</p> <p>\u53c2\u6570\u4e0d\u8ddf\u968f</p> <p>\u8bf4\u660e\uff1a\u5f00\u542f\u540e\uff0c\u7cfb\u7edf\u4f1a\u8fc7\u6ee4\u8bf7\u6c42\u4e2d\u7684\u67e5\u8be2\u5b57\u7b26\u4e32\uff0c\u5e76\u4e14\u67e5\u8be2\u5b57\u7b26\u4e32\u4e0d\u4f1a\u4f20\u9012\u7ed9\u6e90\u7ad9</p> <p>\u793a\u4f8b\uff1a\uff08\u8bbf\u95ee\uff09/foo.js?a=1&amp;b=2 =&gt; \uff08\u7f13\u5b58\uff09/foo.js =&gt; \uff08\u56de\u6e90\uff09/foo.js</p> <p>\u5168\u7a0b\u8ddf\u968f</p> <p>\u8bf4\u660e\uff1a\u5f00\u542f\u540e\uff0c\u5c06\u4e0d\u518d\u8fc7\u6ee4\u8bf7\u6c42\u4e2d\u7684\u67e5\u8be2\u5b57\u7b26\u4e32\uff0c\u5e76\u5c06\u67e5\u8be2\u5b57\u7b26\u4e32\u4f20\u9012\u7ed9\u6e90\u7ad9</p> <p>\u793a\u4f8b\uff1a\uff08\u8bbf\u95ee\uff09/foo.js?a=1&amp;b=2 =&gt; \uff08\u7f13\u5b58\uff09/foo.js?a=1&amp;b=2 =&gt; \uff08\u56de\u6e90\uff09/foo.js?a=1&amp;b=2</p> <p>\u56de\u6e90\u8ddf\u968f</p> <p>\u8bf4\u660e\uff1a\u5f00\u542f\u540e\uff0c\u4f1a\u8fc7\u6ee4\u8bf7\u6c42\u4e2d\u7684\u67e5\u8be2\u5b57\u7b26\u4e32\uff0c\u5728\u8bbf\u95ee\u56de\u6e90\u9636\u6bb5\u4f1a\u5c06\u67e5\u8be2\u5b57\u7b26\u4e32\u4f20\u9012\u7ed9\u6e90\u7ad9</p> <p>\u793a\u4f8b\uff1a\uff08\u8bbf\u95ee\uff09/foo.js?a=1&amp;b=2 =&gt; \uff08\u7f13\u5b58\uff09/foo.js =&gt; \uff08\u56de\u6e90\uff09/foo.js?a=1&amp;b=2</p> <p>\u914d\u7f6e\u5f15\u5bfc</p> <p>\u767b\u5f55 CDN\u63a7\u5236\u53f0\uff0c\u9009\u62e9\u9700\u8981\u914d\u7f6e\u7684\u670d\u52a1\uff0c\u4f9d\u6b21\u8fdb\u5165\uff1a\u670d\u52a1\u7ba1\u7406 &gt; \u529f\u80fd\u914d\u7f6e &gt; \u7f13\u5b58\u914d\u7f6e &gt; \u53c2\u6570\u8ddf\u968f\uff0c\u70b9\u51fb\u3010\u7ba1\u7406\u3011\u6309\u94ae\u5373\u53ef\u5f00\u59cb\u914d\u7f6e\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff1a</p> <p></p> <p>\u5982\u4e0a\u56fe\u6240\u793a\uff0c\u7528\u6237\u53ef\u4ee5\u6839\u636e\u4e1a\u52a1\u60c5\u51b5\u6765\u5408\u7406\u9009\u9879\u3002</p> <p>\u6ce8\u610f\uff1a\u53c2\u6570\u8ddf\u968f\u529f\u80fd\uff0c\u53ef\u4ee5\u914d\u5408\u7f13\u5b58\u8fc7\u671f\u914d\u7f6e\u529f\u80fd\u6765\u4f7f\u7528\u3002</p>"},{"location":"cdn/config/#33","title":"3.3 \u53c2\u6570\u987a\u5e8f\u8bc6\u522b","text":"<p>\u529f\u80fd\u8bf4\u660e</p> <p>\u901a\u5e38 CDN \u8282\u70b9\u662f\u4ee5\u6574\u6761 URL \u4e3a\u7c92\u5ea6\u5bf9\u6587\u4ef6\u8fdb\u884c\u7f13\u5b58\u7684\uff0c\u7136\u800c URL \u4e2d\u53c2\u6570\u7684\u4e0d\u540c\u6392\u5217\u7ec4\u5408\u4f7f\u5f97 CDN \u8282\u70b9\u4f1a\u5c06\u540c\u4e00\u4efd\u6587\u4ef6\u7f13\u5b58\u591a\u4efd\uff0c\u5f00\u542f\u53c2\u6570\u987a\u5e8f\u8bc6\u522b\u529f\u80fd\u4e4b\u540e\uff0c\u53ef\u4ee5\u4f7f\u5f97\u8d44\u6e90\u6587\u4ef6\u53ea\u7f13\u5b58\u4e00\u4efd\uff0c\u4ece\u800c\u63d0\u9ad8\u8d44\u6e90\u6587\u4ef6\u7684\u7f13\u5b58\u547d\u4e2d\u7387\u3002</p> <p>\u5b9e\u73b0\u539f\u7406</p> <p>\u4f8b\u5982\u4e0b\u65b9\u4e24\u6761 URL\uff0c\u5bf9\u5e94\u7684\u8d44\u6e90\u6587\u4ef6\u662f\u76f8\u540c\u7684\uff0cCDN \u8282\u70b9\u662f\u5206\u5f00\u7f13\u5b58\u7684\uff1a</p> <pre><code>https://www.upyun.com/test.jpg?a=1&amp;b=2&amp;c=3\nhttps://www.upyun.com/test.jpg?c=3&amp;b=2&amp;a=1\n\n</code></pre> <p>\u529f\u80fd\u5f00\u542f\u540e\uff0cCDN \u8282\u70b9\u6536\u5230\u7528\u6237\u8bf7\u6c42\uff0c\u9996\u5148\u5bf9 URL \u4e2d\u7684\u53c2\u6570\u6309\u7279\u6709\u7684\u89c4\u5219\u8fdb\u884c\u6392\u5e8f\uff0c\u7136\u540e\u518d\u67e5\u627e\u5339\u914d\u8282\u70b9\u7f13\u5b58\u6216\u76f4\u63a5\u56de\u6e90\u83b7\u53d6\u6587\u4ef6\uff0c\u4e5f\u5c31\u662f\u8bf4\u4e0b\u65b9\u8fd9\u4e9b URL\uff1a</p> <pre><code>https://www.upyun.com/test.jpg?a=1&amp;b=2&amp;c=3\nhttps://www.upyun.com/test.jpg?a=1&amp;c=3&amp;b=2\nhttps://www.upyun.com/test.jpg?b=2&amp;a=1&amp;c=3\nhttps://www.upyun.com/test.jpg?b=2&amp;c=3&amp;a=1\nhttps://www.upyun.com/test.jpg?c=3&amp;a=1&amp;b=2\nhttps://www.upyun.com/test.jpg?c=3&amp;b=2&amp;a=1\n\n</code></pre> <p>\u6700\u540e\u7684\u7ed3\u679c\u662f\uff0cCDN \u8282\u70b9\u5c06\u53ea\u7f13\u5b58\u4e00\u4efd\uff1a</p> <pre><code>https://www.upyun.com/test.jpg?a=1&amp;b=2&amp;c=3\n</code></pre> <p>\u914d\u7f6e\u5f15\u5bfc</p> <p>\u767b\u5f55 CDN\u63a7\u5236\u53f0\uff0c\u9009\u62e9\u9700\u8981\u914d\u7f6e\u7684\u670d\u52a1\uff0c\u4f9d\u6b21\u8fdb\u5165\uff1a\u670d\u52a1\u7ba1\u7406 &gt; \u529f\u80fd\u914d\u7f6e &gt; \u7f13\u5b58\u914d\u7f6e &gt; \u53c2\u6570\u987a\u5e8f\u8bc6\u522b\uff0c\u6ed1\u52a8\u53f3\u8fb9\u7684\u6309\u94ae\u5373\u53ef\u5f00\u542f\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff1a</p> <p></p> <p>\u5982\u4e0a\u56fe\u6240\u793a\uff0c\u70b9\u51fb\u3010\u786e\u5b9a\u3011\u5373\u53ef\u5f00\u542f\u3002</p> <p>\u6ce8\u610f\u4e8b\u9879</p> <ul> <li> <p>\u5f00\u542f\u6b64\u529f\u80fd\u540e\uff0c\u56e0 CDN \u8282\u70b9\u4f1a\u5c06\u7528\u6237\u8bbf\u95ee URL    \u4e2d\u7684\u53c2\u6570\u91cd\u65b0\u6392\u5e8f\u540e\u8fdb\u884c\u7f13\u5b58\u5339\u914d\uff0c\u6240\u4ee5\u5c06\u6709\u53ef\u80fd\u65e0\u6cd5\u5339\u914d\u4e4b\u524d\u5df2\u7f13\u5b58\u7684\u6587\u4ef6\uff0c\u5bfc\u81f4\u56de\u6e90\u5e26\u5bbd\u589e\u5927\uff0c\u6240\u4ee5\u8bf7\u8c28\u614e\u5f00\u542f\uff0c\u5efa\u8bae\u5728\u521a\u521b\u5efa\u65b0\u670d\u52a1\u65f6\u5f00\u542f\uff1b</p> </li> <li> <p>\u8be5\u7279\u6027\u4f9d\u8d56\u4e8e\u53c2\u6570\u8ddf\u968f\u7279\u6027\uff0c\u4e5f\u5373\u8fc7\u6ee4\u53c2\u6570\u5728\u5173\u95ed\u7684\u72b6\u6001\u4e0b\u624d\u4f1a\u6709\u6548\u3002</p> </li> </ul>"},{"location":"cdn/config/#34","title":"3.4 \u5206\u6bb5\u7f13\u5b58","text":"<p>\u529f\u80fd\u8bf4\u660e</p> <p>\u5206\u6bb5\u7f13\u5b58\u529f\u80fd\u4f7f\u5f97\u7f13\u5b58\u7684\u57fa\u672c\u5355\u4f4d\u53d8\u6210\u4e86\u5757\uff0c\u5e76\u4e14\u5728\u7f13\u5b58\u5757\u5927\u5c0f\u4ee5\u53ca\u56de\u6e90\u8bf7\u6c42\u5927\u5c0f\u4e0a\u53ef\u4ee5\u91c7\u7528\u4e0d\u540c\u7c92\u5ea6\u8fdb\u884c\u63a7\u5236\uff0c\u6700\u7ec8\u5b9e\u73b0\u6309\u5757\u7f13\u5b58\uff0c\u6309\u9700\u56de\u6e90\u3002</p> <p>\u5f00\u542f\u8be5\u529f\u80fd\u53ef\u6709\u6548\u964d\u4f4e\u5927\u6587\u4ef6\u56de\u6e90\u7387\uff0c\u4e5f\u53ef\u4ee5\u63d0\u9ad8\u6587\u4ef6\u5728 CDN \u8282\u70b9\u7684\u7f13\u5b58\u547d\u4e2d\u7387\uff0c\u540c\u65f6\u907f\u514d\u4e86\u62c9\u53d6\u5b8c\u6574\u6587\u4ef6\u5bfc\u81f4\u7684\u6e90\u7ad9\u5e26\u5bbd\u6d6a\u8d39\u3002\u7279\u522b\u5730\uff0c\u5f00\u542f\u8be5\u7279\u6027\u4e4b\u540e\uff0cCDN \u8282\u70b9\u4f1a\u4ee5 Range \u8bf7\u6c42\u56de\u6e90\u3002</p> <p>\u914d\u7f6e\u5f15\u5bfc</p> <p>\u767b\u9646 CDN \u63a7\u5236\u53f0\uff0c\u4f9d\u6b21\u8fdb\u5165\uff1a\u670d\u52a1 &gt; \u529f\u80fd\u914d\u7f6e &gt; \u7f13\u5b58\u914d\u7f6e &gt; \u5206\u6bb5\u7f13\u5b58\uff0c\u70b9\u51fb\u300c\u7ba1\u7406\u300d\u6309\u94ae\u5373\u53ef\u5f00\u59cb\u914d\u7f6e\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff1a</p> <p></p> <p>\u9ed8\u8ba4\u914d\u7f6e\uff1a\u8be5\u7279\u6027\u4f1a\u9ed8\u8ba4\u5f00\u542f\uff0c\u60a8\u53ef\u4ee5\u6709\u9009\u62e9\u6027\u7684\u5173\u95ed\u8be5\u7279\u6027\u3002\u7279\u522b\u5730\uff0c\u6211\u4eec\u9488\u5bf9\u5206\u6bb5\u7f13\u5b58\u9884\u7f6e\u4e86\u6587\u4ef6\u540e\u7f00\u6a21\u677f\uff0c\u9ed8\u8ba4\u9884\u7f6e\u540e\u7f00\u5982\u4e0b\uff1a</p> <pre><code>\u89c6\u9891\uff1aAVI\u3001MP4\u3001FLV\u3001MOV\u30013GP\u3001ASF\u3001WMV\u3001MPG\u3001F4V\u3001M4V\u3001MKV\u3001VOB\u3001M3U8\u3001TS \u3001RMVB\u3001DAT\u3001RM\n\u97f3\u9891\uff1aMP3\u3001OGG\u3001M4A\u3001WMA\u3001AIF\u3001AU\n\u5b89\u88c5\u5305\uff1aAPK\u3001ZIP\u3001EXE\u3001RAR\u3001IPA\u3001PXL\u3001DEB\u3001SIS\u3001SISX\u3001JAR\u3001XAP\n\u6e38\u620f\u4e0b\u8f7d\uff1aSO\u3001CUE\u3001CCD\u3001MDS\u3001IMG\u30017Z\n\u5176\u5b83\uff1aCAB\u3001DHP\u3001GZ\u3001ISO\u3001MPQ\u3001PBCV\u3001PXL\u3001QNP\u3001R00\u3001XY\u3001XY2\n</code></pre> <p>\u8ffd\u52a0\u81ea\u5b9a\u4e49\uff1a\u4e3a\u4e86\u65b9\u4fbf\u7075\u6d3b\u914d\u7f6e\uff0c\u4e5f\u5373\u53ef\u4ee5\u6839\u636e\u6587\u4ef6\u540e\u7f00\u6216\u8005\u901a\u914d\u7b26\u89c4\u5219\u6765\u914d\u7f6e\u662f\u5426\u5f00\u542f\u5206\u6bb5\u7f13\u5b58\u529f\u80fd\uff0c\u5982\u622a\u56fe\u6240\u793a\uff1a</p> <p></p> <p>\u5728\u8be5\u914d\u7f6e\u754c\u9762\uff0c\u60a8\u53ef\u4ee5\u586b\u5199\u8d44\u6e90\u8def\u5f84\uff0c\u7136\u540e\u70b9\u51fb\u3010\u6dfb\u52a0\u3011\u6309\u94ae\uff0c\u4fdd\u5b58\u5373\u53ef\u3002\u8def\u5f84\u89c4\u5219\u652f\u6301 * \u901a\u914d\u7b26\uff0c\u4f8b\u5982\uff1a</p> <pre><code>/a/*.mp4 \n/b/*.apk\n/*\n/123/*\n</code></pre> <p>\u914d\u7f6e\u6548\u679c</p> <p>\u5047\u8bbe\u6700\u7ec8\u7528\u6237\u53d1\u8d77\u4e86\u8d44\u6e90\u8bf7\u6c42\uff0c\u8bf7\u6c42\u7684 URL \u4e3a\uff1a<code>http://www.example.com/download/game.zip</code>\uff0cCDN \u8282\u70b9\u6536\u5230\u8bf7\u6c42\u540e\uff0c\u82e5\u547d\u4e2d\u5219\u54cd\u5e94\u5bf9\u5e94\u5206\u6bb5\u6587\u4ef6\u7ed9\u6700\u7ec8\u7528\u6237\uff0c\u672a\u547d\u4e2d\u7684\u5206\u6bb5 CDN \u8282\u70b9\u5219\u56de\u6e90\u53d1\u8d77 Range \u8bf7\u6c42\u83b7\u53d6\u8d44\u6e90\u6587\u4ef6\u3002</p> <p>1.\u5f00\u542f\u5206\u6bb5\u7f13\u5b58</p> <ul> <li>\u82e5\u6700\u7ec8\u7528\u6237\u53d1\u8d77\u8d44\u6e90\u8bf7\u6c42\uff0cCDN \u8282\u70b9\u4e0a\u5df2\u7ecf\u547d\u4e2d\u8be5\u5206\u6bb5\uff0c\u5219\u76f4\u63a5\u54cd\u5e94\u7ed9\u6700\u7ec8\u7528\u6237</li> <li>\u82e5 CDN \u8282\u70b9\u672a\u547d\u4e2d\u7f13\u5b58\uff0c\u5219 CDN \u8282\u70b9\u56de\u6e90\u4f7f\u7528 Range \u8bf7\u6c42\uff0c\u5206\u6bb5\u83b7\u53d6\u8d44\u6e90\u6587\u4ef6</li> </ul> <p>2.\u5173\u95ed\u5206\u6bb5\u7f13\u5b58</p> <ul> <li>\u8282\u70b9\u6587\u4ef6\u7f13\u5b58\u8fc7\u671f\u4e4b\u540e\uff0c\u4f1a\u5411\u6e90\u7ad9\u83b7\u53d6\u6574\u4e2a\u8d44\u6e90\u6587\u4ef6</li> </ul> <p>3.\u5206\u6bb5\u7f13\u5b58\u9884\u52a0\u8f7d</p> <ul> <li>\u5f00\u542f\u5206\u6bb5\u7f13\u5b58\u529f\u80fd\u4e4b\u540e\uff0c\u8be5\u7279\u6027\u4f1a\u9ed8\u8ba4\u5f00\u542f\u3002\u5f53\u6700\u7ec8\u7528\u6237\u8bf7\u6c42\u7b2c\u4e00\u4e2a\u5206\u6bb5\u6587\u4ef6\u65f6\uff0cCDN \u4f1a\u63d0\u524d\u53bb\u4e0b\u8f7d\u540e\u9762\u51e0\u4e2a\u5206\u6bb5\u6587\u4ef6\uff0c\u8fdb\u800c\u63d0\u9ad8\u6587\u4ef6\u4e0b\u8f7d\u901f\u5ea6\u3002</li> </ul> <p>\u6ce8\u610f\u4e8b\u9879</p> <ul> <li>\u6e90\u7ad9\u9700\u8981\u652f\u6301 Range \u8bf7\u6c42\uff0c\u5426\u5219\u4f1a\u5bfc\u81f4\u56de\u6e90\u5931\u8d25\uff1b\u4e25\u683c\u6765\u8bf4\uff0c\u6211\u4eec\u53ea\u901a\u8fc7 <code>Accept-Ranges: bytes</code> \u8fd9\u4e2a\u5934\u6765\u5224\u65ad\u6e90\u652f\u4e0d\u652f\u6301 Range \u8bf7\u6c42 \uff0c\u5426\u5219\u5373\u4f7f\u5f00\u542f\u4e86\u5206\u6bb5\u7f13\u5b58\u7279\u6027\uff0c\u4e5f\u4e0d\u4f1a\u751f\u6548\uff1b</li> <li>\u8be5\u529f\u80fd\u914d\u7f6e\u540e\u4e0d\u4f1a\u7acb\u5373\u751f\u6548\uff0c\u9700\u5728\u6587\u4ef6\u7f13\u5b58\u8fc7\u671f\u6216\u8005\u6587\u4ef6\u7f13\u5b58\u88ab\u4e3b\u52a8\u5237\u65b0\u4e4b\u540e\u65b9\u53ef\u751f\u6548</li> <li>\u8be5\u529f\u80fd\u4ec5\u9488\u5bf9\u9759\u6001\u6587\u4ef6\uff0c\u52a8\u6001\u5185\u5bb9\u5f00\u542f\u5206\u6bb5\u7f13\u5b58\u4f1a\u53ef\u80fd\u4f1a\u53d1\u751f\u9519\u8bef\uff0c\u8bf7\u8c28\u614e\u4f7f\u7528\uff1b</li> <li>\u8be5\u529f\u80fd\u5f00\u542f\u540e\uff0c\u8d44\u6e90\u5728 CDN \u8282\u70b9\u4e0a\u4f1a\u8fdb\u884c\u5206\u6bb5\u7f13\u5b58\uff0c\u5982\u679c\u8981\u7acb\u9a6c\u5173\u95ed\u8be5\u7279\u6027\uff0c\u53ef\u901a\u8fc7\u624b\u52a8\u5237\u65b0\u6587\u4ef6\u6765\u89e3\u51b3\uff1b</li> <li>\u5982\u679c\u60a8\u5df2\u7ecf\u4f7f\u7528\u53c8\u62cd\u4e91\u5bf9\u8c61\u5b58\u50a8\u670d\u52a1\uff0c\u8be5\u7279\u6027\u5df2\u7ecf\u9ed8\u8ba4\u5f00\u542f\uff0c\u65e0\u9700\u505a\u4efb\u4f55\u914d\u7f6e\uff1b</li> </ul>"},{"location":"cdn/config/#35","title":"3.5 \u6d4f\u89c8\u5668\u7f13\u5b58","text":"<p>\u529f\u80fd\u8bf4\u660e</p> <p>\u6d4f\u89c8\u5668\u7f13\u5b58\u7528\u4e8e\u8bbe\u7f6e\u8d44\u6e90\u6587\u4ef6\u5728\u5ba2\u6237\u7aef\uff08\u6d4f\u89c8\u5668\uff09\u7684\u7f13\u5b58\u8fc7\u671f\u65f6\u95f4\u8bbe\u7f6e\uff0c\u53ef\u81ea\u5b9a\u4e49\u9700\u8981\u5728\u6d4f\u89c8\u5668\u8fdb\u884c\u7279\u6b8a\u7f13\u5b58\u7684\u8d44\u6e90\u8def\u5f84\u53ca\u7f13\u5b58\u65f6\u95f4\u3002\u8d44\u6e90\u8def\u5f84\u7684\u8bbe\u7f6e\u652f\u6301\u6309\u6587\u4ef6\u8def\u5f84\u548c\u6587\u4ef6\u6269\u5c55\u540d\u8bbe\u7f6e\u3002</p> <p>\u914d\u7f6e\u5f15\u5bfc</p> <p>\u767b\u5f55 CDN\u63a7\u5236\u53f0\uff0c\u9009\u62e9\u9700\u8981\u914d\u7f6e\u7684\u670d\u52a1\uff0c\u4f9d\u6b21\u8fdb\u5165\uff1a\u670d\u52a1\u7ba1\u7406 &gt; \u529f\u80fd\u914d\u7f6e &gt; \u7f13\u5b58\u914d\u7f6e &gt; \u3010\u6d4f\u89c8\u5668\u7f13\u5b58\u3011\uff0c\u5982\u4e0b\u56fe\u6240\u793a\uff1a</p> <p></p> <p>\u70b9\u51fb\u754c\u9762\u53f3\u8fb9\u7684\u3010\u7ba1\u7406\u3011\u6309\u94ae\u5373\u53ef\u5f00\u59cb\u914d\u7f6e\uff1a</p> <p></p> <p>\u5728\u6b64\u914d\u7f6e\u754c\u9762\uff0c\u53ef\u4ee5\u5bf9\u5df2\u914d\u7f6e\u7684\u7f13\u5b58\u7b56\u7565\u8fdb\u884c\u7ba1\u7406\u64cd\u4f5c\uff0c\u4e5f\u53ef\u4ee5\u70b9\u51fb\u53f3\u4e0a\u89d2\u7684\u3010\u6dfb\u52a0\u914d\u7f6e\u3011\u6309\u94ae\uff0c\u65b0\u589e\u914d\u7f6e\u7b56\u7565\uff0c\u5982\u56fe\uff1a</p> <p></p> <p>\u6839\u636e\u81ea\u8eab\u8981\u6c42\uff0c\u6dfb\u52a0\u8d44\u6e90\u8def\u5f84\u4ee5\u53ca\u7f13\u5b58\u65f6\u95f4\uff0c\u70b9\u51fb\u3010\u4fdd\u5b58\u3011\u6309\u94ae\u5373\u53ef\uff0c\u5176\u4e2d\u8d44\u6e90\u8def\u5f84\u652f\u6301 * \u901a\u914d\u7b26\uff0c\u4f8b\u5982\uff1a</p> <pre><code>/a/*.mp4 \n/b/*.apk\n/*\n/123/*\n</code></pre> <p>\u4e5f\u53ef\u4ee5\u4e3a\u6587\u4ef6\u540e\u7f00\u683c\u5f0f\uff0c\u4f8b\u5982\uff1a</p> <pre><code>/*.(txt,doc,wri,docs,css,js,dot,xml,log,bat,csv)\n/*.(wav,mp3,wmv,rmi,aac,mp4,rmvb,mkv,avi,flv,swf,rm,mov,movie,qt)\n</code></pre> <p>\u6ce8\u610f\u4e8b\u9879</p> <ul> <li>\u5982\u679c\u8bbe\u7f6e\u7684\u6d4f\u89c8\u5668\u7f13\u5b58\u65f6\u95f4\u5927\u4e8e\u6587\u4ef6\u5728 CDN \u8282\u70b9\u4e0a\u7684\u7f13\u5b58\u8fc7\u671f\u65f6\u95f4\uff0c\u5219\u6b64\u5904\u8bbe\u7f6e\u7684\u6d4f\u89c8\u5668\u7f13\u5b58\u8fc7\u671f\u65f6\u95f4\u4f1a\u5931\u6548\uff0c\u4ecd\u4ee5 CDN    \u8282\u70b9\u8bbe\u7f6e\u7684\u7f13\u5b58\u8fc7\u671f\u65f6\u95f4\u4e3a\u51c6\uff1b</li> <li>\u6d4f\u89c8\u5668\u7f13\u5b58\u8bbe\u7f6e\u9ed8\u8ba4\u5339\u914d\u7684\u72b6\u6001\u7801\u8303\u56f4\u4e3a\uff1a\u5927\u4e8e\u7b49\u4e8e 200 \u5c0f\u4e8e 400\uff0c\u8be5\u9879\u914d\u7f6e\u4e0d\u4f1a\u5f71\u54cd CDN \u7f13\u5b58\u670d\u52a1\u5668\u7684\u884c\u4e3a\u3002</li> </ul>"},{"location":"cdn/config/#4","title":"4. \u6027\u80fd\u4f18\u5316","text":""},{"location":"cdn/config/#41-webp","title":"4.1 WebP \u81ea\u9002\u5e94","text":"<p>\u529f\u80fd\u8bf4\u660e</p> <p>WebP \u81ea\u9002\u5e94\u529f\u80fd\u662f CDN \u5e73\u53f0\u667a\u80fd\u5224\u65ad\u5ba2\u6237\u7aef\u6d4f\u89c8\u5668\u662f\u5426\u652f\u6301 WebP \u89e3\u7801\uff0c\u5982\u652f\u6301\u5219\u8fd4\u56de WebP \u683c\u5f0f\u56fe\u7247\uff0c\u5426\u5219\u8fd4\u56de\u539f\u56fe\uff0c\u5ba2\u6237\u7aef\u4ee5\u53ca\u6e90\u7ad9\u65e0\u9700\u4efb\u4f55\u6539\u52a8\u3002\u5f00\u542f\u8be5\u7279\u6027\uff0c\u53ef\u4ee5\u6709\u6548\u8282\u7701 CDN \u4f20\u8f93\u5e26\u5bbd\uff0c\u52a0\u901f\u56fe\u7247\u6e32\u67d3\u901f\u5ea6\u3002</p> <p>\u5982\u4f55\u5b9e\u73b0\uff1f</p> <p>WebP \u81ea\u9002\u5e94\u5927\u81f4\u7684\u5904\u7406\u6d41\u7a0b\u5982\u4e0b\uff1a</p> <p></p> <p>1.CDN \u5982\u4f55\u5224\u65ad\u5ba2\u6237\u7aef\u662f\u5426\u652f\u6301 WebP ?</p> <p>CDN \u662f\u901a\u8fc7 HTTP Accept \u5934\u6765\u5224\u65ad\u7684\uff0c\u5982\u679c\u652f\u6301\uff0c\u5219\u8fd4\u56de WebP \u526f\u672c\u5e76\u8fdb\u884c\u7f13\u5b58\uff1b\u5982\u679c\u4e0d\u652f\u6301\uff0c\u5219\u8fd4\u56de\u539f\u56fe\u3002\u4ee5 Chrome \u6d4f\u89c8\u5668\u4e3a\u4f8b\uff1a</p> <pre><code>accept:image/webp,image/apng,image/*,*/*;q=0.8\n\n</code></pre> <p>\u5982\u4e0a\u5217\u8868\u53ef\u4ee5\u770b\u51fa\uff0c\u5f53 Accept \u8bf7\u6c42\u5934\u91cc\u9762\u5982\u679c\u6709 <code>image/webp</code> \u5b57\u6bb5\uff0c\u5219\u8bf4\u660e\u5ba2\u6237\u7aef\u652f\u6301 WebP \u89e3\u7801\u3002</p> <p>2.CDN \u5982\u4f55\u5b9e\u73b0\u5b9e\u65f6\u56fe\u7247\u683c\u5f0f\u8f6c\u6362\uff1f</p> <p>\u9488\u5bf9\u7528\u6237\u6e90\u7ad9\u5e76\u975e WebP \u683c\u5f0f\u56fe\u7247\u7684\u65f6\uff0cCDN \u5c42\u9700\u8981\u652f\u6301\u5c06\u539f\u56fe\u56fe\u7247\u7684\u5b9e\u65f6\u8f6c\u6362\u4e3a WebP \u683c\u5f0f\u526f\u672c\uff0c\u8fd9\u4e2a\u5728 CDN \u5c42\u9762\u662f\u65e0\u7f1d\u652f\u6301\u7684\u3002\u6d41\u7a0b\u662f\u8fd9\u6837\u7684\uff1a</p> <ul> <li>\u5ba2\u6237\u7aef\u6d4f\u89c8\u5668\u8bf7\u6c42\u4e00\u4e2a\u56fe\u7247\u8d44\u6e90\uff0c\u4f8b\u5982\uff1ahttp://webp.example.com/test.png;</li> <li>CDN \u901a\u8fc7 Accept \u5934\u5df2\u7ecf\u5224\u65ad\u5ba2\u6237\u7aef\u6d4f\u89c8\u5668\u652f\u6301 WebP \u683c\u5f0f\u7684\u56fe\u7247\uff1b</li> <li>CDN \u56de\u7528\u6237\u6e90\u7ad9\u53d6\u56de\u539f\u56fe\u5e76\u5c06\u539f\u56fe\u5b9e\u65f6\u8f6c\u4e3a WebP \u683c\u5f0f\u7684\u56fe\u7247\uff0c\u5e76\u54cd\u5e94\u7ed9\u5ba2\u6237\u7aef\u6d4f\u89c8\u5668\u3002</li> </ul> <p>\u8fd9\u91cc\u503c\u5f97\u5f3a\u8c03\u7684\u662f\uff0c\u53c8\u62cd\u4e91 CDN \u5df2\u7ecf\u65e0\u7f1d\u517c\u5bb9\u4e86\u5404\u79cd\u4f5c\u56fe\u573a\u666f\u548c\u8bbf\u95ee\u65b9\u5f0f\uff0c\u5177\u4f53\u5305\u62ec\uff1a</p> <ul> <li>\u539f\u56fe\u8bbf\u95ee \uff0c\u793a\u4f8b\uff1a/a.jpg</li> <li>\u81ea\u5b9a\u4e49\u7248\u672c\u53f7\u4f5c\u56fe\uff0c\u793a\u4f8b\uff1a/a.jpg!123</li> <li>URL \u4f5c\u56fe \uff0c\u793a\u4f8b\uff1a/a.jpg!/format/webp</li> <li>\u81ea\u5b9a\u4e49\u7248\u672c\u53f7 + URL \u4f5c\u56fe\uff1a/a.jpg!123/format/webp</li> </ul> <p>\u914d\u7f6e\u5f15\u5bfc</p> <p>\u767b\u9646 CDN \u63a7\u5236\u53f0\uff0c\u4f9d\u6b21\u8fdb\u5165\uff1a\u670d\u52a1\u7ba1\u7406 &gt; \u529f\u80fd\u914d\u7f6e &gt; \u6027\u80fd\u4f18\u5316 &gt; WebP \u81ea\u9002\u5e94\uff0c\u5f00\u542f\u5373\u53ef\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff1a\uff1a</p> <p></p> <p>\u5728\u914d\u7f6e\u754c\u9762\uff0c\u6ed1\u52a8\u53f3\u8fb9\u7684\u6309\u94ae\uff0c\u5728\u786e\u5b9a\u5bf9\u8bdd\u6846\u4e0b\uff0c\u70b9\u51fb\u3010\u786e\u5b9a\u3011\u6309\u94ae\u5373\u53ef\u4e00\u952e\u5f00\u542f\u3002</p> <p>\u6ce8\u610f\u4e8b\u9879</p> <ul> <li>CDN \u5e73\u53f0\u4f1a\u6839\u636e\u8bf7\u6c42\u5934 Accept: image/webp \u6765\u667a\u80fd\u5224\u65ad\u5ba2\u6237\u7aef\u662f\u5426\u652f\u6301 WebP \u89e3\u7801\uff0c\u4e0d\u652f\u6301\u7684\u5ba2\u6237\u7aef\uff0c\u4f1a\u9ed8\u8ba4\u8fd4\u56de\u539f\u59cb\u56fe\u7247\uff0c\u53ef\u4ee5\u65e0\u7f1d\u5207\u6362\uff1b</li> <li>\u5df2\u7ecf\u4f7f\u7528\u4e86\u53c8\u62cd\u4e91\u81ea\u5b9a\u4e49\u7248\u672c\u4f5c\u56fe\u3001URL \u4f5c\u56fe\u3001\u81ea\u5b9a\u4e49\u7248\u672c\u4f5c\u56fe\uff0bURL \u4f5c\u56fe\u7684\u8bf7\u6c42\u4e5f\u65e0\u7f1d\u652f\u6301\u8be5\u7279\u6027\uff1b</li> <li>\u5728 CDN \u8282\u70b9\u672a\u7f13\u5b58 WebP \u526f\u672c\u7684\u60c5\u51b5\u4e0b\uff0cCDN \u5e73\u53f0\u4f1a\u5b9e\u65f6\u751f\u6210 WebP \u526f\u672c\u5e76\u8fd4\u56de\u3002</li> </ul> <p>\u66f4\u591a\u4e86\u89e3\uff0c\u8bf7\u53c2\u7167\uff1a\u5982\u4f55\u901a\u8fc7 WebP \u81ea\u9002\u5e94\u65b9\u6848\u51cf\u5c11\u56fe\u7247\u8d44\u6e90\u5927\u5c0f\uff0c\u79fb\u52a8\u7aef\u5982\u4f55\u4f7f\u7528 WebP\uff08\u4e0a\uff09\u3001\u79fb\u52a8\u7aef\u5982\u4f55\u4f7f\u7528 WebP\uff08\u4e0b\uff09\u3002</p>"},{"location":"cdn/config/#42-h265","title":"4.2 H.265 \u81ea\u9002\u5e94","text":"<p>\u529f\u80fd\u8bf4\u660e</p> <p>H.265 \u81ea\u9002\u5e94\u529f\u80fd\u662f CDN \u5e73\u53f0\u667a\u80fd\u5224\u65ad\u5ba2\u6237\u7aef\u662f\u5426\u652f\u6301 H.265 \u89e3\u7801\uff0c\u5982\u652f\u6301\u5219\u8fd4\u56de H.265 \u683c\u5f0f\u89c6\u9891\uff0c\u5426\u5219\u8fd4\u56de\u539f\u59cb\u89c6\u9891\u3002\u901a\u8fc7\u90e8\u7f72 H.265  \u89c6\u9891\uff0c\u53ef\u63d0\u5347\u7ec8\u7aef\u7528\u6237\u89c2\u770b\u4f53\u9a8c\uff0c\u51cf\u5c11\u7f51\u7edc\u4f20\u8f93\u5e26\u5bbd\u3002</p> <p>\u5982\u4f55\u5b9e\u73b0\uff1f</p> <p>H.265 \u81ea\u9002\u5e94\u5927\u81f4\u7684\u5904\u7406\u6d41\u7a0b\u5982\u4e0b\uff1a</p> <p></p> <p>1.\u5ba2\u6237\u7aef\u53d1\u8d77 H.265 \u89c6\u9891\u8d44\u6e90\u8bf7\u6c42\uff0c\u4f8b\u5982\uff1ahttp://h265.example.com/test.mp4\uff1b</p> <p>2.CDN \u8282\u70b9\u5224\u65ad\u662f\u5426\u6709 H.265 \u7f13\u5b58\u526f\u672c\uff0c\u5982\u6709\u5219\u76f4\u63a5\u54cd\u5e94\u7ed9\u5ba2\u6237\u7aef\uff1b</p> <p>3.\u8282\u70b9\u5982\u679c\u6ca1\u6709\u7f13\u5b58\u526f\u672c\uff0c\u5219\u56de\u6e90\u7ad9\u83b7\u53d6\u8d44\u6e90\uff0c\u5982\u6709\uff0c\u5219\u8fd4\u56de H.265 \u89c6\u9891\u8d44\u6e90\u5e76\u5728 CDN \u8282\u70b9\u7f13\u5b58\uff1b</p> <p>4.\u5982\u679c\u6ca1\u6709\uff0c\u5219\u8fd4\u56de\u539f\u59cb\u89c6\u9891\u8d44\u6e90\uff0c\u5e76\u7f13\u5b58 6 \u5206\u949f\uff0c\u7f13\u5b58\u8fc7\u671f\u4e4b\u540e\u4f1a\u56de\u6e90\u63a2\u6d4b\u3002</p> <p>CDN \u5982\u4f55\u5224\u65ad\u5ba2\u6237\u7aef\u662f\u5426\u652f\u6301 H.265 \u89e3\u7801 ?</p> <p>CDN \u5f53\u524d\u8bc6\u522b\u5ba2\u6237\u7aef\u662f\u5426\u652f\u6301 H.265 \u89e3\u7801\u662f\u901a\u8fc7 HTTP \u8bf7\u6c42\u5934\uff1aAccept-Encoding: h265 \u6765\u5224\u65ad\u7684\uff0cCDN \u6536\u5230\u8be5\u8bf7\u6c42\u4e4b\u540e\uff0c\u518d\u53bb\u5224\u65ad CDN \u8282\u70b9\u662f\u5426\u6709 H.265 \u7f13\u5b58\u526f\u672c\uff0c\u5426\u5219\u76f4\u63a5\u8fd4\u56de\u539f\u59cb\u89c6\u9891\u8d44\u6e90\u3002\u8bf7\u6c42\u8bc6\u522b\u6d41\u7a0b\u5982\u4e0b\u622a\u56fe\u6240\u793a\uff1a</p> <p></p> <p>\u914d\u7f6e\u5f15\u5bfc</p> <p>\u767b\u9646 CDN \u63a7\u5236\u53f0\uff0c\u4f9d\u6b21\u8fdb\u5165\uff1a\u670d\u52a1\u7ba1\u7406 &gt; \u529f\u80fd\u914d\u7f6e &gt; \u6027\u80fd\u4f18\u5316 &gt; H.265 \u81ea\u9002\u5e94\uff0c\u5f00\u542f\u5373\u53ef\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff1a\uff1a</p> <p></p> <p>\u5728\u914d\u7f6e\u754c\u9762\uff0c\u6ed1\u52a8\u53f3\u8fb9\u7684\u6309\u94ae\uff0c\u5728\u786e\u5b9a\u5bf9\u8bdd\u6846\u4e0b\uff0c\u70b9\u51fb\u3010\u786e\u5b9a\u3011\u6309\u94ae\u5373\u53ef\u4e00\u952e\u5f00\u542f\u3002</p> <p>\u6ce8\u610f\u4e8b\u9879</p> <ul> <li> <p>\u5ba2\u6237\u7aef\u9700\u8981\u6839\u636e\u7ea6\u5b9a\u89c4\u8303\u53d1\u8d77 Accept-Encoding: h265 \u7684\u8bf7\u6c42\u5934\uff0cCDN \u8282\u70b9\u4f1a\u6839\u636e\u6b64\u8bf7\u6c42\u5934\u6765\u5224\u65ad\u5ba2\u6237\u7aef\u662f\u5426\u652f\u6301 H.265 \u89e3\u7801\uff1b</p> </li> <li> <p>CDN \u5f00\u542f H.265 \u81ea\u9002\u5e94\u4e4b\u540e\uff0c\u662f\u7981\u6b62\u5ba2\u6237\u7aef\u7f13\u5b58\u7684\uff08\u4ee5\u907f\u514d\u5916\u90e8\u7684\u4ee3\u7406\u670d\u52a1\u5668\u7f13\u5b58\u5185\u5bb9\uff0c\u4ece\u800c\u5bfc\u81f4\u540e\u9762\u5176\u4ed6\u4e0d\u652f\u6301 H.265 \u683c\u5f0f\u7684\u64ad\u653e\u5668\u4e0b\u8f7d\u5230 H.265 \u683c\u5f0f\u7684\u8d44\u6e90\uff09\uff1b</p> </li> <li> <p>\u6e90\u7ad9\u4e3a\u4e86\u533a\u5206\u539f\u59cb\u89c6\u9891\u548c H.265 \u683c\u5f0f\u89c6\u9891\uff0cH.265 \u89c6\u9891\u5b58\u50a8\u8def\u5f84\u9700\u8981\u7ea6\u5b9a\u89c4\u8303\u4e3a\uff1a{URL}.h265\uff0c \u4ee5\u6b64\u6765\u533a\u5206\u539f\u59cb\u89c6\u9891\u548c H.265 \u89c6\u9891\u3002\u4e5f\u5373\u5728 CDN \u8282\u70b9\u672a\u7f13\u5b58 H.265 \u89c6\u9891\u526f\u672c\u7684\u60c5\u51b5\u4e0b\uff0cCDN \u56de\u6e90\u4f1a\u5e26\u7740\u76f8\u5e94\u7684\u540e\u7f00\u56de\u6e90\u83b7\u53d6 H.265 \u683c\u5f0f\u526f\u672c\u6587\u4ef6\uff1b</p> </li> <li> <p>\u5728 CDN \u56de\u6e90\u672a\u83b7\u53d6\u5230 H.265 \u89c6\u9891\u526f\u672c\u65f6\uff0c\u4f1a\u81ea\u52a8\u8bf7\u6c42\u539f\u59cb\u89c6\u9891\u6587\u4ef6\uff0c\u5e76\u4e14\u5728 CDN \u8282\u70b9\u7f13\u5b58\u8f83\u77ed\u7684\u65f6\u95f4\uff0c\u9ed8\u8ba4\u4e3a 6 \u5206\u949f\u3002</p> </li> </ul>"},{"location":"cdn/config/#43","title":"4.3 \u7801\u7387\u9002\u914d\u9650\u901f","text":"<p>\u529f\u80fd\u8bf4\u660e</p> <p>\u53c8\u62cd\u4e91 CDN \u5e73\u53f0\u652f\u6301\u89c6\u9891\u6587\u4ef6\u7684\u7801\u7387\u9002\u914d\u9650\u901f\u529f\u80fd\uff0c\u901a\u8fc7\u81ea\u52a8\u5206\u6790\u5f53\u524d\u89c6\u9891\u6587\u4ef6\u4f20\u8f93\u7684\u7801\u7387\uff0c\u5c06\u89c6\u9891\u6587\u4ef6\u7684\u4f20\u8f93\u901f\u5ea6\u63a7\u5236\u5728\u89c6\u9891\u7801\u7387\u8303\u56f4\u4e4b\u5185\uff0c\u53ef\u4ee5\u5728\u4e00\u5b9a\u7a0b\u5ea6\u4e0a\u9632\u6b62\u9ad8\u5cf0\u671f\u65f6\u5e26\u5bbd\u5360\u7528\uff0c\u8282\u7701\u6210\u672c\u3002\u9650\u901f\u4e3e\u4f8b\uff1a\u4e00\u5f00\u59cb\u4e0d\u9650\u901f\uff0c\u5f53\u64ad\u653e\u65f6\u957f\u8d85\u8fc7  3 \u79d2\u65f6\uff0c\u8fdb\u884c 1.1 \u500d\u7801\u7387\u9650\u901f\u3002\u8be5\u529f\u80fd\u53ef\u652f\u6301\u7684\u914d\u7f6e\u5305\u62ec\uff1a</p> <ul> <li>\u8d44\u6e90\u8def\u5f84\uff1a\u652f\u6301 * \u4f5c\u4e3a\u901a\u914d\u7b26\uff0c\u5982\uff1a<code>/a/*.mp4</code>\u3001<code>/*.mp4</code>\uff1b</li> <li>\u9650\u901f\u7b56\u7565\uff1a\u6307\u5b9a\u5230\u8fbe\u8bbe\u7f6e\u7684\u65f6\u95f4\u4e4b\u540e\u5f00\u59cb\u9650\u5236\u89c6\u9891\u6587\u4ef6\u7684\u4e0b\u8f7d\u901f\u5ea6\uff0c\u652f\u6301\u7684\u5355\u4f4d\u5305\u62ec\u79d2\u3001\u5206\u949f\uff0c\u63a8\u8350\u503c\u4e3a 3 \u79d2\uff1b</li> <li>\u9650\u901f\u56e0\u5b50\uff1a\u6307\u5b9a\u4e0b\u8f7d\u901f\u5ea6\u4e3a\u89c6\u9891\u7801\u7387\u7684\u591a\u5c11\u500d\uff0c\u63a8\u8350\u503c\u4e3a 1.1\uff1b</li> </ul> <p>\u914d\u7f6e\u5f15\u5bfc</p> <p>\u767b\u9646 CDN \u63a7\u5236\u53f0\uff0c\u4f9d\u6b21\u8fdb\u5165\uff1a\u670d\u52a1\u7ba1\u7406 &gt; \u529f\u80fd\u914d\u7f6e &gt; \u6027\u80fd\u4f18\u5316 &gt; \u7801\u7387\u9002\u914d\u9650\u901f\uff0c\u70b9\u51fb\u3010\u7ba1\u7406\u3011\u6309\u94ae\uff0c\u8fdb\u5165\u529f\u80fd\u914d\u7f6e\u754c\u9762\uff1a</p> <p></p> <p>1) \u6dfb\u52a0\u89c4\u5219</p> <p>\u4f9d\u6b21\u8fdb\u884c\u5982\u4e0b\u64cd\u4f5c\uff1a</p> <ul> <li>\u6ed1\u52a8\u5f00\u5173\uff1a\u5c06\u914d\u7f6e\u754c\u9762\u5de6\u4e0a\u89d2\u7684\u5f00\u5173\u7531\u5173\u95ed\u72b6\u6001\u8c03\u6574\u4e3a\u5f00\u542f\u72b6\u6001\uff1b</li> <li>\u6dfb\u52a0\u89c4\u5219\uff1a\u70b9\u51fb\u914d\u7f6e\u754c\u9762\u53f3\u4e0a\u89d2\u7684\u3010\u6dfb\u52a0\u89c4\u5219\u3011\u6309\u94ae\u5373\u53ef\u6dfb\u52a0\u9002\u914d\u9650\u901f\u89c4\u5219\uff0c\u914d\u7f6e\u754c\u9762\u5982\u4e0b\u56fe\u6240\u793a\uff1a</li> </ul> <p></p> <p>\u5728\u914d\u7f6e\u754c\u9762\uff0c\u4f9d\u6b21\u9700\u8981\u8fdb\u884c\u8d44\u6e90\u8def\u5f84\u3001\u9650\u901f\u7b56\u7565\u3001\u9650\u901f\u56e0\u5b50\u7684\u914d\u7f6e\u3002</p> <ul> <li>\u8d44\u6e90\u8def\u5f84\uff1a\u4e5f\u5373\u5bf9\u8bf7\u6c42\u7684 URI \u8fdb\u884c\u5339\u914d\uff0c\u5339\u914d\u6210\u529f\u5219\u8fdb\u5165\u9650\u901f\u903b\u8f91\uff0c\u652f\u6301 <code>*</code> \u901a\u914d\u7b26\uff0c\u4f8b\u5982\uff1a<code>/mnt/download/*.mp4</code></li> <li>\u9650\u901f\u7b56\u7565\uff1a\u8868\u793a\u4ece\u67d0\u4e2a\u65f6\u523b\uff08\u4e0b\u8f7d\u65f6\u95f4\uff0c\u4e0d\u662f\u64ad\u653e\u65f6\u95f4\uff09\u5f00\u59cb\u6267\u884c\u9650\u901f\u7b56\u7565\uff0c\u652f\u6301\u79d2\u548c\u5206\u949f\u914d\u7f6e\uff0c\u9ed8\u8ba4\u63a8\u8350 3 \u79d2\uff1b</li> <li>\u9650\u901f\u56e0\u5b50\uff1a\u7528\u6765\u63a7\u5236 mp4 \u6587\u4ef6\u4e0b\u8f7d\u9650\u901f\u7684\u56e0\u5b50\uff0c\u6307\u5b9a\u4e0b\u8f7d\u901f\u5ea6\u4e3a\u89c6\u9891\u7801\u7387\u7684\u591a\u5c11\u500d\uff0c\u63a8\u8350\u503c\u4e3a 1.1\uff1b</li> </ul> <p>\u4e3e\u4f8b\uff1a</p> <p>\u5047\u5982\u67d0\u89c6\u9891\u7801\u7387\u4e3a 1337 Kbps\uff0c\u5219\u89c6\u9891\u7684\u4e0b\u8f7d\u901f\u5ea6\u4e3a :</p> <pre><code>(1337/8)*1.1 = 183 KB/s\n\n</code></pre> <p>\u914d\u7f6e\u5b8c\u6240\u6709\u914d\u7f6e\u9879\u4e4b\u540e\uff0c\u70b9\u51fb\u5de6\u4e0b\u89d2\u7684\u3010\u4fdd\u5b58\u3011\u6309\u94ae\u5373\u53ef\u3002</p> <p>2) \u7f16\u8f91\u3001\u5220\u9664\u89c4\u5219</p> <p>\u5982\u4e0b\u56fe\u6240\u793a\uff0c\u53ef\u4ee5\u5728\u64cd\u4f5c\u533a\u57df\u70b9\u51fb\u3010\u7f16\u8f91\u3011\u3001\u3010\u5220\u9664\u3011\u6309\u94ae\u5373\u53ef\u7f16\u8f91\u548c\u5220\u9664\u89c4\u5219\u3002</p> <p></p> <p>\u6ce8\u610f\u4e8b\u9879</p> <ul> <li>\u5f53\u524d\u4ec5\u652f\u6301 mp4 \u6587\u4ef6\u683c\u5f0f\u89c6\u9891\u6587\u4ef6\u7684\u7801\u7387\u81ea\u9002\u5e94\uff1b</li> <li>\u9700\u8981\u786e\u4fdd mp4 \u6587\u4ef6\u7684 moov\uff08 Movie box \uff09\u5728\u89c6\u9891\u6587\u4ef6\u7684\u5934\u90e8\uff0c\u5426\u5219\u4f1a\u5bfc\u81f4\u81ea\u52a8\u9650\u901f\u529f\u80fd\u5931\u6548\uff0c\u4e00\u822c\u60c5\u51b5\u4e0b\uff0cmoov \u4f1a\u7d27\u968f ftyp\uff08File type box\uff09 \u51fa\u73b0\uff1b</li> <li>\u89c6\u9891\u6587\u4ef6\u7684\u5143\u6570\u636e\uff08 metadata \uff09\u8fc7\u5927\u4f1a\u5bfc\u81f4\u9650\u901f\u5931\u8d25\uff0c\u57fa\u4e8e\u7528\u6237\u4f53\u9a8c\u8003\u8651\uff0c\u5f53\u524d\u8bbe\u7f6e\u7684\u9600\u503c\u662f 512 KB\uff1b</li> <li>\u5f53\u914d\u7f6e\u7684\u9650\u901f\u7b56\u7565\u4e3a\u67d0\u65f6\u95f4\u65f6\uff08\u4f8b\u5982\uff1a3 \u79d2\uff09\uff0c\u5219\u5728 3 \u79d2\u4e4b\u540e\u4e0d\u4f1a\u7acb\u9a6c\u628a\u4e0b\u8f7d\u901f\u5ea6\u964d\u4e3a\u671f\u671b\u7684\u4e0b\u8f7d\u901f\u5ea6\uff0c\u5982\u679c\u4ece\u9650\u901f\u5f00\u59cb\u5230\u5230\u76ee\u524d\u4e3a\u6b62\u6709\u53d1\u9001\u591a\u4f59\u7684\u6570\u636e\uff0c\u5219\u67d0\u4e00\u6bb5\u65f6\u95f4\u5185\u4f1a\u505c\u6b62\u53d1\u9001\u6570\u636e\uff0c\u76f4\u5230\u6700\u7ec8\u7684\u4e0b\u8f7d\u901f\u5ea6\u4fdd\u6301\u5728\u8bbe\u5b9a\u7684\u8303\u56f4\u4e4b\u5185\u3002</li> </ul>"},{"location":"cdn/config/#44","title":"4.4 \u9875\u9762\u538b\u7f29","text":"<p>\u529f\u80fd\u8bf4\u660e</p> <p>\u5f00\u542f\u540e\uff0c\u4f1a\u81ea\u52a8\u53bb\u9664 HTML \u6587\u4ef6\u4e2d\u975e\u5fc5\u8981\u7684\u5b57\u7b26\uff08\u7a7a\u767d\u3001\u6ce8\u91ca\u7b49\uff09\uff0c\u81ea\u52a8\u538b\u7f29\u6587\u4ef6\u5927\u5c0f\uff0c\u63d0\u5347\u8bbf\u95ee\u901f\u5ea6\u3002</p> <p>\u914d\u7f6e\u5f15\u5bfc</p> <p>\u767b\u9646 CDN \u63a7\u5236\u53f0\uff0c\u4f9d\u6b21\u8fdb\u5165\uff1a\u670d\u52a1\u7ba1\u7406 &gt; \u529f\u80fd\u914d\u7f6e &gt; \u6027\u80fd\u4f18\u5316 &gt; \u9875\u9762\u538b\u7f29\uff0c\u5f00\u542f\u5f00\u5173\u5373\u53ef\uff0c\u5982\u4e0b\u56fe\u6240\u793a\uff1a</p> <p></p> <p>\u5728\u914d\u7f6e\u754c\u9762\uff0c\u6ed1\u52a8\u53f3\u8fb9\u7684\u6309\u94ae\uff0c\u5728\u786e\u5b9a\u5bf9\u8bdd\u6846\u4e0b\uff0c\u70b9\u51fb\u3010\u786e\u5b9a\u3011\u6309\u94ae\u5373\u53ef\u4e00\u952e\u5f00\u542f\u3002</p> <p>\u6ce8\u610f\u4e8b\u9879</p> <p>\u7279\u522b\u5730\uff0c\u76ee\u524d\u4ec5\u652f\u6301 HTML \u9875\u9762\u7684\u4f18\u5316\u3002</p>"},{"location":"cdn/config/#45-http-302","title":"4.5 HTTP 302 \u8c03\u5ea6","text":"<p>\u529f\u80fd\u8bf4\u660e</p> <p>\u914d\u5408 DNS \u8c03\u5ea6\uff0c\u57fa\u4e8e\u5185\u5bb9\u548c\u7cbe\u51c6 IP \u7684\u7cbe\u786e\u8c03\u5ea6\u65b9\u6848\uff0c\u8be5\u8c03\u5ea6\u6a21\u5757\u53ef\u4ee5\u83b7\u53d6\u6700\u7ec8\u7528\u6237\u771f\u5b9e\u7684 IP \u5730\u5740\u548c\u5185\u5bb9\u5730\u5740\uff0c\u4f7f\u7528 HTTP \u534f\u8bae\u91cc\u9762\u7684 302 \u8df3\u8f6c\u529f\u80fd\uff0c\u5206\u914d\u6700\u4f18\u7684 CDN \u8fb9\u7f18\u52a0\u901f\u8282\u70b9\u7ed9\u6700\u7ec8\u7528\u6237\u3002</p> <p>\u5b9e\u73b0\u673a\u5236</p> <p>\u7ecf\u8fc7 <code>HTTP 302 \u8c03\u5ea6</code>\u4e4b\u540e\u7684\u8d44\u6e90\u8bf7\u6c42\u5730\u5740\u7684\u53d8\u5316\u53c2\u7167\u5982\u4e0b\u793a\u4f8b\uff1a</p> <p>\u539f\u59cb\u8bbf\u95ee\u5730\u5740\uff1a</p> <pre><code>http://test.example.com/image/1.png\n\n</code></pre> <p>\u7ecf\u8fc7 HTTP 302 \u8c03\u5ea6\u540e\u7684 Location \u5730\u5740\uff1a</p> <pre><code>http://60.211.204.130/test.example.com/image/1.png?_marco_sum=XXX&amp;_marco_id=XXX&amp;_marco_from=58.222.18.5\n\n</code></pre> <p>\u5176\u4e2d\uff0c<code>Location</code> \u5730\u5740\u91cc\u9762\u7684\u53c2\u6570 <code>macro_from</code> \u7684\u503c\u662f\u7b2c\u4e00\u6b21 DNS \u8c03\u5ea6\u89e3\u6790\u5230\u7684 CDN \u8fb9\u7f18\u8282\u70b9 IP \u5730\u5740\uff0c<code>60.211.204.130</code> \u662f\u7ecf\u8fc7 HTTP 302 \u8c03\u5ea6\u4e4b\u540e\u6700\u4f18\u7684 CDN \u8fb9\u7f18\u52a0\u901f\u8282\u70b9 IP\u3002</p> <p>\u914d\u7f6e\u5f15\u5bfc</p> <p>\u767b\u9646 CDN \u63a7\u5236\u53f0\uff0c\u4f9d\u6b21\u8fdb\u5165\uff1a\u670d\u52a1 &gt; \u529f\u80fd\u914d\u7f6e &gt; \u6027\u80fd\u4f18\u5316 &gt; HTTP 302 \u8c03\u5ea6\uff0c\u70b9\u51fb\u300c\u7ba1\u7406\u300d\u6309\u94ae\u5373\u53ef\u5f00\u59cb\u914d\u7f6e\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff1a</p> <p></p> <p>\u9ed8\u8ba4\u914d\u7f6e\uff1a\u8be5\u7279\u6027\u4f1a\u9ed8\u8ba4\u5f00\u542f\uff0c\u60a8\u53ef\u4ee5\u6709\u9009\u62e9\u6027\u7684\u5173\u95ed\u8be5\u7279\u6027\u3002\u7279\u522b\u5730\uff0c\u6211\u4eec\u9488\u5bf9 HTTP 302 \u8c03\u5ea6\u529f\u80fd\u9884\u7f6e\u4e86\u6587\u4ef6\u540e\u7f00\u6a21\u677f\uff0c\u9ed8\u8ba4\u9884\u7f6e\u540e\u7f00\u5982\u4e0b\uff1a</p> <pre><code>\u89c6\u9891\uff1aAVI\u3001MP4\u3001FLV\u3001MOV\u30013GP\u3001ASF\u3001WMV\u3001MPG\u3001F4V\u3001M4V\u3001MKV\u3001VOB\u3001M3U8\u3001TS \u3001RMVB\u3001DAT\u3001RM\n\u97f3\u9891\uff1aMP3\u3001OGG\u3001M4A\u3001WMA\u3001AIF\u3001AU\n\u5b89\u88c5\u5305\uff1aAPK\u3001ZIP\u3001EXE\u3001RAR\u3001IPA\u3001PXL\u3001DEB\u3001SIS\u3001SISX\u3001JAR\u3001XAP\n\u6e38\u620f\u4e0b\u8f7d\uff1aSO\u3001CUE\u3001CCD\u3001MDS\u3001IMG\u30017Z\n\u5176\u5b83\uff1aCAB\u3001DHP\u3001GZ\u3001ISO\u3001MPQ\u3001PBCV\u3001PXL\u3001QNP\u3001R00\u3001XY\u3001XY2\n</code></pre> <p>\u8ffd\u52a0\u81ea\u5b9a\u4e49\uff1a\u4e3a\u4e86\u65b9\u4fbf\u7075\u6d3b\u914d\u7f6e\uff0c\u4e5f\u5373\u53ef\u4ee5\u6839\u636e\u6587\u4ef6\u540e\u7f00\u6216\u8005\u901a\u914d\u7b26\u89c4\u5219\u6765\u914d\u7f6e\u662f\u5426\u5f00\u542f\u8be5\u529f\u80fd\uff0c\u5982\u622a\u56fe\u6240\u793a\uff1a</p> <p></p> <p>\u5728\u8be5\u914d\u7f6e\u754c\u9762\uff0c\u60a8\u53ef\u4ee5\u586b\u5199\u8d44\u6e90\u8def\u5f84\uff0c\u7136\u540e\u70b9\u51fb\u3010\u6dfb\u52a0\u3011\u6309\u94ae\uff0c\u4fdd\u5b58\u5373\u53ef\u3002\u8def\u5f84\u89c4\u5219\u652f\u6301 * \u901a\u914d\u7b26\uff0c\u4f8b\u5982\uff1a</p> <pre><code>/a/*.mp4 \n/b/*.apk\n/*\n/123/*\n</code></pre> <p>\u6ce8\u610f\u4e8b\u9879</p> <ul> <li> <p>\u5982\u679c\u8be5\u670d\u52a1\u4e0b\u7684\u57df\u540d\u591a\u4e3a\u5c0f\u6587\u4ef6\u52a0\u901f\u573a\u666f\uff0c\u4e3a\u4e86\u907f\u514d 302 \u8df3\u8f6c\u9020\u6210\u7684\u989d\u5916\u6d88\u8017\uff0c\u4e0d\u5b9c\u5f00\u542f\u8be5\u529f\u80fd\uff1b</p> </li> <li> <p>\u4f7f\u7528\u8be5\u529f\u80fd\uff0c\u9700\u8981\u786e\u8ba4\u5ba2\u6237\u7aef\u6216\u8005\u64ad\u653e\u5668\u662f\u5426\u652f\u6301 302 \u8df3\u8f6c\uff1b</p> </li> <li> <p>HTTP 302 \u8c03\u5ea6\u4f1a\u4f7f\u5f97 URL \u7684\u5730\u5740\u53d1\u751f\u53d8\u5316\uff0c\u67d0\u4e9b\u5e94\u7528\u5bf9 URL \u7684\u53d8\u5316\u654f\u611f\uff0c\u8bf7\u8c28\u614e\u4f7f\u7528\u3002</p> </li> </ul>"},{"location":"cdn/config/#46","title":"4.6 \u91cd\u5b9a\u5411\u8ddf\u968f","text":"<p>\u529f\u80fd\u8bf4\u660e</p> <p>\u5f53 CDN \u8282\u70b9\u56de\u6e90\u7ad9\u65f6\uff0c\u82e5\u6e90\u7ad9\u54cd\u5e94\u7684\u72b6\u6001\u7801\u4e3a 301/302\uff0cCDN \u8282\u70b9\u5bf9\u91cd\u5b9a\u5411\u4e4b\u540e\u7684\u76ee\u6807 URL \uff08\u4e5f\u5373 301/302 \u54cd\u5e94\u5934 <code>Location</code> \u5b57\u6bb5\u5bf9\u5e94\u7684\u4fe1\u606f\uff09\u53d1\u8d77\u8bf7\u6c42\uff0c\u5c06\u83b7\u53d6\u540e\u7684\u5185\u5bb9\u54cd\u5e94\u7ed9\u6700\u7ec8\u7528\u6237\uff0c\u5e76\u5728 CDN \u8282\u70b9\u8fdb\u884c\u7f13\u5b58\u3002\u8fd9\u6837\u5411\u6700\u7ec8\u7528\u6237\u5c4f\u853d\u4e86\u91cd\u5b9a\u5411\u8fc7\u7a0b\uff0c\u514d\u53bb\u4e86\u6700\u7ec8\u7528\u6237\u518d\u6b21\u5411\u91cd\u5b9a\u5411\u540e\u7684 URL \u91cd\u65b0\u53d1\u8d77\u8bf7\u6c42\u7684\u8fde\u63a5\u65f6\u95f4\uff0c\u4ece\u800c\u52a0\u5feb\u4e86\u8bbf\u95ee\u901f\u5ea6\u3002</p> <p>\u539f\u7406\u4ecb\u7ecd</p> <p>\u4e00\u822c\u60c5\u51b5\u4e0b\uff0c\u5f53 CDN \u8282\u70b9\u56de\u6e90\u7ad9\u8bf7\u6c42\u6587\u4ef6\u65f6\uff0c\u82e5\u6e90\u7ad9\u8fd4\u56de\u7684\u662f HTTP 301/302 \u7684\u54cd\u5e94\uff0cCDN \u8282\u70b9\u4f1a\u5c06\u8be5\u54cd\u5e94\u8fd4\u56de\u7ed9\u5ba2\u6237\u7aef\uff0c\u5ba2\u6237\u7aef\u6839\u636e\u54cd\u5e94\u5934\u4e2d\u7684 <code>Location</code> \u5934\u4fe1\u606f\u8fdb\u884c\u518d\u6b21\u8bf7\u6c42\u3002\u914d\u7f6e\u4e86\u3010\u91cd\u5b9a\u5411\u8ddf\u968f\u3011\u529f\u80fd\u4e4b\u540e\uff0c\u8bbf\u95ee\u6d41\u7a0b\u5982\u4e0b\u56fe\u6240\u793a\uff1a</p> <p></p> <p>1\uff09\u5ba2\u6237\u7aef\u5411 CDN \u8282\u70b9\u53d1\u8d77\u8bf7\u6c42\u5e76\u4f20\u9012\u81f3\u6e90\u7ad9\uff0c\u4f8b\u5982\uff1a<code>http://example.com/123.html</code>\uff1b</p> <p>2\uff09\u6e90\u7ad9\u7ed9 CDN \u8282\u70b9\u54cd\u5e94 301/302 \u72b6\u6001\u7801\uff0c\u5e76\u6307\u660e\u91cd\u5b9a\u5411\u540e\u7684 URL \u4e3a <code>http://example.com/456.html</code></p> <p>3\uff09CDN \u8282\u70b9\u5bf9\u91cd\u5b9a\u5411\u4e4b\u540e\u5bf9\u76ee\u6807 URL \u53d1\u8d77\u8bf7\u6c42\uff1b</p> <p>4\uff09\u6e90\u7ad9\u54cd\u5e94\u5185\u5bb9\u7ed9\u6700\u7ec8\u7528\u6237\uff0c\u5e76\u5c06\u5185\u5bb9\u5728 CDN \u8282\u70b9\u8fdb\u884c\u7f13\u5b58\uff1b</p> <p>\u914d\u7f6e\u5f15\u5bfc</p> <p>\u767b\u9646 CDN \u63a7\u5236\u53f0\uff0c\u4f9d\u6b21\u8fdb\u5165\uff1a\u670d\u52a1\u7ba1\u7406 &gt; \u529f\u80fd\u914d\u7f6e &gt; \u6027\u80fd\u4f18\u5316 &gt; \u91cd\u5b9a\u5411\u8ddf\u968f\uff0c\u6ed1\u52a8\u5f00\u5173\u5373\u53ef\u5f00\u542f\u8be5\u529f\u80fd\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff1a</p> <p></p> <p>\u5728\u914d\u7f6e\u754c\u9762\uff0c\u6ed1\u52a8\u53f3\u8fb9\u7684\u6309\u94ae\uff0c\u5728\u786e\u5b9a\u5bf9\u8bdd\u6846\u4e0b\uff0c\u70b9\u51fb\u3010\u786e\u5b9a\u3011\u6309\u94ae\u5373\u53ef\u4e00\u952e\u5f00\u542f\u3002</p> <p>\u6ce8\u610f\u4e8b\u9879</p> <ul> <li> <p>\u5f00\u542f\u91cd\u5b9a\u5411\u8ddf\u968f\u540e\uff0c\u6700\u591a\u4ec5\u8ddf\u968f 3 \u8df3\uff0c\u8d85\u51fa\u9650\u5236\u5219\u4f1a\u76f4\u63a5\u8fd4\u56de 301/302 \u7ed9\u6700\u7ec8\u7528\u6237\uff1b</p> </li> <li> <p>\u5982\u91cd\u5b9a\u5411\u540e\u7684 Location \u5730\u5740\u4e5f\u5728\u53c8\u62cd\u4e91 CDN \u52a0\u901f\uff0c\u6211\u4eec\u9ed8\u8ba4\u4f1a\u5141\u8bb8\u4e00\u6b21\u8bbf\u95ee\uff0c\u8d85\u8fc7\u4e00\u6b21\uff0c\u5219\u4f1a\u76f4\u63a5\u54cd\u5e94 403\uff0c\u8bf7\u8c28\u614e\u4f7f\u7528\u3002</p> </li> </ul>"},{"location":"cdn/config/#47","title":"4.7 \u89c6\u9891\u62d6\u62c9","text":"<p>\u529f\u80fd\u8bf4\u660e</p> <p>\u89c6\u9891\u62d6\u62c9\u529f\u80fd\u7528\u4e8e\u89c6\u9891\u70b9\u64ad\u7684\u589e\u5f3a\u4f53\u9a8c\uff0c\u65b9\u4fbf\u6700\u7ec8\u7528\u6237\u901a\u8fc7\u62d6\u62c9\u64ad\u653e\u5668\u7684\u8fdb\u5ea6\u6761\uff0c\u89c2\u770b\u4efb\u610f\u8d77\u59cb\u4f4d\u7f6e\u7684\u89c6\u9891\uff0c\u800c\u65e0\u9700\u4ece\u5934\u89c2\u770b\u3002\u8be5\u529f\u80fd\u8fd8\u53ef\u4ee5\u6269\u5c55\u4e3a\u8df3\u8fc7\u7247\u5934\u3001\u7eed\u64ad\u3001\u9884\u64ad\u653e\u7b49\u529f\u80fd\u3002\u53d1\u9001\u62d6\u62c9\u64ad\u653e\u8fdb\u5ea6\u65f6\uff0c\u5ba2\u6237\u7aef\u53d1\u8d77\u7684\u8bf7\u6c42\u7c7b\u4f3c <code>http://video.upyun.com/test.mp4?start=100</code> \u8fd9\u6837\u7684 URL \u8bf7\u6c42\u3002</p> <p>\u76ee\u524d\u4ec5\u652f\u6301 MP4 \u548c FLV \u683c\u5f0f\u7684\u6587\u4ef6\u6309\u89c6\u9891\u5934\u62d6\u62c9\uff0c\u5e76\u4e14 FLV \u652f\u6301\u6309\u5b57\u8282\u62d6\u62c9\uff0cMP4 \u6309\u7167\u65f6\u95f4\u62d6\u62c9\u3002</p> <p>\u914d\u7f6e\u5f15\u5bfc</p> <p>\u767b\u9646 CDN \u63a7\u5236\u53f0\uff0c\u4f9d\u6b21\u8fdb\u5165\uff1a\u670d\u52a1\u7ba1\u7406 &gt; \u529f\u80fd\u914d\u7f6e &gt; \u6027\u80fd\u4f18\u5316 &gt; \u89c6\u9891\u62d6\u62c9\uff0c\u70b9\u51fb\u3010\u7ba1\u7406\u3011\u6309\u94ae\u5373\u53ef\u5f00\u59cb\u914d\u7f6e\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff1a</p> <p></p> <p>\u8be6\u7ec6\u914d\u7f6e\u8bf7\u53c2\u89c1 \u300c\u652f\u6301\u4ece\u4efb\u610f\u8d77\u70b9\u89c2\u770b\u300d\u89c6\u9891\u62d6\u62c9\u7528\u6237\u6307\u5357</p> <p>\u6ce8\u610f\u4e8b\u9879</p> <ul> <li> <p>\u64ad\u653e\u5668\u53ef\u4ee5\u53d1\u8d77\u7ea6\u5b9a\u683c\u5f0f\u7684\u8bf7\u6c42\uff0c\u4f8b\u5982\uff1ahttp://example.com/video/test.mp4?start=xxx&amp;end=xxx\uff1b</p> </li> <li> <p>\u6587\u4ef6\u9700\u542b\u6709\u5173\u952e\u5e27\uff0c\u8fd9\u662f\u5b9e\u73b0\u62d6\u62c9\u7684\u524d\u63d0\u6761\u4ef6\uff1b\u5173\u952e\u5e27\u592a\u5c11\u6216\u8005\u6ca1\u6709\u5173\u952e\u5e27\uff0c\u89c6\u9891\u6587\u4ef6\u9700\u8981\u91cd\u65b0\u7f16\u7801\uff1b</p> </li> <li> <p>\u89c6\u9891\u6587\u4ef6 metedata \u4e2d\u7f3a\u5c11\u5173\u952e\u5e27\u7684\u7d22\u5f15\u4fe1\u606f\uff0c\u5982 flv \u7f3a\u5c11 keyframes \u4fe1\u606f\uff0cmp4 \u7f3a\u5c11 seekpoints    \u4fe1\u606f\uff0c\u6216\u7f3a\u5931 moov box\uff0c\u90fd\u4f1a\u5bfc\u81f4\u62d6\u62c9\u5931\u8d25\uff1b</p> </li> <li> <p>\u6e90\u7ad9\u9700\u8981\u652f\u6301 range \u8bf7\u6c42\uff0c\u4e5f\u5373\u9488\u5bf9\u5ba2\u6237\u7aef\u53d1\u8d77\u7684 range \u8bf7\u6c42\uff0c\u6e90\u7ad9\u53ef\u4ee5\u6b63\u5e38\u54cd\u5e94 206 \u6587\u4ef6\u5206\u7247\uff1b</p> </li> <li> <p>\u652f\u6301\u6839\u636e\u4e0d\u540c\u8d44\u6e90\u8def\u5f84\u6dfb\u52a0\u914d\u7f6e\uff0c\u6700\u591a\u4ec5\u652f\u6301 20 \u6761\u3002</p> </li> </ul>"},{"location":"cdn/config/#48","title":"4.8 \u6d77\u5916\u52a0\u901f","text":"<p>\u529f\u80fd\u8bf4\u660e</p> <p>\u6839\u636e\u670d\u52a1\u4e0b\u5177\u4f53\u4e1a\u52a1\u60c5\u51b5\uff0c\u53ef\u4ee5\u6709\u9009\u62e9\u6027\u7684\u5173\u95ed\u548c\u5f00\u542f\u6d77\u5916\u52a0\u901f\uff0c\u9ed8\u8ba4\u4e3a\u5f00\u542f\u72b6\u6001\u3002\u6d77\u5916\u5730\u533a\u7279\u6307\u9664\u4e2d\u56fd\u5927\u9646\u4ee5\u5916\u7684\u5730\u533a\uff0c\u5305\u62ec\u6e2f\u6fb3\u53f0\u5730\u533a\u3002</p> <p>\u5f00\u542f\u72b6\u6001\u4e0b\uff0c\u6d77\u5916\u8bf7\u6c42\u4f1a\u9ed8\u8ba4\u89e3\u6790\u5230\u53c8\u62cd\u4e91\u6d77\u5916 CDN \u8282\u70b9\uff0c\u8ba1\u8d39\u6309\u6d77\u5916\u5730\u533a\u5b9a\u4ef7\u8ba1\u7b97\uff1b</p> <p>\u5173\u95ed\u72b6\u6001\u4e0b\uff0c\u6d77\u5916\u8bf7\u6c42\u4f1a\u9ed8\u8ba4\u89e3\u6790\u5230\u53c8\u62cd\u4e91\u56fd\u5185 CDN \u8282\u70b9\uff0c\u8ba1\u8d39\u6309\u56fd\u5185\u5730\u533a\u5b9a\u4ef7\u8ba1\u7b97\u3002</p> <p>\u914d\u7f6e\u5f15\u5bfc</p> <p>\u767b\u9646 CDN \u63a7\u5236\u53f0\uff0c\u4f9d\u6b21\u8fdb\u5165\uff1a\u670d\u52a1\u7ba1\u7406 &gt; \u529f\u80fd\u914d\u7f6e &gt; \u6027\u80fd\u4f18\u5316 &gt; \u6d77\u5916\u52a0\u901f\uff0c\u6ed1\u52a8\u5f00\u5173\u5373\u53ef\u5f00\u542f\u8be5\u529f\u80fd\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff1a</p> <p></p> <p>\u5728\u914d\u7f6e\u754c\u9762\uff0c\u6ed1\u52a8\u53f3\u8fb9\u7684\u6309\u94ae\uff0c\u5728\u786e\u5b9a\u5bf9\u8bdd\u6846\u4e0b\uff0c\u70b9\u51fb\u3010\u786e\u5b9a\u3011\u6309\u94ae\u5373\u53ef\u4e00\u952e\u5f00\u542f\u3002</p> <p>\u6ce8\u610f\u4e8b\u9879</p> <p>\u5173\u95ed\u72b6\u6001\u4e0b\uff0c\u6d77\u5916\u8bf7\u6c42\u4f1a\u89e3\u6790\u5230\u56fd\u5185 CDN \u8282\u70b9\uff0c\u53ef\u80fd\u4f1a\u5f71\u54cd\u5230\u6d77\u5916\u5730\u533a\u7ec8\u7aef\u7528\u6237\u7684\u8bbf\u95ee\u4f53\u9a8c\u3002</p>"},{"location":"cdn/config/#49","title":"4.9 \u667a\u80fd\u538b\u7f29","text":"<p>\u529f\u80fd\u8bf4\u660e</p> <p>\u53c8\u62cd\u4e91 CDN \u667a\u80fd\u538b\u7f29\u529f\u80fd\u5305\u62ec Gzip \u548c Brotli \u538b\u7f29\u7b97\u6cd5\u3002\u5f00\u542f\u8be5\u529f\u80fd\uff0c\u53ef\u5bf9\u9759\u6001\u6587\u4ef6\u7c7b\u578b\u8fdb\u884c\u538b\u7f29\uff0c\u6709\u6548\u51cf\u5c11\u7528\u6237\u4f20\u8f93\u5185\u5bb9\u5927\u5c0f\uff0c\u52a0\u901f\u5206\u53d1\u6548\u679c\u3002\u4e3a\u4e86\u914d\u7f6e\u7684\u7075\u6d3b\u6027\uff0c\u652f\u6301\u538b\u7f29\u7b49\u7ea7\u7684\u8bbe\u7f6e\uff0c\u5173\u4e8e\u538b\u7f29\u7b49\u7ea7\u7684\u8bf4\u660e\u5982\u4e0b\uff1a</p> <ul> <li>\u4e24\u79cd\u538b\u7f29\u7b97\u6cd5\u7684\u538b\u7f29\u7b49\u7ea7\u9ed8\u8ba4\u4e3a 1\uff0c\u7b49\u7ea7\u8d8a\u9ad8\uff0c\u538b\u7f29\u7387\u8d8a\u5927\uff1b</li> <li>\u8003\u8651\u5230\u538b\u7f29\u7b49\u7ea7\u8d8a\u9ad8\uff0c\u538b\u7f29\u901f\u5ea6\u4f1a\u964d\u4f4e\uff0c\u5b9e\u9645\u751f\u4ea7\u73af\u5883\uff0c\u5efa\u8bae\u538b\u7f29\u7b49\u7ea7\u63a7\u5236\u5728 3 \u4ee5\u5185\uff0c\u5177\u4f53\u4ee5\u7ebf\u4e0a\u73af\u5883\u5b9e\u6d4b\u4e3a\u51c6\uff1b</li> </ul> <p>\u6ee1\u8db3\u6761\u4ef6</p> <p>\u89e6\u53d1\u5b9e\u9645\u7684 Gzip \u53ca Brotli \u538b\u7f29\u884c\u4e3a\u9700\u8981\u540c\u65f6\u6ee1\u8db3\u5982\u4e0b\u6761\u4ef6\uff1a</p> <p>1\u3001Content-Type \u6ee1\u8db3\u4ee5\u4e0b\u5217\u8868\u5176\u4e2d\u4e4b\u4e00\uff1a</p> <pre><code>text/plain\ntext/javascript\ntext/css\ntext/xml\ntext/x-component\napplication/javascript\napplication/x-javascript\napplication/xml\napplication/json\napplication/xhtml+xml\napplication/rss+xml\napplication/atom+xml\napplication/x-font-ttf\napplication/vnd.ms-fontobject\nimage/svg+xml\nimage/x-icon\nfont/opentype\n\n</code></pre> <p>2\u3001Content-Length \u5927\u4e8e 256 \u5b57\u8282\uff1b</p> <p>3\u3001\u5ba2\u6237\u7aef\u8bf7\u6c42\u5934\u5e26\u4e86 <code>Accept-Encoding: gzip, br</code>\u3002</p> <p>\u914d\u7f6e\u5f15\u5bfc</p> <p>\u767b\u9646 CDN \u63a7\u5236\u53f0\uff0c\u8fdb\u5165 \u300c\u6027\u80fd\u4f18\u5316\u300d\u914d\u7f6e\u9875\u9762\uff0c\u627e\u5230\u300c\u667a\u80fd\u538b\u7f29\u300d\u914d\u7f6e\u9879\uff0c\u70b9\u51fb\u3010\u7ba1\u7406\u3011\u6309\u94ae\uff0c\u8fdb\u5165\u5982\u4e0b\u914d\u7f6e\u754c\u9762\uff1a</p> <p></p> <p>\u7ed3\u5408\u4e24\u79cd\u538b\u7f29\u7b97\u6cd5\uff0c\u5728 CDN \u63a7\u5236\u53f0\u7684\u914d\u7f6e\u6709 4 \u79cd\u72b6\u6001\uff0c\u76f8\u5173\u914d\u7f6e\u8bf7\u53c2\u8003\u5982\u4e0b\u622a\u56fe\u548c\u8bf4\u660e\uff1a</p> <p>\u72b6\u6001\u4e00\uff1a\u540c\u65f6\u5173\u95ed Gzip \u548c Brotli</p> <p></p> <p>\u8be5\u72b6\u6001\u4e0b\uff0cCDN \u4e0d\u652f\u6301 Gzip  \u548c Brotli \u3002</p> <p>\u72b6\u6001\u4e8c\uff1a\u53ea\u5f00\u542f Gzip</p> <p></p> <p>\u8be5\u72b6\u6001\u4e0b\uff0cCDN \u4ec5\u652f\u6301 Gzip \u538b\u7f29\u3002</p> <p>\u72b6\u6001\u4e09\uff1a\u53ea\u5f00\u542f Brotli</p> <p></p> <p>\u8be5\u72b6\u6001\u4e0b\uff0cCDN \u4ec5\u652f\u6301 Brotli \u538b\u7f29\u3002</p> <p>\u72b6\u6001\u56db\uff1a\u540c\u65f6\u5f00\u542f Gzip \u548c Brotli</p> <p></p> <p>\u5982\u679c\u5ba2\u6237\u7aef\u540c\u65f6\u90fd\u652f\u6301 Gzip \u548c Brotli \uff0cCDN \u4f1a\u4f18\u5148\u4f7f\u7528 Brotli \u538b\u7f29\u7b97\u6cd5\u3002</p> <p>\u5173\u4e8e\u538b\u7f29\u7b49\u7ea7</p> <p></p> <p>Gzip \u548c Brotli \u9ed8\u8ba4\u7684\u538b\u7f29\u7b49\u7ea7\u4e3a 1\uff0c\u538b\u7f29\u7b49\u7ea7\u7684\u8303\u56f4\u4e3a 1 ~ 5\uff0c\u538b\u7f29\u7b49\u7ea7\u8d8a\u9ad8\uff0c\u538b\u7f29\u7387\u8d8a\u5927\uff0c\u4f46\u662f\u538b\u7f29\u901f\u5ea6\u4f1a\u76f8\u5bf9\u964d\u4f4e\uff0c\u60a8\u53ef\u4ee5\u6839\u636e\u8981\u6c42\u8fdb\u884c\u81ea\u5b9a\u4e49\u8bbe\u7f6e\uff0c\u539f\u5219\u4e0a\uff0c\u6211\u4eec\u5efa\u8bae\u5728\u751f\u4ea7\u73af\u5883\uff0c\u538b\u7f29\u7b49\u7ea7\u4e0d\u8981\u9ad8\u4e8e 3 \u3002\u66f4\u591a\u5173\u4e8e\u538b\u7f29\u7b49\u7ea7\u7684\u4ecb\u7ecd\u8bf7\u53c2\u8003 \u8fd9\u91cc \u3002</p> <p>\u6ce8\u610f\u4e8b\u9879</p> <ul> <li>\u5f53\u5ba2\u6237\u7aef\u540c\u65f6\u652f\u6301 Gzip \u548c Brotli \u7b97\u6cd5\u7684\u60c5\u51b5\u4e0b\uff0cBrotli \u7684\u4f18\u5148\u7ea7\u9ad8\u4e8e Gzip\u3002</li> </ul>"},{"location":"cdn/config/#410","title":"4.10 \u6587\u4ef6\u5408\u5e76","text":"<p><code>\u53c8\u62cd\u4e91\u5b58\u50a8</code> \u548c  <code>\u81ea\u4e3b\u6e90\u7ad9</code> CDN \u52a0\u901f\u670d\u52a1\u5747\u652f\u6301 JS\uff0cCSS Combo\uff08\u7ec4\u5408\u7279\u6027\uff09\uff0c\u5373\u53ef\u4ee5\u628a\u591a\u4e2a JS, CSS \u8bf7\u6c42\u5408\u5e76\u6210\u4e00\u4e2a\u3002</p> <p>\u5982\u4f55\u4f7f\u7528</p> <p>\u7279\u522b\u5730\uff0c\u6211\u4eec\u4ee5 <code>!!</code> \u4f5c\u4e3a\u5206\u9694\u7b26\u3002</p> <pre><code>http://upyun-assets.b0.upaiyun.com/foo/!!a.js,b.js\n</code></pre> <p>\u4e00\u4e2a\u5f15\u7528\u4e86\u5982\u4e0a URL \u7684 Demo:</p> <pre><code>http://upyun-assets.b0.upaiyun.com/jscombo.html\n</code></pre>"},{"location":"cdn/config/#5https","title":"5.HTTPS","text":""},{"location":"cdn/config/#51-https","title":"5.1 HTTPS \u914d\u7f6e","text":"<p>\u529f\u80fd\u8bf4\u660e</p> <p>\u53c8\u62cd\u4e91 HTTPS \u52a0\u901f\u670d\u52a1\u5efa\u7acb\u5728\u81ea\u4e3b\u7814\u53d1\u7684\u5185\u5bb9\u5206\u53d1\u7f51\u7edc\u57fa\u7840\u4e4b\u4e0a\uff0c\u5168\u9762\u652f\u6301\u4e86 HTTPS \u534f\u8bae\u52a0\u901f\u3002\u901a\u8fc7\u4f1a\u8bdd\u91cd\u7528\u53ca\u4f1a\u8bdd\u4fdd\u6301\u3001\u5728\u7ebf\u8bc1\u4e66\u72b6\u6001\u68c0\u67e5\u3001\u534f\u8bae\u4f18\u5316\u3001SSL \u534f\u8bae\u63e1\u624b\u4f18\u5316\u3001HTTP/2 \u7b49\u6280\u672f\u624b\u6bb5\uff0c\u5168\u9762\u63d0\u5347\u4e86 HTTPS \u534f\u8bae\u52a0\u901f\u6027\u80fd\u3002</p> <p>\u914d\u7f6e\u5f15\u5bfc</p> <p>\u7b2c\u4e00\u6b65\uff1a\u4f9d\u6b21\u8fdb\u5165\uff1a\u670d\u52a1\u7ba1\u7406 &gt; \u529f\u80fd\u914d\u7f6e &gt; HTTPS, \u70b9\u51fb <code>\u7ba1\u7406</code> \u5373\u53ef\u5f00\u59cb\u914d\u7f6e\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff1a</p> <p></p> <p>\u7b2c\u4e8c\u6b65\uff1a\u53ef\u9488\u5bf9\u5355\u4e2a\u57df\u540d\u9009\u62e9\u76f8\u5e94\u7684\u8bc1\u4e66\uff0c\u7136\u540e\u4fdd\u5b58\u3002\u5982\u679c\u65e0\u8bc1\u4e66\u53ef\u9009\uff0c\u53ef\u524d\u5f80 SSL \u8bc1\u4e66\u670d\u52a1\u5e73\u53f0\u6dfb\u52a0\u57df\u540d\u7684\u81ea\u6709\u8bc1\u4e66\uff1b\u7528\u6237\u4e5f\u53ef\u76f4\u63a5\u5728 SSL \u8bc1\u4e66\u7533\u8d2d\u5e73\u53f0\u7533\u8d2d Symantec\u3001GeoTrust\u3001TrustAsia\u3001Let\u2019s Encrypt \u7684\u5404\u7c7b SSL \u8bc1\u4e66\uff0c\u5176\u4e2d TrustAsia\u3001Let\u2019s Encrypt \u7684 DV SSL \u5355\u57df\u540d\u8bc1\u4e66\u53ef\u514d\u8d39\u7533\u8bf7\u3002</p> <p></p> <p>\u7b2c\u4e09\u6b65\uff1a\u53ef\u9009\u62e9\u662f\u5426\u5f00\u542f HTTPS \u8bbf\u95ee\u548c\u5f3a\u5236 HTTPS \u529f\u80fd\u3002\u5728\u5f00\u542f HTTPS \u8bbf\u95ee\u540e\uff0c\u53ef\u901a\u8fc7\u70b9\u51fb <code>\u4fee\u6539</code> \u5207\u6362\u57df\u540d\u6240\u5bf9\u5e94\u7684\u8bc1\u4e66\uff0c\u70b9\u51fb <code>\u8be6\u60c5</code> \u53ef\u67e5\u770b\u76f8\u5e94\u8bc1\u4e66\u7684\u8be6\u7ec6\u4fe1\u606f\uff1b</p> <p></p> <p>\u201c HTTPS \u8bbf\u95ee\u201d\uff1a\u5f00\u542f\u8be5\u529f\u80fd\u540e\uff0c\u5ba2\u6237\u7aef\u624d\u80fd\u4f7f\u7528 HTTPS \u534f\u8bae\u8fdb\u884c\u8bbf\u95ee\uff0c\u9ed8\u8ba4\u5173\u95ed\u3002</p> <p>\u201c\u5f3a\u5236 HTTPS \u201d\uff1a\u52fe\u9009\u6b64\u529f\u80fd\u540e\uff0c\u53c8\u62cd\u4e91\u8fb9\u7f18\u8282\u70b9\u6536\u5230\u7528\u6237\u7684 HTTP \u8bf7\u6c42\u540e\u4f1a\u5c06\u5176\u5f3a\u5236\u8df3\u8f6c\u5230 HTTPS \u8fdb\u884c\u8bbf\u95ee\u3002\u9ed8\u8ba4\uff1a\u517c\u5bb9\u7528\u6237\u7684 HTTP \u548c HTTPS \u8bf7\u6c42\u3002</p> <p>\u5907\u6ce8\uff1a\u5176\u4e2d <code>HTTPS \u914d\u7f6e</code> \u4e5f\u53ef\u4ee5\u5728 <code>SSL \u8bc1\u4e66\u7ba1\u7406</code>\u91cc\u9762\u914d\u7f6e\uff0c\u53c2\u89c1\u4e0b\u6587<code>SSL \u8bc1\u4e66\u7ba1\u7406</code>\u90e8\u5206\u3002</p> <p>\u81ea\u6709\u8bc1\u4e66\u6dfb\u52a0</p> <p>\u5982\u679c\u57df\u540d\u5f53\u524d\u5df2\u6709\u8bc1\u4e66\uff0c\u53c8\u62cd\u4e91\u63d0\u4f9b\u4e86\u81ea\u6709\u8bc1\u4e66\u7684\u4e0a\u4f20\u65b9\u5f0f\uff0c\u65e0\u9700\u4eba\u5de5\u534f\u52a9\uff0c\u5b89\u5168\u4fbf\u6377\u3002</p> <p>\u7b2c\u4e00\u6b65\uff1a\u8fdb\u5165 SSL \u8bc1\u4e66\u670d\u52a1\uff0c\u5de5\u5177\u7bb1 -&gt; SSL \u8bc1\u4e66\u670d\u52a1 -&gt; \u8bc1\u4e66\u7ba1\u7406 -&gt; \u6dfb\u52a0\u81ea\u6709\u8bc1\u4e66 </p> <p></p> <p>\u7b2c\u4e8c\u6b65\uff1a\u7c98\u8d34\u8bc1\u4e66\u5185\u5bb9:</p> <p></p> <p>\u70b9\u51fb <code>\u4fdd\u5b58</code> \u4e4b\u540e\uff0c\u53ef\u67e5\u770b SSL \u8bc1\u4e66\u4fe1\u606f\u5982\u4e0b\u56fe\u6240\u793a\uff1a</p> <p></p> <p>SSL \u8bc1\u4e66\u7ba1\u7406</p> <p>\u5728\u8bc1\u4e66\u7ba1\u7406\u5217\u8868\u4e2d\uff0c\u53ef\u6839\u636e\u9700\u6c42\u9009\u62e9\u7533\u8d2d\u6210\u529f\u5e76\u5df2\u90e8\u7f72\u4e8e CDN \u5e73\u53f0\u7684\u8bc1\u4e66\u6216\u5df2\u4e0a\u4f20\u7684\u81ea\u6709\u8bc1\u4e66\uff0c\u70b9\u51fb <code>HTTPS \u914d\u7f6e</code>\u8fdb\u884c\u64cd\u4f5c \uff0c\u5982\u4e0b\u56fe\u6240\u793a\uff1a</p> <p></p> <p>\u201cHTTPS \u8bbf\u95ee\u201d\uff1a\u5f00\u542f\u8be5\u529f\u80fd\u540e\uff0c\u5ba2\u6237\u7aef\u4f7f\u7528 HTTPS \u534f\u8bae\u8bbf\u95ee\u65f6\u624d\u80fd\u6210\u529f\uff0c\u9ed8\u8ba4\u5173\u95ed\u3002</p> <p>\u201c\u5f3a\u5236 HTTPS\u201d\uff1a\u52fe\u9009\u6b64\u529f\u80fd\u540e\uff0c\u53c8\u62cd\u4e91\u8fb9\u7f18\u8282\u70b9\u6536\u5230\u7528\u6237\u7684 HTTP \u8bf7\u6c42\u540e\u4f1a\u5c06\u5176\u5f3a\u5236\u8df3\u8f6c\u5230 HTTPS \u8fdb\u884c\u8bbf\u95ee\u3002\u9ed8\u8ba4\uff1a\u517c\u5bb9\u7528\u6237\u7684 HTTP \u548c HTTPS \u8bf7\u6c42\u3002</p>"},{"location":"cdn/config/#52-hsts","title":"5.2 HSTS \u914d\u7f6e","text":"<p>\u529f\u80fd\u8bf4\u660e</p> <p>HSTS\uff08HTTP Strict Transport Security\uff0cHTTP \u4e25\u683c\u4f20\u8f93\u5b89\u5168)\uff0c\u662f\u4e00\u5957\u7531\u4e92\u8054\u7f51\u5de5\u7a0b\u4efb\u52a1\u7ec4\u53d1\u5e03\u7684\u4e92\u8054\u7f51\u5b89\u5168\u7b56\u7565\u673a\u5236\u3002\u7f51\u7ad9\u53ef\u4ee5\u901a\u8fc7\u914d\u7f6e HSTS\uff0c\u6765\u5f3a\u5236\u6d4f\u89c8\u5668\u4f7f\u7528 HTTPS \u4e0e\u7f51\u7ad9\u901a\u4fe1\uff0c\u4fdd\u969c\u7f51\u7ad9\u66f4\u52a0\u5b89\u5168\u3002</p> <p>\u914d\u7f6e\u5f15\u5bfc</p> <p>\u767b\u9646 CDN \u63a7\u5236\u53f0\uff0c\u4f9d\u6b21\u8fdb\u5165\uff1a\u670d\u52a1\u7ba1\u7406 &gt; \u529f\u80fd\u914d\u7f6e &gt; HTTPS, \u70b9\u51fb <code>\u7ba1\u7406</code> \u6309\u94ae\u5373\u53ef\u5f00\u59cb\u914d\u7f6e\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff1a</p> <p></p> <p>\u8fdb\u5165\u89c4\u5219\u7ba1\u7406\u9875\u9762\uff0c\u5982\u4e0b\u56fe\u6240\u793a\uff1a</p> <p></p> <p>\u70b9\u51fb\u3010\u6dfb\u52a0\u89c4\u5219\u3011\u6309\u94ae\uff0c\u5373\u53ef\u5f00\u59cb\u914d\u7f6e\u89c4\u5219\uff1a</p> <p></p> <p>\u6839\u636e\u8981\u6c42\u586b\u5199\u597d\u914d\u7f6e\u89c4\u5219\uff0c\u70b9\u51fb\u3010\u4fdd\u6301\u3011\u6309\u94ae\u5373\u53ef\u3002\u66f4\u591a\u5173\u4e8e HSTS \u914d\u7f6e\u9879\u4fe1\u606f\uff0c\u8bf7\u53c2\u89c1 HSTS \u52a9\u529b\u7f51\u7ad9\u66f4\u5b89\u5168 \u3002</p>"},{"location":"cdn/config/#53-http2","title":"5.3 HTTP/2 \u914d\u7f6e","text":"<p>\u529f\u80fd\u8bf4\u660e</p> <p>HTTP/2 \u5373\u8d85\u6587\u672c\u4f20\u8f93\u534f\u8bae 2.0\uff0c\u662f\u4e0b\u4e00\u4ee3 HTTP \u534f\u8bae\uff0c\u5728 CDN \u63a7\u5236\u53f0\u60a8\u53ef\u4ee5\u7075\u6d3b\u8fdb\u884c HTTP/2 \u7279\u6027\u7684\u5f00\u542f\u548c\u5173\u95ed\u3002</p> <p>\u53c8\u62cd\u4e91 CDN \u670d\u52a1\u5f53\u524d\u5df2\u5168\u5e73\u53f0\u652f\u6301 HTTP/2\u3002HTTP/2 \u662f\u5728 HTTPS \u534f\u8bae\u7684\u57fa\u7840\u4e0a\u5b9e\u73b0\u7684\uff0c\u53ea\u8981\u4f7f\u7528\u53c8\u62cd\u4e91 HTTPS \u52a0\u901f\u670d\u52a1\u7684\u57df\u540d\uff0c\u90fd\u53ef\u514d\u8d39\u4eab\u53d7 HTTP/2 \u670d\u52a1\u3002\u53c8\u62cd\u4e91\u63a7\u5236\u53f0\u5173\u4e8e HTTP/2 \u7684\u914d\u7f6e\u652f\u6301\u4e09\u79cd\u6a21\u5f0f\u7684\u8bbe\u7f6e\uff0c\u5206\u522b\u662f\uff1a</p> <ul> <li>\u5f00\u542f HTTP/2 </li> </ul> <p>\u9ed8\u8ba4\u5f00\u542f HTTP/2 \u7279\u6027\uff0c\u5305\u62ec\u91c7\u7528\u4e8c\u8fdb\u5236\u683c\u5f0f\u4f20\u8f93\u6570\u636e\u3001\u5bf9\u6d88\u606f\u5934\u91c7\u7528 HPACK \u8fdb\u884c\u538b\u7f29\u4f20\u8f93\u3001\u591a\u8def\u590d\u7528 \u7b49\u7279\u6027\uff0c\u4f46\u4e0d\u5305\u62ec Server Push \u7279\u6027\u3002</p> <ul> <li>\u5173\u95ed HTTP/2 </li> </ul> <p>\u5982\u9700\u5173\u95ed HTTP/2 \u7279\u6027\uff0c\u53ef\u4ee5\u9009\u62e9\u5173\u95ed\uff0c\u8bf7\u6839\u636e\u8981\u6c42\u5408\u7406\u5173\u95ed\u3002</p> <ul> <li>\u5f00\u542f HTTP/2 + Server Push </li> </ul> <p>\u8be5\u6a21\u5f0f\u4e0b\uff0c\u652f\u6301 HTTP/2 \u7684\u6240\u6709\u7279\u6027\uff0c\u5176\u4e2d Server Push \u7279\u6027\u9700\u8981\u6839\u636e\u4e1a\u52a1\u9700\u6c42\u5408\u7406\u914d\u7f6e\u3002</p> <p>\u7279\u522b\u5f3a\u8c03\u7684\u662f\uff0cServer Push \u662f HTTP/2 \u89c4\u8303\u4e2d\u5f15\u5165\u7684\u4e00\u79cd\u65b0\u6280\u672f\uff0c\u4e5f\u5373\u670d\u52a1\u7aef\u5728\u6ca1\u6709\u88ab\u5ba2\u6237\u7aef\u660e\u786e\u7684\u8be2\u95ee\u4e0b\uff0c\u62a2\u5148\u7684 \u201c\u63a8\u9001\u201d \u4e00\u4e9b\u7f51\u7ad9\u8d44\u6e90\u7ed9\u5ba2\u6237\u7aef\u3002\u8be5\u7279\u6027\u53ea\u8981\u88ab\u6b63\u786e\u7684\u4f7f\u7528\uff0c\u53ef\u4ee5\u8fbe\u5230\u5f88\u597d\u7684\u9875\u9762\u8bbf\u95ee\u6548\u679c\u3002</p> <p>\u914d\u7f6e\u5f15\u5bfc</p> <p>\u767b\u9646 CDN \u63a7\u5236\u53f0\uff0c\u4f9d\u6b21\u8fdb\u5165\uff1a\u670d\u52a1\u7ba1\u7406 &gt; \u529f\u80fd\u914d\u7f6e &gt; HTTPS &gt; HTTP/2 \u914d\u7f6e\uff0c\u70b9\u51fb\u3010\u7ba1\u7406\u3011\u6309\u94ae\u5373\u53ef\u5f00\u59cb\u914d\u7f6e\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff1a</p> <p>1\uff09\u5f00\u542f HTTP/2 </p> <p>\u9ed8\u8ba4\u5df2\u7ecf\u5f00\u542f\uff0c\u5982\u622a\u56fe\u6240\u793a\uff1a</p> <p></p> <p>\u6ce8\u610f\uff1a\u5f53\u4e14\u4ec5\u5f53\u5f00\u542f HTTPS \u52a0\u901f\u65f6\uff0cHTTP/2 \u7279\u6027\u624d\u4f1a\u751f\u6548\u3002</p> <p>2\uff09\u5173\u95ed HTTP/2 </p> <p>\u5982\u9700\u5173\u95ed HTTP/2 \u7279\u6027\uff0c\u53ef\u4ee5\u5728\u63a7\u5236\u53f0\u5173\u95ed\uff0c\u70b9\u51fb\u3010\u5173\u95ed HTTP/2\u3011\u6309\u94ae\uff0c\u7136\u540e\u70b9\u51fb\u3010\u786e\u5b9a\u3011\u5373\u53ef\u4fdd\u5b58\u914d\u7f6e\u3002\u5982\u622a\u56fe\u6240\u793a\uff1a</p> <p></p> <p>3\uff09\u5f00\u542f HTTP/2 + Server Push </p> <p>\u5982\u4e0b\u622a\u56fe\u6240\u793a\uff0c\u70b9\u51fb\u3010 \u5f00\u542f HTTP/2 + Server Push \u3011\u6309\u94ae\uff0c\u914d\u7f6e\u5339\u914d\u8def\u5f84\u4ee5\u53ca\u63a8\u9001\u8d44\u6e90\uff0c\u7136\u540e\u70b9\u51fb\u3010\u786e\u5b9a\u3011\u5373\u53ef\u4fdd\u5b58\u914d\u7f6e\u3002</p> <p></p> <p>\u5176\u4e2d\uff0c\u5728\u914d\u7f6e\u9879\u91cc\u9762\uff0c\u3010\u5339\u914d\u8def\u5f84\u3011\u662f\u5fc5\u586b\u9879\uff0c\u3010\u63a8\u9001\u8d44\u6e90\u3011\u662f\u975e\u5fc5\u586b\u9879\u3002</p> <p>\u5339\u914d\u8def\u5f84\uff1a\u4e5f\u5373 Server Push \u7279\u6027\u4ec5\u9488\u5bf9\u5339\u914d\u7684 URI  \u751f\u6548\uff0c\u793a\u4f8b\u4e3a\uff1a</p> <pre><code>/index.html\n/admin.html\n\n</code></pre> <p>\u63a8\u9001\u8d44\u6e90\uff1a\u8868\u793a\u5339\u914d URI \u540e\u5c06\u8981\u63a8\u9001\u7684\u8d44\u6e90\u7684 PATH\uff08\u4e0d\u5305\u62ec HOST \u90e8\u5206\uff09\uff0c\u793a\u4f8b\u4e3a\uff1a</p> <pre><code>/style/index.css\n/dyn/index.js\n\n</code></pre> <p>\u9700\u8981\u6ce8\u610f\u7684\u662f\u5f53\u6e90\u7ad9\u6709\u8bbe\u7f6e Link \u9996\u90e8\u65f6\uff0c\u5373\u4f7f\u3010\u63a8\u9001\u8d44\u6e90\u3011\u5728 CDN \u7aef\u6ca1\u6709\u8fdb\u884c\u81ea\u5b9a\u4e49\u8bbe\u7f6e\uff0c\u4e5f\u4f1a\u751f\u6548\uff0c\u5176\u4e2d Link \u9996\u90e8\u7684\u793a\u4f8b\u4e3a\uff1a</p> <pre><code>Link: &lt;/css/styles.css&gt;; rel=preload; as=style\n\n</code></pre> <p>\u6ce8\u610f\u4e8b\u9879</p> <ul> <li>HTTP/2 \u7279\u6027\u662f\u5728 HTTPS \u534f\u8bae\u7684\u57fa\u7840\u4e0a\u5b9e\u73b0\uff0c\u9700\u8981\u52a0\u901f\u57df\u540d\u652f\u6301 HTTPS \u8bbf\u95ee\u65b9\u53ef\u652f\u6301\u8be5\u7279\u6027\uff1b</li> <li>\u4f7f\u7528 Server Push \u7279\u6027\uff0c\u901a\u5e38\u4f1a\u5728\u6e90\u7ad9\u8bbe\u7f6e Link \u9996\u90e8\uff0c\u4f8b\u5982\uff1a</li> </ul> <pre><code>Link: &lt;/css/styles.css&gt;; rel=preload; as=style\n\n</code></pre> <p>\u5982\u679c\u5728 CDN \u7aef\u8fdb\u884c\u81ea\u5b9a\u4e49 Server Push \u914d\u7f6e\uff0c\u4f18\u5148\u7ea7\u4f1a\u9ad8\u4e8e\u6e90\u7ad9\u8bbe\u7f6e\u7684 Link \u9996\u90e8\u3002</p>"},{"location":"cdn/config/#54","title":"5.4 \u517c\u5bb9\u6027\u8bf4\u660e","text":"<p>\u53c8\u62cd\u4e91 HTTPS \u52a0\u901f\u670d\u52a1\u662f\u57fa\u4e8e SNI \u6280\u672f\u5b9e\u73b0\u7684\uff0c\u56e0\u6b64\u67d0\u4e9b\u4e0d\u652f\u6301 SNI \u7684\u6d4f\u89c8\u5668\u6216\u5ba2\u6237\u7aef\u8bbf\u95ee\u53ef\u80fd\u51fa\u73b0\u95ee\u9898\u3002\u652f\u6301 SNI \u7684\u5ba2\u6237\u7aef\u5217\u8868\u5982\u4e0b\uff1a</p> <p></p> <p>\u58f0\u660e\uff1a\u8fd0\u884c\u5728 Windows XP \u4e0a\u7684\u6240\u6709\u7248\u672c\u7684 Internet Explorer \u90fd\u4e0d\u652f\u6301 SNI \uff0c\u8be6\u7ec6\u8bf7\u53c2\u8003\u8fd9\u91cc\u3002</p>"},{"location":"cdn/config/#55-tls-13","title":"5.5 TLS 1.3","text":"<p>\u529f\u80fd\u8bf4\u660e</p> <p><code>TLS 1.3</code> \u662f TLS \u534f\u8bae\u4e2d\u6700\u65b0\u3001\u6700\u5feb\u548c\u6700\u5b89\u5168\u7684\u7248\u672c\uff0c\u76f8\u6bd4\u65e7\u7248\u7684 TLS \u534f\u8bae\u589e\u52a0\u4e86\u591a\u9879\u65b0\u529f\u80fd\u3002\u901a\u8fc7\u7b80\u5316 SSL \u63e1\u624b\uff0c\u63d0\u9ad8\u4e86\u5efa\u8fde\u901f\u5ea6\uff0c\u51cf\u5c11\u4e86\u5ef6\u8fdf\u3002\u5e76\u901a\u8fc7\u79fb\u9664\u6709\u5b89\u5168\u9690\u60a3\u7684\u52a0\u5bc6\u7b97\u6cd5\uff0c\u63d0\u9ad8\u4e86\u7528\u6237\u8bbf\u95ee\u7684\u6027\u80fd\u3001\u6548\u7387\u548c\u5b89\u5168\u6027\u7b49\u7b49\u3002\u76ee\u524d <code>TLS 1.3</code> \u5df2\u5728 CDN \u5168\u5e73\u53f0\u652f\u6301\uff0c\u60a8\u53ef\u4ee5\u6839\u636e\u4e1a\u52a1\u9700\u6c42\u5408\u7406\u5173\u95ed\u548c\u5f00\u542f\u3002</p> <p>\u5982\u4f55\u4f7f\u7528\uff1f</p> <p>1\u3001\u5982\u4f55\u5728\u6d4f\u89c8\u5668\uff08\u5ba2\u6237\u7aef\uff09\u4e2d\u5f00\u542f TLS 1.3 \uff1f</p> <p>\u76ee\u524d\u6700\u65b0\u7248\u672c\u7684 Chrome \u548c Firefox\u00a0\u90fd\u652f\u6301 <code>TLS 1.3</code>\uff0c\u4f46\u662f\u90fd\u9700\u8981\u624b\u52a8\u5f00\u542f\uff0c\u4e3b\u8981\u539f\u56e0\u662f <code>TLS 1.3</code> \u8fd8\u5728\u8349\u6848\u9636\u6bb5\u3002</p> <p>1) \u5982\u4f55\u5728 Firefox \u4e2d\u624b\u52a8\u542f\u7528 <code>TLS 1.3</code> \uff1f</p> <p></p> <p>Mozilla Firefox \u7528\u6237\u53ef\u4ee5\u901a\u8fc7\u4ee5\u4e0b\u65b9\u5f0f\u5728 Firefox \u4e2d\u542f\u7528 <code>TLS 1.3</code> \u652f\u6301\uff08 \u8bf7\u6ce8\u610f\uff0cNightly \u9ed8\u8ba4\u652f\u6301 <code>TLS 1.3</code>\uff0c\u800c Firefox Stable \u9700\u8981\u4e13\u95e8\u914d\u7f6e\u4ee5\u652f\u6301 TLS 1.3 \uff09\u3002</p> <ul> <li>\u5728 Firefox \u5730\u5740\u680f\u4e2d\u52a0\u8f7d <code>about:config</code>\u3002\u5982\u679c\u663e\u793a\u8b66\u544a\u5c4f\u5e55\uff0c\u8bf7\u786e\u8ba4\u60a8\u8981\u5c0f\u5fc3\uff0c\u8bf7\u5ffd\u7565\u5b89\u5168\u63d0\u793a\uff1b</li> <li>\u5728\u641c\u7d22\u533a\u57df\u641c\u7d22 <code>security.tls.version.max</code>\uff1b</li> <li>\u901a\u8fc7\u53cc\u51fb\u5b83\u5c06\u9996\u9009\u9879\u7684\u503c\u66f4\u6539\u4e3a 4\uff0c\u9ed8\u8ba4\u4e3a 3\uff0c\u5982\u4e0a\u56fe\u6240\u793a\u3002</li> </ul> <p>2\uff09\u5982\u4f55\u5728 Chrome \u4e2d\u624b\u52a8\u542f\u52a8 <code>TLS 1.3</code> \uff1f</p> <p></p> <p>Google Chrome \u7528\u6237\u53ef\u4ee5\u901a\u8fc7\u4ee5\u4e0b\u65b9\u5f0f\u5728\u00a0Chrome \u4e2d\u542f\u7528 <code>TLS 1.3</code> \u652f\u6301\uff08 \u6ce8\u610f\uff1a<code>Chrome 62</code>\u00a0 \u4e4b\u524d\u7684\u7248\u672c\u9700\u8981\u5c06\u00a0<code>Maximum TLS version enabled</code>\u00a0\u00a0\u6539\u4e3a\u00a0<code>TLS 1.3</code> \uff09</p> <ul> <li>\u5728\u6d4f\u89c8\u5668\u7684\u5730\u5740\u680f\u4e2d\u52a0\u8f7d <code>chrome://flags/</code>\u3002\u8fd9\u5c06\u6253\u5f00 Web \u6d4f\u89c8\u5668\u7684\u5b9e\u9a8c\u9875\u9762\uff1b</li> <li>\u5728\u641c\u7d22\u533a\u57df\u641c\u7d22 TLS \u6216\u8005 tls \uff0c\u627e\u5230 <code>TLS 1.3</code>\u00a0 \u9009\u9879\uff0c\u9ed8\u8ba4\u4e3a Default\uff1b</li> <li>\u9700\u8981\u5c06\u00a0\u00a0<code>TLS 1.3</code>\u00a0\u6539\u4e3a\u00a0<code>Enabled (Draft)</code>\uff1b</li> <li>\u91cd\u65b0\u542f\u52a8 Web \u6d4f\u89c8\u5668\u3002</li> </ul> <p>2\u3001\u5982\u4f55\u5728\u53c8\u62cd\u4e91 CDN \uff08\u670d\u52a1\u7aef\uff09\u63a7\u5236\u53f0\u5f00\u542f <code>TLS 1.3</code> \uff1f</p> <p>\u767b\u9646 CDN \u63a7\u5236\u53f0\uff0c\u4f9d\u6b21\u8fdb\u5165\uff1a\u670d\u52a1\u7ba1\u7406 &gt; \u529f\u80fd\u914d\u7f6e &gt; HTTPS &gt; TLS 1.3, \u6ed1\u52a8\u5f00\u5173\u5373\u53ef\u5f00\u542f\u529f\u80fd\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff1a</p> <p></p>"},{"location":"cdn/config/#56-tls","title":"5.6 \u6700\u4f4e TLS \u7248\u672c","text":"<p>\u529f\u80fd\u8bf4\u660e</p> <p>\u6700\u4f4e TLS \u7248\u672c\u4e5f\u5373\u5f53\u8bbf\u95ee\u8005\u901a\u8fc7 TLS \u8bbf\u95ee\u57df\u540d\u65f6\uff0c\u88ab\u5141\u8bb8\u8bbf\u95ee\u7684\u6700\u4f4e TLS \u7248\u672c\u3002\u5f53\u524d\u9ed8\u8ba4\u914d\u7f6e\u4e3a TLSv1.0\uff0c\u57fa\u4e8e PCI DSS \u5b89\u5168\u6807\u51c6\uff0c\u53ef\u4ee5\u9009\u62e9\u6700\u4f4e TLS \u7248\u672c\u4e3a TLSv1.1\u3002</p> <p>\u5e94\u7528\u573a\u666f</p> <p>PCI DSS \u6700\u65b0\u5408\u89c4\u6807\u51c6\u5df2\u4e8e 2018 \u5e74 6 \u6708 30 \u65e5\u751f\u6548\uff0c\u8be5\u6807\u51c6\u8981\u6c42\u7981\u7528\u4f4e\u7248\u672c TLS \u534f\u8bae\uff08\u4f8b\u5982\uff1aTLSv1.0\uff09\uff0cHTTPS \u914d\u7f6e\u5e94\u5b9e\u65bd\u66f4\u5b89\u5168\u7684\u52a0\u5bc6\u534f\u8bae\uff08TLSv1.1 \u6216\u66f4\u9ad8\u7248\u672c\uff0c\u5f3a\u70c8\u5efa\u8bae\u4f7f\u7528 TLS v1.2 \uff09\uff0c\u4ee5\u6ee1\u8db3 PCI DSS \u6700\u65b0\u5408\u89c4\u6807\u51c6\u7684\u8981\u6c42\uff0c\u4ece\u800c\u4fdd\u62a4\u652f\u4ed8\u6570\u636e\u3002</p> <p>\u914d\u7f6e\u5f15\u5bfc</p> <p>\u767b\u9646 CDN \u63a7\u5236\u53f0\uff0c\u8fdb\u5165 \u300cHTTPS\u300d\u914d\u7f6e\u9875\u9762\uff0c\u627e\u5230\u300c\u6700\u4f4e TLS \u7248\u672c\u300d\u914d\u7f6e\u9879\uff0c\u70b9\u51fb\u3010\u7ba1\u7406\u3011\u6309\u94ae\u5373\u53ef\u8fdb\u5165\u914d\u7f6e\u754c\u9762\u3002</p> <p></p> <p>\u6a21\u5f0f\u4e00\uff1aTLSv1.0</p> <p>\u914d\u7f6e\u754c\u9762\u5982\u4e0b\u56fe\u6240\u793a\uff1a</p> <p></p> <p>\u9009\u62e9\u8be5\u6a21\u5f0f\u65f6, TLS \u8bbf\u95ee\u53ef\u4ee5\u652f\u6301 TLSv1.0\u3001TLSv1.1\u3001TLSv1.2\u3001TLSv1.3\uff08\u5982\u679c\u8be5\u529f\u80fd\u5df2\u5f00\u542f\uff09\uff0c\u8be5\u9009\u9879\u4e3a\u9ed8\u8ba4\u914d\u7f6e\u9879\u3002</p> <p>\u6a21\u5f0f\u4e8c\uff1aTLSv1.1</p> <p>\u914d\u7f6e\u754c\u9762\u5982\u4e0b\u56fe\u6240\u793a\uff1a</p> <p></p> <p>\u9009\u62e9\u8be5\u6a21\u5f0f\u65f6, \u5219\u4f7f\u7528 TLSv1.0 \u8fde\u63a5\u7684\u8bbf\u95ee\u8005\u5c06\u88ab\u62d2\u7edd\uff0c\u4ec5\u652f\u6301\u4f7f\u7528 TLSv1.1\u3001TLSv1.2\u3001TLSv1.3\uff08\u5982\u679c\u8be5\u529f\u80fd\u5df2\u5f00\u542f) \u8fde\u63a5\uff0c\u8bf7\u8c28\u614e\u5f00\u542f\uff01</p> <p>\u6a21\u5f0f\u4e09\uff1aTLSv1.2</p> <p>\u914d\u7f6e\u754c\u9762\u5982\u4e0b\u56fe\u6240\u793a\uff1a</p> <p></p> <p>\u9009\u62e9\u8be5\u6a21\u5f0f\u65f6, \u5219\u4f7f\u7528 TLSv1.0\u3001TLSv1.1 \u8fde\u63a5\u7684\u8bbf\u95ee\u8005\u5c06\u88ab\u62d2\u7edd\uff0c\u4ec5\u652f\u6301\u4f7f\u7528 TLSv1.2\u3001TLSv1.3\uff08\u5982\u679c\u8be5\u529f\u80fd\u5df2\u5f00\u542f) \u8fde\u63a5\uff0c\u8bf7\u8c28\u614e\u5f00\u542f\uff01</p> <p>\u6a21\u5f0f\u56db\uff1aTLSv1.3</p> <p>\u914d\u7f6e\u754c\u9762\u5982\u4e0b\u56fe\u6240\u793a\uff1a</p> <p></p> <p>\u9009\u62e9\u8be5\u6a21\u5f0f\u65f6, \u5219\u4f7f\u7528 TLSv1.0\u3001TLSv1.1\u3001TLSv1.2 \u8fde\u63a5\u7684\u8bbf\u95ee\u8005\u5c06\u88ab\u62d2\u7edd\uff0c\u4ec5\u652f\u6301\u4f7f\u7528 TLSv1.3\uff08\u5982\u679c\u8be5\u529f\u80fd\u5df2\u5f00\u542f) \u8fde\u63a5\uff0c\u8bf7\u8c28\u614e\u5f00\u542f\uff01</p> <p>\u6ce8\u610f\u4e8b\u9879</p> <ul> <li>\u9ed8\u8ba4\u7684\u6700\u4f4e TLS \u7248\u672c\u4e3a TLSv1.0\uff0c\u5982\u9009\u62e9\u66f4\u9ad8\u7248\u672c\u7684 TLS \u534f\u8bae\uff0c\u9700\u8981\u8bc4\u4f30\u517c\u5bb9\u6027\u95ee\u9898\uff08\u4e5f\u5373\u67d0\u4e9b\u8001\u7684\u6d4f\u89c8\u5668\u4e0d\u652f\u6301\u8f83\u65b0\u7684 TLS \u7248\u672c\uff09\u3002</li> <li>\u4e3a\u4e86\u6ee1\u8db3\u67d0\u4e9b\u6d4b\u8bd5\u8981\u6c42\uff0c\u5982\u9700\u8bbe\u7f6e\u6700\u4f4e TLS  \u7248\u672c\u4e3a TLSv1.3\uff0c\u9700\u8981\u63d0\u524d\u5f00\u542f TLS 1.3 \u529f\u80fd\u3002</li> </ul>"},{"location":"cdn/config/#6","title":"6.\u8bbf\u95ee\u63a7\u5236","text":"<p>\u8bbf\u95ee\u63a7\u5236\u5c31\u662f\u9632\u76d7\u94fe\uff0c\u76f8\u5173\u8d44\u6599\u6574\u7406\uff1a</p> <ul> <li>CDN \u5e38\u89c1\u9632\u76d7\u94fe\u6280\u672f\u65b9\u6848</li> </ul> <p>\u7b80\u5355\u7406\u89e3\u5982\u4e0b\uff1a</p> <ul> <li>token \u9632\u76d7\u94fe/\u65f6\u95f4\u6233\u9632\u76d7\u94fe/URL \u9274\u6743\uff1a \u5728 URL \u7684 query \u90e8\u5206\u628a timestamp \u7528\u54c8\u5e0c\u7b97\u6cd5\uff08\u5982 MD5\uff09\u751f\u6210 1 \u4e2a token\uff0c\u5c31\u5982\u540c\u76ee\u524d\u7684\u5206\u4eab\u94fe\u63a5\u4e00\u6837\uff0cCDN \u670d\u52a1\u5668\u8fdb\u884c\u6821\u9a8c\uff0c\u5982\u679c token \u8fc7\u671f\uff0c\u5219\u8fd4\u56de 403\u3002</li> <li>\u56de\u6e90\u9274\u6743/\u8fdc\u7a0b\u9274\u6743\uff1a\u548c token \u9632\u76d7\u94fe\u7c7b\u4f3c\uff0c\u53ea\u4e0d\u8fc7\u662f\u6bcf\u6b21\u7531\u6e90\u7ad9\u81ea\u5df1\u8fdb\u884c\u9274\u6743\u3002</li> <li>Refer \u9274\u6743\uff1a\u68c0\u67e5 Request \u7684 header \u4e2d refer \u76f8\u5173\u7684\u5934\u3002</li> <li>IP \u9ed1\u767d\u540d\u5355\uff1a\u597d\u7406\u89e3\u3002</li> </ul> <p>CDN \u76f8\u5173\u5b9e\u73b0\uff1a</p> <ul> <li>Nginx \u6a21\u5757\uff1a\u57fa\u4e8eNginx\u7684\u5e94\u7528\u9274\u6743\u67b6\u6784 http://fly-luck.github.io/2019/02/04/Nginx%20Auth/</li> <li>\u5173\u952e\u70b9\uff1a\u5982\u4f55\u5b58\u50a8\uff0c\u662f\u4e0d\u662f\u8981\u5e26\u53c2\u7f13\u5b58</li> </ul>"},{"location":"cdn/config/#61-ip","title":"6.1 IP \u9ed1\u767d\u540d\u5355","text":"<p>\u529f\u80fd\u8bf4\u660e</p> <p>\u82e5\u9700\u8981\u7981\u6b62\u67d0\u4e9b IP \u6216\u53ea\u5141\u8bb8\u67d0\u4e9b IP \u8bbf\u95ee\uff0c\u5219\u53ef\u4ee5\u4f7f\u7528 IP \u9ed1\u767d\u540d\u5355\u529f\u80fd\uff1b</p> <p>\u914d\u7f6e\u5f15\u5bfc</p> <p>\u767b\u9646 CDN \u63a7\u5236\u53f0\uff0c\u4f9d\u6b21\u8fdb\u5165\uff1a\u670d\u52a1\u7ba1\u7406 &gt; \u529f\u80fd\u914d\u7f6e &gt; \u8bbf\u95ee\u63a7\u5236 &gt; IP \u9ed1\u767d\u540d\u5355\uff0c\u70b9\u51fb\u300c\u7ba1\u7406\u300d\u6309\u94ae\u5373\u53ef\u5f00\u59cb\u914d\u7f6e\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff1a</p> <p></p> <p>1.\u914d\u7f6e IP \u9ed1\u540d\u5355</p> <p>\u70b9\u51fb\u3010\u5f00\u542f IP \u9ed1\u540d\u5355\u3011\u6309\u94ae\uff0c\u586b\u5199\u5f85\u52a0\u5165\u9ed1\u540d\u5355\u7684\u5355\u4e2a IP \u6216\u8005 IP \u6bb5\uff0c\u4f8b\u5982\uff1a</p> <pre><code>192.168.1.1\n192.168.2.*\n192.168.3.*\n</code></pre> <p>\u5982\u4e0b\u622a\u56fe\u6240\u793a\uff1a</p> <p></p> <p>\u914d\u7f6e\u5b8c\u6bd5\uff0c\u70b9\u51fb\u53f3\u4e0b\u89d2\u7684\u3010\u786e\u5b9a\u3011\u6309\u94ae\uff0c\u5373\u53ef\u4fdd\u5b58\u751f\u6548\u3002</p> <p>1.\u914d\u7f6e IP \u767d\u540d\u5355</p> <p>\u70b9\u51fb\u3010\u5f00\u542f IP \u767d\u540d\u5355\u3011\u6309\u94ae\uff0c\u586b\u5199\u5f85\u52a0\u5165\u767d\u540d\u5355\u7684\u5355\u4e2a IP \u6216\u8005 IP \u6bb5\uff0c\u4f8b\u5982\uff1a</p> <pre><code>193.168.5.1\n193.168.6.*\n193.168.7.*\n</code></pre> <p>\u5982\u4e0b\u622a\u56fe\u6240\u793a\uff1a</p> <p></p> <p>\u914d\u7f6e\u5b8c\u6bd5\uff0c\u70b9\u51fb\u53f3\u4e0b\u89d2\u7684\u3010\u786e\u5b9a\u3011\u6309\u94ae\uff0c\u5373\u53ef\u4fdd\u5b58\u751f\u6548\u3002</p> <p>\u6ce8\u610f\u4e8b\u9879</p> <p>1.\u652f\u6301 <code>*</code> \u901a\u914d\u7b26\uff0c\u5982 <code>10.11.12.*</code> \uff0c\u5c06\u7981\u6b62\u6216\u5141\u8bb8 <code>10.11.12.0 ~ 10.11.12.255</code> \u7684 IP \u8bbf\u95ee\uff1b</p> <p>2.IP \u9ed1\u767d\u540d\u5355\u4e0a\u9650 100 \u6761\uff0c\u88ab\u7981\u6b62\u7684 IP \u8bbf\u95ee\u8d44\u6e90\u65f6\uff0c\u5c06\u63d0\u793a 403\uff1b</p> <p>3.IP \u9ed1\u540d\u5355\u548c IP \u767d\u540d\u5355\u4e0d\u80fd\u591f\u540c\u65f6\u914d\u7f6e\uff0c\u7279\u522b\u5730\uff0c\u914d\u7f6e\u5b8c\u767d\u540d\u5355\u4e4b\u540e\uff0c\u5176\u4ed6\u90fd\u4e3a IP \u9ed1\u540d\u5355\uff0c\u8bf7\u8c28\u614e\u64cd\u4f5c\u3002</p>"},{"location":"cdn/config/#62","title":"6.2 \u5730\u533a\u8bbf\u95ee\u9650\u5236","text":"<p>\u529f\u80fd\u8bf4\u660e</p> <p>\u5730\u533a\u8bbf\u95ee\u9650\u5236\u662f\u6307\u6839\u636e\u52a0\u901f\u7f51\u7ad9\u7684\u9700\u6c42\uff0c\u5141\u8bb8\u6216\u7981\u6b62\u7279\u5b9a\u533a\u57df\u7684\u7ec8\u7aef\u7528\u6237\u5bf9\u7f51\u7ad9\u8d44\u6e90\u7684\u8bbf\u95ee\u3002\u5373\u7f51\u7ad9\u6307\u5b9a\u5730\u533a\uff0c\u5141\u8bb8\u8be5\u5730\u533a\u7ec8\u7aef\u7528\u6237\u8bbf\u95ee\uff0c\u800c\u9650\u5236\u5176\u4ed6\u5730\u533a\u7528\u6237\u8bbf\u95ee\uff0c\u6216\u8005\u76f8\u53cd\u3002</p> <p>\u914d\u7f6e\u5f15\u5bfc</p> <p>\u767b\u9646 CDN \u63a7\u5236\u53f0\uff0c\u4f9d\u6b21\u8fdb\u5165\uff1a\u670d\u52a1\u7ba1\u7406 &gt; \u529f\u80fd\u914d\u7f6e &gt; \u8bbf\u95ee\u63a7\u5236 &gt; \u5730\u533a\u8bbf\u95ee\u9650\u5236\uff0c\u70b9\u51fb\u300c\u7ba1\u7406\u300d\u6309\u94ae\u5373\u53ef\u5f00\u59cb\u914d\u7f6e\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff1a</p> <p></p> <p>1.\u914d\u7f6e\u5730\u533a\u9ed1\u540d\u5355</p> <p>\u70b9\u51fb\u3010\u542f\u7528\u9ed1\u540d\u5355\u3011\u6309\u94ae\uff0c\u586b\u5199\u5f85\u52a0\u5165\u9ed1\u540d\u5355\u7684\u56fd\u5bb6\u3001\u5730\u533a\u3001\u8fd0\u8425\u5546\u4fe1\u606f\uff0c\u4f8b\u5982\uff1a</p> <pre><code>1   \u97e9\u56fd  \n2   \u6cf0\u56fd\n3   \u6fb3\u5927\u5229\u4e9a\n</code></pre> <p>\u5982\u4e0b\u622a\u56fe\u6240\u793a\uff1a</p> <p></p> <p>\u914d\u7f6e\u5b8c\u6bd5\uff0c\u70b9\u51fb\u53f3\u4e0b\u89d2\u7684\u3010\u786e\u5b9a\u3011\u6309\u94ae\uff0c\u5373\u53ef\u4fdd\u5b58\u751f\u6548\u3002</p> <p>2.\u914d\u7f6e\u5730\u533a\u767d\u540d\u5355</p> <p>\u70b9\u51fb\u3010\u542f\u7528\u767d\u540d\u5355\u3011\u6309\u94ae\uff0c\u586b\u5199\u5f85\u52a0\u5165\u767d\u540d\u5355\u7684\u56fd\u5bb6\u3001\u5730\u533a\u3001\u8fd0\u8425\u5546\u4fe1\u606f\uff0c\u4f8b\u5982\uff1a</p> <pre><code>1   \u4e2d\u56fd \u8fbd\u5b81 \u7535\u4fe1\n2   \u4e2d\u56fd \u9999\u6e2f\n3   \u4e2d\u56fd \u5317\u4eac\n4   \u4e2d\u56fd \u5e7f\u4e1c \u7535\u4fe1\n</code></pre> <p>\u5982\u4e0b\u622a\u56fe\u6240\u793a\uff1a</p> <p></p> <p>\u914d\u7f6e\u5b8c\u6bd5\uff0c\u70b9\u51fb\u53f3\u4e0b\u89d2\u7684\u3010\u786e\u5b9a\u3011\u6309\u94ae\uff0c\u5373\u53ef\u4fdd\u5b58\u751f\u6548\u3002\u66f4\u591a\u8be6\u7ec6\u914d\u7f6e\u8bf7\u53c2\u89c1 \u5730\u533a\u8bbf\u95ee\u9650\u5236\u7528\u6237\u6307\u5357\u3002</p> <p>\u6ce8\u610f\u4e8b\u9879</p> <ul> <li> <p>\u5730\u533a\u8bbf\u95ee\u9650\u5236\u914d\u7f6e\u7c92\u5ea6\uff0c\u4e2d\u56fd\u5730\u533a\u652f\u6301\u7701\u4efd\u3001\u8fd0\u8425\u5546\uff08\u5305\u62ec\uff1a\u7535\u4fe1\u3001\u94c1\u901a\u3001\u79fb\u52a8\u3001\u8054\u901a\u3001\u9e4f\u535a\u58eb\u3001\u6559\u80b2\u7f51\u3001\u79d1\u6280\u7f51\uff09\uff0c\u6d77\u5916\u5730\u533a\u652f\u6301\u5230\u8fd0\u8425\u5546\uff1b</p> </li> <li> <p>\u5730\u533a\u767d\u540d\u5355\u548c\u9ed1\u540d\u5355\u4e0d\u80fd\u540c\u65f6\u914d\u7f6e\uff0c\u7279\u522b\u5730\uff0c\u914d\u7f6e\u5b8c\u767d\u540d\u5355\u540e\uff0c\u5176\u4ed6\u5730\u533a\u90fd\u4e3a\u9ed1\u540d\u5355\uff0c\u8bf7\u8c28\u614e\u64cd\u4f5c\u3002</p> </li> </ul>"},{"location":"cdn/config/#63-referer","title":"6.3 Referer \u9632\u76d7\u94fe","text":"<p>\u529f\u80fd\u8bf4\u660e</p> <p>\u57fa\u4e8e HTTP \u534f\u8bae\u7684 referer \u673a\u5236\uff0c\u901a\u8fc7 referer \u8ddf\u8e2a\u6765\u6e90\uff0c\u5bf9\u6765\u6e90\u8fdb\u884c\u8bc6\u522b\u548c\u5224\u65ad\uff0c\u5b9e\u73b0\u539f\u7406\u5c31\u662f\u901a\u8fc7 HTTP \u8bf7\u6c42 Header \u4e2d\u7684 referer \u5b57\u6bb5\u7684\u503c\u6765\u8bbe\u7f6e\u8fc7\u6ee4\u7b56\u7565\uff0c\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u9632\u76d7\u94fe\u672a\u542f\u7528\uff0c\u65e0\u9ed1/\u767d\u540d\u5355\u3002\u9664\u6b64\u4e4b\u5916\uff0c\u652f\u6301\u5141\u8bb8 referer \u4e3a\u7a7a\u548c\u7981\u6b62 referer \u4e3a\u7a7a\u7684\u8bbe\u7f6e\uff0c\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u5141\u8bb8 referer \u4e3a\u7a7a\u3002</p> <p>\u767d\u540d\u5355\uff1a\u4ec5\u5141\u8bb8\u540d\u5355\u4e2d\u7684\u57df\u540d\u7f51\u7ad9\u8bbf\u95ee\u6587\u4ef6\uff0c\u5176\u4ed6\u57df\u540d\u7f51\u7ad9\u90fd\u4e0d\u5141\u8bb8\u8bbf\u95ee\u3002</p> <p>\u9ed1\u540d\u5355\uff1a\u4ec5\u7981\u6b62\u540d\u5355\u4e2d\u7684\u57df\u540d\u7f51\u7ad9\u8bbf\u95ee\u6587\u4ef6\uff0c\u5176\u4ed6\u57df\u540d\u7f51\u7ad9\u90fd\u5141\u8bb8\u8bbf\u95ee\u3002</p> <p>\u7279\u522b\u5730\uff0c\u9ed8\u8ba4\u3010\u5141\u8bb8 Referer \u4e3a\u7a7a\u3011 \u8fd9\u79cd\u60c5\u51b5\u4f1a\u7ed5\u8fc7\u9632\u76d7\u94fe\u7684\u903b\u8f91\uff1b\u82e5\u542f\u7528\u3010\u7981\u6b62 Referer \u4e3a\u7a7a\u3011\uff0c\u90a3\u4e48\u8fd9\u7c7b\u8bf7\u6c42\u5c31\u76f4\u63a5\u88ab\u7981\u6b62\u8bbf\u95ee\u3002</p> <p>\u914d\u7f6e\u5f15\u5bfc</p> <p>\u767b\u9646  CDN \u63a7\u5236\u53f0\uff0c\u4f9d\u6b21\u8fdb\u5165\uff1a\u670d\u52a1\u7ba1\u7406 &gt; \u529f\u80fd\u914d\u7f6e &gt; \u8bbf\u95ee\u63a7\u5236 &gt; Referer \u9632\u76d7\u94fe\uff0c\u70b9\u51fb\u300c\u7ba1\u7406\u300d\u6309\u94ae\u5373\u53ef\u5f00\u59cb\u914d\u7f6e\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff1a</p> <p></p> <p>1.\u914d\u7f6e referer \u9ed1\u540d\u5355</p> <p>\u70b9\u51fb\u3010\u542f\u7528\u9ed1\u540d\u5355\u3011\u6309\u94ae\uff0c\u586b\u5199\u5f85\u52a0\u5165\u9ed1\u540d\u5355\u57df\u540d\u6216\u8005\u57df\u540d\u6bb5\uff0c\u4f8b\u5982\uff1a</p> <pre><code>www.upyun.com\nimage.upyun.com\n*.upyun.com\n</code></pre> <p>\u5982\u4e0b\u622a\u56fe\u6240\u793a\uff1a</p> <p></p> <p>\u914d\u7f6e\u5b8c\u6bd5\uff0c\u70b9\u51fb\u53f3\u4e0b\u89d2\u7684\u3010\u786e\u5b9a\u3011\u6309\u94ae\uff0c\u5373\u53ef\u4fdd\u5b58\u751f\u6548\u3002</p> <p>2.\u914d\u7f6e referer \u767d\u540d\u5355</p> <p>\u70b9\u51fb\u3010\u542f\u7528\u767d\u540d\u5355\u3011\u6309\u94ae\uff0c\u586b\u5199\u5f85\u52a0\u5165\u767d\u540d\u5355\u57df\u540d\u6216\u8005\u57df\u540d\u6bb5\uff0c\u4f8b\u5982\uff1a</p> <pre><code>www.baidu.com\nwww.taobao.com\nwww.163.com\n</code></pre> <p>\u5982\u4e0b\u622a\u56fe\u6240\u793a\uff1a</p> <p></p> <p>\u914d\u7f6e\u5b8c\u6bd5\uff0c\u70b9\u51fb\u53f3\u4e0b\u89d2\u7684\u3010\u786e\u5b9a\u3011\u6309\u94ae\uff0c\u5373\u53ef\u4fdd\u5b58\u751f\u6548\u3002</p> <p>\u6ce8\u610f\u4e8b\u9879</p> <ul> <li> <p>\u767d\u540d\u5355\uff1a\u4ec5\u5141\u8bb8\u540d\u5355\u4e2d\u7684\u57df\u540d\u7f51\u7ad9\u8bbf\u95ee\u6587\u4ef6\uff0c\u5176\u4ed6\u57df\u540d\u7f51\u7ad9\u90fd\u4e0d\u5141\u8bb8\u8bbf\u95ee;</p> </li> <li> <p>\u9ed1\u540d\u5355\uff1a\u4ec5\u7981\u6b62\u540d\u5355\u4e2d\u7684\u57df\u540d\u7f51\u7ad9\u8bbf\u95ee\u6587\u4ef6\uff0c\u5176\u4ed6\u57df\u540d\u7f51\u7ad9\u90fd\u5141\u8bb8\u8bbf\u95ee;</p> </li> <li> <p>\u652f\u6301 <code>*</code> \u901a\u914d\u7b26\uff0c\u6bd4\u5982\u767d\u540d\u5355\u7684 <code>*upyun.com</code> \u5c06\u5141\u8bb8 <code>www.upyun.com</code>\u3001<code>abcupyun.com</code> \u7b49\u7f51\u7ad9\u8bbf\u95ee;</p> </li> <li> <p>\u7279\u522b\u5730\uff0c\u9ed8\u8ba4 <code>\u5141\u8bb8 Referer \u4e3a\u7a7a</code> \u8fd9\u79cd\u60c5\u51b5\u4f1a\u7ed5\u8fc7\u9632\u76d7\u94fe\u7684\u903b\u8f91\uff0c\u82e5\u8fd9\u91cc\u542f\u7528 <code>\u7981\u6b62 Referer    \u4e3a\u7a7a</code>\uff0c\u90a3\u4e48\u8fd9\u7c7b\u8bf7\u6c42\u5c31\u76f4\u63a5\u88ab\u7981\u6b62\u8bbf\u95ee\u4e86\u3002</p> </li> </ul>"},{"location":"cdn/config/#64-user-agent","title":"6.4 User-Agent \u9632\u76d7\u94fe","text":"<p>\u529f\u80fd\u8bf4\u660e</p> <p>CDN \u652f\u6301\u9488\u5bf9 HTTP \u8bf7\u6c42\u5934\u4e2d\u7684 User-Agent \u4fe1\u606f\uff0c\u7981\u6b62\u6216\u8005\u5141\u8bb8\u7b26\u5408\u7279\u5b9a User-Agent \u89c4\u5219\u7684\u8bf7\u6c42\u3002\u5177\u4f53\u4f7f\u7528\u7684\u573a\u666f\uff0c\u4e3e\u4e2a\u4f8b\u5b50\uff1a</p> <p>1\uff09\u67d0\u4e2a\u8d44\u6e90\u6216\u8005\u9875\u9762\u4e0d\u5e0c\u671b\u88ab IE \u6216\u8005 Chrome \u6d4f\u89c8\u5668\u8bbf\u95ee\uff0c\u6b64\u65f6\u60a8\u53ef\u4ee5\u914d\u7f6e User-Agent \u9ed1\u540d\u5355\u5c31\u53ef\u4ee5\u5b9e\u73b0\uff1b</p> <p>2\uff09\u67d0\u5ba2\u6237\u7aef\u62e5\u6709\u81ea\u5df1\u4e13\u5c5e\u7684\u5ba2\u6237\u7aef\u5bf9\u8d44\u6e90\u8fdb\u884c\u4e0b\u8f7d\uff0c\u8be5\u4e0b\u8f7d\u5de5\u5177\u5728\u8bf7\u6c42\u65f6\uff0c\u4f7f\u7528\u4e86\u5b9a\u5236\u7684 User-Agent \u540d\u79f0\uff0c\u6216\u53ea\u5141\u8bb8\u6b64\u7c7b User-Agent \u8bf7\u6c42\u8d44\u6e90\uff0c\u6b64\u65f6\u53ef\u4ee5\u914d\u7f6e User-Agent \u767d\u540d\u5355\u5c31\u53ef\u4ee5\u5b9e\u73b0\u3002</p> <p>\u914d\u7f6e\u5f15\u5bfc</p> <p>\u767b\u9646 CDN \u63a7\u5236\u53f0\uff0c\u4f9d\u6b21\u8fdb\u5165\uff1a\u670d\u52a1\u7ba1\u7406 &gt; \u529f\u80fd\u914d\u7f6e &gt; \u8bbf\u95ee\u63a7\u5236 &gt; User-Agent \u9632\u76d7\u94fe\uff0c\u70b9\u51fb\u300c\u7ba1\u7406\u300d\u6309\u94ae\u5373\u53ef\u5f00\u59cb\u914d\u7f6e\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff1a</p> <p></p> <p>1.User-Agent \u767d\u540d\u5355\u914d\u7f6e</p> <p>\u9009\u62e9\u3010\u5f00\u542f\u767d\u540d\u5355\u3011\u6309\u94ae\uff0c\u586b\u5199\u5f85\u914d\u7f6e\u7684\u767d\u540d\u5355\u5217\u8868\uff0c\u5982\u4e0b\u6240\u793a\uff1a</p> <pre><code>Mozilla/4.0 (Windows; MSIE 6.0; Windows NT 5.2)\nMozilla/4.0 (compatible; MSIE 7.0; Windows NT 6.0)\nMozilla/4.0 (compatible; MSIE 8.0; Windows NT 6.0; Trident/4.0)\nMozilla/5.0 (compatible; MSIE 9.0; Windows NT 6.1; Trident/5.0)\nMozilla/5.0 (compatible; WOW64; MSIE 10.0; Windows NT 6.2)\n</code></pre> <p>\u914d\u7f6e\u622a\u56fe\u5982\u4e0b\uff1a</p> <p></p> <p>\u914d\u7f6e\u5b8c\u6bd5\uff0c\u70b9\u51fb\u53f3\u4e0b\u89d2\u7684\u3010\u786e\u5b9a\u3011\u6309\u94ae\u5373\u53ef\u3002</p> <p>2.User-Agent \u9ed1\u540d\u5355\u914d\u7f6e</p> <p>\u9009\u62e9\u3010\u5f00\u542f\u9ed1\u540d\u5355\u3011\u6309\u94ae\uff0c\u586b\u5199\u5f85\u914d\u7f6e\u7684\u9ed1\u540d\u5355\u5217\u8868\uff0c\u5982\u4e0b\u6240\u793a\uff1a</p> <pre><code>Mozilla/5.0 (Android; Mobile; rv:14.0) Gecko/14.0 Firefox/14.0\nMozilla/5.0 (Android; Tablet; rv:14.0) Gecko/14.0 Firefox/14.0\nMozilla/5.0 (Windows NT 6.2; WOW64; rv:21.0) Gecko/20100101 Firefox/21.0\nMozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:21.0) Gecko/20130331 Firefox/21.0\n</code></pre> <p>\u914d\u7f6e\u622a\u56fe\u5982\u4e0b\uff1a</p> <p></p> <p>\u914d\u7f6e\u5b8c\u6bd5\uff0c\u70b9\u51fb\u53f3\u4e0b\u89d2\u7684\u3010\u786e\u5b9a\u3011\u6309\u94ae\u5373\u53ef\u3002</p> <p>\u6ce8\u610f\u4e8b\u9879</p> <ul> <li> <p>\u6dfb\u52a0 User-Agent \u9ed1\u767d\u540d\u5355\u89c4\u5219\u6570\u91cf\u4e0a\u9650\u5404\u4e3a 50 \u6761\uff0c\u8bf7\u5408\u7406\u5206\u914d\uff1b</p> </li> <li> <p><code>User-Agent</code> \u4e0d\u533a\u5206\u5927\u5c0f\u5199\uff0c\u4e14\u652f\u6301 <code>*</code> \u901a\u914d\u7b26\uff1b</p> </li> <li> <p><code>User-Agent</code> \u9632\u76d7\u94fe\u7684\u4f18\u5148\u7ea7\u9ad8\u4e8e Referer \u9632\u76d7\u94fe;</p> </li> <li> <p>User-Agent \u5f88\u5bb9\u6613\u4f2a\u9020\uff0c\u56e0\u6b64 User-Agent \u9632\u76d7\u94fe\u5b89\u5168\u6027\u8f83\u4f4e\uff0c\u5efa\u8bae\u7ed3\u5408\u5176\u4ed6\u9632\u76d7\u94fe\u529f\u80fd\u914d\u5408\u4f7f\u7528\u3002</p> </li> </ul>"},{"location":"cdn/config/#65-token","title":"6.5 Token \u9632\u76d7\u94fe","text":"<p>\u529f\u80fd\u8bf4\u660e</p> <p>Token \u9632\u76d7\u94fe\u662f\u901a\u8fc7\u5bf9\u65f6\u95f4\u6709\u5173\u7684\u5b57\u7b26\u4e32\u8fdb\u884c\u7b7e\u540d\uff0c\u5c06\u65f6\u95f4\u3001\u7b7e\u540d\u4fe1\u606f\u901a\u8fc7\u4e00\u5b9a\u7684\u65b9\u5f0f\u4f20\u9012\u7ed9 CDN \u8282\u70b9\u670d\u52a1\u5668\u4f5c\u4e3a\u5224\u5b9a\u4f9d\u636e\uff0cCDN \u8fb9\u7f18\u8282\u70b9\u4f9d\u636e\u7ea6\u5b9a\u7684\u7b97\u6cd5\u5224\u65ad\u6765\u8bbf\u7684 URL \u662f\u5426\u6709\u8bbf\u95ee\u6743\u9650\u3002\u5982\u679c\u901a\u8fc7\uff0c\u6267\u884c\u4e0b\u4e00\u6b65\uff1b\u5982\u679c\u4e0d\u901a\u8fc7\uff0c\u54cd\u5e94 HTTP 403 \u72b6\u6001\u7801\u6216\u8005\u901a\u8fc7 302 \u8df3\u8f6c\u5230\u5176\u4ed6 URL\u3002</p> <p>\u5b9e\u73b0\u539f\u7406</p> <p>Token \u9632\u76d7\u94fe\u7684\u5b9e\u73b0\u539f\u7406\u53ef\u53c2\u89c1\u5982\u4e0b\u56fe\u6240\u793a\uff1a</p> <p></p> <ol> <li>CDN \u5ba2\u6237\u5728\u201c\u6e90\u7ad9\u5e94\u7528\u670d\u52a1\u5668\u201d\u548c\u201cCDN \u5382\u5546\u63a7\u5236\u53f0\u4e0a\u201d\u914d\u7f6e\u9274\u6743URL\u7684\u751f\u6210\u89c4\u5219\uff08\u5305\u62ec\u9274\u6743\u7b97\u6cd5\u548c\u5bc6\u94a5\uff09\u3002    \u5047\u8bbe\u9274\u6743 URL \u4e3a\uff1ahttp://DomainName/timestamp/md5hash/FileName\u3002</li> <li>\u5ba2\u6237\u7aef\u8bbf\u95ee\u6e90\u7ad9\u5e94\u7528\u7684\u9875\u9762\u65f6\uff0c\u6e90\u7ad9\u5e94\u7528\u670d\u52a1\u5668\u5c06\u4f1a\u6309\u7167\u9274\u6743URL\u7684\u751f\u6210\u89c4\u5219\u751f\u6210\u9274\u6743URL\uff0c\u5e76\u4e14\u628a\u9274\u6743URL\u5305\u542b\u5728\u5e94\u7528\u9875\u9762\u4e0a\u8fd4\u56de\u7ed9\u5ba2\u6237\u7aef\uff08\u56fe\u4e2d\u2461\u548c\u2462\uff09\u3002 </li> <li>\u5ba2\u6237\u7aef\u4f7f\u7528\u9274\u6743URL\u5411CDN\u8282\u70b9\u53d1\u8d77\u8d44\u6e90\u8bf7\u6c42\uff08\u56fe\u4e2d\u2463\uff09\u3002 </li> <li>CDN\u8282\u70b9\u5bf9\u9274\u6743URL\u4e2d\u7684\u9274\u6743\u4fe1\u606f\uff08\u5305\u62ec\u9274\u6743\u5b57\u7b26\u4e32\u3001\u65f6\u95f4\u6233\u7b49\uff09\u8fdb\u884c\u9a8c\u8bc1\uff0c\u5224\u65ad\u8bf7\u6c42\u7684\u5408\u6cd5\u6027\u3002</li> <li>\u9274\u6743\u5931\u8d25\uff0c\u62d2\u7edd\u8bbf\u95ee\u8bf7\u6c42\u3002</li> <li>\u9274\u6743\u901a\u8fc7\uff0c\u6b63\u5e38\u54cd\u5e94\u5408\u6cd5\u8bf7\u6c42\u3002</li> </ol> <p>1\u3001\u7b7e\u540d\u53c2\u6570</p> <pre><code>\netime: URL \u8fc7\u671f\u7684\u65f6\u95f4\uff0c\u5fc5\u987b\u662f UNIX TIME \u683c\u5f0f\uff0c\u5982\uff1a2017/3/9 9:19:0 -&gt; 1489022340\n\nsecret: \u548c CDN \u5e73\u53f0\u7ea6\u5b9a\u7684\u7b7e\u540d\u5bc6\u94a5\uff0c\u9700\u8981\u5728 CDN \u7ba1\u7406\u63a7\u5236\u53f0\u914d\u7f6e\n\nURI\uff1a\u8bf7\u6c42 URL \u7684\u8def\u5f84\u90e8\u5206\uff08\u4e0d\u5305\u542b ? \u53ca\u540e\u9762\u7684 Query String\uff09\uff0c\u5982\u5ba2\u6237\u7aef\u8bbf\u95ee\u7684\u5916\u94fe\u5730\u5740\u4e3a http://xxx.b0.upaiyun.com/path/to/a.jpg?version=1.0\uff0c\u90a3\u4e48 URI \u90e8\u5206\u5219\u4e3a\uff1a/path/to/a.jpg\n\n</code></pre> <p>2.\u7b97\u6cd5\u8bf4\u660e</p> <pre><code>sign = MD5( secret &amp; etime &amp; URI )\n_upt = sign { \u4e2d\u95f4 8 \u4f4d }\uff0betime\n_upt = MD5( secret &amp; etime &amp; URI ){ \u4e2d\u95f4 8 \u4f4d } + etime\n</code></pre> <p>\u4e3e\u4e2a\u4f8b\u5b50\uff1a\u5047\u8bbe\u5f53\u524d\u7684 UNIX TIME \u65f6\u95f4\u4e3a\uff1a1370000000\uff0c\u67d0\u56fe\u7247\u8d44\u6e90\uff08\u4f8b\u5982\uff1ahttp://test.example.com/dir/pic.jpg\uff0910 \u5206\u949f\u6709\u6548\uff0c\u5219\uff1a</p> <pre><code>etime = 1370000000 + 600 = 1370000600\n\nURI = '/dir/pic.jpg'\n\nsign = MD5( secret &amp; etime &amp; URI ) = xxxxxxxxxxxxabcdefghyyyyyyyyyyyy\n\n_upt = MD5( secret &amp; etime &amp; URI ){ \u4e2d\u95f4 8 \u4f4d } + etime \uff1d abcdefgh1370000600\n\n</code></pre> <p>\u6700\u540e\u7ecf\u8fc7\u5ba2\u6237\u7aef\u4e1a\u52a1\u670d\u52a1\u5668\u751f\u6210\u7684 URL \u4e3a\uff1a</p> <pre><code>http://test.example.com/dir/pic.jpg\uff1f_upt=abcdefgh137000060\n</code></pre> <p>\u5ba2\u6237\u4fa7 Demo</p> <p>\u5b9e\u73b0\u65b9\u5f0f</p> <p>1.\u5ba2\u6237\u7aef\u4e1a\u52a1\u670d\u52a1\u5668\u751f\u6210\u9a8c\u8bc1\u4fe1\u606f</p> <p>\u9a8c\u8bc1\u4fe1\u606f\u7684\u751f\u6210\u7531\u4e1a\u52a1\u670d\u52a1\u5668\u8d1f\u8d23\uff0c\u5177\u4f53\u7684\u52a0\u5bc6\u8fc7\u7a0b\u9700\u8981\u786e\u8ba4\u5982\u4e0b\u4e8b\u9879\uff1a</p> <ul> <li>\u786e\u8ba4\u8fc7\u671f\u65f6\u95f4\u7684\u683c\u5f0f\uff0c\u9ed8\u8ba4\u91c7\u7528 UNIX \u65f6\u95f4\u6233\u683c\u5f0f</li> <li>\u786e\u8ba4\u9a8c\u8bc1\u4fe1\u606f\u4e2d\u7684\u5bc6\u6587\uff0c\u7528\u6237\u8ba1\u7b97\u9a8c\u8bc1\u4fe1\u606f\uff0c\u9700\u8981\u548c CDN \u5e73\u53f0\u7ea6\u5b9a</li> <li>\u786e\u8ba4\u9a8c\u8bc1\u4fe1\u606f\u65f6\u52a0\u5165\u7684\u53c2\u6570\uff0c\u9ed8\u8ba4\u4e3a URL \u7684\u8def\u5f84\u90e8\u5206</li> <li>\u6839\u636e\u4e0a\u6587\u7684\u7b97\u6cd5\u8bf4\u660e\u8ba1\u7b97\u9a8c\u8bc1\u4fe1\u606f\uff0c\u5176\u4e2d\u8bf7\u6c42 URL \u4e2d\u7684\u9a8c\u8bc1\u53c2\u6570\u4e3a _upt</li> </ul> <p>2.\u53c8\u62cd\u4e91 CDN \u8282\u70b9\u9a8c\u8bc1\u8fc7\u7a0b</p> <ul> <li>\u6839\u636e\u7ea6\u5b9a\u89e3\u6790\u53d6\u51fa\u8fc7\u671f\u65f6\u95f4\uff0c\u548c\u5f53\u524d CDN \u8282\u70b9\u670d\u52a1\u5668\u65f6\u95f4\u8fdb\u884c\u6bd4\u8f83\uff0c\u786e\u8ba4\u8bf7\u6c42\u662f\u5426\u8fc7\u671f</li> <li>\u6839\u636e\u4e0a\u6587\u7ea6\u5b9a\u597d\u7684\u7b97\u6cd5\u8ba1\u7b97\u65b9\u5f0f\uff0c\u8ba1\u7b97\u51fa MD5 \u52a0\u5bc6\u4e32\u540e\uff0c\u548c URL \u4e2d\u7684\u52a0\u5bc6\u4e32\u8fdb\u884c\u6bd4\u8f83\uff0c\u9a8c\u8bc1\u52a0\u5bc6\u4e32\u662f\u5426\u4e00\u81f4</li> <li>\u5982\u679c\u4ee5\u4e0a\u4e24\u4e2a\u6b65\u9aa4\u90fd\u9a8c\u8bc1\u901a\u8fc7\uff0c\u8bf7\u6c42\u624d\u4f1a\u88ab\u8ba4\u4e3a\u662f\u5408\u6cd5\u7684\uff0c\u8fd9\u65f6 CDN \u4f1a\u8bf7\u6c42\u8d44\u6e90\u54cd\u5e94\u7ed9\u5ba2\u6237\u7aef\uff0c\u5426\u5219\u4f1a\u88ab\u8ba4\u4e3a\u662f\u975e\u6cd5\u8bf7\u6c42\uff0c\u76f4\u63a5\u54cd\u5e94 HTTP    status code 403</li> </ul> <p>\u914d\u7f6e\u5f15\u5bfc</p> <p>\u767b\u9646 CDN \u63a7\u5236\u53f0\uff0c\u4f9d\u6b21\u8fdb\u5165\uff1a\u670d\u52a1 \u7ba1\u7406 &gt; \u529f\u80fd\u914d\u7f6e &gt; \u8bbf\u95ee\u63a7\u5236 &gt; Token \u9632\u76d7\u94fe\uff0c\u70b9\u51fb\u300c\u7ba1\u7406\u300d\u6309\u94ae\u5373\u53ef\u5f00\u59cb\u914d\u7f6e\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff1a</p> <p></p> <p>\u5982\u4e0a\u622a\u56fe\u6240\u793a\uff0c\u6b64\u5904\u586b\u5199\u7684\u5bc6\u94a5\u4e5f\u5373\u4e0e CDN \u5e73\u53f0\u7ea6\u5b9a\u7684\u7b7e\u540d\u5bc6\u94a5\u3002</p> <p>\u6ce8\u610f\u4e8b\u9879</p> <ul> <li>\u5f53\u9632\u76d7\u94fe\u6d89\u53ca\u7684\u53c2\u6570\uff08\u6bd4\u5982\uff1a\u5bc6\u94a5\u3001\u8fc7\u671f\u65f6\u95f4\uff09\u53d1\u751f\u53d8\u66f4\u65f6\uff0c\u9700\u8981\u5728 CDN \u63a7\u5236\u540e\u53f0\u53ca\u65f6\u8c03\u6574\uff1b</li> <li>\u65f6\u95f4\u6233\u9632\u76d7\u94fe\u7684\u76f8\u5173\u53c2\u6570\u662f\u7ecf\u5e38\u53d1\u751f\u53d8\u66f4\u7684\uff0c\u7531\u4e8e\u690d\u5165\u5230\u4e86 URL \u4e2d\uff0c\u4f1a\u5f71\u54cd\u5230\u8282\u70b9\u7684\u7f13\u5b58\uff0c\u53ef\u80fd\u4f1a\u5bfc\u81f4\u4e00\u4efd\u76f8\u540c\u7684\u6587\u4ef6\uff0c\u4f1a\u56e0\u4e3a URL    \u91cc\u9762\u7684\u9632\u76d7\u94fe\u53c2\u6570\u7684\u4e0d\u540c\u800c\u7f13\u5b58\u591a\u4efd\uff0c\u4e00\u822c\u60c5\u51b5\u4e0b\uff0c\u5efa\u8bae\u53bb\u5ffd\u7565\u53c2\u6570\u8fdb\u884c\u7f13\u5b58\u3002</li> </ul>"},{"location":"cdn/config/#66","title":"6.6 \u56de\u6e90\u9274\u6743","text":"<p>\u529f\u80fd\u8bf4\u660e</p> <p>\u56de\u6e90\u9274\u6743\u662f\u4e00\u79cd\u9ad8\u7ea7\u7684\u9632\u76d7\u94fe\u65b9\u5f0f\uff0c\u9002\u7528\u4e8e\u5bf9\u9632\u76d7\u94fe\u6709\u5f88\u9ad8\u5b9e\u65f6\u6027\u8981\u6c42\u7684\u573a\u666f\u3002\u5927\u6982\u539f\u7406\u662f CDN \u8fb9\u7f18\u8282\u70b9\u6bcf\u6b21\u63a5\u53d7\u5230\u8bf7\u6c42\u4e4b\u540e\uff0c\u90fd\u9700\u8981\u56de\u5ba2\u6237\u6e90\u7ad9\u8fdb\u884c\u9a8c\u8bc1\uff0c\u9a8c\u8bc1\u901a\u8fc7\u4e4b\u540e\u624d\u8ba4\u4e3a\u662f\u5408\u6cd5\u8bf7\u6c42\uff0c\u8fd9\u6837 CDN \u53ef\u4ee5\u7ee7\u7eed\u63d0\u4f9b\u670d\u52a1\u3002</p> <p>\u914d\u7f6e\u5f15\u5bfc</p> <p>\u767b\u9646 CDN \u63a7\u5236\u53f0\uff0c\u4f9d\u6b21\u8fdb\u5165\uff1a\u670d\u52a1\u7ba1\u7406 &gt; \u529f\u80fd\u914d\u7f6e &gt; \u8bbf\u95ee\u63a7\u5236 &gt; \u56de\u6e90\u9274\u6743\uff0c\u70b9\u51fb\u300c\u7ba1\u7406\u300d\u6309\u94ae\u5373\u53ef\u5f00\u59cb\u914d\u7f6e\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff1a</p> <p></p> <p>\u70b9\u51fb\u53f3\u4e0a\u89d2\u7684\u3010\u6dfb\u52a0\u9274\u6743\u914d\u7f6e\u3011\uff0c\u5373\u53ef\u8fdb\u5165\u914d\u7f6e\u754c\u9762\uff0c\u5982\u4e0b\u56fe\u6240\u793a\uff1a</p> <p></p> <p>\u8d44\u6e90\u5730\u5740</p> <p>\u9700\u8981\u8fdb\u884c\u9274\u6743\u7684\u5339\u914d\u89c4\u5219\u96c6\uff0c\u652f\u6301\u57df\u540d\u7ea7\u522b\u914d\u7f6e\uff0c\u793a\u4f8b\u5982\u4e0b\uff1a</p> <pre><code>test123.upyun.com/video/*\n</code></pre> <p>\u670d\u52a1\u5668\u5730\u5740</p> <p>\u4e5f\u5373\u9274\u6743 URL \uff0c\u9274\u6743\u4e1a\u52a1\u670d\u52a1\u5668\u5730\u5740\uff0c\u683c\u5f0f\u4e3a\uff1a</p> <pre><code>scheme://host:port/path\n</code></pre> <p>\u793a\u4f8b\u5982\u4e0b\uff1a</p> <pre><code>http://validate.example.com/app/cdnValidate\n\n</code></pre> <p>\u8bf7\u6c42\u65b9\u6cd5</p> <p>\u5411\u9274\u6743\u670d\u52a1\u5668\u53d1\u8d77\u8bf7\u6c42\u7684\u65b9\u6cd5\u3002\u76ee\u524d\u4ec5\u652f\u6301 GET \u548c POST \uff0c\u622a\u56fe\u9009\u62e9 GET \u65b9\u6cd5\u3002</p> <p>\u9274\u6743\u53c2\u6570</p> <p>\u9274\u6743\u6240\u9700\u53c2\u6570\uff0c\u4e5f\u5373\u8bf7\u6c42 URL \u91cc\u9762\u7684\u53c2\u6570\uff0c\u5047\u5982\u8bf7\u6c42 URL \u4e3a\uff1a</p> <pre><code>http://test123.upyun.com/video/cdnValidate?accountID=2345&amp;userTD=kadkf&amp;token=fjdkadkf&amp;sign=dfskjdk123\n</code></pre> <p>\u5219\uff0c\u9274\u6743\u53c2\u6570\u53ef\u4e3a\uff1a</p> <pre><code>accountIDD\nuserTD\ntoken\nsign\n</code></pre> <p>\u5177\u4f53\u53c2\u6570\u4e2a\u6570\uff0c\u6839\u636e\u4e1a\u52a1\u60c5\u51b5\u8fdb\u884c\u914d\u7f6e\u3002</p> <p>\u9274\u6743\u65b9\u5f0f</p> <p>\u7ea6\u5b9a\u7684\u9274\u6743\u901a\u8fc7\u7684\u72b6\u6001\u7801\u6216\u8005\u54cd\u5e94\u4f53\u5185\u5bb9\uff0c\u5176\u4e2d\u72b6\u6001\u7801\u4e0d\u80fd\u4e3a 5XX\uff0c\u54cd\u5e94\u4f53\u5185\u5bb9\u4e0d\u80fd\u4e3a\u7a7a\u3002\u4f8b\u5982\uff1a\u793a\u4f8b\u9274\u6743\u901a\u8fc7\u7684\u72b6\u6001\u7801\u4e3a 200\u3002</p> <p>\u8d85\u65f6\u7b49\u5f85\u65f6\u95f4</p> <p>\u9274\u6743\u8bf7\u6c42\u7684\u8d85\u65f6\u65f6\u95f4\uff0c\u9ed8\u8ba4\u4e3a 10 \u79d2\u949f\u3002</p> <p>\u9274\u6743\u670d\u52a1\u5668\u8fde\u63a5\u8d85\u65f6</p> <p>\u5f53\u670d\u52a1\u5668\u5931\u53bb\u54cd\u5e94\u65f6\uff0c\u6b64\u5b57\u6bb5\u751f\u6548\u3002\u4e3a true \u65f6\u8ba4\u4e3a\u6240\u6709\u8bf7\u6c42\u90fd\u901a\u8fc7\u9274\u6743\uff0c\u9ed8\u8ba4\u662f\u9274\u6743\u901a\u8fc7\u3002</p> <p>\u6ce8\u610f\u4e8b\u9879</p> <ul> <li>\u4f7f\u7528\u8be5\u529f\u80fd\uff0c\u9700\u8003\u8651\u8bbf\u95ee\u91cf\u8fc7\u5927\u65f6\u9274\u6743\u670d\u52a1\u5668\u7684\u538b\u529b\uff1b</li> <li>\u5408\u6cd5\u8bf7\u6c42\u65f6\uff0c\u9700\u5728\u9274\u6743\u670d\u52a1\u5668\u54cd\u5e94\u5408\u6cd5\u7684\u9274\u6743\u72b6\u6001\u7801\u548c\u54cd\u5e94\u4f53\uff0c\u5426\u5219\u4f1a\u9274\u6743\u5931\u8d25\uff1b</li> <li>CDN \u8282\u70b9\u5230\u9274\u6743\u670d\u52a1\u5668\u51fa\u73b0\u7f51\u7edc\u5f02\u5e38\u6216\u8005\u7f51\u7edc\u8d85\u65f6\u7b49\u60c5\u51b5\u65f6\uff0c\u4f1a\u9ed8\u8ba4\u9274\u6743\u901a\u8fc7\uff1b</li> </ul>"},{"location":"cdn/config/#67-http","title":"6.7 HTTP \u8bf7\u6c42\u5927\u5c0f\u9650\u5236","text":"<p>\u529f\u80fd\u8bf4\u660e</p> <p>\u8be5\u529f\u80fd\u8868\u793a\u80fd\u591f\u63d0\u4ea4\u7684\u6700\u5927\u8bf7\u6c42 body \u9650\u5236\uff0c\u9002\u7528\u4e8e POST \u548c PUT \u8bf7\u6c42\u3002\u9ed8\u8ba4\u4e3a 512 M\uff0c\u7528\u6237\u53ef\u4ee5\u6839\u636e\u4e1a\u52a1\u5b9e\u9645\u60c5\u51b5\u5c06\u6b64\u503c\u8c03\u5c0f\uff0c\u4f8b\u5982\u8bbe\u7f6e\u4e3a 1M\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u7f51\u7ad9\u670d\u52a1\u5668\u662f\u4e0d\u9650\u5236\u8bf7\u6c42 body \u5927\u5c0f\u7684\uff0c\u8fd9\u6837\u5f88\u5bb9\u6613\u4f1a\u88ab\u9ed1\u5ba2\u5229\u7528\u5e76\u8fdb\u884c DDoS \u653b\u51fb\uff0c\u9ed1\u5ba2\u53ef\u4ee5\u5229\u7528\u8fd9\u4e00\u70b9\u5f80 HTTP POST \u7684 body \u4e2d\u4f20\u9012\u975e\u5e38\u5927\uff08\u6bd4\u5982\u51e0\u5341M\uff09\u7684\u8bf7\u6c42\uff0c\u53ef\u80fd\u5bfc\u81f4\u670d\u52a1\u7aef\u65e0\u6cd5\u5bf9\u5916\u63d0\u4f9b\u670d\u52a1\u3002</p> <p>\u914d\u7f6e\u5f15\u5bfc</p> <p>\u767b\u9646 CDN \u63a7\u5236\u53f0\uff0c\u4f9d\u6b21\u8fdb\u5165\uff1a\u670d\u52a1\u7ba1\u7406 &gt; \u529f\u80fd\u914d\u7f6e &gt; \u8bbf\u95ee\u63a7\u5236 &gt; HTTP \u8bf7\u6c42\u5927\u5c0f\u9650\u5236\uff0c\u70b9\u51fb\u300c\u7ba1\u7406\u300d\u6309\u94ae\u5373\u53ef\u5f00\u59cb\u914d\u7f6e\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff1a</p> <p></p> <p>\u5728\u914d\u7f6e\u754c\u9762\uff0c\u6839\u636e\u4e1a\u52a1\u8981\u6c42\uff0c\u586b\u5199\u914d\u7f6e\u5185\u5bb9\uff0c\u7136\u540e\u70b9\u51fb\u3010\u786e\u5b9a\u3011\u6309\u94ae\u5373\u53ef\u3002</p> <p>\u6ce8\u610f\u4e8b\u9879</p> <p>\u9002\u7528\u4e8e\u52a8\u6001\u8d44\u6e90\u52a0\u901f\uff0c\u5168\u9759\u6001\u8d44\u6e90\u52a0\u901f\u5efa\u8bae\u4e0d\u542f\u7528\u8be5\u529f\u80fd\u3002</p>"},{"location":"cdn/config/#68-ip","title":"6.8 IP \u8bbf\u95ee\u9650\u5236","text":"<p>\u529f\u80fd\u8bf4\u660e</p> <p>IP \u8bbf\u95ee\u9650\u5236\u4e5f\u5373 CDN \u8fb9\u7f18\u8282\u70b9\u5bf9\u7ec8\u7aef\u7528\u6237\u7684\u8bbf\u95ee IP \u7684\u8bbf\u95ee\u9891\u7387\u8fdb\u884c\u7edf\u8ba1\uff0c\u5728\u5355\u4f4d\u65f6\u95f4\u5468\u671f\u5185\uff08\u76ee\u524d\u56fa\u5b9a\u7684\u65f6\u95f4\u4e3a 60 \u79d2\uff09\uff0c\u5982\u679c\u8bbf\u95ee\u9891\u7387\u8fbe\u5230\u8bbe\u5b9a\u7684\u9608\u503c\uff0c\u5c06\u4e3b\u52a8\u62e6\u622a\u8be5 IP \u5bf9\u57df\u540d\u7684\u8bbf\u95ee\uff0c\u4ece\u800c\u8fbe\u5230\u8bbf\u95ee\u9650\u5236\u7684\u76ee\u7684\u3002</p> <p>\u5f53\u524d\u7684\u5355 IP \u8bbf\u95ee\u9891\u7387\u53ea\u652f\u6301\u9488\u5bf9 CDN \u5355\u4e2a\u8fb9\u7f18\u8282\u70b9\u751f\u6548\uff0c\u5f53\u8fbe\u5230\u8bbe\u5b9a\u7684\u9608\u503c\u65f6\uff0c\u5f02\u5e38\u8bbf\u95ee\u7684\u5ba2\u6237\u7aef IP \u5c06\u52a0\u5165\u9ed1\u540d\u5355\u4e2d\uff0c\u5e76\u53ef\u4ee5\u8bbe\u5b9a\u751f\u6548\u65f6\u95f4\uff0c\u5728\u8be5\u65f6\u95f4\u5468\u671f\u5185\uff0c\u6240\u6709\u8be5 IP \u7684\u8bbf\u95ee\u90fd\u4f1a\u88ab\u62e6\u622a\u3002</p> <p>\u914d\u7f6e\u5f15\u5bfc</p> <p>\u767b\u9646 CDN \u63a7\u5236\u53f0\uff0c\u4f9d\u6b21\u8fdb\u5165\uff1a\u670d\u52a1 \u7ba1\u7406 &gt; \u529f\u80fd\u914d\u7f6e &gt; \u8bbf\u95ee\u63a7\u5236 &gt; IP \u8bbf\u95ee\u9650\u5236\uff0c\u70b9\u51fb\u300c\u7ba1\u7406\u300d\u6309\u94ae\u5373\u53ef\u5f00\u59cb\u914d\u7f6e\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff1a</p> <p></p> <p>\u914d\u7f6e\u6b65\u9aa4\u5982\u4e0b\uff1a</p> <p>\u7b2c\u4e00\u6b65\uff1a\u586b\u5199\u8bbf\u95ee\u7684\u8d44\u6e90\u8def\u5f84\u89c4\u5219\uff0c\u652f\u6301 <code>\uff0a</code> \u901a\u914d\u7b26\uff0c\u5982\uff1a<code>/a/*.mp4</code>\u3001<code>/b/*.flv</code></p> <p>\u7b2c\u4e8c\u6b65\uff1a\u9009\u62e9\u9650\u5236\u65b9\u5f0f\uff1a<code>\u76f4\u63a5\u7981\u6b62</code></p> <p>\u7b2c\u4e09\u6b65\uff1a\u8bbe\u7f6e\u8bbf\u95ee\u9891\u7387\u53ca\u76f8\u5e94\u7684\u65f6\u95f4\u9650\u5236</p> <p>\u8be6\u7ec6\u914d\u7f6e\u8bf7\u53c2\u89c1 IP \u8bbf\u95ee\u9650\u5236\u7528\u6237\u6307\u5357\u3002</p> <p>\u6ce8\u610f\u4e8b\u9879</p> <ul> <li> <p>\u76f4\u63a5\u7981\u6b62\u662f\u4ee5 60s \u4e3a\u4e00\u4e2a\u8ba1\u6570\u5468\u671f\uff0c\u5373\u4e0a\u4e00\u4e2a 60s \u7684\u8ba1\u6570\u4e0d\u4f1a\u7d2f\u8ba1\u53e0\u52a0\u5230\u4e0b\u4e00\u4e2a 60s \u5185\uff1b</p> </li> <li> <p>\u300c\u8bbf\u95ee\u9891\u7387\u9608\u503c\u300d\u9700\u6839\u636e\u4e1a\u52a1\u60c5\u51b5\u614e\u91cd\u8bbe\u7f6e\uff0c\u8fc7\u4f4e\u53ef\u80fd\u5f15\u8d77\u6b63\u5e38\u7528\u6237\u7684\u8bbf\u95ee\u53d7\u9650\uff0c\u8fc7\u9ad8\u5219\u65e0\u6cd5\u6709\u6548\u9650\u5236\u975e\u6cd5\u8bbf\u95ee\uff1b</p> </li> <li> <p>\u8bf7\u52ff\u5c06\u8bbf\u95ee\u9891\u7387\u503c\u8bbe\u7f6e\u8fc7\u4f4e\uff0c\u4ee5\u514d\u5f71\u54cd\u6b63\u5e38\u7528\u6237\u7684\u8bbf\u95ee\u8bf7\u6c42\u3002</p> </li> </ul>"},{"location":"cdn/config/#69-cc","title":"6.9 CC \u9632\u62a4","text":"<p>\u529f\u80fd\u8bf4\u660e</p> <p>CC \u9632\u62a4\u4e3b\u8981\u662f\u9488\u5bf9\u7f51\u7edc\u5b89\u5168\u9886\u57df\u4e2d\u7684 CC \u653b\u51fb\u800c\u8fdb\u884c\u7684\u4e00\u79cd\u5e94\u7528\u5c42\u653b\u51fb\u9632\u62a4\uff0c\u8be5\u529f\u80fd\u901a\u8fc7\u81ea\u5b9a\u4e49\u5339\u914d\u89c4\u5219\u5bf9\u76ee\u6807\u8d44\u6e90\u8fdb\u884c\u76d1\u63a7\uff0c\u5f53\u8bf7\u6c42\u9891\u7387\u8fbe\u5230\u89e6\u53d1\u9891\u7387\u65f6\u5bf9\u7591\u4f3c\u653b\u51fb\u8bf7\u6c42\u8fdb\u884c\u6821\u9a8c\uff0c\u6821\u9a8c\u901a\u8fc7\u5219\u5141\u8bb8\u8bbf\u95ee\uff1b\u6821\u9a8c\u4e0d\u901a\u8fc7\uff0c\u5219\u76f4\u63a5\u7981\u6b62\u8bbf\u95ee\u3002</p> <p>\u914d\u7f6e\u5f15\u5bfc</p> <p>\u767b\u9646 CDN \u63a7\u5236\u53f0\uff0c\u4f9d\u6b21\u8fdb\u5165\uff1a\u670d\u52a1\u7ba1\u7406 &gt; \u529f\u80fd\u914d\u7f6e &gt; \u8bbf\u95ee\u63a7\u5236 &gt; CC \u9632\u62a4\uff0c\u70b9\u51fb\u300c\u7ba1\u7406\u300d\u6309\u94ae\u5373\u53ef\u5f00\u59cb\u914d\u7f6e\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff1a</p> <p></p> <p>\u70b9\u51fb\u53f3\u4e0a\u89d2\u7684\u3010\u6dfb\u52a0\u9632\u62a4\u7b56\u7565\u3011\uff0c\u51fa\u73b0\u5982\u4e0b\u914d\u7f6e\u754c\u9762\uff1a</p> <p></p> <p>\u5177\u4f53\u914d\u7f6e\u53ef\u4ee5\u8d70\u5982\u4e0b\u56db\u4e2a\u6b65\u9aa4\uff1a</p> <ul> <li>\u7b2c\u4e00\u6b65\uff1a\u6dfb\u52a0\u9632\u62a4\u7b56\u7565\uff0c\u8bbe\u7f6e URI \u5339\u914d\u89c4\u5219\uff0c\u4f8b\u5982\uff1a/video/*</li> <li>\u7b2c\u4e8c\u6b65\uff1a\u586b\u5199\u8bbf\u95ee\u9891\u7387\u9608\u503c\uff0c\u4f8b\u5982\uff1a500\u6b21/\u5206\u949f\uff0c\u5728\u667a\u80fd\u9632\u62a4\u6a21\u5f0f\u4e0b\u624d\u6709\u6548</li> <li>\u7b2c\u4e09\u6b65\uff1a\u8bbe\u7f6e IP \u767d\u540d\u5355\uff0c\u5982\u679c\u8981\u7ed5\u8fc7 CC \u9632\u62a4\u7b56\u7565\uff0c\u6b64\u5904\u53ef\u8fdb\u884c\u8bbe\u7f6e</li> <li>\u7b2c\u56db\u6b65\uff1a\u9009\u62e9 CC \u9632\u62a4\u6a21\u5f0f\uff0c\u5305\u62ec\u5f3a\u5236\u9632\u62a4\u3001\u667a\u80fd\u9632\u62a4\u3001\u6682\u505c\u9632\u62a4\uff0c\u5f53\u6b63\u5728\u906d\u53d7\u653b\u51fb\u65f6\uff0c\u5efa\u8bae\u9009\u62e9\u5f3a\u5236\u9632\u62a4\u6a21\u5f0f</li> </ul> <p>\u5f3a\u5236\u9632\u62a4</p> <p>\u4e5f\u5c31\u662f\u5ffd\u7565\u9891\u7387\u9608\u503c\uff0c\u9488\u5bf9\u5339\u914d\u7684 URI \u76f4\u63a5\u8fdb\u884c\u6821\u9a8c\uff0c\u6821\u9a8c\u901a\u8fc7\u5219\u653e\u884c\u68c0\u9a8c\u4e0d\u901a\u8fc7\u5219\u62d2\u7edd\u8bbf\u95ee\uff1b</p> <p>\u667a\u80fd\u9632\u62a4</p> <p>\u9488\u5bf9\u5339\u914d\u5230\u7684 URI \u8fdb\u884c\u8bbf\u95ee\u9891\u7387\u9608\u503c\u7684\u5224\u65ad\uff0c\u8fbe\u5230\u9608\u503c\u5219\u8fdb\u884c\u6821\u9a8c\uff0c\u6821\u9a8c\u901a\u8fc7\u5219\u653e\u884c\uff0c\u6821\u9a8c\u4e0d\u901a\u8fc7\u5219\u62d2\u7edd\u8bbf\u95ee\u3002</p> <p>\u6682\u505c\u9632\u62a4</p> <p>\u9632\u62a4\u89c4\u5219\u5931\u6548\uff0c\u4e0d\u8fdb\u884c\u9891\u7387\u7edf\u8ba1\u548c\u8bf7\u6c42\u6821\u9a8c\u3002</p> <p>\u6ce8\u610f\u4e8b\u9879</p> <p>1.CC \u9632\u62a4\u5206\u4e3a\u5f3a\u5236\u9632\u62a4\u548c\u667a\u80fd\u9632\u62a4\u4e24\u79cd\u6a21\u5f0f\uff0c\u5728\u667a\u80fd\u9632\u62a4\u6a21\u5f0f\u4e0b\uff0c\u5219\u4f1a\u5339\u914d URI \u89c4\u5219\uff0c\u8bf7\u6c42\u4e00\u65e6\u8fbe\u5230\u8bbf\u95ee\u9891\u7387\u9608\u503c\uff0c\u5219\u4f1a\u89e6\u53d1 JavaScript \u6821\u9a8c\uff0c\u6821\u9a8c\u901a\u8fc7\u5219\u53ef\u6b63\u5e38\u8bbf\u95ee\uff0c\u6821\u9a8c\u4e0d\u901a\u8fc7\u5219\u76f4\u63a5\u62d2\u7edd\u3002\u5728\u5f3a\u5236\u9632\u62a4\u6a21\u5f0f\u4e0b\uff0c\u5219\u4f1a\u5ffd\u7565\u8bbf\u95ee\u9891\u7387\u9608\u503c\uff0c\u76f4\u63a5\u89e6\u53d1 JavaScript \u6821\u9a8c\uff0c\u4ee5\u6b64\u7c7b\u63a8;</p> <p>2.\u5728\u667a\u80fd\u9632\u62a4\u6a21\u5f0f\u4e0b\uff0c\u8bbf\u95ee\u9608\u503c\u8bbe\u7f6e\u5f97\u8fc7\u4f4e\uff0c\u53ef\u80fd\u4e0d\u4f1a\u89e6\u53d1 JavaScript \u6821\u9a8c\uff0c\u5efa\u8bae\u9608\u503c\u8bbe\u7f6e\u9ad8\u4e00\u4e9b\u3002</p>"},{"location":"cdn/config/#610-waf","title":"6.10 WAF \u9632\u62a4","text":"<p>\u529f\u80fd\u8bf4\u660e</p> <p>WAF\uff08Web Application Firewall\uff09\u7684\u4e2d\u6587\u540d\u79f0\u53eb\u505a Web \u5e94\u7528\u9632\u706b\u5899 \uff0c\u662f\u901a\u8fc7\u6267\u884c\u4e00\u7cfb\u5217\u9488\u5bf9 HTTP/HTTPS \u7684\u5b89\u5168\u7b56\u7565\u6765\u4e13\u95e8\u4e3a Web \u5e94\u7528\u63d0\u4f9b\u4fdd\u62a4\u7684\u4e00\u9879\u529f\u80fd\u3002\u4e3b\u8981\u9632\u62a4\u7684\u662f\u6765\u81ea\u5bf9\u7f51\u7ad9\u6e90\u7ad9\u7684\u52a8\u6001\u6570\u636e\u653b\u51fb\uff0c\u53ef\u9632\u62a4\u7684\u653b\u51fb\u7c7b\u578b\u5305\u62ec SQL \u6ce8\u5165\u3001XSS \u653b\u51fb\u3001CSRF \u653b\u51fb\u3001\u6076\u610f\u722c\u866b\u3001\u626b\u63cf\u5668\u3001\u8fdc\u7a0b\u6587\u4ef6\u5305\u542b\u7b49\u3002</p> <p>\u914d\u7f6e\u5f15\u5bfc</p> <p>\u767b\u9646 CDN \u63a7\u5236\u53f0\uff0c\u4f9d\u6b21\u8fdb\u5165\uff1a\u670d\u52a1 \u7ba1\u7406 &gt; \u529f\u80fd\u914d\u7f6e &gt; \u8bbf\u95ee\u63a7\u5236 &gt; WAF \u9632\u62a4\uff0c\u5f00\u542f WAF \u4fdd\u62a4\u5373\u53ef\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff1a</p> <p></p> <p>\u5982\u4e0a\u914d\u7f6e\u754c\u9762\uff0c\u70b9\u51fb\u3010\u786e\u5b9a\u3011\u6309\u94ae\u5373\u53ef\u5f00\u542f\u3002</p> <p>\u6ce8\u610f\u4e8b\u9879</p> <ul> <li>\u5f53\u524d\u7248\u672c\u7684 WAF \u529f\u80fd\u5c5e\u4e8e\u514d\u8d39\u529f\u80fd\uff0c\u6682\u65e0\u7edf\u8ba1\u5206\u6790\u7c7b\u6570\u636e\uff0c\u5f85\u540e\u7eed\u89c4\u5212\uff1b</li> <li>\u5e73\u53f0\u9ed8\u8ba4\u89c4\u5219\u6709\u9650\uff0cWAF \u529f\u80fd\u4e0d\u786e\u4fdd\u9632\u62a4\u6240\u6709\u7684\u653b\u51fb\u8bf7\u6c42\uff1b</li> <li>\u9002\u7528\u4e8e\u52a8\u6001\u8d44\u6e90\u52a0\u901f\uff0c\u5168\u9759\u6001\u8d44\u6e90\u52a0\u901f\u5efa\u8bae\u4e0d\u542f\u7528\u8be5\u529f\u80fd\u3002</li> </ul>"},{"location":"cdn/config/#611","title":"6.11 \u8de8\u57df\u914d\u7f6e","text":"<p>\u529f\u80fd\u8bf4\u660e</p> <p>\u8de8\u57df\u8d44\u6e90\u5171\u4eab \uff08 Cross-Origin Resource Sharing\uff09\u662f\u4e00\u79cd\u7f51\u7edc\u6d4f\u89c8\u5668\u7684\u6280\u672f\u89c4\u8303\uff0c\u4ed6\u4e3a  Web \u670d\u52a1\u5668\u5b9a\u4e49\u4e86\u4e00\u79cd\u65b9\u5f0f\uff0c\u5141\u8bb8\u7f51\u9875\u4ece\u4e0d\u540c\u7684\u57df\u8bbf\u95ee\u5176\u8d44\u6e90\u3002\u8de8\u6e90\u8d44\u6e90\u5171\u4eab\u6807\u51c6\u901a\u8fc7\u65b0\u589e\u4e00\u7cfb\u5217 HTTP \u5934\uff0c\u8ba9\u670d\u52a1\u5668\u80fd\u58f0\u660e\u90a3\u4e9b\u6765\u6e90\u53ef\u4ee5\u901a\u8fc7\u6d4f\u89c8\u5668\u8bbf\u95ee\u8be5\u670d\u52a1\u5668\u4e0a\u7684\u8d44\u6e90\u3002\u6b64\u65f6\u9700\u8981\u5728 Response Header \u4e2d\u589e\u52a0\u8de8\u57df\u76f8\u5173\u914d\u7f6e\uff0c\u8fd9\u6837\u5c31\u53ef\u4ee5\u4f7f\u5f97\u8d44\u6e90\u7684\u5b89\u5168\u8bbf\u95ee\u6210\u4e3a\u53ef\u80fd\u3002</p> <p>\u914d\u7f6e\u5f15\u5bfc</p> <p>\u767b\u9646 CDN \u63a7\u5236\u53f0\uff0c\u4f9d\u6b21\u8fdb\u5165\uff1a\u670d\u52a1 \u7ba1\u7406 &gt; \u529f\u80fd\u914d\u7f6e &gt; \u8bbf\u95ee\u63a7\u5236  &gt; CORS \u8de8\u57df\u5171\u4eab\uff0c\u70b9\u51fb\u3010\u7ba1\u7406\u3011\u6309\u94ae\u5373\u53ef\u5f00\u59cb\u914d\u7f6e\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff1a</p> <p></p> <p>\u5177\u4f53\u914d\u7f6e\u5b57\u6bb5\u505a\u5982\u4e0b\u8bf4\u660e\uff1a</p> <p>Access-Control-Allow-Origin</p> <p>\u8fd4\u56de\u7684\u8d44\u6e90\u9700\u8981\u6709\u4e00\u4e2a <code>Access-Control-Allow-Origin</code> \u5934\u4fe1\u606f\uff0c\u4e5f\u53ef\u4ee5\u8bbe\u7f6e\u901a\u914d\u7b26\uff0a\uff0c\u5141\u8bb8\u88ab\u6240\u6709\u57df\u4f7f\u7528\u3002\u8bed\u6cd5\u5982\u4e0b:</p> <p>Access-Control-Allow-Origin:  | * <p>\u4e3e\u4e2a\u6817\u5b50\uff0c\u5141\u8bb8\u6765\u81ea <code>http://www.upyun.com</code> \u7684\u8bf7\u6c42\uff0c\u4f60\u53ef\u4ee5\u8fd9\u6837\u6307\u5b9a:</p> <p>Access-Control-Allow-Origin: http://www.upyun.com</p> <p>Access-Control-Allow-Methods</p> <p>\u8868\u793a\u5141\u8bb8\u7684\u8de8\u57df\u8bf7\u6c42\u7684\u65b9\u6cd5\uff0c\u5728\u5f53\u524d\u8bf7\u6c42\u7684\u57df\u88ab\u5141\u8bb8\u540e\uff0c\u8fd8\u8981\u68c0\u67e5\u5f53\u524d\u8bf7\u6c42\u7684\u65b9\u6cd5\u662f\u5426\u88ab\u5141\u8bb8\uff0c\u793a\u4f8b\u5982\u4e0b\uff1a</p> <p>Access-Control-Allow-Methods: POST, GET, OPTIONS</p> <p>Access-Control-Allow-Headers</p> <p>\u4e5f\u662f\u5728\u54cd\u5e94\u9884\u68c0\u8bf7\u6c42\u7684\u65f6\u5019\u4f7f\u7528\uff0c\u7528\u6765\u6307\u660e\u5728\u5b9e\u9645\u7684\u8bf7\u6c42\u4e2d\uff0c\u53ef\u4ee5\u4f7f\u7528\u54ea\u4e9b\u81ea\u5b9a\u4e49 HTTP \u8bf7\u6c42\u5934\uff0c\u6bd4\u5982\uff1a</p> <p>Access-Control-Allow-Headers: X-PINGOTHER\uff0cX-UPYUN</p> <p>\u8fd9\u6837\u5728\u5b9e\u9645\u7684\u8bf7\u6c42\u91cc,\u8bf7\u6c42\u5934\u4fe1\u606f\u91cc\u5c31\u53ef\u4ee5\u6709\u8fd9\u4e48\u4e00\u6761\uff1a</p> <p>X-PINGOTHER: hello</p> <p>Access-Control-Expose-Headers</p> <p>\u8bbe\u7f6e\u6d4f\u89c8\u5668\u5141\u8bb8\u8bbf\u95ee\u7684\u670d\u52a1\u5668\u7684\u5934\u4fe1\u606f\u7684\u767d\u540d\u5355\uff0c\u793a\u4f8b\u5982\u4e0b\uff1a</p> <p>Access-Control-Expose-Headers: X-My-Custom-Header, X-Another-Custom-Header</p> <p>\u8fd9\u6837\uff0c<code>X-My-Custom-Header</code> \u548c <code>X-Another-Custom-Header</code> \u8fd9\u4e24\u4e2a\u5934\u4fe1\u606f\uff0c\u90fd\u53ef\u4ee5\u88ab\u6d4f\u89c8\u5668\u5f97\u5230\u3002</p> <p>Access-Control-Max-Age</p> <p>\u8fd9\u4e2a\u5934\u544a\u8bc9\u6211\u4eec\u8fd9\u6b21\u9884\u8bf7\u6c42\u7684\u7ed3\u679c\u7684\u6709\u6548\u671f\u662f\u591a\u4e45\uff0c\u5355\u4f4d\u4e3a\u79d2\uff0c\u8bbe\u7f6e\u793a\u4f8b\u5982\u4e0b\uff1a</p> <p>Access-Control-Max-Age: 864000</p> <p>\u8868\u660e\u5728 864000s\uff0810\u5929\uff09\u5185\uff0c\u5bf9\u8be5\u8d44\u6e90\u7684\u8de8\u57df\u8bbf\u95ee\u4e0d\u518d\u53d1\u9001\u53e6\u5916\u4e00\u6761\u9884\u8bf7\u6c42\u3002</p> <p>\u6ce8\u610f\u4e8b\u9879</p> <p>1.\u6700\u591a\u652f\u6301\u6dfb\u52a0 10 \u6761\u89c4\u5219\uff0c\u5339\u914d\u65f6\u4ece\u7b2c\u4e00\u6761\u5f00\u59cb\u9010\u6761\u5339\u914d\uff0c\u4ee5\u6700\u65e9\u5339\u914d\u4e0a\u7684\u89c4\u5219\u4e3a\u51c6</p> <p>2.<code>\u5141\u8bb8\u7684\u57df</code>\u3001<code>Allow Header</code> \u3001<code>Expose Header</code> \u6700\u591a\u5141\u8bb8 20 \u884c</p> <p>3.<code>\u5141\u8bb8\u7684\u57df</code> \u53ca <code>Methods</code> \u5efa\u8bae\u6839\u636e\u9700\u8981\u4f7f\u7528\u6700\u5c0f\u7684\u914d\u7f6e\u6765\u4fdd\u8bc1\u5b89\u5168\u6027\uff0c\u591a\u6761\u89c4\u5219\u95f4\u4e0d\u8981\u6709\u8986\u76d6\u548c\u51b2\u7a81</p> <p>4.<code>\u5141\u8bb8\u7684\u57df</code> \u9700\u5e26\u4e0a\u5b8c\u6574\u7684\u57df\u4fe1\u606f\uff0c\u5373\u6307\u5b9a https \u6216\u8005 http\uff0c\u6216\u8005 <code>*://foo.com</code> \u8fd9\u6837\u7684\u5f62\u5f0f</p> <p>5.<code>Allow Header</code>\u3001<code>Expose Header</code> \u4e0d\u5141\u8bb8\u4f7f\u7528\u901a\u914d\u7b26\uff0c\u5927\u5c0f\u5199\u4e0d\u654f\u611f</p> <p>6.<code>\u7f13\u5b58\u65f6\u95f4</code> \u5982\u679c\u6ca1\u6709\u7279\u6b8a\u60c5\u51b5\u53ef\u4ee5\u914c\u60c5\u8bbe\u7f6e\u5f97\u5927\u4e00\u70b9\uff0c\u9ed8\u8ba4\u4e3a 86400 \u79d2\uff0c\u6700\u5927\u4e3a 604800 \u79d2</p>"},{"location":"cdn/config/#612","title":"6.12 \u81ea\u5b9a\u4e49\u9875\u9762","text":"<p>\u529f\u80fd\u8bf4\u660e</p> <p>\u81ea\u5b9a\u4e49\u9875\u9762\u529f\u80fd\u4e3b\u8981\u9488\u5bf9 CDN \u8fd4\u56de\u7684\u9ed8\u8ba4\u9519\u8bef\u7801\u4ee5\u53ca\u6e90\u7ad9\u8fd4\u56de\u7684\u9519\u8bef\u72b6\u6001\u8fdb\u884c\u81ea\u5b9a\u4e49\u9875\u9762\u7684\u8bbe\u8ba1\u548c\u7f16\u8f91\uff0c\u53ef\u4ee5\u8fdb\u4e00\u6b65\u63d0\u5347\u7ec8\u7aef\u7528\u6237\u4f53\u9a8c\u3002\u5982\u672a\u914d\u7f6e\uff0c\u5219\u9ed8\u8ba4\u9075\u5faa\u53c8\u62cd\u4e91 CDN \u670d\u52a1\u9ed8\u8ba4\u9519\u8bef\u9875\u9762\u6216\u6e90\u7ad9\u9ed8\u8ba4\u7684\u9519\u8bef\u9875\u9762\u3002CDN \u76ee\u524d\u63d0\u4f9b\u4e09\u79cd\u9009\u9879\u7684\u8bbe\u7f6e\uff1a\u9ed8\u8ba4\u9875\u9762\u3001\u81ea\u5b9a\u4e49\u9875\u9762\u3001\u7f8e\u5316\u9875\u9762\uff08\u6682\u672a\u5f00\u653e\uff09\u3002\u4ee5\u5730\u533a\u8bbf\u95ee\u9650\u5236\u4e3a\u4f8b\uff1a</p> <ul> <li>\u9ed8\u8ba4\uff1aCDN \u4f1a\u9ed8\u8ba4\u8fd4\u56de\u5982\u4e0b JSON \u4e32\u683c\u5f0f</li> </ul> <pre><code>\n{\n  \"code\": \"40310002\",\n  \"msg\": \"region is forbidden\"\n}\n\n</code></pre> <ul> <li> <p>\u81ea\u5b9a\u4e49\u9875\u9762\uff1a\u5f53\u89e6\u53d1 CDN \u9632\u76d7\u94fe\u89c4\u5219\u65f6\uff0cCDN \u4f1a\u76f4\u63a5\u8fd4\u56de\u81ea\u884c\u8bbe\u8ba1\u548c\u7f16\u8f91\u7684\u9875\u9762\u3002\u5f53\u89e6\u53d1\u6e90\u7ad9\u9519\u8bef\u7801\u65f6\uff0c\u4f1a 302 \u8df3\u8f6c\u5230\u81ea\u884c\u8bbe\u8ba1\u7684\u9875\u9762\u3002</p> </li> <li> <p>\u7f8e\u5316\u9875\u9762\uff1a\u53c8\u62cd\u4e91\u7ed3\u5408\u4e1a\u52a1\u573a\u666f\uff0c\u81ea\u884c\u8bbe\u8ba1\u7684\u7f8e\u5316\u9875\u9762\uff08\u6682\u672a\u5f00\u653e\uff09\u3002</p> </li> </ul> <p>1\u3001CDN \u4e1a\u52a1\u7aef\u652f\u6301\u7684\u914d\u7f6e\u9879\u5305\u62ec\uff1a</p> <ul> <li>IP/\u5730\u533a\u9650\u5236</li> </ul> <p>\u5f53\u5728\u53c8\u62cd\u4e91\u63a7\u5236\u53f0\u914d\u7f6e\u4e86 IP \u9ed1\u767d\u540d\u5355\u3001\u5730\u533a\u8bbf\u95ee\u9650\u5236\u529f\u80fd\uff0c\u89e6\u53d1\u8be5\u89c4\u5219\u65f6\u4f1a\u76f4\u63a5\u8fd4\u56de\u81ea\u5b9a\u4e49\u7684\u9875\u9762\u3002</p> <ul> <li>\u9632\u76d7\u94fe</li> </ul> <p>\u5f53\u5728\u53c8\u62cd\u4e91\u63a7\u5236\u53f0\u914d\u7f6e\u4e86 User-Agent \u9632\u76d7\u94fe\u3001Referer \u9632\u76d7\u94fe\u3001Token \u9632\u76d7\u94fe\u529f\u80fd\uff0c\u89e6\u53d1\u8be5\u89c4\u5219\u65f6\u4f1a\u76f4\u63a5\u8fd4\u56de\u81ea\u5b9a\u4e49\u7684\u9875\u9762\u3002</p> <ul> <li>\u56de\u6e90\u9274\u6743</li> </ul> <p>\u5f53\u5728\u53c8\u62cd\u4e91\u63a7\u5236\u53f0\u914d\u7f6e\u4e86\u56de\u6e90\u9274\u6743\u529f\u80fd\uff0c\u89e6\u53d1\u89c4\u5219\uff08\u5305\u62ec\u9274\u6743\u5931\u8d25\u3001\u9274\u6743\u9519\u8bef\uff09\u65f6\u4f1a\u76f4\u63a5\u8fd4\u56de\u81ea\u5b9a\u4e49\u7684\u9875\u9762\u3002</p> <ul> <li>\u5b89\u5168\u9632\u62a4</li> </ul> <p>\u5f53\u5728\u53c8\u62cd\u4e91\u63a7\u5236\u53f0\u914d\u7f6e\u4e86 IP \u8bbf\u95ee\u9650\u5236\u3001WAF \u9632\u62a4\u3001HTTP \u8bf7\u6c42\u5927\u5c0f\u9650\u5236\u529f\u80fd\uff0c\u89e6\u53d1\u89c4\u5219\u65f6\u4f1a\u4f1a\u76f4\u63a5\u8fd4\u56de\u81ea\u5b9a\u4e49\u7684\u9875\u9762\u3002</p> <ul> <li>\u8fb9\u7f18\u89c4\u5219</li> </ul> <p>\u5f53\u5728\u53c8\u62cd\u4e91\u63a7\u5236\u53f0\u914d\u7f6e\u4e86\u8fb9\u7f18\u89c4\u5219\u8bbf\u95ee\u63a7\u5236\u529f\u80fd\uff0c\u89e6\u53d1\u89c4\u5219\u65f6\u4f1a\u76f4\u63a5\u8fd4\u56de\u81ea\u5b9a\u4e49\u7684\u9875\u9762\uff0c\u5f53\u524d\u4ec5\u9488\u5bf9 403\u3001404 \u72b6\u6001\u7801\u6709\u6548\u3002</p> <ul> <li>\u5173\u95ed\u670d\u52a1</li> </ul> <p>CDN \u670d\u52a1\u88ab\u5173\u95ed\u65f6\uff0c\u53ef\u4ee5\u6839\u636e\u8981\u6c42\u81ea\u5b9a\u4e49\u9875\u9762\u3002</p> <p>2\u3001\u6e90\u7ad9\u5339\u914d\u7684\u72b6\u6001\u7801\u5305\u62ec\uff1a</p> <ul> <li>400</li> </ul> <p>\u8868\u793a\u8be5\u8bf7\u6c42\u62a5\u6587\u4e2d\u5b58\u5728\u8bed\u6cd5\u9519\u8bef\uff0c\u5bfc\u81f4\u6e90\u7ad9\u65e0\u6cd5\u7406\u89e3\u8be5\u8bf7\u6c42\u3002</p> <ul> <li>403</li> </ul> <p>\u8be5\u72b6\u6001\u7801\u8868\u660e\u5bf9\u8bf7\u6c42\u8d44\u6e90\u7684\u8bbf\u95ee\u88ab\u6e90\u7ad9\u62d2\u7edd\u4e86\u3002</p> <ul> <li>404</li> </ul> <p>\u8be5\u72b6\u6001\u7801\u8868\u660e\u6e90\u7ad9\u4e0a\u65e0\u6cd5\u627e\u5230\u6307\u5b9a\u7684\u8d44\u6e90\u3002</p> <ul> <li>405</li> </ul> <p>\u6307\u51fa\u8bf7\u6c42\u65b9\u6cd5\u5bf9\u67d0\u4e9b\u7279\u5b9a\u7684\u8d44\u6e90\u4e0d\u5141\u8bb8\u4f7f\u7528\uff0c\u4e5f\u5373\u5ba2\u6237\u7aef\u7684\u8bf7\u6c42\u88ab\u6e90\u7ad9\u62d2\u7edd\u4e86\u3002</p> <ul> <li>414</li> </ul> <p>\u8868\u793a\u8bf7\u6c42\u7684 URI \u8fc7\u957f\uff0c\u6e90\u7ad9\u65e0\u6cd5\u5904\u7406\u65f6\u8fd4\u56de\u6b64\u4ee3\u7801\u3002</p> <ul> <li>416</li> </ul> <p>\u5ba2\u6237\u7aef\u5305\u542b\u4e86\u4e00\u4e2a\u6e90\u7ad9\u65e0\u6cd5\u6ee1\u8db3\u7684 Range \u5934\u4fe1\u606f\u7684\u8bf7\u6c42\u3002</p> <ul> <li>500</li> </ul> <p>\u6e90\u7ad9\u9047\u5230\u4e86\u4e00\u4e2a\u672a\u66fe\u9047\u5230\u7684\u9519\u8bef\uff08\u5185\u90e8\u670d\u52a1\u5668\u9519\u8bef\uff09\uff0c\u5bfc\u81f4\u65e0\u6cd5\u5b8c\u6210\u5bf9\u8bf7\u6c42\u7684\u5904\u7406\u3002</p> <ul> <li>501</li> </ul> <p>\u6e90\u7ad9\u4e0d\u652f\u6301\u5ba2\u6237\u7aef\u8bf7\u6c42\u4e2d\u6240\u8981\u6c42\u7684\u529f\u80fd\u65f6\u8fd4\u56de\u6b64\u4ee3\u7801\u3002</p> <ul> <li>502</li> </ul> <p>\u6e90\u7ad9\u4f5c\u4e3a\u7f51\u5173\u6216\u8005\u4ee3\u7406\u670d\u52a1\u5668\u5c1d\u8bd5\u6267\u884c\u8bf7\u6c42\u65f6\uff0c\u4ece\u8fdc\u7aef\u670d\u52a1\u5668\u63a5\u6536\u5230\u9519\u8bef\u6216\u8005\u65e0\u6548\u7684\u8bf7\u6c42\u3002\u4e5f\u5373\u9519\u8bef\u7684\u7f51\u5173\u3002</p> <ul> <li>503</li> </ul> <p>\u7531\u4e8e\u4e34\u65f6\u7684\u670d\u52a1\u5668\u7ef4\u62a4\u6216\u8005\u8fc7\u8f7d\uff0c\u6e90\u7ad9\u5f53\u524d\u65e0\u6cd5\u5904\u7406\u8bf7\u6c42\u3002</p> <ul> <li>504</li> </ul> <p>\u6e90\u7ad9\u4f5c\u4e3a\u7f51\u5173\u6216\u8005\u4ee3\u7406\u670d\u52a1\u5668\u5c1d\u8bd5\u6267\u884c\u8bf7\u6c42\u65f6\uff0c\u672a\u80fd\u53ca\u65f6\u4ece\u8fdc\u7aef\u670d\u52a1\u7f51\u6536\u5230\u54cd\u5e94\u3002\u4e5f\u5373\u7f51\u5173\u8d85\u65f6\u3002</p> <p>\u914d\u7f6e\u5f15\u5bfc</p> <p>\u767b\u9646 CDN \u63a7\u5236\u53f0\uff0c\u4f9d\u6b21\u8fdb\u5165\uff1a\u670d\u52a1\u7ba1\u7406 &gt; \u529f\u80fd\u914d\u7f6e &gt; \u8bbf\u95ee\u63a7\u5236  &gt; \u81ea\u5b9a\u4e49\u9875\u9762\uff0c\u5728\u6b64\u680f\u76ee\u4e0b\u53ef\u8fdb\u884c\u76f8\u5e94\u8bbe\u7f6e\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff1a</p> <p></p> <ul> <li>\u7b2c\u4e00\u6b65</li> </ul> <p>\u70b9\u51fb\u3010\u7ba1\u7406\u3011\u6309\u94ae\u8fdb\u5165\u914d\u7f6e\u9762\u677f\uff1a</p> <p></p> <ul> <li>\u7b2c\u4e8c\u6b65</li> </ul> <p>\u70b9\u51fb\u53f3\u4e0a\u89d2\u7684\u3010\u6dfb\u52a0\u89c4\u5219\u3011\uff0c\u8fdb\u5165\u89c4\u5219\u914d\u7f6e\u754c\u9762\uff1a</p> <p></p> <p>\u5728\u89c4\u5219\u914d\u7f6e\u9875\u9762\uff0c\u914d\u7f6e\u9879\u5305\u62ec\uff1a\u9519\u8bef\u6765\u6e90\u3001\u5339\u914d\u7c7b\u578b\u3001\u54cd\u5e94\u5730\u5740\u3002\u9700\u8981\u6ce8\u610f\u7684\u662f\uff1a\u54cd\u5e94\u5730\u5740\u5fc5\u987b\u8981\u586b\u5199 URI\uff0c\u4f8b\u5982\uff1a</p> <pre><code>/custom/error-page.html\n\n</code></pre> <p>\u81ea\u5b9a\u4e49\u9875\u9762\u7684\u8d44\u6e90\u6240\u7ed1\u5b9a\u7684\u57df\u540d\u5fc5\u987b\u662f\u8bbf\u95ee\u57df\u540d\uff0c\u5426\u5219\u4f1a\u8bbf\u95ee\u5230\u9519\u8bef\u7684\u4f4d\u7f6e\uff0c\u4e5f\u5373\uff1a\u5f53\u5ba2\u6237\u7aef\u8bf7\u6c42\u4e3a\uff1a</p> <pre><code>https://www.example.com/index.html \n\n</code></pre> <p>\u5f53\u89e6\u53d1\u9632\u76d7\u94fe\u89c4\u5219\u4e4b\u540e\uff0c\u4f1a 302 \u8df3\u8f6c\uff08\u4ec5\u652f\u6301\u9519\u8bef\u6765\u6e90\u4e3a\u6e90\u7ad9\u7684\u60c5\u51b5\uff0c\u9519\u8bef\u6765\u6e90\u4e8e CDN \u65f6\uff0c\u4f1a\u76f4\u63a5\u53bb\u8bf7\u6c42\u9519\u8bef\u9875\u9762\uff0c\u4e0d\u4f1a\u6709 302 \u8df3\u8f6c\u8fc7\u7a0b\uff09\u5230\uff1a</p> <pre><code>https://www.example.com/custom/error-page.html\n\n</code></pre> <p>\u4e5f\u5373\u8bf7\u6c42\u7684\u8d44\u6e90\u548c\u81ea\u5b9a\u4e49\u9519\u8bef\u9875\u9762\u5fc5\u987b\u5c5e\u4e8e\u540c\u4e00\u6e90\u7ad9\uff0c\u5e76\u4e14\u5c5e\u4e8e\u540c\u4e00\u52a0\u901f\u57df\u540d\u3002</p> <ul> <li>\u7b2c\u4e09\u6b65</li> </ul> <p>\u5728\u914d\u7f6e\u7ba1\u7406\u754c\u9762\uff0c\u53ef\u4ee5\u7f16\u8f91\u3001\u5220\u9664\u548c\u67e5\u770b\u914d\u7f6e\u89c4\u5219\uff0c\u5982\u4e0b\u56fe\u6240\u793a\uff1a</p> <p></p> <p>\u786e\u4fdd\u914d\u7f6e\u7684\u89c4\u5219\u6ca1\u6709\u95ee\u9898\u4e4b\u540e\uff0c\u70b9\u51fb\u3010\u786e\u5b9a\u3011\u6309\u94ae\u5373\u53ef\u4fdd\u5b58\u914d\u7f6e\u3002</p> <p>\u6ce8\u610f\u4e8b\u9879</p> <ul> <li> <p>\u81ea\u5b9a\u4e49\u9875\u9762\u5c5e\u4e8e\u7528\u6237\u6e90\u7ad9\u6258\u7ba1\u7684\u8d44\u6e90\uff0c\u540c\u5e38\u89c4\u9875\u9762\u548c\u8d44\u6e90\u4e00\u6837\uff0c\u4f1a\u6309\u7167\u6b63\u5e38\u7684 CDN \u52a0\u901f\u5206\u53d1\u8ba1\u8d39\u3002</p> </li> <li> <p>\u81ea\u5b9a\u4e49\u9875\u9762\u7684\u8d44\u6e90\u6240\u7ed1\u5b9a\u7684\u57df\u540d\u5fc5\u987b\u662f\u8bbf\u95ee\u57df\u540d\uff0c\u5426\u5219\u4e0d\u4f1a\u751f\u6548\uff0c\u4e5f\u5373\uff1a\u5f53\u5ba2\u6237\u7aef\u8bf7\u6c42\u4e3a\uff1ahttps://www.example.com/index.html \uff1b\u5f53\u89e6\u53d1\u9632\u76d7\u94fe\u89c4\u5219\u4e4b\u540e\uff0cCDN \u4f1a\u76f4\u63a5\u8fd4\u56de\u8be5\u9875\u9762\uff1ahttps://www.example.com/custom/403.html\u3002\u6b64\u65f6\u5728 CDN \u81ea\u5b9a\u4e49\u9875\u9762\u89c4\u5219\u7684\u54cd\u5e94\u5730\u5740\u9879\u586b\u5199 /custom/403.html \u5373\u53ef\u3002</p> </li> <li> <p>\u5728\u4f18\u5148\u7ea7\u65b9\u9762\uff0c\u81ea\u5b9a\u4e49\u9875\u9762\u7684\u4f18\u5148\u7ea7\u4f1a\u9ad8\u4e8e\u81ea\u5b9a\u4e49\u63d0\u793a\u56fe\u529f\u80fd\u3002</p> </li> <li> <p>\u5f53\u9519\u8bef\u6765\u6e90\u662f CDN \u65f6\uff0c\u6b64\u65f6\u60a8\u7684\u81ea\u5b9a\u4e49\u9875\u9762\u662f HTML \u9875\u9762\uff0c\u9700\u8981\u786e\u4fdd\u8be5\u9875\u9762\u4e3a\u5355\u9875\u9762\uff0c\u5982\u679c\u9700\u8981\u5d4c\u5165\u56fe\u7247\uff0c\u6211\u4eec\u5efa\u8bae\u5c06\u56fe\u7247\u901a\u8fc7  base64 \u7684\u65b9\u5f0f\u5c06 SVG \u56fe\u7247\u5d4c\u5165\u5230 HTML \u7f51\u9875\u4e2d\u3002\u5f53\u7136\uff0c\u60a8\u4e5f\u53ef\u4ee5\u5c06\u56fe\u7247\u7b49\u8d44\u6e90\u4f7f\u7528\u5916\u94fe\u7684\u65b9\u5f0f\u6765\u5d4c\u5165\u3002</p> </li> </ul>"},{"location":"cdn/config/#613","title":"6.13 \u81ea\u5b9a\u4e49\u63d0\u793a\u56fe","text":"<p>\u652f\u6301\u81ea\u5b9a\u4e49\u9519\u8bef\u72b6\u6001\u8bbe\u7f6e\uff0c\u76ee\u524d\u652f\u6301 403\u3001404\u3001405 \u9519\u8bef\u7801\u81ea\u5b9a\u4e49\u63d0\u793a\u56fe\u7684\u8bbe\u7f6e\u3002\u5982\u672a\u8bbe\u7f6e\uff0c\u5219\u9ed8\u8ba4\u9075\u5faa\u53c8\u62cd\u4e91 CDN \u670d\u52a1\u9ed8\u8ba4\u9519\u8bef\u72b6\u6001\u63d0\u793a\u56fe\u3002</p> <p>\u914d\u7f6e\u5f15\u5bfc</p> <p>\u767b\u9646 CDN \u63a7\u5236\u53f0\uff0c\u4f9d\u6b21\u8fdb\u5165\uff1a\u670d\u52a1\u7ba1\u7406 &gt; \u529f\u80fd\u914d\u7f6e &gt; \u8bbf\u95ee\u63a7\u5236  &gt; \u81ea\u5b9a\u4e49\u63d0\u793a\u56fe\uff0c\u5728\u6b64\u680f\u76ee\u4e0b\u53ef\u8fdb\u884c\u76f8\u5e94\u8bbe\u7f6e\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff1a</p> <p></p> <p>403 \u63d0\u793a\u56fe</p> <p>\u5f53\u7528\u6237\u8bbe\u7f6e\u4e86\u4f8b\u5982 IP \u7981\u7528\u3001Referer \u7b49\u9632\u76d7\u94fe\u914d\u7f6e\u5e76\u4e14\u5f53\u524d\u7684\u8bf7\u6c42\u4e0e\u89c4\u5219\u4e0d\u5339\u914d\u65f6\uff0c\u5373\u4f1a\u54cd\u5e94 403 \u7ed9\u5ba2\u6237\u7aef\uff0c\u8868\u793a\u8be5\u6b21\u8bf7\u6c42\u88ab\u7981\u6b62\u3002\u53e6\u5916\uff0c\u82e5\u8be5\u670d\u52a1\u8bbe\u7f6e\u4e86\u81ea\u5b9a\u4e49 403 \u63d0\u793a\u56fe\uff0c\u90a3\u4e48\u6b64\u7c7b\u60c5\u51b5\u4e0b\u5c31\u4f1a\u54cd\u5e94\u4e00\u4e2a 302 \u8df3\u8f6c\u5230\u76f8\u5e94\u7684\u56fe\u7247\u3002</p> <p>404 \u63d0\u793a\u56fe</p> <p>\u5f53\u8bf7\u6c42\u7684\u6587\u4ef6\u4e0d\u5b58\u5728\u65f6\uff0c\u4f1a\u54cd\u5e94 404 \u72b6\u6001\u7801\uff0c\u53ef\u901a\u8fc7\u81ea\u5b9a\u4e49\u63d0\u793a\u56fe\u6765\u5c55\u793a\u3002</p> <p>405 \u63d0\u793a\u56fe</p> <p>\u6b63\u5e38\u4f7f\u7528\u4e2d\u7684\u670d\u52a1\uff0c\u82e5\u88ab\u4eba\u4e3a\u5730\u8bbe\u7f6e\u4e3a\u7981\u6b62\u5916\u94fe\uff0c\u6b64\u65f6\u8bbf\u95ee\u5c31\u4f1a\u54cd\u5e94 405 \u72b6\u6001\u7801\u3002\u540c\u6837\uff0c405 \u4e5f\u652f\u6301\u81ea\u5b9a\u4e49\u63d0\u793a\u56fe\u8bbe\u7f6e\u3002</p> <p>\u6ce8\u610f\u4e8b\u9879</p> <ul> <li> <p>\u82e5\u6b64\u5904\u672a\u8bbe\u7f6e\u4efb\u4f55\u81ea\u5b9a\u4e49\u63d0\u793a\u56fe\uff0cCDN \u670d\u52a1\u4f1a\u9ed8\u8ba4\u54cd\u5e94\u4e00\u4e2a\u9519\u8bef\u72b6\u6001\u7801\u63d0\u793a\u56fe\uff1b</p> </li> <li> <p>\u6b64\u5904\u81ea\u5b9a\u4e49\u63d0\u793a\u56fe\u7684\u6587\u4ef6\u5927\u5c0f\u9650\u5236\u5728 30KB \u4ee5\u5185\uff1b</p> </li> </ul>"},{"location":"cdn/config/#7","title":"7.\u56fe\u7247\u5904\u7406","text":""},{"location":"cdn/config/#71","title":"7.1 \u95f4\u9694\u6807\u8bc6\u7b26","text":"<p>\u529f\u80fd\u8bf4\u660e</p> <p>\u7528\u4e8e\u5206\u9694\u8bbf\u95ee\u5730\u5740\u4e2d\u7684\u6587\u4ef6\u8def\u5f84\u4e0e\u5904\u7406\u53c2\u6570\u3001\u7248\u672c\u540d\u79f0\u3002\u5982\uff1ahttp://abc.b0.upaiyun.com/pic.jpg!hi\uff0c <code>pic.jpg</code> \u4e3a\u6587\u4ef6\u8def\u5f84\uff0c<code>hi</code> \u4e3a\u7248\u672c\u540d\u79f0\uff0c\u6807\u8bc6\u7b26\u53ef\u4e3a\u534a\u89d2\u5b57\u7b26\uff1a\u201c!\u201d\uff0c\u201c-\u201d\uff0c\u201c_\u201d \u4e09\u79cd\uff0c\u53ef\u4ee5\u5728\u7ba1\u7406\u754c\u9762\u4e2d\u8fdb\u884c\u66f4\u6539\u3002</p> <p>\u914d\u7f6e\u5f15\u5bfc</p> <p>\u767b\u9646 CDN \u63a7\u5236\u53f0\uff0c\u4f9d\u6b21\u8fdb\u5165\uff1a\u670d\u52a1\u7ba1\u7406 &gt; \u529f\u80fd\u914d\u7f6e &gt; \u56fe\u7247\u5904\u7406 &gt; \u95f4\u9694\u6807\u8bc6\u7b26\uff0c\u5982\u4e0b\u56fe\u6240\u793a\uff1a</p> <p></p> <p>\u70b9\u51fb\u754c\u9762\u53f3\u8fb9\u7684\u3010\u7ba1\u7406\u3011\u6309\u94ae\u5373\u53ef\u8bbe\u7f6e\uff0c\u8bbe\u7f6e\u754c\u9762\u5982\u4e0b\uff1a</p> <p></p> <p>\u5728\u8be5\u914d\u7f6e\u754c\u9762\uff0c\u53ef\u4ee5\u9009\u62e9\u611f\u53f9\u53f7\uff08!\uff09\u3001\u4e2d\u5212\u7ebf\uff08-\uff09\u3001\u4e0b\u5212\u7ebf\uff08_\uff09\u4f5c\u4e3a\u95f4\u9694\u6807\u8bc6\u7b26\uff0c\u9ed8\u8ba4\u4e3a\u611f\u53f9\u53f7\uff08!\uff09\u3002</p> <p>\u6ce8\u610f\u4e8b\u9879</p> <ul> <li> <p>\u66f4\u6362\u95f4\u9694\u6807\u5fd7\u7b26\u540e\uff0c\u4e4b\u524d\u81ea\u5b9a\u4e49\u7248\u672c\u7684\u8bbf\u95ee\u5730\u5740\u90fd\u5c06\u5931\u6548\uff0c\u9700\u8981\u4f7f\u7528\u65b0\u8bbe\u7f6e\u7684\u95f4\u9694\u6807\u5fd7\u7b26\u624d\u80fd\u4fdd\u8bc1\u6b63\u5e38\u8bbf\u95ee\uff1b</p> </li> <li> <p>\u4e3a\u907f\u514d\u81ea\u5b9a\u4e49\u7248\u672c\u8bbf\u95ee\u51fa\u9519\uff0c\u9009\u62e9\u7684\u95f4\u9694\u6807\u8bc6\u7b26\u4e0d\u80fd\u7528\u4e8e\u6587\u4ef6\u6216\u76ee\u5f55\u540d\u4e2d\u3002</p> </li> </ul>"},{"location":"cdn/config/#72","title":"7.2 \u81ea\u5b9a\u4e49\u7248\u672c","text":"<p>\u529f\u80fd\u8bf4\u660e</p> <p>\u9488\u5bf9\u4f7f\u7528 CDN \u670d\u52a1\u6216\u8005\u4e91\u5b58\u50a8\u670d\u52a1\u7684\u7528\u6237\uff0c\u53ef\u4ee5\u4f7f\u7528\u81ea\u5b9a\u4e49\u7248\u672c\u4f5c\u56fe\uff0c\u5177\u4f53\u4f7f\u7528\u683c\u5f0f\u53c2\u89c1\u5982\u4e0b\u8868\u683c\u3002</p> <pre><code>\u9ed8\u8ba4\u7ed1\u5b9a\u57df\u540d\uff1aimage.upyun.com\n\u539f\u56fe\u8def\u5f84\uff1a/pic.jpg\n\u95f4\u9694\u6807\u8bc6\u7b26\uff1a!\n\u7f29\u7565\u56fe\u7248\u672c\u540d\u79f0\uff1asmall\n\u56fe\u7247\u4fe1\u606f\u7248\u672c\u540d\u79f0\uff1aexif\n\u7f29\u7565\u56fe\u8bbf\u95ee\u5730\u5740\uff1ahttp://image.upyun.com/pic.jpg!small\n\u539f\u56fe EXIF \u4fe1\u606f\u8bbf\u95ee\u5730\u5740\uff1ahttp://image.upyun.com/pic.jpg!exif\n\n</code></pre> <p>\u81ea\u5b9a\u4e49\u7248\u672c\u4f7f\u7528\u683c\u5f0f\uff1a</p> <pre><code>\nhttp://\u7ed1\u5b9a\u57df\u540d/\u539f\u56fe\u8def\u5f84+\u95f4\u9694\u6807\u8bc6\u7b26+\u81ea\u5b9a\u4e49\u7248\u672c\u540d\u79f0\u3002\n\n</code></pre> <p>\u8be6\u7ec6\u4ecb\u7ecd\u53c2\u89c1\u56fe\u7247\u5904\u7406\u3002</p> <p>\u914d\u7f6e\u5f15\u5bfc</p> <p>\u767b\u9646 CDN \u63a7\u5236\u53f0\uff0c\u4f9d\u6b21\u8fdb\u5165\uff1a\u670d\u52a1\u7ba1\u7406 &gt; \u529f\u80fd\u914d\u7f6e &gt; \u56fe\u7247\u5904\u7406 &gt; \u81ea\u5b9a\u4e49\u7248\u672c\uff0c\u5728\u6b64\u680f\u76ee\u4e0b\u53ef\u8fdb\u884c\u76f8\u5e94\u8bbe\u7f6e\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff1a</p> <p></p> <p>1.\u521b\u5efa\u7f29\u7565\u56fe\u7248\u672c</p> <p>\u521b\u5efa\u7f29\u7565\u56fe\u7248\u672c\uff0c\u586b\u5199\u57fa\u672c\u4fe1\u606f\u3002</p> <p></p> <p>\u6839\u636e\u8981\u6c42\uff0c\u8bbe\u7f6e\u6c34\u5370\u53c2\u6570\uff0c\u5982\u4e0b\u56fe\u6240\u793a\uff1a</p> <p></p> <p>\u6839\u636e\u8981\u6c42\uff0c\u8bbe\u7f6e\u8f93\u51fa\u4fe1\u606f\uff0c\u5982\u4e0b\u56fe\u6240\u793a\uff1a</p> <p></p> <p>\u6700\u7ec8\u7684\u8bbf\u95ee URL \u53ef\u4e3a\uff1a</p> <pre><code>http://test.example.com/test.jpg!upyun123\n</code></pre> <p>\u5176\u4e2d <code>upyun123</code> \u4e3a\u81ea\u5b9a\u4e49\u7248\u672c\u3002</p> <p>2.\u521b\u5efa\u56fe\u7247\u4fe1\u606f\u7248\u672c</p> <p>\u56fe\u7247\u4fe1\u606f\u7248\u672c\u5185\u5bb9\u5305\u62ec\uff1a\u56fe\u7247\u57fa\u672c\u4fe1\u606f\uff08\u56fe\u7247\u5bbd\u5ea6\u3001\u9ad8\u5ea6\u3001\u5e27\u6570\u3001\u683c\u5f0f\uff09\u548c EXIF \u4fe1\u606f\uff0c\u5177\u4f53\u8bbe\u7f6e\u53c2\u89c1\u4e0b\u56fe\uff1a</p> <p></p> <p>\u586b\u5199\u7248\u672c\u540d\u79f0\uff0c\u70b9\u51fb\u53f3\u4e0b\u89d2\u7684\u3010\u786e\u5b9a\u3011\u6309\u94ae\u5373\u53ef\u3002</p>"},{"location":"cdn/config/#8","title":"8.\u5176\u4ed6\u529f\u80fd","text":""},{"location":"cdn/config/#81","title":"8.1 \u6587\u4ef6\u53e6\u5b58\u4e3a","text":"<p>\u529f\u80fd\u8bf4\u660e</p> <p>\u53c8\u62cd\u4e91 CDN \u670d\u52a1\u652f\u6301\u5bf9\u54cd\u5e94\u5934 <code>Content-Disposition</code> \u5b57\u6bb5\u7684\u7279\u6b8a\u8bbe\u7f6e\uff0c\u4e5f\u5373\u5728\u8bf7\u6c42 URL \u4e2d\u52a0\u5165 <code>_upd</code> \u53c2\u6570\u53ef\u5bf9 <code>Content-Disposition</code> \u8fdb\u884c\u7279\u6b8a\u5316\u914d\u7f6e\u3002\u901a\u8fc7\u5bf9\u8be5\u53c2\u6570\u7684\u914d\u7f6e\u5c31\u53ef\u4ee5\u5f3a\u5236\u6d4f\u89c8\u5668\u89e6\u53d1\u4e0b\u8f7d\u884c\u4e3a\uff0c\u540c\u65f6\u8be5\u53c2\u6570\u7684\u503c\u4f1a\u4f5c\u4e3a\u6587\u4ef6\u4e0b\u8f7d\u540e\u4fdd\u5b58\u5230\u672c\u5730\u7684\u6587\u4ef6\u540d\u3002\u7279\u522b\u5730\uff0c\u5f53\u5176\u503c\u4e3a <code>true</code> \u65f6\uff0c\u4fdd\u6301\u539f\u6587\u4ef6\u540d\u4e0d\u53d8\u3002</p> <p>\u5982\u4f55\u4f7f\u7528</p> <p>\u793a\u4f8b\u4e00\uff1a</p> <pre><code>\u8bf7\u6c42\u53c2\u6570\u4e2d\u52a0\u5165 \u201c_upd=true\u201d \uff0c\u4ee3\u8868\u6dfb\u52a0\u54cd\u5e94\u5934\u4e3a\uff1a Content-Disposition: attachment\n</code></pre> <pre><code>$ curl http://upyun-assets.b0.upaiyun.com/docs/cdn/upyun-cdn-architecture.png?_upd=true -I\n\n&gt; HTTP/1.1 200 OK\n&gt; Content-Type: image/png\n&gt; Content-Length: 57371\n&gt; ...\n&gt; Accept-Ranges: bytes\n&gt; Content-Disposition: attachment;\n\n</code></pre> <p>\u793a\u4f8b\u4e00\uff1a</p> <pre><code>\u8bf7\u6c42\u53c2\u6570\u4e2d\u52a0\u5165 \u201c_upd=abc.png\u201d\uff0c\u4ee3\u8868\u6dfb\u52a0\u54cd\u5e94\u5934\u4e3a\uff1a Content-Disposition: attachment; filename=\"abc.png\"\n</code></pre> <pre><code>$ curl http://upyun-assets.b0.upaiyun.com/docs/cdn/upyun-cdn-architecture.png?_upd=abc.png -I\n\n&gt; HTTP/1.1 200 OK\n&gt; Content-Type: image/png\n&gt; Content-Length: 57371\n&gt; ...\n&gt; Accept-Ranges: bytes\n&gt; Content-Disposition: attachment; filename=\"abc.png\"\n\n</code></pre> <p>\u6ce8\u610f\u4e8b\u9879</p> <p>\u7279\u522b\u5730\uff0c <code>\u53c2\u6570\u8ddf\u968f</code> \u5f00\u542f\u7684\u60c5\u51b5\u4e0b\uff0c\u6b64\u53c2\u6570\u65e0\u6548\u3002</p>"},{"location":"cdn/config/#82-ip","title":"8.2 \u4f20\u9012\u6700\u7ec8\u7528\u6237 IP","text":"<p>\u529f\u80fd\u8bf4\u660e</p> <p>\u53c8\u62cd\u4e91 CDN \u56de\u5ba2\u6237\u6e90\u7684\u65f6\u5019\u4f1a\u5e26\u4e0a <code>X-Real-IP</code> \u548c <code>X-Forwarded-For</code> \u7684\u8bf7\u6c42\u5934\u4e0b\u53bb\uff0c\u503c\u4e3a\u7528\u6237\u5b9e\u9645\u8bbf\u95ee CDN \u7684\u6765\u6e90 IP \u5730\u5740\u3002\u7279\u522b\u5730\uff0c\u4e3a\u4e86\u517c\u5bb9\u90e8\u5206\u670d\u52a1\u7aef\u7a0b\u5e8f\uff0c\u6211\u4eec\u989d\u5916\u8fd8\u63d0\u4f9b\u4e86 <code>Client-IP</code> \u8bf7\u6c42\u5934\u7684\u652f\u6301\uff0c\u5176\u503c\u548c <code>X-Real-IP</code>\u3001<code>X-Forwarded-For</code> \u76f8\u540c\u3002</p> <p>\u5982\u4f55\u4f7f\u7528</p> <p>1\u3001X-Real-IP \u4f20\u9012\u7528\u6237 IP</p> <p>\u4f7f\u7528\u8be5\u65b9\u5f0f\u4f20\u9012\u6700\u7ec8\u7528\u6237 IP \uff0c\u9700\u8981\u670d\u52a1\u7aef\u4ee3\u7801\u8fdb\u884c\u4e00\u4e9b\u6539\u9020\uff0c\u7f51\u7ad9\u9700\u8981\u6839\u636e\u4f7f\u7528\u7f16\u7a0b\u8bed\u8a00\u7684\u4e0d\u540c\uff0c\u4fee\u6539\u76f8\u5e94\u7684\u4ee3\u7801\u6a21\u5757\uff0c\u624d\u53ef\u4ee5\u4f20\u9012\u6700\u7ec8\u7528\u6237 IP\u3002\u4ee3\u7801\u793a\u4f8b\u5982\u4e0b\uff1a</p> <p>\u793a\u4f8b\u4e00\uff1aPHP \u4ee3\u7801\u00b6</p> <pre><code> &lt;?php\n        $ip = $_SERVER[\"HTTP_X_REAL_IP\"];\n        echo $ip;\n ?&gt;\n</code></pre> <p>\u793a\u4f8b\u4e8c\uff1a Nginx \u914d\u7f6e\u00b6</p> <pre><code>server\n    {\n        listen 80;\n        add_header X-Real-IP $http_x_real_ip;\n    }\n</code></pre> <p>2\u3001X-Forward-For \u4f20\u9012\u7528\u6237 IP</p> <p>\u56de\u6e90\u8bf7\u6c42\u5934\u4f1a\u9ed8\u8ba4\u4f20\u9012 <code>X-Forwarded-For</code> \u7684\u503c\uff0c\u7528\u6237\u7f51\u7ad9\u65e0\u9700\u4efb\u4f55\u6539\u9020\u3002</p> <p>\u6ce8\u610f\u4e8b\u9879</p> <p>1\u3001\u65b0\u589e\u52a0\u901f\u670d\u52a1\u65f6\u6211\u4eec\u4f1a\u9ed8\u8ba4\u4f7f\u7528 <code>X-Real-IP</code> \u548c <code>X-Forwarded-For</code> \u65b9\u5f0f\uff0c\u7f51\u7ad9\u53ea\u9700\u8981\u6309\u7167 \u201c\u5982\u4f55\u4f7f\u7528\u201d \u7ae0\u8282\u4e2d\uff0c\u5bf9\u539f\u5148\u7684\u7528\u6237 IP \u83b7\u53d6\u4ee3\u7801\u8fdb\u884c\u66ff\u6362\u5373\u53ef\uff1b</p> <p>2\u3001\u7531\u4e8e <code>X-Real-IP</code>  \u662f\u53c8\u62cd\u4e91 CDN \u670d\u52a1\u7279\u6709\u7684\u56de\u6e90\u8bf7\u6c42\u5934 \uff0c\u6545\u7ec8\u6b62 CDN \u540e\uff0c\u7f51\u7ad9\u9700\u5c06\u83b7\u53d6\u7528\u6237 IP \u7684\u4ee3\u7801\u4fee\u6539\u4e3a\u539f\u59cb\u4ee3\u7801\uff1b</p> <p>3\u3001\u5728\u9009\u62e9\u4f7f\u7528 <code>X-Forwarded-For</code> \u8fdb\u884c\u6700\u7ec8\u7528\u6237 IP \u4f20\u9012\u65f6  \uff0c<code>X-Real-IP</code>\u3001<code>Client-IP</code>\u4e5f\u662f\u540c\u65f6\u4f20\u9012\u7684\uff1b</p>"},{"location":"cdn/config/#9","title":"9.\u9ed8\u8ba4\u9519\u8bef\u7801","text":"<p>\u9ed8\u8ba4\u9519\u8bef\u7801\u4ecb\u7ecd</p> <p>\u9488\u5bf9\u9519\u8bef\u72b6\u6001\uff08\u8fd9\u91cc\u7279\u6307 CDN \u4e1a\u52a1\u7aef\u4ee5\u53ca\u56de\u6e90\u7ad9\u76f8\u5173\u9519\u8bef\uff09\uff0cCDN \u9ed8\u8ba4\u8fd4\u56de JSON \u4e32\u7684\u5f62\u5f0f\uff0c\u683c\u5f0f\u4e3a\uff1a</p> <pre><code>\n{\n    \"code\": \"xxxxxxxx\",\n    \"msg\": \"xxxxxxxxxxxxxxx\"\n}\n\n</code></pre> <p>\u5176\u4e2d <code>code</code>  \u4ee3\u8868\u9519\u8bef\u7801\uff0c\u4e3a 8 \u4f4d\u6570\u5b57\u7ec4\u6210\uff0c\u4f8b\u5982\uff1a<code>40310012</code> \u4ee3\u8868\u89e6\u53d1\u4e86 IP \u9ed1\u540d\u5355\u89c4\u5219\uff1b<code>msg</code>  \u4ee3\u8868\u9519\u8bef\u63cf\u8ff0\uff0c\u4f8b\u5982\uff1a<code>remote address is forbidden</code> \uff0c\u4e5f\u5373\u5ba2\u6237\u7aef IP \u88ab\u7981\u6b62\u8bbf\u95ee\u3002\u60a8\u53ef\u4ee5\u6839\u636e CDN \u8fd4\u56de\u7684\u9519\u8bef\u7801\u548c\u63cf\u8ff0\u6765\u5224\u65ad\u89e6\u53d1\u4e86\u4f55\u79cd\u89c4\u5219\uff0c\u8fdb\u800c\u66f4\u65b9\u4fbf\u7684\u5b9a\u4f4d\u95ee\u9898\u3002</p> <p>\u9ed8\u8ba4\u9519\u8bef\u7801\u4e00\u89c8\u8868</p> <p>\u73b0\u5c06 CDN \u5e73\u53f0\u90e8\u5206\u53ef\u5f00\u653e\u7684\u9519\u8bef\u7801\u8fdb\u884c\u5982\u4e0b\u5f52\u7c7b\uff1a</p> <p>1.\u8bbf\u95ee\u63a7\u5236\u76f8\u5173</p> \u5e8f\u53f7 \u9519\u8bef\u7801\uff08code\uff09 \u9519\u8bef\u63cf\u8ff0(msg) \u53d1\u751f\u4e86\u4ec0\u4e48 1 40310001 invalid url URL  \u88ab\u7981\u6b62\u8bbf\u95ee 2 40310002 region is forbidden \u89e6\u53d1\u4e86\u5730\u533a\u8bbf\u95ee\u9650\u5236\u89c4\u5219 3 40310003 too many requests \u89e6\u53d1\u4e86 IP \u9891\u7387\u9650\u5236\u89c4\u5219 4 40310011 invalid User-Agent header \u89e6\u53d1\u4e86 User-Agent \u9632\u76d7\u94fe\u89c4\u5219 5 40310012 remote address is forbidden \u89e6\u53d1\u4e86 IP \u9ed1\u767d\u540d\u5355\u89c4\u5219 6 40310013 invalid user token \u89e6\u53d1\u4e86 Token \u9632\u76d7\u94fe\u89c4\u5219 7 40310014 invalid Referer header \u89e6\u53d1\u4e86 Referer \u9632\u76d7\u94fe\u89c4\u5219 8 40310015 referer uri is forbidden \u89e6\u53d1\u4e86 Referer URI \u9632\u76d7\u94fe\u89c4\u5219 9 40310020 invalid authentication response body \u9274\u6743\u670d\u52a1\u5668\u8fd4\u56de\u7684 body \u5185\u5bb9\u4e0d\u5408\u6cd5\uff0c\u5bfc\u81f4\u9274\u6743\u5931\u8d25 10 40310021 invalid authentication response status \u9274\u6743\u670d\u52a1\u5668\u8fd4\u56de\u7684\u72b6\u6001\u7801\u4e0d\u5408\u6cd5\uff0c\u5bfc\u81f4\u9274\u6743\u5931\u8d25 11 40310022 cyclic authentication requests \u9274\u6743\u670d\u52a1\u5668\u5730\u5740\u5728\u53c8\u62cd\u4e91\u8fdb\u884c\u4e86 CDN \u52a0\u901f\uff0c\u5bfc\u81f4\u4e86\u5faa\u73af\u8bf7\u6c42 12 50310020 authentication service unavailable \u9274\u6743\u670d\u52a1\u5668\u4e0d\u53ef\u7528 13 40110910 authentication fails \u56de\u6e90\u9274\u6743\u5931\u8d25 14 40310006 (api) request body too large \u901a\u8fc7 API \u63a5\u53e3\u4e0a\u4f20\u7684\u6587\u4ef6 body \u592a\u5927 15 41310001 request body too large \u8bf7\u6c42\u7684 body \u5927\u5c0f\u8d85\u8fc7\u9650\u5236 16 40010030 multiple Content-Type header \u89e6\u53d1\u4e86 WAF \u89c4\u5219\uff0c\u8bf7\u6c42\u5934\u4e2d\u542b\u6709\u591a\u4e2a Content-Type \u5934\u90e8 17 40310031 too large form \u89e6\u53d1\u4e86 WAF \u89c4\u5219\uff0cform \u8868\u5355\u592a\u5927 18 40310032 waf protection rules triggered \u89e6\u53d1\u4e86 WAF \u89c4\u5219 19 xxx10999 edge rule triggered \u89e6\u53d1\u8fb9\u7f18\u89c4\u5219\uff0cxxx \u7279\u6307\u72b6\u6001\u7801 20 40510004 invisible domain \u57df\u540d\u89e6\u53d1\u4e86\u654f\u611f\u4fe1\u606f\u88ab\u7981\u6b62\u8bbf\u95ee <p>2.HTTP \u53ca\u5e73\u53f0\u89c4\u8303\u76f8\u5173</p> \u5e8f\u53f7 \u9519\u8bef\u7801\uff08code\uff09 \u9519\u8bef\u63cf\u8ff0(msg) \u53d1\u751f 1 41610001 multiple Range header \u591a\u4e2a Range \u5934 2 41610002 multiple sections in Range header Range \u8bf7\u6c42\u4e2d\u5b58\u5728\u591a\u6bb5\u8bf7\u6c42\u8303\u56f4 3 41610003 illegal range portion Range \u8bf7\u6c42\u8303\u56f4\u975e\u6cd5 4 40010040 absent Host header \u8bf7\u6c42\u4e2d\u7f3a\u5c11 Host \u5934\u90e8\uff0c\u8fd4\u56de\u5de5\u4fe1\u90e8\u9519\u8bef\u9875\u9762 5 40010041 bucket not found \u672a\u7ed1\u5b9a\u52a0\u901f\u57df\u540d\u6216\u8005\u670d\u52a1\u4e0d\u5b58\u5728\uff0c\u8fd4\u56de\u5de5\u4fe1\u90e8\u9519\u8bef\u9875\u9762 6 40510001 invisible bucket \u670d\u52a1\uff08\u7a7a\u95f4\uff09\u4e3a\u5173\u95ed\u72b6\u6001 7 41210001 last-modified or Etag illegal Last-Modified \u5934\u90e8\u6216\u8005 ETag \u5934\u90e8\u975e\u6cd5 8 40310007 cyclic request \u89e6\u53d1\u4e86\u5faa\u73af\u8bf7\u6c42\u9650\u5236\u7b56\u7565 9 50310000 unknown error \u5176\u4ed6\u672a\u77e5\u7684\u9519\u8bef <p>3.\u5e38\u89c1\u56de\u6e90\u9519\u8bef</p> \u5e8f\u53f7 \u9519\u8bef\u7801\uff08code\uff09 \u9519\u8bef\u63cf\u8ff0(msg) \u53d1\u751f\u4e86\u4ec0\u4e48 1 403xx002 response body too large \u56de\u6e90\u54cd\u5e94\u4f53\u592a\u5927 2 502xx001 no valid source address \u6ca1\u6709\u5408\u6cd5\u7684\u56de\u6e90\u5730\u5740 3 502xx002 can't connect to upyun fs \u65e0\u6cd5\u8fde\u63a5 upyun \u5b58\u50a8 4 503xx001 resolve domain failed \u57df\u540d\u89e3\u6790\u9519\u8bef 5 503xx002 resolve domain timeout \u57df\u540d\u89e3\u6790\u8d85\u65f6 6 503xx004 connection refused \u8fde\u63a5\u88ab\u62d2\u7edd 7 503xx005 connection reset by peer \u8fde\u63a5\u88ab\u6e90\u7ad9\u91cd\u7f6e 8 503xx006 handshake failed \u63e1\u624b\u5931\u8d25 9 503xx007 client abort \u5ba2\u6237\u7aef\u53d6\u6d88\u8fde\u63a5 10 503xx008 closed \u8fde\u63a5\u88ab\u5173\u95ed 11 503xx009 broken pipe \u8bfb\u53d6\u6570\u636e\u51fa\u73b0\u95ee\u9898 12 503xx010 unexpect end of stream \u672a\u77e5\u7684\u6e90\u7ad9\u54cd\u5e94\u7ed3\u675f 13 503xx015 certificate host mismatch SSL \u8bc1\u4e66\u5934\u4e0d\u5339\u914d 14 503xx016 self signed certificate SSL \u8bc1\u4e66\u4e3a\u81ea\u7b7e\u540d\u8bc1\u4e66 15 503xx017 certificate has expired SSL \u8bc1\u4e66\u8fc7\u671f 16 504xx001 connection timed out \u56de\u6e90\u8fde\u63a5\u8d85\u65f6 17 504xx002 connection timeout \u8fde\u63a5\u8d85\u65f6 18 504xx003 read timeout \u8bfb\u53d6\u6570\u636e\u8d85\u65f6 19 504xx004 send timeout \u53d1\u9001\u8bf7\u6c42\u8d85\u65f6 <p>\u5176\u4e2d <code>xx</code> \u53ef\u80fd\u662f <code>00</code>\u3001<code>01</code>\u3001<code>02</code>\u3001<code>03</code>\u3001<code>04</code>\u3002<code>00</code> \u8868\u793a <code>UNKNOWN</code>\uff0c<code>01</code> \u8868\u793a\u53c8\u62cd\u4e91\u5b58\u50a8\uff0c<code>02</code> \u8868\u793a\u7528\u6237\u81ea\u4e3b\u6e90\uff0c<code>03</code> \u8868\u793a <code>CDN \u4ee3\u7406\u5c42</code>\uff0c<code>04</code> \u8868\u793a <code>\u4f5c\u56fe\u670d\u52a1</code>\u3002</p> <p>\u5982\u4f55\u8fa8\u522b</p> <p>\u65b9\u5f0f\u4e00</p> <p>\u5982\u679c\u60a8\u901a\u8fc7\u6d4f\u89c8\u5668\u8bbf\u95ee\uff0c\u60a8\u53ef\u4ee5\u901a\u8fc7\u6d4f\u89c8\u5668\u9875\u9762\u67e5\u770b\u5230\u4e00\u6bb5\u9519\u8bef\u4ee3\u7801\uff0c\u4f8b\u5982\uff1a</p> <pre><code>{\"code\":\"40310002\",\"msg\":\"region is forbidden\"}\n</code></pre> <p>\u5982\u4e0a\u9519\u8bef\u4ee3\u7801\u53ca\u63cf\u8ff0\u5219\u8bf4\u660e\u7528\u6237\u5728 CDN \u4fa7\u914d\u7f6e\u4e86\u5730\u533a\u8bbf\u95ee\u9650\u5236\u7b56\u7565\u3002</p> <p>\u65b9\u5f0f\u4e8c</p> <p>\u901a\u8fc7 curl \u547d\u4ee4\u53ef\u4ee5\u770b\u5230 <code>X-Error-Code</code>\u54cd\u5e94\u5b57\u6bb5\uff0c\u5219\u53ef\u4ee5\u770b\u51fa\u89e6\u53d1\u4e86\u4f55\u79cd\u9519\u8bef\u3002</p> <pre><code>\n&lt; HTTP/1.1 403 Forbidden\n&lt; Server: marco/2.2\n&lt; Date: Fri, 18 May 2018 06:39:47 GMT\n&lt; Content-Type: application/json\n&lt; Connection: keep-alive\n&lt; X-Error-Code: 40310002\n&lt; X-Request-Id: 6b947a5e14a252909acab1e55df121c2\n&lt; Content-Length: 47\n&lt; Via: M.pcw-cn-hkg-166\n</code></pre> <p>\u901a\u8fc7\u67e5\u770b <code>X-Error-Code: 40310002</code>\uff0c\u53ef\u4ee5\u770b\u51fa\u89e6\u53d1\u4e86\u5730\u533a\u8bbf\u95ee\u9650\u5236\u89c4\u5219\u3002</p>"},{"location":"cdn/edgerules/","title":"\u8fb9\u7f18\u89c4\u5219","text":""},{"location":"cdn/edgerules/#_1","title":"\u529f\u80fd\u6982\u8ff0","text":"<p>\u53c8\u62cd\u4e91 CDN \u8fb9\u7f18\u7f51\u7edc\u4e2d\u7684\u667a\u80fd\u53ef\u6269\u5c55\u5e94\u7528\u7a0b\u5e8f\u89c4\u5219\u53ef\u4ee5\u5e2e\u52a9\u60a8\u7b80\u5316\u5185\u5bb9\u5206\u53d1\u4e1a\u52a1\u903b\u8f91\uff0c\u5e76\u63d0\u5347\u7ec8\u7aef\u7528\u6237\u8bbf\u95ee\u4f53\u9a8c\u3002\u8be5\u89c4\u5219\u53ef\u4ee5\u5feb\u901f\u90e8\u7f72\u4e14\u914d\u7f6e\u7b80\u5355\uff0c\u53ef\u6781\u5927\u964d\u4f4e\u4e1a\u52a1\u5b9e\u73b0\u6210\u672c\u3002\u7f51\u7ad9\u53ca Web \u5e94\u7528\u5f00\u53d1\u8005\u6216\u8005\u5b89\u5168\u5de5\u7a0b\u5e08\u53ef\u4ee5\u5feb\u901f\u521b\u5efa\u8fb9\u7f18\u89c4\u5219\u96c6\u6765\u63d0\u5347\u7f51\u7ad9\u5b89\u5168\u53ca\u5206\u53d1\u6027\u80fd\u3002\u4f8b\u5982\uff0c\u8fd9\u4e9b\u573a\u666f\u53ef\u80fd\u5305\u62ec\uff1a</p> <ul> <li>\u901a\u8fc7 URL \u6539\u5199\uff0c\u53ef\u7f8e\u5316\u7f51\u7ad9 URL\uff0c\u63d0\u5347\u7f51\u7ad9 SEO</li> <li>\u4e3a\u4e86\u8282\u7701\u66f4\u591a\u8bbf\u95ee\u5e26\u5bbd\uff0c\u9650\u5236\u7f51\u7ad9\u8bf7\u6c42\u4e0b\u8f7d\u901f\u5ea6</li> <li>\u63a7\u5236\u8bf7\u6c42 URL \u7684\u7ed3\u6784\u3001HTTP \u5934\u57df\u7b49</li> <li>\u81ea\u5b9a\u4e49\u6e90\u7ad9\u9519\u8bef\u9875\u9762\uff0c\u63d0\u5347\u7ec8\u7aef\u7528\u6237\u4f53\u9a8c</li> <li>\u9650\u5236\u7279\u5b9a\u5ba2\u6237\u7aef\u7684\u8bbf\u95ee\u884c\u4e3a\uff0c\u5408\u7406\u8fdb\u884c\u8bbf\u95ee\u63a7\u5236\uff1b</li> </ul> <p>\u60a8\u53ef\u4ee5\u6839\u636e\u5b9e\u9645\u4f7f\u7528\u573a\u666f\uff0c\u5408\u7406\u9009\u62e9\u529f\u80fd\u9879\u3002</p>"},{"location":"cdn/edgerules/#_2","title":"\u4f7f\u7528\u65b9\u5f0f","text":"<p>EdgeRules \u6839\u636e\u4e0d\u540c\u7528\u6237\u80cc\u666f\u5212\u5206\u4e86\u4e24\u79cd\u4e0d\u540c\u7684\u4f7f\u7528\u65b9\u5f0f\uff0c\u4e00\u79cd\u662f\u901a\u7528\u6a21\u5f0f\uff0c\u4e00\u79cd\u662f\u7f16\u7a0b\u6a21\u5f0f\u3002</p> <p>1\uff09\u901a\u7528\u6a21\u5f0f\uff1a\u9002\u7528\u4e8e\u6ca1\u6709\u5f00\u53d1\u57fa\u7840\u7684\u7528\u6237\u4e14\u5bf9\u53c8\u62cd\u4e91 EdgeRules \u8bed\u6cd5\u89c4\u5219\u4e0d\u719f\u6089\uff0c\u8be5\u6a21\u5f0f\u4f7f\u7528\u65b9\u4fbf\u5feb\u6377\uff0c\u7528\u6237\u4f53\u9a8c\u4f1a\u66f4\u597d\u4e00\u4e9b\uff0c\u53c2\u8003\u5982\u4e0b\u622a\u56fe\uff1a</p> <p></p> <p>2\uff09\u7f16\u7a0b\u6a21\u5f0f\uff1a\u9002\u7528\u4e8e\u5f00\u53d1\u8005\uff0c\u5bf9 EdgeRules \u8bed\u6cd5\u89c4\u5219\u6709\u5f88\u6df1\u4e86\u89e3\u7684\u7528\u6237\uff0c\u76f8\u5bf9\u901a\u7528\u6a21\u5f0f\u6765\u8bf4\uff0c\u7f16\u7a0b\u6a21\u5f0f\u4f1a\u66f4\u7075\u6d3b\uff0c\u529f\u80fd\u4f1a\u66f4\u5f3a\u5927\u4e00\u4e9b\u3002\u53c2\u7167\u5982\u4e0b\u622a\u56fe\uff1a</p> <p></p>"},{"location":"cdn/edgerules/#_3","title":"\u6761\u4ef6\u5224\u65ad","text":"<p>\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0cEdgeRules \u662f\u6839\u636e\u670d\u52a1\u7ef4\u5ea6\u751f\u6548\u7684\uff0c\u60a8\u4e5f\u53ef\u4ee5\u6dfb\u52a0\u6761\u4ef6\u5224\u65ad\uff0c\u5f53\u6761\u4ef6\u6ee1\u8db3\u67d0\u4e9b\u7279\u5b9a\u8981\u6c42\u65f6\uff0c\u624d\u4f1a\u89e6\u53d1\u540e\u9762\u7684\u529f\u80fd\u9009\u9879\u3002\u4f8b\u5982\uff1a</p> <p>\u5f53\u8bf7\u6c42 HOST \u4e3a test.example.com \u65f6\uff0c\u6dfb\u52a0 HTTP \u54cd\u5e94\u5934 CDN \u4e3a UPYUN\u3002</p> <p>\u8fd9\u4e9b\u6761\u4ef6\u8fc7\u6ee4\u5668\u5305\u62ec\uff1a</p> <ul> <li>\u8bf7\u6c42 URI</li> <li>HTTP \u8bf7\u6c42\u5934</li> <li>\u8bf7\u6c42\u65b9\u6cd5</li> <li>\u8bf7\u6c42\u534f\u8bae</li> <li>\u8bf7\u6c42\u53c2\u6570</li> <li>\u67e5\u8be2\u5b57\u7b26\u4e32</li> <li>POST \u53c2\u6570</li> <li>Cookie \u53d8\u91cf</li> <li>\u5ba2\u6237\u7aef IP </li> <li>\u56fd\u5bb6</li> </ul> <p>\u4e3a\u4e86\u914d\u5408\u6761\u4ef6\u5224\u65ad\u4f7f\u7528\uff0c\u652f\u6301\u7684\u8fd0\u7b97\u7b26\u5305\u62ec\uff1a</p> <ul> <li>\u7b49\u4e8e</li> <li>\u4e0d\u7b49\u4e8e</li> <li>\u6b63\u5219\u5339\u914d</li> <li>\u6b63\u5219\u4e0d\u5339\u914d</li> <li>\u6b63\u5219\u5339\u914d\uff08\u4e0d\u533a\u5206\u5927\u5c0f\u5199\uff09</li> <li>\u6b63\u5219\u4e0d\u5339\u914d\uff08\u4e0d\u533a\u5206\u5927\u5c0f\u5199\uff09</li> </ul> <p>\u5982\u5e0c\u671b\u901a\u8fc7\u7f16\u7a0b\u6a21\u5f0f\u6765\u4f7f\u7528\u53d8\u91cf\uff0c\u66f4\u591a\u4e86\u89e3\u8bf7\u53c2\u8003\u8bed\u6cd5\u89c4\u5219\u7ae0\u8282 \u53d8\u91cf \u53ca \u51fd\u6570 \u7684\u4ecb\u7ecd\u3002</p>"},{"location":"cdn/edgerules/#_4","title":"\u529f\u80fd\u9009\u62e9","text":"<p>\u6839\u636e\u4f7f\u7528\u573a\u666f\uff0c\u6211\u4eec\u9488\u5bf9\u3010\u901a\u7528\u6a21\u5f0f\u3011\u914d\u5907\u4e86 7 \u5927\u529f\u80fd\uff0c\u5177\u4f53\u529f\u80fd\u5217\u8868\u5305\u62ec\uff1a</p> <ul> <li>\u6dfb\u52a0 HTTP \u5934\u90e8\uff08\u5305\u62ec\u8bf7\u6c42\u5934\u548c\u54cd\u5e94\u5934\uff09</li> <li>\u5220\u9664 HTTP \u5934\u90e8\uff08\u5305\u62ec\u8bf7\u6c42\u5934\u548c\u54cd\u5e94\u5934\uff09</li> <li>\u8fb9\u7f18\u91cd\u5b9a\u5411</li> <li>URL \u6539\u5199</li> <li>\u8bf7\u6c42\u9650\u901f</li> <li>\u8bbf\u95ee\u63a7\u5236</li> <li>\u81ea\u5b9a\u4e49\u9519\u8bef\u9875\u9762</li> </ul>"},{"location":"cdn/edgerules/#_5","title":"\u5176\u4ed6\u9009\u9879","text":"<p>\u4f18\u5148\u7ea7</p> <p>\u53c8\u62cd\u4e91 EdgeRules \u9ed8\u8ba4\u662f\u6309\u7167\u5148\u540e\u987a\u5e8f\u6267\u884c\u7684\u3002\u7406\u8bba\u4e0a\u4f18\u5148\u7ea7\u5728\u524d\u9762\u7684\u89c4\u5219\u5c06\u4f1a\u4f18\u5148\u6267\u884c\uff0c\u60a8\u9700\u8981\u6839\u636e\u4e1a\u52a1\u9700\u6c42\u6765\u5408\u7406\u8c03\u6574\u89c4\u5219\u7684\u4f18\u5148\u7ea7\u3002\u66f4\u591a\u7ec6\u8282\u4e86\u89e3\u8bf7\u53c2\u8003\u3010\u914d\u7f6e\u6307\u5357\u3011\u7ae0\u8282\u7684 \u89c4\u5219\u4f18\u5148\u7ea7 \u4ecb\u7ecd\u3002</p> <p>break</p> <p>\u8be5\u5f00\u5173\u9ed8\u8ba4\u4e3a\u5173\u95ed\u72b6\u6001\u3002\u5f00\u542f\u72b6\u6001\u4e0b\uff0c\u5982\u679c\u6b64\u6761\u89c4\u5219\u547d\u4e2d\u5219\u7ec8\u6b62\u5339\u914d\u5269\u4e0b\u7684\u89c4\u5219\uff0c\u4e5f\u5373\u4f1a\u8df3\u51fa\u6574\u4e2a\u89c4\u5219\u96c6\uff0c\u8bf7\u7ed3\u5408\u4e1a\u52a1\u9700\u6c42\u5408\u7406\u5f00\u542f\u548c\u5173\u95ed\u3002</p> <p>\u72b6\u6001</p> <p>1\uff09\u542f\u7528</p> <p>\u542f\u7528\u72b6\u6001\u4e0b\uff0c\u89c4\u5219\u4f1a\u5728\u51e0\u79d2\u949f\u5185\u4e0b\u53d1\u90e8\u7f72\u5230\u5168\u7f51 CDN \u8282\u70b9\uff0c\u53ca\u65f6\u751f\u6548\u3002\u8bf7\u786e\u4fdd\u4e1a\u52a1\u6d4b\u8bd5\u6210\u529f\u4e4b\u540e\uff0c\u518d\u8c03\u6574\u4e3a\u542f\u7528\u72b6\u6001\u3002</p> <p>2\uff09\u5173\u95ed</p> <p>\u5173\u95ed\u72b6\u6001\u4e0b\uff0c\u89c4\u5219\u4e0d\u4f1a\u5728\u5168\u7f51 CDN \u8282\u70b9\u8fdb\u884c\u90e8\u7f72\u3002\u8bf7\u6839\u636e\u4e1a\u52a1\u60c5\u51b5\uff0c\u6709\u9009\u62e9\u6027\u7684\u5173\u95ed\u89c4\u5219\u3002</p> <p>3\uff09\u6d4b\u8bd5</p> <p>\u89c4\u5219\u9ed8\u8ba4\u4e3a\u6d4b\u8bd5\u72b6\u6001\uff0c\u5e73\u53f0\u4f1a\u81ea\u52a8\u83b7\u53d6\u672c\u5730 IP \u5730\u5740\uff0c\u4e5f\u5373\u89c4\u5219\u53ea\u4f1a\u5bf9\u8be5\u5ba2\u6237\u7aef IP \u751f\u6548\uff0c\u60a8\u4e5f\u53ef\u4ee5\u6362\u6210\u5176\u4ed6 IP \u5730\u5740\u8fdb\u884c\u6d4b\u8bd5\u3002\u5f53\u4e14\u4ec5\u5f53\u6d4b\u8bd5\u6ee1\u8db3\u4e1a\u52a1\u8981\u6c42\u4e4b\u540e\uff0c\u4f60\u624d\u53ef\u4ee5\u5c06\u89c4\u5219\u8c03\u6574\u4e3a\u542f\u7528\u72b6\u6001\u3002</p>"},{"location":"cdn/edgerules/#_6","title":"\u8bed\u6cd5\u89c4\u5219","text":"<p>\u5f53\u60a8\u5e0c\u671b\u901a\u8fc7\u7f16\u7a0b\u6a21\u5f0f\u6765\u81ea\u884c\u7f16\u5199\u8fb9\u7f18\u89c4\u5219\u65f6\uff0c\u4f60\u9700\u8981\u5bf9\u53c8\u62cd\u4e91\u8fb9\u7f18\u89c4\u5219\u7684\u8bed\u6cd5\u89c4\u5219\u8fdb\u884c\u8be6\u7ec6\u4e86\u89e3\uff0c\u65b9\u53ef\u81ea\u884c\u7f16\u5199\u89c4\u5219\u3002\u672c\u6587\u5c06\u56f4\u7ed5\u51fd\u6570\u3001\u53d8\u91cf\u3001\u5b57\u7b26\u4e32\u5e38\u91cf\u3001break \u8fdb\u884c\u8be6\u7ec6\u4ecb\u7ecd\u3002</p>"},{"location":"cdn/edgerules/#_7","title":"\u51fd\u6570","text":"<p>\u51fd\u6570\u8c03\u7528\u4ee5 <code>$</code> \u5f00\u5934\uff0c\u540e\u8ddf\u4e00\u7ec4\u5927\u5199\u5b57\u6bcd\uff0c\u5b57\u6bcd\u4e4b\u95f4\u53ef\u4ee5\u5305\u542b\u4e0b\u5212\u7ebf <code>_</code>\uff0c\u51fd\u6570\u9700\u8981\u7684\u53c2\u6570\u653e\u5728<code>()</code>\u4e2d\uff0c\u4ee5 <code>,</code> \u5206\u9694\u3002\u5982\u679c\u6ca1\u6709\u7279\u522b\u8bf4\u660e\uff0c\u8fb9\u7f18\u89c4\u5219 \u4e2d\u7684\u51fd\u6570\u53c2\u6570\u4e2a\u6570\u4e0d\u80fd\u5c11\u4e8e\u8981\u6c42\u7684\u53c2\u6570\u4e2a\u6570\uff0c\u5426\u5219\u89c6\u4e3a\u8bed\u6cd5\u9519\u8bef\uff0c\u7136\u540e\u7ec8\u6b62\u89c4\u5219\u6267\u884c\u8fc7\u7a0b\uff0c\u591a\u4f59\u7684\u53c2\u6570\u4f1a\u88ab\u6c42\u503c\uff0c\u4f46\u4e0d\u5f71\u54cd\u8c03\u7528\u3002\u51fd\u6570\u8c03\u7528\u662f\u6709\u4e0a\u4e0b\u6587\u7684\uff0c\u8b6c\u5982 <code>$WHEN</code> \u8fd9\u4e2a\u51fd\u6570\uff0c\u53c2\u6570\u662f <code>bool</code> \u7c7b \u578b\uff0c\u53c2\u6570\u4e2d\u6709\u4e0d\u6210\u7acb\u7684\u6761\u4ef6 <code>false</code> \u65f6\uff0c\u4f1a\u7ec8\u6b62\u672c\u6b21\u89c4\u5219\u6267\u884c\u8fc7\u7a0b\u3002\u652f\u6301\u7684\u51fd\u6570\u6709\uff1a</p> <p>\u6761\u4ef6\u9009\u62e9\u548c\u5224\u65ad</p> \u51fd\u6570 \u542b\u4e49 <code>$WHEN(E1, E2, ...)</code> \u6240\u6709\u6761\u4ef6\u90fd\u6210\u7acb\u65f6\u624d\u4f1a\u6267\u884c\u89c4\u5219\uff0c\u5e76\u8fd4\u56de\u7a7a\u5b57\u7b26\u4e32 <code>$NOT(E)</code> <code>E</code> \u4e0d\u6210\u7acb\u65f6\u8fd4\u56de <code>true</code>\uff0c \u5426\u5219\u8fd4\u56de <code>false</code> <code>$ALL(E1, E2, ...)</code> \u6240\u6709\u6761\u4ef6\u90fd\u6210\u7acb\u65f6\u8fd4\u56de <code>true</code>\uff0c\u5426\u5219\u8fd4\u56de <code>false</code>\uff0c\u53c2\u6570\u4e2a\u6570\u4e0d\u9650 <code>$ANY(E1, E2, ...)</code> \u5176\u4e2d\u4e00\u4e2a\u6761\u4ef6\u6210\u7acb\u65f6\u8fd4\u56de <code>true</code>\uff0c\u5426\u5219\u8fd4\u56de <code>false</code>\uff0c\u53c2\u6570\u4e2a\u6570\u4e0d\u9650 <code>$OR(E1, E2, ...)</code> \u503c\u4e3a\u7b2c\u4e00\u4e2a\u4e3a\u771f\u7684\u8868\u8fbe\u5f0f <code>$SELECT(E1, E2, E3)</code> <code>E1</code> \u4e3a\u771f\u65f6\u503c\u4e3a <code>E2</code>\uff0c\u5426\u5219\u4e3a <code>E3</code> <code>$PCALL(E)</code> \u4fdd\u62a4\u6a21\u5f0f\u4e0b\u89e3\u6790 <code>E</code>\uff0c\u5931\u8d25\u65f6\u8fd4\u56de\u7a7a\u5b57\u7b26\u4e32 <p>\u5b57\u7b26\u5339\u914d\u548c\u6355\u83b7</p> \u51fd\u6570 \u542b\u4e49 <code>$MATCH(E1, E2)</code> PCRE \u5339\u914d\uff0c<code>E2</code> \u4e3a\u8981\u5339\u914d\u7684 pattern\uff0c\u8fd4\u56de <code>true</code> \u6216\u8005 <code>false</code> <code>$CAPTURE(E1, E2, E3)</code> \u6309 <code>E2</code> pattern \u5bf9 <code>E1</code> \u8fdb\u884c\u6355\u83b7\uff0c<code>E3</code> \u8868\u793a\u662f\u5426\u5ffd\u7565\u5927\u5c0f\u5199\uff0c\u6355\u83b7\u540e\u751f\u6210 <code>$n.m</code> \u5f62\u5f0f\u7684\u53d8\u91cf\uff0c<code>n</code> \u4e3a\u5f53\u524d <code>CAPTURE</code> \u51fa\u73b0\u7684\u6b21\u5e8f\uff0c<code>m</code> \u8868\u793a\u5339\u914d\u5206\u7ec4\uff1b<code>E2</code> \u4e3a\u7a7a\u65f6\uff0c\u8868\u793a\u5bf9 <code>E1</code> \u8fdb\u884c\u6355\u83b7\uff0c\u6b64\u65f6 <code>E1</code> \u5bf9\u5e94 <code>$n.0</code> <p>\u8bf7\u6c42/\u54cd\u5e94\u4fee\u6539</p> \u51fd\u6570 \u542b\u4e49 <code>$ADD_REQ_HEADER(E1, E2)</code> \u6dfb\u52a0\u8bf7\u6c42\u5934 <code>E1</code> \u4e3a <code>E2</code> <code>$DEL_REQ_HEADER(E)</code> \u5220\u9664\u8bf7\u6c42\u5934 <code>E</code> <code>$ADD_RSP_HEADER(E1, E2)</code> \u6dfb\u52a0\u54cd\u5e94\u5934 <code>E1</code> \u4e3a <code>E2</code> <code>$DEL_RSP_HEADER(E)</code> \u5220\u9664\u54cd\u5e94\u5934 <code>E</code> <code>$DEL_ARG(E)</code> \u5220\u9664\u8bf7\u6c42\u53c2\u6570\u9879 <code>E</code> <code>$SET_METHOD(E)</code> \u4fee\u6539\u5f53\u524d HTTP \u8bf7\u6c42\u65b9\u6cd5\u4e3a <code>E</code>\uff0c<code>E</code> \u53ef\u9009\u503c\u6709\uff1a<code>GET</code>, <code>HEAD</code>, <code>PUT</code>, <code>POST</code>, <code>DELETE</code>, <code>OPTIONS</code>, <code>PATCH</code>; \u6ce8 1 <code>$SET_BODY(E)</code> \u4fee\u6539\u5f53\u524d HTTP \u8bf7\u6c42\u4f53\u7684\u5185\u5bb9\u4e3a <code>E</code>\uff0c\u4ec5\u5728 <code>PUT</code> \u6216 <code>POST</code> \u8bf7\u6c42\u4e0b\u6709\u6548 <code>$REDIRECT(E1, E2)</code> \u91cd\u5b9a\u5411\u5730\u5740\u5230 <code>E1</code>\uff0c\u72b6\u6001\u7801\u4e3a <code>E2(301, 302)</code> <code>$EXIT(E1, E2)</code> \u4ee5\u72b6\u6001\u7801 <code>E1</code> \u9000\u51fa\uff0c\u54cd\u5e94\u4f53\u4e3a <code>E2</code> <p>\u6ce8: \u5220\u9664\u54cd\u5e94\u5934\u51fd\u6570\u4e0d\u80fd\u5220\u9664 CDN \u81ea\u5e26\u7684\u4e00\u4e9b\u5b57\u6bb5\uff0c\u6bd4\u5982 via\u3001age\u3001server\u3001connection\u3001x-cache\u3001x-request-id\u3001x-source\u3001content-length\u3001transfer-encoding\u7b49\u5b57\u6bb5\u662f\u6709\u4fdd\u62a4\u7684\u3002</p> <p>\u6570\u503c\u8ba1\u7b97</p> \u51fd\u6570 \u542b\u4e49 <code>$ADD(E1, E2)</code> \u6570\u5b57\u76f8\u52a0\uff0c\u8fd4\u56de <code>E1 + E2</code> \u7ed3\u679c\u6570\u503c <code>$MOD(E1, E2)</code> \u6570\u5b57\u53d6\u4f59\uff0c\u8fd4\u56de <code>E1 % E2</code> \u7ed3\u679c\u6570\u503c\uff0c\u5176\u4e2d <code>E2</code> \u4e0d\u80fd\u4e3a <code>0</code> <code>$MSUB(E1, E2)</code> \u6570\u5b57\u76f8\u51cf\uff0c\u8fd4\u56de <code>E1 - E2</code> \u7ed3\u679c\u6570\u503c <code>$MULTIPLY(E1, E2)</code> \u6570\u5b57\u76f8\u4e58\uff0c\u8fd4\u56de <code>E1 * E2</code> \u7ed3\u679c\u6570\u503c <code>$DIVIDE(E1, E2)</code> \u6570\u5b57\u76f8\u9664\uff0c\u8fd4\u56de <code>E1 / E2</code> \u7ed3\u679c\u6570\u503c\uff0c\u5176\u4e2d <code>E2</code> \u4e0d\u80fd\u4e3a <code>0</code> <code>$BYTE(E)</code> \u8fd4\u56de\u5b57\u7b26 <code>E</code> \u7684 ASCII \u7f16\u7801\u503c <code>$FLOOR(E)</code> \u8fd4\u56de\u5c0f\u4e8e\u6216\u7b49\u4e8e\u6570\u5b57 <code>E</code> \u7684\u6700\u5927\u6574\u6570 <code>$CEIL(E)</code> \u8fd4\u56de\u5927\u4e8e\u6216\u7b49\u4e8e\u6570\u5b57 <code>E</code> \u7684\u6700\u5c0f\u6574\u6570 <code>$GT(E1, E2)</code> \u6570\u5b57\u6bd4\u8f83\uff0c\u662f\u5426\u5927\u4e8e\uff0c\u8fd4\u56de <code>true</code> \u6216\u8005 <code>false</code> <code>$GE(E1, E2)</code> \u6570\u5b57\u6bd4\u8f83\uff0c\u662f\u5426\u5927\u4e8e\u7b49\u4e8e\uff0c\u8fd4\u56de <code>true</code> \u6216\u8005 <code>false</code> <p>\u5b57\u7b26\u4e32\u64cd\u4f5c</p> \u51fd\u6570 \u542b\u4e49 <code>$SUB(E1, from, to)</code> \u5b57\u7b26\u4e32\u622a\u53d6\uff0c\u4ece <code>from</code> \u5230 <code>to</code> <code>$GSUB(E1,E2,E3,N)</code> <code>E1</code>\u4e3a\u8981\u5904\u7406\u7684\u5b57\u7b26\u4e32\uff0c<code>E2</code>\u4e3a\u8981\u66ff\u6362\u7684\u5b57\u7b26\u4e32\uff0c<code>E3</code>\u4e3a\u66ff\u6362\u6210\u7684\u5b57\u7b26\u4e32\uff08\u53ef\u4ee5\u4e3a\u7a7a\uff0c\u8868\u793a\u5220\u9664<code>E1</code>\uff09\uff0c<code>N</code>\u4e3a\u4ece\u5b57\u7b26\u4e32\u5f00\u59cb\u7684\u66ff\u6362<code>E1</code>\u7684\u4e2a\u6570\uff0c\u7a7a\u6216\u5c0f\u4e8e\u96f6\u8868\u793a\u6240\u6709\uff0c\u51fd\u6570\u8fd4\u56de\u5904\u7406\u540e\u7684\u5b57\u7b26\u4e32 <code>$EQ(E1, E2)</code> \u5b57\u7b26\u4e32\u662f\u5426\u76f8\u7b49\uff0c\u8fd4\u56de <code>true</code> \u6216\u8005 <code>false</code> <code>$UPPER(E)</code> \u5c06 <code>E</code> \u8f6c\u6362\u4e3a\u5927\u5199 <code>$LOWER(E)</code> \u5c06 <code>E</code> \u8f6c\u6362\u4e3a\u5c0f\u5199 <code>$LEN(E)</code> \u8fd4\u56de\u5b57\u7b26\u4e32 <code>E</code> \u7684\u957f\u5ea6 <p>\u901a\u7528\u529f\u80fd\u7c7b\u51fd\u6570</p> \u51fd\u6570 \u542b\u4e49 <code>$ENCODE_BASE64(E)</code> \u5c06\u5b57\u7b26\u4e32 E \u6309 base64 \u7f16\u7801\u538b\u7f29 <code>$DECODE_BASE64(E)</code> \u5c06\u5b57\u7b26\u4e32 E \u6309 base64 \u7f16\u7801\u89e3\u538b <code>$ESCAPE(E)</code> \u5c06\u5b57\u7b26\u4e32 E \u6309 URL \u7f16\u7801\u5904\u7406\uff0c\u5177\u4f53\u5b9e\u73b0\u548c <code>Chrome JS</code> \u5b9e\u73b0\u7684  <code>encodeURIComponent()</code> \u4e00\u81f4 <code>$UNESCAPE(E)</code> \u5c06\u5b57\u7b26\u4e32 E \u6309 URL \u89e3\u7801\u5904\u7406\uff0c\u5177\u4f53\u5b9e\u73b0\u548c <code>Chrome JS</code> \u5b9e\u73b0\u7684  <code>decodeURIComponent()</code> \u4e00\u81f4 <code>$MD5(E)</code> \u8ba1\u7b97 <code>E</code> \u7684 md5 \u503c <code>$MD5_BIN\uff08E\uff09</code> \u8ba1\u7b97 <code>E</code> \u7684 md5 \u503c\uff0c\u5e76\u4ee5\u4e8c\u8fdb\u5236\u6570\u636e\u8f93\u51fa <code>$RANDI(E1, E2)</code> \u8fd4\u56de\u5927\u4e8e <code>E1</code> \u5e76\u5c0f\u4e8e <code>E2</code> \u7684\u968f\u673a\u6570\u503c <code>$UNIXT(y, m, d, h, min, sec)</code> \u6307\u5b9a\u5e74\uff0c\u6708\uff0c\u65e5\uff0c\u5c0f\u65f6\uff0c\u5206\u949f\uff0c\u79d2\uff0c\u8fd4\u56de\u76f8\u5e94\u7684 UNIX TIME <code>$INT(E1, E2, E3)</code> \u8fdb\u5236\u8f6c\u6362\uff0c\u5c06 <code>E2</code> \u8fdb\u5236\u7684\u6570\u5b57\uff08\u5b57\u7b26\u4e32\u5f62\u5f0f\uff09 <code>E1</code> \u8f6c\u6362\u6210 <code>E3</code> \u8fdb\u5236\u5e76\u8fd4\u56de\uff0c<code>E2</code>, <code>E3</code> \u53ef\u9009\uff0c<code>E2</code> \u9ed8\u8ba4\u4e3a <code>10</code> <code>$STRF_TIME(E1,E2 )</code> \u65f6\u95f4\u683c\u5f0f\u8f6c\u6362\uff0c\u8868\u793a\u628a\u65f6\u95f4\u8fdb\u884c\u683c\u5f0f\u5316\u6210\u5e74\u6708\u65e5\u65f6\u5206\uff0c<code>E1</code> \u4ee3\u8868 UNIX \u65f6\u95f4\u6233\uff0c\u53ef\u4ee5\u4f7f\u7528\u53d8\u91cf <code>$_TIME</code>\u6765\u83b7\u53d6\u5f53\u524d\u65f6\u95f4\uff1b<code>E2</code> \u4e3a\u95f4\u9694\u7b26\uff0c\u4e3a\u53ef\u9009\u9879\uff0c\u4e0d\u586b\u65f6\u683c\u5f0f\u4e3a <code>201802230955</code>\uff1b\u95f4\u9694\u7b26\u4e3a <code>-</code>\u65f6\uff0c\u683c\u5f0f\u4e3a<code>2018-02-23-09-55</code> <p>\u9650\u901f\u76f8\u5173</p> \u51fd\u6570 \u542b\u4e49 <code>$LIMIT_RATE_AFTER(E1, E2)</code> \u9650\u901f\u7b56\u7565\u8bbe\u7f6e\uff0c\u53d1\u9001 <code>E1</code> \u5927\u5c0f\u5355\u4f4d\u4e3a <code>E2</code> \u5b57\u8282\u6570\u636e\u540e\uff0c\u8fdb\u884c\u9650\u901f\uff0c<code>E2</code> \u53ef\u9009\u503c\u6709\uff1a<code>k</code>\uff08KB)\uff0c<code>m</code>\uff08MB\uff09 <code>$LIMIT_RATE(E1, E2)</code> \u9650\u901f\u7b56\u7565\u8bbe\u7f6e\uff0c\u6309 <code>E1</code> \u5927\u5c0f\u6bcf\u79d2\u8fdb\u884c\u9650\u901f\uff0c\u5355\u4f4d\u4e3a <code>E2</code>\uff0c<code>E2</code> \u53ef\u9009\u503c\u6709\uff1a<code>k</code>\uff08KB)\uff0c<code>m</code>\uff08MB\uff09 <p>\u6ce8 1\uff1a\u82e5\u5f53\u524d\u8bf7\u6c42\u5e26\u6709\u8bf7\u6c42\u4f53\u7684\u60c5\u51b5\u4e0b\uff0c<code>$SET_METHOD(E)</code> \u4e0d\u5141\u8bb8\u8bbe\u7f6e\u4e3a\u9664 <code>PUT</code> \u548c <code>POST</code> \u4ee5\u5916\u7684\u65b9\u6cd5\u3002</p> <p>\u5176\u4e2d <code>E[n]</code> \u4ee3\u8868\u5408\u6cd5\u7684\u8868\u8fbe\u5f0f\uff0c\u4e5f\u5c31\u662f\u8bf4\u51fd\u6570\u53ef\u4ee5\u76f8\u4e92\u5d4c\u5957\uff0c\u4f8b\u5982\u89c4\u5219\u53ef\u4ee5\u4e3a\uff1a</p> <p><code>/$SUB($DECODE_BASE64($_HEADER_foo), $_GET_from, $_GET_to)/</code>\uff1b\u5e03\u5c14\u51fd\u6570\u5305\u62ec <code>WHEN , ALL, ANY</code> \u90fd\u662f\u77ed\u8def\u7684\uff0c\u8b6c\u5982 <code>$WHEN($ALL(), $EXIT(403))</code> \u4e0d\u4f1a\u8fd4\u56de <code>403</code>\uff0c\u56e0\u4e3a <code>$ALL()</code> \u7684\u503c\u4e3a <code>false</code></p> <p>\u4f7f\u7528 <code>''</code> \u80fd\u5bf9\u53d8\u91cf\u8fdb\u884c\u8f6c\u4e49\uff0c\u4f7f\u5176\u4e0d\u88ab\u89e3\u91ca\uff0c\u4f8b\u5982\u4ee5\u4e0b\u89c4\u5219\uff1a</p> <pre><code>/foo/'$_HOST'\n</code></pre> <p>\u4f1a\u88ab\u8f6c\u6362\u4e3a:</p> <pre><code>/foo/$_HOST\n</code></pre> <p>\u5bf9\u4e8e\u542b\u6709\u8bf7\u6c42\u53c2\u6570\u7684\u89c4\u5219\uff0c\u539f\u5148\u7684\u8bf7\u6c42\u53c2\u6570\u4f1a\u9644\u52a0\u5230\u540e\u9762\uff0c\u5982\u679c\u4e0d\u5e0c\u671b\u8fd9\u6837\uff0c\u53ef\u4ee5\u653e\u7f6e\u4e00\u4e2a '?' \u5728\u89c4\u5219\u7684\u6700\u540e\u9762\uff0c\u4f8b\u5982\u8fd9\u6837\uff1a</p> <pre><code>/foo?bar=$1?\n</code></pre> <p>\u7279\u522b\u5730\uff0c\u5982\u679c\u91cd\u5199\u540e\u7684 URL \u6ca1\u6709\u53c2\u6570\uff0c\u90a3\u4e48\u6b64\u65f6\u9700\u8981\u5728\u6700\u540e\u52a0\u4e24\u4e2a <code>?</code>\uff0c\u4f8b\u5982\u8fd9\u6837\uff1a</p> <pre><code>/foo??\n</code></pre>"},{"location":"cdn/edgerules/#_8","title":"\u53d8\u91cf","text":"<p>\u53d8\u91cf\u4ee5 <code>$_</code> \u5f00\u5934\uff0c\u8fd9\u4e9b\u53d8\u91cf\u90fd\u662f\u5bf9\u6b64\u6b21\u8bf7\u6c42\u4e0a\u4e0b\u6587\u4e2d\u4e00\u4e9b\u53c2\u6570\u7684\u6620\u5c04\uff0c\u8b6c\u5982 <code>$_HOST</code> \u5bf9\u5e94\u6b64\u6b21\u8bf7\u6c42\u5934\u4e2d\u7684 <code>Host</code> \u5b57\u6bb5\uff0c<code>$_GET_foo</code> \u5bf9\u5e94\u6b64\u6b21\u8bf7\u6c42 URL \u53c2\u6570 foo \u7684\u503c\uff0c\u7b49\u7b49\u3002\u82e5\u5c06\u53d8\u91cf\u5185\u63d2\u5230\u91cd\u5199\u540e\u7684 URL \u4e2d\uff0c\u8b6c\u5982 URL \u6539\u5199 <code>/$_GET_foo/bar</code>\uff0c\u5982\u679c\u8bf7\u6c42\u53c2\u6570\u4e2d\u6ca1\u6709 <code>foo</code>\u5219\u89c6\u4e3a\u6b64\u6b21\u6539\u5199 \u5931\u8d25\uff1b</p> <p>\u82e5\u5c06\u53d8\u91cf\u653e\u5728\u51fd\u6570\u4e2d\uff0c\u5219\u7531\u8be5\u51fd\u6570\u786e\u5b9a\u8fd4\u56de\u7684\u503c\uff0c\u4f8b\u5982 <code>$NOT($_GET_foo)</code>\uff0c\u5982\u679c\u53c2\u6570\u4e2d\u5305\u542b <code>foo</code>\uff0c\u5219\u8fd4\u56de <code>false</code>\uff0c\u5426\u5219\u8fd4\u56de<code>true</code>\u3002\u76ee\u524d\u652f\u6301\u7684\u53d8\u91cf\u6709\uff1a</p> \u53d8\u91cf \u542b\u4e49 <code>$_IP</code> \u5ba2\u6237\u7aef IP <code>$_HOST</code> \u8bf7\u6c42\u5934\u4e2d\u7684 Host \u5b57\u6bb5 <code>$_HOST_n</code> <code>$_HOST_n</code> \u6307 Host \u4e2d\u7684\u7b2c n \u4e2a\u5b50\u57df\uff0c\u4f8b\u5982\u5bf9\u4e8e foo.bar.baz.com\uff1a<code>$_HOST_1 = foo\uff0c$_HOST_2 = bar\uff0c$_HOST_3 = baz</code> <code>$_GET_name</code> \u4f7f\u7528 Query String \u4e2d\u7684\u53d8\u91cf\uff08\u65e0\u9700 urldecode\uff09 <code>$_POST_name</code> \u4f7f\u7528 POST \u8868\u5355\u4e2d\u7684\u53d8\u91cf\uff08\u53ea\u652f\u6301 www form \uff09 <code>$_HEADER_name</code> \u4f7f\u7528 Header \u4e2d\u7684\u503c\uff0c\u6ce8\u610f name \u5168\u4e3a\u5c0f\u5199 <code>$_COOKIE_name</code> \u4f7f\u7528 Cookie \u4e2d\u7684\u5b57\u6bb5\u503c <code>$_RANDOM</code> \u968f\u673a\u5b57\u7b26\u4e32\uff0c\u5b57\u7b26\u96c6\u4e3a <code>[a-zA-Z0-9]</code>\uff0c\u9ed8\u8ba4 8 \u4f4d <code>$_RANDOM_n</code> <code>n</code> \u4f4d\u968f\u673a\u5b57\u7b26\u4e32\uff0c\u5176\u4e2d <code>1 &lt;= n &lt;= 32</code> <code>$_URI</code> \u8bf7\u6c42\u7684 URI\uff0c\u4e0d\u5305\u542b\u53c2\u6570 <code>$_QUERY</code> Query String\uff0c\u4e0d\u5e26\u524d\u7f00 '?' <code>$_METHOD</code> GET/POST/PUT/POST/DELETE/OPTIONS/PATCH <code>$_SCHEME</code> http/https\uff0c\u6ce8\u610f\u6b64\u5904\u5168\u4e3a\u5c0f\u5199 <code>$_TIME</code> \u83b7\u53d6\u5f53\u524d\u670d\u52a1\u5668\u65f6\u95f4\uff0c\u683c\u5f0f\u4e3a UNIX TIME <code>$_BODY</code> \u83b7\u53d6\u5f53\u524d\u8bf7\u6c42\u7684 BODY\uff08\u8bf7\u6c42\u4f53\uff09\u5185\u5bb9\uff0c\u5927\u5c0f\u9650\u5236\u4e3a 16KB <code>$_GEOIP_COUNTRY_CODE</code> \u56fd\u5bb6\u4ee3\u7801\uff0c\u53ef\u53c2\u7167\u7ef4\u57fa\u767e\u79d1\uff1a https://en.wikipedia.org/wiki/ISO_3166-2"},{"location":"cdn/edgerules/#_9","title":"\u5b57\u7b26\u4e32\u5e38\u91cf","text":"<p>\u5b57\u7b26\u4e32\u5e38\u91cf\u6709\u4e24\u79cd\u5f62\u5f0f\uff0c\u7b2c\u4e00\u79cd\u5c31\u662f\u666e\u901a\u7684\u5b57\u7b26\u4e32\u4f8b\u5982<code>/foo/bar</code>\uff0c\u4f46\u662f\u5982\u679c\u5b57\u7b26\u4e32\u4e2d\u5305\u542b\u4e86\u4e00\u4e9b\u7279\u6b8a\u5b57\u7b26\uff0c\u4f8b\u5982\u7a7a\u767d\u5b57\u7b26\u5c06\u88ab\u7701\u7565\uff0c\u4f8b\u5982 <code>$(),'</code> \u8fd9\u4e9b\u5b57\u7b26\u6709\u7279\u6b8a\u7684\u7528\u9014\uff0c\u4e0d\u80fd\u88ab\u76f4\u63a5\u4f7f\u7528\uff0c\u8981\u4f7f\u7528\u8fd9\u4e9b\u7279\u6b8a\u7684\u5b57\u7b26\uff0c\u8981\u52a0 <code>\\</code> \u524d\u7f00\u5bf9\u5176\u8f6c\u4e49\uff0c\u4f8b\u5982 <code>/foo/bar\\,</code>\uff1b\u7b2c\u4e8c\u79cd\u662f\u52a0\u5355\u5f15\u53f7\u7684\u5b57\u7b26\u4e32 <code>''</code>\uff0c\u5355\u5f15\u53f7\u4e2d\u7684\u5b57\u7b26\u53ea\u6709 <code>\\</code> \u662f\u7279\u6b8a\u8f6c\u4e49\u5b57\u7b26\u524d\u7f00\uff0c\u5176\u4ed6\u7684\u90fd\u89c6\u4e3a\u666e\u901a\u5b57\u7b26\uff0c\u4f8b\u5982\u8fd9\u6837\u4e00\u6761\u6539\u5199\u89c4\u5219 <code>/foo/'$\\\\,\\''</code>\uff0c\u6539\u5199\u8fc7\u540e\u5bf9\u5e94 <code>/foo/$\\,'</code>\u3002</p>"},{"location":"cdn/edgerules/#break","title":"break","text":"<p>\u9664\u4e86\u80fd\u52fe\u9009 <code>break \u9009\u9879</code> \u6307\u5b9a\u662f\u5426 <code>break</code>\uff0c\u4e5f\u53ef\u4ee5\u76f4\u63a5\u5728\u8fb9\u7f18\u89c4\u5219\u6700\u540e\u52a0\u4e0a <code>$$</code> \u8868\u793a <code>break</code>\u3002</p>"},{"location":"cdn/edgerules/#_10","title":"\u914d\u7f6e\u6307\u5357","text":"<p>\u5728\u8fd9\u4e2a\u7ae0\u8282\uff0c\u6211\u4eec\u4f1a\u4ecb\u7ecd\u5982\u4f55\u6dfb\u52a0\u548c\u7f16\u8f91\u8fb9\u7f18\u89c4\u5219\u96c6\uff0c\u4e3b\u8981\u5927\u7eb2\u5305\u62ec\uff1a</p> <ul> <li>\u8ba4\u8bc6\u89c4\u5219\u7ba1\u7406\u754c\u9762</li> <li>\u89c4\u5219\u4f18\u5148\u7ea7</li> <li>URI \u5b57\u7b26\u4e32\u63d0\u53d6</li> <li>\u53d8\u91cf\u4f7f\u7528</li> <li>\u6267\u884c\u52a8\u4f5c</li> <li>\u89c4\u5219\u6d4b\u8bd5</li> </ul>"},{"location":"cdn/edgerules/#_11","title":"\u8ba4\u8bc6\u89c4\u5219\u7ba1\u7406\u754c\u9762","text":"<p>\u767b\u9646 CDN \u63a7\u5236\u53f0\uff0c\u4f9d\u6b21\u8fdb\u5165\uff1a\u670d\u52a1\u7ba1\u7406 &gt; \u529f\u80fd\u914d\u7f6e &gt; \u8fb9\u7f18\u89c4\u5219 &gt; EdgeRules\uff0c\u5373\u53ef\u8fdb\u5165\u8fb9\u7f18\u89c4\u5219\u7ba1\u7406\u754c\u9762\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff1a</p> <p></p> <p>\u5728\u89c4\u5219\u7ba1\u7406\u754c\u9762\uff0c\u9488\u5bf9\u6bcf\u4e00\u6761\u89c4\u5219\uff0c\u63a7\u5236\u53f0\u63d0\u4f9b\u4e86\u5982\u4e0b\u5b57\u6bb5\u4fe1\u606f\uff1a</p> \u5b57\u6bb5 \u63cf\u8ff0 \u4f18\u5148\u7ea7 \u6307\u5b9a\u89c4\u5219\u6267\u884c\u7684\u5148\u540e\u987a\u5e8f \u89c4\u5219\u540d\u79f0 \u8be5\u6761\u89c4\u5219\u7684\u540d\u79f0\uff0c\u65b9\u4fbf\u7ba1\u7406\u6807\u8bc6 break \u89c4\u5219\u547d\u4e2d\u4e4b\u540e\uff0c\u662f\u5426\u8df3\u51fa\u6240\u6709\u7684\u89c4\u5219\u96c6 \u72b6\u6001 \u5305\u62ec\u542f\u7528\u3001\u5173\u95ed\u3001\u6d4b\u8bd5\u4e09\u79cd\u72b6\u6001 \u7f16\u8f91 \u7f16\u8f91\u89c4\u5219 \u5220\u9664 \u5220\u9664\u89c4\u5219 \u66f4\u591a \u5305\u62ec\u542f\u7528\u3001\u5173\u95ed\u3001\u6d4b\u8bd5\u4e09\u4e2a\u9009\u9879"},{"location":"cdn/edgerules/#_12","title":"\u89c4\u5219\u4f18\u5148\u7ea7","text":"<p>\u7406\u8bba\u4e0a\uff0c\u6240\u6709\u89c4\u5219\u7684\u4f18\u5148\u7ea7\u662f\u6309\u7167\u5148\u540e\u987a\u5e8f\u6765\u6267\u884c\u7684\uff0c\u4f18\u5148\u7ea7\u8d8a\u9760\u524d\u5219\u4f1a\u88ab\u4f18\u5148\u6267\u884c\uff0c\u8fd9\u4e2a\u4ec5\u9002\u7528\u4e8e\u6dfb\u52a0 HTTP \u5934\u90e8\u3001\u5220\u9664 HTTP \u5934\u90e8\u3001\u8bbf\u95ee\u63a7\u5236\u3001\u8bf7\u6c42\u9650\u901f\u3001\u81ea\u5b9a\u4e49\u9519\u8bef\u9875\u9762\u3001\u8fb9\u7f18\u91cd\u5b9a\u5411\u3002\u9488\u5bf9 URL \u6539\u5199\u52a8\u4f5c\uff0c\u5373\u4f7f URL \u6539\u5199\u7684\u89c4\u5219\u653e\u5728\u524d\u9762\uff0c \u8fd8\u662f\u4f1a\u7b49\u6267\u884c\u5b8c\u5176\u4ed6\u52a8\u4f5c\u4e4b\u540e\uff0c\u624d\u4f1a\u53bb\u6267\u884c URL \u6539\u5199\u52a8\u4f5c\u3002</p> <p>\u8fd9\u91cc\u6839\u636e\u5177\u4f53\u793a\u4f8b\u8fdb\u884c\u8bf4\u660e\uff0c\u5982\u622a\u56fe\u6240\u793a\uff1a</p> <p></p> <p>\u7279\u522b\u5730\uff1a\u5f53\u5339\u914d\u7684\u6761\u4ef6\u90fd\u76f8\u540c\u65f6\uff0c\u4f8b\u5982\uff1a\u5f53\u8bf7\u6c42 URI \u90fd\u4e3a <code>/123.mp4</code> \u65f6\uff0c\u6309\u7167\u4f18\u5148\u7ea7\u987a\u5e8f\u51fa\u73b0\u4e86\u5982\u4e0b 5 \u6761\u89c4\u5219\uff1a</p> <p>\u7b2c 1 \u6761\u89c4\u5219\uff1a\u5f53\u8bf7\u6c42\u7684 URI \u4e3a <code>/123.mp4</code> \u65f6\uff0c\u6539\u5199\u5230 <code>/beibei.mp4</code></p> <p>\u7b2c 2 \u6761\u89c4\u5219\uff1a\u5f53\u8bf7\u6c42\u7684 URI \u4e3a <code>/123.mp4</code> \u65f6\uff0c\u6dfb\u52a0 HTTP \u54cd\u5e94\u5934 CDN</p> <p>\u7b2c 3 \u6761\u89c4\u5219\uff1a\u5f53\u8bf7\u6c42\u7684 URI \u4e3a <code>/123.mp4</code> \u65f6\uff0c\u8fb9\u7f18\u91cd\u5b9a\u5411\u5230 <code>https://www.upyun.com/</code></p> <p>\u7b2c 4 \u6761\u89c4\u5219\uff1a\u5f53\u8bf7\u6c42\u7684 URI \u4e3a <code>/123.mp4</code> \u65f6\uff0c\u8fdb\u884c\u8bbf\u95ee\u63a7\u5236\uff0c\u54cd\u5e94 403 \u72b6\u6001\u7801</p> <p>\u7b2c 5 \u6761\u89c4\u5219\uff1a\u5f53\u8bf7\u6c42\u7684 URI \u4e3a <code>/123.mp4</code> \u65f6\uff0c\u8fdb\u884c\u8bf7\u6c42\u9650\u901f\uff0c\u9650\u901f\u5230 <code>200KB/s</code> \u3002</p> <p>\u6309\u7167\u5f53\u524d\u7684\u8bbe\u8ba1\u903b\u8f91\uff0c\u7b2c 1 \u6761\u89c4\u5219\u4e0d\u4f1a\u88ab\u7acb\u9a6c\u6267\u884c\uff0c\u4f1a\u7b49\u5f85\u540e\u9762\u6240\u6709\u7684\u89c4\u5219\u6267\u884c\u5b8c\u6bd5\u4e4b\u540e\uff0c\u624d\u4f1a\u8fdb\u884c URL \u6539\u5199\u7684\u52a8\u4f5c\u3002\u6309\u7167\u89c4\u5219\u4f18\u5148\u7ea7\uff0c\u4f1a\u4f9d\u6b21\u6267\u884c\u7b2c 2 \u6761\u89c4\u5219\uff0c\u7136\u540e\u518d\u6267\u884c\u7b2c 3 \u6761\u89c4\u5219\uff0c\u901a\u8fc7 curl \u53d1\u8d77\u547d\u4ee4\u6d4b\u8bd5\uff0c\u6d4b\u8bd5\u7ed3\u679c\u4e3a\uff1a</p> <pre><code> GET /123.mp4 HTTP/1.1\n Host: wuxuejun2018.b0.upaiyun.com\n User-Agent: curl/7.43.0\n Accept: */*\n\n HTTP/1.1 302 Moved Temporarily\n Server: marco/1.10\n Date: Wed, 20 Dec 2017 09:28:28 GMT\n Content-Type: text/html\n Content-Length: 159\n Connection: keep-alive\n Location: https://www.upyun.com\n Via: M.ctn-zj-lna3-019\n X-Request-Id: 32c1c154c192027be98887ad63c3b08c\n CDN: UPYUN\n</code></pre> <p>\u6309\u7167\u6d4b\u8bd5\u7ed3\u679c\uff0c\u4f9d\u6b21\u547d\u4e2d\u4e86\u7b2c 2 \u6761\u548c \u7b2c 3 \u6761\u89c4\u5219\u3002</p> <p>\u53ef\u4ee5\u770b\u51fa\uff0c\u7b2c 1 \u6761\u3001\u7b2c 4 \u6761\u3001\u7b2c 5 \u6761\u90fd\u6ca1\u6709\u88ab\u6267\u884c\uff0c\u90a3\u662f\u56e0\u4e3a\u7b2c 1 \u6761\u5c5e\u4e8e URL \u6539\u5199\uff0c\u4e0d\u4f1a\u7acb\u9a6c\u6267\u884c\uff1b\u7b2c 3 \u6761\u4e3a\u8fb9\u7f18\u91cd\u5b9a\u5411\uff0c\u76f4\u63a5 302 \u5230 <code>https://www.upyun.com</code> \u4e86\uff0c\u8df3\u51fa\u4e86\u6574\u4e2a\u89c4\u5219\u96c6\uff0c\u4ece\u800c\u63a5\u4e0b\u6765\u7684\u89c4\u5219\u4e0d\u4f1a\u88ab\u6267\u884c\uff0c\u5305\u62ec URL \u6539\u5199\u3002</p> <p>\u7279\u522b\u6ce8\u610f\u7684\u662f\uff0c\u7c7b\u4f3c\u8fb9\u7f18\u91cd\u5b9a\u5411\u8fd9\u7c7b\u76f4\u63a5\u8df3\u51fa\u6240\u6709\u89c4\u5219\u96c6\u7684\u884c\u4e3a\uff0c\u8fd8\u5305\u62ec\uff1a</p> <ul> <li>\u81ea\u5b9a\u4e49\u9519\u8bef\u9875\u9762</li> <li>\u8bbf\u95ee\u63a7\u5236</li> </ul> <p>\u4e5f\u5c31\u662f\u8bf4\uff0c\u5f53\u6267\u884c\u5b8c\u8fb9\u7f18\u91cd\u5b9a\u5411\u3001\u81ea\u5b9a\u4e49\u9519\u8bef\u9875\u9762\u3001\u8bbf\u95ee\u63a7\u5236\u7b49\u52a8\u4f5c\u4e4b\u540e\uff0c\u4f1a\u76f4\u63a5\u8df3\u51fa\u6574\u4e2a\u89c4\u5219\u96c6\uff0c\u4e0d\u4f1a\u6267\u884c\u63a5\u4e0b\u6765\u7684\u5339\u914d\u52a8\u4f5c\u3002</p>"},{"location":"cdn/edgerules/#uri","title":"URI \u5b57\u7b26\u4e32\u63d0\u53d6","text":"<p>\u6240\u8c13 URI \u5b57\u7b26\u4e32\u63d0\u53d6\uff0c\u4e5f\u5373\u5728\u6267\u884c\u8fb9\u7f18\u91cd\u5b9a\u5411\u4ee5\u53ca URL \u6539\u5199\u52a8\u4f5c\u65f6\uff0c\u6839\u636e\u4e1a\u52a1\u9700\u6c42\uff0c\u53ef\u80fd\u4f1a\u63d0\u53d6\u539f\u59cb\u8bf7\u6c42 URI \u4e2d\u7684\u5b57\u7b26\u4e32\u3002\u5176\u4e2d URI \u5b57\u7b26\u4e32\u63d0\u53d6\u652f\u6301 PCRE \u6b63\u5219\u8868\u8fbe\u5f0f\uff0c\u5339\u914d\u540e\uff0c\u4ea7\u751f <code>$1</code>, <code>$2</code> ... \u8fd9\u6837\u7684\u53d8\u91cf\u3002</p> <p>URI \u5b57\u7b26\u4e32\u63d0\u53d6\u6b63\u5219\u8868\u8fbe\u5f0f\uff1a</p> <pre><code>^/pay/([0-9]+)/([0-9]+)/(.*?).html$\n</code></pre> <p>\u6839\u636e\u4ee5\u4e0a\u7684 PCRE \u6b63\u5219\u8868\u8fbe\u5f0f\uff0c\u5206\u522b\u4f1a\u4ea7\u751f 3 \u4e2a \u5b57\u7b26\u4e32\uff0c\u4e3a  <code>$1</code>\u3001<code>$2</code>\u3001<code>$3</code>\u3002\u5206\u522b\u5bf9\u5e94\u4e86\u4ee5\u4e0a\u6b63\u5219\u8868\u8fbe\u5f0f\u91cc\u9762\u7684\u4ece\u5de6\u5230\u53f3 <code>()</code> \u91cc\u9762\u7684\u5b57\u7b26\u4e32\u3002</p> <p>URL \u6539\u5199\u89c4\u5219\uff1a</p> <pre><code>/pay.php?payid=$1&amp;categoryid=$2\n</code></pre> <p>\u914d\u7f6e\u622a\u56fe\u53ef\u53c2\u8003\uff1a</p> <p>1\uff09\u901a\u7528\u6a21\u5f0f</p> <p></p> <p>2\uff09\u7f16\u7a0b\u6a21\u5f0f</p> <p></p> <p>\u901a\u8fc7\u6267\u884c\u4ee5\u4e0a\u89c4\u5219\u4e4b\u540e\uff0c\u539f\u59cb\u8bf7\u6c42\u548c\u6539\u5199\u540e\u7684\u5730\u5740\u5206\u522b\u5982\u4e0b\uff1a</p> <p>\u539f\u59cb\u8bf7\u6c42\uff1a</p> <pre><code>http://example.com/pay/25/8/...\n</code></pre> <p>\u6539\u5199\u540e\u5730\u5740\uff1a</p> <pre><code>http://example.com/pay.php?payid=25&amp;categoryid=8...\n</code></pre>"},{"location":"cdn/edgerules/#_13","title":"\u53d8\u91cf\u4f7f\u7528","text":"<p>\u5728\u8fdb\u884c URL \u6539\u5199\u548c\u8fb9\u7f18\u91cd\u5b9a\u5411\u52a8\u4f5c\u65f6\uff0c\u9664\u4e86\u53ef\u4ee5\u63d0\u53d6 URI \u4e2d\u7684 \u5b57\u7b26\u4e32\uff0c\u60a8\u8fd8\u53ef\u4ee5\u83b7\u53d6\u539f\u59cb\u8bf7\u6c42\u4e2d\u7684\u53d8\u91cf\u3002\u8fd9\u4e9b\u53d8\u91cf\u5305\u62ec\uff1a</p> \u53d8\u91cf \u542b\u4e49 <code>$_IP</code> \u5ba2\u6237\u7aef IP <code>$_HOST</code> \u8bf7\u6c42\u5934\u4e2d\u7684 Host \u5b57\u6bb5 <code>$_HOST_n</code> <code>$_HOST_n</code> \u6307 Host \u4e2d\u7684\u7b2c n \u4e2a\u5b50\u57df\uff0c\u4f8b\u5982\u5bf9\u4e8e foo.bar.baz.com\uff1a<code>$_HOST_1 = foo\uff0c$_HOST_2 = bar\uff0c$_HOST_3 = baz</code> <code>$_GET_name</code> \u4f7f\u7528 Query String \u4e2d\u7684\u53d8\u91cf\uff08\u65e0\u9700 urldecode\uff09 <code>$_POST_name</code> \u4f7f\u7528 POST \u8868\u5355\u4e2d\u7684\u53d8\u91cf\uff08\u53ea\u652f\u6301 www form \uff09 <code>$_HEADER_name</code> \u4f7f\u7528 Header \u4e2d\u7684\u503c\uff0c\u6ce8\u610f name \u5168\u4e3a\u5c0f\u5199 <code>$_COOKIE_name</code> \u4f7f\u7528 Cookie \u4e2d\u7684\u5b57\u6bb5\u503c <code>$_RANDOM</code> \u968f\u673a\u5b57\u7b26\u4e32\uff0c\u5b57\u7b26\u96c6\u4e3a <code>[a-zA-Z0-9]</code>\uff0c\u9ed8\u8ba4 8 \u4f4d <code>$_RANDOM_n</code> <code>n</code> \u4f4d\u968f\u673a\u5b57\u7b26\u4e32\uff0c\u5176\u4e2d <code>1 &lt;= n &lt;= 32</code> <code>$_URI</code> \u8bf7\u6c42\u7684 URI\uff0c\u4e0d\u5305\u542b\u53c2\u6570 <code>$_QUERY</code> Query String\uff0c\u4e0d\u5e26\u524d\u7f00 '?' <code>$_METHOD</code> GET/POST/PUT/POST/DELETE/OPTIONS/PATCH <code>$_SCHEME</code> http/https\uff0c\u6ce8\u610f\u6b64\u5904\u5168\u4e3a\u5c0f\u5199 <code>$_TIME</code> \u83b7\u53d6\u5f53\u524d\u670d\u52a1\u5668\u65f6\u95f4\uff0c\u683c\u5f0f\u4e3a UNIX TIME <code>$_BODY</code> \u83b7\u53d6\u5f53\u524d\u8bf7\u6c42\u7684 BODY\uff08\u8bf7\u6c42\u4f53\uff09\u5185\u5bb9\uff0c\u5927\u5c0f\u9650\u5236\u4e3a 16KB <code>$_GEOIP_COUNTRY_CODE</code> \u56fd\u5bb6\u4ee3\u7801\uff0c\u53ef\u53c2\u7167\u7ef4\u57fa\u767e\u79d1\uff1a https://en.wikipedia.org/wiki/ISO_3166-2 <p>\u4e3a\u4e86\u66f4\u52a0\u65b9\u4fbf\u7406\u89e3\uff0c\u4e0b\u9762\u5c06\u901a\u8fc7\u4e00\u4e2a\u5e94\u7528\u793a\u4f8b\u6765\u5c55\u5f00\u4ecb\u7ecd\uff1a</p> <p>\u793a\u4f8b\uff1aURL \u6539\u5199</p> <p>\u4f8b\u5982\uff1a\u67d0\u4e2a URL \u4e3a <code>https://www.example.com/index.htm</code></p> <p>\u9700\u6c42\uff1a\u5e0c\u671b\u901a\u8fc7 URL \u6539\u5199\u52a8\u4f5c\uff0c\u5c06\u5ba2\u6237\u7aef IP (\u8fd9\u91cc\u4ee5 <code>192.168.1.1</code> \u4e3a\u4f8b) \u4ee5\u53ca\u8bf7\u6c42\u65b9\u6cd5\uff08\u5b9e\u9645\u7684\u8bf7\u6c42\u65b9\u6cd5\u4e3a GET\uff09\u901a\u8fc7\u67e5\u8be2\u5b57\u7b26\u4e32\u4f20\u9012\u5230\u6e90\u7ad9\u540e\u7aef\uff1b</p> <p>\u6539\u5199\u89c4\u5219\u53ef\u4ee5\u4e3a\uff1a</p> <pre><code>/index.php?ip=$_IP&amp;method=$_METHOD\n</code></pre> <p>\u5219\u6539\u5199\u540e\u7684\u5b8c\u6574 URL \u4e3a\uff1a</p> <pre><code>https://example.com/index.php?ip=192.168.1.1&amp;method=GET\n</code></pre> <p>\u914d\u7f6e\u622a\u56fe\u53ef\u53c2\u8003(\u901a\u7528\u6a21\u5f0f):</p> <p></p>"},{"location":"cdn/edgerules/#_14","title":"\u6267\u884c\u52a8\u4f5c","text":"<p>\u6dfb\u52a0 HTTP \u5934\u90e8</p> <p>\u901a\u8fc7\u4f7f\u7528\u8fb9\u7f18\u89c4\u5219\u7684\u3010\u6dfb\u52a0 HTTP \u54cd\u5e94\u5934\u90e8\u3011\u529f\u80fd\uff0c\u5f53\u60a8\u7684\u7528\u6237\u8bf7\u6c42\u4e1a\u52a1\u8d44\u6e90\u65f6\uff0c\u53ef\u4ee5\u5728\u8fd4\u56de\u7684\u3010\u54cd\u5e94\u6d88\u606f\u3011\u4e2d\u6dfb\u52a0\u60a8\u914d\u7f6e\u7684\u5934\u90e8\uff0c\u8fd9\u4e9b\u5934\u90e8\u53ef\u80fd\u5305\u62ec\uff1a</p> <ul> <li>Cache-Control</li> <li>Content-Disposition</li> <li>Content-Language</li> <li>Access-Control-Allow-Origin</li> <li>Content-Type</li> </ul> <p>\u5f53\u7136\uff0c\u60a8\u4e5f\u53ef\u4ee5\u6839\u636e\u4e1a\u52a1\u8981\u6c42\uff0c\u81ea\u5b9a\u4e49\u54cd\u5e94\u5b57\u6bb5\u3002\u4f8b\u5982\uff1aCDN\uff1aUPYUN</p> <p>\u5177\u4f53\u4f7f\u7528\u622a\u56fe\u5982\u4e0b\u622a\u56fe\u6240\u793a\uff1a</p> <p>1\uff09\u901a\u7528\u6a21\u5f0f</p> <p></p> <p>2\uff09\u7f16\u7a0b\u6a21\u5f0f</p> <p></p> <p>\u4ece\u622a\u56fe\u53ef\u4ee5\u770b\u51fa\uff0c\u6dfb\u52a0 HTTP \u5934\u90e8\uff0c\u60a8\u9700\u8981\u5206\u522b\u586b\u5199\uff1a</p> <ul> <li>Header \u57df\u540d\uff1aAccess-Control-Allow-Origin</li> <li>Header \u57df\u503c\uff1a*</li> </ul> <p>\u53e6\u5916\uff0c\u6709\u3010\u8986\u76d6\u539f\u6709\u54cd\u5e94\u5934\u3011\u7684\u914d\u7f6e\uff0c\u9ed8\u8ba4\u4e3a\u5426\uff0c\u53ef\u4ee5\u6839\u636e\u5177\u4f53\u60c5\u51b5\u6765\u52fe\u9009\u3002\u5f53\u52fe\u9009\u65f6\uff0c\u4f1a\u8986\u76d6\u6389\u539f\u59cb\u7684\u54cd\u5e94\u5934\u4fe1\u606f\u3002</p> <p>\u5220\u9664 HTTP \u5934\u90e8</p> <p>\u901a\u8fc7\u4f7f\u7528\u8fb9\u7f18\u89c4\u5219\u7684\u3010\u5220\u9664 HTTP \u54cd\u5e94\u5934\u3011\u529f\u80fd\uff0c\u60a8\u53ef\u4ee5\u5220\u9664\u6389\u4e0d\u5fc5\u8981\u7684\u54cd\u5e94\u5b57\u6bb5\u3002\u5982\u9690\u85cf\u6389\u4e00\u4e9b\u5e76\u4e0d\u5b89\u5168\u7684\u54cd\u5e94\u5934\u90e8\u4fe1\u606f\u3002\u4f8b\u5982\uff1a</p> <ul> <li>X-Powered-By</li> </ul> <p>\u5177\u4f53\u914d\u7f6e\u53c2\u89c1\u5982\u4e0b\u622a\u56fe\u6240\u793a\uff1a</p> <p></p> <p>\u6ce8\u610f\u4e8b\u9879\uff1a\u53c8\u62cd\u4e91 CDN \u5185\u90e8\u4e0d\u80fd\u5220\u9664\u7684\u54cd\u5e94\u5934\u5305\u62ec\uff1a</p> <pre><code>Via\nAge\nServer\nconnection\nX-cache\nx-source\nX-request-id\nContent-range\nContent-length\nTransfer-encoding\n</code></pre> <p>\u8fb9\u7f18\u91cd\u5b9a\u5411</p> <p>\u901a\u8fc7\u4f7f\u7528\u8fb9\u7f18\u89c4\u5219\u7684\u3010\u8fb9\u7f18\u91cd\u5b9a\u5411\u3011\u529f\u80fd\uff0c\u5f53\u5339\u914d\u5230\u6761\u4ef6\u65f6\uff0cCDN \u4f1a\u54cd\u5e94\u4e00\u4e2a 301/302 \u8bf7\u6c42\u7ed9\u5ba2\u6237\u7aef\uff0c\u91cd\u5b9a\u5411\u72b6\u6001\u7801\u652f\u6301 301 \u548c 302\u3002</p> <p>\u5177\u4f53\u7684\u914d\u7f6e\u53ef\u53c2\u7167\u5982\u622a\u56fe\u6240\u793a\uff1a</p> <p></p> <p>\u5f53\u6761\u4ef6\u6ee1\u8db3\uff1a\u8bf7\u6c42 HOST \u4e3a XXX \u5e76\u4e14\u5ba2\u6237\u7aef User-Agent \u6b63\u5219\u5339\u914d XXX \u65f6\uff0c\u5219\u6267\u884c\u91cd\u5b9a\u5411\u52a8\u4f5c\uff0c301 \u91cd\u5b9a\u5411\u5230\uff1a</p> <pre><code>https://test.com/$1/123.html\n</code></pre> <p>\u81ea\u5b9a\u4e49\u9519\u8bef\u9875\u9762</p> <p>\u901a\u8fc7\u4f7f\u7528\u8fb9\u7f18\u89c4\u5219\u7684\u3010\u81ea\u52a8\u9519\u8bef\u9875\u9762\u3011\u529f\u80fd\u3002\u4f7f\u7528\u81ea\u5b9a\u4e49\u6e90\u7ad9\u9519\u8bef\u9875\u9762\uff0c\u800c\u975e CDN \u9ed8\u8ba4\u6307\u5b9a\u7684\u9519\u8bef\u9875\u9762\u3002\u5f53\u524d\u652f\u6301\u7684\u6e90\u7ad9\u9519\u8bef\u4fe1\u606f\u72b6\u6001\u7801\u5305\u62ec\uff1a</p> <ul> <li>404</li> <li>500</li> <li>501</li> <li>502</li> <li>503</li> <li>504</li> </ul> <p>\u8fd9\u91cc\u4ee5 404 \u9519\u8bef\u9875\u9762\u4e3a\u4f8b\uff0c\u5f53\u6e90\u7ad9\u54cd\u5e94 404 \u72b6\u6001\u7801\u65f6\uff0c\u5219 302 \u91cd\u5b9a\u5411\u5230\u6307\u5b9a 404 \u9875\u9762\u3002\u5177\u4f53\u7684\u914d\u7f6e\u53ef\u53c2\u7167\u5982\u622a\u56fe\u6240\u793a\uff1a</p> <p></p> <p>URL \u6539\u5199</p> <p>\u914d\u5408\u7f51\u7ad9\u5c06\u52a8\u6001 URL \u8f6c\u6362\u4e3a\u8bed\u4e49 URL\uff0c\u6539\u5584\u641c\u7d22\u5f15\u64ce\u7d22\u5f15\u673a\u5236\uff0c\u63d0\u9ad8\u7f51\u7ad9 SEO \u6392\u540d\u3002\u5c06\u539f\u59cb\u8bf7\u6c42 <code>http://www.example.com/pay/25/8/...</code> \u8fdb\u884c URL \u6539\u5199\u3002 </p> <p>\u76f8\u5173\u914d\u7f6e\u5982\u622a\u56fe\u6240\u793a\uff1a</p> <p></p> <p>\u8bf7\u6c42\u9650\u901f</p> <p>\u901a\u8fc7\u4f7f\u7528\u8fb9\u7f18\u89c4\u5219\u7684\u3010\u8bf7\u6c42\u9650\u901f\u3011\u529f\u80fd\uff0c\u5728\u4e0d\u5f71\u54cd\u7ec8\u7aef\u7528\u6237\u4f53\u9a8c\u7684\u60c5\u51b5\u4e0b\uff0c\u5c06\u8bf7\u6c42\u901f\u5ea6\u63a7\u5236\u5728\u5408\u7406\u8303\u56f4\u4e4b\u5185\uff0c\u8282\u7701 CDN \u5e26\u5bbd\u3002</p> <p>\u5177\u4f53\u914d\u7f6e\u5982\u622a\u56fe\u6240\u793a\uff1a</p> <p></p> <p>\u89c4\u5219\u91ca\u4e49\uff1a\u5f00\u59cb <code>20MB</code> \u4e0d\u9650\u901f\uff0c\u540e\u9762\u9650\u5236\u5230 <code>800KB/s</code>\u3002</p> <p>\u8bbf\u95ee\u63a7\u5236</p> <p>\u7075\u6d3b\u9488\u5bf9\u8bf7\u6c42\u5185\u5bb9\u8fdb\u884c\u8bbf\u95ee\u63a7\u5236\uff0c\u53ef\u4ee5\u54cd\u5e94 403/404 \u72b6\u6001\u7801\u3002\u8fd9\u91cc\u9488\u5bf9 <code>User-Agent</code> \u8fdb\u884c\u8fc7\u6ee4\uff0c\u6bd4\u5982\uff1a\u6765\u81ea\u641c\u72d7\u7b49\u722c\u866b\u7684\u8bf7\u6c42\u76f4\u63a5\u54cd\u5e94 403 \u72b6\u6001\u7801\u3002\u5177\u4f53\u7684\u914d\u7f6e\u5982\u622a\u56fe\u6240\u793a\uff1a</p> <p></p>"},{"location":"cdn/edgerules/#_15","title":"\u89c4\u5219\u6d4b\u8bd5","text":"<p>\u7531\u4e8e\u8fb9\u7f18\u89c4\u5219\u7684 URL \u6539\u5199\u3001\u8fb9\u7f18\u91cd\u5b9a\u5411\u3001\u8bbf\u95ee\u63a7\u5236\u7b49\u52a8\u4f5c\u662f\u6709\u526f\u4f5c\u7528\u7684\uff0c\u4e3a\u4e86\u5b89\u5168\u8d77\u89c1\uff0c \u6bcf\u4e00\u6761\u89c4\u5219\u9ed8\u8ba4\u90fd\u5728\u6d4b\u8bd5\u72b6\u6001\u4e0b\u3002\u6d4b\u8bd5\u72b6\u6001\u4e0b\uff0c\u5e73\u53f0\u4f1a\u81ea\u52a8\u83b7\u53d6\u5ba2\u6237\u7aef\u672c\u5730 IP \u5730\u5740\uff0c\u4e5f\u5373\u89c4\u5219\u4ec5\u9488\u5bf9\u8be5 IP \u5730\u5740\u751f\u6548\u3002\u60a8\u4e5f\u53ef\u4ee5\u66f4\u6362\u5176\u4ed6 IP \u5730\u5740\u8fdb\u884c\u6d4b\u8bd5\u3002\u5177\u4f53\u7684\u914d\u7f6e\u622a\u56fe\u5982\u56fe\u6240\u793a\uff1a</p> <p></p>"},{"location":"cdn/edgerules/#_16","title":"\u7f16\u7a0b\u6a21\u5f0f\uff08\u6848\u4f8b\uff09","text":""},{"location":"cdn/edgerules/#1","title":"1\u3001\u81ea\u5b9a\u4e49\u9632\u76d7\u94fe","text":"<p>\u9700\u6c42\u63cf\u8ff0\uff1a\u5c06\u8bf7\u6c42 URL \u6309\u7167\u4e00\u5b9a\u7684\u7b97\u6cd5\u89c4\u5219\u5b9e\u73b0 token \u9632\u76d7\u94fe\uff0c\u4f7f\u7528\u8fb9\u7f18\u89c4\u5219\u6765\u5b9e\u73b0\uff0c\u4f1a\u66f4\u52a0\u7075\u6d3b\u548c\u9ad8\u6548\u3002token \u9632\u76d7\u94fe\u8be6\u89e3\u8bf7\u53c2\u89c1\uff1a</p> <pre><code>https://blog.upyun.com/?p=1177\n</code></pre> <p>\u8bf7\u6c42 URL \u793a\u4f8b\uff1a</p> <pre><code>/test.ts?key=68ddbe535557d6630a19cebde0cb9252&amp;t=1481106349\n</code></pre> <p>\u4ee5\u4e0a\u8bf7\u6c42 URL \u662f\u6309\u7167\u5982\u4e0b\u7b97\u6cd5\u751f\u6210\u7684\uff0c\u53c2\u89c1\u5982\u4e0b\u7b97\u6cd5\u8bf4\u660e\uff1a</p> <pre><code>&lt;?php\n$etime = time() + 600; // \u6388\u6743 10 \u5206\u949f\u540e\u8fc7\u671f \n$key = 'abc'; // token \u9632\u76d7\u94fe\u5bc6\u94a5\n$path = '/test.ts'; // \u6587\u4ef6\u76f8\u5bf9\u8def\u5f84\n$url = $path.'?key='.md5($key.$etime.$path).'&amp;t='.$etime;\necho $url; \n?&gt;\n</code></pre> <p>CDN \u8282\u70b9\u9700\u8981\u8fdb\u884c\u4e24\u5c42\u5224\u65ad\uff0c\u4e00\u5c42\u5c31\u662f\u5bf9\u65f6\u95f4\u6233\u8fdb\u884c\u6bd4\u8f83\uff0c\u53e6\u5916\u4e00\u5c42\u5c31\u662f\u6309\u7167\u7ea6\u5b9a\u7684\u89c4\u5219\u751f\u6210\u9a8c\u8bc1\u4fe1\u606f\u5e76\u8fdb\u884c\u6bd4\u8f83\uff0c\u770b\u662f\u5426\u4e00\u81f4\u3002\u6309\u7167\u8981\u6c42\uff0c\u53ef\u7f16\u5199\u5982\u4e0b\u89c4\u5219\u96c6\u6765\u5b9e\u73b0\u4ee5\u4e0a\u8981\u6c42\uff1a</p> <pre><code>rules:\n{\n  \"rule\": \"$WHEN($MATCH($_URI, '.ts$'),$OR($NOT($_GET_t),$NOT($_GET_key)))$EXIT(403)\",\n  \"pattern\": \"\"\n}, \n{\n   \"rule\": \"$WHEN($MATCH($_URI, '.ts$'),$GT($_TIME, $_GET_t))$EXIT(401)\",\n   \"pattern\": \"\"\n}, \n{\n  \"rule\": \"$WHEN($MATCH($_URI, '.ts$'),$NOT($EQ($MD5('abc'$_GET_t$_URI),$LOWER($_GET_key))))$EXIT(403)\",\n  \"pattern\": \"\"\n}\n</code></pre> <p>\u89c4\u5219\u91ca\u4e49\uff1a</p> <p>\u7b2c\u4e00\u6761\uff1a\u5f53\u6587\u4ef6\u540e\u7f00\u4e3a <code>ts</code> \u65f6\uff0c\u5224\u65ad\u8bf7\u6c42 URL \u91cc\u9762\u662f\u5426\u5b58\u5728 <code>t</code> \u548c<code>key</code> \u53c2\u6570\uff0c\u5982\u679c\u5176\u4e2d\u4e00\u4e2a\u4e0d\u5b58\u5728\uff0c\u5219\u8fd4\u56de 403\uff1b</p> <p>\u7b2c\u4e8c\u6761\uff1a\u5f53\u6587\u4ef6\u540e\u7f00\u4e3a <code>ts</code> \u65f6\uff0c\u5224\u65ad\u5f53\u524d CDN \u8282\u70b9 UNIX \u65f6\u95f4\u662f\u5426\u5927\u4e8e\u8bf7\u6c42\u53c2\u6570\u91cc\u9762\u7684\u65f6\u95f4\u6233\uff08\u4e5f\u5373\u53c2\u6570 t \u7684\u503c\uff09\uff0c\u5426\u5219\u8fd4\u56de 401\uff1b</p> <p>\u7b2c\u4e09\u6761\uff1a\u5f53\u6587\u4ef6\u540e\u7f00\u4e3a <code>ts</code> \u65f6\uff0cCDN \u8282\u70b9\u6309\u7167\u7ea6\u5b9a\u7684\u7b97\u6cd5\u89c4\u5219\u751f\u6210\u9a8c\u8bc1\u4fe1\u606f\uff08\u4e5f\u5373 MD5 \u503c\uff09\uff0c\u5224\u65ad\u751f\u6210\u7684 MD5 \u503c\u548c\u8bf7\u6c42\u53c2\u6570 <code>key</code> \u7684\u503c\u662f\u5426\u4e00\u81f4\uff0c\u4e0d\u4e00\u81f4\u5219\u8fd4\u56de 403\uff1b</p>"},{"location":"cdn/edgerules/#2","title":"2\u3001\u8fb9\u7f18\u91cd\u5b9a\u5411","text":"<p>\u793a\u4f8b\u4e00\uff1a\u5339\u914d <code>cookie</code> \u8fdb\u884c\u8df3\u8f6c</p> <pre><code>\"rule\": \"$WHEN($NOT($EQ($_URI, /live.html)), $NOT($_COOKIE_token))$REDIRECT(http://test.example.com/no_token.html,301)\",\n\"pattern\": \"\"\n</code></pre> <p>\u89c4\u5219\u91ca\u4e49\uff1a\u9996\u5148\u5339\u914d\u8bf7\u6c42 <code>URI</code> \u662f\u5426\u4e3a <code>/live.html</code>,\u5f53 <code>cookie</code> \u4e2d <code>token</code> \u503c\u4e3a\u7a7a\u65f6\uff0c\u5219\u8df3\u8f6c\u5230\u6307\u5b9a\u5230\u5730\u5740 <code>http://test.example.com/no_token.html</code>\u3002</p>"},{"location":"cdn/edgerules/#3url","title":"3\u3001URL \u6539\u5199","text":"<p>\u793a\u4f8b\u4e00\uff1a\u76ee\u5f55\u53ca\u53c2\u6570\u6539\u5199</p> <p>\u5c06\u8bf7\u6c42 URL \u8f6c\u6362\u4e3a\u5e26\u53c2\u6570\u7684\u52a8\u6001 URL\uff0c\u4f8b\u5982\u8bf7\u6c42\u7684 URL \u4e3a\uff1a</p> <pre><code>http://example.com/pay/25/8/...\n</code></pre> <p>\u9700\u8981 CDN \u8fb9\u7f18\u8282\u70b9\u8f6c\u6362\u4e3a\u5982\u4e0b\u8bf7\u6c42\uff1a</p> <pre><code>http://example.com/pay.php?payid=25&amp;categoryid=8...\n</code></pre> <p>\u8fd9\u4e2a\u65f6\u5019\uff0c<code>pattern</code> \u90e8\u5206\u9700\u8981\u63d0\u53d6\u76ee\u5f55\u6570\u5b57\uff0c\u9700\u8981\u751f\u6210 <code>$1</code> \u548c <code>$2</code> \u8fd9\u6837\u7684\u53d8\u91cf\uff0c\u5982\u4e0b\u89c4\u5219\u6240\u793a\uff1a</p> <pre><code>\"rule\": \"/pay.php?productid=$1&amp;categoryid=$2\",\n\"pattern\": \"^pay/([0-9]+)/([0-9]+)/(.*?).html$\"\n</code></pre> <p>\u89c4\u5219\u91ca\u4e49\uff1a\u5f53\u89e3\u6790\u7684 url \u7b26\u5408\u89c4\u5219 <code>^pay/([0-9]+)/([0-9]+)/(.*?).html$</code>\uff0c\u90a3\u4e48\u5c06\u8bf7\u6c42\u5bfc\u5411\u5230 <code>/pay.php?productid=$1&amp;categoryid=$2</code>\u3002</p> <pre><code>\u4e5f\u5373\u5c06 http://example.com/pay/25/8/... \u8f6c\u6362\u4e3a http://example.com/pay.php?payid=25&amp;categoryid=8...\n</code></pre> <p>\u793a\u4f8b\u4e8c\uff1a\u6587\u4ef6\u540d\u6539\u5199</p> <pre><code>pattern: /(.*)/playlist\\.m3u8$\nrule: /$1'.m3u8'\n</code></pre> <p>\u89c4\u5219\u91ca\u4e49\uff1a\u5f53\u8bbf\u95ee\u5730\u5740\u4e3a <code>http://domain/app/stream/playlist.m3u8</code> \u65f6\uff0c\u5c06\u8bbf\u95ee\u5730\u5740\u6539\u5199\u4e3a <code>http://domain/app/stream.m3u8</code>\u3002</p> <p>\u5e94\u7528\u573a\u666f\uff1a\u5728\u76f4\u64ad\u5e94\u7528\u573a\u666f\u4e2d\uff0c\u56e0\u4e3a\u5ba2\u6237\u7aef\u673a\u5236\u65e0\u6cd5\u6216\u8005\u4e0d\u65b9\u4fbf\u5347\u7ea7\u7684\u60c5\u51b5\uff0c\u53ef\u4ee5\u901a\u8fc7 URL \u6539\u5199\uff0c\u5c06 <code>/stream/playlist.m3u8</code> \u6539\u4e3a <code>/stream.m3u8</code>\uff0c\u5176\u4e2d <code>app</code> \u4ee3\u8868\u53d1\u5e03\u70b9\uff0c<code>stream</code> \u4ee3\u8868\u6d41\u540d\u3002</p>"},{"location":"cdn/edgerules/#4","title":"4\u3001\u8bf7\u6c42/\u54cd\u5e94\u5934\u4fee\u6539","text":"<p>\u793a\u4f8b\u4e00\uff1a\u6dfb\u52a0\u3001\u5220\u9664\u8bf7\u6c42\u5934</p> <pre><code>\"rule\": \"$ADD_REQ_HEADER(X-From-Cdn, upyun)\",\n\"pattern\": \"\"\n</code></pre> <p>\u89c4\u5219\u91ca\u4e49\uff1a\u6dfb\u52a0\u8bf7\u6c42\u5934 <code>X-From-Cdn:upyun</code>\uff0c\u8bc6\u522b CDN \u5382\u5546\u3002</p> <pre><code>\"rule\": \"$DEL_REQ_HEADER(Accept-Encoding) \",\n\"pattern\": \"\"\n</code></pre> <p>\u89c4\u5219\u91ca\u4e49\uff1a\u5220\u9664\u8bf7\u6c42\u5934 <code>Accept-Encoding</code> \uff0c\u65e0\u8bba\u7ec8\u7aef\u662f\u5426\u53d1\u8d77 <code>gzip</code> \u7684\u8bf7\u6c42\uff0c\u90fd\u8fdb\u884c <code>ungzip</code> \u7684\u8fd4\u56de\u3002</p> <p>\u793a\u4f8b\u4e8c\uff1a\u6dfb\u52a0\u54cd\u5e94\u5934</p> <pre><code>\"rule\": \"$ADD_RSP_HEADER(CDN, UPYUN, 1) \",\n\"pattern\": \"\"\n</code></pre> <p>\u89c4\u5219\u91ca\u4e49\uff1a\u6dfb\u52a0\u54cd\u5e94\u5934 <code>CDN</code>  \u4e3a <code>UPYUN</code>, <code>1</code> \u8868\u793a\u4f1a\u8986\u76d6\u6389\u5df2\u6709\u7684\u54cd\u5e94\u5934\uff0c\u901a\u8fc7\u54cd\u5e94\u5934\u4e5f\u53ef\u4ee5\u8bc6\u522b CDN \u5382\u5546\u3002</p>"},{"location":"cdn/edgerules/#5url","title":"5\u3001URL \u9650\u901f","text":"<p>\u5047\u5982\u8bf7\u6c42\u7684 URL \u4e3a\uff1a<code>http://test.example.com/mp4/4E10F356C0FEAD359C33DC5901307461-10.mp4</code> \uff0c\u9700\u8981\u5bf9\u8be5\u7c7b\u578b\u6587\u4ef6\u8fdb\u884c\u9650\u901f\uff0c\u9650\u901f\u8981\u6c42\u4e3a\uff1a\u524d 20MB \u4e0d\u9650\u901f\uff0c20MB \u4e4b\u540e\u9650\u901f 800 KB/s\uff0c\u89c4\u5219\u53ef\u8fd9\u6837\u7f16\u5199\uff1a</p> <pre><code>\"rule\": \"$WHEN($1, $EQ($_HOST, 'test.example.com'))$LIMIT_RATE_AFTER(20, m)$LIMIT_RATE(800, k)\",\n\"pattern\": \"^(/).+-10\\.mp4$\"\n</code></pre> <p>\u89c4\u5219\u91ca\u4e49\uff1a\u5f53 <code>$1</code> \u4e3a\u771f\uff0c\u4e14\u6ee1\u8db3\u8bf7\u6c42 <code>HOST</code> \u4e3a <code>test.example.com</code> \u65f6 \uff0c\u5f00\u59cb 20MB \u4e0d\u9650\u901f\uff0c\u540e\u9762\u9650\u5236\u5230 <code>800KB/s</code>\u3002</p>"},{"location":"cdn/edgerules/#6","title":"6\u3001\u5927\u5c0f\u5199\u8f6c\u6362","text":"<p>\u8be5\u90e8\u5206\u4f1a\u4f7f\u7528\u5230<code>$LOWER(E)</code> \u51fd\u6570\uff0c\u76f4\u63a5\u770b\u89c4\u5219\uff1a</p> <pre><code>\"rule\": \"$WHEN($MATCH($LOWER($_URI), /uptest.png)) /UPtest.png\",\n\"pattern\": \"\"\n</code></pre> <p>\u89c4\u5219\u91ca\u4e49\uff1a\u9996\u5148\u662f\u83b7\u53d6\u8bf7\u6c42 <code>URI</code> \uff0c\u4f7f\u7528 <code>$LOWER(E)</code> \u51fd\u6570\u5c06 <code>URI</code> \u8f6c\u6362\u4e3a\u5c0f\u5199\uff0c\u548c <code>/uptest.png</code> \u8fdb\u884c\u5339\u914d\uff0c\u5339\u914d\u6210\u529f\uff0c\u5219\u76f4\u63a5\u5c06 <code>URI</code> \u6539\u5199\u4e3a<code>/UPtest.png</code>\u3002\u5982\u679c\u9700\u8981\u5c06\u5b57\u7b26\u4e32\u8f6c\u6362\u4e3a\u5927\u5199\uff0c\u4f7f\u7528 <code>$UPPER(E)</code> \u51fd\u6570\u3002</p>"},{"location":"cdn/edgerules/#7","title":"7\u3001\u6570\u503c\u6bd4\u8f83","text":"<p>\u4e5f\u5373\u5c06\u5b57\u7b26\u4e32\u6216\u8005\u6570\u5b57\u8fdb\u884c\u6bd4\u8f83\u3002\u4f8b\u5982\uff1a <code>A</code> \u548c <code>B</code> \u8fdb\u884c\u6bd4\u8f83\uff0c\u662f\u5426\u5927\u4e8e\u3001\u5927\u4e8e\u7b49\u4e8e\u3001\u76f8\u7b49\u7b49\u903b\u8f91\uff0c\u53c2\u89c1\u5982\u4e0b\u89c4\u5219\u793a\u4f8b\uff1a</p> <pre><code>\"rule\": \"$GT($_TIME,$ADD($INT($_GET_t,16,10),3600))\",\n\"pattern\": \"\"\n</code></pre> <p>\u89c4\u5219\u91ca\u4e49\uff1a\u5c06\u8bf7\u6c42 URL \u4e2d\u7684 t \u53c2\u6570 \u7531 16 \u8fdb\u5236\u8f6c\u6362\u4e3a 10 \u8fdb\u5236\uff0c\u7136\u540e\u52a0\u4e0a 3600 \uff0c\u5c06\u76f8\u52a0\u5f97\u5230\u7684\u503c\u548c\u5f53\u524d\u7cfb\u7edf\u65f6\u95f4\u8fdb\u884c\u6bd4\u8f83\u3002\u8fd9\u91cc\u4f7f\u7528\u5230\u4e86 <code>$GT(E1\uff0cE2\uff09</code> \u51fd\u6570\uff0c\u4e5f\u5373 <code>E1</code> \u662f\u5426\u5927\u4e8e <code>E2</code>\uff0c\u5927\u4e8e\u5373\u8fd4\u56de true \u3002\u53e6\u5916\uff0c\u7b49\u4e8e\u4f7f\u7528 <code>$EQ(E1\uff0cE2\uff09</code> \u51fd\u6570\uff0c\u5927\u4e8e\u7b49\u4e8e\u4f7f\u7528 <code>$GE(E1\uff0cE2\uff09</code> \u51fd\u6570\u3002</p> <p>\u5982\u6709\u7591\u95ee\u8bf7 \u8054\u7cfb\u6211\u4eec</p>"},{"location":"cdn/faq/","title":"\u5e38\u89c1\u95ee\u9898","text":""},{"location":"cdn/faq/#_1","title":"\u7f13\u5b58\u76f8\u5173","text":""},{"location":"cdn/faq/#cdn","title":"CDN \u9ed8\u8ba4\u7684\u7f13\u5b58\u7b56\u7565\u662f\u600e\u6837\u7684\uff1f","text":"<p>\u5728\u6ca1\u6709\u5339\u914d\u5230\u81ea\u5b9a\u4e49\u7f13\u5b58\u89c4\u5219\u4e14\u6e90\u7ad9\u4e5f\u6ca1\u6709\u8fd4\u56de\u4efb\u4f55\u6709\u6548\u7f13\u5b58\u5934\u7684\u60c5\u51b5\u4e0b\uff0c\u6211\u4eec\u7684\u9ed8\u8ba4\u914d\u7f6e\u7b56\u7565\u5982\u4e0b\uff1a</p> <p>1\uff09\u9488\u5bf9\u9759\u6001\u8d44\u6e90\uff0c\u6240\u6709\u6b63\u5e38\u72b6\u6001\u7801\uff08\u5927\u4e8e\u7b49\u4e8e 200 \u5c0f\u4e8e 400\uff09\u5747\u7f13\u5b58 8 \u5929\u3002\u7279\u522b\u5730\uff0c301 \u54cd\u5e94\u7f13\u5b58 2 \u5c0f\u65f6\uff0c302 \u54cd\u5e94\u7f13\u5b58 20 \u5206\u949f</p> <p>2\uff09\u9488\u5bf9\u52a8\u6001\u8d44\u6e90\uff0c\u7a0b\u5e8f\u4f1a\u81ea\u52a8\u8bc6\u522b\uff0c\u5219\u4e0d\u8fdb\u884c\u7f13\u5b58</p> <p>3\uff09\u5bf9\u4e8e\u5176\u4ed6\u5927\u4e8e\u7b49\u4e8e 400 \u7684\u4e0d\u6b63\u5e38\u54cd\u5e94\uff0c\u5219\u4e0d\u8fdb\u884c\u7f13\u5b58</p>"},{"location":"cdn/faq/#cdn_1","title":"CDN \u8d44\u6e90\u662f\u5982\u4f55\u63a7\u5236\u7f13\u5b58\u8fc7\u671f\u65f6\u95f4\u7684\uff1f","text":"<p>CDN \u7f13\u5b58\u7ec4\u4ef6\u4e25\u683c\u9075\u5b88 HTTP \u7684\u6807\u51c6\u534f\u8bae\uff0c\u5177\u4f53\u7684\u7f13\u5b58\u65f6\u95f4\u7531 HTTP  \u54cd\u5e94\u5934\u91cc\u9762\u7684 <code>Cache-Control</code> \u548c <code>Expires</code> \u54cd\u5e94\u5934\u63a7\u5236\u3002</p> <p>\u6ce8\u610f\uff1a\u7531\u4e8e <code>Cache-Control</code> \u4f7f\u7528\u7684\u662f\u76f8\u5bf9\u65f6\u95f4\u6765\u6307\u5b9a\u7684\u8fc7\u671f\u65f6\u95f4\uff0c\u6240\u4ee5\u4e00\u822c\u4f7f\u7528 <code>Cache-Control</code> \u6765\u6307\u5b9a\u8fc7\u671f\u65f6\u95f4\u3002</p>"},{"location":"cdn/faq/#_2","title":"\u7f13\u5b58\u914d\u7f6e\u4f18\u5148\u7ea7\u662f\u600e\u6837\u7684\uff1f","text":"<p>\u4e0d\u7f13\u5b58\u914d\u7f6e\uff08\u540e\u53f0\u8bbe\u7f6e\uff09 &gt; \u81ea\u5b9a\u4e49\u7f13\u5b58\u914d\u7f6e\uff08\u540e\u53f0\u914d\u7f6e\uff09 &gt; \u6e90\u7ad9\u7f13\u5b58\u914d\u7f6e &gt; \u9ed8\u8ba4\u7f13\u5b58\u7b56\u7565\u3002\u4ee5\u4e0a\u7f13\u5b58\u914d\u7f6e\u4f18\u5148\u7ea7\u76ee\u524d\u4e0d\u652f\u6301\u987a\u5e8f\u8c03\u8282\uff0c\u540e\u7eed\u6211\u4eec\u4f1a\u8003\u8651\u652f\u6301\u3002</p>"},{"location":"cdn/faq/#_3","title":"\u5982\u4f55\u5224\u65ad\u8bbe\u7f6e\u7684\u7f13\u5b58\u65f6\u95f4\u5df2\u7ecf\u751f\u6548\uff1f","text":"<p>\u53ef\u4ee5\u901a\u8fc7 <code>Cache-Control\uff1amax-age=xxxx</code> \u4e2d <code>max-age</code> \u7684\u503c\u548c\u81ea\u5b9a\u4e49\u7f13\u5b58\u914d\u7f6e\u7684\u503c\u8fdb\u884c\u6bd4\u8f83\u5373\u53ef\uff0c\u5982\u679c\u4e00\u81f4\u5219\u8bf4\u660e\u5df2\u7ecf\u751f\u6548\u3002\u8be6\u60c5\u53ef\u53c2\u89c1 \u7f13\u5b58\u9a8c\u8bc1\u3002</p>"},{"location":"cdn/faq/#cdn_2","title":"\u5df2\u7ecf\u7f13\u5b58\u5728 CDN \u8282\u70b9\u7684\u6587\u4ef6\u5982\u4f55\u66f4\u65b0\uff0c\u662f\u5b9e\u65f6\u7684\u4e48\uff1f\uff1f","text":"<p>\u4e0d\u662f\u5b9e\u65f6\u7684\uff0c\u7f13\u5b58\u66f4\u65b0\u5206\u4e3a\u4e3b\u52a8\u66f4\u65b0\u548c\u88ab\u52a8\u66f4\u65b0\u4e24\u79cd\u65b9\u5f0f\u3002\u4e3b\u52a8\u66f4\u65b0\u4e3b\u8981\u662f\u6307\u540c\u540d\u6587\u4ef6\u5728\u6e90\u7ad9\u66f4\u65b0\u4e4b\u540e\uff0c\u9700\u8981\u5728\u7ba1\u7406\u63a7\u5236\u53f0\u624b\u52a8\u53bb\u5237\u65b0\u6587\u4ef6\uff0c\u6216\u8005\u901a\u8fc7 API \u63a5\u53e3\u5b8c\u6210\uff1b\u88ab\u52a8\u5237\u65b0\u662f\u7b49\u6587\u4ef6\u5728 CDN \u8282\u70b9\u7684\u7f13\u5b58\u8fc7\u671f\u4e4b\u540e\u56de\u6e90\u62c9\u53d6\u6700\u65b0\u7684\u6587\u4ef6\u3002</p>"},{"location":"cdn/faq/#cdn_3","title":"CDN \u53ef\u4ee5\u7f13\u5b58\u54ea\u4e9b\u6587\u4ef6\uff1f","text":"<p>\u4e00\u822c\u60c5\u51b5\u4e0b\uff0cCDN \u9664\u4e86\u5bf9\u4e8e PHP\u3001JSP\u3001ASP \u7b49\u52a8\u6001\u6587\u4ef6\u4e0d\u80fd\u7f13\u5b58\u5916 \uff0c\u5176\u4ed6\u6587\u4ef6\u90fd\u53ef\u4ee5\u7f13\u5b58\u3002</p>"},{"location":"cdn/faq/#_4","title":"\u52a8\u6001\u7f51\u9875\u6587\u4ef6\u53ef\u4ee5\u7f13\u5b58\u5417\uff1f","text":"<p>\u4e0d\u53ef\u4ee5\u3002\u53c8\u62cd\u4e91 CDN \u4f1a\u9488\u5bf9\u6587\u4ef6\u81ea\u52a8\u8fdb\u884c\u52a8\u9759\u5206\u79bb\uff0c\u4e0d\u4f1a\u5bf9\u52a8\u6001\u7f51\u9875\u8fdb\u884c\u7f13\u5b58\u3002</p>"},{"location":"cdn/faq/#https-http","title":"HTTPS \u548c HTTP \u53ef\u4ee5\u5171\u4eab\u4e00\u4efd\u7f13\u5b58\u8d44\u6e90\u5417\uff1f","text":"<p>\u5982\u679c\u5728\u7ba1\u7406\u63a7\u5236\u540e\u53f0\u56de\u6e90\u65b9\u5f0f\u9009\u62e9\uff3b\u534f\u8bae\u8ddf\u968f\uff3d\uff0c\u5c31\u4e0d\u5171\u4eab\u3002\u4e0d\u5f00\u542f\uff3b\u534f\u8bae\u8ddf\u968f\uff3d\uff0c\u5219\u5171\u4eab\u3002</p>"},{"location":"cdn/faq/#_5","title":"\u5237\u65b0\u76f8\u5173","text":""},{"location":"cdn/faq/#_6","title":"\u7f13\u5b58\u5237\u65b0\u548c\u6587\u4ef6\u9884\u70ed\u6709\u4f55\u533a\u522b\uff1f","text":"<p>\u7f13\u5b58\u5237\u65b0\uff1a\u662f\u6307\u901a\u8fc7\u7ba1\u7406\u63a7\u5236\u53f0\u6216\u8005 API \u63a5\u53e3\u7684\u65b9\u5f0f\u5c06\u7f13\u5b58\u5728 CDN \u8282\u70b9\u7684\u8d44\u6e90\u6587\u4ef6\u5220\u9664\u6216\u81f4\u8fc7\u671f\u5904\u7406\uff0c\u65b0\u7684\u8bf7\u6c42\u8fc7\u6765\u4e4b\u540e\u4f1a\u56de\u6e90\u7ad9\u670d\u52a1\u5668\u83b7\u53d6\u65b0\u7684\u6587\u4ef6\u3002</p> <p>\u6587\u4ef6\u9884\u70ed\uff1a\u662f\u63d0\u524d\u5c06\u8d44\u6e90\u6587\u4ef6\u7f13\u5b58\u81f3 CDN \u8fb9\u7f18\u8282\u70b9\uff0c\u65b0\u7684\u8bf7\u6c42\u8fc7\u6765\u4e4b\u540e\u53ef\u4ee5\u76f4\u63a5\u547d\u4e2d\uff0c\u65e0\u9700\u56de\u6e90\u670d\u52a1\u5668\u83b7\u53d6\u8d44\u6e90\u6587\u4ef6\uff0c\u53ef\u4ee5\u6709\u6548\u964d\u4f4e\u6e90\u7ad9\u538b\u529b\uff0c\u63d0\u5347\u6700\u7ec8\u7528\u6237\u9996\u6b21\u8bbf\u95ee\u4f53\u9a8c\u3002</p>"},{"location":"cdn/faq/#url","title":"\u89c4\u5219\u5237\u65b0\u548c URL \u5237\u65b0\u6709\u4ec0\u4e48\u533a\u522b\uff1f","text":"<p>\u89c4\u5219\u5237\u65b0\uff1a\u662f\u6307\u6e90\u7ad9\u6279\u91cf\u66f4\u65b0\u6587\u4ef6\u65f6\uff0c\u4f8b\u5982\u67d0\u4e2a\u76ee\u5f55\u6216\u8005\u67d0\u79cd\u7c7b\u578b\u7684\u6587\u4ef6\uff0c\u9700\u8981\u6279\u91cf\u5237\u65b0\u6587\u4ef6\uff0c\u53ef\u4ee5\u901a\u8fc7\u89c4\u5219\u5237\u65b0\u6765\u8fdb\u884c\u3002\u89c4\u5219\u793a\u4f8b\uff1a<code>http://example.com/video/*</code>\u3001<code>http://example.com/image/*.png</code>\u3002</p> <p>URL \u5237\u65b0\uff1a\u662f\u6307\u6e90\u7ad9\u66f4\u65b0\u5c11\u91cf\u8d44\u6e90\u6587\u4ef6\u65f6\uff0c\u53ef\u4ee5\u901a\u8fc7 URL \u5237\u65b0\u6765\u8fdb\u884c\u5237\u65b0\u3002\u793a\u4f8b\uff1a<code>http://example.com/image/logo.png</code>\u3002</p> <p>\u8be6\u7ec6\u4ecb\u7ecd\uff0c\u8bf7\u53c2\u89c1 \u5237\u65b0\u9884\u70ed\u3002</p>"},{"location":"cdn/faq/#_7","title":"\u7f13\u5b58\u5237\u65b0\u7684\u751f\u6548\u65f6\u95f4\u662f\u591a\u5c11\uff1f","text":"<p>\u7f13\u5b58\u5237\u65b0\u7684\u5168\u7f51\u751f\u6548\u65f6\u95f4\u4e00\u822c\u662f <code>10</code> \u5206\u949f\u5185\u5237\u65b0\u5b8c\u6210\u3002</p>"},{"location":"cdn/faq/#_8","title":"\u4f7f\u7528\u4e86\u53c8\u62cd\u4e91\u5bf9\u8c61\u5b58\u50a8\u670d\u52a1\u65f6\uff0c\u6587\u4ef6\u66f4\u65b0\u9700\u8981\u624b\u52a8\u5237\u65b0\u5417\uff1f","text":"<p>\u4e0d\u9700\u8981\u3002\u4f7f\u7528\u4e86\u53c8\u62cd\u4e91\u5bf9\u8c61\u5b58\u50a8\u670d\u52a1\u65f6\uff0c\u5b58\u50a8\u4e2d\u8d44\u6e90\u66f4\u65b0\uff08\u66ff\u6362\u6216\u5220\u9664\uff09\u65f6\u4f1a\u81ea\u52a8\u89e6\u53d1 CDN \u8282\u70b9\u5237\u65b0\u7f13\u5b58\uff0c\u4f1a\u5728 5 \u5206\u949f\u5185\u751f\u6548\uff0c\u6240\u4ee5\u60a8\u65e0\u9700\u8fdb\u884c\u624b\u52a8\u5237\u65b0\u64cd\u4f5c\u3002</p>"},{"location":"cdn/faq/#cdn_4","title":"\u53d1\u73b0\u4ece CDN \u8bbf\u95ee\u7684\u8d44\u6e90\u6587\u4ef6\u548c\u6e90\u7ad9\u8d44\u6e90\u4e0d\u4e00\u81f4\u600e\u4e48\u529e\uff1f","text":"<p>\u901a\u8fc7\u7ba1\u7406\u63a7\u5236\u53f0\u6216 API \u63a5\u53e3\u6267\u884c\u624b\u52a8\u5237\u65b0\u7f13\u5b58\u3002</p>"},{"location":"cdn/faq/#_9","title":"\u6027\u80fd\u76f8\u5173","text":""},{"location":"cdn/faq/#_10","title":"\u7f13\u5b58\u547d\u4e2d\u7387\u4f4e\u7684\u539f\u56e0\u53ef\u80fd\u6709\u54ea\u4e9b\uff1f","text":"<p>1\uff09\u7f13\u5b58\u914d\u7f6e\u95ee\u9898\uff0c\u5982\u7f13\u5b58\u8fc7\u671f\u65f6\u95f4\u8bbe\u7f6e\u5f97\u8f83\u77ed\uff1b</p> <p>2\uff09<code>Http Header</code> \u5bfc\u81f4\u65e0\u6cd5\u7f13\u5b58\uff0c\u8bf7\u68c0\u67e5\u6e90\u7ad9  <code>Cache-Control</code> \u6216  <code>Expires</code> \u7684\u8bbe\u7f6e;</p> <p>3\uff09\u7f51\u7ad9\u5185\u5bb9\u57fa\u672c\u4e0a\u90fd\u662f\u52a8\u6001\u5185\u5bb9\uff0c\u53ef\u7f13\u5b58\u7684\u5185\u5bb9\u5c11;</p> <p>4\uff09\u7f51\u7ad9\u8bbf\u95ee\u91cf\u4f4e\uff0c\u6587\u4ef6\u70ed\u5ea6\u8f83\u4f4e\uff0c\u5bfc\u81f4\u9891\u7e41\u56de\u6e90\u3002</p>"},{"location":"cdn/faq/#_11","title":"\u5982\u4f55\u67e5\u770b\u670d\u52a1\u7684\u7f13\u5b58\u547d\u4e2d\u7387\uff1f","text":"<p>\u53ef\u4ee5\u53bb\u53c8\u62cd\u4e91\u7ba1\u7406\u63a7\u5236\u53f0\u201c\u76d1\u63a7\u201d\u6a21\u5757\uff0c\u53ef\u4ee5\u6839\u636e\u670d\u52a1\u3001\u57df\u540d\u3001\u5730\u533a\u3001\u8fd0\u8425\u5546\u3001\u65f6\u95f4\u7b49\u7ef4\u5ea6\u67e5\u770b\u5386\u53f2\u7f13\u5b58\u547d\u4e2d\u7387\u3002\u8be6\u89c1\u6587\u6863 \u6027\u80fd\u76d1\u63a7\u3002</p>"},{"location":"cdn/faq/#_12","title":"\u5982\u4f55\u5224\u65ad\u8d44\u6e90\u6587\u4ef6\u5df2\u7ecf\u7f13\u5b58\u547d\u4e2d\uff1f","text":"<p>\u53ef\u901a\u8fc7\u5de5\u5177\u67e5\u770b <code>Response Headers</code> \u4e2d <code>X-Cache</code> \u4fe1\u606f\uff0c\u5982\u679c\u5b57\u6bb5\u503c\u91cc\u6709\u81f3\u5c11\u6709\u4e00\u4e2a <code>HIT</code> \uff0c\u5219\u8868\u660e\u5df2\u7ecf\u547d\u4e2d\u7f13\u5b58\u3002\u4f8b\u5982 <code>X-Cache:MISS from mix-hz-fdi-169; HIT(R) from ctn-zj-lna2-003</code>\uff0c\u8bf4\u660e\u5df2\u7ecf\u547d\u4e2d\u7f13\u5b58\u3002</p>"},{"location":"cdn/faq/#_13","title":"\u5982\u4f55\u63d0\u9ad8\u6587\u4ef6\u7f13\u5b58\u547d\u4e2d\u7387\uff1f","text":"<p>1\uff09\u5408\u7406\u7684\u914d\u7f6e\u7f13\u5b58\u8fc7\u671f\u65f6\u95f4\uff0c\u6839\u636e\u4e1a\u52a1\u60c5\u51b5\uff0c\u9002\u5f53\u63d0\u9ad8\u6587\u4ef6\u7684\u7f13\u5b58\u8fc7\u671f\u65f6\u95f4</p> <p>2\uff09\u5728\u4e0d\u5f71\u54cd\u4e1a\u52a1\u8bbf\u95ee\u7684\u60c5\u51b5\u4e0b\uff0c\u53ef\u4ee5\u914d\u7f6e <code>\u53c2\u6570\u4e0d\u8ddf\u968f</code> \u7279\u6027</p>"},{"location":"cdn/faq/#gzip","title":"\u652f\u6301 GZIP \u538b\u7f29\u5417\uff1f","text":"<p>\u53c8\u62cd\u4e91 CDN \u9ed8\u8ba4\u5f00\u542f\u4e86 <code>GZIP</code> \u538b\u7f29\u7279\u6027\u3002\u652f\u6301\u60c5\u51b5\u53ef\u53c2\u89c1\u6587\u6863 GZIP \u538b\u7f29\u3002</p>"},{"location":"cdn/faq/#_14","title":"\u56de\u6e90\u5e26\u5bbd\u8fc7\u5927\uff0c\u5982\u4f55\u6709\u6548\u964d\u4f4e\u56de\u6e90\u5e26\u5bbd\uff1f","text":"<p>1\uff09\u68c0\u67e5\u7f13\u5b58\u8fc7\u671f\u65f6\u95f4\u914d\u7f6e\u662f\u5426\u751f\u6548</p> <p>2\uff09\u9002\u5f53\u63d0\u9ad8\u6587\u4ef6\u7684\u7f13\u5b58\u8fc7\u671f\u65f6\u95f4\uff0c\u51cf\u5c11\u56de\u6e90\u9891\u5ea6</p> <p>3\uff09\u9488\u5bf9\u70ed\u5ea6\u8f83\u9ad8\u7684\u8d44\u6e90\u6587\u4ef6\uff0c\u53ef\u4ee5\u63d0\u524d\u9488\u5bf9\u8fd9\u4e9b\u6587\u4ef6\u8fdb\u884c\u9884\u70ed\u64cd\u4f5c</p> <p>4\uff09\u6839\u636e\u6e90\u7ad9\u60c5\u51b5\uff0c\u5408\u7406\u914d\u7f6e\u56de\u6e90\u7ebf\u8def\uff0c\u5177\u4f53\u9700\u8981\u8054\u7cfb\u6280\u672f\u652f\u6301</p>"},{"location":"cdn/faq/#_15","title":"\u529f\u80fd\u76f8\u5173","text":""},{"location":"cdn/faq/#_16","title":"\u4ec0\u4e48\u662f\u9759\u6001\u548c\u52a8\u6001\u7f51\u9875\uff1f","text":"<p>\u9759\u6001\u7f51\u9875\uff1a\u7f51\u7ad9\u8bbe\u8ba1\u4e2d\uff0c\u7eaf\u7cb9 HTML \u683c\u5f0f\u7684\u7f51\u9875\u901a\u5e38\u88ab\u79f0\u4e3a\u201c\u9759\u6001\u7f51\u9875\u201d\u3002\u800c\u5bf9\u4e8e CDN  \u6765\u8bf4\u9759\u6001\u7f51\u9875\u662f\u8fd0\u884c\u4e8e\u5ba2\u6237\u7aef\u7684\u7a0b\u5e8f\u3001\u7f51\u9875\u3001\u63d2\u4ef6\u3001\u7ec4\u4ef6\uff0c\u4f8b\u5982 HTML \u9875\u9762\u3001Flash\u3001JavaScript\u3001VBScript \u7b49\u7b49\uff0c\u4e0d\u4f1a\u968f\u7740\u5ba2\u6237\u7684\u6539\u53d8\u53d1\u751f\u53d8\u5316\u3002</p> <p>\u52a8\u6001\u7f51\u9875\uff1a\u662f\u5728\u670d\u52a1\u5668\u7aef\u8fd0\u884c\u7684\u7a0b\u5e8f\u3001\u7f51\u9875\u3001\u7ec4\u4ef6\uff0c\u5b83\u4eec\u4f1a\u968f\u4e0d\u540c\u5ba2\u6237\u3001\u4e0d\u540c\u65f6\u95f4\u3001\u4e0d\u540c\u64cd\u4f5c\uff0c\u8fd4\u56de\u4e0d\u540c\u7684\u7f51\u9875\uff0c\u4f8b\u5982 ASP\u3001PHP\u3001JSP\u3001ASP\u3001CGI \u7b49\uff0c\u901a\u5e38\u52a8\u6001\u7f51\u9875\u8282\u70b9\u4e0d\u4f1a\u8fdb\u884c\u7f13\u5b58\u3002</p>"},{"location":"cdn/faq/#_17","title":"\u652f\u6301\u7f51\u9875\u56fe\u7247\u3001\u52a8\u6001\u5185\u5bb9\u3001\u5927\u6587\u4ef6\u4e0b\u8f7d\u3001\u70b9\u64ad\u52a0\u901f\u5417\uff1f","text":"<p>\u652f\u6301\u3002\u53c8\u62cd\u4e91\u5168\u7f51\u52a0\u901f\u9ed8\u8ba4\u652f\u6301\u7f51\u9875\u56fe\u7247\u3001\u52a8\u6001\u5185\u5bb9\u3001\u5927\u6587\u4ef6\u4e0b\u8f7d\u3001\u6d41\u5a92\u4f53\u70b9\u64ad\u52a0\u901f\u7b49\u5e94\u7528\u573a\u666f\u3002\u8be6\u7ec6\u4ecb\u7ecd\u8bf7\u53c2\u89c1 \u5e94\u7528\u573a\u666f \u3002</p>"},{"location":"cdn/faq/#cdn_5","title":"CDN \u652f\u6301\u6cdb\u57df\u540d\u52a0\u901f\u4e48\uff1f","text":"<p>\u652f\u6301\u3002\u9664\u5e38\u89c4\u5f62\u5f0f\u7684\u57df\u540d\u5916\uff08\u5305\u62ec\u9876\u7ea7\u57df\u540d\uff09\uff0c\u6211\u4eec\u8fd8\u652f\u6301\u6cdb\u57df\u540d\u7ed1\u5b9a\uff0c\u6bd4\u5982 <code>*.yourdomain.com</code>\uff1b\u7279\u522b\u5730\uff0c\u5176\u4e2d <code>*</code> \u6700\u591a\u652f\u6301\u5339\u914d 4 \u5c42\uff1a</p> <pre><code>[v] *.yourdomain.com =&gt; foo.yourdomain.com\n[v] *.yourdomain.com =&gt; bar.yourdomain.com\n[v] *.yourdomain.com =&gt; foo.bar.yourdomain.com\n[v] *.yourdomain.com =&gt; foo.bar.baz.yourdomain.com\n[v] *.yourdomain.com =&gt; foo.bar.baz.qux.yourdomain.com\n[x] *.yourdomain.com =&gt; foo.bar.baz.qux.quxx.yourdomain.com\n\n[v] *.bar.yourdomain.com =&gt; foo.bar.yourdomain.com\n[v] *.bar.yourdomain.com =&gt; baz.foo.bar.yourdomain.com\n[x] *.bar.yourdomain.com =&gt; foo.bar.baz.yourdomain.com\n</code></pre>"},{"location":"cdn/faq/#cdn_6","title":"CDN \u53ef\u4ee5\u9488\u5bf9\u5927\u6587\u4ef6\u8fdb\u884c\u5206\u6bb5\u7f13\u5b58\u5417\uff1f","text":"<p>\u652f\u6301\u3002\u6211\u4eec\u9488\u5bf9\u5df2\u7ecf\u4f7f\u7528\u53c8\u62cd\u4e91\u5bf9\u8c61\u5b58\u50a8\u670d\u52a1\u7684\u5ba2\u6237\u5df2\u7ecf\u9ed8\u8ba4\u5f00\u542f\u4e86\u5206\u6bb5\u7f13\u5b58\u7279\u6027\uff1b\u9488\u5bf9\u4f7f\u7528\u81ea\u4e3b\u6e90\u7ad9\u7684 CDN \u670d\u52a1\uff0c\u7528\u6237\u53ef\u4ee5\u9488\u5bf9\u7279\u5b9a\u670d\u52a1\u6709\u9009\u62e9\u6027\u7684\u5f00\u542f\u548c\u5173\u95ed\u6b64\u7279\u6027\u3002</p>"},{"location":"cdn/faq/#cdn_7","title":"CDN \u8d44\u6e90\u76d1\u63a7\u7684\u7ef4\u5ea6\u5305\u62ec\u54ea\u4e9b\uff1f","text":"<p>1\uff09\u5e26\u5bbd\u53ca\u6d41\u91cf\u67e5\u8be2\uff1a\u60a8\u53ef\u4ee5\u67e5\u8be2\u6307\u5b9a\u65f6\u95f4\u533a\u95f4\u3001\u57df\u540d\u3001\u670d\u52a1\u540d\u3001\u5730\u533a\u3001\u8fd0\u8425\u5546\u7b49\u6761\u4ef6\u4e0b\uff0c\u5e26\u5bbd\u53ca\u6d41\u91cf\u7684\u66f2\u7ebf\u56fe\uff0c\u4ee5\u53ca\u8fd0\u8425\u5546\u3001\u5730\u533a\u5206\u5e03\u53ca\u6392\u540d\u60c5\u51b5\uff1b</p> <p>2\uff09\u8bf7\u6c42\u6570\u67e5\u8be2\uff1a\u60a8\u53ef\u4ee5\u67e5\u8be2\u6307\u5b9a\u65f6\u95f4\u533a\u95f4\u3001\u57df\u540d\u3001\u670d\u52a1\u540d\u3001\u5730\u533a\u3001\u8fd0\u8425\u5546\u7b49\u6761\u4ef6\u4e0b\uff0c\u7528\u6237\u8bf7\u6c42\u6570\u7684\u66f2\u7ebf\u56fe\uff1b</p> <p>3\uff09\u56de\u6e90\u7edf\u8ba1\uff1a\u60a8\u53ef\u4ee5\u67e5\u770b\u6307\u5b9a\u65f6\u95f4\u533a\u95f4\u3001\u57df\u540d\u3001\u670d\u52a1\u540d\u7b49\u6761\u4ef6\u4e0b\uff0c\u5e26\u5bbd\u53ca\u6d41\u91cf\u66f2\u7ebf\u4ee5\u53ca\u6e90\u7ad9\u6d41\u91cf\u5206\u5e03\uff1b</p> <p>4\uff09\u67e5\u8be2\u660e\u7ec6\u6570\u636e\uff1a\u60a8\u53ef\u4ee5\u67e5\u8be2\u6307\u5b9a\u65f6\u95f4\u533a\u95f4\u3001\u57df\u540d\u3001\u670d\u52a1\u540d\u3001\u5730\u533a\u3001\u8fd0\u8425\u5546\u7b49\u6761\u4ef6\u4e0b\uff0c\u67e5\u8be2\u6bcf\u65e5\u7684\u6d41\u91cf\u3001\u8bf7\u6c42\u91cf\u3001\u9759\u6001\u8bf7\u6c42\u3001\u52a8\u6001\u8bf7\u6c42\u3001HTTPS    \u8bf7\u6c42\u3001\u5cf0\u503c\u5e26\u5bbd\u3001\u5cf0\u503c\u5e26\u5bbd\u65f6\u95f4\u7b49\u660e\u7ec6\u6570\u636e\uff1b</p> <p>5\uff09\u5bfc\u51fa Excel \u62a5\u8868\uff1a\u60a8\u53ef\u4ee5\u67e5\u8be2\u6307\u5b9a\u65f6\u95f4\u533a\u95f4\u3001\u57df\u540d\u3001\u670d\u52a1\u540d\u3001\u5730\u533a\u3001\u8fd0\u8425\u5546\u7b49\u6761\u4ef6\u4e0b\uff0c\u53ef\u4ee5\u5bfc\u51fa 5 \u5206\u949f\u7c92\u5ea6\u8be6\u7ec6\u7684\u8bf7\u6c42\u6570\u3001\u6d41\u91cf\u3001\u5e26\u5bbd\u3001\u5cf0\u503c\u5e26\u5bbd\u65f6\u95f4\u7b49\u8be6\u7ec6\u6570\u636e\u3002</p>"},{"location":"cdn/faq/#ip","title":"\u5982\u4f55\u83b7\u53d6\u6700\u7ec8\u7528\u6237 IP \uff1f","text":"<p>\u53c8\u62cd\u4e91 CDN \u56de\u5ba2\u6237\u6e90\u7684\u65f6\u5019\u4f1a\u5e26\u4e0a <code>X-Real-IP</code> \u548c <code>X-Forwarded-For</code> \u7684\u8bf7\u6c42\u5934\u4e0b\u53bb\uff0c\u503c\u4e3a\u7528\u6237\u5b9e\u9645\u8bbf\u95ee CDN \u7684\u6765\u6e90 IP \u5730\u5740\u3002\u7279\u522b\u5730\uff0c\u4e3a\u4e86\u517c\u5bb9\u90e8\u5206\u670d\u52a1\u7aef\u7a0b\u5e8f\uff0c\u6211\u4eec\u989d\u5916\u8fd8\u63d0\u4f9b\u4e86 <code>Client-IP</code> \u8bf7\u6c42\u5934\u7684\u652f\u6301\uff0c\u5176\u503c\u548c <code>X-Real-IP</code>\u3001<code>X-Forwarded-For</code> \u76f8\u540c\u3002</p> <p>\u793a\u4f8b\u4e00\uff1aPHP \u4ee3\u7801\u00b6</p> <pre><code> &lt;?php\n        $ip = $_SERVER[\"HTTP_X_REAL_IP\"];\n        echo $ip;\n ?&gt;\n</code></pre> <p>\u793a\u4f8b\u4e8c\uff1a Nginx \u914d\u7f6e\u00b6</p> <pre><code>server\n    {\n        listen 80;\n        add_header X-Real-IP $http_x_real_ip; \n    }\n</code></pre>"},{"location":"cdn/faq/#cdn_8","title":"CDN \u56de\u6e90\u662f\u5426\u652f\u6301\u91cd\u5b9a\u5411\u8ddf\u968f\uff1f","text":"<p>\u652f\u6301\u3002\u6e90\u7ad9\u54cd\u5e94 301/302\uff0cCDN\u4f1a\u81ea\u52a8\u8ddf\u968f 302 \u5230\u6307\u5b9a location \u5730\u5740\u83b7\u53d6\u6587\u4ef6\u5e76\u8fdb\u884c\u7f13\u5b58\uff0c\u52a0\u901f\u7528\u6237\u8bbf\u95ee\u4f53\u9a8c\u3002</p>"},{"location":"cdn/faq/#_18","title":"\u652f\u6301\u89c6\u9891\u62d6\u62c9\u5417\uff1f","text":"<p>\u652f\u6301\u3002\u76ee\u524d\u4ec5\u652f\u6301 FLV \u548c MP4 \u683c\u5f0f\u7684\u89c6\u9891\u5934\u62d6\u62c9\uff0c\u5176\u4e2d FLV \u6309\u5b57\u8282\u62d6\u62c9\uff0cMP4 \u6309\u65f6\u95f4\u62d6\u62c9\u3002\u66f4\u591a\u4e86\u89e3\u8bf7\u53c2\u89c1 \u89c6\u9891\u62d6\u62c9\u6587\u6863 \u3002</p>"},{"location":"cdn/faq/#_19","title":"\u662f\u5426\u652f\u6301\u5ffd\u7565\u53c2\u6570\u7f13\u5b58\uff1f","text":"<p>\u652f\u6301\u3002\u9ed8\u8ba4\u662f\u53c2\u6570\u8ddf\u968f\uff0c\u9700\u8981\u53bb\u7ba1\u7406\u63a7\u5236\u53f0\u5f00\u542f\u3002</p>"},{"location":"cdn/faq/#_20","title":"\u662f\u5426\u652f\u6301\u8de8\u57df\u8bbf\u95ee\u914d\u7f6e\uff1f","text":"<p>\u652f\u6301\u3002\u8be6\u7ec6\u914d\u7f6e\u53c2\u89c1 \u8de8\u57df\u914d\u7f6e\u6587\u6863 \u3002</p>"},{"location":"cdn/faq/#_21","title":"\u5b89\u5168\u76f8\u5173","text":""},{"location":"cdn/faq/#_22","title":"\u652f\u6301\u54ea\u4e9b\u9632\u76d7\u94fe\u65b9\u5f0f\uff1f","text":"<p>\u521d\u7ea7\u7684\u9632\u76d7\u94fe\u65b9\u5f0f\u5305\u62ec IP \u7981\u7528\u3001\u5730\u533a\u8bbf\u95ee\u9650\u5236\u3001User-Agent \u9632\u76d7\u94fe\u3001Referer \u9632\u76d7\u94fe\uff1b\u9ad8\u7ea7\u7684\u9632\u76d7\u94fe\u65b9\u5f0f\u5305\u62ec Token \u9632\u76d7\u94fe\u3001\u56de\u6e90\u9274\u6743\u3002\u66f4\u591a\u4e86\u89e3\u8bf7\u53c2\u89c1 \u8bbf\u95ee\u63a7\u5236\u6587\u6863\u3002</p>"},{"location":"cdn/faq/#_23","title":"\u9632\u76d7\u94fe\u7684\u8bbe\u7f6e\uff0c\u5bf9\u7f51\u7ad9\u6709\u4ec0\u4e48\u5f71\u54cd\uff1f","text":"<p>\u8bbe\u7f6e\u9632\u76d7\u94fe\u5373\u8bbe\u7f6e User-Agent\u3001Referer\u3001Token \u7b49\u9632\u76d7\u94fe\uff0c\u7f51\u7ad9\u8bbf\u95ee\u8005\u53ea\u6709\u5408\u6cd5\u7684 User-Agent\u3001Referer\u3001Token \u624d\u80fd\u8fdb\u884c\u8bbf\u95ee\uff0c\u907f\u514d\u6076\u610f\u8bf7\u6c42\u5bfc\u81f4\u7684\u6d41\u91cf\u7a81\u589e\u3002</p>"},{"location":"cdn/faq/#_24","title":"\u652f\u6301\u54ea\u4e9b\u5b89\u5168\u9632\u62a4\u65b9\u5f0f\uff1f","text":"<p>\u652f\u6301 WAF \u9632\u62a4\u3001CC \u9632\u62a4\u3001IP \u8bbf\u95ee\u9650\u5236\u7b49\u5e94\u7528\u5c42\u5b89\u5168\u9632\u62a4\u63aa\u65bd\u3002\u66f4\u591a\u4e86\u89e3\u8bf7\u53c2\u89c1 \u5b89\u5168\u9632\u62a4\u3002</p>"},{"location":"cdn/faq/#_25","title":"\u8d44\u6e90\u76f8\u5173","text":""},{"location":"cdn/faq/#cdn_9","title":"CDN \u670d\u52a1\u7684\u8282\u70b9\u5206\u5e03\u662f\u600e\u6837\u7684\uff1f","text":"<p>\u622a\u81f3\u76ee\u524d\u4e3a\u6b62\uff0c\u76ee\u524d\u5728\u56fd\u5185 26 \u4e2a\u7701\u4efd\u90e8\u7f72\u6709 CDN \u8282\u70b9\uff0c\u8282\u70b9\u6570\u91cf\u8d85\u8fc7 150 \u4e2a\uff0c\u8986\u76d6\u7684\u8fd0\u8425\u5546\u5305\u62ec\u7535\u4fe1\u3001\u8054\u901a\u3001\u79fb\u52a8\u3001\u79d1\u6280\u7f51\u3001\u6559\u80b2\u7f51\u3001\u957f\u5bbd\u3001\u534e\u6570\u7b49\u3002</p>"},{"location":"cdn/faq/#_26","title":"\u652f\u6301\u6d77\u5916\u52a0\u901f\u5417\uff1f","text":"<p>\u652f\u6301\u3002\u76ee\u524d\u53c8\u62cd\u4e91 CDN \u670d\u52a1\u5728\u9999\u6e2f\u3001\u53f0\u6e7e\u3001\u65b0\u52a0\u5761\u3001\u7f8e\u56fd\u3001\u5fb7\u56fd\u7b49\u5730\u533a\u90e8\u7f72\u6709 CDN \u8282\u70b9\u3002</p>"},{"location":"cdn/faq/#_27","title":"\u8bc1\u4e66\u76f8\u5173","text":""},{"location":"cdn/faq/#https","title":"\u652f\u6301 HTTPS \u52a0\u901f\u5417\uff1f","text":"<p>\u652f\u6301\u3002\u8be6\u7ec6\u4ecb\u7ecd\u8bf7\u53c2\u89c1 \u81ea\u5b9a\u4e49 SSL \u670d\u52a1\u6587\u6863 \u3002</p>"},{"location":"cdn/faq/#https_1","title":"HTTPS \u52a0\u901f\u652f\u6301\u54ea\u4e9b\u7c7b\u578b\u7684\u8bc1\u4e66\uff1f","text":"<p>\u76ee\u524d\u53c8\u62cd\u4e91 HTTPS \u52a0\u901f\u4ec5\u652f\u6301 PEM \u683c\u5f0f\u7684\u8bc1\u4e66\uff0c\u5982\u60a8\u7533\u8bf7\u7684\u662f\u5176\u4ed6\u683c\u5f0f\u7684\u8bc1\u4e66\uff0c\u9700\u8981\u5c06\u5176\u8f6c\u6362\u4e3a PEM \u683c\u5f0f\u3002\u5982\u4e0b\u5217\u4e3e\u51e0\u79cd\u6bd4\u8f83\u5e38\u89c1\u7684\u8f6c\u6362\u65b9\u5f0f\uff1a</p> <p>1\uff09DER \u8f6c\u6362\u4e3a PEM</p> <p>\u8bc1\u4e66\u8f6c\u5316\uff1a<code>opensslx509 -inform der -in your-certificate.cer -out upyun-certificate.pem</code></p> <p>\u79c1\u94a5\u8f6c\u5316\uff1a<code>openssl rsa-inform DER -outform pem -in your-privatekey.der -out upyun-privatekey.pem</code></p> <p>2\uff09P7B \u8f6c\u6362\u4e3a PEM</p> <p>\u8bc1\u4e66\u8f6c\u5316\uff1a<code>openssl pkcs7-print_certs -in your-incertificat.p7b -out upyun-certificate.cer</code></p> <p>\u83b7\u53d6 <code>upyun-certificat.cer</code> \u91cc\u9762[-----BEGIN CERTIFICATE-----\uff0c -----ENDCERTIFICATE-----] \u7684\u5185\u5bb9\u4f5c\u4e3a\u8bc1\u4e66\u4e0a\u4f20\u3002</p> <p>\u79c1\u94a5\u8f6c\u5316\uff1a\u65e0\u79c1\u94a5</p> <p>3\uff09PFX \u8f6c\u6362\u4e3a PEM</p> <p>\u8bc1\u4e66\u8f6c\u5316\uff1a<code>openssl pkcs12-in certname.pfx -nokeys -out upyun-cert.pem</code></p> <p>\u79c1\u94a5\u8f6c\u5316\uff1a<code>openssl pkcs12-in certname.pfx -nocerts -out upyun-key.pem -nodes</code></p>"},{"location":"cdn/faq/#_28","title":"\u8bc1\u4e66\u4e0a\u4f20\u5931\u8d25\u5982\u4f55\u5904\u7406\uff1f","text":"<p>1\uff09\u9996\u5148\u786e\u8ba4\u8bc1\u4e66\u683c\u5f0f\u662f\u5426\u4e3a PEM \u683c\u5f0f\uff0c\u5e76\u4e14\u662f\u5426\u7b26\u5408 <code>[-----BEGINCERTIFICATE-----\uff0c-----ENDCERTIFICATE-----]</code> \u5f00\u5934\u7ed3\u5c3e\u3001\u6bcf\u884c 64 \u4e2a\u5b57\u7b26\u3001\u6700\u540e\u4e00\u884c\u4e0d\u8d85\u8fc7 64 \u4e2a\u5b57\u7b26\u7684\u8bc1\u4e66\u89c4\u5219\u3002\u5982\u679c\u975e PEM \u683c\u5f0f\uff0c\u5219\u53ef\u6309\u4e0a\u6587\u4e2d\u7684\u65b9\u5f0f\u8fdb\u884c\u8f6c\u6362</p> <p>2\uff09\u68c0\u67e5\u79c1\u94a5\u683c\u5f0f\u662f\u5426\u6b63\u786e\uff0c\u662f\u5426\u4ee5 <code>-----BEGIN RSA PRIVATEKEY-----</code>\u5f00\u5934\uff1b\u5982\u679c\u662f <code>-----BEGIN PRIVATEKEY-----</code>\u5f00\u5934\uff0c\u5219\u53ef\u6267\u884c <code>openssl rsa -in your-old.key -out upyun-new.key</code> \u5bf9\u79c1\u94a5\u8fdb\u884c\u8f6c\u6362</p>"},{"location":"cdn/faq/#sni","title":"\u4ec0\u4e48\u662f SNI \u6280\u672f\uff1f","text":"<p>SNI\uff08ServerName Indication\uff09\u5b9a\u4e49\u5728 RFC 4366\uff0c\u662f\u7528\u6765\u6539\u5584 SSL(Secure Socket Layer)\u548c TLS(Transport Layer Security) \u7684\u4e00\u9879\u7279\u6027\uff0c\u5728 SSLv3/TLSv1 \u4e2d\u88ab\u542f\u7528\u3002\u5b83\u5141\u8bb8\u5ba2\u6237\u7aef\u5728\u53d1\u8d77 SSL \u63e1\u624b\u8bf7\u6c42\u65f6\uff08\u5373\uff1a\u5ba2\u6237\u7aef\u53d1\u51fa SSL \u8bf7\u6c42\u4e2d\u7684 ClientHello \u9636\u6bb5\uff09\uff0c\u5c31\u63d0\u4ea4\u8bf7\u6c42\u7684 Host \u4fe1\u606f\uff0c\u4f7f\u5f97\u670d\u52a1\u5668\u80fd\u591f\u5207\u6362\u5230\u6b63\u786e\u7684\u57df\u5e76\u8fd4\u56de\u76f8\u5e94\u7684\u8bc1\u4e66\uff0c\u5982\u4e0b\u56fe\u6240\u793a\uff1a</p> <p></p> <p>\u5982\u679c\u8981\u4f7f\u7528 SNI \uff0c\u9700\u8981\u5ba2\u6237\u7aef\u548c\u670d\u52a1\u5668\u7aef\u540c\u65f6\u6ee1\u8db3\u6761\u4ef6\uff0c\u5bf9\u4e8e\u5f53\u524d\u5927\u591a\u6570\u6d4f\u89c8\u5668\u6765\u8bf4\u90fd\u4ee5\u652f\u6301\uff0c\u4e5f\u53ef\u53c2\u8003 \u8fd9\u91cc </p> <p></p>"},{"location":"cdn/faq/#http2","title":"\u652f\u6301 HTTP/2 \u5417\uff1f","text":"<p>\u53c8\u62cd\u4e91\u5f53\u524d\u5df2\u5168\u5e73\u53f0\u652f\u6301 HTTP/2\uff0c\u5e76\u5df2\u9ed8\u8ba4\u5f00\u542f\u3002</p> <p>HTTP/2 \u5373\u8d85\u6587\u672c\u4f20\u8f93\u534f\u8bae 2.0 \uff0c\u662f\u4e0b\u4e00\u4ee3 HTTP \u534f\u8bae\u3002\u5b83\u7531\u4e92\u8054\u7f51\u5de5\u7a0b\u4efb\u52a1\u7ec4\uff08IETF\uff09\u7684 Hypertext Transfer Protocol Bis (httpbis) \u5de5\u4f5c\u5c0f\u7ec4\u8fdb\u884c\u5f00\u53d1\uff0c\u4ee5 SPDY \u4e3a\u539f\u578b\uff0c\u7ecf\u8fc7\u4e24\u5e74\u591a\u7684\u8ba8\u8bba\u548c\u5b8c\u5584\u6700\u7ec8\u786e\u5b9a\uff0c\u4f18\u52bf\u5982\u4e0b\uff1a</p> <p>1\uff09HTTP/2 \u91c7\u7528\u4e8c\u8fdb\u5236\u683c\u5f0f\u4f20\u8f93\u6570\u636e\uff0c\u5176\u5728\u534f\u8bae\u7684\u89e3\u6790\u548c\u4f18\u5316\u6269\u5c55\u4e0a\u5e26\u6765\u66f4\u591a\u7684\u4f18\u52bf\u548c\u53ef\u80fd\u3002</p> <p>2\uff09HTTP/2 \u5bf9\u6d88\u606f\u5934\u91c7\u7528 HPACK \u8fdb\u884c\u538b\u7f29\u4f20\u8f93\uff0c\u80fd\u591f\u8282\u7701\u6d88\u606f\u5934\u5360\u7528\u7684\u7f51\u7edc\u7684\u6d41\u91cf\u3002</p> <p>3\uff09\u591a\u8def\u590d\u7528\uff0c\u7b80\u5355\u8bf4\u5c31\u662f\u6240\u6709\u7684\u8bf7\u6c42\u53ef\u4ee5\u901a\u8fc7\u4e00\u4e2a TCP \u8fde\u63a5\u5e76\u53d1\u5b8c\u6210\u3002</p> <p>4\uff09Server Push\uff1a\u670d\u52a1\u7aef\u80fd\u591f\u66f4\u5feb\u7684\u628a\u8d44\u6e90\u63a8\u9001\u7ed9\u5ba2\u6237\u7aef\u3002</p>"},{"location":"cdn/faq/#http2_1","title":"\u5982\u679c\u60f3\u4f7f\u7528 HTTP/2\uff0c\u9700\u8981\u505a\u7279\u6b8a\u914d\u7f6e\u5417\uff1f","text":"<p>\u56e0 HTTP/2 \u662f\u5728 HTTPS \u7684\u57fa\u7840\u4e0a\u5b9e\u73b0\u7684\uff0c\u5982\u679c\u60f3\u4f7f\u7528 HTTP/2\uff0c\u5219\u57df\u540d\u5fc5\u987b\u652f\u6301 HTTPS \u8bbf\u95ee\uff0c\u6240\u4ee5\u53ea\u9700\u6309\u7167 \u81ea\u5b9a\u4e49 SSL \u670d\u52a1 \u4e2d\u7684\u6b65\u9aa4\u8fdb\u884c\u914d\u7f6e\u5373\u53ef\uff0c\u5176\u4ed6\u65e0\u9700\u505a\u4efb\u4f55\u7279\u6b8a\u914d\u7f6e\u3002</p>"},{"location":"cdn/guide/","title":"\u5feb\u901f\u5165\u95e8","text":""},{"location":"cdn/guide/#_1","title":"\u51c6\u5907\u5de5\u4f5c","text":"<p>\u4e3a\u4e86\u5feb\u901f\u5b8c\u6210\u6ce8\u518c\u548c\u914d\u7f6e\u8fc7\u7a0b\uff0c\u60a8\u9700\u8981\u63d0\u524d\u51c6\u5907\u5982\u4e0b\u4e8b\u9879\uff1a</p> <p>1.\u4e00\u4e2a\u6709\u6548\u7684\u90ae\u7bb1\u5730\u5740\uff0c\u4e3b\u8981\u7528\u4e8e\u5bc6\u7801\u91cd\u7f6e\u627e\u56de\u3001\u90ae\u7bb1\u5feb\u6377\u767b\u9646\u3001\u57df\u540d\u5ba1\u6838\u53cd\u9988\u7b49\uff0c\u60a8\u53ef\u4ee5\u5728\u540e\u671f\u8fdb\u884c\u66f4\u6362\u3002</p> <p>2.\u4e00\u4e2a\u6709\u6548\u7684\u4e2a\u4eba\u624b\u673a\u53f7\u7801\uff0c\u4e3b\u8981\u7528\u4e8e\u5bc6\u7801\u91cd\u7f6e\u627e\u56de\u3001\u8d26\u53f7\u5feb\u6377\u767b\u9646\u3001\u83b7\u53d6\u670d\u52a1\u901a\u77e5\uff08\u5982\u4f59\u989d\u4e0d\u8db3\u63d0\u9192\u548c\u8d26\u6237\u6b20\u8d39\u63d0\u9192\uff09\uff0c\u60a8\u53ef\u4ee5\u5728\u540e\u671f\u8fdb\u884c\u66f4\u6362\u3002</p> <p>3.\u81f3\u5c11\u9700\u8981\u51c6\u5907\u4e00\u4e2a\u56de\u6e90 IP \u5730\u5740\u6216\u8005\u57df\u540d\uff0c\u9700\u8981\u4fdd\u8bc1\u8be5\u6e90\u7ad9\u53ef\u4ee5\u6b63\u5e38\u63d0\u4f9b\u670d\u52a1\uff0c\u60a8\u53ef\u4ee5\u5728\u540e\u671f\u6dfb\u52a0\u66f4\u591a\u56de\u6e90\u5730\u5740\u3002</p> <p>4.\u63d0\u4f9b\u9700\u8981\u52a0\u901f\u7684\u7f51\u7ad9\u8bbf\u95ee\u57df\u540d\uff0c\u9700\u8981\u4fdd\u8bc1\u8be5\u8bbf\u95ee\u57df\u540d\u53ef\u6b63\u5e38\u63d0\u4f9b\u670d\u52a1\uff0c\u5e76\u4e14\u5df2\u7ecf\u5907\u6848\uff08 \u672a\u5907\u6848\u5c06\u65e0\u6cd5\u914d\u7f6e\u6210\u529f \uff09\u3002</p>"},{"location":"cdn/guide/#_2","title":"\u5e10\u53f7\u6ce8\u518c","text":"<p>\u6253\u5f00 \u6ce8\u518c\u754c\u9762\u6216\u8005\u5728 \u53c8\u62cd\u4e91\u5b98\u7f51 \u9875\u9762\u53f3\u4e0a\u89d2\u70b9\u51fb\u300c\u6ce8\u518c\u300d\u6309\u94ae\uff0c\u8fdb\u5165\u5982\u4e0b\u754c\u9762\uff1a</p> <p></p> <p>\u60a8\u53ef\u6839\u636e\u81ea\u8eab\u7684\u60c5\u51b5\u9009\u62e9 \u201c\u4f01\u4e1a\u8d26\u53f7\u201d \u6216 \u201c\u4e2a\u4eba\u8d26\u53f7\u201d \uff0c\u8bf7\u586b\u5199\u5b8c\u6574\u7684\u6ce8\u518c\u4fe1\u606f\uff08 \u6ce8\u610f\u9605\u8bfb\u53c8\u62cd\u4e91\u670d\u52a1\u6761\u6b3e \uff09\uff0c\u5e76\u786e\u4fdd\u7535\u5b50\u90ae\u4ef6\u5730\u5740\u4ee5\u53ca\u624b\u673a\u53f7\u7801\u6b63\u786e\uff0c\u4ee5\u4fdd\u969c\u60a8\u80fd\u591f\u6b63\u5e38\u63a5\u6536\u5230\u670d\u52a1\u901a\u77e5\u3002</p>"},{"location":"cdn/guide/#_3","title":"\u5e10\u53f7\u8ba4\u8bc1","text":"<p>\u6ce8\u518c\u5b8c\u6bd5\u540e\uff0c\u767b\u5f55 \u53c8\u62cd\u4e91\u7ba1\u7406\u63a7\u5236\u53f0\uff0c\u60a8\u9700\u8981\u8fdb\u884c\u4f01\u4e1a\u6216\u4e2a\u4eba\u8ba4\u8bc1\uff0c\u8ba4\u8bc1\u5b8c\u6210\u540e\u65b9\u53ef\u521b\u5efa\u670d\u52a1\uff0c\u5426\u5219\u5c06\u65e0\u6cd5\u4f7f\u7528\u53c8\u62cd\u4e91\u670d\u52a1\u3002\u8d26\u6237\u8ba4\u8bc1\u53ef\u53c2\u89c1\u5982\u4e0b\u622a\u56fe\u6240\u793a\uff1a</p> <p></p> <p>\u4f01\u4e1a\u8ba4\u8bc1</p> <p></p> <p>\u4e2a\u4eba\u8ba4\u8bc1</p> <p></p> <p>\u63d0\u4ea4\u540e\uff0c\u9700\u8981\u7b49\u5f85\u5ba1\u6838\u901a\u8fc7\uff0c\u5c4a\u65f6\u4f1a\u901a\u8fc7\u7ad9\u5185\u4fe1\u3001\u90ae\u4ef6\u8fdb\u884c\u901a\u77e5\u3002</p>"},{"location":"cdn/guide/#_4","title":"\u521b\u5efa\u670d\u52a1","text":"<p>\u5e10\u6237\u8eab\u4efd\u8ba4\u8bc1\u5b8c\u6210\u4e4b\u540e\uff0c\u60a8\u5c31\u53ef\u4ee5\u5f00\u59cb\u521b\u5efa\u60a8\u7684\u521d\u59cb\u670d\u52a1\u4e86\uff0c\u5177\u4f53\u64cd\u4f5c\u5982\u4e0b\u6b65\u9aa4\u6240\u793a\uff1a</p> <p>\u57df\u540d\u63a5\u5165(\u81ea\u6709\u6e90)</p> <p>\u8fdb\u5165 \u3010 CDN \u3011 \u670d\u52a1\u5217\u8868\uff0c\u4f9d\u6b21\u8fdb\u5165\u670d\u52a1\u521b\u5efa\u548c\u57fa\u672c\u4fe1\u606f\u586b\u5199\u7b49\u6b65\u9aa4\uff1a</p> <p>\u7b2c\u4e00\u6b65\uff1a\u521b\u5efa\u670d\u52a1</p> <p></p> <p>\u7b2c\u4e8c\u6b65\uff1a\u57fa\u672c\u4fe1\u606f\u586b\u5199</p> <p></p> <p>\u66f4\u591a\u64cd\u4f5c\u6d41\u7a0b\u53c2\u89c1\u6587\u6863 \u57df\u540d\u63a5\u5165\uff08\u81ea\u6709\u6e90)\u6216\u8005\u89c6\u9891\u6559\u7a0b\u81ea\u4e3b\u6e90\u7ad9\u914d\u7f6e\u6559\u5b66\u89c6\u9891\u3002</p> <p>\u57df\u540d\u63a5\u5165(\u53c8\u62cd\u5b58\u50a8\u6e90)</p> <p>\u8fdb\u5165\u3010\u4e91\u5b58\u50a8\u3011\u670d\u52a1\u5217\u8868\uff0c\u4f9d\u6b21\u8fdb\u5165\u670d\u52a1\u521b\u5efa\u548c\u57fa\u672c\u4fe1\u606f\u586b\u5199\u7b49\u6b65\u9aa4\uff1a</p> <p>\u7b2c\u4e00\u6b65\uff1a\u521b\u5efa\u670d\u52a1</p> <p></p> <p>\u7b2c\u4e8c\u6b65\uff1a\u57fa\u672c\u4fe1\u606f\u586b\u5199</p> <p></p> <p>\u66f4\u591a\u64cd\u4f5c\u6d41\u7a0b\u53c2\u89c1 \u57df\u540d\u63a5\u5165\uff08\u53c8\u62cd\u5b58\u50a8\u6e90)\u6216\u8005\u89c6\u9891\u6559\u7a0b \u53c8\u62cd\u4e91\u5b58\u50a8\u914d\u7f6e\u6559\u5b66\u89c6\u9891\u3002</p>"},{"location":"cdn/guide/#_5","title":"\u914d\u7f6e\u6d4b\u8bd5","text":"<p>\u5047\u8bbe\u4e0a\u8ff0\u914d\u7f6e\u5df2\u5168\u90e8\u5b8c\u6210\uff0c\u60a8\u7684\u57df\u540d\u4e3a <code>test1.upyun.com</code>\uff0c\u914d\u7f6e\u5982\u4e0b\u56fe\u6240\u793a\uff1a</p> <p></p> <p>\u60a8\u53ef\u901a\u8fc7 ping \u52a0\u901f\u57df\u540d\u7684 CNAME \u5730\u5740 <code>cptest123.b0.aicdn.com</code> \uff0c\u83b7\u53d6 CDN \u8282\u70b9 IP \u4e3a <code>183.158.35.58</code> ( \u793a\u4f8b IP \u4e3a\u676d\u5dde\u7535\u4fe1\u8282\u70b9\u51fa\u53e3 IP )\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff1a</p> <p></p> <p>\u7136\u540e\u6253\u5f00\u7ec8\u7aef\u7684 Hosts \u6587\u4ef6\uff0c\u5c06 <code>183.158.35.58  test.yourdomain.com</code>  \u5199\u5165\u5176\u4e2d\u5e76\u4fdd\u5b58\uff08 \u6ce8\u610f\uff1a\u6d4b\u8bd5\u5b8c\u6210\u540e\uff0c\u8fdb\u884c\u5220\u9664 )\u3002</p> <p></p> <p>\u4fdd\u5b58\u4ee5\u540e\uff0c\u6253\u5f00 Chrome \u6d4f\u89c8\u5668\uff0c\u6309 F12 \u952e\u5f00\u59cb\u6293\u5305\uff0c\u8bbf\u95ee\u57df\u540d\u6d4b\u8bd5\u94fe\u63a5\uff0c\u4f8b\u5982 <code>http:// test.yourdomain.com/image/123.png</code>\uff0c\u5982\u679c\u6210\u529f\u8bbf\u95ee\u5373\u53ef\u8bc1\u660e\u4e0a\u8ff0\u52a0\u901f\u57df\u540d\u914d\u7f6e\u6b63\u786e\uff0c\u6293\u5305\u5982\u4e0b\u56fe\u6240\u793a\uff1a</p> <p></p>"},{"location":"cdn/guide/#_6","title":"\u7f13\u5b58\u9a8c\u8bc1","text":"<p>\u8be5\u6b65\u9aa4\u4e3b\u8981\u6d4b\u8bd5\u52a0\u901f\u57df\u540d\u5728 CDN \u52a0\u901f\u5e73\u53f0\u4e0a\u7684\u7f13\u5b58\u65f6\u95f4\u914d\u7f6e\u662f\u5426\u751f\u6548\uff0c\u5177\u4f53\u9a8c\u8bc1\u53ef\u4ee5\u53c2\u89c1\u5982\u4e0b\u65b9\u6cd5\uff1a</p> <p>\u5982\u4e0b\u56fe\u6240\u4ee5\uff0c\u540e\u7f00\u4e3a PNG \u7c7b\u578b\u7684\u56fe\u7247\uff0c\u914d\u7f6e\u7684\u7f13\u5b58\u65f6\u95f4\u4e3a 691200s\u3002</p> <p></p> <p>\u5728\u6b65\u9aa4\u4e09\u7684\u57fa\u7840\u4e0a\uff0c\u6253\u5f00 Chrome \u6d4f\u89c8\u5668\uff0c\u5c06\u8981\u8bbf\u95ee\u7684 URL \u8f93\u5165\u6d4f\u89c8\u5668\uff0c\u70b9\u51fb\u56de\u8f66\uff0c\u6293\u5305\u5982\u4e0b\u56fe\u6240\u793a\uff1a</p> <p></p> <p>\u53ef\u4ee5\u770b\u5230 <code>max-age=691200</code>\uff0c\u8fdb\u800c\u8bc1\u660e\u7f13\u5b58\u914d\u7f6e\u7b56\u7565\u5df2\u7ecf\u751f\u6548\u3002</p>"},{"location":"cdn/guide/#cname","title":"CNAME \u914d\u7f6e","text":"<p>\u5982\u679c\u4ee5\u4e0a\u914d\u7f6e\u6d4b\u8bd5\u3001\u7f13\u5b58\u9a8c\u8bc1\u6d4b\u8bd5\u90fd\u6b63\u5e38\uff0c\u5219\u53ef\u8fdb\u884c\u52a0\u901f\u57df\u540d CNAME \u7684\u914d\u7f6e\uff0c\u5177\u4f53\u6b65\u9aa4\u5982\u4e0b\uff1a</p> <p>1.\u83b7\u53d6 CNAME \u57df\u540d</p> <p>\u8fdb\u5165 CDN \u63a7\u5236\u53f0\uff0c\u9009\u62e9\u76f8\u5e94\u670d\u52a1\uff0c\u5728\u3010\u529f\u80fd\u914d\u7f6e\u3011\u754c\u9762\uff0c\u9009\u62e9\u300c\u57df\u540d\u7ba1\u7406\u300d\u6a21\u5757\uff0c\u76f8\u5e94\u533a\u57df\u53ef\u67e5\u770b CNAME \u5730\u5740\uff0c\u5982\u56fe\u6240\u793a\uff1a</p> <p></p> <p>2.\u4fee\u6539 CNAME \u8bb0\u5f55</p> <p>\u767b\u5165\u57df\u540d\u7684 DNS \u670d\u52a1\u5546\u7f51\u7ad9\uff0c\u4fee\u6539 CNAME \u8bb0\u5f55\uff0c\u5177\u4f53\u914d\u7f6e\u65b9\u6cd5\u53ef\u53c2\u89c1\u5982\u4e0b\u94fe\u63a5\uff1a</p> <p>DNSPod CNAME \u63a5\u5165 CDN</p> <p>\u65b0\u7f51 CNAME \u63a5\u5165 CDN</p> <p>\u4e07\u7f51 CNAME \u63a5\u5165 CDN</p> <p>3.\u9a8c\u8bc1 CNAME \u914d\u7f6e\u662f\u5426\u751f\u6548</p> <p>\u56e0 DNS \u89e3\u6790\u8bb0\u5f55\u90fd\u6709\u7f13\u5b58\u65f6\u95f4\uff0cCNAME \u7684\u751f\u6548\u65f6\u95f4\u4e00\u822c\u662f 600s\uff0c\u53ef\u901a\u8fc7 ping \u6240\u914d\u7f6e\u7684\u52a0\u901f\u57df\u540d\uff0c\u68c0\u9a8c CNAME \u914d\u7f6e\u662f\u5426\u751f\u6548\uff0c\u5982\u679c\u540e\u7f00\u663e\u793a\u4e3a aicdn.com\uff0c\u5219\u8bc1\u660e CNAME \u914d\u7f6e\u5df2\u751f\u6548\uff0c\u5373\u52a0\u901f\u4e1a\u52a1\u6b63\u5f0f\u5f00\u59cb\u542f\u7528\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff1a</p> <p></p> <p>\u5982\u6709\u7591\u95ee\u8bf7 \u8054\u7cfb\u6211\u4eec</p>"},{"location":"cdn/item/","title":"Item","text":"<p>cdn\u7684\u4e09\u5927\u80fd\u529b\uff1a\u9759\u6001\u52a0\u901f\u3001\u52a8\u6001\u52a0\u901f\u3001\u5b89\u5168\u9632\u62a4</p> <p>CNAME\uff1aCNAME\u5c31\u662f\u8bb0\u5f55\u4e00\u4e2a\u57df\u540d\u7684\u522b\u540d\uff0c\u6bd4\u5982\u6211\u4eec\u7ed9blog.example.com\u8bb0\u5f55\u4e00\u6761CNAME\u4e3ablog.com\uff0c\u5f53\u6211\u4eec\u5bf9blog.example.com\u8fdb\u884cdns\u89e3\u6790\u65f6\uff0c\u5b83\u5b9e\u9645\u4e0a\u4f1a\u53bb\u5bfb\u627eexample.com\u7684A\u8bb0\u5f55\u7684ip\u5730\u5740\u3002\u4e00\u4e2aCNAME\u5f53\u7136\u53ef\u4ee5\u6307\u5411\u53e6\u4e00\u4e2aCNAME\uff0c\u4f46\u662f\u8fd9\u6837\u89e3\u6790\u8d77\u6765\u5f88\u4f4e\u6548\u3002</p> <p>\u4e3a\u4ec0\u4e48CDN\u901a\u5e38\u4f1a\u7528\u5230CNAME\uff1fCDN\u901a\u5e38\u4f1a\u7ed9\u52a0\u901f\u57df\u540d\u8bb0\u5f55\u4e00\u6761CNAME\uff0c\u7528\u4e8e\u89e3\u6790\u5230\u81ea\u5bb6\u670d\u52a1\u5668\u7684ip\uff0c\u8fd9\u6837\u5bf9\u6e90\u7ad9\u7684\u6240\u6709\u8bf7\u6c42\u90fd\u4f1a\u6765\u5230cdn\u8282\u70b9\u3002\u89e3\u6790\u5230\u81ea\u5bb6\u7684cdn\u8282\u70b9\u7684\u7b2c\u4e00\u9636\u6bb5\uff0c\u4e00\u822c\u90fd\u662fcdn\u5382\u5bb6\u7684dns\u670d\u52a1\u5668\uff0c\u4ed6\u4eec\u4f1a\u6839\u636e\u4f60\u8bf7\u6c42\u7684\u4f4d\u7f6e\uff0c\u8fd4\u56de\u4e00\u4e2a\u7406\u8bba\u4e0a\u8bbf\u95ee\u901f\u5ea6\u6700\u5feb\u7684ip\u5730\u5740\uff0c\u901a\u5e38\u4e0d\u4e00\u5b9a\u662f\u7269\u7406\u8ddd\u79bb\u4e0a\u6700\u8fd1\u7684\uff0c\u8fd8\u8981\u8003\u8651\u62e5\u585e\u7b49\u60c5\u51b5</p> <p>\u9759\u6001\u8d44\u6e90\uff1a\u7b80\u5355\u6765\u8bf4\uff0c\u9759\u6001\u8d44\u6e90\u5c31\u662f\u6587\u4ef6\uff0c\u4e0a\u5e42\u7b49\u7684\uff0c\u6bcf\u6b21\u7528\u6237\u8bf7\u6c42\u8fd4\u8fd8\u7684\u5185\u5bb9\u90fd\u4e00\u6837\uff0c\u56fe\u7247\u3001\u538b\u7f29\u6587\u4ef6\u3001html\u3001css\u7b49\u3002cdn\u4f1a\u628a\u52a0\u901f\u57df\u540d\u7684\u9759\u6001\u6587\u4ef6\u90fd\u7f13\u5b58\u5230cdn\u8282\u70b9\u4e0a</p> <p>\u52a8\u6001\u8d44\u6e90\uff1a\u6700\u7b80\u5355\u7684\u4f8b\u5b50\u5c31\u662fapi\u8bf7\u6c42\uff0c\u53ef\u80fd\u6839\u636e\u7528\u6237\u7684\u4e0d\u540c\uff0c\u76f8\u540c\u7684\u8bf7\u6c42\u4f1a\u6709\u4e0d\u540c\u7684\u7ed3\u679c\uff0c\u8fd9\u6837\u7684\u5185\u5bb9\u4e0a\u4e0d\u80fd\u7f13\u5b58\u7684\u3002\u6240\u4ee5cdn\u7684\u8def\u7531\u7cfb\u7edf\u4f1a\u8fdb\u884c\u52a8\u6001\u9009\u8def\uff0c\u4ed6\u4eec\u4f1a\u7528\u5404\u4e2acdn\u8282\u70b9\u5f53\u4f5c\u4e2d\u95f4\u6865\u6881\uff0c\u4e3a\u7528\u6237\u9009\u62e9\u51fa\u4e00\u6761\u7f51\u7edc\u72b6\u51b5\u826f\u597d\u7684\u94fe\u8def\u3002</p> <p>\u52a8\u6001\u5185\u5bb9\u7528\u5230\u7684cdn\u4ea7\u54c1\u4e00\u822c\u662f\u5168\u7ad9\u52a0\u901f</p> <p>DNS/\u57df\u540d\u89e3\u6790\uff1a\u5c31\u662f\u628a\u57df\u540d\u89e3\u6790\u6210ip\u5730\u5740</p> <p>SSL/TLS\uff1a\u5efa\u7acb\u5728tcp\u534f\u8bae\u4e4b\u4e0a\u7684\u5b89\u5168\u4f20\u8f93\u534f\u8bae - \u5efa\u7acb\u4f1a\u8bdd - \u52a0\u5bc6\u6570\u636e - \u6821\u9a8c\u7f51\u7ad9\u8bc1\u4e66</p> <p>\u56de\u6e90\uff1acdn\u8282\u70b9\u672a\u7f13\u5b58\u7528\u6237\u8bf7\u6c42\u7684\u8d44\u6e90\u8d27\u7f13\u5b58\u5230\u671f\uff0ccdn\u8282\u70b9\u4f1a\u5411\u6e90\u7ad9\u83b7\u53d6\u8d44\u6e90\u5e76\u8fd4\u8fd8\u7ed9\u7528\u6237</p> <p>\u56de\u6e90HOST\uff1a\u56de\u6e90\u65f6\u5b9e\u9645\u8bf7\u6c42\u7684\u57df\u540d\u6216ip\uff0c\u5982\u679c\u6e90\u7ad9\u6709\u591a\u4e2a\u57df\u540d\u6216ip\uff0c\u53ef\u4ee5\u6307\u5b9a\u56de\u6e90\u65f6\u8bf7\u6c42\u7684\u57df\u540d\u6216ip</p> <p>\u56de\u6e90\u534f\u8bae\uff1acdn\u8282\u70b9\u8bbf\u95ee\u6e90\u7ad9\u7684\u65f6\u5019\u7684\u534f\u8bae\uff0c\u6bd4\u5982\u53ef\u4ee5\u8bbe\u7f6e\u56de\u6e90\u534f\u8bae\u4e3ahttp\u6216https</p> <p>Range\u56de\u6e90</p> <p>Range\u4e0ahttp\u534f\u8bae\u7684\u4e00\u4e2a\u8bf7\u6c42\u5934\uff0c\u53ef\u4ee5\u6307\u5b9a\u9700\u8981\u8bf7\u6c42\u8d44\u6e90\u7684byte\u8303\u56f4 Range: bytes=start-end \u6e90\u7ad9\u5728\u6536\u5230CDN\u8282\u70b9\u7684\u56de\u6e90\u8bf7\u6c42\u65f6\uff0c\u6839\u636eHTTP\u8bf7\u6c42\u5934\u4e2d\u7684Range\u4fe1\u606f\u8fd4\u56de\u6307\u5b9a\u8303\u56f4\u7684\u5185\u5bb9\u6570\u636e\u7ed9CDN\u8282\u70b9\uff0c\u4f8b\u5982\u53ea\u8fd4\u56de\u67d0\u4e2a\u6587\u4ef6\u76840-100Byte\u8303\u56f4\u5185\u7684\u6570\u636e\u3002</p> <p>Referer\u9632\u76d7\u94fe\uff1aReferer\u9632\u76d7\u94fe\uff0c\u662f\u57fa\u4e8eHTTP\u8bf7\u6c42\u5934\u4e2dReferer\u5b57\u6bb5\uff08\u4f8b\u5982\uff0cReferer\u9ed1\u767d\u540d\u5355\uff09\u6765\u8bbe\u7f6e\u8bbf\u95ee\u63a7\u5236\u89c4\u5219\uff0c\u5b9e\u73b0\u5bf9\u8bbf\u5ba2\u7684\u8eab\u4efd\u8bc6\u522b\u548c\u8fc7\u6ee4\uff0c\u9632\u6b62\u7f51\u7ad9\u8d44\u6e90\u88ab\u975e\u6cd5\u76d7\u7528\u3002\u914d\u7f6eReferer\u9ed1\u767d\u540d\u5355\u540e\uff0cCDN\u4f1a\u6839\u636e\u540d\u5355\u8bc6\u522b\u8bf7\u6c42\u8eab\u4efd\uff0c\u5141\u8bb8\u6216\u62d2\u7edd\u8bbf\u95ee\u8bf7\u6c42\u3002</p> <p>Referer\u662fhttp\u8bf7\u6c42\u5934\u7684\u4e00\u90e8\u5206\uff0c\u643a\u5e26\u4e86http\u8bf7\u6c42\u7684\u6765\u6e90\u5730\u5740\u4fe1\u606f\uff08\u534f\u8bae+\u57df\u540d+\u8bf7\u6c42\u53c2\u6570\uff09\uff0c\u53ef\u7528\u4e8e\u8bc6\u522b\u8bf7\u6c42\u6765\u6e90</p> <p>The Referer header is sent with every HTTP request that the client makes, and its value is the URL of the page that the client was on before requesting the current resource. For example, if a user clicks on a link to a resource on a web page, the Referer header in the request for that resource will contain the URL of the web page that the link was on.</p> <p>\u7f13\u5b58\u8fc7\u671f\u65f6\u95f4\uff1acdn\u8282\u70b9\u4e0a\u8d44\u6e90\u8fc7\u671f\u7684\u65f6\u95f4\uff0c\u8fc7\u671f\u540ecdn\u8282\u70b9\u5c31\u4f1a\u5220\u9664\u8be5\u7f13\u5b58</p> <p>QUIC\uff1a\u57fa\u4e8eUDP\u7684\u4f20\u8f93\u5c42\u534f\u8bae\uff0c\u80fd\u4fdd\u969c\u7f51\u7edc\u5b89\u5168\u6027\uff0c\u540c\u65f6\u6709\u66f4\u4f4e\u7684\u8fde\u63a5\u548c\u4f20\u8f93\u8017\u65f6</p> <p>SNI\uff08Server Name Indication\uff09\u662f\u4e3a\u4e86\u89e3\u51b3\u4e00\u4e2a\u670d\u52a1\u5668\u4f7f\u7528\u591a\u4e2a\u57df\u540d\u548c\u8bc1\u4e66\u7684TLS\u6269\u5c55\uff0c\u4e3b\u8981\u89e3\u51b3\u4e00\u53f0\u670d\u52a1\u5668\u53ea\u80fd\u4f7f\u7528\u4e00\u4e2a\u8bc1\u4e66\u7684\u7f3a\u70b9\u3002\u5f00\u542fSNI\u540e\uff0c\u5141\u8bb8\u5ba2\u6237\u7aef\u5728\u53d1\u8d77SSL\u63e1\u624b\u8bf7\u6c42\u65f6\u5c31\u63d0\u4ea4\u8bf7\u6c42\u7684\u57df\u540d\u4fe1\u606f\uff0c\u8d1f\u8f7d\u5747\u8861\u6536\u5230SSL\u8bf7\u6c42\u540e\uff0c\u4f1a\u6839\u636e\u57df\u540d\u53bb\u67e5\u627e\u8bc1\u4e66\uff0c\u5982\u679c\u627e\u5230\u57df\u540d\u5bf9\u5e94\u7684\u8bc1\u4e66\uff0c\u5219\u8fd4\u56de\u8be5\u8bc1\u4e66\uff1b\u5982\u679c\u6ca1\u6709\u627e\u5230\u57df\u540d\u5bf9\u5e94\u7684\u8bc1\u4e66\uff0c\u5219\u8fd4\u56de\u7f3a\u7701\u8bc1\u4e66\u3002\u8d1f\u8f7d\u5747\u8861\u5728\u914d\u7f6eHTTPS\u76d1\u542c\u5668\u652f\u6301\u6b64\u529f\u80fd\uff0c\u5373\u652f\u6301\u7ed1\u5b9a\u591a\u4e2a\u8bc1\u4e66\u3002</p> <p>\u5237\u65b0\uff1a\u5220\u9664cdn\u8282\u70b9\u4e0a\u8fc7\u671f\u7684\u7f13\u5b58\u6587\u4ef6</p> <p>\u76ee\u5f55\u5237\u65b0\uff1a\u4f1a\u5c06\u8282\u70b9\u4e0a\u7684\u6587\u4ef6\u8d44\u6e90\u8fc7\u671f\uff0c\u4f1a\u540c\u6e90\u7ad9\u5bf9\u6bd4Last-Modified\u65f6\u95f4\uff0c\u6bd4\u5982\u8282\u70b9\u4e0a\u7684\u76ee\u5f55\u6587\u4ef6\u7684Last-Modified\u4e3a\uff1aMon, 26 Dec 2018 11:11:00 GMT \uff0c\u6e90\u7ad9\u6587\u4ef6\u7684Last-Modified\u4e3aMon, 28 Dec 2018 11:11:00 GMT.\u5219\u6b64\u65f6\u6e90\u7ad9\u4f1a\u544a\u8bc9\u8282\u70b9\uff1a\u4f60\u7684\u6587\u4ef6\u6bd4\u6211\u7684\u6587\u4ef6\u8001\uff0c\u6211\u5df2\u7ecf\u66f4\u65b0\u6587\u4ef6\u4e86\uff0c\u5feb\u6765\u53d6\u6700\u65b0\u7684\u8d44\u6e90\u5427\uff0c\u6b64\u65f6\u4f1a\u5c06\u6e90\u7ad9\u65b0\u7684\u8d44\u6e90\u66f4\u65b0\u5230\u8282\u70b9\u4e0a\uff0c\u5426\u5219\uff0c\u6e90\u7ad9\u8fd4\u56de304\uff0c\u544a\u8bc9\u8282\u70b9\uff0c\u4f60\u8282\u70b9\u4e0a\u7684\u8d44\u6e90\u5df2\u7ecf\u548c\u6211\u6e90\u7ad9\u4e0a\u7684\u8d44\u6e90\u662f\u4e00\u81f4\uff0c\u4e3a\u6700\u65b0\u7684\u4e86\uff0c\u65e0\u9700\u66f4\u65b0\u3002</p> <p>url\u5237\u65b0\uff1a\u76f4\u63a5\u5c06\u8282\u70b9\u4e0a\u7f13\u5b58\u7684\u8d44\u6e90\u5220\u9664.</p> <p>\u9884\u70ed\uff1a\u9884\u70ed\u53ef\u7406\u89e3\u4e3a\u7531 CDN \u4e3b\u52a8\u6a21\u62df\u7528\u6237\u53d1\u8d77\u9996\u6b21\u8bf7\u6c42\uff0c\u9700\u8981\u63d0\u4ea4\u5177\u4f53\u8d44\u6e90\u7684URL\u5730\u5740\uff0c\u56e0\u6b64\u65e0\u6cd5\u652f\u6301\u76ee\u5f55\u9884\u70ed\u3002\u9884\u70ed\u64cd\u4f5c\u4f1a\u5c06\u6e90\u7ad9\u5185\u5bb9\u4e3b\u52a8\u62c9\u53d6\u5230 CDN \u7684\u4e2d\u95f4\u5c42\u8282\u70b9\uff0c\u9884\u70ed\u5230\u4e2d\u95f4\u5c42\u8282\u70b9\u4e0d\u4f1a\u4ea7\u751f\u8ba1\u8d39\u6d41\u91cf\u3002\u82e5\u60a8\u9700\u8981\u5c06\u5185\u5bb9\u9884\u70ed\u5230 CDN \u7684\u8fb9\u7f18\u8282\u70b9\u3002</p> <p>DDoS\uff1a\u5206\u5e03\u5f0f\u62d2\u7edd\u670d\u52a1\u653b\u51fb\uff08Distributed Denial of Service\uff0c\u7b80\u79f0DDoS\uff09\u662f\u6307\u653b\u51fb\u7684\u53d1\u51fa\u70b9\u662f\u5206\u5e03\u5728\u4e0d\u540c\u5730\u65b9\uff0c\u4e14\u6240\u8bf7\u6c42\u7684\u670d\u52a1\u5f80\u5f80\u8981\u6d88\u8017\u5927\u91cf\u7684\u7cfb\u7edf\u8d44\u6e90\uff0c\u9020\u6210\u76ee\u6807\u4e3b\u673a\u65e0\u6cd5\u4e3a\u7528\u6237\u63d0\u4f9b\u6b63\u5e38\u670d\u52a1\u3002</p> <p>CC\u653b\u51fb\uff1a\u653b\u51fb\u8005\u501f\u52a9\u4ee3\u7406\u670d\u52a1\u5668\u751f\u6210\u6307\u5411\u53d7\u5bb3\u4e3b\u673a\u7684\u5408\u6cd5\u8bf7\u6c42\uff0c\u5b9e\u73b0DDoS\u548c\u4f2a\u88c5\u5c31\u53eb\uff1aCC(Challenge Collapsar)\uff0cCC\u4e3b\u8981\u662f\u653b\u51fb\u9875\u9762\uff0c\u5c5e\u4e8e\u5e94\u7528\u5c42\u653b\u51fb\u3002</p>"},{"location":"cdn/live/","title":"Live","text":""},{"location":"cdn/live/#_1","title":"\u6982\u8ff0","text":"<p>\u53c8\u62cd\u76f4\u64ad\u4e91(UPLive)\uff0c\u57fa\u4e8e\u53c8\u62cd\u4e91\u5185\u5bb9\u5206\u53d1\u7f51\u7edc\u4e3a\u76f4\u64ad\u5e94\u7528\u63d0\u4f9b\u8d85\u4f4e\u5ef6\u8fdf\u3001\u9ad8\u7801\u7387\u3001\u9ad8\u5e76\u53d1\u7684\u6574\u5957\u4ece\u63a8\u6d41\u7aef\u5230\u64ad\u653e\u7aef\u7684\u4e00\u7ad9\u5f0f\u89e3\u51b3\u65b9\u6848\uff0c\u652f\u6301 RTMP\u3001HTTP-FLV \u548c HLS \u8f93\u51fa\uff0c\u5305\u62ec\u5f55\u5236\u3001\u8f6c\u7801\u7b49\u9644\u52a0\u529f\u80fd\u3002</p>"},{"location":"cdn/live/#_2","title":"\u670d\u52a1\u7c7b\u578b","text":"<p>\u53c8\u62cd\u4e91\u76f4\u64ad\u7cfb\u7edf\u652f\u6301\u4e24\u79cd\u670d\u52a1\u7c7b\u578b\uff1a\u53c8\u62cd\u4e91\u6e90\u548c\u81ea\u4e3b\u6e90\u7ad9\u3002</p> <p></p> <p>\u53c8\u62cd\u4e91\u6e90\uff1a\u8868\u793a\u6d41\u5a92\u4f53\u5185\u5bb9\u76f4\u63a5\u63a8\u6d41\u5230\u53c8\u62cd\u4e91 CDN \uff0c\u5c06\u63a8\u6d41\u4e0e\u5206\u53d1\u90fd\u8fdb\u884c CDN \u52a0\u901f\u3002\u53c8\u62cd\u4e91\u6e90\u73b0\u4ec5\u652f\u6301 RTMP \u63a8\u6d41\u3002</p> <p>\u7ba1\u7406\u540e\u53f0\uff1a\u76f4\u64ad\u52a0\u901f &gt; \u521b\u5efa\u670d\u52a1 &gt; \u53c8\u62cd\u4e91\u6e90</p> <p>\u521b\u5efa\u53c8\u62cd\u4e91\u6e90\uff0c\u586b\u5199\u670d\u52a1\u540d\u3001\u5df2\u5907\u6848\u7684\u64ad\u653e\u57df\u540d\u548c\u63a8\u6d41\u57df\u540d\uff0c\u63a8\u6d41\u57df\u540d\u4e0e\u64ad\u653e\u57df\u540d\u4e0d\u80fd\u5171\u7528\u3002 \u53ef\u9009\u62e9\u6027\u586b\u5199\u63a5\u5165\u70b9\uff0c\u5982\u679c\u586b\u5199\u4e86\u5177\u4f53\u7684\u63a5\u5165\u70b9\uff0c\u5219\u53ea\u6709\u8be5\u63a5\u5165\u70b9\u7684 URL \u53ef\u8fdb\u884c\u63a8\u6d41\uff0c\u5176\u4ed6\u63a5\u5165\u70b9\u5747\u63a8\u6d41\u5931\u8d25\u3002\u82e5\u6ca1\u6709\u586b\u5199\u5177 \u4f53\u63a5\u5165\u70b9\uff0c\u5219\u4efb\u610f\u63a5\u5165\u70b9\u53ef\u8fdb\u884c\u63a8\u6d41\uff08\u672c\u9636\u6bb5\u65e0\u8bba\u586b\u4ec0\u4e48\u63a5\u5165\u70b9\uff0c\u5747\u65e0\u9650\u5236\u4f5c\u7528\uff0c\u90fd\u53ef\u4ee5\u6b63\u5e38\u63a8\u62c9\u6d41\uff0c\u5f85\u670d\u52a1\u7248\u672c\u66f4\u65b0\u518d\u52a0\u5165\u9650\u5236\uff09\u3002</p> <p>\u5f53\u63a8\u6d41\u57df\u540d\u586b\u5199 push.domain.com \uff0c\u64ad\u653e\u57df\u540d\u586b\u5199 play.domain.com \uff0c\u63a5\u5165\u70b9\u586b\u5199 app \uff0c\u5982\u679c\u63a8\u6d41 URL \u4e3a rtmp://push.domain.com/app/stream \u65f6\uff0c\u5176 rtmp \u64ad\u653e URL \u4e3a rtmp://play.domain.com/app/stream \u5176\u4e2d\uff0cstream \u4e3a\u6d41\u540d\uff0c\u53c8\u79f0\u6d41\u5bc6\u94a5\uff0capp/stream \u53c8\u79f0\u4e3a\u9891\u9053\uff0c\u540c\u4e00\u6761\u6d41\u63a8\u62c9\u6d41\u57df\u540d\u4e0d\u540c\uff0c\u4f46\u9891\u9053\u540d\u4e00\u81f4\u3002 \u6ce8\uff1a\u4ee5\u4e0a\u57df\u540d\u3001\u63a5\u5165\u70b9\u53ca\u6d41\u540d\u7684\u547d\u540d\u4ec5\u4e3a\u4e3e\u4f8b\u7528\uff0c\u4e0b\u540c\u3002</p> <p></p> <p>\u81ea\u4e3b\u6e90\u7ad9\uff1a\u6d41\u5a92\u4f53\u5185\u5bb9\u5728\u5ba2\u6237\u6e90\u7ad9\uff0c\u53c8\u62cd\u4e91\u901a\u8fc7\u56de\u5ba2\u6237\u6e90\u62c9\u6d41\u7684\u65b9\u5f0f\u5bf9\u5176\u5185\u5bb9\u8fdb\u884c CDN \u5206\u53d1\u3002</p> <p>\u7ba1\u7406\u540e\u53f0\uff1a\u76f4\u64ad\u52a0\u901f &gt; \u521b\u5efa\u670d\u52a1 &gt; \u81ea\u4e3b\u6e90\u7ad9</p> <p>\u81ea\u4e3b\u6e90\u7ad9\u9700\u8981\u660e\u786e\u56de\u6e90\u534f\u8bae\u662f RTMP \u8fd8\u662f HTTP\uff0c\u5e76\u586b\u5199\u6e90\u7ad9 IP \u6216\u8005 \u57df\u540d\uff0c\u56de\u6e90 IP \u73b0\u4e0d\u652f\u6301\u591a\u4e2a\uff0c\u82e5\u56de\u6e90 IP \u4f1a\u7ecf\u5e38\u53d8\u66f4\uff0c\u5efa\u8bae\u6e90\u7ad9\u586b\u5199\u57df\u540d\u5f62\u5f0f\u3002\u5f53\u56de\u6e90\u534f\u8bae\u662f RTMP \u65f6\uff0c\u9ed8\u8ba4\u7aef\u53e3\u662f1935\uff0c\u5f53\u56de\u6e90\u534f\u8bae\u662f HTTP \u65f6\uff0c\u9ed8\u8ba4\u7aef\u53e3\u4e3a 80\uff0c\u652f\u6301\u7aef\u53e3\u81ea\u5b9a\u4e49\u3002\u56e0\u81ea\u4e3b\u6e90\u7ad9\u662f\u56de\u5ba2\u6237\u6e90\u62c9\u6d41\uff0c\u5219\u65e0\u63a8\u6d41\u57df\u540d\uff0c\u53ea\u9700\u8981\u8bbe\u7f6e\u64ad\u653e\u57df\u540d\u3002</p> <p>HTTP \u534f\u8bae\u56de\u6e90\u65f6\uff0c\u4ee5 HTTP-FLV \u5f62\u5f0f\u56de\u6e90\uff0c\u82e5\u6e90\u4e3a HLS \u53ef\u901a\u8fc7\u6587\u4ef6\u52a0\u901f\u7cfb\u7edf\u521b\u5efa\u670d\u52a1\uff0c\u914d\u7f6e\u56de\u6e90\u4fe1\u606f\u3002  \u63a5\u5165\u70b9\u914d\u7f6e\u8bf4\u660e\u540c\u53c8\u62cd\u4e91\u6e90\u3002</p> <p>\u4ee5\u4e0a\u4e24\u79cd\u4e1a\u52a1\u6a21\u5f0f\uff0c\u5747\u652f\u6301RTMP\u3001HTTP-FLV \u548cHLS \u64ad\u653e\uff0c\u540e\u7eed\u7ae0\u8282\u4f1a\u8be6\u7ec6\u4ecb\u7ecd\u3002</p>"},{"location":"cdn/live/#_3","title":"\u57fa\u7840\u914d\u7f6e","text":"<p>\u76f4\u64ad\u57fa\u7840\u914d\u7f6e\u662f\u76f4\u64ad\u4e1a\u52a1\u573a\u666f\u4f7f\u7528\u975e\u5e38\u9891\u7e41\u7684\u529f\u80fd\u3002</p>"},{"location":"cdn/live/#_4","title":"\u57df\u540d\u7ed1\u5b9a","text":"<p>\u76f4\u64ad\u7ba1\u7406\u540e\u53f0\uff1a\u670d\u52a1 &gt; \u52a0\u901f\u57df\u540d &gt; \u57df\u540d\u7ed1\u5b9a \u6e90\u7ad9\u7c7b\u578b\uff1a\u5168\u90e8</p> <p>\u57df\u540d\u7ed1\u5b9a\u4ec5\u652f\u6301\u5df2\u5907\u6848\u6210\u529f\u7684\u81ea\u5b9a\u4e49\u57df\u540d\u8fdb\u884c\u7ed1\u5b9a\uff0c\u5982\u679c\u8be5\u57df\u540d\u672a\u5907\u6848\u6210\u529f\uff0c\u5219\u4e0d\u80fd\u901a\u8fc7\u57df\u540d\u7ed1\u5b9a\u5ba1\u6838\u3002 \u5ba1\u6838\u7ed3\u679c\u4f1a\u901a\u8fc7\u90ae\u4ef6\u8fdb\u884c\u901a\u77e5\uff0c\u6b63\u5e38\u5ba1\u6838\u65f6\u95f4\u4e3a\u4e00\u4e2a\u5de5\u4f5c\u65e5\u3002 \u4ee5\u4e0b\u662f\u5173\u4e8e\u57df\u540d\u7ed1\u5b9a\u7684\u4e00\u4e9b\u91cd\u8981\u8bf4\u660e\uff08\u540c\u6587\u4ef6\u52a0\u901f\uff09\uff1a</p> <ul> <li>\u9664\u5e38\u89c4\u5f62\u5f0f\u7684\u57df\u540d\u5916\uff08\u5305\u62ec\u9876\u7ea7\u57df\u540d\uff09\uff0c\u6211\u4eec\u8fd8\u652f\u6301\u6cdb\u57df\u540d\u7ed1\u5b9a\uff0c\u6bd4\u5982 .yourdomain.com\uff1b\u7279\u522b\u5730\uff0c\u5176\u4e2d \u6700\u591a\u652f\u6301\u5339\u914d 4 \u5c42\uff1a</li> </ul> <pre><code>[v] *.yourdomain.com =&gt; foo.yourdomain.com\n[v] *.yourdomain.com =&gt; bar.yourdomain.com\n[v] *.yourdomain.com =&gt; foo.bar.yourdomain.com\n[v] *.yourdomain.com =&gt; foo.bar.baz.yourdomain.com\n[v] *.yourdomain.com =&gt; foo.bar.baz.qux.yourdomain.com\n[x] *.yourdomain.com =&gt; foo.bar.baz.qux.quxx.yourdomain.com\n\n[v] *.bar.yourdomain.com =&gt; foo.bar.yourdomain.com\n[v] *.bar.yourdomain.com =&gt; baz.foo.bar.yourdomain.com\n[x] *.bar.yourdomain.com =&gt; foo.bar.baz.yourdomain.com\n</code></pre> <ul> <li>\u6dfb\u52a0\u57df\u540d\u7ed1\u5b9a\u540e\uff0c\u9700\u8981\u5230\u57df\u540d\u670d\u52a1\u5546\u7684 DNS \u89e3\u6790\u7ba1\u7406\u4e2d\uff0c\u5c06\u63a8\u6d41\u57df\u540d\u7684 CNAME \u89e3\u6790\u5230 <code>&lt;bucket&gt;.s1.aicdn.com</code>\uff0c\u5c06\u64ad\u653e\u57df\u540d\u7684 CNAME \u89e3\u6790\u5230 <code>&lt;bucket&gt;.s0.aicdn.com</code>\u3002</li> </ul> <p>\u5f53\u4e1a\u52a1\u6a21\u5f0f\u4e3a\u53c8\u62cd\u4e91\u6e90\u65f6\uff0c\u7528\u6237\u9700\u8981\u5c06\u5176\u63a8\u6d41\u57df\u540d\u548c\u64ad\u653e\u57df\u540d\u5206\u522b CNAME \u5230\u5bf9\u5e94\u7684\u53c8\u62cd\u4e91\u5185\u90e8\u57df\u540d\u3002 \u63a8\u6d41\u5185\u90e8\u57df\u540d\u4e3a<code>&lt;bucket&gt;.s1.aicdn.com</code>\uff0c\u64ad\u653e\u5185\u90e8\u57df\u540d\u4e3a<code>&lt;bucket&gt;.s0.aicdn.com</code>\u3002 \u6ce8\uff1a<code>&lt;&gt;</code>\u5185\u7684 bucket \u9700\u8981\u66ff\u6362\u6210\u5bf9\u5e94\u7684\u670d\u52a1\u540d\uff0c\u4e0b\u540c\u3002</p> <p>\u5f53\u4e1a\u52a1\u6a21\u5f0f\u4e3a\u81ea\u4e3b\u6e90\u7ad9\u65f6\uff0c\u7528\u6237\u53ea\u9700\u8981\u5c06\u5176\u64ad\u653e\u57df\u540d CNAME \u5230\u5bf9\u5e94\u7684\u53c8\u62cd\u4e91\u64ad\u653e\u5185\u90e8\u57df\u540d<code>&lt;bucket&gt;.s0.aicdn.com</code>\u3002</p>"},{"location":"cdn/live/#_5","title":"\u56de\u6e90\u914d\u7f6e","text":"<p>\u7ba1\u7406\u540e\u53f0\uff1a\u670d\u52a1 &gt; \u57fa\u7840\u914d\u7f6e &gt; \u56de\u6e90\u914d\u7f6e \u6e90\u7ad9\u7c7b\u578b\uff1a\u5ba2\u6237\u6e90\u7ad9</p>"},{"location":"cdn/live/#_6","title":"\u56de\u6e90\u534f\u8bae","text":"<p>\u56de\u6e90\u534f\u8bae\u652f\u6301 HTTP \u548c RTMP\uff0c\u5f53\u9009\u62e9 HTTP \u56de\u6e90\u65f6\uff0c\u9ed8\u8ba4\u7aef\u53e3\u53f7\u4e3a80\uff0c\u5f53\u9009\u62e9RTMP\u56de\u6e90\u65f6\uff0c\u9ed8\u8ba4\u7aef\u53e3\u53f7\u4e3a1935\uff0c\u5177\u4f53\u7aef\u53e3\u53f7\u53ef\u4ee5\u81ea\u5b9a\u4e49\uff0c\u901a\u8fc7\u540e\u53f0\u8bbe\u7f6e\u3002</p>"},{"location":"cdn/live/#_7","title":"\u6e90\u7ad9","text":"<p>\u8be5\u914d\u7f6e\u9879\u4e3a\u53ef\u8bbf\u95ee\u7684\u7f51\u7edc\u5730\u5740\uff0c\u53ef\u4ee5\u76f4\u63a5\u586b IP \u5730\u5740\u4e5f\u53ef\u4ee5\u586b\u5199\u57df\u540d\u5730\u5740\uff0c\u73b0\u4e0d\u652f\u6301\u591aIP \u3002\u5982\u679c\u662f\u57df\u540d\u5730\u5740\uff0c\u90a3\u4e48 CDN \u5728\u56de\u6e90\u65f6\u4f1a\u5bf9\u8be5\u57df\u540d\u5730\u5740\u8fdb\u884c DNS \u89e3\u6790\uff0c\u7136\u540e\u901a\u8fc7\u89e3\u6790\u51fa\u6765\u7684 IP \u5730\u5740\u518d\u8fdb\u884c\u8bbf\u95ee\uff0c\u56e0\u6b64\u82e5\u89e3\u6790\u5931\u8d25\u4e5f\u4f1a\u5bfc\u81f4\u65e0\u6cd5\u6b63\u5e38\u56de\u6e90\u3002</p>"},{"location":"cdn/live/#http-flv","title":"HTTP-FLV \u8f93\u51fa","text":"<p>\u7ba1\u7406\u540e\u53f0\uff1a\u670d\u52a1 &gt; \u57fa\u7840\u914d\u7f6e &gt; HTTP-FLV \u8f93\u51fa \u6e90\u7ad9\u7c7b\u578b\uff1a\u5168\u90e8</p> <p>\u901a\u8fc7\u7ba1\u7406\u540e\u53f0\uff0c\u53ef\u4ee5\u914d\u7f6e\u4efb\u4e00\u64ad\u653e\u57df\u540d\u4f5c\u4e3a HTTP-FLV \u7684\u8f93\u51fa\u57df\u540d\u3002</p> <p>\u5f53\u63a8\u6d41 url \u4e3a rtmp://push.domain.com/app/stream \u65f6\uff0c\u5bf9\u57df\u540d\u64ad\u653e\u57df\u540d\u5f00\u542f HTTP-FLV \u8f93\u51fa\u914d\u7f6e\u540e\uff0c \u53ef\u4ee5\u901a\u8fc7 http://play.domain.com/app/stream.flv \u8fdb\u884c\u64ad\u653e\u3002</p>"},{"location":"cdn/live/#hls","title":"HLS+ \u8f93\u51fa","text":"<p>\u7ba1\u7406\u540e\u53f0\uff1a\u670d\u52a1 &gt; \u57fa\u7840\u914d\u7f6e &gt; HLS \u8f93\u51fa \u6e90\u7ad9\u7c7b\u578b\uff1a\u5168\u90e8</p> <p>\u901a\u8fc7\u7ba1\u7406\u540e\u53f0\uff0c\u53ef\u4ee5\u914d\u7f6e\u4efb\u4e00\u64ad\u653e\u57df\u540d\u4f5c\u4e3a HLS \u7684\u8f93\u51fa\u57df\u540d\u3002</p> <p>\u5f00\u542f\u8be5\u914d\u7f6e\u540e\uff0c\u53ef\u901a\u8fc7 http://play.domain.com/app/stream.m3u8 \u5bf9 rtmp://push.domain.com/app/stream \u7684\u63a8\u6d41\u8fdb\u884c\u64ad\u653e\u3002</p>"},{"location":"cdn/live/#_8","title":"\u9ad8\u7ea7\u529f\u80fd","text":""},{"location":"cdn/live/#token","title":"Token \u9632\u76d7\u94fe","text":"<p>Token \u9632\u76d7\u94fe\u53ef\u4ee5\u5bf9\u63a8\u6d41\u548c\u64ad\u653e\u7684\u8bf7\u6c42\u8fdb\u884c\u6821\u9a8c\uff0c\u53ef\u8bbe\u7f6e\u7b7e\u540d\u8fc7\u671f\u65f6\u95f4\u6765\u63a7\u5236\u6d41\u7684\u8bbf\u95ee\u65f6\u9650\u3002</p>"},{"location":"cdn/live/#_9","title":"\u63a8\u6d41\u9632\u76d7\u94fe","text":"<p>\u4e00\u4e2a\u6700\u7b80\u7684\u63a8\u6d41\u5730\u5740\u683c\u5f0f\u5982\u4e0b\uff1a</p> <pre><code>rtmp://push.domain.com/app/stream?domain={domain}&amp;token={token}&amp;expired_ts={expired_ts}\n</code></pre> <p>\u53c2\u6570\u8bf4\u660e: push.domain.com: \u57df\u540d\uff0c\u7531\u4e1a\u52a1\u7cfb\u7edf\u5206\u914d\u3002 expire_ts: \u6709\u6548\u671f\uff0c\u5ba2\u6237\u81ea\u7531\u586b\u5199\uff0c\u8d85\u8fc7\u6709\u6548\u671f\u5c06\u505c\u6b62\u670d\u52a1\u3002 token: \u9700\u8ba1\u7b97\u5f97\u51fa\uff0c \u8ba1\u7b97\u516c\u5f0f\uff1atoken = MD5(domain + expire_ts + secret)  \uff0c \u6bd4\u5982 domain = publish.bravo.com\uff0capp = live, stream = stream, expired_ts = 1465244082\uff0csecret = a1b2c3d4e53gxwb07 \u5219 token=MD5(push.domain.com/live/stream1465244082a1b2c3d4e53gxwb07) \u6ce8\uff1a\u8ba1\u7b97\u516c\u5f0f\u4e2d\u7684 secret\uff0c\u7531\u4e1a\u52a1\u7cfb\u7edf\u63d0\u4f9b\u5e76\u544a\u77e5\u5ba2\u6237\uff0c\u4f5c\u4e3a\u5ba2\u6237\u7684\u552f\u4e00\u6807\u8bc6\u3002\u5ba2\u6237\u9700\u59a5\u5584\u4fdd\u7ba1\uff0c\u8c28\u9632\u5916\u6cc4\u3002</p>"},{"location":"cdn/live/#_10","title":"\u62c9\u6d41\u9632\u76d7\u94fe","text":"<p>\u8be6\u7ec6\u89c4\u5219\u89c1 CDNToken \u9632\u76d7\u94fe\u89c4\u8303:http://docs.upyun.com/cdn/feature/#token\u3002</p>"},{"location":"cdn/live/#_11","title":"\u589e\u503c\u670d\u52a1","text":""},{"location":"cdn/live/#_12","title":"\u5f55\u64ad","text":"<p>\u5ba2\u6237\u9700\u63d0\u4f9b\u7684\u914d\u7f6e\u4fe1\u606f\uff1a\u9700\u8981\u5f55\u5236\u7684\u62c9\u6d41 URL\u3002 \u5f55\u5236\u65b9\u5f0f\uff1a\u89e6\u53d1 or \u5b9a\u65f6\u5f55\u5236\u3002</p> <p>\u5f55\u64ad\u7684\u4e3b\u8981\u4f5c\u7528\u662f\u5c06\u63a8\u6d41\u5185\u5bb9\u5f55\u5236\u6210\u6587\u4ef6\uff0c\u6700\u7ec8\u7528\u4e8e\u70b9\u64ad\u3002</p> <p>\u73b0\u9ed8\u8ba4\u5f55\u5236\u6210 mp4 \u683c\u5f0f\u6587\u4ef6\uff0c\u4e0a\u4f20\u5230\u53c8\u62cd\u4e91\u5b58\u50a8\uff0c\u5ba2\u6237\u53ef\u4ee5\u81ea\u5b9a\u4e49\u4e0a\u4f20\u5230\u54ea\u4e2a\u5b58\u50a8\u670d\u52a1\uff08\u6682\u4e0d\u652f\u6301\uff0c\u63a5\u53e3\u672a\u5f00\u653e\uff0c\u73b0\u5728\u662f\u9ed8\u8ba4\u4e91\u5b58\u50a8\u4e3alive-recorder\uff09\u3002</p> <p>\u53c8\u62cd\u5f55\u5236\u7cfb\u7edf\u4f1a\u81ea\u52a8\u5c06\u5f55\u5236\u4e0b\u6765\u7684\u5185\u5bb9\u4e0a\u4f20\u5230\u53c8\u62cd\u4e91\u5b58\u50a8\u540e\uff0c\u53ef\u4ee5\u6839\u636e\u4e91\u5b58\u50a8\u83b7\u53d6\u76ee\u5f55\u6587\u4ef6\u5217\u8868 \u6765\u83b7\u53d6\u76f8\u5173\u5f55\u5236\u6587\u4ef6\u5217\u8868\u3002 \u5982\u679c\u5bf9\u5f55\u5236\u6587\u4ef6\u683c\u5f0f\u6709\u5176\u4ed6\u8981\u6c42\uff0c\u53ef\u5728\u53c8\u62cd\u4e91\u5904\u7406\u4e2d\u5fc3\u5bf9\u5176\u8fdb\u884c\u76f8\u5173\u5904\u7406\uff0c\u6bd4\u5982\u683c\u5f0f\u5904\u7406\uff0c\u89c6\u9891\u62fc\u63a5\uff0c\u8be6\u7ec6\u8bf7\u89c1\u4e91\u5904\u7406\u6587\u6863\u3002</p> <p>\u5f55\u5236\u6587\u4ef6\u5177\u4f53\u8def\u5f84\u4e3a\uff1a live-recorder.b0.upaiyun.com/play.domain.com/live/stream/recorder20160604163702.mp4 \u5176\u4e2d live-recorder.b0.upaiyun.com \u4e3a\u53c8\u62cd\u4e91\u9ed8\u8ba4\u57df\u540d\uff0c\u53c8\u62cd\u4f1a\u5c06\u5f55\u5236\u6587\u4ef6\u9ed8\u8ba4\u4fdd\u5b58\u5728\u76f8\u5e94\u7a7a\u95f4\u4ee5\u8fd9\u6761\u6d41 URL \u4e3a\u8def\u5f84\u7684\u76ee\u5f55\u4e0b\uff0c\u5373 live-recorder.b0.upaiyun.com/play.domain.com/live/stream/\uff0c recorder20160604163702.mp4 \u4e3a\u5177\u4f53\u7684\u5f55\u5236\u6587\u4ef6\uff0crecorder \u4e3a\u56fa\u5b9a\u6807\u8bc6\u5b57\u7b26\uff0c20160604163702 \u4e3a\u5f55\u5236\u5b8c\u6210\u65f6\u95f4\uff0cmp4\u4e3a\u6587\u4ef6\u7c7b\u578b\u3002 \u5982\u679c\u7528\u53c8\u62cd cdn\uff0c\u76f4\u63a5\u53ef\u901a\u8fc7 http://\u7528\u6237\u52a0\u901f\u57df\u540d/play.domain.com/live/stream/recorder20160604163702.mp4 \u6765\u8bbf\u95ee\u3002</p> <p>\u5f55\u5236\u652f\u6301\u89e6\u53d1\u5f55\u5236\u4e0e\u5b9a\u65f6\u5f55\u5236\u4e24\u79cd\u65b9\u5f0f\u3002</p>"},{"location":"cdn/live/#_13","title":"\u89e6\u53d1\u5f55\u5236","text":"<p>\u6307\u5b9a\u914d\u7f6e\u67d0\u4e00\u6761\u6d41\u4e3a\u89e6\u53d1\u5f55\u5236\u7684\u6d41\uff0c\u5219\u5728\u8fd9\u6761\u6d41\u63a8\u6d41\u5230\u53c8\u62cd CDN \u7684\u65f6\u5019\uff0c\u53c8\u62cd\u5f55\u5236\u7cfb\u7edf\u5c31\u5bf9\u5176\u5f00\u59cb\u5f55\u5236\uff0c\u5f53\u8fd9\u63a8\u6d41\u65ad\u5f00\u540e\u505c\u6b62\u5f55\u5236\uff0c\u518d\u63a8\u6d41\u540e\u53c8\u7ee7\u7eed\u5f00\u59cb\u5f55\uff0c\u4ee5\u6b64\u5faa\u73af\u3002\u63a8\u6d41\u65ad\u5f00\u65f6\uff0c\u5f55\u5236\u6587\u4ef6\u81ea\u52a8\u505c\u6b62\u5f55\u5236\uff0c\u4e0b\u6b21\u518d\u63a8\u6d41\u540e\uff0c\u5f55\u5236\u7684\u6587\u4ef6\u540d\u5c06\u4e0e\u524d\u4e00\u6587\u4ef6\u540d\u4e0d\u4e00\u6837\uff0c\u8fd9\u6837\u540c\u4e00\u6761\u6d41\u4f1a\u751f\u6210\u591a\u4e2a\u4e0d\u540c\u6587\u4ef6\uff0c\u5e76\u4ee5\u6587\u4ef6\u540d\u6700\u540e\u7684\u65f6\u95f4\u8868\u793a\u5176\u5148\u540e\u987a\u5e8f\u3002</p>"},{"location":"cdn/live/#_14","title":"\u5b9a\u65f6\u5f55\u5236","text":"<p>\u6307\u5b9a\u914d\u7f6e\u67d0\u4e00\u6761\u6d41\u4ece\u51e0\u70b9\u5f00\u59cb\u5f55\u5236\uff0c\u5e76\u5230\u51e0\u70b9\u7ed3\u675f\uff0c\u4e0d\u7ba1\u5728\u8fd9\u65f6\u95f4\u6bb5\u5185\u63a8\u6d41\u65ad\u5f00\u51e0\u6b21\uff0c\u5f55\u5236\u7cfb\u7edf\u5c06\u5728\u76f8\u5e94\u65f6\u95f4\u6bb5\u5185\u5bf9\u5176\u63a8\u6d41\u7684\u6240\u6709\u6d41\u5185\u5bb9\u8fdb\u884c\u5f55\u5236\u5728\u540c\u4e00\u6587\u4ef6\u540d\u4e0b\uff0c\u5b9a\u65f6\u4efb\u52a1\u53ea\u751f\u6210\u4e00\u4e2a\u6587\u4ef6\u3002</p>"},{"location":"cdn/live/#_15","title":"\u56de\u8c03","text":"<p>\u5ba2\u6237\u9700\u63d0\u4f9b\u63a5\u6536\u56de\u8c03\u7684\u5730\u5740\uff08\u5efa\u8bae\u4e3aURL\uff09\u3002</p> <p>\u5f55\u5236\u6587\u4ef6\u6240\u5728\u7684\u8def\u5f84\u4ee5 post \u8bf7\u6c42\u8fd4\u56de\u7ed9\u5ba2\u6237\uff0c\u5177\u4f53\u7684 json \u683c\u5f0f\u4e3a</p> <pre><code>{\"timestamp\": \"2016-06-04 16:38:45\",\n \"path\": [\"http://live-recorder.b0.upaiyun.com/play.domain.com/live/stream/recorder20160604163702.mp4\"]}\n</code></pre> <p>\u5176\u4e2d\uff0ctimestamp \u4e3a\u53d1\u9001 json \u56de\u8c03\u4efb\u52a1\u65f6\u95f4\uff0cpath \u4e3a\u5f55\u5236\u6587\u4ef6\u5177\u4f53\u8def\u5f84\u3002</p>"},{"location":"cdn/live/#_16","title":"\u5b9e\u65f6\u8f6c\u7801","text":"<p>\u5ba2\u6237\u9700\u63d0\u4f9b\u9700\u8981\u8f6c\u7801\u7684\u6d41\u3001\u9700\u8981\u5339\u914d\u7684\u540e\u7f00\u53ca\u8f6c\u7801\u6a21\u677f\u3002</p> <p>\u652f\u6301\u97f3\u89c6\u9891\u6d41\u5b9e\u65f6\u8f6c\u7801\u5904\u7406\uff0c\u901a\u8fc7\u8f6c\u7801\u6a21\u7248\u53ef\u914d\u7f6e\u7f16\u7801\u6807\u51c6\u3001\u5206\u8fa8\u7387\u3001\u7801\u7387\u3001\u8f93\u51fa\u6d41\u7c7b\u578b\u7b49\u6d41\u5904\u7406\u53c2\u6570\u3002 \u9ed8\u8ba4\u652f\u6301\u4f7f\u7528\u53c8\u62cd\u4e91\u76f4\u64ad\u670d\u52a1\u7684 RTMP\uff0cHTTP-FLV \u548cHLS \u534f\u8bae\u7684\u6d41\u8f6c\u7801 \u652f\u6301 12 \u79cd\u8f6c\u7801\u6a21\u677f\u548c\u5ba2\u6237\u81ea\u5b9a\u4e49\u8f6c\u7801\u914d\u7f6e\uff0c\u8be6\u7ec6\u6a21\u677f\u4fe1\u606f\uff1ahttp://docs.upyun.com/cloud/attachment/ \u652f\u6301\u81ea\u5b9a\u4e49\u8f6c\u7801\u540e\u7f00\uff0c\u5206\u9694\u7b26\u652f\u6301\u4e2d\u5212\u7ebf\uff08-\uff09\u3001\u4e0b\u5212\u7ebf\uff08_\uff09\u548c\u611f\u53f9\u53f7\uff08!\uff09\u3002</p> <p>\u652f\u6301\u89e6\u53d1\u5f0f\u8f6c\u7801\uff0c\u9700\u63d0\u524d\u914d\u7f6e\u9700\u8981\u8f6c\u7801\u7684\u6d41\u5730\u5740\u4ee5\u53ca\u8f6c\u7801\u7684\u89e6\u53d1\u540e\u7f00\uff0c\u5982 \u9700\u8981\u8f6c\u7801\u7684\u539f\u59cb\u6d41\u4e3a\uff1ahttp://play.domain.com/live/stream \u89e6\u53d1\u8f6c\u7801\u7684\u540e\u7f00\u5339\u914d\u4e3a -small\uff0c\u5bf9\u5e94\u7684\u8f6c\u7801\u6a21\u677f\u4e3a 540p(16:9) \u5f53\u6709\u7528\u6237\u8bf7\u6c42 http://play.domain.com/live/stream-small \u65f6\u89e6\u53d1\u8f6c\u7801\uff0c\u5f53\u6700\u540e\u4e00\u4e2a\u8bf7\u6c42\u8be5\u8f6c\u7801\u6d41\u7684\u7528\u6237\u65ad\u5f00\u8fde\u63a5\u540e\uff0c\u505c\u6b62\u8f6c\u7801\u3002</p>"},{"location":"cdn/live/#_17","title":"\u7981\u64ad","text":"<p>\u4e92\u52a8\u76f4\u64ad\u4e1a\u52a1\u7279\u6027\u4e3a:\u76f4\u64ad\u89c6\u9891\u5185\u5bb9\u7531\u4e3b\u64ad\u5b9e\u65f6\u63a8\u9001\u81f3\u670d\u52a1\u5668,\u82e5\u4e3b\u64ad\u4f20\u64ad\u975e\u6cd5\u5185\u5bb9,\u5219\u5f71\u54cd\u5de8\u5927\u3002\u56e0\u6b64\u5382\u5546\u9700\u8981\u5bf9\u76f4\u64ad\u89c6\u9891\u5185\u5bb9\u8fdb\u884c\u5b9e\u65f6\u76d1\u63a7,\u5f53\u51fa\u73b0\u975e\u6cd5\u5185\u5bb9\u65f6,\u53ca\u65f6\u7981\u6b62\u975e\u6cd5\u5185\u5bb9\u7684\u4f20\u64ad\u3002 \u79d2\u7ea7\u7981\u64ad\u5219\u662f\u9488\u5bf9\u8be5\u4e1a\u52a1\u573a\u666f\u800c\u7814\u53d1\u7684\u529f\u80fd,\u7531\u53c8\u62cd\u63d0\u4f9b\u4e00\u4e2a API\u3002 \u63a5\u53e3\u7ed9\u5ba2\u6237,\u5f53\u5ba2\u6237\u53d1\u73b0\u67d0\u76f4\u64ad\u89c6\u9891\u5185\u5bb9\u975e\u6cd5\u65f6,\u5b9e\u65f6\u65ad\u5f00\u4e3b\u64ad\u63a8\u6d41,\u4ece\u800c\u963b\u6b62\u975e\u6cd5\u5185\u5bb9\u7684\u4f20\u64ad\u3002</p> <p>\u63a5\u53e3\u652f\u6301\u7acb\u5373\u7981\u64ad\uff0c\u6062\u590d\u7981\u64ad\uff0c\u7981\u64ad\u4e00\u6bb5\u65f6\u95f4\u3002</p> <p>\u5982\u9700\u8f6c\u7801\u3001\u5f55\u5236\u548c\u7981\u64ad\u7b49\u529f\u80fd\u8bf7\u8054\u7cfb\u552e\u524d\uff0c\u5982\u6709\u4efb\u4f55\u95ee\u9898\u3001\u610f\u89c1\u6216\u5efa\u8bae\uff0c\u8bf7\u54a8\u8be2\u5ba2\u670d\u4eba\u5458\uff1a   \u5ba2\u670d\u70ed\u7ebf\uff1a0571-81020203\uff08\u552e\u524d\uff09\u30010571-81020204\uff08\u5ba2\u670d\uff09   \u5ba2\u670d QQ\uff1a200576786   \u6280\u672f\u652f\u6301\uff1asupport@upyun.com   \u5efa\u8bae\u53cd\u9988\uff1afeedback@upyun.com</p>"},{"location":"cdn/live/#ios-sdk","title":"IOS \u63a8\u6d41 SDK","text":""},{"location":"cdn/live/#_18","title":"\u7cfb\u7edf\u8bf4\u660e","text":"<ul> <li>\u652f\u6301 iOS 8 \u53ca\u4ee5\u4e0a\u7cfb\u7edf\u7248\u672c</li> <li>\u652f\u6301 ARMv7\uff0cARM64\uff0cx86_64 \u67b6\u6784</li> </ul>"},{"location":"cdn/live/#_19","title":"\u529f\u80fd\u8bf4\u660e","text":"<ul> <li>\u91c7\u96c6\u6a21\u5757\u6e90\u7801\u5f00\u653e\uff0c\u97f3\u89c6\u9891\u53ef\u4ee5\u81ea\u7531\u914d\u7f6e</li> <li>\u652f\u6301\u786c\u4ef6\u7f16\u7801</li> <li>\u591a\u7801\u7387\u53ef\u9009</li> <li>\u652f\u6301 H.264 \u89c6\u9891\u7f16\u7801</li> <li>\u652f\u6301 AAC \u97f3\u9891\u7f16\u7801</li> <li>\u652f\u6301\u524d\u540e\u6444\u50cf\u5934</li> <li>\u652f\u6301\u81ea\u52a8\u5bf9\u7126</li> <li>\u652f\u6301\u624b\u52a8\u8c03\u6574\u5bf9\u7126\u70b9</li> <li>\u652f\u6301\u95ea\u5149\u706f\u64cd\u4f5c</li> <li>\u652f\u6301\u591a\u5206\u8fa8\u7387\u7f16\u7801</li> <li>\u652f\u6301\u6784\u9020\u5e26\u5b89\u5168\u6388\u6743\u51ed\u8bc1\u7684 RTMP \u63a8\u6d41\u5730\u5740</li> <li>\u652f\u6301 ARMv7, ARM64, x86_64 \u67b6\u6784</li> <li>\u652f\u6301 RTMP \u534f\u8bae\u76f4\u64ad\u63a8\u6d41</li> <li>\u652f\u6301\u63a8\u6d41\u65f6\u53ef\u53d8\u7801\u7387</li> <li>\u63d0\u4f9b\u53d1\u9001 buffer</li> <li>\u652f\u6301\u89c6\u9891 Orientation \u64cd\u4f5c</li> <li>\u652f\u6301\u5f31\u7f51\u4e22\u5e27\u7b56\u7565</li> <li>\u652f\u6301\u540e\u53f0\u97f3\u9891\u63a8\u6d41</li> <li>\u652f\u6301\u6c34\u5370\u529f\u80fd</li> <li>\u652f\u6301\u7f8e\u989c\u529f\u80fd</li> </ul> <p>\u9879\u76ee\u5730\u5740\uff1ahttps://github.com/upyun/ios-live-sdk \u53cd\u9988\u53ca\u5efa\u8bae\uff1alivesdk@upai.com</p>"},{"location":"cdn/live/#android-sdk","title":"Android \u63a8\u6d41 SDK","text":""},{"location":"cdn/live/#_20","title":"\u7cfb\u7edf\u8bf4\u660e","text":"<ul> <li>Android 4.1(API 16) \u4ee5\u4e0a</li> <li>\u652f\u6301ARMv5\uff0cARMv7,ARMv8\u7248\u672c</li> </ul>"},{"location":"cdn/live/#_21","title":"\u529f\u80fd\u8bf4\u660e","text":"<ul> <li>\u652f\u6301 H.264 \u548c AAC \u786c\u7f16</li> <li>\u786c\u7f16\u652f\u6301 Android Min API 18\uff08Android 4.3\uff09\u53ca\u5176\u4ee5\u4e0a\u7248\u672c</li> <li>\u652f\u6301 RTMP \u5c01\u5305\u53ca\u63a8\u6d41</li> <li>\u652f\u6301 RTMP \u63a8\u6d41\u81ea\u9002\u5e94\u7f51\u7edc\u8d28\u91cf\u52a8\u6001\u5207\u6362\u7801\u7387\u6216\u81ea\u5b9a\u4e49\u7b56\u7565</li> <li>\u652f\u6301\u7eaf\u97f3\u9891\u63a8\u6d41\uff0c\u4ee5\u53ca\u540e\u53f0\u8fd0\u884c</li> <li>\u652f\u6301\u52a8\u6001\u66f4\u6539 Encoding Orientation</li> </ul> <p>\u9879\u76ee\u5730\u5740\uff1ahttps://github.com/upyun/android-push-sdk \u53cd\u9988\u53ca\u5efa\u8bae\uff1alivesdk@upai.com</p>"},{"location":"cdn/live/#ios-sdk_1","title":"IOS \u64ad\u653e\u5668 SDK","text":""},{"location":"cdn/live/#_22","title":"\u7cfb\u7edf\u8bf4\u660e","text":"<ul> <li>\u652f\u6301 iOS 8 \u53ca\u4ee5\u4e0a\u7cfb\u7edf\u7248\u672c</li> <li>\u652f\u6301 ARMv7\uff0cARM64\uff0cx86_64 \u67b6\u6784</li> </ul>"},{"location":"cdn/live/#_23","title":"\u529f\u80fd\u8bf4\u660e","text":"<ul> <li>RTMP \u76f4\u64ad\u6d41\u64ad\u653e</li> <li>HTTP-FLV \u76f4\u64ad\u6d41\u64ad\u653e</li> <li>HLS \u64ad\u653e</li> <li>\u9ad8\u53ef\u5b9a\u5236:\u53ef\u81ea\u5b9a\u4e49\u5c3a\u5bf8\uff0c\u6309\u94ae\uff0c\u8fdb\u5ea6\u6761\uff0c\u5168\u5c4f\uff0c\u65cb\u8f6c\u7b49UI\u5c5e\u6027</li> <li>\u5355\u97f3\u9891\u64ad\u653e</li> <li>RTMP \u76f4\u64ad\u9996\u5c4f\u79d2\u5f00\u652f\u6301</li> <li>RTMP \u76f4\u64ad\u7d2f\u79ef\u5ef6\u8fdf\u6d88\u9664\u6280\u672f</li> <li>\u652f\u6301 speex \u89e3\u7801</li> <li>\u97f3\u753b\u540c\u6b65\u8c03\u6574</li> <li>\u4e00\u5c4f\u591a\u753b</li> <li>\u70b9\u64ad\u652f\u6301</li> <li>\u652f\u6301 seek \u529f\u80fd</li> <li>\u89c6\u9891\u7f13\u51b2\u8bbe\u7f6e\uff0c\u7f13\u51b2\u8fdb\u5ea6</li> <li>\u652f\u6301\u9884\u8fde\u63a5\uff0c\u540e\u64ad\u653e\u529f\u80fd</li> <li>\u96c6\u6210\u4eae\u5ea6\u8c03\u6574\u548c\u97f3\u91cf\u8c03\u6574</li> <li>\u652f\u6301\u9759\u97f3\u64ad\u653e</li> <li>\u652f\u6301\u64ad\u653e\u5668\u72b6\u6001\u56de\u8c03</li> <li>\u652f\u6301\u6d41\u4fe1\u606f\uff0c\u64ad\u653e\u5668\u4fe1\u606f\u5bdf\u770b\uff08Dashboard\uff09</li> <li>\u652f\u6301\u64ad\u653e\u672c\u5730\u89c6\u9891\u6587\u4ef6</li> <li>\u96c6\u6210\u64ad\u653e\u8d28\u91cf\u76d1\u63a7</li> </ul> <p>\u9879\u76ee\u5730\u5740\uff1ahttps://github.com/upyun/ios-live-sdk \u53cd\u9988\u53ca\u5efa\u8bae\uff1alivesdk@upai.com</p>"},{"location":"cdn/live/#android-sdk_1","title":"Android \u64ad\u653e\u5668 SDK","text":""},{"location":"cdn/live/#_24","title":"\u7cfb\u7edf\u8bf4\u660e","text":"<ul> <li>Android 2.3 (API 9) \u53ca\u5176\u4ee5\u4e0a</li> <li>\u652f\u6301 ARMv5\uff0cARMv7,ARMv8 \u7248\u672c</li> </ul>"},{"location":"cdn/live/#_25","title":"\u529f\u80fd\u8bf4\u660e","text":"<ul> <li>Android Min API 9</li> <li>\u57fa\u4e8e ijkplayer ( based on ffplay )</li> <li>\u652f\u6301 RTMP \u548c HLS \u534f\u8bae\u7684\u76f4\u64ad\u6d41\u5a92\u4f53\u64ad\u653e</li> <li>\u652f\u6301\u5e38\u89c1\u7684\u97f3\u89c6\u9891\u6587\u4ef6\u64ad\u653e\uff08MP4\u3001M4A\u3001flv \u7b49\uff09</li> <li>\u652f\u6301 MediaCodec \u786c\u4ef6\u89e3\u7801</li> <li>\u63d0\u4f9b\u64ad\u653e\u5668\u6838\u5fc3\u7c7b PLMediaPlayer</li> <li>\u63d0\u4f9b PLVideoView \u63a7\u4ef6</li> <li>\u652f\u6301\u64ad\u653e\u5668\u97f3\u91cf\u8bbe\u7f6e\uff0c\u53ef\u5b9e\u73b0\u9759\u97f3\u529f\u80fd</li> <li>\u652f\u6301\u7eaf\u97f3\u9891\u64ad\u653e</li> <li>\u652f\u6301\u76f4\u64ad\u7d2f\u79ef\u5ef6\u65f6\u4f18\u5316</li> <li>\u652f\u6301 ARM, ARMv7a, ARM64v8a, X86 \u4e3b\u6d41\u82af\u7247\u4f53\u7cfb\u67b6\u6784</li> <li>\u53ef\u9ad8\u5ea6\u5b9a\u5236\u5316\u7684 MediaController</li> <li>\u9ad8\u53ef\u5b9a\u5236:\u53ef\u81ea\u5b9a\u4e49\u5c3a\u5bf8\uff0c\u6309\u94ae\uff0c\u8fdb\u5ea6\u6761\uff0c\u5168\u5c4f\uff0c\u65cb\u8f6c\u7b49UI\u5c5e\u6027</li> <li>\u5355\u97f3\u9891\u64ad\u653e</li> <li>RTMP \u76f4\u64ad\u9996\u5c4f\u79d2\u5f00\u652f\u6301</li> <li>RTMP \u76f4\u64ad\u7d2f\u79ef\u5ef6\u8fdf\u6d88\u9664\u6280\u672f</li> <li>\u652f\u6301 speex \u89e3\u7801</li> <li>\u97f3\u753b\u540c\u6b65\u8c03\u6574</li> <li>\u70b9\u64ad\u652f\u6301</li> <li>\u652f\u6301 seek \u529f\u80fd</li> <li>\u89c6\u9891\u7f13\u51b2\u8bbe\u7f6e\uff0c\u7f13\u51b2\u8fdb\u5ea6</li> <li>\u652f\u6301\u9884\u8fde\u63a5\uff0c\u540e\u64ad\u653e\u529f\u80fd</li> <li>\u96c6\u6210\u4eae\u5ea6\u8c03\u6574\u548c\u97f3\u91cf\u8c03\u6574</li> <li>\u652f\u6301\u9759\u97f3\u64ad\u653e</li> <li>\u652f\u6301\u64ad\u653e\u5668\u72b6\u6001\u56de\u8c03</li> <li>\u652f\u6301\u6d41\u4fe1\u606f\uff0c\u64ad\u653e\u5668\u4fe1\u606f\u5bdf\u770b\uff08Dashboard\uff09</li> <li>\u652f\u6301\u64ad\u653e\u672c\u5730\u89c6\u9891\u6587\u4ef6</li> </ul> <p>\u9879\u76ee\u5730\u5740\uff1ahttps://github.com/upyun/android-player-sdk \u53cd\u9988\u53ca\u5efa\u8bae\uff1alivesdk@upai.com</p>"},{"location":"cdn/log/","title":"\u65e5\u5fd7\u7ba1\u7406","text":""},{"location":"cdn/log/#_1","title":"\u65e5\u5fd7\u5206\u6790","text":"<p>\u53ef\u6839\u636e\u65f6\u95f4\u7c92\u5ea6\uff0c\u67e5\u770b\u76f8\u5e94\u8bbf\u95ee\u57df\u540d\u4e0b\u70ed\u95e8\u6587\u4ef6\u3001\u70ed\u95e8\u5ba2\u6237\u7aef\u3001\u70ed\u95e8\u5f15\u7528\u6587\u4ef6\u3001\u8d44\u6e90\u72b6\u6001\u7801\u3001\u6587\u4ef6\u5927\u5c0f\u3001\u70ed\u95e8 IP \u7b49\u7ef4\u5ea6 top1000 \u7684\u7edf\u8ba1\u5206\u6790\u6570\u636e\u3002\u65e5\u5fd7\u5206\u6790\u662f\u4ee5\u5929\u4e3a\u7c92\u5ea6\u8fdb\u884c\u5206\u6790\u7684\uff0c\u7b2c\u4e8c\u5929\u51cc\u6668\u4f1a\u5f00\u59cb\u8fdb\u884c\u65e5\u5fd7\u5206\u6790\u5de5\u4f5c\uff0c\u6b63\u5e38\u60c5\u51b5\u4e0b\uff0c\u7b2c\u4e8c\u5929\u65e9\u6668 09:00:00 \u4e4b\u524d\u4f1a\u7edf\u8ba1\u8ba1\u7b97\u5b8c\u6bd5\u3002</p> <p>\u914d\u7f6e\u5f15\u5bfc</p> <p>\u767b\u9646 CDN \u63a7\u5236\u53f0\uff0c\u5728\u7f6e\u9876\u83dc\u5355\u8fdb\u5165 <code>\u5de5\u5177\u7bb1</code>\uff0c\u627e\u5230 <code>\u65e5\u5fd7\u7ba1\u7406</code> \u680f\u76ee\uff0c\u9009\u62e9 <code>\u65e5\u5fd7\u5206\u6790</code> \u9009\u9879\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff1a</p> <p></p>"},{"location":"cdn/log/#_2","title":"\u65e5\u5fd7\u4e0b\u8f7d","text":"<p>\u652f\u6301\u4ee5\u5c0f\u65f6\u7c92\u5ea6\u7684\u65e5\u5fd7\u4e0b\u8f7d\uff0c\u53ef\u6536\u96c6\u8be6\u7ec6\u7684\u7ec8\u7aef\u8bbf\u95ee\u65e5\u5fd7\uff1b\u65e5\u5fd7\u6587\u4ef6\u5ef6\u8fdf 1 \u5c0f\u65f6\uff0c\u53ef\u4ee5\u5728\u65e5\u5fd7\u7ba1\u7406\u6a21\u5757\u67e5\u8be2\u5230 1 \u5c0f\u65f6\u4e4b\u524d\u7684\u65e5\u5fd7\u6587\u4ef6\u3002</p> <p>\u65e5\u5fd7\u547d\u540d\u89c4\u5219\uff1a\u65f6\u95f4\u6bb5-\u8bbf\u95ee\u57df\u540d-\u968f\u673a\u6570.gz\uff0c\u65e5\u5fd7\u547d\u540d\u793a\u4f8b\uff1a</p> <p>10_00-impress-demo.b0.upaiyun.com-9571272666104702574.gz</p> <p>\u65e5\u5fd7\u683c\u5f0f\u8bf4\u660e</p> <pre><code>$remote_addr - $remote_user [$time_local] \"$request_method $scheme://$http_host$uri$querystring $server_protocol\" $status $body_bytes_sent \"$http_referer\" \"$http_user_agent\" $content_type $request_content_length $cache_hit $source_code $is_dynamic $cache_control $request_time $edge_server_ip\n</code></pre> <p>\u8be6\u7ec6\u53c2\u6570\u8bf4\u660e</p> \u00a0 \u5e8f\u53f7 \u00a0 \u00a0 \u00a0  \u5b57\u6bb5 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u89e3\u91ca 1 $remote_addr \u5ba2\u6237\u7aef IP 2 $remote_user HTTP Auth \u7684\u7528\u6237\u540d 3 $time_local  \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u8bbf\u95ee\u65f6\u95f4 4 $request_method \u8bbf\u95ee\u7c7b\u578b GET 5 \u00a0 $scheme  \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u5e94\u7528\u534f\u8bae 6 \u00a0 $http_host   \u00a0 \u00a0 \u00a0 \u00a0 \u8bbf\u95ee\u57df\u540d\u00a0 \u00a0 7 $uri \u8bf7\u6c42 URI 8\u00a0 \u00a0 $querystring    \u00a0 \u00a0\u8bf7\u6c42\u53c2\u6570\u00a0  \u00a0 9\u00a0 $server_protocol     \u00a0 \u00a0 \u00a0 \u00a0 HTTP \u534f\u8bae\u7248\u672c 10 $status  \u00a0 \u00a0 \u00a0 \u00a0 \u8fd4\u56de\u72b6\u6001\u7801  \u00a0 11 \u00a0 $body_bytes_sent \u53d1\u9001 body \u5b57\u8282\u6570 12 \u00a0 $http_referer    \u00a0 \u00a0 \u8bf7\u6c42\u6765\u6e90 referer 13 \u00a0 $http_user_agent \u5ba2\u6237\u7aef\u4fe1\u606f 14 \u00a0 $content_type \u5185\u5bb9\u7c7b\u578b 15 \u00a0 $request_content_length \u5ba2\u6237\u7aef\u5411\u670d\u52a1\u7aef\u53d1\u8d77\u8bf7\u6c42\u7684\u5185\u5bb9\u5927\u5c0f 16 \u00a0 $cache_hit   \u00a0 \u00a0 \u662f\u5426 CDN \u7f13\u5b58\u547d\u4e2d 17 \u00a0 $source_code \u6e90\u7ad9\u8fd4\u56de\u72b6\u6001\u7801 18 \u00a0 $is_dynamic \u00a0 \u00a0 \u00a0 \u662f\u5426\u52a8\u6001\u8bf7\u6c42 19 \u00a0 $cache_control \u7f13\u5b58\u63a7\u5236\u5934\u4fe1\u606f 20\u00a0 $request_time    \u00a0 \u8bf7\u6c42\u5904\u7406\u8017\u65f6 21 \u00a0 $edge_server_ip  \u00a0 CDN \u8fb9\u7f18\u8282\u70b9 IP <p>\u65e5\u5fd7\u6837\u4f8b</p> <pre><code>122.96.42.186 - - [13/Dec/2016:00:00:02 +0800] \"GET http://impress-demo.b0.upaiyun.com/kphone/icons/weihui_icon3.png?v=1.0 HTTP/1.1\" 200 1851 \"-\" \"Mozilla/4.0\" \"image/png\" 0 Hit \"C/200\" Static \"max-age=900\" 0.014 153.101.64.13\n</code></pre> <p>\u5b57\u6bb5\u8bf4\u660e</p> \u5e8f\u53f7 \u5b57\u6bb5 \u793a\u4f8b\u503c 1 \u5ba2\u6237\u7aef IP 122.96.42.186 2 HTTP Auth \u7684\u7528\u6237\u540d - 3 \u8bbf\u95ee\u65f6\u95f4 [13/Dec/2016:00:00:02 +0800] 4 \u5ba2\u6237\u7aef\u8bf7\u6c42\u65b9\u6cd5 GET 5 \u8bf7\u6c42\u534f\u8bae HTTP 6 \u00a0 \u00a0 \u00a0 \u8bbf\u95ee\u57df\u540d\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 impress-demo.b0.upaiyun.com \u00a0 7 \u8bf7\u6c42 URI /kphone/icons/weihui_icon3.png 8\u00a0 \u00a0 \u00a0 \u8bf7\u6c42\u53c2\u6570\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0v=1.0  \u00a0 9\u00a0 HTTP \u534f\u8bae\u7248\u672c \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 HTTP/1.1 10 \u8fd4\u56de\u72b6\u6001\u7801 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 200 \u00a0 11 \u00a0 \u00a0 \u53d1\u9001 body \u5b57\u8282\u6570 1851 \u00a0 12 \u00a0 Referer \u8bf7\u6c42\u5934 \u00a0 \u00a0 - 13 \u00a0 \u5ba2\u6237\u7aef\u4fe1\u606f Mozilla/4.0 14 \u00a0 \u5185\u5bb9\u7c7b\u578b image/png 15 \u00a0 \u5ba2\u6237\u7aef\u5411\u670d\u52a1\u7aef\u53d1\u8d77\u8bf7\u6c42\u7684\u5185\u5bb9\u5927\u5c0f 0 16 \u00a0 \u7f13\u5b58\u547d\u4e2d\u72b6\u6001 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 Hit \u00a0 17 \u00a0 \u6e90\u7ad9\u8fd4\u56de\u72b6\u6001\u7801\u00a0 \u00a0 \u00a0 \u00a0 C/200 18 \u00a0 \u52a8\u6001\u8bf7\u6c42\u6807\u8bb0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 Static \u00a0 19 \u00a0 \u7f13\u5b58\u63a7\u5236\u5934\u4fe1\u606f\u00a0 \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 max-age=900\u00a0 20\u00a0 \u00a0 \u8bf7\u6c42\u5904\u7406\u8017\u65f6\uff08\u5355\u4f4ds\uff09 \u00a0 0.014 21 \u00a0 CDN \u8fb9\u7f18\u8282\u70b9 IP \u00a0 \u00a0 \u00a0 \u00a0 \u00a0 153.101.64.13 <p>\u914d\u7f6e\u5f15\u5bfc</p> <p>\u767b\u9646 CDN \u63a7\u5236\u53f0\uff0c\u5728\u7f6e\u9876\u83dc\u5355\u8fdb\u5165 <code>\u5de5\u5177\u7bb1</code>\uff0c\u627e\u5230 <code>\u65e5\u5fd7\u7ba1\u7406</code> \u680f\u76ee\uff0c\u9009\u62e9 <code>\u65e5\u5fd7\u4e0b\u8f7d</code> \u9009\u9879\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff1a</p> <p></p> <p>\u5173\u4e8e\u65e5\u5fd7\u5206\u6790\u548c\u4e0b\u8f7d\u89c6\u9891\u6559\u7a0b\u8bf7\u70b9\u51fb \u65e5\u5fd7\u7ba1\u7406\u89c6\u9891\u6559\u7a0b\u3002</p> <p>\u5982\u6709\u7591\u95ee\u8bf7 \u8054\u7cfb\u6211\u4eec</p>"},{"location":"cdn/product/","title":"\u4ea7\u54c1\u4ecb\u7ecd","text":""},{"location":"cdn/product/#_1","title":"\u4ea7\u54c1\u6982\u8ff0","text":"<p>CDN ( Content Delivery Network )\uff0c\u4e5f\u5373\u5185\u5bb9\u5206\u53d1\u7f51\u7edc\u3002\u901a\u8fc7\u5c06\u7f51\u7ad9\u5185\u5bb9\uff08\u5982\u56fe\u7247\u3001JavaScript  \u3001CSS\u3001\u7f51\u9875\u7b49\uff09\u5206\u53d1\u81f3\u5168\u7f51\u52a0\u901f\u8282\u70b9\uff0c\u914d\u5408\u7cbe\u51c6\u667a\u80fd\u8c03\u5ea6\u7cfb\u7edf\u548c\u8fb9\u7f18\u7f13\u5b58\uff0c\u4f7f\u6700\u7ec8\u7528\u6237\u53ef\u4ee5\u5c31\u8fd1\u83b7\u53d6\u6240\u9700\u5185\u5bb9\uff0c\u6709\u6548\u89e3\u51b3\u4e92\u8054\u7f51\u7f51\u7edc\u62e5\u585e\u95ee\u9898\uff0c\u63d0\u9ad8\u7ec8\u7aef\u7528\u6237\u8bbf\u95ee\u7f51\u7ad9\u7684\u54cd\u5e94\u901f\u5ea6\u548c\u53ef\u7528\u6027\uff0c\u4e0e\u6b64\u540c\u65f6\uff0c\u53ef\u5927\u5e45\u964d\u4f4e\u6e90\u7ad9\u538b\u529b\u3002</p> <p>\u53c8\u62cd\u4e91\u5185\u5bb9\u5206\u53d1\u7f51\u7edc\u7ed3\u5408\u4f18\u8d28\u7684\u7f51\u7edc\u8282\u70b9\u8d44\u6e90\u3001\u7f51\u7edc\u670d\u52a1\u5668\u6280\u672f\u4ee5\u53ca\u4f20\u8f93\u8def\u7531\u6280\u672f\u4f18\u52bf\uff0c\u6784\u5efa\u4e86\u4e0b\u4e00\u4ee3 CDN \u52a0\u901f\u5e73\u53f0\u3002\u6211\u4eec\u7684\u670d\u52a1\u5668\u8f6f\u4ef6\u53ef\u6709\u6548\u5904\u7406\u6bcf\u79d2\u767e\u4e07\u6b21\u7684\u8bf7\u6c42\uff0c\u6211\u4eec\u529b\u6c42\u8ba9 CDN \u670d\u52a1\u66f4\u52a0\u7b80\u5355\u3001\u9ad8\u6548\u3001\u5b89\u5168\uff0c\u5c3d\u4e00\u5207\u53ef\u80fd\u5e2e\u52a9\u7528\u6237\u89e3\u51b3\u4e92\u8054\u7f51\u4e0a\u53ef\u80fd\u5f71\u54cd\u6570\u636e\u4f20\u8f93\u901f\u5ea6\u548c\u7a33\u5b9a\u6027\u7684\u74f6\u9888\u548c\u73af\u8282\u3002</p> <p>CDN\u52a0\u901f\u539f\u7406</p> <p>\u5047\u8bbe\u60a8\u7684\u4e1a\u52a1\u8bbf\u95ee\u57df\u540d\u4e3a <code>www.abc.com</code>\uff0c\u5f53\u8be5\u57df\u540d\u63a5\u5165\u5230\u53c8\u62cd CDN \u670d\u52a1\u4e4b\u540e\uff0c\u60a8\u7684\u6700\u7ec8\u7528\u6237\u53d1\u8d77\u7684 HTTP \u8bf7\u6c42\uff0c\u5b9e\u9645\u7684\u8bbf\u95ee\u6d41\u7a0b\u5982\u4e0b\u56fe\u6240\u793a\uff1a</p> <p></p>"},{"location":"cdn/product/#_2","title":"\u4ea7\u54c1\u67b6\u6784","text":"<p>\u6574\u4e2a\u4ea7\u54c1\u67b6\u6784\u7531\u5ba2\u6237\u7aef\u3001CDN \u7f51\u7edc\u3001\u4f01\u4e1a\u6e90\u7ad9\u3001\u7ba1\u7406\u63a7\u5236\u53f0\u3001CDN \u667a\u80fd\u8c03\u5ea6\u7cfb\u7edf\u7b49\u89d2\u8272\u53ca\u6a21\u5757\u7ec4\u6210\u3002\u4ea7\u54c1\u67b6\u6784\u5982\u4e0b\u56fe\u6240\u793a\uff1a</p> <p></p> <p>\u5ba2\u6237\u7aef</p> <p>\u5ba2\u6237\u7aef\u901a\u8fc7 DNS \u89e3\u6790\u53ef\u4ee5\u5feb\u901f\u63a5\u5165\u5230\u53c8\u62cd\u4e91 CDN \u7f51\u7edc\uff0cCDN \u667a\u80fd\u8c03\u5ea6\u7cfb\u7edf\u53ef\u4ee5\u54cd\u5e94\u4e00\u4e2a\u79bb\u7528\u6237\u6700\u8fd1\u7684 CDN \u8fb9\u7f18\u8282\u70b9 IP \u7ed9\u5ba2\u6237\u7aef\uff0c\u5ba2\u6237\u7aef\u53ef\u4ee5\u8fbe\u5230\u5c31\u8fd1\u8bbf\u95ee\u7684\u76ee\u7684\u3002</p> <p>CDN \u7f51\u7edc</p> <p>\u53c8\u62cd\u4e91 CDN \u7f51\u7edc\u7531\u8fb9\u7f18\u8282\u70b9\u96c6\u7fa4\u3001\u4e2d\u5fc3\u8282\u70b9\u96c6\u7fa4\u3001\u667a\u80fd\u8c03\u5ea6\u7cfb\u7edf\u7b49\u6a21\u5757\u548c\u57fa\u7840\u8bbe\u65bd\u7ec4\u6210\u3002\u8282\u70b9\u96c6\u7fa4\u9664\u4e86\u5177\u5907\u9ad8\u6027\u80fd\u7684\u7f13\u5b58\u529f\u80fd\uff0c\u8fd8\u5177\u5907\u56db\u5c42\u548c\u4e03\u5c42\u7684\u8d1f\u8f7d\u5747\u8861\u529f\u80fd\u3002</p> <p>\u4f01\u4e1a\u6e90\u7ad9</p> <p>\u4f01\u4e1a\u6e90\u7ad9\u53ef\u4ee5\u662f\u4f01\u4e1a\u81ea\u5efa\u7684\u6e90\u7ad9\u6216\u8005\u6258\u7ba1\u5728\u7b2c\u4e09\u65b9\u5b58\u50a8\u7684\u9759\u6001\u8d44\u6e90\uff0cCDN \u7f51\u7edc\u4f5c\u4e3a\u53cd\u5411\u4ee3\u7406\u4f1a\u6839\u636e\u5ba2\u6237\u7aef\u7684\u8bf7\u6c42\u56de\u6e90\u7ad9\u8bf7\u6c42\u8d44\u6e90\u6587\u4ef6\u5e76\u5c06\u6570\u636e\u8d44\u6e90\u8fdb\u884c\u7f13\u5b58\u3002</p> <p>\u7ba1\u7406\u63a7\u5236\u53f0</p> <p>\u7528\u6237\u53ef\u901a\u8fc7\u53c8\u62cd\u4e91\u7ba1\u7406\u63a7\u5236\u53f0\u3001API \u7684\u65b9\u5f0f\uff0c\u7ba1\u7406\u6258\u7ba1\u5728\u53c8\u62cd\u4e91 CDN \u7f51\u7edc\u4e0a\u7684\u8d44\u6e90\u53ca\u670d\u52a1\uff0c\u901a\u8fc7\u66f4\u591a\u7684\u7edf\u8ba1\u6570\u636e\u5c55\u793a\uff0c\u4f7f\u5f97 CDN \u670d\u52a1\u66f4\u52a0\u65b9\u4fbf\u3001\u5feb\u6377\u3002</p>"},{"location":"cdn/product/#_3","title":"\u4e3b\u8981\u529f\u80fd","text":"\u529f\u80fd\u7c7b\u522b \u529f\u80fd\u540d\u79f0 \u8be6\u7ec6 \u662f\u5426\u652f\u6301 \u670d\u52a1\u7ba1\u7406 \u7ba1\u7406\u65b9\u5f0f \u652f\u6301\u7ba1\u7406\u63a7\u5236\u53f0\u56fe\u5f62\u5316\u7ba1\u7406\u3001API \u7ba1\u7406 \u221a API \u7ba1\u7406 \u652f\u6301\u521b\u5efa\u3001\u4fee\u6539\u3001\u5220\u9664\u3001\u542f\u7528\u3001\u505c\u6b62\u670d\u52a1\uff0c\u7edf\u8ba1\u5206\u6790\u53ca\u65e5\u5fd7\u4e0b\u8f7d\u7b49 \u221a \u57df\u540d\u7ed1\u5b9a \u4e00\u4e2a\u670d\u52a1\u4e0b\u6700\u591a\u53ef\u4ee5\u7ed1\u5b9a 10 \u4e2a\u57df\u540d\uff0c\u652f\u6301\u6cdb\u57df\u540d\uff0c\u4e0d\u652f\u6301\u672a\u5907\u6848\u57df\u540d \u221a \u5185\u5bb9\u7ba1\u7406 \u7f13\u5b58\u914d\u7f6e \u652f\u6301\u81ea\u5b9a\u4e49\u7f13\u5b58\u65f6\u95f4\u8bbe\u7f6e\uff0c\u53ef\u9488\u5bf9\u6587\u4ef6\u540e\u7f00\u3001\u76ee\u5f55\u7b49\u8fdb\u884c\u8d44\u6e90\u7f13\u5b58\u65f6\u95f4\u7684\u8bbe\u7f6e \u221a \u5185\u5bb9\u5237\u65b0 \u652f\u6301 URL \u5237\u65b0\u4ee5\u53ca\u89c4\u5219\u5237\u65b0\uff0c\u53ef\u5c06 CDN \u8282\u70b9\u7684\u6587\u4ef6\u8fdb\u884c\u5220\u9664\u6216\u81f4\u8fc7\u671f\u5904\u7406 \u221a URL \u9884\u70ed \u53ef\u5c06\u70ed\u95e8\u6587\u4ef6\u63d0\u524d\u7f13\u5b58\u81f3 CDN \u8282\u70b9\uff0c\u964d\u4f4e\u6e90\u7ad9\u538b\u529b \u221a \u53c2\u6570\u8ddf\u968f \u63a7\u5236\u662f\u5426\u8fc7\u6ee4\u8bf7\u6c42\u4e2d\u7684\u67e5\u8be2\u5b57\u7b26\u4e32\uff0c\u652f\u6301\u5ffd\u7565\u53c2\u6570\u3001\u5168\u7a0b\u8ddf\u968f\u3001\u56de\u6e90\u8ddf\u968f\u7b49\u6a21\u5f0f \u221a \u8bbf\u95ee\u63a7\u5236 \u9ed1\u767d\u540d\u5355 \u652f\u6301 IP\u3001URL \u9ed1\u767d\u540d\u5355\u8bbe\u7f6e\uff0c\u7981\u7528\u975e\u6cd5\u8d44\u6e90\u8bbf\u95ee \u221a \u9632\u76d7\u94fe \u652f\u6301\u5730\u533a\u8bbf\u95ee\u9650\u5236\u3001Token\u3001Referer\u3001\u56de\u6e90\u9274\u6743\u7b49\u591a\u79cd\u9632\u76d7\u94fe\u65b9\u5f0f \u221a WAF \u9632\u62a4 \u80fd\u6709\u6548\u62e6\u622a\u8de8\u7ad9\u653b\u51fb\u3001SQL \u6ce8\u5165\u548c\u5176\u4ed6\u4ee3\u7801\u6267\u884c\u7b49\u591a\u79cd\u653b\u51fb\u65b9\u5f0f \u221a CC \u9632\u62a4 \u53ef\u6709\u6548\u9632\u6b62 DDos  \u653b\u51fb\u4e2d\u7684 CC \u653b\u51fb\uff0c\u652f\u6301\u667a\u80fd\u53ca\u5f3a\u5236\u9632\u62a4\u6a21\u5f0f \u221a HTTP\u8bf7\u6c42\u5927\u5c0f\u9650\u5236 \u53ef\u9650\u5236\u5355\u6b21\u8bf7\u6c42\u4f53\u7684\u5185\u5bb9\u5927\u5c0f\uff0c\u80fd\u6709\u6548\u4fdd\u8bc1\u8bf7\u6c42\u7684\u5b89\u5168\u6027 \u221a \u7edf\u8ba1\u5206\u6790 \u5e26\u5bbd\u7edf\u8ba1 \u53ef\u6839\u636e\u5730\u533a\u3001\u8fd0\u8425\u5546\u7b49\u7ef4\u5ea6\u67e5\u770b\u57df\u540d\u53ca\u670d\u52a1\u6700\u8fd1 30 \u5929\u7684\u5e26\u5bbd\u8d8b\u52bf\u53ca\u8be6\u7ec6\u7edf\u8ba1\u6570\u636e \u221a \u6d41\u91cf\u7edf\u8ba1 \u53ef\u6839\u636e\u5730\u533a\u3001\u8fd0\u8425\u5546\u7b49\u7ef4\u5ea6\u67e5\u770b\u57df\u540d\u53ca\u670d\u52a1\u6700\u8fd1 30 \u5929\u7684\u6d41\u91cf\u8d8b\u52bf\u53ca\u8be6\u7ec6\u7edf\u8ba1\u6570\u636e \u221a \u8bf7\u6c42\u6570\u7edf\u8ba1 \u53ef\u6839\u636e\u5730\u533a\u3001\u8fd0\u8425\u5546\u7b49\u7ef4\u5ea6\u67e5\u770b\u57df\u540d\u53ca\u670d\u52a1\u6700\u8fd1 30 \u5929\u7684\u8bf7\u6c42\u6570\u8d8b\u52bf\u53ca\u8be6\u7ec6\u7edf\u8ba1\u6570\u636e \u221a \u5bfc\u51fa\u5386\u53f2\u6570\u636e \u53ef\u6839\u636e\u5730\u533a\u3001\u8fd0\u8425\u5546\u7b49\u7ef4\u5ea6\u67e5\u770b\u57df\u540d\u53ca\u670d\u52a1\u6700\u8fd1 30\u5929 5\u5206\u949f\u7c92\u5ea6\u7684\u8be6\u7ec6\u5e26\u5bbd\u6570\u636e \u221a \u6027\u80fd\u76d1\u63a7 \u5065\u5eb7\u5ea6 \u7edf\u8ba1\u6240\u6709\u8bf7\u6c42\u7684 HTTP \u72b6\u6001\u7801\uff0c\u8ba1\u7b97 2xx \u548c 3xx \u8bf7\u6c42\u6b21\u6570\u6240\u5360\u7684\u6bd4\u4f8b \u221a \u7f13\u5b58\u547d\u4e2d\u7387 \u7edf\u8ba1\u6240\u6709\u8bf7\u6c42\u6570\u4e2d\uff0c\u547d\u4e2d\u7f13\u5b58\u7684\u8bf7\u6c42\u6570\u6240\u5360\u7684\u6bd4\u4f8b \u221a \u5e73\u5747\u4e0b\u8f7d\u901f\u5ea6 \u53ef\u4ee5\u6839\u636e\u5730\u533a\u548c\u8fd0\u8425\u5546\u6765\u533a\u5206\u8d44\u6e90\u6587\u4ef6\u4e0b\u8f7d\u901f\u5ea6\u548c\u8bf7\u6c42\u8017\u65f6 \u221a \u62e6\u622a\u653b\u51fb\u6b21\u6570 \u62e6\u622a\u7684\u8de8\u7ad9\u653b\u51fb\u3001SQL \u6ce8\u5165\u548c\u5176\u4ed6\u4ee3\u7801\u6267\u884c\u7b49\u591a\u79cd\u653b\u51fb\u7684\u6570\u91cf \u221a \u9ad8\u7ea7\u670d\u52a1 \u81ea\u5b9a\u4e49 SSL \u670d\u52a1 \u7528\u6237\u53ef\u4ee5\u4e0a\u4f20\u81ea\u5df1\u7684 SSL \u8bc1\u4e66\u5230\u53c8\u62cd\u4e91\uff0c\u5e76\u7ba1\u7406\u81ea\u5b9a\u4e49\u57df\u540d\u7684 HTTPS \u8bbf\u95ee \u221a \u89c6\u9891\u62d6\u62c9 \u652f\u6301 MP4\uff0cFLV \u6587 \u4ef6\u6839\u636e\u89c6\u9891\u5934\u8fdb\u884c\u62d6\u62c9\u64ad\u653e\uff0c\u9ed8\u8ba4 MP4 \u6309\u65f6\u95f4\u62d6\u62c9\uff0cFLV \u6309\u5b57\u8282\u62d6\u62c9 \u221a CORS \u8de8\u57df\u5171\u4eab \u7528\u6237\u53ef\u4ee5\u5728\u53c8\u62cd\u4e91\u63a7\u5236\u53f0\u914d\u7f6e\u7b26\u5408\u81ea\u5df1\u7ad9\u70b9\u7684\u8de8\u57df\u8bf7\u6c42\u7b56\u7565 \u221a \u81ea\u5b9a\u4e49 Rewrite \u7528\u6237\u53ef\u4ee5\u6839\u636e\u7cfb\u7edf\u9884\u8bbe\u51fd\u6570\u3001\u8bf7\u6c42\u53d8\u91cf\u53ca\u5b57\u7b26\u4e32\u5e38\u91cf\u7b49\u8fdb\u884c\u81ea\u7531\u7ec4\u5408\uff0c\u5b8c\u6210\u5bf9\u8bf7\u6c42\u7684\u91cd\u5199 \u221a \u81ea\u5b9a\u4e49\u63d0\u793a\u56fe \u53ef\u4ee5\u6839\u636e 403\u3001404\u3001405 \u7b49\u72b6\u6001\u7801\u8fdb\u884c\u81ea\u5b9a\u4e49\u63d0\u793a\u56fe\u7684\u8bbe\u7f6e \u221a \u955c\u50cf\u5b58\u50a8 \u652f\u6301\u5c06\u7b2c\u4e09\u65b9\u5b58\u50a8\u4ee5\u53ca\u4f01\u4e1a\u6e90\u7ad9\u7684\u9759\u6001\u8d44\u6e90\u901a\u8fc7\u955c\u50cf\u7684\u65b9\u5f0f\u9010\u6b65\u8fc1\u79fb\u5230\u53c8\u62cd\u4e91\u5b58\u50a8 \u221a \u65e5\u5fd7\u7ba1\u7406 \u65e5\u5fd7\u4e0b\u8f7d \u652f\u6301\u4ee5\u5c0f\u65f6\u7c92\u5ea6\u7684\u65e5\u5fd7\u4e0b\u8f7d\uff0c\u53ef\u6536\u96c6\u8be6\u7ec6\u7684\u7ec8\u7aef\u8bbf\u95ee\u65e5\u5fd7 \u221a \u65e5\u5fd7\u5206\u6790 \u53ef\u67e5\u770b\u70ed\u95e8\u6587\u4ef6\u3001\u70ed\u95e8\u5ba2\u6237\u7aef\u3001\u70ed\u95e8\u5f15\u7528\u3001\u72b6\u6001\u7801\u7b49\u7ef4\u5ea6\u5bf9\u6587\u4ef6 URL \u8fdb\u884c\u7edf\u8ba1\u5206\u6790 \u221a \u8f85\u52a9\u5de5\u5177 IP \u68c0\u6d4b\u5de5\u5177 \u53ef\u901a\u8fc7\u8be5\u529f\u80fd\u9a8c\u8bc1 IP \u5730\u5740\u662f\u5426\u5c5e\u4e8e\u53c8\u62cd\u4e91 CDN \u8282\u70b9 \u221a \u7f51\u7edc\u8bca\u65ad\u5de5\u5177 \u68c0\u6d4b\u5f53\u524d\u7f51\u7edc\u8fde\u63a5\u60c5\u51b5\u53ca\u57fa\u672c\u4fe1\u606f\uff0c\u65b9\u4fbf\u5b9a\u4f4d\u95ee\u9898 \u221a"},{"location":"cdn/product/#_4","title":"\u4ea7\u54c1\u4f18\u52bf","text":"<p>\u81ea\u52a9\u64cd\u4f5c\uff0c\u63d0\u5347\u6548\u7387</p> <p>\u76f8\u5bf9\u4f20\u7edf CDN \u5382\u5546\uff0c\u53c8\u62cd\u4e91 CDN \u670d\u52a1\u5b8c\u5168\u5b9e\u73b0\u5168\u81ea\u52a9\u5316\u914d\u7f6e\uff0c\u5ba2\u6237\u53ef\u81ea\u4e3b\u8fdb\u884c\u529f\u80fd\u7684\u914d\u7f6e\uff08 \u57df\u540d\u914d\u7f6e\u3001\u56de\u6e90\u7b56\u7565\u3001\u7f13\u5b58\u89c4\u5219\u7b49 \uff09\uff0c\u6781\u5927\u63d0\u5347\u4e86\u5de5\u4f5c\u6548\u7387\u3002</p> <p>\u8d44\u6e90\u4e30\u5bcc\uff0c\u5168\u7f51\u8986\u76d6</p> <p>\u53c8\u62cd\u4e91 CDN \u670d\u52a1\u8282\u70b9\u8d44\u6e90\u4e30\u5bcc\uff0c\u5b9e\u73b0\u65e0\u5dee\u5f02\u7684\u7f51\u7edc\u8986\u76d6\uff0c\u5168\u8282\u70b9\u5168\u8d44\u6e90\u63d0\u4f9b\u670d\u52a1\uff0c\u771f\u6b63\u5b9e\u73b0\u5168\u7f51\u52a0\u901f\uff1b\u7f51\u7edc\u8d44\u6e90\u5b9e\u73b0\u672c\u5730\u5316\u8fd0\u8425\u5546\u8986\u76d6\uff0c\u652f\u6301\u5e26\u5bbd\u3001\u5b58\u50a8\u3001\u8282\u70b9\u7684\u5f39\u6027\u6269\u5c55\uff0c\u907f\u514d\u7a81\u53d1\u8bbf\u95ee\u6fc0\u589e\uff0c\u6253\u9020\u4e86\u76ee\u524d\u56fd\u5185\u8986\u76d6\u7387\u6700\u9ad8\u7684\u5185\u5bb9\u5206\u53d1\u7f51\u7edc\uff0c\u8ba9\u7528\u6237\u968f\u65f6\u968f\u5730\u4eab\u53d7\u4e91\u52a0\u901f\u3002</p> <p>\u8282\u7ea6\u6210\u672c\uff0c\u7b80\u5316\u8fd0\u8425</p> <p>\u7528\u6237\u901a\u8fc7\u53c8\u62cd\u4e91 CDN \u7684\u5206\u53d1\u52a0\u901f\uff0c\u514d\u53bb\u4e86\u81ea\u8eab\u67b6\u8bbe\u5185\u5bb9\u5206\u53d1\u7f51\u7edc\u7684\u65f6\u95f4\u53ca\u8d44\u6e90\u6295\u5165\uff0c\u66f4\u80fd\u83b7\u5f97\u975e\u5e38\u4e13\u4e1a\u7684\u8fd0\u7ef4\u4fdd\u969c\u670d\u52a1\uff0c\u7b80\u5316\u4e86\u5ba2\u6237\u7f51\u7ad9\u7684\u7cfb\u7edf\u7ef4\u62a4\uff0c\u66f4\u4fbf\u6377\u7684\u5bf9\u5168\u7f51\u8fdb\u884c\u5206\u53d1\u3002</p> <p>\u5206\u6790\u6570\u636e\uff0c\u7cbe\u7ec6\u76d1\u63a7</p> <p>\u53c8\u62cd\u4e91\u9488\u5bf9\u6240\u6709\u5ba2\u6237\uff0c\u5b9e\u73b0\u5168\u900f\u660e\u5316\u76d1\u63a7\uff0c\u670d\u52a1\u8d28\u91cf\u53ef\u901a\u8fc7\u53c8\u62cd\u4e91\u7ba1\u7406\u63a7\u5236\u5e73\u53f0\u4e00\u89c8\u65e0\u4f59\uff0c\u4e3a\u5ba2\u6237\u4e1a\u52a1\u6838\u5fc3\u5bfc\u5411\u63d0\u4f9b\u91cd\u8981\u4f9d\u636e\u3002</p> <p>\u8fd0\u8425\u7a33\u5b9a\uff0c\u670d\u52a1\u4e13\u4e1a</p> <p>\u53c8\u62cd\u4e91 CDN \u4f5c\u4e3a\u7f51\u7edc\u52a0\u901f\u670d\u52a1\u5546\uff0c\u62e5\u6709\u4e30\u5bcc\u7684 CDN \u8fd0\u8425\u7ecf\u9a8c\uff0c\u6df1\u523b\u7406\u89e3\u4e92\u8054\u7f51\u57fa\u7840\u67b6\u6784\uff0c\u5e76\u63d0\u4f9b\u4e86 7*24 \u5c0f\u65f6\u65e0\u95f4\u65ad\u7684\u8fd0\u8425\u670d\u52a1\uff0c\u4fdd\u8bc1\u4efb\u4f55\u65f6\u523b\u90fd\u53ef\u4ee5\u4e3a\u5ba2\u6237\u89e3\u7591\u7b54\u60d1\u3002</p>"},{"location":"cdn/product/#_5","title":"\u5e94\u7528\u573a\u666f","text":"<p>\u53c8\u62cd\u4e91\u5168\u7f51\u52a0\u901f\u670d\u52a1\u5b8c\u7f8e\u878d\u5408\u4e86\u53c8\u62cd\u4e91\u5bf9\u8c61\u5b58\u50a8\u548c CDN \u670d\u52a1\uff0c\u53ef\u4ee5\u9488\u5bf9\u7f51\u9875\u56fe\u7247\u3001\u4e0b\u8f7d\u5b89\u88c5\u5305\u3001\u97f3\u89c6\u9891\u7b49\u6587\u4ef6\u63d0\u4f9b\u6570\u636e\u6258\u7ba1\u3001\u5206\u53d1\u52a0\u901f\u53ca\u5904\u7406\u4e8e\u4e00\u4f53\u7684\u4e00\u7ad9\u5f0f\u89e3\u51b3\u65b9\u6848\u3002\u4e1a\u52a1\u4f7f\u7528\u573a\u666f\u5982\u4e0b\uff1a</p> <p>\u7f51\u9875\u56fe\u7247\u52a0\u901f</p> <p>\u7f51\u9875\u53ca\u5c0f\u6587\u4ef6\u52a0\u901f\u670d\u52a1\u5e2e\u52a9\u5ba2\u6237\u63d0\u5347\u7f51\u7ad9\u7684\u7528\u6237\u8bbf\u95ee\u901f\u5ea6\u548c\u670d\u52a1\u53ef\u7528\u6027\uff0c\u901a\u8fc7\u5c06\u9700\u8981\u8bbf\u95ee\u7684\u9759\u6001\u5185\u5bb9\u5206\u53d1\u5230\u4f4d\u4e8e\u7f51\u7edc\u8fb9\u7f18\u7684\u5404\u4e2a\u7f13\u5b58\u670d\u52a1\u5668\u4e2d\uff0c\u5c06\u7528\u6237\u8bf7\u6c42\u81ea\u52a8\u5206\u914d\u5230\u8ddd\u79bb\u7528\u6237\u6700\u8fd1\u7684\u670d\u52a1\u5668\u4e0a\u3002\u5efa\u8bae\u7ed3\u5408\u53c8\u62cd\u4e91\u5bf9\u8c61\u5b58\u50a8\u670d\u52a1\uff0c\u53ef\u4ee5\u6709\u6548\u63d0\u5347\u5185\u5bb9\u52a0\u8f7d\u901f\u5ea6\uff0c\u8f7b\u677e\u641e\u5b9a\u7f51\u7ad9\u56fe\u7247\u3001\u77ed\u89c6\u9891\u7b49\u5185\u5bb9\u5206\u53d1\u3002</p> <p>\u52a8\u6001\u5185\u5bb9\u52a0\u901f</p> <p>\u53c8\u62cd\u4e91\u52a8\u6001\u5185\u5bb9\u52a0\u901f\u878d\u5408\u5728\u5168\u7f51\u52a0\u901f\u670d\u52a1\u4e2d\uff0c\u53ef\u667a\u80fd\u5224\u65ad PHP\u3001JSP\u3001ASP \u7b49\u52a8\u6001\u8d44\u6e90\u6587\u4ef6\uff0c\u81ea\u52a8\u5b9e\u73b0\u52a8\u9759\u5206\u79bb\u3002\u901a\u8fc7\u667a\u80fd\u8def\u7531\u3001\u5185\u5bb9\u538b\u7f29\u3001\u534f\u8bae\u4f18\u5316\u7b49\u6280\u672f\u5b9e\u73b0\u52a8\u6001\u5185\u5bb9\u7684\u52a0\u901f\uff0c\u5b8c\u7f8e\u89e3\u51b3\u7535\u5546\u8d2d\u7269\u3001\u5728\u7ebf\u65c5\u6e38\u7b49\u7f51\u7ad9\u5728\u767b\u9646\u3001\u63d0\u4ea4\u8ba2\u5355\u7b49\u52a8\u6001\u8bf7\u6c42\u8bbf\u95ee\u901f\u5ea6\u6162\u7684\u95ee\u9898\uff0c\u53ef\u8fdb\u4e00\u6b65\u63d0\u9ad8\u5ba2\u6237\u4e1a\u52a1\u8f6c\u5316\u7387\u3002</p> <p>\u5927\u6587\u4ef6\u4e0b\u8f7d\u52a0\u901f</p> <p>\u53c8\u62cd\u4e91\u5168\u7f51\u52a0\u901f\u670d\u52a1\u9488\u5bf9\u7f51\u7edc\u6e38\u620f\u3001\u8f6f\u4ef6\u4e0b\u8f7d\u7c7b\u7f51\u7ad9\u53ca\u5e94\u7528\u7b49\u5927\u6587\u4ef6\u5206\u53d1\u63d0\u4f9b\u4e86\u4e00\u7ad9\u5f0f\u89e3\u51b3\u65b9\u6848\u3002\u7531\u4e8e\u6b64\u7c7b\u7f51\u7ad9\u53ca\u5e94\u7528\u5b58\u5728\u5e26\u5bbd\u7a81\u53d1\u5e76\u4e14\u7531\u4e8e\u5927\u6587\u4ef6\u4e0b\u8f7d\u4f1a\u5bfc\u81f4\u6e90\u7ad9\u670d\u52a1\u5668\u627f\u53d7\u975e\u5e38\u5927\u7684\u538b\u529b\uff0c\u53c8\u62cd\u4e91\u4e30\u5bcc\u7684\u5e26\u5bbd\u8d44\u6e90\u5e76\u4e14\u7ed3\u5408\u53c8\u62cd\u4e91\u5bf9\u8c61\u5b58\u50a8\u670d\u52a1\uff0c\u53ef\u5b8c\u7f8e\u89e3\u51b3\u5927\u6587\u4ef6\u5e26\u5bbd\u7a81\u53d1\u5e26\u6765\u7684\u4e00\u7cfb\u5217\u95ee\u9898\u3002</p> <p>\u89c6\u9891\u70b9\u64ad\u52a0\u901f</p> <p>\u53c8\u62cd\u4e91\u5168\u7f51\u52a0\u901f\u670d\u52a1\u878d\u5408\u4e86\u89c6\u9891\u70b9\u64ad\u52a0\u901f\u548c\u5f02\u6b65\u97f3\u89c6\u9891\u5904\u7406\u670d\u52a1\uff0c\u9488\u5bf9\u6d41\u5a92\u4f53\u70b9\u64ad\u3001\u97f3\u89c6\u9891\u7f51\u7ad9\u53ca\u5e94\u7528\uff0c\u53c8\u62cd\u4e91\u53ef\u4ee5\u63d0\u4f9b\u9ad8\u901f\u3001\u4f4e\u4ef7\u7684\u6570\u636e\u4f20\u8f93\u670d\u52a1\uff0c\u5e2e\u52a9\u5728\u7ebf\u89c6\u9891\u7f51\u7ad9\u3001\u5728\u7ebf\u6559\u80b2\u7f51\u7ad9\u7b49\u4ee5\u6d41\u5a92\u4f53\u4e3a\u4e3b\u7684\u4f01\u4e1a\u63d0\u4f9b\u7a33\u5b9a\u3001\u9ad8\u8d28\u91cf\u3001\u4f4e\u4ef7\u7684\u89c6\u9891\u5206\u53d1\u670d\u52a1\uff0c\u8ba9\u60a8\u7684\u7528\u6237\u5728\u5168\u56fd\u4efb\u4f55\u5730\u65b9\u90fd\u53ef\u4ee5\u4eab\u53d7\u5230\u4f18\u8d28\u7684\u89c6\u9891\u4f53\u9a8c\u3002</p> <p>\u81ea\u5b9a\u4e49 SSL \u670d\u52a1</p> <p>\u53c8\u62cd\u4e91\u81ea\u5b9a\u4e49 SSL \u52a0\u901f\u670d\u52a1\u53ef\u6ee1\u8db3\u7535\u5b50\u5546\u52a1\u3001\u5728\u7ebf\u6559\u80b2\u3001\u94f6\u884c\u4fdd\u9669\u7b49\u7f51\u7ad9\u5728 HTTPS \u52a0\u901f\u65b9\u9762\u7684\u9700\u6c42\uff0c\u5e76\u53ef\u4ee5\u5b8c\u5168\u6ee1\u8db3\u81ea\u4e3b\u5316\u914d\u7f6e\u3002SSL \u670d\u52a1\u5668\u6570\u5b57\u8bc1\u4e66\u53ef\u51ed\u501f\u9ad8\u5f3a\u5ea6\u7b7e\u540d\u7b97\u6cd5\uff0c\u7ed3\u5408\u670d\u52a1\u5668\u7aef\u7684\u52a0\u5bc6\u534f\u8bae\uff0c\u5b8c\u6210 Web \u8bbf\u95ee\u5ba2\u6237\u5230\u670d\u52a1\u5668\u95f4\u7684 HTTPS \u52a0\u5bc6\u4f20\u8f93\uff0c\u6709\u6548\u9632\u6b62 Web \u4f20\u8f93\u4e2d\u7684\u6570\u636e\u52ab\u6301\uff0c\u4e3a\u7f51\u7ad9\u8bbf\u95ee\u8005\u63d0\u4f9b\u771f\u5b9e\u3001\u6709\u6548\u3001\u5b89\u5168\u7684\u7f51\u7ad9\u5185\u5bb9\u63d0\u4f9b\u65b9\u8eab\u4efd\u4fe1\u606f\uff0c\u786e\u4fdd\u7528\u6237\u53ef\u653e\u5fc3\u7684\u6d4f\u89c8\u7f51\u7ad9\u76f8\u5173\u5185\u5bb9\u3002</p>"},{"location":"cdn/product/#_6","title":"\u8d44\u6e90\u5206\u5e03","text":"<p>\u622a\u81f3 2017 \u5e74 9 \u6708\uff0c\u53c8\u62cd\u4e91\u56fd\u5185 CDN \u8282\u70b9\u6570\u8fbe\u5230 200 \u591a\u4e2a\uff0c\u8986\u76d6 15 \u591a\u4e2a\u56fd\u5bb6\u548c\u5730\u533a\uff0c10 \u591a\u4e2a\u8fd0\u8425\u5546\uff0c\u5e26\u5bbd\u603b\u91cf\u8d85\u8fc7 3.5Tbps\u30022015 \u5e74\u5e95\uff0c\u53c8\u62cd\u4e91 CDN \u8282\u70b9\u8d44\u6e90\u5df2\u8986\u76d6\u65b0\u52a0\u5761\u3001\u53f0\u6e7e\u3001\u9999\u6e2f\u3001\u7f8e\u56fd\u3001\u5fb7\u56fd\u7b49\u6d77\u5916\u5730\u533a\uff0c\u5168\u9762\u652f\u6301\u6d77\u5916\u52a0\u901f\uff0c\u63a8\u8fdb\u5168\u7403\u5316\u5e03\u5c40\u3002</p> <p>\u5982\u6709\u7591\u95ee\u8bf7 \u8054\u7cfb\u6211\u4eec</p>"},{"location":"cdn/refresh/","title":"\u5237\u65b0\u9884\u70ed","text":"<p>\u524d\u9762\u7ae0\u8282\u6211\u4eec\u4ecb\u7ecd\u4e86\u7f13\u5b58\u914d\u7f6e\uff0c\u5f53 CDN \u7684\u8d44\u6e90\u6587\u4ef6\u7f13\u5b58\u8fc7\u671f\u4e4b\u540e\u4f1a\u56de\u6e90\u83b7\u53d6\u6587\u4ef6\u5e76\u7f13\u5b58\uff0c\u4f46\u662f\u8fd9\u662f\u4e00\u4e2a\u88ab\u52a8\u66f4\u65b0\u7684\u8fc7\u7a0b\uff0c\u8d44\u6e90\u66f4\u65b0\u53d7\u9650\u4e8e\u7f13\u5b58\u8fc7\u671f\u65f6\u95f4\u3002\u5f53\u6e90\u7ad9\u8d44\u6e90\u66f4\u65b0\u4e4b\u540e\u9700\u8981\u5feb\u901f\u56de\u6e90\u4e0b\u53d1\u5230 CDN \u8282\u70b9\u65f6\uff0c\u53ef\u4ee5\u4f7f\u7528\u7f13\u5b58\u5237\u65b0\u529f\u80fd\u6765\u5b9e\u73b0\uff0c\u8fd9\u662f\u4e00\u79cd\u4e3b\u52a8\u66f4\u65b0\u7684\u65b9\u5f0f\u3002</p> <p>\u914d\u7f6e\u5f15\u5bfc</p> <p>\u767b\u5f55 CDN \u63a7\u5236\u53f0\uff0c\u8fdb\u5165 <code>\u5237\u65b0</code> \u680f\u76ee\uff0c\u60a8\u53ef\u4ee5\u9009\u62e9 <code>URL \u5237\u65b0</code>\u3001<code>\u89c4\u5219\u5237\u65b0</code>\u6765\u5f3a\u5236\u56de\u6e90\u66f4\u65b0\u6587\u4ef6\u53ca\u76ee\u5f55\u3002\u60a8\u4e5f\u53ef\u4ee5\u5728 <code>\u64cd\u4f5c\u8bb0\u5f55</code> \u9009\u9879\u67e5\u8be2\u5237\u65b0\u8fdb\u5ea6\u53ca\u76f8\u5173\u72b6\u6001\u3002</p>"},{"location":"cdn/refresh/#url","title":"URL \u5237\u65b0","text":"<p>\u5f53\u6e90\u7ad9\u6709\u5c11\u91cf\u6587\u4ef6\u66f4\u65b0\u65f6\uff0c\u53ef\u4ee5\u4f7f\u7528 <code>URL \u5237\u65b0</code> \u6765\u4e3b\u52a8\u5220\u9664 CDN \u8282\u70b9\u4e0a\u7684\u8d44\u6e90\u6587\u4ef6\u3002\u65b0\u7684\u8bf7\u6c42\u8fdb\u6765\u65f6\uff0cCDN \u8282\u70b9\u4f1a\u56de\u6e90\u83b7\u53d6\u6587\u4ef6\u5e76\u5c06\u65b0\u7684\u8d44\u6e90\u6587\u4ef6\u7f13\u5b58\u81f3 CDN \u8282\u70b9\uff0c\u6240\u4ee5\u8fd9\u662f\u4e00\u4e2a\u4e3b\u52a8\u66f4\u65b0\u7684\u8fc7\u7a0b\u3002\u64cd\u4f5c\u754c\u9762\u5982\u4e0b\u56fe\u6240\u793a\uff1a</p> <p></p> <p>\u6ce8\u610f\u4e8b\u9879\uff1a</p> <p>1.\u6bcf\u884c\u4e00\u4e2aURL\u5730\u5740\uff0c\u6bcf\u4e2a URL \u5730\u5740\u4ee5 http://\u6216https://\u5f00\u5934\uff0c\u4f8b\u5982\uff1a<code>http://example.com/image/test.jpg</code></p> <p>2.\u6bcf\u6b21\u8f93\u5165\u4e0d\u8d85\u8fc7 50 \u4e2a\uff0c\u5237\u65b0\u4efb\u52a1\u5168\u7f51\u751f\u6548\u65f6\u95f4\u5927\u7ea6 5 \u5230 10 \u5206\u949f</p>"},{"location":"cdn/refresh/#_1","title":"\u89c4\u5219\u5237\u65b0","text":"<p>\u5f53\u6e90\u7ad9\u6709\u9488\u5bf9\u8d44\u6e90\u8fdb\u884c\u6279\u91cf\u66f4\u65b0\u65f6\uff0c\u53ef\u4ee5\u901a\u8fc7 <code>\u89c4\u5219\u5237\u65b0</code> \u6765\u5237\u65b0\u8282\u70b9\u7f13\u5b58\u6587\u4ef6\u3002\u5b9e\u9645\u4e0a\uff0c\u89c4\u5219\u5237\u65b0\u5e76\u6ca1\u6709\u5220\u9664\u8282\u70b9\u8d44\u6e90\u6587\u4ef6\uff0c\u89c4\u5219\u4e00\u65e6\u751f\u6548\u4e4b\u540e\uff0c\u7f13\u5b58\u5728 CDN \u8282\u70b9\u7684\u6587\u4ef6\u4f1a\u88ab\u81f4\u8fc7\u671f\uff0c\u65b0\u7684\u8bf7\u6c42\u4f1a\u56de\u6e90\u6821\u9a8c\u4e00\u6b21\uff0c\u5982\u679c\u6e90\u7ad9\u6587\u4ef6\u6709\u66f4\u65b0\uff0c\u5219\u5c06\u65b0\u7684\u6587\u4ef6\u54cd\u5e94\u7ed9\u6700\u7ec8\u7528\u6237\u5e76\u66ff\u6362\u8282\u70b9\u4e0a\u7684\u65e7\u6587\u4ef6\u3002\u64cd\u4f5c\u754c\u9762\u5982\u4e0b\u56fe\u6240\u793a\uff1a</p> <p></p> <p>\u89c4\u5219\u793a\u4f8b\uff1a</p> <pre><code>http://example.com/image/*\nhttp://example.com/image/*.jpg\nhttp://example.com/image/*!upyun\uff08 \u9002\u7528\u4e8e\u81ea\u5b9a\u4e49\u7f29\u7565\u56fe\u7248\u672c \uff09\n</code></pre> <p>\u6ce8\u610f\u4e8b\u9879\uff1a</p> <p>1.\u6bcf\u884c\u4e00\u4e2a\u8def\u5f84\u89c4\u5219\uff0c\u6bcf\u4e2a\u8def\u5f84\u89c4\u5219\u4ee5 http:// \u6216 https:// \u5f00\u5934\uff0c\u6bcf\u6b21\u8f93\u5165\u4e0d\u8d85\u8fc7 10    \u4e2a\uff0c\u4f8b\u5982\uff1a<code>http://example.com/image/\uff0a</code></p> <p>2.\u89c4\u5219\u5237\u65b0\u4e3b\u8981\u7528\u4e8e\u5bf9\u4f7f\u7528\u5ba2\u6237\u81ea\u4e3b\u6e90\u7ad9\u7684 CDN \u670d\u52a1\uff0c\u6267\u884c\u540e\u4f1a\u5728 10 \u5206\u949f\u5185\u751f\u6548</p> <p>\u7279\u522b\u58f0\u660e\uff1a</p> <p>1.\u5982\u60a8\u4f7f\u7528\u4e86\u53c8\u62cd\u4e91\u5bf9\u8c61\u5b58\u50a8\u670d\u52a1\u65f6\uff0c\u5982\u679c\u60a8\u901a\u8fc7 <code>\u89c4\u5219\u5237\u65b0</code> \u6765\u5237\u65b0\u7f13\u5b58\u7684\u8bdd\uff0c\u57fa\u4e8e\u5e73\u53f0\u4fdd\u62a4\uff0c<code>\u89c4\u5219\u5237\u65b0</code> \u751f\u6548\u65f6\u95f4\u662f 1 \u4e2a\u5c0f\u65f6\uff0c\u8bf7\u8c28\u614e\u64cd\u4f5c</p> <p>2.\u7279\u522b\u5730\uff0c\u4f7f\u7528\u4e86\u53c8\u62cd\u4e91\u5bf9\u8c61\u5b58\u50a8\u670d\u52a1\u65f6\uff0c\u5b58\u50a8\u4e2d\u8d44\u6e90\u66f4\u65b0\uff08\u66ff\u6362\u6216\u5220\u9664\uff09\u65f6\u4f1a\u81ea\u52a8\u89e6\u53d1 CDN \u8282\u70b9\u5237\u65b0\u7f13\u5b58\uff0c\u4f1a\u5728 5 \u5206\u949f\u5185\u751f\u6548\uff0c\u6240\u4ee5\u60a8\u65e0\u9700\u8fdb\u884c\u624b\u52a8\u5237\u65b0\u64cd\u4f5c</p>"},{"location":"cdn/refresh/#url_1","title":"URL \u9884\u70ed","text":"<p>\u5f53\u6e90\u7ad9\u6709\u65b0\u589e\u65b0\u7684\u8d44\u6e90\u6587\u4ef6\u65f6\uff0c\u53ef\u5c06\u8fd9\u4e9b\u65b0\u6587\u4ef6\u63d0\u524d\u7f13\u5b58\u81f3 CDN \u8282\u70b9\uff0c\u6700\u7ec8\u7528\u6237\u7b2c\u4e00\u6b21\u8bbf\u95ee\u8fd9\u4e9b\u8d44\u6e90\u6587\u4ef6\u65f6\uff0c CDN \u8282\u70b9\u4e0d\u9700\u8981\u56de\u6e90\u7ad9\u8bf7\u6c42\u6587\u4ef6\u8d44\u6e90\u4e86\u3002\u4e00\u65b9\u9762\u53ef\u51cf\u5c11\u7528\u6237\u7a81\u53d1\u8bbf\u95ee\u65f6\u7684\u56de\u6e90\u91cf\uff0c\u53e6\u4e00\u65b9\u9762\u53ef\u4ee5\u52a0\u5feb\u8d44\u6e90\u6587\u4ef6\u7684\u9996\u6b21\u8bbf\u95ee\u901f\u5ea6\u3002\u64cd\u4f5c\u754c\u9762\u5982\u4e0b\u56fe\u6240\u793a\uff1a</p> <p></p> <p>\u6ce8\u610f\u4e8b\u9879\uff1a\u5efa\u8bae\u4e0d\u8981\u540c\u65f6\u9884\u70ed\u592a\u591a\u8d44\u6e90\u6587\u4ef6\uff0c\u5426\u5219\u4f1a\u5bf9\u6e90\u7ad9\u9020\u6210\u56de\u6e90\u538b\u529b</p>"},{"location":"cdn/refresh/#_2","title":"\u64cd\u4f5c\u8bb0\u5f55","text":"<p>\u8fdb\u884c <code>URL \u5237\u65b0</code> \u3001 <code>\u89c4\u5219\u5237\u65b0</code> \u3001<code>URL \u9884\u70ed</code> \u64cd\u4f5c\u4e4b\u540e\uff0c\u754c\u9762\u7a97\u53e3\u4f1a\u7acb\u9a6c\u8df3\u81f3\u64cd\u4f5c\u8bb0\u5f55\u754c\u9762\uff0c\u60a8\u53ef\u4ee5\u5b9e\u65f6\u67e5\u770b\u5f53\u524d\u64cd\u4f5c\u7684\u8fdb\u5ea6\u53cd\u9988\u53ca\u76f8\u5173\u72b6\u6001\u3002\u60a8\u4e5f\u53ef\u4ee5\u67e5\u770b\u5386\u53f2\u64cd\u4f5c\u8bb0\u5f55\uff0c\u6211\u4eec\u9ed8\u8ba4\u4fdd\u7559\u4e86 3 \u5929\u7684\u6570\u636e\u3002</p> <p>\u5982\u6709\u7591\u95ee\u8bf7 \u8054\u7cfb\u6211\u4eec</p>"},{"location":"cdn/service/","title":"\u670d\u52a1\u7ba1\u7406","text":""},{"location":"cdn/service/#_1","title":"\u57df\u540d\u63a5\u5165\uff08\u81ea\u6709\u6e90)","text":"<p>\u5982\u679c\u60a8\u7684\u7f51\u7ad9\u6216\u5e94\u7528\u4f7f\u7528\u7684\u662f\u81ea\u6709\u6e90\u7ad9\u6216\u8005\u7b2c\u4e09\u65b9\u5b58\u50a8\u6e90\uff0c\u60a8\u53ef\u4ee5\u901a\u8fc7\u81ea\u4e3b\u6e90\u7684\u65b9\u5f0f\u63a5\u5165 CDN \u670d\u52a1\u3002\u6b64\u65f6\u60a8\u7684\u6e90\u7ad9\u65e0\u9700\u505a\u4efb\u4f55\u6539\u52a8\uff0c\u53ea\u9700\u8981\u8d70\u5b8c\u4e0b\u9762\u7684\u914d\u7f6e\u6d41\u7a0b\u5e76\u5728 DNS \u89e3\u6790\u5546\u5904\u4fee\u6539 CNAME \u8bb0\u5f55\u5373\u53ef\u4eab\u53d7 CDN \u670d\u52a1\uff0c\u5177\u4f53\u64cd\u4f5c\u53c2\u89c1\u5982\u4e0b\u6b65\u9aa4\uff1a</p>"},{"location":"cdn/service/#_2","title":"\u7b2c\u4e00\u6b65\uff1a\u521b\u5efa\u670d\u52a1","text":"<p>\u767b\u9646 CDN \u63a7\u5236\u53f0\uff0c\u8fdb\u5165 \u300cCDN \u670d\u52a1\u300d\uff0c\u70b9\u51fb \u300c\u521b\u5efa\u670d\u52a1\u300d\u3002</p> <p></p>"},{"location":"cdn/service/#_3","title":"\u7b2c\u4e8c\u6b65\uff1a\u57fa\u672c\u914d\u7f6e","text":"<p>\u8be5\u6b65\u9aa4\u5305\u62ec\u670d\u52a1\u540d\u79f0\u3001\u52a0\u901f\u57df\u540d\u3001\u5e94\u7528\u573a\u666f\u7b49\u9009\u9879\u7684\u914d\u7f6e\uff0c\u4e3a\u5fc5\u9009\u9879\uff0c\u8be6\u7ec6\u914d\u7f6e\u53c2\u89c1\u5982\u4e0b\u622a\u56fe\u6240\u793a\uff1a</p> <p></p> <p>1.\u670d\u52a1\u540d\u79f0\uff1a\u552f\u4e00\u6807\u8bc6\u670d\u52a1\uff0c\u4f8b\u5982\uff1aimage-upyun-com\uff0c\u4e00\u4e2a\u670d\u52a1\u4e0b\u9762\u53ef\u4ee5\u7ed1\u5b9a\u591a\u4e2a\u81ea\u6709\u57df\u540d\uff0c\u547d\u540d\u8981\u6c42\u5982\u4e0b\uff1a</p> <p>\u670d\u52a1\u540d\u79f0\u4ec5\u9650 5\uff5e20 \u4f4d\uff1b \u5fc5\u987b\u4ee5\u5c0f\u5199\u82f1\u6587\u5b57\u7b26\u5f00\u5934\uff0c\u4ec5\u652f\u6301\u5c0f\u5199\u82f1\u6587\u5b57\u7b26\u3001\u6570\u5b57\u3001\u4e2d\u5212\u7ebf\u7ec4\u5408\u3002</p> <p>2.\u52a0\u901f\u57df\u540d\uff1a\u586b\u5199\u6b64\u6b21\u9700\u8981\u914d\u7f6e\u7684\u52a0\u901f\u57df\u540d\u3002\u5177\u4f53\u8981\u6c42\u5982\u4e0b\uff1a</p> <p>\u52a0\u901f\u57df\u540d\u5df2\u5728\u5de5\u4fe1\u90e8\u5907\u6848\uff1b \u5f85\u52a0\u901f\u57df\u540d\u5c1a\u672a\u5728\u53c8\u62cd\u4e91 CDN \u5e73\u53f0\u914d\u7f6e\u3002</p> <p>3.\u5e94\u7528\u573a\u666f\uff1a\u53ef\u9009\u9879\u5305\u62ec\u7f51\u9875\u56fe\u7247\u3001\u6587\u4ef6\u4e0b\u8f7d\u3001\u97f3\u89c6\u9891\u70b9\u64ad\u3001\u52a8\u6001\u5185\u5bb9\u3001\u5168\u7ad9\u52a0\u901f\uff0c\u9610\u8ff0\u5982\u4e0b\uff1a</p> <ul> <li>\u7f51\u9875\u56fe\u7247\uff1a\u9002\u7528\u4e8e\u7535\u5546\u7c7b\u3001\u7f51\u7ad9\u7c7b\u3001\u6e38\u620f\u56fe\u7247\u7c7b\u9759\u6001\u5c0f\u6587\u4ef6\u7b49\u4e1a\u52a1\u3002</li> <li>\u6587\u4ef6\u4e0b\u8f7d\uff1a\u9002\u7528\u4e8e\u6e38\u620f\u5b89\u88c5\u5305\u3001\u97f3\u89c6\u9891\u539f\u6587\u4ef6\u4e0b\u8f7d\u3001\u624b\u673a\u56fa\u4ef6\u5206\u53d1\u7b49\u4e1a\u52a1\u3002</li> <li>\u97f3\u89c6\u9891\u70b9\u64ad\uff1a\u9002\u5408\u97f3\u3001\u89c6\u9891\u6587\u4ef6\u8f83\u591a\u7684\u5728\u7ebf\u70b9\u64ad\u4e1a\u52a1\u3002</li> <li>\u52a8\u6001\u5185\u5bb9\uff1a\u9002\u5408 PHP\u3001JSP\u3001ASP \u7b49\u52a8\u6001\u7c7b\u8d44\u6e90\u8f83\u591a\u7684\u4e1a\u52a1\u3002</li> <li>\u5168\u7ad9\u52a0\u901f\uff1a\u9002\u5408\u52a8\u3001\u9759\u6001\u5185\u5bb9\u672a\u505a\u660e\u786e\u533a\u5206\u7684\u4e1a\u52a1\uff0c\u53c8\u62cd\u4e91\u81ea\u52a8\u5b9e\u73b0\u52a8\u9759\u5206\u79bb\u3002</li> </ul>"},{"location":"cdn/service/#_4","title":"\u7b2c\u4e09\u6b65\uff1a\u56de\u6e90\u914d\u7f6e","text":"<p>\u9700\u8981\u8fdb\u884c\u56de\u6e90\u534f\u8bae\u3001\u56de\u6e90\u7ebf\u8def\u7684\u914d\u7f6e\uff0c\u66f4\u591a\u914d\u7f6e\u4ecb\u7ecd\u8bf7\u53c2\u89c1 \u56de\u6e90\u914d\u7f6e\u3002\u914d\u7f6e\u754c\u9762\u5982\u4e0b\u56fe\u6240\u793a\uff1a</p> <p></p> <p>1.\u56de\u6e90\u534f\u8bae\uff1a\u5bf9\u56de\u6e90\u534f\u8bae\u8fdb\u884c\u914d\u7f6e\uff0c\u9ed8\u8ba4\u4e3a HTTP\uff0c\u914d\u7f6e\u9009\u9879\u5305\u62ec HTTP\u3001HTTPS\u3001\u534f\u8bae\u8ddf\u968f\u3002</p> <p>2.\u7ebf\u8def\u914d\u7f6e\uff1a\u6b64\u5904\u5305\u62ec\u56de\u6e90\u5730\u5740\u3001\u56de\u6e90\u7aef\u53e3\u53f7\u7684\u8bbe\u7f6e\uff0c\u66f4\u591a\u8bbe\u7f6e\u8bf7\u53c2\u89c1 \u7ebf\u8def\u914d\u7f6e\u3002</p>"},{"location":"cdn/service/#_5","title":"\u7b2c\u56db\u6b65\uff1a\u72b6\u6001\u786e\u8ba4","text":"<p>\u670d\u52a1\u521b\u5efa\u6210\u529f\u540e\uff0c\u64cd\u4f5c\u754c\u9762\u4f1a\u63d0\u793a CDN \u52a0\u901f\u670d\u52a1\u521b\u5efa\u6210\u529f\uff0c\u5e76\u4f1a\u81ea\u52a8\u8df3\u8f6c\u5230\u8be5\u670d\u52a1\u7684\u3010\u529f\u80fd\u914d\u7f6e\u3011\u754c\u9762\uff0c\u5982\u56fe\u6240\u793a\uff1a</p> <p></p> <p>\u5728\u529f\u80fd\u914d\u7f6e\u754c\u9762\uff0c\u6709\u57df\u540d\u7ba1\u7406\u3001\u56de\u6e90\u7ba1\u7406\u3001\u7f13\u5b58\u914d\u7f6e\u3001\u6027\u80fd\u4f18\u5316\u3001HTTPS\u3001\u8bbf\u95ee\u63a7\u5236\u3001\u56fe\u7247\u5904\u7406\u7b49\u529f\u80fd\u914d\u7f6e\u6a21\u5757\uff0c\u5728\u3010\u57df\u540d\u7ba1\u7406\u3011\u6a21\u5757\u4e0b\uff0c\u60a8\u53ef\u4ee5\u9488\u5bf9\u8be5\u670d\u52a1\u7ed1\u5b9a\u591a\u4e2a\u81ea\u6709\u57df\u540d\uff0c\u8bf7\u8010\u5fc3\u7b49\u5f85\u57df\u540d\u914d\u7f6e\uff08\u7ea6 10 \u5206\u949f\uff09\uff0c\u67e5\u770b\u57df\u540d\u5bf9\u5e94\u7684\u72b6\u6001\u662f\u5426\u4e3a\uff3b\u6b63\u5e38\uff3d\uff0c\u5982\u4e0b\u56fe\u6240\u793a\uff1a</p> <p></p> <p>\u7279\u522b\u5730\uff0c\u53c8\u62cd\u4e91\u4e3a\u6bcf\u4e00\u4e2a CDN \u670d\u52a1\u63d0\u4f9b\u4e86\u6d4b\u8bd5\u57df\u540d\uff0c\u6d4b\u8bd5\u57df\u540d\u683c\u5f0f\u4e3a\uff1a\u670d\u52a1\u540d\u79f0.test.upcdn.net\uff0c\u6b64\u6d4b\u8bd5\u57df\u540d\u4ec5\u4f9b\u6d4b\u8bd5\u4f7f\u7528\uff0c\u6b63\u5f0f\u4e1a\u52a1\u73af\u5883\u8bf7\u7ed1\u5b9a\u81ea\u6709\u57df\u540d\u3002</p>"},{"location":"cdn/service/#cname","title":"\u7b2c\u4e94\u6b65\uff1aCNAME \u914d\u7f6e","text":"<p>\u5728\u4e0a\u4e00\u4e2a\u6b65\u9aa4\u4e2d\uff0c\u60a8\u53ef\u67e5\u770b CDN \u5e73\u53f0\u4e3a\u60a8\u5206\u914d\u7684 CNAME \u5730\u5740\uff0c\u6b64\u65f6\u9700\u8981\u53bb\u57df\u540d DNS \u89e3\u6790\u5546\u5904\uff0c\u4e3a\u8be5\u57df\u540d\u6dfb\u52a0\u4e00\u6761 CNAME \u8bb0\u5f55\uff0c\u5f85 CNAME \u914d\u7f6e\u751f\u6548\u4e4b\u540e\uff0c\u65b9\u53ef\u4eab\u53d7 CDN \u670d\u52a1\uff0c\u5177\u4f53\u914d\u7f6e\u8be6\u89c1 CNAME \u89e3\u6790\u3002\u83b7\u53d6 CNAME \u5730\u5740\u7684\u5165\u53e3\u6709\uff1a</p> <p>1.\u5728\u3010\u670d\u52a1\u7ba1\u7406\u3011\u754c\u9762\uff0c\u5c06\u9f20\u6807\u653e\u7f6e\u3010\u670d\u52a1\u540d\u79f0\u3011\u663e\u793a\u533a\u57df\u5373\u53ef\u663e\u793a CNAME \u5730\u5740\uff0c\u53ef\u76f4\u63a5\u590d\u5236\uff0c\u5982\u622a\u56fe\u6240\u793a\uff1a</p> <p></p> <p>2.\u5728\u3010\u529f\u80fd\u914d\u7f6e\u3011\u754c\u9762\uff0c\u9009\u62e9\u300c\u57df\u540d\u7ba1\u7406\u300d\u6a21\u5757\uff0c\u76f8\u5e94\u533a\u57df\u53ef\u67e5\u770b CNAME \u5730\u5740\uff0c\u5982\u56fe\u6240\u793a\uff1a</p> <p></p>"},{"location":"cdn/service/#_6","title":"\u57df\u540d\u63a5\u5165\uff08\u53c8\u62cd\u5b58\u50a8\u6e90\uff09","text":"<p>\u5982\u679c\u60a8\u56e0\u4e3a\u81ea\u4e3b\u6e90\u538b\u529b\u8f83\u5927\uff0c\u60a8\u4e5f\u53ef\u4ee5\u5c06\u975e\u7ed3\u6784\u5316\u6570\u636e\u6258\u7ba1\u5728\u53c8\u62cd\u4e91\u5bf9\u8c61\u5b58\u50a8\u670d\u52a1\u4e0a\u9762\uff0c\u4f7f\u7528\u53c8\u62cd\u4e91\u5b58\u50a8\u6e90\uff0c\u66f4\u591a\u4e86\u89e3\u8bf7\u70b9\u51fb \u5bf9\u8c61\u5b58\u50a8\u670d\u52a1\u3002\u5177\u4f53\u64cd\u4f5c\u53c2\u89c1\u5982\u4e0b\u6b65\u9aa4\uff1a</p>"},{"location":"cdn/service/#_7","title":"\u7b2c\u4e00\u6b65\uff1a\u521b\u5efa\u670d\u52a1","text":"<p>\u767b\u9646 CDN \u63a7\u5236\u53f0\uff0c\u8fdb\u5165\u300c\u4e91\u5b58\u50a8\u300d\u670d\u52a1\uff0c\u70b9\u51fb \u300c\u521b\u5efa\u670d\u52a1\u300d\uff0c\u5982\u4e0b\u622a\u56fe\u6240\u793a\uff1a</p> <p></p>"},{"location":"cdn/service/#_8","title":"\u7b2c\u4e8c\u6b65\uff1a\u57fa\u672c\u914d\u7f6e","text":"<p>\u521b\u5efa\u4e00\u4e2a\u5b58\u50a8\u670d\u52a1\uff0c\u9996\u5148\u9700\u8981\u914d\u7f6e\u4e00\u4e2a\u670d\u52a1\u540d\u79f0\uff0c\u53e6\u5916\u5c31\u662f\u9009\u62e9\u4e00\u4e2a\u5e94\u7528\u573a\u666f\uff0c\u8be6\u7ec6\u914d\u7f6e\u53c2\u89c1\u5982\u4e0b\u622a\u56fe\u6240\u793a\uff1a</p> <p></p> <p>1.\u670d\u52a1\u540d\u79f0\uff1a\u552f\u4e00\u6807\u8bc6\u670d\u52a1\uff0c\u4f8b\u5982\uff1avideo-upyun-com\uff0c\u4e00\u4e2a\u670d\u52a1\u4e0b\u9762\u53ef\u4ee5\u7ed1\u5b9a\u591a\u4e2a\u57df\u540d\u3002\u547d\u540d\u8981\u6c42\u5982\u4e0b\uff1a</p> <p>\u670d\u52a1\u540d\u79f0\u4ec5\u9650 5\uff5e20 \u4f4d\uff1b  \u5fc5\u987b\u4ee5\u5c0f\u5199\u82f1\u6587\u5b57\u7b26\u5f00\u5934\uff0c\u4ec5\u652f\u6301\u5c0f\u5199\u82f1\u6587\u5b57\u7b26\u3001\u6570\u5b57\u3001\u4e2d\u5212\u7ebf\u7ec4\u5408\u3002</p> <p>2.\u5e94\u7528\u573a\u666f\uff1a\u53ef\u9009\u9879\u5305\u62ec\u7f51\u9875\u56fe\u7247\u3001\u6587\u4ef6\u4e0b\u8f7d\u3001\u97f3\u89c6\u9891\u70b9\u64ad\uff0c\u9610\u8ff0\u5982\u4e0b\uff1a</p> <ul> <li>\u7f51\u9875\u56fe\u7247\uff1a\u9002\u7528\u4e8e\u7535\u5546\u7c7b\u3001\u7f51\u7ad9\u7c7b\u3001\u6e38\u620f\u56fe\u7247\u7c7b\u9759\u6001\u5c0f\u6587\u4ef6\u7b49\u4e1a\u52a1\u3002</li> <li>\u6587\u4ef6\u4e0b\u8f7d\uff1a\u9002\u7528\u4e8e\u6e38\u620f\u5b89\u88c5\u5305\u3001\u97f3\u89c6\u9891\u539f\u6587\u4ef6\u4e0b\u8f7d\u3001\u624b\u673a\u56fa\u4ef6\u5206\u53d1\u7b49\u4e1a\u52a1\u3002</li> <li>\u97f3\u89c6\u9891\u70b9\u64ad\uff1a\u9002\u5408\u97f3\u3001\u89c6\u9891\u6587\u4ef6\u8f83\u591a\u7684\u5728\u7ebf\u70b9\u64ad\u4e1a\u52a1\u3002</li> </ul>"},{"location":"cdn/service/#_9","title":"\u7b2c\u4e09\u6b65\uff1a\u521b\u5efa\u64cd\u4f5c\u5458","text":"<p>\u9488\u5bf9\u4f7f\u7528\u53c8\u62cd\u4e91\u5bf9\u8c61\u5b58\u50a8\u4f5c\u4e3a\u6e90\u7684 CDN \u670d\u52a1\uff0c\u9700\u8981\u521b\u5efa\u64cd\u4f5c\u5458\u6765\u7ba1\u7406\u5b58\u50a8\u5728\u53c8\u62cd\u5bf9\u8c61\u5b58\u50a8\u670d\u52a1\u4e0a\u9762\u7684\u975e\u7ed3\u6784\u5316\u6570\u636e\uff0c\u8be6\u7ec6\u4ecb\u7ecd\u8bf7\u70b9\u51fb \u64cd\u4f5c\u5458\uff0c\u5177\u4f53\u914d\u7f6e\u754c\u9762\u5982\u4e0b\u622a\u56fe\u6240\u793a\uff1a</p> <p></p> <p>\u5173\u4e8e\u5982\u4f55\u4f7f\u7528\u64cd\u4f5c\u5458\u7ba1\u7406\u5b58\u50a8\u4e0a\u7684\u975e\u7ed3\u6784\u5316\u6570\u636e\uff0c\u8be6\u60c5\u53c2\u7167 \u5bf9\u8c61\u5b58\u50a8\u5f00\u53d1\u8005\u5de5\u5177\u3002</p>"},{"location":"cdn/service/#_10","title":"\u7b2c\u56db\u6b65\uff1a\u72b6\u6001\u786e\u8ba4","text":"<p>\u670d\u52a1\u521b\u5efa\u6210\u529f\u540e\uff0c\u64cd\u4f5c\u754c\u9762\u4f1a\u63d0\u793a\u4e91\u5b58\u50a8\u670d\u52a1\u914d\u7f6e\u6210\u529f\uff0c\u5e76\u4f1a\u81ea\u52a8\u8df3\u8f6c\u5230\u8be5\u670d\u52a1\u7684\u529f\u80fd\u914d\u7f6e\u754c\u9762\uff0c\u5982\u56fe\u6240\u793a\uff1a</p> <p></p> <p>\u5728\u529f\u80fd\u914d\u7f6e\u754c\u9762\uff0c\u6709\u57df\u540d\u7ba1\u7406\u3001\u5185\u5bb9\u7ba1\u7406\u3001\u7f13\u5b58\u914d\u7f6e\u3001\u6027\u80fd\u4f18\u5316\u3001HTTPS\u3001\u8bbf\u95ee\u63a7\u5236\u3001\u56fe\u7247\u5904\u7406\u7b49\u529f\u80fd\u914d\u7f6e\u6a21\u5757\uff0c\u5728\u3010\u57df\u540d\u7ba1\u7406\u3011\u6a21\u5757\u4e0b\uff0c\u60a8\u53ef\u4ee5\u9488\u5bf9\u8be5\u670d\u52a1\u7ed1\u5b9a\u591a\u4e2a\u81ea\u6709\u57df\u540d\uff0c\u8bf7\u8010\u5fc3\u7b49\u5f85\u57df\u540d\u914d\u7f6e\uff08\u7ea6 10 \u5206\u949f\uff09\uff0c\u67e5\u770b\u57df\u540d\u5bf9\u5e94\u7684\u72b6\u6001\u662f\u5426\u4e3a\uff3b\u6b63\u5e38\uff3d\uff0c\u5982\u4e0b\u56fe\u6240\u793a\uff1a</p> <p></p> <p>\u7279\u522b\u5730\uff0c\u53c8\u62cd\u4e91\u4e3a\u6bcf\u4e00\u4e2a\u4e91\u5b58\u50a8\u670d\u52a1\u63d0\u4f9b\u4e86\u6d4b\u8bd5\u57df\u540d\uff0c\u6d4b\u8bd5\u57df\u540d\u683c\u5f0f\u4e3a\uff1a \u670d\u52a1\u540d\u79f0.test.upcdn.net\uff0c\u6b64\u6d4b\u8bd5\u57df\u540d\u4ec5\u4f9b\u6d4b\u8bd5\u4f7f\u7528\uff0c\u6b63\u5f0f\u4e1a\u52a1\u73af\u5883\u8bf7\u7ed1\u5b9a\u81ea\u6709\u57df\u540d\u3002</p>"},{"location":"cdn/service/#_11","title":"\u7b2c\u4e94\u6b65\uff1a\u8d44\u6e90\u7ba1\u7406","text":"<p>\u4ee5\u4e0a\u6b65\u9aa4\u64cd\u4f5c\u5b8c\u6bd5\u4e4b\u540e\uff0c\u53ef\u4ee5\u4f7f\u7528\u64cd\u4f5c\u5458\u9488\u5bf9\u8be5\u670d\u52a1\u8fdb\u884c\u8d44\u6e90\u6587\u4ef6\u7684\u4e0a\u4f20\u548c\u7ba1\u7406\u64cd\u4f5c\uff0c\u8d44\u6e90\u6587\u4ef6\u7684\u4e0a\u4f20\u548c\u7ba1\u7406\uff0c\u8bf7\u53c2\u89c1 \u4e91\u5b58\u50a8\u5f00\u53d1\u8005\u5de5\u5177\u3002\u5f85\u8d44\u6e90\u6587\u4ef6\u90fd\u4e0a\u4f20\u5b8c\u6bd5\uff0c\u786e\u4fdd\u8be5\u4e91\u5b58\u50a8\u670d\u52a1\u53ef\u4ee5\u6b63\u5e38\u63d0\u4f9b\u670d\u52a1\u4e4b\u540e\uff0c\u5c31\u53ef\u4ee5\u5f00\u59cb\u4f7f\u7528 CDN \u670d\u52a1\u4e86\u3002\u4e91\u5b58\u50a8\u670d\u52a1\u5185\u5bb9\u7ba1\u7406\u7684\u5165\u53e3\u53c2\u89c1\u5982\u4e0b\u622a\u56fe\u6240\u793a\uff1a</p> <p></p> <p>\u60a8\u4e5f\u53ef\u4ee5\u8fdb\u5165\u670d\u52a1\u7684\u529f\u80fd\u914d\u7f6e\u4e0b\u7684\u3010\u5185\u5bb9\u7ba1\u7406\u3011\u6a21\u5757\u8fdb\u884c\u76f8\u5173\u8bbe\u7f6e\uff0c\u4f8b\u5982\uff1aAPI \u5bc6\u94a5\u3001\u64cd\u4f5c\u5458\u6388\u6743\u7b49\u64cd\u4f5c\uff0c\u5177\u4f53\u4f7f\u7528\u8bf7\u53c2\u89c1\u3010\u7ba1\u7406\u6307\u5357\u3011\u7684\u8be6\u60c5\u4ecb\u7ecd\u3002</p>"},{"location":"cdn/service/#cname_1","title":"\u7b2c\u516d\u6b65\uff1aCNAME \u914d\u7f6e","text":"<p>\u5728\u4e0a\u4e00\u4e2a\u6b65\u9aa4\u4e2d\uff0c\u60a8\u53ef\u67e5\u770b CDN \u5e73\u53f0\u4e3a\u60a8\u5206\u914d\u7684 CNAME \u57df\u540d\uff0c\u6b64\u65f6\u9700\u8981\u53bb\u57df\u540d DNS \u89e3\u6790\u5546\u5904\uff0c\u4e3a\u8be5\u57df\u540d\u6dfb\u52a0\u4e00\u6761 CNAME \u8bb0\u5f55\uff0c\u5f85 CNAME \u914d\u7f6e\u751f\u6548\u4e4b\u540e\uff0c\u65b9\u53ef\u4eab\u53d7 CDN \u670d\u52a1\uff0c\u5177\u4f53\u914d\u7f6e\u8be6\u89c1 CNAME \u89e3\u6790\u3002\u83b7\u53d6 CNAME \u5730\u5740\u7684\u5165\u53e3\u6709\uff1a</p> <p>1.\u5728\u3010\u670d\u52a1\u7ba1\u7406\u3011\u754c\u9762\uff0c\u5c06\u9f20\u6807\u653e\u7f6e\u3010\u670d\u52a1\u540d\u79f0\u3011\u663e\u793a\u533a\u57df\u5373\u53ef\u663e\u793a CNAME \u5730\u5740\uff0c\u53ef\u76f4\u63a5\u590d\u5236\uff0c\u5982\u622a\u56fe\u6240\u793a\uff1a</p> <p></p> <p>2.\u5728\u3010\u529f\u80fd\u914d\u7f6e\u3011\u754c\u9762\uff0c\u9009\u62e9\u300c\u57df\u540d\u7ba1\u7406\u300d\u6a21\u5757\uff0c\u76f8\u5e94\u533a\u57df\u53ef\u67e5\u770b CNAME \u5730\u5740\uff0c\u5982\u56fe\u6240\u793a\uff1a</p> <p></p>"},{"location":"cdn/service/#_12","title":"\u64cd\u4f5c\u7ba1\u7406","text":"<p>\u8fdb\u5165 CDN  \u63a7\u5236\u53f0\uff0c\u5728\u670d\u52a1\u7ba1\u7406\u754c\u9762\uff0c\u60a8\u53ef\u4ee5\u9488\u5bf9\u5df2\u7ecf\u521b\u5efa\u7684 CDN \u52a0\u901f\u670d\u52a1\u8fdb\u884c\u5f00\u542f\u3001\u5173\u95ed\u3001\u5220\u9664\u3001\u5168\u7f51\u5237\u65b0\u3001\u7edf\u8ba1\u5206\u6790\u67e5\u8be2\u7b49\u64cd\u4f5c\u3002</p>"},{"location":"cdn/service/#_13","title":"\u5f00\u542f\u52a0\u901f\u670d\u52a1","text":"<p>\u9488\u5bf9\u5df2\u7ecf\u5904\u4e8e\u5173\u95ed\u72b6\u6001\u7684 CDN \u52a0\u901f\u670d\u52a1\uff0c\u60a8\u53ef\u4ee5\u8fdb\u884c\u3010\u5f00\u542f\u3011\u64cd\u4f5c\uff0c\u5f00\u542f\u64cd\u4f5c\u4f1a\u5728 1 \u5206\u949f\u4e4b\u5185\u751f\u6548\uff0c\u5177\u4f53\u64cd\u4f5c\u5982\u4e0b\uff1a\u767b\u9646 CDN \u63a7\u5236\u53f0\uff0c\u8fdb\u5165 \u300c \u670d\u52a1\u7ba1\u7406\u300d\u76f8\u5e94\u754c\u9762\u3002\u5982\u4e0b\u622a\u56fe\u6240\u793a\uff1a</p> <p></p> <p>\u70b9\u51fb\u9700\u8981\u5f00\u542f\u7684 CDN \u52a0\u901f\u670d\u52a1\uff0c\u9009\u62e9\u3010\u5f00\u542f\u3011\u6309\u94ae\uff0c\u5373\u53ef\u5f00\u542f\u3002</p>"},{"location":"cdn/service/#_14","title":"\u5173\u95ed\u52a0\u901f\u670d\u52a1","text":"<p>\u9488\u5bf9\u5df2\u7ecf\u5904\u4e8e\u5f00\u542f\u72b6\u6001\u7684 CDN \u52a0\u901f\u670d\u52a1\uff0c\u60a8\u53ef\u4ee5\u8fdb\u884c\u3010\u5173\u95ed\u3011\u64cd\u4f5c\uff0c\u5173\u95ed\u64cd\u4f5c\u4f1a\u5728 1 \u5206\u949f\u4e4b\u5185\u751f\u6548\uff0c\u5177\u4f53\u64cd\u4f5c\u5982\u4e0b\uff1a\u767b\u9646 CDN \u63a7\u5236\u53f0\uff0c\u8fdb\u5165 \u300c \u670d\u52a1\u7ba1\u7406\u300d\u76f8\u5e94\u754c\u9762\u3002\u5982\u4e0b\u622a\u56fe\u6240\u793a\uff1a</p> <p></p> <p>\u9009\u62e9\u9700\u8981\u5173\u95ed\u7684 CDN \u52a0\u901f\u670d\u52a1\uff0c\u9009\u62e9\u3010\u5173\u95ed\u3011\u6309\u94ae\uff0c\u5373\u53ef\u5173\u95ed CDN \u670d\u52a1\u3002</p> <p>\u6ce8\u610f\uff1a\u670d\u52a1\u5173\u95ed\u540e\uff0c\u6240\u6709\u8d44\u6e90\u90fd\u5c06\u65e0\u6cd5\u8bbf\u95ee\uff0c\u5e76\u8fd4\u56de 405 \u72b6\u6001\u7801\uff0c\u8bf7\u8c28\u614e\u64cd\u4f5c\uff01</p>"},{"location":"cdn/service/#_15","title":"\u5220\u9664\u52a0\u901f\u670d\u52a1","text":"<p>\u9488\u5bf9\u5df2\u7ecf\u5904\u4e8e\u5173\u95ed\u72b6\u6001\u7684 CDN \u52a0\u901f\u670d\u52a1\uff0c\u60a8\u53ef\u4ee5\u8fdb\u884c\u670d\u52a1\u3010\u5220\u9664\u3011\u64cd\u4f5c\uff0c\u5220\u9664\u64cd\u4f5c\u4f1a\u5728 1 \u5206\u949f\u4e4b\u5185\u751f\u6548\uff0c\u5177\u4f53\u64cd\u4f5c\u5982\u4e0b\uff1a\u767b\u9646 CDN \u63a7\u5236\u53f0\uff0c\u8fdb\u5165 \u300c \u670d\u52a1\u7ba1\u7406\u300d\u76f8\u5e94\u754c\u9762\u3002\u5982\u4e0b\u622a\u56fe\u6240\u793a\uff1a</p> <p></p> <p>\u9009\u62e9\u9700\u8981\u5220\u9664\u7684 CDN \u52a0\u901f\u670d\u52a1\uff0c\u70b9\u51fb\u3010\u5220\u9664\u3011\u6309\u94ae\uff0c\u5373\u53ef\u5220\u9664 CDN \u670d\u52a1\u3002</p> <p>\u6ce8\u610f\u4e8b\u9879\uff1a</p> <ul> <li>\u5220\u9664\u65f6\uff0c\u786e\u4fdd\u8be5\u670d\u52a1\u5df2\u4e0d\u5b58\u5728\u4efb\u4f55\u76ee\u5f55\uff1b</li> <li>\u5220\u9664\u540e\uff0c7\u5929\u5185\u65e0\u6cd5\u521b\u5efa\u540c\u540d\u670d\u52a1\uff1b</li> <li>\u5220\u9664\u4e0d\u53ef\u9006\uff0c\u64cd\u4f5c\u540e\u8be5\u670d\u52a1\u539f\u6709\u914d\u7f6e\u5747\u5931\u6548\u3002</li> </ul>"},{"location":"cdn/service/#_16","title":"\u5168\u7f51\u7f13\u5b58\u5237\u65b0","text":"<p>\u5982\u9700\u5bf9\u670d\u52a1\u8fdb\u884c\u5168\u7f51\u7f13\u5b58\u5237\u65b0\uff0c\u53ef\u4ee5\u901a\u8fc7\u76f8\u5e94\u5165\u53e3\u8fdb\u884c\u5168\u7f51\u5237\u65b0\u64cd\u4f5c\u3002\u5177\u4f53\u64cd\u4f5c\u5982\u4e0b\uff1a\u767b\u9646 CDN \u63a7\u5236\u53f0\uff0c\u8fdb\u5165 \u300c \u670d\u52a1\u7ba1\u7406\u300d\u76f8\u5e94\u754c\u9762\u3002\u5982\u4e0b\u622a\u56fe\u6240\u793a\uff1a</p> <p></p> <p>\u9009\u62e9\u9700\u8981\u8fdb\u884c\u5168\u7f51\u5237\u65b0\u7684 CDN \u52a0\u901f\u670d\u52a1\uff0c\u70b9\u51fb\u3010\u5237\u65b0\u3011\u6309\u94ae\uff0c\u5373\u53ef\u9488\u5bf9\u8be5\u670d\u52a1\u8fdb\u884c\u5168\u7f51\u5237\u65b0\u3002</p> <p>\u6ce8\u610f\uff1a</p> <ul> <li>\u540c\u4e00\u670d\u52a1\u6bcf\u6b21\u5237\u65b0\u95f4\u9694\u81f3\u5c11 10 \u5206\u949f\uff0c\u4e00\u5929\u53ea\u80fd\u5237\u65b0 5 \u6b21\u7f13\u5b58\uff1b</li> <li>\u5168\u7f51\u7f13\u5b58\u5237\u65b0\u4f1a\u5bf9\u6e90\u7ad9\u4ea7\u751f\u4e00\u5b9a\u538b\u529b\uff0c\u8bf7\u8c28\u614e\u64cd\u4f5c\uff1b</li> </ul>"},{"location":"cdn/service/#_17","title":"\u7edf\u8ba1\u5206\u6790\u67e5\u8be2","text":"<p>\u5982\u9700\u4e86\u89e3 CDN \u670d\u52a1\u5e26\u5bbd\u3001\u6d41\u91cf\u3001\u8bf7\u6c42\u6570\u7b49\u7ef4\u5ea6\u7684\u6570\u636e\u7edf\u8ba1\u548c\u5206\u6790\u6570\u636e\uff0c\u53ef\u4ee5\u901a\u8fc7\u8be5\u5165\u53e3\u8fdb\u884c\u67e5\u8be2\u3002\u5177\u4f53\u64cd\u4f5c\u5982\u4e0b\uff1a\u767b\u9646 CDN \u63a7\u5236\u53f0\uff0c\u8fdb\u5165 \u300c \u670d\u52a1\u7ba1\u7406\u300d\u76f8\u5e94\u754c\u9762\u3002\u5982\u4e0b\u622a\u56fe\u6240\u793a\uff1a</p> <p></p> <p>\u9009\u62e9\u9700\u8981\u8fdb\u884c\u7edf\u8ba1\u5206\u6790\u67e5\u8be2\u7684 CDN \u52a0\u901f\u670d\u52a1\uff0c\u70b9\u51fb\u3010\u7edf\u8ba1\u3011\u6309\u94ae\uff0c\u5373\u53ef\u5feb\u901f\u8fdb\u5165\u7edf\u8ba1\u5206\u6790\u9875\u9762\u3002</p>"},{"location":"cdn/ssl/","title":"\u8bc1\u4e66\u670d\u52a1","text":""},{"location":"cdn/ssl/#_1","title":"\u4ea7\u54c1\u4ecb\u7ecd","text":"<p>HTTPS\uff08\u5168\u79f0\uff1aHyperText Transfer Protocol over Secure Socket Layer\uff09\uff0c\u5176\u5b9e HTTPS \u5e76\u4e0d\u662f\u4e00\u4e2a\u65b0\u9c9c\u534f\u8bae\uff0cGoogle \u5f88\u65e9\u5c31\u5f00\u59cb\u542f\u7528\u4e86\uff0c\u521d\u8877\u662f\u4e3a\u4e86\u4fdd\u62a4\u6570\u636e\u5b89\u5168\u3002 \u8fd1\u4e24\u5e74\uff0cGoogle\u3001Baidu\u3001Facebook \u7b49\u8fd9\u6837\u7684\u4e92\u8054\u7f51\u5de8\u5934\uff0c\u4e0d\u8c0b\u800c\u5408\u5730\u5f00\u59cb\u5927\u529b\u63a8\u884c HTTPS\uff0c \u5f88\u591a\u56fd\u5185\u5916\u7684\u5927\u578b\u4e92\u8054\u7f51\u516c\u53f8\u4e5f\u90fd\u5df2\u7ecf\u542f\u7528\u4e86\u5168\u7ad9 HTTPS\uff0c\u8fd9\u4e5f\u662f\u672a\u6765\u4e92\u8054\u7f51\u53d1\u5c55\u7684\u8d8b\u52bf\u3002</p> <p>\u4e3a\u9f13\u52b1\u5168\u7403\u7f51\u7ad9\u7684 HTTPS \u5b9e\u73b0\uff0cGoogle \u751a\u81f3\u8c03\u6574\u4e86\u641c\u7d22\u5f15\u64ce\u7b97\u6cd5\uff0c\u8ba9\u91c7\u7528 HTTPS \u7684\u7f51\u7ad9\u5728\u641c\u7d22\u4e2d\u6392\u540d\u66f4\u9760\u524d\u3002\u5e76\u4e14\u4ece 2017 \u5e74\u5f00\u59cb\uff0cChrome \u6d4f\u89c8\u5668\u5df2\u628a\u91c7\u7528 HTTP \u534f\u8bae\u7684\u7f51\u7ad9\u6807\u8bb0\u4e3a\u4e0d\u5b89\u5168\u7f51\u7ad9\uff0c\u82f9\u679c App Store \u4e2d\u7684\u6240\u6709\u5e94\u7528\u4e5f\u90fd\u5fc5\u987b\u4f7f\u7528 HTTPS \u52a0\u5bc6\u8fde\u63a5\uff1b\u5f53\u524d\u56fd\u5185\u7092\u7684\u5f88\u706b\u70ed\u7684\u5fae\u4fe1\u5c0f\u7a0b\u5e8f\u4e5f\u8981\u6c42\u5fc5\u987b\u4f7f\u7528 HTTPS \u534f\u8bae\uff1b\u65b0\u4e00\u4ee3\u7684 HTTP/2 \u534f\u8bae\u7684\u652f\u6301\u9700\u4ee5 HTTPS \u4e3a\u57fa\u7840\u3002\u56e0\u6b64\u60f3\u5fc5\u5728\u4e0d\u4e45\u7684\u5c06\u6765\uff0c\u5168\u7f51 HTTPS \u52bf\u5728\u5fc5\u884c\u3002</p> <p>\u4f46\u662f\uff0c\u5982\u679c\u7f51\u7ad9\u60f3\u4f7f\u7528 HTTPS \u670d\u52a1\uff0c\u5219\u5fc5\u987b\u4e3a\u57df\u540d\u4ece\u6570\u5b57\u8bc1\u4e66\u6388\u6743\u673a\u6784\uff08CA\uff0cCertificate Authority\uff09\u7533\u8bf7\u76f8\u5173\u7684 SSL \u8bc1\u4e66\u3002\u4e3a\u6b64\uff0c\u53c8\u62cd\u4e91\u63d0\u4f9b\u4e86 SSL \u8bc1\u4e66\u7684\u4e00\u7ad9\u5f0f\u670d\u52a1\uff0c\u7528\u6237\u53ef\u76f4\u63a5\u5728\u53c8\u62cd\u4e91 SSL \u8bc1\u4e66\u7533\u8d2d\u5e73\u53f0\u7533\u8d2d\u5404\u7c7b SSL \u8bc1\u4e66\uff08\u5305\u62ec\u514d\u8d39\u7533\u8d2d DV SSL \u8bc1\u4e66\uff09\uff1b\u540c\u65f6\uff0c\u7528\u6237\u4e5f\u53ef\u81ea\u613f\u9009\u62e9\u5c06\u7533\u8d2d\u7684\u8bc1\u4e66\u4e00\u952e\u90e8\u7f72\u4e8e\u53c8\u62cd\u4e91 CDN \u5e73\u53f0\uff0c\u56e0\u5e73\u53f0\u5168\u5c40\u81ea\u52a8\u5316\u7ba1\u7406\uff0c\u91c7\u7528\u4e86\u6700\u4f18\u8d28\u7684 HTTPS \u52a0\u901f\u89e3\u51b3\u65b9\u6848\uff0c\u53ef\u5e2e\u52a9\u7528\u6237\u4ee5\u6700\u4f4e\u7684\u6210\u672c\uff0c\u4eab\u53d7\u6700\u4f18\u7684\u670d\u52a1\uff0c\u5b8c\u6210\u7f51\u7ad9 HTTP \u5230 HTTPS \u7684\u8f6c\u6362\u3002</p>"},{"location":"cdn/ssl/#_2","title":"\u540d\u8bcd\u89e3\u91ca","text":"<p>HTTPS</p> <p>HTTPS\uff08\u5168\u79f0\uff1aHyperText Transfer Protocol over Secure Socket Layer\uff09\uff0c\u662f\u4ee5\u5b89\u5168\u4e3a\u76ee\u6807\u7684 HTTP \u901a\u9053\uff0c\u5373 HTTP \u7684\u5b89\u5168\u7248\u3002HTTPS \u7684\u5b89\u5168\u57fa\u7840\u662f SSL/TLS\uff0c\u5b83\u63d0\u4f9b\u4e86\u8eab\u4efd\u9a8c\u8bc1\u4e0e\u52a0\u5bc6\u901a\u8baf\u7684\u65b9\u6cd5\uff0c\u73b0\u5728\u88ab\u5e7f\u6cdb\u7528\u4e8e\u4e07\u7ef4\u7f51\u4e0a\u5b89\u5168\u654f\u611f\u7684\u901a\u8baf\uff0c\u6bd4\u5982\u4ea4\u6613\u3001\u652f\u4ed8\u7b49\u3002</p> <p>SSL\uff08Secure Socket Layer\uff0c\u5b89\u5168\u5957\u63a5\u5b57\u5c42\uff09</p> <p>SSL \u7531 Netscape \u516c\u53f8\u6240\u7814\u53d1\uff0c\u7528\u4ee5\u4fdd\u969c\u5728 Internet \u4e0a\u6570\u636e\u4f20\u8f93\u4e4b\u5b89\u5168\uff0c\u5229\u7528\u6570\u636e\u52a0\u5bc6 (Encryption) \u6280\u672f\uff0c\u53ef\u786e\u4fdd\u6570\u636e\u5728\u7f51\u7edc\u4e0a\u4f20\u8f93\u8fc7\u7a0b\u4e2d\u4e0d\u4f1a\u88ab\u622a\u53d6\u3002SSL \u534f\u8bae\u4f4d\u4e8e TCP/IP \u534f\u8bae\u4e0e\u5404\u79cd\u5e94\u7528\u5c42\u534f\u8bae\u4e4b\u95f4\uff0c\u4e3a\u6570\u636e\u901a\u8baf\u63d0\u4f9b\u5b89\u5168\u652f\u6301\u3002</p> <p>TLS\uff08Transport Layer Security\uff0c\u4f20\u8f93\u5c42\u5b89\u5168\uff09</p> <p>\u4f20\u8f93\u5c42\u52a0\u5bc6\u534f\u8bae\uff0c\u5176\u524d\u8eab\u662f SSL \u534f\u8bae\uff0c 1999 \u5e74\u7ecf\u8fc7 IETF\uff08The Internet Engineering Task Force \u56fd\u9645\u4e92\u8054\u7f51\u5de5\u7a0b\u4efb\u52a1\u7ec4\uff09 \u8ba8\u8bba\u548c\u89c4\u8303\u540e\uff0c\u6539\u540d\u4e3a TLS\u3002\u53d1\u5c55\u81f3\u4eca\u5df2\u7ecf\u6709 TLS 1.0\u3001TLS 1.1\u3001TLS 1.2  \u4e09\u4e2a\u7248\u672c\u3002TLS 1.3 \u6539\u52a8\u4f1a\u6bd4\u8f83\u5927\uff0c\u8fd8\u5904\u4e8e\u5f85\u53d1\u5e03\u9636\u6bb5\uff0c\u76ee\u524d\u4f7f\u7528\u6700\u5e7f\u6cdb\u7684\u662f TLS 1.1\u3001TLS 1.2\u3002</p> <p>SSL \u8bc1\u4e66</p> <p>SSL \u8bc1\u4e66\u5c31\u662f\u9075\u5b88 SSL \u534f\u8bae\u7684\u670d\u52a1\u5668\u6570\u5b57\u8bc1\u4e66\uff0c\u901a\u8fc7\u9a8c\u8bc1\u57df\u540d\u3001\u670d\u52a1\u5668\u8eab\u4efd\u540e\uff0c\u7531\u53d7\u4fe1\u4efb\u7684\u6570\u5b57\u8bc1\u4e66\u6388\u6743\u673a\u6784 CA \u9881\u53d1\uff0c\u5177\u6709\u670d\u52a1\u5668\u8eab\u4efd\u9a8c\u8bc1\u548c\u6570\u636e\u4f20\u8f93\u52a0\u5bc6\u7b49\u529f\u80fd\u3002</p> <p>CA</p> <p>\u6570\u5b57\u8bc1\u4e66\u6388\u6743\u673a\u6784 \uff08CA\uff0cCertificate Authority\uff09 \u662f\u8d1f\u8d23\u53d1\u653e\u548c\u7ba1\u7406\u6570\u5b57\u8bc1\u4e66\u7684\u6743\u5a01\u673a\u6784\uff0c\u5e76\u4f5c\u4e3a\u7535\u5b50\u5546\u52a1\u4ea4\u6613\u4e2d\u53d7\u4fe1\u4efb\u7684\u7b2c\u4e09\u65b9\uff0c\u627f\u62c5\u516c\u94a5\u4f53\u7cfb\u4e2d\u516c\u94a5\u7684\u5408\u6cd5\u6027\u68c0\u9a8c\u7684\u8d23\u4efb\u3002</p> <p>CSR\uff08Cerificate Signing Request\uff0c\u8bc1\u4e66\u8bf7\u6c42\u6587\u4ef6\uff09</p> <p>CSR \u662f\u5236\u4f5c SSL \u8bc1\u4e66\u7684\u5fc5\u8981\u6587\u4ef6\uff0c\u901a\u5e38\u7531 CA \u673a\u6784\u81ea\u52a8\u751f\u6210\uff0c\u7528\u6237\u4e5f\u53ef\u81ea\u5df1\u521b\u5efa\uff0c\u5728\u751f\u6210 CSR \u6587\u4ef6 \u7684\u540c\u65f6\u4e5f\u4f1a\u751f\u6210\u79c1\u94a5\uff08\u7531\u7528\u6237\u81ea\u5df1\u4fdd\u7ba1\uff09\uff0c\u7528\u6237\u53ea\u9700\u628a CSR \u6587\u4ef6\u63d0\u4ea4\u7ed9 CA\uff0cCA \u4f7f\u7528\u5176\u6839\u8bc1\u4e66\u79c1\u94a5\u5bf9 CSR \u6587\u4ef6\u7b7e\u540d\u5373\u751f\u6210\u4e86\u7528\u6237\u7684\u8bc1\u4e66\u3002 </p> <p>RSA</p> <p>RSA \u516c\u94a5\u52a0\u5bc6\u7b97\u6cd5\u662f 1977 \u5e74\u7531 Ron Rivest\u3001\u007fAdi Shamir\u3001Leonard Adleman \u4e00\u8d77\u63d0\u51fa\u7684\uff0c\u5b83\u662f\u7b2c\u4e00\u4e2a\u80fd\u540c\u65f6\u7528\u4e8e\u52a0\u5bc6\u548c\u6570\u5b57\u7b7e\u540d\u7684\u7b97\u6cd5\uff0c\u4ece\u63d0\u51fa\u5230\u73b0\u4eca\u7ecf\u5386\u4e86\u5404\u79cd\u653b\u51fb\u7684\u8003\u9a8c\uff0c\u80fd\u591f\u62b5\u6297\u5230\u76ee\u524d\u4e3a\u6b62\u5df2\u77e5\u7684\u7edd\u5927\u591a\u6570\u5bc6\u7801\u653b\u51fb\uff0c\u5df2\u88ab ISO \u63a8\u8350\u4e3a\u516c\u94a5\u6570\u636e\u52a0\u5bc6\u6807\u51c6</p> <p>ECC</p> <p>ECC\uff08Elliptic Curves Cryptography\uff0c\u692d\u5706\u66f2\u7ebf\u52a0\u5bc6\u7b97\u6cd5\uff09\u4e5f\u662f\u4e00\u79cd\u516c\u94a5\u52a0\u5bc6\u7b97\u6cd5\uff0c\u4e0e\u4e3b\u6d41\u7684 RSA \u7b97\u6cd5\u76f8\u6bd4\uff0cECC \u7b97\u6cd5\u53ef\u4ee5\u4f7f\u7528\u8f83\u77ed\u7684\u5bc6\u94a5\u8fbe\u5230\u76f8\u540c\u7684\u5b89\u5168\u7a0b\u5ea6\uff0c\u5176\u5b89\u5168\u6027\u66f4\u9ad8\u3001\u5904\u7406\u901f\u5ea6\u66f4\u5feb\u3002\u5176\u6570\u5b66\u57fa\u7840\u662f\u5229\u7528\u692d\u5706\u66f2\u7ebf\u4e0a\u7684\u6709\u7406\u70b9\u6784\u6210 Abel \u52a0\u6cd5\u7fa4\u4e0a\u692d\u5706\u79bb\u6563\u5bf9\u6570\u7684\u8ba1\u7b97\u56f0\u96be\u6027\u3002</p> <p>\u57df\u540d\u578b SSL \u8bc1\u4e66\uff08DV SSL\uff09</p> <p>\u5373\u8bc1\u4e66\u9881\u5e03\u673a\u6784\u53ea\u5bf9\u57df\u540d\u7684\u6240\u6709\u8005\u8fdb\u884c\u5728\u7ebf\u68c0\u67e5\uff0c\u901a\u5e38\u662f\u9a8c\u8bc1\u57df\u540d\u4e0b\u67d0\u4e2a\u6307\u5b9a\u6587\u4ef6\u7684\u5185\u5bb9\uff0c\u6216\u8005\u9a8c\u8bc1\u4e0e\u57df\u540d\u76f8\u5173\u7684\u67d0\u6761 TXT \u8bb0\u5f55\uff1b\u6bd4\u5982\u8bbf\u95ee [http|https]://www.domain.com/.../test.txt\uff0c\u6587\u4ef6\u5185\u5bb9\uff1a 2016082xxxxx39w7b20nelfa\uff1b\u6216\u6dfb\u52a0\u4e00\u6761 TXT \u8bb0\u5f55\uff1awww.domain.com \u2013&gt; TXT \u2013&gt; 20170xxxxxqmkiby43hpvy8</p> <p>\u4f01\u4e1a\u578b SSL \u8bc1\u4e66\uff08OV SSL\uff09</p> <p>\u662f\u8981\u8d2d\u4e70\u8005\u63d0\u4ea4\u7ec4\u7ec7\u673a\u6784\u8d44\u6599\u548c\u5355\u4f4d\u6388\u6743\u4fe1\u7b49\u5728\u5b98\u65b9\u6ce8\u518c\u7684\u51ed\u8bc1\uff0c\u8bc1\u4e66\u9881\u53d1\u673a\u6784\u5728\u7b7e\u53d1 SSL \u8bc1\u4e66\u524d\u4e0d\u4ec5\u4ec5\u8981\u68c0\u9a8c\u57df\u540d\u6240\u6709\u6743\uff0c\u8fd8\u5fc5\u987b\u5bf9\u8fd9\u4e9b\u8d44\u6599\u7684\u771f\u5b9e\u5408\u6cd5\u6027\u8fdb\u884c\u591a\u65b9\u67e5\u9a8c\uff0c\u53ea\u6709\u901a\u8fc7\u9a8c\u8bc1\u7684\u624d\u80fd\u9881\u53d1 SSL \u8bc1\u4e66\u3002</p> <p>\u589e\u5f3a\u578b SSL \u8bc1\u4e66\uff08EV SSL\uff09</p> <p>\u4e0e\u5176\u4ed6 SSL \u8bc1\u4e66\u4e00\u6837\uff0c\u90fd\u662f\u57fa\u4e8e SSL/TLS \u5b89\u5168\u534f\u8bae\uff0c\u4f46\u662f\u9a8c\u8bc1\u6d41\u7a0b\u66f4\u52a0\u5177\u4f53\u8be6\u7ec6\uff0c\u9a8c\u8bc1\u6b65\u9aa4\u66f4\u591a\uff0c\u8fd9\u6837\u4e00\u6765\u8bc1\u4e66\u6240\u7ed1\u5b9a\u7684\u7f51\u7ad9\u5c31\u66f4\u52a0\u7684\u53ef\u9760\u3001\u53ef\u4fe1\u3002\u5b83\u8ddf\u666e\u901a SSL \u8bc1\u4e66\u7684\u533a\u522b\u4e5f\u662f\u660e\u663e\u7684\uff0c\u5b89\u5168\u6d4f\u89c8\u5668\u7684\u5730\u5740\u680f\u53d8\u7eff\uff0c\u5982\u679c\u662f\u4e0d\u53d7\u4fe1\u7684 SSL \u8bc1\u4e66\u5219\u62d2\u7edd\u663e\u793a\uff0c\u5982\u679c\u662f\u9493\u9c7c\u7f51\u7ad9\uff0c\u5730\u5740\u680f\u5219\u4f1a\u53d8\u6210\u7ea2\u8272\uff0c\u4ee5\u8b66\u793a\u7528\u6237\u3002</p>"},{"location":"cdn/ssl/#_3","title":"\u4ea7\u54c1\u529f\u80fd","text":""},{"location":"cdn/ssl/#ssl","title":"\u7533\u8d2d SSL \u8bc1\u4e66","text":"<p>\u53c8\u62cd\u4e91\u63d0\u4f9b\u4e86 Symantec\u3001GeoTrust\u3001TrustAsia\u3001Let\u2019s Encrypt \u7684\u5404\u7c7b DV/OV/EV SSL \u8bc1\u4e66\u7684\u7533\u8d2d\u670d\u52a1\uff0c\u5176\u4e2d TrustAsia\u3001Let\u2019s Encrypt DV SSL \u5355\u57df\u540d\u8bc1\u4e66\u53ef\u514d\u8d39\u7533\u8bf7\u3002 </p>"},{"location":"cdn/ssl/#_4","title":"\u5feb\u901f\u7b7e\u53d1","text":"<p>\u586b\u5199\u76f8\u5173\u4fe1\u606f\uff0c\u4e00\u952e\u7533\u8d2d\uff0c\u6b65\u9aa4\u7b80\u5355\u65b9\u4fbf\uff0c\u6d41\u7a0b\u5168\u81ea\u52a8\u5316\u5904\u7406\uff0c\u65e0\u9700\u4eba\u5de5\u534f\u52a9\uff0c\u7533\u8d2d\u5468\u671f\u5927\u5927\u7f29\u77ed\uff0c\u4f7f\u8bc1\u4e66\u5f97\u5230\u5feb\u901f\u7b7e\u53d1\u3002</p>"},{"location":"cdn/ssl/#_5","title":"\u81ea\u52a9\u5316\u7ba1\u7406","text":"<p>\u53c8\u62cd\u4e91\u5e73\u53f0\u5373\u652f\u6301\u7533\u8d2d\u4e0a\u8ff0\u5404\u7c7b\u8bc1\u4e66\uff0c\u540c\u65f6\u4e5f\u652f\u6301\u4e0a\u4f20\u548c\u7ba1\u7406\u4efb\u610f\u673a\u6784\u7b7e\u53d1\u7684\u8bc1\u4e66\uff0c\u6240\u6709 SSL \u8bc1\u4e66\u5747\u81ea\u52a9\u5316\u7ba1\u7406\uff0c\u96c6\u4e2d\u76d1\u6d4b\uff0c\u8ba9\u7528\u6237\u4f7f\u7528\u66f4\u52a0\u653e\u5fc3\u3001\u5b89\u5fc3\u3002</p>"},{"location":"cdn/ssl/#_6","title":"\u4e00\u952e\u90e8\u7f72","text":"<p>\u63d0\u4f9b\u4e00\u952e\u90e8\u7f72 SSL \u8bc1\u4e66\u5230\u53c8\u62cd\u4e91 CDN \u4ea7\u54c1\u7684\u529f\u80fd\uff0c\u7528\u6237\u53ef\u81ea\u613f\u9009\u62e9\uff0c\u5e2e\u52a9\u7528\u6237\u66f4\u5feb\u6377\u5730\u4fdd\u62a4\u6570\u636e\u5b89\u5168\uff0c\u5b8c\u6210\u7f51\u7ad9 HTTP \u5230 HTTPS \u7684\u8f6c\u6362\u3002</p>"},{"location":"cdn/ssl/#_7","title":"\u4ea7\u54c1\u4f18\u52bf","text":""},{"location":"cdn/ssl/#ssl_1","title":"\u514d\u8d39\u7533\u8bf7 SSL \u8bc1\u4e66","text":"<p>\u53c8\u62cd\u4e91\u63d0\u4f9b\u4e86\u4e24\u6b3e\u8bc1\u4e66\u7684\u514d\u8d39\u7533\u8bf7\u65b9\u6848\uff0c\u7528\u6237\u53ef\u901a\u8fc7 SSL \u8bc1\u4e66\u7533\u8d2d\u5e73\u53f0\uff0c\u514d\u8d39\u7533\u8bf7 Symantec-TrustAsia\u3001Let\u2019s Encrypt \u7684 DV SSL \u8bc1\u4e66\uff0c\u5e2e\u52a9\u7528\u6237\u96f6\u6210\u672c\u5b9e\u73b0\u5168\u7ad9\u90e8\u7f72 HTTPS\u3002\u5e76\u4e14\u8fd8\u5b9e\u73b0\u4e86 Let\u2019s Encrypt \u8bc1\u4e66\u5230\u671f\u81ea\u52a8\u7eed\u7b7e\uff0c\u7528\u6237\u65e0\u9700\u62c5\u5fc3\u8bc1\u4e66\u8fc7\u671f\u65f6\u95f4\uff0c\u964d\u4f4e\u7ef4\u62a4\u6210\u672c\u3002</p>"},{"location":"cdn/ssl/#ca","title":"\u56fd\u9645\u9886\u5148 CA \u673a\u6784\u5408\u4f5c","text":"<p>\u53c8\u62cd\u4e91\u643a\u624b TrustAsia \u4e0e\u56fd\u9645\u9876\u7ea7\u6570\u5b57\u8bc1\u4e66\u63d0\u4f9b\u5546 Symantec\u3001GeoTrust \u5408\u4f5c\uff0c\u63a8\u51fa\u4e86\u57df\u540d\u578b SSL \u8bc1\u4e66\uff08DV SSL\uff09\uff0c\u4f01\u4e1a\u578b SSL \u8bc1\u4e66\uff08OV SSL\uff09\u3001\u589e\u5f3a\u578b SSL \u8bc1\u4e66\uff08EV SSL\uff09\u7684\u7533\u8d2d\uff1b\u5176\u4e2d\u57df\u540d\u578b DV SSL \u5355\u57df\u540d\u8bc1\u4e66\u5f53\u524d\u514d\u8d39\u7533\u8d2d\u3002</p> <p>Symantec \u662f\u5168\u7403\u6700\u5927\u7684\u4fe1\u606f\u5b89\u5168\u670d\u52a1\u63d0\u4f9b\u5546\uff0c \u5176\u9881\u53d1\u7684\u8bc1\u4e66\u80fd\u88ab\u6240\u6709\u6d4f\u89c8\u5668\u652f\u6301\u4e0e\u4fe1\u4efb\uff0c\u53ef\u786e\u4fdd\u7528\u6237\u8bbf\u95ee\u65f6\u6d4f\u89c8\u5668\u7ed9\u4e88\u6b63\u786e\u7684\u7f51\u9875\u5b89\u5168\u63d0\u793a\uff0c\u786e\u4fdd\u4e86\u7528\u6237\u5229\u76ca\u6700\u5927\u5316\uff0c\u8ba9\u7528\u6237\u771f\u6b63\u611f\u5230\u5b89\u5168\u53ef\u9760\u3002</p> <p>GeoTrust \u662f\u5168\u7403\u7b2c\u4e8c\u5927\u6570\u5b57\u8bc1\u4e66\u63d0\u4f9b\u5546\uff0c\u4e5f\u662f\u8eab\u4efd\u8ba4\u8bc1\u548c\u4fe1\u4efb\u8ba4\u8bc1\u9886\u57df\u7684\u9886\u5bfc\u8005\uff0c \u8be5\u516c\u53f8\u5404\u79cd\u5148\u8fdb\u7684\u6280\u672f\u4f7f\u5f97\u4efb\u4f55\u5927\u5c0f\u7684\u673a\u6784\u548c\u516c\u53f8\u90fd\u80fd\u5b89\u5168\u3001\u4f4e\u6210\u672c\u5730\u90e8\u7f72 SSL \u6570\u5b57\u8bc1\u4e66\u548c\u5b9e\u73b0\u5404\u79cd\u8eab\u4efd\u8ba4\u8bc1\u3002 </p> <p>TrustAsia\u00ae\uff08\u4e9a\u6d32\u8bda\u4fe1\uff09\u662f\u4e9a\u6570\u4fe1\u606f\u79d1\u6280\uff08\u4e0a\u6d77\uff09\u6709\u9650\u516c\u53f8\u5e94\u7528\u4e8e\u4fe1\u606f\u5b89\u5168\u9886\u57df\u7684\u54c1\u724c\uff0c \u4e13\u4e1a\u4e3a\u4f01\u4e1a\u63d0\u4f9b\u5305\u542b\u6570\u5b57\u8bc1\u4e66\u5728\u5185\u7684\u6240\u6709\u7f51\u7edc\u5b89\u5168\u670d\u52a1\uff0c\u662fSymantec\u2122\uff08\u8d5b\u95e8\u94c1\u514b\uff09\u7684\u767d\u91d1\u5408\u4f5c\u4f19\u4f34\u3002</p>"},{"location":"cdn/ssl/#_8","title":"\u4e00\u952e\u5b8c\u6210\u8bc1\u4e66\u7533\u8bf7","text":"<p>\u7528\u6237\u53ea\u9700\u63d0\u4ea4\u57df\u540d\uff0c\u586b\u5199\u5fc5\u8981\u4fe1\u606f\uff0c\u70b9\u51fb\u7533\u8bf7\u5373\u53ef\u5b8c\u6210\u8bc1\u4e66\u7684\u7533\u8d2d\uff1b\u5bf9\u4e8e\u514d\u8d39\u8bc1\u4e66\uff0c\u7cfb\u7edf\u4f1a\u81ea\u52a8\u5c06\u8bc1\u4e66\u90e8\u7f72\u4e8e CDN \u5e73\u53f0\uff1b\u5bf9\u4e8e\u4ed8\u8d39\u8bc1\u4e66\uff0c\u7528\u6237\u53ef\u6309\u9700\u4e00\u952e\u5c06\u8bc1\u4e66\u90e8\u7f72\u4e8e CDN \u5e73\u53f0\uff1b\u4e24\u8005\u90fd\u53ef\u4ee5\u4e0e\u53c8\u62cd\u4e91 CDN \u4ea7\u54c1\u5b8c\u7f8e\u878d\u5408\uff0c\u5b9e\u73b0\u5168\u7ad9 HTTPS \u52a0\u901f\u670d\u52a1\u3002</p>"},{"location":"cdn/ssl/#_9","title":"\u7b80\u5355\u6613\u7528\uff0c\u7ba1\u7406\u65b9\u4fbf","text":"<p>\u65e0\u8bba\u662f\u7528\u6237\u4e0a\u4f20\u7684\u81ea\u6709\u8bc1\u4e66\uff0c\u8fd8\u662f\u901a\u8fc7\u53c8\u62cd\u4e91\u7533\u8d2d\u7684\u5404\u7c7b\u8bc1\u4e66\uff0c\u90fd\u53ef\u5728 SSL \u8bc1\u4e66\u670d\u52a1\u4e2d\u7edf\u4e00\u7ba1\u7406\uff0c\u65b9\u4fbf\u7528\u6237\u5bf9\u8bc1\u4e66\u8fdb\u884c\u5404\u79cd\u64cd\u4f5c\uff0c\u5e76\u4e14\u5168\u7a0b\u65e0\u9700\u4eba\u5de5\u534f\u52a9\uff0c\u516c\u94a5\u3001\u79c1\u94a5\u66f4\u52a0\u5b89\u5168\uff0c\u505a\u5230\u8ba9\u7528\u6237\u7701\u5fc3\u3001\u653e\u5fc3\uff0c\u540c\u65f6\u63d0\u5347\u4e86\u7528\u6237\u7684\u5de5\u4f5c\u6548\u7387\u3002</p>"},{"location":"cdn/ssl/#_10","title":"\u63d0\u5347\u7f51\u7ad9\u641c\u7d22\u6392\u540d","text":"<p>Google \u5728 2014 \u5e74\u53d1\u5e03\u7684\u5b98\u65b9\u535a\u5ba2\u4e2d\u6307\u51fa\uff0c\u5df2\u7ecf\u8c03\u6574\u5176\u641c\u7d22\u5f15\u64ce\u7b97\u6cd5\uff0c\u91c7\u7528 HTTPS \u52a0\u5bc6\u7684\u7f51\u7ad9\u5728\u641c\u7d22\u7ed3\u679c\u4e2d\u7684\u6392\u540d\u5c06\u4f1a\u66f4\u9ad8\u3002\u5176\u76ee\u6807\u975e\u5e38\u7b80\u5355\uff0c\u5c31\u662f\u8981\u9f13\u52b1\u5168\u7403\u7f51\u7ad9\u91c7\u7528\u5b89\u5168\u5ea6\u66f4\u9ad8\u7684 HTTPS \u4ee5\u4fdd\u8bc1\u8bbf\u5ba2\u5b89\u5168\u3002\u56e0\u6b64\u7f51\u7ad9\u91c7\u7528 HTTPS \u534f\u8bae\uff0c\u53ef\u5438\u5f15\u66f4\u591a\u7684\u7528\u6237\u8fdb\u884c\u8bbf\u95ee\uff0c\u63d0\u5347\u7f51\u7ad9\u7684\u4ef7\u503c\uff0c\u589e\u521b\u8425\u6536\u3002</p>"},{"location":"cdn/ssl/#_11","title":"\u4f7f\u7528\u573a\u666f","text":"<p>\u7528\u6237\u4ece\u53c8\u62cd\u4e91\u7533\u8d2d SSL \u8bc1\u4e66\u540e\uff0c\u6b64 SSL \u8bc1\u4e66\u53ef\u4f7f\u7f51\u7ad9\u5b8c\u6210\u7531 HTTP \u5230 HTTPS \u7684\u8f6c\u6362\uff0c\u7531\u4e8e HTTPS \u91c7\u7528\u4e86 SSL/TLS \u52a0\u5bc6\u5c42\uff0c\u53ef\u4fdd\u8bc1\u7f51\u7ad9\u6570\u636e\u7684\u540e\u7eed\u4f20\u8f93\u66f4\u52a0\u5b89\u5168\u53ef\u9760\uff0c\u9632\u6b62\u6d41\u91cf\u52ab\u6301\uff0c\u9632\u5192\u5145\u3001\u9493\u9c7c\u7b49\u3002</p> <p>\u5982\u679c\u7528\u6237\u540c\u65f6\u8d2d\u4e70\u4e86\u53c8\u62cd\u4e91\u7684 CDN \u670d\u52a1\uff0c\u4e5f\u53ef\u4ee5\u9009\u62e9\u5c06 SSL \u8bc1\u4e66\u90e8\u7f72\u4e8e CDN \u52a0\u901f\u4ea7\u54c1\u4e2d\uff0c\u5728\u5b9e\u73b0\u7f51\u7ad9 HTTPS \u5316\u7684\u540c\u65f6\uff0c\u4e5f\u53ef\u4eab\u53d7\u53c8\u62cd\u4e91\u4f18\u8d28\u7684 HTTPS \u52a0\u901f\u89e3\u51b3\u65b9\u6848\u3002</p>"},{"location":"cdn/ssl/#_12","title":"\u7248\u672c\u8fed\u4ee3","text":"<p>V1.0</p> <p>2016 \u5e74 12 \u6708 21 \u65e5 let\u2019s encrypt DV SSL \u5355\u57df\u540d\u8bc1\u4e66\u514d\u8d39\u7533\u8bf7\u670d\u52a1\u4e0a\u7ebf \u5728 CDN \u5168\u7f51\u3001\u76f4\u64ad\u52a0\u901f\u914d\u7f6e\u4e2d\u589e\u52a0\u4e86 HTTPS \u914d\u7f6e\u9879</p> <p>V1.1</p> <p>2017 \u5e74 2 \u6708 7 \u65e5 TrustAsia DV SSL \u5355\u57df\u540d\u8bc1\u4e66\uff08\u7531 Symantec \u7b7e\u53d1\uff09\u514d\u8d39\u7533\u8bf7\u670d\u52a1\u4e0a\u7ebf</p> <p>V2.0</p> <p>2017 \u5e74 3 \u6708 30 \u65e5 Symantec\u3001GeoTrust\u3001TrustAsia \u7684\u5404\u7c7b\u4ed8\u8d39 DV SSL\u3001OV SSL\u3001EV SSL \u8bc1\u4e66\u7533\u8d2d\u670d\u52a1\u4e0a\u7ebf</p>"},{"location":"cdn/ssl/#_13","title":"\u8d2d\u4e70\u6307\u5bfc","text":""},{"location":"cdn/ssl/#_14","title":"\u8d2d\u4e70\u6d41\u7a0b","text":"<p>\u901a\u8fc7\u53c8\u62cd\u4e91\u8d2d\u4e70 SSL \u8bc1\u4e66\uff0c\u6d41\u7a0b\u66f4\u52a0\u7b80\u6d01\u65b9\u4fbf\uff1a</p> <p></p>"},{"location":"cdn/ssl/#_15","title":"\u4ef7\u683c\u603b\u89c8","text":"<p>\u4ef7\u683c\u5217\u8868\uff1a</p> <p></p> <p>\u8bf4\u660e\uff1a</p> <p>\u4e00\u3001\u5355\u57df\u540d\u3001\u6cdb\u57df\u540d\u8bc1\u4e66\uff0c\u56e0\u53ea\u6d89\u53ca\u5230\u4e00\u4e2a\u57df\u540d\uff0c\u6240\u4ee5\u5176\u5355\u4ef7\u5373\u4e0a\u8ff0\u8868\u683c\u4e2d\u7684\u4ef7\u683c\uff1b</p> <p>\u4e8c\u3001\u5bf9\u4e8e\u589e\u5f3a\u578b EV SSL \u8bc1\u4e66\uff0c\u53ea\u6709\u591a\u57df\u540d\u8bc1\u4e66\uff0c\u6ca1\u6709\u591a\u57df\u540d\u6cdb\u57df\u540d\u8bc1\u4e66\uff1b</p> <p>\u4e09\u3001\u591a\u57df\u540d\u8bc1\u4e66\u3001\u591a\u57df\u540d\u6cdb\u57df\u540d\u8bc1\u4e66\u7684\u4ef7\u683c\u8ba1\u7b97\u5982\u4e0b\uff1a</p> <p>Symantec \u54c1\u724c</p> <p>\u8ba1\u7b97\u516c\u5f0f\uff08\u4ee5\u4e00\u5e74\u6709\u6548\u671f\u8bc1\u4e66\u4e3a\u4f8b\uff09\uff1a</p> <pre><code>\u5047\u8bbe\uff1a\n\n1\u5e74\u6807\u51c6\u57df\u540d\u4ef7\u683c = A \uff1b \u6807\u51c6\u57df\u540d\u4e2a\u6570 = B\n\n1\u5e74\u6cdb\u57df\u540d\u4ef7\u683c = C \uff1b\u6cdb\u57df\u540d\u4e2a\u6570 = D\n\n1\u5e74\u6807\u51c6\u57df\u540d\u4e13\u4e1a\u7248\u4ef7\u683c = E\n\n1\u5e74\u6cdb\u57df\u540d\u4e13\u4e1a\u7248\u4ef7\u683c = F\n\n\u5219\uff1a\n\n\u591a\u57df\u540d\u8bc1\u4e66\u4ef7\u683c = A * B\n\n\u591a\u57df\u540d\u4e13\u4e1a\u7248\u8bc1\u4e66\u4ef7\u683c = E * B\n\n\u591a\u57df\u540d\u6cdb\u57df\u540d\u8bc1\u4e66\u4ef7\u683c = A * B + C * D\n\n\u591a\u57df\u540d\u6cdb\u57df\u540d\u4e13\u4e1a\u7248\u8bc1\u4e66\u4ef7\u683c = E * B + F * D\n</code></pre> <p>Geotrust\u3001TrustAsia \u54c1\u724c</p> <p>\u9ed8\u8ba4\u652f\u63015\u4e2a\u6807\u51c6\u57df\u540d\uff08\u9ed8\u8ba4\u57df\u540d\u4e2d\u4e0d\u5305\u542b\u6cdb\u57df\u540d\uff09\uff0c\u8ba1\u7b97\u516c\u5f0f\uff08\u4ee5\u4e00\u5e74\u6709\u6548\u671f\u8bc1\u4e66\u4e3a\u4f8b\uff09\uff1a</p> <pre><code>\u5047\u8bbe\uff1a\n\n1\u5e74\u6807\u51c6\u57df\u540d\u4ef7\u683c = A \uff1b\u6807\u51c6\u57df\u540d\u4e2a\u6570 = B\n\n1\u5e74\u6cdb\u57df\u540d\u4ef7\u683c = C \uff1b\u6cdb\u57df\u540d\u4e2a\u6570 = D\n\n1\u5e74\u6807\u51c6\u57df\u540d\u989d\u5916\u4ef7\u683c = E\n\n\u5219\uff1a\n\n\u591a\u57df\u540d\u8bc1\u4e66\u4ef7\u683c = A + E * ( B - 5 )   \u5982\u679c B - 5 &lt; 0  \u5219\u6309 0 \u8ba1\u7b97\n\n\u591a\u57df\u540d\u6cdb\u57df\u540d\u8bc1\u4e66\u4ef7\u683c = A + E * ( B - 5 ) + C * D   \u5982\u679c B - 5 &lt; 0  \u5219\u6309 0 \u8ba1\u7b97\n</code></pre>"},{"location":"cdn/ssl/#_16","title":"\u9000\u6b3e\u670d\u52a1","text":"<p>\u6761\u4ef6</p> <p>\u7533\u8d2d\u7684 SSL \u8bc1\u4e66\u5df2\u7531 CA \u673a\u6784\u9881\u53d1\u6210\u529f\u7684\uff0c\u5219\u4e0d\u80fd\u9000\u6b3e\uff1b \u514d\u8d39\u7533\u8bf7\u7684\u57df\u540d\u578b\uff08DV SSL\uff09\u8bc1\u4e66\u4e0d\u652f\u6301\u9000\u6b3e\uff1b \u7533\u8d2d\u7684 SSL \u8bc1\u4e66\u5728\u4fe1\u606f\u63d0\u4ea4\u5ba1\u6838\u524d\u6216\u7533\u8d2d\u5931\u8d25\u540e\u53ef\u514d\u8d39\u9000\u6b3e\uff1b</p> <p>\u6d41\u7a0b</p> <p>\u76ee\u524d\u6682\u65f6\u4ec5\u652f\u6301\u901a\u8fc7\u63d0\u4ea4\u5de5\u5355\u7684\u65b9\u5f0f\u8fdb\u884c\u9000\u6b3e\u7533\u8bf7\u3002</p>"},{"location":"cdn/ssl/#_17","title":"\u8bc1\u4e66\u540a\u9500","text":"<p>\u5982\u679c\u7528\u6237\u53d1\u73b0\u6e90\u7ad9\u670d\u52a1\u5668\u88ab\u653b\u7834\u6216\u5176\u4ed6\u539f\u56e0\u5bfc\u81f4 SSL \u8bc1\u4e66\u79c1\u94a5\u6cc4\u9732\uff0c\u5219\u53ef\u4ee5\u9009\u62e9\u540a\u9500\u6b64\u8bc1\u4e66\uff1b\u8bc1\u4e66\u540a\u9500\u540e\uff0c\u5404\u6d4f\u89c8\u5668\u3001\u5ba2\u6237\u7aef\u7b49\u5c06\u4e0d\u518d\u4fe1\u4efb\u5df2\u540a\u9500\u7684\u8bc1\u4e66\uff0c\u4f1a\u51fa\u73b0\u4e0d\u5b89\u5168\u63d0\u9192\uff0c\u4e3e\u4f8b\u53c2\u8003\u8fd9\u91cc\u3002</p> <p>\u76ee\u524d\u6682\u65f6\u4ec5\u652f\u6301\u901a\u8fc7\u63d0\u4ea4\u5de5\u5355\u7684\u65b9\u5f0f\u8fdb\u884c\u8bc1\u4e66\u540a\u9500\u7533\u8bf7\u3002</p>"},{"location":"cdn/ssl/#_18","title":"\u5feb\u901f\u5165\u95e8","text":"<p>\u53c8\u62cd\u4e91\u643a\u624b TrustAsia \u4e0e Symantec\u3001GeoTrust \u8fbe\u6210\u6218\u7565\u5408\u4f5c\uff0c\u63a8\u51fa\u4e86\u5404\u7c7b\u57df\u540d\u578b DV SSL \u3001\u4f01\u4e1a\u578b OV SSL \u3001\u589e\u5f3a\u578b EV SSL \u8bc1\u4e66\u7684\u7533\u8d2d\uff1b\u5176\u4e2d\u6709\u6548\u671f\u4e3a\u4e00\u5e74\u7684 TrustAsia \u57df\u540d\u578b DV SSL \u5355\u57df\u540d\u8bc1\u4e66\u5f53\u524d\u514d\u8d39\u7533\u8bf7\uff0c\u539f\u4ef7 1900 \u5143/\u5e74\u3002</p> <p>\u53c8\u62cd\u4e91\u8fd8\u4e0e\u56fd\u9645\u8bc1\u4e66\u63d0\u4f9b\u5546 Let\u2019s Encrypt \u5408\u4f5c\uff0c\u4e3a\u7528\u6237\u514d\u8d39\u63d0\u4f9b\u4e86\u53e6\u4e00\u6b3e DV SSL \u8bc1\u4e66\u7684\u7533\u8bf7\uff0c\u8bc1\u4e66\u5230\u671f\u4f1a\u81ea\u52a8\u7eed\u7b7e\uff0c\u64cd\u4f5c\u7b80\u5355\u65b9\u4fbf\uff0c\u4e00\u952e\u5b8c\u6210\u8bc1\u4e66\u7684\u7533\u8bf7\u4e0e\u90e8\u7f72\uff0c\u7528\u6237\u53ef\u6839\u636e\u81ea\u8eab\u60c5\u51b5\uff0c\u591a\u91cd\u9009\u62e9\uff0c\u6ee1\u8db3\u4e0d\u540c\u573a\u666f\u7684\u9700\u6c42\u3002</p> <p>\u8be6\u7ec6\u64cd\u4f5c\u6b65\u9aa4\u5982\u4e0b\uff1a</p>"},{"location":"cdn/ssl/#_19","title":"\u4ed8\u8d39\u8bc1\u4e66\u7533\u8d2d","text":"<p>\u7b2c\u4e00\u6b65\uff1a\u6ce8\u518c\u53c8\u62cd\u4e91\u8d26\u53f7\uff0c\u5e76\u5b8c\u6210\u5b9e\u540d\u8ba4\u8bc1\uff1b</p> <p>\u7b2c\u4e8c\u6b65\uff1a\u8fdb\u5165 SSL \u8bc1\u4e66\u670d\u52a1\uff0c\u5de5\u5177\u7bb1 -&gt; SSL \u8bc1\u4e66\u670d\u52a1 -&gt; \u7533\u8d2d\u8bc1\u4e66\uff1b</p> <p></p> <p>\u7b2c\u4e09\u6b65\uff1a\u70b9\u51fb\u53f3\u4e0a\u89d2\u7684 <code>\u7533\u8d2d\u8bc1\u4e66</code>\uff0c\u5982\u4e0b\u56fe\u6240\u793a\uff0c\u9009\u62e9\u8bc1\u4e66\u54c1\u724c\uff0c\u5e76\u9009\u62e9\u9700\u8981\u7533\u8d2d\u7684\u8bc1\u4e66\u7c7b\u578b\u3001\u6709\u6548\u671f\u7b49\uff1b</p> <p></p> <p>\u7b2c\u56db\u6b65\uff1a\u6838\u5bf9\u7533\u8d2d\u4fe1\u606f\uff1b</p> <p></p> <p>\u7b2c\u4e94\u6b65\uff1a\u786e\u8ba4\u4ed8\u6b3e\uff1b</p> <p>\u4e3a\u9632\u6b62\u6076\u610f\u64cd\u4f5c\uff0c\u53c8\u62cd\u4e91\u63d0\u4f9b\u4e86\u652f\u4ed8\u9a8c\u8bc1\u529f\u80fd\uff0c\u4ed8\u6b3e\u65f6\uff0c\u5c06\u4f1a\u53d1\u9001\u9a8c\u8bc1\u7801\u5230\u6ce8\u518c\u53c8\u62cd\u4e91\u8d26\u53f7\u65f6\u6240\u4f7f\u7528\u7684\u624b\u673a\u53f7\u4e0a\u3002</p> <p></p> <p>\u7b2c\u516d\u6b65\uff1a\u652f\u4ed8\u5b8c\u6210\u4ee5\u540e\uff0c\u8ba2\u5355\u8fdb\u5165<code>\u8d2d\u4e70\u5217\u8868</code>\uff0c\u5904\u4e8e<code>\u5f85\u5b8c\u6210</code>\u72b6\u6001\uff0c</p> <p></p> <p>\u7b2c\u4e03\u6b65\uff1a\u70b9\u51fb<code>\u8865\u5168</code>\u6309\u94ae\uff0c\u586b\u5199\u57df\u540d\u3001\u516c\u53f8\u3001\u8054\u7cfb\u4eba\u7b49\u4fe1\u606f\uff0c</p> <p></p> <p>\u8bf4\u660e\uff1a\u7533\u8d2d\u591a\u57df\u540d\u8bc1\u4e66\u3001\u591a\u57df\u540d\u6cdb\u57df\u540d\u8bc1\u4e66\u65f6\uff0c\u4e3b\u57df\u540d\u53ea\u80fd\u586b\u5199\u6807\u51c6\u57df\u540d\u3002</p> <p>\u7b2c\u516b\u6b65\uff1a\u4fe1\u606f\u586b\u5199\u5b8c\u6210\uff0c\u70b9\u51fb\u63d0\u4ea4\u540e\uff0c\u4f1a\u51fa\u73b0\u5982\u4e0b\u4e24\u79cd\u60c5\u51b5</p> <p>\uff081\uff09\u5982\u679c\u7533\u8d2d\u7684\u662f OV \u6216 EV SSL \u8bc1\u4e66\uff0c\u5219\u8fdb\u884c</p> <p>\u4e0b\u8f7d\u300a\u4fe1\u606f\u786e\u8ba4\u51fd\u300b</p> <p></p> <p>\u4e0a\u4f20\u300a\u4fe1\u606f\u786e\u8ba4\u51fd\u300b\uff0c\u4e0a\u4f20\u6587\u4ef6\u4e0d\u80fd\u5927\u4e8e2M</p> <p></p> <p>\u300a\u4fe1\u606f\u786e\u8ba4\u51fd\u300b\u4e0a\u4f20\u6210\u529f\u540e\uff0c\u7533\u8d2d\u8fdb\u5165 CA \u673a\u6784\u4fe1\u606f\u5ba1\u6838\u7684\u72b6\u6001\uff0c\u5ba1\u6838\u4e00\u822c\u9700\u89813\uff5e5\u4e2a\u5de5\u4f5c\u65e5</p> <p></p> <p>\uff082\uff09\u5982\u679c\u7533\u8d2d\u7684\u662f DV SSL \u8bc1\u4e66\uff0c\u5219\u8fdb\u884c</p> <p>\u5728<code>\u8bc1\u4e66\u7533\u8d2d</code>\u754c\u9762\uff0c\u70b9\u51fb<code>\u7533\u8bf7\u7ed3\u679c</code>\u627e\u5230\u5bf9\u5e94\u7684\u7533\u8d2d\u8bb0\u5f55\uff0c\u70b9\u51fb<code>\u67e5\u770b</code>\u83b7\u53d6\u76f8\u5173\u9a8c\u8bc1\u4fe1\u606f\uff0c\u9a8c\u8bc1\u64cd\u4f5c\u53ef\u53c2\u8003\u8fd9\u91cc</p> <p></p> <p>\u6dfb\u52a0\u597d\u9a8c\u8bc1\u4fe1\u606f\u540e\uff0c\u7533\u8d2d\u8fdb\u5165 CA \u673a\u6784\u4fe1\u606f\u5ba1\u6838\u9a8c\u8bc1\u72b6\u6001\uff0c\u4e00\u822c\u9700\u8981 1 \u4e2a\u5de5\u4f5c\u65e5</p> <p>\u7b2c\u4e5d\u6b65\uff1a\u67e5\u770b\u7533\u8bf7\u7ed3\u679c\uff0c\u5de5\u5177\u7bb1 -&gt; SSL \u8bc1\u4e66\u670d\u52a1 -&gt; \u7533\u8d2d\u8bc1\u4e66\uff1b</p> <p>\u70b9\u51fb<code>\u7533\u8bf7\u7ed3\u679c</code>\u67e5\u770b\u7533\u8bf7\u72b6\u6001\uff0c\u5728\u8bc1\u4e66\u672a\u9881\u53d1\u6210\u529f\u4e4b\u524d\uff0c\u90fd\u53ef\u70b9\u51fb<code>\u53d6\u6d88</code>\u6309\u94ae\uff0c\u8fdb\u884c\u7533\u8d2d\u4fe1\u606f\u4fee\u6539\u6216\u505c\u6b62\u7533\u8d2d\u3002</p> <p>\u5982\u679c\u72b6\u6001\u663e\u793a\u4e3a<code>\u5df2\u9881\u53d1</code>\uff0c\u5219\u8868\u660e\u8bc1\u4e66\u5df2\u7533\u8d2d\u6210\u529f\uff0c\u6b64\u65f6\u53ef\u8fdb\u884c<code>\u4e0b\u8f7d</code>\u3001<code>\u90e8\u7f72\u5230 CDN</code> \u7b49\u64cd\u4f5c\u3002</p> <p></p> <p>\u5982\u679c\u9009\u62e9\u5c06\u8bc1\u4e66<code>\u90e8\u7f72\u5230 CDN</code>\uff0c\u5219\u53ef\u8fdb\u5165\u8bc1\u4e66\u7ba1\u7406\u754c\u9762\uff0c\u5bf9\u8bc1\u4e66\u8fdb\u884c\u914d\u7f6e\u64cd\u4f5c\u3002</p>"},{"location":"cdn/ssl/#_20","title":"\u514d\u8d39\u8bc1\u4e66\u7533\u8d2d","text":"<p>\u524d\u4e00\u3001\u4e8c\u3001\u4e09\u3001\u56db\u3001\u4e94\u3001\u516d\u6b65\u4e0e\u4ed8\u8d39\u8bc1\u4e66\u7533\u8d2d\u6b65\u9aa4\u4e00\u81f4\uff1b</p> <p>\u7b2c\u4e03\u6b65\uff1a\u5728 CDN \u5e73\u53f0\u521b\u5efa\u670d\u52a1,\u5e76\u7ed1\u5b9a\u9700\u8981\u7533\u8bf7\u8bc1\u4e66\u7684\u57df\u540d\uff1b</p> <p>\u7b2c\u516b\u6b65\uff1a\u524d\u5f80\u57df\u540d\u6240\u5728\u670d\u52a1\u5546\u5904\u4fee\u6539 CNAME \u8bb0\u5f55\uff0c\u5982\u672a\u4fee\u6539 CNAME \u8bb0\u5f55\uff0c\u5219\u4f1a\u5bfc\u81f4\u8bc1\u4e66\u7533\u8bf7\u5931\u8d25\uff1b</p> <p>\u7b2c\u4e5d\u6b65\uff1a\u8fdb\u5165 SSL \u8bc1\u4e66\u670d\u52a1\uff0c\u5de5\u5177\u7bb1 -&gt; SSL \u8bc1\u4e66\u670d\u52a1 -&gt; \u7533\u8d2d\u8bc1\u4e66\uff1b</p> <p>\u5728<code>\u7533\u8d2d\u8bc1\u4e66</code>\u754c\u9762\uff0c\u70b9\u51fb<code>\u8d2d\u4e70\u5217\u8868</code>\u627e\u5230\u5bf9\u5e94\u7684\u7533\u8d2d\u8bb0\u5f55\uff0c\u70b9\u51fb<code>\u8865\u5168</code></p> <p></p> <p>\u7b2c\u5341\u6b65\uff1a\u586b\u5199\u57df\u540d</p> <p>\u6b64\u5904\u586b\u5199\u7684\u57df\u540d\uff0c\u5fc5\u987b\u662f\u5df2\u5907\u6848\uff0c\u5e76\u4e14\u5df2\u7ecf\u5b8c\u6210\u4e86\u4e0a\u8ff0\u7b2c\u4e03\u6b65\u3001\u7b2c\u516b\u6b65\u4e2d\u64cd\u4f5c\u7684\u57df\u540d\uff1b</p> <p></p> <p>\u7b2c\u5341\u4e00\u6b65\uff1a\u9a8c\u8bc1\u57df\u540d\u6240\u6709\u6743  </p> <p></p> <p>\u7b2c\u5341\u4e8c\u6b65\uff1a\u63d0\u4ea4\u7533\u8bf7\uff0c\u7b49\u5f85 CA \u673a\u6784\u5ba1\u6838\uff0c\u9881\u53d1\u8bc1\u4e66</p> <p></p> <p>\u5728<code>\u7533\u8bf7\u7ed3\u679c</code>\u4e2d\uff0c\u5982\u679c\u7533\u8bf7\u72b6\u6001\u663e\u793a\u4e3a<code>\u5df2\u9881\u53d1</code>\uff0c\u5219\u8868\u660e\u8bc1\u4e66\u5df2\u7533\u8d2d\u6210\u529f</p> <p>\u7b2c\u5341\u4e09\u6b65\uff1a\u8bc1\u4e66\u7533\u8bf7\u6210\u529f\u540e\uff0c\u7cfb\u7edf\u4f1a\u81ea\u52a8\u5c06\u8bc1\u4e66\u90e8\u7f72\u4e8e\u53c8\u62cd\u4e91 CDN \u5e73\u53f0\uff0c\u5e76\u4e0e\u76f8\u5e94\u57df\u540d\u8fdb\u884c\u7ed1\u5b9a\uff0c\u7528\u6237\u65e0\u9700\u624b\u52a8\u64cd\u4f5c\u3002\u540c\u65f6\u53ef\u8fdb\u5165\u8bc1\u4e66\u7ba1\u7406\u754c\u9762\uff0c\u5bf9\u8bc1\u4e66\u8fdb\u884c\u914d\u7f6e\u64cd\u4f5c\uff1b</p> <p></p>"},{"location":"cdn/ssl/#dv-ssl","title":"DV SSL\u8bc1\u4e66\u9a8c\u8bc1","text":"<p>\u5f53\u7533\u8d2d\u7684\u8bc1\u4e66\u4e3a TrustAsia DV SSL \u5355\u57df\u540d\uff08\u53ea\u9488\u5bf9 www \u5f00\u5934\u7684\u4e3b\u57df\u540d\uff0c\u4f8b\u5982 <code>www.upyun.com</code>\uff09\u3001\u591a\u57df\u540d\u3001\u6cdb\u57df\u540d\u8bc1\u4e66\u65f6\uff0c\u9700\u8981\u901a\u8fc7\u4ee5\u4e0b\u65b9\u5f0f\u8fdb\u884c\u57df\u540d\u6240\u6709\u6743\u9a8c\u8bc1\u3002</p> <p>1\u3001DNS \u9a8c\u8bc1</p> <p>\u4fee\u6539\u57df\u540d\u7684 DNS\uff0c\u6dfb\u52a0 <code>TXT \u8bb0\u5f55</code>\uff0c\u7136\u540e CA \u673a\u6784\u901a\u8fc7\u89e3\u6790\u57df\u540d\u7684 <code>TXT \u8bb0\u5f55</code>\u6765\u9a8c\u8bc1\u57df\u540d\u6240\u6709\u6743</p> <p></p> <p>\u4ee5 DNSPOD \u4e3a\u4f8b\uff0c <code>TXT \u8bb0\u5f55</code> \u6dfb\u52a0\u7684\u65b9\u6cd5\u5982\u4e0b\uff1a</p> <p></p> <p>2\u3001\u6587\u4ef6\u9a8c\u8bc1</p> <p>\u5728\u6e90\u7ad9\u670d\u52a1\u5668\u4e0a\uff0c\u521b\u5efa\u4e0e\u57df\u540d\u76f8\u5173\u7684\u76ee\u5f55\u53ca\u6587\u4ef6\uff0c\u7136\u540e CA \u673a\u6784\u901a\u8fc7\u8bbf\u95ee\u76f8\u5173\u6587\u4ef6\uff0c\u5e76\u8bfb\u53d6\u6587\u4ef6\u5185\u5bb9\uff0c\u9a8c\u8bc1\u57df\u540d\u6240\u6709\u6743</p> <p></p> <p>\u4e3e\u4f8b\uff1a</p> <p>\u5982\u679c\u57df\u540d\u662f<code>www.upyun.com</code>\uff0c\u5219 CA \u673a\u6784\u8fdb\u884c\u9a8c\u8bc1\u8bbf\u95ee\u7684\u5730\u5740\u662f\uff1a http|https://www.upyun.com/.well-known/pki-validation/fileauth.txt \uff1b</p> <p>\u5982\u679c\u57df\u540d\u662f\u6cdb\u57df\u540d <code>*.upyun.com</code>\uff0c\u5219 CA \u673a\u6784\u8fdb\u884c\u9a8c\u8bc1\u8bbf\u95ee\u7684\u5730\u5740\u662f\uff1a http|https://upyun.com/.well-known/pki-validation/fileauth.txt \u3002</p> <p><code>fileauth.txt</code> \u6587\u4ef6\u4e2d\u7684\u5185\u5bb9\u4e3a\uff1a201703212055513616t9uk2pok3zmu2b7m3nc4c8mkudogfpvyj2w2gebhkypy58</p> <p>\u6ce8\u610f\uff1a</p> <p>CA \u673a\u6784\u652f\u6301 <code>http</code> \u6216 <code>https</code> \u8bbf\u95ee\u9a8c\u8bc1\u94fe\u63a5\uff0c\u4f46\u662f\u4e0d\u652f\u6301\u4efb\u4f55\u5f62\u5f0f\u7684\u8df3\u8f6c\uff0c\u9700\u8981\u6e90\u7ad9\u670d\u52a1\u5668\u76f4\u63a5\u54cd\u5e94 200 \u72b6\u6001\u7801\u548c\u6587\u4ef6\u5185\u5bb9\u3002</p> <p>\u5982\u679c Window \u7cfb\u7edf\u4e0d\u652f\u6301\u521b\u5efa <code>/.well-known</code> \u76ee\u5f55\uff0c\u5219\u53ef\u4ee5\u901a\u8fc7\u547d\u4ee4\u884c\u6765\u521b\u5efa\uff1a <code>mkdir .well-known</code></p> <p>3\u3001\u5ba1\u6838\u9a8c\u8bc1</p> <p>\u65e0\u8bba\u662f\u6dfb\u52a0 <code>TXT \u8bb0\u5f55</code>\uff0c\u8fd8\u662f\u589e\u52a0<code>\u9a8c\u8bc1\u6587\u4ef6</code>\uff0c\u4e24\u8005\u64cd\u4f5c\u5b8c\u6210\u4ee5\u540e\uff0c\u7533\u8d2d\u5c31\u8fdb\u5165\u4e86 CA \u673a\u6784\u4fe1\u606f\u5ba1\u6838\u9a8c\u8bc1\u72b6\u6001\uff0c\u4e00\u822c\u9700\u8981 1 \u4e2a\u5de5\u4f5c\u65e5\uff0c\u8bc1\u4e66\u9881\u53d1\u6210\u529f\u540e\uff0c\u4e0a\u8ff0\u4e24\u79cd\u8bb0\u5f55\u53ef\u5220\u9664\u3002</p>"},{"location":"cdn/ssl/#_21","title":"\u6ce8\u610f\u4e8b\u9879","text":"<p>1\u3001\u7533\u8bf7\u514d\u8d39\u7684 TrustAsia\u3001Let\u2019s Encrypt DV SSL \u8bc1\u4e66\u7684\u57df\u540d\uff0c\u5fc5\u987b\u662f\u5df2\u5907\u6848\uff0c\u4e14\u5df2\u7ecf\u5728\u53c8\u62cd\u4e91 CDN \u5e73\u53f0\u521b\u5efa\u4e86\u670d\u52a1\uff0c\u5e76\u7ed1\u5b9a\u4e86\u6b64\u57df\u540d\u3002</p> <p>2\u3001\u7533\u8bf7 TrustAsia DV SSL \u8bc1\u4e66\u65f6\uff0c\u57df\u540d\u4f1a\u7ecf\u8fc7 Symantec CA \u673a\u6784\u5b89\u5168\u5ba1\u6838\uff0c\u5982\u679c\u5ba1\u6838\u672a\u901a\u8fc7\uff0c\u539f\u56e0\u5982\u4e0b\uff1a</p> <p>DV SSL \u8bc1\u4e66\u7684\u7533\u8bf7\uff0c\u65e0\u9700\u4eba\u5de5\u4ecb\u5165\uff0c\u7531 CA \u673a\u6784\u670d\u52a1\u5668\u81ea\u52a8\u8ba4\u8bc1\u5feb\u901f\u7b7e\u53d1\uff0c\u56e0\u6b64\u67d0\u4e9b CA \u673a\u6784\u4f1a\u6839\u636e\u5176\u53cd\u9493\u9c7c\u673a\u5236\uff0c\u91c7\u7528\u8f83\u4e3a\u4e25\u683c\u7684\u654f\u611f\u8bcd\u6765\u52a0\u5f3a\u5ba1\u6838\u6807\u51c6\uff0c\u4f8b\u5982\u57df\u540d\u4e2d\u5305\u542b bank\u3001trust \u7b49\uff0c\u90fd\u4f1a\u5f15\u8d77\u57df\u540d\u5ba1\u6838\u5931\u8d25\uff0c\u654f\u611f\u8bcd\u7684\u5b9a\u4e49\u7531 CA \u673a\u6784\u81ea\u8eab\u89c4\u5b9a\u3002</p> <p>\u8fd9\u65f6\u8bf7\u66f4\u6362\u5176\u4ed6\u57df\u540d\u8fdb\u884c\u7533\u8bf7\u3002</p> <p>3\u3001\u7533\u8d2d\u514d\u8d39\u7684 TrustAsia\u3001Let\u2019s Encrypt DV SSL \u8bc1\u4e66\u4e4b\u524d\uff0c\u5ba2\u6237\u9700\u8981\u5c06\u57df\u540d\u6240\u6709\u533a\u57df\u5168\u90e8 CNAME \u5230\u53c8\u62cd\u4e91\u5e73\u53f0\uff0c\u5426\u5219\u6709\u53ef\u80fd\u5bfc\u81f4\u8bc1\u4e66\u7533\u8bf7\u5931\u8d25\u3002</p> <p>4\u3001\u5982\u679c\u514d\u8d39 DV SSL \u8bc1\u4e66\u7533\u8d2d\u5931\u8d25\uff0c\u9664\u56e0 CNAME \u539f\u56e0\u5bfc\u81f4\u7684\u5931\u8d25\uff0c\u5176\u4ed6\u5931\u8d25\u60c5\u51b5\u4e0b\uff08\u5b89\u5168\u5ba1\u6838\u5931\u8d25\u9664\u5916\uff09\uff0c\u53ef\u591a\u6b21\u5c1d\u8bd5\u91cd\u65b0\u63d0\u4ea4\u7533\u8bf7\uff0c\u5982\u591a\u6b21\u90fd\u672a\u7533\u8bf7\u6210\u529f\uff0c\u5219\u53ef\u63d0\u4ea4\u5de5\u5355\u5bfb\u6c42\u5e2e\u52a9\u3002</p> <p>5\u3001\u76ee\u524d\u4e0d\u652f\u6301\u5e26\u4e0b\u5212\u7ebf\uff08_\uff09\u7684\u57df\u540d\u7533\u8bf7\u3002</p> <p>6\u3001Symantec\u3001GeoTrust\u3001TrustAsia \u7684\u5404\u7c7b SSL \u8bc1\u4e66\u517c\u5bb9\u60c5\u51b5\uff1a\u652f\u6301\u5e02\u9762\u4e0a\u6240\u6709\u4e3b\u6d41\u6d4f\u89c8\u5668\u3002</p> <p>7\u3001Let\u2019s Encrypt DV SSL \u8bc1\u4e66\u517c\u5bb9\u5217\u8868\u5982\u4e0b\u6240\u793a\uff1a</p> <pre><code>Mozilla Firefox &gt;= v2.0\nGoogle Chrome\nInternet Explorer on Windows XP SP3 and higher\nMicrosoft Edge\nAndroid OS &gt;= v2.3.6\nSafari &gt;= v4.0 on macOS\nSafari on iOS &gt;= v3.1\nDebian Linux &gt;= v6\nUbuntu Linux &gt;= v12.04\nNSS Library &gt;= v3.11.9\nAmazon FireOS (Silk Browser)\nCyanogen &gt; v10\nJolla Sailfish OS &gt; v1.1.2.16\nKindle &gt; v3.4.1\nJava 7 &gt;= 7u111\nJava 8 &gt;= 8u101\n\n</code></pre> <p>\u66f4\u591a\u517c\u5bb9\u6027\u4fe1\u606f\u8bf7\u53c2\u8003\u8fd9\u91cc</p> <p>8.Let\u2019s Encrypt DV SSL \u8bc1\u4e66\uff0c\u5728\u4fdd\u8bc1\u57df\u540d CNAME \u4e00\u76f4\u89e3\u6790\u5230\u53c8\u62cd CDN \u5e73\u53f0\u7684\u524d\u63d0\u4e0b\uff0c\u8bc1\u4e66\u5230\u671f\u540e\u4f1a\u81ea\u52a8\u7eed\u7b7e\uff0c\u65e0\u9700\u62c5\u5fc3\u8bc1\u4e66\u8fc7\u671f\u95ee\u9898\u3002</p> <p>Symantec-TrustAsia DV SSL \u8bc1\u4e66\uff08\u6709\u6548\u671f\u4e00\u5e74\uff09\uff0c\u5728\u8bc1\u4e66\u7ba1\u7406\u4e2d\u53ef\u4ee5\u67e5\u770b\u8bc1\u4e66\u7684\u5230\u671f\u65f6\u95f4\uff0c\u8bc1\u4e66\u5feb\u8981\u5230\u671f\u65f6\uff0c\u7528\u6237\u4f9d\u7136\u53ef\u4ee5\u901a\u8fc7\u518d\u6b21\u7533\u8bf7\u7684\u65b9\u5f0f\u514d\u8d39\u5ef6\u671f\u3002</p> <p>9\u3001\u5bf9\u4e8e Symantec\u3001GeoTrust\u3001TrustAsia \u7684\u5404\u7c7b SSL \u8bc1\u4e66\uff0c\u4e3b\u57df\u540d\u4f8b\u5982 upyun.com \u5df2\u7ecf\u6210\u529f\u7533\u8bf7\u8bc1\u4e66\uff0c\u5219\u6b64\u8bc1\u4e66\u4e2d\u5df2\u9ed8\u8ba4\u6dfb\u52a0\u4e86 www.upyun.com\uff0c\u5373 www.upyun.com \u53ef\u76f4\u63a5\u4f7f\u7528\u6b64\u8bc1\u4e66\uff0c\u65e0\u9700\u91cd\u590d\u7533\u8bf7\uff1b\u540c\u7406\u4f7f\u7528 www.upyun.com \u7533\u8bf7\u7684\u8bc1\u4e66\uff0c\u4e3b\u57df\u540d upyun.com \u4e5f\u53ef\u4f7f\u7528\uff08\u4e0a\u8ff0\u53ea\u9488\u5bf9\u4e3b\u57df\u540d\u751f\u6548\uff0c\u4f8b\u5982\u7528\u57df\u540d abc.upyun.com \u7533\u8bf7\u7684\u8bc1\u4e66\uff0c\u5219 www.abc.upyu.com \u4e0d\u53ef\u4f7f\u7528\uff0c\u9700\u8981\u91cd\u65b0\u7533\u8bf7\uff09\u3002</p> <p>\u6ce8\u610f\uff1a\u53e6\u4e00\u6b3e Let\u2019s Encrypt DV SSL \u8bc1\u4e66\uff0c\u4e3b\u57df\u540d upyun.com \u548c www.upyun.com \u65e0\u6cd5\u5171\u7528\u4e00\u5f20\u8bc1\u4e66\uff0c\u9700\u5206\u522b\u7533\u8bf7\u3002</p>"},{"location":"cdn/tools/","title":"\u8f85\u52a9\u5de5\u5177","text":""},{"location":"cdn/tools/#ip","title":"IP \u68c0\u6d4b\u5de5\u5177","text":"<p>\u53ef\u901a\u8fc7\u8be5\u529f\u80fd\u9a8c\u8bc1 IP \u5730\u5740\u662f\u5426\u5c5e\u4e8e\u53c8\u62cd\u4e91 CDN \u8282\u70b9\u3002\u5982\u679c\u5c5e\u4e8e\u53c8\u62cd\u4e91 CDN \u8282\u70b9 IP\uff0c\u53ef\u4ee5\u67e5\u770b\u5230 IP \u6240\u5c5e\u5730\u533a\u53ca\u8fd0\u8425\u5546\u4fe1\u606f\u3002</p> <p>\u914d\u7f6e\u5f15\u5bfc</p> <p>\u767b\u9646 \u53c8\u62cd\u4e91\u7ba1\u7406\u63a7\u5236\u53f0\uff0c\u5728\u7f6e\u9876\u83dc\u5355\u8fdb\u5165 <code>\u5de5\u5177\u7bb1</code>\uff0c\u627e\u5230 <code>IP \u68c0\u6d4b\u5de5\u5177</code> \u680f\u76ee\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff1a</p> <p></p> <p>\u5728\u6253\u5f00\u7684\u754c\u9762\u7a97\u53e3\u4e2d\uff0c\u8f93\u5165\u9700\u8981\u68c0\u6d4b\u7684 IP \u5730\u5740\uff0c\u70b9\u51fb <code>\u68c0\u6d4b</code> \u6309\u94ae\uff0c\u5373\u53ef\u67e5\u770b\u68c0\u6d4b\u7ed3\u679c\u3002</p>"},{"location":"cdn/tools/#cdn","title":"CDN \u5065\u5eb7\u68c0\u6d4b","text":"<p>\u901a\u8fc7\u8be5\u5de5\u5177\uff0c\u53ef\u5bf9\u6bd4\u67e5\u770b\u56fd\u5185\u77e5\u540d\u7f51\u7ad9\u7684\u4e0b\u8f7d\u901f\u5ea6\uff0c\u5e76\u7ed9\u51fa\u53c8\u62cd\u4e91 CDN \u4e0b\u8f7d\u901f\u5ea6\u8bc4\u4f30\u7ed3\u679c\u3002\u4e0e\u6b64\u540c\u65f6\uff0c\u53ef\u663e\u793a\u5ba2\u6237\u7aef\u7f51\u7edc\u57fa\u672c\u4fe1\u606f\uff0c\u65b9\u4fbf\u5b9a\u4f4d\u95ee\u9898\u3002</p> <p>\u914d\u7f6e\u5f15\u5bfc</p> <p>\u767b\u9646 \u53c8\u62cd\u4e91\u7ba1\u7406\u63a7\u5236\u53f0\uff0c\u5728\u7f6e\u9876\u83dc\u5355\u8fdb\u5165 <code>\u5de5\u5177\u7bb1</code>\uff0c\u627e\u5230 <code>CDN \u5065\u5eb7\u68c0\u6d4b</code> \u680f\u76ee\u3002\u70b9\u51fb\u94fe\u63a5\u4e4b\u540e\uff0c\u4f1a\u8df3\u8f6c\u5230\u5982\u4e0b\u56fe\u6240\u793a\uff1a</p> <p></p> <p>\u60a8\u4e5f\u53ef\u4ee5\u70b9\u51fb\u94fe\u63a5 \u53c8\u62cd\u4e91 CDN \u5065\u5eb7\u68c0\u67e5\u5de5\u5177 \u8fdb\u884c\u67e5\u770b\u3002</p>"},{"location":"cdn/tools/#_1","title":"\u5b50\u8d26\u53f7\u7ba1\u7406","text":"<p>\u4e3a\u4e86\u65b9\u4fbf\u4e0d\u540c\u7684\u64cd\u4f5c\u4eba\u5458\u7ba1\u7406\u3001\u67e5\u770b\u4e0d\u540c\u7684\u670d\u52a1\u914d\u7f6e\uff0c\u53c8\u62cd\u4e91\u63a8\u51fa\u4e86\u5b50\u8d26\u53f7\u529f\u80fd\u3002\u4e3b\u8d26\u53f7\u53ef\u4ee5\u6839\u636e\u9700\u8981\u521b\u5efa\u591a\u4e2a\u5b50\u8d26\u53f7\uff0c\u5e76\u4e3a\u6bcf\u4e2a\u5b50\u8d26\u53f7\u5206\u914d\u4e0d\u540c\u6743\u9650\uff0c\u4f9b\u4e0d\u540c\u7ea7\u522b\u7684\u4eba\u4f7f\u7528\u3002\u4e0d\u540c\u7ba1\u7406\u4eba\u5458\u53ef\u4ee5\u901a\u8fc7\u5b50\u8d26\u53f7\uff0c\u767b\u5165\u53c8\u62cd\u4e91\u63a7\u5236\u53f0\uff0c\u67e5\u770b\u3001\u914d\u7f6e\u3001\u7ba1\u7406\u76f8\u5e94\u7684\u670d\u52a1\u3001\u529f\u80fd\u3002</p> <p>\u914d\u7f6e\u5f15\u5bfc</p> <p>\u7b2c\u4e00\u6b65\uff1a\u521b\u5efa\u5b50\u8d26\u53f7</p> <p>\u767b\u9646 CDN \u63a7\u5236\u53f0\uff0c\u8fdb\u5165 \u300c\u8d26\u6237\u7ba1\u7406\u300d\u9875\u9762\uff0c\u627e\u5230\u300c\u5b50\u8d26\u53f7\u300d\u914d\u7f6e\u9879\uff0c\u70b9\u51fb\u300c\u521b\u5efa\u5b50\u8d26\u53f7\u300d</p> <p></p> <p>\u7b2c\u4e8c\u6b65\uff1a\u57fa\u672c\u914d\u7f6e</p> <p>\u8be5\u6b65\u9aa4\u5305\u542b\u4e86\u521b\u5efa\u5b50\u8d26\u53f7\u540d\u79f0\u3001\u5bc6\u7801\uff0c\u586b\u5199\u5907\u6ce8\u7b49\u4fe1\u606f\u3002</p> <p></p> <p>\u7b2c\u4e09\u6b65\uff1a\u6388\u6743</p> <p>\u529f\u80fd\u6388\u6743\u754c\u9762\u5982\u622a\u56fe\u6240\u793a\uff1a</p> <p></p> <p>\u6388\u6743\u6b64\u5b50\u8d26\u53f7\u53ef\u4ee5\u67e5\u770b\u3001\u7ba1\u7406\u7684\u529f\u80fd\u6743\u9650\u5305\u62ec\uff1a</p> <p>CDN\uff1a\u6388\u6743\u5b50\u8d26\u53f7\u53ef\u4ee5\u67e5\u770b\u3001\u7ba1\u7406\u3001\u914d\u7f6e\u7684 CDN \u670d\u52a1\uff0c\u5e76\u4e14\u53ef\u6388\u6743\u6b64\u5b50\u8d26\u53f7\u80fd\u521b\u5efa CDN \u670d\u52a1\u3002</p> <p>\u4e91\u5b58\u50a8\uff1a\u6388\u6743\u5b50\u8d26\u53f7\u53ef\u4ee5\u67e5\u770b\u3001\u7ba1\u7406\u3001\u914d\u7f6e\u7684\u4e91\u5b58\u50a8\u670d\u52a1\uff0c\u5e76\u4e14\u53ef\u6388\u6743\u6b64\u5b50\u8d26\u53f7\u80fd\u521b\u5efa\u4e91\u5b58\u50a8\u670d\u52a1\u3002</p> <p>\u76f4\u64ad\uff1a\u6388\u6743\u5b50\u8d26\u53f7\u53ef\u4ee5\u67e5\u770b\u7684\u76f4\u64ad\u670d\u52a1\uff0c\u5e76\u4e14\u53ef\u6388\u6743\u6b64\u5b50\u8d26\u53f7\u80fd\u521b\u5efa\u76f4\u64ad\u670d\u52a1\u3002</p> <p>\u7edf\u8ba1\uff1a\u6388\u6743\u5b50\u8d26\u53f7\u53ef\u4ee5\u67e5\u770b\u6240\u6709 CDN\u3001\u4e91\u5b58\u50a8\u3001\u76f4\u64ad\u670d\u52a1\u7684\u7edf\u8ba1\u6570\u636e\u3002</p> <p>\u76d1\u63a7\uff1a\u6388\u6743\u5b50\u8d26\u53f7\u53ef\u4ee5\u67e5\u770b\u6240\u6709 CDN\u3001\u4e91\u5b58\u50a8\u3001\u76f4\u64ad\u670d\u52a1\u7684\u76d1\u63a7\u6570\u636e\u3002</p> <p>\u5237\u65b0\uff1a\u6388\u6743\u5b50\u8d26\u53f7\u53ef\u4ee5\u9488\u5bf9\u6240\u6709 CDN\u3001\u4e91\u5b58\u50a8\u670d\u52a1\u8fdb\u884c\u5237\u65b0\u3001\u9884\u70ed\u7b49\u64cd\u4f5c\u3002</p> <p>\u7b2c\u56db\u6b65\uff1a\u767b\u5165\u5b50\u8d26\u53f7</p> <p>\u6388\u6743\u67d0\u4e2a\u5b50\u8d26\u53f7\u6240\u6709\u529f\u80fd\uff0c\u767b\u5165\u540e\u5c55\u793a\u5982\u4e0b\uff1a</p> <p></p> <p>\u6ce8\u610f\u4e8b\u9879</p> <ul> <li> <p>\u5b50\u8d26\u53f7\u5177\u5907\u521b\u5efa\u3001\u7ba1\u7406\u3001\u4fee\u6539\u670d\u52a1\u914d\u7f6e\u7b49\u6743\u9650\uff1b\u53ef\u67e5\u770b\u6240\u6709 CDN\u3001\u4e91\u5b58\u50a8\u3001\u76f4\u64ad\u670d\u52a1\u7684\u7edf\u8ba1\u3001\u76d1\u63a7\u6570\u636e\uff1b\u53ef\u4ee5\u9488\u5bf9 CDN\u3001\u4e91\u5b58\u50a8\u6240\u6709\u670d\u52a1\u8fdb\u884c\u5237\u65b0\u3001\u9884\u70ed\u64cd\u4f5c\uff1b\u6240\u4ee5\u8bf7\u8c28\u614e\u5206\u914d\u3002</p> </li> <li> <p>\u5b50\u8d26\u53f7\u548c\u5bc6\u7801\u8bf7\u8c28\u614e\u4fdd\u7ba1\uff0c\u4e00\u65e6\u6cc4\u9732\uff0c\u8bf7\u53ca\u65f6\u66f4\u6362\u3002</p> </li> </ul> <p>\u5982\u6709\u7591\u95ee\u8bf7 \u8054\u7cfb\u6211\u4eec</p>"},{"location":"cdn/access-control/api-block-specified-urls/","title":"Api block specified urls","text":""},{"location":"cdn/access-control/api-block-specified-urls/#_1","title":"\u5c01\u7981","text":"<p>Refer: </p> <ul> <li>Ctyun Document</li> <li>Ctyun offline document</li> </ul>"},{"location":"cdn/access-control/api-block-specified-urls/#api","title":"\u5c01\u7981 API","text":"<p>Request:</p> <ul> <li>\u9700\u8981\u5c01\u7981\u7684 url, \u5355\u6b21 url \u6700\u591a 1000 </li> <li>\u9700\u8981\u5c01\u7981\u7684 url, \u9700\u8981\u652f\u6301\u6b63\u5219\u5339\u914d\u3002</li> <li>\u5c01\u7981\u7c7b\u578b\uff1a</li> <li>10\uff08\u5ffd\u7565 url \u53c2\u6570\u548c\u534f\u8bae\uff09 </li> <li>12\uff08\u6309\u7167\u5b8c\u6574\u7684 url \u8fdb\u884c\u5168\u5339\u914d\uff09 </li> <li>14\uff08\u57fa\u4e8e\u7f13\u5b58\u5c01\u89e3\u7981\uff0c\u5373\u4e0e\u63d0\u4ea4\u7684url\u76f8\u540c\u7f13\u5b58\u7684\u6587\u4ef6\u90fd\u5c01\u7981\uff09 </li> <li>\u4e0d\u586b\u9ed8\u8ba4\u5c4f\u853d\u7c7b\u578b\u4e3a14</li> <li>callback: \u7ed3\u679c\u56de\u8c03 url\u3002\u5f53\u5c01\u7981\u4efb\u52a1\u5b8c\u6210(\u4e0d\u8bba\u6210\u529f\u6216\u5931\u8d25)\u3002\u4e3b\u52a8 post \u56de\u8c03 url\u3002</li> </ul> <p>\u5c01\u7981\u7684 URL \u8fd4\u56de\uff1a403</p> <p>Response: </p> <ul> <li>\u672c\u6b21\u63d0\u4ea4\u7684\u4efb\u52a1 id, \u53ef\u6839\u636e\u6b64 id \u67e5\u8be2\u672c\u6b21\u6210\u529f\u63d0\u4ea4\u63a8\u9001\u7684 url/dir \u72b6\u6001\u3002</li> <li>\u672c\u6b21\u6210\u529f\u63d0\u4ea4\u7684 url \u6570\u91cf</li> <li>\u63d0\u4ea4\u5931\u8d25\u7684 url \u5217\u8868</li> </ul>"},{"location":"cdn/access-control/api-block-specified-urls/#api_1","title":"\u5c01\u7981\u7ed3\u679c\u67e5\u8be2 API","text":"<p>\u662f\u4e0d\u662f\u7ba1\u63a7\u5e73\u53f0\u505a\uff1f</p>"},{"location":"cdn/access-control/api-block-specified-urls/#_2","title":"\u5b9e\u73b0\u601d\u8def","text":"<ul> <li>\u53c2\u8003 URL \u9274\u6743\u5b9e\u73b0\u5c01\u7981\u529f\u80fd\uff1aURL \u9274\u6743\u662f\u6821\u9a8c token\uff0c\u5c01\u7981\u662f\u5bf9 URL \u8fdb\u884c\u6b63\u5219\u5339\u914d\u3002</li> <li>\u7ec6\u8282\uff1aURL parameters \u662f\u5426\u8981\u53bb\u6389\uff1f</li> <li>callback: \u5b8c\u6210\u5c01\u7981\u64cd\u4f5c\u540e\u8fdb\u884c callback\u3002</li> </ul>"},{"location":"cdn/access-control/api-block-specified-urls/#_3","title":"\u89e3\u5c01","text":"<p>\u5c01\u7981\u7684\u9006\u5411\u64cd\u4f5c\u3002</p>"},{"location":"cdn/access-control/refer-hotlink-protection/","title":"Refer hotlink protection","text":""},{"location":"cdn/access-control/refer-hotlink-protection/#introduce","title":"Introduce","text":"<p>Refer: https://www.ctyun.cn/document/10015932/10088464</p> <p>Referer\u9632\u76d7\u94fe\uff0c\u662f\u57fa\u4e8eHTTP\u8bf7\u6c42\u5934\u4e2dReferer\u5b57\u6bb5\uff08\u4f8b\u5982\uff0cReferer\u9ed1\u767d\u540d\u5355\uff09\u6765\u8bbe\u7f6e\u8bbf\u95ee\u63a7\u5236\u89c4\u5219\uff0c\u5b9e\u73b0\u5bf9\u8bbf\u5ba2\u7684\u8eab\u4efd\u8bc6\u522b\u548c\u8fc7\u6ee4\uff0c\u9632\u6b62\u7f51\u7ad9\u8d44\u6e90\u88ab\u975e\u6cd5\u76d7\u7528\u3002 \u914d\u7f6eReferer\u9ed1\u767d\u540d\u5355\u540e\uff0cCDN\u4f1a\u6839\u636e\u540d\u5355\u8bc6\u522b\u8bf7\u6c42\u8eab\u4efd\uff0c\u5141\u8bb8\u6216\u62d2\u7edd\u8bbf\u95ee\u8bf7\u6c42\u3002\u5141\u8bb8\u8bbf\u95ee\u8bf7\u6c42\uff0cCDN\u4f1a\u8fd4\u56de\u8d44\u6e90\u94fe\u63a5\uff1b\u62d2\u7edd\u8bbf\u95ee\u8bf7\u6c42\uff0cCDN\u4f1a\u8fd4\u56de403\u54cd\u5e94\u7801\u3002</p>"},{"location":"cdn/access-control/refer-hotlink-protection/#requirements","title":"Requirements","text":"<ul> <li>\u662f\u5426\u5141\u8bb8\u7a7a referer \u8bbf\u95ee\uff1b\u53d6\u503c\"on\", \"off\"</li> <li>\u652f\u6301 IP, \u6b63\u5219\uff0c\u7aef\u53e3</li> <li>\u652f\u6301\u9ed1\u767d\u540d\u5355</li> <li>\u9ed1\u767d\u540d\u5355\u53ea\u5141\u8bb8\u5b58\u5728\u4e00\u4e2a\uff0c\u82e5\u540c\u65f6\u5b58\u5728\u53ea\u5904\u7406\u9ed1\u540d\u5355</li> </ul>"},{"location":"cdn/access-control/url-authentication/","title":"Url authentication","text":""},{"location":"cdn/access-control/url-authentication/#url-parameters-key-of-current-facilitates","title":"URL parameters key of current facilitates","text":"<ul> <li>aliyun: auth_key</li> <li>upyun: _upt</li> <li>tencent: sign</li> <li>huawei_cloud: auth_key</li> <li>qiniu: sign</li> <li>baidu: auth_key</li> <li>\u7f51\u5bbf: key</li> <li>volcano: sign</li> </ul>"},{"location":"cdn/access-control/url-authentication/#ctyun","title":"Ctyun","text":"<p>ctyun: ctyun</p>"},{"location":"cdn/access-control/url-authentication/#requirements","title":"Requirements","text":"<ol> <li>\u5982\u679c\u60a8\u7684\u9274\u6743URL\u4e2d\u542b\u6709\u4e2d\u6587\u6216\u7279\u6b8a\u5b57\u7b26\uff0c\u9700\u5148\u8fdb\u884cURL\u8f6c\u7801\uff08\u5373Encode\uff09\u540e\u4f7f\u7528\u3002</li> </ol> <p>Auth type A:</p> <p>\u9274\u6743\u65b9\u5f0fA\u8bbf\u95eeURL\u6784\u6210\uff1ahttp://DomainName/Filename?auth_key=timestamp-rand-uid-md5hash\u3002</p> <p>CDN\u670d\u52a1\u5668\u62ff\u5230\u8bf7\u6c42\u540e\uff0c\u4f1a\u6309\u7167\u5982\u4e0b\u6b65\u9aa4\u8fdb\u884c\u6821\u9a8c\uff1a</p> <p>\u662f\u5426\u643a\u5e26\u9274\u6743\u53c2\u6570\u3002\u5982\u679c\u6ca1\u6709\u643a\u5e26\u9274\u6743\u53c2\u6570\uff0c\u8ba4\u4e3a\u8bf7\u6c42\u975e\u6cd5\uff0c\u8fd4\u56deHTTP 403\u9519\u8bef\u3002</p> <p>\u65f6\u95f4\u6821\u9a8c\uff1a\u5224\u65ad\u7cfb\u7edf\u5f53\u524d\u65f6\u95f4\u662f\u5426\u5728\u533a\u95f4[timestamp\uff0ctimestamp+\u6709\u6548\u65f6\u95f4]\u5185\u3002\u8d85\u51fa\u8be5\u533a\u95f4\uff0c\u8ba4\u4e3a\u8fc7\u671f\u5931\u6548\u5e76\u8fd4\u56deHTTP 403\u9519\u8bef\u3002</p> <p>\u52a0\u5bc6\u4e32\u6821\u9a8c\uff1a\u65f6\u95f4\u6821\u9a8c\u901a\u8fc7\u540e\uff0c\u6bd4\u5bf9CDN\u670d\u52a1\u5668\u8ba1\u7b97\u51fa\u6765\u7684md5hash\u503c\u4e0e\u8bbf\u95ee\u8bf7\u6c42\u4e2d\u5e26\u7684md5hash\u503c\u662f\u5426\u76f8\u540c\uff0c\u7ed3\u679c\u4e00\u81f4\u5219\u8ba4\u4e3a\u9274\u6743\u901a\u8fc7\u5e76\u8fd4\u56de\u6587\u4ef6\uff0c\u5426\u5219\u9274\u6743\u5931\u8d25\u8fd4\u56deHTTP 403\u9519\u8bef\u3002</p> <p>2\u3001\u8be5\u529f\u80fd\u6682\u4e0d\u652f\u6301\u5ba2\u6237\u81ea\u52a9\u914d\u7f6e\uff0c\u5982\u9700\u4f7f\u7528\uff0c\u8bf7\u901a\u8fc7\u63d0\u4ea4\u5de5\u5355\u7ed9\u5929\u7ffc\u4e91\u5ba2\u670d\uff0c\u7531\u5176\u4eba\u5de5\u64cd\u4f5c\u5f00\u542f\u3002\u63d0\u4ea4\u5de5\u5355\u65f6\u8bf7\u9644\u5e26\u5982\u4e0b\u4fe1\u606f\uff1a</p> <ul> <li>\u53c2\u6570    \u8bf4\u660e</li> <li>\u52a0\u5bc6\u53c2\u6570  \u9ed8\u8ba4\u4e3aauth_key\uff0c\u4e5f\u53ef\u81ea\u5b9a\u4e49\u3002</li> <li>\u52a0\u5bc6 key    \u8bbe\u5b9a\u7684\u9274\u6743\u5bc6\u94a5\u3002</li> <li>\u9274\u6743 URL \u6709\u6548\u65f6\u957f   \u5224\u65ad\u65f6\u95f4\u6233\u662f\u5426\u8fc7\u671f\u3002</li> <li>\u52a0\u5bc6\u5143\u7d20\u5206\u9694\u7b26   \u9ed8\u8ba4\u4f7f\u7528\u4e2d\u5212\u7ebf\uff08-\uff09\uff0c\u4e5f\u53ef\u81ea\u5b9a\u4e49\u3002</li> </ul> <p>Auth type B:</p> <p>\u9274\u6743\u65b9\u5f0fB\u8bbf\u95eeURL\u6784\u6210\uff1ahttp://DomainName/timestamp/md5hash/FileName\u3002</p> <p>CDN\u670d\u52a1\u5668\u62ff\u5230\u8bf7\u6c42\u540e\uff0c\u4f1a\u6309\u7167\u5982\u4e0b\u6b65\u9aa4\u8fdb\u884c\u6821\u9a8c\uff1a</p> <ul> <li>\u65f6\u95f4\u6821\u9a8c\uff1a\u5224\u65ad\u7cfb\u7edf\u5f53\u524d\u65f6\u95f4\u662f\u5426\u5728\u533a\u95f4[timestamp\uff0ctimestamp+\u6709\u6548\u65f6\u95f4]\u5185\u3002\u8d85\u51fa\u8be5\u533a\u95f4\uff0c\u8ba4\u4e3a\u8fc7\u671f\u5931\u6548\u5e76\u8fd4\u56deHTTP 403\u9519\u8bef\u3002</li> <li>\u52a0\u5bc6\u4e32\u6821\u9a8c\uff1a\u65f6\u95f4\u6821\u9a8c\u901a\u8fc7\u540e\uff0c\u6bd4\u5bf9CDN\u670d\u52a1\u5668\u8ba1\u7b97\u51fa\u6765\u7684md5hash\u503c\u4e0e\u8bbf\u95ee\u8bf7\u6c42\u4e2d\u5e26\u7684md5hash\u503c\u662f\u5426\u76f8\u540c\uff0c\u7ed3\u679c\u4e00\u81f4\u5219\u8ba4\u4e3a\u9274\u6743\u901a\u8fc7\u5e76\u8fd4\u56de\u6587\u4ef6\uff0c\u5426\u5219\u9274\u6743\u5931\u8d25\u8fd4\u56deHTTP 403\u9519\u8bef\u3002</li> </ul> <p>\u63d0\u4ea4\u5de5\u5355\u65f6\u8bf7\u9644\u5e26\u5982\u4e0b\u4fe1\u606f\uff1a</p> <ul> <li>\u53c2\u6570    \u8bf4\u660e</li> <li>\u52a0\u5bc6key \u8bbe\u5b9a\u7684\u9274\u6743\u5bc6\u94a5\u3002</li> <li>\u9274\u6743URL\u6709\u6548\u65f6\u957f \u5224\u65ad\u65f6\u95f4\u6233\u662f\u5426\u8fc7\u671f\u3002</li> <li>\u52a0\u5bc6\u5143\u7d20\u5206\u9694\u7b26   \u9ed8\u8ba4\u65e0\u7b26\u53f7\uff0c\u4e5f\u53ef\u81ea\u5b9a\u4e49\u3002</li> </ul> <p>Auth type C:</p> <p>\u9274\u6743\u65b9\u5f0fC\u8bbf\u95eeURL\u6784\u6210\uff1ahttp://DomainName/FileName?auth_key=md5hash&amp;timestamp=timestamp\u3002</p> <p>CDN\u670d\u52a1\u5668\u62ff\u5230\u8bf7\u6c42\u540e\uff0c\u4f1a\u6309\u7167\u5982\u4e0b\u6b65\u9aa4\u8fdb\u884c\u6821\u9a8c\uff1a</p> <ul> <li>\u662f\u5426\u643a\u5e26\u9274\u6743\u53c2\u6570\u3002\u5982\u679c\u6ca1\u6709\u643a\u5e26\u9274\u6743\u53c2\u6570\uff0c\u8ba4\u4e3a\u8bf7\u6c42\u975e\u6cd5\uff0c\u8fd4\u56deHTTP 403\u9519\u8bef\u3002 </li> <li>\u65f6\u95f4\u6821\u9a8c\uff1a\u5224\u65ad\u7cfb\u7edf\u5f53\u524d\u65f6\u95f4\u662f\u5426\u5728\u533a\u95f4[timestamp\uff0ctimestamp+\u6709\u6548\u65f6\u95f4]\u5185\u3002\u8d85\u51fa\u8be5\u533a\u95f4\uff0c\u8ba4\u4e3a\u8fc7\u671f\u5931\u6548\u5e76\u8fd4\u56deHTTP 403\u9519\u8bef\u3002 </li> <li>\u52a0\u5bc6\u4e32\u6821\u9a8c\uff1a\u65f6\u95f4\u6821\u9a8c\u901a\u8fc7\u540e\uff0c\u6bd4\u5bf9CDN\u670d\u52a1\u5668\u8ba1\u7b97\u51fa\u6765\u7684md5hash\u503c\u4e0e\u8bbf\u95ee\u8bf7\u6c42\u4e2d\u5e26\u7684md5hash\u503c\u662f\u5426\u76f8\u540c\uff0c\u7ed3\u679c\u4e00\u81f4\u5219\u8ba4\u4e3a\u9274\u6743\u901a\u8fc7\u5e76\u8fd4\u56de\u6587\u4ef6\uff0c\u5426\u5219\u9274\u6743\u5931\u8d25\u8fd4\u56deHTTP 403\u9519\u8bef\u3002</li> </ul> <p>\u63d0\u4ea4\u5de5\u5355\u65f6\u8bf7\u9644\u5e26\u5982\u4e0b\u4fe1\u606f\uff1a</p> <ul> <li>\u53c2\u6570    \u8bf4\u660e </li> <li>\u52a0\u5bc6\u53c2\u6570  \u9ed8\u8ba4\u4e3aauth_key\u8ddftimestamp\uff0c\u4e5f\u53ef\u81ea\u5b9a\u4e49\u3002 </li> <li>\u52a0\u5bc6key \u8bbe\u5b9a\u7684\u9274\u6743\u5bc6\u94a5\u3002 </li> <li>\u9274\u6743URL\u6709\u6548\u65f6\u957f \u5224\u65ad\u65f6\u95f4\u6233\u662f\u5426\u8fc7\u671f\u3002 </li> <li>\u52a0\u5bc6\u5143\u7d20\u5206\u9694\u7b26   \u9ed8\u8ba4\u65e0\u7b26\u53f7\uff0c\u4e5f\u53ef\u81ea\u5b9a\u4e49\u3002</li> </ul>"},{"location":"cloud/","title":"\u4ea7\u54c1\u7b80\u4ecb","text":""},{"location":"cloud/#_1","title":"\u53c8\u62cd\u4e91\u5904\u7406\u4ecb\u7ecd","text":"<p>\u53c8\u62cd\u4e91\u5904\u7406\uff0c\u57fa\u4e8e\u4e91\u50a8\u5b58\u548c CDN\uff0c\u9488\u5bf9\u591a\u5a92\u4f53\u6570\u636e\uff08\u56fe\u7247\u3001\u97f3\u89c6\u9891\uff09\u63d0\u4f9b\u56fe\u7247\u7f29\u653e\u3001\u56fe\u7247\u6c34\u5370\u3001\u56fe\u7247\u683c\u5f0f\u8f6c\u6362\u3001\u97f3\u89c6\u9891\u8f6c\u7801\u3001\u89c6\u9891\u6c34\u5370\u3001\u89c6\u9891\u5207\u7247\u7b49\u591a\u6837\u7075\u6d3b\u7684\u591a\u7ec8\u7aef\u3001\u591a\u89c4\u683c\u5185\u5bb9\u8f93\u51fa\u52a0\u5de5\u670d\u52a1\u3002</p>"},{"location":"cloud/#_2","title":"\u57fa\u672c\u6982\u5ff5","text":"<p>** \u670d\u52a1 **</p> <p>\u4e91\u5904\u7406\u670d\u52a1\u57fa\u4e8e\u4e91\u5b58\u50a8\u548c CDN \u670d\u52a1\uff0c\u901a\u8fc7\u4ece\u4e91\u5b58\u50a8\u6216\u7528\u6237\u6e90\u83b7\u53d6\u6587\u4ef6\uff0c\u5bf9\u6587\u4ef6\u8fdb\u884c\u52a0\u5de5\uff0c\u52a0\u5de5\u540e\u7684\u6587\u4ef6\u518d\u5b58\u50a8\u3002\u56e0\u6b64\uff0c\u521b\u5efa\u4e00\u4e2a\u4e91\u5b58\u50a8\u6216 CDN \u670d\u52a1\u65f6\uff0c\u81ea\u52a8\u521b\u5efa\u4e86\u4e00\u4e2a\u540c\u540d\u7684\u4e91\u5904\u7406\u670d\u52a1\u3002</p> <p>** \u64cd\u4f5c\u5458 **</p> <p>\u64cd\u4f5c\u5458\u662f\u60a8\u8bbf\u95ee\u4e91\u5b58\u50a8\u3001\u4e91\u5904\u7406\u7684\u51ed\u8bc1\uff0c\u5b83\u7531\u64cd\u4f5c\u5458\u540d\u79f0\u548c\u5bc6\u7801\u7ec4\u6210\uff0c\u64cd\u4f5c\u5458\u540d\u79f0\u7c7b\u4f3c\u8eab\u4efd\u6807\u8bc6\uff0c\u5bc6\u7801\u7684\u4f5c\u7528\u662f\u7b7e\u540d\u60a8\u7684\u8bbf\u95ee\u8bf7\u6c42\uff0c\u4ee5\u9632\u88ab\u7be1\u6539\u3002</p> <p>\u7279\u522b\u5730\uff0c\u64cd\u4f5c\u5458\u4e0e\u670d\u52a1\u540d\u662f N:N \u7684\u5173\u7cfb\uff0c\u4e00\u4e2a\u670d\u52a1\u540d\u53ef\u4ee5\u6709\u591a\u4e2a\u64cd\u4f5c\u5458\uff0c\u4e00\u4e2a\u64cd\u4f5c\u5458\u53ef\u4ee5\u5f52\u5c5e\u4e8e\u591a\u4e2a\u670d\u52a1\u540d\u3002</p> <p>** \u64cd\u4f5c\u5458\u6743\u9650 **</p> <p>\u64cd\u4f5c\u5458\u6743\u9650\u6709 3 \u79cd\uff0c\u5206\u522b\u662f\u53ef\u8bfb\u53d6\u3001\u53ef\u5199\u5165\u3001\u53ef\u5220\u9664\uff0c\u652f\u6301\u591a\u9009\u3002\u60a8\u53ef\u4ee5\u6839\u636e\u9700\u8981\uff0c\u4e3a\u64cd\u4f5c\u5458\u914d\u7f6e\u5408\u9002\u7684\u6743\u9650\uff1b\u4e5f\u53ef\u4ee5\u521b\u5efa\u591a\u4e2a\u64cd\u4f5c\u5458\uff0c\u4e3a\u4e0d\u540c\u64cd\u4f5c\u5458\u5206\u914d\u4e0d\u540c\u6743\u9650\uff0c\u4f9b\u4e0d\u540c\u7ea7\u522b\u7684\u4eba\u4f7f\u7528\u3002</p> <p>** \u8bbf\u95ee\u670d\u52a1 **</p> <p>\u501f\u52a9\u670d\u52a1\u540d\u79f0\u3001\u64cd\u4f5c\u5458\uff0c\u53ef\u4ee5\u901a\u8fc7 API/SDK \u8bbf\u95ee\u4e91\u5904\u7406\uff0c\u7ba1\u7406\u60a8\u5728\u4e91\u5904\u7406\u7684\u670d\u52a1\u3002</p>"},{"location":"cloud/#_3","title":"\u57fa\u7840\u67b6\u6784","text":""},{"location":"cloud/#_4","title":"\u4ea7\u54c1\u529f\u80fd","text":"<p>** \u56fe\u7247\u5904\u7406 **</p> <p>\u652f\u6301\u56fe\u7247\u7f29\u5c0f\u3001\u653e\u5927\u3001\u88c1\u526a\u3001\u6c34\u5370\u3001\u65cb\u8f6c\u3001\u683c\u5f0f\u8f6c\u6362\u3001\u9510\u5316\u3001\u9ad8\u65af\u6a21\u7cca\u3001\u8d28\u91cf\u8bbe\u7f6e\uff0c\u652f\u6301\u7ed9\u56fe\u7247\u6dfb\u52a0\u8fb9\u6846\u3001\u753b\u5e03\u3001\u6e10\u53d8\u56fe\u5c42\u3002</p> <p>\u652f\u6301\u56fe\u7247 metadata \u83b7\u53d6\uff08\u5305\u62ec\u57fa\u672c\u4fe1\u606f\u3001Exif\u3001IPTC\uff09\u3001\u4e3b\u9898\u8272\u63d0\u53d6\uff0c\u652f\u6301\u56fe\u7247\u5927\u5c0f\u538b\u7f29\u4f18\u5316\u3001JPG \u56fe\u6e10\u8fdb\u5f0f\u8f7d\u5165\u3001\u591a\u5e27 GIF \u8f6c\u5355\u5e27 GIF\u3002</p> <p>\u652f\u6301\u56fe\u7247 ICC \u4fe1\u606f\u53bb\u9664\u3001metadata \u53bb\u9664\u3002</p> <p>** \u97f3\u89c6\u9891\u5904\u7406 **</p> <p>\u652f\u6301\u89c6\u9891\u8f6c\u7801\u3001\u5207\u7247\u3001\u6c34\u5370\u3001\u622a\u56fe\u3001\u526a\u8f91\u3001\u62fc\u63a5\uff0c\u652f\u6301\u97f3\u9891\u8f6c\u7801\u3001\u526a\u8f91\u3001\u62fc\u63a5\u3002</p> <p>\u652f\u6301\u97f3/\u89c6\u9891 metadata \u83b7\u53d6\u3002</p> <p>** \u538b\u7f29\u89e3\u538b\u7f29 **</p> <p>\u652f\u6301\u6587\u4ef6\u538b\u7f29\uff0c\u652f\u6301\u538b\u7f29\u6587\u4ef6\u89e3\u538b\u7f29\u3002</p> <p>** \u6587\u4ef6\u62c9\u53d6 **</p> <p>\u652f\u6301\u4ece\u7b2c\u4e09\u65b9\u5e73\u53f0\u83b7\u53d6\u6587\u4ef6\u3002</p>"},{"location":"cloud/#_5","title":"\u5e94\u7528\u573a\u666f","text":"<p>** \u7535\u5546\u3001\u56fe\u7ad9\u7b49\u5927\u91cf\u56fe\u7247\u5904\u7406 **</p> <p></p> <p>** \u89c6\u9891\u3001\u5e7f\u7535\u3001\u7efc\u827a\u3001\u7535\u53f0\u7b49\u5927\u91cf\u97f3/\u89c6\u9891\u5904\u7406 **</p> <p></p> <p>** \u5927\u91cf\u56fe\u7247\u3001\u5e94\u7528\u66f4\u65b0\u5305\u7b49\u4e0a\u4f20\u89e3\u538b\u7f29\u6216\u538b\u7f29\u4e0b\u8f7d **</p> <p></p>"},{"location":"cloud/#_6","title":"\u4ea7\u54c1\u4f18\u52bf","text":"<p>** \u7a33\u5b9a\u3001\u53ef\u9760 **</p> <p>\u6bcf\u5929\u8d85 9 \u5343\u4e07\u6b21\u7684\u4f5c\u56fe\u548c\u97f3\u89c6\u9891\u5904\u7406\u8bf7\u6c42\uff0c\u670d\u52a1\u53ef\u9760\u6027\u8fbe 99.9999% \uff0c\u63d0\u4f9b\u7a33\u5b9a\u3001\u53ef\u9760\u7684\u4e91\u5904\u7406\u529f\u80fd\u3002</p> <p>** \u529f\u80fd\u4e30\u5bcc **</p> <p>\u652f\u6301\u56fe\u7247\u7f29\u653e\u3001\u6c34\u5370\u3001\u65cb\u8f6c\u3001\u88c1\u526a\u4ee5\u53ca\u97f3\u89c6\u9891\u8f6c\u7801\u7387\u3001\u8f6c\u683c\u5f0f\u3001\u5207\u7247\u7b49\uff0c\u8f7b\u677e\u6ee1\u8db3\u6240\u6709\u5e38\u7528\u5185\u5bb9\u52a0\u5de5\u9700\u6c42\u3002</p> <p>** \u6613\u4e8e\u4f7f\u7528 **</p> <p>\u5206\u522b\u63d0\u4f9b\u9488\u5bf9\u8bbf\u95ee\u548c\u4e0a\u4f20\u573a\u666f\u4f5c\u56fe\u9700\u6c42\u7684\u5904\u7406\u65b9\u5f0f\uff0c\u5c06\u539f\u56fe\u8fdb\u884c\u591a\u89c4\u683c\u8f93\u51fa\uff0c\u4fbf\u4e8e\u5728\u4e0d\u540c\u573a\u666f\u4e0b\u7075\u6d3b\u5e94\u7528\u3002</p> <p>** SDK \u96c6\u6210 **</p> <p>\u63d0\u4f9b iOS/Android \u64ad\u653e\u5668 SDK\uff0c\u53ef\u5feb\u901f\u5f00\u53d1\u97f3\u89c6\u9891\u64ad\u653e\u79fb\u52a8\u7aef\u5e94\u7528\uff0c\u5b9e\u73b0\u56fe\u7247\u89c6\u9891\u5408\u6210\u53ca\u64ad\u653e\u3002</p> <p>** \u7ecf\u6d4e\u5b9e\u60e0 **</p> <p>\u514d\u8d39\u7684\u56fe\u7247\u5904\u7406\uff0c\u6309\u9700\u4ed8\u8d39\u7684\u97f3\u89c6\u9891\u5904\u7406\uff0c\u4e0e\u4f20\u7edf\u8d2d\u7f6e\u786c\u4ef6\u76f8\u6bd4\uff0c\u6781\u5927\u7684\u964d\u4f4e\u4e86\u6210\u672c\u3002</p> <p>** \u5b8c\u7f8e\u7ed3\u5408 **</p> <p>\u4e13\u4e3a\u914d\u5408\u5b58\u50a8\u4e0e CDN \u4f7f\u7528\u800c\u8bbe\u8ba1\uff0c\u4e3a\u591a\u79cd\u5e94\u7528\u573a\u666f\u63d0\u4f9b\u5b8c\u6574\u7684\u5b58\u50a8\u3001\u56fe\u7247\u97f3\u89c6\u9891\u5904\u7406\u548c\u52a0\u901f\u5206\u53d1\u89e3\u51b3\u65b9\u6848\u3002</p>"},{"location":"cloud/#_7","title":"\u6587\u6848\u7ea6\u5b9a","text":"<p>\u5728\u60a8\u9605\u8bfb\u6587\u6863\u4e4b\u524d\uff0c\u8bf7\u5148\u719f\u6089\u6211\u4eec\u7684\u4e00\u4e9b\u7ea6\u5b9a\uff0c\u4ee5\u4fbf\u60a8\u7684\u7406\u89e3\u3002</p> <p>** \u66ff\u4ee3\u5b57\u7b26 ** \u6240\u6709\u7528\u5c16\u62ec\u53f7 <code>&lt;&gt;</code> \u5305\u56f4\u7684\u5b57\u7b26\uff0c\u5747\u4e3a\u9700\u8981\u6839\u636e\u5b9e\u9645\u60c5\u51b5\u505a\u66ff\u6362\u7684\u5730\u65b9\uff0c\u7279\u522b\u7684\uff0c<code>&lt;&gt;</code> \u4ec5\u4f5c\u4e3a\u6587\u6863\u4e2d\u5c06\u5176\u533a\u5206\u4e8e\u5176\u4ed6\u5b57\u7b26\uff0c\u60a8\u5728\u5b9e\u9645\u4f7f\u7528\u7684\u65f6\u5019\uff0c\u4e0d\u9700\u8981\u52a0\u4e0a <code>&lt;&gt;</code>\u3002</p> <p>\u5982\u6709\u7591\u95ee\u8bf7 \u8054\u7cfb\u6211\u4eec</p>"},{"location":"cloud/async_image/","title":"\u5f02\u6b65\u56fe\u7247\u62fc\u63a5","text":""},{"location":"cloud/async_image/#_1","title":"\u5feb\u901f\u5165\u95e8","text":"<p>\u53c8\u62cd\u4e91\u5904\u7406\uff08\u5f02\u6b65\u56fe\u7247\u62fc\u63a5\uff09\u57fa\u4e8e\u4e91\u5b58\u50a8\u670d\u52a1\uff0c\u60a8\u5728\u4f7f\u7528\u5b83\u4e4b\u524d\uff0c\u8bf7\u786e\u4fdd\u60a8\u5df2\u7ecf\u6ce8\u518c\u53c8\u62cd\u4e91\u8d26\u53f7\u5e76\u5b8c\u6210\u5b9e\u540d\u9a8c\u8bc1\uff0c\u8bf7\u786e\u4fdd\u60a8\u5df2\u7ecf\u521b\u5efa\u4e91\u5b58\u50a8\u670d\u52a1\u3002</p> <p>\u4ef7\u683c\u65b9\u9762\uff0c\u514d\u8d39\u3002</p>"},{"location":"cloud/async_image/#_2","title":"\u5f00\u53d1\u8005\u6307\u5357","text":"<p>\u56fe\u7247\u62fc\u63a5\u662f\u628a\u4e91\u5b58\u50a8\u4e2d\u7684\u591a\u5f20\u56fe\u7247\u62fc\u63a5\u5728\u4e00\u8d77\uff0c\u62fc\u63a5\u65b9\u5f0f\u591a\u79cd\u591a\u6837\u3002</p> <p></p>"},{"location":"cloud/async_image/#_3","title":"\u4e91\u5b58\u50a8\u4e2d\u7684\u56fe\u7247\u62fc\u63a5","text":"<p>** \u8bf7\u6c42\u65b9\u6cd5 **</p> <p>\u5bf9\u5df2\u7ecf\u5b58\u5728\u4e91\u5b58\u50a8\u4e2d\u7684\u56fe\u7247\uff0c\u4ee5 <code>POST</code> \u65b9\u6cd5\u5411 <code>http://p0.api.upyun.com/pretreatment/</code> \u63d0\u4ea4\u5904\u7406\u4efb\u52a1\uff0c\u54cd\u5e94\u4e2d\u8fd4\u56de\u4efb\u52a1 <code>task_id</code>\u3002\u4efb\u52a1\u4ee5\u5f02\u6b65\u7684\u65b9\u5f0f\u5904\u7406\uff0c\u5904\u7406\u5b8c\u6210\u540e\uff0c\u56de\u8c03\u901a\u77e5\u7528\u6237\u5904\u7406\u7ed3\u679c\u3002</p> <pre><code>curl -X POST \\\n    http://p0.api.upyun.com/pretreatment/ \\\n    -H \"Authorization: UPYUN &lt;Operator&gt;:&lt;Signature&gt;\" \\\n    -H \"Date: &lt;Wed, 29 Oct 2014 02:26:58 GMT&gt;\" \\\n    -H \"Content-MD5: &lt;Content-MD5&gt;\" \\\n    -d \"service=&lt;service&gt;\" \\\n    -d \"notify_url=&lt;notify_url&gt;\" \\\n    -d \"app_name=jigsaw\" \\\n    -d \"tasks=&lt;base64 \u7f16\u7801\u540e\u7684\u4efb\u52a1\u5b57\u7b26\u4e32&gt;\"\n</code></pre> <p>** \u8ba4\u8bc1\u9274\u6743 **</p> <p><code>Authorization</code> \u8be6\u89c1\u7b7e\u540d\u8ba4\u8bc1\u3002</p> <p>** \u8bf7\u6c42\u53c2\u6570 **</p> \u53c2\u6570 \u7c7b\u578b \u5fc5\u9009 \u8bf4\u660e service string \u662f \u56fe\u7247\u6240\u5728\u7684\u670d\u52a1\u540d notify_url string \u662f \u56de\u8c03\u901a\u77e5\u5730\u5740\uff0c\u8be6\u89c1\u56de\u8c03\u901a\u77e5 tasks string \u662f \u4efb\u52a1\u4fe1\u606f\uff0c\u8be6\u89c1 tasks \u53c2\u6570\u8bf4\u660e app_name string \u662f \u5904\u7406\u529f\u80fd\uff0c<code>jigsaw</code> \u8868\u793a\u56fe\u7247\u62fc\u63a5 <p> ** tasks \u53c2\u6570\u8bf4\u660e **</p> <p>1. \u6309 JSON \u683c\u5f0f\u7ec4\u88c5\u4efb\u52a1\uff0c\u4e00\u6b21\u8bf7\u6c42 <code>tasks</code> \u6700\u591a\u53ef\u4ee5\u63d0\u4ea4 10 \u4e2a\u4efb\u52a1\u3002 \u4efb\u52a1\u53c2\u6570\u89c1\u529f\u80fd \u3002</p> <pre><code>[\n    {\n        \"image_matrix\": [                       // \u9700\u8981\u62fc\u63a5\u7684\u56fe\u7247\u8def\u5f84\u548c\u62fc\u63a5\u65b9\u5f0f\n            [\"/image/top.jpg\"],\n            [\"/image/bottom.jpg\"]\n        ],\n        \"x-gmkerl-thumb\": \"/format/jpg\",        // \u5176\u4ed6\u7684\u56fe\u7247\u5904\u7406\u529f\u80fd\n        \"save_as\": \"/jigsaw/case1.jpg\"      // \u62fc\u63a5\u540e\u56fe\u7247\u7684\u4fdd\u5b58\u8def\u5f84\n    },\n    \u2026\n]\n</code></pre> <p>2. \u628a JSON \u5b57\u7b26\u4e32 Base64 \u7f16\u7801\uff0c\u5f97\u5230 <code>tasks</code>\u3002</p> <p>** \u54cd\u5e94\u4fe1\u606f **</p> <ul> <li>\u4efb\u52a1\u63d0\u4ea4\u6210\u529f\uff1a\u8fd4\u56de <code>200</code>\uff0c\u54cd\u5e94\u4f53\u662f\u4e00\u7ec4\u6309\u4efb\u52a1\u63d0\u4ea4\u5148\u540e\u987a\u5e8f\u6392\u5e8f\u7684 <code>task_id</code>\u3002\u4f8b\u5982\uff1a</li> </ul> <pre><code>[\n    \"35f0148d414a688a275bf915ba7cebb2\",\n    \"98adbaa52b2f63d6d7f327a0ff223348\",\n    \"c3103189fa906a5354d29bd807e8dc51\",\n    \u2026\n]\n</code></pre> <ul> <li>\u4efb\u52a1\u63d0\u4ea4\u5931\u8d25\uff1a\u8fd4\u56de\u76f8\u5e94\u7684\u51fa\u9519\u4fe1\u606f\uff0c\u5177\u4f53\u8bf7\u53c2\u9605\u300c\u72b6\u6001\u7801\u8868\u300d\u3002</li> </ul> <p></p>"},{"location":"cloud/async_image/#_4","title":"\u56de\u8c03\u901a\u77e5","text":"<p>\u4efb\u52a1\u5904\u7406\u5b8c\u6210\u540e\uff0c\u5411 <code>notify_url</code> \u53d1\u9001 <code>HTTP POST</code> \u8bf7\u6c42\uff0c\u8bf7\u6c42\u4f53\u662f\u56de\u8c03\u4fe1\u606f\u3002</p> <pre><code>curl -X POST \\\n    &lt;notify_url&gt; \\\n    -H \"Authorization: UPYUN &lt;Operator&gt;:&lt;Signature&gt;\" \\\n    -H \"Date: &lt;Wed, 29 Oct 2014 02:26:58 GMT&gt;\" \\\n    -H \"Content-MD5: &lt;Content-MD5&gt;\" \\\n    -d \"service=&lt;service&gt;\" \\\n    # \u5176\u4ed6\u53c2\u6570...\n</code></pre> <p>** \u56de\u8c03\u4fe1\u606f **</p> <p>\u56de\u8c03\u4fe1\u606f\u662f JSON \u5b57\u7b26\u4e32\uff0c\u53c2\u6570\u540d\u53ca\u8bf4\u660e\u5982\u4e0b\uff1a</p> \u53c2\u6570 \u7c7b\u578b \u8bf4\u660e task_id string \u4efb\u52a1 ID service string \u56fe\u7247\u6240\u5728\u7684\u670d\u52a1\u540d status_code integer \u5904\u7406\u7ed3\u679c\u72b6\u6001\u7801\uff0c<code>200</code> \u8868\u793a\u6210\u529f\u5904\u7406 path string \u56fe\u7247\u4fdd\u5b58\u8def\u5f84 error string \u9519\u8bef\u4fe1\u606f\uff0c\u7a7a\u5b57\u7b26\u4e32\u8868\u793a\u65e0\u9519\u8bef\u4fe1\u606f <p>** \u56de\u8c03\u7b7e\u540d **</p> <p><code>Authorization</code> \u8be6\u89c1\u7b7e\u540d\u8ba4\u8bc1\u3002</p> <p></p>"},{"location":"cloud/async_image/#_5","title":"\u72b6\u6001\u7801\u8868","text":"\u72b6\u6001\u7801 \u8bf4\u660e 200 \u5904\u7406\u6210\u529f 400 \u65e0\u6548\u4efb\u52a1 5xx \u670d\u52a1\u7aef\u9519\u8bef\u3002\u5982\u9047\u6b64\u7c7b\u9519\u8bef\uff0c\u8bf7\u53cd\u9988\u7ed9\u552e\u540e\u6216\u60a8\u7684\u5546\u52a1\u7ecf\u7406"},{"location":"cloud/async_image/#_6","title":"\u529f\u80fd","text":""},{"location":"cloud/async_image/#jigsaw","title":"\u56fe\u7247\u62fc\u63a5\uff08jigsaw\uff09","text":"\u53c2\u6570 \u7c7b\u578b \u5fc5\u9009 \u8bf4\u660e image_matrix [][]string \u662f \u9700\u8981\u62fc\u63a5\u7684\u56fe\u7247\u8def\u5f84\u548c\u62fc\u63a5\u65b9\u5f0f save_as string \u662f \u62fc\u63a5\u540e\u56fe\u7247\u7684\u4fdd\u5b58\u8def\u5f84 x-gmkerl-thumb string \u5426 \u5bf9\u62fc\u63a5\u540e\u7684\u56fe\u7247\u8fdb\u884c\u56fe\u7247\u5904\u7406 <p>** \u8bf4\u660e **</p> <ul> <li><code>image_matrix</code> \u662f\u4e2a\u4e8c\u7ef4\u6570\u7ec4\uff0c\u56fe\u7247\u62fc\u63a5\u7684\u65b9\u5f0f\u6839\u636e\u4e8c\u7ef4\u6570\u7ec4\u6765\uff0c\u7b2c\u4e00\u7ef4\u6570\u7ec4\uff0c\u8868\u793a\u884c\uff0c\u7b2c\u4e8c\u7ef4\u6570\u7ec4\uff0c\u8868\u793a\u5217\uff0c\u5408\u8d77\u6765\u5c31\u662f\u6309\u884c\u3001\u6309\u5217\u62fc\u63a5\u3002\u5177\u4f53\u6309\u884c\uff08\u586b\u7b2c\u4e00\u7ef4\u6570\u7ec4\uff0c\u7b2c\u4e8c\u7ef4\u4e3a\u7a7a\uff09\uff0c\u6309\u5217\uff08\u586b\u7b2c\u4e8c\u7ef4\u6570\u7ec4\uff0c\u7b2c\u4e00\u7ef4\u4e3a\u7a7a\uff09\uff0c\u6309\u884c\u5217\u62fc\u63a5\uff0c\u6839\u636e\u9700\u6c42\u51b3\u5b9a\u3002</li> <li>\u56fe\u7247\u62fc\u63a5\u6700\u591a\u5141\u8bb8 10 \u5f20\u56fe\u7247\uff0c\u5373 <code>image_matrix</code> \u6700\u591a\u5141\u8bb8 10 \u4e2a URI\u3002</li> <li>\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u62fc\u63a5\u4ea7\u751f\u7684\u56fe\u7247\u683c\u5f0f\u4e3a PNG \u683c\u5f0f\uff0c\u5982\u679c\u9700\u8981\u8c03\u6574\u56fe\u7247\u683c\u5f0f\uff0c\u53ef\u901a\u8fc7\u8bbe\u7f6e <code>x-gmkerkl-thumb</code> \u505a\u683c\u5f0f\u8f6c\u6362\u3002</li> </ul> <p>\u5982\u6709\u7591\u95ee\u8bf7 \u8054\u7cfb\u6211\u4eec</p>"},{"location":"cloud/attachment/","title":"Attachment","text":""},{"location":"cloud/attachment/#_1","title":"\u89c6\u9891\u8f6c\u7801\u9884\u7f6e\u6a21\u677f","text":"<p>\u5b58\u5728\u591a\u79cd\u5bbd\u9ad8\u6bd4\u65f6\uff0c\u5efa\u8bae\u9009\u62e9 16:9 \u7684\u5bbd\u9ad8\u6bd4\u3002\u7279\u522b\u5730\uff0c\u53c8\u62cd\u4e91\u652f\u6301 4K \u89c6\u9891\u6587\u4ef6\u3002</p> \u6e05\u6670\u5ea6 \u540d\u79f0 \u5206\u8fa8\u7387 \u7801\u7387 \u5168\u9ad8\u6e05 1080p(16:9) 1920x1080,16:9 2560Kbps \u9ad8\u6e05 720p(16:9) 1280x720,16:9 1152kbps \u9ad8\u6e05 720p(4:3) 960x720,4:3 1152kbps \u6807\u6e05 540p(16:9) 960x540,16:9 768kbps \u6807\u6e05 480p(16:9) 854x480,16:9 512kbps \u6807\u6e05 480p(4:3) 640x480,4:3 512kbps \u6807\u6e05 480p(3:2) 720x480,3:2 512kbps \u6d41\u7545\uff08\u4f4e\u6e05\uff09 360p(16:9) 640x360,16:9 384kbps \u6d41\u7545\uff08\u4f4e\u6e05\uff09 360p(4:3) 480x360,4:3 384kbps \u6d41\u7545\uff08\u4f4e\u6e05\uff09 240p(4:3) 320x240,4:3 256kbps"},{"location":"cloud/attachment/#_2","title":"\u97f3\u89c6\u9891\u5904\u7406\u652f\u6301\u683c\u5f0f","text":"\u7c7b\u578b \u8f93\u5165\u683c\u5f0f \u8f93\u51fa\u683c\u5f0f \u89c6\u9891\u5bb9\u5668\u683c\u5f0f AVI\u3001MP4\u3001FLV\u3001MOV\u30013GP\u3001ASF\u3001WMV\u3001MPG\u3001F4V\u3001M4V\u3001MKV\u3001VOB\uff08SVCD/DVD\uff09\u7b49 MP4\u3001FLV\u3001M3U8(TS) \u7b49 \u97f3\u9891\u5bb9\u5668\u683c\u5f0f MP3\u3001OGG\u3001M4A \u7b49 MP4\u3001MP3\u3001OGG \u7b49 \u89c6\u9891\u7f16\u7801\u683c\u5f0f H.264/AVC \u3001H.263\u3001H.263+\u3001MPEG-1\u3001MPEG-2\u3001MPEG-4\u3001VP8\u3001VP9\u3001Quicktime\u3001RealVideo\u3001Windows Media Video \u7b49 H.264/AVC\u3001VP8\u3001H.265/HEVC\u3001VP9 \u7b49 \u97f3\u9891\u7f16\u7801\u683c\u5f0f MP1\u3001MP2\u3001MP3\u3001AAC\u3001AC-3\u3001Vorbis\u3001PCM\u3001RealAudio\u3001Windows Media Audio \u7b49 AAC\u3001MP3 \u7b49 <p>\u66f4\u591a\u7684\u652f\u6301\u683c\u5f0f\u8bf7\u53c2\u8003 ffmpeg \u652f\u6301\u683c\u5f0f\u5217\u8868\u3002</p>"},{"location":"cloud/attachment/#_3","title":"\u5b57\u4f53\u652f\u6301\u5217\u8868","text":"<p>\u4f7f\u7528\u5b57\u4f53\u65f6\uff0c\u8bf7\u4f7f\u7528\u53c2\u6570\u540d\u3002\u542b\u4e2d\u6587\u5185\u5bb9\u65f6\u8bf7\u6307\u5b9a\u4e2d\u6587\u5b57\u4f53\u3002</p> \u540d\u79f0 \u7c7b\u578b \u53c2\u6570\u540d \u5b8b\u4f53 \u4e2d\u6587\u5b57\u4f53 simsun \u9ed1\u4f53 \u4e2d\u6587\u5b57\u4f53 simhei \u6977\u4f53 \u4e2d\u6587\u5b57\u4f53 simkai \u96b6\u4e66 \u4e2d\u6587\u5b57\u4f53 simli \u5e7c\u5706 \u4e2d\u6587\u5b57\u4f53 simyou \u4eff\u5b8b \u4e2d\u6587\u5b57\u4f53 simfang \u7b80\u4f53\u4e2d\u6587 \u4e2d\u6587\u5b57\u4f53 sc \u7e41\u4f53\u4e2d\u6587 \u4e2d\u6587\u5b57\u4f53 tc Arial \u82f1\u6587\u5b57\u4f53 arial Georgia \u82f1\u6587\u5b57\u4f53 georgia Helvetica \u82f1\u6587\u5b57\u4f53 helvetica Times-New-Roman \u82f1\u6587\u5b57\u4f53 roman"},{"location":"cloud/attachment/#_4","title":"\u8fd4\u56de\u72b6\u6001\u7801","text":""},{"location":"cloud/attachment/#_5","title":"\u56fe\u7247\u5904\u7406","text":"\u72b6\u6001\u7801 \u8bf4\u660e 200 \u5904\u7406\u6210\u529f 400 \u53c2\u6570\u9519\u8bef\uff0c\u8fd4\u56de JSON \u4e2d\u5305\u542b\u5177\u4f53\u9519\u8bef\u4fe1\u606f 404 \u6307\u5b9a Profile \u4fe1\u606f\u4e0d\u5b58\uff0cNot Profile 405 \u56fe\u7247\u6570\u636e\u65e0\u6548\uff0cNot an image 405 \u56fe\u7247\u5bbd\u9ad8\u8d85\u51fa\u9650\u5236\uff0cImage Width/Height Limit Error 406 \u975e\u56fe\u7247\u83b7\u53d6\u56fe\u7247\u57fa\u672c\u4fe1\u606f\u65f6\u6570\u636e\u65e0\u6548\uff0cNot an image 409 \u56fe\u7247\u5927\u5c0f\u8d85\u51fa\u9650\u5236\uff0c\u9650\u5236\u4e3a 2 \u4ebf\u50cf\u7d20\uff0cLimit Exceeded 413 \u8bf7\u6c42\u5904\u7406\u8d85\u65f6\uff0cA Big Image! <p>\u66f4\u591a\u7684\u9519\u8bef\u7801\uff0c\u8bf7 \u70b9\u6b64\u67e5\u770b</p>"},{"location":"cloud/attachment/#_6","title":"\u5f02\u6b65\u97f3\u89c6\u9891\u5904\u7406","text":"\u72b6\u6001\u7801 \u8bf4\u660e 200 \u5904\u7406\u6210\u529f 400 \u53c2\u6570\u9519\u8bef 401 \u53c2\u6570\u9519\u8bef 404 \u6587\u4ef6\u4e0d\u5b58\u5728 501 \u51c6\u5907\u5904\u7406\u73af\u5883\u65f6\u51fa\u9519 502 \u5904\u7406\u9519\u8bef 503 \u5b58\u50a8\u5904\u7406\u7ed3\u679c\u65f6\u9519\u8bef <p>\u66f4\u591a\u7684\u9519\u8bef\u7801\uff0c\u8bf7 \u70b9\u6b64\u67e5\u770b</p>"},{"location":"cloud/attachment/#_7","title":"\u5b9e\u65f6\u97f3\u9891\u5904\u7406","text":"\u72b6\u6001\u7801 \u8bf4\u660e 200 \u5904\u7406\u6210\u529f 403 \u8f6c\u7801\u5931\u8d25\uff0cConvert Failed 405 \u53c2\u6570\u5931\u8d25\uff0cParameter Error 413 \u8f6c\u7801\u8d85\u65f6\uff0cConvert Timeout <p>\u66f4\u591a\u7684\u9519\u8bef\u7801\uff0c\u8bf7 \u70b9\u6b64\u67e5\u770b</p>"},{"location":"cloud/authorization/","title":"\u8ba4\u8bc1\u9274\u6743","text":""},{"location":"cloud/authorization/#_1","title":"\u7b7e\u540d\u8ba4\u8bc1","text":"<p>** \u7b7e\u540d\u8ba1\u7b97\u65b9\u6cd5 **</p> <pre><code>Authorization: UPYUN &lt;Operator&gt;:&lt;Signature&gt;\n\n&lt;Signature&gt; = Base64 (HMAC-SHA1 (&lt;Password&gt;,\n&lt;Method&gt;&amp;\n&lt;URI&gt;&amp;\n&lt;Date&gt;&amp;\n&lt;Content-MD5&gt;\n))\n</code></pre> <p>\u76f8\u5173\u53c2\u6570\u8bf4\u660e\uff1a</p> \u53c2\u6570 \u5fc5\u9009 \u8bf4\u660e Operator \u662f \u670d\u52a1\u7684\u64cd\u4f5c\u5458\u540d\u79f0 Method \u662f \u8bf7\u6c42\u65b9\u5f0f\uff0c\u5982\uff1aGET\u3001POST\u3001PUT\u3001HEAD \u7b49 URI \u662f \u8bf7\u6c42\u8def\u5f84 Date \u662f \u8bf7\u6c42\u65e5\u671f\u65f6\u95f4\uff0cGMT \u683c\u5f0f\u5b57\u7b26\u4e32 (RFC 1123)\uff0c\u5982 <code>Wed, 29 Oct 2014 02:26:58 GMT</code> Content-MD5 \u5426 \u8bf7\u6c42\u4f53\u7684 MD5 \u6821\u9a8c\u503c\uff0c\u5982\u679c\u8bf7\u6c42\u4f53\u4e3a\u7a7a\uff0c\u53ef\u4ee5\u4e3a\u7a7a Password \u662f \u670d\u52a1\u7684\u64cd\u4f5c\u5458\u5bc6\u7801\u7684 MD5 \u503c <p>** \u6ce8 **</p> <ul> <li>\u975e\u5fc5\u9009\u53c2\u6570\u4e3a\u7a7a\u65f6\uff0c\u8fde\u540c\u524d\u9762\u7684 <code>&amp;</code> \u4e00\u8d77\u4e0d\u53c2\u4e0e\u7b7e\u540d\u8ba1\u7b97\u3002\u6240\u6709\u8ba1\u7b97\u7684 MD5 \u503c\uff0c\u683c\u5f0f\u5747\u662f 32 \u4f4d\u5c0f\u5199\u3002</li> <li>HMAC-SHA1 \u8f93\u51fa\u7684\u5fc5\u987b\u662f\u539f\u751f\u7684\u4e8c\u8fdb\u5236\u6570\u636e\u3002</li> <li>\u8bf7\u6c42\u7b7e\u540d\u6709\u6548\u671f\u4e3a 30 \u5206\u949f\uff0c\u5982\u679c\u7b7e\u540d\u8d85\u8fc7\u6709\u6548\u671f\uff0c\u9700\u8981\u91cd\u65b0\u751f\u6210\u7b7e\u540d\u3002</li> <li>\u56de\u8c03\u7b7e\u540d\u6709\u6548\u671f\u7531\u7528\u6237\u81ea\u884c\u786e\u5b9a\uff0c\u5efa\u8bae\u8bbe\u7f6e\u4e3a 30 \u5206\u949f\u3002</li> </ul> <p>** \u4e3e\u4f8b **</p> <p>\u53c2\u6570\u4fe1\u606f\uff1a</p> <pre><code>// \u64cd\u4f5c\u5458\u4fe1\u606f\nOperator = operator123          \nPassword = MD5(password123) = 482c811da5d5b4bc6d497ffa98491e38\n\n// \u53c2\u6570\nMethod = POST                           \nURI = /pretreatment/\nDate = Wed, 09 Nov 2016 14:26:58 GMT\nContent-MD5 = MD5(service=upyun-temp&amp;notify_url=/upyun_notify_url&amp;source=/tmp.mp4&amp;tasks=W3siYXZvcHRzIjoiL3MvMjQwcCg0OjMpL2FzLzEvci8zMCIsInJldHVybl9pbmZvIjp0cnVlLCJzYXZlX2FzIjoiL2EvYi5tcDQiLCJ0eXBlIjoidmlkZW8ifSx7ImF2b3B0cyI6Ii9pL0wyRXZZaTlqTG0xd05BPT0vaS9MekV2TWk4ekxtMXdOQT09Iiwic2F2ZV9hcyI6Ii9jb25jYXQvYS5tcDQiLCJ0eXBlIjoidmNvbmNhdCJ9XQ==&amp;accept=json)\n            = a2d75510f7ec654cc24cfa2b5a5a8182\n</code></pre> <p>\u751f\u6210 Signature\uff1a</p> <pre><code>Signature = Base64 (HMAC-SHA1 (&lt;Password&gt;,\n&lt;Method&gt;&amp;\n&lt;URI&gt;&amp;\n&lt;Date&gt;&amp;\n&lt;Content-MD5&gt;\n))\n// \u5185\u5bb9\u62fc\u63a5\u65f6\uff0c\u4e0d\u7528\u6362\u884c\u6216\u7a7a\u683c\uff0c\u4e0a\u9762\u683c\u5f0f\u7684\u6362\u884c\u6216\u7a7a\u683c\u662f\u4e3a\u4e86\u65b9\u4fbf\u9605\u8bfb\n= Base64 (HMAC-SHA1 (482c811da5d5b4bc6d497ffa98491e38,POST&amp;/pretreatment/&amp;Wed, 09 Nov 2016 14:26:58 GMT&amp;a2d75510f7ec654cc24cfa2b5a5a8182))\n// HMAC-SHA1 \u8fd4\u56de\u7684\u539f\u751f\u4e8c\u8fdb\u5236\u6570\u636e\u8fdb\u884c Base64 \u7f16\u7801\n= 6KGqGX4tFwqnCdSndEmGQsR1jQU=\n</code></pre> <p>Authorization \u7b7e\u540d\uff1a</p> <pre><code>Authorization: UPYUN upyun:6KGqGX4tFwqnCdSndEmGQsR1jQU=\n</code></pre> <p>\u5b8c\u6574\u7684\u8bf7\u6c42\uff1a</p> <pre><code>POST /pretreatment/ HTTP/1.1\nAuthorization: UPYUN upyun:6KGqGX4tFwqnCdSndEmGQsR1jQU=\nContent-MD5: a2d75510f7ec654cc24cfa2b5a5a8182\nDate: Wed, 9 Nov 2016 14:26:58 GMT\nContent-Type: application/x-www-form-urlencoded; charset=utf-8\nHost: p0.api.upyun.com\nContent-Length: 668\n\nservice=upyun-temp&amp;notify_url=/upyun_notify_url&amp;source=/tmp.mp4&amp;tasks=W3siYXZvcHRzIjoiL3MvMjQwcCg0OjMpL2FzLzEvci8zMCIsInJldHVybl9pbmZvIjp0cnVlLCJzYXZlX2FzIjoiL2EvYi5tcDQiLCJ0eXBlIjoidmlkZW8ifSx7ImF2b3B0cyI6Ii9pL0wyRXZZaTlqTG0xd05BPT0vaS9MekV2TWk4ekxtMXdOQT09Iiwic2F2ZV9hcyI6Ii9jb25jYXQvYS5tcDQiLCJ0eXBlIjoidmNvbmNhdCJ9XQ==&amp;accept=json\n</code></pre>"},{"location":"cloud/authorization/#_2","title":"\u4ee3\u7801\u6f14\u793a","text":""},{"location":"cloud/authorization/#_3","title":"\u6ce8\u610f\u4e8b\u9879","text":"<ol> <li>\u672c\u793a\u4f8b\u9002\u7528\u4e8e\u4e91\u5b58\u50a8\uff0c\u4e91\u5904\u7406\uff0c\u5185\u5bb9\u8bc6\u522b\uff0c\u5bb9\u5668\u4e91\u670d\u52a1\u3002</li> <li>\u4f7f\u7528\u65f6\uff0c\u6839\u636e\u81ea\u5df1\u7684\u9700\u6c42\u3001\u914d\u7f6e\uff0c\u4fee\u6539\u5bf9\u5e94\u53c2\u6570: <code>key</code>\uff0c<code>secret</code>\uff0c<code>uri</code>\uff0c<code>method</code>\uff0c<code>policy</code>\uff0c<code>md5</code>\u3002</li> <li>\u672c\u793a\u4f8b\u4f7f\u7528\u7684 <code>key</code>\uff0c<code>secret</code> \u5728\u4e0d\u540c\u670d\u52a1\u4e2d\u7684\u542b\u4e49\u4e0d\u4e00\u6837\uff0c\u4e91\u5b58\u50a8\u3001\u4e91\u5904\u7406\u3001\u5185\u5bb9\u8bc6\u522b(\u6709\u5b58\u50a8) \u4e2d\u8868\u793a <code>Operator</code> \u548c <code>Password</code>\uff0c \u5185\u5bb9\u8bc6\u522b(\u65e0\u5b58\u50a8)\u3001\u5bb9\u5668\u4e91\u8868\u793a\u5404\u81ea\u670d\u52a1\u63d0\u4f9b\u7684 <code>ClientKey</code> \u548c <code>ClientSecret</code>\u3002</li> <li>\u6839\u636e\u5bf9\u5e94 API \u6587\u6863\u8bf4\u660e\uff0c\u628a\u8ba4\u8bc1\u4fe1\u606f\uff0c\u586b\u5165\u76f8\u5e94\u7684 <code>http</code> \u8bf7\u6c42\u4fe1\u606f\u4e2d\u3002</li> <li>\u4f7f\u7528 <code>form API</code> \u4e0a\u4f20\u65f6\uff0c\u9700\u8981\u7528\u6237\u751f\u6210 <code>policy</code>\uff0c\u672c\u793a\u4f8b\u4e0d\u63d0\u4f9b\u751f\u6210 <code>policy</code> \u7684\u4f7f\u7528\u5b9e\u4f8b\u3002</li> </ol>"},{"location":"cloud/authorization/#_4","title":"\u5e38\u7528\u8bed\u8a00\u4ee3\u7801\u793a\u4f8b","text":""},{"location":"cloud/authorization/#go","title":"go \u4ee3\u7801\u6f14\u793a","text":"<pre><code>package main\n\nimport (\n    \"crypto/hmac\"\n    \"crypto/md5\"\n    \"crypto/sha1\"\n    \"encoding/base64\"\n    \"fmt\"\n    \"strings\"\n    \"time\"\n)\n\nvar (\n    key    = \"upyun\"\n    secret = \"secret\" // \u5bf9\u4e8e\u4e0a\u4f20\uff0c\u5904\u7406\uff0c\u8ddf\u5185\u5bb9\u8bc6\u522b\u9700\u8981MD5\u52a0\u5bc6\n    uri    = \"/v1/apps/\"\n    method = \"GET\"\n)\n\nfunc md5Str(s string) string {\n    return fmt.Sprintf(\"%x\", md5.Sum([]byte(s)))\n}\n\nfunc makeRFC1123Date(d time.Time) string {\n    utc := d.UTC().Format(time.RFC1123)\n    return strings.Replace(utc, \"UTC\", \"GMT\", -1)\n}\nfunc base64ToStr(b []byte) string {\n    return base64.StdEncoding.EncodeToString(b)\n}\n\nfunc sign(key, secret, method, uri, date, policy, md5 string) string {\n    mac := hmac.New(sha1.New, []byte(secret))\n    elems := []string{}\n    for _, v := range []string{method, uri, date, policy, md5} {\n        if v != \"\" {\n            elems = append(elems, v)\n        }\n    }\n    value := strings.Join(elems, \"&amp;\")\n    fmt.Println(value)\n    mac.Write([]byte(value))\n    signStr := base64ToStr(mac.Sum(nil))\n    return \"UPYUN \" + key + \":\" + signStr\n}\n\nfunc main() {\n    date := makeRFC1123Date(time.Now())\n    fmt.Println(date)\n    fmt.Println(md5Str(secret))\n\n    // \u4e0a\u4f20\uff0c\u5904\u7406\uff0c\u5185\u5bb9\u8bc6\u522b\u6709\u5b58\u50a8\n    fmt.Println(sign(key, md5Str(secret), method, uri, date, \"\", \"\"))\n\n    // \u5bb9\u5668\u4e91\uff0c\u5185\u5bb9\u8bc6\u522b\u65e0\u5b58\u50a8\n    fmt.Println(sign(key, secret, method, uri, date, \"\", \"\"))\n}\n\n</code></pre>"},{"location":"cloud/authorization/#python","title":"python \u4ee3\u7801\u6f14\u793a","text":"<pre><code># -*- coding: UTF-8 -*-\nimport base64\nimport datetime\nimport hashlib\nimport hmac\n\n# Tip 1\n# \u4f7f\u7528\u65f6\u9700\u8981\u6839\u636e\u81ea\u5df1\u914d\u7f6e\u4e0e\u9700\u6c42\u63d0\u4f9b\u53c2\u6570 key secret uri method\nkey = 'upyun'\nsecret = 'secret'\nuri = '/v1/apps/'\nmethod = 'GET'\n\n\ndef httpdate_rfc1123(dt=None):\n    dt = dt or datetime.datetime.utcnow()\n    return dt.strftime('%a, %d %b %Y %H:%M:%S GMT')\n\ndef md5(value):\n    return hashlib.md5(value.encode()).hexdigest()\n\ndef sign(client_key, client_secret, method, uri, date, policy=None, md5=None):\n    # Tip 4\n    # MD5 \u4fe1\u606f\u53ef\u9009\n    signarr = []\n    for v in [method, uri, date, policy, md5]:\n        if v != None:\n            signarr.append(v)\n    signstr = '&amp;'.join(signarr)\n    signstr = base64.b64encode(\n        hmac.new(client_secret.encode(), signstr.encode(),\n                 digestmod=hashlib.sha1).digest()\n    ).decode()\n    return 'UPYUN %s:%s' % (client_key, signstr)\n\n\ndef main():\n    # Tip 2\n    # \u65f6\u95f4\u9700\u8981\u4e0e http \u5934 Date \u4fe1\u606f\u4fdd\u6301\u4e00\u81f4\n    # date = httpdate_rfc1123()\n    date = 'Thu, 14 Dec 2017 06:03:27 GMT'\n\n    # Tip 3\n    # sign \u51fd\u6570\u8fd4\u56de\u7684\u503c\u586b\u5165 http \u5934 Authorization \u4fe1\u606f\u4e2d\n    print date\n\n    print md5(secret)\n\n    # \u4e0a\u4f20\uff0c\u5904\u7406\uff0c\u5185\u5bb9\u8bc6\u522b\u6709\u5b58\u50a8\n    print sign(key, md5(secret), method, uri, date)\n\n    # \u5185\u5bb9\u8bc6\u522b\u65e0\u5b58\u50a8\uff0c\u5bb9\u5668\u4e91\n    print sign(key, secret, method, uri, date)\n\nif __name__ == '__main__':\n    main()\n</code></pre>"},{"location":"cloud/authorization/#js","title":"js \u4ee3\u7801\u6f14\u793a","text":"<pre><code>var crypto = require('crypto');\n\nfunction sign(key, secret, method, uri, date, policy=null, md5=null) {\n    elems = [];\n    [method, uri, date, policy, md5].forEach(item =&gt; {\n        if (item != null) {\n            elems.push(item)\n        }\n    })\n    value = elems.join('&amp;');\n    auth = hmacsha1(secret, value);\n    return `UPYUN ${key}:${auth}`;\n}\n\nfunction MD5(value) {\n    return crypto.createHash('md5').update(value).digest('hex');\n}\n\nfunction hmacsha1(secret, value) {\n    return crypto.createHmac('sha1', secret).update(value, 'utf-8').digest().toString('base64');\n}\n\ndate = new Date().toGMTString();\nconsole.log(date);\n\nkey = 'upyun';\nsecret = 'secret';\nmethod = 'GET';\nuri = '/v1/apps/';\n\nconsole.log(MD5('secret'));\n\n// \u4e0a\u4f20\uff0c\u5904\u7406\uff0c\u5185\u5bb9\u8bc6\u522b\u6709\u5b58\u50a8\nconsole.log(sign(key, MD5(secret), method, uri, date));\n\n// \u5185\u5bb9\u8bc6\u522b\u65e0\u5b58\u50a8\uff0c\u5bb9\u5668\u4e91\nconsole.log(sign(key, secret, method, uri, date));\n</code></pre>"},{"location":"cloud/authorization/#java","title":"java \u4ee3\u7801\u6f14\u793a","text":"<pre><code>import java.security.InvalidKeyException;\nimport java.security.NoSuchAlgorithmException;\nimport java.security.SignatureException;\n\nimport javax.crypto.Mac;\nimport javax.crypto.spec.SecretKeySpec;\n\nimport java.util.Base64;\nimport java.util.Calendar;\nimport java.text.SimpleDateFormat;\nimport java.util.Locale;\nimport java.util.TimeZone;\n\nimport java.security.*;\nimport java.io.*;\n\npublic class auth {\n    private static final String HMAC_SHA1_ALGORITHM = \"HmacSHA1\";\n\n    public static String md5(String string) {\n        byte[] hash;\n        try {\n            hash = MessageDigest.getInstance(\"MD5\").digest(string.getBytes(\"UTF-8\"));\n        } catch (UnsupportedEncodingException e) {\n            throw new RuntimeException(\"UTF-8 is unsupported\", e);\n        } catch (NoSuchAlgorithmException e) {\n            throw new RuntimeException(\"MessageDigest\u4e0d\u652f\u6301MD5Util\", e);\n        }\n        StringBuilder hex = new StringBuilder(hash.length * 2);\n        for (byte b : hash) {\n            if ((b &amp; 0xFF) &lt; 0x10) hex.append(\"0\");\n            hex.append(Integer.toHexString(b &amp; 0xFF));\n        }\n        return hex.toString();\n    }\n\n    public static byte[] hashHmac(String data, String key)\n            throws SignatureException, NoSuchAlgorithmException, InvalidKeyException {\n        SecretKeySpec signingKey = new SecretKeySpec(key.getBytes(), HMAC_SHA1_ALGORITHM);\n        Mac mac = Mac.getInstance(HMAC_SHA1_ALGORITHM);\n        mac.init(signingKey);\n        return mac.doFinal(data.getBytes());\n    }\n\n    public static String sign(String key, String secret, String method, String uri, String date, String policy,\n            String md5) throws Exception {\n        String value = method + \"&amp;\" + uri + \"&amp;\" + date;\n        if (policy != null &amp;&amp; policy.length() &gt; 0) {\n            value = value + \"&amp;\" + policy;\n        }\n\n        if (md5 != null &amp;&amp; md5.length() &gt; 0) {\n            value = value + \"&amp;\" + md5;\n        }\n        byte[] hmac = hashHmac(value, secret);\n        String sign = Base64.getEncoder().encodeToString(hmac);\n        return \"UPYUN \" + key + \":\" + sign;\n    }\n\n\n    public static String getRfc1123Time() {\n        Calendar calendar = Calendar.getInstance();\n        SimpleDateFormat dateFormat = new SimpleDateFormat(\n            \"EEE, dd MMM yyyy HH:mm:ss z\", Locale.US);\n        dateFormat.setTimeZone(TimeZone.getTimeZone(\"GMT\"));\n        return dateFormat.format(calendar.getTime());\n    }\n\n    public static void main(String[] args) throws Exception {\n        String key = \"upyun\";\n        String secret = \"secret\";\n        String method = \"GET\";\n        String uri = \"/v1/apps/\";\n\n        String date = getRfc1123Time();\n\n        System.out.println(date);\n\n        System.out.println(md5(secret));\n\n        // \u4e0a\u4f20\uff0c\u5904\u7406\uff0c\u5185\u5bb9\u8bc6\u522b\u6709\u5b58\u50a8\n        System.out.println(sign(key, md5(secret), method, uri, date, \"\", \"\"));\n\n        // \u5185\u5bb9\u8bc6\u522b\u65e0\u5b58\u50a8\uff0c\u5bb9\u5668\u4e91\n        System.out.println(sign(key, secret, method, uri, date, \"\", \"\"));\n    }\n}\n</code></pre>"},{"location":"cloud/authorization/#php","title":"php \u4ee3\u7801\u6f14\u793a","text":"<pre><code>&lt;?php\n\nfunction sign($key, $secret, $method, $uri, $date, $policy=null, $md5=null)\n{\n    $elems = array();\n    foreach (array($method, $uri, $date, $policy, $md5) as $v)\n    {\n        if ($v)\n        {\n            $elems[] = $v;\n        }\n    }\n    $value = implode('&amp;', $elems);\n    $sign = base64_encode(hash_hmac('sha1', $value, $secret, true));\n    return 'UPYUN ' . $key . ':' . $sign;\n}\n\nfunction main()\n{\n    $key = 'upyun';\n    $secret = 'secret';\n    $uri = '/v1/apps/';\n    $method = 'GET';\n    $date = gmdate('D, d M Y H:i:s \\G\\M\\T');\n\n    $md = md5($secret);\n\n    echo $md . \"\\n\";\n\n    echo $date . \"\\n\";\n\n    // \u4e0a\u4f20\uff0c\u5904\u7406\uff0c\u5185\u5bb9\u8bc6\u522b\u6709\u5b58\u50a8\n    echo sign($key, md5($secret), $method, $uri, $date) . \"\\n\";\n\n    // \u5185\u5bb9\u8bc6\u522b\u65e0\u5b58\u50a8\uff0c\u5bb9\u5668\u4e91\n    echo sign($key, $secret, $method, $uri, $date);\n}\n\nmain();\n</code></pre> <p>\u5982\u6709\u7591\u95ee\u8bf7 \u8054\u7cfb\u6211\u4eec</p>"},{"location":"cloud/av/","title":"\u5f02\u6b65\u97f3\u89c6\u9891\u5904\u7406","text":""},{"location":"cloud/av/#_1","title":"\u5feb\u901f\u5165\u95e8","text":"<p>\u53c8\u62cd\u4e91\u5904\u7406\uff08\u5f02\u6b65\u97f3\u89c6\u9891\u5904\u7406\uff09\u57fa\u4e8e\u4e91\u5b58\u50a8\u670d\u52a1\uff0c\u60a8\u5728\u4f7f\u7528\u5b83\u4e4b\u524d\uff0c\u8bf7\u786e\u4fdd\u60a8\u5df2\u7ecf\u6ce8\u518c\u53c8\u62cd\u4e91\u8d26\u53f7\u5e76\u5b8c\u6210\u5b9e\u540d\u9a8c\u8bc1\uff0c\u8bf7\u786e\u4fdd\u60a8\u5df2\u7ecf\u521b\u5efa\u4e91\u5b58\u50a8\u670d\u52a1\u3002</p> <p>\u6536\u8d39\u65b9\u9762\uff0c\u89c1\u4ef7\u683c\u3002</p> <p>\u76f8\u5173\u9605\u8bfb\uff1a\u540c\u6b65\u89c6\u9891\u5904\u7406\uff0c\u540c\u6b65\u97f3\u9891\u5904\u7406\u3002</p>"},{"location":"cloud/av/#_2","title":"\u5f00\u53d1\u8005\u6307\u5357","text":""},{"location":"cloud/av/#_3","title":"\u63d0\u4ea4\u5904\u7406\u4efb\u52a1","text":"<p>** \u8bf7\u6c42\u65b9\u6cd5 **</p> <p>\u5bf9\u5df2\u7ecf\u5b58\u5728\u4e91\u5b58\u50a8\u4e2d\u7684\u97f3\u89c6\u9891\u6587\u4ef6\uff0c\u4ee5 <code>POST</code> \u65b9\u6cd5\u5411 <code>http://p0.api.upyun.com/pretreatment/</code> \u63d0\u4ea4\u5904\u7406\u4efb\u52a1\uff0c\u54cd\u5e94\u4e2d\u8fd4\u56de\u4efb\u52a1 <code>task_id</code>\u3002\u4efb\u52a1\u4ee5\u5f02\u6b65\u7684\u65b9\u5f0f\u5904\u7406\uff0c\u5904\u7406\u5b8c\u6210\u540e\uff0c\u56de\u8c03\u901a\u77e5\u7528\u6237\u5904\u7406\u7ed3\u679c\u3002</p> <pre><code>curl -X POST \\\n    http://p0.api.upyun.com/pretreatment/ \\\n    -H \"Authorization: UPYUN &lt;Operator&gt;:&lt;Signature&gt;\" \\\n    -H \"Date: &lt;Wed, 29 Oct 2014 02:26:58 GMT&gt;\" \\\n    -H \"Content-MD5: &lt;Content-MD5&gt;\" \\\n    -d \"accept=json\"\n    -d \"service=&lt;service&gt;\" \\\n    -d \"notify_url=&lt;notify_url&gt;\" \\\n    -d \"source=&lt;\u97f3\u89c6\u9891\u6587\u4ef6\u76f8\u5bf9\u8def\u5f84&gt;\" \\\n    -d \"tasks=&lt;base64 \u7f16\u7801\u540e\u7684\u4efb\u52a1\u5b57\u7b26\u4e32&gt;\" \\\n</code></pre> <p>** \u8ba4\u8bc1\u9274\u6743 **</p> <p><code>Authorization</code> \u8be6\u89c1\u7b7e\u540d\u8ba4\u8bc1\u3002</p> <p>** \u8bf7\u6c42\u53c2\u6570 **</p> \u53c2\u6570 \u7c7b\u578b \u5fc5\u9009 \u8bf4\u660e service string \u662f \u97f3/\u89c6\u9891\u6587\u4ef6\u6240\u5728\u7684\u670d\u52a1\u540d notify_url string \u662f \u56de\u8c03\u901a\u77e5\u5730\u5740\uff0c\u8be6\u89c1\u56de\u8c03\u901a\u77e5 source string \u662f \u539f\u59cb\u97f3/\u89c6\u9891\u6587\u4ef6\u8def\u5f84 tasks string \u662f \u4efb\u52a1\u4fe1\u606f\uff0c\u8be6\u89c1 tasks \u53c2\u6570\u8bf4\u660e accept string \u662f \u56de\u8c03\u4fe1\u606f\u7684\u683c\u5f0f\uff0c\u503c\u4e3a<code>json</code> <p> ** tasks \u53c2\u6570\u8bf4\u660e **</p> <p>1. \u6309 JSON \u683c\u5f0f\u7ec4\u88c5\u4efb\u52a1\uff0c\u4e00\u6b21\u8bf7\u6c42 <code>tasks</code> \u6700\u591a\u53ef\u4ee5\u63d0\u4ea4 10 \u4e2a\u4efb\u52a1\u3002 \u4efb\u52a1\u53c2\u6570\u89c1\u529f\u80fd \u3002</p> <pre><code>[\n    {\n        \"type\": \"video\",                        // \u89c6\u9891\u8f6c\u7801\n        \"avopts\": \"/s/240p(4:3)/as/1/r/30\",     // \u53c2\u6570\n        \"return_info\": true,                    // \u8fd4\u56de\u5143\u6570\u636e\n        \"save_as\": \"/a/b.mp4\"                   // \u4fdd\u5b58\u8def\u5f84\n    },\n    {\n        \"type\": \"video\",                                        // \u89c6\u9891\u62fc\u63a5\n        \"avopts\": \"/i/L2EvYi9jLm1wNA==/i/LzEvMi8zLm1wNA==\",     // \u53c2\u6570\n        \"save_as\": \"/concat/a.mp4\"                              // \u4fdd\u5b58\u8def\u5f84\n    },\n    \u2026\n]\n</code></pre> <p>2. \u628a JSON \u5b57\u7b26\u4e32 Base64 \u7f16\u7801\uff0c\u5f97\u5230 <code>tasks</code>\u3002</p> <pre><code>W3siYXZvcHRzIjoiL3MvMjQwcCg0OjMpL2FzLzEvci8zMCIsInJldHVybl9pbmZvIjp0cnVlLCJzYXZlX2FzIjoiL2EvYi5tcDQiLCJ0eXBlIjoidmlkZW8ifSx7ImF2b3B0cyI6Ii9pL0wyRXZZaTlqTG0xd05BPT0vaS9MekV2TWk4ekxtMXdOQT09Iiwic2F2ZV9hcyI6Ii9jb25jYXQvYS5tcDQiLCJ0eXBlIjoidmNvbmNhdCJ9XQ==\n</code></pre> <p>** \u54cd\u5e94\u4fe1\u606f **</p> <ul> <li>\u4efb\u52a1\u63d0\u4ea4\u6210\u529f\uff1a\u8fd4\u56de <code>200</code>\uff0c\u54cd\u5e94\u4f53\u662f\u4e00\u7ec4\u6309\u4efb\u52a1\u63d0\u4ea4\u5148\u540e\u987a\u5e8f\u6392\u5e8f\u7684 <code>task_id</code>\u3002\u4f8b\u5982\uff1a</li> </ul> <pre><code>[\n    \"35f0148d414a688a275bf915ba7cebb2\",\n    \"98adbaa52b2f63d6d7f327a0ff223348\",\n    \"c3103189fa906a5354d29bd807e8dc51\",\n    \u2026\n]\n</code></pre> <ul> <li>\u4efb\u52a1\u63d0\u4ea4\u5931\u8d25\uff1a\u8fd4\u56de\u76f8\u5e94\u7684\u51fa\u9519\u4fe1\u606f\uff0c\u5177\u4f53\u8bf7\u53c2\u9605\u300c\u72b6\u6001\u7801\u8868\u300d\u3002</li> </ul> <p></p>"},{"location":"cloud/av/#_4","title":"\u56de\u8c03\u901a\u77e5","text":"<p>\u4efb\u52a1\u5904\u7406\u5b8c\u6210\u540e\uff0c\u5411 <code>notify_url</code> \u53d1\u9001 <code>HTTP POST</code> \u8bf7\u6c42\uff0c\u8bf7\u6c42\u4f53\u662f\u56de\u8c03\u4fe1\u606f\u3002</p> <pre><code>curl -X POST \\\n    &lt;notify_url&gt; \\\n    -H \"Authorization: UPYUN &lt;Operator&gt;:&lt;Signature&gt;\" \\\n    -H \"Date: &lt;Wed, 29 Oct 2014 02:26:58 GMT&gt;\" \\\n    -H \"Content-MD5: &lt;Content-MD5&gt;\" \\\n    -d \"service=&lt;service&gt;\" \\\n    # \u5176\u4ed6\u53c2\u6570...\n</code></pre> <p>** \u56de\u8c03\u4fe1\u606f **</p> <p>\u56de\u8c03\u4fe1\u606f\u662f JSON \u5b57\u7b26\u4e32\uff0c\u53c2\u6570\u540d\u53ca\u8bf4\u660e\u5982\u4e0b\uff1a</p> \u53c2\u6570 \u7c7b\u578b \u8bf4\u660e service string \u97f3/\u89c6\u9891\u6587\u4ef6\u6240\u5728\u7684\u670d\u52a1\u540d status_code integer \u5904\u7406\u7ed3\u679c\u72b6\u6001\u7801\uff0c<code>200</code> \u8868\u793a\u6210\u529f\u5904\u7406\uff0c\u8be6\u89c1\u72b6\u6001\u7801\u8868 path array \u8f93\u51fa\u6587\u4ef6\u4fdd\u5b58\u8def\u5f84 description string \u5904\u7406\u7ed3\u679c\u63cf\u8ff0 task_id string \u4efb\u52a1\u5bf9\u5e94\u7684 <code>task_id</code> info json \u8f93\u51fa\u6587\u4ef6\u7684\u5143\u6570\u636e\uff0c\u4ec5\u5f53 <code>return_info</code> \u4e3a <code>true</code> \u65f6\uff0c\u6709\u6548 signature\uff08\u65e7\uff09 string \u56de\u8c03\u901a\u77e5\u7684\u7b7e\u540d\uff0c\u56de\u8c03\u7b7e\u540d\uff08\u65e7\uff09\u7684\u53c2\u6570 timestamp\uff08\u65e7\uff09 integer \u670d\u52a1\u7aef\u53d1\u9001\u56de\u8c03\u65f6\u7684\u65f6\u95f4\u6233\uff0c\u56de\u8c03\u7b7e\u540d\uff08\u65e7\uff09\u7684\u53c2\u6570 <p>** \u56de\u8c03\u7b7e\u540d **</p> <p><code>Authorization</code> \u8be6\u89c1\u7b7e\u540d\u8ba4\u8bc1\uff0c\u5b83\u63d0\u4f9b\u7ed9\u5ba2\u6237\u7aef\uff0c\u7528\u4e8e\u9a8c\u8bc1\u56de\u8c03\u901a\u77e5\u7684\u5408\u6cd5\u6027\u3002</p> <p></p>"},{"location":"cloud/av/#_5","title":"\u4e0a\u4f20\u9884\u5904\u7406","text":"<p>\u5728\u4e0a\u4f20\u97f3\u89c6\u9891\u6587\u4ef6\u65f6\uff0c\u5bf9\u4e0a\u4f20\u7684\u97f3\u89c6\u9891\u8fdb\u884c\u5904\u7406\uff0c\u751f\u6210\u4e00\u4e2a\u6216\u591a\u4e2a\u65b0\u7684\u6587\u4ef6\uff0c\u540c\u65f6\u4fdd\u5b58\u4e0a\u4f20\u7684\u97f3\u89c6\u9891\u5230\u53c8\u62cd\u4e91\u5b58\u50a8\u3002\u4efb\u52a1\u4ee5\u5f02\u6b65\u7684\u65b9\u5f0f\u5904\u7406\uff0c\u5904\u7406\u5b8c\u6210\u540e\uff0c\u56de\u8c03\u901a\u77e5\u7528\u6237\u5904\u7406\u7ed3\u679c\u3002</p> <p>\u652f\u6301\u7684 API\uff1a FORM API\u3002</p> <p>\u53c2\u6570\u540d\u662f <code>apps</code>\uff0c\u53c2\u6570\u503c\u662f JSON \u6570\u7ec4\u3002\u4e00\u4e2a <code>apps</code> \u6700\u591a\u5141\u8bb8\u5305\u542b 10 \u4e2a\u97f3\u89c6\u9891\u5904\u7406\u4efb\u52a1\u3002 \u4efb\u52a1\u53c2\u6570\u89c1\u529f\u80fd \u3002</p> <p>** \u4e3e\u4f8b **</p> <pre><code>apps = [\n    {                                               // \u5f02\u6b65\u97f3\u89c6\u9891\u5904\u7406\u4efb\u52a1\n        \"name\": \"naga\",                             // \u5f02\u6b65\u4efb\u52a1\u540d\u79f0\uff0c\u5fc5\u586b\u3002naga \u8868\u793a\u5f02\u6b65\u97f3\u89c6\u9891\u5904\u7406\u670d\u52a1\n        \"type\": \"&lt;type&gt;\",                           // \u529f\u80fd\u6807\u8bc6\uff0c\u5fc5\u586b\n        \"avopts\": \"&lt;avopts&gt;\",                       // \u5904\u7406\u53c2\u6570\uff0c\u5fc5\u586b\n        \"return_info\": true/false,                  // \u662f\u5426\u8fd4\u56de\u5143\u6570\u636e\uff0c\u9009\u586b\n        \"save_as\": \"&lt;save_as&gt;\",                     // \u7ed3\u679c\u97f3\u9891/\u89c6\u9891\u4fdd\u5b58\u8def\u5f84\uff0c\u9009\u586b\n        \"notify_url\": \"&lt;notify_url&gt;\"                // \u56de\u8c03\u5730\u5740\uff0c\u4e0d\u586b\u65f6\u4f7f\u7528\u4e0a\u4f20\u53c2\u6570\u4e2d\u7684 notify_url\n    },\n    {\n        \"name\": \"naga\",\n        \"type\": \"video\",\n        \"avopts\": \"/s/240p(4:3)/as/1/r/30\",\n        \"return_info\": true,\n        \"save_as\": \"/a/b.mp4\",\n    },\n    ......\n]\n</code></pre> <p>** \u56de\u8c03\u901a\u77e5 **</p> <p>\u4efb\u52a1\u5904\u7406\u5b8c\u6210\u540e\uff0c\u5411 <code>notify_url</code> \u5730\u5740\u53d1\u9001\u56de\u8c03\u901a\u77e5\u3002\u8be6\u89c1 \u300c\u97f3\u89c6\u9891\u5904\u7406\u300d &gt; \u300c\u56de\u8c03\u901a\u77e5\u300d\u3002</p>"},{"location":"cloud/av/#_6","title":"\u8fdb\u5ea6\u67e5\u8be2","text":"<p>** \u8bf7\u6c42\u65b9\u6cd5 **</p> <p>\u901a\u8fc7 <code>task_id</code>\uff0c\u4ee5 <code>GET</code> \u65b9\u6cd5\u5411 <code>http://p0.api.upyun.com/status/</code> \u63d0\u4ea4\u8fdb\u5ea6\u67e5\u8be2\u4efb\u52a1\u3002</p> <pre><code>curl http://p0.api.upyun.com/status?service=&lt;service&gt;&amp;task_ids=&lt;task_id1&gt;,&lt;task_id2&gt;,&lt;task_id3&gt; \\\n    -H \"Authorization: UPYUN &lt;Operator&gt;:&lt;Signature&gt;\" \\\n    -H \"Date: &lt;Wed, 29 Oct 2014 02:26:58 GMT&gt;\"\n</code></pre> <p>** \u8ba4\u8bc1\u9274\u6743 **</p> <p><code>Authorization</code> \u8be6\u89c1\u7b7e\u540d\u8ba4\u8bc1\u3002</p> <p><code>\u4ee3\u7801\u5b9e\u73b0</code> \u8be6\u89c1\u4ee3\u7801\u793a\u4f8b\u3002</p> <p>** \u67e5\u8be2\u53c2\u6570 **</p> \u53c2\u6570 \u7c7b\u578b \u5fc5\u9009 \u8bf4\u660e service string \u662f \u97f3/\u89c6\u9891\u6587\u4ef6\u6240\u5728\u7684\u670d\u52a1\u540d task_ids string \u662f \u4efb\u52a1\u96c6\uff0c\u591a\u4e2a <code>task_id</code> \u4f7f\u7528 <code>,</code> \u8fde\u63a5\uff0c\u6700\u591a 20 \u4e2a <code>task_id</code> <p>** \u54cd\u5e94\u4fe1\u606f **</p> <ul> <li>\u67e5\u8be2\u6210\u529f\uff1a\u8fd4\u56de <code>200</code>\uff0c\u54cd\u5e94\u4f53\u662f <code>tasks</code>\u3002<code>tasks</code> \u662f JSON \u683c\u5f0f\uff0c\u5b58\u653e\u5404\u4e2a\u4efb\u52a1\uff08<code>task_id</code>\uff09\u7684\u8fdb\u5ea6\u3002\u4f8b\u5982\uff1a</li> </ul> <pre><code>{\n  \"tasks\": {\n      \"35f0148d414a688a275bf915ba7cebb2\": 100,\n      \"98adbaa52b2f63d6d7f327a0ff223348\": 20,\n      \"c3103189fa906a5354d29bd807e8dc51\": null,\n      \u2026\n  }\n}\n</code></pre> <p><code>20</code> \u8868\u793a\u4efb\u52a1\u8fdb\u5ea6\u767e\u5206\u6bd4\uff0c<code>100</code> \u8868\u793a\u4efb\u52a1\u5904\u7406\u5b8c\u6210\uff0c<code>-1</code> \u8868\u793a\u4efb\u52a1\u5904\u7406\u5931\u8d25\uff0c<code>null</code> \u8868\u793a\u4efb\u52a1\u5c1a\u672a\u5f00\u59cb\u3002\u5982\u679c\u957f\u65f6\u95f4\u662f <code>null</code>\uff0c\u8bf7\u53cd\u9988\u7ed9\u552e\u540e\u6216\u60a8\u7684\u5546\u52a1\u7ecf\u7406\u3002</p> <ul> <li>\u67e5\u8be2\u5931\u8d25\uff1a\u8fd4\u56de\u76f8\u5e94\u7684\u51fa\u9519\u4fe1\u606f\uff0c\u5177\u4f53\u8bf7\u53c2\u9605\u300c\u72b6\u6001\u7801\u8868\u300d\u3002</li> </ul>"},{"location":"cloud/av/#_7","title":"\u7ed3\u679c\u67e5\u8be2","text":"<p>** \u8bf7\u6c42\u65b9\u6cd5 **</p> <p>\u901a\u8fc7 <code>task_id</code>\uff0c\u4ee5 <code>GET</code> \u65b9\u6cd5\u5411 <code>http://p0.api.upyun.com/result/</code> \u63d0\u4ea4\u5904\u7406\u7ed3\u679c\u67e5\u8be2\u4efb\u52a1\u3002</p> <pre><code>curl http://p0.api.upyun.com/result?service=&lt;service&gt;&amp;task_ids=&lt;task_id1&gt;,&lt;task_id2&gt;,&lt;task_id3&gt; \\\n    -H \"Authorization: UPYUN &lt;Operator&gt;:&lt;Signature&gt;\" \\\n    -H \"Date: &lt;Wed, 29 Oct 2014 02:26:58 GMT&gt;\"\n</code></pre> <p>** \u8ba4\u8bc1\u9274\u6743 **</p> <p><code>Authorization</code> \u8be6\u89c1\u7b7e\u540d\u8ba4\u8bc1\u3002</p> <p><code>\u4ee3\u7801\u5b9e\u73b0</code> \u8be6\u89c1\u4ee3\u7801\u793a\u4f8b\u3002</p> <p>** \u67e5\u8be2\u53c2\u6570 **</p> \u53c2\u6570 \u7c7b\u578b \u5fc5\u9009 \u8bf4\u660e service string \u662f \u97f3/\u89c6\u9891\u6587\u4ef6\u6240\u5728\u7684\u670d\u52a1\u540d task_ids string \u662f \u4efb\u52a1\u96c6\uff0c\u591a\u4e2a <code>task_id</code> \u4f7f\u7528 <code>,</code> \u8fde\u63a5\uff0c\u6700\u591a 20 \u4e2a <code>task_id</code> <p>** \u54cd\u5e94\u4fe1\u606f **</p> <ul> <li>\u67e5\u8be2\u6210\u529f\uff1a\u8fd4\u56de <code>200</code>\uff0c\u54cd\u5e94\u4f53\u662f\u4efb\u52a1\u7684\u56de\u8c03\u4fe1\u606f\u3002\u56de\u8c03\u4fe1\u606f\u4f8b\u5982\uff1a</li> </ul> <pre><code>{\n    \"9d9c32b63a1034834e77672c6f51f661\": {\n        \"path\": [\"/v2.mp4\"],\n        \"signature\": \"4042c1f07f546d28\",\n        \"status_code\": 200,\n        \"service\": \"service\",\n        \"description\": \"OK\",\n        \"task_id\": \"9d9c32b63a1034834e77672c6f51f661\",\n        \"timestamp\": 1472010905\n    },\n    \"3438a54b4991e8d4a46a003bc15e9867\": {\n        \"path\": [\"/v2.mp4\"],\n        \"signature\": \"1c49be9b672394ff\",\n        \"status_code\": 200,\n        \"service\": \"service\",\n        \"description\": \"OK\",\n        \"task_id\": \"3438a54b4991e8d4a46a003bc15e9867\",\n        \"timestamp\": 1472010684\n    }\n    \u2026\n}\n</code></pre> <ul> <li>\u67e5\u8be2\u5931\u8d25\uff1a\u8fd4\u56de\u76f8\u5e94\u7684\u51fa\u9519\u4fe1\u606f\uff0c\u5177\u4f53\u8bf7\u53c2\u9605\u300c\u72b6\u6001\u7801\u8868\u300d\u3002</li> </ul> <p></p>"},{"location":"cloud/av/#_8","title":"\u72b6\u6001\u7801\u8868","text":"\u72b6\u6001\u7801 \u8bf4\u660e 200 \u5904\u7406\u6210\u529f 400 \u53c2\u6570\u9519\u8bef 401 \u53c2\u6570\u9519\u8bef 404 \u6587\u4ef6\u4e0d\u5b58\u5728 5xx \u670d\u52a1\u7aef\u9519\u8bef\u3002\u5982\u9047\u6b64\u7c7b\u9519\u8bef\uff0c\u8bf7\u53cd\u9988\u7ed9\u552e\u540e\u6216\u60a8\u7684\u5546\u52a1\u7ecf\u7406"},{"location":"cloud/av/#_9","title":"\u652f\u6301\u683c\u5f0f","text":"\u7c7b\u578b \u8f93\u5165\u683c\u5f0f \u8f93\u51fa\u683c\u5f0f \u89c6\u9891\u5bb9\u5668\u683c\u5f0f AVI\u3001MP4\u3001FLV\u3001MOV\u30013GP\u3001ASF\u3001WMV\u3001M3U8(TS)\u3001MPG\u3001F4V\u3001M4V\u3001MKV\u3001VOB\uff08SVCD/DVD\uff09\u7b49 MP4\u3001FLV\u3001M3U8(TS) \u7b49 \u97f3\u9891\u5bb9\u5668\u683c\u5f0f MP3\u3001OGG\u3001M4A\u3001SILK \u7b49 MP4\u3001MP3\u3001OGG \u7b49 \u89c6\u9891\u7f16\u7801\u683c\u5f0f H.264/AVC \u3001H.263\u3001H.263+\u3001MPEG-2\u3001MPEG-4\u3001VP8\u3001VP9\u3001Quicktime\u3001RealVideo\u3001Windows Media Video \u7b49 H.264/AVC\u3001VP8\u3001H.265/HEVC\u3001VP9 \u7b49 \u97f3\u9891\u7f16\u7801\u683c\u5f0f MP1\u3001MP2\u3001MP3\u3001AAC\u3001AC-3\u3001Vorbis\u3001PCM\u3001RealAudio\u3001Windows Media Audio \u7b49 AAC\u3001MP3 \u7b49"},{"location":"cloud/av/#_10","title":"\u9884\u7f6e\u6a21\u677f","text":"<p>\u540c\u7b49\u6e05\u6670\u5ea6\u4e0b\uff0c\u5efa\u8bae\u4f18\u5148\u4f7f\u7528 16:9 \u7684\u5bbd\u9ad8\u6bd4\u3002\u7279\u522b\u5730\uff0c\u7a84\u5e26\u9ad8\u6e05\u4e5f\u53ef\u4ee5\u4f7f\u7528\u3002</p> \u6e05\u6670\u5ea6 \u6a21\u677f\u540d \u5206\u8fa8\u7387 \u7801\u7387 4K 2160p(16:9) 3840x2160,16:9 \u2264 8000Kbps 2K 1440p(16:9) 2560x1440,16:9 \u2264 4000Kbps FHD/\u5168\u9ad8\u6e05 1080p(16:9) 1920x1080,16:9 \u2264 2560Kbps HD/\u9ad8\u6e05 720p(16:9) 1280x720,16:9 \u2264 1500Kbps HD/\u9ad8\u6e05 720p(4:3) 960x720,4:3 \u2264 1500Kbps LD/\u6807\u6e05 540p(16:9) 960x540,16:9 \u2264 800Kbps LD/\u6807\u6e05 480p(16:9) 854x480,16:9 \u2264 800Kbps SD/\u6d41\u7545 480p(4:3) 640x480,4:3 \u2264 500Kbps SD/\u6d41\u7545 360p(16:9) 640x360,16:9 \u2264 500Kbps SD/\u6d41\u7545 240p(4:3) 320x240,4:3 \u2264 300Kbps <p> </p>"},{"location":"cloud/av/#_11","title":"\u89c6\u9891\u8f6c\u7801","text":"\u53c2\u6570 \u7c7b\u578b \u5fc5\u9009 \u8bf4\u660e <code>type</code> string \u662f \u56fa\u5b9a\u503c\uff0c<code>video</code>\uff0c\u8868\u793a\u6807\u51c6\u8f6c\u7801 <code>avopts</code> string \u662f \u89c6\u9891\u8f6c\u7801\u53c2\u6570\uff0c\u683c\u5f0f\u4e3a <code>/key1/value1/key2/value2/...</code>\uff0c\u53c2\u6570\u89c1\u300c\u53c2\u6570\u300d <code>save_as</code> string \u5426 \u8f93\u51fa\u6587\u4ef6\u4fdd\u5b58\u8def\u5f84\uff0c\u9ed8\u8ba4\u4f7f\u7528\u539f\u59cb\u89c6\u9891\u6240\u5728\u76ee\u5f55+\u7cfb\u7edf\u968f\u673a\u751f\u6210\u7684\u6587\u4ef6\u540d+\u539f\u59cb\u89c6\u9891\u540e\u7f00 <code>return_info</code> boolean \u5426 \u56de\u8c03\u4fe1\u606f\u662f\u5426\u5305\u542b\u8f93\u51fa\u6587\u4ef6\u7684\u5143\u6570\u636e\uff0c\u5143\u6570\u636e\u683c\u5f0f\u4e3a JSON\uff0c\u9ed8\u8ba4\u00a0<code>false</code> <p>** \u6ce8 **</p> <ul> <li><code>save_as</code> \u7684\u540e\u7f00\u540d\u9ed8\u8ba4\u5f53\u4f5c\u8f93\u51fa\u5c01\u88c5\u683c\u5f0f\u3002\u683c\u5f0f\u9664\u89c6\u9891\u683c\u5f0f\u5916\uff0c\u8fd8\u652f\u6301 GIF/WebP\uff0c\u53ef\u4ee5\u5b9e\u73b0\u628a\u89c6\u9891\u8f6c\u7801\u6210\u52a8\u6001 GIF/\u52a8\u6001 WebP\u3002</li> </ul>"},{"location":"cloud/av/#_12","title":"\u5e38\u7528\u53c2\u6570","text":"\u53c2\u6570 \u7c7b\u578b \u5fc5\u9009 \u8bf4\u660e <code>/vb/&lt;bitrate&gt;</code> integer \u5426 \u89c6\u9891\u6bd4\u7279\u7387\uff0c\u5355\u4f4d\u00a0kbps\uff0c\u9ed8\u8ba4\u6309\u7167\u89c6\u9891\u539f\u59cb\u6bd4\u7279\u7387\u5904\u7406 <code>/s/&lt;scale&gt;</code> string \u5426 \u89c6\u9891\u5206\u8fa8\u7387\uff0c\u9ed8\u8ba4\u6309\u7167\u539f\u59cb\u5206\u8fa8\u7387\u5904\u7406\u3002\u89c1\u300c\u6ce8\u300d <code>/as/&lt;auto_scale&gt;</code> boolean \u5426 \u662f\u5426\u6839\u636e\u5206\u8fa8\u7387\u81ea\u52a8\u8c03\u6574\u89c6\u9891\u7684\u6bd4\u4f8b\uff0c\u9ed8\u8ba4 <code>false</code>\u3002\u4ec5\u5f53\u4f20\u9012\u4e86 <code>s</code>\u00a0\u53c2\u6570\u65f6\u6709\u6548 <code>/r/&lt;frame_rate&gt;</code> integer \u5426 \u89c6\u9891\u5e27\u7387\uff0c\u9ed8\u8ba4\u6309\u7167\u539f\u59cb\u5e27\u7387\u5904\u7406\u3002\u63a8\u8350\u503c\uff1a<code>25</code>\u3001<code>30</code> <code>/sp/&lt;rotate&gt;</code> string \u5426 \u65cb\u8f6c\u89d2\u5ea6\uff0c\u9ed8\u8ba4\u6309\u7167\u539f\u59cb\u89c6\u9891\u89d2\u5ea6\u5904\u7406\u3002\u53ef\u9009\u503c\uff1a<code>auto\uff08\u81ea\u52a8\u6276\u6b63\uff09</code>\u3001<code>90</code>\u3001<code>180</code>\u3001<code>270</code> <code>/sm/&lt;map_metadata&gt;</code> boolean \u5426 \u662f\u5426\u4fdd\u7559\u89c6\u9891\u5143\u6570\u636e\uff0c\u9ed8\u8ba4 <code>true</code> <code>/acodec/&lt;audio_codec&gt;</code> string \u5426 \u8bbe\u7f6e\u97f3\u9891\u7f16\u7801\u5668\uff0c\u9ed8\u8ba4\u6309\u7167\u97f3\u9891\u539f\u59cb\u7f16\u7801\u5668\u5904\u7406\u3002\u53ef\u9009\u503c\uff1a<code>libmp3lame</code>\u3001<code>libfdk_aac</code>\u3001<code>copy</code> <code>/vcodec/&lt;video_codec&gt;</code> string \u5426 \u8bbe\u7f6e\u89c6\u9891\u7f16\u7801\u5668\uff0c\u9ed8\u8ba4\u6309\u7167\u89c6\u9891\u539f\u59cb\u7f16\u7801\u5668\u5904\u7406\u3002\u53ef\u9009\u503c\uff1a<code>libx264</code>\u3001<code>libtheora</code>\u3001<code>libx265</code>\u3001<code>libvpx-vp9</code>\u3001<code>libvpx</code>\u3001<code>copy</code> <code>/an/&lt;disable_audio&gt;</code> boolean \u5426 \u662f\u5426\u7981\u6389\u97f3\u9891\uff0c\u9ed8\u8ba4\u00a0<code>false</code> <code>/vn/&lt;disable_video&gt;</code> boolean \u5426 \u662f\u5426\u7981\u6389\u89c6\u9891\uff0c\u9ed8\u8ba4\u00a0<code>false</code> <code>/su/&lt;accelerate_factor&gt;</code> float \u5426 \u89c6\u9891\u52a0\u901f\u500d\u6570\uff0c\u9ed8\u8ba4 <code>1.0</code>\u3002\u53d6\u503c\u8303\u56f4 <code>[1.0\uff0c10.0]</code> <code>/ar/&lt;audio_sample_rate&gt;</code> integer \u5426 \u97f3\u9891\u91c7\u6837\u7387\uff0c\u5355\u4f4d Hz\uff0c\u9ed8\u8ba4\u6309\u7167\u539f\u59cb\u91c7\u6837\u7387\u5904\u7406\u3002\u53ef\u9009\u503c\uff1a<code>44100</code>\u3001<code>48000</code>\u3001<code>32000</code>\u3001<code>22050</code>\u3001<code>24000</code>\u3001<code>16000</code>\u3001<code>0</code> <code>/ac/&lt;audio_channel&gt;</code> float \u5426 \u97f3\u9891\u58f0\u9053\u6570\uff0c\u9ed8\u8ba4\u6309\u7167\u539f\u59cb\u58f0\u9053\u6570\u5904\u7406\u3002\u5e38\u7528\u503c\uff1a<code>1</code>\u8868\u793a\u5355\u58f0\u9053(mono)\uff0c<code>2</code>\u8868\u793a\u7acb\u4f53\u58f0(stereo)\uff0c<code>5.1</code>\uff0c<code>7.1</code>\u7b49 <code>/sar/&lt;sar&gt;</code> string \u5426 \u91c7\u6837\u957f\u5bbd\u6bd4\uff0c\u683c\u5f0f <code>w:h</code>\uff0c\u5e38\u7528\u503c <code>1:1</code>\uff0c<code>4:3</code> \u6216 <code>16:9</code> <code>/dar/&lt;dar&gt;</code> string \u5426 \u663e\u793a\u957f\u5bbd\u6bd4\uff0c\u683c\u5f0f <code>w:h</code>\uff0c\u5e38\u7528\u503c <code>1:1</code>\uff0c<code>4:3</code> \u6216 <code>16:9</code> <code>/pv/&lt;pv&gt;</code> string \u5426 H264 Profile\uff0c\u5e38\u7528\u503c <code>baseline</code>\uff0c<code>main</code>\uff0c<code>high</code> \u7b49 <code>/level/&lt;level&gt;</code> float \u5426 H264 Level\uff0c\u5e38\u7528\u503c <code>3.0</code>\uff0c<code>3.1</code>\uff0c<code>4.0</code>\uff0c<code>4.1</code>\uff0c<code>4.2</code> \u7b49 <code>/f/&lt;format&gt;</code> string \u5426 \u89c6\u9891\u683c\u5f0f\u3002\u5f53\u8f93\u51fa\u6587\u4ef6\u6ca1\u6709\u540e\u7f00\u65f6\uff0c\u9700\u8981\u6307\u5b9a\uff0c\u5176\u4f59\u65f6\u5019\u6839\u636e\u8f93\u51fa\u6587\u4ef6\u540e\u7f00\u540d\u81ea\u52a8\u5224\u5b9a <p>** \u6ce8 **</p> <ul> <li><code>s</code> \u53c2\u6570\u6709\u4e24\u79cd\u8bbe\u7f6e\u65b9\u6cd5\uff1a1\uff09\u4f7f\u7528\u9884\u7f6e\u6a21\u677f\uff0c\u503c\u662f\u9884\u7f6e\u6a21\u677f\u7684<code>\u6a21\u677f\u540d</code>\uff0c\u5982 <code>720p(16:9)</code>\uff1b2\uff09\u81ea\u5b9a\u4e49\uff0c\u503c\u662f <code>\u5bbdx\u9ad8</code>\uff0c\u5982 <code>1280x720</code>\u3002</li> </ul>"},{"location":"cloud/av/#_13","title":"\u5207\u7247\u53c2\u6570","text":"\u53c2\u6570 \u7c7b\u578b \u5fc5\u9009 \u8bf4\u660e <code>/ht/&lt;hls_time&gt;</code> string \u5426 \u6bcf\u7247\u65f6\u957f\uff0c\u5355\u4f4d s\uff08\u79d2\uff09\uff0c\u9ed8\u8ba4 <code>10</code> <p>** \u6ce8 **</p> <ul> <li>\u4f7f\u7528 <code>ht</code> \u53c2\u6570\u65f6\uff0c<code>save_as</code> \u53c2\u6570\u5fc5\u987b\u4ee5 <code>.m3u8</code> \u540e\u7f00\u7ed3\u5c3e\u3002</li> </ul>"},{"location":"cloud/av/#_14","title":"\u6c34\u5370\u53c2\u6570","text":"\u53c2\u6570 \u7c7b\u578b \u5fc5\u9009 \u8bf4\u660e <code>/wmImg/&lt;watermark_img&gt;</code> string \u662f \u6c34\u5370\u56fe\u7247\u76f8\u5bf9\u8def\u5f84\uff0c\u9700\u8981\u5b89\u5168\u7684 Base64 \u7f16\u7801\u3002\u56fe\u7247\u683c\u5f0f\u652f\u6301 <code>png</code> \u548c <code>webp</code> <code>/wmGravity/&lt;wmGravity&gt;</code> string \u5426 \u6c34\u5370\u56fe\u7247\u653e\u7f6e\u65b9\u4f4d\uff0c\u9ed8\u8ba4 <code>northeast</code>\u3002\u89c1\u300c\u6ce8\u300d <code>/wmDx/&lt;watermark_dx&gt;</code> integer \u5426 \u6c34\u5370\u56fe\u7247\u6a2a\u504f\u79fb\u91cf\uff0c\u5355\u4f4d px\uff0c\u5f53 <code>wmGravity</code> \u4e3a <code>northeast</code> \u65f6\uff0c\u9ed8\u8ba4 <code>-20</code>  \u6a2a\u504f\u79fb\u91cf\u53d6\u503c\u6b63\u8d1f\u7684\u4f9d\u636e\uff1a\u5f80 <code>east</code> \u65b9\u5411\u504f\u79fb\uff0c\u4e3a\u6b63\uff1b\u5f80 <code>west</code> \u65b9\u5411\u504f\u79fb\uff0c\u4e3a\u8d1f <code>/wmDy/&lt;watermark_dy&gt;</code> integer \u5426 \u6c34\u5370\u56fe\u7247\u7eb5\u504f\u79fb\u91cf\uff0c\u5355\u4f4d px\uff0c\u5f53 <code>wmGravity</code> \u4e3a <code>northeast</code> \u65f6\uff0c\u9ed8\u8ba4 <code>15</code>  \u7eb5\u504f\u79fb\u91cf\u53d6\u503c\u6b63\u8d1f\u7684\u4f9d\u636e\uff1a\u5f80 <code>south</code> \u65b9\u5411\u504f\u79fb\uff0c\u4e3a\u6b63\uff1b\u5f80 <code>north</code> \u65b9\u5411\u504f\u79fb\uff0c\u4e3a\u8d1f <p>** \u6ce8 **</p> <ul> <li>9 \u4e2a\u65b9\u4f4d\uff1a</li> </ul> <pre><code>northwest     |     north      |     northeast\n              |                |\n              |                |\n--------------+----------------+--------------\n              |                |\nwest          |     center     |          east\n              |                |\n--------------+----------------+--------------\n              |                |\n              |                |\nsouthwest     |     south      |     southeast\n</code></pre>"},{"location":"cloud/av/#_15","title":"\u526a\u8f91\u53c2\u6570","text":"\u53c2\u6570 \u7c7b\u578b \u5fc5\u9009 \u8bf4\u660e <code>/ss/&lt;start_time&gt;</code> string \u5426 \u526a\u8f91\u5f00\u59cb\u65f6\u95f4\uff0c\u683c\u5f0f\u4e3a\u00a0<code>HH:MM:SS</code>\uff0c\u9ed8\u8ba4\u89c6\u9891\u5f00\u59cb\u65f6\u95f4 <code>/es/&lt;end_time&gt;</code> string \u5426 \u526a\u8f91\u7ed3\u675f\u65f6\u95f4\uff0c\u683c\u5f0f\u4e3a\u00a0<code>HH:MM:SS</code>\uff0c\u9ed8\u8ba4\u89c6\u9891\u7ed3\u675f\u65f6\u95f4"},{"location":"cloud/av/#_16","title":"\u52a8\u56fe\u53c2\u6570","text":"<p>\u628a <code>save_as</code> \u7684\u540e\u7f00\u540d\u6307\u5b9a\u4e3a <code>gif</code> \u6216 <code>webp</code>\uff0c\u5b9e\u73b0\u89c6\u9891\u8f6c\u7801\u6210\u52a8\u6001\u56fe\u7247\u3002</p> \u53c2\u6570 \u7c7b\u578b \u5fc5\u9009 \u8bf4\u660e <code>/cr/&lt;concat_reverse&gt;</code> boolean \u5426 \u5411\u89c6\u9891\u7ed3\u5c3e\u5904\u6dfb\u52a0\u5012\u5e8f\u7684\u5185\u5bb9\u3002\u529f\u80fd\u6548\u679c\u662f\uff0c\u6b63\u5e8f\u5185\u5bb9+\u5012\u5e8f\u5185\u5bb9"},{"location":"cloud/av/#_17","title":"\u62fc\u63a5\u53c2\u6570","text":"<p>\u62fc\u63a5\u7684\u89c6\u9891\u5206\u8fa8\u7387\u9700\u8981\u4fdd\u6301\u4e00\u81f4\uff0c\u62fc\u63a5\u53c2\u6570\u4e0d\u80fd\u4e0e\u5176\u4ed6\u53c2\u6570\u6df7\u7528\u3002\u5982\u679c\u8981\u6df7\u7528\uff0c\u8bf7\u5206\u505a\u4e24\u4e2a\u4efb\u52a1\uff0c\u4f7f\u7528\u94fe\u5f0f\u5904\u7406\u3002</p> \u53c2\u6570 \u7c7b\u578b \u5fc5\u9009 \u8bf4\u660e <code>/i/&lt;video&gt;</code> string \u5426 \u9700\u8981\u540e\u7f6e\u62fc\u63a5\u89c6\u9891\u6587\u4ef6\u7684\u76f8\u5bf9\u8def\u5f84\uff0c\u9700\u8981\u5b89\u5168\u7684 Base64 \u7f16\u7801  \u591a\u4e2a\u9700\u8981\u62fc\u63a5\u89c6\u9891\u6309 <code>/i/&lt;video&gt;/i/&lt;video&gt;/...</code> \u65b9\u5f0f\u8fdb\u884c\u8fde\u63a5\u3002\u89c1\u300c\u6ce8\u300d <code>/h/&lt;video&gt;</code> string \u5426 \u9700\u8981\u524d\u7f6e\u62fc\u63a5\u89c6\u9891\u6587\u4ef6\u7684\u76f8\u5bf9\u8def\u5f84\uff0c\u9700\u8981\u5b89\u5168\u7684 Base64 \u7f16\u7801  \u591a\u4e2a\u9700\u8981\u62fc\u63a5\u89c6\u9891\u6309 <code>/h/&lt;video&gt;/h/&lt;video&gt;/...</code> \u65b9\u5f0f\u8fdb\u884c\u8fde\u63a5\u3002\u89c1\u300c\u6ce8\u300d <code>/codec/&lt;codec&gt;</code> string \u5426 \u8bbe\u7f6e\u89c6\u9891\u7f16\u7801\u5668\uff0c\u9ed8\u8ba4\u4e0d\u9700\u8981\u8bbe\u7f6e\u3002\u53ef\u9009\u503c\uff1a<code>copy</code>\u3002\u89c1\u300c\u6ce8\u300d <p>** \u6ce8 **</p> <ul> <li>\u89c6\u9891\u62fc\u63a5\u987a\u5e8f\uff1a\u5f85\u62fc\u63a5\u89c6\u9891\u6309 <code>h</code> \u51fa\u73b0\u987a\u5e8f\uff0c\u4f9d\u6b21\u62fc\u63a5\u5728\u539f\u59cb\u89c6\u9891\uff08<code>source</code>\uff09\u524d\u9762\uff1b\u5f85\u62fc\u63a5\u89c6\u9891\u6309 <code>i</code> \u51fa\u73b0\u987a\u5e8f\uff0c\u4f9d\u6b21\u62fc\u63a5\u5728\u539f\u59cb\u89c6\u9891\uff08<code>source</code>\uff09\u540e\u9762\u3002</li> <li>\u5982\u679c <code>save_as</code> \u53c2\u6570\u6307\u5b9a\u683c\u5f0f\u8ddf\u539f\u59cb\u89c6\u9891\uff08<code>source</code>\uff09\u683c\u5f0f\u3001\u62fc\u63a5\u89c6\u9891\u683c\u5f0f\u4e0d\u4e00\u81f4\uff0c\u7cfb\u7edf\u4f1a\u81ea\u52a8\u8f6c\u7801\u539f\u59cb\u89c6\u9891\u3001\u62fc\u63a5\u89c6\u9891\u6210  <code>save_as</code>  \u53c2\u6570\u6307\u5b9a\u683c\u5f0f\uff1b\u5982\u679c <code>save_as</code> \u53c2\u6570\u672a\u6307\u5b9a\uff0c\u62fc\u63a5\u89c6\u9891\u8ddf\u539f\u59cb\u89c6\u9891\u683c\u5f0f\u4e0d\u4e00\u81f4\uff0c\u7cfb\u7edf\u4f1a\u81ea\u52a8\u8f6c\u7801\u62fc\u63a5\u89c6\u9891\u6210\u539f\u59cb\u89c6\u9891\u683c\u5f0f\u3002</li> <li>\u5982\u679c\u62fc\u63a5\u89c6\u9891\u548c\u539f\u59cb\u89c6\u9891\u7684\u7f16\u7801\u4e00\u81f4\uff0c\u53ef\u4ee5\u8bbe\u7f6e <code>codec</code> \u53c2\u6570\u4e3a <code>copy</code>\uff0c\u4e0d\u5bf9\u62fc\u63a5\u89c6\u9891\u8fdb\u884c\u7f16\u89e3\u7801\uff0c\u63d0\u9ad8\u62fc\u63a5\u901f\u5ea6\u3002</li> </ul> <p></p>"},{"location":"cloud/av/#_18","title":"\u7a84\u5e26\u9ad8\u6e05","text":"<p>\u901a\u8fc7\u5bf9\u89c6\u9891\u7684\u7f16\u7801\u8fdb\u884c\u4f18\u5316\uff0c\u5e73\u5747\u964d\u4f4e\u89c6\u9891\u5927\u5c0f 30%\u3002\u7279\u522b\u5730\uff0c\u6682\u65f6\u53ea\u652f\u6301 H.264 \u7f16\u7801\u3002</p> \u53c2\u6570 \u7c7b\u578b \u5fc5\u9009 \u8bf4\u660e <code>type</code> string \u662f \u56fa\u5b9a\u503c\uff0c<code>nbhd</code>\uff0c\u8868\u793a\u7a84\u5e26\u9ad8\u6e05 <code>avopts</code> string \u662f \u89c6\u9891\u8f6c\u7801\u53c2\u6570\uff0c\u683c\u5f0f\u4e3a <code>/key1/value1/key2/value2/...</code>\uff0c\u53c2\u6570\u89c1\u300c\u53c2\u6570\u300d <code>return_info</code> boolean \u5426 \u56de\u8c03\u4fe1\u606f\u662f\u5426\u5305\u542b\u8f93\u51fa\u6587\u4ef6\u7684\u5143\u6570\u636e\uff0c\u5143\u6570\u636e\u683c\u5f0f\u4e3a JSON\uff0c\u9ed8\u8ba4\u00a0<code>false</code> <code>save_as</code> string \u5426 \u8f93\u51fa\u6587\u4ef6\u4fdd\u5b58\u8def\u5f84\uff0c\u9ed8\u8ba4\u539f\u59cb\u89c6\u9891\u6240\u5728\u76ee\u5f55+\u7cfb\u7edf\u968f\u673a\u751f\u6210\u7684\u6587\u4ef6\u540d"},{"location":"cloud/av/#_19","title":"\u5e38\u7528\u53c2\u6570","text":"\u53c2\u6570 \u7c7b\u578b \u5fc5\u9009 \u8bf4\u660e <code>/ct/&lt;codec_type&gt;</code> string \u5426 \u89c6\u9891\u7f16\u7801\u5668\u9009\u62e9\uff0c\u9ed8\u8ba4 <code>h264</code>\uff0c\u53ef\u9009\u503c\u53ea\u80fd\u662f<code>h264</code>\u6216\u8005<code>h265</code>\u3002 <code>/scene/&lt;scene&gt;</code> string \u5426 \u89c6\u9891\u5185\u5bb9\u573a\u666f\uff0c\u9ed8\u8ba4 <code>auto</code>\uff0c\u670d\u52a1\u6839\u636e\u89c6\u9891\u5185\u5bb9\u667a\u80fd\u9009\u62e9\u3002\u573a\u666f\u53c2\u6570\u89c1\u300c\u6ce8\u300d <code>/s/&lt;scale&gt;</code> string \u5426 \u89c6\u9891\u5206\u8fa8\u7387\uff0c\u9ed8\u8ba4\u6309\u7167\u539f\u59cb\u5206\u8fa8\u7387\u5904\u7406\u3002\u89c1\u300c\u6ce8\u300d <code>/as/&lt;auto_scale&gt;</code> boolean \u5426 \u662f\u5426\u6839\u636e\u5206\u8fa8\u7387\u81ea\u52a8\u8c03\u6574\u89c6\u9891\u7684\u6bd4\u4f8b\uff0c\u9ed8\u8ba4 <code>false</code>\u3002\u4ec5\u5f53\u4f20\u9012\u4e86 <code>s</code>\u00a0\u53c2\u6570\u65f6\u6709\u6548 <code>/r/&lt;frame_rate&gt;</code> integer \u5426 \u89c6\u9891\u5e27\u7387\uff0c\u9ed8\u8ba4\u6309\u7167\u539f\u59cb\u5e27\u7387\u5904\u7406\u3002\u63a8\u8350\u503c\uff1a<code>25</code>\u3001<code>30</code> <code>/sp/&lt;rotate&gt;</code> string \u5426 \u65cb\u8f6c\u89d2\u5ea6\uff0c\u9ed8\u8ba4\u6309\u7167\u539f\u59cb\u89c6\u9891\u89d2\u5ea6\u5904\u7406\u3002\u53ef\u9009\u503c\uff1a<code>auto\uff08\u81ea\u52a8\u6276\u6b63\uff09</code>\u3001<code>90</code>\u3001<code>180</code>\u3001<code>270</code> <code>/sm/&lt;map_metadata&gt;</code> boolean \u5426 \u662f\u5426\u4fdd\u7559\u89c6\u9891\u5143\u6570\u636e\uff0c\u9ed8\u8ba4 <code>true</code> <code>/su/&lt;accelerate_factor&gt;</code> float \u5426 \u89c6\u9891\u52a0\u901f\u500d\u6570\uff0c\u9ed8\u8ba4 <code>1.0</code>\u3002\u53d6\u503c\u8303\u56f4 <code>[1.0\uff0c10.0]</code> <code>/ar/&lt;audio_sample_rate&gt;</code> integer \u5426 \u97f3\u9891\u91c7\u6837\u7387\uff0c\u5355\u4f4d Hz\uff0c\u9ed8\u8ba4\u6309\u7167\u539f\u59cb\u91c7\u6837\u7387\u5904\u7406\u3002\u53ef\u9009\u503c\uff1a<code>44100</code>\u3001<code>48000</code>\u3001<code>32000</code>\u3001<code>22050</code>\u3001<code>24000</code>\u3001<code>16000</code>\u3001<code>0</code> <code>/f/&lt;format&gt;</code> string \u5426 \u89c6\u9891\u683c\u5f0f\u3002\u5f53\u8f93\u51fa\u6587\u4ef6\u6ca1\u6709\u540e\u7f00\u65f6\uff0c\u9700\u8981\u6307\u5b9a\uff0c\u5176\u4f59\u65f6\u5019\u6839\u636e\u8f93\u51fa\u6587\u4ef6\u540e\u7f00\u540d\u81ea\u52a8\u5224\u5b9a <p>** \u6ce8 **</p> <ul> <li><code>scene</code> \u53ef\u9009\u53c2\u6570\uff1a<code>auto</code>\uff0c\u8868\u793a\u667a\u80fd\u9009\u62e9\uff1b<code>self_portrait</code>\uff0c\u8868\u793a\u81ea\u62cd\uff1b<code>animation</code>\uff0c\u8868\u793a\u52a8\u753b\uff1b<code>film_calm</code>\uff0c\u8868\u793a\u7535\u89c6\u5267\uff0c\u5305\u62ec\u7efc\u827a\u3001\u8bbf\u8c08\u3001\u5728\u7ebf\u6559\u80b2\u7b49\uff1b<code>film_dramatic</code>\uff0c\u8868\u793a\u7535\u5f71\u3002\u6ce8\u610f\uff1a<code>scene</code>\u53ea\u80fd\u662f<code>h264</code>\u4e0b\u7684\u9009\u9879\uff0c<code>h265</code>\u65e0\u9700\u4f7f\u7528<code>scene</code>\u53c2\u6570\u3002</li> <li><code>s</code> \u53c2\u6570\u6709\u4e24\u79cd\u8bbe\u7f6e\u65b9\u6cd5\uff1a1\uff09\u4f7f\u7528\u9884\u7f6e\u6a21\u677f\uff0c\u503c\u662f\u9884\u7f6e\u6a21\u677f\u7684<code>\u6a21\u677f\u540d</code>\uff0c\u5982 <code>720p(16:9)</code>\uff1b2\uff09\u81ea\u5b9a\u4e49\uff0c\u503c\u662f <code>\u5bbdx\u9ad8</code>\uff0c\u5982 <code>1280x720</code>\u3002</li> <li><code>vb</code> \u53c2\u6570\u5728\u7a84\u5e26\u9ad8\u6e05\u8f6c\u7801\u4e2d\u7981\u6b62\u4f7f\u7528\u3002</li> </ul>"},{"location":"cloud/av/#_20","title":"\u5207\u7247\u53c2\u6570","text":"\u53c2\u6570 \u7c7b\u578b \u5fc5\u9009 \u8bf4\u660e <code>/ht/&lt;hls_time&gt;</code> string \u5426 \u6bcf\u7247\u65f6\u957f\uff0c\u5355\u4f4d s\uff08\u79d2\uff09\uff0c\u9ed8\u8ba4 <code>10</code> <p>** \u6ce8 **</p> <ul> <li>\u4f7f\u7528 <code>ht</code> \u53c2\u6570\u65f6\uff0c<code>save_as</code> \u53c2\u6570\u5fc5\u987b\u4ee5 <code>.m3u8</code> \u540e\u7f00\u7ed3\u5c3e\u3002</li> </ul>"},{"location":"cloud/av/#_21","title":"\u6c34\u5370\u53c2\u6570","text":"\u53c2\u6570 \u7c7b\u578b \u5fc5\u9009 \u8bf4\u660e <code>/wmImg/&lt;watermark_img&gt;</code> string \u662f \u6c34\u5370\u56fe\u7247\u76f8\u5bf9\u8def\u5f84\uff0c\u9700\u8981\u5b89\u5168\u7684 Base64 \u7f16\u7801\u3002\u56fe\u7247\u683c\u5f0f\u652f\u6301 <code>png</code> \u548c <code>webp</code> <code>/wmGravity/&lt;wmGravity&gt;</code> string \u5426 \u6c34\u5370\u56fe\u7247\u653e\u7f6e\u65b9\u4f4d\uff0c\u9ed8\u8ba4 <code>northeast</code>\u3002\u89c1\u300c\u6ce8\u300d <code>/wmDx/&lt;watermark_dx&gt;</code> integer \u5426 \u6c34\u5370\u56fe\u7247\u6a2a\u504f\u79fb\u91cf\uff0c\u5355\u4f4d px\uff0c\u5f53 <code>wmGravity</code> \u4e3a <code>northeast</code> \u65f6\uff0c\u9ed8\u8ba4 <code>-20</code>  \u6a2a\u504f\u79fb\u91cf\u53d6\u503c\u6b63\u8d1f\u7684\u4f9d\u636e\uff1a\u5f80 <code>east</code> \u65b9\u5411\u504f\u79fb\uff0c\u4e3a\u6b63\uff1b\u5f80 <code>west</code> \u65b9\u5411\u504f\u79fb\uff0c\u4e3a\u8d1f <code>/wmDy/&lt;watermark_dy&gt;</code> integer \u5426 \u6c34\u5370\u56fe\u7247\u7eb5\u504f\u79fb\u91cf\uff0c\u5355\u4f4d px\uff0c\u5f53 <code>wmGravity</code> \u4e3a <code>northeast</code> \u65f6\uff0c\u9ed8\u8ba4 <code>15</code>  \u7eb5\u504f\u79fb\u91cf\u53d6\u503c\u6b63\u8d1f\u7684\u4f9d\u636e\uff1a\u5f80 <code>south</code> \u65b9\u5411\u504f\u79fb\uff0c\u4e3a\u6b63\uff1b\u5f80 <code>north</code> \u65b9\u5411\u504f\u79fb\uff0c\u4e3a\u8d1f <p>** \u6ce8 **</p> <ul> <li>9 \u4e2a\u65b9\u4f4d\uff1a</li> </ul> <pre><code>northwest     |     north      |     northeast\n              |                |\n              |                |\n--------------+----------------+--------------\n              |                |\nwest          |     center     |          east\n              |                |\n--------------+----------------+--------------\n              |                |\n              |                |\nsouthwest     |     south      |     southeast\n</code></pre>"},{"location":"cloud/av/#_22","title":"\u526a\u8f91\u53c2\u6570","text":"\u53c2\u6570 \u7c7b\u578b \u5fc5\u9009 \u8bf4\u660e <code>/ss/&lt;start_time&gt;</code> string \u5426 \u526a\u8f91\u5f00\u59cb\u65f6\u95f4\uff0c\u683c\u5f0f\u4e3a\u00a0<code>HH:MM:SS</code>\uff0c\u9ed8\u8ba4\u89c6\u9891\u5f00\u59cb\u65f6\u95f4 <code>/es/&lt;end_time&gt;</code> string \u5426 \u526a\u8f91\u7ed3\u675f\u65f6\u95f4\uff0c\u683c\u5f0f\u4e3a\u00a0<code>HH:MM:SS</code>\uff0c\u9ed8\u8ba4\u89c6\u9891\u7ed3\u675f\u65f6\u95f4"},{"location":"cloud/av/#_23","title":"\u89c6\u9891\u622a\u56fe","text":"\u53c2\u6570 \u7c7b\u578b \u5fc5\u9009 \u8bf4\u660e <code>type</code> string \u662f \u56fa\u5b9a\u503c\uff0c<code>thumbnail</code> <code>avopts</code> string \u662f \u89c6\u9891\u8f6c\u7801\u53c2\u6570\uff0c\u683c\u5f0f\u4e3a <code>/key1/value1/key2/value2/...</code>\uff0c\u53c2\u6570\u89c1\u300c\u622a\u56fe\u53c2\u6570\u300d <code>return_info</code> boolean \u5426 \u56de\u8c03\u4fe1\u606f\u662f\u5426\u5305\u542b\u8f93\u51fa\u6587\u4ef6\u7684\u5143\u6570\u636e\uff0c\u5143\u6570\u636e\u683c\u5f0f\u4e3a JSON\uff0c\u9ed8\u8ba4\u00a0<code>false</code> <code>save_as</code> string \u5426 \u8f93\u51fa\u6587\u4ef6\u4fdd\u5b58\u8def\u5f84\uff0c\u9ed8\u8ba4\u539f\u59cb\u89c6\u9891\u6240\u5728\u76ee\u5f55+\u7cfb\u7edf\u968f\u673a\u751f\u6210\u7684\u6587\u4ef6\u540d\u3002\u89c1\u300c\u6ce8\u300d <p>** \u622a\u56fe\u53c2\u6570 **</p> \u53c2\u6570 \u7c7b\u578b \u5fc5\u9009 \u8bf4\u660e <code>/o/&lt;thumb_single&gt;</code> boolean \u662f \u662f\u5426\u5355\u5f20\u622a\u56fe\uff0c\u5355\u5f20\u622a\u56fe\u4e3a <code>true</code>\uff0c\u591a\u5f20\u622a\u56fe\u4e3a <code>false</code> <code>/n/&lt;thumb_amount&gt;</code> integer \u662f \u622a\u56fe\u6570\u91cf\u3002\u5f53 <code>o</code> \u53c2\u6570\u4e3a\u00a0<code>false</code>\u00a0\u65f6\uff0c\u6709\u6548\uff1b\u5f53 <code>o</code> \u53c2\u6570\u4e3a\u00a0<code>true</code>\u00a0\u65f6\uff0c\u65e0\u6548 <code>/ss/&lt;thumb_start&gt;</code> string \u5426 \u622a\u56fe\u5f00\u59cb\u65f6\u95f4\uff0c\u683c\u5f0f\u4e3a\u00a0<code>HH:MM:SS</code>\uff0c\u9ed8\u8ba4\u00a0<code>00:00:00</code> <code>/es/&lt;thumb_end&gt;</code> string \u5426 \u622a\u56fe\u7ed3\u675f\u65f6\u95f4\uff0c\u683c\u5f0f\u4e3a\u00a0\u00a0<code>HH:MM:SS</code>\uff0c\u9ed8\u8ba4\u89c6\u9891\u7ed3\u675f\u65f6\u95f4\u3002\u5f53 <code>o</code> \u53c2\u6570\u4e3a\u00a0<code>true</code>\u00a0\u65f6\uff0c\u65e0\u6548 <code>/s/&lt;thumb_scale&gt;</code> string \u5426 \u622a\u56fe\u5c3a\u5bf8\uff0c\u683c\u5f0f\u4e3a <code>\u5bbd:\u9ad8</code>\uff0c\u9ed8\u8ba4\u89c6\u9891\u539f\u59cb\u5c3a\u5bf8 <code>/f/&lt;thumb_format&gt;</code> string \u5426 \u622a\u56fe\u8f93\u51fa\u683c\u5f0f\uff0c\u9ed8\u8ba4\u00a0<code>jpg</code>\u3002\u56fe\u7247\u683c\u5f0f\u652f\u6301 <code>png</code> \u548c <code>jpg</code>\u3002\u89c1\u300c\u6ce8\u300d <p>** \u6ce8 **</p> <ul> <li>\u591a\u5f20\u622a\u56fe\u65f6\uff0c\u81ea\u5b9a\u4e49 <code>save_as</code> \u53c2\u6570\u65f6\u53ea\u9700\u6307\u5b9a\u4e00\u4e2a\u4fdd\u5b58\u8def\u5f84\uff0c\u5177\u4f53\u6bcf\u5f20\u56fe\u7247\u4fdd\u5b58\u8def\u5f84\u6839\u636e\u89c4\u5219\u8fdb\u884c\u7c7b\u63a8\uff0c\u4f8b\u5982 <code>save_as</code> \u4e3a <code>/path/to/img.png</code>\uff0c\u8f93\u51fa\u6587\u4ef6\u4fdd\u5b58\u8def\u5f84\u7b2c\u4e00\u5f20\u4e3a <code>/path/to/img1.png</code>\uff0c\u7b2c\u4e8c\u5f20\u4e3a <code>/path/to/img2.png</code>......\u4ee5\u6b64\u7c7b\u63a8\u3002</li> <li>\u81ea\u5b9a\u4e49 <code>f</code> \u548c <code>save_as</code> \u53c2\u6570\u65f6\uff0c\u4f7f\u7528 <code>f</code> \u53c2\u6570\u6307\u5b9a\u7684\u683c\u5f0f\u4f5c\u4e3a\u8f93\u51fa\u683c\u5f0f\uff1b\u4ec5\u81ea\u5b9a\u4e49 <code>save_as</code> \u53c2\u6570\u65f6\uff0c\u4f7f\u7528 <code>save_as</code> \u53c2\u6570\u6307\u5b9a\u7684\u540e\u7f00\u540d\u4f5c\u4e3a\u8f93\u51fa\u683c\u5f0f\uff1b\u4e24\u8005\u90fd\u4e0d\u81ea\u5b9a\u4e49\u65f6\uff0c\u4f7f\u7528 <code>f</code> \u53c2\u6570\u7684\u9ed8\u8ba4\u503c <code>jpg</code> \u4f5c\u4e3a\u8f93\u51fa\u683c\u5f0f\u3002</li> <li>\u652f\u6301 m3u8 \u622a\u56fe\u3002</li> </ul> <p></p>"},{"location":"cloud/av/#_24","title":"\u97f3\u9891\u8f6c\u7801","text":"\u53c2\u6570 \u7c7b\u578b \u5fc5\u9009 \u8bf4\u660e <code>type</code> string \u662f \u56fa\u5b9a\u503c\uff0c<code>audio</code> <code>avopts</code> string \u662f \u89c6\u9891\u8f6c\u7801\u53c2\u6570\uff0c\u683c\u5f0f\u4e3a <code>/key1/value1/key2/value2/...</code>\uff0c\u53c2\u6570\u89c1\u300c\u53c2\u6570\u300d <code>return_info</code> boolean \u5426 \u56de\u8c03\u4fe1\u606f\u662f\u5426\u5305\u542b\u8f93\u51fa\u6587\u4ef6\u7684\u5143\u6570\u636e\uff0c\u5143\u6570\u636e\u683c\u5f0f\u4e3a JSON\uff0c\u9ed8\u8ba4\u00a0<code>false</code> <code>save_as</code> string \u5426 \u8f93\u51fa\u6587\u4ef6\u4fdd\u5b58\u8def\u5f84\uff0c\u9ed8\u8ba4\u539f\u59cb\u97f3\u9891\u6240\u5728\u76ee\u5f55+\u7cfb\u7edf\u968f\u673a\u751f\u6210\u7684\u6587\u4ef6\u540d <p>** \u6ce8 **</p> <ul> <li><code>save_as</code> \u7684\u540e\u7f00\u540d\u4f5c\u4e3a\u8f93\u51fa\u5c01\u88c5\u683c\u5f0f\u3002</li> </ul>"},{"location":"cloud/av/#_25","title":"\u5e38\u7528\u53c2\u6570","text":"\u53c2\u6570 \u7c7b\u578b \u5fc5\u9009 \u8bf4\u660e <code>/f/&lt;format&gt;</code> string \u5426 \u97f3\u9891\u683c\u5f0f\uff0c\u5f53\u8f93\u51fa\u6587\u4ef6\u6ca1\u6709\u540e\u7f00\u65f6\uff0c\u9700\u8981\u6307\u5b9a\uff0c\u5176\u4f59\u65f6\u5019\u6839\u636e\u8f93\u51fa\u6587\u4ef6\u540e\u7f00\u540d\u81ea\u52a8\u5224\u5b9a <code>/ac/&lt;audio_channel&gt;</code> integer \u5426 \u58f0\u9053\uff0c\u9ed8\u8ba4\u00a0<code>2</code> <code>/ab/&lt;audio_bitrate&gt;</code> integer \u5426 \u6bd4\u7279\u7387\uff0c\u5355\u4f4d\u00a0kbps\uff0c\u9ed8\u8ba4\u6309\u7167\u97f3\u9891\u539f\u59cb\u6bd4\u7279\u7387\u5904\u7406 <code>/vbr/&lt;audio_vbr&gt;</code> integer \u5426 Variable bitrate, \u9ed8\u8ba4\u6309\u7167\u97f3\u9891\u539f\u59cb VBR \u5904\u7406\u3002\u53d6\u503c\u8303\u56f4 <code>[0-9]</code> <code>/sm/&lt;map_metadata&gt;</code> boolean \u5426 \u662f\u5426\u4fdd\u7559\u97f3\u9891 metadata\uff0c\u9ed8\u8ba4\u00a0<code>true</code>"},{"location":"cloud/av/#_26","title":"\u526a\u8f91\u53c2\u6570","text":"<p>\u62fc\u63a5\u53c2\u6570\u4e0d\u80fd\u4e0e\u5176\u4ed6\u53c2\u6570\u6df7\u7528\uff0c\u8bf7\u6ce8\u610f\u3002\u5982\u679c\u8981\u6df7\u7528\uff0c\u8bf7\u5206\u505a\u4e24\u4e2a\u4efb\u52a1\uff0c\u4f7f\u7528\u94fe\u5f0f\u5904\u7406\u3002</p> \u53c2\u6570 \u7c7b\u578b \u5fc5\u9009 \u8bf4\u660e <code>/ss/&lt;start_time&gt;</code> string \u5426 \u526a\u8f91\u5f00\u59cb\u65f6\u95f4\uff0c\u683c\u5f0f\u4e3a\u00a0<code>HH:MM:SS</code>\uff0c\u9ed8\u8ba4\u89c6\u9891\u5f00\u59cb\u65f6\u95f4 <code>/es/&lt;end_time&gt;</code> string \u5426 \u526a\u8f91\u7ed3\u675f\u65f6\u95f4\uff0c\u683c\u5f0f\u4e3a\u00a0<code>HH:MM:SS</code>\uff0c\u9ed8\u8ba4\u89c6\u9891\u7ed3\u675f\u65f6\u95f4"},{"location":"cloud/av/#_27","title":"\u62fc\u63a5\u53c2\u6570","text":"<p>\u62fc\u63a5\u53c2\u6570\u4e0d\u80fd\u4e0e\u5176\u4ed6\u53c2\u6570\u6df7\u7528\u3002\u5982\u679c\u8981\u6df7\u7528\uff0c\u8bf7\u5206\u505a\u4e24\u4e2a\u4efb\u52a1\uff0c\u4f7f\u7528\u94fe\u5f0f\u5904\u7406\u3002</p> \u53c2\u6570 \u7c7b\u578b \u5fc5\u9009 \u8bf4\u660e <code>/i/&lt;audio&gt;</code> string \u662f \u9700\u8981\u62fc\u63a5\u97f3\u9891\u6587\u4ef6\u7684\u76f8\u5bf9\u8def\u5f84\uff0c\u9700\u8981\u5b89\u5168\u7684 Base64 \u7f16\u7801   \u591a\u4e2a\u9700\u8981\u62fc\u63a5\u97f3\u9891\u6587\u4ef6\u6309 <code>/i/&lt;audio&gt;/i/&lt;audio&gt;/...</code> \u65b9\u5f0f\u8fdb\u884c\u8fde\u63a5 <p>** \u6ce8 **</p> <ul> <li>\u97f3\u9891\u62fc\u63a5\u987a\u5e8f\uff1a\u9700\u8981\u62fc\u63a5\u97f3\u9891\u6309 <code>i</code> \u51fa\u73b0\u987a\u5e8f\uff0c\u4f9d\u6b21\u62fc\u63a5\u5728\u539f\u59cb\u97f3\u9891\uff08<code>source</code>\uff09\u540e\u9762\u3002</li> <li>\u5982\u679c <code>save_as</code> \u53c2\u6570\u6307\u5b9a\u683c\u5f0f\u8ddf\u539f\u59cb\u97f3\u9891\uff08<code>source</code>\uff09\u683c\u5f0f\u3001\u62fc\u63a5\u97f3\u9891\u683c\u5f0f\u4e0d\u4e00\u81f4\uff0c\u7cfb\u7edf\u4f1a\u81ea\u52a8\u8f6c\u7801\u539f\u59cb\u97f3\u9891\u3001\u62fc\u63a5\u97f3\u9891\u6210 <code>save_as</code> \u53c2\u6570\u6307\u5b9a\u683c\u5f0f\uff1b\u5982\u679c <code>save_as</code> \u53c2\u6570\u672a\u6307\u5b9a\uff0c\u62fc\u63a5\u97f3\u9891\u8ddf\u539f\u59cb\u97f3\u9891\u683c\u5f0f\u4e0d\u4e00\u81f4\uff0c\u7cfb\u7edf\u4f1a\u81ea\u52a8\u8f6c\u7801\u62fc\u63a5\u97f3\u9891\u6210\u539f\u59cb\u97f3\u9891\u683c\u5f0f\u3002</li> </ul> <p></p>"},{"location":"cloud/av/#_28","title":"\u5143\u6570\u636e\u83b7\u53d6","text":"<p>\u83b7\u53d6\u97f3/\u89c6\u9891\u6587\u4ef6\u7684\u5143\u4fe1\u606f\u3002</p> \u53c2\u6570 \u7c7b\u578b \u5fc5\u9009 \u8bf4\u660e <code>type</code> string \u662f \u56fa\u5b9a\u503c\uff0c<code>probe</code> <p></p>"},{"location":"cloud/av/#_29","title":"\u94fe\u5f0f\u5904\u7406","text":"<p>\u591a\u4e2a\u4efb\u52a1\u6309\u63d0\u4ea4\u4efb\u52a1\u53c2\u6570\u7684\u5148\u540e\u987a\u5e8f\uff0c\u5bf9\u539f\u6587\u4ef6\u8fdb\u884c\u94fe\u5f0f\u5904\u7406\u3002</p> \u53c2\u6570 \u7c7b\u578b \u5fc5\u9009 \u8bf4\u660e <code>type</code> string \u662f \u56fa\u5b9a\u503c\uff0c<code>chain</code> <code>avopts</code> string \u662f \u94fe\u5f0f\u5904\u7406\u53c2\u6570\uff0c\u683c\u5f0f\u4e3a <code>/type1/key1/value1/type2/key2/value2...</code>\uff0c\u53c2\u6570\u89c1\u300c\u53c2\u6570\u300d <code>return_info</code> boolean \u5426 \u56de\u8c03\u4fe1\u606f\u662f\u5426\u5305\u542b\u8f93\u51fa\u6587\u4ef6\u7684\u5143\u6570\u636e\uff0c\u5143\u6570\u636e\u683c\u5f0f\u4e3a JSON\uff0c\u9ed8\u8ba4\u00a0<code>false</code> <code>save_as</code> string \u5426 \u8f93\u51fa\u6587\u4ef6\u4fdd\u5b58\u8def\u5f84\uff0c\u9ed8\u8ba4\u539f\u59cb\u97f3\u9891\u6240\u5728\u76ee\u5f55+\u7cfb\u7edf\u968f\u673a\u751f\u6210\u7684\u6587\u4ef6\u540d <p>** \u94fe\u5f0f\u5904\u7406\u53c2\u6570 **</p> \u53c2\u6570 \u7c7b\u578b \u5fc5\u9009 \u8bf4\u660e <code>/&lt;type&gt;/&lt;avopts&gt;</code> string \u662f \u591a\u4e2a\u529f\u80fd\u6807\u8bc6 <code>type</code> \u4ee5\u53ca\u5176\u5bf9\u5e94\u7684\u5904\u7406\u53c2\u6570 <code>avopts</code> <p>** \u8bf7\u6c42\u6837\u4f8b **</p> <pre><code>{\n    \"type\": \"chain\",\n    \"avopts\": \"/video/i/Zm9vLm1wNA==/video/s/480p(16:9)/wmImg/L3Rlc3QvbG9nby5wbmc=\",\n    \"save_as\": \"/foo.jpg\"\n}\n</code></pre> <p>\u4e0a\u8ff0\u4efb\u52a1\u5148\u89e3\u6790 <code>/video/i/Zm9vLm1wNA==</code> \u90e8\u5206\uff0c\u548c\u6e90\u89c6\u9891\u8fdb\u884c\u62fc\u63a5\uff1b\u4e4b\u540e\u89e3\u6790 <code>/video/s/480p(16:9)/vb/300/r/25/vcodec/libx264/wmImg/L3Rlc3QvbG9nby5wbmc=</code>\uff0c\u5c06\u4e0a\u4e00\u6b65\u8f93\u51fa\u7684\u89c6\u9891\u7684\u5206\u8fa8\u7387\u8f6c\u7801\u6210 480p(16:9) \u5e76\u540c\u65f6\u52a0\u4e0a\u6c34\u5370\uff1b\u6700\u540e\u8f93\u51fa\u6587\u4ef6\u4fdd\u5b58\u81f3 <code>/foo.mp4</code>\u3002</p> <p>** \u6ce8 **</p> <ul> <li>\u6700\u591a\u5305\u542b 4 \u4e2a\u5b50\u4efb\u52a1\u3002</li> <li>\u622a\u56fe\u4efb\u52a1\u3001\u89c6\u9891\u5207\u7247\u4efb\u52a1\u4e0d\u4ea7\u751f\u97f3\u89c6\u9891\u8f93\u51fa\u7684\u4efb\u52a1\uff0c\u4ec5\u5141\u8bb8\u653e\u7f6e\u5728\u5b50\u4efb\u52a1\u5217\u8868\u7684\u672b\u5c3e\u3002</li> </ul> <p>\u5982\u6709\u7591\u95ee\u8bf7 \u8054\u7cfb\u6211\u4eec</p>"},{"location":"cloud/av_pretreatment/","title":"\u97f3\u89c6\u9891\u5904\u7406\uff08\u5df2\u5f03\u7528\uff09","text":"<p>** \u8be5\u6587\u6863\u4e3a\u65e7\u7248\u5f02\u6b65\u89c6\u9891\u5904\u7406\u6587\u6863\uff0c\u65b0\u7248\u8bf7\u53c2\u8003 \u5f02\u6b65\u97f3\u89c6\u9891\u5904\u7406\u6587\u6863 **</p> <p>\u89c6\u9891\u9884\u5904\u7406\u63a5\u53e3\u662f\u7528\u4e8e\u5904\u7406\u5df2\u7ecf\u4e0a\u4f20\u5230\u5bf9\u5e94\u5b58\u50a8\u7a7a\u95f4\u4e2d\u7684\u89c6\u9891\u6587\u4ef6\uff0c\u8fdb\u884c\u8f6c\u7801\u3001\u622a\u56fe\u7b49\u64cd\u4f5c\u3002\u5728\u5904\u7406\u5b8c\u6210\u4e4b\u540e\uff0c\u5f02\u6b65\u901a\u77e5\u7528\u6237\u5904\u7406\u7ed3\u679c\u3002</p> <p>\u6ce8\uff1a \u6587\u4e2d\u6240\u6709 <code>&lt;&gt;</code> \u6807\u6ce8\u7684\u5b57\u6bb5\uff0c\u5747\u9700\u6839\u636e\u4f60\u7684\u5b9e\u9645\u60c5\u51b5\u66ff\u6362\uff08\u65e0\u9700 <code>&lt;&gt;</code> \u7b26\u53f7\uff0c\u4ec5\u4f5c\u6807\u6ce8\u4e4b\u7528\uff09</p>"},{"location":"cloud/av_pretreatment/#api","title":"API \u57fa\u672c\u57df\u540d","text":"<pre><code>p0.api.upyun.com\n</code></pre>"},{"location":"cloud/av_pretreatment/#_1","title":"\u8bf7\u6c42\u65b9\u6cd5","text":"<pre><code>curl -X POST \\\n    http://p0.api.upyun.com/pretreatment/ \\\n    -H \"Authorization: UPYUN &lt;operator&gt;:&lt;signature&gt;\" \\\n    -H \"Date: Wed, 29 Oct 2014 02:26:58 GMT\"\n    # \u5176\u4ed6\u53ef\u9009\u53c2\u6570...\n</code></pre>"},{"location":"cloud/av_pretreatment/#_2","title":"\u6388\u6743\u8ba4\u8bc1","text":"<p>\u8c03\u7528\u89c6\u9891\u5904\u7406\u63a5\u53e3\u9700\u8981\u8fdb\u884c\u6388\u6743\u8ba4\u8bc1\uff0c\u901a\u8fc7\u5728 HTTP Request Header \u4e2d\u6dfb\u52a0 <code>Authorization</code> \u7684\u65b9\u5f0f\u6765\u8fdb\u884c\u6743\u9650\u9a8c\u8bc1\uff1a</p> <pre><code>Authorization: UPYUN &lt;operator&gt;:&lt;signature&gt;\n</code></pre> <p>\u5176\u4e2d <code>operator</code> \u4e3a\u64cd\u4f5c\u5458\u540d\u79f0\uff0c<code>signature</code> \u4e3a\u6839\u636e\u53c2\u6570\u8ba1\u7b97\u51fa\u6765\u7684\u7b7e\u540d\u3002</p>"},{"location":"cloud/av_pretreatment/#_3","title":"\u8bf7\u6c42\u7b7e\u540d","text":"<p>\u6388\u6743\u8ba4\u8bc1\u8fc7\u7a0b\u4e2d\u7684 <code>signature</code> \u53c2\u6570\u901a\u8fc7\u4e0b\u9762\u7684\u65b9\u5f0f\u83b7\u5f97\uff1a</p> <p>1. \u5c06\u53c2\u6570\u6309\u7167\u53c2\u6570\u540d\u79f0\u7684\u5b57\u5178\u5e8f\u6392\u5e8f\u540e\uff0c\u5c06\u53c2\u6570\u952e\u503c\u5bf9\u8fde\u63a5\u6210\u4e00\u4e2a\u5b57\u7b26\u4e32\uff1b 2. \u5c06\u7b2c\u4e00\u6b65\u751f\u6210\u7684\u5b57\u7b26\u4e32\u6309\u7167\u4e0b\u9762\u7684\u89c4\u5219\u8fdb\u884c\u8fde\u63a5\uff0c\u83b7\u53d6\u5f85\u7b7e\u540d\u5b57\u7b26\u4e32\uff1a</p> <pre><code>&lt;operator_name&gt;&lt;signature_string&gt;&lt;md5_operator_password&gt;\n</code></pre> <p>\u5176\u4e2d\uff0c<code>operator_name</code> \u4e3a\u7528\u4e8e\u8ba4\u8bc1\u6388\u6743\u7684\u64cd\u4f5c\u5458\u540d\uff0c<code>signature_string</code> \u4e3a\u7b2c\u4e00\u6b65\u751f\u6210\u7684\u5b57\u7b26\u4e32\uff0c <code>md5_operator_password</code> \u4e3a\u5bf9\u64cd\u4f5c\u5458\u5bc6\u7801\u8fdb\u884c md5 \u8ba1\u7b97\u4e4b\u540e\u5f97\u5230\u7684\u5b57\u7b26\u4e32\uff1b</p> <p>3. \u5bf9\u7b2c\u4e8c\u6b65\u751f\u6210\u7684\u5b57\u7b26\u4e32\u505a md5 \u8ba1\u7b97\uff0c\u5f97\u5230\u6700\u7ec8\u7684 <code>signature</code> \u503c\u3002</p> <p>\u7279\u522b\u5730\uff0c\u53c2\u6570\u5b57\u7b26\u4e32\u90fd\u5fc5\u987b\u4f7f\u7528 <code>utf-8</code> \u7f16\u7801\u5904\u7406\u3002</p> <p>\u5047\u8bbe\u63a5\u53e3\u63d0\u4ea4\u5982\u4e0b\u53c2\u6570\uff1a</p> <pre><code>bucket_name: 'imtester'\ntasks: 'W3sidHlwZSI6InZpZGVvIiwiYml0cmF0ZSI6IjUwMCIsInJvdGF0ZSI6ImF1dG8iLCJmb3JtYXQiOiJtcDQifSx7InR5cGUiOiJ0aHVtYm5haWwiLCJ0aHVtYl9zaWdubGUiOmZhbHNlLCJ0aHVtYl9hbW91bnQiOjEwMCwiZm9ybWF0IjoicG5nIn1d'\nnotify_url: 'http://www.example.com/notify/'\nsource: '/video/20130514_190031.mp4'\n</code></pre> <p>\u7528\u4e8e\u6388\u6743\u9a8c\u8bc1\u7684\u64cd\u4f5c\u5458\u540d\u4e3a <code>operator_tester</code> \uff0c\u64cd\u4f5c\u5458\u5bc6\u7801\u4e3a <code>tester_password</code>\u3002</p> <p>\u9996\u5148\u6839\u636e\u53c2\u6570\u540d\u79f0\u7684\u5b57\u6bb5\u987a\u5e8f\u8fdb\u884c\u6392\u5e8f\uff1a</p> <pre><code>bucket_name: 'imtester'\nnotify_url: 'http://www.example.com/notify/'\nsource: '/video/20130514_190031.mp4'\ntasks: 'W3sidHlwZSI6InZpZGVvIiwiYml0cmF0ZSI6IjUwMCIsInJvdGF0ZSI6ImF1dG8iLCJmb3JtYXQiOiJtcDQifSx7InR5cGUiOiJ0aHVtYm5haWwiLCJ0aHVtYl9zaWdubGUiOmZhbHNlLCJ0aHVtYl9hbW91bnQiOjEwMCwiZm9ybWF0IjoicG5nIn1d'\n</code></pre> <p>\u5c06\u6392\u5e8f\u540e\u7684\u53c2\u6570\u952e\u503c\u5bf9\u8fde\u63a5\u6210\u4e00\u4e2a\u5b57\u7b26\u4e32\uff0c\u5f97\u5230\uff1a</p> <pre><code>bucket_nameimtesternotify_urlhttp://www.example.com/notify/source/video/20130514_190031.mp4tasksW3sidHlwZSI6InZpZGVvIiwiYml0cmF0ZSI6IjUwMCIsInJvdGF0ZSI6ImF1dG8iLCJmb3JtYXQiOiJtcDQifSx7InR5cGUiOiJ0aHVtYm5haWwiLCJ0aHVtYl9zaWdubGUiOmZhbHNlLCJ0aHVtYl9hbW91bnQiOjEwMCwiZm9ybWF0IjoicG5nIn1d\n</code></pre> <p>\u8fde\u63a5\u64cd\u4f5c\u5458\u540d\u548c\u8fdb\u884c md5 \u8ba1\u7b97\u4e4b\u540e\u7684\u64cd\u4f5c\u5458\u5bc6\u7801\uff1a</p> <pre><code>operator_testerbucket_nameimtesternotify_urlhttp://www.example.com/notify/source/video/20130514_190031.mp4tasksW3sidHlwZSI6InZpZGVvIiwiYml0cmF0ZSI6IjUwMCIsInJvdGF0ZSI6ImF1dG8iLCJmb3JtYXQiOiJtcDQifSx7InR5cGUiOiJ0aHVtYm5haWwiLCJ0aHVtYl9zaWdubGUiOmZhbHNlLCJ0aHVtYl9hbW91bnQiOjEwMCwiZm9ybWF0IjoicG5nIn1d97b5a9d718b7a2064f7e7673c4d8bcb8\n</code></pre> <p>\u5c06\u5f97\u5230\u7684\u5b57\u7b26\u4e32\u8fdb\u884c md5 \u8ba1\u7b97\uff0c\u5f97\u5230\u6700\u7ec8\u7684 <code>signature</code> \u503c\u4e3a <code>ad91a9ab81ecc34e973844a6723ce354</code></p> <p>\u7279\u522b\u5730\uff0c<code>signature</code> \u53c2\u6570\u4e0d\u53c2\u4e0e\u7b7e\u540d\u8ba1\u7b97\u3002</p> <p></p>"},{"location":"cloud/av_pretreatment/#_4","title":"\u56de\u8c03\u7b7e\u540d","text":"<p>signature \u7684\u8ba1\u7b97\u65b9\u6cd5\uff1a</p> <pre><code>md5(&lt;operator_name&gt;&lt;md5_operator_password&gt;&lt;task_id&gt;&lt;timestamp&gt;), \u5e76\u53d6\u4e2d\u95f4 16 \u4f4d\u3002\n</code></pre>"},{"location":"cloud/av_pretreatment/#_5","title":"\u89c6\u9891\u5904\u7406","text":"<p>\u63d0\u4ea4\u89c6\u9891\u5904\u7406\u8bf7\u6c42\u5230\u5904\u7406\u961f\u5217\uff0c\u5904\u7406\u5b8c\u6210\u4e4b\u540e\u5f02\u6b65\u56de\u8c03\u901a\u77e5\u7528\u6237</p>"},{"location":"cloud/av_pretreatment/#_6","title":"\u8bf7\u6c42\u5730\u5740","text":"<p>http://p0.api.upyun.com/pretreatment/</p>"},{"location":"cloud/av_pretreatment/#_7","title":"\u8bf7\u6c42\u65b9\u6cd5","text":"<p>POST\uff0c\u9700\u8981\u8fdb\u884c\u6388\u6743\u9a8c\u8bc1</p>"},{"location":"cloud/av_pretreatment/#_8","title":"\u8bf7\u6c42\u53c2\u6570","text":"\u53c2\u6570 \u7c7b\u578b \u5fc5\u9009 \u53c2\u6570\u8bf4\u660e bucket_name string true \u7a7a\u95f4\u540d\u79f0\uff0c\u5373\u8981\u5904\u7406\u7684\u6587\u4ef6\u6240\u5728\u7684\u7a7a\u95f4 source string true \u5f85\u5904\u7406\u6e90\u6587\u4ef6\u8def\u5f84 notify_url string true \u5f02\u6b65\u56de\u8c03\u5730\u5740\uff0c\u5728\u5904\u7406\u5b8c\u6210\u4e4b\u540e\u5c06\u4f1a\u8fdb\u884c\u5f02\u6b65\u901a\u77e5 tasks string true \u63d0\u4ea4\u7684\u4efb\u52a1\u6570\u636e\uff0cbase64 \u5904\u7406\u4e4b\u540e\u7684\u5b57\u7b26\u4e32 accept string false \u5982\u679c\u6307\u5b9a\u4e3a <code>json</code>\uff0c\u5219\u5728\u56de\u8c03\u65f6\u4f1a\u8fd4\u56de <code>application/json</code> \u683c\u5f0f\u7684\u5185\u5bb9\uff0c\u5426\u5219\u8fd4\u56de <code>application/x-www-form-urlencoded</code> \u683c\u5f0f\u7684\u5185\u5bb9 <p><code>tasks</code> \u53c2\u6570\u901a\u8fc7\u4e0b\u9762\u4e09\u4e2a\u6b65\u9aa4\u751f\u6210\uff1a</p> <p>1. \u7ec4\u88c5\u4e1a\u52a1\u53c2\u6570\uff0c\u6bcf\u6b21\u6700\u591a\u53ef\u4ee5\u63d0\u4ea4 10 \u7ec4\u5904\u7406\u53c2\u6570\uff1b</p> <pre><code>[\n    {\n        type: 'video',\n        bitrate: 4000,\n        ...\n    },\n    ...\n]\n</code></pre> <p>2. \u5c06\u4e1a\u52a1\u53c2\u6570\u8f6c\u6362\u4e3a JSON \u5b57\u7b26\u4e32\uff1b</p> <p>3. \u5bf9\u7b2c\u4e8c\u6b65\u751f\u6210\u7684\u5b57\u7b26\u4e32\u8fdb\u884c base64 encode \u5904\u7406\u3002</p>"},{"location":"cloud/av_pretreatment/#_9","title":"\u5904\u7406\u53c2\u6570","text":"<p>\u53c8\u62cd\u4e91\u7684\u89c6\u9891\u5904\u7406\u670d\u52a1\u76ee\u524d\u652f\u6301\u56db\u79cd\u7c7b\u578b\u7684\u5904\u7406\u8bf7\u6c42\uff1a</p> <ul> <li>\u89c6\u9891\u8f6c\u7801</li> <li>HLS \u5207\u5272</li> <li>\u89c6\u9891\u622a\u56fe</li> <li>\u89c6\u9891\u4fe1\u606f\u83b7\u53d6</li> </ul> <p>\u5176\u4e2d\uff0c<code>\u89c6\u9891\u4fe1\u606f\u8bfb\u53d6</code> \u7684\u4efb\u52a1\u53ef\u7528\u4e8e\u83b7\u53d6\u7a7a\u95f4\u5185\u7684\u4efb\u4e00\u89c6\u9891\u6587\u4ef6\u7684\u6e90\u4fe1\u606f</p> <p>1. \u89c6\u9891\u8f6c\u7801</p> \u53c2\u6570 \u7c7b\u578b \u5fc5\u9009 \u53c2\u6570\u8bf4\u660e type string true \u5904\u7406\u7c7b\u578b\uff0c\u8fdb\u884c\u89c6\u9891\u8f6c\u7801\u65f6\u503c\u5fc5\u987b\u4e3a <code>video</code> bitrate integer false \u89c6\u9891\u6bd4\u7279\u7387\uff0c\u5355\u4f4d <code>kbit/s</code>\uff0c\u9ed8\u8ba4\u6309\u7167\u89c6\u9891\u539f\u59cb\u6bd4\u7279\u7387\u5904\u7406 scale string false \u89c6\u9891\u5206\u8fa8\u7387\uff0c\u683c\u5f0f <code>1024:768</code>\uff0c\u9ed8\u8ba4\u6309\u7167\u539f\u59cb\u5206\u8fa8\u7387\u5904\u7406 auto_scale boolean false \u662f\u5426\u6839\u636e\u5206\u8fa8\u7387\u81ea\u52a8\u8c03\u6574\u89c6\u9891\u957f\u5bbd\u6bd4\u4f8b\uff0c\u4ec5\u5f53\u4f20\u9012\u4e86 <code>scale</code> \u53c2\u6570\u65f6\u6709\u6548 frame_rate integer false \u5e27\u7387\uff0c\u65e2\u6bcf\u79d2\u663e\u793a\u7684\u5e27\u6570\uff0c\u5e38\u7528\u5e27\u7387\uff1a\"24\"\u3001\"25\"\u3001\"30\"\u7b49\uff0c\u9ed8\u8ba4\u6309\u7167\u539f\u59cb\u5e27\u7387\u5904\u7406 rotate string false \u65cb\u8f6c\u89d2\u5ea6\uff0c\u9ed8\u8ba4\u6309\u7167\u539f\u59cb\u89c6\u9891\u89d2\u5ea6\u5904\u7406 map_metadata boolean false \u662f\u5426\u4fdd\u7559\u89c6\u9891 meta \u4fe1\u606f\uff0c\u9ed8\u8ba4\u503c <code>true</code> audio_codec string false \u8bbe\u7f6e\u97f3\u9891\u7f16\u7801\u5668,  \u53ef\u9009: \"libmp3lame\", \"libfdk_aac\", \"copy\" video_codec string false \u8bbe\u7f6e\u89c6\u9891\u7f16\u7801\u5668, \u53ef\u9009: \"libx264\", \"libtheora\", \"copy\" disable_audio boolean false \u662f\u5426\u7981\u6389\u97f3\u9891\uff0c\u9ed8\u8ba4 <code>false</code> disable_video boolean false \u662f\u5426\u7981\u6389\u89c6\u9891\uff0c\u9ed8\u8ba4 <code>false</code> format string false \u89c6\u9891\u8f93\u51fa\u683c\u5f0f\uff0c\u652f\u6301 mp4/flv\uff0c\u9ed8\u8ba4\u6309\u7167\u539f\u59cb\u683c\u5f0f\u8f93\u51fa accelerate_factor float false \u8bbe\u7f6e\u89c6\u9891\u52a0\u901f\u7684\u500d\u6570\uff0c\u53d6\u503c\u8303\u56f4\uff3b1.0\uff0c10.0\uff3d\u8fd9\u4e2a\u503c\u662f\u4e00\u4e2a\u6d6e\u70b9\u6570\uff0c\u53ef\u4ee5\u662f <code>2.5</code>\uff0c\u8868\u793a\u52a0\u901f 2.5 \u500d save_as string false \u8f6c\u7801\u540e\u8f93\u51fa\u7684\u6587\u4ef6\u4fdd\u5b58\u8def\u5f84\uff08\u540c\u4e00\u4e2a\u7a7a\u95f4\u4e0b\uff09\uff0c\u5982\u679c\u6ca1\u6709\u4f20\u9012\uff0c\u4f1a\u6839\u636e\u8bf7\u6c42\u7684\u53c2\u6570\u751f\u6210\u4e00\u4e2a\u6587\u4ef6\u540d\u4fdd\u5b58\u5728\u539f\u59cb\u6587\u4ef6\u540c\u76ee\u5f55\u4e0b return_info boolean false \u662f\u5426\u8fd4\u56de\u89c6\u9891\u5143\u6570\u636e\uff0c\u4ec5\u5f53\u5904\u7406\u7c7b\u578b\u4e3a <code>video</code> \u65f6\u6709\u6548\uff0c\u9ed8\u8ba4 <code>false</code> start_time string false \u89c6\u9891\u8d77\u59cb\u5904\u7406\u65f6\u95f4\uff0c\u683c\u5f0f <code>HH:MM:SS</code>\uff0c\u9ed8\u8ba4\u4e3a\u89c6\u9891\u5f00\u59cb end_time string false \u89c6\u9891\u7ed3\u675f\u5904\u7406\u65f6\u95f4\uff0c\u683c\u5f0f <code>HH:MM:SS</code>\uff0c\u9ed8\u8ba4\u4e3a\u89c6\u9891\u7ed3\u675f watermark_img string false \u6c34\u5370\u56fe\u7247\u8def\u5f84\uff0c\u5efa\u8bae\u4f7f\u7528 png \u683c\u5f0f\u56fe\u7247\uff0c\u6682\u65f6\u4e0d\u652f\u6301\u5916\u94fe watermark_gravity string false \u6c34\u5370\u56fe\u7247\u4f4d\u7f6e\uff0c\u652f\u6301 <code>NorthWest</code>\uff0c<code>North</code>\uff0c<code>NorthEast</code>\uff0c<code>West</code>\uff0c<code>Center</code>\uff0c<code>East</code>\uff0c<code>SouthWest</code>\uff0c<code>South</code>\uff0c<code>SouthEast</code>\uff0c\u9ed8\u8ba4 <code>NorthEast</code> watermark_dx int false \u6c34\u5370\u56fe\u7247\u6a2a\u5750\u6807\u504f\u79fb\u91cf\uff0c\u5355\u4f4d px\uff0c\u5f53\u6c34\u5370\u4f4d\u7f6e\u4e3a NorthEast \u65f6\uff0c\u9ed8\u8ba4\u503c\u4e3a -20. \u5176\u4f59\u60c5\u51b5\u4e0b\u9ed8\u8ba4\u503c\u4e3a 0 watermark_dy int false \u6c34\u5370\u56fe\u7247\u7eb5\u5750\u6807\u504f\u79fb\u91cf\uff0c\u5355\u4f4d px\uff0c\u5f53\u6c34\u5370\u4f4d\u7f6e\u4e3a NorthEast \u65f6\uff0c\u9ed8\u8ba4\u503c\u4e3a 15. \u5176\u4f59\u60c5\u51b5\u4e0b\u9ed8\u8ba4\u503c\u4e3a 0 <p>2. HLS \u8f6c\u7801\u5207\u7247 HLS\uff08HTTP Live Streaming\uff09 \u8f6c\u7801\u5207\u5272\u5904\u7406\u9664\u4e86 <code>hls_time</code> \u4e4b\u5916\u5176\u4ed6\u53c2\u6570\u4e0e\u666e\u901a\u89c6\u9891\u8f6c\u7801\u4e00\u81f4</p> \u53c2\u6570 \u7c7b\u578b \u5fc5\u9009 \u53c2\u6570\u8bf4\u660e type string true \u5904\u7406\u7c7b\u578b\uff0c\u8fdb\u884c hls \u5207\u7247\u65f6\u503c\u5fc5\u987b\u4e3a <code>hls</code> hls_time string true \u6307\u5b9a\u5207\u5272\u7684\u65f6\u95f4\u7247\u957f\u5ea6 <p>3. \u89c6\u9891\u622a\u56fe</p> \u53c2\u6570 \u7c7b\u578b \u5fc5\u9009 \u53c2\u6570\u8bf4\u660e type string true \u5904\u7406\u7c7b\u578b\uff0c\u622a\u56fe\u65f6\u503c\u5fc5\u987b\u4e3a <code>thumbnail</code> thumb_single boolean true \u662f\u5426\u4ec5\u622a\u53d6\u5355\u5f20\u56fe\u7247\uff0c\u9ed8\u8ba4\u503c <code>true</code> thumb_amount integer false \u622a\u56fe\u6570\u91cf\uff0c\u5f53 thumb_single \u53c2\u6570\u7684\u503c\u4e3a <code>false</code> \u65f6\uff0c\u672c\u53c2\u6570\u4e3a\u5fc5\u987b thumb_start string false \u622a\u56fe\u5f00\u59cb\u65f6\u95f4\uff0c\u683c\u5f0f\u4e3a <code>00:04:13</code>\uff0c\u9ed8\u8ba4\u503c\u4e3a <code>00:00:00</code> thumb_end string false \u622a\u56fe\u7ed3\u675f\u65f6\u95f4\uff0c\u683c\u5f0f\u4e3a <code>00:09:13</code>\uff0c\u9ed8\u8ba4\u503c\u4e3a\u89c6\u9891\u7ed3\u675f\u65f6\u95f4 thumb_scale string false \u622a\u56fe\u5c3a\u5bf8\uff0c\u683c\u5f0f\u4e3a <code>1024:768</code>\uff0c\u9ed8\u8ba4\u503c\u4e3a\u89c6\u9891\u539f\u59cb\u5c3a\u5bf8 thumb_format string false \u622a\u56fe\u8f93\u51fa\u683c\u5f0f\uff0c\u652f\u6301 png/jpg \u683c\u5f0f\uff0c\u9ed8\u8ba4 <code>jpg</code> <p>4. \u89c6\u9891\u5143\u6570\u636e\u83b7\u53d6</p> \u53c2\u6570 \u7c7b\u578b \u5fc5\u9009 \u53c2\u6570\u8bf4\u660e type string true \u5904\u7406\u7c7b\u578b\uff0c\u83b7\u53d6\u89c6\u9891\u6587\u4ef6\u5143\u6570\u636e\u65f6\u503c\u5fc5\u987b\u4e3a <code>probe</code> <p>5. \u97f3\u9891\u8f6c\u7801</p> \u53c2\u6570 \u7c7b\u578b \u5fc5\u9009 \u53c2\u6570\u8bf4\u660e type string true \u5904\u7406\u7c7b\u578b\uff0c\u8fdb\u884c\u97f3\u9891\u8f6c\u7801\u65f6\u503c\u5fc5\u987b\u4e3a <code>audio</code> format string false \u97f3\u9891\u8f93\u51fa\u683c\u5f0f\uff0c\u652f\u6301 mp4/mp3\uff0c\u9ed8\u8ba4\u6309\u7167\u539f\u59cb\u683c\u5f0f\u8f93\u51fa audio_channel integer false \u58f0\u9053\uff0c\u9ed8\u8ba4 <code>2</code> audio_bitrate integer false \u6bd4\u7279\u7387\uff0c\u5982 <code>64</code> audio_vbr integer false variable bitrate [0-9] map_metadata boolean false \u662f\u5426\u4fdd\u7559\u89c6\u9891 meta \u4fe1\u606f\uff0c\u9ed8\u8ba4\u503c <code>true</code> start_time string false \u97f3\u9891\u8d77\u59cb\u5904\u7406\u65f6\u95f4\uff0c\u683c\u5f0f <code>HH:MM:SS</code>\uff0c\u9ed8\u8ba4\u4e3a\u89c6\u9891\u5f00\u59cb end_time string false \u97f3\u9891\u7ed3\u675f\u5904\u7406\u65f6\u95f4\uff0c\u683c\u5f0f <code>HH:MM:SS</code>\uff0c\u9ed8\u8ba4\u4e3a\u89c6\u9891\u7ed3\u675f"},{"location":"cloud/av_pretreatment/#_10","title":"\u8fd4\u56de\u7ed3\u679c","text":"<p>\u6210\u529f\u63d0\u4ea4\u5904\u7406\u8bf7\u6c42\u4e4b\u540e\uff0c\u63a5\u53e3\u4f1a\u9488\u5bf9\u63d0\u4ea4\u7684\u5904\u7406\u4efb\u52a1\u8fd4\u56de\u4e00\u7ec4\u552f\u4e00\u7684 <code>task_id</code>\uff0c\u53ef\u4ee5\u6839\u636e\u8fd9\u4e2a <code>task_id</code> \u67e5\u8be2\u5904\u7406\u8fdb\u5ea6\u3002</p> <pre><code>[\n    '35f0148d414a688a275bf915ba7cebb2',\n    '98adbaa52b2f63d6d7f327a0ff223348',\n    ...\n]\n\n</code></pre> <p>\u7279\u522b\u5730\uff0c\u8fd4\u56de\u7684 <code>task_id</code> \u7684\u987a\u5e8f\u4e0e\u63d0\u4ea4\u7684\u4efb\u52a1\u53c2\u6570 <code>tasks</code> \u91cc\u7684\u4efb\u52a1\u987a\u5e8f\u5339\u914d\u5bf9\u5e94\u3002</p>"},{"location":"cloud/av_pretreatment/#_11","title":"\u5904\u7406\u7ed3\u679c\u56de\u8c03\u901a\u77e5","text":"<p>\u5f53\u89c6\u9891\u5904\u7406\u5b8c\u6210\u4e4b\u540e\uff0c\u7cfb\u7edf\u5c06\u6839\u636e\u4efb\u52a1\u63d0\u4ea4\u65f6\u7684 <code>notify_url</code> \u53c2\u6570\uff0c\u5c06\u5904\u7406\u7ed3\u679c\u4ee5 <code>HTTP POST</code> \u8bf7\u6c42\u8fdb\u884c\u56de\u8c03\u901a\u77e5\u3002</p>"},{"location":"cloud/av_pretreatment/#_12","title":"\u56de\u8c03\u53c2\u6570","text":"\u53c2\u6570 \u7c7b\u578b \u53c2\u6570\u8bf4\u660e bucket_name string \u89c6\u9891\u6587\u4ef6\u6240\u5728\u7a7a\u95f4\u540d status_code integer \u5904\u7406\u7ed3\u679c\u72b6\u6001\u7801\uff0c<code>200</code> \u8868\u793a\u6210\u529f\u5904\u7406 path array \u751f\u6210\u7684\u76ee\u6807\u6587\u4ef6\u4fdd\u5b58\u8def\u5f84 description string \u5904\u7406\u7ed3\u679c\u63cf\u8ff0 task_id string \u4efb\u52a1\u5bf9\u5e94\u7684 <code>task_id</code> info string \u89c6\u9891\u6587\u4ef6\u7684\u5143\u6570\u636e\u4fe1\u606f\uff0c\u7ecf\u8fc7 base64 \u5904\u7406\u8fc7\u4e4b\u540e\u7684 JSON \u5b57\u7b26\u4e32\uff0c\u4ec5\u5f53\u63d0\u89c6\u9891\u8f6c\u7801\u4efb\u52a1\uff0c\u4e14\u5904\u7406\u53c2\u6570\u4e2d\u5305\u542b <code>return_info</code> \u4e14\u503c\u4e3a <code>true</code> \u65f6\u8fd4\u56de signature string \u56de\u8c03\u9a8c\u8bc1\u7b7e\u540d <p>\u56de\u8c03\u9a8c\u8bc1\u7b7e\u540d\u7684\u8ba1\u7b97\u65b9\u6cd5\u4e0e\u8ba4\u8bc1\u6388\u6743\u7684\u8ba1\u7b97\u65b9\u5f0f\u76f8\u540c\u3002\u7279\u522b\u5730\uff0c\u56e0\u4e3a <code>path</code> \u53c2\u6570\u8fd4\u56de\u7684\u6570\u636e\u662f\u4e00\u4e2a\u6570\u7ec4\uff0c \u5728\u8ba1\u7b97\u7b7e\u540d\u7684\u65f6\u5019\uff0c\u5c06\u5176\u4f7f\u7528\u7a7a\u5b57\u7b26\u4e32\u8fde\u63a5\u4e4b\u540e\u518d\u8ba1\u7b97\u7b7e\u540d\u3002</p> <p>\u5904\u7406\u7ed3\u679c\u72b6\u6001\u7801 \u5b57\u6bb5\u8bf4\u660e</p> <p><code>status_cod</code> \u8868\u793a\u8f6c\u7801\u540e\u7684\u72b6\u6001\u7801</p> \u72b6\u6001\u7801 \u8bf4\u660e 200 \u8f6c\u7801\u6210\u529f 400 \u63d0\u4ea4\u7684\u4efb\u52a1\u683c\u5f0f\u4e0d\u5408\u6cd5\u6216\u8005\u539f\u6587\u4ef6\u4e0d\u5408\u6cd5 406 \u7528\u6237\u6307\u5b9a\u7684\u8f6c\u7801\u7684\u53c2\u6570\u9519\u8bef 500 \u8f6c\u7801\u51fa\u73b0\u9519\u8bef 504 \u8f6c\u7801\u8d85\u65f6 <p>info \u5b57\u6bb5\u8bf4\u660e \u5bf9 <code>info</code> \u7684\u503c\u8fdb\u884c base64 \u89e3\u7801\u548c JSON \u8f6c\u6362\u4e4b\u540e\uff0c\u5f97\u5230\u4e0b\u9762\u7684\u6570\u636e\uff1a</p> <pre><code>{\n    streams: [\n        {\n            index: 0,\n            video_fps: 30.0,\n            type: \"video\",\n            video_height: 150,\n            codec: \"h264\",\n            bitrate: 65304,\n            duration: 12.866667,\n            video_width: 150,\n            codec_desc: \"H.264 / AVC / MPEG-4 AVC / MPEG-4 part 10\",\n            metadata: {\n                handler_name: \"VideoHandler\",\n                language: \"und\"\n            }\n        },\n        {\n            index: 1,\n            audio_channels: 1,\n            audio_samplerate: 44100.0,\n            codec_desc: \"AAC (Advanced Audio Coding)\",\n            codec: \"aac\",\n            bitrate: 128107, \"duration: 11.971338,\n            type: \"audio\",\n            metadata: {\n                handler_name: \"SoundHandler\",\n                language: \"und\"\n            }\n        }\n    ],\n    format: {\n        duration: 12.867,\n        fullname: \"QuickTime / MOV\",\n        bitrate: 193359.0,\n        format: \"mov,mp4,m4a,3gp,3g2,mj2\"\n    }\n}\n</code></pre> <p>1. <code>format</code> \u5b57\u6bb5\u8bf4\u660e</p> \u540d\u79f0 \u7c7b\u578b \u8bf4\u660e duration float \u6587\u4ef6\u957f\u5ea6 fullname string \u683c\u5f0f\u8be6\u7ec6\u540d\u5b57 bitrate float \u603b\u6bd4\u7279\u7387 format string \u683c\u5f0f\u7b80\u79f0 filesize integer \u6587\u4ef6\u5927\u5c0f <p>2. <code>stream</code> \u5b57\u6bb5\u8bf4\u660e</p> \u540d\u79f0 \u7c7b\u578b \u8bf4\u660e index int stream \u7684 index type string \u6d41\u7684\u7c7b\u578b codec string \u7f16\u7801\u89e3\u7801\u5668 codec_desc string \u7f16\u7801\u89e3\u7801\u5668\u7684\u5168\u540d duration float \u6d41\u7684\u957f\u5ea6 metadata object \u539f\u6570\u636e bitrate float \u6bd4\u7279\u7387 attached_pic mixed (0, 1 or None) is stream a poster image? video_width integer \u89c6\u9891\u7684\u5bbd video_height integer \u89c6\u9891\u7684\u9ad8 video_fps integer \u89c6\u9891\u7684\u5e27\u7387 audio_channels integer \u97f3\u8f68\u7684\u6570\u91cf audio_samplerate float \u91c7\u6837\u7387"},{"location":"cloud/av_pretreatment/#_13","title":"\u5904\u7406\u8fdb\u5ea6\u67e5\u8be2","text":"<p>\u6839\u636e <code>task_id</code> \u67e5\u8be2\u4efb\u52a1\u5904\u7406\u8fdb\u5ea6</p>"},{"location":"cloud/av_pretreatment/#_14","title":"\u8bf7\u6c42\u5730\u5740","text":"<p>http://p0.api.upyun.com/status/</p>"},{"location":"cloud/av_pretreatment/#_15","title":"\u8bf7\u6c42\u65b9\u6cd5","text":"<p>GET\uff0c\u9700\u8981\u8fdb\u884c\u6388\u6743\u9a8c\u8bc1</p>"},{"location":"cloud/av_pretreatment/#_16","title":"\u8bf7\u6c42\u53c2\u6570","text":"\u53c2\u6570 \u7c7b\u578b \u5fc5\u9009 \u53c2\u6570\u8bf4\u660e bucket_name string true \u5904\u7406\u6587\u4ef6\u5bf9\u5e94\u7684\u7a7a\u95f4\u540d\u79f0 task_ids string true \u4efb\u52a1 id \u4ee5 <code>,</code> \u4f5c\u4e3a\u5206\u9694\u7b26\uff0c\u6700\u591a 20 \u4e2a"},{"location":"cloud/av_pretreatment/#_17","title":"\u8fd4\u56de\u6570\u636e","text":"<pre><code>{\n    tasks: {\n        35f0148d414a688a275bf915ba7cebb2: 100,\n        98adbaa52b2f63d6d7f327a0ff223348: 20,\n        c3103189fa906a5354d29bd807e8dc51: null\n        ...\n    }\n}\n\n</code></pre> <p>\u7279\u522b\u7684\uff0c\u5f53\u503c\u4e3a <code>null</code> \u65f6\uff0c\u8868\u793a\u6ca1\u6709\u67e5\u8be2\u5230\u76f8\u5173\u7684\u4efb\u52a1\u4fe1\u606f\u3002</p>"},{"location":"cloud/image/","title":"\u56fe\u7247\u5904\u7406","text":""},{"location":"cloud/image/#_1","title":"\u5feb\u901f\u5165\u95e8","text":"<p>\u53c8\u62cd\u4e91\u5904\u7406\uff08\u56fe\u7247\u5904\u7406\uff09\u57fa\u4e8e CDN \u6216\u4e91\u5b58\u50a8\u670d\u52a1\uff0c\u60a8\u5728\u4f7f\u7528\u5b83\u4e4b\u524d\uff0c\u8bf7\u786e\u4fdd\u60a8\u5df2\u7ecf\u6ce8\u518c\u53c8\u62cd\u4e91\u8d26\u53f7\u5e76\u5b8c\u6210\u5b9e\u540d\u9a8c\u8bc1\uff0c\u8bf7\u786e\u4fdd\u60a8\u5df2\u7ecf\u521b\u5efa CDN \u670d\u52a1\u6216\u4e91\u5b58\u50a8\u670d\u52a1\u3002</p> <p>\u6536\u8d39\u65b9\u9762\uff0c\u56fe\u7247\u5904\u7406\u5b8c\u5168\u514d\u8d39\u3002</p> <p>\u76f8\u5173\u9605\u8bfb\uff1a\u6f14\u793a WebP \u5982\u4f55\u8ba9\u60a8\u7684\u56fe\u7247\u5927\u5c0f\u5e73\u5747\u51cf\u5c11 70%\uff0cWebP \u5f00\u53d1\u4e13\u9898\u3002</p>"},{"location":"cloud/image/#_2","title":"\u5f00\u53d1\u8005\u6307\u5357","text":""},{"location":"cloud/image/#url","title":"URL \u4f5c\u56fe","text":"<p>\u901a\u8fc7 URL \u8bbf\u95ee\u56fe\u7247\u65f6\uff0c\u5bf9\u56fe\u7247\u8fdb\u884c\u5904\u7406\uff0c\u5e76\u628a\u5904\u7406\u540e\u7684\u56fe\u7247\u8fd4\u56de\u3002</p> <p>** URL \u4f5c\u56fe\u7684\u683c\u5f0f **</p> <pre><code>\u56fe\u7247 URL + \u95f4\u9694\u6807\u8bc6\u7b26 + \u53c2\u6570\u6216\u7f29\u7565\u56fe\u7248\u672c\n</code></pre> <p>\u95f4\u9694\u6807\u8bc6\u7b26\u8bf4\u660e\uff0c\u89c1\u95f4\u9694\u6807\u8bc6\u7b26\uff1b\u53c2\u6570\u8bf4\u660e\uff0c\u89c1\u529f\u80fd\uff1b\u7f29\u7565\u56fe\u7248\u672c\u8bf4\u660e\uff0c\u89c1\u7f29\u7565\u56fe\u7248\u672c\u3002</p> <p>** \u4f8b\u5982 **</p> <p>\u56fe\u7247 URL \u662f <code>https://p.upyun.com/docs/cloud/demo.jpg</code>\uff0c</p> <p>\u95f4\u9694\u6807\u8bc6\u7b26\u662f <code>!</code>\uff0c</p> <p>\u529f\u80fd\u662f <code>\u683c\u5f0f\u8f6c\u6362\u6210 webp</code>\uff0c</p> <p>\u8bbf\u95ee\u7684 URL \u662f <code>https://p.upyun.com/docs/cloud/demo.jpg!/format/webp</code>\u3002</p> <p></p>"},{"location":"cloud/image/#_3","title":"\u95f4\u9694\u6807\u8bc6\u7b26","text":"<p>\u7528\u4e8e\u5206\u9694\u56fe\u7247 URL \u548c\u5904\u7406\u4fe1\u606f\uff0c\u6709 3 \u79cd\u53ef\u9009\uff0c\u5206\u522b\u662f\uff1a<code>!</code>\uff08\u611f\u53f9\u53f7/\u9ed8\u8ba4\u503c\uff09\u3001<code>-</code>\uff08\u4e2d\u5212\u7ebf\uff09\u548c <code>_</code>\uff08\u4e0b\u5212\u7ebf\uff09\uff0c\u53ef\u767b\u5f55\u53c8\u62cd\u4e91\u63a7\u5236\u53f0\uff0c\u5728 \u300c\u670d\u52a1\u300d &gt; \u300c\u529f\u80fd\u914d\u7f6e\u300d &gt; \u300c\u4e91\u5904\u7406\u300d \u4e2d\u8bbe\u7f6e\u3002</p> <p></p>"},{"location":"cloud/image/#_4","title":"\u7f29\u7565\u56fe\u7248\u672c","text":"<p>\u7f29\u7565\u56fe\u7248\u672c\u5728\u53c8\u62cd\u4e91\u63a7\u5236\u53f0\uff0c\u300c\u670d\u52a1\u300d &gt; \u300c\u529f\u80fd\u914d\u7f6e\u300d &gt; \u300c\u4e91\u5904\u7406\u300d \u4e2d\u521b\u5efa\uff0c\u5b83\u91cc\u9762\u5305\u542b\u8bb8\u591a\u56fe\u7247\u5904\u7406\u529f\u80fd\u3002\u5982\u4e0b\u56fe\uff1a</p> <p></p> <p>** \u4f8b\u5982 **</p> <p>\u7f29\u7565\u56fe\u7248\u672c\u540d\u79f0\u662f <code>upyun520</code>\uff0c</p> <p>\u8bbf\u95ee\u7684 URL \u662f <code>https://p.upyun.com/docs/cloud/demo.jpg!upyun520</code>\u3002</p> <p>\u5176\u4e2d\uff0c<code>!</code> \u662f\u95f4\u9694\u6807\u8bc6\u7b26\u3002</p> <p></p>"},{"location":"cloud/image/#_5","title":"\u4e0a\u4f20\u9884\u5904\u7406\uff08\u540c\u6b65\uff09","text":"<p>\u5728\u4e0a\u4f20\u56fe\u7247\u65f6\uff0c\u5bf9\u4e0a\u4f20\u7684\u56fe\u7247\u8fdb\u884c\u5904\u7406\uff0c\u5e76\u4fdd\u5b58\u5904\u7406\u540e\u7684\u56fe\u7247\u5230\u53c8\u62cd\u4e91\u5b58\u50a8\u3002</p> <p>\u652f\u6301\u7684 API\uff1a REST API | FORM API | \u6587\u4ef6\u62c9\u53d6\u3002</p> <p>\u53c2\u6570\u540d\u662f <code>x-gmkerl-thumb</code>\uff0c\u53c2\u6570\u503c\u662f <code>\u53c2\u6570\u6216\u7f29\u7565\u56fe\u7248\u672c</code>\u3002\u5904\u7406\u53c2\u6570\u89c1\u529f\u80fd\u3002</p> <p>** \u4e3e\u4f8b **</p> <p>\u4f8b 1\uff1a\u8f6c\u6362\u56fe\u7247\u683c\u5f0f\u4e3a png</p> <pre><code>x-gmkerl-thumb: /format/png\n</code></pre> <p>\u4f8b 2\uff1a\u9650\u5b9a\u56fe\u7247\u5bbd\u5ea6\u4e3a 300px\u3001\u9510\u5316\u3001\u538b\u7f29\u8d28\u91cf 80\u3001\u5b58\u50a8\u4e3a png \u683c\u5f0f\uff08\u53c2\u6570\u4e0d\u533a\u5206\u5148\u540e\u987a\u5e8f\uff09</p> <pre><code>x-gmkerl-thumb: /fw/300/unsharp/true/quality/80/format/png\n</code></pre> <p></p>"},{"location":"cloud/image/#_6","title":"\u4e0a\u4f20\u9884\u5904\u7406\uff08\u5f02\u6b65\uff09","text":"<p>\u5728\u4e0a\u4f20\u56fe\u7247\u65f6\uff0c\u5bf9\u4e0a\u4f20\u7684\u56fe\u7247\u8fdb\u884c\u5904\u7406\uff0c\u751f\u6210\u4e00\u5f20\u6216\u591a\u5f20\u65b0\u7684\u56fe\u7247\uff0c\u540c\u65f6\u4fdd\u5b58\u4e0a\u4f20\u7684\u56fe\u7247\u5230\u53c8\u62cd\u4e91\u5b58\u50a8\u3002\u4efb\u52a1\u4ee5\u5f02\u6b65\u7684\u65b9\u5f0f\u5904\u7406\uff0c\u5904\u7406\u5b8c\u6210\u540e\uff0c\u56de\u8c03\u901a\u77e5\u7528\u6237\u5904\u7406\u7ed3\u679c\u3002</p> <p>\u652f\u6301\u7684 API\uff1a FORM API\u3002</p> <p>\u53c2\u6570\u540d\u662f <code>apps</code>\uff0c\u53c2\u6570\u503c\u662f JSON \u6570\u7ec4\u3002\u4e00\u4e2a <code>apps</code> \u6700\u591a\u5141\u8bb8\u5305\u542b 10 \u4e2a\u56fe\u7247\u5904\u7406\u4efb\u52a1\u3002</p> <p>\u8bbe\u7f6e\u4e86 <code>apps</code> \u53c2\u6570\uff0c\u4f1a\u521b\u5efa\u5f02\u6b65\u5904\u7406\u4efb\u52a1\uff0c\u5426\u5219\u4e3a\u540c\u6b65\u5904\u7406\u4efb\u52a1</p> <p>** apps \u53c2\u6570\u7ed3\u6784 **</p> \u53c2\u6570 \u5fc5\u9009 \u8bf4\u660e name \u662f \u4f7f\u7528\u5f02\u6b65\u56fe\u7247\u5904\u7406\u670d\u52a1\uff0c\u56fa\u5b9a\u503c <code>thumb</code> x-gmkerl-thumb \u662f \u56fe\u7247\u5904\u7406\u529f\u80fd\u53c2\u6570\u6216\u7f29\u7565\u56fe\u7248\u672c\u540d\u79f0\uff0c\u5904\u7406\u53c2\u6570\u89c1\u529f\u80fd x-gmkerl-split \u5426 \u56fe\u7247\u5206\u5757\uff0c\u6309 <code>\u5bbdx\u9ad8</code> \u628a\u56fe\u7247\u5206\u6210\u6570\u5757\uff0c\u89c1\u300c\u6ce8\u300d save_as \u5426 \u7ed3\u679c\u56fe\u7247\u4fdd\u5b58\u8def\u5f84 notify_url \u5426 \u56de\u8c03\u5730\u5740\uff0c\u4e0d\u586b\u65f6\u4f7f\u7528\u4e0a\u4f20\u53c2\u6570\u4e2d\u7684  <code>notify_url</code> <p>** save_as \u652f\u6301\u7684\u53d8\u91cf **</p> \u53d8\u91cf\u540d \u8bf4\u660e {filepath} \u539f\u56fe\u5728\u5b58\u50a8\u4e2d\u7684\u8def\u5f84 {filename} \u539f\u56fe\u6587\u4ef6\u540d {suffix} \u539f\u56fe\u6587\u4ef6\u540d\u540e\u7f00\uff0c\u4e0d\u5e26\u70b9 {row} \u5207\u5272\u540e\u5c0f\u56fe\u7684\u4f4d\u7f6e\u884c\u53f7\uff0c\u4ece 0 \u5f00\u59cb\uff0c\u4ece\u5de6\u5230\u53f3\u4f9d\u6b21\u589e\u5927 {column} \u5207\u5272\u540e\u5c0f\u56fe\u7684\u4f4d\u7f6e\u5217\u53f7\uff0c\u4ece 0 \u5f00\u59cb\uff0c\u4ece\u4e0a\u5230\u4e0b\u4f9d\u6b21\u589e\u5927 {seq} \u5207\u5272\u540e\u5c0f\u56fe\u7684\u5e8f\u5217\u53f7\uff0c\u4ece 0 \u5f00\u59cb\uff0c\u4ece\u5de6\u5230\u53f3\u3001\u4ece\u4e0a\u5230\u4e0b\u4f9d\u6b21\u589e\u5927 <p>** \u6ce8 **</p> <ul> <li><code>x-gmkerl-split</code> \u4f1a\u5728 <code>x-gmkerl-thumb</code> \u7684\u57fa\u7840\u4e0a\u628a\u56fe\u7247\u5206\u6210\u6570\u5757\uff0c\u7528\u6237\u53ef\u4ee5\u6839\u636e\u56de\u8c03\u4fe1\u606f\u4e2d\u7684\u884c\u53f7\u8ddf\u5217\u53f7\u6765\u786e\u5b9a\u5206\u5757\u540e\u7684\u56fe\u7247\u5728\u539f\u56fe\u4e2d\u7684\u4f4d\u7f6e\u3002</li> <li><code>x-gmkerl-split</code> \u4f1a\u8f93\u51fa\u591a\u4e2a\u56fe\u7247\uff0c\u4ece\u5de6\u4e0a\u89d2\u5f00\u59cb\uff0c\u5f80\u53f3\u5217\u53f7\u4ece 0 \u4f9d\u6b21\u589e\u5927\uff0c\u5f80\u4e0b\u884c\u53f7\u4ece 0 \u4f9d\u6b21\u589e\u5927\uff0c\u5e8f\u5217\u53f7\u6309\u884c\u4ece\u5de6\u5f80\u53f3\u3001\u4ece\u4e0a\u5230\u4e0b\u3001\u4ece 0 \u4f9d\u6b21\u589e\u5927\u3002</li> </ul> <p>** \u4e3e\u4f8b **</p> <pre><code>apps = [\n    {                                             \n        \"name\": \"thumb\",\n        \"x-gmkerl-thumb\": \"/fw/300/quality/95\",    \n        \"save_as\": \"/path/to/fw_300.jpg\",          \n        \"notify_url\": \"http://your/notify/url\"     \n    },\n    ......\n]\n</code></pre> <p>** \u56de\u8c03\u901a\u77e5 **</p> <p>\u4efb\u52a1\u5904\u7406\u5b8c\u6210\u540e\uff0c\u5411 <code>notify_url</code> \u5730\u5740\u53d1\u9001\u56de\u8c03\u901a\u77e5\u3002\u56de\u8c03\u4fe1\u606f\u4e3a JSON \u683c\u5f0f\uff0c\u5b57\u6bb5\u540d\u53ca\u542b\u4e49\u5982\u4e0b\uff1a</p> \u5b57\u6bb5\u540d \u7c7b\u578b \u8bf4\u660e <code>task_id</code> string \u5f02\u6b65\u5904\u7406\u4efb\u52a1 ID\uff08\u5728\u4e0a\u4f20\u65f6\u8fd4\u56de\uff09 <code>service</code> string \u6587\u4ef6\u6240\u5728\u7a7a\u95f4\u540d <code>status_code</code> integer \u5904\u7406\u7ed3\u679c\u72b6\u6001\u7801\uff0c<code>200</code> \u8868\u793a\u6210\u529f\u5904\u7406 <code>imginfo</code> map \u8f93\u51fa\u5355\u5f20\u56fe\u7247\u4fe1\u606f <code>imginfos</code> array \u8f93\u51fa\u591a\u5f20\u56fe\u7247\u4fe1\u606f <code>error</code> string \u9519\u8bef\u4fe1\u606f <p><code>imginfo</code> \u3001 <code>imginfos</code> \u4e2d\u5305\u542b\u4fe1\u606f\u5982\u4e0b\uff1a</p> \u5b57\u6bb5\u540d \u7c7b\u578b \u8bf4\u660e <code>path</code> string \u4f5c\u56fe\u7ed3\u679c\u4fdd\u5b58\u8def\u5f84\uff08<code>save_as</code>\u53c2\u6570\u6307\u5b9a\uff09 <code>type</code> string \u56fe\u7247\u7c7b\u578b <code>width</code> integer \u56fe\u7247\u5bbd\u5ea6 <code>height</code> integer \u56fe\u7247\u9ad8\u5ea6 <code>frame</code> integer \u56fe\u7247\u5e27\u6570 <code>row</code> integer \u76f8\u5bf9\u4e8e\u5de6\u4e0a\u89d2\u7684\u884c\u53f7\uff0c\u4ece <code>0</code> \u5f00\u59cb\uff0c\u4ec5\u5f53\u56fe\u7247\u5206\u5757\u65f6\u6709\u6548 <code>column</code> integer \u76f8\u5bf9\u4e8e\u5de6\u4e0a\u89d2\u7684\u5217\u53f7\uff0c\u4ece <code>0</code> \u5f00\u59cb\uff0c\u4ec5\u5f53\u56fe\u7247\u5206\u5757\u65f6\u6709\u6548 <p>** \u4e3e\u4f8b **</p> <p>\u4f8b 1\uff1a\u8f93\u51fa\u5355\u5f20\u56fe\u7247\u7684\u56de\u8c03\u4fe1\u606f</p> <pre><code>{\n    \"task_id\": \"b52c96bea30646abf8170f333bbd42b9\",\n    \"service\": \"upyun-demo\",\n    \"status_code\": 200,\n    \"imginfo\": {\n        \"path\": \"/images/upyun.jpg\",\n        \"type\": \"jpg\",\n        \"width\": 720,\n        \"height\": 360,\n        \"frames\": 1\n    }\n}\n</code></pre> <p>\u4f8b 2\uff1a\u8f93\u51fa\u591a\u5f20\u56fe\u7247\uff08\u4f7f\u7528\u4e86\u56fe\u7247\u5206\u5757 x-gmkerl-split\uff09 \u7684\u56de\u8c03\u4fe1\u606f</p> <pre><code>{\n    \"task_id\": \"b52c96bea30646abf8170f333bbd42b9\",\n    \"service\": \"upyun-demo\",\n    \"status_code\": 200,\n    \"imginfos\": [\n      {\n        \"path\": \"/images/upyun.jpg-1.jpg\",\n        \"type\": \"jpg\",\n        \"width\": 72,\n        \"height\": 36,\n        \"frames\": 1,\n        \"row\": 0,\n        \"column\": 0\n      },\n      {\n        \"path\": \"/images/upyun.jpg-2.jpg\",\n        \"type\": \"jpg\",\n        \"width\": 72,\n        \"height\": 36,\n        \"frames\": 1,\n        \"row\": 0,\n        \"column\": 1\n      }\n    ]\n}\n</code></pre>"},{"location":"cloud/image/#_7","title":"\u539f\u56fe\u4fdd\u62a4\u5bc6\u94a5","text":"<ul> <li>\u4e0a\u4f20\u56fe\u7247\u65f6\uff0c\u4fdd\u62a4\u5bc6\u94a5\u901a\u8fc7 REST API | FORM API \u7684 <code>Content-Secret</code> \u8bbe\u7f6e\u3002</li> <li>\u5df2\u7ecf\u5b58\u5728\u5b58\u50a8\u7684\u56fe\u7247\uff0c\u53ef\u4ee5\u901a\u8fc7\u7f16\u8f91 Metadata \u8bbe\u7f6e\u4fdd\u62a4\u5bc6\u94a5\u3002</li> </ul> <p>\u56fe\u7247\u6dfb\u52a0\u4fdd\u62a4\u5bc6\u94a5\u540e\uff0c\u8bbf\u95ee\u65f6\u9700\u8981\u5e26\u4e0a \u300c\u95f4\u9694\u6807\u8bc6\u7b26\u300d \u548c \u300c\u4fdd\u62a4\u5bc6\u94a5\u300d\uff0c\u624d\u80fd\u8bbf\u95ee\u56fe\u7247\u3002</p> <p>\u4f8b\u5982\uff0c\u4fdd\u62a4\u5bc6\u94a5\u662f <code>abc</code>\uff0c</p> <p>\u8bbf\u95ee\u56fe\u7247 URL \u662f <code>https://p.upyun.com/docs/cloud/secret.jpg!abc</code>\u3002</p> <p>\u5982\u679c\u4fdd\u62a4\u5bc6\u94a5\u8ddf\u7f29\u7565\u56fe\u7248\u672c\u540d\u79f0\u76f8\u540c\uff0c\u5f53\u4f5c\u4fdd\u62a4\u5bc6\u94a5\u3002\u7279\u522b\u5730\uff0c\u5bf9\u6709\u4fdd\u62a4\u5bc6\u94a5\u7684\u56fe\u7247\u8fdb\u884c\u5904\u7406\u65f6\uff0c\u4e0d\u9700\u8981\u52a0\u4fdd\u62a4\u5bc6\u94a5\u3002</p>"},{"location":"cloud/image/#_8","title":"\u6df7\u5408\u4f7f\u7528","text":"<p>\u5047\u8bbe\u5b58\u5728\u7f29\u7565\u56fe\u7248\u672c <code>upyun520</code>\uff0c\u73b0\u5728\u9488\u5bf9\u67d0\u7c7b\u56fe\u7247\u9700\u8981\u8c03\u6574\u7f29\u7565\u56fe\u7248\u672c\u7684\u914d\u7f6e\uff0c\u6bd4\u5982\u9650\u5b9a\u5bbd\u5ea6\u4e3a 500px\uff08<code>/fw/500</code>\uff09\uff0c\u53ef\u4ee5\u4f7f\u7528\u7f29\u7565\u56fe\u7248\u672c\u4e0e\u53c2\u6570\u6df7\u5408\uff0c\u901a\u8fc7\u53c2\u6570\u5bf9\u7f29\u7565\u56fe\u7248\u672c\u8fdb\u884c\u52a8\u6001\u8c03\u6574\u3002\u56e0\u4e3a\uff0c\u53c2\u6570\u7684\u4f18\u5148\u7ea7\u9ad8\u4e8e\u7f29\u7565\u56fe\u7248\u672c\u3002</p> <p>URL \u4f5c\u56fe\u6df7\u5408\u4f7f\u7528\u662f\uff1a</p> <p> <pre><code>https://p.upyun.com/docs/cloud/demo.jpg!upyun520/fw/500\n</code></pre> <p> </p> <p>\u4e0a\u4f20\u9884\u5904\u7406\u6df7\u5408\u4f7f\u7528\u662f\uff1a </p> <pre><code>x-gmkerl-thumb: upyun520/fw/500\n</code></pre> <p>\u7279\u522b\u5730\uff0c\u53c2\u6570\u53ea\u80fd\u51fa\u73b0\u5728\u7f29\u7565\u56fe\u7248\u672c\u7684\u540e\u9762\uff0c\u5982 <code>/fw/500</code> \u51fa\u73b0\u5728 <code>upyun520</code> \u540e\u9762\u3002</p>"},{"location":"cloud/image/#_9","title":"\u72b6\u6001\u7801\u8868","text":"\u72b6\u6001\u7801 \u8bf4\u660e 200 \u5904\u7406\u6210\u529f 400 \u53c2\u6570\u9519\u8bef\uff0c\u8fd4\u56de JSON \u4e2d\u5305\u542b\u5177\u4f53\u9519\u8bef\u4fe1\u606f 404 \u6307\u5b9a Profile \u4fe1\u606f\u4e0d\u5b58\uff0cNot Profile 405 \u56fe\u7247\u6570\u636e\u65e0\u6548\uff0cNot an image 405 \u56fe\u7247\u5bbd\u9ad8\u8d85\u51fa\u9650\u5236\uff0cImage Width/Height Limit Error 406 \u975e\u56fe\u7247\u83b7\u53d6\u56fe\u7247\u57fa\u672c\u4fe1\u606f\u65f6\u6570\u636e\u65e0\u6548\uff0cNot an image 409 \u56fe\u7247\u5927\u5c0f\u8d85\u51fa\u9650\u5236\uff0c\u9650\u5236\u4e3a 2 \u4ebf\u50cf\u7d20\uff0cLimit Exceeded 413 \u8bf7\u6c42\u5904\u7406\u8d85\u65f6\uff0cA Big Image! 5xx \u670d\u52a1\u7aef\u9519\u8bef\u3002\u5982\u9047\u6b64\u7c7b\u9519\u8bef\uff0c\u8bf7\u53cd\u9988\u7ed9\u552e\u540e\u6216\u60a8\u7684\u5546\u52a1\u7ecf\u7406 <p>\u4e0a\u4f20\u9884\u5904\u7406\u7684\u66f4\u591a\u9519\u8bef\u7801\uff0c\u8bf7\u67e5\u8be2 API \u9519\u8bef\u7801\u8868\u3002</p>"},{"location":"cloud/image/#_10","title":"\u652f\u6301\u683c\u5f0f","text":"\u7c7b\u578b \u503c \u8f93\u5165\u683c\u5f0f JPG\u3001JPEG\u3001PNG\u3001WebP\u3001\u52a8\u6001 WebP\u3001GIF\u3001\u52a8\u6001 GIF\u3001BMP\u3001SVG\u7b49 \u8f93\u51fa\u683c\u5f0f JPG\u3001PNG\u3001WebP\u3001\u52a8\u6001 WebP <p>** \u5176\u4ed6\u7ea6\u675f **</p> <ul> <li>\u56fe\u7247\u5bbd\u6216\u9ad8\u6700\u5927\u4e0d\u80fd\u8d85\u8fc7 2 \u4e07\u50cf\u7d20\uff0c\u300c\u5bbd * \u9ad8 * \u5e27\u6570\u300d\u6700\u5927\u4e0d\u80fd\u8d85\u8fc7 2 \u4ebf\u3002</li> </ul>"},{"location":"cloud/image/#webp","title":"WebP \u5f00\u53d1\u4e13\u9898","text":"<p>** \u6709\u635f WebP \u6f14\u793a **\uff1aWebP \u5982\u4f55\u8ba9\u60a8\u7684\u56fe\u7247\u5927\u5c0f\u5e73\u5747\u51cf\u5c11 70%</p> <p>** \u65e0\u635f WebP \u6307\u5357 **\uff1a\u65e0\u635f WebP \u6b63\u786e\u7684\u4f7f\u7528\u59ff\u52bf</p> <p>** \u8f6c\u6210\u6709\u635f WebP **\uff1a<code>/format/webp</code></p> <p>** \u8f6c\u6210\u65e0\u635f WebP **\uff1a<code>/format/webp/lossless/true</code></p> <p>** \u793a\u4f8b **</p> <p>JPG \u8f6c\u6210\u6709\u635f WebP\uff1awww.domain.com/a.jpg!/format/webp</p> <p>PNG \u8f6c\u6210\u65e0\u635f WebP\uff1awww.domain.com/a.png!/format/webp/lossless/true</p> <p>GIF/\u52a8\u6001 GIF \u8f6c\u6210\u6709\u635f WebP\uff1awww.domain.com/a.gif!/format/webp</p> <p>SVG \u8f6c\u6210\u65e0\u635f WebP\uff1awww.domain.com/a.svg!/format/webp/lossless/true</p> <p><code>!</code> \u662f\u95f4\u9694\u6807\u8bc6\u7b26\uff0c<code>/format/webp</code>\u3001<code>/lossless/true</code> \u66f4\u591a\u89e3\u91ca\u89c1\u300c\u529f\u80fd\u300d&gt; \u7ed3\u679c\u8f93\u51fa\u3002</p> <p></p>"},{"location":"cloud/image/#_11","title":"\u529f\u80fd","text":""},{"location":"cloud/image/#_12","title":"\u7f29\u5c0f&amp;\u653e\u5927","text":"\u53c2\u6570 \u503c \u8bf4\u660e <code>/fw/&lt;width&gt;</code> \u5bbd\uff0c\u5982 300 \u9650\u5b9a\u5bbd\u5ea6\uff0c\u9ad8\u5ea6\u81ea\u9002\u5e94 <code>/fh/&lt;height&gt;</code> \u9ad8\uff0c\u5982 200 \u9650\u5b9a\u9ad8\u5ea6\uff0c\u5bbd\u5ea6\u81ea\u9002\u5e94 <code>/max/&lt;max&gt;</code> \u6700\u957f\u8fb9\uff0c\u5982 200 \u9650\u5b9a\u6700\u957f\u8fb9\uff0c\u77ed\u8fb9\u81ea\u9002\u5e94 <code>/min/&lt;min&gt;</code> \u6700\u77ed\u8fb9\uff0c\u5982 200 \u9650\u5b9a\u6700\u77ed\u8fb9\uff0c\u957f\u8fb9\u81ea\u9002\u5e94 <code>/fwfh/&lt;w&gt;x&lt;h&gt;</code> \u5bbdx\u9ad8\uff0c\u5982 300x200 \u9650\u5b9a\u5bbd\u5ea6\u6216\u9ad8\u5ea6\uff0c\u5bbd\u9ad8\u4e0d\u8db3\u65f6\u4e0d\u7f29\u653e <code>/fwfh2/&lt;w&gt;x&lt;h&gt;</code> \u5bbdx\u9ad8\uff0c\u5982 300x200 \u9650\u5b9a\u5bbd\u5ea6\u6700\u5c0f\u503c\u548c\u9ad8\u5ea6\u6700\u5c0f\u503c\uff0c\u5bbd\u9ad8\u4e0d\u8db3\u65f6\u4e0d\u7f29\u653e <code>/both/&lt;w&gt;x&lt;h&gt;</code> \u5bbdx\u9ad8\uff0c\u5982 300x200 \u56fa\u5b9a\u5bbd\u5ea6\u548c\u9ad8\u5ea6\uff0c\u5bbd\u9ad8\u4e0d\u8db3\u65f6\u5c45\u4e2d\u88c1\u526a\u518d\u7f29\u653e  \u7279\u522b\u5730\uff0c\u914d\u5408 <code>/force/true</code> \u4f7f\u7528\u65f6\uff0c\u5bbd\u9ad8\u4e0d\u8db3\u65f6\u53ea\u7f29\u653e\uff0c\u4e0d\u88c1\u526a <code>/sq/&lt;w&gt;</code> \u5bbd\u6216\u9ad8\uff0c\u5982 300 \u56fe\u7247\u7f29\u653e\u6210\u6b63\u65b9\u5f62\uff0c\u5bbd\u9ad8\u76f8\u7b49 <code>/scale/&lt;scale&gt;</code> \u7f29\u653e\u6bd4\u4f8b\uff0c\u5982 50 \u5bbd\u9ad8\u7b49\u6bd4\u4f8b\u7f29\u653e\uff0c\u53d6\u503c\u8303\u56f4 <code>[1-1000]</code> <code>/wscale/&lt;wscale&gt;</code> \u5bbd\u5ea6\u7f29\u653e\u6bd4\u4f8b\uff0c\u5982 200 \u5bbd\u5ea6\u6309\u6bd4\u4f8b\u7f29\u653e\uff0c\u9ad8\u5ea6\u4e0d\u53d8\uff0c\u53d6\u503c\u8303\u56f4 <code>[1-1000]</code> <code>/hscale/&lt;hscale&gt;</code> \u9ad8\u5ea6\u7f29\u653e\u6bd4\u4f8b\uff0c\u5982 200 \u9ad8\u5ea6\u6309\u6bd4\u4f8b\u7f29\u653e\uff0c\u5bbd\u5ea6\u4e0d\u53d8\uff0c\u53d6\u503c\u8303\u56f4 <code>[1-1000]</code> <code>/fxfn/&lt;max&gt;x&lt;min&gt;</code> \u957f\u8fb9x\u77ed\u8fb9\uff0c\u5982 300x200 \u9650\u5b9a\u957f\u8fb9\u6216\u77ed\u8fb9\uff0c\u8fdb\u884c\u7b49\u6bd4\u7f29\u653e\uff0c\u4e0d\u88c1\u526a <code>/fxfn2/&lt;max&gt;x&lt;min&gt;</code> \u957f\u8fb9x\u77ed\u8fb9\uff0c\u5982 300x200 \u9650\u5b9a\u957f\u8fb9\u6700\u5c0f\u503c\u548c\u77ed\u8fb9\u6700\u5c0f\u503c\uff0c\u8fdb\u884c\u7b49\u6bd4\u7f29\u653e\uff0c\u4e0d\u88c1\u526a <code>/fp/&lt;integer&gt;</code> \u5bbd\u9ad8\u50cf\u7d20\u79ef\uff0c\u5982 200000 \u5bbd\u9ad8\u7b49\u6bd4\u4f8b\u7f29\u653e\uff0c\u76f4\u5230\u5bbd\u9ad8\u50cf\u7d20\u79ef\u5c0f\u4e8e\u4f46\u6700\u63a5\u8fd1\u6307\u5b9a\u503c\uff0c\u53d6\u503c\u8303\u56f4 <code>[1-25000000]</code> <code>/force/&lt;boolean&gt;</code> true \u4e0d\u652f\u6301\u653e\u5927\u7684\u53c2\u6570\uff0c\u6307\u5b9a <code>/force/</code> \u4e3a <code>true</code> \u8fdb\u884c\u653e\u5927\uff0c\u9ed8\u8ba4 <code>false</code> <p>** \u6ce8 **</p> <ul> <li><code>fwfh</code> \u5f53\u539f\u56fe\u5bbd\u4e0e\u671f\u671b\u7f29\u653e\u7684\u5bbd\u7684\u6bd4\u4f8b\u5927\u4e8e\u539f\u56fe\u9ad8\u4e0e\u671f\u671b\u7f29\u653e\u7684\u9ad8\u7684\u6bd4\u4f8b\u65f6\uff0c\u662f <code>fw</code>\uff1b\u5426\u5219\uff0c\u662f <code>fh</code>\u3002</li> <li><code>scale</code> \u503c\u53d6 <code>20</code> \u65f6\uff0c\u7f29\u5c0f\u540e\u7684\u56fe\u7247\u5bbd\u9ad8\u662f\u539f\u56fe\u5bbd\u9ad8\u7684 <code>20%</code>\uff1b\u53d6 <code>200</code> \u65f6\uff0c\u653e\u5927\u540e\u7684\u56fe\u7247\u5bbd\u9ad8\u662f\u539f\u56fe\u5bbd\u9ad8\u7684 <code>200%</code>\u3002</li> <li>\u7279\u522b\u5730\uff0c\u5927\u90e8\u5206\u53c2\u6570\u9ed8\u8ba4\u4e0d\u652f\u6301\u653e\u5927\uff0c\u5982\u679c\u9700\u8981\u653e\u5927\uff0c\u8bf7\u6307\u5b9a <code>/force/true</code> \u3002</li> <li><code>&lt;w&gt;x&lt;h&gt;</code> \u4e2d\u7684 <code>x</code> \u662f\u5c0f\u5199\u5b57\u6bcd x\uff0c\u4e0d\u662f\u4e58\u53f7\u3002</li> </ul> <p></p>"},{"location":"cloud/image/#_13","title":"\u88c1\u526a","text":"\u53c2\u6570 \u503c \u8bf4\u660e <code>/crop/&lt;w&gt;x&lt;h&gt;a&lt;x&gt;a&lt;y&gt;</code> \u5bbdx\u9ad8axay\uff0c\u5982 300x200a80a60 \u7f29\u5c0f\u6216\u653e\u5927\u524d\u8fdb\u884c\u88c1\u526a <code>/clip/&lt;w&gt;x&lt;h&gt;a&lt;x&gt;a&lt;y&gt;</code> \u5bbdx\u9ad8axay\uff0c\u5982 300x200a80a60 \u7f29\u5c0f\u6216\u653e\u5927\u540e\u8fdb\u884c\u88c1\u526a <code>/gravity/&lt;gravity&gt;</code> \u4f4d\u7f6e\uff0c\u5982 north \u88c1\u526a\u5f00\u59cb\u7684\u65b9\u4f4d\uff0c\u9ed8\u8ba4 <code>northwest</code>\uff0c\u8be6\u89c1\u65b9\u4f4d\u8bf4\u660e  \u7279\u522b\u5730\uff0c<code>/gravity</code> \u9700\u8981\u653e\u5728 <code>/crop</code> \u6216 <code>/clip</code> \u7684\u540e\u9762 <code>/roundrect/&lt;roundrect&gt;</code> \u5706\u89d2\u534a\u5f84\uff0c\u5982 20 \u88c1\u526a\u65f6\u5bf9\u56db\u89d2\u8fdb\u884c\u5706\u5316\uff08\u5706\u89d2\u88c1\u526a\uff09\uff0c\u9ed8\u8ba4 <code>10</code> <p>** \u6ce8 **</p> <ul> <li><code>&lt;w&gt;x&lt;h&gt;</code> \u4e2d\u7684 <code>x</code> \u662f\u5c0f\u5199\u5b57\u6bcd x\uff0c\u4e0d\u662f\u4e58\u53f7\u3002\u5f53 <code>&lt;w&gt;x&lt;h&gt;</code> \u662f <code>0x0</code> \u65f6\uff0c\u81ea\u52a8\u6839\u636e\u504f\u79fb\u91cf\u8ba1\u7b97\u88c1\u526a\u56fe\u7247\u5bbd\u3001\u9ad8\u3002</li> <li><code>a&lt;x&gt;s&lt;y&gt;</code> \u4e2d\u7684 <code>&lt;x&gt;</code>\u3001<code>&lt;y&gt;</code> \u8868\u793a\u504f\u79fb\u91cf\uff0c<code>a</code>\u3001<code>s</code> \u8868\u793a\u6b63\u3001\u8d1f\uff0c<code>x</code> \u6b63\u8d1f\u5224\u65ad\u4f9d\u636e\u662f\uff1a\u5f80 <code>east</code> \u65b9\u5411\u504f\u79fb\uff0c\u4e3a <code>a</code>\uff1b\u5f80 <code>west</code> \u65b9\u5411\u504f\u79fb\uff0c\u4e3a <code>s</code>; <code>y</code> \u6b63\u8d1f\u5224\u65ad\u4f9d\u636e\u662f\uff1a\u5f80 <code>south</code> \u65b9\u5411\u504f\u79fb\uff0c\u4e3a <code>a</code>\uff1b\u5f80 <code>north</code> \u65b9\u5411\u504f\u79fb\uff0c\u4e3a <code>s</code>\u3002</li> </ul> <p></p>"},{"location":"cloud/image/#_14","title":"\u6c34\u5370","text":"<p>** \u56fe\u7247\u6c34\u5370 **</p> \u53c2\u6570 \u503c \u8bf4\u660e <code>/watermark/url/&lt;url&gt;</code> \u7f16\u7801\u5b57\u7b26\u4e32\uff0c\u5982 <code>L3BhdGgvdG8vd2F0ZXJtYXJrLnBuZw==</code> \u6c34\u5370\u56fe\u7247\u7684 URI\uff0c\u793a\u4f8b\u4e3a <code>/path/to/watermark.png</code> \u7684 Base64 \u7f16\u7801\u5b57\u7b26\u4e32\u3002\u7279\u522b\u5730\uff0c\u6c34\u5370\u56fe\u7247\u5fc5\u987b\u548c\u5f85\u5904\u7406\u56fe\u7247\u5728\u540c\u4e00\u670d\u52a1\u540d\u4e0b <code>/align/&lt;align&gt;</code> \u4f4d\u7f6e\uff0c\u5982 north \u6c34\u5370\u56fe\u7247\u653e\u7f6e\u65b9\u4f4d\uff0c\u9ed8\u8ba4 <code>northwest</code>\uff0c\u8be6\u89c1\u65b9\u4f4d\u8bf4\u660e <code>/margin/&lt;x&gt;x&lt;y&gt;</code> \u6a2a\u504f\u79fbx\u7eb5\u504f\u79fb\uff0c\u5982 15x10 \u6c34\u5370\u56fe\u7247\u6a2a\u7eb5\u76f8\u5bf9\u504f\u79fb\uff0c\u9ed8\u8ba4 <code>20x20</code> <code>/opacity/&lt;opacity&gt;</code> \u900f\u660e\u5ea6\uff0c\u5982 90 \u6c34\u5370\u56fe\u7247\u900f\u660e\u5ea6\uff0c\u9ed8\u8ba4 <code>100</code>\uff0c\u53d6\u503c\u8303\u56f4 <code>[0-100]</code>\uff0c\u503c\u8d8a\u5927\u8d8a\u4e0d\u900f\u660e\uff0c<code>0</code> \u5b8c\u5168\u900f\u660e\uff0c<code>100</code> \u5b8c\u5168\u4e0d\u900f\u660e <code>/percent/&lt;integer&gt;</code> \u767e\u5206\u6bd4\u503c\uff0c\u5982 50 \u6c34\u5370\u56fe\u7247\u81ea\u9002\u5e94\u539f\u56fe\u77ed\u8fb9\u7684\u6bd4\u4f8b\uff0c\u53d6\u503c\u8303\u56f4 <code>[0-100]</code>\uff0c\u9ed8\u8ba4 <code>0</code>\uff0c<code>0</code> \u8868\u793a\u4e0d\u8bbe\u7f6e\u8be5\u53c2\u6570 <code>/repeat/&lt;boolean&gt;</code> true \u6c34\u5370\u56fe\u7247\u662f\u5426\u91cd\u590d\u94fa\u6ee1\u539f\u56fe\uff0c\u9ed8\u8ba4 <code>false</code> <code>/animate/&lt;boolean&gt;</code> true \u5141\u8bb8\u5bf9\u52a8\u6001\u56fe\u7247\u52a0\u6c34\u5370\uff0c\u9ed8\u8ba4 <code>false</code> <p>** \u6587\u5b57\u6c34\u5370 **</p> \u53c2\u6570 \u503c \u8bf4\u660e <code>/watermark/text/&lt;text&gt;</code> \u6587\u5b57\u5185\u5bb9\uff0c\u5982 <code>5L2g5aW977yB</code> \u6587\u5b57\u5185\u5bb9\uff0c\u793a\u4f8b\u4e2d\u4e3a <code>\u4f60\u597d\uff01</code>\u7684 Base64 \u7f16\u7801\u5b57\u7b26\u4e32\u3002 <code>/size/&lt;size&gt;</code> \u5927\u5c0f\uff0c\u5982 16 \u6587\u5b57\u5927\u5c0f\uff0c\u5355\u4f4d px\uff0c\u9ed8\u8ba4 <code>32</code> <code>/font/&lt;font&gt;</code> \u5b57\u4f53\uff0c\u5982 simsun\uff08\u5b8b\u4f53\uff09 \u6587\u5b57\u5b57\u4f53\uff0c\u9ed8\u8ba4 <code>simsun</code>\u3002\u5b57\u4f53\u4f7f\u7528\u65f6\uff0c\u9700\u8981\u7528\u53c2\u6570\u540d\u3002\u53c2\u6570\u540d\u89c1\u5b57\u4f53\u5217\u8868 <code>/color/&lt;color&gt;</code> RRGGBB\uff0c\u5982 FF0000\uff08\u7ea2\u8272\uff09 \u5b57\u4f53\u989c\u8272\uff0c\u9ed8\u8ba4 <code>000000\uff08\u9ed1\u8272\uff09</code> <code>/border/&lt;border&gt;</code> RRGGBBAA\uff0c\u5982 FF000000\uff08\u4e0d\u900f\u660e\u7ea2\u8272\uff09 \u6587\u5b57\u63cf\u8fb9\uff0c\u9ed8\u8ba4 <code>FFFFFFFF\uff08\u900f\u660e\u767d\u8272\uff09</code>\uff0c\u8be6\u89c1 border \u8bf4\u660e <code>/align/&lt;align&gt;</code> \u4f4d\u7f6e\uff0c\u5982 north \u6587\u5b57\u653e\u7f6e\u65b9\u4f4d\uff0c\u9ed8\u8ba4 <code>northwest</code>\uff0c\u8be6\u89c1\u65b9\u4f4d\u8bf4\u660e <code>/margin/&lt;x&gt;x&lt;y&gt;</code> \u6a2a\u504f\u79fbx\u7eb5\u504f\u79fb\uff0c\u5982 15x10 \u6587\u5b57\u6a2a\u7eb5\u76f8\u5bf9\u504f\u79fb\uff0c\u9ed8\u8ba4 <code>20x20</code> <code>/opacity/&lt;opacity&gt;</code> \u900f\u660e\u5ea6\uff0c\u5982 90 \u6587\u5b57\u900f\u660e\u5ea6\uff0c\u9ed8\u8ba4 <code>100</code>\uff0c\u53d6\u503c\u8303\u56f4 <code>[0-100]</code>\uff0c\u503c\u8d8a\u5927\u8d8a\u4e0d\u900f\u660e\uff0c<code>0</code> \u5b8c\u5168\u900f\u660e\uff0c<code>100</code> \u5b8c\u5168\u4e0d\u900f\u660e <code>/animate/&lt;boolean&gt;</code> true \u5141\u8bb8\u5bf9\u52a8\u6001\u56fe\u7247\u52a0\u6c34\u5370\uff0c\u9ed8\u8ba4 <code>false</code> <p>** \u591a\u4e2a\u6c34\u5370 **</p> <p>\u628a\u56fe\u7247\u6c34\u5370\u6216\u6587\u5b57\u6c34\u5370\u53c2\u6570\u91cd\u590d\u3002\u4f8b\u5982\uff0c\u4e00\u4e2a\u6587\u5b57\u6c34\u5370 + \u4e00\u4e2a\u56fe\u7247\u6c34\u5370\uff1a</p> <p> <pre><code>/watermark/text/5L2g5aW977yB/font/simhei/watermark/url/L2RvY3MvY2xvdWQvdXB5dW4tbG9nby5wbmc=/align/southeast\n</code></pre> <p></p> <p>\u7279\u522b\u5730\uff0c\u6c34\u5370\u4e2a\u6570\u8d8a\u591a\uff0c\u5904\u7406\u8017\u65f6\u8d8a\u957f\uff0c\u5efa\u8bae\u4e0d\u8981\u8d85\u8fc7 3 \u4e2a\u3002</p> <p>** \u6ce8 **</p> <ul> <li>\u56fe\u7247\u6c34\u5370\u7684 <code>url</code> \u9700\u8981 base64 \u7f16\u7801\uff0c\u5e76\u628a\u7f16\u7801\u540e\u7684\u5b57\u7b26\u4e32\u4e2d\u7684 <code>/</code>\uff08\u659c\u6760\uff09\u66ff\u6362\u6210 <code>|</code>\uff08\u7ad6\u7ebf\uff09\u3002</li> <li><code>align</code> \u6216 <code>gravity</code> \u7684 9 \u4e2a\u65b9\u4f4d\uff1a</li> </ul> <pre><code>    northwest     |     north      |     northeast\n                  |                |\n                  |                |\n    --------------+----------------+--------------\n                  |                |\n    west          |     center     |          east\n                  |                |\n    --------------+----------------+--------------\n                  |                |\n                  |                |\n    southwest     |     south      |     southeast\n</code></pre> <ul> <li>\u6587\u5b57\u6c34\u5370\u7684 <code>text</code> \u9700\u8981 base64 \u7f16\u7801\uff0c\u5e76\u628a\u7f16\u7801\u540e\u7684\u5b57\u7b26\u4e32\u4e2d\u7684 <code>/</code>\uff08\u659c\u6760\uff09\u66ff\u6362\u6210 <code>|</code>\uff08\u7ad6\u7ebf\uff09\u3002</li> <li>\u6587\u5b57\u6c34\u5370\u7684\u4e2d\u542b\u4e2d\u6587\u5185\u5bb9\uff08<code>text</code>\uff09\u65f6\uff0c\u5b57\u4f53\uff08<code>font</code>\uff09\u8bf7\u4f7f\u7528\u4e2d\u6587\u5b57\u4f53\uff0c\u5426\u5219\u4f1a\u4e71\u7801\u3002</li> <li>\u5b57\u4f53\u5217\u8868\uff1a</li> </ul> \u540d\u79f0 \u7c7b\u578b \u53c2\u6570\u540d \u5b8b\u4f53 \u4e2d\u6587\u5b57\u4f53 simsun \u9ed1\u4f53 \u4e2d\u6587\u5b57\u4f53 simhei \u6977\u4f53 \u4e2d\u6587\u5b57\u4f53 simkai \u96b6\u4e66 \u4e2d\u6587\u5b57\u4f53 simli \u5e7c\u5706 \u4e2d\u6587\u5b57\u4f53 simyou \u4eff\u5b8b \u4e2d\u6587\u5b57\u4f53 simfang \u7b80\u4f53\u4e2d\u6587 \u4e2d\u6587\u5b57\u4f53 sc \u7e41\u4f53\u4e2d\u6587 \u4e2d\u6587\u5b57\u4f53 tc Arial \u82f1\u6587\u5b57\u4f53 arial Georgia \u82f1\u6587\u5b57\u4f53 georgia Helvetica \u82f1\u6587\u5b57\u4f53 helvetica Times-New-Roman \u82f1\u6587\u5b57\u4f53 roman <ul> <li><code>border</code> \u7684\u503c <code>RRGGBBAA</code>\uff0c<code>RRGGBB</code> \u8868\u793a\u8fb9\u6846\u989c\u8272\uff1b<code>AA</code> \u8868\u793a\u4e0d\u900f\u660e\u5ea6\uff0c\u53d6\u503c <code>[0-255]</code>\uff0c\u503c\u8d8a\u5927\u8d8a\u900f\u660e\uff0c<code>00</code> \u8868\u793a\u5b8c\u5168\u4e0d\u900f\u660e\uff0c<code>FF</code> \u8868\u793a\u5b8c\u5168\u900f\u660e\u3002</li> <li><code>&lt;x&gt;x&lt;y&gt;</code> \u4e2d\uff0c\u8fde\u63a5 <code>&lt;x&gt;</code>\u4e0e<code>&lt;y&gt;</code>\u662f\u5c0f\u5199\u5b57\u6bcd x\uff0c\u4e0d\u662f\u4e58\u53f7\u3002</li> </ul> <p></p>"},{"location":"cloud/image/#_15","title":"\u65cb\u8f6c","text":"\u53c2\u6570 \u503c \u8bf4\u660e <code>/rotate/&lt;\u56fa\u5b9a\u503c&gt;</code> auto \u81ea\u52a8\u6276\u6b63 <code>/rotate/&lt;angle&gt;</code> <code>(0, 360]</code>\uff0c\u5982 90\u00b0 \u6309\u89d2\u5ea6\u65cb\u8f6c <p>** \u7ffb\u8f6c **</p> \u53c2\u6570 \u503c \u8bf4\u660e <code>/flip/&lt;orientation&gt;</code> \u65b9\u5411\uff0c\u5982 <code>left,right</code> \u7ffb\u8f6c\u65b9\u5411\uff0c\u53ef\u9009\u503c\uff1a<code>left,right</code>\u3001<code>top,down</code> <p>** \u6ce8 **</p> <ul> <li><code>left,right</code> \u8868\u793a\u4ece\u5de6\u5411\u53f3\u7ffb\u8f6c\uff0c<code>top,down</code> \u8868\u793a\u4ece\u4e0a\u5411\u4e0b\u7ffb\u8f6c\u3002</li> </ul> <p></p>"},{"location":"cloud/image/#_16","title":"\u9510\u5316","text":"<p>\u63d0\u9ad8\u56fe\u7247\u6a21\u7cca\u90e8\u4f4d\u7684\u6e05\u6670\u5ea6\u6216\u805a\u7126\u7a0b\u5ea6\u3002</p> \u53c2\u6570 \u503c \u8bf4\u660e <code>/unsharp/&lt;boolean&gt;</code> true \u9510\u5316\uff0c\u9ed8\u8ba4 <code>false</code>"},{"location":"cloud/image/#_17","title":"\u9ad8\u65af\u6a21\u7cca","text":"<p>\u51cf\u5c11\u56fe\u7247\u566a\u97f3\u548c\u964d\u4f4e\u56fe\u7247\u7ec6\u8282\u5c42\u6b21\uff0c\u4f7f\u56fe\u7247\u6a21\u7cca\u5316\u3002</p> \u53c2\u6570 \u503c \u8bf4\u660e <code>/gaussblur/&lt;radius&gt;x&lt;sigma&gt;</code> \u6a21\u7cca\u534a\u5f84x\u6807\u51c6\u5dee\uff0c\u5982 5x2 \u9ad8\u65af\u6a21\u7cca <p>** \u6ce8 **</p> <ul> <li><code>0 &lt;= radius &lt;= 50</code> \u4e14 <code>radius</code> \u662f\u6574\u6570\uff0c<code>sigma</code> \u662f\u6b63\u6574\u6570\u3002\u5f53 <code>radius = 0</code> \u65f6\uff0c<code>raduis</code> \u6839\u636e <code>sigma</code> \u81ea\u52a8\u8ba1\u7b97\u4ea7\u751f\u3002</li> <li><code>&lt;radius&gt;x&lt;sigma&gt;</code> \u4e2d\u7684 <code>x</code> \u662f\u5c0f\u5199\u5b57\u6bcd x\uff0c\u4e0d\u662f\u4e58\u53f7\u3002</li> </ul>"},{"location":"cloud/image/#_18","title":"\u8fb9\u6846","text":"<p>\u4e3a\u56fe\u7247\u6dfb\u52a0\u8fb9\u6846\uff0c\u652f\u6301\u8bbe\u7f6e\u8fb9\u6846\u989c\u8272\u3002</p> \u53c2\u6570 \u503c \u8bf4\u660e <code>/border/&lt;w&gt;x&lt;h&gt;</code> \u5bbdx\u9ad8\uff0c\u5982 3x2 \u8fb9\u6846\u5c3a\u5bf8\uff0c<code>w</code> \u8868\u793a\u5de6\u53f3\u8fb9\u6846\u5bbd\u5ea6\uff0c<code>h</code> \u8868\u793a\u4e0a\u4e0b\u8fb9\u6846\u5bbd\u5ea6 <code>/brdcolor/&lt;brdcolor&gt;</code> RRGGBBAA\uff0c\u5982 FF000000\uff08\u7ea2\u8272\u4e0d\u900f\u660e\uff09 \u8fb9\u6846\u989c\u8272\u548c\u900f\u660e\u5ea6\uff0c\u9ed8\u8ba4 <code>FFFFFF00\uff08\u767d\u8272\u4e0d\u900f\u660e\uff09</code> <p>** \u6ce8 **</p> <ul> <li><code>brdcolor</code> \u7684\u503c <code>RRGGBBAA</code>\uff0c<code>RRGGBB</code> \u8868\u793a\u8fb9\u6846\u989c\u8272\uff1b<code>AA</code> \u8868\u793a\u4e0d\u900f\u660e\u5ea6\uff0c\u53d6\u503c <code>[0-255]</code>\uff0c\u503c\u8d8a\u5927\u8d8a\u900f\u660e\uff0c<code>00</code> \u8868\u793a\u5b8c\u5168\u4e0d\u900f\u660e\uff0c<code>FF</code> \u8868\u793a\u5b8c\u5168\u900f\u660e\u3002</li> <li><code>&lt;w&gt;x&lt;h&gt;</code> \u4e2d\u7684 <code>x</code> \u662f\u5c0f\u5199\u5b57\u6bcd x\uff0c\u4e0d\u662f\u4e58\u53f7\u3002</li> </ul> <p></p>"},{"location":"cloud/image/#_19","title":"\u753b\u5e03","text":"<p>\u4e3a\u56fe\u7247\u6dfb\u52a0\u753b\u5e03\uff0c\u76f8\u5f53\u4e8e\u628a\u56fe\u7247\u653e\u5165\u753b\u5e03\u4e2d\u3002</p> \u53c2\u6570 \u503c \u8bf4\u660e <code>/canvas/&lt;w&gt;x&lt;h&gt;a&lt;x&gt;a&lt;y&gt;</code> \u5bbdx\u9ad8axay\uff0c\u5982 600x400a50a20 \u753b\u5e03\u5c3a\u5bf8\uff0c<code>w</code> \u8868\u793a\u753b\u5e03\u5bbd\uff0c<code>h</code> \u8868\u793a\u753b\u5e03\u9ad8\uff0c<code>x</code>\u3001<code>y</code> \u8868\u793a\u56fe\u7247\u5de6\u4e0a\u89d2\u5728\u753b\u5e03\u4e2d\u7684\u5750\u6807\uff0c\u5982\u679c <code>x</code>\u3001<code>y</code> \u4e0d\u5b58\u5728\uff0c\u5219\u56fe\u7247\u5728\u753b\u5e03\u4e2d\u95f4 <code>/cvscolor/&lt;cvscolor&gt;</code> RRGGBBAA\uff0c\u5982 FF000000\uff08\u7ea2\u8272\u4e0d\u900f\u660e\uff09 \u8fb9\u6846\u989c\u8272\u548c\u900f\u660e\u5ea6\uff0c\u9ed8\u8ba4 FFFFFF00\uff08\u767d\u8272\u4e0d\u900f\u660e\uff09 <p>** \u6ce8 **</p> <ul> <li><code>cvscolor</code> \u7684\u503c <code>RRGGBBAA</code>\uff0c<code>RRGGBB</code> \u8868\u793a\u8fb9\u6846\u989c\u8272\uff1b<code>AA</code> \u8868\u793a\u4e0d\u900f\u660e\u5ea6\uff0c\u53d6\u503c <code>[0-255]</code>\uff0c\u503c\u8d8a\u5927\u8d8a\u900f\u660e\uff0c<code>00</code> \u8868\u793a\u5b8c\u5168\u4e0d\u900f\u660e\uff0c<code>FF</code> \u8868\u793a\u5b8c\u5168\u900f\u660e\u3002</li> <li><code>&lt;w&gt;x&lt;h&gt;</code> \u4e2d\u7684 <code>x</code> \u662f\u5c0f\u5199\u5b57\u6bcd x\uff0c\u4e0d\u662f\u4e58\u53f7\u3002</li> </ul> <p></p>"},{"location":"cloud/image/#_20","title":"\u5c5e\u6027\u83b7\u53d6","text":"\u53c2\u6570 \u503c \u8bf4\u660e <code>/info</code> \u65e0 \u83b7\u53d6\u57fa\u672c\u4fe1\u606f\uff08\u5305\u62ec\u5bbd\u3001\u9ad8\u3001\u683c\u5f0f\u3001\u5e27\u6570\uff09 <code>/meta</code> \u65e0 \u83b7\u53d6 EXIF \u4fe1\u606f + \u57fa\u672c\u4fe1\u606f <code>/meta/&lt;\u56fa\u5b9a\u503c&gt;</code> iptc \u83b7\u53d6 IPTC \u4fe1\u606f + \u57fa\u672c\u4fe1\u606f <code>/meta/&lt;\u56fa\u5b9a\u503c&gt;</code> all \u83b7\u53d6\u56fe\u7247\u6240\u6709\u4fe1\u606f\uff0c\u5f53\u524d\u662f EXIF \u4fe1\u606f + IPTC \u4fe1\u606f + \u57fa\u672c\u4fe1\u606f <p>** \u6ce8 **</p> <ul> <li>\u4e0a\u4f20\u9884\u5904\u7406\u65f6\uff0c\u54cd\u5e94\u4fe1\u606f\u4e2d\u9ed8\u8ba4\u5305\u542b\u56fe\u7247\u57fa\u672c\u4fe1\u606f\uff08<code>info</code>\uff09\uff0c\u83b7\u53d6\u5176\u4ed6\u56fe\u7247\u4fe1\u606f\uff0c\u89c1 FORM API \u4e2d\u7684 <code>x-gmkerl-type</code> \u53c2\u6570\u3002</li> <li><code>/meta/all</code> \u83b7\u53d6\u5230\u7684\u4fe1\u606f\u4f1a\u968f\u7740\u5e73\u53f0\u652f\u6301\u7684\u4fe1\u606f\u589e\u591a\u800c\u53d8\u5316\uff0c\u8bf7\u5728\u4f7f\u7528\u65f6\u6ce8\u610f\u3002</li> </ul> <p></p>"},{"location":"cloud/image/#_21","title":"\u7ed3\u679c\u8f93\u51fa","text":"\u53c2\u6570 \u503c \u8bf4\u660e <code>/format/&lt;format&gt;</code> \u56fe\u7247\u683c\u5f0f\uff0c\u5982 jpg \u8f93\u51fa\u683c\u5f0f\uff0c\u53ef\u9009\u503c <code>jpg</code>\u3001<code>png</code>\u3001<code>webp</code>\u3002<code>webp</code> \u5305\u542b\u52a8\u6001 WebP <code>/lossless/&lt;boolean&gt;</code> true \u65e0\u635f\u538b\u7f29\uff0c\u9ed8\u8ba4 <code>false</code>\u3002\u4ec5\u5f53\u8f93\u51fa\u683c\u5f0f\u662f <code>WebP</code> \u65f6\u6709\u6548 <code>/quality/&lt;quality&gt;</code> \u6574\u6570\u503c\uff0c\u5982 75 \u8bbe\u7f6e\u538b\u7f29\u8d28\u91cf\uff0c\u53ef\u9009\u8303\u56f4<code>[1-99]</code> <code>/compress/&lt;boolean&gt;</code> true JPG \u3001 PNG \u5927\u5c0f\u538b\u7f29\u4f18\u5316\uff0c\u9ed8\u8ba4 <code>false</code> <code>/coalesce/&lt;boolean&gt;</code> false \u662f\u5426\u586b\u5145\u52a8\u6001 GIF \u56fe\u50cf\u4e2d\u5171\u540c\u90e8\u5206\uff0c\u9ed8\u8ba4 <code>true</code>\uff0c\u89c1\u300c\u6ce8\u300d <code>/progressive/&lt;boolean&gt;</code> true JPG \u56fe\u7247\u6e10\u8fdb\u5f0f\u52a0\u8f7d\uff0c\u56fe\u7247\u52a0\u8f7d\u4ece\u6a21\u7cca\u5230\u6e05\u6670 <code>/noicc/&lt;boolean&gt;</code> true \u6e05\u9664\u56fe\u7247 ICC \u4fe1\u606f\uff0c\u9ed8\u8ba4 <code>false</code> <code>/strip/&lt;boolean&gt;</code> true \u53bb\u9664\u56fe\u7247\u6240\u6709\u5143\u4fe1\u606f\uff0c\u5305\u62ec EXIF \u3001ICC \u7b49\u3002\u9ed8\u8ba4 <code>false</code> <code>/gifto/&lt;boolean&gt;</code> true \u591a\u5e27 GIF \u56fe\u7247\u8f6c\u4e3a\u5355\u5e27 GIF \u56fe\u7247 <code>/exifswitch/&lt;boolean&gt;</code> true \u4fdd\u7559 EXIF \u4fe1\u606f \uff0c\u9ed8\u8ba4\u4f1a\u5220\u9664 EXIF \u4fe1\u606f <code>/ignore-error/&lt;boolean&gt;</code> true \u662f\u5426\u5ffd\u7565\u9519\u8bef\u8fd4\u56de\u539f\u56fe \uff0c\u9ed8\u8ba4 <code>false</code>\uff0c\u8fd4\u56de\u9519\u8bef <p>** \u6ce8 **</p> <ul> <li>\u4e00\u822c\u6765\u8bf4\uff0c<code>quality\uff08\u8d28\u91cf\uff09</code> \u662f <code>75</code>\uff0c\u5728\u8fd9\u4e2a\u503c\u538b\u7f29\u5927\u5c0f\u4e0e\u56fe\u7247\u8d28\u91cf\u635f\u5931\u5f97\u5230\u5e73\u8861\u3002</li> <li><code>compress</code> \u4f1a\u5bf9 JPG/PNG \u8fdb\u884c\u4e00\u6b21\u538b\u7f29\u4ee5\u51cf\u5c11\u56fe\u7247\u4f53\u79ef\uff0c\u540c\u65f6\u7a0d\u5fae\u5ef6\u957f\u4e86\u56fe\u7247\u5904\u7406\u65f6\u95f4\u3001\u964d\u4f4e\u4e86\u56fe\u7247\u8d28\u91cf\u3002</li> <li><code>noicc</code> \u4f1a\u5bfc\u81f4\u56fe\u7247\u8d28\u91cf\u8f7b\u5fae\u7684\u4e0b\u964d\u3002</li> <li>\u5927\u90e8\u5206\u52a8\u6001 GIF \u53ef\u4ee5\u901a\u8fc7\u7701\u7565\u76f8\u90bb\u5e27\u4e4b\u95f4\u5171\u540c\u90e8\u5206\u6765\u4f18\u5316\u56fe\u7247\u4f53\u79ef\u3002\u5982\u679c <code>coalesce</code> \u53c2\u6570\u4e3a <code>false</code>\uff0c\u5f53\u5bf9\u52a8\u6001 GIF \u505a\u7f29\u7565\u6216\u653e\u5927\u65f6\uff0c\u53ef\u80fd\u4f1a\u5bfc\u81f4\u56fe\u7247\u8d28\u91cf\u4e0b\u964d\u3002 </li> <li><code>ignore-error</code> \u53ea\u5bf9 405\u3001409\u3001503 \u72b6\u6001\u7801\u6709\u6548\uff0c\u5e76\u4f1a\u5728\u54cd\u5e94\u5934\u4e2d\u9644\u52a0 <code>x-gmkerl-err-code</code> \u5b57\u6bb5\u6807\u8bb0\u5b9e\u9645\u9519\u8bef\u7801\u3002\u5176\u4ed6\u9519\u8bef\u72b6\u6001\u7801\u65e0\u6548\uff0c\u8fd4\u56de\u9519\u8bef\u3002</li> </ul>"},{"location":"cloud/image/#_22","title":"\u4e3b\u9898\u8272\u63d0\u53d6","text":"\u53c2\u6570 \u503c \u8bf4\u660e <code>/excolor/&lt;integer&gt;</code> \u989c\u8272\u6570\u91cf\uff0c\u5982 128 \u63d0\u53d6\u7684\u989c\u8272\u6570\u91cf\u3002\u53ef\u9009\u503c\uff1a<code>[1-4096]</code> <code>/exformat/&lt;exformat&gt;</code> \u989c\u8272\u8fdb\u5236\uff0c\u5982 hex \u8fd4\u56de\u989c\u8272\u7684\u8fdb\u5236\uff0c\u9ed8\u8ba4 <code>dec</code>\u3002\u53ef\u9009\u503c\uff1a<code>dec</code>\u3001<code>hex</code> <p>** \u6ce8 **</p> <ul> <li>\u4ee5 JSON \u683c\u5f0f\u8fd4\u56de\u989c\u8272\u3002<code>hex\uff08\u5341\u516d\u8fdb\u5236\uff09</code> \u8868\u793a\u989c\u8272\u4e3a <code>0xRRGGBB</code>\uff0c\u5982 <code>0xff00aa</code>\uff1b<code>dec\uff08\u5341\u8fdb\u5236\uff09</code> \u8868\u793a\u989c\u8272\u4e3a <code>12345678</code>\u3002</li> </ul>"},{"location":"cloud/image/#_23","title":"\u9759\u6001\u56fe\u6e10\u53d8","text":"\u53c2\u6570 \u503c \u8bf4\u660e <code>/gdori/&lt;orientation&gt;</code> \u65b9\u5411\uff0c\u5982 top,down\uff08\u81ea\u4e0a\u800c\u4e0b\uff09 \u6e10\u53d8\u65b9\u5411 <code>/gdpos/&lt;gdpos&gt;</code> \u5f00\u59cb\u4f4d\u7f6e,\u7ed3\u675f\u4f4d\u7f6e\uff0c\u5982 10,100 \u6e10\u53d8\u4ece\u5f00\u59cb\u4f4d\u7f6e\u81f3\u7ed3\u675f\u4f4d\u7f6e\u3002\u5355\u4f4d\u50cf\u7d20\uff08px\uff09 <code>/gdstartcolor/&lt;gdstartcolor&gt;</code> RRGGBBAA\uff0c\u5982 FF000000\uff08\u7ea2\u8272\u4e0d\u900f\u660e\uff09 \u5f00\u59cb\u4f4d\u7f6e\u989c\u8272\u53ca\u900f\u660e\u5ea6 <code>/gdstopcolor/&lt;gdstopcolor&gt;</code> RRGGBBAA\uff0c\u5982 FF000000\uff08\u7ea2\u8272\u4e0d\u900f\u660e\uff09 \u7ed3\u675f\u4f4d\u7f6e\u989c\u8272\u53ca\u900f\u660e\u5ea6 <p>** \u6ce8 **</p> <ul> <li><code>gdori</code> \u53d6\u503c\uff1a<code>top,down</code>\uff08\u81ea\u4e0a\u800c\u4e0b\uff09\u3001<code>bottom,up</code>\uff08\u81ea\u4e0b\u800c\u4e0a\uff09\u3001<code>left,right</code>\uff08\u81ea\u5de6\u5411\u53f3\uff09\u3001<code>right,left</code>\uff08\u81ea\u53f3\u5411\u5de6\uff09\u3002</li> <li><code>RRGGBBAA</code>\uff1a<code>RRGGBB</code> \u8868\u793a\u8fb9\u6846\u989c\u8272\uff1b<code>AA</code> \u8868\u793a\u4e0d\u900f\u660e\u5ea6\uff0c\u53d6\u503c <code>[0-255]</code>\uff0c\u503c\u8d8a\u5927\u8d8a\u900f\u660e\uff0c<code>00</code> \u8868\u793a\u5b8c\u5168\u4e0d\u900f\u660e\uff0c<code>FF</code> \u8868\u793a\u5b8c\u5168\u900f\u660e\u3002</li> </ul> <p>\u5982\u6709\u7591\u95ee\u8bf7 \u8054\u7cfb\u6211\u4eec</p>"},{"location":"cloud/spider/","title":"\u6587\u4ef6\u62c9\u53d6","text":""},{"location":"cloud/spider/#_1","title":"\u5feb\u901f\u5165\u95e8","text":"<p>\u53c8\u62cd\u4e91\u5904\u7406\uff08\u6587\u4ef6\u62c9\u53d6\uff09\u57fa\u4e8e\u4e91\u5b58\u50a8\u670d\u52a1\uff0c\u60a8\u5728\u4f7f\u7528\u5b83\u4e4b\u524d\uff0c\u8bf7\u786e\u4fdd\u60a8\u5df2\u7ecf\u6ce8\u518c\u53c8\u62cd\u4e91\u8d26\u53f7\u5e76\u5b8c\u6210\u5b9e\u540d\u9a8c\u8bc1\uff0c\u8bf7\u786e\u4fdd\u60a8\u5df2\u7ecf\u521b\u5efa\u4e91\u5b58\u50a8\u670d\u52a1\u3002</p> <p>\u4ef7\u683c\u65b9\u9762\uff0c\u514d\u8d39\u3002</p>"},{"location":"cloud/spider/#_2","title":"\u5f00\u53d1\u8005\u6307\u5357","text":"<p>\u6587\u4ef6\u62c9\u53d6\u6d41\u7a0b\u5982\u4e0b\uff1a </p> <p>\u7279\u522b\u5730\uff0c\u672c\u670d\u52a1\u65e8\u5728\u4e3a\u7528\u6237\u63d0\u4f9b\u66f4\u4fbf\u6377\u7684\u8d44\u6e90\u4e0a\u4f20\u65b9\u5f0f\uff0c\u8bf7\u60a8\u5728\u63d0\u4ea4\u8d44\u6e90\u94fe\u63a5\u65f6\u786e\u4fdd\u60a8\u62e5\u6709\u8be5\u8d44\u6e90\u7684\u4f7f\u7528\u6743\u6216\u6240\u6709\u6743\u3002</p> <p></p>"},{"location":"cloud/spider/#_3","title":"\u63d0\u4ea4\u5904\u7406\u4efb\u52a1","text":"<p>** \u8bf7\u6c42\u65b9\u6cd5 **</p> <p>\u5bf9\u9700\u8981\u62c9\u53d6\u7684\u6587\u4ef6\uff0c\u4ee5 <code>POST</code> \u65b9\u6cd5\u5411 <code>http://p0.api.upyun.com/pretreatment/</code> \u63d0\u4ea4\u5904\u7406\u4efb\u52a1\uff0c\u54cd\u5e94\u4e2d\u8fd4\u56de\u4efb\u52a1 <code>task_id</code>\u3002\u4efb\u52a1\u4ee5\u5f02\u6b65\u7684\u65b9\u5f0f\u5904\u7406\uff0c\u5904\u7406\u5b8c\u6210\u540e\uff0c\u56de\u8c03\u901a\u77e5\u7528\u6237\u5904\u7406\u7ed3\u679c\u3002</p> <pre><code>curl -X POST \\\n    http://p0.api.upyun.com/pretreatment/ \\\n    -H \"Authorization: UPYUN &lt;Operator&gt;:&lt;Signature&gt;\" \\\n    -H \"Date: &lt;Wed, 29 Oct 2014 02:26:58 GMT&gt;\" \\\n    -H \"Content-MD5: &lt;Content-MD5&gt;\" \\\n    -d \"service=&lt;service&gt;\" \\\n    -d \"notify_url=&lt;notify_url&gt;\" \\\n    -d \"app_name=spiderman\" \\\n    -d \"tasks=&lt;base64 \u7f16\u7801\u540e\u7684\u4efb\u52a1\u5b57\u7b26\u4e32&gt;\"\n</code></pre> <p>** \u8ba4\u8bc1\u9274\u6743 **</p> <p><code>Authorization</code> \u8be6\u89c1\u7b7e\u540d\u8ba4\u8bc1\u3002</p> <p>** \u8bf7\u6c42\u53c2\u6570 **</p> \u53c2\u6570 \u7c7b\u578b \u5fc5\u9009 \u8bf4\u660e service string \u662f \u6587\u4ef6\u4e0a\u4f20\u7684\u670d\u52a1\u540d notify_url string \u662f \u56de\u8c03\u901a\u77e5\u5730\u5740\uff0c\u8be6\u89c1\u56de\u8c03\u901a\u77e5 tasks string \u662f \u4efb\u52a1\u4fe1\u606f\uff0c\u8be6\u89c1 tasks \u53c2\u6570\u8bf4\u660e app_name string \u662f \u5904\u7406\u529f\u80fd\uff0c<code>spiderman</code> \u8868\u793a\u6587\u4ef6\u62c9\u53d6 <p> ** tasks \u53c2\u6570\u8bf4\u660e **</p> <p>1. \u6309 JSON \u683c\u5f0f\u7ec4\u88c5\u4efb\u52a1\uff0c\u4e00\u6b21\u8bf7\u6c42 <code>tasks</code> \u6700\u591a\u53ef\u4ee5\u63d0\u4ea4 10 \u4e2a\u4efb\u52a1\u3002 \u4efb\u52a1\u53c2\u6570\u89c1\u529f\u80fd \u3002</p> <pre><code>[\n    {\n        \"url\": \"http://www.upyun.com/index.html\",              // \u9700\u8981\u62c9\u53d6\u6587\u4ef6\u7684 URL\n        \"random\": false,                                       // \u662f\u5426\u8ffd\u52a0\u968f\u673a\u6570, \u9ed8\u8ba4 false\n        \"overwrite\": true,                                     // \u662f\u5426\u8986\u76d6\uff0c\u9ed8\u8ba4 true\n        \"save_as\": \"/site/index.html\",                         // \u4fdd\u5b58\u8def\u5f84\n    },\n    \u2026\n]\n</code></pre> <p>2. \u628a JSON \u5b57\u7b26\u4e32 Base64 \u7f16\u7801\uff0c\u5f97\u5230 <code>tasks</code>\u3002</p> <p>** \u54cd\u5e94\u4fe1\u606f **</p> <ul> <li>\u4efb\u52a1\u63d0\u4ea4\u6210\u529f\uff1a\u8fd4\u56de <code>200</code>\uff0c\u54cd\u5e94\u4f53\u662f\u4e00\u7ec4\u6309\u4efb\u52a1\u63d0\u4ea4\u5148\u540e\u987a\u5e8f\u6392\u5e8f\u7684 <code>task_id</code>\u3002\u4f8b\u5982\uff1a</li> </ul> <pre><code>[\n    \"35f0148d414a688a275bf915ba7cebb2\",\n    \"98adbaa52b2f63d6d7f327a0ff223348\",\n    \"c3103189fa906a5354d29bd807e8dc51\",\n    \u2026\n]\n</code></pre> <ul> <li>\u4efb\u52a1\u63d0\u4ea4\u5931\u8d25\uff1a\u8fd4\u56de\u76f8\u5e94\u7684\u51fa\u9519\u4fe1\u606f\uff0c\u5177\u4f53\u8bf7\u53c2\u9605\u300c\u72b6\u6001\u7801\u8868\u300d\u3002</li> </ul> <p></p>"},{"location":"cloud/spider/#_4","title":"\u56de\u8c03\u901a\u77e5","text":"<p>\u4efb\u52a1\u5904\u7406\u5b8c\u6210\u540e\uff0c\u5411 <code>notify_url</code> \u53d1\u9001 <code>HTTP POST</code> \u8bf7\u6c42\uff0c\u8bf7\u6c42\u4f53\u662f\u56de\u8c03\u4fe1\u606f\u3002</p> <pre><code>curl -X POST \\\n    &lt;notify_url&gt; \\\n    -H \"Authorization: UPYUN &lt;Operator&gt;:&lt;Signature&gt;\" \\\n    -H \"Date: &lt;Wed, 29 Oct 2014 02:26:58 GMT&gt;\" \\\n    -H \"Content-MD5: &lt;Content-MD5&gt;\" \\\n    -d \"service=&lt;service&gt;\" \\\n    # \u5176\u4ed6\u53c2\u6570...\n</code></pre> <p>** \u56de\u8c03\u4fe1\u606f **</p> <p>\u56de\u8c03\u4fe1\u606f\u662f JSON \u5b57\u7b26\u4e32\uff0c\u53c2\u6570\u540d\u53ca\u8bf4\u660e\u5982\u4e0b\uff1a</p> \u53c2\u6570 \u7c7b\u578b \u8bf4\u660e task_id string \u4efb\u52a1 ID service string \u6587\u4ef6\u4e0a\u4f20\u7684\u670d\u52a1\u540d status_code integer \u5904\u7406\u7ed3\u679c\u72b6\u6001\u7801\uff0c<code>200</code> \u8868\u793a\u6210\u529f\u5904\u7406 path string \u6587\u4ef6\u4e0a\u4f20\u4fdd\u5b58\u8def\u5f84 error string \u9519\u8bef\u4fe1\u606f\uff0c\u7a7a\u5b57\u7b26\u4e32\u8868\u793a\u65e0\u9519\u8bef\u4fe1\u606f <p>** \u56de\u8c03\u7b7e\u540d **</p> <p><code>Authorization</code> \u8be6\u89c1\u7b7e\u540d\u8ba4\u8bc1\u3002</p> <p></p>"},{"location":"cloud/spider/#_5","title":"\u72b6\u6001\u7801\u8868","text":"\u72b6\u6001\u7801 \u8bf4\u660e 200 \u5904\u7406\u6210\u529f 204 \u5904\u7406\u6210\u529f\uff0c\u5185\u5bb9\u672a\u53d1\u751f\u6539\u53d8 400 \u53c2\u6570\u9519\u8bef 404 \u62c9\u53d6\u7684\u6587\u4ef6\u4e0d\u5b58\u5728 5xx \u670d\u52a1\u7aef\u9519\u8bef\u3002\u5982\u9047\u6b64\u7c7b\u9519\u8bef\uff0c\u8bf7\u53cd\u9988\u7ed9\u552e\u540e\u6216\u60a8\u7684\u5546\u52a1\u7ecf\u7406"},{"location":"cloud/spider/#_6","title":"\u529f\u80fd","text":""},{"location":"cloud/spider/#spiderman","title":"\u6587\u4ef6\u62c9\u53d6\uff08spiderman\uff09","text":"\u53c2\u6570 \u7c7b\u578b \u5fc5\u9009 \u8bf4\u660e url string \u662f \u9700\u8981\u62c9\u53d6\u6587\u4ef6\u7684 URL \u5730\u5740 save_as string \u662f \u6587\u4ef6\u4e0a\u4f20\u5b58\u653e\u8def\u5f84 overwrite boolean \u5426 \u5982\u679c\u6587\u4ef6\u5b58\u5728\uff0c\u662f\u5426\u8986\u76d6\uff0c\u9ed8\u8ba4 <code>true</code> content-md5 String \u5426 \u4e0a\u4f20\u6587\u4ef6\u7684 MD5 \u503c\uff0c\u5982\u679c\u8bf7\u6c42\u4e2d\u6587\u4ef6\u592a\u5927\u8ba1\u7b97 MD5 \u4e0d\u65b9\u4fbf\uff0c\u53ef\u4ee5\u4e3a\u7a7a content-type String \u5426 \u6587\u4ef6\u7c7b\u578b\uff0c\u9ed8\u8ba4\u4f7f\u7528\u6587\u4ef6\u6269\u5c55\u540d\u4f5c\u4e3a\u6587\u4ef6\u7c7b\u578b content-secret String \u5426 \u6587\u4ef6\u5bc6\u94a5\uff0c\u7528\u4e8e\u4fdd\u62a4\u6587\u4ef6\uff0c\u9632\u6b62\u6587\u4ef6\u88ab\u76f4\u63a5\u8bbf\u95ee\uff0c\u89c1 Content-Secret \u53c2\u6570\u8bf4\u660e x-upyun-meta-x String \u5426 \u6587\u4ef6\u5143\u4fe1\u606f\uff0c\u89c1 Metadata x-gmkerl-thumb string \u5426 \u56fe\u7247\u5904\u7406\u53c2\u6570\uff0c\u9ed8\u8ba4\u4e0d\u8fdb\u884c\u56fe\u7247\u5904\u7406\u3002\u8be6\u89c1\u4e0a\u4f20\u9884\u5904\u7406\uff08\u540c\u6b65\uff09 random boolean \u5426 \u662f\u5426\u5728 <code>url</code> \u540e\u8ffd\u52a0\u968f\u673a\u6570\uff0c\u8ffd\u52a0\u683c\u5f0f <code>?&lt;random&gt;</code>\uff0c\u9ed8\u8ba4 <code>false</code>\u3002\u89c1\u300c\u6ce8\u300d <p>** \u6ce8 **</p> <ul> <li><code>url</code> \u662f\u6307\u9700\u8981\u62c9\u53d6\u6587\u4ef6\u7684 URL \u5730\u5740\uff0c\u5982\u679c\u6587\u4ef6\u5b58\u5728\u7f13\u5b58\uff0c<code>random</code> \u53c2\u6570\u53ef\u4ee5\u907f\u514d\u6211\u4eec\u9519\u8bef\u91cd\u8bd5\u6216\u8005\u60a8\u91cd\u590d\u63d0\u4ea4\u8bf7\u6c42\u65f6\u83b7\u53d6\u5230\u7f13\u5b58\u5185\u5bb9\u3002</li> <li>\u5982\u679c\u62c9\u53d6\u6587\u4ef6\u8fc7\u5927\uff0c\u53ef\u80fd\u4f1a\u8d85\u65f6\u5bfc\u81f4\u62c9\u53d6\u5931\u8d25\u3002</li> </ul> <p>\u5982\u6709\u7591\u95ee\u8bf7 \u8054\u7cfb\u6211\u4eec</p>"},{"location":"cloud/sync_audio/","title":"\u540c\u6b65\u97f3\u9891\u5904\u7406","text":""},{"location":"cloud/sync_audio/#_1","title":"\u7b80\u4ecb","text":"<p>\u4e3a\u4e86\u89e3\u51b3\u5f02\u6b65\u97f3\u9891\u5904\u7406\u65f6\u95f4\u957f\uff0c\u53c8\u62cd\u4e91\u53d1\u5e03\u4e86\u7684\u540c\u6b65\u97f3\u9891\u5904\u7406\uff0c\u53ef\u4ee5\u5b9e\u73b0\u79d2\u7ea7\u97f3\u9891\u8f6c\u7801\u3002\u5b83\u5728\u4e0a\u4f20\u65f6\u4f7f\u7528\uff0c\u628a\u4e0a\u4f20\u7684\u97f3\u9891\u5904\u7406\u6210\u6307\u5b9a\u89c4\u683c\u7684\u97f3\u9891\u518d\u5b58\u50a8\u3002</p> <p>\u672c\u7c7b\u529f\u80fd\u9700\u8981\u6536\u8d39\uff0c\u5728\u4f7f\u7528\u5b83\u4e4b\u524d\uff0c\u8bf7\u786e\u4fdd\u60a8\u5df2\u7ecf\u6ce8\u518c\u53c8\u62cd\u4e91\u8d26\u53f7\u5e76\u5b8c\u6210\u5b9e\u540d\u9a8c\u8bc1\uff0c\u8bf7\u786e\u4fdd\u60a8\u5df2\u7ecf\u521b\u5efa\u4e91\u5b58\u50a8\u670d\u52a1\u3002</p> <p>\u76f8\u5173\u9605\u8bfb\uff1a\u5f02\u6b65\u97f3\u89c6\u9891\u5904\u7406\uff0c\u540c\u6b65\u89c6\u9891\u5904\u7406\u3002</p> <p></p>"},{"location":"cloud/sync_audio/#_2","title":"\u97f3\u9891\u8f6c\u7801","text":"<p>\u63d0\u4f9b\u5bf9\u97f3\u9891\u8fdb\u884c\u8f6c\u683c\u5f0f\u3001\u8f6c\u7801\u7387\u3001\u8f6c\u58f0\u9053\uff0c\u901a\u5e38\u7684\u8bbe\u7f6e\u662f\u683c\u5f0f mp3\u3001\u7801\u7387 44\u3001\u58f0\u9053 2\u3002</p>"},{"location":"cloud/sync_audio/#_3","title":"\u8bf7\u6c42","text":"<p>** \u8bf7\u6c42\u65b9\u6cd5 **</p> <p>\u4f7f\u7528 FORM API \u4e0a\u4f20\u97f3\u9891\u6587\u4ef6\uff0c\u5728\u4e0a\u4f20\u53c2\u6570\u4e2d\u9644\u52a0\u53c2\u6570 <code>x-audio-avopts</code> \u6765\u4f7f\u7528\u3002</p> <p>** \u8bf7\u6c42\u53c2\u6570 **</p> \u53c2\u6570 \u7c7b\u578b \u5fc5\u9009 \u8bf4\u660e /ab/ integer \u662f \u97f3\u9891\u7801\u7387\uff0c\u5355\u4f4d kbps\uff0c\u9ed8\u8ba4\u503c 44 /ac/ integer \u662f \u97f3\u9891\u58f0\u9053\uff0c\u9ed8\u8ba4\u503c 2\u3002\u53ef\u9009\u503c 1\u30012 /f/ string \u662f \u97f3\u9891\u683c\u5f0f\uff0c\u9ed8\u8ba4\u503c mp3 \u3002\u53ef\u9009\u503c  mp3 \u3001ogg <p>** \u6ce8 **</p> <ul> <li>\u53c8\u62cd\u4e91 CDN \u9ed8\u8ba4\u5f00\u542f\u4e86\u5206\u6bb5\u7f13\u5b58\uff08\u5206\u6bb5\u5206\u53d1\u6587\u4ef6\uff09\uff0c\u60a8\u4e0d\u9700\u8981\u62c5\u5fc3\u97f3\u9891\u6587\u4ef6\u5927\u8bbf\u95ee\u6162\u7684\u95ee\u9898\u3002</li> </ul>"},{"location":"cloud/sync_audio/#_4","title":"\u54cd\u5e94","text":"<p>\u8be6\u89c1 FORM API \u7684\u901a\u77e5\u89c4\u5219\u3002</p>"},{"location":"cloud/sync_audio/#_5","title":"\u4e3e\u4f8b","text":"<p>** \u8bf7\u6c42\u793a\u4f8b **</p> <pre><code>// FORM API \u9644\u52a0\u4e0a\u4f20\u53c2\u6570\n\nx-audio-avopts: /ab/48/ac/1/f/ogg\n</code></pre> <p>** \u54cd\u5e94\u793a\u4f8b **</p> <pre><code>HTTP/1.1 200 OK\nX-Request-Id: 5133947d3aa83f733da38c5630964d30\nContent-Length: 153\n\n{\"sign\":\"6a73b2781706a62794db9c9dac179921\",\"code\":200,\"file_size\":23508491,\"url\":\"\\/audio.mp3\",\"time\":1494559280,\"message\":\"ok\",\"mimetype\":\"audio\\/mpeg\"}\n</code></pre> <p></p>"},{"location":"cloud/sync_audio/#_6","title":"\u72b6\u6001\u7801\u8bf4\u660e","text":"\u53c2\u6570 \u7c7b\u578b 200 \u5904\u7406\u6210\u529f 403 \u8f6c\u7801\u5931\u8d25 405 \u53c2\u6570\u9519\u8bef 413 \u8f6c\u7801\u8d85\u65f6 5xx \u670d\u52a1\u7aef\u9519\u8bef\uff0c\u8bf7\u53cd\u9988\u7ed9\u552e\u540e\u6216\u60a8\u7684\u5546\u52a1\u7ecf\u7406 <p>\u5982\u6709\u7591\u95ee\u8bf7 \u8054\u7cfb\u6211\u4eec</p>"},{"location":"cloud/sync_video/","title":"\u540c\u6b65\u89c6\u9891\u5904\u7406","text":""},{"location":"cloud/sync_video/#_1","title":"\u7b80\u4ecb","text":"<p>\u4e3a\u4e86\u89e3\u51b3\u5f02\u6b65\u89c6\u9891\u5904\u7406\u65f6\u95f4\u957f\uff0c\u53c8\u62cd\u4e91\u63a8\u51fa\u9488\u5bf9 M3U8\uff08ts\uff09\u7684\u5b9e\u65f6\u89c6\u9891\u5904\u7406\u89e3\u51b3\u65b9\u6848\uff0c\u53ef\u4ee5\u5b9e\u73b0\u79d2\u7ea7\u89c6\u9891\u62fc\u63a5\u3001\u5408\u5e76\u3001\u5143\u4fe1\u606f\u83b7\u53d6\u3002\u60a8\u53ef\u4ee5\u628a\u89c6\u9891\u5207\u7247\u6210 M3U8\uff08ts\uff09\uff0c\u6765\u4f7f\u7528\u5b9e\u65f6\u89c6\u9891\u5904\u7406\u3002</p> <p>\u672c\u7c7b\u529f\u80fd\u73b0\u5728\u514d\u8d39\uff0c\u6b22\u8fce\u4f7f\u7528\u3002\u5728\u4f7f\u7528\u5b83\u4e4b\u524d\uff0c\u8bf7\u786e\u4fdd\u60a8\u5df2\u7ecf\u6ce8\u518c\u53c8\u62cd\u4e91\u8d26\u53f7\u5e76\u5b8c\u6210\u5b9e\u540d\u9a8c\u8bc1\uff0c\u8bf7\u786e\u4fdd\u60a8\u5df2\u7ecf\u521b\u5efa\u4e91\u5b58\u50a8\u670d\u52a1\u3002</p> <p>\u76f8\u5173\u9605\u8bfb\uff1a\u5f02\u6b65\u97f3\u89c6\u9891\u5904\u7406\uff0c\u540c\u6b65\u97f3\u9891\u5904\u7406\u3002</p> <p></p>"},{"location":"cloud/sync_video/#m3u8","title":"M3U8 \u62fc\u63a5","text":"<p>\u591a\u4e2a M3U8 \u62fc\u63a5\u6210\u4e00\u4e2a\u3002</p>"},{"location":"cloud/sync_video/#_2","title":"\u8bf7\u6c42","text":"<p>** \u8bf7\u6c42\u8bed\u6cd5 **</p> <pre><code>POST http://p1.api.upyun.com/&lt;service&gt;/m3u8er/concat HTTP/1.1\nHost: p1.api.upyun.com\nDate: GMT Date\nAuthorization: UPYUN &lt;Operator&gt;:&lt;Signature&gt;\nContent-Type: application/json\n\n{\"m3u8s\": [\"&lt;\u62fc\u63a5 M3U8 \u7684\u5b58\u50a8\u5730\u5740&gt;\"], \"save_as\": \"&lt;\u7ed3\u679c\u4fdd\u5b58\u5730\u5740&gt;\"}\n</code></pre> <p>** \u7b7e\u540d\u9a8c\u8bc1 **</p> <p><code>Authorization</code> \u8be6\u89c1\u7b7e\u540d\u8ba4\u8bc1\u3002</p> <p>** \u8bf7\u6c42\u53c2\u6570 **</p> \u53c2\u6570 \u7c7b\u578b \u5fc5\u9009 \u8bf4\u660e m3u8s array \u662f \u62fc\u63a5 M3U8 \u7684\u5b58\u50a8\u5730\u5740\uff0c\u6309\u63d0\u4ea4\u7684\u987a\u5e8f\u8fdb\u884c\u62fc\u63a5 save_as string \u662f \u7ed3\u679c\u4fdd\u5b58\u5730\u5740"},{"location":"cloud/sync_video/#_3","title":"\u54cd\u5e94","text":"\u53c2\u6570 \u8bf4\u660e status_code \u72b6\u6001\u7801\uff0c\u89c1 \u300c\u72b6\u6001\u7801\u8bf4\u660e\u300d message \u8fd4\u56de\u4fe1\u606f"},{"location":"cloud/sync_video/#_4","title":"\u4e3e\u4f8b","text":"<p>** \u8bf7\u6c42\u793a\u4f8b **</p> <pre><code>POST http://p1.api.upyun.com/&lt;service&gt;/m3u8er/concat HTTP/1.1\nHost: p1.api.upyun.com\nContent-Length: 114\nDate: Thu, 11 May 2017 06:45:23 GMT\nContent-Type: application/json\nAuthorization: UPYUN &lt;operator&gt;:6LrWf1AG2qiEjW1RByafxQmSwNQ=\n\n{\"save_as\": \"m3u8s/concat_40s.m3u8\", \"m3u8s\": [\"m3u8s/HZW.mp4.0s_20s.m3u8\", \"m3u8s/bxjg-1700-mp2.ts.0s_20s.m3u8\"]}\n</code></pre> <p>** \u54cd\u5e94\u793a\u4f8b **</p> <pre><code>HTTP/1.1 200 OK\nServer: marco/1.0\nContent-Type: application/json\nX-Request-Id: 1cdb466a48493b641522965699f4e9f0\nContent-Length: 37\nDate: Thu, 11 May 2017 07:48:00 GMT\n\n{\"status_code\": 200, \"message\": \"ok\"}\n</code></pre> <p></p>"},{"location":"cloud/sync_video/#m3u8_1","title":"M3U8 \u526a\u8f91","text":"<p>\u4ece M3U8 \u4e2d\u526a\u8f91\u4e00\u6bb5\uff0c\u6216\u53bb\u6389\u4e00\u6bb5\u4fdd\u7559\u524d\u540e\u4e24\u6bb5\u3002</p>"},{"location":"cloud/sync_video/#_5","title":"\u8bf7\u6c42","text":"<p>** \u8bf7\u6c42\u8bed\u6cd5 **</p> <pre><code>POST http://p1.api.upyun.com/&lt;service&gt;/m3u8er/clip HTTP/1.1\nHost: p1.api.upyun.com\nDate: GMT Date\nAuthorization: UPYUN &lt;Operator&gt;:&lt;Signature&gt;\nContent-Type: application/json\n\n{\"m3u8\": \"&lt;M3U8 \u7684\u5b58\u50a8\u5730\u5740&gt;\", \"include\": [&lt;\u5f00\u59cb\u65f6\u95f4\u70b9&gt;, &lt;\u7ed3\u675f\u65f6\u95f4\u70b9&gt;], \"save_as\": \"&lt;\u7ed3\u679c\u4fdd\u5b58\u5730\u5740&gt;\"}\n</code></pre> <p>** \u7b7e\u540d\u9a8c\u8bc1 **</p> <p><code>Authorization</code> \u8be6\u89c1\u7b7e\u540d\u8ba4\u8bc1\u3002</p> <p>** \u8bf7\u6c42\u53c2\u6570 **</p> \u53c2\u6570 \u7c7b\u578b \u5fc5\u9009 \u8bf4\u660e m3u8 string \u662f M3U8 \u7684\u5b58\u50a8\u5730\u5740 save_as string \u662f \u7ed3\u679c\u4fdd\u5b58\u5730\u5740 include array \u5426 \u5305\u542b\u67d0\u6bb5\u5185\u5bb9\u7684\u5f00\u59cb\u7ed3\u675f\u65f6\u95f4\uff0c\u5355\u4f4d\u662f\u79d2\u3002\u5f53 <code>index</code> \u4e3a false \u65f6\uff0c\u4e3a\u5f00\u59cb\u7ed3\u675f\u5206\u7247\u5e8f\u53f7 exclude array \u5426 \u4e0d\u5305\u542b\u67d0\u6bb5\u5185\u5bb9\u7684\u5f00\u59cb\u7ed3\u675f\u65f6\u95f4\uff0c\u5355\u4f4d\u662f\u79d2\u3002\u5f53 <code>index</code> \u4e3a false \u65f6\uff0c\u4e3a\u5f00\u59cb\u7ed3\u675f\u5206\u7247\u5e8f\u53f7 index boolean \u5426 <code>include</code> \u6216\u8005 <code>exclude</code> \u4e2d\u7684\u503c\u662f\u5426\u4e3a ts \u5206\u7247\u5e8f\u53f7\uff0c\u9ed8\u8ba4\u4e3a false <p>** \u6ce8 **</p> <ul> <li><code>include</code> \u4e0e <code>exclude</code> \u4e92\u65a5\uff0c\u53ea\u80fd\u8bbe\u7f6e\u4e00\u4e2a\u3002\u5f53\u4e24\u4e2a\u90fd\u8bbe\u7f6e\u65f6\uff0c\u4f7f\u7528 <code>include</code>\u3002</li> <li>\u5f53 <code>include</code> \u4e2d\u8bbe\u5b9a\u65f6\u95f4\u5728 ts \u5206\u7247\u4e2d\u95f4\u65f6\uff0c\u4f1a\u4fdd\u7559\u6574\u4e2a ts \u5206\u7247\u7684\u5185\u5bb9\uff1b\u5f53\u662f <code>exclude</code> \u65f6\uff0c\u4f1a\u53bb\u6389\u6574\u4e2a ts \u5206\u7247\u7684\u5185\u5bb9\u3002</li> <li>\u5f53 <code>index</code> \u662f true \u65f6\uff0c<code>include</code> \u6216 <code>exclude</code> \u4f7f\u7528 ts \u6587\u4ef6\u7684\u5e8f\u53f7\uff0c\u5e8f\u53f7\u4ece 0 \u5f00\u59cb\uff0c\u5373\u7b2c\u4e00\u4e2a ts \u5206\u7247\u662f 0\uff0c\u7b2c\u4e8c\u4e2a ts \u5206\u7247\u662f 1\uff0c\u4ee5\u6b64\u7c7b\u63a8\u3002</li> </ul>"},{"location":"cloud/sync_video/#_6","title":"\u54cd\u5e94","text":"\u53c2\u6570 \u8bf4\u660e status_code \u72b6\u6001\u7801\uff0c\u89c1 \u300c\u72b6\u6001\u7801\u8bf4\u660e\u300d message \u8fd4\u56de\u4fe1\u606f"},{"location":"cloud/sync_video/#_7","title":"\u4e3e\u4f8b","text":"<p>** \u8bf7\u6c42\u793a\u4f8b **</p> <pre><code>POST http://p1.api.upyun.com/&lt;service&gt;/m3u8er/clip HTTP/1.1\nHost: p1.api.upyun.com\nContent-Length: 90\nDate: Thu, 11 May 2017 06:46:39 GMT\nContent-Type: application/json\nAuthorization: UPYUN &lt;operator&gt;:7z19rZnzeSnzeQvdE6BlG9m7Cn0=\n\n{\"save_as\": \"m3u8s/HZW.mp4.0s_20s.m3u8\", \"include\": [0, 20], \"m3u8\": \"m3u8s/HZW.mp4.m3u8\"}\n</code></pre> <p>** \u54cd\u5e94\u793a\u4f8b **</p> <pre><code>HTTP/1.1 200 OK\nServer: marco/1.0\nContent-Type: application/json\nX-Request-Id: cfe98cb5fa525984c9f57bdab1a513fb\nContent-Length: 37\nDate: Thu, 11 May 2017 07:49:14 GMT\n\n{\"status_code\": 200, \"message\": \"ok\"}\n</code></pre> <p></p>"},{"location":"cloud/sync_video/#m3u8_2","title":"\u89c6\u9891\u622a\u56fe\uff08M3U8 \u622a\u56fe\uff09","text":"<p>\u4ece M3U8\uff0cMP4 \u6216\u5176\u4ed6\u683c\u5f0f\u89c6\u9891\u4e2d\u83b7\u53d6\u4e00\u5f20\u622a\u56fe\u3002</p>"},{"location":"cloud/sync_video/#_8","title":"\u8bf7\u6c42","text":"<p>** \u8bf7\u6c42\u8bed\u6cd5 **</p> <pre><code>POST http://p1.api.upyun.com/&lt;service&gt;/snapshot HTTP/1.1\nHost: p1.api.upyun.com\nDate: GMT Date\nAuthorization: UPYUN &lt;Operator&gt;:&lt;Signature&gt;\nContent-Type: application/json\n\n{\"source\": \"&lt;\u89c6\u9891\u7684\u5b58\u50a8\u5730\u5740&gt;\", \"point\": \"&lt;\u65f6\u95f4\u70b9&gt;\", \"save_as\": \"&lt;\u622a\u56fe\u4fdd\u5b58\u5730\u5740&gt;\"}\n</code></pre> <p>** \u7b7e\u540d\u9a8c\u8bc1 **</p> <p><code>Authorization</code> \u8be6\u89c1\u7b7e\u540d\u8ba4\u8bc1\u3002</p> <p>** \u8bf7\u6c42\u53c2\u6570 **</p> \u53c2\u6570 \u7c7b\u578b \u5fc5\u9009 \u8bf4\u660e source string \u662f \u89c6\u9891\u7684\u5b58\u50a8\u5730\u5740 save_as string \u662f \u622a\u56fe\u4fdd\u5b58\u5730\u5740 point string \u662f \u622a\u56fe\u65f6\u95f4\u70b9\uff0c\u683c\u5f0f\u4e3a <code>HH:MM:SS</code> size string \u5426 \u622a\u56fe\u5c3a\u5bf8\uff0c\u683c\u5f0f\u4e3a <code>\u5bbdx\u9ad8</code>\uff0c\u9ed8\u8ba4\u662f\u89c6\u9891\u5c3a\u5bf8 format string \u5426 \u622a\u56fe\u683c\u5f0f\uff0c\u53ef\u9009\u503c\u4e3a <code>jpg</code>\uff0c<code>png</code>, <code>webp</code>, \u9ed8\u8ba4\u6839\u636e save_as \u7684\u540e\u7f00\u751f\u6210"},{"location":"cloud/sync_video/#_9","title":"\u54cd\u5e94","text":"\u53c2\u6570 \u8bf4\u660e status_code \u72b6\u6001\u7801\uff0c\u89c1 \u300c\u72b6\u6001\u7801\u8bf4\u660e\u300d message \u8fd4\u56de\u4fe1\u606f content_type \u622a\u56fe\u7c7b\u578b content_length \u622a\u56fe\u5927\u5c0f save_as \u622a\u56fe\u4fdd\u5b58\u5730\u5740"},{"location":"cloud/sync_video/#_10","title":"\u4e3e\u4f8b","text":"<p>** \u8bf7\u6c42\u793a\u4f8b **</p> <pre><code>POST http://p1.api.upyun.com/&lt;service&gt;/snapshot HTTP/1.1\nHost: p1.api.upyun.com\nDate: Tue, 20 Jun 2017 10:19:15 GMT\nAuthorization: UPYUN &lt;operator&gt;:4+Hqjo788qC4v4zHRxnvhpweFQo=\nContent-Length: 96\nContent-Type: application/json\n\n{\"source\": \"/tmp/360p.mp4\", \"save_as\": \"/foo03.jpg\", \"point\": \"00:00:05\"}\n</code></pre> <p>** \u54cd\u5e94\u793a\u4f8b **</p> <pre><code>HTTP/1.1 200 OK\nServer: marco/1.4\nContent-Type: application/json\nX-Request-Id: 8f404a0b864531edbaa7288563e0db0e\nContent-Length: 87\nDate: Tue, 20 Jun 2017 10:19:27 GMT\n\n{\"status_code\": 200, \"message\": \"ok\",\"content_type\":\"image/jpeg\",\"content_length\":14482,\"save_as\":\"/foo03.jpg\"}\n</code></pre>"},{"location":"cloud/sync_video/#m3u8_3","title":"\u83b7\u53d6 M3U8 \u4fe1\u606f","text":"<p>\u83b7\u53d6 M3U8 \u65f6\u957f\u548c\u5206\u7247\u4fe1\u606f\u3002</p>"},{"location":"cloud/sync_video/#_11","title":"\u8bf7\u6c42","text":"<p>** \u8bf7\u6c42\u8bed\u6cd5 **</p> <pre><code>POST http://p1.api.upyun.com/&lt;service&gt;/m3u8er/get_meta HTTP/1.1\nHost: p1.api.upyun.com\nDate: GMT Date\nAuthorization: UPYUN &lt;Operator&gt;:&lt;Signature&gt;\nContent-Type: application/json\n\n{\"m3u8\": \"&lt;M3U8 \u7684\u5b58\u50a8\u5730\u5740 &gt;\"}\n</code></pre> <p>** \u7b7e\u540d\u9a8c\u8bc1 **</p> <p><code>Authorization</code> \u8be6\u89c1\u7b7e\u540d\u8ba4\u8bc1\u3002</p> <p>** \u8bf7\u6c42\u53c2\u6570 **</p> \u53c2\u6570 \u7c7b\u578b \u5fc5\u9009 \u8bf4\u660e m3u8 string \u662f M3U8 \u7684\u5b58\u50a8\u5730\u5740"},{"location":"cloud/sync_video/#_12","title":"\u54cd\u5e94","text":"\u53c2\u6570 \u8bf4\u660e status_code \u72b6\u6001\u7801\uff0c\u89c1 \u300c\u72b6\u6001\u7801\u8bf4\u660e\u300d message \u8fd4\u56de\u4fe1\u606f meta.duartion m3u8 \u65f6\u957f meta.points \u65f6\u95f4\u70b9"},{"location":"cloud/sync_video/#_13","title":"\u4e3e\u4f8b","text":"<p>** \u8bf7\u6c42\u793a\u4f8b **</p> <pre><code>POST http://p1.api.upyun.com/&lt;service&gt;/m3u8er/get_meta HTTP/1.1\nHost: p1.api.upyun.com\nContent-Length: 29\nDate: Thu, 11 May 2017 06:40:06 GMT\nContent-Type: application/json\nAuthorization: UPYUN &lt;operator&gt;:3FRsny9cB/7VVRaHv4WyZBvpms0=\n\n{\"m3u8\": \"m3u8s/concat.m3u8\"}\n</code></pre> <p>** \u54cd\u5e94\u793a\u4f8b **</p> <pre><code>HTTP/1.1 200 OK\nServer: marco/1.0\nContent-Type: application/json\nX-Request-Id: 3f58bba91921504e395b8010037ca038\nContent-Length: 5707\nDate: Thu, 11 May 2017 08:48:05 GMT\n\n{\"status_code\": 200, \"message\": \"ok\", \"meta\": {\"duration\": 2850.2974559999984, \"points\": [11.277933000000001, 23.723700000000001, 34.634599999999999, 42.008632999999996, 50.483765999999996, 64.764698999999993, 70.804065999999992, 82.31556599999999, 92.892798999999997, 100.20009899999999, 114.74796599999999, 123.92379899999999, 131.09763199999998, 140.97416499999997, 158.32483199999996, 160.05989899999994, 172.70586599999996, 181.04753299999996, 191.79159999999996, &lt;\u540e\u7eed\u7701\u7565&gt;]}}\n</code></pre> <p></p>"},{"location":"cloud/sync_video/#_14","title":"\u83b7\u53d6\u97f3\u89c6\u9891\u5143\u4fe1\u606f","text":"<p>\u83b7\u53d6\u97f3\u89c6\u9891\u7684\u5143\u4fe1\u606f</p>"},{"location":"cloud/sync_video/#_15","title":"\u8bf7\u6c42","text":"<p>** \u8bf7\u6c42\u8bed\u6cd5 **</p> <pre><code>POST http://p1.api.upyun.com/&lt;service&gt;/avmeta/get_meta HTTP/1.1\nHost: p1.api.upyun.com\nDate: GMT Date\nAuthorization: UPYUN &lt;Operator&gt;:&lt;Signature&gt;\nContent-Type: application/json\n\n{\"source\": \"&lt;\u97f3\u89c6\u9891\u7684\u5b58\u50a8\u5730\u5740 &gt;\"}\n</code></pre> <p>** \u7b7e\u540d\u9a8c\u8bc1 **</p> <p><code>Authorization</code> \u8be6\u89c1\u7b7e\u540d\u8ba4\u8bc1\u3002</p> <p>** \u8bf7\u6c42\u53c2\u6570 **</p> \u53c2\u6570 \u7c7b\u578b \u5fc5\u9009 \u8bf4\u660e source string \u662f \u97f3\u89c6\u9891\u7684\u5b58\u50a8\u5730\u5740"},{"location":"cloud/sync_video/#_16","title":"\u54cd\u5e94","text":"\u53c2\u6570 \u7c7b\u578b \u8bf4\u660e format json \u97f3\u89c6\u9891\u683c\u5f0f\u4fe1\u606f format.bitrate int \u6bd4\u7279\u7387 format.duration float \u65f6\u957f format.format string \u5bb9\u5668\u683c\u5f0f format.fullname string \u5bb9\u5668\u683c\u5f0f\u5168\u79f0 streams list stream \u5217\u8868 stream.index int \u8868\u793a\u7b2c\u51e0\u8def\u6d41 stream.type string \u4e00\u822c\u60c5\u51b5\u4e0b, <code>video</code> \u6216 <code>audio</code> stream.bitrate int \u6d41\u7801\u7387 stream.codec string \u6d41\u7f16\u7801 stream.codec_desc string \u6d41\u7f16\u7801\u8bf4\u660e stream.duration float \u6d41\u65f6\u957f stream.video_fps float (\u89c6\u9891\u6d41)\u89c6\u9891\u5e27\u6570 stream.video_height int (\u89c6\u9891\u6d41)\u89c6\u9891\u9ad8\u5ea6 stream.video_width int (\u89c6\u9891\u6d41)\u89c6\u9891\u5bbd\u5ea6 stream.audio_channels int (\u97f3\u9891\u6d41)\u97f3\u9891\u901a\u9053\u6570 stream.audio_samplerate int (\u97f3\u9891\u6d41)\u97f3\u9891\u91c7\u6837\u7387"},{"location":"cloud/sync_video/#_17","title":"\u4e3e\u4f8b","text":"<p>** \u8bf7\u6c42\u793a\u4f8b **</p> <pre><code>POST /&lt;service&gt;/avmeta/get_meta HTTP/1.1\nHost: p1.api.upyun.com\nUser-Agent: python-requests/2.18.2\nAccept-Encoding: gzip, deflate\nAccept: */*\nConnection: keep-alive\nDate: Mon, 21 Aug 2017 05:50:03 GMT\nAuthorization: UPYUN &lt;service&gt;:ivoVvndudFq76zpZr/3S5QZGUNg=\nContent-Length: 27\nContent-Type: application/json\n\n{\"source\": \"/tmp/360p.mp4\"}\n</code></pre> <p>** \u54cd\u5e94\u793a\u4f8b **</p> <pre><code>HTTP/1.1 200 OK\nServer: marco/1.6\nContent-Type: application/json\nTransfer-Encoding: chunked\nConnection: keep-alive\nVary: Accept-Encoding\nX-Request-Id: 6b37641338d5a71cd6306eb7da14448d\nDate: Mon, 21 Aug 2017 05:50:05 GMT\nX-Request-Path: poc-hgh-a-14, 403-zj-fud-206\nContent-Encoding: gzip\n\n{\n    \"streams\": [\n        {\n            \"index\": 0,\n            \"type\": \"video\",\n            \"video_fps\": 25,\n            \"video_height\": 236,\n            \"video_width\": 426,\n            \"codec_desc\": \"H.264 / AVC / MPEG-4 AVC / MPEG-4 part 10\",\n            \"codec\": \"h264\",\n            \"bitrate\": 99608,\n            \"duration\": 184.8,\n            \"metadata\": {\n                \"handler_name\": \"VideoHandler\",\n                \"language\": \"und\"\n            }\n        },\n        {\n            \"index\": 1,\n            \"type\": \"audio\",\n            \"audio_channels\": 2,\n            \"audio_samplerate\": 44100,\n            \"codec_desc\": \"AAC (Advanced Audio Coding)\",\n            \"codec\": \"aac\",\n            \"bitrate\": 48005,\n            \"duration\": 184.855011,\n            \"metadata\": {\n                \"handler_name\": \"SoundHandler\",\n                \"language\": \"und\"\n            }\n        }\n    ],\n    \"format\": {\n        \"duration\": 184.902,\n        \"fullname\": \"QuickTime / MOV\",\n        \"bitrate\": 154062,\n        \"filesize\": 3.560797e+06,\n        \"format\": \"mov,mp4,m4a,3gp,3g2,mj2\"\n    }\n}\n</code></pre> <p></p>"},{"location":"cloud/sync_video/#_18","title":"\u72b6\u6001\u7801\u8bf4\u660e","text":"\u53c2\u6570 \u7c7b\u578b 200 \u5904\u7406\u6210\u529f 400 \u8bf7\u6c42\u53c2\u6570\u9519\u8bef 401 \u8bf7\u6c42\u53c2\u6570\u9519\u8bef 404 m3u8/\u89c6\u9891\u4e0d\u5b58\u5728 5xx \u670d\u52a1\u7aef\u9519\u8bef\uff0c\u8bf7\u53cd\u9988\u7ed9\u552e\u540e\u6216\u60a8\u7684\u5546\u52a1\u7ecf\u7406 <p>\u5982\u6709\u7591\u95ee\u8bf7 \u8054\u7cfb\u6211\u4eec</p>"},{"location":"cloud/uconvert/","title":"\u6587\u6863\u8f6c\u6362","text":""},{"location":"cloud/uconvert/#_1","title":"\u5feb\u901f\u5165\u95e8","text":"<p>\u53c8\u62cd\u4e91\u5904\u7406\uff08\u6587\u6863\u8f6c\u6362\uff09\u5b9e\u73b0\u628a PDF\uff0cPPT\uff0cWORD\uff0cEXCEL \u6587\u6863\u8f6c\u6362\u4e3a\u4e00\u7ec4 PNG \u56fe\u7247\u3002</p> <p>\u60a8\u5728\u4f7f\u7528\u5b83\u4e4b\u524d\uff0c\u8bf7\u786e\u4fdd\u60a8\u5df2\u7ecf\u6ce8\u518c\u53c8\u62cd\u4e91\u8d26\u53f7\u5e76\u5b8c\u6210\u5b9e\u540d\u9a8c\u8bc1\uff0c\u5e76\u786e\u4fdd\u60a8\u5df2\u7ecf\u521b\u5efa \u4e91\u5b58\u50a8\u670d\u52a1\u3002</p>"},{"location":"cloud/uconvert/#_2","title":"\u5f00\u53d1\u8005\u6307\u5357","text":""},{"location":"cloud/uconvert/#_3","title":"\u4e0a\u4f20\u9884\u5904\u7406","text":"<p>\u5728\u4e0a\u4f20\u6587\u4ef6\u65f6\uff0c\u63d0\u4f9b\u9884\u5904\u7406\u53c2\u6570\u3002\u5f85\u6587\u4ef6\u4e0a\u4f20\u5b8c\u6210\u540e\uff0c\u81ea\u52a8\u8fdb\u884c\u5f02\u6b65\u6587\u6863\u8f6c\u6362\uff0c\u5904\u7406\u5b8c\u6210\u540e\uff0c\u56de\u8c03\u901a\u77e5\u7528\u6237\u5904\u7406\u7ed3\u679c\u3002</p> <p>\u652f\u6301\u7684 API\uff1a FORM API\u3002</p> <p>\u53c2\u6570\u540d\u662f <code>apps</code>\uff0c\u53c2\u6570\u503c\u662f JSON \u5b57\u7b26\u4e32\u3002\u4e00\u4e2a <code>apps</code> \u6700\u591a\u53ea\u5141\u8bb8\u5305\u542b\u4e00\u4e2a\u4efb\u52a1\u3002</p> <p>** apps \u53c2\u6570\u7ed3\u6784 **</p> <pre><code>apps = [\n    {\n        \"name\": \"uconvert\",                             // \u5fc5\u9009\uff0c\u4efb\u52a1\u540d\u79f0\uff0cuconvert \u8868\u793a\u6587\u6863\u8f6c\u6362\n        \"save_as\": \"/save_as/upyun_file\",               // \u5fc5\u9009\uff0c\u56fe\u7247\u4fdd\u5b58\u8def\u5f84\u4e0e\u540d\u5b57\uff0c\u751f\u6210\u56fe\u7247\u81ea\u52a8\u5728\u6587\u4ef6\u540d\u540e\u6dfb\u52a0 -&lt;index&gt;.png\n        \"notify_url\": \"http://uconvert.upyun.com\"       // \u53ef\u9009\uff0c\u56de\u8c03\u5730\u5740\uff0c\u4e0d\u586b\u65f6\u4f7f\u7528\u4e0a\u4f20\u53c2\u6570\u4e2d\u7684 notify-url\n        \"density\": 100,                                 // \u53ef\u9009\uff0c\u50cf\u7d20\u5bc6\u5ea6\uff0c\u8d8a\u5927\u56fe\u7247\u8d8a\u6e05\u6670\n        \"width\" : 1024,                                 // \u53ef\u9009\uff0c\u5bbd\u5ea6\uff0c\u5927\u5c0f\u968f\u5bbd\u5ea6\u7b49\u6bd4\u4f8b\u7f29\u653e\n    }\n]\n</code></pre> <p><code>save_as</code>\u3001<code>density</code>\u3001<code>width</code> \u53c2\u6570\u89e3\u91ca\u8bf4\u660e\uff0c\u89c1 tasks \u53c2\u6570\u8bf4\u660e\u3002</p> <p>** \u56de\u8c03\u901a\u77e5 **</p> <p>\u4efb\u52a1\u5904\u7406\u5b8c\u6210\u540e\uff0c\u5411 <code>notify_url</code> \u5730\u5740\u53d1\u9001\u56de\u8c03\u901a\u77e5\u3002\u8be6\u89c1 \u56de\u8c03\u901a\u77e5\u3002</p>"},{"location":"cloud/uconvert/#_4","title":"\u4e91\u5b58\u50a8\u4e2d\u6587\u6863\u7684\u8f6c\u6362","text":"<p>** \u8bf7\u6c42\u65b9\u6cd5 **</p> <p>\u5bf9\u5df2\u7ecf\u5b58\u5728\u4e91\u5b58\u50a8\u4e2d\u7684\u6587\u6863\uff0c\u4ee5 <code>POST</code> \u65b9\u6cd5\u5411 <code>http://p0.api.upyun.com/pretreatment/</code> \u63d0\u4ea4\u5904\u7406\u4efb\u52a1\uff0c\u54cd\u5e94\u4e2d\u8fd4\u56de\u4efb\u52a1 <code>task_id</code>\u3002\u4efb\u52a1\u4ee5\u5f02\u6b65\u7684\u65b9\u5f0f\u5904\u7406\uff0c\u5904\u7406\u5b8c\u6210\u540e\uff0c\u56de\u8c03\u901a\u77e5\u7528\u6237\u5904\u7406\u7ed3\u679c\u3002</p> <pre><code>curl -X POST \\\n    http://p0.api.upyun.com/pretreatment/ \\\n    -H \"Authorization: UPYUN &lt;Operator&gt;:&lt;Signature&gt;\" \\\n    -H \"Date: &lt;Wed, 29 Oct 2014 02:26:58 GMT&gt;\" \\\n    -H \"Content-MD5: &lt;Content-MD5&gt;\" \\\n    -d \"service=&lt;service&gt;\" \\\n    -d \"notify_url=&lt;notify_url&gt;\" \\\n    -d \"app_name=uconvert\" \\\n    -d \"tasks=&lt;base64 \u7f16\u7801\u540e\u7684\u4efb\u52a1\u5b57\u7b26\u4e32&gt;\"\n</code></pre> <p>** \u8ba4\u8bc1\u9274\u6743 **</p> <p><code>Authorization</code> \u8be6\u89c1 \u7b7e\u540d\u8ba4\u8bc1\u3002</p> <p>** \u8bf7\u6c42\u53c2\u6570 **</p> \u53c2\u6570 \u7c7b\u578b \u5fc5\u9009 \u8bf4\u660e service string \u662f \u6587\u6863\u6240\u5728\u7684\u670d\u52a1\u540d notify_url string \u662f \u56de\u8c03\u901a\u77e5\u5730\u5740\uff0c\u8be6\u89c1 \u56de\u8c03\u901a\u77e5 tasks string \u662f \u4efb\u52a1\u4fe1\u606f\uff0c\u8be6\u89c1 tasks \u53c2\u6570\u8bf4\u660e app_name string \u662f \u5904\u7406\u529f\u80fd\uff0c<code>uconvert</code> \u8868\u793a\u6587\u6863\u8f6c\u6362 <p> ** tasks \u53c2\u6570\u8bf4\u660e **</p> \u53c2\u6570 \u7c7b\u578b \u5fc5\u9009 \u8bf4\u660e source string \u662f \u6587\u6863\u5b58\u653e\u7684\u8def\u5f84\uff0c\u6700\u5927\u652f\u6301 <code>10M</code> \u6587\u4ef6\u5927\u5c0f save_as string \u662f \u56fe\u7247\u4fdd\u5b58\u8def\u5f84\u3002\u751f\u6210\u7684\u56fe\u7247\u4f1a\u81ea\u52a8\u6dfb\u52a0 <code>-&lt;index&gt;.png</code> \u540e\u7f00 density integer \u5426 \u56fe\u7247\u7684\u50cf\u7d20\u5bc6\u5ea6\uff0c\u8303\u56f4 <code>[2-200]</code>\uff0c\u9ed8\u8ba4\u4e3a <code>100</code>\uff0c\u8d8a\u5927\u56fe\u7247\u8d8a\u6e05\u6670 width integer \u5426 \u56fe\u7247\u7684\u5bbd\u5ea6\uff0c\u56fe\u7247\u5927\u5c0f\u968f\u5bbd\u5ea6\u7b49\u6bd4\u4f8b\u7f29\u653e\uff0c\u8303\u56f4 <code>[0-2048]</code>\uff0c\u9ed8\u8ba4\u81ea\u9002\u5e94 <p>1. \u6309 JSON \u683c\u5f0f\u7ec4\u88c5\u4efb\u52a1\uff0c\u4e00\u6b21\u8bf7\u6c42 <code>tasks</code> \u6700\u591a\u53ef\u4ee5\u63d0\u4ea4 10 \u4e2a\u4efb\u52a1\u3002</p> <pre><code>[\n    {\n        \"source\": \"/source/upyun.ppt\",\n        \"save_as\": \"/save_as/upyun\",\n        \"density\": 100,                    \n        \"width\" : 1024,                 \n    },\n    \u2026\n]\n</code></pre> <p>2. \u628a JSON \u5b57\u7b26\u4e32 Base64 \u7f16\u7801\uff0c\u5f97\u5230 <code>tasks</code>\u3002</p> <p>** \u54cd\u5e94\u4fe1\u606f **</p> <ul> <li>\u4efb\u52a1\u63d0\u4ea4\u6210\u529f\uff1a\u8fd4\u56de <code>200</code>\uff0c\u54cd\u5e94\u4f53\u662f\u4e00\u7ec4\u6309\u4efb\u52a1\u63d0\u4ea4\u5148\u540e\u987a\u5e8f\u6392\u5e8f\u7684 <code>task_id</code>\u3002\u4f8b\u5982\uff1a</li> </ul> <pre><code>[\n    \"35f0148d414a688a275bf915ba7cebb2\",\n    \"98adbaa52b2f63d6d7f327a0ff223348\",\n    \"c3103189fa906a5354d29bd807e8dc51\",\n    \u2026\n]\n</code></pre> <ul> <li>\u4efb\u52a1\u63d0\u4ea4\u5931\u8d25\uff1a\u8fd4\u56de\u76f8\u5e94\u7684\u51fa\u9519\u4fe1\u606f\uff0c\u5177\u4f53\u8bf7\u53c2\u9605 \u72b6\u6001\u7801\u8868\u3002</li> </ul> <p> ** \u56de\u8c03\u901a\u77e5 **</p> <p>\u4efb\u52a1\u5904\u7406\u5b8c\u6210\u540e\uff0c\u5411 <code>notify_url</code> \u53d1\u9001 <code>HTTP POST</code> \u8bf7\u6c42\uff0c\u8bf7\u6c42\u4f53\u662f\u56de\u8c03\u4fe1\u606f\u3002</p> <pre><code>curl -X POST \\\n    &lt;notify_url&gt; \\\n    -H \"Authorization: UPYUN &lt;Operator&gt;:&lt;Signature&gt;\" \\\n    -H \"Date: &lt;Wed, 29 Oct 2014 02:26:58 GMT&gt;\" \\\n    -H \"Content-MD5: &lt;Content-MD5&gt;\" \\\n    -d \"service=&lt;service&gt;\" \\\n    # \u5176\u4ed6\u53c2\u6570...\n</code></pre> <p>** \u56de\u8c03\u4fe1\u606f **</p> <p>\u56de\u8c03\u4fe1\u606f\u4e3a JSON \u5b57\u7b26\u4e32\uff0c\u53c2\u6570\u540d\u53ca\u8bf4\u660e\u5982\u4e0b\uff1a</p> \u53c2\u6570 \u7c7b\u578b \u8bf4\u660e service string \u6587\u6863\u6240\u5728\u7684\u670d\u52a1\u540d source string \u6587\u6863\u8def\u5f84 task_id string \u4efb\u52a1\u5bf9\u5e94\u7684 <code>task_id</code> paths list \u6240\u6709\u751f\u6210\u56fe\u7247\u7684\u8def\u5f84\u5217\u8868 status_code integer \u5904\u7406\u7ed3\u679c\u72b6\u6001\u7801\uff0c<code>200</code> \u8868\u793a\u6210\u529f\u5904\u7406\uff0c\u8be6\u89c1 \u72b6\u6001\u7801\u8868 error string \u9519\u8bef\u4fe1\u606f\uff0c\u7a7a\u5b57\u7b26\u4e32\u8868\u793a\u65e0\u9519\u8bef\u4fe1\u606f <p>** \u56de\u8c03\u7b7e\u540d **</p> <p><code>Authorization</code> \u8be6\u89c1 \u7b7e\u540d\u8ba4\u8bc1\u3002</p> <p>** \u4e3e\u4f8b **</p> <pre><code>{\n    \"error\":\"\",\n    \"paths\":[\"/save_as/upyun-0.png\", \"/save_as/upyun-1.png\"],\n    \"service\":\"upyun\",\n    \"source\":\"/source/upyun.ppt\",\n    \"status_code\":200,\n    \"task_id\":\"216fb4f8f9bc03dc6a19c4cf6aa903a4\"\n}\n</code></pre> <p></p>"},{"location":"cloud/uconvert/#_5","title":"\u72b6\u6001\u7801\u8868","text":"\u72b6\u6001\u7801 \u8bf4\u660e 200 \u5904\u7406\u6210\u529f 400 \u6587\u6863\u8f6c\u6362\u5931\u8d25 413 \u53c2\u6570\u9519\u8bef\uff0c\u6587\u6863\u7c7b\u578b\u4e0d\u652f\u6301 5xx \u670d\u52a1\u7aef\u9519\u8bef\u3002\u5982\u9047\u6b64\u7c7b\u9519\u8bef\uff0c\u8bf7\u53cd\u9988\u7ed9 \u552e\u540e\u6216\u60a8\u7684\u5546\u52a1\u7ecf\u7406"},{"location":"cloud/unzip/","title":"\u538b\u7f29\u89e3\u538b\u7f29","text":""},{"location":"cloud/unzip/#_1","title":"\u5feb\u901f\u5165\u95e8","text":"<p>\u53c8\u62cd\u4e91\u5904\u7406\uff08\u538b\u7f29\u89e3\u538b\u7f29\uff09\u57fa\u4e8e\u4e91\u5b58\u50a8\u670d\u52a1\uff0c\u60a8\u5728\u4f7f\u7528\u5b83\u4e4b\u524d\uff0c\u8bf7\u786e\u4fdd\u60a8\u5df2\u7ecf\u6ce8\u518c\u53c8\u62cd\u4e91\u8d26\u53f7\u5e76\u5b8c\u6210\u5b9e\u540d\u9a8c\u8bc1\uff0c\u8bf7\u786e\u4fdd\u60a8\u5df2\u7ecf\u521b\u5efa\u4e91\u5b58\u50a8\u670d\u52a1\u3002</p> <p>\u4ef7\u683c\u65b9\u9762\uff0c\u514d\u8d39\u3002</p>"},{"location":"cloud/unzip/#_2","title":"\u5f00\u53d1\u8005\u6307\u5357","text":""},{"location":"cloud/unzip/#_3","title":"\u63d0\u4ea4\u5904\u7406\u4efb\u52a1","text":"<p>** \u8bf7\u6c42\u65b9\u6cd5 **</p> <p>\u5bf9\u5df2\u7ecf\u5b58\u5728\u4e91\u5b58\u50a8\u4e2d\u7684\u538b\u7f29/\u89e3\u538b\u7f29\u6587\u4ef6\uff0c\u4ee5 <code>POST</code> \u65b9\u6cd5\u5411 <code>http://p0.api.upyun.com/pretreatment/</code> \u63d0\u4ea4\u5904\u7406\u4efb\u52a1\uff0c\u54cd\u5e94\u4e2d\u8fd4\u56de\u4efb\u52a1 <code>task_id</code>\u3002\u4efb\u52a1\u4ee5\u5f02\u6b65\u7684\u65b9\u5f0f\u5904\u7406\uff0c\u5904\u7406\u5b8c\u6210\u540e\uff0c\u56de\u8c03\u901a\u77e5\u7528\u6237\u5904\u7406\u7ed3\u679c\u3002</p> <pre><code>curl -X POST \\\n    http://p0.api.upyun.com/pretreatment/ \\\n    -H \"Authorization: UPYUN &lt;Operator&gt;:&lt;Signature&gt;\" \\\n    -H \"Date: &lt;Wed, 29 Oct 2014 02:26:58 GMT&gt;\" \\\n    -H \"Content-MD5: &lt;Content-MD5&gt;\" \\\n    -d \"service=&lt;service&gt;\" \\\n    -d \"notify_url=&lt;notify_url&gt;\" \\\n    -d \"app_name=&lt;app_name&gt;\" \\\n    -d \"tasks=&lt;base64 \u7f16\u7801\u540e\u7684\u4efb\u52a1\u5b57\u7b26\u4e32&gt;\"\n</code></pre> <p>** \u8ba4\u8bc1\u9274\u6743 **</p> <p><code>Authorization</code> \u8be6\u89c1\u7b7e\u540d\u8ba4\u8bc1\u3002</p> <p>** \u8bf7\u6c42\u53c2\u6570 **</p> \u53c2\u6570 \u7c7b\u578b \u5fc5\u9009 \u8bf4\u660e service string \u662f \u538b\u7f29/\u89e3\u538b\u7f29\u6587\u4ef6\u6240\u5728\u7684\u670d\u52a1\u540d notify_url string \u662f \u56de\u8c03\u901a\u77e5\u5730\u5740\uff0c\u8be6\u89c1\u56de\u8c03\u901a\u77e5 tasks string \u662f \u4efb\u52a1\u4fe1\u606f\uff0c\u8be6\u89c1 tasks \u53c2\u6570\u8bf4\u660e app_name string \u662f \u5904\u7406\u529f\u80fd\uff0c<code>compress</code> \u8868\u793a\u538b\u7f29\uff0c<code>depress</code> \u8868\u793a\u89e3\u538b\u7f29 <p> ** tasks \u53c2\u6570\u8bf4\u660e **</p> <p>1. \u6309 JSON \u683c\u5f0f\u7ec4\u88c5\u4efb\u52a1\uff0c\u4e00\u6b21\u8bf7\u6c42 <code>tasks</code> \u6700\u591a\u53ef\u4ee5\u63d0\u4ea4 10 \u4e2a\u4efb\u52a1\u3002 \u4efb\u52a1\u53c2\u6570\u89c1\u529f\u80fd \u3002</p> <pre><code>[\n    {\n        \"sources\": [\"/a/1.pdf\",\"/a/b/\"],     // \u9700\u8981\u538b\u7f29\u7684\u6587\u4ef6\u8def\u5f84\n        \"save_as\": \"/result/abc.zip\"         // \u4fdd\u5b58\u8def\u5f84\n    },\n    {\n        \"sources\": [\"/e/f\",\"/e/g.jpg\"],         // \u9700\u8981\u538b\u7f29\u7684\u6587\u4ef6\u6216\u76ee\u5f55\u8def\u5f84\n        \"save_as\": \"/result/e.zip\"              // \u4fdd\u5b58\u8def\u5f84\n    },\n    \u2026\n]\n</code></pre> <p>2. \u628a JSON \u5b57\u7b26\u4e32 Base64 \u7f16\u7801\uff0c\u5f97\u5230 <code>tasks</code>\u3002</p> <p>** \u54cd\u5e94\u4fe1\u606f **</p> <ul> <li>\u4efb\u52a1\u63d0\u4ea4\u6210\u529f\uff1a\u8fd4\u56de <code>200</code>\uff0c\u54cd\u5e94\u4f53\u662f\u4e00\u7ec4\u6309\u4efb\u52a1\u63d0\u4ea4\u5148\u540e\u987a\u5e8f\u6392\u5e8f\u7684 <code>task_id</code>\u3002\u4f8b\u5982\uff1a</li> </ul> <pre><code>[\n    \"35f0148d414a688a275bf915ba7cebb2\",\n    \"98adbaa52b2f63d6d7f327a0ff223348\",\n    \"c3103189fa906a5354d29bd807e8dc51\",\n    \u2026\n]\n</code></pre> <ul> <li>\u4efb\u52a1\u63d0\u4ea4\u5931\u8d25\uff1a\u8fd4\u56de\u76f8\u5e94\u7684\u51fa\u9519\u4fe1\u606f\uff0c\u5177\u4f53\u8bf7\u53c2\u9605\u300c\u72b6\u6001\u7801\u8868\u300d\u3002</li> </ul> <p></p>"},{"location":"cloud/unzip/#_4","title":"\u56de\u8c03\u901a\u77e5","text":"<p>\u4efb\u52a1\u5904\u7406\u5b8c\u6210\u540e\uff0c\u5411 <code>notify_url</code> \u53d1\u9001 <code>HTTP POST</code> \u8bf7\u6c42\uff0c\u8bf7\u6c42\u4f53\u662f\u56de\u8c03\u4fe1\u606f\u3002</p> <pre><code>curl -X POST \\\n    &lt;notify_url&gt; \\\n    -H \"Authorization: UPYUN &lt;Operator&gt;:&lt;Signature&gt;\" \\\n    -H \"Date: &lt;Wed, 29 Oct 2014 02:26:58 GMT&gt;\" \\\n    -H \"Content-MD5: &lt;Content-MD5&gt;\" \\\n    -d \"service=&lt;service&gt;\" \\\n    # \u5176\u4ed6\u53c2\u6570...\n</code></pre> <p>** \u56de\u8c03\u4fe1\u606f **</p> <p>\u56de\u8c03\u4fe1\u606f\u662f JSON \u5b57\u7b26\u4e32\uff0c\u53c2\u6570\u540d\u53ca\u8bf4\u660e\u5982\u4e0b\uff1a</p> \u53c2\u6570 \u7c7b\u578b \u8bf4\u660e task_id string \u4efb\u52a1\u5bf9\u7684\u4efb\u52a1 ID status_code integer \u5904\u7406\u7ed3\u679c\u72b6\u6001\u7801\uff0c<code>200</code> \u8868\u793a\u6210\u529f\u5904\u7406 path string \u8f93\u51fa\u6587\u4ef6\u4fdd\u5b58\u8def\u5f84 error string \u9519\u8bef\u4fe1\u606f\uff0c\u7a7a\u5b57\u7b26\u4e32\u8868\u793a\u65e0\u9519\u8bef\u4fe1\u606f <p>** \u56de\u8c03\u7b7e\u540d **</p> <p><code>Authorization</code> \u8be6\u89c1\u7b7e\u540d\u8ba4\u8bc1\u3002</p> <p></p>"},{"location":"cloud/unzip/#_5","title":"\u72b6\u6001\u7801\u8868","text":"\u72b6\u6001\u7801 \u8bf4\u660e 200 \u5904\u7406\u6210\u529f 400 \u6587\u4ef6\u4e0d\u5408\u6cd5 404 \u6587\u4ef6\u4e0d\u5b58\u5728 5xx \u670d\u52a1\u7aef\u9519\u8bef\u3002\u5982\u9047\u6b64\u7c7b\u9519\u8bef\uff0c\u8bf7\u53cd\u9988\u7ed9\u552e\u540e\u6216\u60a8\u7684\u5546\u52a1\u7ecf\u7406"},{"location":"cloud/unzip/#_6","title":"\u529f\u80fd","text":""},{"location":"cloud/unzip/#compress","title":"\u538b\u7f29\uff08compress\uff09","text":"<p>\u5c06\u591a\u4e2a\u6587\u4ef6\u6216\u6587\u4ef6\u5939\u538b\u7f29\u6210\u4e00\u4e2a\u538b\u7f29\u6587\u4ef6\u3002</p> \u53c2\u6570 \u7c7b\u578b \u5fc5\u9009 \u8bf4\u660e sources array \u662f \u9700\u8981\u88ab\u538b\u7f29\u7684\u6587\u4ef6\u6216\u76ee\u5f55\u7684\u8def\u5f84\uff0c\u8def\u5f84\u4e0d\u9700\u8981 URI encoding\u3002\u89c1\u300c\u6ce8\u300d save_as string \u662f \u8f93\u51fa\u6587\u4ef6\u4fdd\u5b58\u8def\u5f84 home_dir string \u5426 \u6587\u4ef6\u6216\u76ee\u5f55\u88ab\u538b\u7f29\u65f6\u53ef\u4e0d\u5305\u542b\u7684\u7236\u76ee\u5f55\u3002\u9ed8\u8ba4\u5305\u542b\u4ece\u6839\u5f00\u59cb\u7684\u5168\u90e8\u76ee\u5f55 parent_dir string \u5426 \u88ab\u538b\u7f29\u6587\u4ef6\u6216\u76ee\u5f55\u7684\u65b0\u589e\u7236\u76ee\u5f55\u540d\u3002\u9ed8\u8ba4\u4e3a\u7a7a sources_list string \u5426 \u9700\u8981\u88ab\u538b\u7f29\u7684\u6587\u4ef6\u6216\u76ee\u5f55\u4fe1\u606f\u7684\u6587\u4ef6\u8def\u5f84\u3002\u89c1\u300c\u6ce8\u300d <p>** \u6ce8 **</p> <ul> <li><code>sources</code> \u548c <code>sources_list</code> \u53c2\u6570\u6307\u5b9a\u7684\u538b\u7f29\u6587\u4ef6\u6700\u5927\u4e0d\u80fd\u8d85\u8fc7 10000 \u4e2a\uff0c\u603b\u6587\u4ef6\u5927\u5c0f\u4e0d\u80fd\u8d85\u8fc7 4G\u3002</li> <li>\u5f53\u9700\u8981\u88ab\u538b\u7f29\u7684\u6587\u4ef6\u6216\u76ee\u5f55\u5f88\u591a\u65f6\uff0c\u53ef\u4ee5\u628a\u8fd9\u4e9b\u4fe1\u606f\u653e\u5230\u4e00\u4e2a\u6587\u4ef6\u91cc\uff0c\u4e00\u6761\u4e00\u884c\uff08\u4e0d\u9700\u8981 URI encoding\uff09\uff0c\u518d\u628a\u6587\u4ef6\u4e0a\u4f20\u5230\u9700\u8981\u5904\u7406\u7684\u670d\u52a1\u540d\u4e0b\uff0c\u901a\u8fc7 <code>sources_list</code> \u53c2\u6570\u63d0\u4ea4\u6587\u4ef6 URI \uff0c\u4ee3\u66ff <code>sources</code> \u53c2\u6570\u8fdb\u884c\u5927\u91cf\u4fe1\u606f\u63d0\u4ea4\u3002</li> <li>\u5f53 <code>sources_list</code> \u53c2\u6570\u5b58\u5728\u65f6\uff0c<code>sources</code> \u53c2\u6570\u53ef\u4ee5\u4e0d\u5b58\u5728\u3002</li> <li>\u538b\u7f29\u7b97\u6cd5: \u76ee\u524d\u4ec5\u652f\u6301 <code>zip</code>\uff0c\u56e0\u6b64\uff0c <code>save_as</code> \u53c2\u6570\u5fc5\u987b\u4ee5 <code>.zip</code> \u540e\u7f00\u7ed3\u5c3e\u3002</li> <li><code>home_dir</code> \u4f1a\u53bb\u9664\u6307\u5b9a\u7236\u76ee\u5f55\u53ca\u7236\u76ee\u5f55\u4e0b\u6587\u4ef6\uff0c\u538b\u7f29\u76ee\u5f55\u5c42\u7ea7\u8f83\u6df1\u7684\u6587\u4ef6\u65f6\uff0c\u53ef\u4ee5\u901a\u8fc7\u5b83\u53bb\u9664\u7236\u76ee\u5f55\u53ca\u7236\u76ee\u5f55\u4e0b\u6587\u4ef6\u7684\u5e72\u6270\u3002\u4f8b\u5982\uff1a</li> </ul> <pre><code>[\n    {\n        \"sources\": [\"/a/b/c/source/1.jpg\",\"/a/b/c/source/2.jpg\"],\n        \"save_as\": \"/result/t.zip\",\n        \"home_dir\": \"a/b/c\" //\u538b\u7f29\u65f6\uff0c\u4e0d\u5305\u542b\u7684\u76ee\u5f55\n    }\n]\n</code></pre> <p>\u538b\u7f29\u6587\u4ef6\u7684\u76ee\u5f55\u7ed3\u6784\u5982\u4e0b:\uff08 <code>a/b/c</code> \u7236\u76ee\u5f55\u5df2\u7ecf\u4e0d\u5b58\u5728\u4e86\uff0c\u653e\u5728 <code>a/b</code> \u7236\u76ee\u5f55\u4e0b\u7684\u6587\u4ef6\u4e5f\u5df2\u7ecf\u4e0d\u5b58\u5728\u4e86\uff09</p> <pre><code>source\n|-------1.jpg\n|-------2.jpg\n</code></pre>"},{"location":"cloud/unzip/#depress","title":"\u89e3\u538b\u7f29\uff08depress\uff09","text":"<p>\u5c06\u538b\u7f29\u6587\u4ef6\u89e3\u538b\u5230\u6307\u5b9a\u76ee\u5f55\u3002</p> \u53c2\u6570 \u7c7b\u578b \u5fc5\u9009 \u8bf4\u660e sources string \u662f \u9700\u8981\u89e3\u538b\u7f29\u6587\u4ef6\u7684\u8def\u5f84 save_as string \u662f \u6587\u4ef6\u89e3\u538b\u7f29\u540e\u4fdd\u5b58\u8def\u5f84\uff08\u9700\u8981\u4e3a\u76ee\u5f55\uff09 <p>\u6ce8\uff1a</p> <ul> <li><code>sources</code> \u53c2\u6570\u6307\u5b9a\u7684\u538b\u7f29\u6587\u4ef6\u6700\u5927\u5927\u5c0f\u4e0d\u80fd\u8d85\u8fc7 5G\u3002</li> <li>\u89e3\u538b\u7b97\u6cd5: \u76ee\u524d\u4ec5\u652f\u6301 <code>zip</code>\uff0c\u56e0\u6b64\uff0c <code>sources</code> \u53c2\u6570\u6307\u5b9a\u7684\u538b\u7f29\u6587\u4ef6\u5fc5\u987b\u662f zip \u6587\u4ef6\u3002</li> <li>\u89e3\u538b\u7f29\u540e\uff0c\u76ee\u5f55\u4e2d\u4f1a\u591a\u4e00\u4e2a\u4ee5 <code>task_id</code> \u547d\u540d\u7684\u6587\u4ef6\uff0c\u5b83\u8bb0\u5f55\u4e86\u6240\u6709\u89e3\u538b\u7f29\u7684\u6587\u4ef6\u4fe1\u606f\u3002</li> </ul> <p>\u5982\u6709\u7591\u95ee\u8bf7 \u8054\u7cfb\u6211\u4eec</p>"},{"location":"download/","title":"SDK&\u5de5\u5177","text":""},{"location":"download/#sdk","title":"\u5b58\u50a8&amp;\u5904\u7406 SDK","text":"<ul> <li> iOS SDK GitHub \u4e0b\u8f7d </li> <li> Android SDK GitHub \u4e0b\u8f7d </li> <li> PHP SDK GitHub \u4e0b\u8f7d </li> <li> Python SDK GitHub \u4e0b\u8f7d </li> <li> Node.js SDK GitHub \u4e0b\u8f7d </li> <li> Ruby SDK GitHub \u4e0b\u8f7d </li> <li> Go SDK GitHub \u4e0b\u8f7d </li> <li> Java SDK GitHub \u4e0b\u8f7d </li> <li> Erlang SDK GitHub \u4e0b\u8f7d </li> <li> C SDK GitHub \u4e0b\u8f7d </li> <li> \u89c6\u9891\u9884\u5904\u7406 Node SDK GitHub \u4e0b\u8f7d </li> <li> Java \u7f13\u5b58\u5237\u65b0 SDK GitHub \u4e0b\u8f7d </li> <li> \u591a\u8bed\u8a00\u751f\u6210 token \u4f8b\u5b50 GitHub \u4e0b\u8f7d </li> <li> \u5c0f\u7a0b\u5e8f SDK GitHub \u4e0b\u8f7d </li> </ul>"},{"location":"download/#live-sdk","title":"\u76f4\u64ad SDK","text":"<ul> <li>  Android \u6d41\u5a92\u4f53\u64ad\u653e\u5668 GitHub </li> <li>  Android \u63a8\u6d41 SDK  GitHub </li> <li>  iOS \u63a8\u62c9\u6d41 SDK  GitHub </li> <li>  \u63a8\u6d41 token  GitHub </li> </ul>"},{"location":"download/#short-video","title":"\u77ed\u89c6\u9891 SDK","text":"<ul> <li>  Android \u77ed\u89c6\u9891 SDK GitHub </li> <li>  iOS \u77ed\u89c6\u9891 SDK  GitHub </li> <li>  Android \u4e0a\u4f20 SDK  GitHub </li> <li>  iOS \u4e0a\u4f20 SDK  GitHub </li> <li>  Android \u64ad\u653e\u5668 SDK  GitHub </li> <li>  iOS \u64ad\u653e\u5668 SDK  GitHub </li> </ul>"},{"location":"download/#cross-sdk","title":"\u878d\u5408 SDK","text":"<ul> <li> iOS Fusion SDK GitHub \u4e0b\u8f7d </li> <li> Android Fusion SDK GitHub \u4e0b\u8f7d </li> </ul>"},{"location":"download/#plugin","title":"\u63d2\u4ef6","text":"<ul> <li> Discuz GitHub \u67e5\u770b </li> <li> PHPWind \u67e5\u770b </li> <li> UEditor GitHub \u4e0b\u8f7d </li> <li> UMeditor GitHub \u4e0b\u8f7d </li> </ul>"},{"location":"download/#third-party","title":"\u7b2c\u4e09\u65b9 SDK","text":"<ul> <li> co-upyun - @lisposter GitHub </li> <li> ez-upyun - @XadillaX GitHub </li> <li> paperclip-upyun - @jhw GitHub </li> <li> .NETCore - @yangzho.. GitHub </li> </ul>"},{"location":"download/#third-party-plugin","title":"\u7b2c\u4e09\u65b9\u5de5\u5177\u548c\u63d2\u4ef6","text":"<ul> <li> \u53c8\u62cd\u4e91\u5b58\u50a8\u7ba1\u7406\u5ba2\u6237\u7aef GitHub \u4e0b\u8f7d </li> <li> \u53c8\u62cd\u4e91\u8d44\u6e90\u7ba1\u7406\u5668 GitHub \u4e0b\u8f7d </li> <li> \u53c8\u62cd\u4e91\u5927\u6587\u4ef6\u4e0a\u4f20\u5ba2\u6237\u7aef GitHub </li> <li> \u53c8\u62cd\u4e91web\u7248\u5de5\u5177 GitHub </li> <li> \u53c8\u62cd\u4e91\u547d\u4ee4\u884c\u5de5\u5177 GitHub </li> <li> \u53c8\u62cd\u4e91\u5e38\u7528\u811a\u672c GitHub </li> <li> \u53c8\u5c0f\u6d4b:\u5065\u5eb7\u76d1\u6d4b Android iOS </li> <li> WordPress GitHub </li> <li> emlog GitHub </li> <li> Ghost GitHub </li> <li> NodeBB GitHub </li> <li> Swfupload GitHub </li> <li> Typecho GitHub </li> <li> Plupload GitHub </li> <li> Webupload GitHub </li> </ul>"},{"location":"faq/","title":"\u5e38\u89c1\u95ee\u9898","text":""},{"location":"faq/#faq","title":"\u6982\u5ff5\u6027 FAQ","text":"<p>\u670d\u52a1\u56de\u6e90\u5206\u51e0\u79cd\u7c7b\u578b\uff0c\u6709\u54ea\u4e9b\u533a\u522b\uff1f</p> <p>\u670d\u52a1\u56de\u6e90\u603b\u5171\u5206\u4e3a\u4e24\u79cd\uff1a\u53c8\u62cd\u4e91\u5b58\u50a8\u548c\u81ea\u4e3b\u6e90\u7ad9\u3002\u533a\u522b\u5982\u4e0b\u8868\u6240\u793a\uff1a</p> \u529f\u80fd \u53c8\u62cd\u4e91\u5b58\u50a8 \u81ea\u4e3b\u6e90\u7ad9 CDN \u52a0\u901f \u652f\u6301 \u652f\u6301 \u53ef\u4e0a\u4f20\u6587\u4ef6 \u6240\u6709\u6587\u4ef6 \u4e0d\u9700\u8981\u4e0a\u4f20\uff0c\u53c8\u62cd\u4e91\u76f4\u63a5\u4ece\u5ba2\u6237\u6e90\u7ad9\u83b7\u53d6 \u5355\u4e2a\u6587\u4ef6\u4e0a\u4f20\u9650\u5236 FTP \u6700\u5927\u652f\u6301 2G\uff1bAPI \u6700\u5927\u652f\u6301 150G - \u56fe\u7247\u6587\u4ef6\u50cf\u7d20\u9650\u5236 \u65e0\u9650\u5236 \u65e0\u9650\u5236 \u9632\u76d7\u94fe\u529f\u80fd \u652f\u6301 \u652f\u6301 \u7ed1\u5b9a\u72ec\u7acb\u57df\u540d \u652f\u6301(\u9700\u8981\u5907\u6848) \u652f\u6301(\u9700\u8981\u5907\u6848) \u81ea\u5b9a\u4e49\u7248\u672c \u652f\u6301 \u652f\u6301 <p>\u670d\u52a1\u7c7b\u578b\u662f\u5426\u53ef\u4ee5\u66f4\u6539\uff1f</p> <p>\u670d\u52a1\u7c7b\u578b\u4e00\u65e6\u521b\u5efa\uff0c\u5c06\u65e0\u6cd5\u66f4\u6539\u3002</p> <p>\u4e00\u4e2a\u5e10\u53f7\u6700\u591a\u53ef\u4ee5\u521b\u5efa\u591a\u5c11\u4e2a\u670d\u52a1\uff1f</p> <p>\u4e00\u4e2a\u5e10\u53f7\u6700\u591a\u53ef\u521b\u5efa 200 \u4e2a\u670d\u52a1\u3002</p> <p>\u4e00\u4e2a\u670d\u52a1\u6700\u591a\u53ef\u4ee5\u7ed1\u5b9a\u591a\u5c11\u4e2a\u57df\u540d\uff1f</p> <p>\u6bcf\u4e2a\u670d\u52a1\u6700\u591a\u7ed1\u5b9a 10 \u4e2a\u57df\u540d\uff0c\u7ed1\u5b9a\u7684\u57df\u540d\u5fc5\u987b\u7ecf\u8fc7\u5907\u6848\uff0c\u4e14\u540c\u4e00\u4e2a\u57df\u540d\u53ea\u80fd\u7ed1\u5728\u4e00\u4e2a\u670d\u52a1\u4e0a\u3002</p> <p>\u5982\u4f55\u67e5\u770b\u6211\u670d\u52a1\u91cc\u7684\u6587\u4ef6\uff1f</p> <p>\u53ef\u4ee5\u4f7f\u7528 FTP \u67e5\u770b\uff0c\u63a8\u8350\u4f7f\u7528\u5ba2\u6237\u7aef\uff1aFileZilla/\u53c8\u62cd\u4e91\u8d44\u6e90\u7ba1\u7406\u5668\u3002</p> <p>\u4e00\u4e2a\u5e10\u53f7\u6700\u591a\u53ef\u4ee5\u521b\u5efa\u591a\u5c11\u4e2a\u64cd\u4f5c\u5458\uff1f</p> <p>\u4e00\u4e2a\u5e10\u53f7\u53ef\u521b\u5efa 50 \u4e2a\u64cd\u4f5c\u5458\uff0c\u4ee5\u65b9\u4fbf\u5206\u914d\u7ed9\u4e0d\u540c\u90e8\u95e8\u6216\u9879\u76ee\u4f7f\u7528\uff0c\u5e76\u4e14\u53ef\u4ee5\u7075\u6d3b\u4ea4\u53c9\u6388\u6743\u3002</p> <p>\u53c8\u62cd\u4e91\u5b58\u50a8\u662f\u5426\u652f\u6301 <code>?v=xxx</code> \u6765\u5237\u65b0\u7f13\u5b58\uff1f</p> <p>\u4e0d\u652f\u6301\uff0c\u5bf9\u4e8e <code>?v=xxx</code> \u53c2\u6570\u662f\u5ffd\u7565\u7684\u3002</p> <p>\u4f60\u4eec\u652f\u6301\u54ea\u51e0\u79cd\u9632\u76d7\u94fe\uff0c\u6709\u4ec0\u4e48\u533a\u522b\uff1f</p> <p>\u53c8\u62cd\u4e91\u652f\u6301 IP \u7981\u7528\uff0c\u57df\u540d\u9632\u76d7\u94fe\uff0c\u5ba2\u6237\u7aef\u767d\u540d\u5355\uff0cToken \u9632\u76d7\u94fe\uff0c\u5730\u533a\u8bbf\u95ee\u9650\u5236\u5e76\u4e14\u53ef\u4ee5\u81ea\u5b9a\u4e49\u9632\u76d7\u94fe\u63d0\u793a\u56fe\u3002</p> <ul> <li>IP \u7981\u7528\uff1a \u5982\u679c\u4e0d\u5e0c\u671b\u67d0\u4e2a IP \u6216\u8005\u67d0\u6bb5 IP \u8bbf\u95ee\u7a7a\u95f4\uff0c\u53ef\u4ee5\u4f7f\u7528\u6b64\u529f\u80fd\uff0c\u6700\u591a\u652f\u6301 50 \u4e2a IP \u6216 IP \u6bb5\uff1b</li> <li>\u57df\u540d\u9632\u76d7\u94fe\uff1a \u901a\u8fc7\u8bbe\u7f6e\u57df\u540d\u767d\u540d\u5355\u6216\u9ed1\u540d\u5355\uff0c\u5141\u8bb8\u6216\u7981\u6b62\u67d0\u4e2a\u7f51\u7ad9\u5f15\u7528\u7a7a\u95f4\u6587\u4ef6\uff0c\u6700\u591a\u5404\u652f\u6301 50 \u4e2a\u9ed1\u767d\u540d\u5355\uff1b</li> <li>\u5ba2\u6237\u7aef\u767d\u540d\u5355\uff1a \u5bf9\u4e8e\u5ba2\u6237\u7aef\u6216\u624b\u673a APP \u7684\u5ba2\u6237\uff0c\u53ef\u4ee5\u901a\u8fc7\u8bbe\u7f6e User Agent \u767d\u540d\u5355\u6765\u9650\u5236\u8bbf\u95ee\uff1b</li> <li>Token \u9632\u76d7\u94fe\uff1a \u9002\u5408\u4e0b\u8f7d\u7c7b\u7f51\u7ad9\u6216\u5e94\u7528\uff0c\u53ef\u4ee5\u8bbe\u7f6e\u7b7e\u540d\u548c\u8fc7\u671f\u65f6\u95f4\u6765\u63a7\u5236\u7a7a\u95f4\u6587\u4ef6\u7684\u8bbf\u95ee\u65f6\u9650\u3002</li> <li>\u5730\u533a\u8bbf\u95ee\u9650\u5236: \u9002\u5408\u9488\u5bf9\u5730\u533a\u505a\u51fa\u8bbf\u95ee\u9650\u5236</li> </ul> <p>\u5982\u4f55\u5237\u65b0\u7f13\u5b58\uff1f</p> <p>\u81ea\u4e3b\u6e90\u7ad9\u7f13\u5b58\u5237\u65b0\u6709\u4e24\u79cd\uff1a</p> <ol> <li>API \u63a5\u53e3\uff0c\u8c03\u7528\u7f13\u5b58\u5237\u65b0 API \u63a5\u53e3\uff0c0~10 \u5206\u949f\u66f4\u65b0\u5230\u5168\u56fd\u8282\u70b9\uff1b</li> <li>\u5728\u540e\u53f0\u5237\u65b0\uff0c\u652f\u6301\u5b8c\u6574 URL \u5237\u65b0\u3001\u89c4\u5219\u5237\u65b0\u3001\u5168\u7f51\u5237\u65b0\u3002</li> </ol> <p>\u53c8\u62cd\u4e91\u652f\u6301 HTTPS \u8bbf\u95ee\u5417\uff1f</p> <p>\u9ed8\u8ba4\u57df\u540d\u9ed8\u8ba4\u652f\u6301\uff0c\u7ed1\u5b9a\u57df\u540d\u9700\u8981\u4e0a\u4f20\u81ea\u5df1\u7684 SSL \u8bc1\u4e66\u5230\u53c8\u62cd\u4e91\u3002   </p> <p>** \u5982\u4f55\u5220\u9664\u670d\u52a1\uff1f**    </p> <p>\u5220\u9664\u670d\u52a1\u9700\u8981\u5220\u9664\u4e0a\u4f20\u5230\u670d\u52a1\u7684\u6240\u6709\u6587\u4ef6\uff0c\u7136\u540e\u5728\u540e\u53f0\u670d\u52a1\uff0d\u9ad8\u7ea7\u529f\u80fd\uff0d\u5220\u9664     </p> <p>** \u670d\u52a1\u60f3\u6682\u65f6\u505c\u7528\u4e00\u6bb5\u65f6\u95f4\u600e\u4e48\u529e\uff1f **    </p> <p>\u53ef\u4ee5\u5148\u6682\u65f6\u5173\u95ed\u670d\u52a1\u7684\u5916\u94fe\u7981\u6b62\u8bbf\u95ee</p>"},{"location":"faq/#faq_1","title":"\u6280\u672f\u6027 FAQ","text":"<p>\u4e3a\u4ec0\u4e48\u6709\u4e9b\u5730\u533a\u8bbf\u95ee\u53c8\u62cd\u4e91\u5b58\u50a8\u7684\u8d44\u6e90\u65e0\u6cd5\u6253\u5f00\uff1f\u6216\u8005ping \u5f97\u5230\u7684 IP \u4e0d\u662f\u53c8\u62cd\u4e91\u7684\uff1f</p> <p>\u8bf7\u68c0\u67e5\u672c\u5730 DNS \u662f\u5426\u662f\u516c\u5171\u7684 DNS \uff0c\u7531\u4e8e\u672c\u5730\u8fd0\u8425\u5546\u5206\u914d\u7684 DNS \u5b58\u5728\u6570\u636e\u5e93\u66f4\u65b0\u7f13\u6162\u4ee5\u53ca\u53ef\u80fd\u5bfc\u81f4\u88ab\u6076\u610f\u52ab\u6301\u7b49\u9690\u60a3\uff0c\u5efa\u8bae\u66f4\u6362\u4e3a\u516c\u5171\u7684 DNS \u5730\u5740\uff0c\u63d0\u5347\u8bbf\u95ee\u901f\u5ea6\u4ee5\u53ca\u7a33\u5b9a\u6027\uff0c\u5e38\u89c1\u7684\u516c\u5171 DNS \u5730\u5740\uff1a</p> <p>[\u56fd\u5185\u63a8\u8350]  </p> <p>114.114.114.114 223.5.5.5      223.6.6.6 </p> <p>[\u6d77\u5916\u63a8\u8350] </p> <p>8.8.8.8  </p> <p>\u6211\u4f7f\u7528\u53c8\u62cd\u4e91\u7684\u9ed8\u8ba4\u57df\u540d\u8bbf\u95ee\u8d44\u6e90\uff0c\u7ed3\u679c\u5728\u817e\u8baf QQ \u6216 chrome \u7b49\u6d4f\u89c8\u5668\u8bbf\u95ee\u63d0\u793a\u8d44\u6e90\u5b58\u5728\u5b89\u5168\u9690\u60a3\u662f\u4ec0\u4e48\u539f\u56e0\uff1f</p> <p>\u6211\u4eec\u5f3a\u70c8\u5efa\u8bae\u5ba2\u6237\u4f7f\u7528\u5df2\u5907\u6848\u7684\u81ea\u5b9a\u4e49\u57df\u540d\u4f5c\u4e3a\u8bbf\u95ee\u5b58\u50a8\u8d44\u6e90\u7684\u57df\u540d\uff0c\u9ed8\u8ba4\u57df\u540d\u4e0d\u5efa\u8bae\u4f5c\u4e3a\u957f\u671f\u7684\u8d44\u6e90\u8bbf\u95ee\u57df\u540d\u4f7f\u7528\u3002 </p> <p>\u4f7f\u7528 API \u4e0a\u4f20\uff0c\u63d0\u793a\uff1a400 data too long for ext-param\uff1f</p> <p>\u989d\u5916\u53c2\u6570\u5185\u5bb9\u8fc7\u957f\u3002</p> <p>\u4f7f\u7528 API \u4e0a\u4f20\uff0c\u63d0\u793a\uff1a401 signature error\uff1f</p> <p>\u7b7e\u540d\u9519\u8bef\u3002</p> <p>\u53ef\u80fd\u60c5\u51b5\uff1a</p> <ol> <li>\u7b7e\u540d\u683c\u5f0f\u9519\u8bef\uff1b</li> <li>\u670d\u52a1\u5668\u65f6\u95f4\u9519\u8bef\uff0c\u8bf7\u68c0\u67e5\u670d\u52a1\u5668\u7684\u65f6\u95f4\u662f\u5426\u4e0e\u4e16\u754c\u65f6\u95f4\u6709\u8f83\u5927\u504f\u5dee\u3002</li> <li>\u9012\u4ea4\u5230\u8868\u5355 API \u63a5\u53e3\u7684 policy \u4fe1\u606f\u4e2d\u7f3a\u5c11\u7a7a\u95f4\u540d\uff1b</li> <li>\u9012\u4ea4\u5230\u8868\u5355 API \u63a5\u53e3\u7684 policy \u4fe1\u606f\u4e2d\u7f3a\u5c11 save-key \u5b57\u6bb5\uff1b</li> <li>\u9012\u4ea4\u5230\u8868\u5355 API \u63a5\u53e3\u7684 policy \u4fe1\u606f\u4e2d\u7f3a\u5c11 expiration \u5b57\u6bb5\uff1b</li> <li>\u8868\u5355\u7b7e\u540d\u5bc6\u5319\u9519\u8bef\uff08\u8bf7\u5230\u7a7a\u95f4\u7ba1\u7406\u540e\u53f0\u83b7\u53d6\u8868\u5355 API \u7b7e\u540d\u5bc6\u5319\uff09\u3002</li> </ol> <p>\u4f7f\u7528 API \u4e0a\u4f20\uff0c\u63d0\u793a\uff1a401 need date header\uff1f</p> <p>\u53d1\u8d77\u7684\u8bf7\u6c42\u7f3a\u5c11 Date \u5934\u4fe1\u606f\u3002</p> <p>\u53ef\u80fd\u60c5\u51b5\uff1a</p> <p>\u53d1\u8d77\u7684\u63a5\u53e3\u8bf7\u6c42 HEADER \u4e2d\u786e\u5c11 Date \u53c2\u6570\uff1b</p> <p>\u6ce8\u610f\uff1a\u90e8\u5206 HTTP Client \u5f00\u53d1\u5305\u5728\u53d1\u8d77 GET \u8bf7\u6c42\u65f6\u4e0d\u81ea\u52a8\u52a0\u5165 Date \u53c2\u6570\u3002</p> <p>\u4f7f\u7528 API \u4e0a\u4f20\uff0c\u63d0\u793a\uff1a401 date offset error\uff1f</p> <p>\u53d1\u8d77\u8bf7\u6c42\u7684\u670d\u52a1\u5668\u65f6\u95f4\u9519\u8bef\u3002</p> <p>\u53ef\u80fd\u60c5\u51b5\uff1a</p> <p>\u670d\u52a1\u5668\u65f6\u95f4\u9519\u8bef\uff0c\u8bf7\u68c0\u67e5\u670d\u52a1\u5668\u7684\u65f6\u95f4\u662f\u5426\u4e0e\u4e16\u754c\u65f6\u95f4\u6709\u8f83\u5927\u504f\u5dee\u3002</p> <p>\u4f7f\u7528 API \u4e0a\u4f20\uff0c\u63d0\u793a\uff1a401 user blocked\uff1f</p> <p>\u64cd\u4f5c\u5458\u88ab\u7981\u7528\u3002</p> <p>\u4f7f\u7528 API \u4e0a\u4f20\uff0c\u63d0\u793a\uff1a403 not an image\uff1f</p> <p>\u4e0d\u662f\u6b63\u786e\u7684\u56fe\u7247\u5185\u5bb9\u3002</p> <p>\u53ef\u80fd\u60c5\u51b5\uff1a</p> <p>\u4e0a\u4f20\u975e\u56fe\u7247\u6587\u4ef6\uff0c\u4f46\u662f\u4f7f\u7528\u4e86\u56fe\u7247\u5904\u7406\u53c2\u6570</p> <p>** \u4f7f\u7528 API \u4e0a\u4f20\uff0c\u63d0\u793a \uff1a401  user need permission **    </p> <p>\u64cd\u4f5c\u5458\u9700\u8981\u6388\u6743</p> <p>\u53ef\u80fd\u60c5\u51b5\uff1a</p> <p>\u64cd\u4f5c\u5458\u672a\u6388\u6743\u76f8\u5e94\u64cd\u4f5c\u7684\u6743\u9650</p> <p>** \u4e0a\u4f20\u6587\u4ef6\u7684\u65f6\u5019\u62a5 400 40011xxx invalid x-gmkerl-xxx **</p> <p>\u65e0\u6548\u53c2\u6570</p> <p>\u53ef\u80fd\u60c5\u51b5\uff1a </p> <p>\u53c2\u6570\u4f7f\u7528\u9519\u8bef</p> <p>** \u5220\u9664\u6587\u4ef6\u7684\u65f6\u5019 403 40300011 has no permission to delete **</p> <p>\u6ca1\u6709\u6743\u9650\u5220\u9664</p> <p>\u53ef\u80fd\u60c5\u51b5\uff1a  </p> <p>\u64cd\u4f5c\u5458\u6ca1\u6709\u6388\u6743\u5220\u9664\u6743\u9650</p> <p>** \u5237\u65b0\u7f13\u5b58\u7684\u65f6\u5019\u6211\u7684\u57df\u540d\u914d\u7f6e\u6709 HTTP \u548c HTTPS \u8bf7\u95ee\u5237\u65b0\u7f13\u5b58\u7684\u65f6\u5019\u662f\u5426\u53ea\u9700\u8981\u5237\u65b0\u4e00\u4e2a\u5c31\u53ef\u4ee5\u4e86\uff1f **</p> <p>\u8fd9\u79cd\u60c5\u51b5\u770b\u662f\u5426\u6709\u5f00\u542f\u534f\u8bae\u8ddf\u968f\uff0c\u5982\u679c\u5f00\u542f\u4e86\uff0c\u5c31\u9700\u8981\u5355\u72ec\u7528 https \u548c http \u5237\uff0c\u5404\u5237\u5404\u7684\uff0c\u5982\u679c\u6ca1\u5f00\u542f\uff0c\u4e24\u4e2a\u5237\u6548\u679c\u90fd\u4e00\u6837\u3002\u5982\u679c\u5224\u65ad\u662f\u5426\u6709\u5f00\u542f\u534f\u8bae\u8ddf\u968f\uff0c\u5982\u679c\u4f60\u5728\u56de\u6e90 Host \u4e2d\u586b\u5199\u4e86\u56de\u6e90\u57df\u540d \u5c31\u4e0d\u9700\u8981\u5237\u65b0\u4e24\u6b21\uff0c\u9ed8\u8ba4\u662f\u9700\u8981\u7684\u3002</p> <p>\u4f7f\u7528\u963f\u91cc\u4e91ECS\u4f5c\u4e3a\u6e90\u7ad9\uff0c\u8fdb\u884c\u81ea\u4e3b\u6e90\u7ad9\u52a0\u901f\u540e\u54cd\u5e94\u5934\u4e00\u76f4\u63d0\u793a <code>C\uff0ferror 503 contention reset peer\uff1f</code></p> <p>\u6e90\u7ad9\u8d85\u65f6\u5bfc\u81f4\u7684\u3002</p> <p>\u53ef\u80fd\u60c5\u51b5\uff1a</p> <p>\u963f\u91cc\u4e91\u4e91\u76fe\u9632\u62a4\u62e6\u622a\u4e86\u6211\u4eec\u7684\u56de\u6e90 IP \uff0c\u5efa\u8bae\u5173\u95ed\u4e91\u76fe\u6216\u8005\u6dfb\u52a0\u4e91\u76fe\u767d\u540d\u5355 `0.0.0.0 \u3002</p> <p>\u4f7f\u7528 API \u4e0a\u4f20\uff0c\u63d0\u793a\uff1a403 bucket blocked\uff1f</p> <p>\u7a7a\u95f4\u88ab\u7981\u7528\u6216\u8005\u6ca1\u6709\u8fdb\u884c\u5b9e\u540d\u8ba4\u8bc1\u3002</p> <p>\u4f7f\u7528 API \u4e0a\u4f20\uff0c\u63d0\u793a\uff1a403 authorization has expired\uff1f</p> <p>\u4e0d\u63a5\u53d7\u8bf7\u6c42\uff0c\u6388\u6743\u5df2\u8fc7\u671f\u3002</p> <p>\u53ef\u80fd\u60c5\u51b5\uff1a</p> <ol> <li>\u5728 policy \u4fe1\u606f\u4e2d\u8bbe\u7f6e expiration \u6388\u6743\u8fc7\u671f\u65f6\u95f4\u8fc7\u77ed\uff1b</li> <li>\u670d\u52a1\u5668\u65f6\u95f4\u4e0e\u4e16\u754c\u6807\u51c6\u65f6\u95f4\u504f\u5dee\u8fc7\u5927\u3002</li> </ol> <p>\u4f7f\u7528 API \u4e0a\u4f20\uff0c\u63d0\u793a\uff1a403 form api disabled\uff1f</p> <p>\u4e0d\u63a5\u53d7\u8bf7\u6c42\uff0c\u7a7a\u95f4\u7684\u8868\u5355 API \u4e0a\u4f20\u529f\u80fd\u672a\u5f00\u542f\u3002</p> <p>\u4f7f\u7528 API \u4e0a\u4f20\uff0c\u63d0\u793a\uff1a403 file too small\uff1f</p> <p>\u4e0d\u63a5\u53d7\u8bf7\u6c42\uff0c\u4e0a\u4f20\u7684\u6587\u4ef6\u5bb9\u91cf\u8fc7\u5c0f\u3002</p> <p>\u53ef\u80fd\u60c5\u51b5\uff1a</p> <p>\u5728 policy \u4fe1\u606f\u4e2d\u8bbe\u7f6e\u7684 content-length-range \u53c2\u6570\u662f\u5426\u8fc7\u5927\u3002</p> <p>\u4f7f\u7528 API \u4e0a\u4f20\uff0c\u63d0\u793a\uff1a403 file type error\uff1f</p> <p>\u4e0d\u63a5\u53d7\u8bf7\u6c42\uff0c\u4e0a\u4f20\u7684\u6587\u4ef6\u7c7b\u578b\u4e0d\u88ab\u5141\u8bb8\u3002</p> <p>\u53ef\u80fd\u60c5\u51b5\uff1a</p> <p>\u5728 policy \u4fe1\u606f\u4e2d\u8bbe\u7f6e\u7684 allow-file-type \u4e0d\u5305\u542b\u5f53\u524d\u4e0a\u4f20\u7684\u6587\u4ef6\u7c7b\u578b\u3002</p> <p>\u4f7f\u7528 API \u4e0a\u4f20\uff0c\u63d0\u793a\uff1a403 content md5 not match\uff1f</p> <p>\u4e0d\u63a5\u53d7\u8bf7\u6c42\uff0c\u4e0a\u4f20\u7684\u6587\u4ef6 md5 \u6821\u9a8c\u9519\u8bef\u3002</p> <p>\u53ef\u80fd\u60c5\u51b5\uff1a</p> <p>\u5728 policy \u4fe1\u606f\u4e2d\u8bbe\u7f6e\u7684 content-md5 \u6821\u9a8c\u503c\u4e0e\u8868\u5355\u63a5\u6536\u5230\u7684\u6587\u4ef6 md5 \u4e0d\u4e00\u81f4\u3002</p> <p>\u4f7f\u7528 API \u4e0a\u4f20\uff0c\u63d0\u793a\uff1a403 image width too small or too big\uff1f</p> <p>\u4e0d\u63a5\u53d7\u8bf7\u6c42\uff0c\u4e0a\u4f20\u7684\u56fe\u7247\u6587\u4ef6\u5bbd\u5ea6\u8fc7\u5c0f\u6216\u8fc7\u5927\u3002</p> <p>\u53ef\u80fd\u60c5\u51b5\uff1a</p> <p>\u5728 policy \u4fe1\u606f\u4e2d\u8bbe\u7f6e\u7684 image-width-range \u53c2\u6570\u662f\u5426\u8fc7\u5927\u6216\u8fc7\u5c0f\u3002</p> <p>\u4f7f\u7528 API \u4e0a\u4f20\uff0c\u63d0\u793a\uff1a403 image height too small or too big\uff1f</p> <p>\u4e0d\u63a5\u53d7\u8bf7\u6c42\uff0c\u4e0a\u4f20\u7684\u56fe\u7247\u6587\u4ef6\u9ad8\u5ea6\u8fc7\u5c0f\u6216\u8fc7\u5927\u3002</p> <p>\u53ef\u80fd\u60c5\u51b5\uff1a</p> <p>\u5728 policy \u4fe1\u606f\u4e2d\u8bbe\u7f6e\u7684 image-height-range \u53c2\u6570\u662f\u5426\u8fc7\u5927\u6216\u8fc7\u5c0f\u3002</p> <p>\u4f7f\u7528 API\uff0c\u63d0\u793a\uff1a404 Not Found\uff1f</p> <p>\u8bf7\u6c42\u7684\u6587\u4ef6\u4e0d\u5b58\u5728\u3002</p> <p>\u53ef\u80fd\u60c5\u51b5\uff1a</p> <ol> <li>\u5728\u4e0a\u4f20\u6587\u4ef6\u8fc7\u7a0b\u4e2d\u9047\u5230 404 \u9519\u8bef\uff0c\u8bf7\u68c0\u67e5\u4e0a\u4f20\u6587\u4ef6\u8def\u5f84\u7684\u76ee\u5f55\u8def\u5f84\u662f\u5426\u5b58\u5728\uff1b</li> <li>\u5728\u4e0b\u8f7d\u6587\u4ef6\u8fc7\u7a0b\u4e2d\u9047\u5230 404 \u9519\u8bef\uff0c\u8bf7\u68c0\u67e5\u6587\u4ef6\u540d\u548c\u8def\u5f84\u662f\u5426\u5b58\u5728\u3002</li> </ol> <p>\u4f7f\u7528 API\uff0c\u63d0\u793a\uff1a406 dir not acceptable\uff1f</p> <p>\u4e0d\u63a5\u53d7\u8bf7\u6c42\u3002</p> <p>\u53ef\u80fd\u60c5\u51b5\uff1a</p> <ol> <li>\u5728\u4e0a\u4f20\u6587\u4ef6\u8fc7\u7a0b\u4e2d\u9047\u5230 406 \u9519\u8bef\uff0c\u8bf7\u68c0\u67e5\u4e0a\u4f20\u6587\u4ef6\u540d\u662f\u5426\u5df2\u7ecf\u88ab\u7528\u4e8e\u5b58\u5728\u7684\u76ee\u5f55\uff1b</li> <li>\u5728\u4e0a\u4f20\u6587\u4ef6\u8fc7\u7a0b\u4e2d\u9047\u5230 406 \u9519\u8bef\uff0c\u5982\u6709\u8bbe\u7f6e Content-MD5 \u6821\u9a8c\uff0c\u53ef\u80fd\u662f\u53c8\u62cd\u4e91\u670d\u52a1\u5668\u7aef\u6536\u5230\u7684\u6587\u4ef6\u5185\u5bb9 MD5 \u4e0d\u4e00\u81f4\u3002\u8bf7\u68c0\u67e5 API \u63a5\u53e3\u8bf7\u6c42\u65f6\u8bbe\u7f6e\u7684 Content-MD5 \u503c\uff1b</li> <li>\u5728\u521b\u5efa\u76ee\u5f55\u8fc7\u7a0b\u4e2d\u9047\u5230 406 \u9519\u8bef\uff0c\u8bf7\u68c0\u67e5\u76ee\u5f55\u540d\u662f\u5426\u5df2\u7ecf\u88ab\u7528\u4e8e\u5b58\u5728\u7684\u6587\u4ef6\u3002</li> </ol> <p>\u4f7f\u7528 API \u4e0a\u4f20\uff0c\u63d0\u793a\uff1a503 System Error\uff1f</p> <p>\u7cfb\u7edf\u9519\u8bef\u3002</p> <p>\u53ef\u80fd\u60c5\u51b5\uff1a</p> <ol> <li>\u53c8\u62cd\u4e91\u7cfb\u7edf\u6b63\u5728\u7ef4\u62a4\u4e2d\uff1b</li> <li>\u53c8\u62cd\u4e91\u7cfb\u7edf\u51fa\u73b0\u6545\u969c\uff0c\u8bf7\u4e0e\u5ba2\u670d\u8054\u7cfb\u3002</li> </ol>"},{"location":"faq/#ftp","title":"FTP","text":"<p>\u4f7f\u7528 FTP \u767b\u5f55\u63d0\u793a\uff1a\u65e0\u6cd5\u89e3\u6790 v0.ftp.upyun.com \u7684\u5730\u5740\uff1f</p> <p>\u53ef\u80fd\u60c5\u51b5\uff1a</p> <p>\u672c\u5730 DNS \u6709\u95ee\u9898\uff0c\u53ef\u5c1d\u8bd5\u66f4\u6362\u516c\u5171 DNS\u3002</p> <p>\u4f7f\u7528 FTP \u767b\u5f55\u63d0\u793a\uff1a530 Authentication failed. Disconnecting. \u65e0\u6cd5\u8fde\u63a5\u5230\u670d\u52a1\u5668\uff1f</p> <p>\u53ef\u80fd\u60c5\u51b5\uff1a</p> <ol> <li>\u7528\u6237\u540d\uff08\u64cd\u4f5c\u5458/\u7a7a\u95f4\u540d\uff0c\u659c\u6760\u4e3a\u5fc5\u987b\uff09\u9519\u8bef\uff1b</li> <li>\u5bc6\u7801\uff08\u64cd\u4f5c\u5458\u5bc6\u7801\uff09\u9519\u8bef\uff1b</li> <li>\u64cd\u4f5c\u5458\u6ca1\u6709\u6388\u6743\u7ed9\u7a7a\u95f4\u3002</li> </ol> <p>\u4f7f\u7528 FTP \u4e0a\u4f20\u8f83\u5927\u6587\u4ef6\uff1a\u8fdb\u5ea6\u662f 100% \u786e\u6ca1\u6709\u663e\u793a\u4e0a\u4f20\u5b8c\u6bd5\uff1f</p> <p>\u8bf7\u8010\u5fc3\u7b49\u5f85 15 \u79d2\u5de6\u53f3\uff0c\u6b64\u65f6\u7cfb\u7edf\u6b63\u5728\u628a\u63a5\u6536\u5230\u7684\u6587\u4ef6\u5199\u5165\u5230\u76f8\u5e94\u7684\u5b58\u50a8\u670d\u52a1\u4e2d\uff0c\u6587\u4ef6\u5199\u5165\u5b8c\u6bd5\u540e\uff0c\u624d\u4f1a\u663e\u793a\u4e0a\u4f20\u5b8c\u6210\u3002</p> <p>FTP \u770b\u5230\u7684\u65f6\u95f4\u4e0e\u5f53\u524d\u65f6\u95f4\uff08\u5317\u4eac\u65f6\u95f4\uff09\u4e0d\u4e00\u81f4\uff1f</p> <p>\u53c8\u62cd\u4e91\u670d\u52a1\u5668\u91c7\u7528 GMT \u65f6\u95f4\uff0c\u4e3a UTC+0 \u533a\uff0c\u548c\u5317\u4eac\u65f6\u95f4\u76f8\u5dee 8 \u4e2a\u5c0f\u65f6\u3002</p> <p>FTP \u770b\u5230\u4e0a\u4f20\u7684\u4e2d\u6587\u6587\u4ef6\u540d\u4e3a\u4e71\u7801\uff1f</p> <p>\u53c8\u62cd\u4e91\u7684 FTP \u7f16\u7801\u4e3a UTF-8\uff0c\u8bf7\u66f4\u6539 FTP \u7f16\u7801\u8bbe\u7f6e\u4e3a UTF-8\u3002</p> <p>FTP \u4e2d\u53ef\u4ee5\u770b\u5230\u56fe\u7247\uff0c\u4f46\u5916\u94fe\u8bbf\u95ee 404\uff1f</p> <p>\u53ef\u80fd\u60c5\u51b5\u6709\uff1a</p> <ol> <li>\u4f7f\u7528\u4e86\u539f\u56fe\u4fdd\u62a4\u529f\u80fd\uff0c\u9700\u8981\u5e26\u5bc6\u94a5\u8bbf\u95ee\uff1b</li> <li>\u4e0a\u4f20\u5b8c\u6210\u524d\u6709\u8fc7\u8bbf\u95ee\uff0c\u4f1a\u6709 5 \u5206\u949f 404 \u7f13\u5b58\uff0c\u9700\u8981\u5237\u65b0\u7f13\u5b58\u6216\u7b49\u5f85\u7f13\u5b58\u8fc7\u671f\u540e\u66f4\u65b0\uff1b</li> <li>URL \u4e2d\u542b\u6709\u548c\u540e\u53f0\u95f4\u9694\u7b26\u76f8\u540c\u7684\u5b57\u7b26\u3002</li> </ol> <p>\u4e3a\u4ec0\u4e48 FTP \u4e0d\u80fd\u7ed9\u76ee\u5f55\u91cd\u547d\u540d\uff1f</p> <p>\u652f\u6301\u7a7a\u76ee\u5f55\u53ca\u6587\u4ef6\u91cd\u547d\u540d\uff0c\u6682\u4e0d\u652f\u6301\u975e\u7a7a\u76ee\u5f55\u91cd\u547d\u540d\u3002</p> <p>FTP \u5982\u4f55\u79fb\u52a8\u53ca\u590d\u5236\u6587\u4ef6\u53ca\u76ee\u5f55\uff1f</p> <p>\u652f\u6301\u7a7a\u76ee\u5f55\u53ca\u6587\u4ef6\u79fb\u52a8\uff0c\u6682\u4e0d\u652f\u6301\u975e\u76ee\u5f55\u79fb\u52a8\uff0c\u6682\u4e0d\u652f\u6301\u76ee\u5f55\u3001\u6587\u4ef6\u590d\u5236\u3002</p> <p>\u4e3a\u4ec0\u4e48 FTP \u4e0a\u4f20\u4f1a\u5c11\u51e0\u4e2a\u5b57\u8282\u4e0d\u5b8c\u6574\uff1f</p> <p>\u7531\u4e8e FTP \u7684\u7279\u6027\uff0c\u4e0d\u68c0\u67e5\u6570\u636e\u5b8c\u6574\u6027\uff0c\u5982\u7f51\u7edc\u6ce2\u52a8\u5bfc\u81f4\u4e00\u90e8\u5206\u5b57\u8282\u4e22\u5931\u4e5f\u662f\u53ef\u80fd\u7684\uff0c\u53ef\u91cd\u4f20\u6216\u91c7\u7528 API \u65b9\u5f0f\u4e0a\u4f20\u3002</p> <p>FTP \u63d0\u793a\uff1a425 Rejected Data Connection From Foreign Address \u5e76\u8bfb\u53d6\u76ee\u5f55\u5931\u8d25\uff1f</p> <p>\u53ef\u80fd\u60c5\u51b5\uff1a</p> <p>\u8fd0\u8425\u5546\u63d0\u4f9b\u7684 IP \u53d1\u751f\u4e86\u53d8\u5316\uff0cFTP \u63a2\u6d4b\u5230\u524d\u540e\u4e0d\u4e00\u81f4\uff0c\u51fa\u4e8e\u5b89\u5168\u8003\u8651\uff0c\u65ad\u6389\u4e86\u8fde\u63a5\uff0c\u8fd9\u4e2a\u662f FTP \u534f\u8bae\u51b3\u5b9a\u7684\u3002\u5982\u679c\u65e0\u6cd5\u6539\u53d8\u8fd9\u4e2a IP \u5730\u5740\u53d8\u52a8\u7684\u60c5\u51b5, \u53ef\u4ee5\u5c1d\u8bd5\u4f7f\u7528\u4f7f\u7528\u4ee3\u7406\u6765\u907f\u514d\u8fd9\u79cd\u60c5\u51b5\u53d1\u751f\u3002</p>"},{"location":"faq/#_1","title":"\u63d2\u4ef6","text":"<p>\u7ec7\u68a6 CMS \u662f\u5426\u53ef\u4ee5\u4f7f\u7528\u53c8\u62cd\u4e91\uff0c\u6709\u6ca1\u6709\u63d2\u4ef6\uff1f</p> <p>\u6682\u65e0\u7ec7\u68a6 CMS \u7684\u63d2\u4ef6\uff1b\u7406\u8bba\u4e0a\u652f\u6301 FTP \u534f\u8bae\u7684 CMS \u90fd\u662f\u53ef\u4ee5\u4f7f\u7528\u53c8\u62cd\u4e91\u5b58\u50a8\uff0c\u4f46\u7ec7\u68a6 CMS \u672c\u8eab\u5c06\u8fdc\u7a0b\u9644\u4ef6\u5f53\u505a\u5907\u4efd\u5904\u7406\uff0c\u9759\u6001\u6587\u4ef6\u7684\u5f15\u7528\u662f\u4e0d\u5f15\u7528\u8fdc\u7a0b\u9644\u4ef6\u7684\uff1b\u6240\u4ee5\u7ec7\u68a6 CMS \u53ef\u4ee5\u4f7f\u7528\u53c8\u62cd\u4e91\u5b58\u50a8\uff0c\u4f46\u53ea\u80fd\u662f\u628a\u53c8\u62cd\u4e91\u5b58\u50a8\u5f53\u5907\u4efd\u3002</p> <p>Discuz \u662f\u5426\u53ef\u4ee5\u672c\u5730\u4fdd\u7559\u9644\u4ef6\uff1f</p> <p>\u5982\u679c\u4f60\u4f7f\u7528\u63d2\u4ef6\uff0c\u63d2\u4ef6\u6700\u540e\u662f\u6709\u9009\u9879\u8bbe\u7f6e\u662f\u5426\u5f00\u542f\u672c\u5730\u5907\u4efd\u513f\u529f\u80fd\u7684\uff1b\u5982\u679c\u4f60\u4f7f\u7528\u8fdc\u7a0b\u9644\u4ef6\u529f\u80fd\uff0c\u672c\u5730\u662f\u4e0d\u4fdd\u5b58\u7684\u3002</p> <p>\u4e3a\u4ec0\u4e48 Discuz \u8fdc\u7a0b\u9644\u4ef6\u7684\u6d4b\u8bd5 FTP \u6309\u94ae\u63d0\u793a\u5220\u9664\u5931\u8d25\uff0c\u6ca1\u6709\u6743\u9650\u7684\u63d0\u793a\uff1f</p> <p>\u8be5\u529f\u80fd\u4e0e\u53c8\u62cd\u4e91\u4e0d\u517c\u5bb9\uff0c\u786e\u8ba4\u586b\u5199\u914d\u7f6e\u4fe1\u606f\u65e0\u8bef\u540e\uff0c\u53ef\u4ee5\u76f4\u63a5\u4fdd\u5b58\u8bbe\u7f6e\uff0c\u53d1\u5e16\u6d4b\u8bd5\u3002</p> <p>\u4e3a\u4ec0\u4e48\u7528 FTP \u4e0a\u4f20\u7684\u6587\u4ef6\uff0cWordPress \u7684\u5a92\u4f53\u5e93\u770b\u4e0d\u5230\uff1f</p> <p>\u56e0\u4e3a\u5a92\u4f53\u5e93\u53ea\u63a7\u5236\u7531\u81ea\u8eab\u4e0a\u4f20\u7684\u6587\u4ef6\uff0c\u5e76\u6ca1\u6709\u83b7\u53d6\u8fdc\u7a0b\u76ee\u5f55\u7684\u529f\u80fd\uff0c\u6240\u4ee5 WordPress \u7684\u5a92\u4f53\u5e93\u770b\u4e0d\u5230 FTP \u4e0a\u4f20\u7684\u6587\u4ef6</p> <p>\u600e\u4e48\u5c06 Wordpress \u7684\u6570\u636e\u8fc1\u79fb\u5230\u53c8\u62cd\u4e91\uff1f</p> <p>\u5c06\u7f51\u7ad9\u6839\u76ee\u5f55\u4e0b /wp-content/uploads \u4e0b\u7684\u6570\u636e\u4e0a\u4f20\u5230\u53c8\u62cd\u4e91\uff0c\u5b89\u88c5\u53c8\u62cd\u4e91 Wordpress \u7684\u63d2\u4ef6\uff08\u5b89\u88c5\u8bf7\u53c2\u8003\u5b89\u88c5\u624b\u518c\uff09\uff0c\u6b63\u786e\u586b\u5199\u8bbe\u7f6e\uff0c\u4fdd\u5b58\u914d\u7f6e\uff0c\u66f4\u65b0\u6570\u636e\u5e93\u3002</p> <p>\u4e3a\u4ec0\u4e48\u5b89\u88c5 Wordpress \u540e\uff0c\u4e0a\u4f20\u4e00\u4e2a\u6587\u4ef6\uff0c\u53c8\u62cd\u4e91\u5b58\u50a8\u7a7a\u95f4\u4f1a\u591a\u51e0\u4e2a\uff1f</p> <p>\u8fd9\u662f\u7531\u4e8e Wordpress \u7684\u5b58\u50a8\u65b9\u5f0f\u662f\u4e00\u5f20\u539f\u56fe\u76f4\u63a5\u5206\u5272\u6210\u591a\u5f20\u7f29\u7565\u5b58\u50a8\uff0c\u4e0a\u4f20\u9644\u4ef6\u65f6\u662f\u5c06\u539f\u56fe\u4ee5\u53ca\u7f29\u7565\u56fe\u4e00\u5e76\u4e0a\u4f20\u7684\u3002</p> <p>PHPWind \u5b89\u88c5\u53c8\u62cd\u4e91\u63d2\u4ef6\uff0c\u5934\u50cf\u8fd8\u662f\u4fdd\u5b58\u672c\u5730\uff1f</p> <p>PHPWind \u5934\u50cf\u5b58\u50a8\u8fd8\u9700\u8981\u53e6\u5916\u5b89\u88c5\u63d2\u4ef6\u8bbe\u7f6e\uff1b\u5177\u4f53\u53c2\u8003\u5b89\u88c5\u624b\u518c\u7b2c\u56db\u9879\uff0c\u5934\u50cf\u5b58\u50a8\u65b9\u5f0f\u8bbe\u7f6e\u3002</p> <p>\u4e3a\u4ec0\u4e48 PHPWind \u5b89\u88c5\u63d2\u4ef6\u540e\uff0c\u4e0a\u4f20\u6587\u4ef6\u540e\uff0c\u6587\u4ef6\u5916\u94fe\u8fd8\u662f\u672c\u5730\u5730\u5740\uff1f</p> <p>\u68c0\u67e5\u914d\u7f6e\u4fe1\u606f\u662f\u5426\u6b63\u786e\uff0c\u6e05\u7406 PHPWind \u7f13\u5b58\u3002</p> <p>\u600e\u4e48\u901a\u8fc7\u65e5\u5fd7\u770b\u52a8\u6001\u8bf7\u6c42\u8fd8\u662f\u9759\u6001\u8bf7\u6c42</p> <p>\u540e\u53f0\u4e0b\u8f7d\u65e5\u5fd7\u540e\uff0c\u6253\u5f00\u65e5\u5fd7\u67e5\u770b Static \u5b57\u6bb5\u5c31\u662f\u9759\u6001\uff0c\u53cd\u4e4b Dynamic \u5c31\u662f\u52a8\u6001\u7684\u3002</p> <p>\u4e3a\u4ec0\u4e48\u4e0b\u8f7d\u53c8\u62cd\u4e91\u5b98\u65b9\u7684 UEditor \u7f16\u8f91\u5668\uff0c\u914d\u7f6e\u4ee5\u540e\uff0c\u4e0a\u4f20\u4e0d\u4e86\uff1f</p> <p>\u68c0\u67e5 UEditor \u7684\u6743\u9650\u95ee\u9898\uff0cUEditor \u4e0b\u9644\u4ef6\u76ee\u5f55 uploads \u81f3\u5c11\u8981\u6709\u5199\u7684\u6743\u9650\u3002</p>"},{"location":"faq/#_2","title":"\u5176\u5b83","text":"<p>\u56fe\u7247\u8bbf\u95ee\u663e\u793a\uff1a403 Forbidden\uff1f</p> <p>\u5f00\u542f\u4e86\u9632\u76d7\u94fe\u529f\u80fd\u3002</p> <p>\u53ef\u80fd\u60c5\u51b5\uff1a</p> <ol> <li>\u4f7f\u7528\u4e86 Token \u9632\u76d7\u94fe\uff0c\u8bbf\u95ee\u65f6\u6ca1\u6709\u52a0\u53c2\u6570\uff1a_upt\uff1b</li> <li>\u4f7f\u7528\u4e86 IP \u7981\u7528\u529f\u80fd\uff0cIP \u88ab\u7981\u4e86\uff1b</li> <li>\u4f7f\u7528\u4e86\u57df\u540d\u9632\u76d7\u94fe\u529f\u80fd\uff0c\u4e0d\u5728\u5141\u8bb8\u7684\u57df\u540d\u8303\u56f4\u5185\uff1b</li> <li>\u4f7f\u7528\u4e86\u5ba2\u6237\u7aef\u767d\u540d\u5355\u529f\u80fd\uff0c\u4e0d\u5728\u767d\u540d\u5355\u8303\u56f4\u5185\u3002</li> </ol> <p>\u56fe\u7247\u5728\u672c\u5730\u770b\u7740\u662f\u6b63\u7684\uff0c\u4f20\u5230\u4e86\u53c8\u62cd\u4e91\uff0c\u67d0\u4e9b\u6d4f\u89c8\u5668\u8bbf\u95ee\u662f\u5012\u7684\uff1f</p> <p>\u56fe\u7247\u672c\u8eab\u5e76\u4e0d\u662f\u6b63\u7684\uff0c\u90e8\u5206\u8f6f\u4ef6\u6216\u6d4f\u89c8\u5668\u5177\u6709\u81ea\u52a8\u65cb\u8f6c\u8bc6\u522b\u529f\u80fd\uff0c\u53ef\u901a\u8fc7\u67e5\u770b\u56fe\u7247 EXIF \u4fe1\u606f\uff0c\u786e\u5b9a\u56fe\u7247\u7684\u5177\u4f53\u65cb\u8f6c\u60c5\u51b5\u3002</p> <p>\u8bf4\u660e\uff1a\u53c2\u6570 Orientation\uff0c\uff081\uff1a0 \u5ea6 6\uff1a\u987a\u65f6\u9488 90 \u5ea6 8\uff1a\u9006\u65f6\u9488 90 \u5ea6 3\uff1a180 \u5ea6\uff09\u3002</p> <p>\u539f\u56fe\u52a0\u5bc6\u529f\u80fd\u4e0d\u751f\u6548\uff1f</p> <p>\u53ef\u80fd\u60c5\u51b5\uff1a</p> <p>\u539f\u56fe\u4fdd\u62a4\u5bc6\u94a5\u5305\u542b\u7279\u6b8a\u5b57\u7b26\uff1a\u65b0\u7248\u672c\u89c4\u5b9a\u53ea\u80fd\u4f7f\u7528\u201ca-zA-Z0-9\u201d\u7684\u5b57\u7b26\u7ec4\u5408\u3002</p> <p>\u6dfb\u52a0\u6c34\u5370\u4e0d\u6210\u529f\uff1f</p> <p>\u68c0\u67e5\u6c34\u5370\u56fe\u7247\u5c3a\u5bf8\u4efb\u610f\u8fb9\u662f\u5426\u8d85\u8fc7\u4e86\u751f\u6210\u56fe\u7247\u5c3a\u5bf8\u7684 50%\uff0c\u8d85\u8fc7\u4e0d\u80fd\u6dfb\u52a0\u6c34\u5370\u3002</p> <p>\u6587\u4ef6\u66f4\u65b0\u4e86\uff0c\u4e3a\u4ec0\u4e48\u8bbf\u95ee\u8fd8\u662f\u8001\u56fe\uff1f</p> <p>\u6587\u4ef6\u66f4\u65b0\u540e\uff0c\u53c8\u62cd\u4e91\u5b58\u50a8\u9700\u8981\u66f4\u65b0\u5168\u56fd\u8282\u70b9\u7684\u7f13\u5b58\uff0c\u8fd9\u4e2a\u65f6\u95f4\u9700\u8981 0~10 \u5206\u949f\u3002\u4e00\u822c\u60c5\u51b5\u4e0b\uff0c\u80fd\u591f\u505a\u5230\u5b9e\u65f6\u66f4\u65b0\u300210 \u5206\u949f\u540e\u8fd8\u662f\u65e0\u6cd5\u83b7\u53d6\u65b0\u56fe\uff0c\u8bf7\u68c0\u67e5\u4ee5\u4e0b\u4e24\u79cd\u60c5\u51b5\uff1a</p> <ol> <li>\u6d4f\u89c8\u5668\u53ef\u80fd\u5b58\u5728\u7f13\u5b58\uff0c\u8bf7\u6e05\u9664\u6d4f\u89c8\u5668\u7f13\u5b58\u540e\uff0c\u518d\u5f3a\u5236\u5237\u65b0;</li> <li>\u82e5\u662f\u81ea\u4e3b\u6e90\u7ad9\u7684\u60c5\u51b5\uff0c\u6e90\u6570\u636e\u66f4\u65b0\u540e\u662f\u5426\u6709\u8c03\u7528\u8fc7 API \u63a5\u53e3\uff0c\u901a\u77e5\u53c8\u62cd\u4e91\u5b58\u50a8\u8fdb\u884c\u7f13\u5b58\u5237\u65b0\u3002</li> </ol> <p>**\u81ea\u4e3b\u6e90\u7ad9\u670d\u52a1\uff0c\u8bbf\u95ee\u6587\u4ef6\u4e00\u76f4\u6ca1\u5237\u65b0\u6210\u529f\uff0c\u54cd\u5e94\u5934\u4e2d\u663e\u793a <code>x-source:U/200</code> \u8bf7\u95ee\u5982\u4f55\u89e3\u51b3\uff1f **</p> <p>\u53ef\u80fd\u539f\u56e0:</p> <p>\u8fd9\u79cd\u60c5\u51b5\u4e00\u822c\u662f\u5f00\u542f\u4e86\u955c\u50cf\u529f\u80fd\u5bfc\u81f4\u6e90\u7ad9\u6587\u4ef6\u88ab\u6c38\u4e45\u4fdd\u5b58\u5728\u4e86 CDN \u4e2d\uff0c\u6b64\u65f6\u7684\u81ea\u52a9\u6e90\u7ad9\u5df2\u7ecf\u662f\u4e00\u4e2a\u5b58\u50a8\u670d\u52a1\uff0c\u5982\u679c\u8bef\u64cd\u4f5c\uff0c\u5148 FTP \u767b\u5f55\u5230\u8fd9\u4e2a\u670d\u52a1\u4e2d\u5220\u9664\u6587\u4ef6\uff0c\u7136\u540e\u5173\u95ed\u955c\u50cf\u529f\u80fd\u540e\u5168\u7f51\u5237\u65b0\u3002</p> <p>** \u6587\u4ef6\u4e0a\u4f20\u6210\u529f\u540e\uff0c\u4e3a\u4ec0\u4e48\u8bbf\u95ee\u8fd4\u56de 400 \u72b6\u6001\u7801\uff0c\u63d0\u793a\u7f51\u7ad9\u672a\u5907\u6848\uff1f **</p> <p>\u8bf7\u786e\u8ba4\u57df\u540d\u662f\u5426\u89e3\u6790\u5230\u6211\u4eec\u63d0\u4f9b\u7684\u89e3\u6790\u5730\u5740</p> <p>** \u5982\u4f55\u901a\u8fc7 curl \u4e0a\u4f20\u6587\u4ef6\uff1f**</p> <p>curl -T /local_img.jpg http://v0.api.upyun.com/bucket/img.jpg -u operator:operator_pwd -v</p> <p>/local_img.jpg \u672c\u5730\u4e0a\u4f20\u6587\u4ef6\u7684\u8def\u5f84\u548c\u6587\u4ef6\u540d /bucket \u670d\u52a1\u540d operator:operator_pwd \u64cd\u4f5c\u5458\uff1a\u64cd\u4f5c\u5458\u5bc6\u7801</p> <p>** \u6587\u4ef6\u4e0a\u4f20\u6210\u529f\u540e\uff0c\u5982\u4f55\u901a\u8fc7\u6d4f\u89c8\u5668\u53bb\u67e5\u770b\u6587\u4ef6\uff1f **</p> <p>\u53ef\u4ee5\u76f4\u63a5\u901a\u8fc7\u5916\u94fe\u53bb\u8bbf\u95ee\u4e0b\u8f7d http://&lt;\u670d\u52a1\u540d&gt;.b0.upaiyun.com/&lt;\u6587\u4ef6\u8def\u5f84&gt;/&lt;\u6587\u4ef6\u540d&gt;</p> <p>** \u5982\u4f55\u53bb\u76f4\u63a5\u4e0b\u8f7d\u4e00\u4e2a\u5728\u9875\u9762\u663e\u793a\u7684\u6587\u4ef6 **</p> <p>\u5728 URL \u540e\u9762\u6dfb\u52a0 ?_upd=true \u53c2\u6570\u5b9e\u73b0</p> <p>** \u6587\u4ef6\u4e0a\u4f20\u6210\u529f\u540e\uff0c\u5982\u4f55\u786e\u8ba4\u6587\u4ef6\u662f\u5426\u66f4\u65b0\uff1f**</p> <p>\u786e\u8ba4\u6587\u4ef6\u54cd\u5e94\u5934\u4e2d\u7684 Last-Modified \u7684\u65f6\u95f4\u662f\u5426\u662f\u60a8\u66f4\u65b0\u6587\u4ef6\u7684\u65f6\u95f4\u3002</p> <p>** \u8bbf\u95ee 405 Not Allowed **</p> <p>\u5916\u94fe\u6ca1\u6709\u5f00\u542f</p> <p>** \u64cd\u4f5c\u5458\u90fd\u6709\u54ea\u4e9b\u6743\u9650\uff1f\u662f\u5426\u53ef\u4ee5\u767b\u9646\u8d26\u53f7\uff1f**</p> <p>\u64cd\u4f5c\u5458\u662f\u6ca1\u6709\u529e\u6cd5\u767b\u9646\u8d26\u53f7\u7684\uff0c\u64cd\u4f5c\u5458\u53ea\u662f\u5bf9\u6587\u4ef6\u8fdb\u884c\u64cd\u4f5c\uff0c\u4e0a\u4f20\u3001\u5220\u9664\u7b49</p> <p>** \u60f3\u5168\u7f51\u63a5\u5165\uff0c\u5982\u4f55\u5728\u63a5\u5165\u7684\u65f6\u5019\u51cf\u5c11\u670d\u52a1\u5668\u7684\u538b\u529b\uff1f **</p> <p>\u53ef\u4ee5\u5728\u63a5\u5165\u4e4b\u524d\uff0c\u5c06\u4e00\u4e9b\u9759\u6001\u6587\u4ef6\u8fdb\u884c\u9884\u70ed\uff0c\u53ef\u4ee5\u51cf\u5c11\u6587\u4ef6\u7684\u56de\u6e90\u538b\u529b\uff0c\u63d0\u9ad8\u7f13\u5b58\u547d\u4e2d\u7387\u3002</p> <p>** \u56de\u8c03\u600e\u4e48\u7528 **   </p> <p>\u7b54:  \u56de\u8c03\u7684\u5730\u5740\u5fc5\u987b\u662f\u516c\u7f51\u5730\u5740\uff0c\u6211\u4eec\u53d1\u9001\u56de\u8c03\u4f60\u53ef\u4ee5\u53c2\u8003\u4e0b\u9762\u7684 php \u4ee3\u7801\u63a5\u6536</p> <pre><code>&lt;?php\n$myfile = fopen(\"res.txt\", \"w\");\n$notify = file_get_contents(\"php://input\");\nfwrite($myfile, $notify);\nfclose($myfile);\n</code></pre> <p>\u4e0a\u9762\u7684\u4ee3\u7801\u662f\u628a\u56de\u8c03\u4fe1\u606f\u5199\u5165\u5230\u6587\u4ef6\uff0c\u7136\u540e\u67e5\u770b\u8fd9\u4e2a\u6587\u4ef6\u5c31\u80fd\u770b\u5230\u56de\u8c03\u4fe1\u606f\u4e86\u3002</p>"},{"location":"faq/#faq_2","title":"\u5e10\u53f7 FAQ","text":"<p>** \u5e10\u53f7\u6ce8\u518c\u65f6\u63d0\u4ea4\u7533\u8bf7\u4e4b\u540e\u8df3\u51fa\u624b\u673a\u6216\u90ae\u7bb1\u5df2\u5b58\u5728\uff1f**    </p> <p>\u8868\u793a\u60a8\u4e4b\u524d\u5df2\u7ecf\u7528\u8be5\u624b\u673a\u6216\u90ae\u7bb1\u6ce8\u518c\u767b\u8bb0\u8fc7\u5e10\u53f7\uff0c\u82e5\u60a8\u4e0d\u8bb0\u5f97\u5e10\u53f7\uff0c\u53ef\u4ee5\u8054\u7cfb\u552e\u540e <code>QQ200576786</code> \u5e2e\u60a8\u67e5\u770b\u3002</p> <p>** \u6211\u5fd8\u8bb0\u5bc6\u7801\u4e86\u600e\u4e48\u529e\uff1f**   </p> <p>\u624b\u673a\u6216\u90ae\u7bb1\u5df2\u7ecf\u9a8c\u8bc1\u8fc7\u7684\uff0c\u76f4\u63a5\u5728\u767b\u5f55\u9875\u9762\u70b9\u51fb\u5fd8\u8bb0\u5bc6\u7801\uff0c\u5373\u53ef\u901a\u8fc7\u624b\u673a\u77ed\u4fe1\uff0c\u8bed\u97f3\u7535\u8bdd\u6216\u8005\u90ae\u7bb1\u91cd\u7f6e\u4e00\u4e2a\u65b0\u7684\u5bc6\u7801\uff0c\u7136\u540e\u767b\u5f55\u5373\u53ef\uff1b\u82e5\u90ae\u7bb1\u672a\u9a8c\u8bc1\uff0c\u53ef\u4ee5\u7528\u6ce8\u518c\u90ae\u7bb1\u53d1\u9001\u7528\u6237\u540d\u548c\u9a8c\u8bc1\u90ae\u4ef6\u5230 <code>support@upyun.com</code> \u4eba\u5de5\u9a8c\u8bc1\u90ae\u7bb1\uff0c\u82e5\u624b\u673a\u53f7\u672a\u9a8c\u8bc1\uff0c\u53ef\u4ee5\u7528\u6ce8\u518c\u624b\u673a\u62e8\u6253 <code>0571-81020204</code> \u4eba\u5de5\u9a8c\u8bc1\u624b\u673a\u53f7\uff0c\u9a8c\u8bc1\u4e4b\u540e\u53ef\u901a\u8fc7\u90ae\u7bb1\u6216\u624b\u673a\u91cd\u7f6e\u5bc6\u7801\u3002</p> <p>** \u5e10\u53f7\u767b\u5f55\u8fdb\u53bb\u63d0\u793a\u5e10\u53f7\u88ab\u51bb\u7ed3\u6216\u8005\u7981\u7528\u4e86\u600e\u4e48\u529e\uff1f**  </p> <p>\u8bf7\u8054\u7cfb\u5ba2\u670d <code>QQ200576786</code> \u5e2e\u60a8\u5904\u7406\u3002</p> <p>** \u4f01\u4e1a\u5e10\u53f7\u548c\u4e2a\u4eba\u5e10\u53f7\u6709\u4f55\u533a\u522b\uff1f**   </p> <p>\u4e0d\u8bba\u60a8\u9009\u62e9\u4f01\u4e1a\u8fd8\u662f\u4e2a\u4eba\uff0c\u529f\u80fd\u53ca\u4ea7\u54c1\u7684\u4ef7\u683c\u90fd\u662f\u6ca1\u6709\u533a\u522b\u7684\u3002\u4e2a\u4eba\u8d26\u53f7\u53ef\u4ee5\u5347\u7ea7\u6210\u4f01\u4e1a\u8d26\u53f7\uff0c\u4f01\u4e1a\u8d26\u53f7\u65e0\u6cd5\u4fee\u6539\u6210\u4e2a\u4eba\u8d26\u53f7\uff1b\u4f01\u4e1a\u5e10\u53f7\u7684\u8ba4\u8bc1\u9700\u63d0\u4ea4\u8425\u4e1a\u6267\u7167\u7167\u7247\u6216\u626b\u63cf\u4ef6\u8ba4\u8bc1\uff0c\u4e2a\u4eba\u5e10\u53f7\u7684\u8ba4\u8bc1\u662f\u63d0\u4ea4\u672c\u4eba\u624b\u6301\u8eab\u4efd\u8bc1\u6b63\u53cd\u9762\u7167\u7247\uff0c\u6216\u8005\u63d0\u4ea4\u829d\u9ebb\u4fe1\u7528\u8ba4\u8bc1\uff08\u5206\u6570\u4e0d\u4f4e\u4e8e750\uff09\uff0c\u9009\u62e9\u81ea\u5df1\u5bf9\u5e94\u7533\u8bf7\u7684\u5e10\u53f7\u7c7b\u578b\u586b\u5199\u6b63\u786e\u4fe1\u606f\u63d0\u4ea4\u7533\u8bf7\u5373\u53ef\u3002</p> <p>** \u5b9e\u540d\u8ba4\u8bc1\u4e3a\u4ec0\u4e48\u6ca1\u6709\u901a\u8fc7\uff1f **  </p> <p>\u53ef\u4ee5\u5728\u60a8\u5e10\u53f7\u7ba1\u7406\u7684\u5b9e\u540d\u8ba4\u8bc1\u9875\u9762\u6216\u8005\u540e\u53f0\u7684\u7ad9\u5185\u4fe1\u67e5\u770b\u5177\u4f53\u539f\u56e0\u3002</p> <p>** \u6211\u521a\u7ed9\u5e10\u53f7\u5145\u503c\u4e86,\u600e\u4e48\u5f00\u53d1\u7968\u5462\uff1f**  </p> <p>\u8054\u7cfb\u60a8\u7684\u9500\u552e\u7ecf\u7406\u5e2e\u60a8\u5f00\u53d1\u7968\uff0c\u82e5\u60a8\u4e0d\u77e5\u9053\u9500\u552e\u7ecf\u7406\u7684\u8054\u7cfb\u65b9\u5f0f\uff0c\u53ef\u4ee5\u8054\u7cfb\u5ba2\u670d <code>QQ200576786</code>\uff0c\u63d0\u4f9b\u60a8\u7684\u5e10\u53f7\u548c\u8054\u7cfb\u65b9\u5f0f\uff0c\u5ba2\u670d\u4f1a\u8054\u7cfb\u60a8\u7684\u9500\u552e\u7ecf\u7406\u7ed9\u60a8\u5f00\u53d1\u7968\u7684\u3002   </p> <p>** \u6ce8\u518c\u5e10\u53f7\u65f6\uff0c\u624b\u673a\u6536\u4e0d\u5230\u9a8c\u8bc1\u7801\u3002**</p> <p>\u60a8\u5148\u67e5\u770b\u4e0b\u624b\u673a\u662f\u5426\u51fa\u4e8e\u6b63\u5e38\u670d\u52a1\u72b6\u6001\uff0c\u6ca1\u6709\u6b20\u8d39\uff0c\u4e14\u901a\u4fe1\u6b63\u5e38\u3002\u5982\u679c\u624b\u673a\u662f\u5904\u4e8e\u6b63\u5e38\u670d\u52a1\u4e2d\uff0c\u4e14\u6536\u53d1\u5176\u4ed6\u77ed\u4fe1\u90fd\u6b63\u5e38\uff0c\u8bf7\u8054\u7cfb\u5ba2\u670d <code>QQ200576786</code> \u67e5\u770b\u5177\u4f53\u539f\u56e0\u3002   </p> <p>** \u6211\u63d0\u4ea4\u4e86\u5b9e\u540d\u8ba4\u8bc1\u600e\u4e48\u8fd8\u6ca1\u5ba1\u6838\uff1f ** </p> <p>\u60a8\u597d\uff0c\u5de5\u4f5c\u4eba\u5458\u4f1a\u5728\u4e00\u4e2a\u5de5\u4f5c\u65e5\u5185\u5ba1\u6838\u5b8c\u6210\uff0c\u82e5\u8d85\u8fc7\u4e00\u4e2a\u5de5\u4f5c\u65e5\uff0c\u8bf7\u8054\u7cfb\u5ba2\u670d <code>QQ200576786</code> \u5e2e\u60a8\u5904\u7406\u3002  </p>"},{"location":"faq/#_3","title":"\u89c6\u9891\u6559\u7a0b","text":""},{"location":"faq/#cdn","title":"CDN \u670d\u52a1","text":"\u89c6\u9891\u7c7b\u522b \u89c6\u9891\u540d\u79f0 \u65f6\u957f \u66f4\u65b0\u65f6\u95f4 CDN \u521b\u5efa\u548c\u4f7f\u7528CDN\u5b58\u50a8\u670d\u52a1 14\u520641\u79d2 2017/08/10 CDN \u521b\u5efa\u52a8\u6001CDN\u548c\u8bbe\u7f6e\u7f13\u5b58 6\u520629\u79d2 2017/08/10 CDN \u521b\u5efa\u548c\u4f7f\u7528\u7f29\u7565\u56fe 14\u520650\u79d2 2017/08/29 CDN \u8bbe\u7f6eSSL\u8bc1\u4e66 16\u520645\u79d2 2017/08/10 CDN \u7f13\u5b58\u5237\u65b0\u529f\u80fd 7\u520610\u79d2 2017/08/30 \u63d2\u4ef6 \u8bbe\u7f6e Discuz \u63d2\u4ef6 8\u520629\u79d2 2016/03/18 CDN \u8bbe\u7f6e\u9632\u76d7\u94fe 11\u520614\u79d2 2017/08/30 CDN \u878d\u5408\u4e91\u914d\u7f6e 6\u520657\u79d2 2017/08/10 SDK HTTP REST API\u7684\u4ecb\u7ecd\u548cJAVA SDK\u7684\u4f7f\u7528 10\u520623\u79d2 2016/03/19 SDK CURL \u64cd\u4f5c HTTP 7\u520615\u79d2 2016/03/19 SDK \u97f3\u89c6\u9891\u5904\u7406SDK 6\u520609\u79d2 2016/04/23 CDN \u4e03\u725b\u955c\u50cf\u56de\u6e90\u529f\u80fd\u4f7f\u7528 6\u520619\u79d2 2016/04/23 CDN CORS \u8de8\u57df\u529f\u80fd\u4f7f\u7528 3\u520635\u79d2 2017/08/30 SDK Python SDK\u7684\u4f7f\u7528  17\u520625\u79d2 2016/06/30 FTP \u53c8\u62cd\u4e91\u8d44\u6e90\u7ba1\u7406\u5668\u7684\u4f7f\u7528 2\u520638\u79d2 2016/03/23 CDN \u963f\u91cc\u4e91\u4e91\u76fe\u8bbe\u7f6e 1\u520639\u79d2 2017/04/12 \u65e5\u5fd7 \u65e5\u5fd7\u5206\u6790\u548c\u65e5\u5fd7\u4e0b\u8f7d 7\u52062 2017/04/12 CDN \u53c8\u62cd\u4e91\u7684\u7edf\u8ba1\u529f\u80fd 3\u520635\u79d2 2016/09/12 CDN \u53c8\u62cd\u4e91\u76d1\u63a7\u7cfb\u7edf\u7b80\u4ecb 3\u520605\u79d2 2016/09/12 CDN  Rewrite \u89c4\u5219\u7684\u4f7f\u7528 4\u520603\u79d2 2016/09/12 \u8d26\u53f7 \u5b9e\u540d\u8ba4\u8bc1 2\u5206 2016/09/12 CDN  HTTP2 \u7b80\u4ecb 2\u520649\u79d2 2017/06/08 \u5de5\u5177  wireshark \u7684\u4f7f\u7528 5\u520658\u79d2 2017/04/21 \u5de5\u5177  tcpudmp \u7684\u4f7f\u7528 8\u520656\u79d2 2016/09/14 \u5de5\u5177  Linux \u4e0b upx \u7684\u4f7f\u7528 6\u520656\u79d2 2016/10/15 \u5de5\u5177  Windows \u4e0b upx \u7684\u4f7f\u7528 10\u520623\u79d2 2017/01/03 \u63d2\u4ef6 ueditor\u7684\u4f7f\u7528 7\u520655\u79d2 2016/10/15 CDN \u5206\u6bb5\u7f13\u5b58 8\u520639\u79d2 2017/04/12 SDK \u4e91\u5904\u7406 - \u89c6\u9891\u8f6c\u7801 9\u520614\u79d2 2017/01/03 SDK  \u4e91\u5904\u7406 - \u89c6\u9891\u6c34\u5370 11\u520637\u79d2 2017/05/18 SDK  \u4e91\u5904\u7406 - \u97f3\u9891\u8f6c\u7801 3\u520637\u79d2 2017/03/03 SDK  \u4e91\u5904\u7406 - \u538b\u7f29\u548c\u89e3\u538b\u7f29 3\u520644\u79d2 2017/05/18 CDN  rewrite \u89c4\u5219\u8be6\u89e3  38\u520637\u79d2 2017/05/11 \u63d2\u4ef6 wordpress \u63d2\u4ef6\u4f7f\u7528 1\u520654\u79d2 2017/05/22 CDN \u56fe\u7247\u9274\u9ec4 5\u5206 2017/05/19 CDN API\u4f7f\u7528 15\u520622\u79d2 2017/08/14 CDN \u5220\u9664\u670d\u52a1 3\u520639\u79d2 2017/08/29"},{"location":"faq/#_4","title":"\u76f4\u64ad\u670d\u52a1","text":"\u89c6\u9891\u7c7b\u522b \u89c6\u9891\u540d\u79f0 \u65f6\u957f \u66f4\u65b0\u65f6\u95f4 \u76f4\u64ad \u521b\u5efa\u548c\u4f7f\u7528\u53c8\u62cd\u4e91\u81ea\u4e3b\u6e90\u7ad9\u7684\u76f4\u64ad\u670d\u52a1 10\u5206 2016/08/03 \u76f4\u64ad \u521b\u5efa\u548c\u4f7f\u7528\u81ea\u4e3b\u6e90\u76f4\u64ad\u670d\u52a1 4\u520651\u79d2 2016/08/03 \u76f4\u64ad \u76f4\u64ad\u8f6c\u7801\u548c\u5f55\u5236 10\u520623\u79d2 2016/09/28 \u76f4\u64ad \u5b89\u5353\u62c9\u6d41\u64ad\u653e\u5668\u4f7f\u7528\u6307\u5357 3\u520632\u79d2 2016/09/29 \u76f4\u64ad \u76f4\u64ad\u9632\u76d7\u94fe\u7684\u4f7f\u7528 6\u520654\u79d2 2016/10/15 \u76f4\u64ad \u6d41\u7ba1\u63a7\u548c\u6d41\u56de\u8c03 9\u520637\u79d2 2017/04/14 \u76f4\u64ad \u76f4\u64ad\u622a\u56fe\u529f\u80fd 1\u520654\u79d2 2017/05/18"},{"location":"faq/#_5","title":"\u6545\u969c\u53cd\u9988","text":"\u89c6\u9891\u7c7b\u522b \u89c6\u9891\u540d\u79f0 \u65f6\u957f \u66f4\u65b0\u65f6\u95f4 \u5de5\u5177  PC \u7aef\u6545\u969c\u53cd\u9988\u89c6\u9891\u6559\u7a0b 10\u5206 2016/10/21 \u5de5\u5177  Android \u6545\u969c\u53cd\u9988\u89c6\u9891\u6559\u7a0b 4\u520651\u79d2 2016/10/21 \u5de5\u5177  iOS \u6545\u969c\u53cd\u9988\u89c6\u9891\u6559\u7a0b 4\u520651\u79d2 2017/01/01 \u5de5\u5177   DNS \u7684\u4fee\u6539  11\u520637\u79d2 2017/04/21"},{"location":"guide/","title":"Index","text":"<p>\u53c8\u62cd\u4e91\u63d0\u4f9b\u4e86\u4e30\u5bcc\u7684 API \u4ee5\u53ca\u76f8\u5173\u7684 SDK \u4f9b\u5f00\u53d1\u8005\u9009\u62e9\u548c\u4f7f\u7528\uff0c\u5728\u4f7f\u7528\u8fd9\u4e9b\u8d44\u6e90\u4e4b\u524d\uff0c\u6211\u4eec\u9700\u8981\u5148\u5bf9 \u53c8\u62cd\u4e91\u4ea7\u54c1\u505a\u4e00\u4e9b\u5fc5\u8981\u7684\u4e86\u89e3\uff0c\u4ece\u800c\u4f7f\u5f97\u5728\u5b9e\u9645\u64cd\u4f5c\u8fc7\u7a0b\u4e2d\u4e0d\u4f1a\u611f\u5230\u624b\u8db3\u65e0\u63aa\u3002</p>"},{"location":"guide/#_1","title":"\u57fa\u672c\u6982\u5ff5","text":""},{"location":"guide/#_2","title":"\u6ce8\u518c\u5e10\u53f7/\u64cd\u4f5c\u5458","text":"<p>\u300c\u6ce8\u518c\u5e10\u53f7\u300d\u53ca\u5176\u5bc6\u7801\u5c06\u4f5c\u4e3a \u53c8\u62cd\u4e91\u7528\u6237\u63a7\u5236\u9762\u677f\u7684\u767b\u5f55\u6240\u7528\uff0c\u60a8\u9700\u8981\u901a\u8fc7\u300c\u6ce8\u518c\u5e10\u53f7\u300d\u5728 \u53c8\u62cd\u4e91\u7528\u6237\u63a7\u5236\u9762\u677f \u8fdb\u884c\u670d\u52a1\u7684\u65b0\u5efa\uff0c\u64cd\u4f5c\u5458\u6388\u6743\uff0c\u8ba2\u5355\u8d2d\u4e70\u7b49\u64cd\u4f5c\u3002</p> <p>\u300c\u64cd\u4f5c\u5458\u300d\uff0c\u987e\u540d\u601d\u4e49\uff0c\u662f\u7528\u6765\u64cd\u4f5c\u60a8\u7684\u670d\u52a1\u7684\uff0c\u901a\u8fc7\u4f7f\u7528\u6ce8\u518c\u5e10\u53f7\u767b\u5f55 \u53c8\u62cd\u4e91\u7528\u6237\u63a7\u5236\u9762\u677f \u540e\uff0c\u60a8\u53ef\u4ee5\u521b\u5efa\u591a\u4e2a\u64cd\u4f5c\u5458\uff0c\u6ee1\u8db3\u4e0d\u540c\u7684\u7ba1\u7406\u9700\u6c42\u3002</p> <p>\u300c\u64cd\u4f5c\u5458\u300d\u9700\u8981\u88ab\u6388\u6743\u81f3\u67d0\u4e2a\u670d\u52a1\uff0c\u624d\u80fd\u5bf9\u8be5\u670d\u52a1\u8fdb\u884c\u4e00\u4e9b\u64cd\u4f5c\uff08\u5982\uff0c\u4e0a\u4f20\uff0c\u4e0b\u8f7d\u7b49\uff09\u3002\u5e2e\u52a9\u4e2d\u5fc3\u6240\u6d89\u53ca\u5230\u7684\u6587\u6863\u4e2d\uff0c\u82e5\u65e0\u7279\u6b8a\u8bf4\u660e\uff0c\u6240\u6307\u7684\u300c\u64cd\u4f5c\u5458\u300d\u3001\u300c\u64cd\u4f5c\u5458\u540d\u300d\u5747\u4e3a\u5df2\u6388\u6743\u81f3\u76f8\u5e94\u670d\u52a1\u7684\u64cd\u4f5c\u5458\u3002</p> <p>\u300c\u64cd\u4f5c\u5458\u300d\u53ef\u4ee5\u6839\u636e\u4e0d\u540c\u7684\u9700\u6c42\u8d4b\u4e88\u4e0d\u540c\u7684\u6743\u9650\uff0c\u5305\u62ec\u53ef\u8bfb\u53d6\u3001\u53ef\u5199\u5165\u3001\u53ef\u5220\u9664, \u4f60\u53ef\u4ee5\u5728\u7ba1\u7406\u540e\u53f0\u53f3\u4e0a\u89d2\u7684\u5e10\u53f7\u4e0b\u62c9\u83dc\u5355\u4e2d\u9009\u62e9<code>\u8d26\u6237\u7ba1\u7406\uff0d&gt;\u64cd\u4f5c\u5458\u7ba1\u7406-&gt;\u7f16\u8f91</code>\u8fdb\u884c\u8bbe\u7f6e   </p> <p> </p>"},{"location":"guide/#_3","title":"\u670d\u52a1\u540d","text":"<p>\u5728\u60a8\u4f7f\u7528\u6ce8\u518c\u5e10\u53f7\u767b\u5f55 \u53c8\u62cd\u4e91\u7528\u6237\u63a7\u5236\u9762\u677f \u540e\uff0c\u60a8\u53ef\u4ee5\u521b\u5efa\u4e0d\u540c\u7684\u670d\u52a1\u4ee5\u65b9\u4fbf\u7ba1\u7406\u4f60\u7684\u6587\u4ef6\u8d44\u6e90\uff0c\u4f8b\u5982\u5b58\u50a8\u7c7b\u578b\u3001\u81ea\u4e3b\u6e90\u7ad9\u670d\u52a1\u7b49\u3002</p> <p>\u63d0\u793a\uff1a \u6bcf\u4e2a\u670d\u52a1\u90fd\u53ef\u4ee5\u6388\u6743\u591a\u4e2a\u64cd\u4f5c\u5458\uff0c\u76f8\u5e94\u7684\uff0c\u6bcf\u4e2a\u64cd\u4f5c\u5458\u4e5f\u53ef\u4ee5\u88ab\u6388\u6743\u81f3\u591a\u4e2a\u670d\u52a1</p> <p>\u53c8\u62cd\u4e91\u76ee\u524d\u6709\u5982\u4e0b\u51e0\u79cd\u670d\u52a1\u7c7b\u578b\uff1a</p> <ul> <li>\u5b58\u50a8\u7c7b\u670d\u52a1\uff1a\u53ef\u4ee5\u4e0a\u4f20\u4efb\u610f\u8d44\u6e90\uff0c\u8d44\u6e90\u5c06\u88ab\u4fdd\u5b58\u81f3 \u53c8\u62cd\u4e91\u7684\u670d\u52a1\u5668\uff0c\u4e14\u6587\u4ef6\u7684\u5916\u94fe\u5c06\u5177\u6709 CDN \u7f51\u7edc\u652f\u6301\u3002\u540c\u65f6\u8fd8\u63d0\u4f9b\u300c\u81ea\u5b9a\u4e49\u7248\u672c\u300d\u529f\u80fd\u3002</li> <li>\u81ea\u4e3b\u6e90\u7ad9\u670d\u52a1\uff1a\u8d44\u6e90\u6587\u4ef6\u5168\u90fd\u5b58\u653e\u5728\u6e90\u7ad9\uff0c\u65e0\u9700\u91cd\u65b0\u4e0a\u4f20\u81f3 \u53c8\u62cd\u4e91\u670d\u52a1\u5668\uff0c\u9002\u5408\u6e90\u7ad9\u5185\u5bb9\u52a8\u9759\u6df7\u7528\u7684\u573a\u666f\uff0c\u53ef\u5b9e\u73b0\u5168\u7ad9\u52a0\u901f\u3002</li> </ul> <p>\u66f4\u591a\u670d\u52a1\u7c7b\u578b\u7684\u533a\u522b\uff0c\u8bf7\u53c2\u9605 \u670d\u52a1\u5206\u51e0\u79cd\u7c7b\u578b\uff0c\u6709\u54ea\u4e9b\u533a\u522b\uff1f</p>"},{"location":"guide/#_4","title":"\u8bbf\u95ee\u57df\u540d","text":"<p>\u300c\u670d\u52a1\u300d\u521b\u5efa\u5b8c\u6210\u540e\uff0c\u7cfb\u7edf\u4f1a\u81ea\u52a8\u7ed1\u5b9a\u4e00\u4e2a\u9ed8\u8ba4\u57df\u540d<code>&lt;bucket&gt;.b0.upaiyun.com</code>\u3002\u6bd4\u5982\uff0c\u5f53\u4f60\u521b\u5efa\u4e86\u4e00\u4e2a\u540d\u53eb<code>demo</code>\u7684\u670d\u52a1\u65f6\uff0c\u90a3\u7cfb\u7edf\u4f1a\u81ea\u52a8\u7ed1\u5b9a\u9ed8\u8ba4\u57df\u540d<code>demo.b0.upaiyun.com</code>\u3002\u56e0\u6b64\uff0c\u5982\u679c\u8be5\u670d\u52a1\u6839\u76ee\u5f55\u6709\u4e00\u4e2a\u540d\u4e3a <code>file.txt</code> \u7684\u6587\u4ef6\uff0c\u90a3\u4e48\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528 <code>http://demo.b0.upaiyun.com/file.txt</code> \u6765\u8bbf\u95ee\u3002</p> <p>\u82e5\u4f60\u62e5\u6709\u5df2\u5907\u6848\u7684\u57df\u540d\uff0c\u5219\u53ef\u4ee5\u7ed1\u5b9a\u81ea\u5df1\u7684\u72ec\u7acb\u57df\u540d\u3002\u7ed1\u5b9a\u72ec\u7acb\u57df\u540d\u540e\uff0c\u4f60\u53ef\u4ee5\u540c\u65f6\u4f7f\u7528\u9ed8\u8ba4\u57df\u540d\uff0c\u4ee5\u53ca\u4f60\u7ed1\u5b9a\u7684\u57df\u540d\u6765\u8bbf\u95ee\u4f60\u7684\u6587\u4ef6\u3002\u4f46\u662f\uff0c\u6211\u4eec\u5f3a\u70c8\u5efa\u8bae\u60a8\u4f7f\u7528\u81ea\u5b9a\u4e49\u7684\u57df\u540d\u53bb\u8bbf\u95ee\u6587\u4ef6\u3002</p> <p>\u63d0\u793a\uff1a \u4e3a\u4e86\u907f\u514d\u56fe\u7247\u88ab\u76d7\u94fe\uff0c\u53ef\u4ee5\u6839\u636e\u5b9e\u9645\u9700\u8981\uff0c\u8bbe\u7f6e\u9632\u76d7\u94fe\u63aa\u65bd</p>"},{"location":"guide/#_5","title":"\u9632\u76d7\u94fe","text":"<p>\u9632\u76d7\u94fe\u7684\u76f8\u5173\u8bbe\u7f6e\u8bf7\u53c2\u8003\u8bbf\u95ee\u63a7\u5236</p>"},{"location":"guide/#_6","title":"\u7f13\u5b58\u5237\u65b0","text":"<p>\u7f13\u5b58\u5237\u65b0\uff0c\u60a8\u53ef\u53c2\u8003\u7f13\u5b58\u5237\u65b0</p>"},{"location":"guide/#_7","title":"\u56fe\u7247\u5904\u7406","text":""},{"location":"guide/#_8","title":"\u7f29\u7565\u56fe\u7248\u672c\u4f5c\u56fe","text":"<p>\u7f29\u7565\u56fe\u7248\u672c\u63d0\u4f9b\u56fe\u7247 \u300c\u7f29\u7565\u56fe\u300d \u3001 \u300c\u6c34\u5370\u300d \u3001 \u300c\u65cb\u8f6c\u300d \u3001 \u300c\u683c\u5f0f\u8f6c\u6362\u300d\u7b49\u529f\u80fd\uff0c\u5b83\u5728 \u300c\u7ba1\u7406\u540e\u53f0\u300d &gt; \u300c\u670d\u52a1\u300d &gt; \u300c\u529f\u80fd\u914d\u7f6e\u300d &gt; \u300c\u4e91\u5904\u7406\u300d &gt; \u300c\u81ea\u5b9a\u4e49\u7248\u672c\u300d \u4e2d\u8bbe\u7f6e\u3002</p> <p>\u5b83\u7684\u8c03\u7528\u683c\u5f0f\u4e3a\uff1a\u300c\u56fe\u7247 URL + \u95f4\u9694\u6807\u8bc6\u7b26 + \u7f29\u7565\u56fe\u7248\u672c\u540d\u79f0\u300d\u3002</p> <p>\u4f8b\u5982\uff1a</p> <p>\u7f29\u7565\u56fe\u7248\u672c\u540d\u79f0\u4e3a\uff1a <code>width200</code>\uff0c \u95f4\u9694\u6807\u8bc6\u7b26\u4e3a\uff1a<code>!</code>\uff0c \u89c4\u5219\u4e3a <code>\u9650\u5b9a\u5bbd\u5ea6\uff0c\u9ad8\u5ea6\u81ea\u9002\u5e94</code>\u3001\u5bbd\u5ea6\u503c\u662f <code>200</code></p> <p>\u90a3\u4e48\uff0c\u8c03\u7528\u8fd9\u4e2a\u7248\u672c\u7684\u683c\u5f0f\u4e3a\uff1a</p> <pre><code>http://demo.b0.upaiyun.com/img/demo.jpg!width200\n</code></pre> <p>\u8fd9\u662f\u4e00\u4e2a\u62e5\u6709\u5bbd\u5ea6\u4e3a 200px \u7684\u56fe\u7247\u3002</p>"},{"location":"guide/#url","title":"URL \u4f5c\u56fe","text":"<p>URL \u4f5c\u56fe\u662f\u628a\u56fe\u7247\u5904\u7406\u53c2\u6570\u76f4\u63a5\u8ffd\u52a0\u5728\u56fe\u7247 URL \u540e\u7684\u4e00\u79cd\u4f5c\u56fe\u65b9\u5f0f\u3002</p> <p>\u5b83\u7684\u8c03\u7528\u683c\u5f0f\u4e3a\uff1a\u300c\u56fe\u7247 URL + \u95f4\u9694\u6807\u8bc6\u7b26 + \u5904\u7406\u53c2\u6570\u300d\u3002</p> <p>\u4f8b\u5982\uff1a</p> <p>\u5904\u7406\u53c2\u6570\u4e3a\uff1a <code>/rotate/90</code>\uff0c\u95f4\u9694\u6807\u8bc6\u7b26\u4e3a\uff1a<code>_</code></p> <p>\u90a3\u4e48\uff0c\u8bbf\u95ee\u7684 URL \u4e3a\uff1a</p> <pre><code>http://upyun-assets.b0.upaiyun.com/docs/guide/sample.jpg_/rotate/90 //\u56fe\u7247\u65cb\u8f6c 90 \u5ea6\n</code></pre> <p>\u6548\u679c\u5982\u56fe</p> <p></p> <p>\u6240\u6709\u56fe\u7247\u5904\u7406\u53c2\u6570\u7684\u8bf4\u660e\uff0c\u8bf7\u53c2\u8003 \u4f5c\u56fe\u53c2\u6570\u3002</p>"},{"location":"guide/#_9","title":"\u4e0a\u4f20\u4f5c\u56fe","text":"<p>\u6b64\u5916\uff0c\u60a8\u4e5f\u53ef\u4ee5\u5728\u4e0a\u4f20\u56fe\u7247\u7684\u540c\u65f6\u4f7f\u7528\u540c\u6b65\u56fe\u7247\u5904\u7406\u670d\u52a1\uff0c\u5728\u56fe\u7247\u4e0a\u4f20\u7684\u8bf7\u6c42\u4e2d\u9644\u52a0\u4e0a\u56fe\u7247\u5904\u7406\u53c2\u6570\uff0c\u8fd9\u6837\uff0c\u56fe\u7247\u5728\u4e0a\u4f20\u5b8c\u6210\u540e\u4f1a\u81ea\u52a8\u8fdb\u884c\u5904\u7406\uff0c\u5e76\u4fdd\u5b58\u5904\u7406\u540e\u7684\u56fe\u7247\u3002\u5982\uff1a</p> <p>\u4e0a\u4f20\u7684\u56fe\u7247\uff0c\u5927\u5c0f\u4e3a\uff1a400x320</p> <p></p> <p>\u4f5c\u56fe\u53c2\u6570\u4e3a:</p> <pre><code>'x-gmkerl-thumb: /fw/200/unsharp/true'  //\u9650\u5b9a\u5bbd\u5ea6\uff0c\u9ad8\u5ea6\u81ea\u9002\u5e94;\u5bbd\u5ea6\u503c\u662f200\uff1b\u9510\u5316\uff08\u9ad8\u4eae\uff09\u56fe\u7247\n</code></pre> <p>\u6700\u7ec8\u4fdd\u5b58\u7684\u56fe\u7247\uff0c\u5927\u5c0f\u4e3a\uff1a200x160</p> <p></p> <p>\u66f4\u591a\u63cf\u8ff0\u8bf7\u89c1 \u4e0a\u4f20\u540c\u6b65\u4f5c\u56fe\u3002\u5982\u679c\u60a8\u9700\u8981\u4fdd\u5b58\u4e0a\u4f20\u7684\u539f\u56fe\u6216\u8005\u751f\u6210\u591a\u5f20\u56fe\u7247\uff0c\u53ef\u4ee5\u53c2\u8003 \u4e0a\u4f20\u5f02\u6b65\u4f5c\u56fe\u3002</p>"},{"location":"guide/#_10","title":"\u5f02\u6b65\u97f3\u89c6\u9891\u5904\u7406","text":"<p>\u5f02\u6b65\u97f3\u89c6\u9891\u5904\u7406\u662f\u5bf9\u5df2\u7ecf\u4e0a\u4f20\u5230\u4e91\u5b58\u50a8\u4e2d\u7684\u97f3\u89c6\u9891\u6587\u4ef6\u8fdb\u884c\u89c6\u9891\u8f6c\u7801\u3001\u97f3\u9891\u8f6c\u7801\u3001HLS \u5207\u7247\u3001\u89c6\u9891\u622a\u56fe\u3001\u89c6\u9891\u6c34\u5370\u3001\u5143\u4fe1\u606f\u83b7\u53d6\u7b49\u5904\u7406\uff0c\u5904\u7406\u5b8c\u6210\u540e\uff0c\u4ee5\u56de\u8c03\u7684\u65b9\u5f0f\u901a\u77e5\u7528\u6237\u5904\u7406\u7ed3\u679c\u3002 \u5177\u4f53\u8bf7\u53c2\u8003 \u5f02\u6b65\u97f3\u89c6\u9891\u5904\u7406\u3002</p> <p>\u5982\u679c\u9700\u8981\u5728\u97f3\u89c6\u9891\u6587\u4ef6\u4e0a\u4f20\u7684\u540c\u65f6\u4f7f\u7528\u5f02\u6b65\u97f3\u89c6\u9891\u5904\u7406\u670d\u52a1\uff0c\u53ef\u4ee5\u53c2\u8003 \u4e0a\u4f20\u9884\u5904\u7406\u3002</p>"},{"location":"guide/#_11","title":"\u4e91\u5b89\u5168","text":"<p>\u4e91\u5b89\u5168\u53c2\u8003\u4e91\u5b89\u5168\u6587\u6863</p>"},{"location":"guide/#_12","title":"\u670d\u52a1\u65b9\u5f0f","text":""},{"location":"guide/#ftpftps","title":"FTP/FTPS","text":"<p>\u53c8\u62cd\u4e91\u63d0\u4f9b\u4e86 FTP/FTPS \u7684\u65b9\u5f0f\uff0c\u4ee5\u65b9\u4fbf\u7528\u6237\u901a\u8fc7\u56fe\u5f62\u5316\u754c\u9762\u7ba1\u7406\u5b58\u50a8\u8d44\u6e90\u3002</p> <p>\u4f7f\u7528\u65b9\u6cd5\u5982\u4e0b\uff1a</p> <p>\u5730\u5740\uff08\u4e3b\u673a\uff09\uff1a     * \u667a\u80fd\u9009\u8def\uff1av0.ftp.upyun.com     * \u7535\u4fe1\u7ebf\u8def\uff1av1.ftp.upyun.com     * \u8054\u901a\u7ebf\u8def\uff1av2.ftp.upyun.com     * \u79fb\u52a8\u7ebf\u8def\uff1av3.ftp.upyun.com \u52a0\u5bc6\uff1a\u9009\u62e9 <code>\u4e0d\u52a0\u5bc6</code> \u4f7f\u7528 FTP\uff0c\u9009\u62e9 <code>\u663e\u5f0f\u7684 FTP over TLS</code> \u6216 <code>TLS/SSL \u663e\u5f0f\u52a0\u5bc6</code> \u4f7f\u7528 FTPS \u7528\u6237\u540d\uff1a<code>\u64cd\u4f5c\u5458\u540d/\u670d\u52a1\u540d</code>\uff0c\u5982 <code>operator/mybucket</code> \u5bc6\u7801\uff1a\u64cd\u4f5c\u5458\u7684\u5bc6\u7801 \u7aef\u53e3\uff1a21</p> <p>\u6ce8\uff1a    </p> <ul> <li>\u7f16\u7801\u65b9\u5f0f\uff08\u5b57\u7b26\u96c6\uff09\uff1a\u7edf\u4e00\u4f7f\u7528 UTF-8 \u3002</li> <li>\u4f7f\u7528 <code>\u663e\u5f0f\u7684 FTP over TLS</code> \u65f6\uff0c\u5ba2\u6237\u7aef\u4f1a\u63d0\u793a\u8bc1\u4e66\u9700\u8981\u4fe1\u4efb\uff0c\u9009\u62e9 <code>\u662f</code> \u6216 <code>\u786e\u5b9a</code> \u5373\u53ef\u3002</li> <li>\u4f7f\u7528 <code>\u663e\u5f0f\u7684 FTP over TLS</code> \u65f6\uff0c\u4f1a\u5bf9\u547d\u4ee4\uff08\u7528\u6237\u540d\u3001\u5bc6\u7801\u3001\u4e0a\u4f20\u3001\u4e0b\u8f7d\u7b49\u6307\u4ee4\uff09\u8fdb\u884c\u52a0\u5bc6\u3002</li> <li>\u5f53\u4e0a\u4f20\u8f83\u5927\u7684\u6587\u4ef6\u65f6\uff0c\u51fa\u73b0\u8fdb\u5ea6\u662f 100% \u786e\u6ca1\u6709\u663e\u793a\u4e0a\u4f20\u5b8c\u6210\u7684\u60c5\u51b5\uff0c\u8bf7\u60a8\u8010\u5fc3\u7b49\u5f85 15 \u79d2\u5de6\u53f3\uff0c\u6b64\u65f6\u7cfb\u7edf\u6b63\u5728\u628a\u63a5\u6536\u5230\u7684\u6587\u4ef6\u5199\u5165\u60a8\u7684\u5b58\u50a8\u670d\u52a1\u4e2d\uff0c\u6587\u4ef6\u5199\u5165\u5b8c\u6bd5\u540e\uff0c\u624d\u4f1a\u663e\u793a\u4e0a\u4f20\u5b8c\u6210\u3002</li> </ul>"},{"location":"guide/#api","title":"API","text":"<p>\u9664\u4e86\u4f7f\u7528\u7b80\u5355\u7684 FTP \u7684\u65b9\u5f0f\u4e4b\u5916\uff0c\u53c8\u62cd\u4e91\u8fd8\u63d0\u4f9b\u4e86\u591a\u79cd\u4e0d\u540c\u7684 API\uff0c\u65b9\u4fbf\u5728\u4e0d\u540c\u7684\u7f16\u7a0b\u73af\u5883\u4e0b\u4f7f\u7528\u53c8\u62cd\u4e91\u670d\u52a1\uff0c\u5176\u4e2d\u5305\u62ec\uff1a</p> <ul> <li>HTTP REST API\uff1a\u8be5\u63a5\u53e3\u662f\u57fa\u4e8e\u6807\u51c6 HTTP \u534f\u8bae\u7684 API \u63a5\u53e3\uff0c\u5177\u5907\u4e86\u6587\u4ef6\u8d44\u6e90\u7684\u589e\u5220\u6539\u67e5\u529f\u80fd\uff0c\u5efa\u8bae\u5728\u670d\u52a1\u7aef\u4f7f\u7528</li> <li>HTTP FORM API\uff1a\u8868\u5355 API \u63a5\u53e3\u66f4\u9002\u7528\u4e8e\u79fb\u52a8 App \u5f00\u53d1\uff0c\u4e30\u5bcc\u7684\u53c2\u6570\u63a5\u53e3\u548c\u56de\u8c03\u673a\u5236\u80fd\u591f\u76f4\u63a5\u5c06\u7ec8\u7aef\u7528\u6237\u7684\u6587\u4ef6\u4e0a\u4f20\u81f3 \u53c8\u62cd\u4e91\u670d\u52a1\u5668\uff0c\u800c\u4e0d\u9700\u8981\u7ecf\u8fc7\u5ba2\u6237\u81ea\u5df1\u7684\u670d\u52a1\u5668\uff0c\u5927\u5927\u63d0\u9ad8\u4e86\u5904\u7406\u901f\u5ea6\u548c\u7528\u6237\u4f53\u9a8c</li> <li>\u5206\u5757\u4e0a\u4f20 API\uff1a\u5728\u8868\u5355\u4e0a\u4f20\u7684\u57fa\u7840\u4e0a\uff0c\u5728\u4e0a\u4f20\u5927\u6587\u4ef6\u7684\u65f6\u5019\uff0c\u9762\u5bf9\u6709\u53ef\u80fd\u56e0\u4e3a\u7f51\u7edc\u8d28\u91cf\u7b49\u5176\u4ed6\u539f\u56e0\u800c\u9020\u6210\u7684\u4e0a\u4f20\u5931\u8d25\uff0c\u53ef\u4ee5\u4f7f\u7528\u5206\u5757\u4e0a\u4f20\u65b9\u5f0f\u4e0a\u4f20\u6587\u4ef6</li> <li>\u7f13\u5b58\u5237\u65b0 API\uff1a\u8be5\u529f\u80fd\u53ea\u9002\u7528\u4e8e CDN \u7528\u6237\u6216 CDN \u7c7b\u670d\u52a1\u3002\u5f53\u6e90\u670d\u52a1\u5668\u7684\u8d44\u6e90\u53d1\u751f\u53d8\u66f4\u540e\uff0c\u53ef\u4ee5\u8c03\u7528\u8be5 API \u63a5\u53e3\u544a\u77e5 \u53c8\u62cd\u4e91\u7f13\u5b58\u5237\u65b0\uff0c\u4ece\u800c\u8fbe\u5230\u5916\u7f51\u8bbf\u95ee\u65f6\u83b7\u53d6\u5230\u7684\u662f\u6700\u65b0\u7684\u8d44\u6e90</li> <li>\u97f3\u89c6\u9891\u9884\u5904\u7406 API\uff1a\u97f3\u89c6\u9891\u5904\u7406\u63a5\u53e3\u7528\u4e8e\u5904\u7406\u5df2\u7ecf\u4e0a\u4f20\u5230\u5bf9\u5e94\u5b58\u50a8\u670d\u52a1\u4e2d\u7684\u97f3\u89c6\u9891\u6587\u4ef6\uff0c\u8fdb\u884c\u8f6c\u7801\u3001\u622a\u56fe\u7b49\u64cd\u4f5c\u3002\u5728\u5904\u7406\u5b8c\u6210\u4e4b\u540e\uff0c\u5f02\u6b65\u901a\u77e5\u7528\u6237\u5904\u7406\u7ed3\u679c</li> </ul>"},{"location":"guide/php_rest_guide/","title":"Php rest guide","text":"<p>\u8fd9\u4e00\u90e8\u5206\u5c06\u8bf4\u660e\u5982\u4f55\u5feb\u901f\u4f7f\u7528<code>PHP</code>\u5411\u53c8\u62cd\u4e91\u4e0a\u521b\u5efa\u7684\u670d\u52a1\u4e0a\u4f20\u4e00\u4efd\u6587\u4ef6\uff0c\u901a\u8fc7\u8fd9\u4e2a\u4f8b\u5b50\uff0c\u4f60\u5c06\u5b66\u4f1a\u5982\u4f55\u751f\u6210\u7b7e\u540d\u5e76\u8c03\u7528\u6211\u4eec\u7684<code>REST API</code>\u8fdb\u884c\u5de5\u4f5c\u3002</p> <p>\u8bb2\u89e3\u4f8b\u5b50\u4e4b\u524d\uff0c\u5047\u8bbe\u4f60\u5df2\u7ecf\u6ce8\u518c\u4e86\u53c8\u62cd\u4e91\u7684\u5e10\u53f7\uff0c\u5e76\u521b\u5efa\u4e86\u670d\u52a1\uff0c\u5206\u914d\u4e86\u64cd\u4f5c\u5458\u3002\u793a\u4f8b\u4e2d\u6211\u4eec\u67b6\u8bbe\u4f7f\u7528\u4e00\u4e0b\u670d\u52a1\u548c\u64cd\u4f5c\u5458\uff08\u865a\u6784\uff0c\u8bf7\u5148\u81ea\u884c\u6ce8\u518c\u548c\u521b\u5efa\u53c8\u62cd\u4e91\u670d\u52a1\uff09\uff1a</p> <ul> <li>\u670d\u52a1\u540d:<code>demobucket</code></li> <li>\u64cd\u4f5c\u5458\u5e10\u53f7:<code>operator</code></li> <li>\u64cd\u4f5c\u5458\u5bc6\u7801:<code>operatorpassword</code></li> </ul>"},{"location":"guide/php_rest_guide/#_1","title":"\u51c6\u5907\u6587\u4ef6","text":"<p>\u672c\u793a\u4f8b\u76ee\u6807\u662f\u5c06\u672c\u5730\u6587\u4ef6 <code>assets/bar.txt</code> \u4e0a\u4f20\u5230 <code>demobucket</code> \u670d\u52a1\uff0c\u5e76\u91cd\u547d\u540d\u4e3a <code>foo.txt</code>\u3002 \u6240\u4ee5\u6700\u7ec8\u7684\u670d\u52a1\u7aef\u8def\u5f84\u662f <code>$uri = '/demobucket/foo.txt'</code>\u3002</p> <pre><code>    $bucketName = 'demobucket';\n    //\u88ab\u4e0a\u4f20\u7684\u6587\u4ef6\u8def\u5f84\n    $filePath = 'assets/bar.txt';\n    $fileSize = filesize($filePath);\n    //\u6587\u4ef6\u4e0a\u4f20\u5230\u670d\u52a1\u5668\u7684\u670d\u52a1\u7aef\u8def\u5f84\n    $serverPath = 'foo.txt';\n    $uri = \"/$bucketName/$serverPath\";\n</code></pre>"},{"location":"guide/php_rest_guide/#_2","title":"\u751f\u6210\u7b7e\u540d","text":"<p>\u793a\u4f8b\u4e2d\u4f7f\u7528\u5b89\u5168\u7684\u7b7e\u540d\u8ba4\u8bc1\uff0c\u5f3a\u70c8\u5efa\u8bae\u4f60\u5728\u5b9e\u9645\u7684\u751f\u4ea7\u73af\u5883\u4e2d\u90fd\u4f7f\u7528\u8fd9\u79cd\u65b9\u5f0f\u6765\u8c03\u7528\u6211\u4eec\u7684 API\u3002 \u4e0a\u4f20\u6587\u4ef6\u63a5\u53e3\u9700\u8981\u901a\u8fc7 HTTP <code>PUT</code> \u65b9\u6cd5\u8c03\u7528\uff0c\u7b7e\u540d\u751f\u6210\u53ef\u4ee5\u53c2\u8003\u5982\u4e0b\u65b9\u5f0f\uff1a</p> <pre><code>    //\u751f\u6210\u7b7e\u540d\u65f6\u95f4\u3002\u5f97\u5230\u7684\u65e5\u671f\u683c\u5f0f\u5982\uff1aThu, 11 Jul 2014 05:34:12 GMT\n    $date = gmdate('D, d M Y H:i:s \\G\\M\\T');\n    //\u672c\u793a\u4f8b\u53ea\u4e0a\u4f20\u4e86\u6587\u4ef6\uff0c\u6240\u4ee5 HTTP BODY \u957f\u5ea6\u7b49\u4e8e\u6587\u4ef6\u957f\u5ea6\n    $contentLength = $fileSize;\n    $sign = md5(\"PUT&amp;{$uri}&amp;{$date}&amp;{$contentLength}&amp;\".md5($operatorPwd));\n</code></pre>"},{"location":"guide/php_rest_guide/#_3","title":"\u53d1\u9001\u8bf7\u6c42","text":"<p>\u5c06\u4e0a\u4e00\u6b65\u751f\u6210\u7684\u7b7e\u540d\uff0c\u653e\u5230 HTTP \u6d88\u606f\u5934\u4e2d\u3002\u5982\u679c\u6ca1\u6709\u7b7e\u540d\u6216\u8005\u7b7e\u540d\u9519\u8bef\uff0c\u5219\u4f1a\u5bfc\u81f4\u63a5\u53e3\u8c03\u7528\u5931\u8d25\uff0c\u670d\u52a1\u7aef\u4f1a\u8fd4\u56de HTTP \u72b6\u6001\u7801 <code>401</code></p> <p>\u683c\u5f0f\u5982\u4e0b\uff1a</p> <pre><code>    $headers = array(\n        \"Expect:\",\n        \"Date: \".$date, // header \u4e2d\u4f7f\u7528\u7684\u65f6\u95f4\u5fc5\u987b\u548c\u751f\u6210\u7b7e\u540d\u7684\u65f6\u95f4\u76f8\u540c\n        \"Authorization: UpYun $operatorName:\".$sign\n    );\n    curl_setopt($ch, CURLOPT_HTTPHEADER, $headers);\n</code></pre>"},{"location":"guide/php_rest_guide/#_4","title":"\u5b8c\u6574\u4ee3\u7801","text":"<p>\u901a\u8fc7 php <code>curl</code> \u53d1\u9001<code>put</code>\u8bf7\u6c42\uff0c\u8c03\u7528\u63a5\u53e3\u3002\u5018\u82e5\u63a5\u53e3\u8fd4\u56de\u7684 HTTP \u72b6\u6001\u7801\u7b49\u4e8e<code>200</code>\uff0c\u8bf4\u660e\u63a5\u53e3\u8c03\u7528\u6210\u529f - <code>CURLOPT_INFILE</code> \u8bbe\u7f6e\u4e0a\u4f20\u6587\u4ef6\u7684\u53e5\u67c4 - <code>CURLOPT_INFILESIZE</code> \u8bbe\u7f6e\u4e0a\u4f20\u6587\u4ef6\u5927\u5c0f</p> <p>\u6700\u7ec8\u9879\u76ee\u7ed3\u6784\u5982\u4e0b</p> <pre><code>/-\n |-assets\n   |-bar.txt\n |-upload.php\n</code></pre> <p><code>upload.php</code>\u5b8c\u6574\u4ee3\u7801\u5982\u4e0b\uff1a</p> <pre><code>&lt;?php\n    $bucketName   = 'demobucket';\n    $operatorName = 'operator';\n    $operatorPwd  = 'operatorpassword';\n\n    //\u88ab\u4e0a\u4f20\u7684\u6587\u4ef6\u8def\u5f84\n    $filePath = 'assets/bar.txt';\n    $fileSize = filesize($filePath);\n    //\u6587\u4ef6\u4e0a\u4f20\u5230\u670d\u52a1\u5668\u7684\u670d\u52a1\u7aef\u8def\u5f84\n    $serverPath = 'foo.txt';\n    $uri = \"/$bucketName/$serverPath\";\n\n\n    //\u751f\u6210\u7b7e\u540d\u65f6\u95f4\u3002\u5f97\u5230\u7684\u65e5\u671f\u683c\u5f0f\u5982\uff1aThu, 11 Jul 2014 05:34:12 GMT\n    $date = gmdate('D, d M Y H:i:s \\G\\M\\T');\n    $sign = md5(\"PUT&amp;{$uri}&amp;{$date}&amp;{$fileSize}&amp;\".md5($operatorPwd));\n\n    $ch = curl_init('http://v0.api.upyun.com' . $uri);\n\n    $headers = array(\n        \"Expect:\",\n        \"Date: \".$date, // header \u4e2d\u9700\u8981\u4f7f\u7528\u751f\u6210\u7b7e\u540d\u7684\u65f6\u95f4\n        \"Authorization: UpYun $operatorName:\".$sign\n    );\n    curl_setopt($ch, CURLOPT_HTTPHEADER, $headers);\n    curl_setopt($ch, CURLOPT_PUT, true);\n\n    $fh = fopen($filePath, 'rb');\n    curl_setopt($ch, CURLOPT_INFILE, $fh);\n    curl_setopt($ch, CURLOPT_INFILESIZE, $fileSize);\n    curl_setopt($ch, CURLOPT_TIMEOUT, 60);\n    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);\n\n    $result = curl_exec($ch);\n    if(curl_getinfo($ch, CURLINFO_HTTP_CODE) === 200) {\n        //\"\u4e0a\u4f20\u6210\u529f\"\n\n    } else {\n        $errorMessage = sprintf(\"UPYUN API ERROR:%s\", $result);\n        echo $errorMessage;\n    }\n    curl_close($ch);\n</code></pre> <p>\u81f3\u6b64\uff0c\u60a8\u5df2\u7ecf\u5b66\u4f1a\u4e86\u5982\u4f55\u57fa\u4e8e PHP\uff0c\u4f7f\u7528\u53c8\u62cd\u4e91\u7684 HTTP REST API \u4e0a\u4f20\u6587\u4ef6\u4e86\uff0c\u60a8\u53ef\u4ee5\u8bbf\u95ee HTTP REST API \u6587\u6863 \u6df1\u5165\u5b66\u4e60 REST API \u7684\u5176\u4ed6\u529f\u80fd\u548c\u53c2\u6570\u3002</p> <p>\u6216\u8005\uff0c\u60a8\u4e5f\u53ef\u4ee5\u524d\u5f80 \u8d44\u6e90\u4e0b\u8f7d \u9875\u9762\u4e0b\u8f7d\u6211\u4eec\u6240\u63d0\u4f9b\u7684 SDK\uff0c\u6765\u52a0\u901f\u4f60\u7684\u5f00\u53d1\u6d41\u7a0b\u3002</p>"},{"location":"live/Introduction/","title":"\u4ea7\u54c1\u7b80\u4ecb","text":""},{"location":"live/Introduction/#_1","title":"\u4ea7\u54c1\u6982\u8ff0","text":"<p>\u53c8\u62cd\u76f4\u64ad\u4e91\uff08UPLive\uff09\uff0c\u81f4\u529b\u4e8e\u4e3a\u7528\u6237\u63d0\u4f9b\u7b80\u5355\u548c\u5feb\u901f\u63a5\u5165\u7684\u6574\u4f53\u89e3\u51b3\u65b9\u6848\u3002\u53c8\u62cd\u4e91\u76f4\u64ad\u57fa\u4e8e\u53c8\u62cd\u4e91\u5185\u5bb9\u5206\u53d1\u7f51\u7edc\u4e3a\u76f4\u64ad\u5e94\u7528\u63d0\u4f9b\u8d85\u4f4e\u5ef6\u8fdf\u3001\u9ad8\u7801\u7387\u3001\u9ad8\u5e76\u53d1\u7684\u4ece\u63a8\u6d41\u7aef\u5230\u64ad\u653e\u7aef\u7684\u4e00\u7ad9\u5f0f\u89e3\u51b3\u65b9\u6848\uff0c\u652f\u6301 RTMP\u3001HTTP-FLV \u548c HLS \u8f93\u51fa\u7b49\u57fa\u672c\u529f\u80fd\uff0c\u5305\u62ec\u5f55\u5236\u3001\u8f6c\u7801\u7b49\u589e\u503c\u670d\u52a1\u3002</p>"},{"location":"live/Introduction/#_2","title":"\u4ea7\u54c1\u67b6\u6784","text":""},{"location":"live/Introduction/#_3","title":"\u53c8\u62cd\u6e90","text":"<p>\u76f4\u64ad CDN \u4e3b\u8981\u652f\u6301\u4e24\u79cd\u6a21\u5f0f\uff0c\u4e00\u79cd\u662f\u5ba2\u6237\u63a8\u6d41\u81f3\u53c8\u62cd CDN\uff0c\u63a8\u6d41\u81f3\u53c8\u62cd\u65f6\uff0c\u7528\u6237\u53ea\u9700\u8981\u505a\u597d\u63a8\u62c9\u6d41\u5ba2\u6237\u7aef\uff0c\u4e3b\u64ad\u5728\u63a8\u6d41\u7aef\u5c06\u6d41\u901a\u8fc7\u63a8\u6d41\u5668\u63a8\u9001\u5230 CDN\uff0c\u7ecf\u8fc7 CDN \u52a0\u901f\u540e\uff0c\u64ad\u653e\u7aef\u53ef\u5c31\u8fd1\u8bf7\u6c42\u5230\u76f8\u5e94\u7684\u6d41\uff0c\u5176\u4ed6\u6e90\u7ad9\u529f\u80fd\u6bd4\u5982\u8f6c\u7801\u5f55\u5236\u90fd\u53ef\u4ee5\u7531 CDN \u5382\u5546\u5b8c\u6210\u3002  </p>"},{"location":"live/Introduction/#_4","title":"\u81ea\u4e3b\u6e90","text":"<p>\u53e6\u4e00\u79cd\u662f\u5ba2\u6237\u63d0\u4f9b\u6e90\u7ad9\uff0c\u53c8\u62cd CDN \u56de\u5ba2\u6237\u6e90\u7ad9\u62c9\u6d41\uff0c\u8be5\u65b9\u5f0f\u5ba2\u6237\u5bf9\u5176\u4e3b\u64ad\u6d41\u7684\u53ef\u63a7\u7a0b\u5ea6\u9ad8\uff0c\u540c\u65f6\u9700\u8981\u4fdd\u969c\u6e90\u7ad9\u7684\u7a33\u5b9a\u6027\uff0c\u53ca\u4e3b\u64ad\u4e0e\u6e90\u7ad9\u95f4\u7684\u7f51\u7edc\u3002 </p> <p>\u5177\u4f53\u4f7f\u7528\u54ea\u79cd\u6e90\u7ad9\uff0c\u6839\u636e\u5b9e\u9645\u7684\u4e1a\u52a1\u60c5\u51b5\u800c\u5b9a\u3002</p>"},{"location":"live/advanced/","title":"\u589e\u503c\u670d\u52a1","text":""},{"location":"live/advanced/#_1","title":"\u5f55\u64ad","text":"<p>\u9700\u63d0\u4f9b\u7684\u914d\u7f6e\u4fe1\u606f\uff1a\u9700\u8981\u5f55\u5236\u7684\u62c9\u6d41 URL   \u5f55\u5236\u65b9\u5f0f\uff1a\u89e6\u53d1\u6216\u5b9a\u65f6\u5f55\u5236    </p> <p>\u5f55\u64ad\u7684\u4e3b\u8981\u4f5c\u7528\u662f\u5c06\u63a8\u6d41\u5185\u5bb9\u5f55\u5236\u6210\u6587\u4ef6\uff0c\u6700\u7ec8\u7528\u4e8e\u70b9\u64ad\u3002 \u73b0\u652f\u6301\u5f55\u5236\u6210 MP4\u3001FLV\u3001TS\u3001M3u8\uff0c\u9ed8\u8ba4\u5f55\u5236\u6210 mp4  \u683c\u5f0f\u6587\u4ef6\uff0c\u4e0a\u4f20\u5230\u53c8\u62cd\u4e91\u5b58\u50a8\uff0c\u5ba2\u6237\u53ef\u4ee5\u81ea\u5b9a\u4e49\u4e0a\u4f20\u5230\u54ea\u4e2a\u5b58\u50a8\u670d\u52a1\u3002  </p> <p>\u53c8\u62cd\u5f55\u5236\u7cfb\u7edf\u4f1a\u81ea\u52a8\u5c06\u5f55\u5236\u4e0b\u6765\u7684\u5185\u5bb9\u4e0a\u4f20\u5230\u53c8\u62cd\u4e91\u5b58\u50a8\u540e\uff0c\u53ef\u4ee5\u6839\u636e\u4e91\u5b58\u50a8\u83b7\u53d6\u76ee\u5f55\u6587\u4ef6\u5217\u8868\u6765\u83b7\u53d6\u76f8\u5173\u5f55\u5236\u6587\u4ef6\u5217\u8868\u3002\u5982\u679c\u5bf9\u5f55\u5236\u6587\u4ef6\u683c\u5f0f\u6709\u5176\u4ed6\u8981\u6c42\uff0c\u53ef\u5728\u53c8\u62cd\u4e91\u5904\u7406\u4e2d\u5fc3\u5bf9\u5176\u8fdb\u884c\u76f8\u5173\u5904\u7406\uff0c\u6bd4\u5982\u683c\u5f0f\u5904\u7406\uff0c\u89c6\u9891\u62fc\u63a5\uff0c\u8be6\u7ec6\u8bf7\u89c1\u4e91\u5904\u7406\u6587\u6863\u3002</p> <p>\u5982\u679c\u914d\u7f6e\u5bf9 rtmp://play.com/live/stream \u8fd9\u6761\u6d41\u8fdb\u884c\u5f55\u5236\uff0c\u5f55\u5236\u540e\u6587\u4ef6\u5177\u4f53\u8def\u5f84\u4e3a\uff1a  </p> <pre><code>live-recorder.b0.upaiyun.com/play.com/live/stream/recorder20160604163702.mp4  \n\n\u5176\u4e2d live-recorder \u4e3a\u5b58\u50a8\u7a7a\u95f4\uff0clive-recorder.b0.upaiyun.com \u4e3a\u5f55\u5236\u6587\u4ef6\u9ed8\u8ba4\u64ad\u653e\u57df\u540d,  \nplay.com \u4e3a\u76f4\u64ad\u62c9\u6d41\u57df\u540d\uff0clive \u4e3a\u63a5\u5165\u70b9\uff0cstream \u4e3a\u6d41\u540d\uff0crecorder \u7cfb\u7edf\u9ed8\u8ba4\u6807\u8bc6\u7b26\u540d\uff0c  \n20160604163702 \u4e3a\u5f55\u5236\u5b8c\u6210\u65f6\u95f4\uff0cmp4 \u4e3a\u6587\u4ef6\u7c7b\u578b\u3002\u5f55\u5236\u5b8c\u6210\u540e\u53ef\u4ee5\u901a\u8fc7 post \u65b9\u5f0f\u56de\u8c03\u7ed9\u7528\u6237\u63d0\u4f9b\u7684\u56de\u8c03\u5730\u5740\u3002  \n</code></pre> <p>\u5f55\u5236\u7cfb\u7edf\u4f1a\u5c06\u5f55\u5236\u6587\u4ef6\u9ed8\u8ba4\u4fdd\u5b58\u5728\u8be5\u7a7a\u95f4\u4ee5\u8fd9\u6761\u6d41 URL \u4e3a\u8def\u5f84\u7684\u76ee\u5f55\u4e0b\uff0c \u5373 live-recorder.b0.upaiyun.com/play.com/live/stream/\uff0c\u4f7f\u7528\u53c8\u62cd\u6587\u4ef6\u52a0\u901f\u670d\u52a1\uff0c\u76f4\u63a5\u53ef\u901a\u8fc7   http://client.com/play.com/live/stream/recorder20160604163702.mp4 \u6765\u8bbf\u95ee\uff0cclient.com \u4e3a\u5ba2\u6237\u70b9\u64ad\u57df\u540d\uff0c\u9700\u7ed1\u5b9a\u5728\u5f55\u5236\u6587\u4ef6\u6240\u6709\u7684\u4e91\u5b58\u50a8\u7a7a\u95f4\uff0c\u8be5\u8fc7\u7a0b\u5373\u5bf9\u5b58\u50a8\u5185\u5bb9\u8fdb\u884c\u70b9\u64ad\u3002</p> <p>\u5f55\u5236\u652f\u6301\u89e6\u53d1\u5f55\u5236\u4e0e\u5b9a\u65f6\u5f55\u5236\u4e24\u79cd\u65b9\u5f0f\uff0c\u5e76\u4e14\u652f\u6301\u7f51\u7edc\u95ea\u65ad\u91cd\u8fde\u540e\u7684\u6587\u4ef6\u5408\u5e76\uff0c\u5177\u4f53\u9700\u8981\u591a\u957f\u65f6\u95f4\u5185\u7684\u95ea\u65ad\u8fdb\u884c\u5408\u5e76\uff0c\u53ef\u914d\u7f6e\uff0c\u5982\u8981\u8fdb\u884c\u5408\u5e76\uff0c\u65ad\u6d41\u524d\u540e\u7684\u76f4\u64ad\u6d41\u5206\u8fa8\u7387\u9700\u8981\u4fdd\u6301\u4e00\u81f4\u3002\u540c\u4e00\u6761\u6d41\u5728\u5f55\u5236\u8fc7\u7a0b\u4e2d\uff0c\u5982\u679c\u89c6\u9891\u5206\u8fa8\u7387\u6216\u97f3\u9891\u91c7\u6837\u7387\u53d1\u751f\u53d8\u5316\u65f6\uff0c\u4f1a\u81ea\u52a8\u5207\u5272\u6210\u4e24\u4e2a\u6587\u4ef6\u3002</p> <p>\u9700\u8981\u5f55\u5236\u7684\u6d41\u534f\u8bae\u652f\u6301\uff1aRTMP\uff0cHTTP-FLV\u3002</p>"},{"location":"live/advanced/#_2","title":"\u89e6\u53d1\u5f55\u5236","text":"<p>\u6e90\u7ad9\u7c7b\u578b\uff1a\u53c8\u62cd\u4e91\u6e90</p> <p>\u6307\u5b9a\u914d\u7f6e\u67d0\u4e00\u6761\u6d41\u4e3a\u89e6\u53d1\u5f55\u5236\u7684\u6d41\uff0c\u5219\u5728\u8fd9\u6761\u6d41\u63a8\u6d41\u5230\u53c8\u62cd CDN \u7684\u65f6\u5019\uff0c\u53c8\u62cd\u5f55\u5236\u7cfb\u7edf\u5bf9\u5176\u5f00\u59cb\u5f55\u5236\uff0c\u5f53\u8fd9\u63a8\u6d41\u65ad\u5f00\u540e\u505c\u6b62\u5f55\u5236\uff0c\u518d\u63a8\u6d41\u540e\u53c8\u7ee7\u7eed\u5f00\u59cb\u5f55\u5236\uff0c\u4ee5\u6b64\u5faa\u73af\u3002\u63a8\u6d41\u65ad\u5f00\u65f6\uff0c\u5f55\u5236\u6587\u4ef6\u81ea\u52a8\u505c\u6b62\u5f55\u5236\uff0c\u4e0b\u6b21\u518d\u63a8\u6d41\u540e\uff0c\u5f55\u5236\u7684\u6587\u4ef6\u540d\u5c06\u4e0e\u524d\u4e00\u6587\u4ef6\u540d\u4e0d\u4e00\u6837\uff0c\u8fd9\u6837\u540c\u4e00\u6761\u6d41\u4f1a\u751f\u6210\u591a\u4e2a\u4e0d\u540c\u6587\u4ef6\uff0c\u5e76\u4ee5\u6587\u4ef6\u540d\u6700\u540e\u7684\u65f6\u95f4\u8868\u793a\u5176\u5148\u540e\u987a\u5e8f\u3002\u63a8\u6d41\u5982\u679c\u4e00\u76f4\u4e0d\u65ad\u5f00\uff0c\u5f55\u5236\u6587\u4ef6\u9ed8\u8ba4 2 \u5c0f\u65f6\u5207\u5272\u4e00\u6b21\u3002</p> <p>\u89e6\u53d1\u5f55\u5236\u9700\u8981\u5728\u63a8\u6d41\u5f00\u59cb\u524d\u914d\u7f6e\u624d\u80fd\u751f\u6548\uff0c\u5728\u63a8\u6d41\u8fc7\u7a0b\u4e2d\u914d\u7f6e\u89e6\u53d1\u5f55\u5236\u4e0d\u751f\u6548\u3002</p>"},{"location":"live/advanced/#_3","title":"\u5b9a\u65f6\u5f55\u5236","text":"<p>\u6e90\u7ad9\u7c7b\u578b\uff1a\u5168\u90e8  </p> <p>\u6307\u5b9a\u914d\u7f6e\u67d0\u4e00\u6761\u6d41\u7684\u8d77\u6b62\u65f6\u95f4\uff0c\u6bd4\u5982\u4ece 2016-09-01 17\uff1a00\uff1a00 \u5f00\u59cb\u5f55\u5236\uff0c\u5e76\u5230 2016-09-01 22\uff1a00\uff1a00 \u7ed3\u675f\uff0c\u4e0d\u7ba1\u5728\u8fd9\u65f6\u95f4\u6bb5\u5185\u63a8\u6d41\u65ad\u5f00\u51e0\u6b21\uff0c\u5f55\u5236\u7cfb\u7edf\u5c06\u5728\u5f00\u59cb\u5f55\u5236\u7684\u524d 2 \u5c0f\u65f6\u5185\uff0c\u5bf9\u5176\u63a8\u6d41\u7684\u6240\u6709\u6d41\u5185\u5bb9\u8fdb\u884c\u5f55\u5236\u5728\u540c\u4e00\u6587\u4ef6\u540d\u4e0b\uff0c\u8d85\u8fc7 2 \u5c0f\u65f6\u90e8\u5206\u4f1a\u81ea\u52a8\u5207\u5272\uff0c\u5f55\u5236\u6210\u4e0b\u4e00\u4e2a\u6587\u4ef6\u3002</p>"},{"location":"live/advanced/#_4","title":"\u56de\u8c03","text":"<p>\u9700\u63d0\u4f9b\u63a5\u6536\u56de\u8c03\u7684\u5730\u5740\uff08\u5efa\u8bae\u4e3a URL\uff09  </p> <p>\u5f55\u5236\u6587\u4ef6\u6240\u5728\u7684\u8def\u5f84\u4ee5 post \u8bf7\u6c42\u8fd4\u56de\u7ed9\u5ba2\u6237\uff0c\u5177\u4f53\u7684 json \u683c\u5f0f\u4e3a</p> <pre><code>{\"timestamp\": \"2016-06-04 16:38:45\",  \n \"path\":   \n [\"http://live-recorder.b0.upaiyun.com/play.com/live/stream/recorder20160604163702.mp4\"]}\n</code></pre> <p>\u5176\u4e2d\uff0ctimestamp \u4e3a\u53d1\u9001 json \u56de\u8c03\u4efb\u52a1\u65f6\u95f4\uff0cpath \u4e3a\u5f55\u5236\u6587\u4ef6\u5177\u4f53\u8def\u5f84\uff0c\u652f\u6301\u56de\u8c03\u591a\u4e2a\u6587\u4ef6\u3002\u5f53\u5f55\u5236\u7684\u6587\u4ef6\u5230\u8fbe\u5207\u5272\u65f6\u95f4\uff0c\u6216\u8005\u5728\u95ea\u65ad\u5408\u5e76\u8fc7\u7a0b\u4e2d\uff0c\u9700\u8981\u5408\u5e76\u7684\u6d41\u89c6\u9891\u5206\u8fa8\u7387\u6216\u97f3\u9891\u91c7\u6837\u7387\u53d1\u751f\u53d8\u5316\u65f6\uff0c\u4f1a\u751f\u6210\u591a\u4e2a\u5f55\u5236\u6587\u4ef6\uff0c\u5177\u4f53\u7684 json \u683c\u5f0f\u4e3a</p> <pre><code>{\"timestamp\": \"2016-06-04 16:38:45\",  \n \"path\":  \n [\"http://live-recorder.b0.upaiyun.com/play.com/live/stream/recorder20160604163702.mp4\",   \n \"http://live-recorder.b0.upaiyun.com/play.com/live/stream/recorder20160604163902.mp4\"]}\n</code></pre>"},{"location":"live/advanced/#_5","title":"\u8f6c\u7801","text":"<p>\u6e90\u7ad9\u7c7b\u578b\uff1a\u53c8\u62cd\u4e91\u6e90 \u63d0\u4f9b\u8981\u8f6c\u7801\u7684\u539f\u59cb\u6d41\u3001\u8f6c\u7801\u5339\u914d\u7684\u540e\u7f00\u53ca\u8f6c\u7801\u6a21\u677f\u3002  </p> <p>\u652f\u6301\u97f3\u89c6\u9891\u6d41\u5b9e\u65f6\u8f6c\u7801\u5904\u7406\uff0c\u901a\u8fc7\u8f6c\u7801\u6a21\u7248\u53ef\u914d\u7f6e\u7f16\u7801\u6807\u51c6\u3001\u5206\u8fa8\u7387\u3001\u7801\u7387\u53ca\u8f93\u51fa\u6d41\u7c7b\u578b\u7b49\u6d41\u5904\u7406\u53c2\u6570\u3002 \u9ed8\u8ba4\u652f\u6301\u4f7f\u7528\u53c8\u62cd\u4e91\u76f4\u64ad\u670d\u52a1\u7684 RTMP\uff0cHTTP-FLV \u548c HLS \u534f\u8bae\u7684\u6d41\u8f6c\u7801\u652f\u6301 12 \u79cd\u8f6c\u7801\u6a21\u677f\u548c\u5ba2\u6237\u81ea\u5b9a\u4e49\u8f6c\u7801\u914d\u7f6e\uff0c\u8be6\u7ec6\u6a21\u677f\u4fe1\u606f,\u53c2\u8003\u89c6\u9891\u8f6c\u7801\u9884\u7f6e\u6a21\u677f \u652f\u6301\u81ea\u5b9a\u4e49\u8f6c\u7801\u540e\u7f00\uff0c\u5206\u9694\u7b26\u652f\u6301\u4e2d\u5212\u7ebf\uff08-\uff09\u3001\u4e0b\u5212\u7ebf\uff08_\uff09\u548c\u611f\u53f9\u53f7\uff08!\uff09\u3002</p> <p>\u652f\u6301\u89e6\u53d1\u5f0f\u8f6c\u7801\uff0c\u9700\u63d0\u524d\u914d\u7f6e\u9700\u8981\u8f6c\u7801\u7684\u6d41\u5730\u5740\u4ee5\u53ca\u8f6c\u7801\u7684\u89e6\u53d1\u540e\u7f00\uff0c\u5982 \u9700\u8981\u8f6c\u7801\u7684\u539f\u59cb\u6d41\u4e3a\uff1ahttp://play.com/live/stream \u89e6\u53d1\u8f6c\u7801\u7684\u540e\u7f00\u5339\u914d\u4e3a -small\uff0c\u5bf9\u5e94\u7684\u8f6c\u7801\u6a21\u677f\u4e3a 540p\uff0816:9\uff09 \u5f53\u6709\u7528\u6237\u8bf7\u6c42 http://play.com/live/stream-small  \u65f6\u89e6\u53d1\u8f6c\u7801\uff0c\u5f53\u6700\u540e\u4e00\u4e2a\u8bf7\u6c42\u8be5\u8f6c\u7801\u6d41\u7684\u7528\u6237\u65ad\u5f00\u8fde\u63a5\u540e\uff0c\u505c\u6b62\u8f6c\u7801\u3002</p> <pre><code>\u793a\u4f8b\uff1a\n\u539f\u59cb\u6d41\u4e3a rtmp://play.com/live/stream \u914d\u7f6e\u7684\u5339\u914d\u540e\u7eed\u6709 -small\uff0c\u5bf9\u5e94\u8f6c\u7801\u6a21\u677f 540p\uff0816:9\uff09\uff0c  \n\u5219\u8f6c\u7801\u6d41\u8bf7\u6c42\u5206\u522b\u4e3a  \nrtmp://play.com/live/stream-small  \nhttp://play.com/live/stream-small.flv  \nhttp://play.com/live/stream-small.m3u8    \n</code></pre>"},{"location":"live/advanced/#_6","title":"\u7981\u64ad","text":"<p>\u6e90\u7ad9\u7c7b\u578b\uff1a\u53c8\u62cd\u4e91\u6e90  </p> <p>\u4e92\u52a8\u76f4\u64ad\u4e1a\u52a1\u7279\u6027\u4e3a\uff1a\u76f4\u64ad\u89c6\u9891\u5185\u5bb9\u7531\u4e3b\u64ad\u5b9e\u65f6\u63a8\u9001\u81f3\u670d\u52a1\u5668\uff0c\u82e5\u4e3b\u64ad\u4f20\u64ad\u975e\u6cd5\u5185\u5bb9\uff0c\u5219\u5f71\u54cd\u5de8\u5927\u3002\u56e0\u6b64\u5382\u5546\u9700\u8981\u5bf9\u76f4\u64ad\u89c6\u9891\u5185\u5bb9\u8fdb\u884c\u5b9e\u65f6\u76d1\u63a7\uff0c\u5f53\u51fa\u73b0\u975e\u6cd5\u5185\u5bb9\u65f6\uff0c\u53ca\u65f6\u7981\u6b62\u975e\u6cd5\u5185\u5bb9\u7684\u4f20\u64ad\u3002 \u79d2\u7ea7\u7981\u64ad\u5219\u662f\u9488\u5bf9\u8be5\u4e1a\u52a1\u573a\u666f\u800c\u7814\u53d1\u7684\u529f\u80fd\uff0c\u7531\u53c8\u62cd\u63d0\u4f9b\u9875\u9762\u914d\u7f6e\u548c\u8c03\u7528 API \u7981\u64ad\u4e24\u79cd\u65b9\u5f0f\u3002\u5f53\u5ba2\u6237\u53d1\u73b0\u67d0\u76f4\u64ad\u89c6\u9891\u5185\u5bb9\u975e\u6cd5\u65f6\uff0c\u5b9e\u65f6\u65ad\u5f00\u4e3b\u64ad\u63a8\u6d41\uff0c\u4ece\u800c\u963b\u6b62\u975e\u6cd5\u5185\u5bb9\u7684\u4f20\u64ad\u3002 \u7981\u64ad\u65b9\u5f0f\u652f\u6301\u7acb\u5373\u7981\u64ad\uff0c\u89e3\u9664\u7981\u64ad\uff0c\u4ee5\u53ca\u7981\u64ad\u4e00\u6bb5\u65f6\u95f4\u540e\u81ea\u52a8\u89e3\u9664\u3002  </p>"},{"location":"live/advanced/#_7","title":"\u622a\u56fe","text":"<p>\u6e90\u7ad9\u7c7b\u578b\uff1a\u53c8\u62cd\u4e91\u6e90</p> <p>\u76f4\u64ad\u622a\u56fe\u670d\u52a1\u652f\u6301\u5c06\u76f4\u64ad\u89c6\u9891\u4ee5\u8bbe\u5b9a\u7684\u65f6\u95f4\u95f4\u9694\u548c\u5c3a\u5bf8\u5927\u5c0f\u8fdb\u884c\u622a\u56fe\uff0c\u5e76\u4ee5 .jpg \u683c\u5f0f\u4fdd\u5b58\u5728\u5b58\u50a8\u7a7a\u95f4\u3002\u5982\u679c\u5bf9\u622a\u56fe\u6587\u4ef6\u6709\u5904\u7406\u9700\u6c42\uff0c\u53ef\u5728\u53c8\u62cd\u4e91\u5904\u7406\u4e2d\u5fc3\u5bf9\u5176\u8fdb\u884c\u76f8\u5173\u5904\u7406\u64cd\u4f5c\uff0c\u8be6\u60c5\u8bf7\u89c1\u4e91\u5904\u7406\u6587\u6863\u3002</p>"},{"location":"live/advanced/#_8","title":"\u5355\u6b21\u622a\u56fe","text":"<p>\u4ec5\u5728\u76f4\u64ad\u63a8\u6d41\u65f6\u8fdb\u884c\u5355\u6b21\u622a\u56fe\uff0c\u622a\u53d6\u63a8\u6d41\u7684\u7b2c\u4e00\u5e27\u3002\u540c\u4e00\u6761\u6d41\uff0c\u91cd\u63a8\u540e\u5c06\u91cd\u65b0\u622a\u53d6\u9996\u5e27\uff0c\u5e76\u8986\u76d6\u4e0a\u6b21\u63a8\u6d41\u7684\u622a\u56fe\u3002\u8be5\u622a\u56fe\u6a21\u5f0f\u9002\u7528\u4e8e\u9759\u6001\u5c01\u9762\u3002 \u5982\u679c\u5bf9\u670d\u52a1\u53f7\u4e3a upyun-live \u7684\u76f4\u64ad\u7a7a\u95f4\u5f00\u542f\u5355\u6b21\u622a\u56fe\uff0c\u9009\u62e9\u5b58\u50a8\u7a7a\u95f4\u4e3a upyun-live-pic \uff0c\u622a\u56fe\u540e\u6587\u4ef6\u7684\u5177\u4f53\u8def\u5f84\u4e3a</p> <pre><code>upyun-live-pic.b0.upaiyun.com/upyun-live/live/stream.jpg\n\u5176\u4e2d upyun-live-pic \u4e3a\u5b58\u50a8\u7a7a\u95f4\uff0c upyun-live-pic.b0.upaiyun.com \u4e3a\u622a\u56fe\u6587\u4ef6\u9ed8\u8ba4\u8bbf\u95ee\u57df\u540d\uff0c \nupyun-live \u4e3a\u76f4\u64ad\u7a7a\u95f4\uff0clive \u4e3a\u63a5\u5165\u70b9\uff0c stream \u4e3a\u6d41\u540d\u3002 \n</code></pre>"},{"location":"live/advanced/#_9","title":"\u591a\u6b21\u622a\u56fe","text":"<p>\u5f00\u542f\u591a\u6b21\u622a\u56fe\uff0c\u53ef\u8bbe\u7f6e\u56fa\u5b9a\u65f6\u95f4\u95f4\u9694\uff0c\u5728\u63a8\u6d41\u8fc7\u7a0b\u4e2d\uff0c\u4ee5\u4e00\u5b9a\u65f6\u95f4\u95f4\u9694\u8fdb\u884c\u622a\u56fe\uff0c\u76f4\u5230\u63a8\u6d41\u7ed3\u675f\uff0c\u9002\u7528\u4e8e\u52a8\u6001\u5c01\u9762\u548c\u5185\u5bb9\u5ba1\u6838\u3002  </p> <p>\u5982\u679c\u5bf9\u670d\u52a1\u53f7\u4e3a upyun-live \u7684\u76f4\u64ad\u7a7a\u95f4\u5f00\u542f\u591a\u6b21\u622a\u56fe\uff0c\u9009\u62e9\u5b58\u50a8\u7a7a\u95f4\u4e3a upyun-live-pic \uff0c\u622a\u56fe\u4fdd\u5b58\u8def\u5f84\u53ca\u547d\u540d\u53ef\u8bbe\u7f6e\u4e3a {\u76f4\u64ad\u52a0\u901f\u670d\u52a1\u540d}/{\u63a5\u5165\u70b9}/{\u6d41\u540d}{\u5e74}{\u6708}{\u65e5}{\u65f6}{\u5206}{\u79d2}.jpg\uff0c\u5219\u622a\u56fe\u540e\u6587\u4ef6\u7684\u5177\u4f53\u8def\u5f84\u4e3a</p> <pre><code>upyun-live-pic.b0.upaiyun.com/upyun-live/live/stream20170101121212.jpg  \n\u5176\u4e2d upyun-live-pic \u4e3a\u5b58\u50a8\u7a7a\u95f4\uff0c upyun-live-pic.b0.upaiyun.com \u4e3a\u622a\u56fe\u6587\u4ef6\u9ed8\u8ba4\u8bbf\u95ee\u57df\u540d\uff0c\nupyun-live \u4e3a\u76f4\u64ad\u7a7a\u95f4\uff0clive \u4e3a\u63a5\u5165\u70b9\uff0c stream \u4e3a\u6d41\u540d\uff0c\n201701011212 \u4e3a 2017 \u5e74 1 \u6708 1 \u65e5 12 \u70b9 12 \u5206 12 \u79d2\u3002\n</code></pre> <p>\u622a\u56fe\u4fdd\u5b58\u8def\u5f84\u53ca\u547d\u540d\u8be6\u60c5\u89c1\u540e\u53f0\u914d\u7f6e\u9875\u9762\u3002  </p>"},{"location":"live/advanced/#_10","title":"\u56de\u8c03","text":"<p>\u9700\u63d0\u4f9b\u63a5\u53d7\u56de\u8c03\u7684\u5730\u5740\uff08\u5efa\u8bae\u4e3a URL\uff09</p> <p>\u76f4\u64ad\u622a\u56fe\u6587\u4ef6\u6240\u5728\u8def\u5f84\u4ee5 post \u8bf7\u6c42\u8fd4\u56de\u7ed9\u5ba2\u6237\uff0c\u5177\u4f53\u7684 json \u683c\u5f0f\u4e3a</p> <pre><code>{\n  \"bucket\": \"upyun-live\", // \u76f4\u64ad\u670d\u52a1\u540d \n  \"app\": \"live\", // \u76f4\u64ad\u63a5\u5165\u70b9\u540d\u79f0 \n  \"stream\": \"stream\", // \u76f4\u64ad\u6d41\u540d \n  \"vhost\": \"push.com\", // \u63a8\u6d41\u57df\u540d \n  \"path\": \"http://upyun-live-pic.b0.upaiyun.com/upyun-live/live/stream.jpg\", // \u622a\u56fe\u5b58\u50a8\u8def\u5f84 \n  \"timestamp\": \"2017-01-01 12:12:12\", // \u622a\u56fe\u65f6\u95f4 \n  \"status\": 200, // \u622a\u56fe\u72b6\u6001 \n  \"error\": \"\"  // \u5982\u679c\u622a\u56fe\u6210\u529f\uff0c\u5373 status \u4e3a 200 \uff0cerror \u5b57\u6bb5\u4e3a\u7a7a\u5b57\u7b26\u4e32\uff0c\u5426\u5219 error \u5b57\u6bb5\u4f1a\u7ed9\u51fa\u9519\u8bef\u4fe1\u606f   \n}\n</code></pre>"},{"location":"live/guide/","title":"\u5feb\u901f\u5165\u95e8","text":""},{"location":"live/guide/#_1","title":"\u8d26\u53f7\u7533\u8bf7","text":"<p>\u76f8\u5173\u8d26\u53f7\u521b\u5efa\u53ca\u8ba4\u8bc1\u53ef\u53c2\u8003 CDN \u670d\u52a1\u5feb\u901f\u5165\u95e8\u3002</p>"},{"location":"live/guide/#_2","title":"\u670d\u52a1\u521b\u5efa","text":"<p>\u767b\u5f55\u53c8\u62cd\u4e91\u63a7\u5236\u53f0\uff0c\u8fdb\u5165<code>\u670d\u52a1</code>\u6807\u7b7e\u680f\u3001\u70b9\u51fb<code>\u521b\u5efa\u670d\u52a1</code>\uff0c\u5728\u5f39\u6846\u4e2d\u76f4\u64ad\u52a0\u901f\u670d\u52a1\u680f\u4e0b\u70b9\u51fb<code>\u7acb\u5373\u521b\u5efa</code>\u3002</p> <p></p>"},{"location":"live/guide/#_3","title":"\u53c8\u62cd\u6e90","text":"<p>\u5bf9\u4e8e\u5373\u5c06\u521b\u5efa\u7684\u76f4\u64ad\u670d\u52a1\u6709\u4e24\u79cd\u6e90\u7ad9\u6a21\u5f0f\uff0c\u5f53\u63a8\u6d41\u81f3\u53c8\u62cd\u65f6\uff0c\u8bf7\u9009\u62e9<code>\u6e90\u7ad9\u7c7b\u578b</code>\u4e3a<code>\u53c8\u62cd\u4e91</code>\u3002\u6b64\u65f6\uff0c\u586b\u5199\u5b8c\u670d\u52a1\u540d\u79f0\uff0c\u53ca\u9884\u5148\u5907\u6848\u597d\u7684<code>\u63a8\u6d41\u57df\u540d</code>\u4e0e<code>\u64ad\u653e\u57df\u540d</code>\uff0c\u5e76\u9009\u62e9\u6027\u5730\u586b\u5199<code>\u63a5\u5165\u70b9</code>\uff0c\u5219\u76f4\u64ad\u670d\u52a1\u521b\u5efa\u6210\u529f\u3002</p> <p></p>"},{"location":"live/guide/#_4","title":"\u81ea\u4e3b\u6e90","text":"<p>\u5f53\u76f4\u64ad\u6d41\u4e0d\u662f\u63a8\u9001\u5230\u53c8\u62cd\uff0c\u800c\u662f\u56de\u5ba2\u6237\u6e90\u83b7\u53d6\u65f6\uff0c\u8bf7\u9009\u62e9<code>\u81ea\u4e3b\u6e90</code>\u6e90\u7ad9\u7c7b\u578b\uff0c\u5e76\u8bbe\u7f6e\u597d\u56de\u6e90\u5730\u5740\uff0c\u4e14\u53ea\u9700\u586b\u5199<code>\u64ad\u653e\u57df\u540d</code>\uff0c\u9009\u62e9\u6027\u586b\u5199<code>\u63a5\u5165\u70b9</code>\u3002</p> <p></p> <p>\u4fe1\u606f\u586b\u5199\u5b8c\u6bd5\u6b63\u786e\u540e\uff0c\u70b9\u51fb\u521b\u5efa\uff0c\u5373\u521b\u5efa\u6210\u529f\u3002\u521b\u5efa\u6210\u529f\u540e\u505a cname \u89e3\u6790\uff0c\u5177\u4f53\u6d41\u7a0b\u53ef\u53c2\u8003 CDN \u670d\u52a1\u4e0bCNAME \u89e3\u6790\u3002</p>"},{"location":"live/guide/#_5","title":"\u63a8\u6d41\u6d4b\u8bd5","text":"<p>CNAME \u89e3\u6790\u751f\u6548\u540e\uff0c\u53ef\u8fdb\u884c\u63a8\u62c9\u6d41\u6d4b\u8bd5\u3002\u4f8b\u5982\u4f7f\u7528 OBS \u63a8\u6d41\uff0c\u8bbe\u7f6e\u597d\u63a8\u6d41\u5730\u5740\u3002</p> <p></p> <p>\u70b9\u51fb\u786e\u5b9a\u540e\u8fdb\u5165\u63a8\u6d41\u7a97\u53e3\uff0c\u9009\u62e9\u597d\u9700\u8981\u63a8\u6d41\u7684\u5185\u5bb9\uff0c\u6bd4\u5982\u5a92\u4f53\u6e90\uff0c\u518d\u70b9\u51fb\u5f00\u59cb\u4e32\u6d41\u3002</p> <p></p> <p>\u4e0d\u540c\u7248\u672c\u53ca\u4e0d\u540c\u5e73\u53f0\u7684 obs \u53ef\u80fd\u7565\u6709\u4e0d\u540c\uff0c\u6839\u636e\u5177\u4f53\u60c5\u51b5\u800c\u5b9a\u3002  </p>"},{"location":"live/guide/#_6","title":"\u64ad\u653e\u6d4b\u8bd5","text":"<p>\u64ad\u653e\u5bf9\u5e94\u63a8\u6d41\uff0c\u4f8b\u5982\u4f7f\u7528 VLC \u64ad\u653e\uff0c\u586b\u5199\u76f8\u5e94\u7684 rtmp \u64ad\u653e\u5730\u5740\u3002</p> <p></p>"},{"location":"live/mobile-sdk/","title":"\u79fb\u52a8\u7aef sdk","text":""},{"location":"live/mobile-sdk/#ios-sdk","title":"IOS \u63a8\u6d41 SDK","text":""},{"location":"live/mobile-sdk/#_1","title":"\u7cfb\u7edf\u8bf4\u660e","text":"<ul> <li>\u652f\u6301 iOS 8 \u53ca\u4ee5\u4e0a\u7cfb\u7edf\u7248\u672c   </li> <li>\u652f\u6301 ARMv7\uff0cARM64\uff0cx86_64 \u67b6\u6784</li> </ul>"},{"location":"live/mobile-sdk/#_2","title":"\u529f\u80fd\u8bf4\u660e","text":"<ul> <li>\u91c7\u96c6\u6a21\u5757\u6e90\u7801\u5f00\u653e\uff0c\u97f3\u89c6\u9891\u53ef\u4ee5\u81ea\u7531\u914d\u7f6e  </li> <li>\u652f\u6301\u786c\u4ef6\u7f16\u7801  </li> <li>\u591a\u7801\u7387\u53ef\u9009  </li> <li>\u652f\u6301 H.264 \u89c6\u9891\u7f16\u7801  </li> <li>\u652f\u6301 AAC \u97f3\u9891\u7f16\u7801  </li> <li>\u652f\u6301\u524d\u540e\u6444\u50cf\u5934  </li> <li>\u652f\u6301\u81ea\u52a8\u5bf9\u7126  </li> <li>\u652f\u6301\u624b\u52a8\u8c03\u6574\u5bf9\u7126\u70b9  </li> <li>\u652f\u6301\u95ea\u5149\u706f\u64cd\u4f5c  </li> <li>\u652f\u6301\u591a\u5206\u8fa8\u7387\u7f16\u7801   </li> <li>\u652f\u6301\u6784\u9020\u5e26\u5b89\u5168\u6388\u6743\u51ed\u8bc1\u7684 RTMP \u63a8\u6d41\u5730\u5740  </li> <li>\u652f\u6301 ARMv7, ARM64, x86_64 \u67b6\u6784  </li> <li>\u652f\u6301 RTMP \u534f\u8bae\u76f4\u64ad\u63a8\u6d41    </li> <li>\u652f\u6301\u63a8\u6d41\u65f6\u53ef\u53d8\u7801\u7387  </li> <li>\u63d0\u4f9b\u53d1\u9001 buffer      </li> <li>\u652f\u6301\u89c6\u9891 Orientation \u64cd\u4f5c   </li> <li>\u652f\u6301\u5f31\u7f51\u4e22\u5e27\u7b56\u7565   </li> <li>\u652f\u6301\u540e\u53f0\u97f3\u9891\u63a8\u6d41  </li> <li>\u652f\u6301\u6c34\u5370\u529f\u80fd  </li> <li>\u652f\u6301\u7f8e\u989c\u529f\u80fd  </li> </ul> <p>\u9879\u76ee\u5730\u5740\uff1ahttps://github.com/upyun/ios-live-sdk \u53cd\u9988\u53ca\u5efa\u8bae\uff1alivesdk@upai.com</p>"},{"location":"live/mobile-sdk/#sdk","title":"\u5b89\u5353\u63a8\u6d41 SDK","text":""},{"location":"live/mobile-sdk/#_3","title":"\u7cfb\u7edf\u8bf4\u660e","text":"<ul> <li>Android 4.1(API 16) \u4ee5\u4e0a</li> <li>\u652f\u6301 ARMv5\uff0cARMv7\uff0cARMv8 \u7248\u672c</li> </ul>"},{"location":"live/mobile-sdk/#_4","title":"\u529f\u80fd\u8bf4\u660e","text":"<ul> <li>\u652f\u6301 H.264 \u548c AAC \u786c\u7f16</li> <li>\u786c\u7f16\u652f\u6301 Android Min API 18\uff08Android 4.3\uff09\u53ca\u5176\u4ee5\u4e0a\u7248\u672c</li> <li>\u652f\u6301 RTMP \u5c01\u5305\u53ca\u63a8\u6d41</li> <li>\u652f\u6301 RTMP \u63a8\u6d41\u81ea\u9002\u5e94\u7f51\u7edc\u8d28\u91cf\u52a8\u6001\u5207\u6362\u7801\u7387\u6216\u81ea\u5b9a\u4e49\u7b56\u7565</li> <li>\u652f\u6301\u7eaf\u97f3\u9891\u63a8\u6d41\uff0c\u4ee5\u53ca\u540e\u53f0\u8fd0\u884c</li> <li>\u652f\u6301\u52a8\u6001\u66f4\u6539 Encoding Orientation</li> </ul> <p>\u9879\u76ee\u5730\u5740\uff1ahttps://github.com/upyun/android-push-sdk \u53cd\u9988\u53ca\u5efa\u8bae\uff1alivesdk@upai.com</p>"},{"location":"live/mobile-sdk/#ios-sdk_1","title":"IOS \u64ad\u653e\u5668 SDK","text":""},{"location":"live/mobile-sdk/#_5","title":"\u7cfb\u7edf\u8bf4\u660e","text":"<ul> <li>\u652f\u6301 iOS 8 \u53ca\u4ee5\u4e0a\u7cfb\u7edf\u7248\u672c   </li> <li>\u652f\u6301 ARMv7\uff0cARM64\uff0cx86_64 \u67b6\u6784  </li> </ul>"},{"location":"live/mobile-sdk/#_6","title":"\u529f\u80fd\u8bf4\u660e","text":"<ul> <li>\u652f\u6301 RTMP \u3001HLS \u548c HTTP-FLV \u534f\u8bae\u7684\u76f4\u64ad\u6d41\u5a92\u4f53\u64ad\u653e</li> <li>\u9ad8\u53ef\u5b9a\u5236\uff1a\u53ef\u81ea\u5b9a\u4e49\u5c3a\u5bf8\uff0c\u6309\u94ae\uff0c\u8fdb\u5ea6\u6761\uff0c\u5168\u5c4f\uff0c\u65cb\u8f6c\u7b49 UI \u5c5e\u6027</li> <li>\u652f\u6301\u5355\u97f3\u9891\u64ad\u653e</li> <li>\u652f\u6301 RTMP \u76f4\u64ad\u9996\u5c4f\u79d2\u5f00</li> <li>RTMP \u76f4\u64ad\u7d2f\u79ef\u5ef6\u8fdf\u6d88\u9664\u6280\u672f</li> <li>\u652f\u6301 speex \u89e3\u7801</li> <li>\u97f3\u753b\u540c\u6b65\u8c03\u6574</li> <li>\u4e00\u5c4f\u591a\u753b</li> <li>\u70b9\u64ad\u652f\u6301</li> <li>\u652f\u6301 seek \u529f\u80fd</li> <li>\u89c6\u9891\u7f13\u51b2\u8bbe\u7f6e\uff0c\u7f13\u51b2\u8fdb\u5ea6</li> <li>\u652f\u6301\u9884\u8fde\u63a5\uff0c\u540e\u64ad\u653e\u529f\u80fd</li> <li>\u96c6\u6210\u4eae\u5ea6\u8c03\u6574\u548c\u97f3\u91cf\u8c03\u6574</li> <li>\u652f\u6301\u9759\u97f3\u64ad\u653e</li> <li>\u652f\u6301\u64ad\u653e\u5668\u72b6\u6001\u56de\u8c03</li> <li>\u652f\u6301\u6d41\u4fe1\u606f\uff0c\u64ad\u653e\u5668\u4fe1\u606f\u5bdf\u770b\uff08Dashboard\uff09</li> <li>\u652f\u6301\u64ad\u653e\u672c\u5730\u89c6\u9891\u6587\u4ef6</li> <li>\u96c6\u6210\u64ad\u653e\u8d28\u91cf\u76d1\u63a7  </li> </ul> <p>\u9879\u76ee\u5730\u5740\uff1ahttps://github.com/upyun/ios-live-sdk \u53cd\u9988\u53ca\u5efa\u8bae\uff1alivesdk@upai.com</p>"},{"location":"live/mobile-sdk/#sdk_1","title":"\u5b89\u5353\u64ad\u653e\u5668 SDK","text":""},{"location":"live/mobile-sdk/#_7","title":"\u7cfb\u7edf\u8bf4\u660e","text":"<ul> <li>Android 2.3 (API 9) \u53ca\u5176\u4ee5\u4e0a</li> <li>\u652f\u6301 ARMv5\uff0cARMv7\uff0cARMv8 \u7248\u672c</li> </ul>"},{"location":"live/mobile-sdk/#_8","title":"\u529f\u80fd\u8bf4\u660e","text":"<ul> <li>\u652f\u6301 RTMP \u3001HLS \u548c HTTP-FLV \u534f\u8bae\u7684\u76f4\u64ad\u6d41\u5a92\u4f53\u64ad\u653e</li> <li>\u652f\u6301\u5e38\u89c1\u7684\u97f3\u89c6\u9891\u6587\u4ef6\u64ad\u653e\uff08MP4\u3001M4A\u3001FLV \u7b49\uff09</li> <li>\u652f\u6301 MediaCodec \u786c\u4ef6\u89e3\u7801</li> <li>\u63d0\u4f9b\u64ad\u653e\u5668\u6838\u5fc3\u7c7b PLMediaPlayer</li> <li>\u63d0\u4f9b PLVideoView \u63a7\u4ef6</li> <li>\u652f\u6301\u64ad\u653e\u5668\u97f3\u91cf\u8bbe\u7f6e\uff0c\u53ef\u5b9e\u73b0\u9759\u97f3\u529f\u80fd</li> <li>\u652f\u6301\u7eaf\u97f3\u9891\u64ad\u653e</li> <li>\u652f\u6301\u76f4\u64ad\u7d2f\u79ef\u5ef6\u65f6\u4f18\u5316</li> <li>\u652f\u6301 ARM\uff0cARMv7a\uff0cARM64v8a\uff0cX86 \u4e3b\u6d41\u82af\u7247\u4f53\u7cfb\u67b6\u6784</li> <li>\u53ef\u9ad8\u5ea6\u5b9a\u5236\u5316\u7684 MediaController</li> <li>\u9ad8\u53ef\u5b9a\u5236\uff1a\u53ef\u81ea\u5b9a\u4e49\u5c3a\u5bf8\uff0c\u6309\u94ae\uff0c\u8fdb\u5ea6\u6761\uff0c\u5168\u5c4f\uff0c\u65cb\u8f6c\u7b49 UI \u5c5e\u6027</li> <li>\u5355\u97f3\u9891\u64ad\u653e</li> <li>RTMP \u76f4\u64ad\u9996\u5c4f\u79d2\u5f00\u652f\u6301</li> <li>RTMP \u76f4\u64ad\u7d2f\u79ef\u5ef6\u8fdf\u6d88\u9664\u6280\u672f</li> <li>\u652f\u6301 speex \u89e3\u7801</li> <li>\u97f3\u753b\u540c\u6b65\u8c03\u6574</li> <li>\u652f\u6301\u70b9\u64ad</li> <li>\u652f\u6301 seek \u529f\u80fd</li> <li>\u89c6\u9891\u7f13\u51b2\u8bbe\u7f6e\uff0c\u7f13\u51b2\u8fdb\u5ea6</li> <li>\u652f\u6301\u9884\u8fde\u63a5\uff0c\u540e\u64ad\u653e\u529f\u80fd</li> <li>\u96c6\u6210\u4eae\u5ea6\u8c03\u6574\u548c\u97f3\u91cf\u8c03\u6574</li> <li>\u652f\u6301\u9759\u97f3\u64ad\u653e</li> <li>\u652f\u6301\u64ad\u653e\u5668\u72b6\u6001\u56de\u8c03</li> <li>\u652f\u6301\u6d41\u4fe1\u606f\uff0c\u64ad\u653e\u5668\u4fe1\u606f\u5bdf\u770b\uff08Dashboard\uff09</li> <li>\u652f\u6301\u64ad\u653e\u672c\u5730\u89c6\u9891\u6587\u4ef6</li> </ul> <p>\u9879\u76ee\u5730\u5740\uff1ahttps://github.com/upyun/android-player-sdk \u53cd\u9988\u53ca\u5efa\u8bae\uff1alivesdk@upai.com</p>"},{"location":"live/primary/","title":"\u57fa\u7840\u914d\u7f6e","text":""},{"location":"live/primary/#_1","title":"\u56de\u6e90\u914d\u7f6e","text":"<p>\u53c8\u62cd\u4e91\u76f4\u64ad\u7cfb\u7edf\u652f\u6301\u4e24\u79cd\u670d\u52a1\u7c7b\u578b\uff1a\u53c8\u62cd\u4e91\u6e90\u548c\u81ea\u4e3b\u6e90\u7ad9\u3002</p>"},{"location":"live/primary/#_2","title":"\u53c8\u62cd\u4e91\u6e90","text":"<p>\u53c8\u62cd\u4e91\u6e90\uff1a\u8868\u793a\u6d41\u5a92\u4f53\u5185\u5bb9\u76f4\u63a5\u63a8\u6d41\u5230\u53c8\u62cd\u4e91 CDN \uff0c\u5c06\u63a8\u6d41\u4e0e\u5206\u53d1\u90fd\u8fdb\u884c CDN \u52a0\u901f\u3002\u53c8\u62cd\u4e91\u6e90\u73b0\u4ec5\u652f\u6301 RTMP \u63a8\u6d41\u3002</p> <p>\u7ba1\u7406\u540e\u53f0\uff1a\u521b\u5efa\u670d\u52a1 &gt; \u76f4\u64ad\u52a0\u901f &gt; \u53c8\u62cd\u4e91\u6e90</p> <p>\u521b\u5efa\u53c8\u62cd\u4e91\u6e90\uff0c\u586b\u5199\u670d\u52a1\u540d\u3001\u5df2\u5907\u6848\u7684\u64ad\u653e\u57df\u540d\u548c\u63a8\u6d41\u57df\u540d\uff0c\u63a8\u6d41\u57df\u540d\u4e0e\u64ad\u653e\u57df\u540d\u4e0d\u80fd\u5171\u7528\u3002 \u53ef\u9009\u62e9\u6027\u586b\u5199\u63a5\u5165\u70b9\uff0c\u5982\u679c\u586b\u5199\u4e86\u5177\u4f53\u7684\u63a5\u5165\u70b9\uff0c\u5219\u53ea\u6709\u8be5\u63a5\u5165\u70b9\u7684 URL \u53ef\u8fdb\u884c\u63a8\u6d41\uff0c\u5176\u4ed6\u63a5\u5165\u70b9\u5747\u63a8\u6d41\u5931\u8d25\u3002\u82e5\u6ca1\u6709\u586b\u5199\u5177 \u4f53\u63a5\u5165\u70b9\uff0c\u5219\u4efb\u610f\u63a5\u5165\u70b9\u53ef\u8fdb\u884c\u63a8\u6d41\u3002</p> <p>\u5f53\u63a8\u6d41\u57df\u540d\u586b\u5199 push.com \uff0c\u64ad\u653e\u57df\u540d\u586b\u5199 play.com \uff0c\u63a5\u5165\u70b9\u586b\u5199 live \uff0c\u5982\u679c\u63a8\u6d41 URL \u4e3a  rtmp://push.com/live/stream \u65f6\uff0c\u5176 rtmp \u64ad\u653e URL \u4e3a rtmp://play.com/live/stream \u5176\u4e2d\uff0cstream \u4e3a\u6d41\u540d\uff0c\u53c8\u79f0\u6d41\u5bc6\u94a5\uff0clive/stream \u53c8\u79f0\u4e3a\u9891\u9053\uff0c\u540c\u4e00\u6761\u6d41\u63a8\u62c9\u6d41\u57df\u540d\u4e0d\u540c\uff0c\u4f46\u9891\u9053\u540d\u4e00\u81f4\u3002 \u6ce8\uff1a\u4ee5\u4e0a\u57df\u540d\u3001\u63a5\u5165\u70b9\u53ca\u6d41\u540d\u7684\u547d\u540d\u4ec5\u4e3a\u4e3e\u4f8b\u7528\uff0c\u4e0b\u540c\u3002 </p>"},{"location":"live/primary/#_3","title":"\u81ea\u4e3b\u6e90\u7ad9","text":"<p>\u81ea\u4e3b\u6e90\u7ad9\uff1a\u6d41\u5a92\u4f53\u5185\u5bb9\u5728\u5ba2\u6237\u6e90\u7ad9\uff0c\u53c8\u62cd\u4e91\u901a\u8fc7\u56de\u5ba2\u6237\u6e90\u62c9\u6d41\u7684\u65b9\u5f0f\u5bf9\u5176\u5185\u5bb9\u8fdb\u884c\u5206\u53d1\u3002</p> <p>\u7ba1\u7406\u540e\u53f0\uff1a\u521b\u5efa\u670d\u52a1 &gt; \u76f4\u64ad\u52a0\u901f &gt; \u81ea\u4e3b\u6e90\u7ad9</p> <p>\u81ea\u4e3b\u6e90\u7ad9\u9700\u8981\u660e\u786e\u56de\u6e90\u534f\u8bae\u662f RTMP \u8fd8\u662f HTTP\uff0c\u5e76\u586b\u5199\u6e90\u7ad9 IP \u6216\u8005 \u57df\u540d\uff0c\u56de\u6e90 IP \u73b0\u4e0d\u652f\u6301\u591a\u4e2a\uff0c\u82e5\u56de\u6e90 IP \u4f1a\u7ecf\u5e38\u53d8\u66f4\uff0c\u5efa\u8bae\u6e90\u7ad9\u586b\u5199\u57df\u540d\u5f62\u5f0f\u3002\u5f53\u56de\u6e90\u534f\u8bae\u662f RTMP \u65f6\uff0c\u9ed8\u8ba4\u7aef\u53e3\u662f 1935\uff0c\u5f53\u56de\u6e90\u534f\u8bae\u662f HTTP \u65f6\uff0c\u9ed8\u8ba4\u7aef\u53e3\u4e3a 80\uff0c\u652f\u6301\u7aef\u53e3\u81ea\u5b9a\u4e49\u3002\u56e0\u81ea\u4e3b\u6e90\u7ad9\u662f\u56de\u5ba2\u6237\u6e90\u62c9\u6d41\uff0c\u5219\u65e0\u63a8\u6d41\u57df\u540d\uff0c\u53ea\u9700\u8981\u8bbe\u7f6e\u64ad\u653e\u57df\u540d\u3002</p> <p>HTTP \u534f\u8bae\u56de\u6e90\u65f6\uff0c\u4ee5 HTTP-FLV \u5f62\u5f0f\u56de\u6e90\uff0c\u82e5\u6e90\u4e3a HLS \u53ef\u901a\u8fc7\u6587\u4ef6\u52a0\u901f\u7cfb\u7edf\u521b\u5efa\u670d\u52a1\uff0c\u914d\u7f6e\u56de\u6e90\u4fe1\u606f\u3002  \u63a5\u5165\u70b9\u914d\u7f6e\u8bf4\u660e\u540c\u53c8\u62cd\u4e91\u6e90\u3002</p> <p>\u4ee5\u4e0a\u4e24\u79cd\u4e1a\u52a1\u6a21\u5f0f\uff0c\u5747\u652f\u6301 RTMP\u3001HTTP-FLV \u548c HLS \u64ad\u653e\uff0c\u540e\u7eed\u7ae0\u8282\u4f1a\u8be6\u7ec6\u4ecb\u7ecd\u3002</p>"},{"location":"live/primary/#_4","title":"\u57df\u540d\u7ed1\u5b9a","text":"<p>\u76f4\u64ad\u7ba1\u7406\u540e\u53f0\uff1a\u670d\u52a1 &gt; \u52a0\u901f\u57df\u540d &gt; \u57df\u540d\u7ed1\u5b9a \u6e90\u7ad9\u7c7b\u578b\uff1a\u5168\u90e8</p> <p>\u57df\u540d\u7ed1\u5b9a\u4ec5\u652f\u6301\u5df2\u5907\u6848\u6210\u529f\u7684\u81ea\u5b9a\u4e49\u57df\u540d\u8fdb\u884c\u7ed1\u5b9a\uff0c\u5982\u679c\u8be5\u57df\u540d\u672a\u5907\u6848\u6210\u529f\uff0c\u5219\u4e0d\u80fd\u901a\u8fc7\u57df\u540d\u7ed1\u5b9a\u5ba1\u6838\u3002 \u5ba1\u6838\u7ed3\u679c\u4f1a\u63a7\u5236\u53f0\u548c\u90ae\u4ef6\u4e24\u79cd\u65b9\u5f0f\u8fdb\u884c\u901a\u77e5\uff0c\u6b63\u5e38\u5ba1\u6838\u65f6\u95f4\u4e3a\u4e00\u4e2a\u5de5\u4f5c\u65e5\u3002</p> <p>\u6dfb\u52a0\u57df\u540d\u7ed1\u5b9a\uff0c\u5982\u679c\u662f\u53c8\u62cd\u4e91\u6e90\uff0c\u9700\u8981\u7ed1\u5b9a\u63a8\u6d41\u57df\u540d\u548c\u64ad\u653e\u57df\u540d\uff0c\u5982\u679c\u662f\u81ea\u4e3b\u6e90\u7ad9\uff0c\u5219\u53ea\u9700\u8981\u7ed1\u5b9a\u64ad\u653e\u57df\u540d\u3002\u7ed1\u5b9a\u5b8c\u6210\u540e\uff0c\u9700\u8981\u5230\u57df\u540d\u670d\u52a1\u5546\u7684 DNS \u89e3\u6790\u7ba1\u7406\u4e2d\uff0c\u5c06\u57df\u540d CNAME \u89e3\u6790\u5230\u53c8\u62cd\u4e91\u5185\u90e8\u57df\u540d\u3002</p> <p>\u5f53\u4e1a\u52a1\u6a21\u5f0f\u4e3a\u53c8\u62cd\u4e91\u6e90\u65f6\uff0c\u63a8\u6d41\u57df\u540d CNAME \u89e3\u6790\u5230 <code>&lt;bucket&gt;.s1.aicdn.com</code>\uff0c\u64ad\u653e\u57df\u540d CNAME \u89e3\u6790\u5230 <code>&lt;bucket&gt;.s0.aicdn.com</code>\u3002 \u5f53\u4e1a\u52a1\u6a21\u5f0f\u4e3a\u81ea\u4e3b\u6e90\u7ad9\u65f6\uff0c\u53ea\u9700\u5c06\u64ad\u653e\u57df\u540d CNAME \u89e3\u6790\u5230 <code>&lt;bucket&gt;.s0.aicdn.com</code>\u3002 \u6ce8\uff1a<code>&lt;&gt;</code> \u5185\u7684 bucket \u9700\u8981\u66ff\u6362\u6210\u5bf9\u5e94\u7684\u670d\u52a1\u540d\uff0c\u4e0b\u540c\u3002  </p>"},{"location":"live/primary/#http-flv","title":"HTTP-FLV","text":"<p>\u7ba1\u7406\u540e\u53f0\uff1a\u670d\u52a1 &gt; \u57fa\u7840\u914d\u7f6e &gt; HTTP-FLV \u8f93\u51fa \u6e90\u7ad9\u7c7b\u578b\uff1a\u5168\u90e8</p> <p>\u901a\u8fc7\u7ba1\u7406\u540e\u53f0\uff0c\u53ef\u4ee5\u914d\u7f6e\u4efb\u4e00\u64ad\u653e\u57df\u540d\u4f5c\u4e3a HTTP-FLV \u7684\u8f93\u51fa\u57df\u540d\u3002</p> <p>\u5f53\u63a8\u6d41 url \u4e3a rtmp://push.com/live/stream \u65f6\uff0c\u5bf9\u57df\u540d\u64ad\u653e\u57df\u540d\u5f00\u542f HTTP-FLV \u8f93\u51fa\u914d\u7f6e\u540e\uff0c \u53ef\u4ee5\u901a\u8fc7 http://play.com/live/stream.flv \u8fdb\u884c\u64ad\u653e\u3002</p>"},{"location":"live/primary/#hls","title":"HLS +","text":"<p>\u7ba1\u7406\u540e\u53f0\uff1a\u670d\u52a1 &gt; \u57fa\u7840\u914d\u7f6e &gt; HLS+ \u6e90\u7ad9\u7c7b\u578b\uff1a\u5168\u90e8</p> <p>\u901a\u8fc7\u7ba1\u7406\u540e\u53f0\uff0c\u53ef\u4ee5\u914d\u7f6e\u4efb\u4e00\u64ad\u653e\u57df\u540d\u4f5c\u4e3a HLS \u7684\u8f93\u51fa\u57df\u540d\u3002HLS+ \uff0c\u53c8\u79f0\u4e3a\u6d41\u5f0f HLS \u6280\u672f\uff0c\u662f\u5c06\u6807\u51c6\u7684 HLS \u8fdb\u884c\u6d41\u5f0f\u5904\u7406\uff0c\u5927\u5e45\u5ea6\u964d\u4f4e\u6807\u51c6 HLS \u5ef6\u8fdf\uff0cH5 \u7aef\u76f4\u64ad\u517c\u5bb9\u6027\u66f4\u597d\uff0c\u4e14\u5177\u6709\u56de\u6e90\u91cf\u5c0f\u3001\u7cfb\u7edf\u7b80\u5355\u3001\u6392\u9519\u5bb9\u6613\u3001\u9632\u76d7\u94fe\u3001\u907f\u514d HLS 404 \u7b49\u4f18\u52bf\u3002</p> <p>\u5f00\u542f\u8be5\u914d\u7f6e\u540e\uff0c\u53ef\u901a\u8fc7 http://play.com/live/stream.m3u8 \u5bf9 rtmp://push.com/live/stream \u7684\u63a8\u6d41\u8fdb\u884c\u64ad\u653e\u3002</p> <p>\u8981\u5c06 RTMP \u63a8\u6d41\u8fdb\u884c HLS \u8f6c\u534f\u8bae\u64ad\u653e\uff0c\u63a8\u6d41\u7684\u89c6\u9891\u683c\u5f0f\u4ec5\u652f\u6301 H264\uff0c\u97f3\u9891\u652f\u6301 AAC\uff0cMP3\u3002hls+ \u652f\u6301\u7eaf\u97f3\u9891\u8f93\u51fa\uff0c\u6682\u9700\u53c8\u62cd\u4eba\u5de5\u914d\u7f6e\u3002  </p> <p>HLS+ \u5982\u8981\u4f7f\u7528 https\uff0c\u9700\u8981\u53c8\u62cd\u4eba\u5de5\u589e\u52a0\u914d\u7f6e\u3002</p>"},{"location":"live/primary/#_5","title":"\u63a8\u6d41\u9632\u76d7\u94fe","text":"<p>\u914d\u7f6e\u9700\u63d0\u4f9b\u5bc6\u94a5  \u6e90\u7ad9\u7c7b\u578b\uff1a\u53c8\u62cd\u4e91\u6e90  </p> <p>Token \u9632\u76d7\u94fe\u53ef\u4ee5\u5bf9\u63a8\u6d41\u7684\u8bf7\u6c42\u8fdb\u884c\u6821\u9a8c\uff0c\u53ef\u8bbe\u7f6e token \u6709\u6548\u65f6\u95f4\u548c\u622a\u6b62\u65f6\u95f4\u6765\u63a7\u5236\u63a8\u6d41\u7684\u65f6\u9650\u3002  </p> <p>\u4e00\u4e2a\u542b\u9632\u76d7\u94fe\u7684\u63a8\u6d41\u5730\u5740\u683c\u5f0f\u5982\u4e0b\uff1a  </p> <pre><code>rtmp://push.com/live/stream?domain={domain}&amp;token={token}&amp;valid_ts={valid_ts}&amp;expired_ts={expired_ts}\n\ntoken = MD5(domain/live/stream + valid_ts + expired_ts + secret)\n</code></pre> <p>\u53c2\u6570\u8bf4\u660e\uff1a secret\uff1a\u5bc6\u94a5\uff0c\u7528\u6237\u4e0e\u53c8\u62cd\u7ea6\u5b9a\uff0c\u8981\u6c42 32 \u4f4d\u4ee5\u5185\u7684\u6570\u5b57\u3001\u5927\u5c0f\u5199\u82f1\u6587\u5b57\u6bcd\u3001\u4e2d\u5212\u7ebf\u3001\u4e0b\u5212\u7ebf\u53ca\u7279\u6b8a\u5b57\u7b26 ~ ! @ # $ _ % ^ &amp; * ( ) \u7ec4\u5408\u3002 domain\uff1a\u57df\u540d\uff0c\u5f00\u542f token \u9632\u76d7\u94fe\u7684\u57df\u540d\u3002 valid_ts\uff1a\u6709\u6548\u65f6\u95f4\uff0c\u5728 token \u6709\u6548\u671f\u5185\u540c\u4e00\u6761 token \u63a8\u6d41 URL \u4e00\u76f4\u6709\u6548\uff0c\u670d\u52a1\u5668\u4e0d\u4f1a\u4e3b\u52a8\u65ad\u5f00\uff0cvalid_ts \u5fc5\u987b\u662f UNIX TIME \u683c\u5f0f\uff0c\u5982 1472659200\uff0c\u8868\u793a 2016/9/1 00:00:00\u3002 expired_ts\uff1a\u622a\u6b62\u65f6\u95f4\uff0c\u622a\u6b62\u65f6\u95f4\u5230\u540e\uff0c\u670d\u52a1\u5668\u4e3b\u52a8\u65ad\u5f00\u5df2\u5efa\u7acb\u7684 token \u63a8\u6d41\u8fde\u63a5\uff0cexpired_ts \u5fc5\u987b\u662f UNIX TIME \u683c\u5f0f\uff0c\u5982 1473004800\uff0c\u8868\u793a 2016/9/5 00:00:00\u3002  </p> <pre><code>\u793a\u4f8b\uff1a  \n\u63a8\u6d41 URL \u4e3a rtmp://push.com/live/stream\uff0c  \n\u5219 domain = push.com\uff0c  \n\u5047\u8bbe\u7ea6\u5b9a secret = a1b2c3d4e53gxwb07\uff0c\u6709\u6548\u65f6\u95f4 valid_ts = 1472659200\uff0c\u622a\u6b62\u65f6\u95f4 expired_ts = 1473004800\uff0c  \n\u90a3\u4e48 token = MD5(push.com/live/stream14726592001473004800a1b2c3d4e53gxwb07) \n           = 8405243ad35e5d08b9621110a15b0a12    \n\u5219rtmp://push.com/live/stream?domain=push.com&amp;token=8405243ad35e5d08b9621110a15b0a12  \n&amp;valid_ts=1472659200&amp;expired_ts=1473004800\uff0c \u8be5 token \u9632\u76d7\u94fe\u5728 2016/9/1 00:00:00 \u4e4b\u524d\u63a8\u6d41\u90fd\u6709\u6548\uff0c  \n\u800c\u65f6\u95f4\u5230 2016/9/5 00:00:00 \u540e\uff0c\u6240\u6709\u7684\u63a8\u6d41\u8fde\u63a5\u90fd\u5c06\u88ab\u670d\u52a1\u5668\u65ad\u5f00\u3002  \n</code></pre> <p>\u6709\u6548\u65f6\u95f4\u4e0e\u622a\u6b62\u65f6\u95f4\u7684\u7ec4\u5408\u80fd\u5e2e\u52a9\u7528\u6237\u7b80\u5355\u5b9e\u73b0\u590d\u6742\u5e94\u7528\u573a\u666f\uff0c\u8bbe\u7f6e\u6709\u6548\u65f6\u95f4\uff0c\u53ef\u4ee5\u8ba9\u6709\u6548\u65f6\u95f4\u6765\u63a7\u5236\u672c\u6b21\u751f\u6210\u7684 token \u9632\u76d7\u94fe\u7684\u53ef\u7528\u65f6\u957f\uff0c\u8bbe\u7f6e\u622a\u6b62\u65f6\u95f4\uff0c\u53ef\u4ee5\u63a7\u5236\u670d\u52a1\u5668\u5728\u622a\u6b62\u65f6\u95f4\u5230\u540e\u65ad\u5f00\u5ba2\u6237\u7aef\u63a8\u6d41\u8fde\u63a5\uff0c\u4fbf\u4e8e\u7528\u6237\u7ec6\u5206\u5176\u4e0d\u540c\u5ba2\u6237\u7fa4\uff0c\u8fdb\u884c\u76f8\u5173\u6743\u9650\u63a7\u5236\u3002 \u6709\u6548\u65f6\u95f4\u4e0e\u622a\u6b62\u65f6\u95f4\u53ef\u540c\u65f6\u4f7f\u7528\uff0c\u4e5f\u53ef\u4e8c\u9009\u4e00\u3002  </p> <pre><code>\u5f53\u53ea\u4f7f\u7528\u6709\u6548\u65f6\u95f4\u65f6\uff0c\u5230\u6709\u6548\u65f6\u95f4\u540e\uff0c\u8be5 token \u5931\u6548\uff0c\u4f46\u670d\u52a1\u5668\u4e0d\u4f1a\u4e3b\u52a8\u65ad\u5f00\u5efa\u7acb\u7684\u5ba2\u6237\u7aef token \u8fde\u63a5\u3002  \n\nrtmp://push.com/live/stream?domain={domain}&amp;token={token}&amp;valid_ts={valid_ts}  \n\ntoken = MD5(domain/live/stream + valid_ts + secret)  \n</code></pre> <pre><code>\u5f53\u53ea\u4f7f\u7528\u622a\u6b62\u65f6\u95f4\u65f6\uff0c\u5230\u622a\u6b62\u65f6\u95f4\u540e\uff0c\u670d\u52a1\u5668\u4e3b\u52a8\u65ad\u5f00\u5df2\u6709\u7684\u5ba2\u6237\u7aef token \u8fde\u63a5\uff0c\u5728\u622a\u6b62\u65f6\u95f4\u524d\uff0c\u8be5 token \u63a8\u6d41\u5747\u53ef\u7528\u3002  \n\nrtmp://push.com/live/stream?domain={domain}&amp;token={token}&amp;expired_ts={expired_ts} \n\ntoken = MD5(domain/live/stream + expired_ts + secret)  \n</code></pre> <p>\u6ce8\uff1a\u8ba1\u7b97\u516c\u5f0f\u4e2d\u7684 secret\uff0c\u5ba2\u6237\u9700\u59a5\u5584\u4fdd\u7ba1\uff0c\u8c28\u9632\u5916\u6cc4\u3002 \u6ce8\uff1aMD5 \u540e\u8ba1\u7b97\u51fa\u7684 token \u503c\u662f 32 \u4f4d\u7684\uff0c\u5fc5\u987b\u5c0f\u5199\u3002 \u63a8\u6d41\u6682\u4ec5\u652f\u6301 token \u9632\u76d7\u94fe\u3002 </p> <p>\u5173\u4e8e token \u7684\u63a8\u6d41\uff0c\u60a8\u53ef\u4ee5\u53c2\u8003\u8fd9\u91cc\u7684\u6f14\u793a\u4ee3\u7801\u3002</p>"},{"location":"live/primary/#_6","title":"\u62c9\u9632\u76d7\u94fe","text":"<p>\u62c9\u6d41\u9632\u76d7\u94fe\u53ea\u9488\u5bf9\u64ad\u653e\u57df\u540d\uff0cHTTP \u534f\u8bae\u62c9\u6d41\u9632\u76d7\u94fe\u89c4\u5219\u540c\u6587\u4ef6\u52a0\u901f\uff0c\u5305\u62ec IP \u7981\u7528\u3001\u5730\u533a\u8bbf\u95ee\u9650\u5236\u3001\u56de\u6e90\u9274\u6743\u3001Token \u9632\u76d7\u94fe\u3001\u57df\u540d\u9632\u76d7\u94fe\u7b49\u3002\u8be6\u7ec6\u89c4\u5219\u89c1\u6587\u4ef6\u52a0\u901f \u9632\u76d7\u94fe\u3002 </p> <p>\u62c9\u6d41\u6682\u4ec5\u652f\u6301 HTTP-FLV \u548c HLS \u9632\u76d7\u94fe\u3002</p>"},{"location":"misc/discuz/","title":"Discuz","text":"<p>Discuz \u7528\u6237\u9700\u8981\u4f7f\u7528 UPYUN \u6709\u4ee5\u4e0b\u4e24\u4e2a\u65b9\u6cd5\uff1a</p>"},{"location":"misc/discuz/#_1","title":"\u901a\u8fc7\u8bba\u575b\u81ea\u5e26\u7684\u8fdc\u7a0b\u9644\u4ef6\u529f\u80fd","text":"<p>\u4f7f\u7528 Discuz \u7684\u8fdc\u7a0b\u9644\u4ef6\u529f\u80fd\uff0c\u53ef\u5c06\u8bba\u575b\u9644\u4ef6\u5168\u90e8\u5b58\u653e\u5230 UPYUN \u4e0a\u3002</p> <p>\u5177\u4f53\u53ef\u6309\u5982\u4e0b\u6b65\u9aa4\uff1a</p> <ol> <li> <p>\u524d\u671f\u51c6\u5907\uff1a</p> <ul> <li> <p>\u5728 UPYUN \u4e0a\u521b\u5efa\u4e00\u4e2a\u6587\u4ef6\u7c7b\u7a7a\u95f4\u3002 \u6ce8\u610f\uff1a\u5fc5\u987b\u662f\u6587\u4ef6\u7c7b\u7a7a\u95f4\uff0c\u4e0d\u80fd\u662f\u56fe\u7247\u7c7b\u7a7a\u95f4\uff0cdiscuz \u9644\u4ef6\u542b\u591a\u79cd\u7c7b\u578b\u6587\u4ef6</p> </li> <li> <p>\u83b7\u53d6\u7a7a\u95f4\u7684 FTP \u5e10\u53f7\u4fe1\u606f\u3002</p> </li> </ul> </li> <li> <p>\u8bbe\u7f6e\u6b65\u9aa4\uff1a</p> <p>\u6ce8\uff1a\u76ee\u524d\u7248\u672c\u7684 discuz \u7ed1\u5b9a UPYUN\uff0c\u7ecf\u8fc7 discuz \u5b98\u65b9\u6d4b\u8bd5\uff0c\u987b\u589e\u52a0 2 \u884c\u6d4b\u8bd5\u4ee3\u7801\uff0cdiscuz \u5b98\u65b9\u5df2\u5728\u6700\u65b0\u7684\u7248\u672c\u4e2d\u589e\u52a0\uff0c\u4f1a\u5728\u4e0b\u6b21\u53d1\u5e03\u65f6\u66f4\u65b0\u3002</p> <p>\u76ee\u524d\u60a8\u53ef\u4ee5\u624b\u52a8\u4fee\u6539\u4ee3\u7801\u6216\u8df3\u8fc7\u6d4b\u8bd5\u8fdc\u7a0b\u9644\u4ef6\u5373\u53ef\u3002 \u624b\u52a8\u6dfb\u52a0\u65b9\u6cd5\u89c1\u5e16\u5b50\u6700\u540e\u3002</p> <p>\u5728\u8bba\u575b\u540e\u53f0\u627e\u5230\u8bbe\u7f6e\u8fdc\u7a0b\u9644\u4ef6\u529f\u80fd\uff0c\u7ba1\u7406\u540e\u53f0 =&gt; \u5168\u5c40 =&gt; \u4e0a\u4f20\u8bbe\u7f6e\uff08\u6216\u9644\u4ef6\u8bbe\u7f6e\uff09 =&gt; \u8fdc\u7a0b\u9644\u4ef6\uff1a\u9009\u62e9\u201c\u542f\u7528\u8fdc\u7a0b\u9644\u4ef6\u201d\uff0c\u7136\u540e\u8bbe\u7f6e FTP \u5e10\u53f7\u4fe1\u606f\uff0c\u5982\u4e0b\u56fe\u6240\u793a\uff1a </p> </li> <li> <p>\u8bba\u575b\u539f\u6709\u7684\u9644\u4ef6\u5904\u7406</p> <p>\u5982\u679c\u60a8\u60f3\u628a\u8bba\u575b\u539f\u6709\u7684\u9644\u4ef6\u4e5f\u642c\u5230 UPYUN\uff0c\u60a8\u53ea\u8981 2 \u6b65\u64cd\u4f5c\uff1a</p> <p>a\u3001\u628a\u539f\u6709\u9644\u4ef6\u901a\u8fc7 FTP \u4e0a\u4f20\u5230\u4e91\u5b58\u50a8\u7a7a\u95f4\u7684\u76f8\u5e94\u4f4d\u7f6e</p> <p>b\u3001\u628a\u9644\u4ef6\u8868\u7684 remote \u5b57\u6bb5\u7684\u5c5e\u6027\u6539\u4e3a 1</p> </li> <li> <p>\u5230\u8fd9\u4e00\u6b65\uff0c\u606d\u559c\u60a8\uff0c\u60a8\u7684\u9644\u4ef6\u5df2\u7ecf\u6258\u7ba1\u5230 UPYUN\uff0c\u8fd9\u4e0b\u60a8\u4e0d\u7528\u62c5\u5fc3\u9644\u4ef6\u7684\u5b89\u5168\u53ca\u6027\u80fd\u95ee\u9898\u4e86\u3002</p> </li> </ol> <p>\u9644\u5f55\u4e00\uff1a</p> <ul> <li> <p>\u624b\u52a8\u4fee\u6539\u6d4b\u8bd5\u7a0b\u5e8f\u4ee3\u7801\uff1a</p> <p>\u6253\u5f00\uff1asource/admincp/admincp_checktools.php</p> </li> <li> <p>\u627e\u5230\uff1a</p> </li> </ul> <pre><code>function getremotefile($file) {\n\n    global $_G;\n\n    @set_time_limit(0);\n\n    $str = @implode('', @file($file));\n\n    if(!$str) {\n\n        $str = dfsockopen($file);\n\n    }\n\n    return $str;\n\n}\n</code></pre> <p>\u66ff\u6362\u4e3a\uff1a</p> <pre><code>function getremotefile($file) {\n\n    global $_G;\n\n    $file = $file.'?'.rand();\n\n    @set_time_limit(0);\n\n    $str = @implode('', @file($file));\n\n    if(!$str) {\n\n        $str = dfsockopen($file);\n\n    }\n\n    return $str;\n\n}\n</code></pre> <ul> <li>\u627e\u5230</li> </ul> <pre><code>ftpcmd('delete', $testfile);\n</code></pre> <p>\u589e\u52a0\u4e00\u884c:</p> <pre><code>ftpcmd('delete', 'test/index.htm');\n</code></pre>"},{"location":"misc/discuz/#upyun","title":"\u5b89\u88c5\u4f7f\u7528 UPYUN \u5b98\u65b9\u63d2\u4ef6","text":""},{"location":"misc/discuz/#discuz-x3x31x32","title":"Discuz X3\u3001X3.1\u3001X3.2","text":""},{"location":"misc/discuz/#_2","title":"\u63d2\u4ef6\u4e0b\u8f7d","text":"<ul> <li>\u6700\u65b0\u7248\u63d2\u4ef6(v1.0) \u4e0b\u8f7d\uff1aGithub</li> <li>\u6700\u65b0\u7248\u63d2\u4ef6(v1.0) \u5b89\u88c5\u4f7f\u7528\u624b\u518c\u4e0b\u8f7d\uff1aPdf \u7248 | Html \u7248</li> </ul>"},{"location":"misc/discuz/#_3","title":"\u7248\u672c\u66f4\u65b0\u8bf4\u660e","text":"<p>v1.0 \u66f4\u65b0\u8bf4\u660e</p> <ul> <li>\u4e0d\u517c\u5bb9 v0.1 \u7248\u672c</li> <li>\u7b80\u5316\u914d\u7f6e\uff0c\u4e0d\u518d\u533a\u5206\u6587\u4ef6\u548c\u56fe\u7247\u7a7a\u95f4\u3002UPYUN \u5408\u5e76\u4e86\u6587\u4ef6\u548c\u56fe\u7247\u7a7a\u95f4</li> <li>\u589e\u52a0\u5206\u5757\u4e0a\u4f20\u652f\u6301\uff0c\u5927\u5927\u63d0\u5347\u4e0a\u4f20\u7684\u7a33\u5b9a\u6027\u548c\u901f\u5ea6</li> <li>\u589e\u52a0 Discuz X3.1 \u548c X3.2 \u7248\u672c\u7684\u652f\u6301</li> <li>\u53d6\u6d88\u672c\u5730\u56fe\u7247\u548c\u6587\u4ef6\u7684\u5907\u4efd</li> <li>\u4f18\u5316 Token \u9632\u76d7\u94fe\uff08\u9700\u8981\u5c06\u8bba\u575b\u57df\u540d\u7ed1\u5b9a\u5230 UPYUN \u7a7a\u95f4\uff09</li> </ul> <p>v0.1 \u66f4\u65b0\u8bf4\u660e</p> <ul> <li>\u4ee3\u66ff\u539f\u6709\u8fdc\u7a0b\u9644\u4ef6\u7e41\u7410\u7684\u8bbe\u7f6e\u6b65\u9aa4\uff0c\u4ec5\u9700\u5728\u63d2\u4ef6\u4e2d\u8bbe\u7f6e\u7a7a\u95f4\uff0c\u64cd\u4f5c\u5458\uff0c\u5bc6\u7801\u7b49\u4fe1\u606f\u5373\u53ef\u4f7f\u7528 UPYUN \u670d\u52a1\uff1b</li> <li>\u5c06 Discuz \u81ea\u5e26\u7684 FTP \u4e0a\u4f20\u6838\u5fc3\u6574\u4f53\u66ff\u6362\u6210 HTTP \u4e0a\u4f20\uff0c\u63d0\u5347\u4e0a\u4f20\u901f\u5ea6\u3001\u7a33\u5b9a\u6027\u548c\u517c\u5bb9\u6027\uff1b</li> <li>\u89e3\u51b3\u90e8\u5206\u5ba2\u6237\u7531\u4e8e\u865a\u62df\u4e3b\u673a\u6743\u9650\u9650\u5236\u5bfc\u81f4\u65e0\u6cd5\u4f7f\u7528 Discuz \u81ea\u5e26 FTP \u8fdc\u7a0b\u9644\u4ef6\u7684\u95ee\u9898\uff1b</li> <li>\u4e0a\u4f20\u7684\u56fe\u7247\u548c\u6587\u4ef6\u5206\u7a7a\u95f4\u5b58\u653e\uff0c\u5e76\u53ef\u6307\u5b9a\u4e0d\u540c\u57df\u540d\uff1b</li> <li>\u89e3\u51b3\u4e0b\u8f7d\u8bba\u575b\u975e\u56fe\u7247\u9644\u4ef6\u4e8c\u6b21\u6d41\u91cf\u95ee\u9898\uff1b</li> <li>\u652f\u6301\u672c\u5730\u56fe\u7247\u3001\u6587\u4ef6\u5907\u4efd\uff1b</li> <li>\u975e\u56fe\u7247\u9644\u4ef6\u652f\u6301 token \u9632\u76d7\u94fe\uff1b</li> <li>\u9644\u5e26 API \u63a5\u5165\u70b9\u6d4b\u901f\u5c0f\u5de5\u5177\uff1b</li> <li>\u589e\u52a0\u624b\u52a8 API \u63a5\u5165\u70b9\u8bbe\u7f6e\u529f\u80fd\uff0c\u6839\u636e\u6d4b\u901f\u5de5\u5177\u68c0\u6d4b\u7ed3\u679c\uff0c\u9009\u62e9\u6700\u5feb\u7684 API \u63a5\u5165\u70b9\uff1b</li> </ul>"},{"location":"misc/discuz/#discuz-x25","title":"Discuz X2.5","text":""},{"location":"misc/discuz/#_4","title":"\u63d2\u4ef6\u4e0b\u8f7d","text":"<ul> <li>\u6700\u65b0\u7248\u63d2\u4ef6(v0.4.1) \u4e0b\u8f7d\uff1aZip \u538b\u7f29\u5305 | 7z \u538b\u7f29\u5305</li> <li>\u6700\u65b0\u7248\u63d2\u4ef6(v0.4.1) \u5b89\u88c5\u4f7f\u7528\u624b\u518c\u4e0b\u8f7d\uff1aWord \u7248 | Pdf \u7248</li> </ul>"},{"location":"misc/discuz/#_5","title":"\u7248\u672c\u66f4\u65b0\u8bf4\u660e","text":"<p>v0.4.1 \u66f4\u65b0\u8bf4\u660e</p> <ul> <li>\u4f18\u5316\u5bf9 PHP 5.2.x \u7684\u652f\u6301\uff0c\u89e3\u51b3 PHP 5.2.x \u7248\u672c\u7528\u6237 diy \u6a21\u5757\u548c\u56fe\u7247\u66f4\u65b0\u51fa\u9519\u3001\u5e16\u5b50\u65e0\u6cd5\u63a8\u9001\u7684 bug\u3002</li> <li>PHP 5.3.x \u7248\u672c\u7528\u6237\u53ef\u4e0d\u66f4\u65b0\u6b64\u7248\u672c\u63d2\u4ef6</li> </ul> <p>v0.4 \u66f4\u65b0\u8bf4\u660e</p> <ul> <li>\u65b0\u589e\u624b\u52a8 API \u63a5\u5165\u70b9\u8bbe\u7f6e\u529f\u80fd\uff0c\u6839\u636e\u6d4b\u901f\u5de5\u5177\u68c0\u6d4b\u7ed3\u679c\uff0c\u9009\u62e9\u6700\u5feb\u7684 API \u63a5\u5165\u70b9\uff1b</li> <li>\u65b0\u589e API \u63a5\u5165\u70b9\u6d4b\u901f\u5c0f\u5de5\u5177\uff1b</li> <li>\u4f18\u5316\u56fe\u7247\u7c7b\u9644\u4ef6\u4e0b\u8f7d\uff0c\u5b9e\u73b0\u6d4f\u89c8\u5668\u4e0b\u8f7d\u4fdd\u5b58\u56fe\u7247\u9644\u4ef6\uff08\u4e4b\u524d\u7248\u672c\u53ef\u80fd\u4f1a\u5b58\u5728\u6d4f\u89c8\u5668\u76f4\u63a5\u6253\u5f00\u9884\u89c8\u56fe\u7247\u7684\u60c5\u51b5\uff09\uff1b</li> <li>\u4f18\u5316\u9644\u4ef6\u4e0b\u8f7d\u540e\u6587\u4ef6\u540d\u547d\u540d\uff0c\u907f\u514d\u4e0b\u8f7d\u540e\u9644\u4ef6\u6587\u4ef6\u540d\u88ab\u4fee\u6539\u6210\u968f\u673a\u4e71\u7801\u3002</li> </ul> <p>v0.3 \u66f4\u65b0\u8bf4\u660e</p> <ul> <li>\u5c06 Discuz \u81ea\u5e26\u7684 FTP \u4e0a\u4f20\u6838\u5fc3\u6574\u4f53\u66ff\u6362\u6210 HTTP \u4e0a\u4f20\uff0c\u63d0\u5347\u4e0a\u4f20\u901f\u5ea6\u3001\u7a33\u5b9a\u6027\u548c\u517c\u5bb9\u6027\uff1b</li> <li>\u89e3\u51b3\u90e8\u5206\u7531\u4e8e\u865a\u62df\u4e3b\u673a\u6743\u9650\u9650\u5236\u5bfc\u81f4\u65e0\u6cd5\u4f7f\u7528\u8fdc\u7a0b\u9644\u4ef6\u7684\u95ee\u9898\uff1b</li> </ul> <p>v0.2 \u66f4\u65b0\u8bf4\u660e</p> <ul> <li>\u4f18\u5316\u4e0a\u4f20\u4ee3\u7801\uff0c\u63d0\u5347\u4e0a\u4f20\u901f\u5ea6\u548c\u6548\u7387\uff1b</li> <li>\u4fee\u590d discuz \u5b98\u65b9\u8fdc\u7a0b\u9644\u4ef6\u4e2d\u65e0\u6cd5\u5220\u9664\u8fdc\u7aef\u7a7a\u95f4\u6587\u4ef6\u7684 Bug\uff1b</li> <li>\u7531\u4e8e discuz \u5b98\u65b9\u8fdc\u7a0b\u9644\u4ef6\u4ee3\u7801 Bug\uff0c\u65e0\u6cd5\u652f\u6301\u81ea\u5b9a\u4e49\u8def\u5f84\uff0c\u6240\u4ee5\u63d2\u4ef6\u6682\u65f6\u53d6\u6d88\u81ea\u5b9a\u4e49\u6587\u4ef6\u8def\u5f84\u8bbe\u7f6e\u529f\u80fd</li> <li>\u8bbe\u7f6e\u8868\u5355\u4e2d\u6dfb\u52a0\u5bc6\u94a5\u9ed8\u8ba4\u6709\u6548\u65f6\u95f4 900 \u79d2\u3002</li> </ul> <p>v0.1 \u529f\u80fd\u4ecb\u7ecd</p> <ul> <li>\u4ee3\u66ff\u539f\u6709\u8fdc\u7a0b\u9644\u4ef6\u7e41\u7410\u7684\u8bbe\u7f6e\u6b65\u9aa4\uff0c\u4ec5\u9700\u5728\u63d2\u4ef6\u4e2d\u8bbe\u7f6e\u7a7a\u95f4\uff0c\u64cd\u4f5c\u5458\uff0c\u5bc6\u7801\u7b49\u4fe1\u606f\u5373\u53ef\u4f7f\u7528 UPYUN \u670d\u52a1\uff1b</li> <li>\u4e0a\u4f20\u7684\u56fe\u7247\u548c\u6587\u4ef6\u5206\u7a7a\u95f4\u5b58\u653e\uff0c\u5e76\u53ef\u6307\u5b9a\u4e0d\u540c\u57df\u540d\uff1b</li> <li>\u89e3\u51b3\u5b98\u65b9\u8fdc\u7a0b\u9644\u4ef6\u4e0b\u8f7d\u65f6\u4ecd\u7136\u8c03\u7528\u672c\u5730\u9644\u4ef6\u5730\u5740\u7684\u95ee\u9898\uff1b</li> <li>\u652f\u6301\u672c\u5730\u56fe\u7247\u3001\u6587\u4ef6\u5907\u4efd\uff1b</li> <li>\u9644\u4ef6\u4e0b\u8f7d\u652f\u6301\u9632\u76d7\u94fe\u3002</li> </ul>"},{"location":"misc/discuz/#_6","title":"\u5e38\u89c1\u95ee\u7b54","text":"<p>\u95ee\uff1a\u5982\u679c\u6587\u4ef6\u6743\u9650\u6ca1\u6709\u4fee\u6539\u597d\u5c31\u76f4\u63a5\u5b89\u88c5\u4e86\u63d2\u4ef6\uff0c\u8be5\u600e\u4e48\u529e\uff1f \u7b54\uff1a\u53ef\u4ee5\u5378\u8f7d\u63d2\u4ef6\uff0c\u7136\u540e\u4fee\u6539\u6587\u4ef6\u6743\u9650\uff0c\u518d\u6b21\u5b89\u88c5\u3002\u6216\u8005\u4e5f\u53ef\u4ee5\u6309\u7167\u5b89\u88c5\u8bf4\u660e\u4e2d\u9644\u4ef6\u7684\u6587\u4ef6\u4fee\u6539\u8bf4\u660e\uff0c\u624b\u52a8\u4fee\u6539\u4e09\u4e2a\u6587\u4ef6\u7684\u4ee3\u7801</p> <p>\u95ee\uff1a\u63d2\u4ef6\u6b63\u786e\u5b89\u88c5\u4e14\u53c2\u6570\u8bbe\u7f6e\u6b63\u786e\uff0c\u4f46\u662f\u4e0a\u4f20\u540e\u663e\u793a\u7684\u5730\u5740\u8fd8\u662f\u672c\u5730\u7684\uff1f \u7b54\uff1a\u5c1d\u8bd5\u8fdb\u5165\u540e\u53f0\u66f4\u65b0\u8bba\u575b\u6570\u636e\u7f13\u5b58</p> <p>\u95ee\uff1a\u63d2\u4ef6\u4e2d\u8bbe\u7f6e\u4e86\u53c2\u6570\uff0c\u8fd8\u9700\u8981\u5728\u8fdc\u7a0b\u9644\u4ef6\u4e2d\u8bbe\u7f6e\u4e48\uff1f \u7b54\uff1a\u4e0d\u9700\u8981\uff0c\u63d2\u4ef6\u4f1a\u81ea\u52a8\u4fee\u6539\u8fdc\u7a0b\u9644\u4ef6\u7684\u8bbe\u7f6e\uff0c\u6240\u4ee5\u53ea\u9700\u8981\u5728\u63d2\u4ef6\u4e2d\u8bbe\u7f6e\u76f8\u5173\u53c2\u6570\u5373\u53ef\uff0c\u8fdc\u7a0b\u9644\u4ef6\u8bbe\u7f6e\u8868\u5355\u65e0\u9700\u4fee\u6539</p>"},{"location":"misc/phpwind/","title":"Phpwind","text":"<p>Phpwind \u7528\u6237\u9700\u8981\u4f7f\u7528 UPYUN \u6709\u4ee5\u4e0b\u4e24\u4e2a\u65b9\u6cd5\uff1a</p>"},{"location":"misc/phpwind/#_1","title":"\u901a\u8fc7\u8bba\u575b\u81ea\u5e26\u7684\u8fdc\u7a0b\u9644\u4ef6\u529f\u80fd","text":"<p>\u4f7f\u7528 phpwind \u7684\u8fdc\u7a0b\u9644\u4ef6\u529f\u80fd\uff0c\u53ef\u5c06\u8bba\u575b\u9644\u4ef6\u5168\u90e8\u5b58\u653e\u5230 UPYUN \u4e0a\u3002\u7ecf\u8fc7 phpwind \u5b98\u65b9\u6d4b\u8bd5\uff0c\u53ef\u6b63\u5e38\u4f7f\u7528\u3002</p> <ol> <li> <p>\u524d\u671f\u51c6\u5907\uff1a</p> <ul> <li> <p>\u5728 UPYUN \u4e0a\u521b\u5efa\u4e00\u4e2a\u6587\u4ef6\u7c7b\u7a7a\u95f4\u3002 \u6ce8\u610f\uff1a\u5fc5\u987b\u662f\u6587\u4ef6\u7c7b\u7a7a\u95f4\uff0c\u4e0d\u80fd\u662f\u56fe\u7247\u7c7b\u7a7a\u95f4\uff0cphpwind \u9644\u4ef6\u542b\u591a\u79cd\u7c7b\u578b\u6587\u4ef6</p> </li> <li> <p>\u83b7\u53d6\u521a\u624d\u521b\u5efa\u7a7a\u95f4\u7684 FTP \u5e10\u53f7\u4fe1\u606f</p> </li> </ul> </li> <li> <p>\u8bbe\u7f6e\u6b65\u9aa4\uff1a     </p> </li> <li> <p>\u8bba\u575b\u539f\u6709\u9644\u4ef6\u9700\u8981\u901a\u8fc7 ftp \u4e0a\u4f20\u5230\u4e91\u5b58\u50a8\u7a7a\u95f4\u7684\u76f8\u5e94\u4f4d\u7f6e</p> </li> <li> <p>\u5230\u8fd9\u4e00\u6b65\uff0c\u606d\u559c\u60a8\uff0c\u60a8\u7684\u9644\u4ef6\u5df2\u7ecf\u6258\u7ba1\u5230 UPYUN\uff0c\u8fd9\u4e0b\u60a8\u4e0d\u7528\u62c5\u5fc3\u9644\u4ef6\u7684\u5b89\u5168\u53ca\u6027\u80fd\u95ee\u9898\u4e86\u3002</p> </li> </ol>"},{"location":"misc/phpwind/#upyun","title":"\u5b89\u88c5\u4f7f\u7528 UPYUN \u5b98\u65b9\u63d2\u4ef6","text":""},{"location":"misc/phpwind/#v03","title":"v0.3","text":"<ul> <li>UPYUN \u9644\u4ef6\u52a9\u624b\uff08PW\uff09v0.3 \u4e0b\u8f7d\u5730\u5740\uff1aZip \u538b\u7f29\u5305 | 7z \u538b\u7f29\u5305</li> <li>UPYUN \u9644\u4ef6\u52a9\u624b\uff08PW\uff09v0.3 \u5b89\u88c5\u4f7f\u7528\u624b\u518c\uff1aWord \u7248 | Pdf \u7248</li> </ul>"},{"location":"misc/phpwind/#v02","title":"v0.2","text":"<ul> <li>UPYUN \u9644\u4ef6\u52a9\u624b\uff08PW\uff09v0.2 \u4e0b\u8f7d\u5730\u5740\uff1aZip \u538b\u7f29\u5305 | 7z \u538b\u7f29\u5305</li> <li>UPYUN \u9644\u4ef6\u52a9\u624b\uff08PW\uff09v0.2 \u5b89\u88c5\u4f7f\u7528\u624b\u518c\uff1a Word \u7248 | Pdf \u7248</li> </ul>"},{"location":"misc/phpwind/#_2","title":"\u7248\u672c\u66f4\u65b0\u8bf4\u660e","text":"<p>v0.3 \u66f4\u65b0\u8bf4\u660e \u5b8c\u5584\u4e86\u65b0\u7248\u7684\u517c\u5bb9\u95ee\u9898\uff08\u9488\u5bf9 20130227 \u5347\u7ea7\u5305\uff09\uff0c20130227 \u5347\u7ea7\u5305\u524d\u7684\u7248\u672c\u8bf7\u4f7f\u7528 0.2 \u7248</p> <p>v0.2 \u66f4\u65b0\u8bf4\u660e \u5c06\u539f\u6709 FTP \u8fdc\u7a0b\u9644\u4ef6\u5b58\u50a8\u6a21\u5f0f\u4fee\u6539\u6210 UPYUN \u8fdc\u7a0b\u9644\u4ef6\u4e91\u5b58\u50a8\u65b9\u5f0f\uff0c\u66f4\u9ad8\u901f\u7a33\u5b9a\u4e0a\u4f20\u9644\u4ef6\u548c\u56fe\u7247\u5230 UPYUN\uff1b</p> <p>v0.1 \u66f4\u65b0\u8bf4\u660e \u65e0\u9700\u8fdb\u884c\u7e41\u7410\u7684\u8fdc\u7a0b\u9644\u4ef6\u8bbe\u7f6e\uff0c\u4ec5\u9700\u5728\u63d2\u4ef6\u4e2d\u8bbe\u7f6e\u7a7a\u95f4\uff0c\u64cd\u4f5c\u5458\uff0c\u5bc6\u7801\uff0c\u8bbf\u95ee\u57df\u540d\uff0c\u8fdc\u7a0b\u76ee\u5f55\u7b49\u4fe1\u606f\u5373\u53ef\u4f7f\u7528 UPYUN \u670d\u52a1\uff1b</p>"},{"location":"misc/ueditor/","title":"Ueditor","text":"<p>UEditor\u7528\u6237\u73b0\u5728\u4e5f\u53ef\u4ee5\u628a UPYUN \u670d\u52a1\u96c6\u6210\u8fdb\u53bb\uff0c\u8f7b\u677e\u628a\u56fe\u7247\u548c\u9644\u4ef6\u4e0a\u4f20\u5230\u4f60\u7684 UPYUN \u7a7a\u95f4\u3002</p>"},{"location":"misc/ueditor/#_1","title":"\u66f4\u65b0\u8bf4\u660e","text":"<p>V0.2 \u66f4\u65b0\uff1a</p> <ul> <li>\u4f18\u5316 0.1 \u7248\u7684\u4ee3\u7801\uff0c\u589e\u52a0\u5b8c\u5584\u4e86\u9519\u8bef\u5224\u65ad\uff1b</li> </ul>"},{"location":"misc/ueditor/#_2","title":"\u4f7f\u7528\u987b\u77e5","text":"<ul> <li>\u5df2\u7ecf\u5b89\u88c5\u90e8\u7f72\u767e\u5ea6\u7f16\u8f91\u5668 UEditor</li> <li>\u5de5\u5177\u662f\u57fa\u4e8e UPYUN \u670d\u52a1\u7684\uff0c\u4f7f\u7528\u9700\u8981\u6709\u6709\u6548\u7684 UPYUN \u5e10\u53f7\uff0c\u8fd8\u6ca1\u6709\u5e10\u53f7\u7684\u7528\u6237\uff0c\u53ef\u4ee5\u70b9\u51fb\u514d\u8d39\u6ce8\u518c\u8d26\u53f7</li> </ul>"},{"location":"misc/ueditor/#_3","title":"\u5b89\u88c5\u8bf4\u660e","text":"<p>1. \u5b98\u7f51\u4e0b\u8f7d\u5de5\u5177\u5305upyun_ueditor.zip\uff1b</p> <p>2. \u89e3\u538b\u5230\u4efb\u610f\u76ee\u5f55\uff0c\u53ef\u5f97\u6587\u4ef6\u5939 upyun-ueditor\uff1b</p> <p>3.  \u590d\u5236\u6587\u4ef6 upyun-ueditor/upyun_config.php\u3001upyun-ueditor/upyun.class.php\u3001upyun-ueditor/editor_config.js\u3001upyun-ueditor/index.php \u5230\u6240\u90e8\u7f72\u7684 UEditor \u6839\u76ee\u5f55\u4e0b\uff0c\u590d\u5236\u6587\u4ef6 upyun-ueditor/php/fileUp.php\u3001upyun-ueditor/php/imageUp.php \u5230\u6240\u90e8\u7f72\u7684 UEditor \u6839\u76ee\u5f55\u4e0b\u7684 php \u76ee\u5f55\uff1b</p> <p>4.  \u914d\u7f6e upyun-ueditor/upyun_config.php \u4e2d\u7684 UPYUN \u7a7a\u95f4\u6388\u6743\u4fe1\u606f</p> <pre><code> //UPYUN \u56fe\u7247\u7a7a\u95f4\u6388\u6743\n $img_bucketname = \"\";    //\u56fe\u7247\u7a7a\u95f4\u540d\u79f0\n $img_username = \"\";     //\u56fe\u7247\u7a7a\u95f4\u6388\u6743\u7ba1\u7406\u5458\u5e10\u53f7\n $img_password = \"\";  //\u56fe\u7247\u7a7a\u95f4\u6388\u6743\u7ba1\u7406\u5458\u5bc6\u7801\n //UPYUN \u6587\u4ef6\u7a7a\u95f4\u6388\u6743\n $file_bucketname = \"\";    //\u6587\u4ef6\u7a7a\u95f4\u540d\u79f0\n $file_username = \"\";     //\u6587\u4ef6\u7a7a\u95f4\u6388\u6743\u7ba1\u7406\u5458\u5e10\u53f7\n $file_password = \"\";  //\u6587\u4ef6\u7a7a\u95f4\u6388\u6743\u7ba1\u7406\u5458\u5bc6\u7801\n</code></pre> <p>\u8bf4\u660e\uff1a\u5982\u679c\u4e0d\u9700\u8981\u5c06\u56fe\u7247\u548c\u975e\u56fe\u7247\u7c7b\u6587\u4ef6\u5206\u7a7a\u95f4\u5b58\u50a8\uff0c\u5219\u53ea\u9700\u5c06\u56fe\u7247\u7a7a\u95f4\u548c\u6587\u4ef6\u7a7a\u95f4\u76f8\u5173\u4fe1\u606f\u586b\u5199\u6210\u540c\u4e00\u4e2a\u6587\u4ef6\u7c7b\u7a7a\u95f4\u5373\u53ef\uff08\u5fc5\u987b\u4e3a\u6587\u4ef6\u7c7b\u7a7a\u95f4\uff09</p> <p>5.  \u914d\u7f6e upyun-ueditor/editor_config.js \u4e2d\u7684\u7a7a\u95f4\u540d</p> <pre><code> var img_bucketname = \"\";     //UPYUN \u56fe\u7247\u7a7a\u95f4\u540d\n var file_bucketname = \"\";     //UPYUN \u6587\u4ef6\u7a7a\u95f4\u540d\n</code></pre> <p>\u8bf4\u660e\uff1a\u5982\u679c\u4e0d\u9700\u8981\u5c06\u56fe\u7247\u548c\u975e\u56fe\u7247\u7c7b\u6587\u4ef6\u5206\u7a7a\u95f4\u5b58\u50a8\uff0c\u5219\u53ea\u9700\u5c06\u56fe\u7247\u7a7a\u95f4\u548c\u6587\u4ef6\u7a7a\u95f4\u76f8\u5173\u4fe1\u606f\u586b\u5199\u6210\u540c\u4e00\u4e2a\u6587\u4ef6\u7c7b\u7a7a\u95f4\u5373\u53ef\uff08\u5fc5\u987b\u4e3a\u6587\u4ef6\u7c7b\u7a7a\u95f4\uff09</p>"},{"location":"misc/ueditor/#_4","title":"\u76f8\u5173\u4e0b\u8f7d","text":"<ul> <li>\u96c6\u6210\u5de5\u5177\u5305\u4e0b\u8f7d</li> <li>\u5b89\u88c5\u4f7f\u7528\u8bf4\u660e\u6587\u6863\uff1a<ul> <li>PDF \u7248\u672c</li> <li>WORD \u7248\u672c</li> </ul> </li> </ul>"},{"location":"mobile-stats/","title":"\u79fb\u52a8\u6d41\u91cf","text":""},{"location":"mobile-stats/#_1","title":"\u5e73\u53f0\u6982\u8ff0","text":"<p>\u53c8\u62cd\u4e91\u624b\u673a\u6d41\u91cf\u8425\u9500\u5e73\u53f0\uff0c\u6574\u5408\u79fb\u52a8\u3001\u7535\u4fe1\u3001\u8054\u901a\u4e09\u5927\u8fd0\u8425\u5546\u6d41\u91cf\u8d44\u6e90\uff0c\u5c06\u5f3a\u5927\u7684\u6d41\u91cf\u8425\u9500\u670d\u52a1\uff0c\u901a\u8fc7\u63a5\u53e3\u7b49\u5f62\u5f0f\u63d0\u4f9b\u7ed9\u5546\u5bb6\u5408\u4f5c\u4f19\u4f34\uff0c\u5e2e\u52a9\u5546\u5bb6\u5f00\u5c55\u54c1\u724c\u5ba3\u4f20\u3001APP/\u6e38\u620f/\u5fae\u4fe1\u516c\u4f17\u53f7/\u7f51\u7ad9\u7684\u62c9\u65b0\u4e0e\u4fc3\u6d3b\u7b49\u591a\u79cd\u8425\u9500\u6d3b\u52a8\u3002</p> <p>\u901a\u8fc7\u63a5\u5165\u53c8\u62cd\u4e91\u6d41\u91cf\u8425\u9500\u5e73\u53f0\uff0c\u5546\u5bb6\u53ef\u4ee5\u83b7\u5f97\u66f4\u591a\u6d41\u91cf\u3001\u7528\u6237\u548c\u6536\u76ca\uff0c\u800c\u5546\u5bb6\u63d0\u4f9b\u7684\u6d3b\u52a8\u4e5f\u8ba9\u7528\u6237\u83b7\u5f97\u4e86\u4e09\u7f51\u901a\u7528\u6d41\u91cf\u548c\u66f4\u52a0\u4e30\u5bcc\u7684\u6d3b\u52a8\u4f53\u9a8c\u3002</p>"},{"location":"mobile-stats/#_2","title":"\u4ea7\u54c1\u7279\u70b9","text":"<p>1.\u4e09\u7f51\u901a\u7528\uff0c\u6210\u672c\u4f18\u52bf\uff0c\u8986\u76d6\u9762\u5e7f</p> <p>2.\u5feb\u901f\u5bf9\u63a5\u3001\u5168\u6d41\u6c34\u3001\u6613\u5bf9\u8d26\u3001\u7cbe\u7ed3\u7b97</p>"},{"location":"mobile-stats/#_3","title":"\u5e94\u7528\u573a\u666f","text":"<p>1.APP \u4e0b\u8f7d\u8d60\u6d41\u91cf</p> <p>2.\u5fae\u4fe1\u516c\u4f17\u53f7\u589e\u7c89</p> <p>3.\u5956\u54c1\u793c\u5238</p> <p>4.\u6d41\u91cf\u52a0\u6cb9\u7ad9</p> <p>5.\u79ef\u5206\u5151\u6362\u6d41\u91cf</p> <p>6.\u6d3b\u52a8\u6bd4\u8d5b\u9001\u6d41\u91cf</p> <p>7.\u6d41\u91cf\u7ea2\u5305</p> <p>8.\u5458\u5de5\u798f\u5229</p>"},{"location":"mobile-stats/#_4","title":"\u5bf9\u63a5\u8bf4\u660e","text":"<p>1.\u8bf7\u8054\u7cfb\u5546\u52a1\uff08Tel:0571-89775132\uff09\u786e\u5b9a\u60a8\u7684\u5e94\u7528\u573a\u666f\u9700\u6c42\uff0c\u83b7\u53d6\u5bf9\u5e94\u6d41\u91cf\u62a5\u4ef7</p> <p>2.\u6ce8\u518c\u53c8\u62cd\u4e91\u8d26\u53f7\uff0c\u5982\u679c\u60a8\u5df2\u6709\u8d26\u53f7\uff0c\u8bf7\u767b\u5f55 \u53c8\u62cd\u4e91\u63a7\u5236\u53f0 \u5b8c\u6210\u4f01\u4e1a/\u4e2a\u4eba\u8ba4\u8bc1</p> <p>3.\u524d\u5f80\u5bfc\u822a &gt; \u5de5\u5177\u7bb1 &gt; \u624b\u673a\u6d41\u91cf\u8425\u9500\u9875\u9762\uff0c\u5f00\u901a\u8be5\u670d\u52a1\uff08\u5f00\u901a\u90ae\u4ef6\u4e2d\u5305\u542b\u63a5\u53e3\u5730\u5740\uff09</p> <p>4.\u901a\u8fc7\u6d41\u91cf\u8425\u9500\u63a7\u5236\u53f0\u914d\u7f6e\u56de\u8c03\u5730\u5740</p> <p>5.\u51fa\u53e3 IP \u51fa\u4e8e\u5b89\u5168\u8003\u8651\u6682\u4e0d\u652f\u6301\u63a7\u5236\u53f0\u914d\u7f6e\uff0c\u53ef\u8054\u7cfb\u6211\u53f8\u5546\u52a1\u5b8c\u6210\u751f\u4ea7\u73af\u5883\u8054\u8c03</p> <p>\u4e1a\u52a1\u4ea4\u4e92\u6d41\u7a0b:</p> <p></p>"},{"location":"mobile-stats/#_5","title":"\u63a5\u53e3\u6587\u6863","text":"<p>\u53c8\u62cd\u4e91\u624b\u673a\u6d41\u91cf\u5e73\u53f0\u63a5\u53e3\u5165\u53e3\u5730\u5740\u7edf\u4e00\u4e3a\uff1ahttps://ptp-api.upyun.com\uff0c\u8bf7\u6c42\u63a5\u53e3\u65f6\uff0c\u7edf\u4e00\u4f7f\u7528 <code>POST</code> \u65b9\u6cd5\uff0c \u6587\u6863\u7c7b\u578b\u7edf\u4e00\u4e3a <code>Content-Type: application/json</code>\uff0c\u4f7f\u7528 JSON \u683c\u5f0f\u53d1\u9001\u8bf7\u6c42\uff0c \u54cd\u5e94\u7ed3\u679c\u4e5f\u4f1a\u4ee5 JSON \u683c\u5f0f\u8fd4\u56de\uff1b\u6587\u6863\u4e2d\u63a5\u53e3\u7684\u8bf7\u6c42\u5730\u5740\u53ea\u5305\u542b\u8def\u5f84\u90e8\u5206\uff0c\u5b9e\u9645\u8bf7\u6c42\u65f6\uff0c\u9700\u8981\u52a0\u4e0a\u7edf\u4e00\u5165\u53e3\u5730\u5740 https://ptp-api.upyun.com\u3002\u6587\u6863\u4e2d\u63cf\u8ff0\u7b7e\u540d\u8ba1\u7b97\u65f6\uff0c\u90fd\u662f\u5148\u6b63\u5e8f\u6392\u5e8f\uff08\u7ed9\u51fa\u7684\u793a\u4f8b\u5b57\u7b26\u4e32\u5df2\u7ecf\u662f\u6392\u5e8f\u540e\u7684\u7ed3\u679c\uff09\uff0c\u518d\u505a SHA1 \u8fd0\u7b97\u3002</p> <p>\u672c\u6587\u6863\u4e00\u5171\u63cf\u8ff0\u4e86\u56db\u4e2a\u63a5\u53e3\u548c\u4e00\u4e2a\u5145\u503c\u56de\u8c03\u8bf4\u660e\uff0c\u63a5\u53e3\u5982\u4e0b\uff1a</p> <ul> <li>\u83b7\u53d6\u7b7e\u540d <code>POST /refreshToken</code></li> <li>\u63d0\u4ea4\u8ba2\u5355 <code>POST /chargeOrder</code></li> <li>\u67e5\u8be2\u8ba2\u5355\u72b6\u6001 <code>POST /seekOrder</code></li> <li>\u67e5\u8be2\u4f59\u989d <code>POST /getMyBalance</code></li> </ul> <p>\u9488\u5bf9\u4ee5\u4e0a\u63a5\u53e3\uff0c\u76ee\u524d\u63d0\u4f9b\u4e86 php \u7248\u672c sdk\uff0c\u7528\u4e8e\u63d0\u4f9b\u63a5\u53e3\u8c03\u7528\u793a\u4f8b\uff0c \u5404\u4f01\u4e1a\u7528\u6237\u53ef\u4ee5\u6839\u636e\u81ea\u5df1\u7684\u9700\u8981\u8fdb\u884c\u5c01\u88c5\uff0c\u5b8c\u5584\u9519\u8bef\u5904\u7406\uff0c\u4e0b\u8f7d\u5730\u5740\uff1a\u70b9\u51fb\u4e0b\u8f7d\u3002</p>"},{"location":"mobile-stats/#_6","title":"\u63a5\u53e3\u8be6\u60c5","text":"<p>1.\u83b7\u53d6\u8ba1\u7b97\u7b7e\u540d\u9700\u8981\u7684 token</p> <p>\u63a5\u53e3\u8bf4\u660e</p> <p>\u8be5\u63a5\u53e3\u7528\u4e8e\u83b7\u53d6 token\uff0c\u8c03\u7528\u5176\u4ed6\u63a5\u53e3\u65f6\uff0c\u9700\u8981\u4f7f\u7528 token \u8ba1\u7b97\u7b7e\u540d\u3002\u7531\u4e8e token \u9700\u8981\u5728\u540e\u7eed\u7684\u63a5\u53e3\u8bf7\u6c42\u4e2d\uff0c\u5168\u5c40\u5171\u4eab\uff0c\u6240\u4ee5\u5728\u5e76\u53d1\u8bf7\u6c42\u7684\u573a\u666f\u4e0b\uff0c\u5efa\u8bae\u5c06 token \u4fdd\u5b58\u5728 Redis/Mysql \u7b49\u7b2c\u4e09\u65b9\u5b58\u50a8\u4e2d</p> <p>\u8bf7\u6c42\u5730\u5740</p> <pre><code>POST /refreshToken\n</code></pre> <p>\u8bf7\u6c42\u53c2\u6570</p> \u540d\u79f0 \u7c7b\u578b \u662f\u5426\u5fc5\u987b \u63cf\u8ff0 appkey String \u5fc5\u987b appkey\uff0c\u7531\u53c8\u62cd\u4e91\u63d0\u4f9b\uff0c\u53ef\u4ee5\u767b\u5f55\u624b\u673a\u6d41\u91cf\u540e\u53f0\u67e5\u770b appsecret String \u5fc5\u987b appsecret\uff0c\u7531\u53c8\u62cd\u4e91\u63d0\u4f9b\uff0c\u53ef\u4ee5\u767b\u5f55\u624b\u673a\u6d41\u91cf\u540e\u53f0\u67e5\u770b <p>\u8bf7\u6c42\u793a\u4f8b</p> <pre><code>curl https://ptp-api.upyun.com/refreshToken -H \"Content-Type: application/json\" -d \"{\\\"appkey\\\": \\\"your_appkey_put_here\\\", \\\"appsecret\\\": \\\"your_appsecret_put_here\\\"}\"\n</code></pre> <p>\u54cd\u5e94\u53c2\u6570</p> \u540d\u79f0 \u7c7b\u578b \u793a\u4f8b\u503c \u63cf\u8ff0 code String 200 \u54cd\u5e94\u72b6\u6001\u7801\uff0c200 \u8868\u793a\u6b63\u5e38\uff0c\u5176\u4ed6\u8be6\u89c1\u9519\u8bef\u7801 token String XsdOpxqudzMnw \u7528\u4e8e\u7b7e\u540d\u8ba1\u7b97\u9700\u8981\u7684 token\uff0ctoken \u9ed8\u8ba4\u6709\u6548\u671f\u4e3a 24 \u5c0f\u65f6\uff0c\u4ec5\u6700\u540e\u4e00\u6b21\u8bf7\u6c42\u63a5\u53e3\u751f\u6210\u7684 token \u624d\u6709\u6548 info String \u8bf7\u6c42\u6210\u529f <p>\u54cd\u5e94\u793a\u4f8b</p> <pre><code>{\n    \"code\": \"200\",\n    \"token\": \"XsdOpxqudzMnw\",\n    \"info\": \"\u8bf7\u6c42\u6210\u529f\"\n}\n</code></pre> <p>2.\u521b\u5efa\u8ba2\u5355</p> <p>\u63a5\u53e3\u8bf4\u660e</p> <p>\u521b\u5efa\u624b\u673a\u6d41\u91cf\u5145\u503c\u8ba2\u5355</p> <p>\u8bf7\u6c42\u5730\u5740</p> <pre><code>POST /chargeOrder\n</code></pre> <p>\u8bf7\u6c42\u53c2\u6570</p> \u540d\u79f0 \u7c7b\u578b \u662f\u5426\u5fc5\u987b \u63cf\u8ff0 appkey String \u5fc5\u987b E1KRHcKd3qoef8V1 mobile String \u5fc5\u987b \u88ab\u5145\u503c\u624b\u673a\u53f7\u8fdb\u884c AES \u5bf9\u79f0\u52a0\u5bc6\u518d base64 \u8f6c\u7801\u540e\u7684\u503c\uff0c\u4e00\u6b21\u53ea\u5141\u8bb8\u4e00\u4e2a\u624b\u673a\u53f7\u7801\uff0c\u89c1\u793a\u4f8b\u7a0b\u5e8f prodcode String \u5fc5\u987b \u6d41\u91cf\u5305\u7684\u4ea7\u54c1\u7f16\u53f7 custno String \u5fc5\u987b \u5ba2\u6237\u81ea\u5b9a\u4e49\u7684\u8ba2\u5355\u53f7\uff0c\u7528\u4e8e\u5ba2\u6237\u5185\u90e8\u8bb0\u5f55\u8ba2\u5355\uff0c\u957f\u5ea6\u5fc5\u987b\u5c0f\u4e8e30\uff0c \u4e14\u6bcf\u6b21\u5145\u503c\uff0c\u7f16\u53f7\u4e0d\u91cd\u590d sign String \u5fc5\u987b \u6839\u636e token \u548c\u8bf7\u6c42\u53c2\u6570\u8ba1\u7b97\u7684\u7b7e\u540d\uff0c\u7b7e\u540d\u89c4\u5219\u89c1\u7b97\u6cd5\u8bf4\u660e\u90e8\u5206 (\u793a\u4f8b\u7a0b\u5e8f\u4e0b\u8f7d) prodtime Integer \u9009\u586b \u6d41\u91cf\u65f6\u6bb5\uff0c<code>1</code> \u8868\u793a\u5168\u65f6\u6bb5\u6d41\u91cf\uff0c<code>0</code> \u8868\u793a\u95f2\u65f6\u6d41\u91cf\uff0c\u9ed8\u8ba4\u4e3a\u5168\u65f6\u6bb5\u6d41\u91cf prodstandard Integer \u9009\u586b \u7528\u4e8e\u533a\u5206\u7f51\u7edc\u7c7b\u578b\uff0c\u53ef\u9009\u503c\u5206\u522b\u4e3a\uff1a<code>7</code>\u8868\u793a\u5168\u90e8\u7f51\u7edc\u7c7b\u578b\uff0c<code>3</code>\u8868\u793a 2g \u548c 3g \u4e24\u79cd\u7f51\u7edc\u7c7b\u578b\uff0c<code>1</code>\u8868\u793a 2g \u7f51\u7edc\u7c7b\u578b\uff0c\u9ed8\u8ba4\u503c\u4e3a<code>7</code> <p>\u54cd\u5e94\u53c2\u6570</p> \u540d\u79f0 \u7c7b\u578b \u793a\u4f8b\u503c \u63cf\u8ff0 code String 200 \u54cd\u5e94\u72b6\u6001\u7801\uff0c200 \u8868\u793a\u521b\u5efa\u8ba2\u5355\u6210\u529f\uff1b410 511 \u5fc5\u987b\u518d\u6b21\u67e5\u8be2\u8ba2\u5355\u786e\u8ba4\uff1b\u5176\u4ed6\u9519\u8bef\u7801\u89c6\u4e3a\u521b\u5efa\u5931\u8d25\uff1b\u7cfb\u7edf\u54cd\u5e94\u8d85\u65f6\u7b49\u5176\u4ed6\u975e\u6b63\u5e38\u54cd\u5e94\uff0c\u9700\u8981\u8c03\u7528\u67e5\u8be2\u8ba2\u5355\u63a5\u53e3\u786e\u8ba4 custno String 20150238829 \u5ba2\u6237\u8ba2\u5355\u53f7\uff0c\u548c\u8bf7\u6c42\u503c\u4e00\u81f4 orderno String 2016298237019 \u53c8\u62cd\u4e91\u5e73\u53f0\u7684\u8ba2\u5355\u53f7 info String \u5145\u503c\u6210\u529f <p>\u7b97\u6cd5\u8bf4\u660e</p> <ol> <li> <p>\u8ba1\u7b97\u624b\u673a\u53f7\u7684 AES \u5bf9\u79f0\u52a0\u5bc6\uff0c\u518d base64 \u8f6c\u7801\u540e\u7684\u503c</p> </li> <li> <p>\u5c06\u63a5\u53e3\u8bf7\u6c42\u53c2\u6570\u6309\u7167\u8bf7\u6c42\u53c2\u6570\u540d\u79f0\u6b63\u5e8f\u6392\u5e8f;</p> </li> <li> <p>\u5c06\u8bf7\u6c42\u53c2\u6570\u548c\u8bf7\u6c42\u53c2\u6570\u503c\u62fc\u63a5\u6210\u5b57\u7b26\u4e32\uff1a<code>appkey${YourAppKey}custno${YourCustno}mobile${YourAesEncodedMobile}prodcode${YourPrdcode}token${YourToken</code>(\u5c06\u5b57\u7b26\u4e32\u4e2d\u7684\u53d8\u91cf<code>${...}</code>\u90e8\u5206\u66ff\u6362\u6210\u5b9e\u9645\u503c\u5373\u53ef\uff0c)</p> </li> <li> <p>\u5bf9\u62fc\u63a5\u540e\u7684\u5b57\u7b26\u4e32\u8fdb\u884cSHA1\u6307\u7eb9\u8fd0\u7b97\uff0c\u5f97\u5230\u7684 16 \u8fdb\u5236\u5b57\u7b26\u4e32 <code>b5cd94c99e3e576f5e2ca0e66ee3da670cb1c62b</code> \u4fbf\u662f sign \u503c</p> </li> </ol> <p>\u793a\u4f8b</p> <p>\u53c2\u6570\u62fc\u63a5\u540e\u7684\u5b57\u7b26\u4e32\u4e3a\uff1a<code>appkey3P83lWwkoV15yZVTcustno20151123114702mobile8mBGFNfe1o/rzAx2Ost2IQ==prodcodeCMCC_10tokenVqHAab3JYXBDkCoO</code>\uff08\u6ce8\u610f\u624b\u673a\u53f7\u662f aes \u52a0\u5bc6\u518d base64 \u7f16\u7801\u540e\u7684\uff09\uff0c\u8fdb\u884c SHA1 \u8fd0\u7b97\u5f97\u5230\u7684 sign \u503c\u4e3a\uff1a<code>8b05f52e605c7ab89a895eb730cacab4cbeabd4c</code></p> <p>\u54cd\u5e94\u793a\u4f8b</p> <pre><code>{\n    \"code\": \"200\",\n    \"custno\": \"20150238829\",\n    \"orderno\": \"2016298237019\",\n    \"info\": \"\u5145\u503c\u6210\u529f\"\n}\n</code></pre> <p>3.\u67e5\u8be2\u8ba2\u5355\u72b6\u6001</p> <p>\u63a5\u53e3\u8bf4\u660e</p> <p>\u67e5\u8be2\u5145\u503c\u8ba2\u5355\u5f53\u524d\u7684\u72b6\u6001\uff0c\u7528\u4e8e\u786e\u8ba4\u662f\u5426\u5145\u503c\u6210\u529f</p> <p>\u8bf7\u6c42\u5730\u5740</p> <pre><code>POST /seekOrder\n</code></pre> <p>\u8bf7\u6c42\u53c2\u6570</p> \u540d\u79f0 \u7c7b\u578b \u662f\u5426\u5fc5\u987b \u63cf\u8ff0 custno String \u5fc5\u987b \u5ba2\u6237\u63d0\u4ea4\u7684\u8ba2\u5355\u53f7 appkey String \u5fc5\u987b \u9274\u6743\u8d26\u53f7 sign String \u5fc5\u987b \u7b7e\u540d\uff0c\u7b7e\u540d\u89c4\u5219\u4e3a\uff1a\u5c06 <code>appkey${YourAppKey}custno${YourCustno}requesttime${YourReqestTime}TOKEN${YourToken}</code> \u4e2d<code>${...}</code>\u53d8\u91cf\u90e8\u5206\u66ff\u6362\u4e3a\u5b9e\u9645\u503c\uff0c\u518d\u8fdb\u884c SHA1 \u8fd0\u7b97\u3002\u5982\u679c\u8bf7\u6c42\u53c2\u6570\u4e0d\u5305\u542b <code>requesttime</code>\uff0c\u8ba1\u7b97\u7b7e\u540d\u5219\u4e0d\u9700\u8981\u8be5\u503c requesttime String \u5426 \u67e5\u8be2\u7684\u65f6\u95f4\u70b9\uff0c\u8be5\u53c2\u6570\u4e3a\u53ef\u9009\u53c2\u6570\uff0c\u683c\u5f0f\u4e3a\"YYYY-MM-DD HH:mm:ss\"\uff0c\u5f53\u4f20\u9012\u8be5\u53c2\u6570\u65f6\uff0c\u6211\u4eec\u4f1a\u5728\u7ed9\u5b9a\u65f6\u95f4\u70b9\u7684\u524d\u540e 1 \u4e2a\u5c0f\u65f6\u8303\u56f4\u5185\u67e5\u8be2\uff1b\u5982\u679c\u672a\u4f20\u8be5\u53c2\u6570\uff0c\u6211\u4eec\u5c06\u5728\u6700\u8fd1\u4e00\u5468\u7684\u8ba2\u5355\u4e2d\u67e5\u8be2 <p>\u54cd\u5e94\u53c2\u6570</p> \u540d\u79f0 \u7c7b\u578b \u793a\u4f8b\u503c \u63cf\u8ff0 code String 200 \u54cd\u5e94\u72b6\u6001\u7801\uff0c200 \u8868\u793a\u5145\u503c\u6210\u529f\uff1b430 516 530 \u8868\u793a\u5145\u503c\u5931\u8d25\uff1b511 \u5fc5\u987b\u4eba\u5de5\u518d\u6b21\u786e\u8ba4\uff1b\u5176\u4ed6\u9519\u8bef\u7801\u89c6\u4e3a\u5145\u503c\u4e2d custno String 20150238829 \u5ba2\u6237\u81ea\u5b9a\u4e49\u8ba2\u5355\u53f7 info String \u6210\u529f <p>\u54cd\u5e94\u793a\u4f8b</p> <pre><code>{\n    \"code\": \"200\",\n    \"custno\": \"2015823871239\",\n    \"info\": \"\u5145\u503c\u6210\u529f\"\n}\n</code></pre> <p>4.\u67e5\u8be2\u4f59\u989d</p> <p>\u8bf7\u6c42\u5730\u5740</p> <pre><code>POST /getMyBalance\n</code></pre> <p>\u8bf7\u6c42\u53c2\u6570</p> \u540d\u79f0 \u7c7b\u578b \u662f\u5426\u5fc5\u987b \u63cf\u8ff0 appkey String \u5fc5\u987b sign String \u5fc5\u987b \u7b7e\u540d\uff0c\u7b97\u6cd5\u4e3a <code>appkey${YourAppKey}TOKEN${Yourtoken}</code> \u4e2d<code>${...}</code>\u53d8\u91cf\u90e8\u5206\u66ff\u6362\u5b9e\u9645\u503c\uff0c\u518d\u8fdb\u884c SHA1 \u8fd0\u7b97\u5f97\u5230\u7684\u5b57\u7b26\u4e32\u4fbf\u4e3a sign \u503c <p>\u54cd\u5e94\u53c2\u6570</p> \u540d\u79f0 \u7c7b\u578b \u793a\u4f8b\u503c \u63cf\u8ff0 code String 200 \u54cd\u5e94\u72b6\u6001\u7801 balance Float 100.00 \u8d26\u6237\u4f59\u989d\uff08\u5305\u542b\u51bb\u7ed3\u91d1\u989d\uff09 freeze Float 20.00 \u51bb\u7ed3\u91d1\u989d\uff0c\u6b63\u5728\u4ea4\u6613\u7684\u8ba2\u5355\u91d1\u989d availBalance Float 80.00 \u5b9e\u9645\u53ef\u7528\u4f59\u989d\uff08\u4e0d\u5305\u542b\u51bb\u7ed3\u91d1\u989d\uff09 <p>\u54cd\u5e94\u793a\u4f8b</p> <pre><code>{\n    \"code\": \"200\",\n    \"balance\": 100,\n    \"freeze\": 20,\n    \"availBalance\": 80\n}\n</code></pre>"},{"location":"mobile-stats/#_7","title":"\u5145\u503c\u56de\u8c03\u8bf4\u660e","text":"<p>\u5ba2\u6237\u9700\u8981\u5728\u53c8\u62cd\u4e91\u624b\u673a\u6d41\u91cf\u540e\u53f0\u586b\u5199\u5145\u503c\u56de\u8c03\u5730\u5740\uff0c\u5e76\u6ce8\u610f\u9632\u706b\u5899\u914d\u7f6e\uff0c\u4e0d\u80fd\u5c4f\u853d\u53c8\u62cd\u4e91\u670d\u52a1\u5668\u5730\u5740\u3002\u914d\u7f6e\u6210\u529f\u540e\uff0c\u6bcf\u6b21\u5145\u503c\u540e\uff0c\u53c8\u62cd\u4e91\u4f1a\u5411\u8be5\u5730\u5740\u53d1\u9001 <code>POST</code> \u8bf7\u6c42\uff0c\u8bf7\u6c42\u7684\u6570\u636e\u683c\u5f0f\u4e3a <code>application/json</code></p> <p>\u8bf7\u6c42\u53c2\u6570</p> \u540d\u79f0 \u7c7b\u578b \u662f\u5426\u5fc5\u987b \u63cf\u8ff0 code String \u5fc5\u987b \u54cd\u5e94\u72b6\u6001\u7801\uff0c200 \u8868\u793a\u5145\u503c\u6210\u529f\uff1b430,530 \u8868\u793a\u5145\u503c\u5931\u8d25\uff0c\u5176\u4ed6\u9519\u8bef\u7801\u6216\u5f02\u5e38\u4fe1\u606f\u8868\u793a\u5145\u503c\u4e2d orderno String \u5fc5\u987b \u53c8\u62cd\u4e91\u5e73\u53f0\u7684\u8ba2\u5355\u53f7 custno String \u5fc5\u987b \u5ba2\u6237\u81ea\u5b9a\u4e49\u8ba2\u5355\u53f7 info String \u5fc5\u987b \u63cf\u8ff0\u4fe1\u606f sign String \u5fc5\u987b \u7b7e\u540d\uff0c\u5ba2\u6237\u53ef\u4ee5\u4f7f\u7528\u8be5\u503c\u6821\u9a8c\u8bf7\u6c42\u662f\u5426\u5408\u6cd5\uff0c\u5f3a\u70c8\u5efa\u8bae\u63a5\u6536\u5145\u503c\u56de\u8c03\u65f6\u8fdb\u884c\u6821\u9a8c\u3002\u7b7e\u540d\u89c4\u5219\u4e3a\uff1a\u5c06 <code>code${Code}custno${YourCustno}info${Info}orderno${OrderNo}token${YourToken}</code> \u5b57\u7b26\u4e32\u4e2d\u7684\u53d8\u91cf\u90e8\u5206<code>${...}</code>\u66ff\u6362\u4e3a\u8bf7\u6c42\u53c2\u6570\u4e2d\u7684\u503c\uff0c\u518d\u5bf9\u5f97\u5230\u7684\u5b57\u7b26\u4e32\u8fdb\u884c SHA1 \u7b7e\u540d <p>\u5ba2\u6237\u63a5\u53d7\u8bf7\u6c42\u6210\u529f\u540e\uff0c\u9700\u8981\u54cd\u5e94\u5982\u4e0b <code>json</code> \u503c\uff1a</p> <pre><code>{\n    \"info\": \"1\"\n}\n</code></pre> <p>\u5426\u5219\uff0c\u53c8\u62cd\u4e91\u5c06\u9694 1 \u5206\u949f\u518d\u91cd\u8bd5\u4e00\u6b21\uff0c\u4e00\u5171\u56de\u8c03 3 \u6b21</p>"},{"location":"mobile-stats/#_8","title":"\u9519\u8bef\u7801\u8bf4\u660e","text":"<p>\u6ce8\uff1a\u9700\u8981\u7559\u610f\u6bcf\u4e2a\u63a5\u53e3\u54cd\u5e94\u53c2\u6570\u8bf4\u660e\u4e2d\u7684 code \u5904\u7406\u65b9\u5f0f</p> \u9519\u8bef\u7801 \u8bf4\u660e \u9519\u8bef\u7801 \u8bf4\u660e 200 \u6210\u529f 201 \u5145\u503c\u4e2d 410 \u8fd0\u8425\u5546\u8fd4\u56de\u8d85\u65f6 422 \u7528\u6237\u72b6\u6001\u5f02\u5e38 430 \u8ba2\u8d2d/\u5145\u503c\u5931\u8d25 502 sign\u7b7e\u540d\u9519\u8bef 503 \u4f59\u989d\u4e0d\u8db3 504 \u975e\u6cd5\u7684\u56de\u8c03\u5730\u5740 505 \u624b\u673a\u53f7\u4e0d\u5408\u6cd5 506 \u7528\u6237\u4e0d\u80fd\u8ba2\u8d2d\u8be5\u5957\u9910 507 \u63a5\u53e3\u53c2\u6570\u5f02\u5e38 508 \u4ee4\u724c\u9274\u6743\u4e0d\u901a\u8fc7 509 \u5ba2\u6237\u672a\u8ba4\u8bc1\u6388\u6743 510 \u67e5\u8be2\u592a\u9891\u7e41 511 \u5185\u90e8\u5f02\u5e38\uff0c\u6b64\u65f6\u5bf9\u8ba2\u5355\u7684\u67e5\u8be2\u3001\u5145\u503c\u7b49\u64cd\u4f5c\u7b49\u9700\u8981\u8054\u7cfb\u5ba2\u6237\u518d\u6b21\u786e\u8ba4 512 \u8ba2\u5355\u53f7\u91cd\u590d 513 \u8fd0\u8425\u5546\u8bf7\u6c42\u8d85\u65f6 514 ip\u4e0d\u5728\u767d\u540d\u5355 515 \u8be5\u5ba2\u6237\u4e0d\u5b58\u5728 516 \u4e0d\u5b58\u5728\u6b64\u8ba2\u5355 517 \u65e0\u6cd5\u8bc6\u522b\u7684\u624b\u673a\u53f7 519 \u5f53\u524dappkey\u6216appsecret\u9519\u8bef 520 \u6d3b\u52a8\u4e0d\u5b58\u5728 526 \u5408\u540c\u4e0d\u5728\u6709\u6548\u671f 527 token\u4e0d\u5728\u6709\u6548\u671f 530 \u8ba2\u8d2d/\u5145\u503c\u5931\u8d25 531 \u7b7e\u540d\u4e0d\u901a\u8fc7 532 \u8ba2\u5355\u53f7\u957f\u5ea6\u8d85\u8fc730 533 aes\u52a0\u5bc6\u6709\u8bef"},{"location":"nginx/","title":"Nginx","text":"<ul> <li>Nginx url rewriting: difference between break and last</li> </ul>"},{"location":"openresty/stage/","title":"Stage","text":"<p>init_by_lua*</p> <p>init_worker_by_lua*</p> <p>set_by_lua*: \u6d41\u7a0b\u5206\u652f\u5904\u7406\u5224\u65ad\u53d8\u91cf\u521d\u59cb\u5316</p> <p>rewrite_by_lua*: \u8f6c\u53d1\u3001\u91cd\u5b9a\u5411\u3001\u7f13\u5b58\u7b49\u529f\u80fd(\u4f8b\u5982\u7279\u5b9a\u8bf7\u6c42\u4ee3\u7406\u5230\u5916\u7f51)</p> <p>access_by_lua*: IP \u51c6\u5165\u3001\u63a5\u53e3\u6743\u9650\u7b49\u60c5\u51b5\u96c6\u4e2d\u5904\u7406(\u4f8b\u5982\u914d\u5408 iptable \u5b8c\u6210\u7b80\u5355\u9632\u706b\u5899)</p> <p>content_by_lua*: \u5185\u5bb9\u751f\u6210</p> <p>header_filter_by_lua*: \u54cd\u5e94\u5934\u90e8\u8fc7\u6ee4\u5904\u7406(\u4f8b\u5982\u6dfb\u52a0\u5934\u90e8\u4fe1\u606f)</p> <p>body_filter_by_lua*: \u54cd\u5e94\u4f53\u8fc7\u6ee4\u5904\u7406(\u4f8b\u5982\u5b8c\u6210\u5e94\u7b54\u5185\u5bb9\u7edf\u4e00\u6210\u5927\u5199)</p> <p>log_by_lua*: \u4f1a\u8bdd\u5b8c\u6210\u540e\u672c\u5730\u5f02\u6b65\u5b8c\u6210\u65e5\u5fd7\u8bb0\u5f55(\u65e5\u5fd7\u53ef\u4ee5\u8bb0\u5f55\u5728\u672c\u5730\uff0c\u8fd8\u53ef\u4ee5\u540c\u6b65\u5230\u5176\u4ed6\u673a\u5668)</p>"},{"location":"sms/","title":"\u77ed\u4fe1\u670d\u52a1","text":""},{"location":"sms/#1","title":"1. \u4ecb\u7ecd","text":""},{"location":"sms/#11","title":"1.1 \u53c8\u62cd\u4e91\u77ed\u4fe1\u4ecb\u7ecd","text":"<p>\u53c8\u62cd\u4e91\u77ed\u4fe1\u670d\u52a1\u901a\u8fc7\u5bf9\u7f51\u7edc\u670d\u52a1\u8d44\u6e90\u7edf\u4e00\u7ba1\u7406\u548c\u8c03\u5ea6\uff0c\u4e09\u7f51\u5408\u4e00\uff0c\u5168\u7f51\u8986\u76d6\uff0c\u91c7\u7528\u884c\u4e1a\u4e13\u7528\u901a\u9053\uff0c\u4e3a\u7528\u6237\u63d0\u4f9b\u4f01\u4e1a\u7ea7\u77ed\u4fe1\u9001\u8fbe\u670d\u52a1\u3002</p>"},{"location":"sms/#12","title":"1.2 \u53c8\u62cd\u4e91\u77ed\u4fe1\u7ec4\u6210","text":"<p>\u53c8\u62cd\u4e91\u76ee\u524d\u53ef\u63d0\u4f9b\u7684\u77ed\u4fe1\u901a\u9053\u5206\u4e3a\u4e24\u5927\u7c7b\uff1a\u514d\u5ba1\u7b7e\u540d\u901a\u9053\u4e0e\u666e\u901a\u7b7e\u540d\u901a\u9053\uff0c\u4e24\u79cd\u901a\u9053\u6309\u7c7b\u578b\u53c8\u5206\u4e3a\u884c\u4e1a\u77ed\u4fe1\u4e0e\u8425\u9500\u77ed\u4fe1\u3002</p> <p>\u77ed\u4fe1\u7684\u7ec4\u6210\u7531\u77ed\u4fe1\u6a21\u677f\u5185\u5bb9+\u77ed\u4fe1\u7b7e\u540d\u7ec4\u6210\uff0c\u77ed\u4fe1\u957f\u5ea6\u9650\u5236\u4e3a 350 \u5b57\u3002</p>"},{"location":"sms/#13","title":"1.3 \u53c8\u62cd\u4e91\u77ed\u4fe1\u6a21\u677f","text":"<p>1.\u00a0\u53c8\u62cd\u4e91\u77ed\u4fe1\u6a21\u677f\u5206\u4e3a\u4e24\u79cd\uff0c\u884c\u4e1a\u77ed\u4fe1\u4e0e\u8425\u9500\u77ed\u4fe1\u6a21\u677f\uff0c\u4e24\u7c7b\u6a21\u677f\u6700\u5927\u7684\u533a\u522b\u5c31\u662f\u8425\u9500\u77ed\u4fe1\u5c3e\u90e8\u987b\u6dfb\u52a0\u201c\u9000\u8ba2\u56deT\u3001\u9000\u8ba2\u56deTD\u6216\u9000\u8ba2\u56deN\u201d\u5b57\u6837\u3002</p> <p>2.\u00a0\u53c8\u62cd\u4e91\u77ed\u4fe1\u63d0\u4f9b\u7684\u6a21\u677f\u77ed\u4fe1\u7531\u56fa\u5b9a\u5185\u5bb9\u4e0e\u591a\u4e2a\u53d8\u91cf\u6784\u6210\uff0c\u53d8\u91cf\u683c\u5f0f\u4e3a\uff08{$var1}\uff0c{$var2}\u2026\uff09\uff0c\u53d8\u91cf\u5185\u5bb9\u53ef\u4ee5\u662f\u6c49\u5b57\u3001\u5b57\u6bcd\u3001\u6570\u5b57\u6216\u8005\u7279\u6b8a\u5b57\u7b26\u81ea\u5408\u3002</p> <p>3.\u00a0\u5df2\u5ba1\u6838\u901a\u8fc7\u7684\u77ed\u4fe1\u6a21\u677f\uff0c\u82e5\u9700\u4fee\u6539\u6a21\u677f\u91cd\u65b0\u63d0\u4ea4\u5ba1\u6838\uff0c\u5728\u5ba1\u6838\u671f\u95f4\u65e0\u6cd5\u4f7f\u7528\uff0c\u9700\u91cd\u65b0\u5ba1\u6838\u901a\u8fc7\u624d\u53ef\u4f7f\u7528\u3002</p> <p>4.\u00a0\u6bcf\u79cd\u901a\u9053\u53ef\u5206\u522b\u521b\u5efa\u6a21\u677f\u4e0a\u9650\u4e3a 40 \u4e2a\u3002</p> <p>5.\u00a0\u884c\u4e1a\u77ed\u4fe1\u6a21\u677f\u4e2d\uff0c\u5355\u4e2a\u624b\u673a\u53f7\u6bcf\u5929\u80fd\u63a5\u6536\u7684\u77ed\u4fe1\u6b21\u6570\u4e3a 10 \u6b21\uff0c\u8425\u9500\u77ed\u4fe1\u65e0\u9650\u5236\u3002</p> <p>6.\u00a0\u77ed\u4fe1\u5185\u5bb9\u4e0d\u80fd\u542b\u6709\u653f\u6cbb\u654f\u611f\u5b57\u773c\u548c\u201c\u9ec4\u8d4c\u6bd2\u201d\u7b49\u4f4e\u4fd7\u654f\u611f\u5b57\u6837\uff0c\u51fa\u73b0\u8fdd\u6cd5\u8fdd\u89c4\u6216\u635f\u5bb3\u76f8\u5173\u4ed6\u4eba\u6743\u76ca\u7684\uff0c\u5e73\u53f0\u5c06\u4fdd\u7559\u6700\u7ec8\u8ffd\u7a76\u7684\u6743\u5229\u3002</p> <p>7.\u00a0\u4e0d\u652f\u6301\u5168\u53d8\u91cf\u77ed\u4fe1\u6a21\u677f\uff0c\u8bf7\u5c06\u77ed\u4fe1\u5185\u5bb9\u7684\u7ed3\u6784\u5b89\u6392\u5408\u7406\u3002</p> <p>8.\u00a0\u8bf7\u60a8\u907f\u514d\u5728\u77ed\u4fe1\u6b63\u6587\u4e2d\u4f7f\u7528 \u201c\u3010 \u201d \uff0c \u201c \u3011\u201d\uff0c\u201c&lt;\u201d\uff0c\u201c&gt;\u201d \u7b49\u7279\u6b8a\u5b57\u7b26\u3002</p>"},{"location":"sms/#14","title":"1.4 \u53c8\u62cd\u4e91\u77ed\u4fe1\u7b7e\u540d","text":"<p>1.\u00a0\u6bcf\u79cd\u901a\u9053\u7684\u77ed\u4fe1\u7b7e\u540d\u6700\u591a\u53ef\u521b\u5efa 20 \u4e2a\u7b7e\u540d\u3002</p> <p>2.\u00a0\u5355\u4e2a\u7b7e\u540d\u957f\u5ea6\u4ecb\u4e8e 3-8 \u4e2a\u5b57\u7b26\u4e4b\u95f4\uff1b</p> <p>3.\u00a0\u4e0d\u80fd\u542b\u8fdd\u7981\u5173\u952e\u5b57\uff0c\u4e0d\u80fd\u6709\u4efb\u4f55\u7279\u6b8a\u7b26\u53f7\uff08\u5982-.+.#);</p> <p>4.\u00a0\u65e0\u9700\u6dfb\u52a0\u3010\u3011\u7b26\u53f7\uff0c\u7cfb\u7edf\u5c06\u81ea\u52a8\u751f\u6210\u3002</p>"},{"location":"sms/#15","title":"1.5 \u8ba1\u8d39\u6807\u51c6","text":"<p>\u6bcf\u6761\u77ed\u4fe1\u5185\u5bb9\uff08\u5305\u62ec\u4f46\u4e0d\u9650\u4e8e\u6807\u70b9\u7b26\u53f7\u3001\u82f1\u6587\u5b57\u7b26\u3001\u6c49\u5b57\u7b49\uff09\u957f\u5ea6\u4e3a70\u4e2a\u5b57\u7b26\uff08\u5305\u542b\u7b7e\u540d\uff09\u5982\u53d1\u9001\u77ed\u4fe1\u5185\u5bb9\u8d85\u51fa 70 \u4e2a\u5b57\u7b26\uff0c\u5c06\u4ee5\u6bcf 67 \u5b57\u7b26\uff08\u5305\u62ec\u4f46\u4e0d\u9650\u4e8e\u6807\u70b9\u7b26\u53f7\u3001\u82f1\u6587\u5b57\u7b26\u3001\u6c49\u5b57\u7b49\uff09\u4e3a\u4e00\u6761\u77ed\u4fe1\u8fdb\u884c\u7d2f\u8ba1\u8ba1\u8d39\u3002\u5355\u6761\u77ed\u4fe1\u5b57\u7b26\u6570\u6700\u5927\u503c\u4e3a 350 \u4e2a\u5b57\u3002\u77ed\u4fe1\u670d\u52a1\u7684\u4ed8\u8d39\u65b9\u5f0f\u4e3a\u77ed\u4fe1\u8d44\u6e90\u5305\u8ba1\u8d39\uff0c\u6309\u7167\u77ed\u4fe1\u53d1\u9001\u6210\u529f\u91cf\u8fdb\u884c\u77ed\u4fe1\u6761\u6570\u7684\u6263\u9664\uff0c\u53d1\u9001\u591a\u5c11\u5373\u6263\u9664\u77ed\u4fe1\u8d44\u6e90\u5305\u5185\u5bf9\u5e94\u7684\u6761\u6570\u3002</p>"},{"location":"sms/#16","title":"1.6 \u8d2d\u4e70\u6d41\u7a0b","text":"<p>\u8fdb\u5165\u603b\u7ba1\u7406\u540e\u53f0\u4e2d\u3010\u4e91\u4ea7\u54c1\u3011-\u3010\u77ed\u4fe1\u670d\u52a1\u3011-\u3010\u5145\u503c\u3011-\u3010\u77ed\u4fe1\u5305\u7ba1\u7406\u3011\u4e2d\u8fdb\u884c\u5145\u503c\u8d2d\u4e70\u3002</p> <p></p>"},{"location":"sms/#2","title":"2. \u77ed\u4fe1\u63a5\u5165","text":""},{"location":"sms/#21","title":"2.1 \u63a5\u5165\u8bf4\u660e","text":"<p>\u77ed\u4fe1\u670d\u52a1\u5c5e\u4e8e\u6536\u8d39\u529f\u80fd\uff0c\u7528\u6237\u53ef\u6839\u636e\u81ea\u8eab\u9700\u6c42\u901a\u8fc7\u8d2d\u4e70\u77ed\u4fe1\u8d44\u6e90\u5305\u8fdb\u884c\u4f7f\u7528\uff0c\u4e0d\u652f\u6301\u81ea\u9009\u77ed\u4fe1\u5305\u3002</p>"},{"location":"sms/#22","title":"2.2 \u63a5\u5165\u6b65\u9aa4","text":"<p>1.\u00a0\u6ce8\u518c\u53c8\u62cd\u4e91\u8d26\u53f7\uff08\u5df2\u6709\u53c8\u62cd\u4e91\u8d26\u53f7\u65e0\u9700\u6ce8\u518c\uff09</p> <p>2.\u00a0\u8fdb\u884c\u5b9e\u540d\u8ba4\u8bc1</p> <p>3.\u00a0\u521b\u5efa\u6a21\u677f</p> <p>4.\u00a0\u53d1\u9001\u77ed\u4fe1</p>"},{"location":"sms/#23","title":"2.3 \u6ce8\u518c\u53c8\u62cd\u4e91\u8d26\u53f7","text":"<p>\u7528\u6237\u82e5\u9700\u5f00\u901a\u77ed\u4fe1\u670d\u52a1\uff0c\u9700\u5148\u5728\u5b98\u7f51\u6ce8\u518c\u53c8\u62cd\u4e91\u8d26\u53f7\uff0c\u5b98\u7f51\u5730\u5740\u5982\u4e0b: https://www.upyun.com/,\u521b\u5efa\u5b8c\u6210\u540e\u5b8c\u6210\u5b9e\u540d\u8ba4\u8bc1\uff0c\u5373\u53ef\u7533\u8bf7\u5f00\u901a\u3002\uff08\u5df2\u6709\u8d26\u53f7\u9700\u5b8c\u6210\u5b9e\u540d\u8ba4\u8bc1\u540e\u5373\u53ef\u5f00\u901a\u77ed\u4fe1\u670d\u52a1\uff09</p> <p></p>"},{"location":"sms/#24","title":"2.4 \u5b9e\u540d\u8ba4\u8bc1","text":"<p>\u6ce8\u518c\u6210\u529f\u53c8\u62cd\u4e91\u8d26\u53f7\u4e4b\u540e\uff0c\u5373\u53ef\u901a\u8fc7\u540e\u53f0\u7684\u3010\u4e91\u4ea7\u54c1\u3011-\u3010\u77ed\u4fe1\u670d\u52a1\u3011\u5165\u53e3\u8fdb\u5165\u77ed\u4fe1\u670d\u52a1\u754c\u9762\u3002\u77ed\u4fe1\u670d\u52a1\u9700\u5b8c\u6210\u5b9e\u540d\u8ba4\u8bc1\u540e\u624d\u53ef\u5f00\u901a\uff0c\u4e2a\u4eba\u7528\u6237\u9700\u5b8c\u6210\u4e2a\u4eba\u5b9e\u540d\u8ba4\u8bc1\uff0c\u4f01\u4e1a\u7528\u6237\u9700\u5b8c\u6210\u4f01\u4e1a\u5b9e\u540d\u8ba4\u8bc1\u3002</p> <p></p> <p>\u5b9e\u540d\u8ba4\u8bc1\u754c\u9762</p> <p></p>"},{"location":"sms/#25","title":"2.5 \u521b\u5efa\u6a21\u677f","text":"<p>\u521b\u5efa\u6a21\u677f\u53ef\u5206\u522b\u521b\u5efa\u666e\u901a\u7b7e\u540d\u901a\u9053\u4e0e\u514d\u5ba1\u7b7e\u540d\u901a\u9053\u7684\u6a21\u677f\uff0c\u6a21\u677f\u7c7b\u578b\u5206\u4e3a\u884c\u4e1a\u77ed\u4fe1\u4e0e\u8425\u9500\u77ed\u4fe1\uff0c\u7279\u522b\u6ce8\u610f\u7684\u662f\u8425\u9500\u77ed\u4fe1\u5c3e\u90e8\u987b\u6dfb\u52a0\u201c\u9000\u8ba2\u56deT\u3001\u9000\u8ba2\u56deTD\u6216\u9000\u8ba2\u56deN\u201d\u5b57\u6837\uff0c\u5426\u5219\u4f1a\u53d1\u9001\u5931\u8d25\u3002 \u7528\u6237\u70b9\u51fb\u7ba1\u7406\u540e\u53f0\u7684\u3010\u4e91\u4ea7\u54c1\u3011-\u3010\u77ed\u4fe1\u670d\u52a1\u3011-\u3010\u6a21\u677f\u3011-\u3010\u521b\u5efa\u6a21\u677f\u3011\u8fdb\u884c\u6a21\u677f\u521b\u5efa\u3002</p> <p></p> <p>\u7528\u6237\u521b\u5efa\u597d\u6a21\u677f\u4e4b\u540e\uff0c\u7ba1\u7406\u5458\u8fdb\u884c\u5ba1\u6838\uff08\u514d\u7b7e\u901a\u9053\u65e0\u9700\u62a5\u5907\u7b7e\u540d\uff0c\u53ea\u9700\u5ba1\u6838\u6a21\u677f\uff0c\u975e\u7279\u6b8a\u60c5\u51b5\u4e0b\uff0c\u5ba1\u6838\u65f6\u95f4\u4e3a\u5de5\u4f5c\u65e5\u5185\u7684 1-3 \u5c0f\u65f6\uff1b\u666e\u901a\u901a\u9053\u975e\u7279\u6b8a\u60c5\u51b5\u4e0b\u5ba1\u6838\u65f6\u95f4\u4e3a 4-5 \u4e2a\u5de5\u4f5c\u65e5\uff0c\u82e5\u7b7e\u540d\u5df2\u62a5\u5907\u8fc7\uff0c\u5219\u4e5f\u662f\u5de5\u4f5c\u65e5\u5185\u7684 1-3 \u5c0f\u65f6\uff09\uff0c\u5ba1\u6838\u901a\u8fc7\u540e\u7528\u6237\u53ef\u4ee5\u4f7f\u7528\u540e\u53f0\u5bfc\u5165\u754c\u9762\u6216\u8c03\u7528\u53d1\u9001\u77ed\u4fe1\u63a5\u53e3\u8fdb\u884c\u53d1\u9001\u3002</p> <p></p>"},{"location":"sms/#26","title":"2.6 \u53d1\u9001\u77ed\u4fe1","text":"<p>\u5728\u6a21\u677f\u5ba1\u6838\u901a\u8fc7\u4e4b\u540e\uff0c\u5c31\u53ef\u4ee5\u901a\u8fc7\u540e\u53f0\u5bfc\u5165\u754c\u9762\u6216\u8c03\u7528\u63a5\u53e3\uff08\u5177\u4f53\u63a5\u53e3\u4f7f\u7528\u65b9\u5f0f\u89c1\u63a5\u53e3\u6587\u6863\uff09\u8fdb\u884c\u77ed\u4fe1\u53d1\u9001\u3002</p> <p>\u7528\u6237\u901a\u8fc7\u70b9\u51fb\u7ba1\u7406\u540e\u53f0\u7684\u3010\u5bfc\u5165\u3011-\u3010\u641c\u7d22\u3011-\u3010\u5bfc\u5165\u6587\u4ef6\u3011-\u3010\u63d0\u4ea4\u3011\u8fdb\u884c\u77ed\u4fe1\u53d1\u9001\u3002</p> <p></p> <p>\u9009\u62e9\u5177\u4f53\u6240\u9700\u7684\u901a\u9053\u3001\u77ed\u4fe1\u7c7b\u578b\u4ee5\u53ca\u6a21\u677f\u4e4b\u540e\uff0c\u5c31\u53ef\u4ee5\u901a\u8fc7\u5bfc\u5165 txt \u6216\u8005 csv \u683c\u5f0f\u7684\u6587\u672c\u6587\u4ef6\u8fdb\u884c\u53d1\u9001\u3002\u6587\u672c\u683c\u5f0f\u7b2c\u4e00\u5217\u4e3a\u624b\u673a\u53f7\uff0c2-5 \u5217\u586b\u53d8\u91cf\u53c2\u6570\uff0c\u65e0\u53d8\u91cf\u53c2\u6570\u7559\u7a7a\uff0ctxt \u4e0e csv \u9700\u7528\u82f1\u6587\u201c,\u201d\u5206\u9694\u5404\u5217\u3002\u6587\u672c\u683c\u5f0f\u5982\u4e0b\u56fe\uff1a</p> <p></p> <p>\u5bfc\u5165\u5b8c\u6587\u4ef6\u540e\uff0c\u70b9\u63d0\u4ea4\u5373\u53ef\u5b8c\u6210\u77ed\u4fe1\u53d1\u9001\u3002</p> <p></p> <p></p>"},{"location":"sms/#3","title":"3. \u6570\u636e\u7edf\u8ba1","text":""},{"location":"sms/#31","title":"3.1 \u77ed\u4fe1\u8d44\u6e90\u5305","text":"<p>\u53c8\u62cd\u4e91\u77ed\u4fe1\u670d\u52a1\u5c5e\u4e8e\u9884\u4ed8\u8d39\u670d\u52a1\uff0c\u9700\u63d0\u524d\u8d2d\u4e70\u77ed\u4fe1\u8d44\u6e90\u5305\u4e4b\u540e\u65b9\u53ef\u4f7f\u7528\u3002\u8d2d\u4e70\u77ed\u4fe1\u8d44\u6e90\u5305\u4e4b\u540e\uff0c\u91d1\u989d\u4f1a\u81ea\u52a8\u8f6c\u5316\u4e3a\u77ed\u4fe1\u53ef\u4f7f\u7528\u6761\u6570\u3002\u5728\u7edf\u8ba1\u7528\u6237\u77ed\u4fe1\u6761\u6570\u65f6\uff0c\u82e5\u77ed\u4fe1\u53d1\u9001\u5931\u8d25\uff0c\u5219\u4e0d\u6263\u9664\u4f7f\u7528\u6761\u6570\u3002</p> <p></p>"},{"location":"sms/#32","title":"3.2 \u62a5\u8868\u7edf\u8ba1","text":"<p>\u5728\u53d1\u9001\u660e\u7ec6\u4e2d\uff0c\u53ef\u4ee5\u6839\u636e\u6240\u53d1\u9001\u77ed\u4fe1\u7684\u624b\u673a\u53f7\u3001\u53d1\u9001\u72b6\u6001\u3001\u65f6\u95f4\uff0c\u67e5\u8be2\u6240\u6709\u77ed\u4fe1\u7684\u53d1\u9001\u72b6\u6001\u3002</p> <p></p> <p></p>"},{"location":"sms/#4","title":"4. \u5e38\u89c1\u95ee\u9898","text":"<p>1.\u00a0\u77ed\u4fe1\u6a21\u677f\u6700\u591a\u652f\u6301\u521b\u5efa\u591a\u5c11\u4e2a\uff1f</p> <p>\u7b54\uff1a\u5355\u4e2a\u901a\u9053\u4e0b\u7684\u6a21\u677f\u4e0a\u9650\u4e3a40\u4e2a\uff0c\u5373\u666e\u901a\u7b7e\u540d\u901a\u9053\u4e0e\u514d\u5ba1\u7b7e\u540d\u901a\u9053\u7684\u6a21\u677f\u4e0a\u9650\u5404\u4e3a40\u4e2a\u3002</p> <p>2.\u00a0\u77ed\u4fe1\u8d85\u51fa\u5b57\u6570\u5982\u4f55\u6536\u8d39\uff1f \u7b54\uff1a\u6bcf\u6761\u77ed\u4fe1\u5185\u5bb9\uff08\u5305\u62ec\u4f46\u4e0d\u9650\u4e8e\u6807\u70b9\u7b26\u53f7\u3001\u82f1\u6587\u5b57\u7b26\u3001\u6c49\u5b57\u7b49\uff09\u957f\u5ea6\u4e3a70\u4e2a\u5b57\u7b26\uff08\u5305\u542b\u7b7e\u540d\uff09\u5982\u53d1\u9001\u77ed\u4fe1\u5185\u5bb9\u8d85\u51fa70\u4e2a\u5b57\u7b26\uff0c\u5c06\u4ee5\u6bcf67\u5b57\u7b26\uff08\u5305\u62ec\u4f46\u4e0d\u9650\u4e8e\u6807\u70b9\u7b26\u53f7\u3001\u82f1\u6587\u5b57\u7b26\u3001\u6c49\u5b57\u7b49\uff09\u4e3a\u4e00\u6761\u77ed\u4fe1\u8fdb\u884c\u7d2f\u8ba1\u8ba1\u8d39\u3002\u5355\u6761\u77ed\u4fe1\u5b57\u7b26\u6570\u6700\u5927\u503c\u4e3a350\u4e2a\u5b57\u3002</p> <p>3.\u00a0\u77ed\u4fe1\u6a21\u677f\u5982\u4f55\u521b\u5efa\uff1f \u7b54\uff1a\u5728\u7ba1\u7406\u540e\u53f0\u3010\u77ed\u4fe1\u670d\u52a1\u3011-\u3010\u6a21\u677f\u3011-\u3010\u521b\u5efa\u6a21\u677f\u3011\u4e2d\u521b\u5efa\u3002</p> <p>4.\u00a0\u77ed\u4fe1\u8d44\u6e90\u5305\u53ef\u9000\u6b3e\u5417\uff1f \u7b54\uff1a\u77ed\u4fe1\u8d44\u6e90\u5305\u5728\u8d2d\u4e70\u6210\u529f\u540e\u4e0d\u652f\u6301\u9000\u6b3e\uff0c\u5efa\u8bae\u60a8\u6309\u9700\u8d2d\u4e70\u3002</p> <p>5.\u00a0\u77ed\u4fe1\u53d1\u9001\u6210\u529f\uff0c\u4f46\u5b9e\u9645\u672a\u80fd\u6536\u5230\u77ed\u4fe1\u662f\u4ec0\u4e48\u539f\u56e0\uff1f</p> <p>\u7b54\uff1a</p> <p>1\uff09\u624b\u673a\u662f\u5426\u957f\u65f6\u95f4\u672a\u5173\u673a\uff0c\u53ef\u4ee5\u91cd\u542f\u4e0b\uff1b</p> <p>2\uff09\u662f\u5426\u662f\u53cc\u5361\u53cc\u5f85\u624b\u673a\uff0c\u6362\u4e2a\u5361\u69fd\u8bd5\u8bd5\uff1b</p> <p>3\uff09\u662f\u90fd\u5b89\u88c5\u4e86\u5b89\u5168\u8f6f\u4ef6\uff0c\u77ed\u4fe1\u88ab\u62e6\u622a\u5230\u5783\u573e\u4fe1\u7bb1\u4e2d\uff1b</p> <p>4\uff09\u662f\u90fd\u5904\u4e8e\u505c\u673a\u72b6\u6001\uff1b</p> <p>5\uff09\u51fa\u4e8e\u9ed1\u540d\u5355\u72b6\u6001\uff0c\u6295\u8bc9\u8fc7\u8fd0\u8425\u5546\uff0c\u6216\u9000\u8ba2\u8fc7\u4e1a\u52a1\uff1b</p> <p>6.\u00a0\u77ed\u4fe1\u53d1\u9001\u5931\u8d25\uff0c\u8fd8\u4f1a\u6263\u8d39\u5417\uff1f</p> <p>\u7b54\uff1a\u4e0d\u4f1a\uff0c\u77ed\u4fe1\u53d1\u9001\u5931\u8d25\u7684\u8bdd\u4e0d\u4f1a\u6263\u8d39\u3002</p> <p>7.\u00a0\u77ed\u4fe1\u652f\u6301\u4e09\u7f51\u90fd\u53ef\u53d1\u9001\u5417\uff1f</p> <p>\u7b54\uff1a\u652f\u6301\u3002</p> <p>8.\u00a0\u53d8\u91cf\u4e2d\u662f\u5426\u53ef\u4ee5\u76f4\u63a5\u5199\u7f51\u7ad9\u94fe\u63a5\uff1f</p> <p>\u7b54\uff1a\u53ef\u4ee5\u3002</p> <p></p>"},{"location":"sms/#5","title":"5. \u63a5\u53e3\u6587\u6863","text":""},{"location":"sms/#51","title":"5.1 \u77ed\u4fe1\u6a21\u677f\u65b0\u589e\u63a5\u53e3","text":"<p>\u63a5\u53e3\u5730\u5740</p> <pre><code>POST https://sms-api.upyun.com/api/templates\n</code></pre> <p>\u53c2\u6570\u5b9a\u4e49</p> \u53c2\u6570 \u8bf4\u660e Required\uff08\u5fc5\u586b\uff09 title \u6a21\u677f\u6807\u9898(\u5c11\u4e8e12\u4e2a\u5b57) \u2714\ufe0f content \u6a21\u677f\u5185\u5bb9\uff08\u6a21\u7248\u7b7e\u540d+\u6a21\u7248\u5185\u5bb9+2\u5c11\u4e8e350\u4e2a\u5b57\uff09 \u2714\ufe0f temp_sign \u6a21\u7248\u7b7e\u540d\uff083\uff5e8\u4e2a\u5b57\uff09 \u2714\ufe0f sign_location \u6a21\u7248\u7b7e\u540d\u4f4d\u7f6e (top,bottom) \u2714\ufe0f type \u6a21\u677f\u7c7b\u578b (industry, marketing) \u2714\ufe0f report_type \u5ba1\u6838\u7c7b\u578b\uff08vip, general\uff09 \u2714\ufe0f <p>\u54cd\u5e94</p> <p>\u521b\u5efa\u6210\u529f\u8fd4\u56de\u54cd\u5e94\u7801\u548c\u5185\u5bb9\u3002</p> <pre><code>201 Created\n{\n  \"title\": \"title\",\n  \"temp_sign\": \"sign\",\n  \"content\": \"content\",\n  \"sign_location\": \"top\",\n  \"type\": \"industry\",\n  \"status\": \"review\",\n  \"updated_at\": \"2017-04-10T02:58:12.000Z\",\n  \"report_type\": \"vip\",\n  \"id\": 4,\n  \"owner\": {\n    \"id\": 1,\n    \"name\": \"taevas\",\n    \"general\": 8000,\n    \"vip\": 0,\n    \"industry\": 4,\n    \"marketing\": 0\n  }\n}\n</code></pre> <p>\u54cd\u5e94\u503c\u8bf4\u660e</p> \u53c2\u6570 \u8bf4\u660e title \u6a21\u677f\u6807\u9898 temp_sign \u6a21\u677f\u7b7e\u540d content \u6a21\u677f\u5185\u5bb9 status \u6a21\u677f\u72b6\u6001\uff08\u5ba1\u6838\u4e2d\u3001\u901a\u8fc7\u3001\u5931\u8d25) type \u77ed\u4fe1\u7c7b\u578b(\u8425\u9500\u3001\u884c\u4e1a) updated_at \u521b\u5efa\u65f6\u95f4 report_type \u5ba1\u6838\u7c7b\u578b\uff08\u514d\u7b7e, \u666e\u901a\uff09 id \u6a21\u677f\u7f16\u53f7 owner \u521b\u5efa\u8005\u4fe1\u606f owner.id \u7528\u6237\u7f16\u53f7 owner.name \u7528\u6237\u6635\u79f0 owner.general \u666e\u901a\u77ed\u4fe1\u5269\u4f59\u6761\u6570 owner.vip \u514d\u7b7e\u77ed\u4fe1\u5269\u4f59\u6761\u6570 owner.industry \u5df2\u53d1\u9001\u884c\u4e1a\u77ed\u4fe1\u6761\u6570 owner.marketing \u5df2\u53d1\u9001\u8425\u9500\u77ed\u4fe1\u6761\u6570 <p>\u8bf7\u6c42\u793a\u4f8b</p> <pre><code>POST https://sms-api.upyun.com/api/templates HTTP/1.1\nAuthorization: &lt;your token&gt;\n{\n  \"title\": \"title\",\n  \"content\": \"content\",\n  \"temp_sign\": \"sign\",\n  \"sign_location\": \"top\",\n  \"type\": \"industry\",\n  \"report_type\": \"vip\"\n}\n</code></pre>"},{"location":"sms/#52","title":"5.2 \u77ed\u4fe1\u6a21\u677f\u5220\u9664\u63a5\u53e3","text":"<p>\u63a5\u53e3\u5730\u5740</p> <pre><code>DELETE https://sms-api.upyun.com/api/templates/{template_id}\n</code></pre> <p>\u53c2\u6570\u5b9a\u4e49</p> \u53c2\u6570 \u8bf4\u660e Required\uff08\u5fc5\u586b\uff09 template_id \u6a21\u677f\u7f16\u53f7 \u2714\ufe0f <p>\u54cd\u5e94</p> <pre><code>204 No Content\n</code></pre> <p>\u8bf7\u6c42\u793a\u4f8b</p> <pre><code>DELETE https://sms-api.upyun.com/api/templates/4\nAuthorization: &lt;your token&gt;\n</code></pre>"},{"location":"sms/#53","title":"5.3 \u77ed\u4fe1\u6a21\u677f\u4fee\u6539\u63a5\u53e3","text":"<p>\u63a5\u53e3\u5730\u5740</p> <pre><code>PATCH /api/templates/{template_id}\n</code></pre> <p>\u53c2\u6570\u5b9a\u4e49</p> \u53c2\u6570 \u8bf4\u660e Required\uff08\u5fc5\u586b\uff09 template_id \u6a21\u677f\u7f16\u53f7 \u2714\ufe0f title \u6a21\u677f\u6807\u9898(\u5c11\u4e8e12\u4e2a\u5b57) content \u6a21\u677f\u5185\u5bb9\uff08\u6a21\u7248\u7b7e\u540d+\u6a21\u7248\u5185\u5bb9+2\u5c11\u4e8e350\u4e2a\u5b57\uff09 temp_sign \u6a21\u7248\u7b7e\u540d\uff083\uff5e8\u4e2a\u5b57\uff09 sign_location \u6a21\u7248\u7b7e\u540d\u4f4d\u7f6e (top,bottom) <p>\u54cd\u5e94</p> <pre><code>200 OK\n{\n  \"title\": \"hello\",\n  \"temp_sign\": \"sign\",\n  \"content\": \"content\",\n  \"sign_location\": \"top\",\n  \"type\": \"industry\",\n  \"status\": \"review\",\n  \"updated_at\": \"2017-04-10T03:31:18.000Z\",\n  \"id\": 3,\n  \"report_type\": \"vip\",\n  \"owner\": {\n    \"id\": 1,\n    \"name\": \"taevas\",\n    \"general\": 8000,\n    \"vip\": 0,\n    \"industry\": 4,\n    \"marketing\": 0\n  }\n}\n</code></pre> <p>\u54cd\u5e94\u503c\u8bf4\u660e</p> \u53c2\u6570 \u8bf4\u660e title \u6a21\u677f\u6807\u9898 temp_sign \u6a21\u677f\u7b7e\u540d content \u6a21\u677f\u5185\u5bb9 status \u6a21\u677f\u72b6\u6001\uff08\u5ba1\u6838\u4e2d\u3001\u901a\u8fc7\u3001\u5931\u8d25) type \u77ed\u4fe1\u7c7b\u578b(\u8425\u9500\u3001\u884c\u4e1a) updated_at \u521b\u5efa\u65f6\u95f4 report_type \u5ba1\u6838\u7c7b\u578b\uff08\u514d\u7b7e, \u666e\u901a\uff09 id \u6a21\u677f\u7f16\u53f7 owner \u521b\u5efa\u8005\u4fe1\u606f owner.id \u7528\u6237\u7f16\u53f7 owner.name \u7528\u6237\u6635\u79f0 owner.general \u666e\u901a\u77ed\u4fe1\u5269\u4f59\u6761\u6570 owner.vip \u514d\u7b7e\u77ed\u4fe1\u5269\u4f59\u6761\u6570 owner.industry \u5df2\u53d1\u9001\u884c\u4e1a\u77ed\u4fe1\u6761\u6570 owner.marketing \u5df2\u53d1\u9001\u8425\u9500\u77ed\u4fe1\u6761\u6570 <p>\u8bf7\u6c42\u793a\u4f8b</p> <pre><code>PATCH https://sms-api.upyun.com/api/templates/3\nAuthorization: &lt;your token&gt;\n{\n  \"title\": \"hello\"\n}\n</code></pre>"},{"location":"sms/#54","title":"5.4 \u67e5\u8be2\u6a21\u677f\u63a5\u53e3","text":"<p>\u63a5\u53e3\u5730\u5740</p> <pre><code>GET https://sms-api.upyun.com/api/templates\n</code></pre> <p>\u53c2\u6570\u5b9a\u4e49</p> \u53c2\u6570 \u8bf4\u660e Required\uff08\u5fc5\u586b\uff09 status \u6a21\u677f\u72b6\u6001 (review, success, defeat) type \u6a21\u677f\u7c7b\u578b (industry, marketing) report_type \u5ba1\u6838\u7c7b\u578b\uff08vip, general\uff09 <p>\u54cd\u5e94</p> <pre><code>200 OK\n{\n  \"templates\": [\n    {\n      \"title\": \"hello\",\n      \"temp_sign\": \"sign\",\n      \"content\": \"content\",\n      \"sign_location\": \"top\",\n      \"type\": \"industry\",\n      \"status\": \"review\",\n      \"updated_at\": \"2017-04-10T03:31:18.000Z\",\n      \"id\": 3,\n      \"report_type\": \"vip\",\n      \"owner\": {\n        \"id\": 1,\n        \"name\": \"taevas\",\n        \"general\": 8000,\n        \"vip\": 0,\n        \"industry\": 4,\n        \"marketing\": 0\n      }\n    }\n  ]\n}\n</code></pre> <p>\u54cd\u5e94\u503c\u8bf4\u660e</p> \u53c2\u6570 \u8bf4\u660e title \u6a21\u677f\u6807\u9898 temp_sign \u6a21\u677f\u7b7e\u540d content \u6a21\u677f\u5185\u5bb9 status \u6a21\u677f\u72b6\u6001\uff08\u5ba1\u6838\u4e2d\u3001\u901a\u8fc7\u3001\u5931\u8d25) type \u77ed\u4fe1\u7c7b\u578b(\u8425\u9500\u3001\u884c\u4e1a) updated_at \u521b\u5efa\u65f6\u95f4 report_type \u5ba1\u6838\u7c7b\u578b\uff08\u514d\u7b7e, \u666e\u901a\uff09 id \u6a21\u677f\u7f16\u53f7 owner \u521b\u5efa\u8005\u4fe1\u606f owner.id \u7528\u6237\u7f16\u53f7 owner.name \u7528\u6237\u6635\u79f0 owner.general \u666e\u901a\u77ed\u4fe1\u5269\u4f59\u6761\u6570 owner.vip \u514d\u7b7e\u77ed\u4fe1\u5269\u4f59\u6761\u6570 owner.industry \u5df2\u53d1\u9001\u884c\u4e1a\u77ed\u4fe1\u6761\u6570 owner.marketing \u5df2\u53d1\u9001\u8425\u9500\u77ed\u4fe1\u6761\u6570 <p>\u8bf7\u6c42\u793a\u4f8b</p> <pre><code>GET https://sms-api.upyun.com/api/templates?type=industry&amp;report_type=vip\nAuthorization: &lt;your token&gt;\n</code></pre>"},{"location":"sms/#55","title":"5.5 \u77ed\u4fe1\u53d1\u9001\u63a5\u53e3","text":"<p>\u63a5\u53e3\u5730\u5740</p> <pre><code>POST https://sms-api.upyun.com/api/messages\n</code></pre> <p>\u53c2\u6570\u5b9a\u4e49</p> \u53c2\u6570 \u8bf4\u660e Required\uff08\u5fc5\u586b\uff09 mobile \u624b\u673a\u53f7\uff0c\u9017\u53f7\u5206\u9694 \u2714\ufe0f template_id \u6a21\u677f\u7f16\u53f7 \u2714\ufe0f vars \u77ed\u4fe1\u53c2\u6570\uff08\u4ee5 <code>|</code> \u5206\u9694\uff09 <p>\u54cd\u5e94</p> <pre><code>200 OK\n{\n  \"message_ids\": [\n    {\n      \"error_code\": \"ILLEGAL_MOBILE\",\n      \"mobile\": \"15757\"\n    },\n    {\n      \"message_id\": 30,\n      \"mobile\": \"15757654321\u201d\n    }\n  ]\n}\n</code></pre> <p>\u54cd\u5e94\u503c\u8bf4\u660e</p> \u53c2\u6570 \u8bf4\u660e message_ids \u7ed9\u6240\u6709\u624b\u673a\u53f7\u53d1\u9001\u77ed\u4fe1\u7684\u7ed3\u679c error_code \u9519\u8bef\u60c5\u51b5 message_id message \u7f16\u53f7 mobile \u624b\u673a\u53f7 <p>\u8bf7\u6c42\u793a\u4f8b</p> <pre><code>POST https://sms-api.upyun.com/api/messages\nAuthorization: &lt;your token&gt;\n{\n  \"template_id\": 2,\n  \"mobile\": \"15757,15757654321\u201d\n}\n</code></pre>"},{"location":"sms/#56","title":"5.6 \u77ed\u4fe1\u62a5\u8868\u67e5\u8be2\u63a5\u53e3","text":"<p>\u63a5\u53e3\u5730\u5740</p> <pre><code>GET https://sms-api.upyun.com/api/messages\n</code></pre> <p>\u53c2\u6570\u5b9a\u4e49</p> \u53c2\u6570 \u8bf4\u660e Required\uff08\u5fc5\u586b\uff09 date \u65e5\u671f mobile \u624b\u673a\u53f7 status \u6d88\u606f\u53d1\u9001\u7684\u72b6\u6001 page \u9875\u7801 per_page \u6bcf\u9875\u663e\u793a\u6570\u91cf <p>\u54cd\u5e94</p> <pre><code>200 OK\n{\n  \"messages\": [\n    {\n      \"id\": 4,\n      \"template_id\": 2,\n      \"report_type\": \"vip\",\n      \"title\": \"\u6d4b\u8bd5\u6d4b\u8bd5\",\n      \"type\": \"industry\",\n      \"content\": \"hello\uff0chello\",\n      \"temp_sign\": \"\u843d\u5b50\u6642\",\n      \"mobile\": \"15757654321\u201d,\n      \"sent_at\": null,\n      \"created_at\": \"2017-04-07T08:47:37.000Z\",\n      \"status\": \"processing\",\n      \"quantity\": 1,\n      \"owner\": {\n        \"id\": 1,\n        \"name\": \"taevas\",\n        \"general\": 8000,\n        \"vip\": 0,\n        \"industry\": 4,\n        \"marketing\": 0\n      }\n    }\n    {\n      \"id\": 2,\n      \"template_id\": 2,\n      \"report_type\": \"vip\",\n      \"title\": \"\u6d4b\u8bd5\u6d4b\u8bd5\",\n      \"type\": \"industry\",\n      \"content\": \"hello\uff0chello\u3010\u843d\u5b50\u6642\u3011\",\n      \"temp_sign\": \"\u843d\u5b50\u6642\",\n      \"mobile\": \"15757123456\u201d,\n      \"sent_at\": \"2017-04-06T08:36:01.000Z\",\n      \"created_at\": \"2017-04-06T08:36:00.000Z\",\n      \"status\": \"success\",\n      \"quantity\": 1,\n      \"owner\": {\n        \"id\": 1,\n        \"name\": \"taevas\",\n        \"general\": 8000,\n        \"vip\": 0,\n        \"industry\": 4,\n        \"marketing\": 0\n      }\n    }\n  ],\n  \"total\": 2\n}\n</code></pre> <p>\u54cd\u5e94\u503c\u8bf4\u660e</p> \u53c2\u6570 \u8bf4\u660e id \u77ed\u4fe1\u7f16\u53f7 template_id \u6a21\u677f\u7f16\u53f7 report_type \u5ba1\u6838\u7c7b\u578b title \u6a21\u677f\u6807\u9898 type \u77ed\u4fe1\u7c7b\u578b(\u8425\u9500\u3001\u884c\u4e1a) content \u6a21\u677f\u5185\u5bb9 temp_sign \u6a21\u677f\u7b7e\u540d mobile \u624b\u673a\u53f7 sent_at \u53d1\u9001\u65f6\u95f4 created_at \u521b\u5efa\u65f6\u95f4 status \u77ed\u4fe1\u53d1\u9001\u72b6\u6001 owner \u521b\u5efa\u8005\u4fe1\u606f owner.id \u7528\u6237\u7f16\u53f7 owner.name \u7528\u6237\u6635\u79f0 owner.general \u666e\u901a\u77ed\u4fe1\u5269\u4f59\u6761\u6570 owner.vip \u514d\u7b7e\u77ed\u4fe1\u5269\u4f59\u6761\u6570 owner.industry \u5df2\u53d1\u9001\u884c\u4e1a\u77ed\u4fe1\u6761\u6570 owner.marketing \u5df2\u53d1\u9001\u8425\u9500\u77ed\u4fe1\u6761\u6570 <p>\u8bf7\u6c42\u793a\u4f8b</p> <pre><code>curl -H \"Authorization: &lt;your token&gt;\" https://sms-api.upyun.com/api/messages?mobile=15757654321\n</code></pre>"},{"location":"sms/#6","title":"6. \u9519\u8bef\u7801","text":""},{"location":"sms/#61","title":"6.1 \u9519\u8bef\u7801\u5217\u8868","text":"\u9519\u8bef\u7801 \u8bf4\u660e \u72b6\u6001\u7801 INVALID_FILE \u6587\u4ef6\u4e0d\u5b58\u5728\u6216\u5927\u5c0f\u683c\u5f0f\u4e0d\u7b26\u5408\u89c4\u8303 400 MISSING_PARAMETER \u5fc5\u586b\u9879\u4e3a\u7a7a 400 INVALID_CREDENTIALS \u65e0\u6548\u7684\u8ba4\u8bc1 401 REQUIRE_TEMPLATE_OWNER \u6ca1\u6709\u6a21\u677f\u7684\u6743\u9650 403 REQUIRE_SIGNATURE_OWNER \u6ca1\u6709\u7b7e\u540d\u7684\u6743\u9650 403 USER_NOT_FOUND \u7528\u6237\u4e0d\u5b58\u5728 404 TEMPLATE_NOT_FOUND \u6a21\u677f\u4e0d\u5b58\u5728 404 NOT_FOUND \u9875\u9762\u4e0d\u5b58\u5728 404 INSUFFICIENT_FUNDS \u77ed\u4fe1\u989d\u5ea6\u4e0d\u8db3\uff0c\u8bf7\u5145\u503c 409 MOBILE_LIMIT \u624b\u673a\u53f7\u6570\u91cf\u4e0a\u9650 409 ILLEGAL_MOBILE \u624b\u673a\u53f7\u65e0\u6548 409 ILLEGAL_PARAMER \u53c2\u6570\u65e0\u6548 409 TEMPLATE_LIMIT \u6a21\u677f\u6570\u91cf\u8fbe\u5230\u4e0a\u9650 409 TEMPLATE_AUDITING \u6a21\u677f\u6b63\u5728\u5ba1\u6838\uff0c\u65e0\u6cd5\u4f7f\u7528 409 TEMPLATE_NOT_AUDITED \u6a21\u677f\u672a\u5ba1\u6838 409 ILLEGAL_SIGNATURE \u6a21\u7248\u7b7e\u540d\u957f\u5ea6\u4e0d\u5408\u6cd5\uff0c\u5fc5\u987b\u4e3a3\uff5e8\u4e2a\u5b57 409 ILLEGAL_TITLE \u6a21\u7248\u6807\u9898\u957f\u5ea6\u4e0d\u5408\u6cd5\uff0c\u5fc5\u987b\u5c0f\u4e8e12\u4e2a\u5b57 409 TEMPLATE_FAILED \u6a21\u677f\u5ba1\u6838\u5931\u8d25\uff0c\u8bf7\u91cd\u65b0\u63d0\u4ea4 409 ILLEGAL_CONTENT_LENGTH \u6a21\u7248\u5185\u5bb9\u957f\u5ea6\u4e0d\u5408\u6cd5\uff0c\u7b7e\u540d+\u5185\u5bb9\u5fc5\u987b\u5c0f\u4e8e348\u4e2a\u5b57 409 ILLEGAL_REPORT_TYPE \u65e0\u6548\u7684\u5ba1\u6838\u7c7b\u578b 409 ILLEGAL_TEMPLATE_ID \u65e0\u6548\u7684\u6a21\u677f\u7f16\u53f7 422 SMS_SYSTEM_ERROR SMS \u670d\u52a1\u5f02\u5e38 500 SYSTEM_ERROR \u7cfb\u7edf\u9519\u8bef 500"},{"location":"sms/#62","title":"6.2 \u9519\u8bef\u7801\u54cd\u5e94","text":"<pre><code>400 Bad Request\n{\n  \u201cerror_code\u201d: \u201cINVALID_FILE\u201d,\n  \u201cmessage\u201d: \u201c\u6587\u4ef6\u4e0d\u5b58\u5728\u6216\u5927\u5c0f\u683c\u5f0f\u4e0d\u7b26\u5408\u89c4\u8303\u201d\n}\n</code></pre>"},{"location":"sms/#63","title":"6.3 \u54cd\u5e94\u8bf4\u660e","text":"\u53c2\u6570 \u8bf4\u660e \u72b6\u6001\u7801 error_code \u4ec5\u51fa\u73b0\u5728\u9519\u8bef\u7801\u5217\u8868\u4e2d message \u989d\u5916\u7684\u63cf\u8ff0\uff0c\u4e0d\u4e0e\u9519\u8bef\u7801\u5217\u8868\u4e2d\u7684\u8bf4\u660e\u76f8\u5339\u914d"},{"location":"sms/#7","title":"7. \u53d1\u9001\u5931\u8d25\u539f\u56e0\u67e5\u8be2","text":"<p>\u56e0\u8fd0\u8425\u5546\u5404\u4e2a\u7f51\u5173\u9488\u5bf9\u9519\u8bef\u7801\u5b9a\u4e49\u4e0d\u540c, \u8fd4\u56de\u7684\u542b\u4e49\u4e5f\u4e0d\u5c3d\u76f8\u540c\u6240\u4ee5\u8be5\u9519\u539f\u56e0\u67e5\u8be2\u5747\u4e3a\u7ecf\u9a8c\u503c, \u4ec5\u4f9b\u53c2\u8003\u3002</p> <p>\u5982\u9700\u4e86\u89e3\u8be6\u7ec6\u539f\u56e0\uff0c\u8bf7\u8054\u7cfb\u5ba2\u670d\u3002</p> <p>\u9644\u4ef6\uff1a\u53d1\u9001\u539f\u56e0\u67e5\u8be2\u5217\u8868</p>"},{"location":"sms/#8","title":"8. \u5e38\u7528\u8bed\u8a00\u793a\u4f8b\u4ee3\u7801","text":"<p>PHP \u53d1\u9001\u793a\u4f8b\u4ee3\u7801</p> <pre><code>&lt;?php\n// \u6ce8\u610f\uff1a\u9700\u8981\u66ff\u6362\u8fd9\u91cc\u7684\u8bf7\u6c42\u53c2\u6570\u548c $options['http']['header'] \u4e2d\u7684 token\n$msg['mobile']='135xxxxxxxx'; // \u5fc5\u586b\u53c2\u6570\uff0c\u591a\u4e2a\u624b\u673a\u53f7\u4f7f\u7528\u9017\u53f7\u5206\u9694\n$msg['template_id'] = 1;  // \u5fc5\u586b\u53c2\u6570\uff0c\u77ed\u4fe1\u6a21\u677f ID\n$msg['vars'] = 'a|b'; // \u9009\u586b\u53c2\u6570\uff0c\u6a21\u677f\u53d8\u91cf\n\n$url = 'https://sms-api.upyun.com/api/messages';\n\n$options = array(\n    'http' =&gt; array(\n        'header'  =&gt; \"Content-type: application/x-www-form-urlencoded\\r\\nAuthorization: &lt;YOUR_TOKEN&gt;\",\n        'method'  =&gt; 'POST',\n        'content' =&gt; http_build_query($msg)\n    )\n);\n$context  = stream_context_create($options);\n$result = file_get_contents($url, false, $context);\n</code></pre> <p>JAVA \u53d1\u9001\u793a\u4f8b\u4ee3\u7801</p> <pre><code>URL url = new URL(\"https://sms-api.upyun.com/api/messages\");\n\n//\u8bbe\u7f6e JSON \u53c2\u6570\nJSONObject object = new JSONObject();\nobject.put(\"template_id\", 1);\nobject.put(\"mobile\", \"135xxxxxxxx\");\n\nHttpURLConnection conn = (HttpURLConnection) url.openConnection();\n// \u8bbe\u7f6e\u5fc5\u8981\u53c2\u6570\nconn.setConnectTimeout(10000);\nconn.setUseCaches(false);\nconn.setDoOutput(true);\nconn.setRequestMethod(\"POST\");\nconn.setRequestProperty(\"Connection\", \"Keep-Alive\");\nconn.setRequestProperty(\"Authorization\", \"&lt;YOUR_TOKEN&gt;\");\nconn.setRequestProperty(\"Content-type\", \"application/json\");\n\n// \u521b\u5efa\u94fe\u63a5\nconn.connect();\nOutputStream os = conn.getOutputStream();\nos.write(object.toString().getBytes(\"UTF-8\"));\n\n//Gets the status code from an HTTP response message\nint code = conn.getResponseCode();\n\nInputStreamReader reader = new InputStreamReader(conn.getInputStream());\nBufferedReader br = new BufferedReader(reader);\nchar[] chars = new char[1024];\nint length = 0;\nStringBuilder result = new StringBuilder();\nwhile ((length = br.read(chars)) != -1) {\n    result.append(chars, 0, length);\n}\nSystem.out.println(\"code:\" + code + \"::\" + result.toString());\n</code></pre>"},{"location":"video/","title":"\u77ed\u89c6\u9891\u7b80\u4ecb","text":""},{"location":"video/#_1","title":"\u6982\u8ff0","text":"<p>\u53c8\u62cd\u4e91\u77ed\u89c6\u9891\uff08UPYUN Short Video\uff09\u96c6\u77ed\u89c6\u9891\u91c7\u96c6\u3001\u4e0a\u4f20\u3001\u5b58\u50a8\u3001\u5206\u53d1\u3001\u64ad\u653e\u4e8e\u4e00\u4f53\uff0c\u501f\u52a9\u77ed\u89c6\u9891 SDK\u3001\u4e0a\u4f20\u52a0\u901f\u3001\u4e0d\u9650\u91cf\u5b58\u50a8\u3001\u7a33\u5b9a\u5feb\u901f\u7684 CDN \u53ca\u64ad\u653e\u5668 SDK\uff0c\u4e3a\u7528\u6237\u63d0\u4f9b\u4e13\u4e1a\u53ef\u9760\u7684\u77ed\u89c6\u9891\u89e3\u51b3\u65b9\u6848\u3002</p> <p></p>"},{"location":"video/#_2","title":"\u89e3\u51b3\u65b9\u6848","text":""},{"location":"video/#sdk","title":"\u77ed\u89c6\u9891 SDK","text":"<p>\u7528\u4e8e\u77ed\u89c6\u9891\u7684\u5f55\u5236\uff0c\u5206\u4e3a\u62cd\u6444\u3001\u7f16\u8f91\u3001\u5408\u6210\u3001\u4e0a\u4f20\u56db\u90e8\u5206\u3002</p> <p>\u62cd\u6444 \u62cd\u6444\u89c6\u9891\uff0c\u53ef\u4ee5\u8bbe\u7f6e\u62cd\u6444\u65f6\u957f\uff0c\u62cd\u6444\u7684\u8fc7\u7a0b\u53ef\u4ee5\u6dfb\u52a0\u7f8e\u989c\u3001\u6ee4\u955c\u3001\u8d34\u7eb8\u3001\u5927\u773c\u7626\u8138\u7b49\u3002</p> <p></p> <p>\u7f16\u8f91 \u5bf9\u62cd\u6444\u7684\u89c6\u9891\u8fdb\u884c\u5904\u7406\uff0c\u6bd4\u5982\u526a\u8f91\u3001\u52a0\u5165\u6ee4\u955c\u3001\u8c03\u6574\u80cc\u666f\u97f3\u4e50\u7b49\u3002</p> <p></p> <p>\u5408\u6210 \u628a\u7f16\u8f91\u597d\u540e\u7684\u89c6\u9891\u751f\u6210\u6587\u4ef6\u3002</p> <p></p> <p>\u4e0a\u4f20 \u4e0a\u4f20\u77ed\u89c6\u9891\u6587\u4ef6\u5230\u4e91\u5b58\u50a8\u3002</p> <p></p> <p>SDK \u53ca\u6587\u6863\uff1aAndroid \u77ed\u89c6\u9891 SDK\u3001iOS \u77ed\u89c6\u9891 SDK</p>"},{"location":"video/#_3","title":"\u4e91\u5b58\u50a8","text":"<p>\u4e0a\u4f20\u4e0a\u6765\u7684\u77ed\u89c6\u9891\u5b58\u653e\u5728\u4e91\u5b58\u50a8\u3002</p> <p>\u53c8\u62cd\u4e91\u5b58\u50a8\u662f\u5bf9\u8c61\u5b58\u50a8\uff0c\u4e00\u4efd\u6570\u636e\u5199\u4e09\u4efd\uff0c\u652f\u6301\u4e0d\u9650\u91cf\u5b58\u653e\u6570\u636e\uff0c\u6536\u8d39\u4ec5\u6309\u5b58\u653e\u6570\u636e\u91cf\u6536\u8d39\uff0c\u76f8\u6bd4\u5176\u4ed6\u4e91\u5382\u5546\uff0c\u5c11\u4e86\u8bf7\u6c42\u8d39\u7528\u3001\u6d41\u51fa\u6d41\u91cf\u8d39\u7528\u3002</p> <p>\u53e6\u5916\uff0c\u548c\u53c8\u62cd\u4e91 CDN \u642d\u914d\u4f7f\u7528\uff0c\u63d0\u4f9b CDN \u4f7f\u7528\u6d41\u91cf 1:1 \u7684\u514d\u8d39\u5b58\u50a8\u7a7a\u95f4\uff0c\u8ba9\u5b58\u50a8\u6210\u672c\u66f4\u4f4e\u3002</p> <p>\u76f8\u5173\u9605\u8bfb\uff1a\u5feb\u901f\u5165\u95e8\u3001\u5f00\u53d1\u8005\u5de5\u5177</p>"},{"location":"video/#cdn","title":"CDN \u5206\u53d1","text":"<p>\u5f53\u7528\u6237\u8bbf\u95ee\u77ed\u89c6\u9891\u65f6\uff0c\u901a\u8fc7 CDN\u8fdb\u884c\u5168\u56fd\u548c\u6d77\u5916\u5206\u53d1\uff0c\u8ba9\u7528\u6237\u5c31\u8fd1\u8bbf\u95ee\u5230\u77ed\u89c6\u9891\u3002</p> <p>\u53e6\u5916\uff0cCDN \u4f1a\u628a\u8bbf\u95ee\u8fc7\u7684\u77ed\u89c6\u9891\u7f13\u5b58\u8d77\u6765\uff0c\u4e0b\u6b21\u6709\u7528\u6237\u6765\u8bbf\u95ee\u65f6\uff0c\u76f4\u63a5\u628a\u5b83\u63d0\u4f9b\u7ed9\u7528\u6237\uff0c\u6781\u5927\u7684\u63d0\u5347\u4e86\u8bbf\u95ee\u901f\u5ea6\u3002</p> <p>\u76ee\u524d\uff0c\u53c8\u62cd\u4e91 CDN \u5728\u56fd\u5185\u5efa\u8bbe\u4e86 200+ \u8282\u70b9\uff0c\u6d77\u5916\u5efa\u8bbe\u4e86 15+ \u8282\u70b9\uff0c\u6ee1\u8db3\u5168\u56fd\u5404\u5730\u548c\u6d77\u5916\u7684\u8bbf\u95ee\u9700\u6c42\u3002</p> <p>\u76f8\u5173\u9605\u8bfb\uff1a\u5feb\u901f\u5165\u95e8\u3001\u670d\u52a1\u7ba1\u7406</p> <p></p>"},{"location":"video/#sdk_1","title":"\u64ad\u653e\u5668 SDK","text":"<p>\u63d0\u4f9b Android \u64ad\u653e\u5668 SDK \u548c iOS \u64ad\u653e\u5668 SDK\uff0c\u652f\u6301 Android\u3001iPhone\u3001iPad \u7b49\u79fb\u52a8\u8bbe\u5907\u64ad\u653e\u77ed\u89c6\u9891\uff0c\u652f\u6301\u79d2\u64ad\u3001\u5206\u6bb5\u52a0\u8f7d\u3001\u62d6\u62c9\u7b49\u529f\u80fd\uff0c\u7701\u53bb\u4f01\u4e1a\u5f00\u53d1\u64ad\u653e\u5668\u7684\u65f6\u95f4\u3002</p> <p></p> <p>\u76f8\u5173\u9605\u8bfb\uff1aAndroid \u64ad\u653e\u5668 SDK\u3001iOS \u64ad\u653e\u5668 SDK</p>"},{"location":"video/#_4","title":"\u4e91\u7aef\u5904\u7406","text":"<p>\u4e91\u7aef\u5904\u7406\u662f\u4e2a\u53ef\u9009\u7684\u670d\u52a1\uff0c\u7531\u4e8e\u7ec8\u7aef\u7684\u8d44\u6e90\u6709\u9650\uff0c\u4e0d\u80fd\u505a\u590d\u6742\u5904\u7406\uff0c\u5982\u679c\u9700\u8981\u590d\u6742\u7684\u89c6\u9891\u5904\u7406\uff0c\u9700\u8981\u4f7f\u7528\u4e91\u7aef\u5904\u7406\u3002</p> <p>\u4e91\u7aef\u77ed\u89c6\u9891\u5904\u7406\u662f\u5f02\u6b65\u8fdb\u884c\u7684\uff0c\u63d0\u4f9b\u8f6c\u7801\u3001\u5207\u7247\u3001\u526a\u8f91\u3001\u62fc\u63a5\u3001\u6c34\u5370\u3001\u622a\u56fe\u7b49\u529f\u80fd\uff0c\u63d0\u4f9b\u94fe\u5f0f\u5904\u7406\uff08\u987a\u5e8f\u6267\u884c\u591a\u4e2a\u529f\u80fd\uff09\uff0c\u6ee1\u8db3\u590d\u6742\u5904\u7406\u9700\u8981\u3002</p> <p>\u76f8\u5173\u9605\u8bfb\uff1a\u5f02\u6b65\u97f3\u89c6\u9891\u5904\u7406\u3001\u540c\u6b65\u89c6\u9891\u5904\u7406</p>"},{"location":"video/#_5","title":"\u5e94\u7528\u573a\u666f","text":"<p>\u641e\u7b11\u5e7d\u9ed8</p> <p>\u4ee5\u7cd7\u4e8b\u767e\u79d1\u4e3a\u4f8b\uff0c\u7cd7\u4e8b\u767e\u79d1\u4f5c\u4e3a\u5e7d\u9ed8\u641e\u7b11\u7c7b\u7684\u5de8\u5934\uff0c\u6211\u4eec\u4e3a\u7cd7\u4e8b\u767e\u79d1\u63d0\u4f9b\u4e86\u4e0a\u4f20\u3001\u4e91\u5b58\u50a8\u3001\u5206\u53d1\u3001\u64ad\u653e\uff0c\u5e2e\u52a9\u7cd7\u4e8b\u767e\u79d1\u6784\u5efa\u641e\u7b11\u77ed\u89c6\u9891\u670d\u52a1\u3002</p> <p>\u7535\u5546\u4e70\u5bb6\u5356\u5bb6\u79c0</p> <p>\u4ee5\u6d0b\u7801\u5934\u4e3a\u4f8b\uff0c\u4f7f\u7528\u4e00\u6574\u5957\u65b9\u6848\uff0c\u5feb\u901f\u4e0a\u7ebf\u4e86\u4e70\u5bb6\u5356\u5bb6\u77ed\u89c6\u9891\u79c0\uff0c\u76f8\u6bd4\u4e4b\u524d\u7684\u6587\u5b57\u56fe\u7247\u8bc4\u8bba\uff0c\u77ed\u89c6\u9891\u5c55\u793a\u7684\u4fe1\u606f\u66f4\u4e30\u5bcc\u3001\u66f4\u6709\u8da3\uff0c\u7528\u6237\u6d3b\u8dc3\u5ea6\u66f4\u9ad8\u3002</p> <p>\u6237\u5916&amp;\u65c5\u6e38</p> <p>\u8bb0\u5f55\u7f8e\u666f\u3001\u6237\u5916\u7ecf\u5386\uff0c\u901a\u8fc7\u65ad\u70b9\u7eed\u62cd\u3001\u56de\u5220\u529f\u80fd\uff0c\u628a\u5b83\u7f16\u8f91\u6210\u4e00\u4e2a\u76f8\u518c\u96c6\u6216\u8005 MV\uff0c\u4e92\u76f8\u5206\u4eab\u3002\u53e6\u5916\uff0c\u8fd8\u6709\u641e\u7b11\u8d34\u7eb8\u4f9b\u60a8\u9009\u62e9\u3002</p> <p>\u7f8e\u98df</p> <p>\u4f5c\u4e3a\u4e00\u4e2a\u5403\u8d27\uff0c\u600e\u4e48\u5c11\u4e86\u8bb0\u5f55\u7f8e\u98df\u5462\u3002\u901a\u8fc7\u77ed\u89c6\u9891\u89e3\u51b3\u65b9\u6848\uff0c\u968f\u65f6\u968f\u5730\u8bb0\u5f55\u5403\u7f8e\u98df\u3001\u5236\u4f5c\u7f8e\u98df\u3001\u805a\u4f1a\u7b49\u7684\u524d\u540e\u8fc7\u7a0b\uff0c\u8ba9\u5feb\u4e50\u6c38\u4e45\u3002</p> <p></p>"},{"location":"video/#_6","title":"\u6536\u8d39\u8bf4\u660e","text":"<p>\u89e3\u51b3\u65b9\u6848\u6309\u77ed\u89c6\u9891 SDK\u3001\u4e91\u5b58\u50a8\u3001CDN \u6536\u8d39\uff0c\u4e0a\u4f20\u3001\u64ad\u653e\u5668 SDK \u514d\u8d39\u3002\u5982\u679c\u6709\u4f7f\u7528\u4e91\u7aef\u5904\u7406\uff0c\u4e91\u7aef\u5904\u7406\u9700\u8981\u6536\u8d39\u3002</p> <p>\u76f8\u5173\u9605\u8bfb\uff1a\u4ef7\u683c</p> <p></p>"},{"location":"video/#sdk-key","title":"SDK \u7248\u672c Key \u83b7\u53d6","text":"<p>\u77ed\u89c6\u9891 SDK \u63d0\u4f9b\u4e00\u4e2a\u514d\u8d39\u7248\u548c\u4e24\u4e2a\u6536\u8d39\u7248\uff0c\u4efb\u4f55\u7248\u672c\u4f7f\u7528\u90fd\u9700\u8981\u6388\u6743\uff08key\uff09\u3002</p> <p>\u514d\u8d39\u7248\u7684 Key \u6709\u6548\u671f\u4e00\u5e74\uff0c\u5230\u671f\u540e\u53ef\u4ee5\u7eed\u671f\u3002\u6536\u8d39\u7248\u53ef\u4ee5\u514d\u8d39\u8bd5\u7528\u4e00\u4e2a\u6708\u3002</p> <p>\u83b7\u53d6 Key\uff0c\u8bf7\u63d0\u4f9b\u5e94\u7528\u540d\u79f0\u3001\u7533\u8bf7\u4f7f\u7528\u7684 SDK \u7248\u672c\u3001\u4f7f\u7528\u7684\u5e73\u53f0\uff08\u5b89\u5353\u3001iOS\uff09\u3001bundleID\uff08iOS\uff09\u3001\u5305\u540d\uff08Android\uff09\u7ed9\u60a8\u7684\u5546\u52a1\u7ecf\u7406\uff0c\u6216\u8005\u8054\u7cfb\u6211\u4eec\u3002</p> <p>\u76f8\u5173\u9605\u8bfb\uff1a\u77ed\u89c6\u9891 SDK \u7248\u672c</p>"},{"location":"video/short_video_demo/","title":"\u77ed\u89c6\u9891 DEMO","text":""},{"location":"video/short_video_demo/#_1","title":"\u6982\u8ff0","text":"<p>\u4e3a\u4e86\u8ba9\u60a8\u66f4\u597d\u7684\u4e86\u89e3\u77ed\u89c6\u9891 SDK \u548c\u64ad\u653e\u5668 SDK \uff0c\u6211\u4eec\u5236\u4f5c\u4e86\u6f14\u793a APP\u3002</p> <p>APP \u5305\u542b\u77ed\u89c6\u9891 SDK \u548c\u64ad\u653e\u5668 SDK\uff0c\u6b22\u8fce\u4f53\u9a8c\u3002</p> <p></p> <p>\u76f8\u5173\u9605\u8bfb\uff1a\u77ed\u89c6\u9891 SDK \u7684\u529f\u80fd\u4ecb\u7ecd\u3001\u64ad\u653e\u5668 SDK \u7684\u529f\u80fd\u4ecb\u7ecd</p> <p>SDK \u53ca\u6587\u6863\uff1aAndroid \u77ed\u89c6\u9891 SDK\u3001iOS \u77ed\u89c6\u9891 SDK</p>"},{"location":"video/short_video_demo/#_2","title":"\u4f7f\u7528\u8bf4\u660e","text":"<p>\u6253\u5f00 APP\uff0c\u9996\u9875\u6709\u4e09\u4e2a\u6a21\u5757\uff0c\u62cd\u6444\u89c6\u9891\u3001\u7f16\u8f91\u89c6\u9891\u3001\u64ad\u653e\u89c6\u9891\u3002</p> <p></p> <p>\u62cd\u6444\u89c6\u9891 \u6f14\u793a\u77ed\u89c6\u9891 SDK \u7684\u62cd\u6444\u90e8\u5206\u3002</p> <p></p> <p>\u7f16\u8f91\u89c6\u9891 \u6f14\u793a\u77ed\u89c6\u9891 SDK \u7684\u7f16\u8f91\u90e8\u5206\uff0c\u7f16\u8f91\u5b8c\u6210\u540e\uff0c\u70b9 \u201c\u4fdd\u5b58\u201d\uff0c\u5408\u6210\u77ed\u89c6\u9891\uff08\u751f\u6210\u77ed\u89c6\u9891\uff09\u5e76\u4fdd\u5b58\u5230\u672c\u5730\u3002</p> <p>\u7279\u522b\u5730\uff0c\u8fd9\u91cc\u6ca1\u6709\u6f14\u793a\u4e0a\u4f20\u90e8\u5206\uff0c\u5b9e\u9645 SDK \u91cc\u9762\u662f\u6709\u7684\u3002</p> <p></p> <p>\u64ad\u653e\u89c6\u9891 \u6f14\u793a\u64ad\u653e\u5668 SDK\u3002</p> <p></p>"},{"location":"video/short_video_demo/#_3","title":"\u8054\u7cfb\u65b9\u5f0f","text":"<p>\u60a8\u5bf9 APP \u6709\u4efb\u4f55\u7591\u95ee\uff0c\u6216\u8005\u9700\u8981\u8fdb\u4e00\u6b65\u4e86\u89e3\u77ed\u89c6\u9891\u89e3\u51b3\u65b9\u6848\uff0c\u53ef\u4ee5\u901a\u8fc7\u5982\u4e0b\u65b9\u5f0f\u8054\u7cfb\u6211\u4eec\u3002</p> <p>QQ\uff1a200576786</p> <p>Tel\uff1a0571-81020203</p> <p>Email\uff1asales@upyun.com</p>"}]}